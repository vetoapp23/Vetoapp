var v_=e=>{throw TypeError(e)};var Gy=(e,t,n)=>t.has(e)||v_("Cannot "+n);var Y=(e,t,n)=>(Gy(e,t,"read from private field"),n?n.call(e):t.get(e)),Be=(e,t,n)=>t.has(e)?v_("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Oe=(e,t,n,r)=>(Gy(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),lt=(e,t,n)=>(Gy(e,t,"access private method"),n);var Ff=(e,t,n,r)=>({set _(a){Oe(e,t,a,n)},get _(){return Y(e,t,r)}});function EB(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var dr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ct(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function OB(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var a=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return e[r]}})}),n}var TO={exports:{}},Zv={},EO={exports:{}},gt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cf=Symbol.for("react.element"),DB=Symbol.for("react.portal"),MB=Symbol.for("react.fragment"),IB=Symbol.for("react.strict_mode"),$B=Symbol.for("react.profiler"),RB=Symbol.for("react.provider"),FB=Symbol.for("react.context"),LB=Symbol.for("react.forward_ref"),BB=Symbol.for("react.suspense"),zB=Symbol.for("react.memo"),VB=Symbol.for("react.lazy"),x_=Symbol.iterator;function qB(e){return e===null||typeof e!="object"?null:(e=x_&&e[x_]||e["@@iterator"],typeof e=="function"?e:null)}var OO={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},DO=Object.assign,MO={};function md(e,t,n){this.props=e,this.context=t,this.refs=MO,this.updater=n||OO}md.prototype.isReactComponent={};md.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};md.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function IO(){}IO.prototype=md.prototype;function YN(e,t,n){this.props=e,this.context=t,this.refs=MO,this.updater=n||OO}var QN=YN.prototype=new IO;QN.constructor=YN;DO(QN,md.prototype);QN.isPureReactComponent=!0;var y_=Array.isArray,$O=Object.prototype.hasOwnProperty,XN={current:null},RO={key:!0,ref:!0,__self:!0,__source:!0};function FO(e,t,n){var r,a={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)$O.call(t,r)&&!RO.hasOwnProperty(r)&&(a[r]=t[r]);var l=arguments.length-2;if(l===1)a.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)a[r]===void 0&&(a[r]=l[r]);return{$$typeof:cf,type:e,key:i,ref:o,props:a,_owner:XN.current}}function UB(e,t){return{$$typeof:cf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function JN(e){return typeof e=="object"&&e!==null&&e.$$typeof===cf}function WB(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var j_=/\/+/g;function Yy(e,t){return typeof e=="object"&&e!==null&&e.key!=null?WB(""+e.key):t.toString(36)}function Lp(e,t,n,r,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case cf:case DB:o=!0}}if(o)return o=e,a=a(o),e=r===""?"."+Yy(o,0):r,y_(a)?(n="",e!=null&&(n=e.replace(j_,"$&/")+"/"),Lp(a,t,n,"",function(u){return u})):a!=null&&(JN(a)&&(a=UB(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(j_,"$&/")+"/")+e)),t.push(a)),1;if(o=0,r=r===""?".":r+":",y_(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+Yy(i,l);o+=Lp(i,t,n,c,a)}else if(c=qB(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+Yy(i,l++),o+=Lp(i,t,n,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Lf(e,t,n){if(e==null)return e;var r=[],a=0;return Lp(e,r,"","",function(i){return t.call(n,i,a++)}),r}function HB(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var kr={current:null},Bp={transition:null},KB={ReactCurrentDispatcher:kr,ReactCurrentBatchConfig:Bp,ReactCurrentOwner:XN};function LO(){throw Error("act(...) is not supported in production builds of React.")}gt.Children={map:Lf,forEach:function(e,t,n){Lf(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Lf(e,function(){t++}),t},toArray:function(e){return Lf(e,function(t){return t})||[]},only:function(e){if(!JN(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};gt.Component=md;gt.Fragment=MB;gt.Profiler=$B;gt.PureComponent=YN;gt.StrictMode=IB;gt.Suspense=BB;gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KB;gt.act=LO;gt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=DO({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=XN.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)$O.call(t,c)&&!RO.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:cf,type:e.type,key:a,ref:i,props:r,_owner:o}};gt.createContext=function(e){return e={$$typeof:FB,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:RB,_context:e},e.Consumer=e};gt.createElement=FO;gt.createFactory=function(e){var t=FO.bind(null,e);return t.type=e,t};gt.createRef=function(){return{current:null}};gt.forwardRef=function(e){return{$$typeof:LB,render:e}};gt.isValidElement=JN;gt.lazy=function(e){return{$$typeof:VB,_payload:{_status:-1,_result:e},_init:HB}};gt.memo=function(e,t){return{$$typeof:zB,type:e,compare:t===void 0?null:t}};gt.startTransition=function(e){var t=Bp.transition;Bp.transition={};try{e()}finally{Bp.transition=t}};gt.unstable_act=LO;gt.useCallback=function(e,t){return kr.current.useCallback(e,t)};gt.useContext=function(e){return kr.current.useContext(e)};gt.useDebugValue=function(){};gt.useDeferredValue=function(e){return kr.current.useDeferredValue(e)};gt.useEffect=function(e,t){return kr.current.useEffect(e,t)};gt.useId=function(){return kr.current.useId()};gt.useImperativeHandle=function(e,t,n){return kr.current.useImperativeHandle(e,t,n)};gt.useInsertionEffect=function(e,t){return kr.current.useInsertionEffect(e,t)};gt.useLayoutEffect=function(e,t){return kr.current.useLayoutEffect(e,t)};gt.useMemo=function(e,t){return kr.current.useMemo(e,t)};gt.useReducer=function(e,t,n){return kr.current.useReducer(e,t,n)};gt.useRef=function(e){return kr.current.useRef(e)};gt.useState=function(e){return kr.current.useState(e)};gt.useSyncExternalStore=function(e,t,n){return kr.current.useSyncExternalStore(e,t,n)};gt.useTransition=function(){return kr.current.useTransition()};gt.version="18.3.1";EO.exports=gt;var b=EO.exports;const M=Ct(b),ZN=EB({__proto__:null,default:M},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GB=b,YB=Symbol.for("react.element"),QB=Symbol.for("react.fragment"),XB=Object.prototype.hasOwnProperty,JB=GB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ZB={key:!0,ref:!0,__self:!0,__source:!0};function BO(e,t,n){var r,a={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)XB.call(t,r)&&!ZB.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:YB,type:e,key:i,ref:o,props:a,_owner:JB.current}}Zv.Fragment=QB;Zv.jsx=BO;Zv.jsxs=BO;TO.exports=Zv;var s=TO.exports,zO={exports:{}},hs={},VO={exports:{}},qO={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(P,O){var B=P.length;P.push(O);e:for(;0<B;){var U=B-1>>>1,X=P[U];if(0<a(X,O))P[U]=O,P[B]=X,B=U;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var O=P[0],B=P.pop();if(B!==O){P[0]=B;e:for(var U=0,X=P.length,ie=X>>>1;U<ie;){var re=2*(U+1)-1,de=P[re],pe=re+1,ce=P[pe];if(0>a(de,B))pe<X&&0>a(ce,de)?(P[U]=ce,P[pe]=B,U=pe):(P[U]=de,P[re]=B,U=re);else if(pe<X&&0>a(ce,B))P[U]=ce,P[pe]=B,U=pe;else break e}}return O}function a(P,O){var B=P.sortIndex-O.sortIndex;return B!==0?B:P.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,m=3,f=!1,g=!1,p=!1,v=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(P){for(var O=n(u);O!==null;){if(O.callback===null)r(u);else if(O.startTime<=P)r(u),O.sortIndex=O.expirationTime,t(c,O);else break;O=n(u)}}function w(P){if(p=!1,j(P),!g)if(n(c)!==null)g=!0,V(N);else{var O=n(u);O!==null&&q(w,O.startTime-P)}}function N(P,O){g=!1,p&&(p=!1,x(C),C=-1),f=!0;var B=m;try{for(j(O),h=n(c);h!==null&&(!(h.expirationTime>O)||P&&!E());){var U=h.callback;if(typeof U=="function"){h.callback=null,m=h.priorityLevel;var X=U(h.expirationTime<=O);O=e.unstable_now(),typeof X=="function"?h.callback=X:h===n(c)&&r(c),j(O)}else r(c);h=n(c)}if(h!==null)var ie=!0;else{var re=n(u);re!==null&&q(w,re.startTime-O),ie=!1}return ie}finally{h=null,m=B,f=!1}}var _=!1,S=null,C=-1,A=5,T=-1;function E(){return!(e.unstable_now()-T<A)}function k(){if(S!==null){var P=e.unstable_now();T=P;var O=!0;try{O=S(!0,P)}finally{O?R():(_=!1,S=null)}}else _=!1}var R;if(typeof y=="function")R=function(){y(k)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,W=I.port2;I.port1.onmessage=k,R=function(){W.postMessage(null)}}else R=function(){v(k,0)};function V(P){S=P,_||(_=!0,R())}function q(P,O){C=v(function(){P(e.unstable_now())},O)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_continueExecution=function(){g||f||(g=!0,V(N))},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(P){switch(m){case 1:case 2:case 3:var O=3;break;default:O=m}var B=m;m=O;try{return P()}finally{m=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(P,O){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var B=m;m=P;try{return O()}finally{m=B}},e.unstable_scheduleCallback=function(P,O,B){var U=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?U+B:U):B=U,P){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=B+X,P={id:d++,callback:O,priorityLevel:P,startTime:B,expirationTime:X,sortIndex:-1},B>U?(P.sortIndex=B,t(u,P),n(c)===null&&P===n(u)&&(p?(x(C),C=-1):p=!0,q(w,B-U))):(P.sortIndex=X,t(c,P),g||f||(g=!0,V(N))),P},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(P){var O=m;return function(){var B=m;m=O;try{return P.apply(this,arguments)}finally{m=B}}}})(qO);VO.exports=qO;var ez=VO.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tz=b,ds=ez;function ye(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var UO=new Set,Gh={};function ec(e,t){Su(e,t),Su(e+"Capture",t)}function Su(e,t){for(Gh[e]=t,e=0;e<t.length;e++)UO.add(t[e])}var vi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wj=Object.prototype.hasOwnProperty,nz=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,b_={},w_={};function rz(e){return wj.call(w_,e)?!0:wj.call(b_,e)?!1:nz.test(e)?w_[e]=!0:(b_[e]=!0,!1)}function sz(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function az(e,t,n,r){if(t===null||typeof t>"u"||sz(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Tr(e,t,n,r,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Jn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Jn[e]=new Tr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Jn[t]=new Tr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Jn[e]=new Tr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Jn[e]=new Tr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Jn[e]=new Tr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Jn[e]=new Tr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Jn[e]=new Tr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Jn[e]=new Tr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Jn[e]=new Tr(e,5,!1,e.toLowerCase(),null,!1,!1)});var e1=/[\-:]([a-z])/g;function t1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(e1,t1);Jn[t]=new Tr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(e1,t1);Jn[t]=new Tr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(e1,t1);Jn[t]=new Tr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Jn[e]=new Tr(e,1,!1,e.toLowerCase(),null,!1,!1)});Jn.xlinkHref=new Tr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Jn[e]=new Tr(e,1,!1,e.toLowerCase(),null,!0,!0)});function n1(e,t,n,r){var a=Jn.hasOwnProperty(t)?Jn[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(az(t,n,a,r)&&(n=null),r||a===null?rz(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ki=tz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bf=Symbol.for("react.element"),Mc=Symbol.for("react.portal"),Ic=Symbol.for("react.fragment"),r1=Symbol.for("react.strict_mode"),Nj=Symbol.for("react.profiler"),WO=Symbol.for("react.provider"),HO=Symbol.for("react.context"),s1=Symbol.for("react.forward_ref"),Sj=Symbol.for("react.suspense"),_j=Symbol.for("react.suspense_list"),a1=Symbol.for("react.memo"),Ki=Symbol.for("react.lazy"),KO=Symbol.for("react.offscreen"),N_=Symbol.iterator;function Kd(e){return e===null||typeof e!="object"?null:(e=N_&&e[N_]||e["@@iterator"],typeof e=="function"?e:null)}var on=Object.assign,Qy;function xh(e){if(Qy===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Qy=t&&t[1]||""}return`
`+Qy+e}var Xy=!1;function Jy(e,t){if(!e||Xy)return"";Xy=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=r.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Xy=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?xh(e):""}function iz(e){switch(e.tag){case 5:return xh(e.type);case 16:return xh("Lazy");case 13:return xh("Suspense");case 19:return xh("SuspenseList");case 0:case 2:case 15:return e=Jy(e.type,!1),e;case 11:return e=Jy(e.type.render,!1),e;case 1:return e=Jy(e.type,!0),e;default:return""}}function Cj(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ic:return"Fragment";case Mc:return"Portal";case Nj:return"Profiler";case r1:return"StrictMode";case Sj:return"Suspense";case _j:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case HO:return(e.displayName||"Context")+".Consumer";case WO:return(e._context.displayName||"Context")+".Provider";case s1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case a1:return t=e.displayName||null,t!==null?t:Cj(e.type)||"Memo";case Ki:t=e._payload,e=e._init;try{return Cj(e(t))}catch{}}return null}function oz(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Cj(t);case 8:return t===r1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Po(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function GO(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function lz(e){var t=GO(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function zf(e){e._valueTracker||(e._valueTracker=lz(e))}function YO(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=GO(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function sg(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Pj(e,t){var n=t.checked;return on({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function S_(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Po(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function QO(e,t){t=t.checked,t!=null&&n1(e,"checked",t,!1)}function Aj(e,t){QO(e,t);var n=Po(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?kj(e,t.type,n):t.hasOwnProperty("defaultValue")&&kj(e,t.type,Po(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function __(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function kj(e,t,n){(t!=="number"||sg(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var yh=Array.isArray;function Xc(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Po(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Tj(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ye(91));return on({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function C_(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ye(92));if(yh(n)){if(1<n.length)throw Error(ye(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Po(n)}}function XO(e,t){var n=Po(t.value),r=Po(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function P_(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function JO(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ej(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?JO(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Vf,ZO=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Vf=Vf||document.createElement("div"),Vf.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Vf.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Yh(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ph={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cz=["Webkit","ms","Moz","O"];Object.keys(Ph).forEach(function(e){cz.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ph[t]=Ph[e]})});function eD(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ph.hasOwnProperty(e)&&Ph[e]?(""+t).trim():t+"px"}function tD(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=eD(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var uz=on({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Oj(e,t){if(t){if(uz[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ye(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ye(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ye(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ye(62))}}function Dj(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mj=null;function i1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ij=null,Jc=null,Zc=null;function A_(e){if(e=hf(e)){if(typeof Ij!="function")throw Error(ye(280));var t=e.stateNode;t&&(t=sx(t),Ij(e.stateNode,e.type,t))}}function nD(e){Jc?Zc?Zc.push(e):Zc=[e]:Jc=e}function rD(){if(Jc){var e=Jc,t=Zc;if(Zc=Jc=null,A_(e),t)for(e=0;e<t.length;e++)A_(t[e])}}function sD(e,t){return e(t)}function aD(){}var Zy=!1;function iD(e,t,n){if(Zy)return e(t,n);Zy=!0;try{return sD(e,t,n)}finally{Zy=!1,(Jc!==null||Zc!==null)&&(aD(),rD())}}function Qh(e,t){var n=e.stateNode;if(n===null)return null;var r=sx(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ye(231,t,typeof n));return n}var $j=!1;if(vi)try{var Gd={};Object.defineProperty(Gd,"passive",{get:function(){$j=!0}}),window.addEventListener("test",Gd,Gd),window.removeEventListener("test",Gd,Gd)}catch{$j=!1}function dz(e,t,n,r,a,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var Ah=!1,ag=null,ig=!1,Rj=null,hz={onError:function(e){Ah=!0,ag=e}};function mz(e,t,n,r,a,i,o,l,c){Ah=!1,ag=null,dz.apply(hz,arguments)}function fz(e,t,n,r,a,i,o,l,c){if(mz.apply(this,arguments),Ah){if(Ah){var u=ag;Ah=!1,ag=null}else throw Error(ye(198));ig||(ig=!0,Rj=u)}}function tc(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function oD(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function k_(e){if(tc(e)!==e)throw Error(ye(188))}function pz(e){var t=e.alternate;if(!t){if(t=tc(e),t===null)throw Error(ye(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return k_(a),e;if(i===r)return k_(a),t;i=i.sibling}throw Error(ye(188))}if(n.return!==r.return)n=a,r=i;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o)throw Error(ye(189))}}if(n.alternate!==r)throw Error(ye(190))}if(n.tag!==3)throw Error(ye(188));return n.stateNode.current===n?e:t}function lD(e){return e=pz(e),e!==null?cD(e):null}function cD(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=cD(e);if(t!==null)return t;e=e.sibling}return null}var uD=ds.unstable_scheduleCallback,T_=ds.unstable_cancelCallback,gz=ds.unstable_shouldYield,vz=ds.unstable_requestPaint,fn=ds.unstable_now,xz=ds.unstable_getCurrentPriorityLevel,o1=ds.unstable_ImmediatePriority,dD=ds.unstable_UserBlockingPriority,og=ds.unstable_NormalPriority,yz=ds.unstable_LowPriority,hD=ds.unstable_IdlePriority,ex=null,Ta=null;function jz(e){if(Ta&&typeof Ta.onCommitFiberRoot=="function")try{Ta.onCommitFiberRoot(ex,e,void 0,(e.current.flags&128)===128)}catch{}}var Js=Math.clz32?Math.clz32:Nz,bz=Math.log,wz=Math.LN2;function Nz(e){return e>>>=0,e===0?32:31-(bz(e)/wz|0)|0}var qf=64,Uf=4194304;function jh(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function lg(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~a;l!==0?r=jh(l):(i&=o,i!==0&&(r=jh(i)))}else o=n&~a,o!==0?r=jh(o):i!==0&&(r=jh(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Js(t),a=1<<n,r|=e[n],t&=~a;return r}function Sz(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _z(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Js(i),l=1<<o,c=a[o];c===-1?(!(l&n)||l&r)&&(a[o]=Sz(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Fj(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function mD(){var e=qf;return qf<<=1,!(qf&4194240)&&(qf=64),e}function e0(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function uf(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Js(t),e[t]=n}function Cz(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Js(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}function l1(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Js(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var Ot=0;function fD(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var pD,c1,gD,vD,xD,Lj=!1,Wf=[],po=null,go=null,vo=null,Xh=new Map,Jh=new Map,Qi=[],Pz="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function E_(e,t){switch(e){case"focusin":case"focusout":po=null;break;case"dragenter":case"dragleave":go=null;break;case"mouseover":case"mouseout":vo=null;break;case"pointerover":case"pointerout":Xh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jh.delete(t.pointerId)}}function Yd(e,t,n,r,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},t!==null&&(t=hf(t),t!==null&&c1(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Az(e,t,n,r,a){switch(t){case"focusin":return po=Yd(po,e,t,n,r,a),!0;case"dragenter":return go=Yd(go,e,t,n,r,a),!0;case"mouseover":return vo=Yd(vo,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return Xh.set(i,Yd(Xh.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,Jh.set(i,Yd(Jh.get(i)||null,e,t,n,r,a)),!0}return!1}function yD(e){var t=cl(e.target);if(t!==null){var n=tc(t);if(n!==null){if(t=n.tag,t===13){if(t=oD(n),t!==null){e.blockedOn=t,xD(e.priority,function(){gD(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function zp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Bj(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Mj=r,n.target.dispatchEvent(r),Mj=null}else return t=hf(n),t!==null&&c1(t),e.blockedOn=n,!1;t.shift()}return!0}function O_(e,t,n){zp(e)&&n.delete(t)}function kz(){Lj=!1,po!==null&&zp(po)&&(po=null),go!==null&&zp(go)&&(go=null),vo!==null&&zp(vo)&&(vo=null),Xh.forEach(O_),Jh.forEach(O_)}function Qd(e,t){e.blockedOn===t&&(e.blockedOn=null,Lj||(Lj=!0,ds.unstable_scheduleCallback(ds.unstable_NormalPriority,kz)))}function Zh(e){function t(a){return Qd(a,e)}if(0<Wf.length){Qd(Wf[0],e);for(var n=1;n<Wf.length;n++){var r=Wf[n];r.blockedOn===e&&(r.blockedOn=null)}}for(po!==null&&Qd(po,e),go!==null&&Qd(go,e),vo!==null&&Qd(vo,e),Xh.forEach(t),Jh.forEach(t),n=0;n<Qi.length;n++)r=Qi[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Qi.length&&(n=Qi[0],n.blockedOn===null);)yD(n),n.blockedOn===null&&Qi.shift()}var eu=ki.ReactCurrentBatchConfig,cg=!0;function Tz(e,t,n,r){var a=Ot,i=eu.transition;eu.transition=null;try{Ot=1,u1(e,t,n,r)}finally{Ot=a,eu.transition=i}}function Ez(e,t,n,r){var a=Ot,i=eu.transition;eu.transition=null;try{Ot=4,u1(e,t,n,r)}finally{Ot=a,eu.transition=i}}function u1(e,t,n,r){if(cg){var a=Bj(e,t,n,r);if(a===null)u0(e,t,r,ug,n),E_(e,r);else if(Az(a,e,t,n,r))r.stopPropagation();else if(E_(e,r),t&4&&-1<Pz.indexOf(e)){for(;a!==null;){var i=hf(a);if(i!==null&&pD(i),i=Bj(e,t,n,r),i===null&&u0(e,t,r,ug,n),i===a)break;a=i}a!==null&&r.stopPropagation()}else u0(e,t,r,null,n)}}var ug=null;function Bj(e,t,n,r){if(ug=null,e=i1(r),e=cl(e),e!==null)if(t=tc(e),t===null)e=null;else if(n=t.tag,n===13){if(e=oD(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ug=e,null}function jD(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xz()){case o1:return 1;case dD:return 4;case og:case yz:return 16;case hD:return 536870912;default:return 16}default:return 16}}var co=null,d1=null,Vp=null;function bD(){if(Vp)return Vp;var e,t=d1,n=t.length,r,a="value"in co?co.value:co.textContent,i=a.length;for(e=0;e<n&&t[e]===a[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===a[i-r];r++);return Vp=a.slice(e,1<r?1-r:void 0)}function qp(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Hf(){return!0}function D_(){return!1}function ms(e){function t(n,r,a,i,o){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Hf:D_,this.isPropagationStopped=D_,this}return on(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Hf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Hf)},persist:function(){},isPersistent:Hf}),t}var fd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},h1=ms(fd),df=on({},fd,{view:0,detail:0}),Oz=ms(df),t0,n0,Xd,tx=on({},df,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:m1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xd&&(Xd&&e.type==="mousemove"?(t0=e.screenX-Xd.screenX,n0=e.screenY-Xd.screenY):n0=t0=0,Xd=e),t0)},movementY:function(e){return"movementY"in e?e.movementY:n0}}),M_=ms(tx),Dz=on({},tx,{dataTransfer:0}),Mz=ms(Dz),Iz=on({},df,{relatedTarget:0}),r0=ms(Iz),$z=on({},fd,{animationName:0,elapsedTime:0,pseudoElement:0}),Rz=ms($z),Fz=on({},fd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Lz=ms(Fz),Bz=on({},fd,{data:0}),I_=ms(Bz),zz={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vz={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qz={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Uz(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=qz[e])?!!t[e]:!1}function m1(){return Uz}var Wz=on({},df,{key:function(e){if(e.key){var t=zz[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=qp(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Vz[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:m1,charCode:function(e){return e.type==="keypress"?qp(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?qp(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Hz=ms(Wz),Kz=on({},tx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$_=ms(Kz),Gz=on({},df,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:m1}),Yz=ms(Gz),Qz=on({},fd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xz=ms(Qz),Jz=on({},tx,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zz=ms(Jz),eV=[9,13,27,32],f1=vi&&"CompositionEvent"in window,kh=null;vi&&"documentMode"in document&&(kh=document.documentMode);var tV=vi&&"TextEvent"in window&&!kh,wD=vi&&(!f1||kh&&8<kh&&11>=kh),R_=" ",F_=!1;function ND(e,t){switch(e){case"keyup":return eV.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function SD(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $c=!1;function nV(e,t){switch(e){case"compositionend":return SD(t);case"keypress":return t.which!==32?null:(F_=!0,R_);case"textInput":return e=t.data,e===R_&&F_?null:e;default:return null}}function rV(e,t){if($c)return e==="compositionend"||!f1&&ND(e,t)?(e=bD(),Vp=d1=co=null,$c=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return wD&&t.locale!=="ko"?null:t.data;default:return null}}var sV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function L_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!sV[e.type]:t==="textarea"}function _D(e,t,n,r){nD(r),t=dg(t,"onChange"),0<t.length&&(n=new h1("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Th=null,em=null;function aV(e){$D(e,0)}function nx(e){var t=Lc(e);if(YO(t))return e}function iV(e,t){if(e==="change")return t}var CD=!1;if(vi){var s0;if(vi){var a0="oninput"in document;if(!a0){var B_=document.createElement("div");B_.setAttribute("oninput","return;"),a0=typeof B_.oninput=="function"}s0=a0}else s0=!1;CD=s0&&(!document.documentMode||9<document.documentMode)}function z_(){Th&&(Th.detachEvent("onpropertychange",PD),em=Th=null)}function PD(e){if(e.propertyName==="value"&&nx(em)){var t=[];_D(t,em,e,i1(e)),iD(aV,t)}}function oV(e,t,n){e==="focusin"?(z_(),Th=t,em=n,Th.attachEvent("onpropertychange",PD)):e==="focusout"&&z_()}function lV(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return nx(em)}function cV(e,t){if(e==="click")return nx(t)}function uV(e,t){if(e==="input"||e==="change")return nx(t)}function dV(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var na=typeof Object.is=="function"?Object.is:dV;function tm(e,t){if(na(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!wj.call(t,a)||!na(e[a],t[a]))return!1}return!0}function V_(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function q_(e,t){var n=V_(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=V_(n)}}function AD(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?AD(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function kD(){for(var e=window,t=sg();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=sg(e.document)}return t}function p1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function hV(e){var t=kD(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&AD(n.ownerDocument.documentElement,n)){if(r!==null&&p1(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=r.end===void 0?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=q_(n,i);var o=q_(n,r);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mV=vi&&"documentMode"in document&&11>=document.documentMode,Rc=null,zj=null,Eh=null,Vj=!1;function U_(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Vj||Rc==null||Rc!==sg(r)||(r=Rc,"selectionStart"in r&&p1(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Eh&&tm(Eh,r)||(Eh=r,r=dg(zj,"onSelect"),0<r.length&&(t=new h1("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Rc)))}function Kf(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Fc={animationend:Kf("Animation","AnimationEnd"),animationiteration:Kf("Animation","AnimationIteration"),animationstart:Kf("Animation","AnimationStart"),transitionend:Kf("Transition","TransitionEnd")},i0={},TD={};vi&&(TD=document.createElement("div").style,"AnimationEvent"in window||(delete Fc.animationend.animation,delete Fc.animationiteration.animation,delete Fc.animationstart.animation),"TransitionEvent"in window||delete Fc.transitionend.transition);function rx(e){if(i0[e])return i0[e];if(!Fc[e])return e;var t=Fc[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in TD)return i0[e]=t[n];return e}var ED=rx("animationend"),OD=rx("animationiteration"),DD=rx("animationstart"),MD=rx("transitionend"),ID=new Map,W_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Do(e,t){ID.set(e,t),ec(t,[e])}for(var o0=0;o0<W_.length;o0++){var l0=W_[o0],fV=l0.toLowerCase(),pV=l0[0].toUpperCase()+l0.slice(1);Do(fV,"on"+pV)}Do(ED,"onAnimationEnd");Do(OD,"onAnimationIteration");Do(DD,"onAnimationStart");Do("dblclick","onDoubleClick");Do("focusin","onFocus");Do("focusout","onBlur");Do(MD,"onTransitionEnd");Su("onMouseEnter",["mouseout","mouseover"]);Su("onMouseLeave",["mouseout","mouseover"]);Su("onPointerEnter",["pointerout","pointerover"]);Su("onPointerLeave",["pointerout","pointerover"]);ec("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ec("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ec("onBeforeInput",["compositionend","keypress","textInput","paste"]);ec("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ec("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ec("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gV=new Set("cancel close invalid load scroll toggle".split(" ").concat(bh));function H_(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,fz(r,t,void 0,e),e.currentTarget=null}function $D(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;H_(a,l,u),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;H_(a,l,u),i=c}}}if(ig)throw e=Rj,ig=!1,Rj=null,e}function Yt(e,t){var n=t[Kj];n===void 0&&(n=t[Kj]=new Set);var r=e+"__bubble";n.has(r)||(RD(t,e,2,!1),n.add(r))}function c0(e,t,n){var r=0;t&&(r|=4),RD(n,e,r,t)}var Gf="_reactListening"+Math.random().toString(36).slice(2);function nm(e){if(!e[Gf]){e[Gf]=!0,UO.forEach(function(n){n!=="selectionchange"&&(gV.has(n)||c0(n,!1,e),c0(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Gf]||(t[Gf]=!0,c0("selectionchange",!1,t))}}function RD(e,t,n,r){switch(jD(t)){case 1:var a=Tz;break;case 4:a=Ez;break;default:a=u1}n=a.bind(null,t,n,e),a=void 0,!$j||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function u0(e,t,n,r,a){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=cl(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}iD(function(){var u=i,d=i1(n),h=[];e:{var m=ID.get(e);if(m!==void 0){var f=h1,g=e;switch(e){case"keypress":if(qp(n)===0)break e;case"keydown":case"keyup":f=Hz;break;case"focusin":g="focus",f=r0;break;case"focusout":g="blur",f=r0;break;case"beforeblur":case"afterblur":f=r0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=M_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Mz;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Yz;break;case ED:case OD:case DD:f=Rz;break;case MD:f=Xz;break;case"scroll":f=Oz;break;case"wheel":f=Zz;break;case"copy":case"cut":case"paste":f=Lz;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=$_}var p=(t&4)!==0,v=!p&&e==="scroll",x=p?m!==null?m+"Capture":null:m;p=[];for(var y=u,j;y!==null;){j=y;var w=j.stateNode;if(j.tag===5&&w!==null&&(j=w,x!==null&&(w=Qh(y,x),w!=null&&p.push(rm(y,w,j)))),v)break;y=y.return}0<p.length&&(m=new f(m,g,null,n,d),h.push({event:m,listeners:p}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",m&&n!==Mj&&(g=n.relatedTarget||n.fromElement)&&(cl(g)||g[xi]))break e;if((f||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,f?(g=n.relatedTarget||n.toElement,f=u,g=g?cl(g):null,g!==null&&(v=tc(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(f=null,g=u),f!==g)){if(p=M_,w="onMouseLeave",x="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(p=$_,w="onPointerLeave",x="onPointerEnter",y="pointer"),v=f==null?m:Lc(f),j=g==null?m:Lc(g),m=new p(w,y+"leave",f,n,d),m.target=v,m.relatedTarget=j,w=null,cl(d)===u&&(p=new p(x,y+"enter",g,n,d),p.target=j,p.relatedTarget=v,w=p),v=w,f&&g)t:{for(p=f,x=g,y=0,j=p;j;j=vc(j))y++;for(j=0,w=x;w;w=vc(w))j++;for(;0<y-j;)p=vc(p),y--;for(;0<j-y;)x=vc(x),j--;for(;y--;){if(p===x||x!==null&&p===x.alternate)break t;p=vc(p),x=vc(x)}p=null}else p=null;f!==null&&K_(h,m,f,p,!1),g!==null&&v!==null&&K_(h,v,g,p,!0)}}e:{if(m=u?Lc(u):window,f=m.nodeName&&m.nodeName.toLowerCase(),f==="select"||f==="input"&&m.type==="file")var N=iV;else if(L_(m))if(CD)N=uV;else{N=lV;var _=oV}else(f=m.nodeName)&&f.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(N=cV);if(N&&(N=N(e,u))){_D(h,N,n,d);break e}_&&_(e,m,u),e==="focusout"&&(_=m._wrapperState)&&_.controlled&&m.type==="number"&&kj(m,"number",m.value)}switch(_=u?Lc(u):window,e){case"focusin":(L_(_)||_.contentEditable==="true")&&(Rc=_,zj=u,Eh=null);break;case"focusout":Eh=zj=Rc=null;break;case"mousedown":Vj=!0;break;case"contextmenu":case"mouseup":case"dragend":Vj=!1,U_(h,n,d);break;case"selectionchange":if(mV)break;case"keydown":case"keyup":U_(h,n,d)}var S;if(f1)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else $c?ND(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(wD&&n.locale!=="ko"&&($c||C!=="onCompositionStart"?C==="onCompositionEnd"&&$c&&(S=bD()):(co=d,d1="value"in co?co.value:co.textContent,$c=!0)),_=dg(u,C),0<_.length&&(C=new I_(C,e,null,n,d),h.push({event:C,listeners:_}),S?C.data=S:(S=SD(n),S!==null&&(C.data=S)))),(S=tV?nV(e,n):rV(e,n))&&(u=dg(u,"onBeforeInput"),0<u.length&&(d=new I_("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=S))}$D(h,t)})}function rm(e,t,n){return{instance:e,listener:t,currentTarget:n}}function dg(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Qh(e,n),i!=null&&r.unshift(rm(e,i,a)),i=Qh(e,t),i!=null&&r.push(rm(e,i,a))),e=e.return}return r}function vc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function K_(e,t,n,r,a){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,a?(c=Qh(n,i),c!=null&&o.unshift(rm(n,c,l))):a||(c=Qh(n,i),c!=null&&o.push(rm(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var vV=/\r\n?/g,xV=/\u0000|\uFFFD/g;function G_(e){return(typeof e=="string"?e:""+e).replace(vV,`
`).replace(xV,"")}function Yf(e,t,n){if(t=G_(t),G_(e)!==t&&n)throw Error(ye(425))}function hg(){}var qj=null,Uj=null;function Wj(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Hj=typeof setTimeout=="function"?setTimeout:void 0,yV=typeof clearTimeout=="function"?clearTimeout:void 0,Y_=typeof Promise=="function"?Promise:void 0,jV=typeof queueMicrotask=="function"?queueMicrotask:typeof Y_<"u"?function(e){return Y_.resolve(null).then(e).catch(bV)}:Hj;function bV(e){setTimeout(function(){throw e})}function d0(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),Zh(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);Zh(t)}function xo(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Q_(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var pd=Math.random().toString(36).slice(2),wa="__reactFiber$"+pd,sm="__reactProps$"+pd,xi="__reactContainer$"+pd,Kj="__reactEvents$"+pd,wV="__reactListeners$"+pd,NV="__reactHandles$"+pd;function cl(e){var t=e[wa];if(t)return t;for(var n=e.parentNode;n;){if(t=n[xi]||n[wa]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Q_(e);e!==null;){if(n=e[wa])return n;e=Q_(e)}return t}e=n,n=e.parentNode}return null}function hf(e){return e=e[wa]||e[xi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Lc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ye(33))}function sx(e){return e[sm]||null}var Gj=[],Bc=-1;function Mo(e){return{current:e}}function Jt(e){0>Bc||(e.current=Gj[Bc],Gj[Bc]=null,Bc--)}function Wt(e,t){Bc++,Gj[Bc]=e.current,e.current=t}var Ao={},mr=Mo(Ao),Ur=Mo(!1),Dl=Ao;function _u(e,t){var n=e.type.contextTypes;if(!n)return Ao;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in n)a[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Wr(e){return e=e.childContextTypes,e!=null}function mg(){Jt(Ur),Jt(mr)}function X_(e,t,n){if(mr.current!==Ao)throw Error(ye(168));Wt(mr,t),Wt(Ur,n)}function FD(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(ye(108,oz(e)||"Unknown",a));return on({},n,r)}function fg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ao,Dl=mr.current,Wt(mr,e),Wt(Ur,Ur.current),!0}function J_(e,t,n){var r=e.stateNode;if(!r)throw Error(ye(169));n?(e=FD(e,t,Dl),r.__reactInternalMemoizedMergedChildContext=e,Jt(Ur),Jt(mr),Wt(mr,e)):Jt(Ur),Wt(Ur,n)}var ti=null,ax=!1,h0=!1;function LD(e){ti===null?ti=[e]:ti.push(e)}function SV(e){ax=!0,LD(e)}function Io(){if(!h0&&ti!==null){h0=!0;var e=0,t=Ot;try{var n=ti;for(Ot=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}ti=null,ax=!1}catch(a){throw ti!==null&&(ti=ti.slice(e+1)),uD(o1,Io),a}finally{Ot=t,h0=!1}}return null}var zc=[],Vc=0,pg=null,gg=0,js=[],bs=0,Ml=null,oi=1,li="";function el(e,t){zc[Vc++]=gg,zc[Vc++]=pg,pg=e,gg=t}function BD(e,t,n){js[bs++]=oi,js[bs++]=li,js[bs++]=Ml,Ml=e;var r=oi;e=li;var a=32-Js(r)-1;r&=~(1<<a),n+=1;var i=32-Js(t)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,oi=1<<32-Js(t)+a|n<<a|r,li=i+e}else oi=1<<i|n<<a|r,li=e}function g1(e){e.return!==null&&(el(e,1),BD(e,1,0))}function v1(e){for(;e===pg;)pg=zc[--Vc],zc[Vc]=null,gg=zc[--Vc],zc[Vc]=null;for(;e===Ml;)Ml=js[--bs],js[bs]=null,li=js[--bs],js[bs]=null,oi=js[--bs],js[bs]=null}var os=null,is=null,en=!1,Gs=null;function zD(e,t){var n=Ns(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Z_(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,os=e,is=xo(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,os=e,is=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ml!==null?{id:oi,overflow:li}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ns(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,os=e,is=null,!0):!1;default:return!1}}function Yj(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Qj(e){if(en){var t=is;if(t){var n=t;if(!Z_(e,t)){if(Yj(e))throw Error(ye(418));t=xo(n.nextSibling);var r=os;t&&Z_(e,t)?zD(r,n):(e.flags=e.flags&-4097|2,en=!1,os=e)}}else{if(Yj(e))throw Error(ye(418));e.flags=e.flags&-4097|2,en=!1,os=e}}}function eC(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;os=e}function Qf(e){if(e!==os)return!1;if(!en)return eC(e),en=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Wj(e.type,e.memoizedProps)),t&&(t=is)){if(Yj(e))throw VD(),Error(ye(418));for(;t;)zD(e,t),t=xo(t.nextSibling)}if(eC(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ye(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){is=xo(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}is=null}}else is=os?xo(e.stateNode.nextSibling):null;return!0}function VD(){for(var e=is;e;)e=xo(e.nextSibling)}function Cu(){is=os=null,en=!1}function x1(e){Gs===null?Gs=[e]:Gs.push(e)}var _V=ki.ReactCurrentBatchConfig;function Jd(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ye(309));var r=n.stateNode}if(!r)throw Error(ye(147,e));var a=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(ye(284));if(!n._owner)throw Error(ye(290,e))}return e}function Xf(e,t){throw e=Object.prototype.toString.call(t),Error(ye(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function tC(e){var t=e._init;return t(e._payload)}function qD(e){function t(x,y){if(e){var j=x.deletions;j===null?(x.deletions=[y],x.flags|=16):j.push(y)}}function n(x,y){if(!e)return null;for(;y!==null;)t(x,y),y=y.sibling;return null}function r(x,y){for(x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function a(x,y){return x=wo(x,y),x.index=0,x.sibling=null,x}function i(x,y,j){return x.index=j,e?(j=x.alternate,j!==null?(j=j.index,j<y?(x.flags|=2,y):j):(x.flags|=2,y)):(x.flags|=1048576,y)}function o(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,y,j,w){return y===null||y.tag!==6?(y=y0(j,x.mode,w),y.return=x,y):(y=a(y,j),y.return=x,y)}function c(x,y,j,w){var N=j.type;return N===Ic?d(x,y,j.props.children,w,j.key):y!==null&&(y.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Ki&&tC(N)===y.type)?(w=a(y,j.props),w.ref=Jd(x,y,j),w.return=x,w):(w=Qp(j.type,j.key,j.props,null,x.mode,w),w.ref=Jd(x,y,j),w.return=x,w)}function u(x,y,j,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==j.containerInfo||y.stateNode.implementation!==j.implementation?(y=j0(j,x.mode,w),y.return=x,y):(y=a(y,j.children||[]),y.return=x,y)}function d(x,y,j,w,N){return y===null||y.tag!==7?(y=kl(j,x.mode,w,N),y.return=x,y):(y=a(y,j),y.return=x,y)}function h(x,y,j){if(typeof y=="string"&&y!==""||typeof y=="number")return y=y0(""+y,x.mode,j),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Bf:return j=Qp(y.type,y.key,y.props,null,x.mode,j),j.ref=Jd(x,null,y),j.return=x,j;case Mc:return y=j0(y,x.mode,j),y.return=x,y;case Ki:var w=y._init;return h(x,w(y._payload),j)}if(yh(y)||Kd(y))return y=kl(y,x.mode,j,null),y.return=x,y;Xf(x,y)}return null}function m(x,y,j,w){var N=y!==null?y.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return N!==null?null:l(x,y,""+j,w);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Bf:return j.key===N?c(x,y,j,w):null;case Mc:return j.key===N?u(x,y,j,w):null;case Ki:return N=j._init,m(x,y,N(j._payload),w)}if(yh(j)||Kd(j))return N!==null?null:d(x,y,j,w,null);Xf(x,j)}return null}function f(x,y,j,w,N){if(typeof w=="string"&&w!==""||typeof w=="number")return x=x.get(j)||null,l(y,x,""+w,N);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Bf:return x=x.get(w.key===null?j:w.key)||null,c(y,x,w,N);case Mc:return x=x.get(w.key===null?j:w.key)||null,u(y,x,w,N);case Ki:var _=w._init;return f(x,y,j,_(w._payload),N)}if(yh(w)||Kd(w))return x=x.get(j)||null,d(y,x,w,N,null);Xf(y,w)}return null}function g(x,y,j,w){for(var N=null,_=null,S=y,C=y=0,A=null;S!==null&&C<j.length;C++){S.index>C?(A=S,S=null):A=S.sibling;var T=m(x,S,j[C],w);if(T===null){S===null&&(S=A);break}e&&S&&T.alternate===null&&t(x,S),y=i(T,y,C),_===null?N=T:_.sibling=T,_=T,S=A}if(C===j.length)return n(x,S),en&&el(x,C),N;if(S===null){for(;C<j.length;C++)S=h(x,j[C],w),S!==null&&(y=i(S,y,C),_===null?N=S:_.sibling=S,_=S);return en&&el(x,C),N}for(S=r(x,S);C<j.length;C++)A=f(S,x,C,j[C],w),A!==null&&(e&&A.alternate!==null&&S.delete(A.key===null?C:A.key),y=i(A,y,C),_===null?N=A:_.sibling=A,_=A);return e&&S.forEach(function(E){return t(x,E)}),en&&el(x,C),N}function p(x,y,j,w){var N=Kd(j);if(typeof N!="function")throw Error(ye(150));if(j=N.call(j),j==null)throw Error(ye(151));for(var _=N=null,S=y,C=y=0,A=null,T=j.next();S!==null&&!T.done;C++,T=j.next()){S.index>C?(A=S,S=null):A=S.sibling;var E=m(x,S,T.value,w);if(E===null){S===null&&(S=A);break}e&&S&&E.alternate===null&&t(x,S),y=i(E,y,C),_===null?N=E:_.sibling=E,_=E,S=A}if(T.done)return n(x,S),en&&el(x,C),N;if(S===null){for(;!T.done;C++,T=j.next())T=h(x,T.value,w),T!==null&&(y=i(T,y,C),_===null?N=T:_.sibling=T,_=T);return en&&el(x,C),N}for(S=r(x,S);!T.done;C++,T=j.next())T=f(S,x,C,T.value,w),T!==null&&(e&&T.alternate!==null&&S.delete(T.key===null?C:T.key),y=i(T,y,C),_===null?N=T:_.sibling=T,_=T);return e&&S.forEach(function(k){return t(x,k)}),en&&el(x,C),N}function v(x,y,j,w){if(typeof j=="object"&&j!==null&&j.type===Ic&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case Bf:e:{for(var N=j.key,_=y;_!==null;){if(_.key===N){if(N=j.type,N===Ic){if(_.tag===7){n(x,_.sibling),y=a(_,j.props.children),y.return=x,x=y;break e}}else if(_.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Ki&&tC(N)===_.type){n(x,_.sibling),y=a(_,j.props),y.ref=Jd(x,_,j),y.return=x,x=y;break e}n(x,_);break}else t(x,_);_=_.sibling}j.type===Ic?(y=kl(j.props.children,x.mode,w,j.key),y.return=x,x=y):(w=Qp(j.type,j.key,j.props,null,x.mode,w),w.ref=Jd(x,y,j),w.return=x,x=w)}return o(x);case Mc:e:{for(_=j.key;y!==null;){if(y.key===_)if(y.tag===4&&y.stateNode.containerInfo===j.containerInfo&&y.stateNode.implementation===j.implementation){n(x,y.sibling),y=a(y,j.children||[]),y.return=x,x=y;break e}else{n(x,y);break}else t(x,y);y=y.sibling}y=j0(j,x.mode,w),y.return=x,x=y}return o(x);case Ki:return _=j._init,v(x,y,_(j._payload),w)}if(yh(j))return g(x,y,j,w);if(Kd(j))return p(x,y,j,w);Xf(x,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,y!==null&&y.tag===6?(n(x,y.sibling),y=a(y,j),y.return=x,x=y):(n(x,y),y=y0(j,x.mode,w),y.return=x,x=y),o(x)):n(x,y)}return v}var Pu=qD(!0),UD=qD(!1),vg=Mo(null),xg=null,qc=null,y1=null;function j1(){y1=qc=xg=null}function b1(e){var t=vg.current;Jt(vg),e._currentValue=t}function Xj(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function tu(e,t){xg=e,y1=qc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Vr=!0),e.firstContext=null)}function Ps(e){var t=e._currentValue;if(y1!==e)if(e={context:e,memoizedValue:t,next:null},qc===null){if(xg===null)throw Error(ye(308));qc=e,xg.dependencies={lanes:0,firstContext:e}}else qc=qc.next=e;return t}var ul=null;function w1(e){ul===null?ul=[e]:ul.push(e)}function WD(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,w1(t)):(n.next=a.next,a.next=n),t.interleaved=n,yi(e,r)}function yi(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Gi=!1;function N1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function HD(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function hi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function yo(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,jt&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,yi(e,n)}return a=r.interleaved,a===null?(t.next=t,w1(r)):(t.next=a.next,a.next=t),r.interleaved=t,yi(e,n)}function Up(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,l1(e,n)}}function nC(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?a=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?a=i=t:i=i.next=t}else a=i=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function yg(e,t,n,r){var a=e.updateQueue;Gi=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=a.baseState;o=0,d=u=c=null,l=i;do{var m=l.lane,f=l.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,p=l;switch(m=t,f=n,p.tag){case 1:if(g=p.payload,typeof g=="function"){h=g.call(f,h,m);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=p.payload,m=typeof g=="function"?g.call(f,h,m):g,m==null)break e;h=on({},h,m);break e;case 2:Gi=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=a.effects,m===null?a.effects=[l]:m.push(l))}else f={eventTime:f,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=f,c=h):d=d.next=f,o|=m;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;m=l,l=m.next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}while(!0);if(d===null&&(c=h),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);$l|=o,e.lanes=o,e.memoizedState=h}}function rC(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(ye(191,a));a.call(r)}}}var mf={},Ea=Mo(mf),am=Mo(mf),im=Mo(mf);function dl(e){if(e===mf)throw Error(ye(174));return e}function S1(e,t){switch(Wt(im,t),Wt(am,e),Wt(Ea,mf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ej(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ej(t,e)}Jt(Ea),Wt(Ea,t)}function Au(){Jt(Ea),Jt(am),Jt(im)}function KD(e){dl(im.current);var t=dl(Ea.current),n=Ej(t,e.type);t!==n&&(Wt(am,e),Wt(Ea,n))}function _1(e){am.current===e&&(Jt(Ea),Jt(am))}var nn=Mo(0);function jg(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var m0=[];function C1(){for(var e=0;e<m0.length;e++)m0[e]._workInProgressVersionPrimary=null;m0.length=0}var Wp=ki.ReactCurrentDispatcher,f0=ki.ReactCurrentBatchConfig,Il=0,sn=null,En=null,Vn=null,bg=!1,Oh=!1,om=0,CV=0;function sr(){throw Error(ye(321))}function P1(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!na(e[n],t[n]))return!1;return!0}function A1(e,t,n,r,a,i){if(Il=i,sn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Wp.current=e===null||e.memoizedState===null?TV:EV,e=n(r,a),Oh){i=0;do{if(Oh=!1,om=0,25<=i)throw Error(ye(301));i+=1,Vn=En=null,t.updateQueue=null,Wp.current=OV,e=n(r,a)}while(Oh)}if(Wp.current=wg,t=En!==null&&En.next!==null,Il=0,Vn=En=sn=null,bg=!1,t)throw Error(ye(300));return e}function k1(){var e=om!==0;return om=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vn===null?sn.memoizedState=Vn=e:Vn=Vn.next=e,Vn}function As(){if(En===null){var e=sn.alternate;e=e!==null?e.memoizedState:null}else e=En.next;var t=Vn===null?sn.memoizedState:Vn.next;if(t!==null)Vn=t,En=e;else{if(e===null)throw Error(ye(310));En=e,e={memoizedState:En.memoizedState,baseState:En.baseState,baseQueue:En.baseQueue,queue:En.queue,next:null},Vn===null?sn.memoizedState=Vn=e:Vn=Vn.next=e}return Vn}function lm(e,t){return typeof t=="function"?t(e):t}function p0(e){var t=As(),n=t.queue;if(n===null)throw Error(ye(311));n.lastRenderedReducer=e;var r=En,a=r.baseQueue,i=n.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}r.baseQueue=a=i,n.pending=null}if(a!==null){i=a.next,r=r.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((Il&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=r):c=c.next=h,sn.lanes|=d,$l|=d}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=l,na(r,t.memoizedState)||(Vr=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do i=a.lane,sn.lanes|=i,$l|=i,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function g0(e){var t=As(),n=t.queue;if(n===null)throw Error(ye(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);na(i,t.memoizedState)||(Vr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function GD(){}function YD(e,t){var n=sn,r=As(),a=t(),i=!na(r.memoizedState,a);if(i&&(r.memoizedState=a,Vr=!0),r=r.queue,T1(JD.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Vn!==null&&Vn.memoizedState.tag&1){if(n.flags|=2048,cm(9,XD.bind(null,n,r,a,t),void 0,null),Hn===null)throw Error(ye(349));Il&30||QD(n,t,a)}return a}function QD(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=sn.updateQueue,t===null?(t={lastEffect:null,stores:null},sn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function XD(e,t,n,r){t.value=n,t.getSnapshot=r,ZD(t)&&eM(e)}function JD(e,t,n){return n(function(){ZD(t)&&eM(e)})}function ZD(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!na(e,n)}catch{return!0}}function eM(e){var t=yi(e,1);t!==null&&Zs(t,e,1,-1)}function sC(e){var t=va();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:lm,lastRenderedState:e},t.queue=e,e=e.dispatch=kV.bind(null,sn,e),[t.memoizedState,e]}function cm(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=sn.updateQueue,t===null?(t={lastEffect:null,stores:null},sn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function tM(){return As().memoizedState}function Hp(e,t,n,r){var a=va();sn.flags|=e,a.memoizedState=cm(1|t,n,void 0,r===void 0?null:r)}function ix(e,t,n,r){var a=As();r=r===void 0?null:r;var i=void 0;if(En!==null){var o=En.memoizedState;if(i=o.destroy,r!==null&&P1(r,o.deps)){a.memoizedState=cm(t,n,i,r);return}}sn.flags|=e,a.memoizedState=cm(1|t,n,i,r)}function aC(e,t){return Hp(8390656,8,e,t)}function T1(e,t){return ix(2048,8,e,t)}function nM(e,t){return ix(4,2,e,t)}function rM(e,t){return ix(4,4,e,t)}function sM(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function aM(e,t,n){return n=n!=null?n.concat([e]):null,ix(4,4,sM.bind(null,t,e),n)}function E1(){}function iM(e,t){var n=As();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&P1(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function oM(e,t){var n=As();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&P1(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function lM(e,t,n){return Il&21?(na(n,t)||(n=mD(),sn.lanes|=n,$l|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Vr=!0),e.memoizedState=n)}function PV(e,t){var n=Ot;Ot=n!==0&&4>n?n:4,e(!0);var r=f0.transition;f0.transition={};try{e(!1),t()}finally{Ot=n,f0.transition=r}}function cM(){return As().memoizedState}function AV(e,t,n){var r=bo(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},uM(e))dM(t,n);else if(n=WD(e,t,n,r),n!==null){var a=_r();Zs(n,e,r,a),hM(n,t,r)}}function kV(e,t,n){var r=bo(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(uM(e))dM(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(a.hasEagerState=!0,a.eagerState=l,na(l,o)){var c=t.interleaved;c===null?(a.next=a,w1(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}n=WD(e,t,a,r),n!==null&&(a=_r(),Zs(n,e,r,a),hM(n,t,r))}}function uM(e){var t=e.alternate;return e===sn||t!==null&&t===sn}function dM(e,t){Oh=bg=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function hM(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,l1(e,n)}}var wg={readContext:Ps,useCallback:sr,useContext:sr,useEffect:sr,useImperativeHandle:sr,useInsertionEffect:sr,useLayoutEffect:sr,useMemo:sr,useReducer:sr,useRef:sr,useState:sr,useDebugValue:sr,useDeferredValue:sr,useTransition:sr,useMutableSource:sr,useSyncExternalStore:sr,useId:sr,unstable_isNewReconciler:!1},TV={readContext:Ps,useCallback:function(e,t){return va().memoizedState=[e,t===void 0?null:t],e},useContext:Ps,useEffect:aC,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Hp(4194308,4,sM.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Hp(4194308,4,e,t)},useInsertionEffect:function(e,t){return Hp(4,2,e,t)},useMemo:function(e,t){var n=va();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=va();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=AV.bind(null,sn,e),[r.memoizedState,e]},useRef:function(e){var t=va();return e={current:e},t.memoizedState=e},useState:sC,useDebugValue:E1,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=sC(!1),t=e[0];return e=PV.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=sn,a=va();if(en){if(n===void 0)throw Error(ye(407));n=n()}else{if(n=t(),Hn===null)throw Error(ye(349));Il&30||QD(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,aC(JD.bind(null,r,i,e),[e]),r.flags|=2048,cm(9,XD.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=va(),t=Hn.identifierPrefix;if(en){var n=li,r=oi;n=(r&~(1<<32-Js(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=om++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=CV++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},EV={readContext:Ps,useCallback:iM,useContext:Ps,useEffect:T1,useImperativeHandle:aM,useInsertionEffect:nM,useLayoutEffect:rM,useMemo:oM,useReducer:p0,useRef:tM,useState:function(){return p0(lm)},useDebugValue:E1,useDeferredValue:function(e){var t=As();return lM(t,En.memoizedState,e)},useTransition:function(){var e=p0(lm)[0],t=As().memoizedState;return[e,t]},useMutableSource:GD,useSyncExternalStore:YD,useId:cM,unstable_isNewReconciler:!1},OV={readContext:Ps,useCallback:iM,useContext:Ps,useEffect:T1,useImperativeHandle:aM,useInsertionEffect:nM,useLayoutEffect:rM,useMemo:oM,useReducer:g0,useRef:tM,useState:function(){return g0(lm)},useDebugValue:E1,useDeferredValue:function(e){var t=As();return En===null?t.memoizedState=e:lM(t,En.memoizedState,e)},useTransition:function(){var e=g0(lm)[0],t=As().memoizedState;return[e,t]},useMutableSource:GD,useSyncExternalStore:YD,useId:cM,unstable_isNewReconciler:!1};function zs(e,t){if(e&&e.defaultProps){t=on({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Jj(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:on({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ox={isMounted:function(e){return(e=e._reactInternals)?tc(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=_r(),a=bo(e),i=hi(r,a);i.payload=t,n!=null&&(i.callback=n),t=yo(e,i,a),t!==null&&(Zs(t,e,a,r),Up(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=_r(),a=bo(e),i=hi(r,a);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=yo(e,i,a),t!==null&&(Zs(t,e,a,r),Up(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=_r(),r=bo(e),a=hi(n,r);a.tag=2,t!=null&&(a.callback=t),t=yo(e,a,r),t!==null&&(Zs(t,e,r,n),Up(t,e,r))}};function iC(e,t,n,r,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!tm(n,r)||!tm(a,i):!0}function mM(e,t,n){var r=!1,a=Ao,i=t.contextType;return typeof i=="object"&&i!==null?i=Ps(i):(a=Wr(t)?Dl:mr.current,r=t.contextTypes,i=(r=r!=null)?_u(e,a):Ao),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ox,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function oC(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ox.enqueueReplaceState(t,t.state,null)}function Zj(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},N1(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Ps(i):(i=Wr(t)?Dl:mr.current,a.context=_u(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Jj(e,t,i,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&ox.enqueueReplaceState(a,a.state,null),yg(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function ku(e,t){try{var n="",r=t;do n+=iz(r),r=r.return;while(r);var a=n}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function v0(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function eb(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var DV=typeof WeakMap=="function"?WeakMap:Map;function fM(e,t,n){n=hi(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Sg||(Sg=!0,ub=r),eb(e,t)},n}function pM(e,t,n){n=hi(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){eb(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){eb(e,t),typeof r!="function"&&(jo===null?jo=new Set([this]):jo.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function lC(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new DV;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=KV.bind(null,e,t,n),t.then(e,e))}function cC(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function uC(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=hi(-1,1),t.tag=2,yo(n,t,1))),n.lanes|=1),e)}var MV=ki.ReactCurrentOwner,Vr=!1;function jr(e,t,n,r){t.child=e===null?UD(t,null,n,r):Pu(t,e.child,n,r)}function dC(e,t,n,r,a){n=n.render;var i=t.ref;return tu(t,a),r=A1(e,t,n,r,i,a),n=k1(),e!==null&&!Vr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,ji(e,t,a)):(en&&n&&g1(t),t.flags|=1,jr(e,t,r,a),t.child)}function hC(e,t,n,r,a){if(e===null){var i=n.type;return typeof i=="function"&&!L1(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,gM(e,t,i,r,a)):(e=Qp(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:tm,n(o,r)&&e.ref===t.ref)return ji(e,t,a)}return t.flags|=1,e=wo(i,r),e.ref=t.ref,e.return=t,t.child=e}function gM(e,t,n,r,a){if(e!==null){var i=e.memoizedProps;if(tm(i,r)&&e.ref===t.ref)if(Vr=!1,t.pendingProps=r=i,(e.lanes&a)!==0)e.flags&131072&&(Vr=!0);else return t.lanes=e.lanes,ji(e,t,a)}return tb(e,t,n,r,a)}function vM(e,t,n){var r=t.pendingProps,a=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Wt(Wc,ts),ts|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Wt(Wc,ts),ts|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Wt(Wc,ts),ts|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Wt(Wc,ts),ts|=r;return jr(e,t,a,n),t.child}function xM(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function tb(e,t,n,r,a){var i=Wr(n)?Dl:mr.current;return i=_u(t,i),tu(t,a),n=A1(e,t,n,r,i,a),r=k1(),e!==null&&!Vr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,ji(e,t,a)):(en&&r&&g1(t),t.flags|=1,jr(e,t,n,a),t.child)}function mC(e,t,n,r,a){if(Wr(n)){var i=!0;fg(t)}else i=!1;if(tu(t,a),t.stateNode===null)Kp(e,t),mM(t,n,r),Zj(t,n,r,a),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ps(u):(u=Wr(n)?Dl:mr.current,u=_u(t,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&oC(t,o,r,u),Gi=!1;var m=t.memoizedState;o.state=m,yg(t,r,o,a),c=t.memoizedState,l!==r||m!==c||Ur.current||Gi?(typeof d=="function"&&(Jj(t,n,d,r),c=t.memoizedState),(l=Gi||iC(t,n,l,r,m,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,HD(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:zs(t.type,l),o.props=u,h=t.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ps(c):(c=Wr(n)?Dl:mr.current,c=_u(t,c));var f=n.getDerivedStateFromProps;(d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||m!==c)&&oC(t,o,r,c),Gi=!1,m=t.memoizedState,o.state=m,yg(t,r,o,a);var g=t.memoizedState;l!==h||m!==g||Ur.current||Gi?(typeof f=="function"&&(Jj(t,n,f,r),g=t.memoizedState),(u=Gi||iC(t,n,u,r,m,g,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),o.props=r,o.state=g,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return nb(e,t,n,r,i,a)}function nb(e,t,n,r,a,i){xM(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return a&&J_(t,n,!1),ji(e,t,i);r=t.stateNode,MV.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Pu(t,e.child,null,i),t.child=Pu(t,null,l,i)):jr(e,t,l,i),t.memoizedState=r.state,a&&J_(t,n,!0),t.child}function yM(e){var t=e.stateNode;t.pendingContext?X_(e,t.pendingContext,t.pendingContext!==t.context):t.context&&X_(e,t.context,!1),S1(e,t.containerInfo)}function fC(e,t,n,r,a){return Cu(),x1(a),t.flags|=256,jr(e,t,n,r),t.child}var rb={dehydrated:null,treeContext:null,retryLane:0};function sb(e){return{baseLanes:e,cachePool:null,transitions:null}}function jM(e,t,n){var r=t.pendingProps,a=nn.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Wt(nn,a&1),e===null)return Qj(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ux(o,r,0,null),e=kl(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=sb(n),t.memoizedState=rb,e):O1(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return IV(e,t,o,r,l,a,n);if(i){i=r.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=wo(a,c),r.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=wo(l,i):(i=kl(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?sb(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=rb,r}return i=e.child,e=i.sibling,r=wo(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function O1(e,t){return t=ux({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Jf(e,t,n,r){return r!==null&&x1(r),Pu(t,e.child,null,n),e=O1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function IV(e,t,n,r,a,i,o){if(n)return t.flags&256?(t.flags&=-257,r=v0(Error(ye(422))),Jf(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=ux({mode:"visible",children:r.children},a,0,null),i=kl(i,a,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Pu(t,e.child,null,o),t.child.memoizedState=sb(o),t.memoizedState=rb,i);if(!(t.mode&1))return Jf(e,t,o,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(ye(419)),r=v0(i,r,void 0),Jf(e,t,o,r)}if(l=(o&e.childLanes)!==0,Vr||l){if(r=Hn,r!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,yi(e,a),Zs(r,e,a,-1))}return F1(),r=v0(Error(ye(421))),Jf(e,t,o,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=GV.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,is=xo(a.nextSibling),os=t,en=!0,Gs=null,e!==null&&(js[bs++]=oi,js[bs++]=li,js[bs++]=Ml,oi=e.id,li=e.overflow,Ml=t),t=O1(t,r.children),t.flags|=4096,t)}function pC(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Xj(e.return,t,n)}function x0(e,t,n,r,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function bM(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(jr(e,t,r.children,n),r=nn.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&pC(e,n,t);else if(e.tag===19)pC(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Wt(nn,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&jg(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),x0(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&jg(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}x0(t,!0,n,null,i);break;case"together":x0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Kp(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ji(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),$l|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ye(153));if(t.child!==null){for(e=t.child,n=wo(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=wo(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function $V(e,t,n){switch(t.tag){case 3:yM(t),Cu();break;case 5:KD(t);break;case 1:Wr(t.type)&&fg(t);break;case 4:S1(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Wt(vg,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Wt(nn,nn.current&1),t.flags|=128,null):n&t.child.childLanes?jM(e,t,n):(Wt(nn,nn.current&1),e=ji(e,t,n),e!==null?e.sibling:null);Wt(nn,nn.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return bM(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Wt(nn,nn.current),r)break;return null;case 22:case 23:return t.lanes=0,vM(e,t,n)}return ji(e,t,n)}var wM,ab,NM,SM;wM=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ab=function(){};NM=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,dl(Ea.current);var i=null;switch(n){case"input":a=Pj(e,a),r=Pj(e,r),i=[];break;case"select":a=on({},a,{value:void 0}),r=on({},r,{value:void 0}),i=[];break;case"textarea":a=Tj(e,a),r=Tj(e,r),i=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=hg)}Oj(n,r);var o;n=null;for(u in a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Gh.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=a!=null?a[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Gh.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Yt("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};SM=function(e,t,n,r){n!==r&&(t.flags|=4)};function Zd(e,t){if(!en)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ar(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function RV(e,t,n){var r=t.pendingProps;switch(v1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ar(t),null;case 1:return Wr(t.type)&&mg(),ar(t),null;case 3:return r=t.stateNode,Au(),Jt(Ur),Jt(mr),C1(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Qf(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Gs!==null&&(mb(Gs),Gs=null))),ab(e,t),ar(t),null;case 5:_1(t);var a=dl(im.current);if(n=t.type,e!==null&&t.stateNode!=null)NM(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ye(166));return ar(t),null}if(e=dl(Ea.current),Qf(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[wa]=t,r[sm]=i,e=(t.mode&1)!==0,n){case"dialog":Yt("cancel",r),Yt("close",r);break;case"iframe":case"object":case"embed":Yt("load",r);break;case"video":case"audio":for(a=0;a<bh.length;a++)Yt(bh[a],r);break;case"source":Yt("error",r);break;case"img":case"image":case"link":Yt("error",r),Yt("load",r);break;case"details":Yt("toggle",r);break;case"input":S_(r,i),Yt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Yt("invalid",r);break;case"textarea":C_(r,i),Yt("invalid",r)}Oj(n,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Yf(r.textContent,l,e),a=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Yf(r.textContent,l,e),a=["children",""+l]):Gh.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Yt("scroll",r)}switch(n){case"input":zf(r),__(r,i,!0);break;case"textarea":zf(r),P_(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=hg)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=JO(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[wa]=t,e[sm]=r,wM(e,t,!1,!1),t.stateNode=e;e:{switch(o=Dj(n,r),n){case"dialog":Yt("cancel",e),Yt("close",e),a=r;break;case"iframe":case"object":case"embed":Yt("load",e),a=r;break;case"video":case"audio":for(a=0;a<bh.length;a++)Yt(bh[a],e);a=r;break;case"source":Yt("error",e),a=r;break;case"img":case"image":case"link":Yt("error",e),Yt("load",e),a=r;break;case"details":Yt("toggle",e),a=r;break;case"input":S_(e,r),a=Pj(e,r),Yt("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=on({},r,{value:void 0}),Yt("invalid",e);break;case"textarea":C_(e,r),a=Tj(e,r),Yt("invalid",e);break;default:a=r}Oj(n,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?tD(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ZO(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Yh(e,c):typeof c=="number"&&Yh(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Gh.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Yt("scroll",e):c!=null&&n1(e,i,c,o))}switch(n){case"input":zf(e),__(e,r,!1);break;case"textarea":zf(e),P_(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Po(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Xc(e,!!r.multiple,i,!1):r.defaultValue!=null&&Xc(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=hg)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ar(t),null;case 6:if(e&&t.stateNode!=null)SM(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ye(166));if(n=dl(im.current),dl(Ea.current),Qf(t)){if(r=t.stateNode,n=t.memoizedProps,r[wa]=t,(i=r.nodeValue!==n)&&(e=os,e!==null))switch(e.tag){case 3:Yf(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Yf(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[wa]=t,t.stateNode=r}return ar(t),null;case 13:if(Jt(nn),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(en&&is!==null&&t.mode&1&&!(t.flags&128))VD(),Cu(),t.flags|=98560,i=!1;else if(i=Qf(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(ye(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ye(317));i[wa]=t}else Cu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ar(t),i=!1}else Gs!==null&&(mb(Gs),Gs=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||nn.current&1?In===0&&(In=3):F1())),t.updateQueue!==null&&(t.flags|=4),ar(t),null);case 4:return Au(),ab(e,t),e===null&&nm(t.stateNode.containerInfo),ar(t),null;case 10:return b1(t.type._context),ar(t),null;case 17:return Wr(t.type)&&mg(),ar(t),null;case 19:if(Jt(nn),i=t.memoizedState,i===null)return ar(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)Zd(i,!1);else{if(In!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=jg(e),o!==null){for(t.flags|=128,Zd(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Wt(nn,nn.current&1|2),t.child}e=e.sibling}i.tail!==null&&fn()>Tu&&(t.flags|=128,r=!0,Zd(i,!1),t.lanes=4194304)}else{if(!r)if(e=jg(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Zd(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!en)return ar(t),null}else 2*fn()-i.renderingStartTime>Tu&&n!==1073741824&&(t.flags|=128,r=!0,Zd(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=fn(),t.sibling=null,n=nn.current,Wt(nn,r?n&1|2:n&1),t):(ar(t),null);case 22:case 23:return R1(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?ts&1073741824&&(ar(t),t.subtreeFlags&6&&(t.flags|=8192)):ar(t),null;case 24:return null;case 25:return null}throw Error(ye(156,t.tag))}function FV(e,t){switch(v1(t),t.tag){case 1:return Wr(t.type)&&mg(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Au(),Jt(Ur),Jt(mr),C1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return _1(t),null;case 13:if(Jt(nn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ye(340));Cu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Jt(nn),null;case 4:return Au(),null;case 10:return b1(t.type._context),null;case 22:case 23:return R1(),null;case 24:return null;default:return null}}var Zf=!1,or=!1,LV=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function Uc(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){dn(e,t,r)}else n.current=null}function ib(e,t,n){try{n()}catch(r){dn(e,t,r)}}var gC=!1;function BV(e,t){if(qj=cg,e=kD(),p1(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,m=null;t:for(;;){for(var f;h!==n||a!==0&&h.nodeType!==3||(l=o+a),h!==i||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)m=h,h=f;for(;;){if(h===e)break t;if(m===n&&++u===a&&(l=o),m===i&&++d===r&&(c=o),(f=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=f}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Uj={focusedElem:e,selectionRange:n},cg=!1,Ie=t;Ie!==null;)if(t=Ie,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ie=e;else for(;Ie!==null;){t=Ie;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var p=g.memoizedProps,v=g.memoizedState,x=t.stateNode,y=x.getSnapshotBeforeUpdate(t.elementType===t.type?p:zs(t.type,p),v);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var j=t.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ye(163))}}catch(w){dn(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,Ie=e;break}Ie=t.return}return g=gC,gC=!1,g}function Dh(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&ib(t,n,i)}a=a.next}while(a!==r)}}function lx(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ob(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function _M(e){var t=e.alternate;t!==null&&(e.alternate=null,_M(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[wa],delete t[sm],delete t[Kj],delete t[wV],delete t[NV])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function CM(e){return e.tag===5||e.tag===3||e.tag===4}function vC(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||CM(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function lb(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=hg));else if(r!==4&&(e=e.child,e!==null))for(lb(e,t,n),e=e.sibling;e!==null;)lb(e,t,n),e=e.sibling}function cb(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(cb(e,t,n),e=e.sibling;e!==null;)cb(e,t,n),e=e.sibling}var Qn=null,Us=!1;function Fi(e,t,n){for(n=n.child;n!==null;)PM(e,t,n),n=n.sibling}function PM(e,t,n){if(Ta&&typeof Ta.onCommitFiberUnmount=="function")try{Ta.onCommitFiberUnmount(ex,n)}catch{}switch(n.tag){case 5:or||Uc(n,t);case 6:var r=Qn,a=Us;Qn=null,Fi(e,t,n),Qn=r,Us=a,Qn!==null&&(Us?(e=Qn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Qn.removeChild(n.stateNode));break;case 18:Qn!==null&&(Us?(e=Qn,n=n.stateNode,e.nodeType===8?d0(e.parentNode,n):e.nodeType===1&&d0(e,n),Zh(e)):d0(Qn,n.stateNode));break;case 4:r=Qn,a=Us,Qn=n.stateNode.containerInfo,Us=!0,Fi(e,t,n),Qn=r,Us=a;break;case 0:case 11:case 14:case 15:if(!or&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&ib(n,t,o),a=a.next}while(a!==r)}Fi(e,t,n);break;case 1:if(!or&&(Uc(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){dn(n,t,l)}Fi(e,t,n);break;case 21:Fi(e,t,n);break;case 22:n.mode&1?(or=(r=or)||n.memoizedState!==null,Fi(e,t,n),or=r):Fi(e,t,n);break;default:Fi(e,t,n)}}function xC(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new LV),t.forEach(function(r){var a=YV.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function $s(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Qn=l.stateNode,Us=!1;break e;case 3:Qn=l.stateNode.containerInfo,Us=!0;break e;case 4:Qn=l.stateNode.containerInfo,Us=!0;break e}l=l.return}if(Qn===null)throw Error(ye(160));PM(i,o,a),Qn=null,Us=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){dn(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)AM(t,e),t=t.sibling}function AM(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if($s(t,e),ga(e),r&4){try{Dh(3,e,e.return),lx(3,e)}catch(p){dn(e,e.return,p)}try{Dh(5,e,e.return)}catch(p){dn(e,e.return,p)}}break;case 1:$s(t,e),ga(e),r&512&&n!==null&&Uc(n,n.return);break;case 5:if($s(t,e),ga(e),r&512&&n!==null&&Uc(n,n.return),e.flags&32){var a=e.stateNode;try{Yh(a,"")}catch(p){dn(e,e.return,p)}}if(r&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&QO(a,i),Dj(l,o);var u=Dj(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?tD(a,h):d==="dangerouslySetInnerHTML"?ZO(a,h):d==="children"?Yh(a,h):n1(a,d,h,u)}switch(l){case"input":Aj(a,i);break;case"textarea":XO(a,i);break;case"select":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Xc(a,!!i.multiple,f,!1):m!==!!i.multiple&&(i.defaultValue!=null?Xc(a,!!i.multiple,i.defaultValue,!0):Xc(a,!!i.multiple,i.multiple?[]:"",!1))}a[sm]=i}catch(p){dn(e,e.return,p)}}break;case 6:if($s(t,e),ga(e),r&4){if(e.stateNode===null)throw Error(ye(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(p){dn(e,e.return,p)}}break;case 3:if($s(t,e),ga(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Zh(t.containerInfo)}catch(p){dn(e,e.return,p)}break;case 4:$s(t,e),ga(e);break;case 13:$s(t,e),ga(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(I1=fn())),r&4&&xC(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(or=(u=or)||d,$s(t,e),or=u):$s(t,e),ga(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Ie=e,d=e.child;d!==null;){for(h=Ie=d;Ie!==null;){switch(m=Ie,f=m.child,m.tag){case 0:case 11:case 14:case 15:Dh(4,m,m.return);break;case 1:Uc(m,m.return);var g=m.stateNode;if(typeof g.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(p){dn(r,n,p)}}break;case 5:Uc(m,m.return);break;case 22:if(m.memoizedState!==null){jC(h);continue}}f!==null?(f.return=m,Ie=f):jC(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{a=h.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=eD("display",o))}catch(p){dn(e,e.return,p)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(p){dn(e,e.return,p)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:$s(t,e),ga(e),r&4&&xC(e);break;case 21:break;default:$s(t,e),ga(e)}}function ga(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(CM(n)){var r=n;break e}n=n.return}throw Error(ye(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Yh(a,""),r.flags&=-33);var i=vC(e);cb(e,i,a);break;case 3:case 4:var o=r.stateNode.containerInfo,l=vC(e);lb(e,l,o);break;default:throw Error(ye(161))}}catch(c){dn(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function zV(e,t,n){Ie=e,kM(e)}function kM(e,t,n){for(var r=(e.mode&1)!==0;Ie!==null;){var a=Ie,i=a.child;if(a.tag===22&&r){var o=a.memoizedState!==null||Zf;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||or;l=Zf;var u=or;if(Zf=o,(or=c)&&!u)for(Ie=a;Ie!==null;)o=Ie,c=o.child,o.tag===22&&o.memoizedState!==null?bC(a):c!==null?(c.return=o,Ie=c):bC(a);for(;i!==null;)Ie=i,kM(i),i=i.sibling;Ie=a,Zf=l,or=u}yC(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Ie=i):yC(e)}}function yC(e){for(;Ie!==null;){var t=Ie;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:or||lx(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!or)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:zs(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&rC(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}rC(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Zh(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ye(163))}or||t.flags&512&&ob(t)}catch(m){dn(t,t.return,m)}}if(t===e){Ie=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ie=n;break}Ie=t.return}}function jC(e){for(;Ie!==null;){var t=Ie;if(t===e){Ie=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ie=n;break}Ie=t.return}}function bC(e){for(;Ie!==null;){var t=Ie;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{lx(4,t)}catch(c){dn(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(c){dn(t,a,c)}}var i=t.return;try{ob(t)}catch(c){dn(t,i,c)}break;case 5:var o=t.return;try{ob(t)}catch(c){dn(t,o,c)}}}catch(c){dn(t,t.return,c)}if(t===e){Ie=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Ie=l;break}Ie=t.return}}var VV=Math.ceil,Ng=ki.ReactCurrentDispatcher,D1=ki.ReactCurrentOwner,_s=ki.ReactCurrentBatchConfig,jt=0,Hn=null,bn=null,Xn=0,ts=0,Wc=Mo(0),In=0,um=null,$l=0,cx=0,M1=0,Mh=null,Lr=null,I1=0,Tu=1/0,Ja=null,Sg=!1,ub=null,jo=null,ep=!1,uo=null,_g=0,Ih=0,db=null,Gp=-1,Yp=0;function _r(){return jt&6?fn():Gp!==-1?Gp:Gp=fn()}function bo(e){return e.mode&1?jt&2&&Xn!==0?Xn&-Xn:_V.transition!==null?(Yp===0&&(Yp=mD()),Yp):(e=Ot,e!==0||(e=window.event,e=e===void 0?16:jD(e.type)),e):1}function Zs(e,t,n,r){if(50<Ih)throw Ih=0,db=null,Error(ye(185));uf(e,n,r),(!(jt&2)||e!==Hn)&&(e===Hn&&(!(jt&2)&&(cx|=n),In===4&&Xi(e,Xn)),Hr(e,r),n===1&&jt===0&&!(t.mode&1)&&(Tu=fn()+500,ax&&Io()))}function Hr(e,t){var n=e.callbackNode;_z(e,t);var r=lg(e,e===Hn?Xn:0);if(r===0)n!==null&&T_(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&T_(n),t===1)e.tag===0?SV(wC.bind(null,e)):LD(wC.bind(null,e)),jV(function(){!(jt&6)&&Io()}),n=null;else{switch(fD(r)){case 1:n=o1;break;case 4:n=dD;break;case 16:n=og;break;case 536870912:n=hD;break;default:n=og}n=RM(n,TM.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function TM(e,t){if(Gp=-1,Yp=0,jt&6)throw Error(ye(327));var n=e.callbackNode;if(nu()&&e.callbackNode!==n)return null;var r=lg(e,e===Hn?Xn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Cg(e,r);else{t=r;var a=jt;jt|=2;var i=OM();(Hn!==e||Xn!==t)&&(Ja=null,Tu=fn()+500,Al(e,t));do try{WV();break}catch(l){EM(e,l)}while(!0);j1(),Ng.current=i,jt=a,bn!==null?t=0:(Hn=null,Xn=0,t=In)}if(t!==0){if(t===2&&(a=Fj(e),a!==0&&(r=a,t=hb(e,a))),t===1)throw n=um,Al(e,0),Xi(e,r),Hr(e,fn()),n;if(t===6)Xi(e,r);else{if(a=e.current.alternate,!(r&30)&&!qV(a)&&(t=Cg(e,r),t===2&&(i=Fj(e),i!==0&&(r=i,t=hb(e,i))),t===1))throw n=um,Al(e,0),Xi(e,r),Hr(e,fn()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(ye(345));case 2:tl(e,Lr,Ja);break;case 3:if(Xi(e,r),(r&130023424)===r&&(t=I1+500-fn(),10<t)){if(lg(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){_r(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Hj(tl.bind(null,e,Lr,Ja),t);break}tl(e,Lr,Ja);break;case 4:if(Xi(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-Js(r);i=1<<o,o=t[o],o>a&&(a=o),r&=~i}if(r=a,r=fn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*VV(r/1960))-r,10<r){e.timeoutHandle=Hj(tl.bind(null,e,Lr,Ja),r);break}tl(e,Lr,Ja);break;case 5:tl(e,Lr,Ja);break;default:throw Error(ye(329))}}}return Hr(e,fn()),e.callbackNode===n?TM.bind(null,e):null}function hb(e,t){var n=Mh;return e.current.memoizedState.isDehydrated&&(Al(e,t).flags|=256),e=Cg(e,t),e!==2&&(t=Lr,Lr=n,t!==null&&mb(t)),e}function mb(e){Lr===null?Lr=e:Lr.push.apply(Lr,e)}function qV(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!na(i(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Xi(e,t){for(t&=~M1,t&=~cx,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Js(t),r=1<<n;e[n]=-1,t&=~r}}function wC(e){if(jt&6)throw Error(ye(327));nu();var t=lg(e,0);if(!(t&1))return Hr(e,fn()),null;var n=Cg(e,t);if(e.tag!==0&&n===2){var r=Fj(e);r!==0&&(t=r,n=hb(e,r))}if(n===1)throw n=um,Al(e,0),Xi(e,t),Hr(e,fn()),n;if(n===6)throw Error(ye(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,tl(e,Lr,Ja),Hr(e,fn()),null}function $1(e,t){var n=jt;jt|=1;try{return e(t)}finally{jt=n,jt===0&&(Tu=fn()+500,ax&&Io())}}function Rl(e){uo!==null&&uo.tag===0&&!(jt&6)&&nu();var t=jt;jt|=1;var n=_s.transition,r=Ot;try{if(_s.transition=null,Ot=1,e)return e()}finally{Ot=r,_s.transition=n,jt=t,!(jt&6)&&Io()}}function R1(){ts=Wc.current,Jt(Wc)}function Al(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,yV(n)),bn!==null)for(n=bn.return;n!==null;){var r=n;switch(v1(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&mg();break;case 3:Au(),Jt(Ur),Jt(mr),C1();break;case 5:_1(r);break;case 4:Au();break;case 13:Jt(nn);break;case 19:Jt(nn);break;case 10:b1(r.type._context);break;case 22:case 23:R1()}n=n.return}if(Hn=e,bn=e=wo(e.current,null),Xn=ts=t,In=0,um=null,M1=cx=$l=0,Lr=Mh=null,ul!==null){for(t=0;t<ul.length;t++)if(n=ul[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=a,r.next=o}n.pending=r}ul=null}return e}function EM(e,t){do{var n=bn;try{if(j1(),Wp.current=wg,bg){for(var r=sn.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}bg=!1}if(Il=0,Vn=En=sn=null,Oh=!1,om=0,D1.current=null,n===null||n.return===null){In=1,um=t,bn=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=Xn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=cC(o);if(f!==null){f.flags&=-257,uC(f,o,l,i,t),f.mode&1&&lC(i,u,t),t=f,c=u;var g=t.updateQueue;if(g===null){var p=new Set;p.add(c),t.updateQueue=p}else g.add(c);break e}else{if(!(t&1)){lC(i,u,t),F1();break e}c=Error(ye(426))}}else if(en&&l.mode&1){var v=cC(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),uC(v,o,l,i,t),x1(ku(c,l));break e}}i=c=ku(c,l),In!==4&&(In=2),Mh===null?Mh=[i]:Mh.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var x=fM(i,c,t);nC(i,x);break e;case 1:l=c;var y=i.type,j=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(jo===null||!jo.has(j)))){i.flags|=65536,t&=-t,i.lanes|=t;var w=pM(i,l,t);nC(i,w);break e}}i=i.return}while(i!==null)}MM(n)}catch(N){t=N,bn===n&&n!==null&&(bn=n=n.return);continue}break}while(!0)}function OM(){var e=Ng.current;return Ng.current=wg,e===null?wg:e}function F1(){(In===0||In===3||In===2)&&(In=4),Hn===null||!($l&268435455)&&!(cx&268435455)||Xi(Hn,Xn)}function Cg(e,t){var n=jt;jt|=2;var r=OM();(Hn!==e||Xn!==t)&&(Ja=null,Al(e,t));do try{UV();break}catch(a){EM(e,a)}while(!0);if(j1(),jt=n,Ng.current=r,bn!==null)throw Error(ye(261));return Hn=null,Xn=0,In}function UV(){for(;bn!==null;)DM(bn)}function WV(){for(;bn!==null&&!gz();)DM(bn)}function DM(e){var t=$M(e.alternate,e,ts);e.memoizedProps=e.pendingProps,t===null?MM(e):bn=t,D1.current=null}function MM(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=FV(n,t),n!==null){n.flags&=32767,bn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{In=6,bn=null;return}}else if(n=RV(n,t,ts),n!==null){bn=n;return}if(t=t.sibling,t!==null){bn=t;return}bn=t=e}while(t!==null);In===0&&(In=5)}function tl(e,t,n){var r=Ot,a=_s.transition;try{_s.transition=null,Ot=1,HV(e,t,n,r)}finally{_s.transition=a,Ot=r}return null}function HV(e,t,n,r){do nu();while(uo!==null);if(jt&6)throw Error(ye(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ye(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(Cz(e,i),e===Hn&&(bn=Hn=null,Xn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ep||(ep=!0,RM(og,function(){return nu(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=_s.transition,_s.transition=null;var o=Ot;Ot=1;var l=jt;jt|=4,D1.current=null,BV(e,n),AM(n,e),hV(Uj),cg=!!qj,Uj=qj=null,e.current=n,zV(n),vz(),jt=l,Ot=o,_s.transition=i}else e.current=n;if(ep&&(ep=!1,uo=e,_g=a),i=e.pendingLanes,i===0&&(jo=null),jz(n.stateNode),Hr(e,fn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Sg)throw Sg=!1,e=ub,ub=null,e;return _g&1&&e.tag!==0&&nu(),i=e.pendingLanes,i&1?e===db?Ih++:(Ih=0,db=e):Ih=0,Io(),null}function nu(){if(uo!==null){var e=fD(_g),t=_s.transition,n=Ot;try{if(_s.transition=null,Ot=16>e?16:e,uo===null)var r=!1;else{if(e=uo,uo=null,_g=0,jt&6)throw Error(ye(331));var a=jt;for(jt|=4,Ie=e.current;Ie!==null;){var i=Ie,o=i.child;if(Ie.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Ie=u;Ie!==null;){var d=Ie;switch(d.tag){case 0:case 11:case 15:Dh(8,d,i)}var h=d.child;if(h!==null)h.return=d,Ie=h;else for(;Ie!==null;){d=Ie;var m=d.sibling,f=d.return;if(_M(d),d===u){Ie=null;break}if(m!==null){m.return=f,Ie=m;break}Ie=f}}}var g=i.alternate;if(g!==null){var p=g.child;if(p!==null){g.child=null;do{var v=p.sibling;p.sibling=null,p=v}while(p!==null)}}Ie=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ie=o;else e:for(;Ie!==null;){if(i=Ie,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Dh(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,Ie=x;break e}Ie=i.return}}var y=e.current;for(Ie=y;Ie!==null;){o=Ie;var j=o.child;if(o.subtreeFlags&2064&&j!==null)j.return=o,Ie=j;else e:for(o=y;Ie!==null;){if(l=Ie,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:lx(9,l)}}catch(N){dn(l,l.return,N)}if(l===o){Ie=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,Ie=w;break e}Ie=l.return}}if(jt=a,Io(),Ta&&typeof Ta.onPostCommitFiberRoot=="function")try{Ta.onPostCommitFiberRoot(ex,e)}catch{}r=!0}return r}finally{Ot=n,_s.transition=t}}return!1}function NC(e,t,n){t=ku(n,t),t=fM(e,t,1),e=yo(e,t,1),t=_r(),e!==null&&(uf(e,1,t),Hr(e,t))}function dn(e,t,n){if(e.tag===3)NC(e,e,n);else for(;t!==null;){if(t.tag===3){NC(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(jo===null||!jo.has(r))){e=ku(n,e),e=pM(t,e,1),t=yo(t,e,1),e=_r(),t!==null&&(uf(t,1,e),Hr(t,e));break}}t=t.return}}function KV(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=_r(),e.pingedLanes|=e.suspendedLanes&n,Hn===e&&(Xn&n)===n&&(In===4||In===3&&(Xn&130023424)===Xn&&500>fn()-I1?Al(e,0):M1|=n),Hr(e,t)}function IM(e,t){t===0&&(e.mode&1?(t=Uf,Uf<<=1,!(Uf&130023424)&&(Uf=4194304)):t=1);var n=_r();e=yi(e,t),e!==null&&(uf(e,t,n),Hr(e,n))}function GV(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),IM(e,n)}function YV(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ye(314))}r!==null&&r.delete(t),IM(e,n)}var $M;$M=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ur.current)Vr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Vr=!1,$V(e,t,n);Vr=!!(e.flags&131072)}else Vr=!1,en&&t.flags&1048576&&BD(t,gg,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Kp(e,t),e=t.pendingProps;var a=_u(t,mr.current);tu(t,n),a=A1(null,t,r,e,a,n);var i=k1();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Wr(r)?(i=!0,fg(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,N1(t),a.updater=ox,t.stateNode=a,a._reactInternals=t,Zj(t,r,e,n),t=nb(null,t,r,!0,i,n)):(t.tag=0,en&&i&&g1(t),jr(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Kp(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=XV(r),e=zs(r,e),a){case 0:t=tb(null,t,r,e,n);break e;case 1:t=mC(null,t,r,e,n);break e;case 11:t=dC(null,t,r,e,n);break e;case 14:t=hC(null,t,r,zs(r.type,e),n);break e}throw Error(ye(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:zs(r,a),tb(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:zs(r,a),mC(e,t,r,a,n);case 3:e:{if(yM(t),e===null)throw Error(ye(387));r=t.pendingProps,i=t.memoizedState,a=i.element,HD(e,t),yg(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=ku(Error(ye(423)),t),t=fC(e,t,r,n,a);break e}else if(r!==a){a=ku(Error(ye(424)),t),t=fC(e,t,r,n,a);break e}else for(is=xo(t.stateNode.containerInfo.firstChild),os=t,en=!0,Gs=null,n=UD(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Cu(),r===a){t=ji(e,t,n);break e}jr(e,t,r,n)}t=t.child}return t;case 5:return KD(t),e===null&&Qj(t),r=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,Wj(r,a)?o=null:i!==null&&Wj(r,i)&&(t.flags|=32),xM(e,t),jr(e,t,o,n),t.child;case 6:return e===null&&Qj(t),null;case 13:return jM(e,t,n);case 4:return S1(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Pu(t,null,r,n):jr(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:zs(r,a),dC(e,t,r,a,n);case 7:return jr(e,t,t.pendingProps,n),t.child;case 8:return jr(e,t,t.pendingProps.children,n),t.child;case 12:return jr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Wt(vg,r._currentValue),r._currentValue=o,i!==null)if(na(i.value,o)){if(i.children===a.children&&!Ur.current){t=ji(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=hi(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Xj(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ye(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Xj(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}jr(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,tu(t,n),a=Ps(a),r=r(a),t.flags|=1,jr(e,t,r,n),t.child;case 14:return r=t.type,a=zs(r,t.pendingProps),a=zs(r.type,a),hC(e,t,r,a,n);case 15:return gM(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:zs(r,a),Kp(e,t),t.tag=1,Wr(r)?(e=!0,fg(t)):e=!1,tu(t,n),mM(t,r,a),Zj(t,r,a,n),nb(null,t,r,!0,e,n);case 19:return bM(e,t,n);case 22:return vM(e,t,n)}throw Error(ye(156,t.tag))};function RM(e,t){return uD(e,t)}function QV(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ns(e,t,n,r){return new QV(e,t,n,r)}function L1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function XV(e){if(typeof e=="function")return L1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===s1)return 11;if(e===a1)return 14}return 2}function wo(e,t){var n=e.alternate;return n===null?(n=Ns(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Qp(e,t,n,r,a,i){var o=2;if(r=e,typeof e=="function")L1(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Ic:return kl(n.children,a,i,t);case r1:o=8,a|=8;break;case Nj:return e=Ns(12,n,t,a|2),e.elementType=Nj,e.lanes=i,e;case Sj:return e=Ns(13,n,t,a),e.elementType=Sj,e.lanes=i,e;case _j:return e=Ns(19,n,t,a),e.elementType=_j,e.lanes=i,e;case KO:return ux(n,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case WO:o=10;break e;case HO:o=9;break e;case s1:o=11;break e;case a1:o=14;break e;case Ki:o=16,r=null;break e}throw Error(ye(130,e==null?e:typeof e,""))}return t=Ns(o,n,t,a),t.elementType=e,t.type=r,t.lanes=i,t}function kl(e,t,n,r){return e=Ns(7,e,r,t),e.lanes=n,e}function ux(e,t,n,r){return e=Ns(22,e,r,t),e.elementType=KO,e.lanes=n,e.stateNode={isHidden:!1},e}function y0(e,t,n){return e=Ns(6,e,null,t),e.lanes=n,e}function j0(e,t,n){return t=Ns(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function JV(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=e0(0),this.expirationTimes=e0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=e0(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function B1(e,t,n,r,a,i,o,l,c){return e=new JV(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ns(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},N1(i),e}function ZV(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Mc,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function FM(e){if(!e)return Ao;e=e._reactInternals;e:{if(tc(e)!==e||e.tag!==1)throw Error(ye(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Wr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ye(171))}if(e.tag===1){var n=e.type;if(Wr(n))return FD(e,n,t)}return t}function LM(e,t,n,r,a,i,o,l,c){return e=B1(n,r,!0,e,a,i,o,l,c),e.context=FM(null),n=e.current,r=_r(),a=bo(n),i=hi(r,a),i.callback=t??null,yo(n,i,a),e.current.lanes=a,uf(e,a,r),Hr(e,r),e}function dx(e,t,n,r){var a=t.current,i=_r(),o=bo(a);return n=FM(n),t.context===null?t.context=n:t.pendingContext=n,t=hi(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=yo(a,t,o),e!==null&&(Zs(e,a,o,i),Up(e,a,o)),o}function Pg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function SC(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function z1(e,t){SC(e,t),(e=e.alternate)&&SC(e,t)}function eq(){return null}var BM=typeof reportError=="function"?reportError:function(e){console.error(e)};function V1(e){this._internalRoot=e}hx.prototype.render=V1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ye(409));dx(e,t,null,null)};hx.prototype.unmount=V1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Rl(function(){dx(null,e,null,null)}),t[xi]=null}};function hx(e){this._internalRoot=e}hx.prototype.unstable_scheduleHydration=function(e){if(e){var t=vD();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Qi.length&&t!==0&&t<Qi[n].priority;n++);Qi.splice(n,0,e),n===0&&yD(e)}};function q1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function mx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function _C(){}function tq(e,t,n,r,a){if(a){if(typeof r=="function"){var i=r;r=function(){var u=Pg(o);i.call(u)}}var o=LM(t,r,e,0,null,!1,!1,"",_C);return e._reactRootContainer=o,e[xi]=o.current,nm(e.nodeType===8?e.parentNode:e),Rl(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var l=r;r=function(){var u=Pg(c);l.call(u)}}var c=B1(e,0,!1,null,null,!1,!1,"",_C);return e._reactRootContainer=c,e[xi]=c.current,nm(e.nodeType===8?e.parentNode:e),Rl(function(){dx(t,c,n,r)}),c}function fx(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=Pg(o);l.call(c)}}dx(t,o,e,a)}else o=tq(n,t,e,a,r);return Pg(o)}pD=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=jh(t.pendingLanes);n!==0&&(l1(t,n|1),Hr(t,fn()),!(jt&6)&&(Tu=fn()+500,Io()))}break;case 13:Rl(function(){var r=yi(e,1);if(r!==null){var a=_r();Zs(r,e,1,a)}}),z1(e,1)}};c1=function(e){if(e.tag===13){var t=yi(e,134217728);if(t!==null){var n=_r();Zs(t,e,134217728,n)}z1(e,134217728)}};gD=function(e){if(e.tag===13){var t=bo(e),n=yi(e,t);if(n!==null){var r=_r();Zs(n,e,t,r)}z1(e,t)}};vD=function(){return Ot};xD=function(e,t){var n=Ot;try{return Ot=e,t()}finally{Ot=n}};Ij=function(e,t,n){switch(t){case"input":if(Aj(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=sx(r);if(!a)throw Error(ye(90));YO(r),Aj(r,a)}}}break;case"textarea":XO(e,n);break;case"select":t=n.value,t!=null&&Xc(e,!!n.multiple,t,!1)}};sD=$1;aD=Rl;var nq={usingClientEntryPoint:!1,Events:[hf,Lc,sx,nD,rD,$1]},eh={findFiberByHostInstance:cl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rq={bundleType:eh.bundleType,version:eh.version,rendererPackageName:eh.rendererPackageName,rendererConfig:eh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ki.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=lD(e),e===null?null:e.stateNode},findFiberByHostInstance:eh.findFiberByHostInstance||eq,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tp.isDisabled&&tp.supportsFiber)try{ex=tp.inject(rq),Ta=tp}catch{}}hs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nq;hs.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!q1(t))throw Error(ye(200));return ZV(e,t,null,n)};hs.createRoot=function(e,t){if(!q1(e))throw Error(ye(299));var n=!1,r="",a=BM;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=B1(e,1,!1,null,null,n,!1,r,a),e[xi]=t.current,nm(e.nodeType===8?e.parentNode:e),new V1(t)};hs.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ye(188)):(e=Object.keys(e).join(","),Error(ye(268,e)));return e=lD(t),e=e===null?null:e.stateNode,e};hs.flushSync=function(e){return Rl(e)};hs.hydrate=function(e,t,n){if(!mx(t))throw Error(ye(200));return fx(null,e,t,!0,n)};hs.hydrateRoot=function(e,t,n){if(!q1(e))throw Error(ye(405));var r=n!=null&&n.hydratedSources||null,a=!1,i="",o=BM;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=LM(t,null,e,1,n??null,a,!1,i,o),e[xi]=t.current,nm(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new hx(t)};hs.render=function(e,t,n){if(!mx(t))throw Error(ye(200));return fx(null,e,t,!1,n)};hs.unmountComponentAtNode=function(e){if(!mx(e))throw Error(ye(40));return e._reactRootContainer?(Rl(function(){fx(null,null,e,!1,function(){e._reactRootContainer=null,e[xi]=null})}),!0):!1};hs.unstable_batchedUpdates=$1;hs.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!mx(n))throw Error(ye(200));if(e==null||e._reactInternals===void 0)throw Error(ye(38));return fx(e,t,n,!1,r)};hs.version="18.3.1-next-f1338f8080-20240426";function zM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zM)}catch(e){console.error(e)}}zM(),zO.exports=hs;var nc=zO.exports;const VM=Ct(nc);var qM,CC=nc;qM=CC.createRoot,CC.hydrateRoot;const sq=1,aq=1e6;let b0=0;function iq(){return b0=(b0+1)%Number.MAX_SAFE_INTEGER,b0.toString()}const w0=new Map,PC=e=>{if(w0.has(e))return;const t=setTimeout(()=>{w0.delete(e),$h({type:"REMOVE_TOAST",toastId:e})},aq);w0.set(e,t)},oq=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,sq)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?PC(n):e.toasts.forEach(r=>{PC(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},Xp=[];let Jp={toasts:[]};function $h(e){Jp=oq(Jp,e),Xp.forEach(t=>{t(Jp)})}function lq({...e}){const t=iq(),n=a=>$h({type:"UPDATE_TOAST",toast:{...a,id:t}}),r=()=>$h({type:"DISMISS_TOAST",toastId:t});return $h({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||r()}}}),{id:t,dismiss:r,update:n}}function it(){const[e,t]=b.useState(Jp);return b.useEffect(()=>(Xp.push(t),()=>{const n=Xp.indexOf(t);n>-1&&Xp.splice(n,1)}),[e]),{...e,toast:lq,dismiss:n=>$h({type:"DISMISS_TOAST",toastId:n})}}function ke(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function AC(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function px(...e){return t=>{let n=!1;const r=e.map(a=>{const i=AC(a,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let a=0;a<r.length;a++){const i=r[a];typeof i=="function"?i():AC(e[a],null)}}}}function pt(...e){return b.useCallback(px(...e),e)}function cq(e,t){const n=b.createContext(t),r=i=>{const{children:o,...l}=i,c=b.useMemo(()=>l,Object.values(l));return s.jsx(n.Provider,{value:c,children:o})};r.displayName=e+"Provider";function a(i){const o=b.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,a]}function Kr(e,t=[]){let n=[];function r(i,o){const l=b.createContext(o),c=n.length;n=[...n,o];const u=h=>{var x;const{scope:m,children:f,...g}=h,p=((x=m==null?void 0:m[e])==null?void 0:x[c])||l,v=b.useMemo(()=>g,Object.values(g));return s.jsx(p.Provider,{value:v,children:f})};u.displayName=i+"Provider";function d(h,m){var p;const f=((p=m==null?void 0:m[e])==null?void 0:p[c])||l,g=b.useContext(f);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const a=()=>{const i=n.map(o=>b.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return b.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[r,uq(a,...t)]}function uq(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const h=c(i)[`__scope${u}`];return{...l,...h}},{});return b.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function Fl(e){const t=hq(e),n=b.forwardRef((r,a)=>{const{children:i,...o}=r,l=b.Children.toArray(i),c=l.find(mq);if(c){const u=c.props.children,d=l.map(h=>h===c?b.Children.count(u)>1?b.Children.only(null):b.isValidElement(u)?u.props.children:null:h);return s.jsx(t,{...o,ref:a,children:b.isValidElement(u)?b.cloneElement(u,void 0,d):null})}return s.jsx(t,{...o,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}var dq=Fl("Slot");function hq(e){const t=b.forwardRef((n,r)=>{const{children:a,...i}=n;if(b.isValidElement(a)){const o=pq(a),l=fq(i,a.props);return a.type!==b.Fragment&&(l.ref=r?px(r,o):o),b.cloneElement(a,l)}return b.Children.count(a)>1?b.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var UM=Symbol("radix.slottable");function WM(e){const t=({children:n})=>s.jsx(s.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=UM,t}function mq(e){return b.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===UM}function fq(e,t){const n={...t};for(const r in t){const a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(n[r]=a):r==="style"?n[r]={...a,...i}:r==="className"&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function pq(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function gx(e){const t=e+"CollectionProvider",[n,r]=Kr(t),[a,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:v,children:x}=p,y=M.useRef(null),j=M.useRef(new Map).current;return s.jsx(a,{scope:v,itemMap:j,collectionRef:y,children:x})};o.displayName=t;const l=e+"CollectionSlot",c=Fl(l),u=M.forwardRef((p,v)=>{const{scope:x,children:y}=p,j=i(l,x),w=pt(v,j.collectionRef);return s.jsx(c,{ref:w,children:y})});u.displayName=l;const d=e+"CollectionItemSlot",h="data-radix-collection-item",m=Fl(d),f=M.forwardRef((p,v)=>{const{scope:x,children:y,...j}=p,w=M.useRef(null),N=pt(v,w),_=i(d,x);return M.useEffect(()=>(_.itemMap.set(w,{ref:w,...j}),()=>void _.itemMap.delete(w))),s.jsx(m,{[h]:"",ref:N,children:y})});f.displayName=d;function g(p){const v=i(e+"CollectionConsumer",p);return M.useCallback(()=>{const y=v.collectionRef.current;if(!y)return[];const j=Array.from(y.querySelectorAll(`[${h}]`));return Array.from(v.itemMap.values()).sort((_,S)=>j.indexOf(_.ref.current)-j.indexOf(S.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:u,ItemSlot:f},g,r]}var gq=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ze=gq.reduce((e,t)=>{const n=Fl(`Primitive.${t}`),r=b.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function U1(e,t){e&&nc.flushSync(()=>e.dispatchEvent(t))}function Ar(e){const t=b.useRef(e);return b.useEffect(()=>{t.current=e}),b.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function vq(e,t=globalThis==null?void 0:globalThis.document){const n=Ar(e);b.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var xq="DismissableLayer",fb="dismissableLayer.update",yq="dismissableLayer.pointerDownOutside",jq="dismissableLayer.focusOutside",kC,HM=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),gd=b.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,u=b.useContext(HM),[d,h]=b.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=b.useState({}),g=pt(t,S=>h(S)),p=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=p.indexOf(v),y=d?p.indexOf(d):-1,j=u.layersWithOutsidePointerEventsDisabled.size>0,w=y>=x,N=wq(S=>{const C=S.target,A=[...u.branches].some(T=>T.contains(C));!w||A||(a==null||a(S),o==null||o(S),S.defaultPrevented||l==null||l())},m),_=Nq(S=>{const C=S.target;[...u.branches].some(T=>T.contains(C))||(i==null||i(S),o==null||o(S),S.defaultPrevented||l==null||l())},m);return vq(S=>{y===u.layers.size-1&&(r==null||r(S),!S.defaultPrevented&&l&&(S.preventDefault(),l()))},m),b.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(kC=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),TC(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=kC)}},[d,m,n,u]),b.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),TC())},[d,u]),b.useEffect(()=>{const S=()=>f({});return document.addEventListener(fb,S),()=>document.removeEventListener(fb,S)},[]),s.jsx(ze.div,{...c,ref:g,style:{pointerEvents:j?w?"auto":"none":void 0,...e.style},onFocusCapture:ke(e.onFocusCapture,_.onFocusCapture),onBlurCapture:ke(e.onBlurCapture,_.onBlurCapture),onPointerDownCapture:ke(e.onPointerDownCapture,N.onPointerDownCapture)})});gd.displayName=xq;var bq="DismissableLayerBranch",KM=b.forwardRef((e,t)=>{const n=b.useContext(HM),r=b.useRef(null),a=pt(t,r);return b.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),s.jsx(ze.div,{...e,ref:a})});KM.displayName=bq;function wq(e,t=globalThis==null?void 0:globalThis.document){const n=Ar(e),r=b.useRef(!1),a=b.useRef(()=>{});return b.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){GM(yq,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function Nq(e,t=globalThis==null?void 0:globalThis.document){const n=Ar(e),r=b.useRef(!1);return b.useEffect(()=>{const a=i=>{i.target&&!r.current&&GM(jq,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function TC(){const e=new CustomEvent(fb);document.dispatchEvent(e)}function GM(e,t,n,{discrete:r}){const a=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?U1(a,i):a.dispatchEvent(i)}var Sq=gd,_q=KM,_n=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},Cq="Portal",ff=b.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[a,i]=b.useState(!1);_n(()=>i(!0),[]);const o=n||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?VM.createPortal(s.jsx(ze.div,{...r,ref:t}),o):null});ff.displayName=Cq;function Pq(e,t){return b.useReducer((n,r)=>t[n][r]??n,e)}var Es=e=>{const{present:t,children:n}=e,r=Aq(t),a=typeof n=="function"?n({present:r.isPresent}):b.Children.only(n),i=pt(r.ref,kq(a));return typeof n=="function"||r.isPresent?b.cloneElement(a,{ref:i}):null};Es.displayName="Presence";function Aq(e){const[t,n]=b.useState(),r=b.useRef(null),a=b.useRef(e),i=b.useRef("none"),o=e?"mounted":"unmounted",[l,c]=Pq(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const u=np(r.current);i.current=l==="mounted"?u:"none"},[l]),_n(()=>{const u=r.current,d=a.current;if(d!==e){const m=i.current,f=np(u);e?c("MOUNT"):f==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&m!==f?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),_n(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,h=f=>{const p=np(r.current).includes(f.animationName);if(f.target===t&&p&&(c("ANIMATION_END"),!a.current)){const v=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=v)})}},m=f=>{f.target===t&&(i.current=np(r.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:b.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function np(e){return(e==null?void 0:e.animationName)||"none"}function kq(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Tq=ZN[" useInsertionEffect ".trim().toString()]||_n;function bi({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[a,i,o]=Eq({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:a;{const d=b.useRef(e!==void 0);b.useEffect(()=>{const h=d.current;h!==l&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,r])}const u=b.useCallback(d=>{var h;if(l){const m=Oq(d)?d(e):d;m!==e&&((h=o.current)==null||h.call(o,m))}else i(d)},[l,e,i,o]);return[c,u]}function Eq({defaultProp:e,onChange:t}){const[n,r]=b.useState(e),a=b.useRef(n),i=b.useRef(t);return Tq(()=>{i.current=t},[t]),b.useEffect(()=>{var o;a.current!==n&&((o=i.current)==null||o.call(i,n),a.current=n)},[n,a]),[n,r,i]}function Oq(e){return typeof e=="function"}var YM=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Dq="VisuallyHidden",vx=b.forwardRef((e,t)=>s.jsx(ze.span,{...e,ref:t,style:{...YM,...e.style}}));vx.displayName=Dq;var Mq=vx,W1="ToastProvider",[H1,Iq,$q]=gx("Toast"),[QM,Uke]=Kr("Toast",[$q]),[Rq,xx]=QM(W1),XM=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=e,[l,c]=b.useState(null),[u,d]=b.useState(0),h=b.useRef(!1),m=b.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${W1}\`. Expected non-empty \`string\`.`),s.jsx(H1.Provider,{scope:t,children:s.jsx(Rq,{scope:t,label:n,duration:r,swipeDirection:a,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:b.useCallback(()=>d(f=>f+1),[]),onToastRemove:b.useCallback(()=>d(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:m,children:o})})};XM.displayName=W1;var JM="ToastViewport",Fq=["F8"],pb="toast.viewportPause",gb="toast.viewportResume",ZM=b.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=Fq,label:a="Notifications ({hotkey})",...i}=e,o=xx(JM,n),l=Iq(n),c=b.useRef(null),u=b.useRef(null),d=b.useRef(null),h=b.useRef(null),m=pt(t,h,o.onViewportChange),f=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;b.useEffect(()=>{const v=x=>{var j;r.length!==0&&r.every(w=>x[w]||x.code===w)&&((j=h.current)==null||j.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[r]),b.useEffect(()=>{const v=c.current,x=h.current;if(g&&v&&x){const y=()=>{if(!o.isClosePausedRef.current){const _=new CustomEvent(pb);x.dispatchEvent(_),o.isClosePausedRef.current=!0}},j=()=>{if(o.isClosePausedRef.current){const _=new CustomEvent(gb);x.dispatchEvent(_),o.isClosePausedRef.current=!1}},w=_=>{!v.contains(_.relatedTarget)&&j()},N=()=>{v.contains(document.activeElement)||j()};return v.addEventListener("focusin",y),v.addEventListener("focusout",w),v.addEventListener("pointermove",y),v.addEventListener("pointerleave",N),window.addEventListener("blur",y),window.addEventListener("focus",j),()=>{v.removeEventListener("focusin",y),v.removeEventListener("focusout",w),v.removeEventListener("pointermove",y),v.removeEventListener("pointerleave",N),window.removeEventListener("blur",y),window.removeEventListener("focus",j)}}},[g,o.isClosePausedRef]);const p=b.useCallback(({tabbingDirection:v})=>{const y=l().map(j=>{const w=j.ref.current,N=[w,...Xq(w)];return v==="forwards"?N:N.reverse()});return(v==="forwards"?y.reverse():y).flat()},[l]);return b.useEffect(()=>{const v=h.current;if(v){const x=y=>{var N,_,S;const j=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!j){const C=document.activeElement,A=y.shiftKey;if(y.target===v&&A){(N=u.current)==null||N.focus();return}const k=p({tabbingDirection:A?"backwards":"forwards"}),R=k.findIndex(I=>I===C);N0(k.slice(R+1))?y.preventDefault():A?(_=u.current)==null||_.focus():(S=d.current)==null||S.focus()}};return v.addEventListener("keydown",x),()=>v.removeEventListener("keydown",x)}},[l,p]),s.jsxs(_q,{ref:c,role:"region","aria-label":a.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&s.jsx(vb,{ref:u,onFocusFromOutsideViewport:()=>{const v=p({tabbingDirection:"forwards"});N0(v)}}),s.jsx(H1.Slot,{scope:n,children:s.jsx(ze.ol,{tabIndex:-1,...i,ref:m})}),g&&s.jsx(vb,{ref:d,onFocusFromOutsideViewport:()=>{const v=p({tabbingDirection:"backwards"});N0(v)}})]})});ZM.displayName=JM;var eI="ToastFocusProxy",vb=b.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...a}=e,i=xx(eI,n);return s.jsx(vx,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&r()}})});vb.displayName=eI;var pf="Toast",Lq="toast.swipeStart",Bq="toast.swipeMove",zq="toast.swipeCancel",Vq="toast.swipeEnd",tI=b.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:a,onOpenChange:i,...o}=e,[l,c]=bi({prop:r,defaultProp:a??!0,onChange:i,caller:pf});return s.jsx(Es,{present:n||l,children:s.jsx(Wq,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:Ar(e.onPause),onResume:Ar(e.onResume),onSwipeStart:ke(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ke(e.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:ke(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ke(e.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});tI.displayName=pf;var[qq,Uq]=QM(pf,{onClose(){}}),Wq=b.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:m,onSwipeEnd:f,...g}=e,p=xx(pf,n),[v,x]=b.useState(null),y=pt(t,I=>x(I)),j=b.useRef(null),w=b.useRef(null),N=a||p.duration,_=b.useRef(0),S=b.useRef(N),C=b.useRef(0),{onToastAdd:A,onToastRemove:T}=p,E=Ar(()=>{var W;(v==null?void 0:v.contains(document.activeElement))&&((W=p.viewport)==null||W.focus()),o()}),k=b.useCallback(I=>{!I||I===1/0||(window.clearTimeout(C.current),_.current=new Date().getTime(),C.current=window.setTimeout(E,I))},[E]);b.useEffect(()=>{const I=p.viewport;if(I){const W=()=>{k(S.current),u==null||u()},V=()=>{const q=new Date().getTime()-_.current;S.current=S.current-q,window.clearTimeout(C.current),c==null||c()};return I.addEventListener(pb,V),I.addEventListener(gb,W),()=>{I.removeEventListener(pb,V),I.removeEventListener(gb,W)}}},[p.viewport,N,c,u,k]),b.useEffect(()=>{i&&!p.isClosePausedRef.current&&k(N)},[i,N,p.isClosePausedRef,k]),b.useEffect(()=>(A(),()=>T()),[A,T]);const R=b.useMemo(()=>v?lI(v):null,[v]);return p.viewport?s.jsxs(s.Fragment,{children:[R&&s.jsx(Hq,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:R}),s.jsx(qq,{scope:n,onClose:E,children:nc.createPortal(s.jsx(H1.ItemSlot,{scope:n,children:s.jsx(Sq,{asChild:!0,onEscapeKeyDown:ke(l,()=>{p.isFocusedToastEscapeKeyDownRef.current||E(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(ze.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":p.swipeDirection,...g,ref:y,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:ke(e.onKeyDown,I=>{I.key==="Escape"&&(l==null||l(I.nativeEvent),I.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,E()))}),onPointerDown:ke(e.onPointerDown,I=>{I.button===0&&(j.current={x:I.clientX,y:I.clientY})}),onPointerMove:ke(e.onPointerMove,I=>{if(!j.current)return;const W=I.clientX-j.current.x,V=I.clientY-j.current.y,q=!!w.current,P=["left","right"].includes(p.swipeDirection),O=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,B=P?O(0,W):0,U=P?0:O(0,V),X=I.pointerType==="touch"?10:2,ie={x:B,y:U},re={originalEvent:I,delta:ie};q?(w.current=ie,rp(Bq,h,re,{discrete:!1})):EC(ie,p.swipeDirection,X)?(w.current=ie,rp(Lq,d,re,{discrete:!1}),I.target.setPointerCapture(I.pointerId)):(Math.abs(W)>X||Math.abs(V)>X)&&(j.current=null)}),onPointerUp:ke(e.onPointerUp,I=>{const W=w.current,V=I.target;if(V.hasPointerCapture(I.pointerId)&&V.releasePointerCapture(I.pointerId),w.current=null,j.current=null,W){const q=I.currentTarget,P={originalEvent:I,delta:W};EC(W,p.swipeDirection,p.swipeThreshold)?rp(Vq,f,P,{discrete:!0}):rp(zq,m,P,{discrete:!0}),q.addEventListener("click",O=>O.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),Hq=e=>{const{__scopeToast:t,children:n,...r}=e,a=xx(pf,t),[i,o]=b.useState(!1),[l,c]=b.useState(!1);return Yq(()=>o(!0)),b.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:s.jsx(ff,{asChild:!0,children:s.jsx(vx,{...r,children:i&&s.jsxs(s.Fragment,{children:[a.label," ",n]})})})},Kq="ToastTitle",nI=b.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return s.jsx(ze.div,{...r,ref:t})});nI.displayName=Kq;var Gq="ToastDescription",rI=b.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return s.jsx(ze.div,{...r,ref:t})});rI.displayName=Gq;var sI="ToastAction",aI=b.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?s.jsx(oI,{altText:n,asChild:!0,children:s.jsx(K1,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${sI}\`. Expected non-empty \`string\`.`),null)});aI.displayName=sI;var iI="ToastClose",K1=b.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,a=Uq(iI,n);return s.jsx(oI,{asChild:!0,children:s.jsx(ze.button,{type:"button",...r,ref:t,onClick:ke(e.onClick,a.onClose)})})});K1.displayName=iI;var oI=b.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...a}=e;return s.jsx(ze.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...a,ref:t})});function lI(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),Qq(r)){const a=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...lI(r))}}),t}function rp(e,t,n,{discrete:r}){const a=n.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?U1(a,i):a.dispatchEvent(i)}var EC=(e,t,n=0)=>{const r=Math.abs(e.x),a=Math.abs(e.y),i=r>a;return t==="left"||t==="right"?i&&r>n:!i&&a>n};function Yq(e=()=>{}){const t=Ar(e);_n(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function Qq(e){return e.nodeType===e.ELEMENT_NODE}function Xq(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function N0(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var Jq=XM,cI=ZM,uI=tI,dI=nI,hI=rI,mI=aI,fI=K1;function pI(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=pI(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Ze(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=pI(e))&&(r&&(r+=" "),r+=t);return r}const OC=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,DC=Ze,gf=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return DC(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(u=>{const d=n==null?void 0:n[u],h=i==null?void 0:i[u];if(d===null)return null;const m=OC(d)||OC(h);return a[u][m]}),l=n&&Object.entries(n).reduce((u,d)=>{let[h,m]=d;return m===void 0||(u[h]=m),u},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:m,...f}=d;return Object.entries(f).every(g=>{let[p,v]=g;return Array.isArray(v)?v.includes({...i,...l}[p]):{...i,...l}[p]===v})?[...u,h,m]:u},[]);return DC(e,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zq=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gI=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var eU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tU=b.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:o,...l},c)=>b.createElement("svg",{ref:c,...eU,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:gI("lucide",a),...l},[...o.map(([u,d])=>b.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=(e,t)=>{const n=b.forwardRef(({className:r,...a},i)=>b.createElement(tU,{ref:i,iconNode:t,className:gI(`lucide-${Zq(e)}`,r),...a}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=Te("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MC=Te("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nU=Te("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xb=Te("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ag=Te("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rU=Te("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sU=Te("Bird",[["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M3.4 18H12a8 8 0 0 0 8-8V7a4 4 0 0 0-7.28-2.3L2 20",key:"oj1oa8"}],["path",{d:"m20 7 2 .5-2 .5",key:"12nv4d"}],["path",{d:"M10 18v3",key:"1yea0a"}],["path",{d:"M14 17.75V21",key:"1pymcb"}],["path",{d:"M7 18a6 6 0 0 0 3.84-10.61",key:"1npnn0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hl=Te("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aU=Te("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vI=Te("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=Te("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vf=Te("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iU=Te("Cat",[["path",{d:"M12 5c.67 0 1.35.09 2 .26 1.78-2 5.03-2.84 6.42-2.26 1.4.58-.42 7-.42 7 .57 1.07 1 2.24 1 3.44C21 17.9 16.97 21 12 21s-9-3-9-7.56c0-1.25.5-2.4 1-3.44 0 0-1.89-6.42-.5-7 1.39-.58 4.72.23 6.5 2.23A9.04 9.04 0 0 1 12 5Z",key:"x6xyqk"}],["path",{d:"M8 14v.5",key:"1nzgdb"}],["path",{d:"M16 14v.5",key:"1lajdz"}],["path",{d:"M11.25 16.25h1.5L12 17l-.75-.75Z",key:"12kq1m"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xI=Te("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=Te("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yI=Te("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oU=Te("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lU=Te("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qn=Te("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=Te("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dm=Te("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cU=Te("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=Te("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uU=Te("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dU=Te("Dog",[["path",{d:"M11.25 16.25h1.5L12 17z",key:"w7jh35"}],["path",{d:"M16 14v.5",key:"1lajdz"}],["path",{d:"M4.42 11.247A13.152 13.152 0 0 0 4 14.556C4 18.728 7.582 21 12 21s8-2.272 8-6.444a11.702 11.702 0 0 0-.493-3.309",key:"u7s9ue"}],["path",{d:"M8 14v.5",key:"1nzgdb"}],["path",{d:"M8.5 8.5c-.384 1.05-1.083 2.028-2.344 2.5-1.931.722-3.576-.297-3.656-1-.113-.994 1.177-6.53 4-7 1.923-.321 3.651.845 3.651 2.235A7.497 7.497 0 0 1 14 5.277c0-1.39 1.844-2.598 3.767-2.277 2.823.47 4.113 6.006 4 7-.08.703-1.725 1.722-3.656 1-1.261-.472-1.855-1.45-2.239-2.5",key:"v8hric"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vd=Te("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yx=Te("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=Te("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=Te("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=Te("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=Te("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jI=Te("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hU=Te("Fish",[["path",{d:"M6.5 12c.94-3.46 4.94-6 8.5-6 3.56 0 6.06 2.54 7 6-.94 3.47-3.44 6-7 6s-7.56-2.53-8.5-6Z",key:"15baut"}],["path",{d:"M18 12v.5",key:"18hhni"}],["path",{d:"M16 17.93a9.77 9.77 0 0 1 0-11.86",key:"16dt7o"}],["path",{d:"M7 10.67C7 8 5.58 5.97 2.73 5.5c-1 1.5-1 5 .23 6.5-1.24 1.5-1.24 5-.23 6.5C5.58 18.03 7 16 7 13.33",key:"l9di03"}],["path",{d:"M10.46 7.26C10.2 5.88 9.17 4.24 8 3h5.8a2 2 0 0 1 1.98 1.67l.23 1.4",key:"1kjonw"}],["path",{d:"m16.01 17.93-.23 1.4A2 2 0 0 1 13.8 21H9.5a5.96 5.96 0 0 0 1.49-3.98",key:"1zlm23"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ko=Te("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=Te("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mU=Te("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S0=Te("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=Te("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=Te("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fU=Te("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xf=Te("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=Te("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=Te("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pU=Te("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=Te("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gU=Te("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=Te("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kg=Te("PawPrint",[["circle",{cx:"11",cy:"4",r:"2",key:"vol9p0"}],["circle",{cx:"18",cy:"8",r:"2",key:"17gozi"}],["circle",{cx:"20",cy:"16",r:"2",key:"1v9bxh"}],["path",{d:"M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z",key:"1ydw1z"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=Te("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=Te("Pill",[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=Te("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ou=Te("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bI=Te("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rh=Te("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=Te("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=Te("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vU=Te("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xU=Te("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=Te("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=Te("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yU=Te("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=Te("Syringe",[["path",{d:"m18 2 4 4",key:"22kx64"}],["path",{d:"m17 7 3-3",key:"1w1zoj"}],["path",{d:"M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5",key:"1exhtz"}],["path",{d:"m9 11 4 4",key:"rovt3i"}],["path",{d:"m5 19-3 3",key:"59f2uf"}],["path",{d:"m14 4 6 6",key:"yqp9t2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jU=Te("Tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hm=Te("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jb=Te("Tractor",[["path",{d:"m10 11 11 .9a1 1 0 0 1 .8 1.1l-.665 4.158a1 1 0 0 1-.988.842H20",key:"she1j9"}],["path",{d:"M16 18h-5",key:"bq60fd"}],["path",{d:"M18 5a1 1 0 0 0-1 1v5.573",key:"1kv8ia"}],["path",{d:"M3 4h8.129a1 1 0 0 1 .99.863L13 11.246",key:"1q1ert"}],["path",{d:"M4 11V4",key:"9ft8pt"}],["path",{d:"M7 15h.01",key:"k5ht0j"}],["path",{d:"M8 10.1V4",key:"1jgyzo"}],["circle",{cx:"18",cy:"18",r:"2",key:"1emm8v"}],["circle",{cx:"7",cy:"15",r:"5",key:"ddtuc"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=Te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ll=Te("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=Te("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=Te("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bb=Te("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bU=Te("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=Te("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wU=Te("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=Te("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tg=Te("Weight",[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=Te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Y1="-",NU=e=>{const t=_U(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const l=o.split(Y1);return l[0]===""&&l.length!==1&&l.shift(),wI(l,t)||SU(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},wI=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),a=r?wI(e.slice(1),r):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(Y1);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},FC=/^\[(.+)\]$/,SU=e=>{if(FC.test(e)){const t=FC.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},_U=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return PU(Object.entries(e.classGroups),n).forEach(([i,o])=>{wb(o,r,i,t)}),r},wb=(e,t,n,r)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:LC(t,a);i.classGroupId=n;return}if(typeof a=="function"){if(CU(a)){wb(a(r),t,n,r);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([i,o])=>{wb(o,LC(t,i),n,r)})})},LC=(e,t)=>{let n=e;return t.split(Y1).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},CU=e=>e.isThemeGetter,PU=(e,t)=>t?e.map(([n,r])=>{const a=r.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[n,a]}):e,AU=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(i,o)=>{n.set(i,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return a(i,o),o},set(i,o){n.has(i)?n.set(i,o):a(i,o)}}},NI="!",kU=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,a=t[0],i=t.length,o=l=>{const c=[];let u=0,d=0,h;for(let v=0;v<l.length;v++){let x=l[v];if(u===0){if(x===a&&(r||l.slice(v,v+i)===t)){c.push(l.slice(d,v)),d=v+i;continue}if(x==="/"){h=v;continue}}x==="["?u++:x==="]"&&u--}const m=c.length===0?l:l.substring(d),f=m.startsWith(NI),g=f?m.substring(1):m,p=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:f,baseClassName:g,maybePostfixModifierPosition:p}};return n?l=>n({className:l,parseClassName:o}):o},TU=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},EU=e=>({cache:AU(e.cacheSize),parseClassName:kU(e),...NU(e)}),OU=/\s+/,DU=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(OU);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:f}=n(u);let g=!!f,p=r(g?m.substring(0,f):m);if(!p){if(!g){l=u+(l.length>0?" "+l:l);continue}if(p=r(m),!p){l=u+(l.length>0?" "+l:l);continue}g=!1}const v=TU(d).join(":"),x=h?v+NI:v,y=x+p;if(i.includes(y))continue;i.push(y);const j=a(p,g);for(let w=0;w<j.length;++w){const N=j[w];i.push(x+N)}l=u+(l.length>0?" "+l:l)}return l};function MU(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=SI(t))&&(r&&(r+=" "),r+=n);return r}const SI=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=SI(e[r]))&&(n&&(n+=" "),n+=t);return n};function IU(e,...t){let n,r,a,i=o;function o(c){const u=t.reduce((d,h)=>h(d),e());return n=EU(u),r=n.cache.get,a=n.cache.set,i=l,l(c)}function l(c){const u=r(c);if(u)return u;const d=DU(c,n);return a(c,d),d}return function(){return i(MU.apply(null,arguments))}}const Gt=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},_I=/^\[(?:([a-z-]+):)?(.+)\]$/i,$U=/^\d+\/\d+$/,RU=new Set(["px","full","screen"]),FU=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,LU=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,BU=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,zU=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,VU=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ga=e=>ru(e)||RU.has(e)||$U.test(e),Li=e=>xd(e,"length",QU),ru=e=>!!e&&!Number.isNaN(Number(e)),_0=e=>xd(e,"number",ru),th=e=>!!e&&Number.isInteger(Number(e)),qU=e=>e.endsWith("%")&&ru(e.slice(0,-1)),ot=e=>_I.test(e),Bi=e=>FU.test(e),UU=new Set(["length","size","percentage"]),WU=e=>xd(e,UU,CI),HU=e=>xd(e,"position",CI),KU=new Set(["image","url"]),GU=e=>xd(e,KU,JU),YU=e=>xd(e,"",XU),nh=()=>!0,xd=(e,t,n)=>{const r=_I.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},QU=e=>LU.test(e)&&!BU.test(e),CI=()=>!1,XU=e=>zU.test(e),JU=e=>VU.test(e),ZU=()=>{const e=Gt("colors"),t=Gt("spacing"),n=Gt("blur"),r=Gt("brightness"),a=Gt("borderColor"),i=Gt("borderRadius"),o=Gt("borderSpacing"),l=Gt("borderWidth"),c=Gt("contrast"),u=Gt("grayscale"),d=Gt("hueRotate"),h=Gt("invert"),m=Gt("gap"),f=Gt("gradientColorStops"),g=Gt("gradientColorStopPositions"),p=Gt("inset"),v=Gt("margin"),x=Gt("opacity"),y=Gt("padding"),j=Gt("saturate"),w=Gt("scale"),N=Gt("sepia"),_=Gt("skew"),S=Gt("space"),C=Gt("translate"),A=()=>["auto","contain","none"],T=()=>["auto","hidden","clip","visible","scroll"],E=()=>["auto",ot,t],k=()=>[ot,t],R=()=>["",Ga,Li],I=()=>["auto",ru,ot],W=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],V=()=>["solid","dashed","dotted","double","none"],q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],P=()=>["start","end","center","between","around","evenly","stretch"],O=()=>["","0",ot],B=()=>["auto","avoid","all","avoid-page","page","left","right","column"],U=()=>[ru,ot];return{cacheSize:500,separator:":",theme:{colors:[nh],spacing:[Ga,Li],blur:["none","",Bi,ot],brightness:U(),borderColor:[e],borderRadius:["none","","full",Bi,ot],borderSpacing:k(),borderWidth:R(),contrast:U(),grayscale:O(),hueRotate:U(),invert:O(),gap:k(),gradientColorStops:[e],gradientColorStopPositions:[qU,Li],inset:E(),margin:E(),opacity:U(),padding:k(),saturate:U(),scale:U(),sepia:O(),skew:U(),space:k(),translate:k()},classGroups:{aspect:[{aspect:["auto","square","video",ot]}],container:["container"],columns:[{columns:[Bi]}],"break-after":[{"break-after":B()}],"break-before":[{"break-before":B()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...W(),ot]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",th,ot]}],basis:[{basis:E()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ot]}],grow:[{grow:O()}],shrink:[{shrink:O()}],order:[{order:["first","last","none",th,ot]}],"grid-cols":[{"grid-cols":[nh]}],"col-start-end":[{col:["auto",{span:["full",th,ot]},ot]}],"col-start":[{"col-start":I()}],"col-end":[{"col-end":I()}],"grid-rows":[{"grid-rows":[nh]}],"row-start-end":[{row:["auto",{span:[th,ot]},ot]}],"row-start":[{"row-start":I()}],"row-end":[{"row-end":I()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ot]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ot]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...P()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...P(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...P(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ot,t]}],"min-w":[{"min-w":[ot,t,"min","max","fit"]}],"max-w":[{"max-w":[ot,t,"none","full","min","max","fit","prose",{screen:[Bi]},Bi]}],h:[{h:[ot,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ot,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ot,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ot,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Bi,Li]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",_0]}],"font-family":[{font:[nh]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ot]}],"line-clamp":[{"line-clamp":["none",ru,_0]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ga,ot]}],"list-image":[{"list-image":["none",ot]}],"list-style-type":[{list:["none","disc","decimal",ot]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...V(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ga,Li]}],"underline-offset":[{"underline-offset":["auto",Ga,ot]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ot]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ot]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...W(),HU]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",WU]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},GU]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...V(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:V()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...V()]}],"outline-offset":[{"outline-offset":[Ga,ot]}],"outline-w":[{outline:[Ga,Li]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Ga,Li]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Bi,YU]}],"shadow-color":[{shadow:[nh]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":q()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Bi,ot]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[j]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[j]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ot]}],duration:[{duration:U()}],ease:[{ease:["linear","in","out","in-out",ot]}],delay:[{delay:U()}],animate:[{animate:["none","spin","ping","pulse","bounce",ot]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[th,ot]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[_]}],"skew-y":[{"skew-y":[_]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ot]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ot]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ot]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Ga,Li,_0]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},e7=IU(ZU);function De(...e){return e7(Ze(e))}function Du(e){if(!e)return"Âge inconnu";const t=new Date(e),n=new Date;if(isNaN(t.getTime()))return"Date invalide";let r=n.getFullYear()-t.getFullYear(),a=n.getMonth()-t.getMonth();if((a<0||a===0&&n.getDate()<t.getDate())&&(r--,a+=12),r===0){if(a===0){const i=Math.floor((n.getTime()-t.getTime())/864e5);return`${i} jour${i>1?"s":""}`}return`${a} mois`}else return a===0?`${r} an${r>1?"s":""}`:`${r} an${r>1?"s":""} et ${a} mois`}function Da(e){if(!e)return"Non renseigné";const t=new Date(e);return isNaN(t.getTime())?"Date invalide":t.toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})}const t7=Jq,PI=b.forwardRef(({className:e,...t},n)=>s.jsx(cI,{ref:n,className:De("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));PI.displayName=cI.displayName;const n7=gf("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),AI=b.forwardRef(({className:e,variant:t,...n},r)=>s.jsx(uI,{ref:r,className:De(n7({variant:t}),e),...n}));AI.displayName=uI.displayName;const r7=b.forwardRef(({className:e,...t},n)=>s.jsx(mI,{ref:n,className:De("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));r7.displayName=mI.displayName;const kI=b.forwardRef(({className:e,...t},n)=>s.jsx(fI,{ref:n,className:De("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(jx,{className:"h-4 w-4"})}));kI.displayName=fI.displayName;const TI=b.forwardRef(({className:e,...t},n)=>s.jsx(dI,{ref:n,className:De("text-sm font-semibold",e),...t}));TI.displayName=dI.displayName;const EI=b.forwardRef(({className:e,...t},n)=>s.jsx(hI,{ref:n,className:De("text-sm opacity-90",e),...t}));EI.displayName=hI.displayName;function s7(){const{toasts:e}=it();return s.jsxs(t7,{children:[e.map(function({id:t,title:n,description:r,action:a,...i}){return s.jsxs(AI,{...i,children:[s.jsxs("div",{className:"grid gap-1",children:[n&&s.jsx(TI,{children:n}),r&&s.jsx(EI,{children:r})]}),a,s.jsx(kI,{})]},t)}),s.jsx(PI,{})]})}var BC=["light","dark"],a7="(prefers-color-scheme: dark)",i7=b.createContext(void 0),o7={setTheme:e=>{},themes:[]},l7=()=>{var e;return(e=b.useContext(i7))!=null?e:o7};b.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:a,defaultTheme:i,value:o,attrs:l,nonce:c})=>{let u=i==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(g=>`'${g}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=a?BC.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(g,p=!1,v=!0)=>{let x=o?o[g]:g,y=p?g+"|| ''":`'${x}'`,j="";return a&&v&&!p&&BC.includes(g)&&(j+=`d.style.colorScheme = '${g}';`),n==="class"?p||x?j+=`c.add(${y})`:j+="null":x&&(j+=`d[s](n,${y})`),j},f=e?`!function(){${d}${m(e)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${a7}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}${u?"":"else{"+m(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}else{${m(i,!1,!1)};}${h}}catch(t){}}();`;return b.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:f}})});var c7=e=>{switch(e){case"success":return h7;case"info":return f7;case"warning":return m7;case"error":return p7;default:return null}},u7=Array(12).fill(0),d7=({visible:e,className:t})=>M.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},M.createElement("div",{className:"sonner-spinner"},u7.map((n,r)=>M.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),h7=M.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},M.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),m7=M.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},M.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),f7=M.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},M.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),p7=M.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},M.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),g7=M.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},M.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),M.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),v7=()=>{let[e,t]=M.useState(document.hidden);return M.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},Nb=1,x7=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Nb++,i=this.toasts.find(l=>l.id===a),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),i?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...e,id:a,title:n}),{...l,...e,id:a,dismissible:o,title:n}):l):this.addToast({title:n,...r,dismissible:o,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),a=n!==void 0,i,o=r.then(async c=>{if(i=["resolve",c],M.isValidElement(c))a=!1,this.create({id:n,type:"default",message:c});else if(j7(c)&&!c.ok){a=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,d=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:n,type:"error",message:u,description:d})}else if(t.success!==void 0){a=!1;let u=typeof t.success=="function"?await t.success(c):t.success,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"success",message:u,description:d})}}).catch(async c=>{if(i=["reject",c],t.error!==void 0){a=!1;let u=typeof t.error=="function"?await t.error(c):t.error,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"error",message:u,description:d})}}).finally(()=>{var c;a&&(this.dismiss(n),n=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,u)=>o.then(()=>i[0]==="reject"?u(i[1]):c(i[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||Nb++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Fr=new x7,y7=(e,t)=>{let n=(t==null?void 0:t.id)||Nb++;return Fr.addToast({title:e,...t,id:n}),n},j7=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",b7=y7,w7=()=>Fr.toasts,N7=()=>Fr.getActiveToasts();Object.assign(b7,{success:Fr.success,info:Fr.info,warning:Fr.warning,error:Fr.error,custom:Fr.custom,message:Fr.message,promise:Fr.promise,dismiss:Fr.dismiss,loading:Fr.loading},{getHistory:w7,getToasts:N7});function S7(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}S7(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function sp(e){return e.label!==void 0}var _7=3,C7="32px",P7="16px",zC=4e3,A7=356,k7=14,T7=20,E7=200;function Rs(...e){return e.filter(Boolean).join(" ")}function O7(e){let[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}var D7=e=>{var t,n,r,a,i,o,l,c,u,d,h;let{invert:m,toast:f,unstyled:g,interacting:p,setHeights:v,visibleToasts:x,heights:y,index:j,toasts:w,expanded:N,removeToast:_,defaultRichColors:S,closeButton:C,style:A,cancelButtonStyle:T,actionButtonStyle:E,className:k="",descriptionClassName:R="",duration:I,position:W,gap:V,loadingIcon:q,expandByDefault:P,classNames:O,icons:B,closeButtonAriaLabel:U="Close toast",pauseWhenPageIsHidden:X}=e,[ie,re]=M.useState(null),[de,pe]=M.useState(null),[ce,se]=M.useState(!1),[ae,le]=M.useState(!1),[H,Q]=M.useState(!1),[ve,ge]=M.useState(!1),[rt,Ge]=M.useState(!1),[dt,te]=M.useState(0),[Pe,oe]=M.useState(0),Ee=M.useRef(f.duration||I||zC),vt=M.useRef(null),At=M.useRef(null),xn=j===0,Ve=j+1<=x,yt=f.type,Cn=f.dismissible!==!1,rr=f.className||"",Yr=f.descriptionClassName||"",yn=M.useMemo(()=>y.findIndex(Xe=>Xe.toastId===f.id)||0,[y,f.id]),Ii=M.useMemo(()=>{var Xe;return(Xe=f.closeButton)!=null?Xe:C},[f.closeButton,C]),Ln=M.useMemo(()=>f.duration||I||zC,[f.duration,I]),Ha=M.useRef(0),Ms=M.useRef(0),pc=M.useRef(0),ma=M.useRef(null),[K,Ce]=W.split("-"),fe=M.useMemo(()=>y.reduce((Xe,Nt,zt)=>zt>=yn?Xe:Xe+Nt.height,0),[y,yn]),ln=v7(),Dr=f.invert||m,Is=yt==="loading";Ms.current=M.useMemo(()=>yn*V+fe,[yn,fe]),M.useEffect(()=>{Ee.current=Ln},[Ln]),M.useEffect(()=>{se(!0)},[]),M.useEffect(()=>{let Xe=At.current;if(Xe){let Nt=Xe.getBoundingClientRect().height;return oe(Nt),v(zt=>[{toastId:f.id,height:Nt,position:f.position},...zt]),()=>v(zt=>zt.filter(Qr=>Qr.toastId!==f.id))}},[v,f.id]),M.useLayoutEffect(()=>{if(!ce)return;let Xe=At.current,Nt=Xe.style.height;Xe.style.height="auto";let zt=Xe.getBoundingClientRect().height;Xe.style.height=Nt,oe(zt),v(Qr=>Qr.find(Xr=>Xr.toastId===f.id)?Qr.map(Xr=>Xr.toastId===f.id?{...Xr,height:zt}:Xr):[{toastId:f.id,height:zt,position:f.position},...Qr])},[ce,f.title,f.description,v,f.id]);let fs=M.useCallback(()=>{le(!0),te(Ms.current),v(Xe=>Xe.filter(Nt=>Nt.toastId!==f.id)),setTimeout(()=>{_(f)},E7)},[f,_,v,Ms]);M.useEffect(()=>{if(f.promise&&yt==="loading"||f.duration===1/0||f.type==="loading")return;let Xe;return N||p||X&&ln?(()=>{if(pc.current<Ha.current){let Nt=new Date().getTime()-Ha.current;Ee.current=Ee.current-Nt}pc.current=new Date().getTime()})():Ee.current!==1/0&&(Ha.current=new Date().getTime(),Xe=setTimeout(()=>{var Nt;(Nt=f.onAutoClose)==null||Nt.call(f,f),fs()},Ee.current)),()=>clearTimeout(Xe)},[N,p,f,yt,X,ln,fs]),M.useEffect(()=>{f.delete&&fs()},[fs,f.delete]);function Uy(){var Xe,Nt,zt;return B!=null&&B.loading?M.createElement("div",{className:Rs(O==null?void 0:O.loader,(Xe=f==null?void 0:f.classNames)==null?void 0:Xe.loader,"sonner-loader"),"data-visible":yt==="loading"},B.loading):q?M.createElement("div",{className:Rs(O==null?void 0:O.loader,(Nt=f==null?void 0:f.classNames)==null?void 0:Nt.loader,"sonner-loader"),"data-visible":yt==="loading"},q):M.createElement(d7,{className:Rs(O==null?void 0:O.loader,(zt=f==null?void 0:f.classNames)==null?void 0:zt.loader),visible:yt==="loading"})}return M.createElement("li",{tabIndex:0,ref:At,className:Rs(k,rr,O==null?void 0:O.toast,(t=f==null?void 0:f.classNames)==null?void 0:t.toast,O==null?void 0:O.default,O==null?void 0:O[yt],(n=f==null?void 0:f.classNames)==null?void 0:n[yt]),"data-sonner-toast":"","data-rich-colors":(r=f.richColors)!=null?r:S,"data-styled":!(f.jsx||f.unstyled||g),"data-mounted":ce,"data-promise":!!f.promise,"data-swiped":rt,"data-removed":ae,"data-visible":Ve,"data-y-position":K,"data-x-position":Ce,"data-index":j,"data-front":xn,"data-swiping":H,"data-dismissible":Cn,"data-type":yt,"data-invert":Dr,"data-swipe-out":ve,"data-swipe-direction":de,"data-expanded":!!(N||P&&ce),style:{"--index":j,"--toasts-before":j,"--z-index":w.length-j,"--offset":`${ae?dt:Ms.current}px`,"--initial-height":P?"auto":`${Pe}px`,...A,...f.style},onDragEnd:()=>{Q(!1),re(null),ma.current=null},onPointerDown:Xe=>{Is||!Cn||(vt.current=new Date,te(Ms.current),Xe.target.setPointerCapture(Xe.pointerId),Xe.target.tagName!=="BUTTON"&&(Q(!0),ma.current={x:Xe.clientX,y:Xe.clientY}))},onPointerUp:()=>{var Xe,Nt,zt,Qr;if(ve||!Cn)return;ma.current=null;let Xr=Number(((Xe=At.current)==null?void 0:Xe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),fa=Number(((Nt=At.current)==null?void 0:Nt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Ka=new Date().getTime()-((zt=vt.current)==null?void 0:zt.getTime()),Jr=ie==="x"?Xr:fa,pa=Math.abs(Jr)/Ka;if(Math.abs(Jr)>=T7||pa>.11){te(Ms.current),(Qr=f.onDismiss)==null||Qr.call(f,f),pe(ie==="x"?Xr>0?"right":"left":fa>0?"down":"up"),fs(),ge(!0),Ge(!1);return}Q(!1),re(null)},onPointerMove:Xe=>{var Nt,zt,Qr,Xr;if(!ma.current||!Cn||((Nt=window.getSelection())==null?void 0:Nt.toString().length)>0)return;let fa=Xe.clientY-ma.current.y,Ka=Xe.clientX-ma.current.x,Jr=(zt=e.swipeDirections)!=null?zt:O7(W);!ie&&(Math.abs(Ka)>1||Math.abs(fa)>1)&&re(Math.abs(Ka)>Math.abs(fa)?"x":"y");let pa={x:0,y:0};ie==="y"?(Jr.includes("top")||Jr.includes("bottom"))&&(Jr.includes("top")&&fa<0||Jr.includes("bottom")&&fa>0)&&(pa.y=fa):ie==="x"&&(Jr.includes("left")||Jr.includes("right"))&&(Jr.includes("left")&&Ka<0||Jr.includes("right")&&Ka>0)&&(pa.x=Ka),(Math.abs(pa.x)>0||Math.abs(pa.y)>0)&&Ge(!0),(Qr=At.current)==null||Qr.style.setProperty("--swipe-amount-x",`${pa.x}px`),(Xr=At.current)==null||Xr.style.setProperty("--swipe-amount-y",`${pa.y}px`)}},Ii&&!f.jsx?M.createElement("button",{"aria-label":U,"data-disabled":Is,"data-close-button":!0,onClick:Is||!Cn?()=>{}:()=>{var Xe;fs(),(Xe=f.onDismiss)==null||Xe.call(f,f)},className:Rs(O==null?void 0:O.closeButton,(a=f==null?void 0:f.classNames)==null?void 0:a.closeButton)},(i=B==null?void 0:B.close)!=null?i:g7):null,f.jsx||b.isValidElement(f.title)?f.jsx?f.jsx:typeof f.title=="function"?f.title():f.title:M.createElement(M.Fragment,null,yt||f.icon||f.promise?M.createElement("div",{"data-icon":"",className:Rs(O==null?void 0:O.icon,(o=f==null?void 0:f.classNames)==null?void 0:o.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||Uy():null,f.type!=="loading"?f.icon||(B==null?void 0:B[yt])||c7(yt):null):null,M.createElement("div",{"data-content":"",className:Rs(O==null?void 0:O.content,(l=f==null?void 0:f.classNames)==null?void 0:l.content)},M.createElement("div",{"data-title":"",className:Rs(O==null?void 0:O.title,(c=f==null?void 0:f.classNames)==null?void 0:c.title)},typeof f.title=="function"?f.title():f.title),f.description?M.createElement("div",{"data-description":"",className:Rs(R,Yr,O==null?void 0:O.description,(u=f==null?void 0:f.classNames)==null?void 0:u.description)},typeof f.description=="function"?f.description():f.description):null),b.isValidElement(f.cancel)?f.cancel:f.cancel&&sp(f.cancel)?M.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||T,onClick:Xe=>{var Nt,zt;sp(f.cancel)&&Cn&&((zt=(Nt=f.cancel).onClick)==null||zt.call(Nt,Xe),fs())},className:Rs(O==null?void 0:O.cancelButton,(d=f==null?void 0:f.classNames)==null?void 0:d.cancelButton)},f.cancel.label):null,b.isValidElement(f.action)?f.action:f.action&&sp(f.action)?M.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||E,onClick:Xe=>{var Nt,zt;sp(f.action)&&((zt=(Nt=f.action).onClick)==null||zt.call(Nt,Xe),!Xe.defaultPrevented&&fs())},className:Rs(O==null?void 0:O.actionButton,(h=f==null?void 0:f.classNames)==null?void 0:h.actionButton)},f.action.label):null))};function VC(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function M7(e,t){let n={};return[e,t].forEach((r,a)=>{let i=a===1,o=i?"--mobile-offset":"--offset",l=i?P7:C7;function c(u){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${o}-${u}`]=l:n[`${o}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):c(l)}),n}var I7=b.forwardRef(function(e,t){let{invert:n,position:r="bottom-right",hotkey:a=["altKey","KeyT"],expand:i,closeButton:o,className:l,offset:c,mobileOffset:u,theme:d="light",richColors:h,duration:m,style:f,visibleToasts:g=_7,toastOptions:p,dir:v=VC(),gap:x=k7,loadingIcon:y,icons:j,containerAriaLabel:w="Notifications",pauseWhenPageIsHidden:N}=e,[_,S]=M.useState([]),C=M.useMemo(()=>Array.from(new Set([r].concat(_.filter(X=>X.position).map(X=>X.position)))),[_,r]),[A,T]=M.useState([]),[E,k]=M.useState(!1),[R,I]=M.useState(!1),[W,V]=M.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),q=M.useRef(null),P=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),O=M.useRef(null),B=M.useRef(!1),U=M.useCallback(X=>{S(ie=>{var re;return(re=ie.find(de=>de.id===X.id))!=null&&re.delete||Fr.dismiss(X.id),ie.filter(({id:de})=>de!==X.id)})},[]);return M.useEffect(()=>Fr.subscribe(X=>{if(X.dismiss){S(ie=>ie.map(re=>re.id===X.id?{...re,delete:!0}:re));return}setTimeout(()=>{VM.flushSync(()=>{S(ie=>{let re=ie.findIndex(de=>de.id===X.id);return re!==-1?[...ie.slice(0,re),{...ie[re],...X},...ie.slice(re+1)]:[X,...ie]})})})}),[]),M.useEffect(()=>{if(d!=="system"){V(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?V("dark"):V("light")),typeof window>"u")return;let X=window.matchMedia("(prefers-color-scheme: dark)");try{X.addEventListener("change",({matches:ie})=>{V(ie?"dark":"light")})}catch{X.addListener(({matches:re})=>{try{V(re?"dark":"light")}catch(de){console.error(de)}})}},[d]),M.useEffect(()=>{_.length<=1&&k(!1)},[_]),M.useEffect(()=>{let X=ie=>{var re,de;a.every(pe=>ie[pe]||ie.code===pe)&&(k(!0),(re=q.current)==null||re.focus()),ie.code==="Escape"&&(document.activeElement===q.current||(de=q.current)!=null&&de.contains(document.activeElement))&&k(!1)};return document.addEventListener("keydown",X),()=>document.removeEventListener("keydown",X)},[a]),M.useEffect(()=>{if(q.current)return()=>{O.current&&(O.current.focus({preventScroll:!0}),O.current=null,B.current=!1)}},[q.current]),M.createElement("section",{ref:t,"aria-label":`${w} ${P}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},C.map((X,ie)=>{var re;let[de,pe]=X.split("-");return _.length?M.createElement("ol",{key:X,dir:v==="auto"?VC():v,tabIndex:-1,ref:q,className:l,"data-sonner-toaster":!0,"data-theme":W,"data-y-position":de,"data-lifted":E&&_.length>1&&!i,"data-x-position":pe,style:{"--front-toast-height":`${((re=A[0])==null?void 0:re.height)||0}px`,"--width":`${A7}px`,"--gap":`${x}px`,...f,...M7(c,u)},onBlur:ce=>{B.current&&!ce.currentTarget.contains(ce.relatedTarget)&&(B.current=!1,O.current&&(O.current.focus({preventScroll:!0}),O.current=null))},onFocus:ce=>{ce.target instanceof HTMLElement&&ce.target.dataset.dismissible==="false"||B.current||(B.current=!0,O.current=ce.relatedTarget)},onMouseEnter:()=>k(!0),onMouseMove:()=>k(!0),onMouseLeave:()=>{R||k(!1)},onDragEnd:()=>k(!1),onPointerDown:ce=>{ce.target instanceof HTMLElement&&ce.target.dataset.dismissible==="false"||I(!0)},onPointerUp:()=>I(!1)},_.filter(ce=>!ce.position&&ie===0||ce.position===X).map((ce,se)=>{var ae,le;return M.createElement(D7,{key:ce.id,icons:j,index:se,toast:ce,defaultRichColors:h,duration:(ae=p==null?void 0:p.duration)!=null?ae:m,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:n,visibleToasts:g,closeButton:(le=p==null?void 0:p.closeButton)!=null?le:o,interacting:R,position:X,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,removeToast:U,toasts:_.filter(H=>H.position==ce.position),heights:A.filter(H=>H.position==ce.position),setHeights:T,expandByDefault:i,gap:x,loadingIcon:y,expanded:E,pauseWhenPageIsHidden:N,swipeDirections:e.swipeDirections})})):null}))});const $7=({...e})=>{const{theme:t="system"}=l7();return s.jsx(I7,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var R7=ZN[" useId ".trim().toString()]||(()=>{}),F7=0;function Ma(e){const[t,n]=b.useState(R7());return _n(()=>{n(r=>r??String(F7++))},[e]),t?`radix-${t}`:""}const L7=["top","right","bottom","left"],To=Math.min,rs=Math.max,Eg=Math.round,ap=Math.floor,Ia=e=>({x:e,y:e}),B7={left:"right",right:"left",bottom:"top",top:"bottom"},z7={start:"end",end:"start"};function Sb(e,t,n){return rs(e,To(t,n))}function Ni(e,t){return typeof e=="function"?e(t):e}function Si(e){return e.split("-")[0]}function yd(e){return e.split("-")[1]}function Q1(e){return e==="x"?"y":"x"}function X1(e){return e==="y"?"height":"width"}const V7=new Set(["top","bottom"]);function Ca(e){return V7.has(Si(e))?"y":"x"}function J1(e){return Q1(Ca(e))}function q7(e,t,n){n===void 0&&(n=!1);const r=yd(e),a=J1(e),i=X1(a);let o=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=Og(o)),[o,Og(o)]}function U7(e){const t=Og(e);return[_b(e),t,_b(t)]}function _b(e){return e.replace(/start|end/g,t=>z7[t])}const qC=["left","right"],UC=["right","left"],W7=["top","bottom"],H7=["bottom","top"];function K7(e,t,n){switch(e){case"top":case"bottom":return n?t?UC:qC:t?qC:UC;case"left":case"right":return t?W7:H7;default:return[]}}function G7(e,t,n,r){const a=yd(e);let i=K7(Si(e),n==="start",r);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(_b)))),i}function Og(e){return e.replace(/left|right|bottom|top/g,t=>B7[t])}function Y7(e){return{top:0,right:0,bottom:0,left:0,...e}}function OI(e){return typeof e!="number"?Y7(e):{top:e,right:e,bottom:e,left:e}}function Dg(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function WC(e,t,n){let{reference:r,floating:a}=e;const i=Ca(t),o=J1(t),l=X1(o),c=Si(t),u=i==="y",d=r.x+r.width/2-a.width/2,h=r.y+r.height/2-a.height/2,m=r[l]/2-a[l]/2;let f;switch(c){case"top":f={x:d,y:r.y-a.height};break;case"bottom":f={x:d,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:h};break;case"left":f={x:r.x-a.width,y:h};break;default:f={x:r.x,y:r.y}}switch(yd(t)){case"start":f[o]-=m*(n&&u?-1:1);break;case"end":f[o]+=m*(n&&u?-1:1);break}return f}const Q7=async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:i=[],platform:o}=n,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:h}=WC(u,r,c),m=r,f={},g=0;for(let p=0;p<l.length;p++){const{name:v,fn:x}=l[p],{x:y,y:j,data:w,reset:N}=await x({x:d,y:h,initialPlacement:r,placement:m,strategy:a,middlewareData:f,rects:u,platform:o,elements:{reference:e,floating:t}});d=y??d,h=j??h,f={...f,[v]:{...f[v],...w}},N&&g<=50&&(g++,typeof N=="object"&&(N.placement&&(m=N.placement),N.rects&&(u=N.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):N.rects),{x:d,y:h}=WC(u,m,c)),p=-1)}return{x:d,y:h,placement:m,strategy:a,middlewareData:f}};async function mm(e,t){var n;t===void 0&&(t={});const{x:r,y:a,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:m=!1,padding:f=0}=Ni(t,e),g=OI(f),v=l[m?h==="floating"?"reference":"floating":h],x=Dg(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(v)))==null||n?v:v.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),y=h==="floating"?{x:r,y:a,width:o.floating.width,height:o.floating.height}:o.reference,j=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),w=await(i.isElement==null?void 0:i.isElement(j))?await(i.getScale==null?void 0:i.getScale(j))||{x:1,y:1}:{x:1,y:1},N=Dg(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:j,strategy:c}):y);return{top:(x.top-N.top+g.top)/w.y,bottom:(N.bottom-x.bottom+g.bottom)/w.y,left:(x.left-N.left+g.left)/w.x,right:(N.right-x.right+g.right)/w.x}}const X7=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=Ni(e,t)||{};if(u==null)return{};const h=OI(d),m={x:n,y:r},f=J1(a),g=X1(f),p=await o.getDimensions(u),v=f==="y",x=v?"top":"left",y=v?"bottom":"right",j=v?"clientHeight":"clientWidth",w=i.reference[g]+i.reference[f]-m[f]-i.floating[g],N=m[f]-i.reference[f],_=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let S=_?_[j]:0;(!S||!await(o.isElement==null?void 0:o.isElement(_)))&&(S=l.floating[j]||i.floating[g]);const C=w/2-N/2,A=S/2-p[g]/2-1,T=To(h[x],A),E=To(h[y],A),k=T,R=S-p[g]-E,I=S/2-p[g]/2+C,W=Sb(k,I,R),V=!c.arrow&&yd(a)!=null&&I!==W&&i.reference[g]/2-(I<k?T:E)-p[g]/2<0,q=V?I<k?I-k:I-R:0;return{[f]:m[f]+q,data:{[f]:W,centerOffset:I-W-q,...V&&{alignmentOffset:q}},reset:V}}}),J7=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:p=!0,...v}=Ni(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const x=Si(a),y=Ca(l),j=Si(l)===l,w=await(c.isRTL==null?void 0:c.isRTL(u.floating)),N=m||(j||!p?[Og(l)]:U7(l)),_=g!=="none";!m&&_&&N.push(...G7(l,p,g,w));const S=[l,...N],C=await mm(t,v),A=[];let T=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&A.push(C[x]),h){const I=q7(a,o,w);A.push(C[I[0]],C[I[1]])}if(T=[...T,{placement:a,overflows:A}],!A.every(I=>I<=0)){var E,k;const I=(((E=i.flip)==null?void 0:E.index)||0)+1,W=S[I];if(W&&(!(h==="alignment"?y!==Ca(W):!1)||T.every(P=>P.overflows[0]>0&&Ca(P.placement)===y)))return{data:{index:I,overflows:T},reset:{placement:W}};let V=(k=T.filter(q=>q.overflows[0]<=0).sort((q,P)=>q.overflows[1]-P.overflows[1])[0])==null?void 0:k.placement;if(!V)switch(f){case"bestFit":{var R;const q=(R=T.filter(P=>{if(_){const O=Ca(P.placement);return O===y||O==="y"}return!0}).map(P=>[P.placement,P.overflows.filter(O=>O>0).reduce((O,B)=>O+B,0)]).sort((P,O)=>P[1]-O[1])[0])==null?void 0:R[0];q&&(V=q);break}case"initialPlacement":V=l;break}if(a!==V)return{reset:{placement:V}}}return{}}}};function HC(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function KC(e){return L7.some(t=>e[t]>=0)}const Z7=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...a}=Ni(e,t);switch(r){case"referenceHidden":{const i=await mm(t,{...a,elementContext:"reference"}),o=HC(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:KC(o)}}}case"escaped":{const i=await mm(t,{...a,altBoundary:!0}),o=HC(i,n.floating);return{data:{escapedOffsets:o,escaped:KC(o)}}}default:return{}}}}},DI=new Set(["left","top"]);async function e9(e,t){const{placement:n,platform:r,elements:a}=e,i=await(r.isRTL==null?void 0:r.isRTL(a.floating)),o=Si(n),l=yd(n),c=Ca(n)==="y",u=DI.has(o)?-1:1,d=i&&c?-1:1,h=Ni(t,e);let{mainAxis:m,crossAxis:f,alignmentAxis:g}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof g=="number"&&(f=l==="end"?g*-1:g),c?{x:f*d,y:m*u}:{x:m*u,y:f*d}}const t9=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:i,placement:o,middlewareData:l}=t,c=await e9(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},n9=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:v=>{let{x,y}=v;return{x,y}}},...c}=Ni(e,t),u={x:n,y:r},d=await mm(t,c),h=Ca(Si(a)),m=Q1(h);let f=u[m],g=u[h];if(i){const v=m==="y"?"top":"left",x=m==="y"?"bottom":"right",y=f+d[v],j=f-d[x];f=Sb(y,f,j)}if(o){const v=h==="y"?"top":"left",x=h==="y"?"bottom":"right",y=g+d[v],j=g-d[x];g=Sb(y,g,j)}const p=l.fn({...t,[m]:f,[h]:g});return{...p,data:{x:p.x-n,y:p.y-r,enabled:{[m]:i,[h]:o}}}}}},r9=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:a,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Ni(e,t),d={x:n,y:r},h=Ca(a),m=Q1(h);let f=d[m],g=d[h];const p=Ni(l,t),v=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const j=m==="y"?"height":"width",w=i.reference[m]-i.floating[j]+v.mainAxis,N=i.reference[m]+i.reference[j]-v.mainAxis;f<w?f=w:f>N&&(f=N)}if(u){var x,y;const j=m==="y"?"width":"height",w=DI.has(Si(a)),N=i.reference[h]-i.floating[j]+(w&&((x=o.offset)==null?void 0:x[h])||0)+(w?0:v.crossAxis),_=i.reference[h]+i.reference[j]+(w?0:((y=o.offset)==null?void 0:y[h])||0)-(w?v.crossAxis:0);g<N?g=N:g>_&&(g=_)}return{[m]:f,[h]:g}}}},s9=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...u}=Ni(e,t),d=await mm(t,u),h=Si(a),m=yd(a),f=Ca(a)==="y",{width:g,height:p}=i.floating;let v,x;h==="top"||h==="bottom"?(v=h,x=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(x=h,v=m==="end"?"top":"bottom");const y=p-d.top-d.bottom,j=g-d.left-d.right,w=To(p-d[v],y),N=To(g-d[x],j),_=!t.middlewareData.shift;let S=w,C=N;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(C=j),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(S=y),_&&!m){const T=rs(d.left,0),E=rs(d.right,0),k=rs(d.top,0),R=rs(d.bottom,0);f?C=g-2*(T!==0||E!==0?T+E:rs(d.left,d.right)):S=p-2*(k!==0||R!==0?k+R:rs(d.top,d.bottom))}await c({...t,availableWidth:C,availableHeight:S});const A=await o.getDimensions(l.floating);return g!==A.width||p!==A.height?{reset:{rects:!0}}:{}}}};function bx(){return typeof window<"u"}function jd(e){return MI(e)?(e.nodeName||"").toLowerCase():"#document"}function ls(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Va(e){var t;return(t=(MI(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function MI(e){return bx()?e instanceof Node||e instanceof ls(e).Node:!1}function sa(e){return bx()?e instanceof Element||e instanceof ls(e).Element:!1}function Ba(e){return bx()?e instanceof HTMLElement||e instanceof ls(e).HTMLElement:!1}function GC(e){return!bx()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ls(e).ShadowRoot}const a9=new Set(["inline","contents"]);function yf(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=aa(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!a9.has(a)}const i9=new Set(["table","td","th"]);function o9(e){return i9.has(jd(e))}const l9=[":popover-open",":modal"];function wx(e){return l9.some(t=>{try{return e.matches(t)}catch{return!1}})}const c9=["transform","translate","scale","rotate","perspective"],u9=["transform","translate","scale","rotate","perspective","filter"],d9=["paint","layout","strict","content"];function Z1(e){const t=eS(),n=sa(e)?aa(e):e;return c9.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||u9.some(r=>(n.willChange||"").includes(r))||d9.some(r=>(n.contain||"").includes(r))}function h9(e){let t=Eo(e);for(;Ba(t)&&!Mu(t);){if(Z1(t))return t;if(wx(t))return null;t=Eo(t)}return null}function eS(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const m9=new Set(["html","body","#document"]);function Mu(e){return m9.has(jd(e))}function aa(e){return ls(e).getComputedStyle(e)}function Nx(e){return sa(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Eo(e){if(jd(e)==="html")return e;const t=e.assignedSlot||e.parentNode||GC(e)&&e.host||Va(e);return GC(t)?t.host:t}function II(e){const t=Eo(e);return Mu(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ba(t)&&yf(t)?t:II(t)}function fm(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=II(e),i=a===((r=e.ownerDocument)==null?void 0:r.body),o=ls(a);if(i){const l=Cb(o);return t.concat(o,o.visualViewport||[],yf(a)?a:[],l&&n?fm(l):[])}return t.concat(a,fm(a,[],n))}function Cb(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function $I(e){const t=aa(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=Ba(e),i=a?e.offsetWidth:n,o=a?e.offsetHeight:r,l=Eg(n)!==i||Eg(r)!==o;return l&&(n=i,r=o),{width:n,height:r,$:l}}function tS(e){return sa(e)?e:e.contextElement}function su(e){const t=tS(e);if(!Ba(t))return Ia(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:i}=$I(t);let o=(i?Eg(n.width):n.width)/r,l=(i?Eg(n.height):n.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const f9=Ia(0);function RI(e){const t=ls(e);return!eS()||!t.visualViewport?f9:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function p9(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==ls(e)?!1:t}function Bl(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),i=tS(e);let o=Ia(1);t&&(r?sa(r)&&(o=su(r)):o=su(e));const l=p9(i,n,r)?RI(i):Ia(0);let c=(a.left+l.x)/o.x,u=(a.top+l.y)/o.y,d=a.width/o.x,h=a.height/o.y;if(i){const m=ls(i),f=r&&sa(r)?ls(r):r;let g=m,p=Cb(g);for(;p&&r&&f!==g;){const v=su(p),x=p.getBoundingClientRect(),y=aa(p),j=x.left+(p.clientLeft+parseFloat(y.paddingLeft))*v.x,w=x.top+(p.clientTop+parseFloat(y.paddingTop))*v.y;c*=v.x,u*=v.y,d*=v.x,h*=v.y,c+=j,u+=w,g=ls(p),p=Cb(g)}}return Dg({width:d,height:h,x:c,y:u})}function nS(e,t){const n=Nx(e).scrollLeft;return t?t.left+n:Bl(Va(e)).left+n}function FI(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),a=r.left+t.scrollLeft-(n?0:nS(e,r)),i=r.top+t.scrollTop;return{x:a,y:i}}function g9(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const i=a==="fixed",o=Va(r),l=t?wx(t.floating):!1;if(r===o||l&&i)return n;let c={scrollLeft:0,scrollTop:0},u=Ia(1);const d=Ia(0),h=Ba(r);if((h||!h&&!i)&&((jd(r)!=="body"||yf(o))&&(c=Nx(r)),Ba(r))){const f=Bl(r);u=su(r),d.x=f.x+r.clientLeft,d.y=f.y+r.clientTop}const m=o&&!h&&!i?FI(o,c,!0):Ia(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+m.x,y:n.y*u.y-c.scrollTop*u.y+d.y+m.y}}function v9(e){return Array.from(e.getClientRects())}function x9(e){const t=Va(e),n=Nx(e),r=e.ownerDocument.body,a=rs(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=rs(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+nS(e);const l=-n.scrollTop;return aa(r).direction==="rtl"&&(o+=rs(t.clientWidth,r.clientWidth)-a),{width:a,height:i,x:o,y:l}}function y9(e,t){const n=ls(e),r=Va(e),a=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const u=eS();(!u||u&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:l,y:c}}const j9=new Set(["absolute","fixed"]);function b9(e,t){const n=Bl(e,!0,t==="fixed"),r=n.top+e.clientTop,a=n.left+e.clientLeft,i=Ba(e)?su(e):Ia(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,u=r*i.y;return{width:o,height:l,x:c,y:u}}function YC(e,t,n){let r;if(t==="viewport")r=y9(e,n);else if(t==="document")r=x9(Va(e));else if(sa(t))r=b9(t,n);else{const a=RI(e);r={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Dg(r)}function LI(e,t){const n=Eo(e);return n===t||!sa(n)||Mu(n)?!1:aa(n).position==="fixed"||LI(n,t)}function w9(e,t){const n=t.get(e);if(n)return n;let r=fm(e,[],!1).filter(l=>sa(l)&&jd(l)!=="body"),a=null;const i=aa(e).position==="fixed";let o=i?Eo(e):e;for(;sa(o)&&!Mu(o);){const l=aa(o),c=Z1(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&j9.has(a.position)||yf(o)&&!c&&LI(e,o))?r=r.filter(d=>d!==o):a=l,o=Eo(o)}return t.set(e,r),r}function N9(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const o=[...n==="clippingAncestors"?wx(t)?[]:w9(t,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,d)=>{const h=YC(t,d,a);return u.top=rs(h.top,u.top),u.right=To(h.right,u.right),u.bottom=To(h.bottom,u.bottom),u.left=rs(h.left,u.left),u},YC(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function S9(e){const{width:t,height:n}=$I(e);return{width:t,height:n}}function _9(e,t,n){const r=Ba(t),a=Va(t),i=n==="fixed",o=Bl(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=Ia(0);function u(){c.x=nS(a)}if(r||!r&&!i)if((jd(t)!=="body"||yf(a))&&(l=Nx(t)),r){const f=Bl(t,!0,i,t);c.x=f.x+t.clientLeft,c.y=f.y+t.clientTop}else a&&u();i&&!r&&a&&u();const d=a&&!r&&!i?FI(a,l):Ia(0),h=o.left+l.scrollLeft-c.x-d.x,m=o.top+l.scrollTop-c.y-d.y;return{x:h,y:m,width:o.width,height:o.height}}function C0(e){return aa(e).position==="static"}function QC(e,t){if(!Ba(e)||aa(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Va(e)===n&&(n=n.ownerDocument.body),n}function BI(e,t){const n=ls(e);if(wx(e))return n;if(!Ba(e)){let a=Eo(e);for(;a&&!Mu(a);){if(sa(a)&&!C0(a))return a;a=Eo(a)}return n}let r=QC(e,t);for(;r&&o9(r)&&C0(r);)r=QC(r,t);return r&&Mu(r)&&C0(r)&&!Z1(r)?n:r||h9(e)||n}const C9=async function(e){const t=this.getOffsetParent||BI,n=this.getDimensions,r=await n(e.floating);return{reference:_9(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function P9(e){return aa(e).direction==="rtl"}const A9={convertOffsetParentRelativeRectToViewportRelativeRect:g9,getDocumentElement:Va,getClippingRect:N9,getOffsetParent:BI,getElementRects:C9,getClientRects:v9,getDimensions:S9,getScale:su,isElement:sa,isRTL:P9};function zI(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function k9(e,t){let n=null,r;const a=Va(e);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=e.getBoundingClientRect(),{left:d,top:h,width:m,height:f}=u;if(l||t(),!m||!f)return;const g=ap(h),p=ap(a.clientWidth-(d+m)),v=ap(a.clientHeight-(h+f)),x=ap(d),j={rootMargin:-g+"px "+-p+"px "+-v+"px "+-x+"px",threshold:rs(0,To(1,c))||1};let w=!0;function N(_){const S=_[0].intersectionRatio;if(S!==c){if(!w)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}S===1&&!zI(u,e.getBoundingClientRect())&&o(),w=!1}try{n=new IntersectionObserver(N,{...j,root:a.ownerDocument})}catch{n=new IntersectionObserver(N,j)}n.observe(e)}return o(!0),i}function T9(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=tS(e),d=a||i?[...u?fm(u):[],...fm(t)]:[];d.forEach(x=>{a&&x.addEventListener("scroll",n,{passive:!0}),i&&x.addEventListener("resize",n)});const h=u&&l?k9(u,n):null;let m=-1,f=null;o&&(f=new ResizeObserver(x=>{let[y]=x;y&&y.target===u&&f&&(f.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var j;(j=f)==null||j.observe(t)})),n()}),u&&!c&&f.observe(u),f.observe(t));let g,p=c?Bl(e):null;c&&v();function v(){const x=Bl(e);p&&!zI(p,x)&&n(),p=x,g=requestAnimationFrame(v)}return n(),()=>{var x;d.forEach(y=>{a&&y.removeEventListener("scroll",n),i&&y.removeEventListener("resize",n)}),h==null||h(),(x=f)==null||x.disconnect(),f=null,c&&cancelAnimationFrame(g)}}const E9=t9,O9=n9,D9=J7,M9=s9,I9=Z7,XC=X7,$9=r9,R9=(e,t,n)=>{const r=new Map,a={platform:A9,...n},i={...a.platform,_c:r};return Q7(e,t,{...a,platform:i})};var F9=typeof document<"u",L9=function(){},Zp=F9?b.useLayoutEffect:L9;function Mg(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Mg(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;r--!==0;){const i=a[r];if(!(i==="_owner"&&e.$$typeof)&&!Mg(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function VI(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function JC(e,t){const n=VI(e);return Math.round(t*n)/n}function P0(e){const t=b.useRef(e);return Zp(()=>{t.current=e}),t}function B9(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,h]=b.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,f]=b.useState(r);Mg(m,r)||f(r);const[g,p]=b.useState(null),[v,x]=b.useState(null),y=b.useCallback(P=>{P!==_.current&&(_.current=P,p(P))},[]),j=b.useCallback(P=>{P!==S.current&&(S.current=P,x(P))},[]),w=i||g,N=o||v,_=b.useRef(null),S=b.useRef(null),C=b.useRef(d),A=c!=null,T=P0(c),E=P0(a),k=P0(u),R=b.useCallback(()=>{if(!_.current||!S.current)return;const P={placement:t,strategy:n,middleware:m};E.current&&(P.platform=E.current),R9(_.current,S.current,P).then(O=>{const B={...O,isPositioned:k.current!==!1};I.current&&!Mg(C.current,B)&&(C.current=B,nc.flushSync(()=>{h(B)}))})},[m,t,n,E,k]);Zp(()=>{u===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,h(P=>({...P,isPositioned:!1})))},[u]);const I=b.useRef(!1);Zp(()=>(I.current=!0,()=>{I.current=!1}),[]),Zp(()=>{if(w&&(_.current=w),N&&(S.current=N),w&&N){if(T.current)return T.current(w,N,R);R()}},[w,N,R,T,A]);const W=b.useMemo(()=>({reference:_,floating:S,setReference:y,setFloating:j}),[y,j]),V=b.useMemo(()=>({reference:w,floating:N}),[w,N]),q=b.useMemo(()=>{const P={position:n,left:0,top:0};if(!V.floating)return P;const O=JC(V.floating,d.x),B=JC(V.floating,d.y);return l?{...P,transform:"translate("+O+"px, "+B+"px)",...VI(V.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:O,top:B}},[n,l,V.floating,d.x,d.y]);return b.useMemo(()=>({...d,update:R,refs:W,elements:V,floatingStyles:q}),[d,R,W,V,q])}const z9=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:a}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?XC({element:r.current,padding:a}).fn(n):{}:r?XC({element:r,padding:a}).fn(n):{}}}},V9=(e,t)=>({...E9(e),options:[e,t]}),q9=(e,t)=>({...O9(e),options:[e,t]}),U9=(e,t)=>({...$9(e),options:[e,t]}),W9=(e,t)=>({...D9(e),options:[e,t]}),H9=(e,t)=>({...M9(e),options:[e,t]}),K9=(e,t)=>({...I9(e),options:[e,t]}),G9=(e,t)=>({...z9(e),options:[e,t]});var Y9="Arrow",qI=b.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5,...i}=e;return s.jsx(ze.svg,{...i,ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});qI.displayName=Y9;var Q9=qI;function rS(e){const[t,n]=b.useState(void 0);return _n(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;n({width:o,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var sS="Popper",[UI,bd]=Kr(sS),[X9,WI]=UI(sS),HI=e=>{const{__scopePopper:t,children:n}=e,[r,a]=b.useState(null);return s.jsx(X9,{scope:t,anchor:r,onAnchorChange:a,children:n})};HI.displayName=sS;var KI="PopperAnchor",GI=b.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...a}=e,i=WI(KI,n),o=b.useRef(null),l=pt(t,o);return b.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:s.jsx(ze.div,{...a,ref:l})});GI.displayName=KI;var aS="PopperContent",[J9,Z9]=UI(aS),YI=b.forwardRef((e,t)=>{var ce,se,ae,le,H,Q;const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:f="optimized",onPlaced:g,...p}=e,v=WI(aS,n),[x,y]=b.useState(null),j=pt(t,ve=>y(ve)),[w,N]=b.useState(null),_=rS(w),S=(_==null?void 0:_.width)??0,C=(_==null?void 0:_.height)??0,A=r+(i!=="center"?"-"+i:""),T=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},E=Array.isArray(u)?u:[u],k=E.length>0,R={padding:T,boundary:E.filter(tW),altBoundary:k},{refs:I,floatingStyles:W,placement:V,isPositioned:q,middlewareData:P}=B9({strategy:"fixed",placement:A,whileElementsMounted:(...ve)=>T9(...ve,{animationFrame:f==="always"}),elements:{reference:v.anchor},middleware:[V9({mainAxis:a+C,alignmentAxis:o}),c&&q9({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?U9():void 0,...R}),c&&W9({...R}),H9({...R,apply:({elements:ve,rects:ge,availableWidth:rt,availableHeight:Ge})=>{const{width:dt,height:te}=ge.reference,Pe=ve.floating.style;Pe.setProperty("--radix-popper-available-width",`${rt}px`),Pe.setProperty("--radix-popper-available-height",`${Ge}px`),Pe.setProperty("--radix-popper-anchor-width",`${dt}px`),Pe.setProperty("--radix-popper-anchor-height",`${te}px`)}}),w&&G9({element:w,padding:l}),nW({arrowWidth:S,arrowHeight:C}),m&&K9({strategy:"referenceHidden",...R})]}),[O,B]=JI(V),U=Ar(g);_n(()=>{q&&(U==null||U())},[q,U]);const X=(ce=P.arrow)==null?void 0:ce.x,ie=(se=P.arrow)==null?void 0:se.y,re=((ae=P.arrow)==null?void 0:ae.centerOffset)!==0,[de,pe]=b.useState();return _n(()=>{x&&pe(window.getComputedStyle(x).zIndex)},[x]),s.jsx("div",{ref:I.setFloating,"data-radix-popper-content-wrapper":"",style:{...W,transform:q?W.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:de,"--radix-popper-transform-origin":[(le=P.transformOrigin)==null?void 0:le.x,(H=P.transformOrigin)==null?void 0:H.y].join(" "),...((Q=P.hide)==null?void 0:Q.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(J9,{scope:n,placedSide:O,onArrowChange:N,arrowX:X,arrowY:ie,shouldHideArrow:re,children:s.jsx(ze.div,{"data-side":O,"data-align":B,...p,ref:j,style:{...p.style,animation:q?void 0:"none"}})})})});YI.displayName=aS;var QI="PopperArrow",eW={top:"bottom",right:"left",bottom:"top",left:"right"},XI=b.forwardRef(function(t,n){const{__scopePopper:r,...a}=t,i=Z9(QI,r),o=eW[i.placedSide];return s.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:s.jsx(Q9,{...a,ref:n,style:{...a.style,display:"block"}})})});XI.displayName=QI;function tW(e){return e!==null}var nW=e=>({name:"transformOrigin",options:e,fn(t){var v,x,y;const{placement:n,rects:r,middlewareData:a}=t,o=((v=a.arrow)==null?void 0:v.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[u,d]=JI(n),h={start:"0%",center:"50%",end:"100%"}[d],m=(((x=a.arrow)==null?void 0:x.x)??0)+l/2,f=(((y=a.arrow)==null?void 0:y.y)??0)+c/2;let g="",p="";return u==="bottom"?(g=o?h:`${m}px`,p=`${-c}px`):u==="top"?(g=o?h:`${m}px`,p=`${r.floating.height+c}px`):u==="right"?(g=`${-c}px`,p=o?h:`${f}px`):u==="left"&&(g=`${r.floating.width+c}px`,p=o?h:`${f}px`),{data:{x:g,y:p}}}});function JI(e){const[t,n="center"]=e.split("-");return[t,n]}var ZI=HI,iS=GI,oS=YI,lS=XI,[Sx,Wke]=Kr("Tooltip",[bd]),cS=bd(),e$="TooltipProvider",rW=700,ZC="tooltip.open",[sW,t$]=Sx(e$),n$=e=>{const{__scopeTooltip:t,delayDuration:n=rW,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:i}=e,o=b.useRef(!0),l=b.useRef(!1),c=b.useRef(0);return b.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),s.jsx(sW,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:b.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:b.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:b.useCallback(u=>{l.current=u},[]),disableHoverableContent:a,children:i})};n$.displayName=e$;var r$="Tooltip",[Hke,_x]=Sx(r$),Pb="TooltipTrigger",aW=b.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=_x(Pb,n),i=t$(Pb,n),o=cS(n),l=b.useRef(null),c=pt(t,l,a.onTriggerChange),u=b.useRef(!1),d=b.useRef(!1),h=b.useCallback(()=>u.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),s.jsx(iS,{asChild:!0,...o,children:s.jsx(ze.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:c,onPointerMove:ke(e.onPointerMove,m=>{m.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),d.current=!0)}),onPointerLeave:ke(e.onPointerLeave,()=>{a.onTriggerLeave(),d.current=!1}),onPointerDown:ke(e.onPointerDown,()=>{a.open&&a.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:ke(e.onFocus,()=>{u.current||a.onOpen()}),onBlur:ke(e.onBlur,a.onClose),onClick:ke(e.onClick,a.onClose)})})});aW.displayName=Pb;var iW="TooltipPortal",[Kke,oW]=Sx(iW,{forceMount:void 0}),Iu="TooltipContent",s$=b.forwardRef((e,t)=>{const n=oW(Iu,e.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...i}=e,o=_x(Iu,e.__scopeTooltip);return s.jsx(Es,{present:r||o.open,children:o.disableHoverableContent?s.jsx(a$,{side:a,...i,ref:t}):s.jsx(lW,{side:a,...i,ref:t})})}),lW=b.forwardRef((e,t)=>{const n=_x(Iu,e.__scopeTooltip),r=t$(Iu,e.__scopeTooltip),a=b.useRef(null),i=pt(t,a),[o,l]=b.useState(null),{trigger:c,onClose:u}=n,d=a.current,{onPointerInTransitChange:h}=r,m=b.useCallback(()=>{l(null),h(!1)},[h]),f=b.useCallback((g,p)=>{const v=g.currentTarget,x={x:g.clientX,y:g.clientY},y=mW(x,v.getBoundingClientRect()),j=fW(x,y),w=pW(p.getBoundingClientRect()),N=vW([...j,...w]);l(N),h(!0)},[h]);return b.useEffect(()=>()=>m(),[m]),b.useEffect(()=>{if(c&&d){const g=v=>f(v,d),p=v=>f(v,c);return c.addEventListener("pointerleave",g),d.addEventListener("pointerleave",p),()=>{c.removeEventListener("pointerleave",g),d.removeEventListener("pointerleave",p)}}},[c,d,f,m]),b.useEffect(()=>{if(o){const g=p=>{const v=p.target,x={x:p.clientX,y:p.clientY},y=(c==null?void 0:c.contains(v))||(d==null?void 0:d.contains(v)),j=!gW(x,o);y?m():j&&(m(),u())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,d,o,u,m]),s.jsx(a$,{...e,ref:i})}),[cW,uW]=Sx(r$,{isInside:!1}),dW=WM("TooltipContent"),a$=b.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,c=_x(Iu,n),u=cS(n),{onClose:d}=c;return b.useEffect(()=>(document.addEventListener(ZC,d),()=>document.removeEventListener(ZC,d)),[d]),b.useEffect(()=>{if(c.trigger){const h=m=>{const f=m.target;f!=null&&f.contains(c.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,d]),s.jsx(gd,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:s.jsxs(oS,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(dW,{children:r}),s.jsx(cW,{scope:n,isInside:!0,children:s.jsx(Mq,{id:c.contentId,role:"tooltip",children:a||r})})]})})});s$.displayName=Iu;var i$="TooltipArrow",hW=b.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=cS(n);return uW(i$,n).isInside?null:s.jsx(lS,{...a,...r,ref:t})});hW.displayName=i$;function mW(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,a,i)){case i:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function fW(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function pW(e){const{top:t,right:n,bottom:r,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:r},{x:a,y:r}]}function gW(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],u=l.x,d=l.y,h=c.x,m=c.y;d>r!=m>r&&n<(h-u)*(r-d)/(m-d)+u&&(a=!a)}return a}function vW(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),xW(t)}function xW(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const a=e[r];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const a=e[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var yW=n$,o$=s$;const jW=yW,bW=b.forwardRef(({className:e,sideOffset:t=4,...n},r)=>s.jsx(o$,{ref:r,sideOffset:t,className:De("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));bW.displayName=o$.displayName;var wd=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},wW={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},eo,GN,yO,NW=(yO=class{constructor(){Be(this,eo,wW);Be(this,GN,!1)}setTimeoutProvider(e){Oe(this,eo,e)}setTimeout(e,t){return Y(this,eo).setTimeout(e,t)}clearTimeout(e){Y(this,eo).clearTimeout(e)}setInterval(e,t){return Y(this,eo).setInterval(e,t)}clearInterval(e){Y(this,eo).clearInterval(e)}},eo=new WeakMap,GN=new WeakMap,yO),ml=new NW;function SW(e){setTimeout(e,0)}var zl=typeof window>"u"||"Deno"in globalThis;function br(){}function _W(e,t){return typeof e=="function"?e(t):e}function Ab(e){return typeof e=="number"&&e>=0&&e!==1/0}function l$(e,t){return Math.max(e+(t||0)-Date.now(),0)}function No(e,t){return typeof e=="function"?e(t):e}function ys(e,t){return typeof e=="function"?e(t):e}function eP(e,t){const{type:n="all",exact:r,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==uS(o,t.options))return!1}else if(!pm(t.queryKey,o))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function tP(e,t){const{exact:n,status:r,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(Vl(t.options.mutationKey)!==Vl(i))return!1}else if(!pm(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||a&&!a(t))}function uS(e,t){return((t==null?void 0:t.queryKeyHashFn)||Vl)(e)}function Vl(e){return JSON.stringify(e,(t,n)=>kb(n)?Object.keys(n).sort().reduce((r,a)=>(r[a]=n[a],r),{}):n)}function pm(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>pm(e[n],t[n])):!1}var CW=Object.prototype.hasOwnProperty;function c$(e,t){if(e===t)return e;const n=nP(e)&&nP(t);if(!n&&!(kb(e)&&kb(t)))return t;const a=(n?e:Object.keys(e)).length,i=n?t:Object.keys(t),o=i.length,l=n?new Array(o):{};let c=0;for(let u=0;u<o;u++){const d=n?u:i[u],h=e[d],m=t[d];if(h===m){l[d]=h,(n?u<a:CW.call(e,d))&&c++;continue}if(h===null||m===null||typeof h!="object"||typeof m!="object"){l[d]=m;continue}const f=c$(h,m);l[d]=f,f===h&&c++}return a===o&&c===a?e:l}function Ig(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function nP(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function kb(e){if(!rP(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!rP(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function rP(e){return Object.prototype.toString.call(e)==="[object Object]"}function PW(e){return new Promise(t=>{ml.setTimeout(t,e)})}function Tb(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?c$(e,t):t}function AW(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function kW(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var dS=Symbol();function u$(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===dS?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function d$(e,t){return typeof e=="function"?e(...t):!!e}var yl,to,hu,jO,TW=(jO=class extends wd{constructor(){super();Be(this,yl);Be(this,to);Be(this,hu);Oe(this,hu,t=>{if(!zl&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Y(this,to)||this.setEventListener(Y(this,hu))}onUnsubscribe(){var t;this.hasListeners()||((t=Y(this,to))==null||t.call(this),Oe(this,to,void 0))}setEventListener(t){var n;Oe(this,hu,t),(n=Y(this,to))==null||n.call(this),Oe(this,to,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){Y(this,yl)!==t&&(Oe(this,yl,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof Y(this,yl)=="boolean"?Y(this,yl):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},yl=new WeakMap,to=new WeakMap,hu=new WeakMap,jO),hS=new TW;function Eb(){let e,t;const n=new Promise((a,i)=>{e=a,t=i});n.status="pending",n.catch(()=>{});function r(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{r({status:"fulfilled",value:a}),e(a)},n.reject=a=>{r({status:"rejected",reason:a}),t(a)},n}var EW=SW;function OW(){let e=[],t=0,n=l=>{l()},r=l=>{l()},a=EW;const i=l=>{t?e.push(l):a(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{a=l}}}var On=OW(),mu,no,fu,bO,DW=(bO=class extends wd{constructor(){super();Be(this,mu,!0);Be(this,no);Be(this,fu);Oe(this,fu,t=>{if(!zl&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){Y(this,no)||this.setEventListener(Y(this,fu))}onUnsubscribe(){var t;this.hasListeners()||((t=Y(this,no))==null||t.call(this),Oe(this,no,void 0))}setEventListener(t){var n;Oe(this,fu,t),(n=Y(this,no))==null||n.call(this),Oe(this,no,t(this.setOnline.bind(this)))}setOnline(t){Y(this,mu)!==t&&(Oe(this,mu,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return Y(this,mu)}},mu=new WeakMap,no=new WeakMap,fu=new WeakMap,bO),$g=new DW;function MW(e){return Math.min(1e3*2**e,3e4)}function h$(e){return(e??"online")==="online"?$g.isOnline():!0}var Ob=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function m$(e){let t=!1,n=0,r;const a=Eb(),i=()=>a.status!=="pending",o=p=>{var v;if(!i()){const x=new Ob(p);m(x),(v=e.onCancel)==null||v.call(e,x)}},l=()=>{t=!0},c=()=>{t=!1},u=()=>hS.isFocused()&&(e.networkMode==="always"||$g.isOnline())&&e.canRun(),d=()=>h$(e.networkMode)&&e.canRun(),h=p=>{i()||(r==null||r(),a.resolve(p))},m=p=>{i()||(r==null||r(),a.reject(p))},f=()=>new Promise(p=>{var v;r=x=>{(i()||u())&&p(x)},(v=e.onPause)==null||v.call(e)}).then(()=>{var p;r=void 0,i()||(p=e.onContinue)==null||p.call(e)}),g=()=>{if(i())return;let p;const v=n===0?e.initialPromise:void 0;try{p=v??e.fn()}catch(x){p=Promise.reject(x)}Promise.resolve(p).then(h).catch(x=>{var _;if(i())return;const y=e.retry??(zl?0:3),j=e.retryDelay??MW,w=typeof j=="function"?j(n,x):j,N=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,x);if(t||!N){m(x);return}n++,(_=e.onFail)==null||_.call(e,n,x),PW(w).then(()=>u()?void 0:f()).then(()=>{t?m(x):g()})})};return{promise:a,status:()=>a.status,cancel:o,continue:()=>(r==null||r(),a),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?g():f().then(g),a)}}var jl,wO,f$=(wO=class{constructor(){Be(this,jl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ab(this.gcTime)&&Oe(this,jl,ml.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(zl?1/0:5*60*1e3))}clearGcTimeout(){Y(this,jl)&&(ml.clearTimeout(Y(this,jl)),Oe(this,jl,void 0))}},jl=new WeakMap,wO),bl,pu,xs,wl,Bn,rf,Nl,Vs,Qa,NO,IW=(NO=class extends f${constructor(t){super();Be(this,Vs);Be(this,bl);Be(this,pu);Be(this,xs);Be(this,wl);Be(this,Bn);Be(this,rf);Be(this,Nl);Oe(this,Nl,!1),Oe(this,rf,t.defaultOptions),this.setOptions(t.options),this.observers=[],Oe(this,wl,t.client),Oe(this,xs,Y(this,wl).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Oe(this,bl,sP(this.options)),this.state=t.state??Y(this,bl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Y(this,Bn))==null?void 0:t.promise}setOptions(t){if(this.options={...Y(this,rf),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=sP(this.options);n.data!==void 0&&(this.setData(n.data,{updatedAt:n.dataUpdatedAt,manual:!0}),Oe(this,bl,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Y(this,xs).remove(this)}setData(t,n){const r=Tb(this.state.data,t,this.options);return lt(this,Vs,Qa).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){lt(this,Vs,Qa).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,a;const n=(r=Y(this,Bn))==null?void 0:r.promise;return(a=Y(this,Bn))==null||a.cancel(t),n?n.then(br).catch(br):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Y(this,bl))}isActive(){return this.observers.some(t=>ys(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===dS||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>No(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!l$(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=Y(this,Bn))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=Y(this,Bn))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Y(this,xs).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(Y(this,Bn)&&(Y(this,Nl)?Y(this,Bn).cancel({revert:!0}):Y(this,Bn).cancelRetry()),this.scheduleGc()),Y(this,xs).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||lt(this,Vs,Qa).call(this,{type:"invalidate"})}async fetch(t,n){var c,u,d,h,m,f,g,p,v,x,y,j;if(this.state.fetchStatus!=="idle"&&((c=Y(this,Bn))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(Y(this,Bn))return Y(this,Bn).continueRetry(),Y(this,Bn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const w=this.observers.find(N=>N.options.queryFn);w&&this.setOptions(w.options)}const r=new AbortController,a=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(Oe(this,Nl,!0),r.signal)})},i=()=>{const w=u$(this.options,n),_=(()=>{const S={client:Y(this,wl),queryKey:this.queryKey,meta:this.meta};return a(S),S})();return Oe(this,Nl,!1),this.options.persister?this.options.persister(w,_,this):w(_)},l=(()=>{const w={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:Y(this,wl),state:this.state,fetchFn:i};return a(w),w})();(u=this.options.behavior)==null||u.onFetch(l,this),Oe(this,pu,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&lt(this,Vs,Qa).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta}),Oe(this,Bn,m$({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,onCancel:w=>{w instanceof Ob&&w.revert&&this.setState({...Y(this,pu),fetchStatus:"idle"}),r.abort()},onFail:(w,N)=>{lt(this,Vs,Qa).call(this,{type:"failed",failureCount:w,error:N})},onPause:()=>{lt(this,Vs,Qa).call(this,{type:"pause"})},onContinue:()=>{lt(this,Vs,Qa).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const w=await Y(this,Bn).start();if(w===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(w),(f=(m=Y(this,xs).config).onSuccess)==null||f.call(m,w,this),(p=(g=Y(this,xs).config).onSettled)==null||p.call(g,w,this.state.error,this),w}catch(w){if(w instanceof Ob){if(w.silent)return Y(this,Bn).promise;if(w.revert){if(this.state.data===void 0)throw w;return this.state.data}}throw lt(this,Vs,Qa).call(this,{type:"error",error:w}),(x=(v=Y(this,xs).config).onError)==null||x.call(v,w,this),(j=(y=Y(this,xs).config).onSettled)==null||j.call(y,this.state.data,w,this),w}finally{this.scheduleGc()}}},bl=new WeakMap,pu=new WeakMap,xs=new WeakMap,wl=new WeakMap,Bn=new WeakMap,rf=new WeakMap,Nl=new WeakMap,Vs=new WeakSet,Qa=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...p$(r.data,this.options),fetchMeta:t.meta??null};case"success":const a={...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Oe(this,pu,t.manual?a:void 0),a;case"error":const i=t.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),On.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),Y(this,xs).notify({query:this,type:"updated",action:t})})},NO);function p$(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:h$(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function sP(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var $r,xt,sf,xr,Sl,gu,ni,ro,af,vu,xu,_l,Cl,so,yu,_t,wh,Db,Mb,Ib,$b,Rb,Fb,Lb,g$,SO,$W=(SO=class extends wd{constructor(t,n){super();Be(this,_t);Be(this,$r);Be(this,xt);Be(this,sf);Be(this,xr);Be(this,Sl);Be(this,gu);Be(this,ni);Be(this,ro);Be(this,af);Be(this,vu);Be(this,xu);Be(this,_l);Be(this,Cl);Be(this,so);Be(this,yu,new Set);this.options=n,Oe(this,$r,t),Oe(this,ro,null),Oe(this,ni,Eb()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Y(this,xt).addObserver(this),aP(Y(this,xt),this.options)?lt(this,_t,wh).call(this):this.updateResult(),lt(this,_t,$b).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Bb(Y(this,xt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Bb(Y(this,xt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,lt(this,_t,Rb).call(this),lt(this,_t,Fb).call(this),Y(this,xt).removeObserver(this)}setOptions(t){const n=this.options,r=Y(this,xt);if(this.options=Y(this,$r).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ys(this.options.enabled,Y(this,xt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");lt(this,_t,Lb).call(this),Y(this,xt).setOptions(this.options),n._defaulted&&!Ig(this.options,n)&&Y(this,$r).getQueryCache().notify({type:"observerOptionsUpdated",query:Y(this,xt),observer:this});const a=this.hasListeners();a&&iP(Y(this,xt),r,this.options,n)&&lt(this,_t,wh).call(this),this.updateResult(),a&&(Y(this,xt)!==r||ys(this.options.enabled,Y(this,xt))!==ys(n.enabled,Y(this,xt))||No(this.options.staleTime,Y(this,xt))!==No(n.staleTime,Y(this,xt)))&&lt(this,_t,Db).call(this);const i=lt(this,_t,Mb).call(this);a&&(Y(this,xt)!==r||ys(this.options.enabled,Y(this,xt))!==ys(n.enabled,Y(this,xt))||i!==Y(this,so))&&lt(this,_t,Ib).call(this,i)}getOptimisticResult(t){const n=Y(this,$r).getQueryCache().build(Y(this,$r),t),r=this.createResult(n,t);return FW(this,r)&&(Oe(this,xr,r),Oe(this,gu,this.options),Oe(this,Sl,Y(this,xt).state)),r}getCurrentResult(){return Y(this,xr)}trackResult(t,n){return new Proxy(t,{get:(r,a)=>(this.trackProp(a),n==null||n(a),a==="promise"&&!this.options.experimental_prefetchInRender&&Y(this,ni).status==="pending"&&Y(this,ni).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(r,a))})}trackProp(t){Y(this,yu).add(t)}getCurrentQuery(){return Y(this,xt)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=Y(this,$r).defaultQueryOptions(t),r=Y(this,$r).getQueryCache().build(Y(this,$r),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return lt(this,_t,wh).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),Y(this,xr)))}createResult(t,n){var A;const r=Y(this,xt),a=this.options,i=Y(this,xr),o=Y(this,Sl),l=Y(this,gu),u=t!==r?t.state:Y(this,sf),{state:d}=t;let h={...d},m=!1,f;if(n._optimisticResults){const T=this.hasListeners(),E=!T&&aP(t,n),k=T&&iP(t,r,n,a);(E||k)&&(h={...h,...p$(d.data,t.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:g,errorUpdatedAt:p,status:v}=h;f=h.data;let x=!1;if(n.placeholderData!==void 0&&f===void 0&&v==="pending"){let T;i!=null&&i.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(T=i.data,x=!0):T=typeof n.placeholderData=="function"?n.placeholderData((A=Y(this,xu))==null?void 0:A.state.data,Y(this,xu)):n.placeholderData,T!==void 0&&(v="success",f=Tb(i==null?void 0:i.data,T,n),m=!0)}if(n.select&&f!==void 0&&!x)if(i&&f===(o==null?void 0:o.data)&&n.select===Y(this,af))f=Y(this,vu);else try{Oe(this,af,n.select),f=n.select(f),f=Tb(i==null?void 0:i.data,f,n),Oe(this,vu,f),Oe(this,ro,null)}catch(T){Oe(this,ro,T)}Y(this,ro)&&(g=Y(this,ro),f=Y(this,vu),p=Date.now(),v="error");const y=h.fetchStatus==="fetching",j=v==="pending",w=v==="error",N=j&&y,_=f!==void 0,C={status:v,fetchStatus:h.fetchStatus,isPending:j,isSuccess:v==="success",isError:w,isInitialLoading:N,isLoading:N,data:f,dataUpdatedAt:h.dataUpdatedAt,error:g,errorUpdatedAt:p,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:y,isRefetching:y&&!j,isLoadingError:w&&!_,isPaused:h.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:w&&_,isStale:mS(t,n),refetch:this.refetch,promise:Y(this,ni),isEnabled:ys(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const T=R=>{C.status==="error"?R.reject(C.error):C.data!==void 0&&R.resolve(C.data)},E=()=>{const R=Oe(this,ni,C.promise=Eb());T(R)},k=Y(this,ni);switch(k.status){case"pending":t.queryHash===r.queryHash&&T(k);break;case"fulfilled":(C.status==="error"||C.data!==k.value)&&E();break;case"rejected":(C.status!=="error"||C.error!==k.reason)&&E();break}}return C}updateResult(){const t=Y(this,xr),n=this.createResult(Y(this,xt),this.options);if(Oe(this,Sl,Y(this,xt).state),Oe(this,gu,this.options),Y(this,Sl).data!==void 0&&Oe(this,xu,Y(this,xt)),Ig(n,t))return;Oe(this,xr,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!Y(this,yu).size)return!0;const o=new Set(i??Y(this,yu));return this.options.throwOnError&&o.add("error"),Object.keys(Y(this,xr)).some(l=>{const c=l;return Y(this,xr)[c]!==t[c]&&o.has(c)})};lt(this,_t,g$).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&lt(this,_t,$b).call(this)}},$r=new WeakMap,xt=new WeakMap,sf=new WeakMap,xr=new WeakMap,Sl=new WeakMap,gu=new WeakMap,ni=new WeakMap,ro=new WeakMap,af=new WeakMap,vu=new WeakMap,xu=new WeakMap,_l=new WeakMap,Cl=new WeakMap,so=new WeakMap,yu=new WeakMap,_t=new WeakSet,wh=function(t){lt(this,_t,Lb).call(this);let n=Y(this,xt).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(br)),n},Db=function(){lt(this,_t,Rb).call(this);const t=No(this.options.staleTime,Y(this,xt));if(zl||Y(this,xr).isStale||!Ab(t))return;const r=l$(Y(this,xr).dataUpdatedAt,t)+1;Oe(this,_l,ml.setTimeout(()=>{Y(this,xr).isStale||this.updateResult()},r))},Mb=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Y(this,xt)):this.options.refetchInterval)??!1},Ib=function(t){lt(this,_t,Fb).call(this),Oe(this,so,t),!(zl||ys(this.options.enabled,Y(this,xt))===!1||!Ab(Y(this,so))||Y(this,so)===0)&&Oe(this,Cl,ml.setInterval(()=>{(this.options.refetchIntervalInBackground||hS.isFocused())&&lt(this,_t,wh).call(this)},Y(this,so)))},$b=function(){lt(this,_t,Db).call(this),lt(this,_t,Ib).call(this,lt(this,_t,Mb).call(this))},Rb=function(){Y(this,_l)&&(ml.clearTimeout(Y(this,_l)),Oe(this,_l,void 0))},Fb=function(){Y(this,Cl)&&(ml.clearInterval(Y(this,Cl)),Oe(this,Cl,void 0))},Lb=function(){const t=Y(this,$r).getQueryCache().build(Y(this,$r),this.options);if(t===Y(this,xt))return;const n=Y(this,xt);Oe(this,xt,t),Oe(this,sf,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},g$=function(t){On.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(Y(this,xr))}),Y(this,$r).getQueryCache().notify({query:Y(this,xt),type:"observerResultsUpdated"})})},SO);function RW(e,t){return ys(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function aP(e,t){return RW(e,t)||e.state.data!==void 0&&Bb(e,t,t.refetchOnMount)}function Bb(e,t,n){if(ys(t.enabled,e)!==!1&&No(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&mS(e,t)}return!1}function iP(e,t,n,r){return(e!==t||ys(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&mS(e,n)}function mS(e,t){return ys(t.enabled,e)!==!1&&e.isStaleByTime(No(t.staleTime,e))}function FW(e,t){return!Ig(e.getCurrentResult(),t)}function oP(e){return{onFetch:(t,n)=>{var d,h,m,f,g;const r=t.options,a=(m=(h=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:m.direction,i=((f=t.state.data)==null?void 0:f.pages)||[],o=((g=t.state.data)==null?void 0:g.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let p=!1;const v=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(t.signal.aborted?p=!0:t.signal.addEventListener("abort",()=>{p=!0}),t.signal)})},x=u$(t.options,t.fetchOptions),y=async(j,w,N)=>{if(p)return Promise.reject();if(w==null&&j.pages.length)return Promise.resolve(j);const S=(()=>{const E={client:t.client,queryKey:t.queryKey,pageParam:w,direction:N?"backward":"forward",meta:t.options.meta};return v(E),E})(),C=await x(S),{maxPages:A}=t.options,T=N?kW:AW;return{pages:T(j.pages,C,A),pageParams:T(j.pageParams,w,A)}};if(a&&i.length){const j=a==="backward",w=j?LW:lP,N={pages:i,pageParams:o},_=w(r,N);l=await y(N,_,j)}else{const j=e??i.length;do{const w=c===0?o[0]??r.initialPageParam:lP(r,l);if(c>0&&w==null)break;l=await y(l,w),c++}while(c<j)}return l};t.options.persister?t.fetchFn=()=>{var p,v;return(v=(p=t.options).persister)==null?void 0:v.call(p,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function lP(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function LW(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var of,ya,yr,Pl,ja,qi,_O,BW=(_O=class extends f${constructor(t){super();Be(this,ja);Be(this,of);Be(this,ya);Be(this,yr);Be(this,Pl);Oe(this,of,t.client),this.mutationId=t.mutationId,Oe(this,yr,t.mutationCache),Oe(this,ya,[]),this.state=t.state||v$(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Y(this,ya).includes(t)||(Y(this,ya).push(t),this.clearGcTimeout(),Y(this,yr).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Oe(this,ya,Y(this,ya).filter(n=>n!==t)),this.scheduleGc(),Y(this,yr).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Y(this,ya).length||(this.state.status==="pending"?this.scheduleGc():Y(this,yr).remove(this))}continue(){var t;return((t=Y(this,Pl))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,c,u,d,h,m,f,g,p,v,x,y,j,w,N,_,S,C,A;const n=()=>{lt(this,ja,qi).call(this,{type:"continue"})},r={client:Y(this,of),meta:this.options.meta,mutationKey:this.options.mutationKey};Oe(this,Pl,m$({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(T,E)=>{lt(this,ja,qi).call(this,{type:"failed",failureCount:T,error:E})},onPause:()=>{lt(this,ja,qi).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Y(this,yr).canRun(this)}));const a=this.state.status==="pending",i=!Y(this,Pl).canStart();try{if(a)n();else{lt(this,ja,qi).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(o=Y(this,yr).config).onMutate)==null?void 0:l.call(o,t,this,r));const E=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,t,r));E!==this.state.context&&lt(this,ja,qi).call(this,{type:"pending",context:E,variables:t,isPaused:i})}const T=await Y(this,Pl).start();return await((h=(d=Y(this,yr).config).onSuccess)==null?void 0:h.call(d,T,t,this.state.context,this,r)),await((f=(m=this.options).onSuccess)==null?void 0:f.call(m,T,t,this.state.context,r)),await((p=(g=Y(this,yr).config).onSettled)==null?void 0:p.call(g,T,null,this.state.variables,this.state.context,this,r)),await((x=(v=this.options).onSettled)==null?void 0:x.call(v,T,null,t,this.state.context,r)),lt(this,ja,qi).call(this,{type:"success",data:T}),T}catch(T){try{throw await((j=(y=Y(this,yr).config).onError)==null?void 0:j.call(y,T,t,this.state.context,this,r)),await((N=(w=this.options).onError)==null?void 0:N.call(w,T,t,this.state.context,r)),await((S=(_=Y(this,yr).config).onSettled)==null?void 0:S.call(_,void 0,T,this.state.variables,this.state.context,this,r)),await((A=(C=this.options).onSettled)==null?void 0:A.call(C,void 0,T,t,this.state.context,r)),T}finally{lt(this,ja,qi).call(this,{type:"error",error:T})}}finally{Y(this,yr).runNext(this)}}},of=new WeakMap,ya=new WeakMap,yr=new WeakMap,Pl=new WeakMap,ja=new WeakSet,qi=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),On.batch(()=>{Y(this,ya).forEach(r=>{r.onMutationUpdate(t)}),Y(this,yr).notify({mutation:this,type:"updated",action:t})})},_O);function v$(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ri,qs,lf,CO,zW=(CO=class extends wd{constructor(t={}){super();Be(this,ri);Be(this,qs);Be(this,lf);this.config=t,Oe(this,ri,new Set),Oe(this,qs,new Map),Oe(this,lf,0)}build(t,n,r){const a=new BW({client:t,mutationCache:this,mutationId:++Ff(this,lf)._,options:t.defaultMutationOptions(n),state:r});return this.add(a),a}add(t){Y(this,ri).add(t);const n=ip(t);if(typeof n=="string"){const r=Y(this,qs).get(n);r?r.push(t):Y(this,qs).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Y(this,ri).delete(t)){const n=ip(t);if(typeof n=="string"){const r=Y(this,qs).get(n);if(r)if(r.length>1){const a=r.indexOf(t);a!==-1&&r.splice(a,1)}else r[0]===t&&Y(this,qs).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=ip(t);if(typeof n=="string"){const r=Y(this,qs).get(n),a=r==null?void 0:r.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var r;const n=ip(t);if(typeof n=="string"){const a=(r=Y(this,qs).get(n))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){On.batch(()=>{Y(this,ri).forEach(t=>{this.notify({type:"removed",mutation:t})}),Y(this,ri).clear(),Y(this,qs).clear()})}getAll(){return Array.from(Y(this,ri))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>tP(n,r))}findAll(t={}){return this.getAll().filter(n=>tP(t,n))}notify(t){On.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return On.batch(()=>Promise.all(t.map(n=>n.continue().catch(br))))}},ri=new WeakMap,qs=new WeakMap,lf=new WeakMap,CO);function ip(e){var t;return(t=e.options.scope)==null?void 0:t.id}var si,ao,Rr,ai,gi,eg,zb,PO,VW=(PO=class extends wd{constructor(n,r){super();Be(this,gi);Be(this,si);Be(this,ao);Be(this,Rr);Be(this,ai);Oe(this,si,n),this.setOptions(r),this.bindMethods(),lt(this,gi,eg).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var a;const r=this.options;this.options=Y(this,si).defaultMutationOptions(n),Ig(this.options,r)||Y(this,si).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Y(this,Rr),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Vl(r.mutationKey)!==Vl(this.options.mutationKey)?this.reset():((a=Y(this,Rr))==null?void 0:a.state.status)==="pending"&&Y(this,Rr).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=Y(this,Rr))==null||n.removeObserver(this)}onMutationUpdate(n){lt(this,gi,eg).call(this),lt(this,gi,zb).call(this,n)}getCurrentResult(){return Y(this,ao)}reset(){var n;(n=Y(this,Rr))==null||n.removeObserver(this),Oe(this,Rr,void 0),lt(this,gi,eg).call(this),lt(this,gi,zb).call(this)}mutate(n,r){var a;return Oe(this,ai,r),(a=Y(this,Rr))==null||a.removeObserver(this),Oe(this,Rr,Y(this,si).getMutationCache().build(Y(this,si),this.options)),Y(this,Rr).addObserver(this),Y(this,Rr).execute(n)}},si=new WeakMap,ao=new WeakMap,Rr=new WeakMap,ai=new WeakMap,gi=new WeakSet,eg=function(){var r;const n=((r=Y(this,Rr))==null?void 0:r.state)??v$();Oe(this,ao,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},zb=function(n){On.batch(()=>{var r,a,i,o,l,c,u,d;if(Y(this,ai)&&this.hasListeners()){const h=Y(this,ao).variables,m=Y(this,ao).context,f={client:Y(this,si),meta:this.options.meta,mutationKey:this.options.mutationKey};(n==null?void 0:n.type)==="success"?((a=(r=Y(this,ai)).onSuccess)==null||a.call(r,n.data,h,m,f),(o=(i=Y(this,ai)).onSettled)==null||o.call(i,n.data,null,h,m,f)):(n==null?void 0:n.type)==="error"&&((c=(l=Y(this,ai)).onError)==null||c.call(l,n.error,h,m,f),(d=(u=Y(this,ai)).onSettled)==null||d.call(u,void 0,n.error,h,m,f))}this.listeners.forEach(h=>{h(Y(this,ao))})})},PO),ba,AO,qW=(AO=class extends wd{constructor(t={}){super();Be(this,ba);this.config=t,Oe(this,ba,new Map)}build(t,n,r){const a=n.queryKey,i=n.queryHash??uS(a,n);let o=this.get(i);return o||(o=new IW({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){Y(this,ba).has(t.queryHash)||(Y(this,ba).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=Y(this,ba).get(t.queryHash);n&&(t.destroy(),n===t&&Y(this,ba).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){On.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Y(this,ba).get(t)}getAll(){return[...Y(this,ba).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>eP(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>eP(t,r)):n}notify(t){On.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){On.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){On.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},ba=new WeakMap,AO),un,io,oo,ju,bu,lo,wu,Nu,kO,UW=(kO=class{constructor(e={}){Be(this,un);Be(this,io);Be(this,oo);Be(this,ju);Be(this,bu);Be(this,lo);Be(this,wu);Be(this,Nu);Oe(this,un,e.queryCache||new qW),Oe(this,io,e.mutationCache||new zW),Oe(this,oo,e.defaultOptions||{}),Oe(this,ju,new Map),Oe(this,bu,new Map),Oe(this,lo,0)}mount(){Ff(this,lo)._++,Y(this,lo)===1&&(Oe(this,wu,hS.subscribe(async e=>{e&&(await this.resumePausedMutations(),Y(this,un).onFocus())})),Oe(this,Nu,$g.subscribe(async e=>{e&&(await this.resumePausedMutations(),Y(this,un).onOnline())})))}unmount(){var e,t;Ff(this,lo)._--,Y(this,lo)===0&&((e=Y(this,wu))==null||e.call(this),Oe(this,wu,void 0),(t=Y(this,Nu))==null||t.call(this),Oe(this,Nu,void 0))}isFetching(e){return Y(this,un).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Y(this,io).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=Y(this,un).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=Y(this,un).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(No(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return Y(this,un).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),a=Y(this,un).get(r.queryHash),i=a==null?void 0:a.state.data,o=_W(t,i);if(o!==void 0)return Y(this,un).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return On.batch(()=>Y(this,un).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=Y(this,un).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=Y(this,un);On.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=Y(this,un);return On.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=On.batch(()=>Y(this,un).findAll(e).map(a=>a.cancel(n)));return Promise.all(r).then(br).catch(br)}invalidateQueries(e,t={}){return On.batch(()=>(Y(this,un).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=On.batch(()=>Y(this,un).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,n);return n.throwOnError||(i=i.catch(br)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(br)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=Y(this,un).build(this,t);return n.isStaleByTime(No(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(br).catch(br)}fetchInfiniteQuery(e){return e.behavior=oP(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(br).catch(br)}ensureInfiniteQueryData(e){return e.behavior=oP(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return $g.isOnline()?Y(this,io).resumePausedMutations():Promise.resolve()}getQueryCache(){return Y(this,un)}getMutationCache(){return Y(this,io)}getDefaultOptions(){return Y(this,oo)}setDefaultOptions(e){Oe(this,oo,e)}setQueryDefaults(e,t){Y(this,ju).set(Vl(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Y(this,ju).values()],n={};return t.forEach(r=>{pm(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){Y(this,bu).set(Vl(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Y(this,bu).values()],n={};return t.forEach(r=>{pm(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Y(this,oo).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=uS(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===dS&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Y(this,oo).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Y(this,un).clear(),Y(this,io).clear()}},un=new WeakMap,io=new WeakMap,oo=new WeakMap,ju=new WeakMap,bu=new WeakMap,lo=new WeakMap,wu=new WeakMap,Nu=new WeakMap,kO),x$=b.createContext(void 0),Dt=e=>{const t=b.useContext(x$);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},WW=({client:e,children:t})=>(b.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(x$.Provider,{value:e,children:t})),y$=b.createContext(!1),HW=()=>b.useContext(y$);y$.Provider;function KW(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var GW=b.createContext(KW()),YW=()=>b.useContext(GW),QW=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},XW=e=>{b.useEffect(()=>{e.clearReset()},[e])},JW=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(a&&e.data===void 0||d$(n,[e.error,r])),ZW=e=>{if(e.suspense){const n=a=>a==="static"?a:Math.max(a??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...a)=>n(r(...a)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},eH=(e,t)=>e.isLoading&&e.isFetching&&!t,tH=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,cP=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function nH(e,t,n){var h,m,f,g,p;const r=HW(),a=YW(),i=Dt(),o=i.defaultQueryOptions(e);(m=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||m.call(h,o),o._optimisticResults=r?"isRestoring":"optimistic",ZW(o),QW(o,a),XW(a);const l=!i.getQueryCache().get(o.queryHash),[c]=b.useState(()=>new t(i,o)),u=c.getOptimisticResult(o),d=!r&&e.subscribed!==!1;if(b.useSyncExternalStore(b.useCallback(v=>{const x=d?c.subscribe(On.batchCalls(v)):br;return c.updateResult(),x},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),b.useEffect(()=>{c.setOptions(o)},[o,c]),tH(o,u))throw cP(o,c,a);if(JW({result:u,errorResetBoundary:a,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;if((g=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||g.call(f,o,u),o.experimental_prefetchInRender&&!zl&&eH(u,r)){const v=l?cP(o,c,a):(p=i.getQueryCache().get(o.queryHash))==null?void 0:p.promise;v==null||v.catch(br).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?u:c.trackResult(u)}function Er(e,t){return nH(e,$W)}function Rt(e,t){const n=Dt(),[r]=b.useState(()=>new VW(n,e));b.useEffect(()=>{r.setOptions(e)},[r,e]);const a=b.useSyncExternalStore(b.useCallback(o=>r.subscribe(On.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=b.useCallback((o,l)=>{r.mutate(o,l).catch(br)},[r]);if(a.error&&d$(r.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gm(){return gm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gm.apply(this,arguments)}var ho;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ho||(ho={}));const uP="popstate";function rH(e){e===void 0&&(e={});function t(r,a){let{pathname:i,search:o,hash:l}=r.location;return Vb("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:Rg(a)}return aH(t,n,null,e)}function vn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function j$(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function sH(){return Math.random().toString(36).substr(2,8)}function dP(e,t){return{usr:e.state,key:e.key,idx:t}}function Vb(e,t,n,r){return n===void 0&&(n=null),gm({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Nd(t):t,{state:n,key:t&&t.key||r||sH()})}function Rg(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Nd(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function aH(e,t,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:i=!1}=r,o=a.history,l=ho.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(gm({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=ho.Pop;let v=d(),x=v==null?null:v-u;u=v,c&&c({action:l,location:p.location,delta:x})}function m(v,x){l=ho.Push;let y=Vb(p.location,v,x);u=d()+1;let j=dP(y,u),w=p.createHref(y);try{o.pushState(j,"",w)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;a.location.assign(w)}i&&c&&c({action:l,location:p.location,delta:1})}function f(v,x){l=ho.Replace;let y=Vb(p.location,v,x);u=d();let j=dP(y,u),w=p.createHref(y);o.replaceState(j,"",w),i&&c&&c({action:l,location:p.location,delta:0})}function g(v){let x=a.location.origin!=="null"?a.location.origin:a.location.href,y=typeof v=="string"?v:Rg(v);return y=y.replace(/ $/,"%20"),vn(x,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,x)}let p={get action(){return l},get location(){return e(a,o)},listen(v){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(uP,h),c=v,()=>{a.removeEventListener(uP,h),c=null}},createHref(v){return t(a,v)},createURL:g,encodeLocation(v){let x=g(v);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:f,go(v){return o.go(v)}};return p}var hP;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(hP||(hP={}));function iH(e,t,n){return n===void 0&&(n="/"),oH(e,t,n,!1)}function oH(e,t,n,r){let a=typeof t=="string"?Nd(t):t,i=fS(a.pathname||"/",n);if(i==null)return null;let o=b$(e);lH(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=yH(i);l=vH(o[c],u,r)}return l}function b$(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(vn(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=So([r,c.relativePath]),d=n.concat(c);i.children&&i.children.length>0&&(vn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),b$(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:pH(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of w$(i.path))a(i,o,c)}),t}function w$(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return a?[i,""]:[i];let o=w$(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function lH(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:gH(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const cH=/^:[\w-]+$/,uH=3,dH=2,hH=1,mH=10,fH=-2,mP=e=>e==="*";function pH(e,t){let n=e.split("/"),r=n.length;return n.some(mP)&&(r+=fH),t&&(r+=dH),n.filter(a=>!mP(a)).reduce((a,i)=>a+(cH.test(i)?uH:i===""?hH:mH),r)}function gH(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function vH(e,t,n){let{routesMeta:r}=e,a={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=fP({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=fP({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(a,h.params),o.push({params:a,pathname:So([i,h.pathname]),pathnameBase:NH(So([i,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(i=So([i,h.pathnameBase]))}return o}function fP(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=xH(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:m,isOptional:f}=d;if(m==="*"){let p=l[h]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const g=l[h];return f&&!g?u[m]=void 0:u[m]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function xH(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),j$(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function yH(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return j$(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function fS(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function jH(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?Nd(e):e;return{pathname:n?n.startsWith("/")?n:bH(n,t):t,search:SH(r),hash:_H(a)}}function bH(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function A0(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function wH(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function pS(e,t){let n=wH(e);return t?n.map((r,a)=>a===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function gS(e,t,n,r){r===void 0&&(r=!1);let a;typeof e=="string"?a=Nd(e):(a=gm({},e),vn(!a.pathname||!a.pathname.includes("?"),A0("?","pathname","search",a)),vn(!a.pathname||!a.pathname.includes("#"),A0("#","pathname","hash",a)),vn(!a.search||!a.search.includes("#"),A0("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=n;else{let h=t.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;a.pathname=m.join("/")}l=h>=0?t[h]:"/"}let c=jH(a,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const So=e=>e.join("/").replace(/\/\/+/g,"/"),NH=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),SH=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,_H=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function CH(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const N$=["post","put","patch","delete"];new Set(N$);const PH=["get",...N$];new Set(PH);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vm(){return vm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vm.apply(this,arguments)}const vS=b.createContext(null),AH=b.createContext(null),Ro=b.createContext(null),Cx=b.createContext(null),Fo=b.createContext({outlet:null,matches:[],isDataRoute:!1}),S$=b.createContext(null);function kH(e,t){let{relative:n}=t===void 0?{}:t;Sd()||vn(!1);let{basename:r,navigator:a}=b.useContext(Ro),{hash:i,pathname:o,search:l}=C$(e,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:So([r,o])),a.createHref({pathname:c,search:l,hash:i})}function Sd(){return b.useContext(Cx)!=null}function Lo(){return Sd()||vn(!1),b.useContext(Cx).location}function _$(e){b.useContext(Ro).static||b.useLayoutEffect(e)}function _d(){let{isDataRoute:e}=b.useContext(Fo);return e?VH():TH()}function TH(){Sd()||vn(!1);let e=b.useContext(vS),{basename:t,future:n,navigator:r}=b.useContext(Ro),{matches:a}=b.useContext(Fo),{pathname:i}=Lo(),o=JSON.stringify(pS(a,n.v7_relativeSplatPath)),l=b.useRef(!1);return _$(()=>{l.current=!0}),b.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let h=gS(u,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:So([t,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[t,r,o,i,e])}function C$(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=b.useContext(Ro),{matches:a}=b.useContext(Fo),{pathname:i}=Lo(),o=JSON.stringify(pS(a,r.v7_relativeSplatPath));return b.useMemo(()=>gS(e,JSON.parse(o),i,n==="path"),[e,o,i,n])}function EH(e,t){return OH(e,t)}function OH(e,t,n,r){Sd()||vn(!1);let{navigator:a}=b.useContext(Ro),{matches:i}=b.useContext(Fo),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Lo(),d;if(t){var h;let v=typeof t=="string"?Nd(t):t;c==="/"||(h=v.pathname)!=null&&h.startsWith(c)||vn(!1),d=v}else d=u;let m=d.pathname||"/",f=m;if(c!=="/"){let v=c.replace(/^\//,"").split("/");f="/"+m.replace(/^\//,"").split("/").slice(v.length).join("/")}let g=iH(e,{pathname:f}),p=RH(g&&g.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:So([c,a.encodeLocation?a.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:So([c,a.encodeLocation?a.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,n,r);return t&&p?b.createElement(Cx.Provider,{value:{location:vm({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:ho.Pop}},p):p}function DH(){let e=zH(),t=CH(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},t),n?b.createElement("pre",{style:a},n):null,null)}const MH=b.createElement(DH,null);class IH extends b.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?b.createElement(Fo.Provider,{value:this.props.routeContext},b.createElement(S$.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function $H(e){let{routeContext:t,match:n,children:r}=e,a=b.useContext(vS);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(Fo.Provider,{value:t},r)}function RH(e,t,n,r){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(a=n)==null?void 0:a.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||vn(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:m,errors:f}=n,g=h.route.loader&&m[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||g){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,m)=>{let f,g=!1,p=null,v=null;n&&(f=l&&h.route.id?l[h.route.id]:void 0,p=h.route.errorElement||MH,c&&(u<0&&m===0?(g=!0,v=null):u===m&&(g=!0,v=h.route.hydrateFallbackElement||null)));let x=t.concat(o.slice(0,m+1)),y=()=>{let j;return f?j=p:g?j=v:h.route.Component?j=b.createElement(h.route.Component,null):h.route.element?j=h.route.element:j=d,b.createElement($H,{match:h,routeContext:{outlet:d,matches:x,isDataRoute:n!=null},children:j})};return n&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?b.createElement(IH,{location:n.location,revalidation:n.revalidation,component:p,error:f,children:y(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):y()},null)}var P$=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(P$||{}),Fg=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Fg||{});function FH(e){let t=b.useContext(vS);return t||vn(!1),t}function LH(e){let t=b.useContext(AH);return t||vn(!1),t}function BH(e){let t=b.useContext(Fo);return t||vn(!1),t}function A$(e){let t=BH(),n=t.matches[t.matches.length-1];return n.route.id||vn(!1),n.route.id}function zH(){var e;let t=b.useContext(S$),n=LH(Fg.UseRouteError),r=A$(Fg.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function VH(){let{router:e}=FH(P$.UseNavigateStable),t=A$(Fg.UseNavigateStable),n=b.useRef(!1);return _$(()=>{n.current=!0}),b.useCallback(function(a,i){i===void 0&&(i={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,vm({fromRouteId:t},i)))},[e,t])}function qH(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function qb(e){let{to:t,replace:n,state:r,relative:a}=e;Sd()||vn(!1);let{future:i,static:o}=b.useContext(Ro),{matches:l}=b.useContext(Fo),{pathname:c}=Lo(),u=_d(),d=gS(t,pS(l,i.v7_relativeSplatPath),c,a==="path"),h=JSON.stringify(d);return b.useEffect(()=>u(JSON.parse(h),{replace:n,state:r,relative:a}),[u,h,a,n,r]),null}function mn(e){vn(!1)}function UH(e){let{basename:t="/",children:n=null,location:r,navigationType:a=ho.Pop,navigator:i,static:o=!1,future:l}=e;Sd()&&vn(!1);let c=t.replace(/^\/*/,"/"),u=b.useMemo(()=>({basename:c,navigator:i,static:o,future:vm({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof r=="string"&&(r=Nd(r));let{pathname:d="/",search:h="",hash:m="",state:f=null,key:g="default"}=r,p=b.useMemo(()=>{let v=fS(d,c);return v==null?null:{location:{pathname:v,search:h,hash:m,state:f,key:g},navigationType:a}},[c,d,h,m,f,g,a]);return p==null?null:b.createElement(Ro.Provider,{value:u},b.createElement(Cx.Provider,{children:n,value:p}))}function WH(e){let{children:t,location:n}=e;return EH(Ub(t),n)}new Promise(()=>{});function Ub(e,t){t===void 0&&(t=[]);let n=[];return b.Children.forEach(e,(r,a)=>{if(!b.isValidElement(r))return;let i=[...t,a];if(r.type===b.Fragment){n.push.apply(n,Ub(r.props.children,i));return}r.type!==mn&&vn(!1),!r.props.index||!r.props.children||vn(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Ub(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wb(){return Wb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wb.apply(this,arguments)}function HH(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function KH(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function GH(e,t){return e.button===0&&(!t||t==="_self")&&!KH(e)}function Hb(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(a=>[n,a]):[[n,r]])},[]))}function YH(e,t){let n=Hb(e);return t&&t.forEach((r,a)=>{n.has(a)||t.getAll(a).forEach(i=>{n.append(a,i)})}),n}const QH=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],XH="6";try{window.__reactRouterVersion=XH}catch{}const JH="startTransition",pP=ZN[JH];function ZH(e){let{basename:t,children:n,future:r,window:a}=e,i=b.useRef();i.current==null&&(i.current=rH({window:a,v5Compat:!0}));let o=i.current,[l,c]=b.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=b.useCallback(h=>{u&&pP?pP(()=>c(h)):c(h)},[c,u]);return b.useLayoutEffect(()=>o.listen(d),[o,d]),b.useEffect(()=>qH(r),[r]),b.createElement(UH,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const eK=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",tK=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ys=b.forwardRef(function(t,n){let{onClick:r,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,m=HH(t,QH),{basename:f}=b.useContext(Ro),g,p=!1;if(typeof u=="string"&&tK.test(u)&&(g=u,eK))try{let j=new URL(window.location.href),w=u.startsWith("//")?new URL(j.protocol+u):new URL(u),N=fS(w.pathname,f);w.origin===j.origin&&N!=null?u=N+w.search+w.hash:p=!0}catch{}let v=kH(u,{relative:a}),x=nK(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:h});function y(j){r&&r(j),j.defaultPrevented||x(j)}return b.createElement("a",Wb({},m,{href:g||v,onClick:p||i?r:y,ref:n,target:c}))});var gP;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(gP||(gP={}));var vP;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(vP||(vP={}));function nK(e,t){let{target:n,replace:r,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=_d(),u=Lo(),d=C$(e,{relative:o});return b.useCallback(h=>{if(GH(h,n)){h.preventDefault();let m=r!==void 0?r:Rg(u)===Rg(d);c(e,{replace:m,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,r,a,n,e,i,o,l])}function rK(e){let t=b.useRef(Hb(e)),n=b.useRef(!1),r=Lo(),a=b.useMemo(()=>YH(r.search,n.current?null:t.current),[r.search]),i=_d(),o=b.useCallback((l,c)=>{const u=Hb(typeof l=="function"?l(a):l);n.current=!0,i("?"+u,c)},[i,a]);return[a,o]}const xS=gf("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),F=b.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...a},i)=>{const o=r?dq:"button";return s.jsx(o,{className:De(xS({variant:t,size:n,className:e})),ref:i,...a})});F.displayName="Button";const k$=b.createContext(void 0);function sK({children:e}){const[t,n]=b.useState(()=>{const a=localStorage.getItem("theme");return a||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});b.useEffect(()=>{localStorage.setItem("theme",t);const a=document.documentElement;t==="dark"?a.classList.add("dark"):a.classList.remove("dark")},[t]);const r=()=>{n(a=>a==="light"?"dark":"light")};return s.jsx(k$.Provider,{value:{theme:t,setTheme:n,toggleTheme:r},children:e})}function aK(){const e=b.useContext(k$);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e}function xP(){const{theme:e,toggleTheme:t}=aK();return s.jsxs(F,{variant:"outline",size:"sm",onClick:t,className:"h-9 w-9 p-0",title:e==="light"?"Activer le mode sombre":"Activer le mode clair",children:[e==="light"?s.jsx(gU,{className:"h-4 w-4"}):s.jsx(yU,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:e==="light"?"Activer le mode sombre":"Activer le mode clair"})]})}var iK=b.createContext(void 0);function Px(e){const t=b.useContext(iK);return e||t||"ltr"}var k0=0;function yS(){b.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??yP()),document.body.insertAdjacentElement("beforeend",e[1]??yP()),k0++,()=>{k0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),k0--}},[])}function yP(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var T0="focusScope.autoFocusOnMount",E0="focusScope.autoFocusOnUnmount",jP={bubbles:!1,cancelable:!0},oK="FocusScope",Ax=b.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=b.useState(null),u=Ar(a),d=Ar(i),h=b.useRef(null),m=pt(t,p=>c(p)),f=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(r){let p=function(j){if(f.paused||!l)return;const w=j.target;l.contains(w)?h.current=w:Ui(h.current,{select:!0})},v=function(j){if(f.paused||!l)return;const w=j.relatedTarget;w!==null&&(l.contains(w)||Ui(h.current,{select:!0}))},x=function(j){if(document.activeElement===document.body)for(const N of j)N.removedNodes.length>0&&Ui(l)};document.addEventListener("focusin",p),document.addEventListener("focusout",v);const y=new MutationObserver(x);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",v),y.disconnect()}}},[r,l,f.paused]),b.useEffect(()=>{if(l){wP.add(f);const p=document.activeElement;if(!l.contains(p)){const x=new CustomEvent(T0,jP);l.addEventListener(T0,u),l.dispatchEvent(x),x.defaultPrevented||(lK(mK(T$(l)),{select:!0}),document.activeElement===p&&Ui(l))}return()=>{l.removeEventListener(T0,u),setTimeout(()=>{const x=new CustomEvent(E0,jP);l.addEventListener(E0,d),l.dispatchEvent(x),x.defaultPrevented||Ui(p??document.body,{select:!0}),l.removeEventListener(E0,d),wP.remove(f)},0)}}},[l,u,d,f]);const g=b.useCallback(p=>{if(!n&&!r||f.paused)return;const v=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,x=document.activeElement;if(v&&x){const y=p.currentTarget,[j,w]=cK(y);j&&w?!p.shiftKey&&x===w?(p.preventDefault(),n&&Ui(j,{select:!0})):p.shiftKey&&x===j&&(p.preventDefault(),n&&Ui(w,{select:!0})):x===y&&p.preventDefault()}},[n,r,f.paused]);return s.jsx(ze.div,{tabIndex:-1,...o,ref:m,onKeyDown:g})});Ax.displayName=oK;function lK(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Ui(r,{select:t}),document.activeElement!==n)return}function cK(e){const t=T$(e),n=bP(t,e),r=bP(t.reverse(),e);return[n,r]}function T$(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function bP(e,t){for(const n of e)if(!uK(n,{upTo:t}))return n}function uK(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function dK(e){return e instanceof HTMLInputElement&&"select"in e}function Ui(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&dK(e)&&t&&e.select()}}var wP=hK();function hK(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=NP(e,t),e.unshift(t)},remove(t){var n;e=NP(e,t),(n=e[0])==null||n.resume()}}}function NP(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function mK(e){return e.filter(t=>t.tagName!=="A")}var O0="rovingFocusGroup.onEntryFocus",fK={bubbles:!1,cancelable:!0},jf="RovingFocusGroup",[Kb,E$,pK]=gx(jf),[gK,kx]=Kr(jf,[pK]),[vK,xK]=gK(jf),O$=b.forwardRef((e,t)=>s.jsx(Kb.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(Kb.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(yK,{...e,ref:t})})}));O$.displayName=jf;var yK=b.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=e,m=b.useRef(null),f=pt(t,m),g=Px(i),[p,v]=bi({prop:o,defaultProp:l??null,onChange:c,caller:jf}),[x,y]=b.useState(!1),j=Ar(u),w=E$(n),N=b.useRef(!1),[_,S]=b.useState(0);return b.useEffect(()=>{const C=m.current;if(C)return C.addEventListener(O0,j),()=>C.removeEventListener(O0,j)},[j]),s.jsx(vK,{scope:n,orientation:r,dir:g,loop:a,currentTabStopId:p,onItemFocus:b.useCallback(C=>v(C),[v]),onItemShiftTab:b.useCallback(()=>y(!0),[]),onFocusableItemAdd:b.useCallback(()=>S(C=>C+1),[]),onFocusableItemRemove:b.useCallback(()=>S(C=>C-1),[]),children:s.jsx(ze.div,{tabIndex:x||_===0?-1:0,"data-orientation":r,...h,ref:f,style:{outline:"none",...e.style},onMouseDown:ke(e.onMouseDown,()=>{N.current=!0}),onFocus:ke(e.onFocus,C=>{const A=!N.current;if(C.target===C.currentTarget&&A&&!x){const T=new CustomEvent(O0,fK);if(C.currentTarget.dispatchEvent(T),!T.defaultPrevented){const E=w().filter(V=>V.focusable),k=E.find(V=>V.active),R=E.find(V=>V.id===p),W=[k,R,...E].filter(Boolean).map(V=>V.ref.current);I$(W,d)}}N.current=!1}),onBlur:ke(e.onBlur,()=>y(!1))})})}),D$="RovingFocusGroupItem",M$=b.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:i,children:o,...l}=e,c=Ma(),u=i||c,d=xK(D$,n),h=d.currentTabStopId===u,m=E$(n),{onFocusableItemAdd:f,onFocusableItemRemove:g,currentTabStopId:p}=d;return b.useEffect(()=>{if(r)return f(),()=>g()},[r,f,g]),s.jsx(Kb.ItemSlot,{scope:n,id:u,focusable:r,active:a,children:s.jsx(ze.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:ke(e.onMouseDown,v=>{r?d.onItemFocus(u):v.preventDefault()}),onFocus:ke(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:ke(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){d.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const x=wK(v,d.orientation,d.dir);if(x!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let j=m().filter(w=>w.focusable).map(w=>w.ref.current);if(x==="last")j.reverse();else if(x==="prev"||x==="next"){x==="prev"&&j.reverse();const w=j.indexOf(v.currentTarget);j=d.loop?NK(j,w+1):j.slice(w+1)}setTimeout(()=>I$(j))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:p!=null}):o})})});M$.displayName=D$;var jK={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function bK(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function wK(e,t,n){const r=bK(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return jK[r]}function I$(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function NK(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var $$=O$,R$=M$,SK=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},xc=new WeakMap,op=new WeakMap,lp={},D0=0,F$=function(e){return e&&(e.host||F$(e.parentNode))},_K=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=F$(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},CK=function(e,t,n,r){var a=_K(t,Array.isArray(e)?e:[e]);lp[n]||(lp[n]=new WeakMap);var i=lp[n],o=[],l=new Set,c=new Set(a),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};a.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(m){if(l.has(m))d(m);else try{var f=m.getAttribute(r),g=f!==null&&f!=="false",p=(xc.get(m)||0)+1,v=(i.get(m)||0)+1;xc.set(m,p),i.set(m,v),o.push(m),p===1&&g&&op.set(m,!0),v===1&&m.setAttribute(n,"true"),g||m.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",m,x)}})};return d(t),l.clear(),D0++,function(){o.forEach(function(h){var m=xc.get(h)-1,f=i.get(h)-1;xc.set(h,m),i.set(h,f),m||(op.has(h)||h.removeAttribute(r),op.delete(h)),f||h.removeAttribute(n)}),D0--,D0||(xc=new WeakMap,xc=new WeakMap,op=new WeakMap,lp={})}},jS=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=SK(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),CK(r,a,n,"aria-hidden")):function(){return null}},Na=function(){return Na=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Na.apply(this,arguments)};function L$(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function PK(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var tg="right-scroll-bar-position",ng="width-before-scroll-bar",AK="with-scroll-bars-hidden",kK="--removed-body-scroll-bar-size";function M0(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function TK(e,t){var n=b.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=t,n.facade}var EK=typeof window<"u"?b.useLayoutEffect:b.useEffect,SP=new WeakMap;function OK(e,t){var n=TK(null,function(r){return e.forEach(function(a){return M0(a,r)})});return EK(function(){var r=SP.get(n);if(r){var a=new Set(r),i=new Set(e),o=n.current;a.forEach(function(l){i.has(l)||M0(l,null)}),i.forEach(function(l){a.has(l)||M0(l,o)})}SP.set(n,e)},[e]),n}function DK(e){return e}function MK(e,t){t===void 0&&(t=DK);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var o=t(i,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(i),o=n}var c=function(){var d=o;o=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),n}}}};return a}function IK(e){e===void 0&&(e={});var t=MK(null);return t.options=Na({async:!0,ssr:!1},e),t}var B$=function(e){var t=e.sideCar,n=L$(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return b.createElement(r,Na({},n))};B$.isSideCarExport=!0;function $K(e,t){return e.useMedium(t),B$}var z$=IK(),I0=function(){},Tx=b.forwardRef(function(e,t){var n=b.useRef(null),r=b.useState({onScrollCapture:I0,onWheelCapture:I0,onTouchMoveCapture:I0}),a=r[0],i=r[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,h=e.shards,m=e.sideCar,f=e.noRelative,g=e.noIsolation,p=e.inert,v=e.allowPinchZoom,x=e.as,y=x===void 0?"div":x,j=e.gapMode,w=L$(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=m,_=OK([n,t]),S=Na(Na({},w),a);return b.createElement(b.Fragment,null,d&&b.createElement(N,{sideCar:z$,removeScrollBar:u,shards:h,noRelative:f,noIsolation:g,inert:p,setCallbacks:i,allowPinchZoom:!!v,lockRef:n,gapMode:j}),o?b.cloneElement(b.Children.only(l),Na(Na({},S),{ref:_})):b.createElement(y,Na({},S,{className:c,ref:_}),l))});Tx.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Tx.classNames={fullWidth:ng,zeroRight:tg};var RK=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function FK(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=RK();return t&&e.setAttribute("nonce",t),e}function LK(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function BK(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var zK=function(){var e=0,t=null;return{add:function(n){e==0&&(t=FK())&&(LK(t,n),BK(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},VK=function(){var e=zK();return function(t,n){b.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},V$=function(){var e=VK(),t=function(n){var r=n.styles,a=n.dynamic;return e(r,a),null};return t},qK={left:0,top:0,right:0,gap:0},$0=function(e){return parseInt(e||"",10)||0},UK=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[$0(n),$0(r),$0(a)]},WK=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return qK;var t=UK(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},HK=V$(),au="data-scroll-locked",KK=function(e,t,n,r){var a=e.left,i=e.top,o=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(AK,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(au,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(tg,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(ng,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(tg," .").concat(tg,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(ng," .").concat(ng,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(au,`] {
    `).concat(kK,": ").concat(l,`px;
  }
`)},_P=function(){var e=parseInt(document.body.getAttribute(au)||"0",10);return isFinite(e)?e:0},GK=function(){b.useEffect(function(){return document.body.setAttribute(au,(_P()+1).toString()),function(){var e=_P()-1;e<=0?document.body.removeAttribute(au):document.body.setAttribute(au,e.toString())}},[])},YK=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,a=r===void 0?"margin":r;GK();var i=b.useMemo(function(){return WK(a)},[a]);return b.createElement(HK,{styles:KK(i,!t,a,n?"":"!important")})},Gb=!1;if(typeof window<"u")try{var cp=Object.defineProperty({},"passive",{get:function(){return Gb=!0,!0}});window.addEventListener("test",cp,cp),window.removeEventListener("test",cp,cp)}catch{Gb=!1}var yc=Gb?{passive:!1}:!1,QK=function(e){return e.tagName==="TEXTAREA"},q$=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!QK(e)&&n[t]==="visible")},XK=function(e){return q$(e,"overflowY")},JK=function(e){return q$(e,"overflowX")},CP=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=U$(e,r);if(a){var i=W$(e,r),o=i[1],l=i[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},ZK=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},eG=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},U$=function(e,t){return e==="v"?XK(t):JK(t)},W$=function(e,t){return e==="v"?ZK(t):eG(t)},tG=function(e,t){return e==="h"&&t==="rtl"?-1:1},nG=function(e,t,n,r,a){var i=tG(e,window.getComputedStyle(t).direction),o=i*r,l=n.target,c=t.contains(l),u=!1,d=o>0,h=0,m=0;do{if(!l)break;var f=W$(e,l),g=f[0],p=f[1],v=f[2],x=p-v-i*g;(g||x)&&U$(e,l)&&(h+=x,m+=g);var y=l.parentNode;l=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&(Math.abs(h)<1||!a)||!d&&(Math.abs(m)<1||!a))&&(u=!0),u},up=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},PP=function(e){return[e.deltaX,e.deltaY]},AP=function(e){return e&&"current"in e?e.current:e},rG=function(e,t){return e[0]===t[0]&&e[1]===t[1]},sG=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},aG=0,jc=[];function iG(e){var t=b.useRef([]),n=b.useRef([0,0]),r=b.useRef(),a=b.useState(aG++)[0],i=b.useState(V$)[0],o=b.useRef(e);b.useEffect(function(){o.current=e},[e]),b.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var p=PK([e.lockRef.current],(e.shards||[]).map(AP),!0).filter(Boolean);return p.forEach(function(v){return v.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),p.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=b.useCallback(function(p,v){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!o.current.allowPinchZoom;var x=up(p),y=n.current,j="deltaX"in p?p.deltaX:y[0]-x[0],w="deltaY"in p?p.deltaY:y[1]-x[1],N,_=p.target,S=Math.abs(j)>Math.abs(w)?"h":"v";if("touches"in p&&S==="h"&&_.type==="range")return!1;var C=CP(S,_);if(!C)return!0;if(C?N=S:(N=S==="v"?"h":"v",C=CP(S,_)),!C)return!1;if(!r.current&&"changedTouches"in p&&(j||w)&&(r.current=N),!N)return!0;var A=r.current||N;return nG(A,v,p,A==="h"?j:w,!0)},[]),c=b.useCallback(function(p){var v=p;if(!(!jc.length||jc[jc.length-1]!==i)){var x="deltaY"in v?PP(v):up(v),y=t.current.filter(function(N){return N.name===v.type&&(N.target===v.target||v.target===N.shadowParent)&&rG(N.delta,x)})[0];if(y&&y.should){v.cancelable&&v.preventDefault();return}if(!y){var j=(o.current.shards||[]).map(AP).filter(Boolean).filter(function(N){return N.contains(v.target)}),w=j.length>0?l(v,j[0]):!o.current.noIsolation;w&&v.cancelable&&v.preventDefault()}}},[]),u=b.useCallback(function(p,v,x,y){var j={name:p,delta:v,target:x,should:y,shadowParent:oG(x)};t.current.push(j),setTimeout(function(){t.current=t.current.filter(function(w){return w!==j})},1)},[]),d=b.useCallback(function(p){n.current=up(p),r.current=void 0},[]),h=b.useCallback(function(p){u(p.type,PP(p),p.target,l(p,e.lockRef.current))},[]),m=b.useCallback(function(p){u(p.type,up(p),p.target,l(p,e.lockRef.current))},[]);b.useEffect(function(){return jc.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",c,yc),document.addEventListener("touchmove",c,yc),document.addEventListener("touchstart",d,yc),function(){jc=jc.filter(function(p){return p!==i}),document.removeEventListener("wheel",c,yc),document.removeEventListener("touchmove",c,yc),document.removeEventListener("touchstart",d,yc)}},[]);var f=e.removeScrollBar,g=e.inert;return b.createElement(b.Fragment,null,g?b.createElement(i,{styles:sG(a)}):null,f?b.createElement(YK,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function oG(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const lG=$K(z$,iG);var Ex=b.forwardRef(function(e,t){return b.createElement(Tx,Na({},e,{ref:t,sideCar:lG}))});Ex.classNames=Tx.classNames;var Yb=["Enter"," "],cG=["ArrowDown","PageUp","Home"],H$=["ArrowUp","PageDown","End"],uG=[...cG,...H$],dG={ltr:[...Yb,"ArrowRight"],rtl:[...Yb,"ArrowLeft"]},hG={ltr:["ArrowLeft"],rtl:["ArrowRight"]},bf="Menu",[xm,mG,fG]=gx(bf),[sc,K$]=Kr(bf,[fG,bd,kx]),Ox=bd(),G$=kx(),[pG,ac]=sc(bf),[gG,wf]=sc(bf),Y$=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:a,onOpenChange:i,modal:o=!0}=e,l=Ox(t),[c,u]=b.useState(null),d=b.useRef(!1),h=Ar(i),m=Px(a);return b.useEffect(()=>{const f=()=>{d.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>d.current=!1;return document.addEventListener("keydown",f,{capture:!0}),()=>{document.removeEventListener("keydown",f,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),s.jsx(ZI,{...l,children:s.jsx(pG,{scope:t,open:n,onOpenChange:h,content:c,onContentChange:u,children:s.jsx(gG,{scope:t,onClose:b.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:m,modal:o,children:r})})})};Y$.displayName=bf;var vG="MenuAnchor",bS=b.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=Ox(n);return s.jsx(iS,{...a,...r,ref:t})});bS.displayName=vG;var wS="MenuPortal",[xG,Q$]=sc(wS,{forceMount:void 0}),X$=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:a}=e,i=ac(wS,t);return s.jsx(xG,{scope:t,forceMount:n,children:s.jsx(Es,{present:n||i.open,children:s.jsx(ff,{asChild:!0,container:a,children:r})})})};X$.displayName=wS;var Cs="MenuContent",[yG,NS]=sc(Cs),J$=b.forwardRef((e,t)=>{const n=Q$(Cs,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=ac(Cs,e.__scopeMenu),o=wf(Cs,e.__scopeMenu);return s.jsx(xm.Provider,{scope:e.__scopeMenu,children:s.jsx(Es,{present:r||i.open,children:s.jsx(xm.Slot,{scope:e.__scopeMenu,children:o.modal?s.jsx(jG,{...a,ref:t}):s.jsx(bG,{...a,ref:t})})})})}),jG=b.forwardRef((e,t)=>{const n=ac(Cs,e.__scopeMenu),r=b.useRef(null),a=pt(t,r);return b.useEffect(()=>{const i=r.current;if(i)return jS(i)},[]),s.jsx(SS,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ke(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),bG=b.forwardRef((e,t)=>{const n=ac(Cs,e.__scopeMenu);return s.jsx(SS,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),wG=Fl("MenuContent.ScrollLock"),SS=b.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:f,disableOutsideScroll:g,...p}=e,v=ac(Cs,n),x=wf(Cs,n),y=Ox(n),j=G$(n),w=mG(n),[N,_]=b.useState(null),S=b.useRef(null),C=pt(t,S,v.onContentChange),A=b.useRef(0),T=b.useRef(""),E=b.useRef(0),k=b.useRef(null),R=b.useRef("right"),I=b.useRef(0),W=g?Ex:b.Fragment,V=g?{as:wG,allowPinchZoom:!0}:void 0,q=O=>{var ce,se;const B=T.current+O,U=w().filter(ae=>!ae.disabled),X=document.activeElement,ie=(ce=U.find(ae=>ae.ref.current===X))==null?void 0:ce.textValue,re=U.map(ae=>ae.textValue),de=MG(re,B,ie),pe=(se=U.find(ae=>ae.textValue===de))==null?void 0:se.ref.current;(function ae(le){T.current=le,window.clearTimeout(A.current),le!==""&&(A.current=window.setTimeout(()=>ae(""),1e3))})(B),pe&&setTimeout(()=>pe.focus())};b.useEffect(()=>()=>window.clearTimeout(A.current),[]),yS();const P=b.useCallback(O=>{var U,X;return R.current===((U=k.current)==null?void 0:U.side)&&$G(O,(X=k.current)==null?void 0:X.area)},[]);return s.jsx(yG,{scope:n,searchRef:T,onItemEnter:b.useCallback(O=>{P(O)&&O.preventDefault()},[P]),onItemLeave:b.useCallback(O=>{var B;P(O)||((B=S.current)==null||B.focus(),_(null))},[P]),onTriggerLeave:b.useCallback(O=>{P(O)&&O.preventDefault()},[P]),pointerGraceTimerRef:E,onPointerGraceIntentChange:b.useCallback(O=>{k.current=O},[]),children:s.jsx(W,{...V,children:s.jsx(Ax,{asChild:!0,trapped:a,onMountAutoFocus:ke(i,O=>{var B;O.preventDefault(),(B=S.current)==null||B.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:s.jsx(gd,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:f,children:s.jsx($$,{asChild:!0,...j,dir:x.dir,orientation:"vertical",loop:r,currentTabStopId:N,onCurrentTabStopIdChange:_,onEntryFocus:ke(c,O=>{x.isUsingKeyboardRef.current||O.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(oS,{role:"menu","aria-orientation":"vertical","data-state":f4(v.open),"data-radix-menu-content":"",dir:x.dir,...y,...p,ref:C,style:{outline:"none",...p.style},onKeyDown:ke(p.onKeyDown,O=>{const U=O.target.closest("[data-radix-menu-content]")===O.currentTarget,X=O.ctrlKey||O.altKey||O.metaKey,ie=O.key.length===1;U&&(O.key==="Tab"&&O.preventDefault(),!X&&ie&&q(O.key));const re=S.current;if(O.target!==re||!uG.includes(O.key))return;O.preventDefault();const pe=w().filter(ce=>!ce.disabled).map(ce=>ce.ref.current);H$.includes(O.key)&&pe.reverse(),OG(pe)}),onBlur:ke(e.onBlur,O=>{O.currentTarget.contains(O.target)||(window.clearTimeout(A.current),T.current="")}),onPointerMove:ke(e.onPointerMove,ym(O=>{const B=O.target,U=I.current!==O.clientX;if(O.currentTarget.contains(B)&&U){const X=O.clientX>I.current?"right":"left";R.current=X,I.current=O.clientX}}))})})})})})})});J$.displayName=Cs;var NG="MenuGroup",_S=b.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(ze.div,{role:"group",...r,ref:t})});_S.displayName=NG;var SG="MenuLabel",Z$=b.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(ze.div,{...r,ref:t})});Z$.displayName=SG;var Lg="MenuItem",kP="menu.itemSelect",Dx=b.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...a}=e,i=b.useRef(null),o=wf(Lg,e.__scopeMenu),l=NS(Lg,e.__scopeMenu),c=pt(t,i),u=b.useRef(!1),d=()=>{const h=i.current;if(!n&&h){const m=new CustomEvent(kP,{bubbles:!0,cancelable:!0});h.addEventListener(kP,f=>r==null?void 0:r(f),{once:!0}),U1(h,m),m.defaultPrevented?u.current=!1:o.onClose()}};return s.jsx(e4,{...a,ref:c,disabled:n,onClick:ke(e.onClick,d),onPointerDown:h=>{var m;(m=e.onPointerDown)==null||m.call(e,h),u.current=!0},onPointerUp:ke(e.onPointerUp,h=>{var m;u.current||(m=h.currentTarget)==null||m.click()}),onKeyDown:ke(e.onKeyDown,h=>{const m=l.searchRef.current!=="";n||m&&h.key===" "||Yb.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});Dx.displayName=Lg;var e4=b.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...i}=e,o=NS(Lg,n),l=G$(n),c=b.useRef(null),u=pt(t,c),[d,h]=b.useState(!1),[m,f]=b.useState("");return b.useEffect(()=>{const g=c.current;g&&f((g.textContent??"").trim())},[i.children]),s.jsx(xm.ItemSlot,{scope:n,disabled:r,textValue:a??m,children:s.jsx(R$,{asChild:!0,...l,focusable:!r,children:s.jsx(ze.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:u,onPointerMove:ke(e.onPointerMove,ym(g=>{r?o.onItemLeave(g):(o.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ke(e.onPointerLeave,ym(g=>o.onItemLeave(g))),onFocus:ke(e.onFocus,()=>h(!0)),onBlur:ke(e.onBlur,()=>h(!1))})})})}),_G="MenuCheckboxItem",t4=b.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...a}=e;return s.jsx(i4,{scope:e.__scopeMenu,checked:n,children:s.jsx(Dx,{role:"menuitemcheckbox","aria-checked":Bg(n)?"mixed":n,...a,ref:t,"data-state":PS(n),onSelect:ke(a.onSelect,()=>r==null?void 0:r(Bg(n)?!0:!n),{checkForDefaultPrevented:!1})})})});t4.displayName=_G;var n4="MenuRadioGroup",[CG,PG]=sc(n4,{value:void 0,onValueChange:()=>{}}),r4=b.forwardRef((e,t)=>{const{value:n,onValueChange:r,...a}=e,i=Ar(r);return s.jsx(CG,{scope:e.__scopeMenu,value:n,onValueChange:i,children:s.jsx(_S,{...a,ref:t})})});r4.displayName=n4;var s4="MenuRadioItem",a4=b.forwardRef((e,t)=>{const{value:n,...r}=e,a=PG(s4,e.__scopeMenu),i=n===a.value;return s.jsx(i4,{scope:e.__scopeMenu,checked:i,children:s.jsx(Dx,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":PS(i),onSelect:ke(r.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,n)},{checkForDefaultPrevented:!1})})})});a4.displayName=s4;var CS="MenuItemIndicator",[i4,AG]=sc(CS,{checked:!1}),o4=b.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...a}=e,i=AG(CS,n);return s.jsx(Es,{present:r||Bg(i.checked)||i.checked===!0,children:s.jsx(ze.span,{...a,ref:t,"data-state":PS(i.checked)})})});o4.displayName=CS;var kG="MenuSeparator",l4=b.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(ze.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});l4.displayName=kG;var TG="MenuArrow",c4=b.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=Ox(n);return s.jsx(lS,{...a,...r,ref:t})});c4.displayName=TG;var EG="MenuSub",[Yke,u4]=sc(EG),Nh="MenuSubTrigger",d4=b.forwardRef((e,t)=>{const n=ac(Nh,e.__scopeMenu),r=wf(Nh,e.__scopeMenu),a=u4(Nh,e.__scopeMenu),i=NS(Nh,e.__scopeMenu),o=b.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,u={__scopeMenu:e.__scopeMenu},d=b.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return b.useEffect(()=>d,[d]),b.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),s.jsx(bS,{asChild:!0,...u,children:s.jsx(e4,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":f4(n.open),...e,ref:px(t,a.onTriggerChange),onClick:h=>{var m;(m=e.onClick)==null||m.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ke(e.onPointerMove,ym(h=>{i.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:ke(e.onPointerLeave,ym(h=>{var f,g;d();const m=(f=n.content)==null?void 0:f.getBoundingClientRect();if(m){const p=(g=n.content)==null?void 0:g.dataset.side,v=p==="right",x=v?-5:5,y=m[v?"left":"right"],j=m[v?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+x,y:h.clientY},{x:y,y:m.top},{x:j,y:m.top},{x:j,y:m.bottom},{x:y,y:m.bottom}],side:p}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:ke(e.onKeyDown,h=>{var f;const m=i.searchRef.current!=="";e.disabled||m&&h.key===" "||dG[r.dir].includes(h.key)&&(n.onOpenChange(!0),(f=n.content)==null||f.focus(),h.preventDefault())})})})});d4.displayName=Nh;var h4="MenuSubContent",m4=b.forwardRef((e,t)=>{const n=Q$(Cs,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=ac(Cs,e.__scopeMenu),o=wf(Cs,e.__scopeMenu),l=u4(h4,e.__scopeMenu),c=b.useRef(null),u=pt(t,c);return s.jsx(xm.Provider,{scope:e.__scopeMenu,children:s.jsx(Es,{present:r||i.open,children:s.jsx(xm.Slot,{scope:e.__scopeMenu,children:s.jsx(SS,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:ke(e.onFocusOutside,d=>{d.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:ke(e.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:ke(e.onKeyDown,d=>{var f;const h=d.currentTarget.contains(d.target),m=hG[o.dir].includes(d.key);h&&m&&(i.onOpenChange(!1),(f=l.trigger)==null||f.focus(),d.preventDefault())})})})})})});m4.displayName=h4;function f4(e){return e?"open":"closed"}function Bg(e){return e==="indeterminate"}function PS(e){return Bg(e)?"indeterminate":e?"checked":"unchecked"}function OG(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function DG(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function MG(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=DG(e,Math.max(i,0));a.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function IG(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],u=l.x,d=l.y,h=c.x,m=c.y;d>r!=m>r&&n<(h-u)*(r-d)/(m-d)+u&&(a=!a)}return a}function $G(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return IG(n,t)}function ym(e){return t=>t.pointerType==="mouse"?e(t):void 0}var RG=Y$,FG=bS,LG=X$,BG=J$,zG=_S,VG=Z$,qG=Dx,UG=t4,WG=r4,HG=a4,KG=o4,GG=l4,YG=c4,QG=d4,XG=m4,Mx="DropdownMenu",[JG,Qke]=Kr(Mx,[K$]),Or=K$(),[ZG,p4]=JG(Mx),g4=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:a,defaultOpen:i,onOpenChange:o,modal:l=!0}=e,c=Or(t),u=b.useRef(null),[d,h]=bi({prop:a,defaultProp:i??!1,onChange:o,caller:Mx});return s.jsx(ZG,{scope:t,triggerId:Ma(),triggerRef:u,contentId:Ma(),open:d,onOpenChange:h,onOpenToggle:b.useCallback(()=>h(m=>!m),[h]),modal:l,children:s.jsx(RG,{...c,open:d,onOpenChange:h,dir:r,modal:l,children:n})})};g4.displayName=Mx;var v4="DropdownMenuTrigger",x4=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...a}=e,i=p4(v4,n),o=Or(n);return s.jsx(FG,{asChild:!0,...o,children:s.jsx(ze.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:px(t,i.triggerRef),onPointerDown:ke(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:ke(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});x4.displayName=v4;var eY="DropdownMenuPortal",y4=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Or(t);return s.jsx(LG,{...r,...n})};y4.displayName=eY;var j4="DropdownMenuContent",b4=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=p4(j4,n),i=Or(n),o=b.useRef(!1);return s.jsx(BG,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...r,ref:t,onCloseAutoFocus:ke(e.onCloseAutoFocus,l=>{var c;o.current||(c=a.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:ke(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!a.modal||d)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});b4.displayName=j4;var tY="DropdownMenuGroup",nY=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Or(n);return s.jsx(zG,{...a,...r,ref:t})});nY.displayName=tY;var rY="DropdownMenuLabel",w4=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Or(n);return s.jsx(VG,{...a,...r,ref:t})});w4.displayName=rY;var sY="DropdownMenuItem",N4=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Or(n);return s.jsx(qG,{...a,...r,ref:t})});N4.displayName=sY;var aY="DropdownMenuCheckboxItem",S4=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Or(n);return s.jsx(UG,{...a,...r,ref:t})});S4.displayName=aY;var iY="DropdownMenuRadioGroup",oY=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Or(n);return s.jsx(WG,{...a,...r,ref:t})});oY.displayName=iY;var lY="DropdownMenuRadioItem",_4=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Or(n);return s.jsx(HG,{...a,...r,ref:t})});_4.displayName=lY;var cY="DropdownMenuItemIndicator",C4=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Or(n);return s.jsx(KG,{...a,...r,ref:t})});C4.displayName=cY;var uY="DropdownMenuSeparator",P4=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Or(n);return s.jsx(GG,{...a,...r,ref:t})});P4.displayName=uY;var dY="DropdownMenuArrow",hY=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Or(n);return s.jsx(YG,{...a,...r,ref:t})});hY.displayName=dY;var mY="DropdownMenuSubTrigger",A4=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Or(n);return s.jsx(QG,{...a,...r,ref:t})});A4.displayName=mY;var fY="DropdownMenuSubContent",k4=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Or(n);return s.jsx(XG,{...a,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});k4.displayName=fY;var pY=g4,gY=x4,vY=y4,T4=b4,E4=w4,O4=N4,D4=S4,M4=_4,I4=C4,$4=P4,R4=A4,F4=k4;const xY=pY,yY=gY,jY=b.forwardRef(({className:e,inset:t,children:n,...r},a)=>s.jsxs(R4,{ref:a,className:De("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[n,s.jsx(oU,{className:"ml-auto h-4 w-4"})]}));jY.displayName=R4.displayName;const bY=b.forwardRef(({className:e,...t},n)=>s.jsx(F4,{ref:n,className:De("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));bY.displayName=F4.displayName;const L4=b.forwardRef(({className:e,sideOffset:t=4,...n},r)=>s.jsx(vY,{children:s.jsx(T4,{ref:r,sideOffset:t,className:De("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));L4.displayName=T4.displayName;const Qb=b.forwardRef(({className:e,inset:t,...n},r)=>s.jsx(O4,{ref:r,className:De("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));Qb.displayName=O4.displayName;const wY=b.forwardRef(({className:e,children:t,checked:n,...r},a)=>s.jsxs(D4,{ref:a,className:De("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(I4,{children:s.jsx(G1,{className:"h-4 w-4"})})}),t]}));wY.displayName=D4.displayName;const NY=b.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(M4,{ref:r,className:De("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(I4,{children:s.jsx(cU,{className:"h-2 w-2 fill-current"})})}),t]}));NY.displayName=M4.displayName;const B4=b.forwardRef(({className:e,inset:t,...n},r)=>s.jsx(E4,{ref:r,className:De("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));B4.displayName=E4.displayName;const Xb=b.forwardRef(({className:e,...t},n)=>s.jsx($4,{ref:n,className:De("-mx-1 my-1 h-px bg-muted",e),...t}));Xb.displayName=$4.displayName;var z4={exports:{}},V4={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $u=b;function SY(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _Y=typeof Object.is=="function"?Object.is:SY,CY=$u.useState,PY=$u.useEffect,AY=$u.useLayoutEffect,kY=$u.useDebugValue;function TY(e,t){var n=t(),r=CY({inst:{value:n,getSnapshot:t}}),a=r[0].inst,i=r[1];return AY(function(){a.value=n,a.getSnapshot=t,R0(a)&&i({inst:a})},[e,n,t]),PY(function(){return R0(a)&&i({inst:a}),e(function(){R0(a)&&i({inst:a})})},[e]),kY(n),n}function R0(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!_Y(e,n)}catch{return!0}}function EY(e,t){return t()}var OY=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?EY:TY;V4.useSyncExternalStore=$u.useSyncExternalStore!==void 0?$u.useSyncExternalStore:OY;z4.exports=V4;var DY=z4.exports;function MY(){return DY.useSyncExternalStore(IY,()=>!0,()=>!1)}function IY(){return()=>{}}var AS="Avatar",[$Y,Xke]=Kr(AS),[RY,q4]=$Y(AS),U4=b.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[a,i]=b.useState("idle");return s.jsx(RY,{scope:n,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:s.jsx(ze.span,{...r,ref:t})})});U4.displayName=AS;var W4="AvatarImage",H4=b.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:a=()=>{},...i}=e,o=q4(W4,n),l=FY(r,i),c=Ar(u=>{a(u),o.onImageLoadingStatusChange(u)});return _n(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?s.jsx(ze.img,{...i,ref:t,src:r}):null});H4.displayName=W4;var K4="AvatarFallback",G4=b.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...a}=e,i=q4(K4,n),[o,l]=b.useState(r===void 0);return b.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&i.imageLoadingStatus!=="loaded"?s.jsx(ze.span,{...a,ref:t}):null});G4.displayName=K4;function TP(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function FY(e,{referrerPolicy:t,crossOrigin:n}){const r=MY(),a=b.useRef(null),i=r?(a.current||(a.current=new window.Image),a.current):null,[o,l]=b.useState(()=>TP(i,e));return _n(()=>{l(TP(i,e))},[i,e]),_n(()=>{const c=h=>()=>{l(h)};if(!i)return;const u=c("loaded"),d=c("error");return i.addEventListener("load",u),i.addEventListener("error",d),t&&(i.referrerPolicy=t),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",u),i.removeEventListener("error",d)}},[i,n,t]),o}var Y4=U4,Q4=H4,X4=G4;const Zn=b.forwardRef(({className:e,...t},n)=>s.jsx(Y4,{ref:n,className:De("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));Zn.displayName=Y4.displayName;const Ru=b.forwardRef(({className:e,...t},n)=>s.jsx(Q4,{ref:n,className:De("aspect-square h-full w-full",e),...t}));Ru.displayName=Q4.displayName;const er=b.forwardRef(({className:e,...t},n)=>s.jsx(X4,{ref:n,className:De("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));er.displayName=X4.displayName;const LY="modulepreload",BY=function(e){return"/"+e},EP={},Nf=function(t,n,r){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(n.map(c=>{if(c=BY(c),c in EP)return;EP[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":LY,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((m,f)=>{h.addEventListener("load",m),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},zY=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Nf(async()=>{const{default:r}=await Promise.resolve().then(()=>Cd);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class kS extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class VY extends kS{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class OP extends kS{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class DP extends kS{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Jb;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Jb||(Jb={}));var qY=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class UY{constructor(t,{headers:n={},customFetch:r,region:a=Jb.Any}={}){this.url=t,this.headers=n,this.region=a,this.fetch=zY(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return qY(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:o}=n;let l={},{region:c}=n;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const h=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:d}).catch(p=>{throw new VY(p)}),m=h.headers.get("x-relay-error");if(m&&m==="true")throw new OP(h);if(!h.ok)throw new DP(h);let f=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return f==="application/json"?g=yield h.json():f==="application/octet-stream"?g=yield h.blob():f==="text/event-stream"?g=h:f==="multipart/form-data"?g=yield h.formData():g=yield h.text(),{data:g,error:null,response:h}}catch(a){return{data:null,error:a,response:a instanceof DP||a instanceof OP?a.context:void 0}}})}}var zr={},TS={},Ix={},Sf={},$x={},Rx={},WY=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Fu=WY();const HY=Fu.fetch,J4=Fu.fetch.bind(Fu),Z4=Fu.Headers,KY=Fu.Request,GY=Fu.Response,Cd=Object.freeze(Object.defineProperty({__proto__:null,Headers:Z4,Request:KY,Response:GY,default:J4,fetch:HY},Symbol.toStringTag,{value:"Module"})),YY=OB(Cd);var Fx={};Object.defineProperty(Fx,"__esModule",{value:!0});let QY=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Fx.default=QY;var eR=dr&&dr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Rx,"__esModule",{value:!0});const XY=eR(YY),JY=eR(Fx);let ZY=class{constructor(t){var n,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(n=t.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=XY.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=new Headers(this.headers),this.headers.set(t,n),this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let a=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c,u;let d=null,h=null,m=null,f=i.status,g=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=y:h=JSON.parse(y))}const v=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),x=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");v&&x&&x.length>1&&(m=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,m=null,f=406,g="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const v=await i.text();try{d=JSON.parse(v),Array.isArray(d)&&i.status===404&&(h=[],d=null,f=200,g="OK")}catch{i.status===404&&v===""?(f=204,g="No Content"):d={message:v}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,f=200,g="OK"),d&&this.shouldThrowOnError)throw new JY.default(d)}return{error:d,data:h,count:m,status:f,statusText:g}});return this.shouldThrowOnError||(a=a.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,n)}returns(){return this}overrideTypes(){return this}};Rx.default=ZY;var eQ=dr&&dr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($x,"__esModule",{value:!0});const tQ=eQ(Rx);let nQ=class extends tQ.default{select(t){let n=!1;const r=(t??"*").split("").map(a=>/\s/.test(a)&&!n?"":(a==='"'&&(n=!n),a)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:a,referencedTable:i=a}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:a=r}={}){const i=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:a=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};$x.default=nQ;var rQ=dr&&dr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Sf,"__esModule",{value:!0});const sQ=rQ($x);let aQ=class extends sQ.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${o}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const a=r?`${r}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};Sf.default=aQ;var iQ=dr&&dr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ix,"__esModule",{value:!0});const rh=iQ(Sf);let oQ=class{constructor(t,{headers:n={},schema:r,fetch:a}){this.url=t,this.headers=new Headers(n),this.schema=r,this.fetch=a}select(t,{head:n=!1,count:r}={}){const a=n?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new rh.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:n,defaultToNull:r=!0}={}){var a;const i="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new rh.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:a,defaultToNull:i=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),a&&this.headers.append("Prefer",`count=${a}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new rh.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:n}={}){var r;const a="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new rh.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var n;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new rh.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};Ix.default=oQ;var tR=dr&&dr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(TS,"__esModule",{value:!0});const lQ=tR(Ix),cQ=tR(Sf);let uQ=class nR{constructor(t,{headers:n={},schema:r,fetch:a}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=a}from(t){const n=new URL(`${this.url}/${t}`);return new lQ.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new nR(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:a=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;r||a?(l=r?"HEAD":"GET",Object.entries(n).filter(([h,m])=>m!==void 0).map(([h,m])=>[h,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([h,m])=>{c.searchParams.append(h,m)})):(l="POST",u=n);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new cQ.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};TS.default=uQ;var Pd=dr&&dr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zr,"__esModule",{value:!0});zr.PostgrestError=zr.PostgrestBuilder=zr.PostgrestTransformBuilder=zr.PostgrestFilterBuilder=zr.PostgrestQueryBuilder=zr.PostgrestClient=void 0;const rR=Pd(TS);zr.PostgrestClient=rR.default;const sR=Pd(Ix);zr.PostgrestQueryBuilder=sR.default;const aR=Pd(Sf);zr.PostgrestFilterBuilder=aR.default;const iR=Pd($x);zr.PostgrestTransformBuilder=iR.default;const oR=Pd(Rx);zr.PostgrestBuilder=oR.default;const lR=Pd(Fx);zr.PostgrestError=lR.default;var dQ=zr.default={PostgrestClient:rR.default,PostgrestQueryBuilder:sR.default,PostgrestFilterBuilder:aR.default,PostgrestTransformBuilder:iR.default,PostgrestBuilder:oR.default,PostgrestError:lR.default};const{PostgrestClient:hQ,PostgrestQueryBuilder:rTe,PostgrestFilterBuilder:sTe,PostgrestTransformBuilder:aTe,PostgrestBuilder:iTe,PostgrestError:oTe}=dQ;class mQ{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,a=parseInt(r.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const fQ="2.15.5",pQ=`realtime-js/${fQ}`,gQ="1.0.0",Zb=1e4,vQ=1e3,xQ=100;var Fh;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Fh||(Fh={}));var kn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(kn||(kn={}));var Ws;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ws||(Ws={}));var ew;(function(e){e.websocket="websocket"})(ew||(ew={}));var ol;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ol||(ol={}));class yQ{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const a=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(t.slice(o,o+a));o=o+a;const c=r.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class cR{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Vt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Vt||(Vt={}));const MP=(e,t,n={})=>{var r;const a=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((i,o)=>(i[o]=jQ(o,e,t,a),i),{})},jQ=(e,t,n,r)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,o=n[e];return i&&!r.includes(i)?uR(i,o):tw(o)},uR=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return SQ(t,n)}switch(e){case Vt.bool:return bQ(t);case Vt.float4:case Vt.float8:case Vt.int2:case Vt.int4:case Vt.int8:case Vt.numeric:case Vt.oid:return wQ(t);case Vt.json:case Vt.jsonb:return NQ(t);case Vt.timestamp:return _Q(t);case Vt.abstime:case Vt.date:case Vt.daterange:case Vt.int4range:case Vt.int8range:case Vt.money:case Vt.reltime:case Vt.text:case Vt.time:case Vt.timestamptz:case Vt.timetz:case Vt.tsrange:case Vt.tstzrange:return tw(t);default:return tw(t)}},tw=e=>e,bQ=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},wQ=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},NQ=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},SQ=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const o=e.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>uR(t,l))}return e},_Q=e=>typeof e=="string"?e.replace(" ","T"):e,dR=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class F0{constructor(t,n,r={},a=Zb){this.channel=t,this.event=n,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var IP;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(IP||(IP={}));class Lh{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Lh.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=Lh.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Lh.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,a){const i=this.cloneDeep(t),o=this.transformState(n),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const m=d.map(v=>v.presence_ref),f=h.map(v=>v.presence_ref),g=d.filter(v=>f.indexOf(v.presence_ref)<0),p=h.filter(v=>m.indexOf(v.presence_ref)<0);g.length>0&&(l[u]=g),p.length>0&&(c[u]=p)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},r,a)}static syncDiff(t,n,r,a){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(f=>f.presence_ref),m=d.filter(f=>h.indexOf(f.presence_ref)<0);t[l].unshift(...m)}r(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,a(l,u,c),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const a=t[r];return"metas"in a?n[r]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=a,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var $P;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})($P||($P={}));var Bh;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Bh||(Bh={}));var Za;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Za||(Za={}));class ES{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=kn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new F0(this,Ws.join,this.params,this.timeout),this.rejoinTimer=new cR(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=kn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=kn.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=kn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=kn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=kn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ws.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new Lh(this),this.broadcastEndpointURL=dR(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==kn.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&a!==void 0?a:[],d=!!this.bindings[Bh.PRESENCE]&&this.bindings[Bh.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},m={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(f=>t==null?void 0:t(Za.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(Za.CLOSED)),this.updateJoinPayload(Object.assign({config:m},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:f})=>{var g;if(this.socket.setAuth(),f===void 0){t==null||t(Za.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,v=(g=p==null?void 0:p.length)!==null&&g!==void 0?g:0,x=[];for(let y=0;y<v;y++){const j=p[y],{filter:{event:w,schema:N,table:_,filter:S}}=j,C=f&&f[y];if(C&&C.event===w&&C.schema===N&&C.table===_&&C.filter===S)x.push(Object.assign(Object.assign({},j),{id:C.id}));else{this.unsubscribe(),this.state=kn.errored,t==null||t(Za.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(Za.SUBSCRIBED);return}}).receive("error",f=>{this.state=kn.errored,t==null||t(Za.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Za.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===kn.joined&&t===Bh.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,a;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=kn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ws.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(a=>{r=new F0(this,Ws.leave,{},t),r.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=kn.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const a=new AbortController,i=setTimeout(()=>a.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(i),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new F0(this,t,n,r);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>xQ){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Ws;if(r&&[l,c,u,d].indexOf(o)>=0&&r!==this._joinRef())return;let m=this._onMessage(o,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(f=>{var g,p,v;return((g=f.filter)===null||g===void 0?void 0:g.event)==="*"||((v=(p=f.filter)===null||p===void 0?void 0:p.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(f=>f.callback(m,r)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var g,p,v,x,y,j;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const w=f.id,N=(g=f.filter)===null||g===void 0?void 0:g.event;return w&&((p=n.ids)===null||p===void 0?void 0:p.includes(w))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((v=n.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const w=(y=(x=f==null?void 0:f.filter)===null||x===void 0?void 0:x.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return w==="*"||w===((j=n==null?void 0:n.event)===null||j===void 0?void 0:j.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof m=="object"&&"ids"in m){const g=m.data,{schema:p,table:v,commit_timestamp:x,type:y,errors:j}=g;m=Object.assign(Object.assign({},{schema:p,table:v,commit_timestamp:x,eventType:y,new:{},old:{},errors:j}),this._getPayloadRecords(g))}f.callback(m,r)})}_isClosed(){return this.state===kn.closed}_isJoined(){return this.state===kn.joined}_isJoining(){return this.state===kn.joining}_isLeaving(){return this.state===kn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const a=t.toLocaleLowerCase(),i={type:a,filter:n,callback:r};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&ES.isEqual(a.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ws.close,{},t)}_onError(t){this._on(Ws.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=kn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=MP(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=MP(t.columns,t.old_record)),n}}const L0=()=>{},dp={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},CQ=[1e3,2e3,5e3,1e4],PQ=1e4,AQ=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class kQ{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Zb,this.transport=null,this.heartbeatIntervalMs=dp.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=L0,this.ref=0,this.reconnectTimer=null,this.logger=L0,this.conn=null,this.sendBuffer=[],this.serializer=new yQ,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let i;return a?i=a:typeof fetch>"u"?i=(...o)=>Nf(async()=>{const{default:l}=await Promise.resolve().then(()=>Cd);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${ew.websocket}`,this.httpEndpoint=dR(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=mQ.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:gQ}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Fh.connecting:return ol.Connecting;case Fh.open:return ol.Open;case Fh.closing:return ol.Closing;default:return ol.Closed}}isConnected(){return this.connectionState()===ol.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===r);if(a)return a;{const i=new ES(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(vQ,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},dp.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:a,payload:i,ref:o}=n,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${a} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(a,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ws.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${t}${r}${a}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([AQ],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const a={access_token:n,version:pQ};n&&r.updateJoinPayload(a),r.joinedOnce&&r._isJoined()&&r._push(Ws.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new cR(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},dp.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,a,i,o,l,c,u,d;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Zb,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:dp.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:L0,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:h=>CQ[h-1]||PQ,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(h,m)=>m(JSON.stringify(h)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class OS extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Tn(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class TQ extends OS{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class nw extends OS{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var EQ=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const hR=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Nf(async()=>{const{default:r}=await Promise.resolve().then(()=>Cd);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},OQ=()=>EQ(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Nf(()=>Promise.resolve().then(()=>Cd),void 0)).Response:Response}),rw=e=>{if(Array.isArray(e))return e.map(n=>rw(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const a=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=rw(r)}),t},DQ=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var ic=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const B0=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),MQ=(e,t,n)=>ic(void 0,void 0,void 0,function*(){const r=yield OQ();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(a=>{const i=e.status||500,o=(a==null?void 0:a.statusCode)||i+"";t(new TQ(B0(a),i,o))}).catch(a=>{t(new nw(B0(a),a))}):t(new nw(B0(e),e))}),IQ=(e,t,n,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?a:(DQ(r)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(r)):a.body=r,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),n))};function _f(e,t,n,r,a,i){return ic(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(n,IQ(t,r,a,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>MQ(c,l,r))})})}function zg(e,t,n,r){return ic(this,void 0,void 0,function*(){return _f(e,"GET",t,n,r)})}function xa(e,t,n,r,a){return ic(this,void 0,void 0,function*(){return _f(e,"POST",t,r,a,n)})}function sw(e,t,n,r,a){return ic(this,void 0,void 0,function*(){return _f(e,"PUT",t,r,a,n)})}function $Q(e,t,n,r){return ic(this,void 0,void 0,function*(){return _f(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function mR(e,t,n,r,a){return ic(this,void 0,void 0,function*(){return _f(e,"DELETE",t,r,a,n)})}var pr=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const RQ={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},RP={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class FQ{constructor(t,n={},r,a){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=hR(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,a){return pr(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},RP),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),h=yield(t=="PUT"?sw:xa)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Tn(i))return{data:null,error:i};throw i}})}upload(t,n,r){return pr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,a){return pr(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:RP.upsert},a),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield sw(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Tn(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return pr(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const a=Object.assign({},this.headers);n!=null&&n.upsert&&(a["x-upsert"]="true");const i=yield xa(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new OS("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tn(r))return{data:null,error:r};throw r}})}update(t,n,r){return pr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return pr(this,void 0,void 0,function*(){try{return{data:yield xa(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Tn(a))return{data:null,error:a};throw a}})}copy(t,n,r){return pr(this,void 0,void 0,function*(){try{return{data:{path:(yield xa(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Tn(a))return{data:null,error:a};throw a}})}createSignedUrl(t,n,r){return pr(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield xa(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Tn(a))return{data:null,error:a};throw a}})}createSignedUrls(t,n,r){return pr(this,void 0,void 0,function*(){try{const a=yield xa(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Tn(a))return{data:null,error:a};throw a}})}download(t,n){return pr(this,void 0,void 0,function*(){const a=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield zg(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Tn(l))return{data:null,error:l};throw l}})}info(t){return pr(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield zg(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:rw(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tn(r))return{data:null,error:r};throw r}})}exists(t){return pr(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield $Q(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tn(r)&&r instanceof nw){const a=r.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),a=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&a.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&a.push(c);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(t){return pr(this,void 0,void 0,function*(){try{return{data:yield mR(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Tn(n))return{data:null,error:n};throw n}})}list(t,n,r){return pr(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},RQ),n),{prefix:t||""});return{data:yield xa(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Tn(a))return{data:null,error:a};throw a}})}listV2(t,n){return pr(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield xa(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tn(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const LQ="2.12.1",BQ={"X-Client-Info":`storage-js/${LQ}`};var bc=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class zQ{constructor(t,n={},r,a){this.shouldThrowOnError=!1;const i=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},BQ),n),this.fetch=hR(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return bc(this,void 0,void 0,function*(){try{return{data:yield zg(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Tn(t))return{data:null,error:t};throw t}})}getBucket(t){return bc(this,void 0,void 0,function*(){try{return{data:yield zg(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Tn(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return bc(this,void 0,void 0,function*(){try{return{data:yield xa(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tn(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return bc(this,void 0,void 0,function*(){try{return{data:yield sw(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Tn(r))return{data:null,error:r};throw r}})}emptyBucket(t){return bc(this,void 0,void 0,function*(){try{return{data:yield xa(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Tn(n))return{data:null,error:n};throw n}})}deleteBucket(t){return bc(this,void 0,void 0,function*(){try{return{data:yield mR(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Tn(n))return{data:null,error:n};throw n}})}}class VQ extends zQ{constructor(t,n={},r,a){super(t,n,r,a)}from(t){return new FQ(this.url,this.headers,t,this.fetch)}}const qQ="2.57.4";let Sh="";typeof Deno<"u"?Sh="deno":typeof document<"u"?Sh="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Sh="react-native":Sh="node";const UQ={"X-Client-Info":`supabase-js-${Sh}/${qQ}`},WQ={headers:UQ},HQ={schema:"public"},KQ={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},GQ={};var YQ=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const QQ=e=>{let t;return e?t=e:typeof fetch>"u"?t=J4:t=fetch,(...n)=>t(...n)},XQ=()=>typeof Headers>"u"?Z4:Headers,JQ=(e,t,n)=>{const r=QQ(n),a=XQ();return(i,o)=>YQ(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new a(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},o),{headers:u}))})};var ZQ=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};function eX(e){return e.endsWith("/")?e:e+"/"}function tX(e,t){var n,r;const{db:a,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,m={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>ZQ(this,void 0,void 0,function*(){return""})};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}function nX(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(eX(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const fR="2.71.1",Oc=30*1e3,aw=3,z0=aw*Oc,rX="http://localhost:9999",sX="supabase.auth.token",aX={"X-Client-Info":`gotrue-js/${fR}`},iw="X-Supabase-Api-Version",pR={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},iX=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,oX=10*60*1e3;class DS extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function st(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class lX extends DS{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function cX(e){return st(e)&&e.name==="AuthApiError"}class gR extends DS{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Bo extends DS{constructor(t,n,r,a){super(t,r,a),this.name=n,this.status=r}}class Wi extends Bo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function uX(e){return st(e)&&e.name==="AuthSessionMissingError"}class hp extends Bo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class mp extends Bo{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class fp extends Bo{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function dX(e){return st(e)&&e.name==="AuthImplicitGrantRedirectError"}class FP extends Bo{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ow extends Bo{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function V0(e){return st(e)&&e.name==="AuthRetryableFetchError"}class LP extends Bo{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class lw extends Bo{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Vg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),BP=` 	
\r=`.split(""),hX=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<BP.length;t+=1)e[BP[t].charCodeAt(0)]=-2;for(let t=0;t<Vg.length;t+=1)e[Vg[t].charCodeAt(0)]=t;return e})();function zP(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Vg[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Vg[r]),t.queuedBits-=6}}function vR(e,t,n){const r=hX[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function VP(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{pX(o,r,n)};for(let o=0;o<e.length;o+=1)vR(e.charCodeAt(o),a,i);return t.join("")}function mX(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function fX(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const a=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}mX(r,t)}}function pX(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function gX(e){const t=[],n={queue:0,queuedBits:0},r=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)vR(e.charCodeAt(a),n,r);return new Uint8Array(t)}function vX(e){const t=[];return fX(e,n=>t.push(n)),new Uint8Array(t)}function xX(e){const t=[],n={queue:0,queuedBits:0},r=a=>{t.push(a)};return e.forEach(a=>zP(a,n,r)),zP(null,n,r),t.join("")}function yX(e){return Math.round(Date.now()/1e3)+e}function jX(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Ls=()=>typeof window<"u"&&typeof document<"u",Yo={tested:!1,writable:!1},xR=()=>{if(!Ls())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Yo.tested)return Yo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Yo.tested=!0,Yo.writable=!0}catch{Yo.tested=!0,Yo.writable=!1}return Yo.writable};function bX(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return n.searchParams.forEach((r,a)=>{t[a]=r}),t}const yR=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Nf(async()=>{const{default:r}=await Promise.resolve().then(()=>Cd);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},wX=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Dc=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Qo=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},zi=async(e,t)=>{await e.removeItem(t)};class Lx{constructor(){this.promise=new Lx.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Lx.promiseConstructor=Promise;function q0(e){const t=e.split(".");if(t.length!==3)throw new lw("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!iX.test(t[r]))throw new lw("JWT not in base64url format");return{header:JSON.parse(VP(t[0])),payload:JSON.parse(VP(t[1])),signature:gX(t[2]),raw:{header:t[0],payload:t[1]}}}async function NX(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function SX(e,t){return new Promise((r,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){r(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function _X(e){return("0"+e.toString(16)).substr(-2)}function CX(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let a="";for(let i=0;i<56;i++)a+=n.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(t),Array.from(t,_X).join("")}async function PX(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(r);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function AX(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await PX(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function wc(e,t,n=!1){const r=CX();let a=r;n&&(a+="/PASSWORD_RECOVERY"),await Dc(e,`${t}-code-verifier`,a);const i=await AX(r);return[i,r===i?"plain":"s256"]}const kX=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function TX(e){const t=e.headers.get(iw);if(!t||!t.match(kX))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function EX(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function OX(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const DX=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Nc(e){if(!DX.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function U0(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function qP(e){return JSON.parse(JSON.stringify(e))}var MX=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};const nl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),IX=[502,503,504];async function UP(e){var t;if(!wX(e))throw new ow(nl(e),0);if(IX.includes(e.status))throw new ow(nl(e),e.status);let n;try{n=await e.json()}catch(i){throw new gR(nl(i),i)}let r;const a=TX(e);if(a&&a.getTime()>=pR["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new LP(nl(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Wi}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new LP(nl(n),e.status,n.weak_password.reasons);throw new lX(nl(n),e.status||500,r)}const $X=(e,t,n,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),n))};async function mt(e,t,n,r){var a;const i=Object.assign({},r==null?void 0:r.headers);i[iw]||(i[iw]=pR["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(a=r==null?void 0:r.query)!==null&&a!==void 0?a:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await RX(e,t,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function RX(e,t,n,r,a,i){const o=$X(t,r,a,i);let l;try{l=await e(n,Object.assign({},o))}catch(c){throw console.error(c),new ow(nl(c),0)}if(l.ok||await UP(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await UP(c)}}function Xa(e){var t;let n=null;zX(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=yX(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function WP(e){const t=Xa(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ji(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function FX(e){return{data:e,error:null}}function LX(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:i}=e,o=MX(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function BX(e){return e}function zX(e){return e.access_token&&e.refresh_token&&e.expires_in}const W0=["global","local","others"];var VX=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};class qX{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=yR(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=W0[0]){if(W0.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${W0.join(", ")}`);try{return await mt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(st(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await mt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ji})}catch(r){if(st(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=VX(t,["options"]),a=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(a.new_email=r==null?void 0:r.newEmail,delete a.newEmail),await mt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:LX,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(st(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await mt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ji})}catch(n){if(st(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,a,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await mt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:BX});if(d.error)throw d.error;const h=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(g=>{const p=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(g.split(";")[1].split("=")[1]);u[`${v}Page`]=p}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(st(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Nc(t);try{return await mt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ji})}catch(n){if(st(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Nc(t);try{return await mt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Ji})}catch(r){if(st(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Nc(t);try{return await mt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ji})}catch(r){if(st(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Nc(t.userId);try{const{data:n,error:r}=await mt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:r}}catch(n){if(st(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Nc(t.userId),Nc(t.id);try{return{data:await mt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(st(n))return{data:null,error:n};throw n}}}function HP(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function UX(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Sc={debug:!!(globalThis&&xR()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class jR extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class WX extends jR{}async function HX(e,t,n){Sc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Sc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){Sc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await n()}finally{Sc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Sc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new WX(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Sc.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}UX();const KX={url:rX,storageKey:sX,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:aX,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function KP(e,t,n){return await n()}const _c={};class jm{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=jm.nextInstanceID,jm.nextInstanceID+=1,this.instanceID>0&&Ls()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},KX),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new qX({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=yR(a.fetch),this.lock=a.lock||KP,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Ls()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=HX:this.lock=KP,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:xR()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=HP(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=HP(this.memoryStorage)),Ls()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=_c[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){_c[this.storageKey]=Object.assign(Object.assign({},_c[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=_c[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){_c[this.storageKey]=Object.assign(Object.assign({},_c[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${fR}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=bX(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Ls()&&this.detectSessionInUrl&&r!=="none"){const{data:a,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),dX(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return st(n)?{error:n}:{error:new gR("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,a;try{const i=await mt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Xa}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(st(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,a;try{let i;if("email"in t){const{email:d,password:h,options:m}=t;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await wc(this.storage,this.storageKey)),i=await mt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:f,code_challenge_method:g},xform:Xa})}else if("phone"in t){const{phone:d,password:h,options:m}=t;i=await mt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(a=m==null?void 0:m.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Xa})}else throw new mp("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(st(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:o,options:l}=t;n=await mt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:WP})}else if("phone"in t){const{phone:i,password:o,options:l}=t;n=await mt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:WP})}else throw new mp("You must provide either an email or phone number and a password");const{data:r,error:a}=n;return a?{data:{user:null,session:null},error:a}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new hp}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(n){if(st(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,a,i,o,l,c,u,d,h,m,f;let g,p;if("message"in t)g=t.message,p=t.signature;else{const{chain:v,wallet:x,statement:y,options:j}=t;let w;if(Ls())if(typeof x=="object")w=x;else{const _=window;if("solana"in _&&typeof _.solana=="object"&&("signIn"in _.solana&&typeof _.solana.signIn=="function"||"signMessage"in _.solana&&typeof _.solana.signMessage=="function"))w=_.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(j!=null&&j.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=x}const N=new URL((n=j==null?void 0:j.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in w&&w.signIn){const _=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},j==null?void 0:j.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),y?{statement:y}:null));let S;if(Array.isArray(_)&&_[0]&&typeof _[0]=="object")S=_[0];else if(_&&typeof _=="object"&&"signedMessage"in _&&"signature"in _)S=_;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)g=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),p=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${N.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(a=(r=j==null?void 0:j.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=j==null?void 0:j.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${j.signInWithSolana.notBefore}`]:[],...!((o=j==null?void 0:j.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${j.signInWithSolana.expirationTime}`]:[],...!((l=j==null?void 0:j.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${j.signInWithSolana.chainId}`]:[],...!((c=j==null?void 0:j.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${j.signInWithSolana.nonce}`]:[],...!((u=j==null?void 0:j.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${j.signInWithSolana.requestId}`]:[],...!((h=(d=j==null?void 0:j.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...j.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const _=await w.signMessage(new TextEncoder().encode(g),"utf8");if(!_||!(_ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=_}}try{const{data:v,error:x}=await mt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:xX(p)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Xa});if(x)throw x;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new hp}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:x})}catch(v){if(st(v))return{data:{user:null,session:null},error:v};throw v}}async _exchangeCodeForSession(t){const n=await Qo(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(n??"").split("/");try{const{data:i,error:o}=await mt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Xa});if(await zi(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new hp}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(st(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:a,access_token:i,nonce:o}=t,l=await mt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Xa}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new hp}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(st(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,a,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await wc(this.storage,this.storageKey));const{error:h}=await mt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await mt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new mp("You must provide either an email or phone number.")}catch(l){if(st(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let a,i;"options"in t&&(a=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await mt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Xa});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(st(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var n,r,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await wc(this.storage,this.storageKey)),await mt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:FX})}catch(i){if(st(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Wi;const{error:a}=await mt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(st(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:a,options:i}=t,{error:o}=await mt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:a,options:i}=t,{data:o,error:l}=await mt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new mp("You must provide either an email or phone number and a type")}catch(n){if(st(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Qo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<z0:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await Qo(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=U0()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await mt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ji}):await this._useSession(async n=>{var r,a,i;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Wi}:await mt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Ji})})}catch(n){if(st(n))return uX(n)&&(await this._removeSession(),await zi(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:a,error:i}=r;if(i)throw i;if(!a.session)throw new Wi;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await wc(this.storage,this.storageKey));const{data:u,error:d}=await mt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Ji});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(st(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Wi;const n=Date.now()/1e3;let r=n,a=!0,i=null;const{payload:o}=q0(t.access_token);if(o.exp&&(r=o.exp,a=r<=n),a){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(st(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:l}=n;if(l)throw l;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Wi;const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(st(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Ls())throw new fp("No browser detected.");if(t.error||t.error_description||t.error_code)throw new fp(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new FP("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new fp("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new FP("No code detected.");const{data:y,error:j}=await this._exchangeCodeForSession(t.code);if(j)throw j;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new fp("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let m=d+h;c&&(m=parseInt(c));const f=m-d;f*1e3<=Oc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const g=m-h;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,m,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,m,d);const{data:p,error:v}=await this._getUser(i);if(v)throw v;const x={provider_token:r,provider_refresh_token:a,access_token:i,expires_in:h,expires_at:m,refresh_token:o,token_type:u,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(r){if(st(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Qo(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:a,error:i}=n;if(i)return{error:i};const o=(r=a.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(cX(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await zi(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=jX(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,a;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await wc(this.storage,this.storageKey,!0));try{return await mt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(st(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(st(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:a}=await this._useSession(async i=>{var o,l,c,u,d;const{data:h,error:m}=i;if(m)throw m;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await mt(this.fetch,"GET",f,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return Ls()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(st(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,a;const{data:i,error:o}=n;if(o)throw o;return await mt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(st(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await SX(async a=>(a>0&&await NX(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await mt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Xa})),(a,i)=>{const o=200*Math.pow(2,a);return i&&V0(i)&&Date.now()+o-r<Oc})}catch(r){if(this._debug(n,"error",r),st(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Ls()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await Qo(this.storage,this.storageKey);if(a&&this.userStorage){let o=await Qo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await Dc(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:U0()}else if(a&&!a.user&&!a.user){const o=await Qo(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await zi(this.storage,this.storageKey+"-user"),await Dc(this.storage,this.storageKey,a)):a.user=U0()}if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const i=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<z0;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${z0}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),V0(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Wi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Lx;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Wi;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),st(i)){const o={session:null,error:i};return V0(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,n,r=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Dc(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const i=qP(a);await Dc(this.storage,this.storageKey,i)}else{const a=qP(n);await Dc(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await zi(this.storage,this.storageKey),await zi(this.storage,this.storageKey+"-code-verifier"),await zi(this.storage,this.storageKey+"-user"),this.userStorage&&await zi(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ls()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Oc);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-t)/Oc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Oc}ms, refresh threshold is ${aw} ticks`),a<=aw&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof jR)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ls()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const a=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await wc(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);a.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:a,error:i}=n;return i?{data:null,error:i}:await mt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(st(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,a;const{data:i,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await mt(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(st(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:l}=await mt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(n){if(st(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:i}=n;return i?{data:null,error:i}:await mt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(st(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],a=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:a},error:i}=t;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=q0(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((r=(n=a.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const a=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+oX>a)return r;const{data:i,error:o}=await mt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,r=i.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:f,error:g}=await this.getSession();if(g||!f.session)return{data:null,error:g};r=f.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=q0(r);n!=null&&n.allowExpired||EX(i.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:i,header:a,signature:o},error:null}}const d=OX(a.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,vX(`${l}.${c}`)))throw new lw("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(r){if(st(r))return{data:null,error:r};throw r}}}jm.nextInstanceID=0;const GX=jm;class YX extends GX{constructor(t){super(t)}}var QX=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class XX{constructor(t,n,r){var a,i,o;this.supabaseUrl=t,this.supabaseKey=n;const l=nX(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:HQ,realtime:GQ,auth:Object.assign(Object.assign({},KQ),{storageKey:c}),global:WQ},d=tX(r??{},u);this.storageKey=(a=d.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=JQ(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new hQ(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new VQ(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new UY(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return QX(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:a,userStorage:i,storageKey:o,flowType:l,lock:c,debug:u},d,h){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new YX({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),d),storageKey:o,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:a,userStorage:i,flowType:l,lock:c,debug:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>f.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new kQ(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const JX=(e,t,n)=>new XX(e,t,n);function ZX(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}ZX()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const bR="https://fqmeqckchbppabetefuk.supabase.co",eJ="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZxbWVxY2tjaGJwcGFiZXRlZnVrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY2NzUzODYsImV4cCI6MjA3MjI1MTM4Nn0.MkyVvQVmqUXShrHXHTpHib0Dyq39ZB47KhGZZgBlF-o",Re=JX(bR,eJ,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),wR=async()=>{const{data:{user:e},error:t}=await Re.auth.getUser();if(t)throw t;return e},Bx=async()=>{const e=await wR();if(!e)return null;const{data:t,error:n}=await Re.from("user_profiles").select("*").eq("id",e.id).single();if(n)throw n;return t},tJ=async(e,t,n,r,a="assistant")=>{const{data:i,error:o}=await Re.auth.signUp({email:e,password:t,options:{data:{username:n,full_name:r,role:a}}});if(o)throw o;return i},nJ=async()=>{const{error:e}=await Re.auth.signOut();if(e)throw e;try{localStorage.removeItem("supabase.auth.token"),localStorage.removeItem("sb-"+bR.split("//")[1].split(".")[0]+"-auth-token"),document.cookie.split(";").forEach(t=>{document.cookie=t.replace(/^ +/,"").replace(/=.*/,"=;expires="+new Date().toUTCString()+";path=/")})}catch(t){console.warn("Error clearing auth storage:",t)}},rJ=async e=>{const t=await wR();if(!t)throw new Error("No authenticated user");const{data:n,error:r}=await Re.from("user_profiles").select("*").eq("id",t.id).single();n||await NR(t);const a=Object.entries({...e,updated_at:new Date().toISOString()}).reduce((l,[c,u])=>(u!=null&&u!==""&&(l[c]=u),l),{}),{data:i,error:o}=await Re.from("user_profiles").update(a).eq("id",t.id).select().single();if(o){const l=t.user_metadata||{},c=l.full_name||l.name||"",u=(n==null?void 0:n.username)||l.username||t.email.split("@")[0],d=(n==null?void 0:n.role)||l.role||"assistant",h={id:t.id,email:t.email,username:u,full_name:c,role:d,...a},{data:m,error:f}=await Re.from("user_profiles").upsert(h).select().single();if(f)throw new Error(`Profile update failed: ${f.message}`);return m}return i},NR=async e=>{const t=await Bx();if(t)return t;const n=e.user_metadata||{},r=n.full_name||n.name||"",a=n.username||e.email.split("@")[0],i=n.role||"assistant",{data:o,error:l}=await Re.from("user_profiles").insert({id:e.id,email:e.email,username:a,full_name:r,role:i}).select().single();if(l)throw l;return o},sJ=async e=>{const{data:t,error:n}=await Re.auth.resetPasswordForEmail(e,{redirectTo:"https://vetoapp-six.vercel.app//reset-password"});if(n)throw n;return t},Xs={all:["auth"],session:()=>[...Xs.all,"session"]},aJ=async()=>{try{const{data:{session:e},error:t}=await Re.auth.getSession();if(t||!(e!=null&&e.user))return null;let n=null;try{n=await Bx()}catch{try{n=await NR(e.user)}catch(a){console.error("Failed to create user profile:",a);const i=e.user.user_metadata||{},o=i.full_name||i.name||"",l=i.username||e.user.email.split("@")[0];n={id:e.user.id,email:e.user.email,username:l,full_name:o,role:"assistant",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),avatar_url:i.avatar_url||i.picture||null}}}return n?{id:e.user.id,email:e.user.email,profile:n}:null}catch{return null}},iJ=()=>Er({queryKey:Xs.session(),queryFn:aJ,staleTime:5*60*1e3,gcTime:10*60*1e3,retry:!1,refetchOnWindowFocus:!1,refetchOnMount:"always",refetchOnReconnect:!1,networkMode:"offlineFirst"}),SR=()=>{const e=Dt();return Rt({mutationFn:async({email:t,password:n})=>{const{data:r,error:a}=await Re.auth.signInWithPassword({email:t,password:n});if(a){const o={"Invalid login credentials":"Email ou mot de passe incorrect","Email not confirmed":"Veuillez confirmer votre email avant de vous connecter","Too many requests":"Trop de tentatives de connexion. Veuillez réessayer plus tard"}[a.message]||a.message;throw new Error(o)}if(!r.user||!r.session)throw new Error("Échec de connexion - session invalide");return r.user},onSuccess:async()=>{await new Promise(t=>setTimeout(t,100)),e.refetchQueries({queryKey:Xs.session()})},onError:()=>{e.setQueryData(Xs.session(),null)}})},oJ=()=>{const e=Dt();return Rt({mutationFn:async()=>{await nJ()},onSuccess:()=>{e.setQueryData(Xs.session(),null),e.removeQueries({queryKey:Xs.session()})}})},lJ=()=>{const e=Dt();return Rt({mutationFn:async()=>{const t=await Bx();if(!t)throw new Error("Could not refresh profile");return t},onSuccess:()=>{e.invalidateQueries({queryKey:Xs.session()})}})},cJ=()=>Rt({mutationFn:async()=>{const{data:e,error:t}=await Re.auth.signInWithOAuth({provider:"google",options:{redirectTo:"https://vetoapp-six.vercel.app//dashboard"}});if(t)throw t;return e}}),uJ=()=>Rt({mutationFn:async e=>{await sJ(e)}}),_R=b.createContext(void 0);function dJ({children:e}){const{data:t,isLoading:n,error:r}=iJ(),a=SR(),i=oJ(),o=lJ(),l=Dt(),[c,u]=b.useState(!1),d=b.useRef(!1);b.useEffect(()=>{if(d.current)return;d.current=!0;const{data:{subscription:x}}=Re.auth.onAuthStateChange((j,w)=>{j==="SIGNED_OUT"?(l.setQueryData(Xs.session(),null),l.removeQueries({queryKey:Xs.session()})):j==="TOKEN_REFRESHED"&&w&&l.invalidateQueries({queryKey:Xs.session()}),c||u(!0)}),y=setTimeout(()=>{c||u(!0)},2e3);return()=>{x.unsubscribe(),clearTimeout(y),d.current=!1}},[l,c]);const h=async(x,y)=>{try{return await a.mutateAsync({email:x,password:y}),!0}catch(j){return console.error("Login error:",j),!1}},m=async()=>{try{await i.mutateAsync()}catch(x){console.error("Logout error:",x),l.setQueryData(Xs.session(),null)}},f=async()=>{await o.mutateAsync()},g=!c||n&&!r&&t===void 0,p=a.isPending||i.isPending,v={user:t||null,isAuthenticated:!!t&&c,isLoading:g||p,login:h,logout:m,refreshProfile:f};return s.jsx(_R.Provider,{value:v,children:e})}function oc(){const e=b.useContext(_R);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}function GP(){const{user:e,logout:t}=oc(),{toast:n}=it(),r=_d(),[a,i]=b.useState(!1),o=async()=>{i(!0),await new Promise(d=>setTimeout(d,500)),t(),n({title:"Déconnexion réussie",description:"Vous avez été déconnecté avec succès."}),i(!1)};if(!e)return null;const l=d=>d?d.split(" ").map(h=>h.charAt(0)).join("").toUpperCase().slice(0,2):e.profile.username.charAt(0).toUpperCase(),c=d=>{switch(d){case"admin":return"Administrateur";case"assistant":return"Assistant";default:return"Utilisateur"}},u=d=>{switch(d){case"admin":return s.jsx(Pr,{className:"h-3 w-3"});case"assistant":return s.jsx(hr,{className:"h-3 w-3"});default:return s.jsx(hr,{className:"h-3 w-3"})}};return s.jsxs(xY,{children:[s.jsx(yY,{asChild:!0,children:s.jsx(F,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:s.jsx(Zn,{className:"h-8 w-8",children:s.jsx(er,{className:"bg-primary text-primary-foreground text-sm",children:l(e.profile.full_name)})})})}),s.jsxs(L4,{className:"w-56",align:"end",forceMount:!0,children:[s.jsx(B4,{className:"font-normal",children:s.jsxs("div",{className:"flex flex-col space-y-1",children:[s.jsx("p",{className:"text-sm font-medium leading-none",children:e.profile.full_name||e.profile.username}),s.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:e.email}),s.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[u(e.profile.role),s.jsx("span",{className:"text-xs text-muted-foreground",children:c(e.profile.role)})]})]})}),s.jsx(Xb,{}),s.jsxs(Qb,{className:"cursor-pointer",onClick:()=>r("/profile"),children:[s.jsx(hr,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Profil"})]}),s.jsx(Xb,{}),s.jsxs(Qb,{className:"cursor-pointer text-red-600 focus:text-red-600",onClick:o,disabled:a,children:[s.jsx(fU,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:a?"Déconnexion...":"Se déconnecter"})]})]})]})}const CR=[{icon:mU,label:"Dashboard",path:"/dashboard"},{icon:La,label:"Clients",path:"/clients"},{icon:ht,label:"Animaux",path:"/pets"},{icon:Ke,label:"RDV",path:"/appointments"},{icon:Cr,label:"Consultations",path:"/consultations"},{icon:Br,label:"Vaccinations",path:"/vaccinations"},{icon:hl,label:"Antiparasites",path:"/antiparasites"},{icon:xI,label:"Historiques",path:"/history"},{icon:jb,label:"Farm Mgmt",path:"/farm"}],PR=[{icon:Oa,label:"Stock",path:"/stock"},{icon:vI,label:"Comptabilité",path:"/accounting"}],hJ=[...CR,...PR];function gr(){const e=Lo(),[t,n]=b.useState(!1);return s.jsx("nav",{className:"bg-card border-b shadow-card",children:s.jsxs("div",{className:"container mx-auto px-2 sm:px-4 py-2 sm:py-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-shrink-0",children:[s.jsxs(Ys,{to:"/dashboard",className:"flex items-center gap-1 sm:gap-2",children:[s.jsx(ht,{className:"h-6 w-6 sm:h-7 sm:w-7 text-primary"}),s.jsx("h1",{className:"text-lg sm:text-xl font-bold gradient-primary bg-clip-text text-transparent hidden sm:block",children:"VetPro CRM"}),s.jsx("h1",{className:"text-base sm:text-lg font-bold gradient-primary bg-clip-text text-transparent sm:hidden",children:"VetPro"})]}),s.jsx("div",{className:"hidden sm:block",children:s.jsx(xP,{})})]}),s.jsxs("div",{className:"hidden lg:flex items-center gap-1",children:[CR.map(r=>s.jsx(F,{variant:e.pathname===r.path?"default":"ghost",size:"sm",className:"gap-1 px-3 transition-all hover:medical-glow",asChild:!0,children:s.jsxs(Ys,{to:r.path,children:[s.jsx(r.icon,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden xl:inline",children:r.label})]})},r.path)),s.jsxs("div",{className:"relative group",children:[s.jsxs(F,{variant:"ghost",size:"sm",className:"gap-1 px-3 transition-all hover:medical-glow",children:[s.jsx($C,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden xl:inline",children:"Plus"})]}),s.jsx("div",{className:"absolute right-0 top-full mt-1 w-40 bg-card border rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:s.jsx("div",{className:"py-1",children:PR.map(r=>s.jsxs(Ys,{to:r.path,className:`flex items-center gap-2 px-4 py-2 text-sm transition-colors hover:bg-muted ${e.pathname===r.path?"bg-primary text-primary-foreground":""}`,children:[s.jsx(r.icon,{className:"h-4 w-4"}),r.label]},r.path))})})]})]}),s.jsx("div",{className:"hidden lg:flex items-center gap-2",children:s.jsx(GP,{})}),s.jsxs("div",{className:"lg:hidden flex items-center gap-2",children:[s.jsx("div",{className:"sm:hidden",children:s.jsx(xP,{})}),s.jsx(GP,{}),s.jsx(F,{variant:"ghost",size:"sm",onClick:()=>n(!t),className:"gap-1 p-2",children:t?s.jsx(jx,{className:"h-4 w-4"}):s.jsx($C,{className:"h-4 w-4"})})]})]}),t&&s.jsx("div",{className:"lg:hidden mt-2 pt-2 border-t",children:s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1",children:hJ.map(r=>s.jsx(F,{variant:e.pathname===r.path?"default":"ghost",size:"sm",className:"gap-2 justify-start text-xs sm:text-sm",asChild:!0,onClick:()=>n(!1),children:s.jsxs(Ys,{to:r.path,children:[s.jsx(r.icon,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{className:"truncate",children:r.label})]})},r.path))})})]})})}class mJ extends b.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){console.error("ErrorBoundary caught an error:",t,n),this.setState({error:t,errorInfo:n})}render(){var t,n;return this.state.hasError?s.jsx("div",{className:"min-h-screen bg-red-50 flex items-center justify-center p-8",children:s.jsxs("div",{className:"max-w-2xl bg-white p-8 rounded-lg shadow-lg border border-red-200",children:[s.jsx("h1",{className:"text-2xl font-bold text-red-800 mb-4",children:"🚨 Erreur dans l'application"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-red-700 mb-2",children:"Erreur :"}),s.jsx("pre",{className:"bg-red-100 p-4 rounded text-sm text-red-800 overflow-auto",children:(t=this.state.error)==null?void 0:t.toString()})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-red-700 mb-2",children:"Stack Trace :"}),s.jsx("pre",{className:"bg-gray-100 p-4 rounded text-sm text-gray-800 overflow-auto max-h-64",children:(n=this.state.errorInfo)==null?void 0:n.componentStack})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Recharger la page"}),s.jsx("button",{onClick:()=>window.history.back(),className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"Retour"})]})]})]})}):this.props.children}}const AR=b.createContext(void 0),YP=[{id:1,name:"Marie Dubois",firstName:"Marie",lastName:"Dubois",email:"marie.dubois@email.com",phone:"06 12 34 56 78",address:"123 Rue de la Paix",city:"Paris",postalCode:"75001",idNumber:"1234567890123",pets:[{id:1,name:"Bella",type:"Chien",breed:"Golden Retriever",gender:"female",birthDate:"2021-03-15",weight:"28 kg",color:"Doré",ownerId:1,owner:"Marie Dubois",status:"healthy",lastVisit:"2024-01-15",nextAppointment:"2024-01-25",microchip:"982000123456789",vaccinations:["Rage","DHPP","Lyme"]},{id:4,name:"Luna",type:"Chat",breed:"Siamois",gender:"female",birthDate:"2022-05-12",weight:"3.8 kg",color:"Crème et marron",ownerId:1,owner:"Marie Dubois",status:"healthy",lastVisit:"2024-01-08",nextAppointment:"2024-02-08",microchip:"982000111222333",vaccinations:["Rage","FVRCP","FeLV"]}],lastVisit:"2024-01-15",totalVisits:12},{id:2,name:"Jean Martin",firstName:"Jean",lastName:"Martin",email:"jean.martin@email.com",phone:"06 98 76 54 32",address:"45 Avenue des Roses",city:"Lyon",postalCode:"69000",idNumber:"9876543210987",pets:[{id:2,name:"Whiskers",type:"Chat",breed:"Persan",gender:"male",birthDate:"2019-08-22",weight:"4.5 kg",color:"Blanc",ownerId:2,owner:"Jean Martin",status:"treatment",lastVisit:"2024-01-10",nextAppointment:"2024-01-22",microchip:"982000987654321",vaccinations:["Rage","FVRCP"]}],lastVisit:"2024-01-10",totalVisits:8},{id:3,name:"Sophie Leroux",firstName:"Sophie",lastName:"Leroux",email:"sophie.leroux@email.com",phone:"06 45 67 89 12",address:"78 Boulevard Maritime",city:"Marseille",postalCode:"13000",idNumber:"4567891234567",pets:[{id:3,name:"Rex",type:"Chien",breed:"Berger Allemand",gender:"male",birthDate:"2017-11-10",weight:"32 kg",color:"Noir et feu",ownerId:3,owner:"Sophie Leroux",status:"healthy",lastVisit:"2024-01-18",nextAppointment:"2024-02-01",microchip:"982000555444333",vaccinations:["Rage","DHPP","Bordetella"]},{id:5,name:"Max",type:"Chien",breed:"Labrador",gender:"male",birthDate:"2020-09-03",weight:"30 kg",color:"Noir",ownerId:3,owner:"Sophie Leroux",status:"healthy",lastVisit:"2024-01-22",nextAppointment:"2024-02-22",microchip:"982000444555666",vaccinations:["Rage","DHPP","Lyme","Bordetella"]}],lastVisit:"2024-01-18",totalVisits:15}],sh=[{id:1,name:"Bella",type:"Chien",breed:"Golden Retriever",birthDate:"2021-03-15",weight:"28 kg",color:"Doré",ownerId:1,owner:"Marie Dubois",status:"healthy",lastVisit:"2024-01-15",nextAppointment:"2024-01-25",microchip:"982000123456789",vaccinations:["Rage","DHPP","Lyme"]},{id:2,name:"Whiskers",type:"Chat",breed:"Persan",birthDate:"2019-08-22",weight:"4.5 kg",color:"Blanc",ownerId:2,owner:"Jean Martin",status:"treatment",lastVisit:"2024-01-10",nextAppointment:"2024-01-22",microchip:"982000987654321",vaccinations:["Rage","FVRCP"]},{id:3,name:"Rex",type:"Chien",breed:"Berger Allemand",birthDate:"2017-11-10",weight:"32 kg",color:"Noir et feu",ownerId:3,owner:"Sophie Leroux",status:"healthy",lastVisit:"2024-01-18",nextAppointment:"2024-02-01",microchip:"982000555444333",vaccinations:["Rage","DHPP","Bordetella"]}],pp=[{id:1,clientId:1,clientName:"Marie Dubois",petId:1,petName:"Bella",date:"2024-01-15",weight:"28.2 kg",temperature:"38.5",symptoms:"Contrôle annuel, bonne santé générale",diagnosis:"Aucun problème détecté",treatment:"Vaccination annuelle",medications:"Rappel vaccin DHPP",followUp:"Contrôle dans 1 an",cost:"85.00",notes:"Animal en excellente santé",photos:[],createdAt:"2024-01-15T10:30:00Z"},{id:2,clientId:2,clientName:"Jean Martin",petId:2,petName:"Whiskers",date:"2024-01-10",weight:"4.3 kg",temperature:"39.2",symptoms:"Perte d'appétit, léthargie",diagnosis:"Infection urinaire",treatment:"Antibiotiques",medications:"Amoxicilline 50mg 2x/jour pendant 7 jours",followUp:"Contrôle dans 1 semaine",cost:"120.00",notes:"Surveiller la consommation d'eau",photos:[],createdAt:"2024-01-10T14:15:00Z"}],gp=[{id:1,clientId:1,clientName:"Marie Dubois",petId:1,petName:"Bella",date:"2024-01-25",time:"14:30",type:"vaccination",duration:30,reason:"Vaccination annuelle",notes:"Rappel vaccinal complet",status:"scheduled",reminderSent:!1,createdAt:"2024-01-20T09:00:00Z"},{id:2,clientId:2,clientName:"Jean Martin",petId:2,petName:"Whiskers",date:"2024-01-22",time:"10:00",type:"controle",duration:45,reason:"Contrôle post-traitement",notes:"Vérifier l'amélioration de l'appétit",status:"confirmed",reminderSent:!0,createdAt:"2024-01-18T16:30:00Z"},{id:3,clientId:3,clientName:"Sophie Leroux",petId:3,petName:"Rex",date:"2024-01-26",time:"16:00",type:"sterilisation",duration:60,reason:"Stérilisation",notes:"Jeûne 12h avant l'intervention",status:"scheduled",reminderSent:!1,createdAt:"2024-01-19T11:15:00Z"}],vp=[{id:1,consultationId:1,clientId:1,clientName:"Marie Dubois",petId:1,petName:"Bella",date:"2024-01-15",prescribedBy:"Dr. Martin",diagnosis:"Trachéobronchite",medications:[{id:1,name:"Doxycycline",dosage:"100mg",frequency:"2x/jour",duration:"7 jours",instructions:"Donner avec de la nourriture",quantity:14,unit:"comprimés",refills:0,cost:25.5},{id:2,name:"Sirop antitussif",dosage:"5ml",frequency:"3x/jour",duration:"5 jours",instructions:"Donner 30 minutes avant les repas",quantity:75,unit:"ml",refills:1,cost:15}],instructions:"Surveiller la température et l'appétit. Retour en cas d'aggravation.",duration:"7 jours",followUpDate:"2024-01-22",status:"active",notes:"Patient calme, bon appétit maintenu",createdAt:"2024-01-15T10:30:00Z"},{id:2,consultationId:2,clientId:2,clientName:"Jean Martin",petId:2,petName:"Whiskers",date:"2024-01-10",prescribedBy:"Dr. Martin",diagnosis:"Infection urinaire",medications:[{id:3,name:"Amoxicilline",dosage:"50mg",frequency:"2x/jour",duration:"7 jours",instructions:"Donner avec de la nourriture",quantity:14,unit:"comprimés",refills:0,cost:18}],instructions:"Augmenter la consommation d'eau. Surveiller les urines.",duration:"7 jours",followUpDate:"2024-01-17",status:"completed",notes:"Amélioration progressive",createdAt:"2024-01-10T14:15:00Z"}],xp=[{id:1,name:"Ferme des Prairies",owner:"Pierre Durand",address:"123 Route de la Campagne, 45000 Orléans",coordinates:{latitude:47.9056,longitude:1.919},phone:"02 38 45 67 89",email:"p.durand@fermedespra.fr",types:["Bovin laitier"],totalAnimals:85,animalDetails:[{category:"Bovins laitiers",maleCount:3,femaleCount:82,breeds:["Holstein","Prim'Holstein"],ageGroups:["Veaux (0-6 mois)","Génisses (6-24 mois)","Vaches adultes"]}],lastVisit:"2024-01-15",status:"active",veterinarian:"Dr. Dupont",notes:"Exploitation bien gérée, animaux en bonne santé",registrationNumber:"FR45123456789",surfaceArea:45.5,buildingDetails:"Étable moderne 850m², stabulation libre, salle de traite 2x8",equipmentDetails:"Tracteur John Deere, Tank à lait 2000L, Système de ventilation automatique",certifications:["Agriculture Biologique","Haute Valeur Environnementale"],insuranceDetails:"Groupama - Police n°123456789",emergencyContact:{name:"Marie Durand",phone:"06 12 34 56 78",relation:"Épouse"},photos:[{id:"photo_1",url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgdmlld0JveD0iMCAwIDQwMCA0MDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iNDAwIiBmaWxsPSIjRjNGNEY2Ii8+Cjx0ZXh0IHg9IjIwMCIgeT0iMjAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IiM2QjcyODAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5QaG90byBDaGVwdGVsPC90ZXh0Pgo8L3N2Zz4K",description:"Vaches Holstein dans le pré",category:"cheptel",uploadedAt:"2024-01-15T10:00:00Z"},{id:"photo_2",url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgdmlld0JveD0iMCAwIDQwMCA0MDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iNDAwIiBmaWxsPSIjRjNGNEY2Ii8+Cjx0ZXh0IHg9IjIwMCIgeT0iMjAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IiM2QjcyODAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5QaG90byBCw6J0aW1lbnRzPC90ZXh0Pgo8L3N2Zz4K",description:"Étable moderne avec salle de traite",category:"batiments",uploadedAt:"2024-01-15T10:00:00Z"}],createdAt:"2024-01-01T09:00:00Z"},{id:2,name:"Élevage Martin",owner:"Jean-Luc Martin",address:"456 Chemin des Champs, 41000 Blois",coordinates:{latitude:47.5886,longitude:1.334},phone:"02 54 78 90 12",email:"jl.martin@elevagemartin.fr",types:["Porcin"],totalAnimals:150,animalDetails:[{category:"Porcs",maleCount:75,femaleCount:75,breeds:["Large White","Landrace"],ageGroups:["Porcelets (0-2 mois)","Porcs en croissance (2-6 mois)"]}],lastVisit:"2024-01-10",status:"active",veterinarian:"Dr. Martin",notes:"Nouveau système de ventilation installé",registrationNumber:"FR41987654321",surfaceArea:28.3,buildingDetails:"Porcherie 600m², nurserie 200m², système de ventilation automatique",equipmentDetails:"Système d'alimentation automatique, Pompe à lisier, Générateur de secours",certifications:["Label Rouge"],insuranceDetails:"Crédit Agricole Assurances - Police n°987654321",emergencyContact:{name:"Sophie Martin",phone:"06 98 76 54 32",relation:"Sœur"},createdAt:"2024-01-02T10:30:00Z"},{id:3,name:"Ferme Avicole Leroux",owner:"Marie Leroux",address:"789 Avenue des Volailles, 37000 Tours",coordinates:{latitude:47.3936,longitude:.6848},phone:"02 47 12 34 56",email:"m.leroux@avicole-leroux.fr",types:["Avicole"],totalAnimals:2500,animalDetails:[{category:"Poules pondeuses",maleCount:50,femaleCount:2e3,breeds:["ISA Brown","Lohmann Brown"],ageGroups:["Poussins (0-18 semaines)","Pondeuses (18+ semaines)"]},{category:"Poulets de chair",maleCount:225,femaleCount:225,breeds:["Cobb 500","Ross 308"],ageGroups:["0-6 semaines"]}],lastVisit:"2024-01-18",status:"attention",veterinarian:"Dr. Dupont",notes:"Problème de ventilation détecté, surveillance renforcée",registrationNumber:"FR37555666777",surfaceArea:12.8,buildingDetails:"Poulailler automatisé 1200m², aire de parcours 5000m²",equipmentDetails:"Système de ramassage automatique des œufs, Ventilation programmable, Éclairage LED",certifications:["Œufs de France","Bien-être animal"],insuranceDetails:"MMA - Police n°555666777",emergencyContact:{name:"Paul Leroux",phone:"06 47 12 34 56",relation:"Fils"},createdAt:"2024-01-03T14:15:00Z"},{id:4,name:"Ferme Équine du Val",owner:"Sophie Moreau",address:"12 Chemin des Écuries, 78000 Versailles",coordinates:{latitude:48.8044,longitude:2.1232},phone:"01 39 50 12 34",email:"s.moreau@fermeequine.fr",types:["Équin"],totalAnimals:25,animalDetails:[{category:"Chevaux",maleCount:8,femaleCount:17,breeds:["Pur-sang","Selle français","Arabe"],ageGroups:["Poulains (0-3 ans)","Jeunes chevaux (3-7 ans)","Chevaux adultes (7+ ans)"]}],lastVisit:"2024-01-20",status:"active",veterinarian:"Dr. Martin",notes:"Écurie de prestige, chevaux de compétition",registrationNumber:"FR78123456789",surfaceArea:15.2,buildingDetails:"Écuries 800m², manège couvert 1200m², carrière extérieure 2000m²",equipmentDetails:"Tracteur, Système d'arrosage automatique, Éclairage LED, Système de sécurité",certifications:["Bien-être animal","Équitation de tradition française"],insuranceDetails:"Allianz - Police n°781234567",emergencyContact:{name:"Marc Moreau",phone:"06 12 34 56 78",relation:"Époux"},createdAt:"2024-01-04T08:30:00Z"},{id:5,name:"Rucher des Fleurs",owner:"Jean Dupuis",address:"45 Route des Champs, 13000 Marseille",coordinates:{latitude:43.2965,longitude:5.3698},phone:"04 91 23 45 67",email:"j.dupuis@rucherdesfleurs.fr",types:["Apiculture"],totalAnimals:120,animalDetails:[{category:"Abeilles",maleCount:0,femaleCount:120,breeds:["Abeille noire","Buckfast"],ageGroups:["Reines (1-3 ans)","Ouvrières (6 semaines)","Faux-bourdons (3 mois)"]}],lastVisit:"2024-01-12",status:"active",veterinarian:"Dr. Dupont",notes:"Production de miel de qualité, apiculture biologique",registrationNumber:"FR13123456789",surfaceArea:8.5,buildingDetails:"Miellerie 200m², entrepôt 150m², zone de conditionnement 100m²",equipmentDetails:"Extracteur de miel, Centrifugeuse, Filtres, Matériel de conditionnement",certifications:["Agriculture Biologique","Miel de France"],insuranceDetails:"MAIF - Police n°131234567",emergencyContact:{name:"Marie Dupuis",phone:"06 91 23 45 67",relation:"Épouse"},createdAt:"2024-01-05T11:15:00Z"}],yp=[{id:1,date:"2024-01-20",farmId:1,farmName:"Ferme des Prairies",type:"vaccination",animals:"15 bovins",veterinarian:"Dr. Dupont",description:"Vaccination contre la fièvre aphteuse",status:"completed",followUp:"Contrôle dans 6 mois",cost:450,notes:"Intervention réussie, aucun effet secondaire",createdAt:"2024-01-20T08:00:00Z"},{id:2,date:"2024-01-18",farmId:3,farmName:"Ferme Avicole Leroux",type:"urgence",animals:"50 poules",veterinarian:"Dr. Dupont",description:"Traitement infection respiratoire",status:"ongoing",followUp:"Suivi hebdomadaire",cost:320,notes:"Traitement antibiotique en cours",createdAt:"2024-01-18T14:30:00Z"},{id:3,date:"2024-01-15",farmId:2,farmName:"Élevage Martin",type:"controle",animals:"Tous les porcins",veterinarian:"Dr. Martin",description:"Contrôle sanitaire trimestriel",status:"completed",followUp:"Prochain contrôle en avril",cost:280,notes:"Tous les paramètres dans les normes",createdAt:"2024-01-15T10:00:00Z"}],jp=[{id:1,petId:1,petName:"Bella",clientId:1,clientName:"Marie Dubois",vaccineName:"DHPP",vaccineType:"core",vaccinationCategory:"new",dateGiven:"2024-01-15",nextDueDate:"2025-01-15",batchNumber:"VAC2024-001",veterinarian:"Dr. Martin",notes:"Première vaccination annuelle",status:"completed",cost:"45.00",location:"left_shoulder",manufacturer:"Zoetis",expirationDate:"2025-12-31",createdAt:"2024-01-15T10:30:00Z",isInStock:!1,stockQuantity:0,stockDeducted:!1},{id:2,petId:1,petName:"Bella",clientId:1,clientName:"Marie Dubois",vaccineName:"Rage",vaccineType:"rabies",vaccinationCategory:"new",dateGiven:"2024-01-15",nextDueDate:"2027-01-15",batchNumber:"RAB2024-005",veterinarian:"Dr. Martin",notes:"Vaccination antirabique obligatoire",status:"completed",cost:"35.00",location:"right_shoulder",manufacturer:"Merial",expirationDate:"2026-08-15",createdAt:"2024-01-15T10:45:00Z",isInStock:!1,stockQuantity:0,stockDeducted:!1},{id:3,petId:2,petName:"Whiskers",clientId:2,clientName:"Jean Martin",vaccineName:"FVRCP",vaccineType:"core",vaccinationCategory:"new",dateGiven:"2023-08-22",nextDueDate:"2024-08-22",batchNumber:"CAT2023-012",veterinarian:"Dr. Dupont",notes:"Vaccination de base pour chat",status:"overdue",cost:"40.00",location:"subcutaneous",manufacturer:"Virbac",expirationDate:"2025-06-30",createdAt:"2023-08-22T14:20:00Z",isInStock:!1,stockQuantity:0,stockDeducted:!1},{id:4,petId:3,petName:"Rex",clientId:3,clientName:"Sophie Leroux",vaccineName:"Bordetella",vaccineType:"non-core",vaccinationCategory:"new",dateGiven:"2024-01-18",nextDueDate:"2025-01-18",batchNumber:"BOR2024-008",veterinarian:"Dr. Martin",notes:"Vaccination contre la toux de chenil",status:"completed",cost:"30.00",location:"left_shoulder",manufacturer:"Zoetis",expirationDate:"2025-09-30",createdAt:"2024-01-18T16:15:00Z",isInStock:!1,stockQuantity:0,stockDeducted:!1},{id:5,petId:1,petName:"Bella",clientId:1,clientName:"Marie Dubois",vaccineName:"Lyme",vaccineType:"non-core",vaccinationCategory:"new",dateGiven:"2024-01-25",nextDueDate:"2024-04-25",batchNumber:"LYM2024-003",veterinarian:"Dr. Martin",notes:"Vaccination contre la maladie de Lyme",status:"scheduled",cost:"50.00",location:"left_hip",manufacturer:"Boehringer Ingelheim",expirationDate:"2025-11-20",createdAt:"2024-01-25T09:00:00Z",isInStock:!1,stockQuantity:0,stockDeducted:!1}],Cc=[{id:1,petId:1,petName:"Bella",clientId:1,clientName:"Marie Dubois",productName:"Frontline Combo Spot-On",productType:"flea_tick",targetParasites:"Puces, Tiques, Poux broyeurs",dateGiven:"2024-01-10",nextDueDate:"2024-02-10",dosage:"1 pipette",administrationRoute:"topical",veterinarian:"Dr. Martin",notes:"Application entre les omoplates",batchNumber:"FRC2024-001",manufacturer:"Boehringer Ingelheim",weight:"28kg",status:"completed",cost:"25.50",sideEffects:"",createdAt:new Date().toISOString(),isInStock:!1,stockQuantity:0,stockDeducted:!1},{id:2,petId:2,petName:"Whiskers",clientId:2,clientName:"Jean Martin",productName:"Milbemax Chat",productType:"worming",targetParasites:"Vers ronds, Vers plats, Vers du cœur",dateGiven:"2024-01-05",nextDueDate:"2024-04-05",dosage:"1/2 comprimé",administrationRoute:"oral",veterinarian:"Dr. Dupont",notes:"Donné avec la nourriture",batchNumber:"MLX2024-008",manufacturer:"Novartis",weight:"4.5kg",status:"completed",cost:"18.00",sideEffects:"",createdAt:new Date().toISOString(),isInStock:!1,stockQuantity:0,stockDeducted:!1}],ah=[{id:1,name:"Frontline Combo Spot-On",species:"Chien",productType:"flea_tick",targetParasites:"Puces, Tiques, Poux broyeurs",description:"Protection complète contre puces et tiques pendant 8 semaines",manufacturer:"Boehringer Ingelheim",intervals:[{offsetDays:0,label:"Application initiale"},{offsetDays:28,label:"Rappel mensuel"}],weightRange:"2-60kg",ageRequirement:"Dès 8 semaines",seasonalTreatment:!0,notes:"Éviter le bain 48h avant et après application",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:2,name:"NexGard Spectra",species:"Chien",productType:"combined",targetParasites:"Puces, Tiques, Vers du cœur, Vers ronds, Vers plats",description:"Protection combinée externe et interne mensuelle",manufacturer:"Boehringer Ingelheim",intervals:[{offsetDays:0,label:"Première dose"},{offsetDays:30,label:"Dose mensuelle"}],weightRange:"2-60kg",ageRequirement:"Dès 8 semaines",seasonalTreatment:!1,notes:"Donner avec la nourriture pour une meilleure absorption",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:3,name:"Drontal Plus",species:"Chien",productType:"worming",targetParasites:"Vers ronds, Vers plats, Ankylostomes, Trichures",description:"Vermifugation large spectre",manufacturer:"Bayer",intervals:[{offsetDays:0,label:"Première vermifugation"},{offsetDays:90,label:"Rappel trimestriel"},{offsetDays:180,label:"Rappel semestriel"}],weightRange:"2-35kg",ageRequirement:"Dès 2 semaines",seasonalTreatment:!1,notes:"Administrer le matin à jeun, répéter selon exposition aux parasites",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:4,name:"Advocate Spot-On",species:"Chien",productType:"combined",targetParasites:"Puces, Vers du cœur, Vers ronds, Ankylostomes, Gale sarcoptique",description:"Protection topique combinée mensuelle",manufacturer:"Bayer",intervals:[{offsetDays:0,label:"Application initiale"},{offsetDays:30,label:"Application mensuelle"}],weightRange:"1-40kg",ageRequirement:"Dès 7 semaines",seasonalTreatment:!1,notes:"Appliquer sur peau sèche entre les omoplates",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:5,name:"Frontline Combo Chat",species:"Chat",productType:"flea_tick",targetParasites:"Puces, Tiques",description:"Protection mensuelle contre puces et tiques chez le chat",manufacturer:"Boehringer Ingelheim",intervals:[{offsetDays:0,label:"Application initiale"},{offsetDays:28,label:"Rappel mensuel"}],weightRange:"1-8kg",ageRequirement:"Dès 8 semaines",seasonalTreatment:!0,notes:"Attention aux réactions cutanées, surveiller 24h après application",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:6,name:"Stronghold Plus",species:"Chat",productType:"combined",targetParasites:"Puces, Vers du cœur, Vers ronds, Ankylostomes, Gale des oreilles",description:"Protection combinée mensuelle pour chats",manufacturer:"Zoetis",intervals:[{offsetDays:0,label:"Application initiale"},{offsetDays:30,label:"Application mensuelle"}],weightRange:"0.5-8kg",ageRequirement:"Dès 6 semaines",seasonalTreatment:!1,notes:"Efficace contre gale des oreilles en 1 application",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:7,name:"Milbemax Chat",species:"Chat",productType:"worming",targetParasites:"Vers ronds, Vers plats, Vers du cœur",description:"Vermifugation complète pour chats",manufacturer:"Novartis",intervals:[{offsetDays:0,label:"Première vermifugation"},{offsetDays:90,label:"Rappel trimestriel"}],weightRange:"0.5-8kg",ageRequirement:"Dès 6 semaines",seasonalTreatment:!1,notes:"Comprimés appétents, peut être donné avec ou sans nourriture",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:8,name:"Eprinex Pour-On",species:"Bovins",productType:"external",targetParasites:"Mouches, Poux, Gales, Vers gastro-intestinaux",description:"Traitement pour-on systémique pour bovins",manufacturer:"Boehringer Ingelheim",intervals:[{offsetDays:0,label:"Application unique"},{offsetDays:84,label:"Rappel saisonnier"}],weightRange:"50-800kg",ageRequirement:"Tous âges",seasonalTreatment:!0,notes:"Temps d'attente viande: 15 jours, lait: 0 jour",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:9,name:"Panacur 100",species:"Bovins",productType:"worming",targetParasites:"Vers gastro-intestinaux, Vers pulmonaires",description:"Vermifuge oral pour bovins",manufacturer:"MSD",intervals:[{offsetDays:0,label:"Traitement initial"},{offsetDays:120,label:"Rappel saisonnier"}],weightRange:"50-800kg",ageRequirement:"Dès 2 semaines",seasonalTreatment:!1,notes:"Temps d'attente viande: 14 jours, lait: 3 jours",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:10,name:"Cydectin 0.1%",species:"Ovins",productType:"combined",targetParasites:"Vers gastro-intestinaux, Vers pulmonaires, Gales",description:"Traitement injectable pour ovins et caprins",manufacturer:"Boehringer Ingelheim",intervals:[{offsetDays:0,label:"Injection unique"},{offsetDays:90,label:"Rappel saisonnier"}],weightRange:"10-100kg",ageRequirement:"Dès 4 semaines",seasonalTreatment:!0,notes:"Temps d'attente viande: 35 jours",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}],QP=[{id:1,name:"Amoxicilline 500mg",category:"medication",subcategory:"Antibiotique",description:"Antibiotique à large spectre",manufacturer:"Boehringer Ingelheim",batchNumber:"AMX2024001",dosage:"500mg",unit:"box",currentStock:15,minimumStock:5,maximumStock:50,purchasePrice:20,sellingPrice:25.5,totalValue:300,expirationDate:"2025-12-31",supplier:"Pharmacie Vétérinaire Centrale",location:"Armoire A - Étagère 1",notes:"Stockage à température ambiante",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-15",isActive:!0,barcode:"1234567890123",sku:"MED-AMX-500"},{id:2,name:"Frontline Combo Spot-On",category:"medication",subcategory:"Antiparasitaire",description:"Traitement contre puces et tiques",manufacturer:"Boehringer Ingelheim",batchNumber:"FRC2024001",dosage:"1 pipette",unit:"pack",currentStock:8,minimumStock:10,maximumStock:100,purchasePrice:15,sellingPrice:18.75,totalValue:120,expirationDate:"2026-06-30",supplier:"VetoSupply Maroc",location:"Armoire B - Étagère 2",notes:"Pour chiens 20-40kg",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-10",isActive:!0,barcode:"2345678901234",sku:"ANT-FRONT-20-40"},{id:3,name:"DHPP Canine",category:"vaccine",subcategory:"Vaccin Core",description:"Vaccin contre Distemper, Hépatite, Parvovirus, Parainfluenza",manufacturer:"Merial",batchNumber:"DHPP2024001",dosage:"1 dose",unit:"vial",currentStock:25,minimumStock:10,maximumStock:100,purchasePrice:9.5,sellingPrice:12,totalValue:237.5,expirationDate:"2025-08-15",supplier:"Vaccins Vétérinaires SA",location:"Réfrigérateur - Étagère 1",notes:"Conservation 2-8°C",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-20",isActive:!0,barcode:"3456789012345",sku:"VAC-DHPP-001"},{id:4,name:"Rage Canine",category:"vaccine",subcategory:"Vaccin Obligatoire",description:"Vaccin antirabique obligatoire",manufacturer:"Merial",batchNumber:"RAB2024001",dosage:"1 dose",unit:"vial",currentStock:12,minimumStock:5,maximumStock:50,purchasePrice:12,sellingPrice:15,totalValue:144,expirationDate:"2025-10-20",supplier:"Vaccins Vétérinaires SA",location:"Réfrigérateur - Étagère 2",notes:"Conservation 2-8°C - Obligatoire",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-18",isActive:!0,barcode:"4567890123456",sku:"VAC-RAB-001"},{id:5,name:"Seringues 5ml",category:"consumable",subcategory:"Matériel d'injection",description:"Seringues stériles 5ml avec aiguilles",manufacturer:"BD Medical",batchNumber:"SYR2024001",dosage:"5ml",unit:"box",currentStock:50,minimumStock:20,maximumStock:200,purchasePrice:.35,sellingPrice:.45,totalValue:17.5,expirationDate:"2027-03-15",supplier:"Matériel Médical Pro",location:"Armoire C - Étagère 1",notes:"Stériles, usage unique",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-12",isActive:!0,barcode:"5678901234567",sku:"CON-SYR-5ML"},{id:6,name:"Masques chirurgicaux",category:"consumable",subcategory:"Protection",description:"Masques chirurgicaux jetables",manufacturer:"3M",batchNumber:"MSK2024001",dosage:"1 unité",unit:"box",currentStock:200,minimumStock:50,maximumStock:500,purchasePrice:.12,sellingPrice:.15,totalValue:24,expirationDate:"2026-12-31",supplier:"Protection Médicale",location:"Armoire D - Étagère 1",notes:"Type IIR, boîte de 50",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-08",isActive:!0,barcode:"6789012345678",sku:"CON-MSK-50"},{id:7,name:"Gants nitrile",category:"consumable",subcategory:"Protection",description:"Gants nitrile non poudrés",manufacturer:"Ansell",batchNumber:"GNT2024001",dosage:"1 paire",unit:"box",currentStock:30,minimumStock:10,maximumStock:100,purchasePrice:.2,sellingPrice:.25,totalValue:6,expirationDate:"2026-08-20",supplier:"Protection Médicale",location:"Armoire D - Étagère 2",notes:"Taille M, boîte de 100",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-05",isActive:!0,barcode:"7890123456789",sku:"CON-GNT-M-100"},{id:8,name:"Thermomètre digital",category:"equipment",subcategory:"Diagnostic",description:"Thermomètre digital vétérinaire",manufacturer:"Gima",batchNumber:"THM2024001",dosage:"1 unité",unit:"unit",currentStock:3,minimumStock:2,maximumStock:10,purchasePrice:35,sellingPrice:45,totalValue:105,expirationDate:void 0,supplier:"Équipement Vétérinaire",location:"Bureau - Tiroir 1",notes:"Résistant à l'eau, écran LCD",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-03",isActive:!0,barcode:"8901234567890",sku:"EQP-THM-DIG"},{id:9,name:"Vitamines B Complex",category:"supplement",subcategory:"Vitamines",description:"Complexe vitaminique B pour animaux",manufacturer:"Virbac",batchNumber:"VIT2024001",dosage:"1ml",unit:"bottle",currentStock:5,minimumStock:3,maximumStock:20,purchasePrice:6.5,sellingPrice:8.5,totalValue:32.5,expirationDate:"2025-11-30",supplier:"Suppléments Vétérinaires",location:"Armoire A - Étagère 3",notes:"Flacon 50ml",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-14",isActive:!0,barcode:"9012345678901",sku:"SUP-VIT-B-50"}],bp=[{id:1,name:"DAPP (DHPP)",species:"Chien",vaccineType:"core",description:"Distemper, Adénovirus, Parvovirus, Parainfluenza - Vaccination essentielle",manufacturer:"Zoetis",intervals:[{offsetDays:0,label:"J0 (première injection)"},{offsetDays:21,label:"21 jours (2e injection)"},{offsetDays:42,label:"42 jours (3e injection)"},{offsetDays:365,label:"1 an (rappel)"}],ageRequirement:"6-8 semaines (renforcer jusqu'à 16 semaines)",notes:"Protocole d'initiation à 6-8-12-16 semaines puis rappel à 1 an, puis triennal",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"},{id:2,name:"Rage (Rabies)",species:"Chien",vaccineType:"rabies",description:"Vaccination antirabique obligatoire selon la législation locale",manufacturer:"Merial",intervals:[{offsetDays:0,label:"À l'âge de 12 semaines minimum"},{offsetDays:365,label:"1 an (rappel)"}],ageRequirement:"12 semaines minimum",notes:"Rappel annuel ou biennal selon réglementation",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"},{id:3,name:"Bordetella bronchiseptica",species:"Chien",vaccineType:"non-core",description:"Protection contre la toux de chenil",manufacturer:"Zoetis",intervals:[{offsetDays:8,label:"8 semaines"}],ageRequirement:"8 semaines",notes:"Vaccination intracellulaire recommandée pour chiens en collectivité",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"},{id:4,name:"Leptospirose",species:"Chien",vaccineType:"non-core",description:"Protection contre les sérovars pathogènes de Leptospira",manufacturer:"Virbac",intervals:[{offsetDays:12,label:"12 semaines"}],ageRequirement:"12 semaines",notes:"Double sérovariels recommandé",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"},{id:5,name:"RCP (FVRCP)",species:"Chat",vaccineType:"core",description:"Calicivirose, Panleucopénie, Rhinotrachéite virale féline",manufacturer:"Virbac",intervals:[{offsetDays:0,label:"6 semaines"},{offsetDays:21,label:"12 semaines"},{offsetDays:28,label:"1 an"}],ageRequirement:"6-8-12 semaines",notes:"Renforcement à 1 an puis rappel triennal ou annuel selon protocole",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"},{id:6,name:"Rage (Rabies)",species:"Chat",vaccineType:"rabies",description:"Vaccination antirabique selon réglementation voyage",manufacturer:"Merial",intervals:[{offsetDays:365,label:"1 an"},{offsetDays:730,label:"2 ans"}],ageRequirement:"12 semaines",notes:"Rappel annuel ou biennal selon réglementation",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"},{id:7,name:"Distemper furet (Maladie de Carré)",species:"Furet",vaccineType:"core",description:"Protection contre le morbillivirus (Carré)",manufacturer:"Merial",intervals:[{offsetDays:6,label:"6 semaines"},{offsetDays:12,label:"8 semaines"}],ageRequirement:"6-8 semaines",notes:"Protocole similaire à celui des chiens",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"},{id:8,name:"Myxomatose",species:"Lapin",vaccineType:"core",description:"Protection contre la myxomatose",manufacturer:"Virbac",intervals:[{offsetDays:180,label:"180 jours"}],ageRequirement:"5-6 semaines",notes:"Vaccination semestrielle",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"},{id:9,name:"VHD (Maladie hémorragique virale)",species:"Lapin",vaccineType:"core",description:"Protection contre VHD de type 1 et 2",manufacturer:"Virbac",intervals:[{offsetDays:6,label:"6 semaines"}],ageRequirement:"6 semaines",notes:"Rappel annuel",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"}];function MS({children:e}){const t=()=>{try{const L=localStorage.getItem("vetpro-clients"),J=localStorage.getItem("vetpro-pets"),ne=localStorage.getItem("vetpro-consultations"),Ae=localStorage.getItem("vetpro-appointments"),Me=localStorage.getItem("vetpro-prescriptions"),Se=localStorage.getItem("vetpro-farms"),Fe=localStorage.getItem("vetpro-farmInterventions"),Zt=localStorage.getItem("vetpro-vaccinations"),Ft=localStorage.getItem("vetpro-vaccinationProtocols"),qe=localStorage.getItem("vetpro-antiparasitics"),cn=localStorage.getItem("vetpro-antiparasiticProtocols"),Mr=localStorage.getItem("vetpro-stockItems"),$i=localStorage.getItem("vetpro-stockAlerts"),Ri=localStorage.getItem("vetpro-stockMovements"),Rf=localStorage.getItem("vetpro-accountingEntries");if(L&&J){const gB=JSON.parse(L),p_=JSON.parse(J),vB=ne?JSON.parse(ne):pp,xB=Ae?JSON.parse(Ae):gp,yB=Me?JSON.parse(Me):vp,jB=Se?JSON.parse(Se):xp,bB=Fe?JSON.parse(Fe):yp,wB=Zt?JSON.parse(Zt):jp,NB=Ft?JSON.parse(Ft):bp,SB=qe?JSON.parse(qe):Cc,_B=cn?JSON.parse(cn):ah,CB=Mr?JSON.parse(Mr):QP,PB=$i?JSON.parse($i):[],AB=Ri?JSON.parse(Ri):[],kB=Rf?JSON.parse(Rf):[];return{clients:gB.map(g_=>({...g_,pets:p_.filter(TB=>TB.ownerId===g_.id)})),pets:p_,consultations:vB,appointments:xB,prescriptions:yB,farms:jB,farmInterventions:bB,vaccinations:wB,vaccinationProtocols:NB,antiparasitics:SB,antiparasiticProtocols:_B,stockItems:CB,stockAlerts:PB,stockMovements:AB,accountingEntries:kB}}}catch(L){console.error("Erreur lors du chargement des données:",L)}return{clients:YP.map(L=>({...L,pets:sh.filter(J=>J.ownerId===L.id)})),pets:sh,consultations:pp,appointments:gp,prescriptions:vp,farms:xp,farmInterventions:yp,vaccinations:jp,vaccinationProtocols:bp,antiparasitics:Cc,antiparasiticProtocols:ah,stockItems:QP,stockAlerts:[],stockMovements:[],accountingEntries:[]}},n=(z,L,J,ne=d,Ae=m,Me=g,Se=v,Fe=y,Zt=w,Ft=_,qe=C,cn=T,Mr=k,$i=I,Ri=V)=>{try{localStorage.setItem("vetpro-clients",JSON.stringify(z)),localStorage.setItem("vetpro-pets",JSON.stringify(L)),localStorage.setItem("vetpro-consultations",JSON.stringify(J)),localStorage.setItem("vetpro-appointments",JSON.stringify(ne)),localStorage.setItem("vetpro-prescriptions",JSON.stringify(Ae)),localStorage.setItem("vetpro-farms",JSON.stringify(Me)),localStorage.setItem("vetpro-farmInterventions",JSON.stringify(Se)),localStorage.setItem("vetpro-vaccinations",JSON.stringify(Fe)),localStorage.setItem("vetpro-vaccinationProtocols",JSON.stringify(Zt)),localStorage.setItem("vetpro-antiparasitics",JSON.stringify(Ft)),localStorage.setItem("vetpro-antiparasiticProtocols",JSON.stringify(qe)),localStorage.setItem("vetpro-stockItems",JSON.stringify(cn)),localStorage.setItem("vetpro-stockAlerts",JSON.stringify(Mr)),localStorage.setItem("vetpro-stockMovements",JSON.stringify($i)),localStorage.setItem("vetpro-accountingEntries",JSON.stringify(Ri))}catch(Rf){console.error("Erreur lors de la sauvegarde des données:",Rf)}},r=t(),[a,i]=b.useState(r.clients),[o,l]=b.useState(r.pets),[c,u]=b.useState(r.consultations),[d,h]=b.useState(r.appointments),[m,f]=b.useState(r.prescriptions),[g,p]=b.useState(r.farms),[v,x]=b.useState(r.farmInterventions),[y,j]=b.useState(r.vaccinations),[w,N]=b.useState(r.vaccinationProtocols),[_,S]=b.useState(r.antiparasitics),[C,A]=b.useState(r.antiparasiticProtocols),[T,E]=b.useState(r.stockItems||[]),[k,R]=b.useState(r.stockAlerts||[]),[I,W]=b.useState(r.stockMovements||[]),[V,q]=b.useState(r.accountingEntries||[]);b.useEffect(()=>{localStorage.getItem("vetpro-antiparasiticProtocols")||localStorage.setItem("vetpro-antiparasiticProtocols",JSON.stringify(ah)),localStorage.getItem("vetpro-antiparasitics")||(localStorage.setItem("vetpro-antiparasitics",JSON.stringify(Cc)),S(Cc))},[]),b.useEffect(()=>{const z=new Date;new Date(z.getFullYear(),z.getMonth(),1),new Date(z.getFullYear(),z.getMonth()+1,0)},[]),b.useEffect(()=>{const z=new Date,L=new Date(z.getFullYear(),z.getMonth(),1),J=new Date(z.getFullYear(),z.getMonth()+1,0);Hy(L.toISOString().split("T")[0],J.toISOString().split("T")[0]),Ky(L.toISOString().split("T")[0],J.toISOString().split("T")[0])},[c,y,_,m,I]),b.useEffect(()=>{},[_]),b.useEffect(()=>{a.length>0&&c.length>=0&&y.length>=0&&_.length>=0&&d.length>=0&&a.forEach(z=>{X(z.id)})},[a.length,c.length,y.length,_.length,d.length]);const P=z=>{const L={...z,name:`${z.firstName} ${z.lastName}`,id:Math.max(...a.map(ne=>ne.id),0)+1,pets:[],lastVisit:new Date().toISOString().split("T")[0],totalVisits:0},J=[...a,L];i(J),n(J,o,c,d,m,g,v,y)},O=z=>{const L={...z,id:Math.max(...o.map(Ae=>Ae.id),0)+1,status:z.status||"healthy",lastVisit:new Date().toISOString().split("T")[0]},J=[...o,L];l(J);const ne=a.map(Ae=>Ae.id===z.ownerId?{...Ae,pets:[...Ae.pets,{id:L.id,name:L.name,type:L.type,breed:L.breed,birthDate:L.birthDate,weight:L.weight,color:L.color,microchip:L.microchip,medicalNotes:L.medicalNotes,photo:L.photo,ownerId:L.ownerId,owner:L.owner,status:L.status,lastVisit:L.lastVisit,nextAppointment:L.nextAppointment,vaccinations:L.vaccinations}]}:Ae);i(ne),n(ne,J,c,d,m,g,v,y)},B=(z,L)=>{const J=a.map(ne=>ne.id===z?{...ne,...L,name:L.firstName&&L.lastName?`${L.firstName} ${L.lastName}`:ne.name}:ne);i(J),n(J,o,c,d,m,g,v,y)},U=(z,L)=>{({...o.find(Ae=>Ae.id===z),...L});const J=o.map(Ae=>Ae.id===z?{...Ae,...L}:Ae);l(J);const ne=a.map(Ae=>({...Ae,pets:Ae.pets.map(Me=>Me.id===z?{...Me,...L}:Me)}));i(ne),n(ne,J,c)},X=z=>{const L=a.find(qe=>qe.id===z);if(!L)return;const J=c.filter(qe=>qe.clientId===z),ne=y.filter(qe=>qe.clientId===z),Ae=_.filter(qe=>qe.clientId===z),Me=d.filter(qe=>qe.clientId===z&&qe.status==="completed"),Se=J.length+ne.length+Ae.length+Me.length,Fe=[...J.map(qe=>({date:qe.date,type:"consultation"})),...ne.map(qe=>({date:qe.dateGiven,type:"vaccination"})),...Ae.map(qe=>({date:qe.dateGiven,type:"antiparasitic"})),...Me.map(qe=>({date:qe.date,type:"appointment"}))],Zt=Fe.length>0?Fe.reduce((qe,cn)=>new Date(cn.date)>new Date(qe.date)?cn:qe).date:L.lastVisit,Ft=a.map(qe=>qe.id===z?{...qe,totalVisits:Se,lastVisit:Zt}:qe);return i(Ft),{totalVisits:Se,lastVisit:Zt}},ie=z=>{const L={...z,id:Math.max(...T.map(ne=>ne.id),0)+1,lastUpdated:new Date().toISOString(),totalValue:z.currentStock*z.purchasePrice},J=[...T,L];return E(J),n(a,o,c,d,m,g,v,y,w,_,C,J,k,I),L},re=(z,L)=>{const J=T.map(ne=>{if(ne.id===z){const Ae={...ne,...L};return(L.currentStock!==void 0||L.purchasePrice!==void 0)&&(Ae.totalValue=Ae.currentStock*Ae.purchasePrice),Ae.lastUpdated=new Date().toISOString(),Ae}return ne});return E(J),n(a,o,c,d,m,g,v,y,w,_,C,J,k,I),J.find(ne=>ne.id===z)},de=z=>{const L=T.filter(J=>J.id!==z);E(L),n(a,o,c,d,m,g,v,y,w,_,C,L,k,I)},pe=z=>{const L={...z,id:Math.max(...I.map(ne=>ne.id),0)+1},J=[...I,L];return W(J),n(a,o,c,d,m,g,v,y,w,_,C,T,k,J),L},ce=()=>{const z=[],L=new Date().toISOString().split("T")[0],J=new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0];return T.forEach(ne=>{ne.currentStock<=ne.minimumStock&&z.push({id:z.length+1,itemId:ne.id,itemName:ne.name,type:"low_stock",message:`Stock bas: ${ne.currentStock} ${ne.unit} restant(s)`,severity:ne.currentStock===0?"critical":"high",createdAt:new Date().toISOString(),isRead:!1}),ne.expirationDate&&(ne.expirationDate<L?z.push({id:z.length+1,itemId:ne.id,itemName:ne.name,type:"expired",message:`Expiré le ${ne.expirationDate}`,severity:"critical",createdAt:new Date().toISOString(),isRead:!1}):ne.expirationDate<=J&&z.push({id:z.length+1,itemId:ne.id,itemName:ne.name,type:"expiring_soon",message:`Expire le ${ne.expirationDate}`,severity:"medium",createdAt:new Date().toISOString(),isRead:!1}))}),z},se=z=>{const L={...z,id:Math.max(...c.map(Me=>Me.id),0)+1,createdAt:new Date().toISOString(),photos:z.photos||[]},J=[...c,L];u(J);const ne=o.map(Me=>Me.id===z.petId?{...Me,lastVisit:z.date}:Me);l(ne);const Ae=a.map(Me=>({...Me,pets:Me.pets.map(Se=>Se.id===z.petId?{...Se,lastVisit:z.date}:Se)}));i(Ae),X(z.clientId),n(Ae,ne,J)},ae=z=>{if(!o.find(Ae=>Ae.id===z))return;const J=o.filter(Ae=>Ae.id!==z);l(J);const ne=a.map(Ae=>({...Ae,pets:Ae.pets.filter(Me=>Me.id!==z)}));i(ne),n(ne,J,c)},le=()=>{localStorage.removeItem("vetpro-clients"),localStorage.removeItem("vetpro-pets"),localStorage.removeItem("vetpro-consultations"),localStorage.removeItem("vetpro-appointments"),localStorage.removeItem("vetpro-prescriptions"),localStorage.removeItem("vetpro-farms"),localStorage.removeItem("vetpro-farmInterventions"),localStorage.removeItem("vetpro-vaccinations"),localStorage.removeItem("vetpro-vaccinationProtocols"),localStorage.removeItem("vetpro-antiparasitics"),localStorage.removeItem("vetpro-antiparasiticProtocols");const z=YP.map(L=>({...L,pets:sh.filter(J=>J.ownerId===L.id)}));i(z),l(sh),u(pp),h(gp),f(vp),p(xp),x(yp),j(jp),N(bp),S(Cc),A(ah),n(z,sh,pp,gp,vp,xp,yp,jp,bp,Cc,ah)},H=()=>{const z={clients:a,pets:o,consultations:c,appointments:d,prescriptions:m,farms:g,farmInterventions:v,vaccinations:y,vaccinationProtocols:w,antiparasitics:_,antiparasiticProtocols:C},L=new Blob([JSON.stringify(z,null,2)],{type:"application/json"}),J=URL.createObjectURL(L),ne=document.createElement("a");ne.href=J,ne.download=`vetpro-data-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(ne),ne.click(),document.body.removeChild(ne),URL.revokeObjectURL(J)},Q=z=>{const L=z.clients.map(J=>({...J,pets:z.pets.filter(ne=>ne.ownerId===J.id)}));i(L),l(z.pets),u(z.consultations||[]),h(z.appointments||[]),f(z.prescriptions||[]),p(z.farms||[]),x(z.farmInterventions||[]),j(z.vaccinations||[]),N(z.vaccinationProtocols||[]),S(z.antiparasitics||[]),A(z.antiparasiticProtocols||[]),n(L,z.pets,z.consultations||[],z.appointments||[],z.prescriptions||[],z.farms||[],z.farmInterventions||[],z.vaccinations||[],z.vaccinationProtocols||[],z.antiparasitics||[],z.antiparasiticProtocols||[])},ve=(z,L)=>{const J=c.map(ne=>ne.id===z?{...ne,...L}:ne);u(J),n(a,o,J)},ge=z=>{const L=c.filter(J=>J.id!==z);u(L),n(a,o,L)},rt=z=>{const L=T.find(J=>J.name.toLowerCase()===z.productName.toLowerCase()&&J.category==="medication"&&J.isActive);return L&&L.currentStock>=1?{...z,stockItemId:L.id,isInStock:!0,stockQuantity:L.currentStock,stockDeducted:!0}:L&&L.currentStock>0?{...z,stockItemId:L.id,isInStock:!0,stockQuantity:L.currentStock,stockDeducted:!1}:{...z,isInStock:!1,stockQuantity:0,stockDeducted:!1}},Ge=z=>{const L=rt(z);let J=[...T];if(L.stockDeducted&&L.stockItemId){const Me=J.findIndex(Se=>Se.id===L.stockItemId);if(Me!==-1){const Se=J[Me];J[Me]={...Se,currentStock:Se.currentStock-1,lastUpdated:new Date().toISOString()},pe({itemId:L.stockItemId,itemName:L.productName,type:"out",quantity:1,reason:"Traitement antiparasitaire",reference:`Antiparasitaire #${Math.max(0,..._.map(Fe=>Fe.id))+1}`,performedBy:L.veterinarian,date:new Date().toISOString(),notes:`Traitement antiparasitaire de ${L.petName} - ${L.productName}`})}}const ne={...L,id:Math.max(0,..._.map(Me=>Me.id))+1,createdAt:new Date().toISOString()},Ae=[..._,ne];S(Ae),E(J),X(z.clientId),n(a,o,c,d,m,g,v,y,w,Ae,C,J,k,I),localStorage.getItem("vetpro-antiparasitics")},dt=(z,L)=>{const J=_.map(ne=>ne.id===z?{...ne,...L}:ne);S(J),n(a,o,c,d,m,g,v,y,w,J,C)},te=z=>{const L=_.filter(J=>J.id!==z);S(L),n(a,o,c,d,m,g,v,y,w,L,C)},Pe=z=>{const L={...z,id:Math.max(0,...C.map(ne=>ne.id))+1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},J=[...C,L];A(J),localStorage.setItem("vetpro-antiparasiticProtocols",JSON.stringify(J))},oe=(z,L)=>{const J=C.map(ne=>ne.id===z?{...ne,...L,updatedAt:new Date().toISOString()}:ne);A(J),localStorage.setItem("vetpro-antiparasiticProtocols",JSON.stringify(J))},Ee=z=>{const L=C.filter(J=>J.id!==z);A(L),localStorage.setItem("vetpro-antiparasiticProtocols",JSON.stringify(L))},vt=z=>_.find(L=>L.id===z),At=z=>_.filter(J=>J.petId===z),xn=z=>_.filter(L=>L.clientId===z),Ve=()=>{const z=new Date().toISOString().split("T")[0];return _.filter(L=>L.nextDueDate&&L.nextDueDate<z&&L.status!=="completed")},yt=(z=7)=>{const L=new Date,J=new Date(L.getTime()+z*24*60*60*1e3);return _.filter(ne=>{if(!ne.nextDueDate)return!1;const Ae=new Date(ne.nextDueDate);return Ae>=L&&Ae<=J})},Cn=z=>_.filter(L=>L.status===z),rr=z=>C.find(L=>L.id===z),Yr=z=>C.filter(L=>L.species===z&&L.isActive),yn=()=>C.filter(z=>z.isActive),Ii=z=>a.find(L=>L.id===z),Ln=z=>o.find(L=>L.id===z),Ha=z=>c.find(L=>L.id===z),Ms=z=>o.filter(L=>L.ownerId===z),pc=z=>c.filter(L=>L.petId===z),ma=z=>c.filter(L=>L.clientId===z),K=z=>{const L={...z,id:Math.max(...d.map(ne=>ne.id),0)+1,createdAt:new Date().toISOString()},J=[...d,L];h(J),X(z.clientId),n(a,o,c,J,m)},Ce=(z,L)=>{const J=d.map(ne=>ne.id===z?{...ne,...L}:ne);h(J),n(a,o,c,J,m)},fe=z=>{const L=d.filter(J=>J.id!==z);h(L),n(a,o,c,L,m)},ln=z=>d.find(L=>L.id===z),Dr=z=>d.filter(L=>L.clientId===z),Is=z=>d.filter(L=>L.petId===z),fs=z=>d.filter(L=>L.date===z),Uy=()=>{const z=new Date().toISOString().split("T")[0];return d.filter(L=>L.date>=z&&L.status!=="cancelled"&&L.status!=="completed").sort((L,J)=>new Date(L.date+"T"+L.time).getTime()-new Date(J.date+"T"+J.time).getTime())},Xe=()=>{const z=new Date().toISOString().split("T")[0];return d.filter(L=>L.date<z&&L.status==="scheduled").sort((L,J)=>new Date(L.date+"T"+L.time).getTime()-new Date(J.date+"T"+J.time).getTime())},Nt=z=>z.map(L=>{const J=T.find(ne=>ne.name.toLowerCase()===L.name.toLowerCase()&&ne.category==="medication"&&ne.isActive);return J&&J.currentStock>=L.quantity?{...L,stockItemId:J.id,isInStock:!0,stockQuantity:J.currentStock,stockDeducted:!0}:J&&J.currentStock>0?{...L,stockItemId:J.id,isInStock:!0,stockQuantity:J.currentStock,stockDeducted:!1}:{...L,isInStock:!1,stockQuantity:0,stockDeducted:!1}}),zt=z=>{const L=Nt(z.medications);let J=[...T];L.forEach(Me=>{if(Me.stockDeducted&&Me.stockItemId){const Se=J.findIndex(Fe=>Fe.id===Me.stockItemId);if(Se!==-1){const Fe=J[Se];J[Se]={...Fe,currentStock:Fe.currentStock-Me.quantity,lastUpdated:new Date().toISOString()},pe({itemId:Me.stockItemId,itemName:Me.name,type:"out",quantity:Me.quantity,reason:"Prescription médicale",reference:`Prescription #${Math.max(...m.map(Zt=>Zt.id),0)+1}`,performedBy:z.prescribedBy,date:new Date().toISOString(),notes:`Prescription pour ${z.petName} - ${z.diagnosis}`})}}});const ne={...z,medications:L,id:Math.max(...m.map(Me=>Me.id),0)+1,createdAt:new Date().toISOString()},Ae=[...m,ne];f(Ae),E(J),n(a,o,c,d,Ae,g,v,y,w,_,C,J,k,I,V)},Qr=(z,L)=>{const J=m.map(ne=>ne.id===z?{...ne,...L}:ne);f(J),n(a,o,c,d,J,g,v,y,w,_,C,T,k,I,V)},Xr=z=>{const L=m.filter(J=>J.id!==z);f(L),n(a,o,c,d,L,g,v,y,w,_,C,T,k,I,V)},fa=z=>m.find(L=>L.id===z),Ka=z=>m.filter(L=>L.petId===z),Jr=z=>m.filter(L=>L.consultationId===z),pa=()=>m.filter(z=>z.status==="active").sort((z,L)=>new Date(L.date).getTime()-new Date(z.date).getTime()),F8=z=>{const L={...z,id:Math.max(...g.map(ne=>ne.id),0)+1,createdAt:new Date().toISOString()},J=[...g,L];p(J),n(a,o,c,d,m,J,v)},L8=(z,L)=>{const J=g.map(ne=>ne.id===z?{...ne,...L}:ne);p(J),n(a,o,c,d,m,J,v)},B8=z=>{const L=g.filter(J=>J.id!==z);p(L),n(a,o,c,d,m,L,v)},z8=z=>{const L={...z,id:Math.max(...v.map(ne=>ne.id),0)+1,createdAt:new Date().toISOString()},J=[...v,L];x(J),n(a,o,c,d,m,g,J)},V8=(z,L)=>{const J=v.map(ne=>ne.id===z?{...ne,...L}:ne);x(J),n(a,o,c,d,m,g,J)},q8=z=>{const L=v.filter(J=>J.id!==z);x(L),n(a,o,c,d,m,g,L)},U8=z=>g.find(L=>L.id===z),W8=z=>v.find(L=>L.id===z),H8=z=>v.filter(L=>L.farmId===z),K8=()=>{const z=new Date().toISOString().split("T")[0];return v.filter(L=>L.date>=z&&L.status!=="cancelled").sort((L,J)=>new Date(L.date).getTime()-new Date(J.date).getTime())},G8=z=>g.filter(L=>L.status===z),Y8=z=>{const L=T.find(J=>J.name.toLowerCase()===z.vaccineName.toLowerCase()&&J.category==="vaccine"&&J.isActive);return L&&L.currentStock>=1?{...z,stockItemId:L.id,isInStock:!0,stockQuantity:L.currentStock,stockDeducted:!0}:L&&L.currentStock>0?{...z,stockItemId:L.id,isInStock:!0,stockQuantity:L.currentStock,stockDeducted:!1}:{...z,isInStock:!1,stockQuantity:0,stockDeducted:!1}},Wy=z=>{const L=Y8(z);let J=[...T];if(L.stockDeducted&&L.stockItemId){const Ae=J.findIndex(Me=>Me.id===L.stockItemId);if(Ae!==-1){const Me=J[Ae];J[Ae]={...Me,currentStock:Me.currentStock-1,lastUpdated:new Date().toISOString()},pe({itemId:L.stockItemId,itemName:L.vaccineName,type:"out",quantity:1,reason:"Vaccination",reference:`Vaccination #${Math.max(...y.map(Se=>Se.id),0)+1}`,performedBy:L.veterinarian,date:new Date().toISOString(),notes:`Vaccination de ${L.petName} - ${L.vaccineName}`})}}const ne={...L,id:Math.max(...y.map(Ae=>Ae.id),0)+1,createdAt:new Date().toISOString()};return j(Ae=>{const Me=[...Ae,ne];return X(z.clientId),n(a,o,c,d,m,g,v,Me,w,_,C,J,k,I),Me}),E(J),ne.id},If=(z,L)=>{const J=y.map(ne=>ne.id===z?{...ne,...L}:ne);j(J),n(a,o,c,d,m,g,v,J)},Q8=z=>{const L=y.find(ne=>ne.id===z);if(!L)return;let J=[...y];L.vaccinationCategory==="new"?(y.filter(ne=>ne.originalVaccinationId===z),J=y.filter(ne=>ne.id!==z&&ne.originalVaccinationId!==z)):J=y.filter(ne=>ne.id!==z),j(J),n(a,o,c,d,m,g,v,J)},$f=z=>y.find(L=>L.id===z),X8=z=>y.filter(L=>L.petId===z),J8=z=>y.filter(L=>L.clientId===z),Z8=()=>{const z=new Date().toISOString().split("T")[0];return y.filter(L=>L.nextDueDate<z&&L.status!=="completed").sort((L,J)=>new Date(L.nextDueDate).getTime()-new Date(J.nextDueDate).getTime())},eB=()=>{const z=new Date,L=new Date(z.getTime()+30*24*60*60*1e3).toISOString().split("T")[0],J=z.toISOString().split("T")[0];return y.filter(ne=>ne.nextDueDate>=J&&ne.nextDueDate<=L&&ne.status!=="completed").sort((ne,Ae)=>new Date(ne.nextDueDate).getTime()-new Date(Ae.nextDueDate).getTime())},tB=z=>y.filter(L=>L.status===z),nB=()=>{const z=new Date().toISOString().split("T")[0];let L=!1;const J=y.map(ne=>ne.status==="completed"?ne:ne.nextDueDate<z&&ne.status!=="overdue"?(L=!0,{...ne,status:"overdue"}):ne.nextDueDate>=z&&ne.status!=="scheduled"?(L=!0,{...ne,status:"scheduled"}):ne);return L&&(j(J),n(a,o,c,d,m,g,v,J)),J},rB=z=>{const L={...z,id:Math.max(...w.map(ne=>ne.id),0)+1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},J=[...w,L];N(J),n(a,o,c,d,m,g,v,y,J)},sB=(z,L)=>{const J=w.map(ne=>ne.id===z?{...ne,...L,updatedAt:new Date().toISOString()}:ne);N(J),n(a,o,c,d,m,g,v,y,J)},aB=z=>{const L=w.filter(J=>J.id!==z);N(L),n(a,o,c,d,m,g,v,y,L)},iB=z=>w.find(L=>L.id===z),oB=z=>w.filter(L=>L.species===z&&L.isActive),lB=()=>w.filter(z=>z.isActive),cB=(z,L,J)=>{const ne=w.find(Se=>Se.name===z&&Se.species===L&&Se.isActive);if(!ne||!ne.intervals.length)return null;const Ae=ne.intervals[ne.intervals.length-1],Me=new Date(J);return Me.setDate(Me.getDate()+Ae.offsetDays),Me.toISOString().split("T")[0]},uB=(z,L,J)=>{var Ft;const ne=$f(z);if(!ne)return;const Ae={clientId:ne.clientId,clientName:ne.clientName,petId:ne.petId,petName:ne.petName,date:L,time:J,type:"vaccination",duration:30,reason:`Rappel vaccinal - ${ne.vaccineName}`,notes:`Rappel pour ${ne.vaccineName} (vaccination originale ID: ${z})`,status:"scheduled",reminderSent:!1};K(Ae);const Me=Math.max(...d.map(qe=>qe.id),0)+1,Se={petId:ne.petId,petName:ne.petName,clientId:ne.clientId,clientName:ne.clientName,vaccineName:ne.vaccineName,vaccineType:ne.vaccineType,vaccinationCategory:"reminder",dateGiven:L,nextDueDate:ne.nextDueDate,batchNumber:ne.batchNumber,veterinarian:ne.veterinarian,notes:`Rappel de ${ne.vaccineName} (original: ${z})`,status:"scheduled",cost:ne.cost,location:ne.location,manufacturer:ne.manufacturer,originalVaccinationId:z,reminderAppointmentId:Me,isReminder:!0};Wy(Se);const Fe={id:Math.max(...((Ft=ne.reminderHistory)==null?void 0:Ft.map(qe=>qe.id))||[0],0)+1,vaccinationId:z,appointmentId:Me,scheduledDate:L,status:"scheduled",notes:`Rappel programmé pour ${ne.vaccineName}`,createdAt:new Date().toISOString()},Zt=[...ne.reminderHistory||[],Fe];return If(z,{reminderHistory:Zt}),{appointment:Ae,reminderVaccination:Se,reminder:Fe}},dB=(z,L,J)=>{var Se;const ne=$f(z);if(!ne)return;const Me={status:"completed",reminderHistory:((Se=ne.reminderHistory)==null?void 0:Se.map(Fe=>Fe.appointmentId===L?{...Fe,status:"completed"}:Fe))||[],reminderAppointmentId:void 0};return J&&(Me.nextDueDate=J),If(z,Me),Ce(L,{status:"completed"}),ne},hB=(z,L)=>{const J=$f(z);if(!J)return null;const ne={petId:J.petId,petName:J.petName,clientId:J.clientId,clientName:J.clientName,vaccineName:J.vaccineName,vaccineType:J.vaccineType,vaccinationCategory:"reminder",dateGiven:L.datePerformed,nextDueDate:L.newNextDueDate||J.nextDueDate,calculatedDueDate:J.calculatedDueDate,batchNumber:L.batchNumber||J.batchNumber,veterinarian:L.veterinarian,notes:L.notes||`Rappel effectué - ${J.vaccineName}`,status:"completed",cost:J.cost,location:J.location,manufacturer:J.manufacturer,expirationDate:J.expirationDate,adverseReactions:J.adverseReactions,originalVaccinationId:z,isReminder:!0};Wy(ne);const Ae={status:"completed",reminderAppointmentId:void 0};return L.newNextDueDate&&(Ae.nextDueDate=L.newNextDueDate),If(z,Ae),ne},gc=z=>{const L={...z,id:Math.max(...V.map(ne=>ne.id),0)+1,createdAt:new Date().toISOString()},J=[...V,L];return q(J),n(a,o,c,d,m,g,v,y,w,_,C,T,k,I,J),L},mB=(z,L)=>{const J=V.map(ne=>ne.id===z?{...ne,...L}:ne);q(J),n(a,o,c,d,m,g,v,y,w,_,C,T,k,I,J)},fB=z=>{const L=V.filter(J=>J.id!==z);q(L),n(a,o,c,d,m,g,v,y,w,_,C,T,k,I,L)},Hy=(z,L)=>{const J=new Date(z),ne=new Date(L);let Ae=0;const Me={consultations:0,vaccinations:0,antiparasitics:0,prescriptions:0,stockSales:0,manualEntries:0,recurringCharges:0};return c.filter(Se=>{const Fe=new Date(Se.date);return Fe>=J&&Fe<=ne}).forEach(Se=>{var Ft;const Fe=parseFloat(((Ft=Se.cost)==null?void 0:Ft.toString())||"0");Ae+=Fe,Me.consultations+=Fe,V.find(qe=>qe.source==="consultation"&&qe.sourceId===Se.id)||gc({type:"revenue",category:"automatic",frequency:"occasional",description:`Consultation - ${Se.petName}`,amount:Fe,date:Se.date,reference:`Consultation #${Se.id}`,source:"consultation",sourceId:Se.id,notes:`Consultation automatique pour ${Se.petName}`})}),y.filter(Se=>{const Fe=new Date(Se.dateGiven);return Fe>=J&&Fe<=ne}).forEach(Se=>{var Ft;const Fe=parseFloat(((Ft=Se.cost)==null?void 0:Ft.toString())||"0");Ae+=Fe,Me.vaccinations+=Fe,V.find(qe=>qe.source==="vaccination"&&qe.sourceId===Se.id)||gc({type:"revenue",category:"automatic",frequency:"occasional",description:`Vaccination - ${Se.vaccineName}`,amount:Fe,date:Se.dateGiven,reference:`Vaccination #${Se.id}`,source:"vaccination",sourceId:Se.id,notes:`Vaccination automatique pour ${Se.petName}`})}),_.filter(Se=>{const Fe=new Date(Se.dateGiven);return Fe>=J&&Fe<=ne}).forEach(Se=>{var Ft;const Fe=parseFloat(((Ft=Se.cost)==null?void 0:Ft.toString())||"0");Ae+=Fe,Me.antiparasitics+=Fe,V.find(qe=>qe.source==="antiparasitic"&&qe.sourceId===Se.id)||gc({type:"revenue",category:"automatic",frequency:"occasional",description:`Antiparasitaire - ${Se.productName}`,amount:Fe,date:Se.dateGiven,reference:`Antiparasitaire #${Se.id}`,source:"antiparasitic",sourceId:Se.id,notes:`Antiparasitaire automatique pour ${Se.petName}`})}),m.filter(Se=>{const Fe=new Date(Se.createdAt);return Fe>=J&&Fe<=ne}).forEach(Se=>{const Fe=Se.medications.reduce((Ft,qe)=>{var cn;return Ft+parseFloat(((cn=qe.cost)==null?void 0:cn.toString())||"0")*qe.quantity},0);Ae+=Fe,Me.prescriptions+=Fe,!V.find(Ft=>Ft.source==="prescription"&&Ft.sourceId===Se.id)&&Fe>0&&gc({type:"revenue",category:"automatic",frequency:"occasional",description:`Prescription - ${Se.petName}`,amount:Fe,date:Se.createdAt,reference:`Prescription #${Se.id}`,source:"prescription",sourceId:Se.id,notes:`Prescription automatique pour ${Se.petName}`})}),{totalRevenue:Ae,revenueBreakdown:Me}},Ky=(z,L)=>{const J=new Date(z),ne=new Date(L);let Ae=0;const Me={stockPurchases:0,salaries:0,rent:0,taxes:0,insurance:0,other:0,manualEntries:0,recurringCharges:0};return I.filter(Se=>{const Fe=new Date(Se.date);return Fe>=J&&Fe<=ne&&Se.type==="in"&&Se.reason==="Achat fournisseur"}).forEach(Se=>{const Fe=T.find(Zt=>Zt.id===Se.itemId);if(Fe){const Zt=Fe.purchasePrice*Se.quantity;Ae+=Zt,Me.stockPurchases+=Zt,V.find(qe=>qe.source==="stock_purchase"&&qe.reference===Se.reference)||gc({type:"expense",category:"automatic",frequency:"occasional",description:`Achat stock - ${Se.itemName}`,amount:Zt,date:Se.date,reference:Se.reference,source:"stock_purchase",notes:`Achat automatique de ${Se.quantity} ${Se.itemName}`})}}),{totalExpenses:Ae,expenseBreakdown:Me}},pB=(z,L,J)=>{const{totalRevenue:ne,revenueBreakdown:Ae}=Hy(L,J),{totalExpenses:Me,expenseBreakdown:Se}=Ky(L,J),Fe=V.filter(cn=>{const Mr=new Date(cn.date),$i=new Date(L),Ri=new Date(J);return Mr>=$i&&Mr<=Ri&&cn.category==="manual"&&cn.type==="revenue"}).reduce((cn,Mr)=>cn+Mr.amount,0),Zt=V.filter(cn=>{const Mr=new Date(cn.date),$i=new Date(L),Ri=new Date(J);return Mr>=$i&&Mr<=Ri&&cn.category==="manual"&&cn.type==="expense"}).reduce((cn,Mr)=>cn+Mr.amount,0);Ae.manualEntries=Fe,Se.manualEntries=Zt;const Ft=ne+Fe,qe=Me+Zt;return{period:z,totalRevenue:Ft,totalExpenses:qe,netIncome:Ft-qe,revenueBreakdown:Ae,expenseBreakdown:Se}};return s.jsx(AR.Provider,{value:{clients:a,pets:o,consultations:c,appointments:d,prescriptions:m,farms:g,farmInterventions:v,vaccinations:y,vaccinationProtocols:w,antiparasitics:_,antiparasiticProtocols:C,stockItems:T,stockAlerts:k,stockMovements:I,accountingEntries:V,addClient:P,addPet:O,addConsultation:se,addAppointment:K,addPrescription:zt,addFarm:F8,addFarmIntervention:z8,addVaccination:Wy,addVaccinationProtocol:rB,addAntiparasitic:Ge,addAntiparasiticProtocol:Pe,addStockItem:ie,addStockMovement:pe,addAccountingEntry:gc,updateAccountingEntry:mB,deleteAccountingEntry:fB,calculateAutomaticRevenue:Hy,calculateAutomaticExpenses:Ky,generateAccountingSummary:pB,updateClient:B,updatePet:U,updateConsultation:ve,updateAppointment:Ce,updatePrescription:Qr,updateFarm:L8,updateFarmIntervention:V8,updateVaccination:If,updateVaccinationProtocol:sB,updateAntiparasitic:dt,updateAntiparasiticProtocol:oe,updateStockItem:re,deletePet:ae,deleteConsultation:ge,deleteAppointment:fe,deletePrescription:Xr,deleteFarm:B8,deleteFarmIntervention:q8,deleteVaccination:Q8,deleteVaccinationProtocol:aB,deleteAntiparasitic:te,deleteAntiparasiticProtocol:Ee,deleteStockItem:de,resetData:le,exportData:H,importData:Q,getClientById:Ii,getPetById:Ln,getConsultationById:Ha,getAppointmentById:ln,getPrescriptionById:fa,getFarmById:U8,getFarmInterventionById:W8,getVaccinationById:$f,getVaccinationProtocolById:iB,getVaccinationProtocolsBySpecies:oB,getActiveVaccinationProtocols:lB,getAntiparasiticById:vt,getAntiparasiticsByPetId:At,getAntiparasiticsByClientId:xn,getOverdueAntiparasitics:Ve,getUpcomingAntiparasitics:yt,getAntiparasiticsByStatus:Cn,getAntiparasiticProtocolById:rr,getAntiparasiticProtocolsBySpecies:Yr,getActiveAntiparasiticProtocols:yn,getPetsByOwnerId:Ms,getConsultationsByPetId:pc,getConsultationsByClientId:ma,getAppointmentsByClientId:Dr,getAppointmentsByPetId:Is,getAppointmentsByDate:fs,getUpcomingAppointments:Uy,getOverdueAppointments:Xe,getPrescriptionsByPetId:Ka,getPrescriptionsByConsultationId:Jr,getActivePrescriptions:pa,getFarmInterventionsByFarmId:H8,getUpcomingFarmInterventions:K8,getFarmsByStatus:G8,getVaccinationsByPetId:X8,getVaccinationsByClientId:J8,getOverdueVaccinations:Z8,getUpcomingVaccinations:eB,getVaccinationsByStatus:tB,createVaccinationReminder:uB,completeVaccinationReminder:dB,confirmVaccinationReminder:hB,updateVaccinationStatuses:nB,calculateDueDateFromProtocol:cB,updateClientStats:X,getStockAlerts:ce},children:e})}const bt=()=>{const e=b.useContext(AR);if(e===void 0)throw new Error("useClients must be used within a ClientProvider");return e},G=b.forwardRef(({className:e,type:t,...n},r)=>s.jsx("input",{type:t,className:De("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));G.displayName="Input";var fJ="Label",kR=b.forwardRef((e,t)=>s.jsx(ze.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));kR.displayName=fJ;var TR=kR;const pJ=gf("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),D=b.forwardRef(({className:e,...t},n)=>s.jsx(TR,{ref:n,className:De(pJ(),e),...t}));D.displayName=TR.displayName;const Z=b.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:De("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Z.displayName="Card";const he=b.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:De("flex flex-col space-y-1.5 p-6",e),...t}));he.displayName="CardHeader";const me=b.forwardRef(({className:e,...t},n)=>s.jsx("h3",{ref:n,className:De("text-2xl font-semibold leading-none tracking-tight",e),...t}));me.displayName="CardTitle";const Lu=b.forwardRef(({className:e,...t},n)=>s.jsx("p",{ref:n,className:De("text-sm text-muted-foreground",e),...t}));Lu.displayName="CardDescription";const ee=b.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:De("p-6 pt-0",e),...t}));ee.displayName="CardContent";const gJ=b.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:De("flex items-center p-6 pt-0",e),...t}));gJ.displayName="CardFooter";const vJ=gf("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),qg=b.forwardRef(({className:e,variant:t,...n},r)=>s.jsx("div",{ref:r,role:"alert",className:De(vJ({variant:t}),e),...n}));qg.displayName="Alert";const xJ=b.forwardRef(({className:e,...t},n)=>s.jsx("h5",{ref:n,className:De("mb-1 font-medium leading-none tracking-tight",e),...t}));xJ.displayName="AlertTitle";const Ug=b.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:De("text-sm [&_p]:leading-relaxed",e),...t}));Ug.displayName="AlertDescription";function yJ(){const[e,t]=b.useState(""),[n,r]=b.useState(""),[a,i]=b.useState(!1),[o,l]=b.useState(""),[c,u]=b.useState(!1),[d,h]=b.useState(!1);oc();const m=SR(),f=cJ(),g=uJ(),p=async j=>{if(j.preventDefault(),l(""),!e||!n){l("Veuillez remplir tous les champs");return}try{await m.mutateAsync({email:e,password:n})}catch(w){l(w instanceof Error?w.message:"Une erreur inattendue est survenue")}},v=async()=>{l("");try{await f.mutateAsync()}catch{l("Erreur lors de la connexion avec Google")}},x=async j=>{if(j.preventDefault(),l(""),!e){l("Veuillez saisir votre email");return}try{await g.mutateAsync(e),h(!0)}catch(w){l(w instanceof Error?w.message:"Une erreur est survenue")}},y=()=>{u(!1),h(!1),l(""),r("")};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-green-50 dark:from-gray-900 dark:to-gray-800 px-4",children:s.jsxs(Z,{className:"w-full max-w-md",children:[s.jsxs(he,{className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"p-3 bg-primary/10 rounded-full",children:s.jsx(ht,{className:"h-8 w-8 text-primary"})})}),s.jsx(me,{className:"text-2xl font-bold",children:"VetPro CRM3"}),s.jsx(Lu,{children:c?d?"Vérifiez votre email":"Réinitialiser votre mot de passe":"Connectez-vous à votre espace vétérinaire"})]}),s.jsx(ee,{children:d?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Nous avons envoyé un lien de réinitialisation à ",s.jsx("strong",{children:e})]}),s.jsx("p",{className:"text-xs text-muted-foreground mb-6",children:"Cliquez sur le lien dans l'email pour réinitialiser votre mot de passe. Si vous ne voyez pas l'email, vérifiez votre dossier spam."})]}),s.jsxs(F,{onClick:y,className:"w-full",children:[s.jsx(MC,{className:"mr-2 h-4 w-4"}),"Retour à la connexion"]})]}):c?s.jsxs("form",{onSubmit:x,className:"space-y-4",children:[o&&s.jsx(qg,{variant:"destructive",children:s.jsx(Ug,{children:o})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"reset-email",children:"Email"}),s.jsx(G,{id:"reset-email",type:"email",placeholder:"votre.email@example.com",value:e,onChange:j=>t(j.target.value),disabled:g.isPending,required:!0}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Entrez l'adresse email associée à votre compte"})]}),s.jsx(F,{type:"submit",className:"w-full",disabled:g.isPending,children:g.isPending?s.jsxs(s.Fragment,{children:[s.jsx(Kn,{className:"mr-2 h-4 w-4 animate-spin"}),"Envoi en cours..."]}):"Envoyer le lien de réinitialisation"}),s.jsx("div",{className:"text-center",children:s.jsxs(F,{type:"button",variant:"link",onClick:y,className:"text-sm",children:[s.jsx(MC,{className:"mr-1 h-4 w-4"}),"Retour à la connexion"]})})]}):s.jsxs(s.Fragment,{children:[s.jsxs("form",{onSubmit:p,className:"space-y-4",children:[o&&s.jsx(qg,{variant:"destructive",children:s.jsx(Ug,{children:o})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"email",children:"Email"}),s.jsx(G,{id:"email",type:"email",placeholder:"vet@vetpro.com",value:e,onChange:j=>t(j.target.value),disabled:m.isPending,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"password",children:"Mot de passe"}),s.jsxs("div",{className:"relative",children:[s.jsx(G,{id:"password",type:a?"text":"password",placeholder:"••••••••",value:n,onChange:j=>r(j.target.value),disabled:m.isPending,required:!0}),s.jsx(F,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>i(!a),disabled:m.isPending,children:a?s.jsx(yb,{className:"h-4 w-4"}):s.jsx(Nn,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(F,{type:"button",variant:"link",className:"text-xs p-0 h-auto",onClick:()=>u(!0),children:"Mot de passe oublié ?"})})]}),s.jsx(F,{type:"submit",className:"w-full",disabled:m.isPending,children:m.isPending?s.jsxs(s.Fragment,{children:[s.jsx(Kn,{className:"mr-2 h-4 w-4 animate-spin"}),"Connexion..."]}):"Se connecter"})]}),s.jsxs("div",{className:"relative my-6",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("span",{className:"w-full border-t"})}),s.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:s.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Ou continuer avec"})})]}),s.jsx(F,{type:"button",variant:"outline",className:"w-full",onClick:v,disabled:m.isPending||f.isPending,children:f.isPending?s.jsxs(s.Fragment,{children:[s.jsx(Kn,{className:"mr-2 h-4 w-4 animate-spin"}),"Connexion avec Google..."]}):s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"mr-2 h-4 w-4",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuer avec Google"]})}),s.jsx("div",{className:"mt-6 text-center",children:s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Pas encore de compte ?"," ",s.jsx("a",{href:"/register",className:"text-primary hover:underline",children:"S'inscrire"})]})})]})})]})})}function vr({children:e}){const{isAuthenticated:t,isLoading:n,user:r}=oc(),[a,i]=b.useState(!1);return b.useEffect(()=>{if(n){const o=setTimeout(()=>{i(!0)},3e3);return()=>clearTimeout(o)}else i(!1)},[n]),a?s.jsx(qb,{to:"/login",replace:!0}):n&&!a?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Vérification de l'authentification..."})]})}):!t||!r?s.jsx(qb,{to:"/login",replace:!0}):s.jsx(s.Fragment,{children:e})}function jJ({children:e,redirectTo:t="/dashboard"}){const{isAuthenticated:n,isLoading:r,user:a}=oc(),[i,o]=b.useState(!1);return b.useEffect(()=>{if(r){const l=setTimeout(()=>{o(!0)},2e3);return()=>clearTimeout(l)}else o(!1)},[r]),i?s.jsx(s.Fragment,{children:e}):r&&!i?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Chargement..."})]})}):n&&a?s.jsx(qb,{to:t,replace:!0}):s.jsx(s.Fragment,{children:e})}const ER="/assets/vet-hero-UFBVcjRL.jpg";function bJ(){return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("header",{className:"border-b",children:s.jsxs("div",{className:"container mx-auto px-6 py-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ht,{className:"h-8 w-8 text-primary"}),s.jsx("span",{className:"text-xl font-bold",children:"VetPro"})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx(F,{variant:"ghost",asChild:!0,children:s.jsx(Ys,{to:"/login",children:"Se connecter"})}),s.jsx(F,{asChild:!0,children:s.jsx(Ys,{to:"/register",children:"Commencer"})})]})]})}),s.jsx("section",{className:"py-20",children:s.jsx("div",{className:"container mx-auto px-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1 space-y-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ht,{className:"h-8 w-8 text-primary"}),s.jsx("span",{className:"text-sm font-medium text-primary",children:"Solution CRM Vétérinaire Complète"})]}),s.jsxs("h1",{className:"text-5xl font-bold leading-tight",children:["Gérez votre pratique",s.jsx("span",{className:"gradient-primary bg-clip-text text-transparent block",children:"vétérinaire efficacement"})]}),s.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl",children:"VetPro vous aide à gérer vos clients, leurs animaux, les rendez-vous, consultations et l'historique médical. Optimisez votre pratique avec notre solution tout-en-un."})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx(F,{size:"lg",className:"gap-2 medical-glow",asChild:!0,children:s.jsxs(Ys,{to:"/register",children:["Commencer gratuitement",s.jsx(xb,{className:"h-4 w-4"})]})}),s.jsx(F,{variant:"outline",size:"lg",className:"gap-2",asChild:!0,children:s.jsx(Ys,{to:"/login",children:"Voir la démo"})})]})]}),s.jsx("div",{className:"hidden lg:block",children:s.jsx("img",{src:ER,alt:"Vétérinaire professionnel",className:"w-96 h-64 object-cover rounded-xl shadow-medical"})})]})})}),s.jsx("section",{className:"py-20 bg-muted/30",children:s.jsxs("div",{className:"container mx-auto px-6",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Tout ce dont vous avez besoin pour votre clinique"}),s.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Une solution complète pour moderniser et optimiser votre pratique vétérinaire"})]}),s.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"bg-card p-6 rounded-xl border shadow-sm",children:[s.jsx(La,{className:"h-12 w-12 text-primary mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Gestion des Clients"}),s.jsx("p",{className:"text-muted-foreground",children:"Gérez facilement vos clients et leurs animaux avec un système intuitif et complet."})]}),s.jsxs("div",{className:"bg-card p-6 rounded-xl border shadow-sm",children:[s.jsx(Ke,{className:"h-12 w-12 text-primary mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Rendez-vous"}),s.jsx("p",{className:"text-muted-foreground",children:"Planifiez et gérez vos rendez-vous avec un calendrier intelligent et flexible."})]}),s.jsxs("div",{className:"bg-card p-6 rounded-xl border shadow-sm",children:[s.jsx(Cr,{className:"h-12 w-12 text-primary mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Consultations"}),s.jsx("p",{className:"text-muted-foreground",children:"Documentez vos consultations et maintenez un historique médical détaillé."})]}),s.jsxs("div",{className:"bg-card p-6 rounded-xl border shadow-sm",children:[s.jsx(xI,{className:"h-12 w-12 text-primary mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Statistiques"}),s.jsx("p",{className:"text-muted-foreground",children:"Analysez votre activité avec des rapports détaillés et des tableaux de bord."})]}),s.jsxs("div",{className:"bg-card p-6 rounded-xl border shadow-sm",children:[s.jsx(Pr,{className:"h-12 w-12 text-primary mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Sécurisé"}),s.jsx("p",{className:"text-muted-foreground",children:"Vos données sont protégées avec les plus hauts standards de sécurité."})]}),s.jsxs("div",{className:"bg-card p-6 rounded-xl border shadow-sm",children:[s.jsx(ht,{className:"h-12 w-12 text-primary mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Farm Management"}),s.jsx("p",{className:"text-muted-foreground",children:"Gérez les exploitations agricoles et suivez la santé des troupeaux."})]})]})]})}),s.jsx("section",{className:"py-20",children:s.jsx("div",{className:"container mx-auto px-6 text-center",children:s.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[s.jsx("h2",{className:"text-3xl font-bold",children:"Prêt à moderniser votre pratique ?"}),s.jsx("p",{className:"text-lg text-muted-foreground",children:"Rejoignez des centaines de vétérinaires qui font confiance à VetPro pour gérer leur clinique efficacement."}),s.jsx("div",{className:"flex gap-4 justify-center",children:s.jsx(F,{size:"lg",className:"gap-2 medical-glow",asChild:!0,children:s.jsxs(Ys,{to:"/register",children:["Commencer maintenant",s.jsx(xb,{className:"h-4 w-4"})]})})})]})})}),s.jsx("footer",{className:"border-t py-8",children:s.jsx("div",{className:"container mx-auto px-6 text-center text-muted-foreground",children:s.jsxs("p",{children:["© ",new Date().getFullYear()," VetPro. Tous droits réservés."]})})})]})}const wJ=()=>{const e=_d(),{toast:t}=it(),[n,r]=b.useState(!1),[a,i]=b.useState({username:"",fullName:"",email:"",password:"",confirmPassword:""}),o=u=>u.length<8?"Le mot de passe doit contenir au moins 8 caractères":/[A-Z]/.test(u)?/[a-z]/.test(u)?/\d/.test(u)?/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>?]/.test(u)?null:"Le mot de passe doit contenir au moins un caractère spécial":"Le mot de passe doit contenir au moins un chiffre":"Le mot de passe doit contenir au moins une lettre minuscule":"Le mot de passe doit contenir au moins une lettre majuscule",l=u=>{i(d=>({...d,[u.target.id]:u.target.value}))},c=async u=>{if(u.preventDefault(),r(!0),a.password!==a.confirmPassword){t({title:"Erreur",description:"Les mots de passe ne correspondent pas",variant:"destructive"}),r(!1);return}const d=o(a.password);if(d){t({title:"Erreur",description:d,variant:"destructive"}),r(!1);return}try{await tJ(a.email,a.password,a.username,a.fullName,"assistant"),t({title:"Inscription réussie",description:"Votre compte a été créé avec succès. Veuillez vérifier votre email et cliquer sur le lien de confirmation pour pouvoir vous connecter."}),e("/login")}catch(h){const m=h instanceof Error?h.message:"Une erreur est survenue lors de l'inscription";t({title:"Erreur d'inscription",description:m,variant:"destructive"})}finally{r(!1)}};return s.jsx("div",{className:"min-h-screen bg-gradient-hero flex items-center justify-center p-6",children:s.jsxs(Z,{className:"w-full max-w-md",children:[s.jsxs(he,{className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx(ht,{className:"h-12 w-12 text-primary"})}),s.jsx(me,{className:"text-2xl gradient-primary bg-clip-text text-transparent",children:"VetPro CRM"}),s.jsx(Lu,{children:"Créez votre compte vétérinaire"})]}),s.jsxs(ee,{children:[s.jsxs("form",{onSubmit:c,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"username",children:"Nom d'utilisateur"}),s.jsx(G,{id:"username",placeholder:"martin.dubois",value:a.username,onChange:l,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"fullName",children:"Nom complet"}),s.jsx(G,{id:"fullName",placeholder:"Dr. Martin Dubois",value:a.fullName,onChange:l,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"email",children:"Email"}),s.jsx(G,{id:"email",type:"email",placeholder:"votre.email@example.com",value:a.email,onChange:l,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"password",children:"Mot de passe"}),s.jsx(G,{id:"password",type:"password",placeholder:"Votre mot de passe sécurisé",value:a.password,onChange:l,required:!0,minLength:8}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Le mot de passe doit contenir au moins 8 caractères, une majuscule, une minuscule, un chiffre et un caractère spécial."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),s.jsx(G,{id:"confirmPassword",type:"password",placeholder:"Confirmer votre mot de passe",value:a.confirmPassword,onChange:l,required:!0,minLength:8})]}),s.jsx(F,{type:"submit",className:"w-full",disabled:n,children:n?s.jsxs(s.Fragment,{children:[s.jsx(Kn,{className:"mr-2 h-4 w-4 animate-spin"}),"Création en cours..."]}):"Créer le compte"})]}),s.jsxs("div",{className:"mt-6 text-center",children:[s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Déjà un compte ?"," ",s.jsx(Ys,{to:"/login",className:"text-primary hover:underline",children:"Se connecter"})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:s.jsx(Ys,{to:"/",className:"hover:underline",children:"Retour à l'accueil"})})]})]})]})})};var zx="Dialog",[OR,DR]=Kr(zx),[NJ,ua]=OR(zx),MR=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=b.useRef(null),c=b.useRef(null),[u,d]=bi({prop:r,defaultProp:a??!1,onChange:i,caller:zx});return s.jsx(NJ,{scope:t,triggerRef:l,contentRef:c,contentId:Ma(),titleId:Ma(),descriptionId:Ma(),open:u,onOpenChange:d,onOpenToggle:b.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};MR.displayName=zx;var IR="DialogTrigger",$R=b.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=ua(IR,n),i=pt(t,a.triggerRef);return s.jsx(ze.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":RS(a.open),...r,ref:i,onClick:ke(e.onClick,a.onOpenToggle)})});$R.displayName=IR;var IS="DialogPortal",[SJ,RR]=OR(IS,{forceMount:void 0}),FR=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:a}=e,i=ua(IS,t);return s.jsx(SJ,{scope:t,forceMount:n,children:b.Children.map(r,o=>s.jsx(Es,{present:n||i.open,children:s.jsx(ff,{asChild:!0,container:a,children:o})}))})};FR.displayName=IS;var Wg="DialogOverlay",LR=b.forwardRef((e,t)=>{const n=RR(Wg,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=ua(Wg,e.__scopeDialog);return i.modal?s.jsx(Es,{present:r||i.open,children:s.jsx(CJ,{...a,ref:t})}):null});LR.displayName=Wg;var _J=Fl("DialogOverlay.RemoveScroll"),CJ=b.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=ua(Wg,n);return s.jsx(Ex,{as:_J,allowPinchZoom:!0,shards:[a.contentRef],children:s.jsx(ze.div,{"data-state":RS(a.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),ql="DialogContent",BR=b.forwardRef((e,t)=>{const n=RR(ql,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=ua(ql,e.__scopeDialog);return s.jsx(Es,{present:r||i.open,children:i.modal?s.jsx(PJ,{...a,ref:t}):s.jsx(AJ,{...a,ref:t})})});BR.displayName=ql;var PJ=b.forwardRef((e,t)=>{const n=ua(ql,e.__scopeDialog),r=b.useRef(null),a=pt(t,n.contentRef,r);return b.useEffect(()=>{const i=r.current;if(i)return jS(i)},[]),s.jsx(zR,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ke(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ke(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:ke(e.onFocusOutside,i=>i.preventDefault())})}),AJ=b.forwardRef((e,t)=>{const n=ua(ql,e.__scopeDialog),r=b.useRef(!1),a=b.useRef(!1);return s.jsx(zR,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),zR=b.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,l=ua(ql,n),c=b.useRef(null),u=pt(t,c);return yS(),s.jsxs(s.Fragment,{children:[s.jsx(Ax,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(gd,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":RS(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(TJ,{titleId:l.titleId}),s.jsx(OJ,{contentRef:c,descriptionId:l.descriptionId})]})]})}),$S="DialogTitle",VR=b.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=ua($S,n);return s.jsx(ze.h2,{id:a.titleId,...r,ref:t})});VR.displayName=$S;var qR="DialogDescription",UR=b.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=ua(qR,n);return s.jsx(ze.p,{id:a.descriptionId,...r,ref:t})});UR.displayName=qR;var WR="DialogClose",HR=b.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=ua(WR,n);return s.jsx(ze.button,{type:"button",...r,ref:t,onClick:ke(e.onClick,()=>a.onOpenChange(!1))})});HR.displayName=WR;function RS(e){return e?"open":"closed"}var KR="DialogTitleWarning",[kJ,GR]=cq(KR,{contentName:ql,titleName:$S,docsSlug:"dialog"}),TJ=({titleId:e})=>{const t=GR(KR),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return b.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},EJ="DialogDescriptionWarning",OJ=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${GR(EJ).contentName}}.`;return b.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},YR=MR,QR=$R,XR=FR,FS=LR,LS=BR,BS=VR,zS=UR,VS=HR;const et=YR,Vx=QR,DJ=XR,JR=b.forwardRef(({className:e,...t},n)=>s.jsx(FS,{ref:n,className:De("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));JR.displayName=FS.displayName;const Qe=b.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(DJ,{children:[s.jsx(JR,{}),s.jsxs(LS,{ref:r,className:De("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,s.jsxs(VS,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(jx,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Qe.displayName=LS.displayName;const tt=({className:e,...t})=>s.jsx("div",{className:De("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});tt.displayName="DialogHeader";const nt=b.forwardRef(({className:e,...t},n)=>s.jsx(BS,{ref:n,className:De("text-lg font-semibold leading-none tracking-tight",e),...t}));nt.displayName=BS.displayName;const Bt=b.forwardRef(({className:e,...t},n)=>s.jsx(zS,{ref:n,className:De("text-sm text-muted-foreground",e),...t}));Bt.displayName=zS.displayName;const Ue=b.forwardRef(({className:e,...t},n)=>s.jsx("textarea",{className:De("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));Ue.displayName="Textarea";function XP(e,[t,n]){return Math.min(n,Math.max(t,e))}function qS(e){const t=b.useRef({value:e,previous:e});return b.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var MJ=[" ","Enter","ArrowUp","ArrowDown"],IJ=[" ","Enter"],Ul="Select",[qx,Ux,$J]=gx(Ul),[Ad,lTe]=Kr(Ul,[$J,bd]),Wx=bd(),[RJ,zo]=Ad(Ul),[FJ,LJ]=Ad(Ul),ZR=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:m,required:f,form:g}=e,p=Wx(t),[v,x]=b.useState(null),[y,j]=b.useState(null),[w,N]=b.useState(!1),_=Px(u),[S,C]=bi({prop:r,defaultProp:a??!1,onChange:i,caller:Ul}),[A,T]=bi({prop:o,defaultProp:l,onChange:c,caller:Ul}),E=b.useRef(null),k=v?g||!!v.closest("form"):!0,[R,I]=b.useState(new Set),W=Array.from(R).map(V=>V.props.value).join(";");return s.jsx(ZI,{...p,children:s.jsxs(RJ,{required:f,scope:t,trigger:v,onTriggerChange:x,valueNode:y,onValueNodeChange:j,valueNodeHasChildren:w,onValueNodeHasChildrenChange:N,contentId:Ma(),value:A,onValueChange:T,open:S,onOpenChange:C,dir:_,triggerPointerDownPosRef:E,disabled:m,children:[s.jsx(qx.Provider,{scope:t,children:s.jsx(FJ,{scope:e.__scopeSelect,onNativeOptionAdd:b.useCallback(V=>{I(q=>new Set(q).add(V))},[]),onNativeOptionRemove:b.useCallback(V=>{I(q=>{const P=new Set(q);return P.delete(V),P})},[]),children:n})}),k?s.jsxs(N3,{"aria-hidden":!0,required:f,tabIndex:-1,name:d,autoComplete:h,value:A,onChange:V=>T(V.target.value),disabled:m,form:g,children:[A===void 0?s.jsx("option",{value:""}):null,Array.from(R)]},W):null]})})};ZR.displayName=Ul;var e3="SelectTrigger",t3=b.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...a}=e,i=Wx(n),o=zo(e3,n),l=o.disabled||r,c=pt(t,o.onTriggerChange),u=Ux(n),d=b.useRef("touch"),[h,m,f]=_3(p=>{const v=u().filter(j=>!j.disabled),x=v.find(j=>j.value===o.value),y=C3(v,p,x);y!==void 0&&o.onValueChange(y.value)}),g=p=>{l||(o.onOpenChange(!0),f()),p&&(o.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return s.jsx(iS,{asChild:!0,...i,children:s.jsx(ze.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":S3(o.value)?"":void 0,...a,ref:c,onClick:ke(a.onClick,p=>{p.currentTarget.focus(),d.current!=="mouse"&&g(p)}),onPointerDown:ke(a.onPointerDown,p=>{d.current=p.pointerType;const v=p.target;v.hasPointerCapture(p.pointerId)&&v.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(g(p),p.preventDefault())}),onKeyDown:ke(a.onKeyDown,p=>{const v=h.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&m(p.key),!(v&&p.key===" ")&&MJ.includes(p.key)&&(g(),p.preventDefault())})})})});t3.displayName=e3;var n3="SelectValue",r3=b.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:i,placeholder:o="",...l}=e,c=zo(n3,n),{onValueNodeHasChildrenChange:u}=c,d=i!==void 0,h=pt(t,c.onValueNodeChange);return _n(()=>{u(d)},[u,d]),s.jsx(ze.span,{...l,ref:h,style:{pointerEvents:"none"},children:S3(c.value)?s.jsx(s.Fragment,{children:o}):i})});r3.displayName=n3;var BJ="SelectIcon",s3=b.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...a}=e;return s.jsx(ze.span,{"aria-hidden":!0,...a,ref:t,children:r||"▼"})});s3.displayName=BJ;var zJ="SelectPortal",a3=e=>s.jsx(ff,{asChild:!0,...e});a3.displayName=zJ;var Wl="SelectContent",i3=b.forwardRef((e,t)=>{const n=zo(Wl,e.__scopeSelect),[r,a]=b.useState();if(_n(()=>{a(new DocumentFragment)},[]),!n.open){const i=r;return i?nc.createPortal(s.jsx(o3,{scope:e.__scopeSelect,children:s.jsx(qx.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),i):null}return s.jsx(l3,{...e,ref:t})});i3.displayName=Wl;var Bs=10,[o3,Vo]=Ad(Wl),VJ="SelectContentImpl",qJ=Fl("SelectContent.RemoveScroll"),l3=b.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:f,sticky:g,hideWhenDetached:p,avoidCollisions:v,...x}=e,y=zo(Wl,n),[j,w]=b.useState(null),[N,_]=b.useState(null),S=pt(t,ce=>w(ce)),[C,A]=b.useState(null),[T,E]=b.useState(null),k=Ux(n),[R,I]=b.useState(!1),W=b.useRef(!1);b.useEffect(()=>{if(j)return jS(j)},[j]),yS();const V=b.useCallback(ce=>{const[se,...ae]=k().map(Q=>Q.ref.current),[le]=ae.slice(-1),H=document.activeElement;for(const Q of ce)if(Q===H||(Q==null||Q.scrollIntoView({block:"nearest"}),Q===se&&N&&(N.scrollTop=0),Q===le&&N&&(N.scrollTop=N.scrollHeight),Q==null||Q.focus(),document.activeElement!==H))return},[k,N]),q=b.useCallback(()=>V([C,j]),[V,C,j]);b.useEffect(()=>{R&&q()},[R,q]);const{onOpenChange:P,triggerPointerDownPosRef:O}=y;b.useEffect(()=>{if(j){let ce={x:0,y:0};const se=le=>{var H,Q;ce={x:Math.abs(Math.round(le.pageX)-(((H=O.current)==null?void 0:H.x)??0)),y:Math.abs(Math.round(le.pageY)-(((Q=O.current)==null?void 0:Q.y)??0))}},ae=le=>{ce.x<=10&&ce.y<=10?le.preventDefault():j.contains(le.target)||P(!1),document.removeEventListener("pointermove",se),O.current=null};return O.current!==null&&(document.addEventListener("pointermove",se),document.addEventListener("pointerup",ae,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",se),document.removeEventListener("pointerup",ae,{capture:!0})}}},[j,P,O]),b.useEffect(()=>{const ce=()=>P(!1);return window.addEventListener("blur",ce),window.addEventListener("resize",ce),()=>{window.removeEventListener("blur",ce),window.removeEventListener("resize",ce)}},[P]);const[B,U]=_3(ce=>{const se=k().filter(H=>!H.disabled),ae=se.find(H=>H.ref.current===document.activeElement),le=C3(se,ce,ae);le&&setTimeout(()=>le.ref.current.focus())}),X=b.useCallback((ce,se,ae)=>{const le=!W.current&&!ae;(y.value!==void 0&&y.value===se||le)&&(A(ce),le&&(W.current=!0))},[y.value]),ie=b.useCallback(()=>j==null?void 0:j.focus(),[j]),re=b.useCallback((ce,se,ae)=>{const le=!W.current&&!ae;(y.value!==void 0&&y.value===se||le)&&E(ce)},[y.value]),de=r==="popper"?cw:c3,pe=de===cw?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:f,sticky:g,hideWhenDetached:p,avoidCollisions:v}:{};return s.jsx(o3,{scope:n,content:j,viewport:N,onViewportChange:_,itemRefCallback:X,selectedItem:C,onItemLeave:ie,itemTextRefCallback:re,focusSelectedItem:q,selectedItemText:T,position:r,isPositioned:R,searchRef:B,children:s.jsx(Ex,{as:qJ,allowPinchZoom:!0,children:s.jsx(Ax,{asChild:!0,trapped:y.open,onMountAutoFocus:ce=>{ce.preventDefault()},onUnmountAutoFocus:ke(a,ce=>{var se;(se=y.trigger)==null||se.focus({preventScroll:!0}),ce.preventDefault()}),children:s.jsx(gd,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:ce=>ce.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:s.jsx(de,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:ce=>ce.preventDefault(),...x,...pe,onPlaced:()=>I(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:ke(x.onKeyDown,ce=>{const se=ce.ctrlKey||ce.altKey||ce.metaKey;if(ce.key==="Tab"&&ce.preventDefault(),!se&&ce.key.length===1&&U(ce.key),["ArrowUp","ArrowDown","Home","End"].includes(ce.key)){let le=k().filter(H=>!H.disabled).map(H=>H.ref.current);if(["ArrowUp","End"].includes(ce.key)&&(le=le.slice().reverse()),["ArrowUp","ArrowDown"].includes(ce.key)){const H=ce.target,Q=le.indexOf(H);le=le.slice(Q+1)}setTimeout(()=>V(le)),ce.preventDefault()}})})})})})})});l3.displayName=VJ;var UJ="SelectItemAlignedPosition",c3=b.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...a}=e,i=zo(Wl,n),o=Vo(Wl,n),[l,c]=b.useState(null),[u,d]=b.useState(null),h=pt(t,S=>d(S)),m=Ux(n),f=b.useRef(!1),g=b.useRef(!0),{viewport:p,selectedItem:v,selectedItemText:x,focusSelectedItem:y}=o,j=b.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&p&&v&&x){const S=i.trigger.getBoundingClientRect(),C=u.getBoundingClientRect(),A=i.valueNode.getBoundingClientRect(),T=x.getBoundingClientRect();if(i.dir!=="rtl"){const H=T.left-C.left,Q=A.left-H,ve=S.left-Q,ge=S.width+ve,rt=Math.max(ge,C.width),Ge=window.innerWidth-Bs,dt=XP(Q,[Bs,Math.max(Bs,Ge-rt)]);l.style.minWidth=ge+"px",l.style.left=dt+"px"}else{const H=C.right-T.right,Q=window.innerWidth-A.right-H,ve=window.innerWidth-S.right-Q,ge=S.width+ve,rt=Math.max(ge,C.width),Ge=window.innerWidth-Bs,dt=XP(Q,[Bs,Math.max(Bs,Ge-rt)]);l.style.minWidth=ge+"px",l.style.right=dt+"px"}const E=m(),k=window.innerHeight-Bs*2,R=p.scrollHeight,I=window.getComputedStyle(u),W=parseInt(I.borderTopWidth,10),V=parseInt(I.paddingTop,10),q=parseInt(I.borderBottomWidth,10),P=parseInt(I.paddingBottom,10),O=W+V+R+P+q,B=Math.min(v.offsetHeight*5,O),U=window.getComputedStyle(p),X=parseInt(U.paddingTop,10),ie=parseInt(U.paddingBottom,10),re=S.top+S.height/2-Bs,de=k-re,pe=v.offsetHeight/2,ce=v.offsetTop+pe,se=W+V+ce,ae=O-se;if(se<=re){const H=E.length>0&&v===E[E.length-1].ref.current;l.style.bottom="0px";const Q=u.clientHeight-p.offsetTop-p.offsetHeight,ve=Math.max(de,pe+(H?ie:0)+Q+q),ge=se+ve;l.style.height=ge+"px"}else{const H=E.length>0&&v===E[0].ref.current;l.style.top="0px";const ve=Math.max(re,W+p.offsetTop+(H?X:0)+pe)+ae;l.style.height=ve+"px",p.scrollTop=se-re+p.offsetTop}l.style.margin=`${Bs}px 0`,l.style.minHeight=B+"px",l.style.maxHeight=k+"px",r==null||r(),requestAnimationFrame(()=>f.current=!0)}},[m,i.trigger,i.valueNode,l,u,p,v,x,i.dir,r]);_n(()=>j(),[j]);const[w,N]=b.useState();_n(()=>{u&&N(window.getComputedStyle(u).zIndex)},[u]);const _=b.useCallback(S=>{S&&g.current===!0&&(j(),y==null||y(),g.current=!1)},[j,y]);return s.jsx(HJ,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:f,onScrollButtonChange:_,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:w},children:s.jsx(ze.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});c3.displayName=UJ;var WJ="SelectPopperPosition",cw=b.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=Bs,...i}=e,o=Wx(n);return s.jsx(oS,{...o,...i,ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});cw.displayName=WJ;var[HJ,US]=Ad(Wl,{}),uw="SelectViewport",u3=b.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...a}=e,i=Vo(uw,n),o=US(uw,n),l=pt(t,i.onViewportChange),c=b.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),s.jsx(qx.Slot,{scope:n,children:s.jsx(ze.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:ke(a.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&h){const f=Math.abs(c.current-d.scrollTop);if(f>0){const g=window.innerHeight-Bs*2,p=parseFloat(h.style.minHeight),v=parseFloat(h.style.height),x=Math.max(p,v);if(x<g){const y=x+f,j=Math.min(g,y),w=y-j;h.style.height=j+"px",h.style.bottom==="0px"&&(d.scrollTop=w>0?w:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});u3.displayName=uw;var d3="SelectGroup",[KJ,GJ]=Ad(d3),YJ=b.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Ma();return s.jsx(KJ,{scope:n,id:a,children:s.jsx(ze.div,{role:"group","aria-labelledby":a,...r,ref:t})})});YJ.displayName=d3;var h3="SelectLabel",m3=b.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=GJ(h3,n);return s.jsx(ze.div,{id:a.id,...r,ref:t})});m3.displayName=h3;var Hg="SelectItem",[QJ,f3]=Ad(Hg),p3=b.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:i,...o}=e,l=zo(Hg,n),c=Vo(Hg,n),u=l.value===r,[d,h]=b.useState(i??""),[m,f]=b.useState(!1),g=pt(t,y=>{var j;return(j=c.itemRefCallback)==null?void 0:j.call(c,y,r,a)}),p=Ma(),v=b.useRef("touch"),x=()=>{a||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(QJ,{scope:n,value:r,disabled:a,textId:p,isSelected:u,onItemTextChange:b.useCallback(y=>{h(j=>j||((y==null?void 0:y.textContent)??"").trim())},[]),children:s.jsx(qx.ItemSlot,{scope:n,value:r,disabled:a,textValue:d,children:s.jsx(ze.div,{role:"option","aria-labelledby":p,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:g,onFocus:ke(o.onFocus,()=>f(!0)),onBlur:ke(o.onBlur,()=>f(!1)),onClick:ke(o.onClick,()=>{v.current!=="mouse"&&x()}),onPointerUp:ke(o.onPointerUp,()=>{v.current==="mouse"&&x()}),onPointerDown:ke(o.onPointerDown,y=>{v.current=y.pointerType}),onPointerMove:ke(o.onPointerMove,y=>{var j;v.current=y.pointerType,a?(j=c.onItemLeave)==null||j.call(c):v.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ke(o.onPointerLeave,y=>{var j;y.currentTarget===document.activeElement&&((j=c.onItemLeave)==null||j.call(c))}),onKeyDown:ke(o.onKeyDown,y=>{var w;((w=c.searchRef)==null?void 0:w.current)!==""&&y.key===" "||(IJ.includes(y.key)&&x(),y.key===" "&&y.preventDefault())})})})})});p3.displayName=Hg;var _h="SelectItemText",g3=b.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,...i}=e,o=zo(_h,n),l=Vo(_h,n),c=f3(_h,n),u=LJ(_h,n),[d,h]=b.useState(null),m=pt(t,x=>h(x),c.onItemTextChange,x=>{var y;return(y=l.itemTextRefCallback)==null?void 0:y.call(l,x,c.value,c.disabled)}),f=d==null?void 0:d.textContent,g=b.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:f},c.value),[c.disabled,c.value,f]),{onNativeOptionAdd:p,onNativeOptionRemove:v}=u;return _n(()=>(p(g),()=>v(g)),[p,v,g]),s.jsxs(s.Fragment,{children:[s.jsx(ze.span,{id:c.textId,...i,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?nc.createPortal(i.children,o.valueNode):null]})});g3.displayName=_h;var v3="SelectItemIndicator",x3=b.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return f3(v3,n).isSelected?s.jsx(ze.span,{"aria-hidden":!0,...r,ref:t}):null});x3.displayName=v3;var dw="SelectScrollUpButton",y3=b.forwardRef((e,t)=>{const n=Vo(dw,e.__scopeSelect),r=US(dw,e.__scopeSelect),[a,i]=b.useState(!1),o=pt(t,r.onScrollButtonChange);return _n(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?s.jsx(b3,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});y3.displayName=dw;var hw="SelectScrollDownButton",j3=b.forwardRef((e,t)=>{const n=Vo(hw,e.__scopeSelect),r=US(hw,e.__scopeSelect),[a,i]=b.useState(!1),o=pt(t,r.onScrollButtonChange);return _n(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;i(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?s.jsx(b3,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});j3.displayName=hw;var b3=b.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=e,i=Vo("SelectScrollButton",n),o=b.useRef(null),l=Ux(n),c=b.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return b.useEffect(()=>()=>c(),[c]),_n(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),s.jsx(ze.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:ke(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:ke(a.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:ke(a.onPointerLeave,()=>{c()})})}),XJ="SelectSeparator",w3=b.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return s.jsx(ze.div,{"aria-hidden":!0,...r,ref:t})});w3.displayName=XJ;var mw="SelectArrow",JJ=b.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Wx(n),i=zo(mw,n),o=Vo(mw,n);return i.open&&o.position==="popper"?s.jsx(lS,{...a,...r,ref:t}):null});JJ.displayName=mw;var ZJ="SelectBubbleInput",N3=b.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const a=b.useRef(null),i=pt(r,a),o=qS(t);return b.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&d){const h=new Event("change",{bubbles:!0});d.call(l,t),l.dispatchEvent(h)}},[o,t]),s.jsx(ze.select,{...n,style:{...YM,...n.style},ref:i,defaultValue:t})});N3.displayName=ZJ;function S3(e){return e===""||e===void 0}function _3(e){const t=Ar(e),n=b.useRef(""),r=b.useRef(0),a=b.useCallback(o=>{const l=n.current+o;t(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=b.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return b.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,i]}function C3(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=eZ(e,Math.max(i,0));a.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function eZ(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var tZ=ZR,P3=t3,nZ=r3,rZ=s3,sZ=a3,A3=i3,aZ=u3,k3=m3,T3=p3,iZ=g3,oZ=x3,E3=y3,O3=j3,D3=w3;const we=tZ,Ne=nZ,je=b.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(P3,{ref:r,className:De("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,s.jsx(rZ,{asChild:!0,children:s.jsx(yI,{className:"h-4 w-4 opacity-50"})})]}));je.displayName=P3.displayName;const M3=b.forwardRef(({className:e,...t},n)=>s.jsx(E3,{ref:n,className:De("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(lU,{className:"h-4 w-4"})}));M3.displayName=E3.displayName;const I3=b.forwardRef(({className:e,...t},n)=>s.jsx(O3,{ref:n,className:De("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(yI,{className:"h-4 w-4"})}));I3.displayName=O3.displayName;const be=b.forwardRef(({className:e,children:t,position:n="popper",...r},a)=>s.jsx(sZ,{children:s.jsxs(A3,{ref:a,className:De("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[s.jsx(M3,{}),s.jsx(aZ,{className:De("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(I3,{})]})}));be.displayName=A3.displayName;const lZ=b.forwardRef(({className:e,...t},n)=>s.jsx(k3,{ref:n,className:De("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));lZ.displayName=k3.displayName;const $=b.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(T3,{ref:r,className:De("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(oZ,{children:s.jsx(G1,{className:"h-4 w-4"})})}),s.jsx(iZ,{children:t})]}));$.displayName=T3.displayName;const cZ=b.forwardRef(({className:e,...t},n)=>s.jsx(D3,{ref:n,className:De("-mx-1 my-1 h-px bg-muted",e),...t}));cZ.displayName=D3.displayName;const uZ=async()=>{const{data:e,error:t}=await Re.from("clients").select("*").order("created_at",{ascending:!1});if(t)throw new Error(`Error fetching clients: ${t.message}`);return e||[]},dZ=async e=>{const{data:{user:t}}=await Re.auth.getUser();if(!t)throw new Error("User not authenticated");const{data:n,error:r}=await Re.from("clients").insert({...e,user_id:t.id,city:e.city||"Rabat",country:e.country||"Maroc",client_type:e.client_type||"particulier"}).select().single();if(r)throw new Error(`Error creating client: ${r.message}`);return n},hZ=async(e,t)=>{const{data:n,error:r}=await Re.from("clients").update(t).eq("id",e).select().single();if(r)throw new Error(`Error updating client: ${r.message}`);return n},mZ=async e=>{const{error:t}=await Re.from("clients").delete().eq("id",e);if(t)throw new Error(`Error deleting client: ${t.message}`)},fZ=async()=>{const{data:e,error:t}=await Re.from("animals").select(`
      *,
      client:clients(*)
    `).order("created_at",{ascending:!1});if(t)throw new Error(`Error fetching animals: ${t.message}`);return e||[]},pZ=async e=>{var o,l,c;const{data:{user:t}}=await Re.auth.getUser();if(!t)throw new Error("User not authenticated");const n={...e};"microchip_number"in n&&!((o=n.microchip_number)!=null&&o.trim())&&delete n.microchip_number,"birth_date"in n&&!((l=n.birth_date)!=null&&l.trim())&&delete n.birth_date,"sterilization_date"in n&&!((c=n.sterilization_date)!=null&&c.trim())&&delete n.sterilization_date;const r=u=>{switch(u){case"healthy":return"vivant";case"urgent":return"décédé";case"treatment":return"perdu";default:return"vivant"}},{data:a,error:i}=await Re.from("animals").insert({...n,user_id:t.id,sterilized:n.sterilized||!1,status:r(n.status)}).select(`
      *,
      client:clients(*)
    `).single();if(i)throw new Error(`Error creating animal: ${i.message}`);return a},gZ=async(e,t)=>{var i,o,l;const n={...t};"microchip_number"in n&&!((i=n.microchip_number)!=null&&i.trim())&&(n.microchip_number=null),"birth_date"in n&&!((o=n.birth_date)!=null&&o.trim())&&(n.birth_date=null),"sterilization_date"in n&&!((l=n.sterilization_date)!=null&&l.trim())&&(n.sterilization_date=null);const{data:r,error:a}=await Re.from("animals").update(n).eq("id",e).select(`
      *,
      client:clients(*)
    `).single();if(a)throw new Error(`Error updating animal: ${a.message}`);return r},vZ=async e=>{const{error:t}=await Re.from("animals").delete().eq("id",e);if(t)throw new Error(`Error deleting animal: ${t.message}`)},xZ=async()=>{const{data:e,error:t}=await Re.from("vaccinations").select(`
      *,
      animal:animals(*)
    `).order("vaccination_date",{ascending:!1});if(t)throw new Error(`Error fetching vaccinations: ${t.message}`);return e||[]},yZ=async e=>{const{data:{user:t}}=await Re.auth.getUser();if(!t)throw new Error("User not authenticated");let n=e.administered_by;if(!n||n.trim()===""){const{data:i}=await Re.from("user_profiles").select("id").eq("id",t.id).single();n=i?t.id:null}const{data:r,error:a}=await Re.from("vaccinations").insert({...e,administered_by:n}).select(`
      *,
      animal:animals(*)
    `).single();if(a)throw new Error(`Error creating vaccination: ${a.message}`);return r},jZ=async(e,t)=>{const{data:n,error:r}=await Re.from("vaccinations").update(t).eq("id",e).select(`
      *,
      animal:animals(*)
    `).single();if(r)throw new Error(`Error updating vaccination: ${r.message}`);return n},bZ=async e=>{const{error:t}=await Re.from("vaccinations").delete().eq("id",e);if(t)throw new Error(`Error deleting vaccination: ${t.message}`)},wZ=async()=>{const{data:e,error:t}=await Re.from("vaccination_protocols").select("*").order("species",{ascending:!0}).order("vaccine_name",{ascending:!0});if(t)throw new Error(`Error fetching vaccination protocols: ${t.message}`);return e||[]},NZ=async e=>{const{data:t,error:n}=await Re.from("vaccination_protocols").insert(e).select().single();if(n)throw new Error(`Error creating vaccination protocol: ${n.message}`);return t},SZ=async(e,t)=>{const{data:n,error:r}=await Re.from("vaccination_protocols").update(t).eq("id",e).select().single();if(r)throw new Error(`Error updating vaccination protocol: ${r.message}`);return n},_Z=async()=>{const{data:e,error:t}=await Re.from("antiparasitics").select(`
      *,
      animal:animals(*)
    `).order("treatment_date",{ascending:!1});if(t)throw new Error(`Error fetching antiparasitics: ${t.message}`);return e||[]},CZ=async e=>{const{data:{user:t}}=await Re.auth.getUser();if(!t)throw new Error("User must be authenticated to create antiparasitic");if(e.administered_by){const{data:a}=await Re.from("user_profiles").select("id").eq("id",e.administered_by).single();a||(console.warn("administered_by user not found, setting to null"),e.administered_by=null)}const{data:n,error:r}=await Re.from("antiparasitics").insert([e]).select(`
      *,
      animal:animals(*)
    `).single();if(r)throw new Error(`Error creating antiparasitic: ${r.message}`);return n},PZ=async e=>{const{error:t}=await Re.from("antiparasitics").delete().eq("id",e);if(t)throw new Error(`Error deleting antiparasitic: ${t.message}`)},AZ=async()=>{const{data:e,error:t}=await Re.from("antiparasitic_protocols").select("*").order("species",{ascending:!0});if(t)throw new Error(`Error fetching antiparasitic protocols: ${t.message}`);return e||[]},kZ=async e=>{const{data:t,error:n}=await Re.from("antiparasitic_protocols").select("*").eq("species",e).eq("active",!0).order("parasite_type",{ascending:!0});if(n)throw new Error(`Error fetching antiparasitic protocols for species: ${n.message}`);return t||[]},TZ=async e=>{const{data:t,error:n}=await Re.from("antiparasitic_protocols").insert([e]).select("*").single();if(n)throw new Error(`Error creating antiparasitic protocol: ${n.message}`);return t},EZ=async(e,t)=>{const{data:n,error:r}=await Re.from("antiparasitic_protocols").update(t).eq("id",e).select("*").single();if(r)throw new Error(`Error updating antiparasitic protocol: ${r.message}`);return n},OZ=async()=>{const{data:e,error:t}=await Re.from("appointments").select(`
      *,
      client:clients(*),
      animal:animals(*)
    `).order("appointment_date",{ascending:!0});if(t)throw new Error(`Error fetching appointments: ${t.message}`);return e||[]},DZ=async e=>{const{data:{user:t}}=await Re.auth.getUser();if(!t)throw new Error("User not authenticated");const{data:n,error:r}=await Re.from("appointments").insert({...e,veterinarian_id:e.veterinarian_id||t.id,duration_minutes:e.duration_minutes||30}).select(`
      *,
      client:clients(*),
      animal:animals(*)
    `).single();if(r)throw new Error(`Error creating appointment: ${r.message}`);return n},MZ=async(e,t)=>{const{data:n,error:r}=await Re.from("appointments").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select(`
      *,
      client:clients(*),
      animal:animals(*)
    `).single();if(r)throw new Error(`Error updating appointment: ${r.message}`);return n},IZ=async e=>{const{error:t}=await Re.from("appointments").delete().eq("id",e);if(t)throw new Error(`Error deleting appointment: ${t.message}`)},ss={all:["clients"],lists:()=>[...ss.all,"list"],list:e=>[...ss.lists(),{filters:e}],details:()=>[...ss.all,"detail"],detail:e=>[...ss.details(),e],search:e=>[...ss.all,"search",e]},lr={all:["animals"],lists:()=>[...lr.all,"list"],list:e=>[...lr.lists(),{filters:e}],details:()=>[...lr.all,"detail"],detail:e=>[...lr.details(),e],byClient:e=>[...lr.all,"client",e],search:e=>[...lr.all,"search",e]},cr={all:["appointments"],lists:()=>[...cr.all,"list"],list:e=>[...cr.lists(),{filters:e}],details:()=>[...cr.all,"detail"],detail:e=>[...cr.details(),e],byAnimal:e=>[...cr.all,"animal",e],byClient:e=>[...cr.all,"client",e]},lc={all:["stats"],clients:()=>[...lc.all,"clients"]},WS={all:["userProfile"],profile:()=>[...WS.all,"profile"]},tr=()=>Er({queryKey:ss.lists(),queryFn:uZ,staleTime:5*60*1e3}),$Z=()=>{const e=Dt();return Rt({mutationFn:dZ,onSuccess:t=>{e.invalidateQueries({queryKey:ss.lists()}),e.setQueryData(ss.detail(t.id),t),e.invalidateQueries({queryKey:lc.clients()})}})},RZ=()=>{const e=Dt();return Rt({mutationFn:({id:t,data:n})=>hZ(t,n),onSuccess:t=>{e.setQueryData(ss.detail(t.id),t),e.invalidateQueries({queryKey:ss.lists()})}})},FZ=()=>{const e=Dt();return Rt({mutationFn:mZ,onSuccess:(t,n)=>{e.removeQueries({queryKey:ss.detail(n)}),e.invalidateQueries({queryKey:ss.lists()}),e.invalidateQueries({queryKey:lr.byClient(n)}),e.invalidateQueries({queryKey:lc.clients()})}})},nr=()=>Er({queryKey:lr.lists(),queryFn:fZ,staleTime:5*60*1e3}),LZ=()=>{const e=Dt();return Rt({mutationFn:pZ,onSuccess:t=>{e.invalidateQueries({queryKey:lr.lists()}),e.setQueryData(lr.detail(t.id),t),e.invalidateQueries({queryKey:lr.byClient(t.client_id)}),e.invalidateQueries({queryKey:lc.clients()})}})},BZ=()=>{const e=Dt();return Rt({mutationFn:({id:t,data:n})=>gZ(t,n),onSuccess:t=>{e.setQueryData(lr.detail(t.id),t),e.invalidateQueries({queryKey:lr.lists()}),e.invalidateQueries({queryKey:lr.byClient(t.client_id)})}})},zZ=()=>{const e=Dt();return Rt({mutationFn:vZ,onSuccess:(t,n)=>{e.removeQueries({queryKey:lr.detail(n)}),e.invalidateQueries({queryKey:lr.lists()}),e.invalidateQueries({queryKey:lc.clients()})}})},qo=()=>Er({queryKey:["consultations"],queryFn:async()=>{try{const{data:e,error:t}=await Re.from("consultations").select(`
            id,
            animal_id,
            client_id,
            veterinarian_id,
            consultation_date,
            consultation_type,
            symptoms,
            diagnosis,
            treatment,
            notes,
            weight,
            temperature,
            heart_rate,
            respiratory_rate,
            photos,
            follow_up_date,
            follow_up_notes,
            status,
            created_at,
            updated_at,
            animal:animals(
              id,
              name,
              species,
              breed,
              color,
              sex,
              weight,
              birth_date,
              microchip_number,
              status
            ),
            client:clients(
              id,
              first_name,
              last_name,
              email,
              phone,
              mobile_phone,
              address,
              city,
              client_type
            )
          `).order("consultation_date",{ascending:!1});if(t)throw console.error("Error fetching consultations:",t),t;return(e||[]).map(n=>({...n,followUp:n.follow_up_notes||null,cost:null,animal:Array.isArray(n.animal)?n.animal[0]:n.animal,client:Array.isArray(n.client)?n.client[0]:n.client}))}catch(e){throw console.error("Failed to fetch consultations:",e),e}},staleTime:5*60*1e3,retry:3,retryDelay:e=>Math.min(1e3*2**e,3e4)}),$3=()=>{const e=Dt();return Rt({mutationFn:async t=>{try{const{data:{user:n}}=await Re.auth.getUser();if(!n)throw new Error("User not authenticated");const r={animal_id:t.animal_id,client_id:t.client_id,veterinarian_id:n.id,consultation_date:t.consultation_date||new Date().toISOString(),consultation_type:t.consultation_type,symptoms:t.symptoms||null,diagnosis:t.diagnosis||null,treatment:t.treatment||null,notes:t.notes||null,weight:t.weight||null,temperature:t.temperature||null,heart_rate:t.heart_rate||null,respiratory_rate:t.respiratory_rate||null,photos:t.photos||null,follow_up_date:t.follow_up_date||null,follow_up_notes:t.follow_up_notes||null,status:t.status||"completed"},{data:a,error:i}=await Re.from("consultations").insert(r).select(`
            id,
            animal_id,
            client_id,
            veterinarian_id,
            consultation_date,
            consultation_type,
            symptoms,
            diagnosis,
            treatment,
            notes,
            weight,
            temperature,
            heart_rate,
            respiratory_rate,
            photos,
            follow_up_date,
            follow_up_notes,
            status,
            created_at,
            updated_at,
            animal:animals(
              id,
              name,
              species,
              breed,
              color,
              sex,
              weight,
              birth_date,
              microchip_number,
              status
            ),
            client:clients(
              id,
              first_name,
              last_name,
              email,
              phone,
              mobile_phone,
              address,
              city,
              client_type
            )
          `).single();if(i)throw console.error("Error creating consultation:",i),i;return{...a,followUp:a.follow_up_notes||null,cost:null}}catch(n){throw console.error("Failed to create consultation:",n),n}},onSuccess:()=>{e.invalidateQueries({queryKey:["consultations"]}),e.invalidateQueries({queryKey:["dashboard-stats"]})}})},R3=()=>{const e=Dt();return Rt({mutationFn:async({id:t,data:n})=>{const{data:r,error:a}=await Re.from("consultations").update(n).eq("id",t).select(`
          *,
          animal:animals(*),
          client:clients(*)
        `).single();if(a)throw a;return r},onSuccess:()=>{e.invalidateQueries({queryKey:["consultations"]}),e.invalidateQueries({queryKey:["dashboard-stats"]})}})},VZ=()=>{const e=Dt();return Rt({mutationFn:async t=>{try{const n=[{table:"prescriptions",field:"consultation_id"},{table:"vaccinations",field:"consultation_id"},{table:"lab_results",field:"consultation_id"},{table:"antiparasitics",field:"consultation_id"}];for(const a of n)try{const{data:i,error:o}=await Re.from(a.table).select("id").eq(a.field,t);if(o){console.warn(`Could not check ${a.table}: ${o.message}`);continue}if(i&&i.length>0){if(a.table==="prescriptions")for(const c of i){const{error:u}=await Re.from("prescription_medications").delete().eq("prescription_id",c.id);u&&console.warn(`Could not delete prescription medications: ${u.message}`)}const{error:l}=await Re.from(a.table).delete().eq(a.field,t);l&&console.warn(`Could not delete from ${a.table}: ${l.message}`)}}catch(i){console.warn(`Error handling ${a.table}:`,i)}const{error:r}=await Re.from("consultations").delete().eq("id",t);if(r)throw console.error(`Database error during consultation deletion: ${r.message}`),new Error(`Failed to delete consultation: ${r.message}`);return{success:!0,id:t}}catch(n){throw console.error("Dynamic deletion failed:",n),new Error(`Deletion failed: ${n.message||"Unknown error"}`)}},onSuccess:()=>{e.invalidateQueries({queryKey:["consultations"]}),e.invalidateQueries({queryKey:["prescriptions"]}),e.invalidateQueries({queryKey:["dashboard-stats"]}),e.invalidateQueries({queryKey:["vaccinations"]}),e.invalidateQueries({queryKey:["lab-results"]})},retry:1})},Uo=()=>Er({queryKey:["vaccinations"],queryFn:()=>xZ()}),qZ=()=>{const e=Dt();return Rt({mutationFn:yZ,onSuccess:()=>{e.invalidateQueries({queryKey:["vaccinations"]}),e.invalidateQueries({queryKey:["animals"]})}})},UZ=()=>{const e=Dt();return Rt({mutationFn:({id:t,data:n})=>jZ(t,n),onSuccess:()=>{e.invalidateQueries({queryKey:["vaccinations"]}),e.invalidateQueries({queryKey:["animals"]})}})},WZ=()=>{const e=Dt();return Rt({mutationFn:bZ,onSuccess:()=>{e.invalidateQueries({queryKey:["vaccinations"]}),e.invalidateQueries({queryKey:["animals"]})}})},HZ=()=>Er({queryKey:["vaccination-protocols"],queryFn:()=>wZ()}),KZ=()=>{const e=Dt();return Rt({mutationFn:NZ,onSuccess:()=>{e.invalidateQueries({queryKey:["vaccination-protocols"]})}})},GZ=()=>{const e=Dt();return Rt({mutationFn:({id:t,data:n})=>SZ(t,n),onSuccess:()=>{e.invalidateQueries({queryKey:["vaccination-protocols"]})}})},Hx=()=>Er({queryKey:["antiparasitics"],queryFn:_Z}),YZ=()=>{const e=Dt();return Rt({mutationFn:CZ,onSuccess:()=>{e.invalidateQueries({queryKey:["antiparasitics"]})}})},QZ=()=>{const e=Dt();return Rt({mutationFn:PZ,onSuccess:()=>{e.invalidateQueries({queryKey:["antiparasitics"]})}})},XZ=()=>Er({queryKey:["antiparasitic-protocols"],queryFn:AZ}),JZ=e=>Er({queryKey:["antiparasitic-protocols","by-species",e],queryFn:()=>e?kZ(e):Promise.resolve([]),enabled:!!e}),ZZ=()=>{const e=Dt();return Rt({mutationFn:TZ,onSuccess:()=>{e.invalidateQueries({queryKey:["antiparasitic-protocols"]})}})},eee=()=>{const e=Dt();return Rt({mutationFn:({id:t,updates:n})=>EZ(t,n),onSuccess:()=>{e.invalidateQueries({queryKey:["antiparasitic-protocols"]})}})},tee=()=>Er({queryKey:["client-stats"],queryFn:async()=>{var i,o,l,c;const[e,t]=await Promise.all([Re.from("clients").select("id, status"),Re.from("animals").select("id, status")]);if(e.error||t.error)throw new Error("Failed to fetch client stats");const n=((i=e.data)==null?void 0:i.filter(u=>u.status==="actif").length)||0;(o=e.data)!=null&&o.length;const r=((l=t.data)==null?void 0:l.length)||0,a=((c=t.data)==null?void 0:c.reduce((u,d)=>(u[d.status]=(u[d.status]||0)+1,u),{}))||{};return{totalClients:n,totalAnimals:r,animalsByStatus:a}},staleTime:5*60*1e3}),Cf=()=>Er({queryKey:["prescriptions"],queryFn:async()=>{try{const{data:e,error:t}=await Re.from("prescriptions").select(`
            id,
            consultation_id,
            animal_id,
            client_id,
            veterinarian_id,
            prescription_date,
            diagnosis,
            notes,
            status,
            refill_count,
            valid_until,
            created_at,
            updated_at,
            animal:animals(
              id,
              name,
              species,
              breed,
              color,
              sex,
              weight,
              birth_date,
              microchip_number,
              status
            ),
            client:clients(
              id,
              first_name,
              last_name,
              email,
              phone,
              mobile_phone,
              address,
              city,
              client_type
            ),
            medications:prescription_medications(
              id,
              prescription_id,
              stock_item_id,
              medication_name,
              dosage,
              frequency,
              duration,
              quantity,
              instructions,
              route,
              created_at
            )
          `).order("prescription_date",{ascending:!1});if(t)throw console.error("Error fetching prescriptions:",t),t;return(e||[]).map(n=>({...n,animal:Array.isArray(n.animal)?n.animal[0]:n.animal,client:Array.isArray(n.client)?n.client[0]:n.client}))}catch(e){throw console.error("Dynamic prescription fetch failed:",e),e}},staleTime:5*60*1e3,retry:3,retryDelay:e=>Math.min(1e3*2**e,3e4)}),nee=e=>Er({queryKey:["prescriptions","animal",e],queryFn:async()=>{try{const{data:t,error:n}=await Re.from("prescriptions").select(`
            id,
            consultation_id,
            animal_id,
            client_id,
            veterinarian_id,
            prescription_date,
            diagnosis,
            notes,
            status,
            refill_count,
            valid_until,
            created_at,
            updated_at,
            animal:animals(
              id,
              name,
              species,
              breed,
              color,
              sex,
              weight,
              birth_date,
              microchip_number,
              status
            ),
            client:clients(
              id,
              first_name,
              last_name,
              email,
              phone,
              mobile_phone,
              address,
              city,
              client_type
            ),
            medications:prescription_medications(
              id,
              prescription_id,
              stock_item_id,
              medication_name,
              dosage,
              frequency,
              duration,
              quantity,
              instructions,
              route,
              created_at
            )
          `).eq("animal_id",e).order("prescription_date",{ascending:!1});if(n)throw console.error("Error fetching prescriptions by animal:",n),n;return t||[]}catch(t){throw console.error("Dynamic prescription fetch by animal failed:",t),t}},enabled:!!e,staleTime:5*60*1e3,retry:2}),ree=()=>{const e=Dt();return Rt({mutationFn:async t=>{try{const{data:{user:n}}=await Re.auth.getUser();if(!n)throw new Error("User not authenticated");const{medications:r,...a}=t,i={consultation_id:a.consultation_id,animal_id:a.animal_id,client_id:a.client_id,veterinarian_id:a.veterinarian_id||n.id,prescription_date:a.prescription_date||new Date().toISOString(),diagnosis:a.diagnosis||null,notes:a.notes||null,status:a.status||"active",refill_count:a.refill_count||0,valid_until:a.valid_until||null},{data:o,error:l}=await Re.from("prescriptions").insert(i).select(`
            id,
            consultation_id,
            animal_id,
            client_id,
            veterinarian_id,
            prescription_date,
            diagnosis,
            notes,
            status,
            refill_count,
            valid_until,
            created_at,
            updated_at,
            animal:animals(
              id,
              name,
              species,
              breed,
              color,
              sex,
              weight,
              birth_date,
              microchip_number,
              status
            ),
            client:clients(
              id,
              first_name,
              last_name,
              email,
              phone,
              mobile_phone,
              address,
              city,
              client_type
            )
          `).single();if(l)throw console.error("Error creating prescription:",l),new Error(`Error creating prescription: ${l.message}`);if(r&&r.length>0){const c=r.map(h=>({prescription_id:o.id,stock_item_id:h.stock_item_id||null,medication_name:h.medication_name,dosage:h.dosage||null,frequency:h.frequency||null,duration:h.duration||null,quantity:h.quantity||1,instructions:h.instructions||null,route:h.route||null})),{data:u,error:d}=await Re.from("prescription_medications").insert(c).select();if(d)throw console.error("Error creating prescription medications:",d),await Re.from("prescriptions").delete().eq("id",o.id),new Error(`Error creating prescription medications: ${d.message}`)}return{...o,medications:r||[]}}catch(n){throw console.error("Dynamic prescription creation failed:",n),n}},onSuccess:()=>{e.invalidateQueries({queryKey:["prescriptions"]}),e.invalidateQueries({queryKey:["consultations"]}),e.invalidateQueries({queryKey:["dashboard-stats"]}),e.invalidateQueries({queryKey:["stock-items"]})},retry:1})},HS=()=>Er({queryKey:["stock-items"],queryFn:async()=>{try{const{data:e,error:t}=await Re.from("stock_items").select(`
            id,
            name,
            description,
            category,
            unit,
            current_quantity,
            minimum_quantity,
            maximum_quantity,
            unit_cost,
            selling_price,
            supplier,
            batch_number,
            expiration_date,
            location,
            requires_prescription,
            active,
            created_at,
            updated_at
          `).eq("active",!0).order("name");if(t)throw console.error("Error fetching stock items:",t),t;return e||[]}catch(e){throw console.error("Dynamic stock items fetch failed:",e),e}},staleTime:5*60*1e3,retry:3,retryDelay:e=>Math.min(1e3*2**e,3e4)}),see=()=>Er({queryKey:WS.profile(),queryFn:Bx,staleTime:5*60*1e3}),aee=()=>{const e=Dt();return Rt({mutationFn:t=>rJ(t),onSuccess:t=>{e.setQueryData(WS.profile(),t),e.invalidateQueries({queryKey:["auth","session"]})}})},KS=()=>Er({queryKey:cr.lists(),queryFn:OZ,staleTime:2*60*1e3}),F3=()=>{const e=Dt();return Rt({mutationFn:DZ,onSuccess:t=>{e.invalidateQueries({queryKey:cr.lists()}),t.animal_id&&e.invalidateQueries({queryKey:cr.byAnimal(t.animal_id)}),t.client_id&&(e.invalidateQueries({queryKey:cr.byClient(t.client_id)}),e.invalidateQueries({queryKey:ss.detail(t.client_id)})),e.invalidateQueries({queryKey:lc.clients()})}})},iee=()=>{const e=Dt();return Rt({mutationFn:({id:t,data:n})=>MZ(t,n),onSuccess:t=>{e.invalidateQueries({queryKey:cr.lists()}),e.setQueryData(cr.lists(),n=>n?n.map(r=>r.id===t.id?t:r):[]),t.animal_id&&e.invalidateQueries({queryKey:cr.byAnimal(t.animal_id)}),t.client_id&&e.invalidateQueries({queryKey:cr.byClient(t.client_id)})}})},oee=()=>{const e=Dt();return Rt({mutationFn:IZ,onSuccess:(t,n)=>{e.setQueryData(cr.lists(),r=>r?r.filter(a=>a.id!==n):[]),e.invalidateQueries({queryKey:cr.lists()}),e.invalidateQueries({queryKey:lc.clients()})}})};function Kx({open:e,onOpenChange:t}){const n=$Z(),{toast:r}=it(),[a,i]=b.useState({first_name:"",last_name:"",email:"",phone:"",mobile_phone:"",address:"",city:"",postal_code:"",country:"Maroc",notes:"",client_type:"particulier"}),o=u=>{const{id:d,value:h}=u.target;i(m=>({...m,[d]:h}))},l=(u,d)=>{i(h=>({...h,[u]:d}))},c=async u=>{u.preventDefault();try{await n.mutateAsync(a),r({title:"Client ajouté",description:`${a.first_name} ${a.last_name} a été ajouté et sauvegardé avec succès.`}),i({first_name:"",last_name:"",email:"",phone:"",mobile_phone:"",address:"",city:"",postal_code:"",country:"Maroc",notes:"",client_type:"particulier"}),t(!1)}catch{r({title:"Erreur",description:"Une erreur s'est produite lors de l'ajout du client.",variant:"destructive"})}};return s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Qe,{className:"sm:max-w-[500px]",children:[s.jsxs(tt,{children:[s.jsx(nt,{children:"Nouveau Client"}),s.jsx(Bt,{children:"Ajoutez un nouveau client à votre base de données."})]}),s.jsxs("form",{onSubmit:c,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"first_name",children:"Prénom *"}),s.jsx(G,{id:"first_name",value:a.first_name,onChange:o,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"last_name",children:"Nom *"}),s.jsx(G,{id:"last_name",value:a.last_name,onChange:o,required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"email",children:"Email"}),s.jsx(G,{id:"email",type:"email",value:a.email||"",onChange:o})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"phone",children:"Téléphone *"}),s.jsx(G,{id:"phone",value:a.phone||"",onChange:o,required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"address",children:"Adresse"}),s.jsx(G,{id:"address",value:a.address||"",onChange:o})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"city",children:"Ville"}),s.jsx(G,{id:"city",value:a.city||"",onChange:o})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"postal_code",children:"Code postal"}),s.jsx(G,{id:"postal_code",value:a.postal_code||"",onChange:o})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"mobile_phone",children:"Téléphone portable"}),s.jsx(G,{id:"mobile_phone",value:a.mobile_phone||"",onChange:o,placeholder:"Numéro de téléphone portable"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"client_type",children:"Type de client"}),s.jsxs(we,{value:a.client_type,onValueChange:u=>l("client_type",u),children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Sélectionner le type"})}),s.jsxs(be,{children:[s.jsx($,{value:"particulier",children:"Particulier"}),s.jsx($,{value:"eleveur",children:"Éleveur"}),s.jsx($,{value:"ferme",children:"Ferme"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"notes",children:"Notes"}),s.jsx(Ue,{id:"notes",value:a.notes||"",onChange:o,placeholder:"Notes additionnelles..."})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(F,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsxs(F,{type:"submit",disabled:n.isPending,children:[n.isPending&&s.jsx(Kn,{className:"mr-2 h-4 w-4 animate-spin"}),"Ajouter Client"]})]})]})]})})}function L3({open:e,onOpenChange:t,prefillClientId:n,prefillPetId:r,prefillType:a,prefillReason:i}){const{data:o=[]}=tr(),{data:l=[]}=nr(),c=F3(),{toast:u}=it(),[d,h]=b.useState({clientId:n||"",animalId:r||"",date:"",time:"",appointmentType:a||"consultation",notes:i||""}),[m,f]=b.useState([]);b.useEffect(()=>{if(n&&e){const w=l.filter(N=>N.client_id===n);f(w)}},[n,e,l]);const g=async w=>{if(w.preventDefault(),!d.clientId||!d.animalId||!d.date||!d.time){u({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires",variant:"destructive"});return}try{const N=new Date(`${d.date}T${d.time}:00`);await c.mutateAsync({client_id:d.clientId,animal_id:d.animalId,appointment_date:N.toISOString(),appointment_type:d.appointmentType,notes:d.notes||void 0,duration_minutes:30}),u({title:"Succès",description:"Rendez-vous créé avec succès"}),h({clientId:"",animalId:"",date:"",time:"",appointmentType:"consultation",notes:""}),f([]),t(!1)}catch(N){console.error("Error creating appointment:",N),u({title:"Erreur",description:"Impossible de créer le rendez-vous",variant:"destructive"})}},p=w=>{h(_=>({..._,clientId:w,animalId:""}));const N=l.filter(_=>_.client_id===w);f(N)},v=w=>`${w.first_name} ${w.last_name}`,x=w=>`${w.name} (${w.species})`,y=()=>new Date().toISOString().split("T")[0],j=()=>{const w=new Date;return w.setHours(w.getHours()+1,0,0,0),w.toTimeString().slice(0,5)};return s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Qe,{className:"sm:max-w-[500px] max-h-[90vh] overflow-y-auto",children:[s.jsxs(tt,{children:[s.jsxs(nt,{className:"flex items-center gap-2",children:[s.jsx(Ke,{className:"h-5 w-5"}),"Nouveau Rendez-vous"]}),s.jsx(Bt,{children:"Planifiez un nouveau rendez-vous pour un animal"})]}),s.jsxs("form",{onSubmit:g,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(D,{htmlFor:"client",className:"flex items-center gap-2",children:[s.jsx(hr,{className:"h-4 w-4"}),"Client *"]}),s.jsxs(we,{value:d.clientId,onValueChange:p,required:!0,children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Sélectionner un client"})}),s.jsx(be,{children:o.map(w=>s.jsx($,{value:w.id,children:v(w)},w.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(D,{htmlFor:"animal",className:"flex items-center gap-2",children:[s.jsx(ht,{className:"h-4 w-4"}),"Animal *"]}),s.jsxs(we,{value:d.animalId,onValueChange:w=>h(N=>({...N,animalId:w})),disabled:!d.clientId,required:!0,children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Sélectionner un animal"})}),s.jsx(be,{children:m.map(w=>s.jsx($,{value:w.id,children:x(w)},w.id))})]}),!d.clientId&&s.jsx("p",{className:"text-sm text-muted-foreground",children:"Sélectionnez d'abord un client"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(D,{htmlFor:"date",className:"flex items-center gap-2",children:[s.jsx(Ke,{className:"h-4 w-4"}),"Date *"]}),s.jsx(G,{id:"date",type:"date",value:d.date||y(),onChange:w=>h(N=>({...N,date:w.target.value})),min:new Date().toISOString().split("T")[0],required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(D,{htmlFor:"time",className:"flex items-center gap-2",children:[s.jsx(Kt,{className:"h-4 w-4"}),"Heure *"]}),s.jsx(G,{id:"time",type:"time",value:d.time||j(),onChange:w=>h(N=>({...N,time:w.target.value})),required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"appointmentType",children:"Type de rendez-vous"}),s.jsxs(we,{value:d.appointmentType,onValueChange:w=>h(N=>({...N,appointmentType:w})),children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Type de rendez-vous"})}),s.jsxs(be,{children:[s.jsx($,{value:"consultation",children:"Consultation générale"}),s.jsx($,{value:"vaccination",children:"Vaccination"}),s.jsx($,{value:"surgery",children:"Chirurgie"}),s.jsx($,{value:"follow-up",children:"Contrôle post-opératoire"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"notes",children:"Notes (optionnel)"}),s.jsx(Ue,{id:"notes",placeholder:"Notes additionnelles sur le rendez-vous...",value:d.notes,onChange:w=>h(N=>({...N,notes:w.target.value})),rows:3})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[s.jsx(F,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:c.isPending,children:"Annuler"}),s.jsx(F,{type:"submit",disabled:c.isPending,className:"gap-2",children:c.isPending?s.jsxs(s.Fragment,{children:[s.jsx(Kn,{className:"h-4 w-4 animate-spin"}),"Création..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ke,{className:"h-4 w-4"}),"Créer le rendez-vous"]})})]})]})]})})}function Gx({open:e,onOpenChange:t}){const{data:n=[]}=tr(),{data:r=[]}=nr(),a=LZ(),{toast:i}=it(),[o,l]=b.useState({name:"",type:"",breed:"",gender:"",birthDate:"",weight:"",color:"",ownerId:"",microchip:"",medicalNotes:"",photo:"",status:"vivant",hasPedigree:!1,officialName:"",pedigreeNumber:"",breeder:"",fatherName:"",fatherPedigree:"",fatherBreed:"",fatherTitles:"",motherName:"",motherPedigree:"",motherBreed:"",motherTitles:"",pedigreePhoto:""}),c=h=>{l(m=>({...m,[h.target.id]:h.target.value}))},u=(h,m)=>{l(f=>({...f,[h]:m}))},d=async h=>{if(h.preventDefault(),!n.find(f=>f.id===o.ownerId)){i({title:"Erreur",description:"Veuillez sélectionner un propriétaire valide."});return}if(o.microchip&&o.microchip.trim()&&r.find(g=>g.microchip_number===o.microchip.trim())){i({title:"Erreur",description:"Un animal avec ce numéro de puce existe déjà.",variant:"destructive"});return}try{const f={client_id:o.ownerId,name:o.name,species:o.type,breed:o.breed||void 0,color:o.color||void 0,sex:o.gender==="male"?"Mâle":o.gender==="female"?"Femelle":"Inconnu",weight:o.weight?Number(o.weight):void 0,birth_date:o.birthDate||void 0,...o.microchip&&o.microchip.trim()?{microchip_number:o.microchip.trim()}:{},notes:o.medicalNotes||void 0,photo_url:o.photo||void 0,status:o.status==="healthy"?"vivant":o.status==="urgent"?"décédé":"perdu"};await a.mutateAsync(f),i({title:"Animal ajouté",description:`${o.name} a été ajouté et sauvegardé avec succès.`}),l({name:"",type:"",breed:"",gender:"",birthDate:"",weight:"",color:"",ownerId:"",microchip:"",medicalNotes:"",photo:"",status:"vivant",hasPedigree:!1,officialName:"",pedigreeNumber:"",breeder:"",fatherName:"",fatherPedigree:"",fatherBreed:"",fatherTitles:"",motherName:"",motherPedigree:"",motherBreed:"",motherTitles:"",pedigreePhoto:""}),t(!1)}catch{i({title:"Erreur",description:"Erreur lors de l'ajout de l'animal",variant:"destructive"})}};return s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Qe,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto",children:[s.jsxs(tt,{children:[s.jsx(nt,{children:"Nouvel Animal"}),s.jsx(Bt,{children:"Ajoutez un nouvel animal à votre base de données."})]}),s.jsxs("form",{onSubmit:d,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"name",children:"Nom de l'animal *"}),s.jsx(G,{id:"name",value:o.name,onChange:c,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{children:"Type d'animal *"}),s.jsxs(we,{value:o.type,onValueChange:h=>u("type",h),children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Sélectionner le type"})}),s.jsx(be,{children:s.jsxs(s.Fragment,{children:[s.jsx($,{value:"Chien",children:"Chien"}),s.jsx($,{value:"Chat",children:"Chat"}),s.jsx($,{value:"Oiseau",children:"Oiseau"}),s.jsx($,{value:"Lapin",children:"Lapin"}),s.jsx($,{value:"Furet",children:"Furet"}),s.jsx($,{value:"Souris",children:"Souris"}),s.jsx($,{value:"Hamster",children:"Hamster"}),s.jsx($,{value:"Reptile",children:"Reptile"}),s.jsx($,{value:"Autre",children:"Autre"})]})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"breed",children:"Race"}),s.jsx(G,{id:"breed",value:o.breed,onChange:c})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{children:"Sexe"}),s.jsxs(we,{value:o.gender,onValueChange:h=>u("gender",h),children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Sélectionner le sexe"})}),s.jsxs(be,{children:[s.jsx($,{value:"male",children:"Mâle"}),s.jsx($,{value:"female",children:"Femelle"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"birthDate",children:"Date de naissance"}),s.jsx(G,{id:"birthDate",type:"date",value:o.birthDate,onChange:c,max:new Date().toISOString().split("T")[0]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"weight",children:"Poids (kg)"}),s.jsx(G,{id:"weight",value:o.weight,onChange:c})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"color",children:"Couleur"}),s.jsx(G,{id:"color",value:o.color,onChange:c})]}),s.jsx("div",{className:"space-y-2"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{children:"Propriétaire *"}),n.length===0?s.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:s.jsx("p",{className:"text-yellow-800 text-sm",children:"Aucun client disponible. Veuillez d'abord ajouter un client."})}):s.jsxs(we,{value:o.ownerId.toString(),onValueChange:h=>u("ownerId",h),children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Sélectionner le propriétaire"})}),s.jsx(be,{children:n.map(h=>s.jsxs($,{value:h.id.toString(),children:[h.first_name," ",h.last_name," - ",h.email]},h.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"microchip",children:"Numéro de puce électronique"}),s.jsx(G,{id:"microchip",value:o.microchip,onChange:c})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"medicalNotes",children:"Notes médicales"}),s.jsx(Ue,{id:"medicalNotes",value:o.medicalNotes,onChange:c,placeholder:"Allergies, conditions médicales, notes importantes..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{children:"État de santé"}),s.jsxs(we,{value:o.status,onValueChange:h=>u("status",h),children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Sélectionner l'état de santé"})}),s.jsxs(be,{children:[s.jsx($,{value:"healthy",children:"En bonne santé"}),s.jsx($,{value:"treatment",children:"En traitement"}),s.jsx($,{value:"urgent",children:"Urgent"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{children:"Photo de l'animal"}),s.jsx("input",{type:"file",accept:"image/*",onChange:async h=>{var g;const m=(g=h.target.files)==null?void 0:g[0];if(!m)return;const f=new FileReader;f.onload=()=>l(p=>({...p,photo:f.result})),f.readAsDataURL(m)}}),o.photo&&s.jsx("img",{src:o.photo,alt:"preview",className:"h-24 w-24 object-cover rounded"})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(F,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsx(F,{type:"submit",children:"Ajouter Animal"})]})]})]})})}const wp="vetpro-clinicSettings",B3={farmTypes:["Bovin laitier","Bovin viande","Porcin","Avicole","Ovin","Caprin","Équin","Apiculture","Aquaculture","Cuniculture","Mixte"],animalCategories:["Bovins laitiers","Bovins à viande","Porcs","Poules pondeuses","Poulets de chair","Ovins","Caprins","Chevaux","Lapins","Abeilles","Poissons"],breedsByCategory:{"Bovins laitiers":["Holstein","Prim'Holstein","Montbéliarde","Normande","Simmental"],"Bovins à viande":["Charolaise","Limousine","Blonde d'Aquitaine","Angus","Salers"],Porcs:["Large White","Landrace","Piétrain","Duroc","Hampshire"],"Poules pondeuses":["ISA Brown","Lohmann Brown","Hy-Line","Novogen","Dekalb"],"Poulets de chair":["Cobb 500","Ross 308","Hubbard","Arbor Acres"],Ovins:["Lacaune","Brebis laitière","Ile-de-France","Texel","Suffolk"],Caprins:["Saanen","Alpine","Poitevine","Boer","Angora"],Chevaux:["Pur-sang","Trotteur","Selle français","Arabe","Quarter Horse"],Lapins:["Néo-Zélandais","Californien","Fauve de Bourgogne","Géant des Flandres"],Abeilles:["Abeille noire","Buckfast","Carnica","Caucasienne"],Poissons:["Truite arc-en-ciel","Saumon","Carpe","Bar","Daurade"]},certificationTypes:["Agriculture Biologique","Label Rouge","AOC/AOP","IGP","Haute Valeur Environnementale","Bien-être animal","Global GAP","IFS Food","BRC Food","Œufs de France"],equipmentTypes:["Tracteur","Moissonneuse","Épandeur","Charrue","Système de traite","Tank à lait","Système d'alimentation automatique","Ventilation","Générateur","Système d'irrigation","Matériel de récolte"],defaultSurfaceUnit:"hectares",defaultCoordinateFormat:"decimal"},z3={clients:"table",pets:"cards",consultations:"table",appointments:"table",prescriptions:"table",farms:"cards",vaccinations:"table",antiparasitics:"table"},V3={openingTime:"08:00",closingTime:"18:00",slotDuration:30,lunchBreakStart:"12:00",lunchBreakEnd:"13:00",workingDays:["monday","tuesday","wednesday","thursday","friday","saturday"]},fw=[{id:1,name:"Dr. Jean Dupont",isActive:!0},{id:2,name:"Dr. Marie Martin",isActive:!0},{id:3,name:"Pr. Ahmed El Alaoui",isActive:!0}],Np={clinicName:"",address:"",phone:"",email:"",website:"",footerText:"",logo:"/placeholder.svg",currency:"MAD",species:"",showClinicInfo:!0,showVetsInfo:!0,veterinarians:fw,farmManagement:B3,displayPreferences:z3,defaultConsultationPrice:150,scheduleSettings:V3},q3=b.createContext(void 0),lee=({children:e})=>{const[t,n]=b.useState(Np);b.useEffect(()=>{const a=localStorage.getItem(wp);if(a)try{const i=JSON.parse(a),o={...Np,...i,veterinarians:i.veterinarians&&i.veterinarians.some(l=>l.name==="Dr. Martin"||l.name==="Dr. Dupont")?fw:i.veterinarians||fw,farmManagement:{...B3,...i.farmManagement},displayPreferences:{...z3,...i.displayPreferences},scheduleSettings:{...V3,...i.scheduleSettings}};n(o),localStorage.setItem(wp,JSON.stringify(o))}catch(i){console.error("Erreur lors du chargement des paramètres:",i),n(Np)}else localStorage.setItem(wp,JSON.stringify(Np))},[]);const r=a=>{n(a),localStorage.setItem(wp,JSON.stringify(a))};return s.jsx(q3.Provider,{value:{settings:t,updateSettings:r},children:e})};//!/ note: AD - not important
const Pt=()=>{const e=b.useContext(q3);if(!e)throw new Error("useSettings must be used within SettingsProvider");return e};function kd({open:e,onOpenChange:t,prefillData:n}){var N,_,S;const{data:r=[],isLoading:a}=tr(),{data:i=[],isLoading:o}=nr(),l=$3(),{toast:c}=it(),{settings:u}=Pt(),[d,h]=b.useState(!1),[m,f]=b.useState(!1),[g,p]=b.useState({clientId:(n==null?void 0:n.clientId)||"",clientName:"",animalId:(n==null?void 0:n.animalId)||"",animalName:"",date:n!=null&&n.consultation_date?new Date(n.consultation_date).toISOString().split("T")[0]:"",weight:((N=n==null?void 0:n.weight)==null?void 0:N.toString())||"",temperature:((_=n==null?void 0:n.temperature)==null?void 0:_.toString())||"",symptoms:(n==null?void 0:n.symptoms)||"",diagnosis:(n==null?void 0:n.diagnosis)||"",treatment:(n==null?void 0:n.treatment)||"",followUp:(n==null?void 0:n.follow_up_notes)||"",cost:((S=n==null?void 0:n.cost)==null?void 0:S.toString())||u.defaultConsultationPrice.toString(),notes:(n==null?void 0:n.notes)||"",photos:(n==null?void 0:n.photos)||[]}),v=i.filter(C=>C.client_id===g.clientId),x=new Date().toISOString().split("T")[0];b.useEffect(()=>{u.defaultConsultationPrice&&!g.cost&&p(C=>({...C,cost:u.defaultConsultationPrice.toString()}))},[u.defaultConsultationPrice,g.cost]);const y=C=>{p(A=>({...A,[C.target.id]:C.target.value}))},j=(C,A)=>{if(C==="clientId"){const T=r.find(E=>E.id===A);p(E=>({...E,clientId:A,clientName:T?`${T.first_name} ${T.last_name}`:"",animalId:"",animalName:""}))}else if(C==="animalId"){const T=i.find(E=>E.id===A);p(E=>({...E,animalId:A,animalName:(T==null?void 0:T.name)||""}))}else p(T=>({...T,[C]:A}))},w=async C=>{if(C.preventDefault(),!g.clientId||!g.animalId){c({title:"Erreur",description:"Veuillez sélectionner un client et un animal.",variant:"destructive"});return}try{const A={client_id:g.clientId,animal_id:g.animalId,consultation_type:"routine",consultation_date:g.date||x,weight:g.weight?Math.min(parseFloat(g.weight),999.9):void 0,temperature:g.temperature?Math.min(parseFloat(g.temperature),99.9):void 0,symptoms:g.symptoms,diagnosis:g.diagnosis,treatment:g.treatment,follow_up_notes:g.followUp,notes:g.notes};await l.mutateAsync(A),c({title:"Consultation enregistrée",description:`Consultation pour ${g.animalName} (${g.clientName}) a été enregistrée avec succès.`}),p({clientId:"",clientName:"",animalId:"",animalName:"",date:x,weight:"",temperature:"",symptoms:"",diagnosis:"",treatment:"",followUp:"",cost:u.defaultConsultationPrice.toString(),notes:"",photos:[]}),t(!1)}catch{c({title:"Erreur",description:"Impossible d'enregistrer la consultation. Veuillez réessayer.",variant:"destructive"})}};return b.useEffect(()=>{e&&p({clientId:"",clientName:"",animalId:"",animalName:"",date:x,weight:"",temperature:"",symptoms:"",diagnosis:"",treatment:"",followUp:"",cost:u.defaultConsultationPrice.toString(),notes:"",photos:[]})},[e,x]),s.jsxs(s.Fragment,{children:[s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Qe,{className:"sm:max-w-[700px] max-h-[80vh] overflow-y-auto",children:[s.jsxs(tt,{children:[s.jsx(nt,{children:"Nouvelle Consultation"}),s.jsx(Bt,{children:"Enregistrez une nouvelle consultation vétérinaire."})]}),s.jsxs("form",{onSubmit:w,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{children:"Client *"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(we,{value:g.clientId.toString(),onValueChange:C=>j("clientId",C),children:[s.jsx(je,{className:"flex-1",children:s.jsx(Ne,{placeholder:"Sélectionner le client"})}),s.jsx(be,{children:r.map(C=>s.jsxs($,{value:C.id,children:[C.first_name," ",C.last_name]},C.id))})]}),s.jsx(F,{type:"button",size:"sm",variant:"outline",onClick:()=>h(!0),className:"px-2",children:s.jsx(at,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{children:"Animal *"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(we,{value:g.animalId,onValueChange:C=>j("animalId",C),disabled:!g.clientId,children:[s.jsx(je,{className:"flex-1",children:s.jsx(Ne,{placeholder:g.clientId?"Sélectionner l'animal":"Sélectionnez d'abord un client"})}),s.jsx(be,{children:v.map(C=>s.jsxs($,{value:C.id,children:[C.name," (",C.species,")"]},C.id))})]}),s.jsx(F,{type:"button",size:"sm",variant:"outline",onClick:()=>f(!0),className:"px-2",disabled:!g.clientId,children:s.jsx(at,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"date",children:"Date *"}),s.jsx(G,{id:"date",type:"date",value:g.date||x,onChange:y,required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"weight",children:"Poids (kg)"}),s.jsx(G,{id:"weight",type:"number",step:"0.1",min:"0",max:"999.9",value:g.weight,onChange:y,placeholder:"ex: 25.5"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"temperature",children:"Température (°C)"}),s.jsx(G,{id:"temperature",type:"number",step:"0.1",min:"0",max:"99.9",value:g.temperature,onChange:y,placeholder:"ex: 38.5"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"symptoms",children:"Symptômes observés"}),s.jsx(Ue,{id:"symptoms",value:g.symptoms,onChange:y,placeholder:"Décrivez les symptômes et observations...",rows:3})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"diagnosis",children:"Diagnostic"}),s.jsx(Ue,{id:"diagnosis",value:g.diagnosis,onChange:y,placeholder:"Diagnostic posé...",rows:3})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"treatment",children:"Traitement administré"}),s.jsx(Ue,{id:"treatment",value:g.treatment,onChange:y,placeholder:"Traitements, injections, interventions...",rows:3})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"followUp",children:"Suivi recommandé"}),s.jsx(G,{id:"followUp",value:g.followUp,onChange:y,placeholder:"ex: Contrôle dans 1 semaine"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(D,{htmlFor:"cost",children:["Coût (",u.currency,")"]}),s.jsx(G,{id:"cost",type:"number",step:"0.01",value:g.cost,onChange:y,placeholder:"ex: 85.50"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"notes",children:"Notes additionnelles"}),s.jsx(Ue,{id:"notes",value:g.notes,onChange:y,placeholder:"Notes diverses, recommandations...",rows:3})]}),s.jsxs("div",{className:"space-y-2 col-span-2",children:[s.jsx(D,{children:"Photos de la consultation"}),s.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:async C=>{const A=Array.from(C.target.files||[]),T=await Promise.all(A.map(E=>new Promise((k,R)=>{const I=new FileReader;I.onload=()=>k(I.result),I.onerror=()=>R(),I.readAsDataURL(E)})));p(E=>({...E,photos:[...E.photos,...T]}))},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary file:text-primary-foreground hover:file:bg-primary/90"}),g.photos.length>0&&s.jsx("div",{className:"flex gap-2 overflow-x-auto pt-2",children:g.photos.map((C,A)=>s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:C,alt:`photo-${A}`,className:"h-24 w-24 object-cover rounded"}),s.jsx("button",{type:"button",onClick:()=>p(T=>({...T,photos:T.photos.filter((E,k)=>k!==A)})),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600",children:"×"})]},A))})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(F,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsx(F,{type:"submit",disabled:!g.animalId||l.isPending,children:l.isPending?"Enregistrement...":"Enregistrer Consultation"})]})]})]})}),s.jsx(Kx,{open:d,onOpenChange:h}),s.jsx(Gx,{open:m,onOpenChange:f})]})}const cee=({children:e,allowedRoles:t,fallback:n=null})=>{const{user:r}=oc();return!r||!t.includes(r.profile.role)?s.jsx(s.Fragment,{children:n}):s.jsx(s.Fragment,{children:e})},pw=({children:e,fallback:t=null})=>s.jsx(cee,{allowedRoles:["admin"],fallback:t,children:e});function uee(){const{data:e=[]}=tr(),{data:t=[]}=nr(),{data:n=[]}=qo(),{data:r=[]}=Uo(),{data:a=[]}=Hx(),{settings:i}=Pt(),o=JSON.parse(localStorage.getItem("vetpro-veterinarians")||"[]"),l=o.length===1?`Bienvenue ${o[0].title} ${o[0].name}`:`Bienvenue à ${i.clinicName}`,[c,u]=b.useState(!1),[d,h]=b.useState(!1),[m,f]=b.useState(!1),[g,p]=b.useState(!1),v=e.length,x=t.length,y=r.length,j=a.length,w=new Date().toISOString().split("T")[0],N=n.filter(S=>S.consultation_date.split("T")[0]===w).length,_={totalRevenue:0,totalExpenses:0,netIncome:0,revenueBreakdown:{consultations:0,vaccinations:0,antiparasitics:0,prescriptions:0,manualEntries:0},expenseBreakdown:{stockPurchases:0,salaries:0,rent:0,taxes:0,other:0}};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"relative overflow-hidden gradient-hero rounded-2xl p-4 md:p-8 mb-8",children:s.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center gap-6 md:gap-8",children:[i.logo&&s.jsx("img",{src:i.logo,alt:"Logo clinique",className:"h-16 w-16 md:h-20 md:w-20 object-contain rounded"}),s.jsxs("div",{className:"flex-1 space-y-4 md:space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ht,{className:"h-6 w-6 md:h-8 md:w-8 text-primary"}),s.jsx("span",{className:"text-xs md:text-sm font-medium text-primary",children:"Gestion Vétérinaire Complète"})]}),s.jsxs("h1",{className:"text-2xl md:text-4xl font-bold leading-tight max-w-3xl",children:[l,", ",s.jsx("span",{className:"gradient-primary bg-clip-text text-transparent block",children:"Dashboard VetPro"})]}),s.jsx("p",{className:"text-base md:text-lg text-muted-foreground max-w-3xl",children:"Gérez efficacement vos clients, leurs animaux, les rendez-vous et consultations. Votre pratique vétérinaire optimisée en un seul endroit."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 md:gap-4 pt-4",children:[s.jsxs(F,{size:"lg",className:"gap-2 medical-glow w-full sm:w-auto",onClick:()=>u(!0),children:[s.jsx(La,{className:"h-5 w-5"}),"Nouveau Client",s.jsx(xb,{className:"h-4 w-4"})]}),s.jsxs(F,{variant:"outline",size:"lg",className:"gap-2 w-full sm:w-auto",onClick:()=>f(!0),children:[s.jsx(ht,{className:"h-5 w-5"}),"Nouvel Animal"]}),s.jsxs(F,{variant:"outline",size:"lg",className:"gap-2 w-full sm:w-auto",onClick:()=>h(!0),children:[s.jsx(Ke,{className:"h-5 w-5"}),"Planifier RDV"]}),s.jsxs(F,{variant:"outline",size:"lg",className:"gap-2 w-full sm:w-auto",onClick:()=>p(!0),children:[s.jsx(wn,{className:"h-5 w-5"}),"Nouvelle Consultation"]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 md:gap-6 pt-6 md:pt-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl md:text-2xl font-bold text-primary",children:v}),s.jsx("div",{className:"text-xs md:text-sm text-muted-foreground",children:"Clients actifs"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl md:text-2xl font-bold text-secondary",children:x}),s.jsx("div",{className:"text-xs md:text-sm text-muted-foreground",children:"Animaux suivis"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl md:text-2xl font-bold text-accent",children:N}),s.jsx("div",{className:"text-xs md:text-sm text-muted-foreground",children:"Consultations aujourd'hui"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl md:text-2xl font-bold text-blue-600",children:y}),s.jsx("div",{className:"text-xs md:text-sm text-muted-foreground",children:"Vaccinations"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl md:text-2xl font-bold text-purple-600",children:j}),s.jsx("div",{className:"text-xs md:text-sm text-muted-foreground",children:"Antiparasitaires"})]}),s.jsx(pw,{children:s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-xl md:text-2xl font-bold text-emerald-600",children:[_.totalRevenue.toFixed(2)," ",i.currency||"€"]}),s.jsx("div",{className:"text-xs md:text-sm text-muted-foreground",children:"Revenus ce mois"})]})})]})]}),s.jsx("div",{className:"hidden lg:block",children:s.jsx("img",{src:ER,alt:"Vétérinaire professionnel examinant un chien",className:"w-96 h-64 object-cover rounded-xl shadow-medical"})})]})}),s.jsx(Kx,{open:c,onOpenChange:u}),s.jsx(L3,{open:d,onOpenChange:h}),s.jsx(Gx,{open:m,onOpenChange:f}),s.jsx(kd,{open:g,onOpenChange:p})]})}function dee(){const{data:e=[]}=tr(),{data:t=[]}=nr(),{data:n=[]}=qo(),{data:r=[]}=KS(),{data:a=[]}=Cf(),{data:i=[]}=Uo(),{data:o=[]}=Hx(),{data:l=[]}=HS(),{settings:c}=Pt(),u=e.length,d=t.length;n.length,r.length,a.length;const h=0,m=i.length,f=o.length,g=l.length,p=new Date().getMonth(),v=new Date().getFullYear(),x=n.filter(B=>{const U=new Date(B.consultation_date);return U.getMonth()===p&&U.getFullYear()===v}).length,y=i.filter(B=>{const U=new Date(B.vaccination_date);return U.getMonth()===p&&U.getFullYear()===v}).length,j=o.filter(B=>{const U=new Date(B.treatment_date);return U.getMonth()===p&&U.getFullYear()===v}).length,w=new Date().toISOString().split("T")[0],N=n.filter(B=>B.consultation_date.split("T")[0]===w).length,_=r.filter(B=>B.appointment_date.split("T")[0]===w&&B.status!=="cancelled"&&B.status!=="completed").length,S=[],C=l.filter(B=>B.current_quantity<=B.minimum_quantity).length,A=l.filter(B=>B.current_quantity===0).length;l.reduce((B,U)=>B+U.current_quantity*(U.unit_cost||0),0),new Date(v,p,1).toISOString().split("T")[0],new Date(v,p+1,0).toISOString().split("T")[0];const T={totalRevenue:0,totalExpenses:0,netIncome:0,revenueBreakdown:{consultations:0,vaccinations:0,antiparasitics:0,prescriptions:0,manualEntries:0},expenseBreakdown:{stockPurchases:0,salaries:0,rent:0,taxes:0,other:0}},E=T.totalRevenue,k=T.netIncome,R=(B,U)=>{if(U===0)return B>0?"+100%":"0%";const X=(B-U)/U*100;return X>=0?`+${Math.round(X)}%`:`${Math.round(X)}%`},I=p===0?11:p-1,W=p===0?v-1:v,V=n.filter(B=>{const U=new Date(B.consultation_date);return U.getMonth()===I&&U.getFullYear()===W}).length,q=0,P=0;r.filter(B=>{const U=new Date(B.appointment_date);return U.getMonth()===I&&U.getFullYear()===W}).length;const O=[{title:"Clients Total",value:u.toString(),change:R(u,q),icon:La,color:"text-blue-600",bgColor:"bg-blue-50",description:`${u>0?Math.round(u/10):0} nouveaux ce mois`},{title:"Animaux Suivis",value:d.toString(),change:R(d,P),icon:ht,color:"text-red-600",bgColor:"bg-red-50",description:`${d>0?Math.round(d/8):0} nouveaux ce mois`},{title:"RDV Aujourd'hui",value:_.toString(),change:_>0?"+"+Math.min(20,Math.floor(_*.3))+"%":"0%",icon:Ke,color:"text-purple-600",bgColor:"bg-purple-50",description:`${S.length} à venir cette semaine`},{title:"Consultations",value:x.toString(),change:R(x,V),icon:wn,color:"text-green-600",bgColor:"bg-green-50",description:`${N} aujourd'hui`},{title:"Revenus Réels",value:`${E.toFixed(0)} ${c.currency||"€"}`,change:"0%",icon:vd,color:"text-emerald-600",bgColor:"bg-emerald-50",description:`Bénéfice: ${k.toFixed(0)} ${c.currency||"€"}`},{title:"Activité Ferme",value:h.toString(),change:"0%",icon:ra,color:"text-orange-600",bgColor:"bg-orange-50",description:`${h} exploitations actives`},{title:"Vaccinations",value:y.toString(),change:y>0?"+"+Math.min(25,Math.floor(y*.3))+"%":"0%",icon:Br,color:"text-blue-600",bgColor:"bg-blue-50",description:`${m} total ce mois`},{title:"Antiparasitaires",value:j.toString(),change:j>0?"+"+Math.min(20,Math.floor(j*.25))+"%":"0%",icon:Pr,color:"text-purple-600",bgColor:"bg-purple-50",description:`${f} total ce mois`},{title:"Stock",value:g.toString(),change:C>0?"-"+Math.min(15,Math.floor(C*.2))+"%":"0%",icon:C>0?gn:Oa,color:C>0?"text-red-600":"text-green-600",bgColor:C>0?"bg-red-50":"bg-green-50",description:`${C} en rupture, ${A} épuisés`}];return s.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:O.map(B=>s.jsxs(Z,{className:"card-hover",children:[s.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(me,{className:"text-sm font-medium text-muted-foreground",children:B.title}),s.jsx("div",{className:`p-2 rounded-lg ${B.bgColor}`,children:s.jsx(B.icon,{className:`h-4 w-4 ${B.color}`})})]}),s.jsxs(ee,{children:[s.jsx("div",{className:"text-2xl font-bold",children:B.value}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[s.jsx("span",{className:"text-secondary font-medium",children:B.change})," vs mois dernier"]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:B.description})]})]},B.title))})}const hee=gf("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function _e({className:e,variant:t,...n}){return s.jsx("div",{className:De(hee({variant:t}),e),...n})}function mee({open:e,onOpenChange:t,client:n,onEdit:r}){return n?s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Qe,{className:"sm:max-w-[600px]",children:[s.jsx(tt,{children:s.jsx(nt,{children:"Profil Client"})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(Zn,{className:"h-20 w-20",children:s.jsx(er,{className:"bg-primary text-primary-foreground text-xl",children:n.name.split(" ").map(a=>a[0]).join("")})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h2",{className:"text-2xl font-semibold",children:n.name}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(xf,{className:"h-3 w-3"}),n.email]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Eu,{className:"h-3 w-3"}),n.phone]})]})]})]}),n.address&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"font-semibold",children:"Adresse"}),s.jsxs("div",{className:"flex items-start gap-2 text-muted-foreground",children:[s.jsx(rc,{className:"h-4 w-4 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{children:n.address}),s.jsxs("p",{children:[n.postalCode," ",n.city]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[s.jsx(ht,{className:"h-4 w-4 text-primary"}),"Animaux (",n.pets.length,")"]}),n.pets.length>0?s.jsx("div",{className:"space-y-2",children:n.pets.map((a,i)=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:a.name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.type," • ",a.breed]})]}),s.jsx(_e,{variant:"outline",children:a.status==="healthy"?"En bonne santé":a.status==="treatment"?"En traitement":"Urgent"})]},i))}):s.jsx("p",{className:"text-muted-foreground",children:"Aucun animal enregistré"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-muted/30 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Dernière visite:"}),s.jsx("p",{children:new Date(n.lastVisit).toLocaleDateString("fr-FR")})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Total visites:"}),s.jsx("p",{children:n.totalVisits})]})]}),n.notes&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"font-semibold",children:"Notes"}),s.jsx("p",{className:"text-muted-foreground",children:n.notes})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(F,{variant:"outline",onClick:()=>t(!1),children:"Fermer"}),s.jsxs(F,{onClick:r,className:"gap-2",children:[s.jsx($t,{className:"h-4 w-4"}),"Modifier"]})]})]})]})}):null}function fee({open:e,onOpenChange:t,client:n}){const{updateClient:r}=bt(),{toast:a}=it(),[i,o]=b.useState({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",postalCode:"",idNumber:"",notes:""});b.useEffect(()=>{n&&o({firstName:n.firstName,lastName:n.lastName,email:n.email,phone:n.phone,address:n.address||"",city:n.city||"",postalCode:n.postalCode||"",idNumber:n.idNumber||"",notes:n.notes||""})},[n]);const l=u=>{o(d=>({...d,[u.target.id]:u.target.value}))},c=u=>{u.preventDefault(),n&&(r(n.id,i),a({title:"Client modifié",description:`Les informations de ${i.firstName} ${i.lastName} ont été mises à jour.`}),t(!1))};return n?s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Qe,{className:"sm:max-w-[500px]",children:[s.jsx(tt,{children:s.jsx(nt,{children:"Modifier Client"})}),s.jsxs("form",{onSubmit:c,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"firstName",children:"Prénom *"}),s.jsx(G,{id:"firstName",value:i.firstName,onChange:l,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"lastName",children:"Nom *"}),s.jsx(G,{id:"lastName",value:i.lastName,onChange:l,required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"email",children:"Email"}),s.jsx(G,{id:"email",type:"email",value:i.email,onChange:l})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"phone",children:"Téléphone *"}),s.jsx(G,{id:"phone",value:i.phone,onChange:l,required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"address",children:"Adresse"}),s.jsx(G,{id:"address",value:i.address,onChange:l})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"city",children:"Ville"}),s.jsx(G,{id:"city",value:i.city,onChange:l})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"postalCode",children:"Code postal"}),s.jsx(G,{id:"postalCode",value:i.postalCode,onChange:l})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"idNumber",children:"N° pièce d'identité"}),s.jsx(G,{id:"idNumber",value:i.idNumber,onChange:l,placeholder:"Numéro de carte d'identité, passeport, etc."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"notes",children:"Notes"}),s.jsx(Ue,{id:"notes",value:i.notes,onChange:l,placeholder:"Notes additionnelles..."})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(F,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsx(F,{type:"submit",children:"Sauvegarder"})]})]})]})}):null}function pee(){const{clients:e,pets:t,consultations:n,appointments:r}=bt();Pt();const[a,i]=b.useState(!1),[o,l]=b.useState(!1),[c,u]=b.useState(!1),[d,h]=b.useState(null),f=[...e].sort((S,C)=>new Date(C.lastVisit).getTime()-new Date(S.lastVisit).getTime()).slice(0,5),g=e.length,p=e.filter(S=>{const C=new Date(S.lastVisit),A=new Date;return A.setDate(A.getDate()-30),C>=A}).length,v=e.filter(S=>{const C=new Date(S.lastVisit),A=new Date().getMonth(),T=new Date().getFullYear();return C.getMonth()===A&&C.getFullYear()===T}).length,x=g>0?(t.length/g).toFixed(1):"0",y=S=>{h(S),l(!0)},j=S=>{h(S),u(!0)},w=()=>{l(!1),u(!0)},N=S=>{const C=new Date(S),T=Math.abs(new Date().getTime()-C.getTime()),E=Math.ceil(T/(1e3*60*60*24));return E===0?"Aujourd'hui":E===1?"Hier":E<7?`Il y a ${E} jours`:E<30?`Il y a ${Math.floor(E/7)} semaine${Math.floor(E/7)>1?"s":""}`:`Il y a ${Math.floor(E/30)} mois`},_=S=>{const C=t.filter(E=>E.ownerId===S.id),A=n.filter(E=>E.clientId===S.id),T=r.filter(E=>E.clientId===S.id);return{pets:C.length,consultations:A.length,appointments:T.length,lastActivity:A.length>0?Math.max(...A.map(E=>new Date(E.date).getTime())):new Date(S.lastVisit).getTime()}};return s.jsxs(s.Fragment,{children:[s.jsxs(Z,{className:"card-hover",children:[s.jsxs(he,{className:"flex flex-row items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(me,{className:"text-lg font-semibold",children:"Clients Récents"}),s.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(La,{className:"h-3 w-3"}),s.jsxs("span",{children:[g," total"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ra,{className:"h-3 w-3"}),s.jsxs("span",{children:[p," actifs"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(an,{className:"h-3 w-3"}),s.jsxs("span",{children:["+",v," ce mois"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Kt,{className:"h-3 w-3"}),s.jsxs("span",{children:["Ø ",x," animaux"]})]})]})]}),s.jsxs(F,{size:"sm",className:"gap-2",onClick:()=>i(!0),children:[s.jsx(at,{className:"h-4 w-4"}),"Nouveau Client"]})]}),s.jsx(ee,{className:"space-y-4",children:f.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(La,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"Aucun client enregistré"}),s.jsx("p",{className:"text-sm",children:"Commencez par créer votre premier client"})]}):f.map(S=>{const C=_(S);return s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(Zn,{children:s.jsx(er,{className:"bg-primary text-primary-foreground",children:S.name.split(" ").map(A=>A[0]).join("")})}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h4",{className:"font-medium",children:S.name}),s.jsxs(_e,{variant:"outline",className:"text-xs",children:[C.pets," animal",C.pets>1?"s":""]})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(xf,{className:"h-3 w-3"}),S.email]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Eu,{className:"h-3 w-3"}),S.phone]}),S.city&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(rc,{className:"h-3 w-3"}),S.city]})]}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[s.jsxs("span",{children:["Dernière visite: ",N(S.lastVisit)]}),s.jsxs("span",{children:["Total visites: ",S.totalVisits]}),s.jsxs("span",{children:["Consultations: ",C.consultations]}),s.jsxs("span",{children:["RDV: ",C.appointments]})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(F,{size:"sm",variant:"outline",className:"gap-2",onClick:()=>y(S),children:[s.jsx(Nn,{className:"h-4 w-4"}),"Voir"]}),s.jsxs(F,{size:"sm",variant:"outline",className:"gap-2",onClick:()=>j(S),children:[s.jsx($t,{className:"h-4 w-4"}),"Modifier"]})]})]},S.id)})})]}),s.jsx(Kx,{open:a,onOpenChange:i}),s.jsx(mee,{open:o,onOpenChange:l,client:d,onEdit:w}),s.jsx(fee,{open:c,onOpenChange:u,client:d})]})}function U3({open:e,onOpenChange:t,pet:n,onEdit:r,onShowDossier:a,onDelete:i}){const{updatePet:o}=bt(),[l,c]=b.useState(null);b.useEffect(()=>{e&&c((n==null?void 0:n.photo)||null)},[e,n]);const u=b.useRef(null),d=h=>{var f;const m=(f=h.target.files)==null?void 0:f[0];if(m){const g=new FileReader;g.onload=p=>{var x;const v=(x=p.target)==null?void 0:x.result;c(v),o(n.id,{photo:v})},g.readAsDataURL(m)}};return n?s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Qe,{className:"sm:max-w-[700px] max-h-[80vh] overflow-y-auto",children:[s.jsx(tt,{children:s.jsx(nt,{children:"Profil Animal"})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-start gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx(Zn,{className:"h-24 w-24",children:l?s.jsx(Ru,{src:l,alt:n.name,className:"h-full w-full object-cover rounded-full"}):s.jsx(er,{className:"bg-primary-glow text-primary-foreground",children:s.jsx(ht,{className:"h-12 w-12"})})}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(F,{size:"sm",variant:"outline",className:"gap-2 w-full flex items-center justify-center",onClick:()=>{var h;return(h=u.current)==null?void 0:h.click()},children:[s.jsx(vf,{className:"h-4 w-4"}),l?"Changer photo":"Ajouter photo"]}),l&&s.jsx(F,{size:"sm",variant:"destructive",className:"gap-2 w-full",onClick:()=>{c(null),o(n.id,{photo:void 0})},children:"Supprimer photo"}),s.jsx("input",{ref:u,type:"file",accept:"image/*",onChange:d,className:"hidden"})]})]}),s.jsxs("div",{className:"flex-1 space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("h2",{className:"text-2xl font-semibold",children:n.name}),s.jsx(_e,{variant:"outline",className:n.status==="healthy"?"bg-secondary text-secondary-foreground":n.status==="treatment"?"bg-accent text-accent-foreground":"bg-destructive text-destructive-foreground",children:n.status==="healthy"?"En bonne santé":n.status==="treatment"?"En traitement":"Urgent"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Type:"}),s.jsx("p",{className:"text-muted-foreground",children:n.type})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Race:"}),s.jsx("p",{className:"text-muted-foreground",children:n.breed||"Non spécifiée"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Âge:"}),s.jsx("p",{className:"text-muted-foreground",children:n.birthDate?s.jsxs(s.Fragment,{children:[Du(n.birthDate),s.jsx("br",{}),s.jsxs("span",{className:"text-xs",children:["Né(e) le ",Da(n.birthDate)]})]}):"Non spécifié"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Poids:"}),s.jsx("p",{className:"text-muted-foreground",children:n.weight||"Non spécifié"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Couleur:"}),s.jsx("p",{className:"text-muted-foreground",children:n.color||"Non spécifiée"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(hr,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Propriétaire:"}),s.jsx("p",{className:"text-muted-foreground",children:n.owner})]})]}),n.microchip&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Puce électronique:"}),s.jsx("p",{className:"text-muted-foreground font-mono",children:n.microchip})]})]}),s.jsxs("div",{className:"space-y-4",children:[n.lastVisit&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ke,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Dernière visite:"}),s.jsx("p",{className:"text-muted-foreground",children:new Date(n.lastVisit).toLocaleDateString("fr-FR")})]})]}),n.nextAppointment&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ke,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Prochain RDV:"}),s.jsx("p",{className:"text-muted-foreground",children:new Date(n.nextAppointment).toLocaleDateString("fr-FR")})]})]})]})]}),n.vaccinations&&n.vaccinations.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"font-semibold",children:"Vaccinations"}),s.jsx("div",{className:"flex gap-2 flex-wrap",children:n.vaccinations.map((h,m)=>s.jsx(_e,{variant:"outline",children:h},m))})]}),n.medicalNotes&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"font-semibold",children:"Notes médicales"}),s.jsx("p",{className:"text-muted-foreground p-3 bg-muted/30 rounded-lg",children:n.medicalNotes})]}),s.jsxs("div",{className:"flex justify-between gap-2 pt-4 border-t",children:[s.jsxs(F,{variant:"outline",onClick:a,className:"gap-2",children:[s.jsx(Cr,{className:"h-4 w-4"}),"Voir Dossier Médical"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(F,{variant:"outline",onClick:()=>t(!1),children:"Fermer"}),i&&s.jsxs(F,{variant:"outline",onClick:()=>{t(!1),i()},className:"text-destructive hover:text-destructive-foreground hover:bg-destructive",children:[s.jsx(rn,{className:"h-4 w-4 mr-2"}),"Supprimer"]}),s.jsxs(F,{onClick:r,className:"gap-2",children:[s.jsx($t,{className:"h-4 w-4"}),"Modifier"]})]})]})]})]})}):null}var Yx="Checkbox",[gee,cTe]=Kr(Yx),[vee,GS]=gee(Yx);function xee(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:a,disabled:i,form:o,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:h}=e,[m,f]=bi({prop:n,defaultProp:a??!1,onChange:c,caller:Yx}),[g,p]=b.useState(null),[v,x]=b.useState(null),y=b.useRef(!1),j=g?!!o||!!g.closest("form"):!0,w={checked:m,disabled:i,setChecked:f,control:g,setControl:p,name:l,form:o,value:d,hasConsumerStoppedPropagationRef:y,required:u,defaultChecked:_o(a)?!1:a,isFormControl:j,bubbleInput:v,setBubbleInput:x};return s.jsx(vee,{scope:t,...w,children:yee(h)?h(w):r})}var W3="CheckboxTrigger",H3=b.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},a)=>{const{control:i,value:o,disabled:l,checked:c,required:u,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:m,isFormControl:f,bubbleInput:g}=GS(W3,e),p=pt(a,d),v=b.useRef(c);return b.useEffect(()=>{const x=i==null?void 0:i.form;if(x){const y=()=>h(v.current);return x.addEventListener("reset",y),()=>x.removeEventListener("reset",y)}},[i,h]),s.jsx(ze.button,{type:"button",role:"checkbox","aria-checked":_o(c)?"mixed":c,"aria-required":u,"data-state":X3(c),"data-disabled":l?"":void 0,disabled:l,value:o,...r,ref:p,onKeyDown:ke(t,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:ke(n,x=>{h(y=>_o(y)?!0:!y),g&&f&&(m.current=x.isPropagationStopped(),m.current||x.stopPropagation())})})});H3.displayName=W3;var YS=b.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:u,form:d,...h}=e;return s.jsx(xee,{__scopeCheckbox:n,checked:a,defaultChecked:i,disabled:l,required:o,onCheckedChange:u,name:r,form:d,value:c,internal_do_not_use_render:({isFormControl:m})=>s.jsxs(s.Fragment,{children:[s.jsx(H3,{...h,ref:t,__scopeCheckbox:n}),m&&s.jsx(Q3,{__scopeCheckbox:n})]})})});YS.displayName=Yx;var K3="CheckboxIndicator",G3=b.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...a}=e,i=GS(K3,n);return s.jsx(Es,{present:r||_o(i.checked)||i.checked===!0,children:s.jsx(ze.span,{"data-state":X3(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});G3.displayName=K3;var Y3="CheckboxBubbleInput",Q3=b.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:o,required:l,disabled:c,name:u,value:d,form:h,bubbleInput:m,setBubbleInput:f}=GS(Y3,e),g=pt(n,f),p=qS(i),v=rS(r);b.useEffect(()=>{const y=m;if(!y)return;const j=window.HTMLInputElement.prototype,N=Object.getOwnPropertyDescriptor(j,"checked").set,_=!a.current;if(p!==i&&N){const S=new Event("click",{bubbles:_});y.indeterminate=_o(i),N.call(y,_o(i)?!1:i),y.dispatchEvent(S)}},[m,p,i,a]);const x=b.useRef(_o(i)?!1:i);return s.jsx(ze.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??x.current,required:l,disabled:c,name:u,value:d,form:h,...t,tabIndex:-1,ref:g,style:{...t.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Q3.displayName=Y3;function yee(e){return typeof e=="function"}function _o(e){return e==="indeterminate"}function X3(e){return _o(e)?"indeterminate":e?"checked":"unchecked"}const mi=b.forwardRef(({className:e,...t},n)=>s.jsx(YS,{ref:n,className:De("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(G3,{className:De("flex items-center justify-center text-current"),children:s.jsx(G1,{className:"h-4 w-4"})})}));mi.displayName=YS.displayName;function jee({open:e,onOpenChange:t,pet:n}){const{updatePet:r,clients:a}=bt();Pt();const{toast:i}=it(),[o,l]=b.useState({name:"",type:"",breed:"",gender:"",birthDate:"",weight:"",color:"",ownerId:0,microchip:"",medicalNotes:"",status:"vivant",hasPedigree:!1,officialName:"",pedigreeNumber:"",breeder:"",fatherName:"",fatherPedigree:"",fatherBreed:"",fatherTitles:"",motherName:"",motherPedigree:"",motherBreed:"",motherTitles:"",pedigreePhoto:""});b.useEffect(()=>{n&&l({name:n.name,type:n.type,breed:n.breed||"",gender:n.gender||"",birthDate:n.birthDate||"",weight:n.weight||"",color:n.color||"",ownerId:n.ownerId,microchip:n.microchip||"",medicalNotes:n.medicalNotes||"",status:n.status,hasPedigree:n.hasPedigree||!1,officialName:n.officialName||"",pedigreeNumber:n.pedigreeNumber||"",breeder:n.breeder||"",fatherName:n.fatherName||"",fatherPedigree:n.fatherPedigree||"",fatherBreed:n.fatherBreed||"",fatherTitles:n.fatherTitles||"",motherName:n.motherName||"",motherPedigree:n.motherPedigree||"",motherBreed:n.motherBreed||"",motherTitles:n.motherTitles||"",pedigreePhoto:n.pedigreePhoto||""})},[n]);const c=h=>{l(m=>({...m,[h.target.id]:h.target.value}))},u=(h,m)=>{l(f=>({...f,[h]:h==="ownerId"?parseInt(m):m}))},d=h=>{if(h.preventDefault(),!n)return;const m=a.find(f=>f.id===o.ownerId);r(n.id,{...o,owner:(m==null?void 0:m.name)||n.owner}),i({title:"Animal modifié",description:`Les informations de ${o.name} ont été mises à jour.`}),t(!1)};return n?s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Qe,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto",children:[s.jsx(tt,{children:s.jsx(nt,{children:"Modifier Animal"})}),s.jsxs("form",{onSubmit:d,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"name",children:"Nom de l'animal *"}),s.jsx(G,{id:"name",value:o.name,onChange:c,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{children:"Type d'animal *"}),s.jsxs(we,{value:o.type,onValueChange:h=>u("type",h),children:[s.jsx(je,{children:s.jsx(Ne,{})}),s.jsx(be,{children:s.jsxs(s.Fragment,{children:[s.jsx($,{value:"Chien",children:"Chien"}),s.jsx($,{value:"Chat",children:"Chat"}),s.jsx($,{value:"Oiseau",children:"Oiseau"}),s.jsx($,{value:"Lapin",children:"Lapin"}),s.jsx($,{value:"Furet",children:"Furet"}),s.jsx($,{value:"Souris",children:"Souris"}),s.jsx($,{value:"Hamster",children:"Hamster"}),s.jsx($,{value:"Reptile",children:"Reptile"}),s.jsx($,{value:"Autre",children:"Autre"})]})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"breed",children:"Race"}),s.jsx(G,{id:"breed",value:o.breed,onChange:c})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{children:"Sexe"}),s.jsxs(we,{value:o.gender,onValueChange:h=>u("gender",h),children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Sélectionner le sexe"})}),s.jsxs(be,{children:[s.jsx($,{value:"male",children:"Mâle"}),s.jsx($,{value:"female",children:"Femelle"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"birthDate",children:"Date de naissance"}),s.jsx(G,{id:"birthDate",type:"date",value:o.birthDate,onChange:c,max:new Date().toISOString().split("T")[0]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"weight",children:"Poids (kg)"}),s.jsx(G,{id:"weight",value:o.weight,onChange:c})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"color",children:"Couleur"}),s.jsx(G,{id:"color",value:o.color,onChange:c})]}),s.jsx("div",{className:"space-y-2"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{children:"Propriétaire *"}),s.jsxs(we,{value:o.ownerId.toString(),onValueChange:h=>u("ownerId",h),children:[s.jsx(je,{children:s.jsx(Ne,{})}),s.jsx(be,{children:a.map(h=>s.jsx($,{value:h.id.toString(),children:h.name},h.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{children:"Statut de santé"}),s.jsxs(we,{value:o.status,onValueChange:h=>u("status",h),children:[s.jsx(je,{children:s.jsx(Ne,{})}),s.jsxs(be,{children:[s.jsx($,{value:"healthy",children:"En bonne santé"}),s.jsx($,{value:"treatment",children:"En traitement"}),s.jsx($,{value:"urgent",children:"Urgent"})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"microchip",children:"Numéro de puce électronique"}),s.jsx(G,{id:"microchip",value:o.microchip,onChange:c})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"medicalNotes",children:"Notes médicales"}),s.jsx(Ue,{id:"medicalNotes",value:o.medicalNotes,onChange:c,placeholder:"Allergies, conditions médicales, notes importantes..."})]}),s.jsxs("div",{className:"space-y-4 border-t pt-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(mi,{id:"hasPedigree",checked:o.hasPedigree,onCheckedChange:h=>l(m=>({...m,hasPedigree:h}))}),s.jsx(D,{htmlFor:"hasPedigree",className:"text-lg font-medium",children:"Cet animal a un pedigree officiel"})]}),o.hasPedigree&&s.jsxs("div",{className:"space-y-4 pl-6 border-l-2 border-primary/20",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"officialName",children:"Nom officiel"}),s.jsx(G,{id:"officialName",value:o.officialName,onChange:c,placeholder:"Nom officiel du pedigree"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"pedigreeNumber",children:"N° pedigree/LOF"}),s.jsx(G,{id:"pedigreeNumber",value:o.pedigreeNumber,onChange:c,placeholder:"Numéro de pedigree"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"breeder",children:"Éleveur"}),s.jsx(G,{id:"breeder",value:o.breeder,onChange:c,placeholder:"Nom de l'éleveur"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-medium text-sm",children:"Père"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{placeholder:"Nom du père",value:o.fatherName,onChange:c}),s.jsx(G,{placeholder:"N° pedigree du père",value:o.fatherPedigree,onChange:c}),s.jsx(G,{placeholder:"Race du père",value:o.fatherBreed,onChange:c}),s.jsx(Ue,{placeholder:"Titres du père",value:o.fatherTitles,onChange:c,rows:2})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-medium text-sm",children:"Mère"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{placeholder:"Nom de la mère",value:o.motherName,onChange:c}),s.jsx(G,{placeholder:"N° pedigree de la mère",value:o.motherPedigree,onChange:c}),s.jsx(G,{placeholder:"Race de la mère",value:o.motherBreed,onChange:c}),s.jsx(Ue,{placeholder:"Titres de la mère",value:o.motherTitles,onChange:c,rows:2})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{children:"Document pedigree"}),s.jsx("input",{type:"file",accept:"image/*",onChange:async h=>{var g;const m=(g=h.target.files)==null?void 0:g[0];if(!m)return;const f=new FileReader;f.onload=()=>l(p=>({...p,pedigreePhoto:f.result})),f.readAsDataURL(m)}}),o.pedigreePhoto&&s.jsx("img",{src:o.pedigreePhoto,alt:"Document pedigree",className:"h-32 w-auto object-contain rounded border"})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(F,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsx(F,{type:"submit",children:"Sauvegarder"})]})]})]})}):null}var Qx="Tabs",[bee,uTe]=Kr(Qx,[kx]),J3=kx(),[wee,QS]=bee(Qx),Z3=b.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=Px(l),[h,m]=bi({prop:r,onChange:a,defaultProp:i??"",caller:Qx});return s.jsx(wee,{scope:n,baseId:Ma(),value:h,onValueChange:m,orientation:o,dir:d,activationMode:c,children:s.jsx(ze.div,{dir:d,"data-orientation":o,...u,ref:t})})});Z3.displayName=Qx;var eF="TabsList",tF=b.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...a}=e,i=QS(eF,n),o=J3(n);return s.jsx($$,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:s.jsx(ze.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});tF.displayName=eF;var nF="TabsTrigger",rF=b.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...i}=e,o=QS(nF,n),l=J3(n),c=iF(o.baseId,r),u=oF(o.baseId,r),d=r===o.value;return s.jsx(R$,{asChild:!0,...l,focusable:!a,active:d,children:s.jsx(ze.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:ke(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:ke(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:ke(e.onFocus,()=>{const h=o.activationMode!=="manual";!d&&!a&&h&&o.onValueChange(r)})})})});rF.displayName=nF;var sF="TabsContent",aF=b.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:a,children:i,...o}=e,l=QS(sF,n),c=iF(l.baseId,r),u=oF(l.baseId,r),d=r===l.value,h=b.useRef(d);return b.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),s.jsx(Es,{present:a||d,children:({present:m})=>s.jsx(ze.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:m&&i})})});aF.displayName=sF;function iF(e,t){return`${e}-trigger-${t}`}function oF(e,t){return`${e}-content-${t}`}var Nee=Z3,lF=tF,cF=rF,uF=aF;const Ti=Nee,qa=b.forwardRef(({className:e,...t},n)=>s.jsx(lF,{ref:n,className:De("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));qa.displayName=lF.displayName;const Tt=b.forwardRef(({className:e,...t},n)=>s.jsx(cF,{ref:n,className:De("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Tt.displayName=cF.displayName;const Et=b.forwardRef(({className:e,...t},n)=>s.jsx(uF,{ref:n,className:De("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Et.displayName=uF.displayName;function fr(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Oo(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function XS(e,t){const n=fr(e);return isNaN(t)?Oo(e,NaN):(t&&n.setDate(n.getDate()+t),n)}const dF=6048e5,See=864e5;let _ee={};function Xx(){return _ee}function bm(e,t){var l,c,u,d;const n=Xx(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=fr(e),i=a.getDay(),o=(i<r?7:0)+i-r;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function Kg(e){return bm(e,{weekStartsOn:1})}function hF(e){const t=fr(e),n=t.getFullYear(),r=Oo(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const a=Kg(r),i=Oo(e,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const o=Kg(i);return t.getTime()>=a.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function Gg(e){const t=fr(e);return t.setHours(0,0,0,0),t}function JP(e){const t=fr(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Cee(e,t){const n=Gg(e),r=Gg(t),a=+n-JP(n),i=+r-JP(r);return Math.round((a-i)/See)}function Pee(e){const t=hF(e),n=Oo(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Kg(n)}function Aee(e,t){const n=Gg(e),r=Gg(t);return+n==+r}function kee(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Tee(e){if(!kee(e)&&typeof e!="number")return!1;const t=fr(e);return!isNaN(Number(t))}function Eee(e){const t=fr(e),n=Oo(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Oee={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Dee=(e,t,n)=>{let r;const a=Oee[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function iu(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Mee={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Iee={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},$ee={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ree={date:iu({formats:Mee,defaultWidth:"full"}),time:iu({formats:Iee,defaultWidth:"full"}),dateTime:iu({formats:$ee,defaultWidth:"full"})},Fee={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Lee=(e,t,n,r)=>Fee[e];function Sa(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const Bee={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},zee={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Vee={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},qee={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Uee={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Wee={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Hee=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Kee={ordinalNumber:Hee,era:Sa({values:Bee,defaultWidth:"wide"}),quarter:Sa({values:zee,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Sa({values:Vee,defaultWidth:"wide"}),day:Sa({values:qee,defaultWidth:"wide"}),dayPeriod:Sa({values:Uee,defaultWidth:"wide",formattingValues:Wee,defaultFormattingWidth:"wide"})};function _a(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?Yee(l,h=>h.test(o)):Gee(l,h=>h.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=t.slice(o.length);return{value:u,rest:d}}}function Gee(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function Yee(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function mF(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const a=r[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const Qee=/^(\d+)(th|st|nd|rd)?/i,Xee=/\d+/i,Jee={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Zee={any:[/^b/i,/^(a|c)/i]},ete={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},tte={any:[/1/i,/2/i,/3/i,/4/i]},nte={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},rte={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ste={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ate={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ite={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ote={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},lte={ordinalNumber:mF({matchPattern:Qee,parsePattern:Xee,valueCallback:e=>parseInt(e,10)}),era:_a({matchPatterns:Jee,defaultMatchWidth:"wide",parsePatterns:Zee,defaultParseWidth:"any"}),quarter:_a({matchPatterns:ete,defaultMatchWidth:"wide",parsePatterns:tte,defaultParseWidth:"any",valueCallback:e=>e+1}),month:_a({matchPatterns:nte,defaultMatchWidth:"wide",parsePatterns:rte,defaultParseWidth:"any"}),day:_a({matchPatterns:ste,defaultMatchWidth:"wide",parsePatterns:ate,defaultParseWidth:"any"}),dayPeriod:_a({matchPatterns:ite,defaultMatchWidth:"any",parsePatterns:ote,defaultParseWidth:"any"})},cte={code:"en-US",formatDistance:Dee,formatLong:Ree,formatRelative:Lee,localize:Kee,match:lte,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ute(e){const t=fr(e);return Cee(t,Eee(t))+1}function dte(e){const t=fr(e),n=+Kg(t)-+Pee(t);return Math.round(n/dF)+1}function fF(e,t){var d,h,m,f;const n=fr(e),r=n.getFullYear(),a=Xx(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??a.firstWeekContainsDate??((f=(m=a.locale)==null?void 0:m.options)==null?void 0:f.firstWeekContainsDate)??1,o=Oo(e,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const l=bm(o,t),c=Oo(e,0);c.setFullYear(r,0,i),c.setHours(0,0,0,0);const u=bm(c,t);return n.getTime()>=l.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function hte(e,t){var l,c,u,d;const n=Xx(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=fF(e,t),i=Oo(e,0);return i.setFullYear(a,0,r),i.setHours(0,0,0,0),bm(i,t)}function mte(e,t){const n=fr(e),r=+bm(n,t)-+hte(n,t);return Math.round(r/dF)+1}function kt(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Vi={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return kt(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):kt(n+1,2)},d(e,t){return kt(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return kt(e.getHours()%12||12,t.length)},H(e,t){return kt(e.getHours(),t.length)},m(e,t){return kt(e.getMinutes(),t.length)},s(e,t){return kt(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return kt(a,t.length)}},Pc={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ZP={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return Vi.y(e,t)},Y:function(e,t,n,r){const a=fF(e,r),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return kt(o,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):kt(i,t.length)},R:function(e,t){const n=hF(e);return kt(n,t.length)},u:function(e,t){const n=e.getFullYear();return kt(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return kt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return kt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Vi.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return kt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=mte(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):kt(a,t.length)},I:function(e,t,n){const r=dte(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):kt(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Vi.d(e,t)},D:function(e,t,n){const r=ute(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):kt(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return kt(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return kt(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return kt(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(r===12?a=Pc.noon:r===0?a=Pc.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(r>=17?a=Pc.evening:r>=12?a=Pc.afternoon:r>=4?a=Pc.morning:a=Pc.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Vi.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Vi.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):kt(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):kt(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Vi.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Vi.s(e,t)},S:function(e,t){return Vi.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return tA(r);case"XXXX":case"XX":return rl(r);case"XXXXX":case"XXX":default:return rl(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return tA(r);case"xxxx":case"xx":return rl(r);case"xxxxx":case"xxx":default:return rl(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+eA(r,":");case"OOOO":default:return"GMT"+rl(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+eA(r,":");case"zzzz":default:return"GMT"+rl(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return kt(r,t.length)},T:function(e,t,n){const r=e.getTime();return kt(r,t.length)}};function eA(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),i=r%60;return i===0?n+String(a):n+String(a)+t+kt(i,2)}function tA(e,t){return e%60===0?(e>0?"-":"+")+kt(Math.abs(e)/60,2):rl(e,t)}function rl(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=kt(Math.trunc(r/60),2),i=kt(r%60,2);return n+a+t+i}const nA=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},pF=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},fte=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return nA(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",nA(r,t)).replace("{{time}}",pF(a,t))},pte={p:pF,P:fte},gte=/^D+$/,vte=/^Y+$/,xte=["D","DD","YY","YYYY"];function yte(e){return gte.test(e)}function jte(e){return vte.test(e)}function bte(e,t,n){const r=wte(e,t,n);if(console.warn(r),xte.includes(e))throw new RangeError(r)}function wte(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Nte=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ste=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,_te=/^'([^]*?)'?$/,Cte=/''/g,Pte=/[a-zA-Z]/;function Je(e,t,n){var d,h,m,f,g,p,v,x;const r=Xx(),a=(n==null?void 0:n.locale)??r.locale??cte,i=(n==null?void 0:n.firstWeekContainsDate)??((h=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??r.firstWeekContainsDate??((f=(m=r.locale)==null?void 0:m.options)==null?void 0:f.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((p=(g=n==null?void 0:n.locale)==null?void 0:g.options)==null?void 0:p.weekStartsOn)??r.weekStartsOn??((x=(v=r.locale)==null?void 0:v.options)==null?void 0:x.weekStartsOn)??0,l=fr(e);if(!Tee(l))throw new RangeError("Invalid time value");let c=t.match(Ste).map(y=>{const j=y[0];if(j==="p"||j==="P"){const w=pte[j];return w(y,a.formatLong)}return y}).join("").match(Nte).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const j=y[0];if(j==="'")return{isToken:!1,value:Ate(y)};if(ZP[j])return{isToken:!0,value:y};if(j.match(Pte))throw new RangeError("Format string contains an unescaped latin alphabet character `"+j+"`");return{isToken:!1,value:y}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return c.map(y=>{if(!y.isToken)return y.value;const j=y.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&jte(j)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&yte(j))&&bte(j,t,String(e));const w=ZP[j[0]];return w(l,j,a.localize,u)}).join("")}function Ate(e){const t=e.match(_te);return t?t[1].replace(Cte,"'"):e}function kte(e,t){const n=fr(e),r=fr(t);return n.getTime()>r.getTime()}function Yg(e,t){const n=fr(e),r=fr(t);return+n<+r}function Tte({open:e,onOpenChange:t,vaccination:n}){const{confirmVaccinationReminder:r,calculateDueDateFromProtocol:a}=bt(),{toast:i}=it(),[o,l]=b.useState({datePerformed:Je(new Date,"yyyy-MM-dd"),veterinarian:"",batchNumber:"",notes:"",newNextDueDate:""}),c=d=>{if(d.preventDefault(),!o.veterinarian){i({title:"Erreur",description:"Le nom du vétérinaire est requis",variant:"destructive"});return}let h=o.newNextDueDate;!h&&n&&(h=a(n.vaccineName,"chien",o.datePerformed)||""),r(n.id,{datePerformed:o.datePerformed,veterinarian:o.veterinarian,batchNumber:o.batchNumber,notes:o.notes,newNextDueDate:h})&&(i({title:"Rappel confirmé",description:`Le rappel de ${n.vaccineName} a été confirmé et enregistré`}),l({datePerformed:Je(new Date,"yyyy-MM-dd"),veterinarian:"",batchNumber:"",notes:"",newNextDueDate:""}),t(!1))},u=d=>{l(h=>({...h,[d.target.name]:d.target.value}))};return n?s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Qe,{className:"sm:max-w-[500px]",children:[s.jsx(tt,{children:s.jsx(nt,{children:"Confirmer le rappel de vaccination"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-sm mb-2",children:"Vaccination à confirmer :"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.jsx("strong",{children:n.vaccineName})," pour ",n.petName]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Rappel prévu le : ",new Date(n.nextDueDate).toLocaleDateString("fr-FR")]})]}),s.jsxs("form",{onSubmit:c,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(D,{htmlFor:"datePerformed",children:"Date d'administration *"}),s.jsx(G,{id:"datePerformed",name:"datePerformed",type:"date",value:o.datePerformed,onChange:u,required:!0})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"veterinarian",children:"Vétérinaire *"}),s.jsx(G,{id:"veterinarian",name:"veterinarian",value:o.veterinarian,onChange:u,placeholder:"Nom du vétérinaire",required:!0})]})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"batchNumber",children:"Numéro de lot"}),s.jsx(G,{id:"batchNumber",name:"batchNumber",value:o.batchNumber,onChange:u,placeholder:"Numéro de lot du vaccin"})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"newNextDueDate",children:"Nouvelle date de rappel"}),s.jsx(G,{id:"newNextDueDate",name:"newNextDueDate",type:"date",value:o.newNextDueDate,onChange:u,placeholder:"Date du prochain rappel"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Laissez vide pour utiliser la date calculée selon le protocole"})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"notes",children:"Notes"}),s.jsx(Ue,{id:"notes",name:"notes",value:o.notes,onChange:u,placeholder:"Notes sur l'administration du vaccin",rows:3})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(F,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsx(F,{type:"submit",children:"Confirmer le rappel"})]})]})]})]})}):null}var Ete=Array.isArray,Gr=Ete,Ote=typeof dr=="object"&&dr&&dr.Object===Object&&dr,gF=Ote,Dte=gF,Mte=typeof self=="object"&&self&&self.Object===Object&&self,Ite=Dte||Mte||Function("return this")(),Ua=Ite,$te=Ua,Rte=$te.Symbol,Pf=Rte,rA=Pf,vF=Object.prototype,Fte=vF.hasOwnProperty,Lte=vF.toString,ih=rA?rA.toStringTag:void 0;function Bte(e){var t=Fte.call(e,ih),n=e[ih];try{e[ih]=void 0;var r=!0}catch{}var a=Lte.call(e);return r&&(t?e[ih]=n:delete e[ih]),a}var zte=Bte,Vte=Object.prototype,qte=Vte.toString;function Ute(e){return qte.call(e)}var Wte=Ute,sA=Pf,Hte=zte,Kte=Wte,Gte="[object Null]",Yte="[object Undefined]",aA=sA?sA.toStringTag:void 0;function Qte(e){return e==null?e===void 0?Yte:Gte:aA&&aA in Object(e)?Hte(e):Kte(e)}var Ei=Qte;function Xte(e){return e!=null&&typeof e=="object"}var Oi=Xte,Jte=Ei,Zte=Oi,ene="[object Symbol]";function tne(e){return typeof e=="symbol"||Zte(e)&&Jte(e)==ene}var Td=tne,nne=Gr,rne=Td,sne=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ane=/^\w*$/;function ine(e,t){if(nne(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||rne(e)?!0:ane.test(e)||!sne.test(e)||t!=null&&e in Object(t)}var JS=ine;function one(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Wo=one;const Ed=Ct(Wo);var lne=Ei,cne=Wo,une="[object AsyncFunction]",dne="[object Function]",hne="[object GeneratorFunction]",mne="[object Proxy]";function fne(e){if(!cne(e))return!1;var t=lne(e);return t==dne||t==hne||t==une||t==mne}var ZS=fne;const He=Ct(ZS);var pne=Ua,gne=pne["__core-js_shared__"],vne=gne,H0=vne,iA=function(){var e=/[^.]+$/.exec(H0&&H0.keys&&H0.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function xne(e){return!!iA&&iA in e}var yne=xne,jne=Function.prototype,bne=jne.toString;function wne(e){if(e!=null){try{return bne.call(e)}catch{}try{return e+""}catch{}}return""}var xF=wne,Nne=ZS,Sne=yne,_ne=Wo,Cne=xF,Pne=/[\\^$.*+?()[\]{}|]/g,Ane=/^\[object .+?Constructor\]$/,kne=Function.prototype,Tne=Object.prototype,Ene=kne.toString,One=Tne.hasOwnProperty,Dne=RegExp("^"+Ene.call(One).replace(Pne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Mne(e){if(!_ne(e)||Sne(e))return!1;var t=Nne(e)?Dne:Ane;return t.test(Cne(e))}var Ine=Mne;function $ne(e,t){return e==null?void 0:e[t]}var Rne=$ne,Fne=Ine,Lne=Rne;function Bne(e,t){var n=Lne(e,t);return Fne(n)?n:void 0}var cc=Bne,zne=cc,Vne=zne(Object,"create"),Jx=Vne,oA=Jx;function qne(){this.__data__=oA?oA(null):{},this.size=0}var Une=qne;function Wne(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Hne=Wne,Kne=Jx,Gne="__lodash_hash_undefined__",Yne=Object.prototype,Qne=Yne.hasOwnProperty;function Xne(e){var t=this.__data__;if(Kne){var n=t[e];return n===Gne?void 0:n}return Qne.call(t,e)?t[e]:void 0}var Jne=Xne,Zne=Jx,ere=Object.prototype,tre=ere.hasOwnProperty;function nre(e){var t=this.__data__;return Zne?t[e]!==void 0:tre.call(t,e)}var rre=nre,sre=Jx,are="__lodash_hash_undefined__";function ire(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=sre&&t===void 0?are:t,this}var ore=ire,lre=Une,cre=Hne,ure=Jne,dre=rre,hre=ore;function Od(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Od.prototype.clear=lre;Od.prototype.delete=cre;Od.prototype.get=ure;Od.prototype.has=dre;Od.prototype.set=hre;var mre=Od;function fre(){this.__data__=[],this.size=0}var pre=fre;function gre(e,t){return e===t||e!==e&&t!==t}var e2=gre,vre=e2;function xre(e,t){for(var n=e.length;n--;)if(vre(e[n][0],t))return n;return-1}var Zx=xre,yre=Zx,jre=Array.prototype,bre=jre.splice;function wre(e){var t=this.__data__,n=yre(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():bre.call(t,n,1),--this.size,!0}var Nre=wre,Sre=Zx;function _re(e){var t=this.__data__,n=Sre(t,e);return n<0?void 0:t[n][1]}var Cre=_re,Pre=Zx;function Are(e){return Pre(this.__data__,e)>-1}var kre=Are,Tre=Zx;function Ere(e,t){var n=this.__data__,r=Tre(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var Ore=Ere,Dre=pre,Mre=Nre,Ire=Cre,$re=kre,Rre=Ore;function Dd(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Dd.prototype.clear=Dre;Dd.prototype.delete=Mre;Dd.prototype.get=Ire;Dd.prototype.has=$re;Dd.prototype.set=Rre;var ey=Dd,Fre=cc,Lre=Ua,Bre=Fre(Lre,"Map"),t2=Bre,lA=mre,zre=ey,Vre=t2;function qre(){this.size=0,this.__data__={hash:new lA,map:new(Vre||zre),string:new lA}}var Ure=qre;function Wre(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Hre=Wre,Kre=Hre;function Gre(e,t){var n=e.__data__;return Kre(t)?n[typeof t=="string"?"string":"hash"]:n.map}var ty=Gre,Yre=ty;function Qre(e){var t=Yre(this,e).delete(e);return this.size-=t?1:0,t}var Xre=Qre,Jre=ty;function Zre(e){return Jre(this,e).get(e)}var ese=Zre,tse=ty;function nse(e){return tse(this,e).has(e)}var rse=nse,sse=ty;function ase(e,t){var n=sse(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var ise=ase,ose=Ure,lse=Xre,cse=ese,use=rse,dse=ise;function Md(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Md.prototype.clear=ose;Md.prototype.delete=lse;Md.prototype.get=cse;Md.prototype.has=use;Md.prototype.set=dse;var n2=Md,yF=n2,hse="Expected a function";function r2(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(hse);var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],i=n.cache;if(i.has(a))return i.get(a);var o=e.apply(this,r);return n.cache=i.set(a,o)||i,o};return n.cache=new(r2.Cache||yF),n}r2.Cache=yF;var jF=r2;const mse=Ct(jF);var fse=jF,pse=500;function gse(e){var t=fse(e,function(r){return n.size===pse&&n.clear(),r}),n=t.cache;return t}var vse=gse,xse=vse,yse=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,jse=/\\(\\)?/g,bse=xse(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(yse,function(n,r,a,i){t.push(a?i.replace(jse,"$1"):r||n)}),t}),wse=bse;function Nse(e,t){for(var n=-1,r=e==null?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}var s2=Nse,cA=Pf,Sse=s2,_se=Gr,Cse=Td,Pse=1/0,uA=cA?cA.prototype:void 0,dA=uA?uA.toString:void 0;function bF(e){if(typeof e=="string")return e;if(_se(e))return Sse(e,bF)+"";if(Cse(e))return dA?dA.call(e):"";var t=e+"";return t=="0"&&1/e==-Pse?"-0":t}var Ase=bF,kse=Ase;function Tse(e){return e==null?"":kse(e)}var wF=Tse,Ese=Gr,Ose=JS,Dse=wse,Mse=wF;function Ise(e,t){return Ese(e)?e:Ose(e,t)?[e]:Dse(Mse(e))}var NF=Ise,$se=Td,Rse=1/0;function Fse(e){if(typeof e=="string"||$se(e))return e;var t=e+"";return t=="0"&&1/e==-Rse?"-0":t}var ny=Fse,Lse=NF,Bse=ny;function zse(e,t){t=Lse(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[Bse(t[n++])];return n&&n==r?e:void 0}var a2=zse,Vse=a2;function qse(e,t,n){var r=e==null?void 0:Vse(e,t);return r===void 0?n:r}var SF=qse;const cs=Ct(SF);function Use(e){return e==null}var Wse=Use;const Ye=Ct(Wse);var Hse=Ei,Kse=Gr,Gse=Oi,Yse="[object String]";function Qse(e){return typeof e=="string"||!Kse(e)&&Gse(e)&&Hse(e)==Yse}var Xse=Qse;const Hl=Ct(Xse);var _F={exports:{}},Mt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i2=Symbol.for("react.element"),o2=Symbol.for("react.portal"),ry=Symbol.for("react.fragment"),sy=Symbol.for("react.strict_mode"),ay=Symbol.for("react.profiler"),iy=Symbol.for("react.provider"),oy=Symbol.for("react.context"),Jse=Symbol.for("react.server_context"),ly=Symbol.for("react.forward_ref"),cy=Symbol.for("react.suspense"),uy=Symbol.for("react.suspense_list"),dy=Symbol.for("react.memo"),hy=Symbol.for("react.lazy"),Zse=Symbol.for("react.offscreen"),CF;CF=Symbol.for("react.module.reference");function Os(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case i2:switch(e=e.type,e){case ry:case ay:case sy:case cy:case uy:return e;default:switch(e=e&&e.$$typeof,e){case Jse:case oy:case ly:case hy:case dy:case iy:return e;default:return t}}case o2:return t}}}Mt.ContextConsumer=oy;Mt.ContextProvider=iy;Mt.Element=i2;Mt.ForwardRef=ly;Mt.Fragment=ry;Mt.Lazy=hy;Mt.Memo=dy;Mt.Portal=o2;Mt.Profiler=ay;Mt.StrictMode=sy;Mt.Suspense=cy;Mt.SuspenseList=uy;Mt.isAsyncMode=function(){return!1};Mt.isConcurrentMode=function(){return!1};Mt.isContextConsumer=function(e){return Os(e)===oy};Mt.isContextProvider=function(e){return Os(e)===iy};Mt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===i2};Mt.isForwardRef=function(e){return Os(e)===ly};Mt.isFragment=function(e){return Os(e)===ry};Mt.isLazy=function(e){return Os(e)===hy};Mt.isMemo=function(e){return Os(e)===dy};Mt.isPortal=function(e){return Os(e)===o2};Mt.isProfiler=function(e){return Os(e)===ay};Mt.isStrictMode=function(e){return Os(e)===sy};Mt.isSuspense=function(e){return Os(e)===cy};Mt.isSuspenseList=function(e){return Os(e)===uy};Mt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===ry||e===ay||e===sy||e===cy||e===uy||e===Zse||typeof e=="object"&&e!==null&&(e.$$typeof===hy||e.$$typeof===dy||e.$$typeof===iy||e.$$typeof===oy||e.$$typeof===ly||e.$$typeof===CF||e.getModuleId!==void 0)};Mt.typeOf=Os;_F.exports=Mt;var eae=_F.exports,tae=Ei,nae=Oi,rae="[object Number]";function sae(e){return typeof e=="number"||nae(e)&&tae(e)==rae}var PF=sae;const aae=Ct(PF);var iae=PF;function oae(e){return iae(e)&&e!=+e}var lae=oae;const Id=Ct(lae);var wr=function(t){return t===0?0:t>0?1:-1},fl=function(t){return Hl(t)&&t.indexOf("%")===t.length-1},xe=function(t){return aae(t)&&!Id(t)},cae=function(t){return Ye(t)},$n=function(t){return xe(t)||Hl(t)},uae=0,uc=function(t){var n=++uae;return"".concat(t||"").concat(n)},Nr=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!xe(t)&&!Hl(t))return r;var i;if(fl(t)){var o=t.indexOf("%");i=n*parseFloat(t.slice(0,o))/100}else i=+t;return Id(i)&&(i=r),a&&i>n&&(i=n),i},Zi=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},dae=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,r={},a=0;a<n;a++)if(!r[t[a]])r[t[a]]=!0;else return!0;return!1},Dn=function(t,n){return xe(t)&&xe(n)?function(r){return t+r*(n-t)}:function(){return n}};function Qg(e,t,n){return!e||!e.length?null:e.find(function(r){return r&&(typeof t=="function"?t(r):cs(r,t))===n})}var hae=function(t,n){return xe(t)&&xe(n)?t-n:Hl(t)&&Hl(n)?t.localeCompare(n):t instanceof Date&&n instanceof Date?t.getTime()-n.getTime():String(t).localeCompare(String(n))};function ou(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function gw(e){"@babel/helpers - typeof";return gw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gw(e)}var mae=["viewBox","children"],fae=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],hA=["points","pathLength"],K0={svg:mae,polygon:hA,polyline:hA},l2=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Xg=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(b.isValidElement(t)&&(r=t.props),!Ed(r))return null;var a={};return Object.keys(r).forEach(function(i){l2.includes(i)&&(a[i]=n||function(o){return r[i](r,o)})}),a},pae=function(t,n,r){return function(a){return t(n,r,a),null}},Kl=function(t,n,r){if(!Ed(t)||gw(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var o=t[i];l2.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=pae(o,n,r))}),a},gae=["children"],vae=["children"];function mA(e,t){if(e==null)return{};var n=xae(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function xae(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function vw(e){"@babel/helpers - typeof";return vw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vw(e)}var fA={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},fi=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},pA=null,G0=null,c2=function e(t){if(t===pA&&Array.isArray(G0))return G0;var n=[];return b.Children.forEach(t,function(r){Ye(r)||(eae.isFragment(r)?n=n.concat(e(r.props.children)):n.push(r))}),G0=n,pA=t,n};function us(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(function(a){return fi(a)}):r=[fi(t)],c2(e).forEach(function(a){var i=cs(a,"type.displayName")||cs(a,"type.name");r.indexOf(i)!==-1&&n.push(a)}),n}function ns(e,t){var n=us(e,t);return n&&n[0]}var gA=function(t){if(!t||!t.props)return!1;var n=t.props,r=n.width,a=n.height;return!(!xe(r)||r<=0||!xe(a)||a<=0)},yae=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],jae=function(t){return t&&t.type&&Hl(t.type)&&yae.indexOf(t.type)>=0},AF=function(t){return t&&vw(t)==="object"&&"clipDot"in t},bae=function(t,n,r,a){var i,o=(i=K0==null?void 0:K0[a])!==null&&i!==void 0?i:[];return n.startsWith("data-")||!He(t)&&(a&&o.includes(n)||fae.includes(n))||r&&l2.includes(n)},Le=function(t,n,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(b.isValidElement(t)&&(a=t.props),!Ed(a))return null;var i={};return Object.keys(a).forEach(function(o){var l;bae((l=a)===null||l===void 0?void 0:l[o],o,n,r)&&(i[o]=a[o])}),i},xw=function e(t,n){if(t===n)return!0;var r=b.Children.count(t);if(r!==b.Children.count(n))return!1;if(r===0)return!0;if(r===1)return vA(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var a=0;a<r;a++){var i=t[a],o=n[a];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!vA(i,o))return!1}return!0},vA=function(t,n){if(Ye(t)&&Ye(n))return!0;if(!Ye(t)&&!Ye(n)){var r=t.props||{},a=r.children,i=mA(r,gae),o=n.props||{},l=o.children,c=mA(o,vae);return a&&l?ou(i,c)&&xw(a,l):!a&&!l?ou(i,c):!1}return!1},xA=function(t,n){var r=[],a={};return c2(t).forEach(function(i,o){if(jae(i))r.push(i);else if(i){var l=fi(i.type),c=n[l]||{},u=c.handler,d=c.once;if(u&&(!d||!a[l])){var h=u(i,l,o);r.push(h),a[l]=!0}}}),r},wae=function(t){var n=t&&t.type;return n&&fA[n]?fA[n]:null},Nae=function(t,n){return c2(n).indexOf(t)},Sae=["children","width","height","viewBox","className","style","title","desc"];function yw(){return yw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yw.apply(this,arguments)}function _ae(e,t){if(e==null)return{};var n=Cae(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Cae(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function jw(e){var t=e.children,n=e.width,r=e.height,a=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,u=_ae(e,Sae),d=a||{width:n,height:r,x:0,y:0},h=Ze("recharts-surface",i);return M.createElement("svg",yw({},Le(u,!0,"svg"),{className:h,width:n,height:r,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),M.createElement("title",null,l),M.createElement("desc",null,c),t)}var Pae=["children","className"];function bw(){return bw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bw.apply(this,arguments)}function Aae(e,t){if(e==null)return{};var n=kae(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function kae(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var ft=M.forwardRef(function(e,t){var n=e.children,r=e.className,a=Aae(e,Pae),i=Ze("recharts-layer",r);return M.createElement("g",bw({className:i},Le(a,!0),{ref:t}),n)}),ea=function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i]};function Tae(e,t,n){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),n=n>a?a:n,n<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(a);++r<a;)i[r]=e[r+t];return i}var Eae=Tae,Oae=Eae;function Dae(e,t,n){var r=e.length;return n=n===void 0?r:n,!t&&n>=r?e:Oae(e,t,n)}var Mae=Dae,Iae="\\ud800-\\udfff",$ae="\\u0300-\\u036f",Rae="\\ufe20-\\ufe2f",Fae="\\u20d0-\\u20ff",Lae=$ae+Rae+Fae,Bae="\\ufe0e\\ufe0f",zae="\\u200d",Vae=RegExp("["+zae+Iae+Lae+Bae+"]");function qae(e){return Vae.test(e)}var kF=qae;function Uae(e){return e.split("")}var Wae=Uae,TF="\\ud800-\\udfff",Hae="\\u0300-\\u036f",Kae="\\ufe20-\\ufe2f",Gae="\\u20d0-\\u20ff",Yae=Hae+Kae+Gae,Qae="\\ufe0e\\ufe0f",Xae="["+TF+"]",ww="["+Yae+"]",Nw="\\ud83c[\\udffb-\\udfff]",Jae="(?:"+ww+"|"+Nw+")",EF="[^"+TF+"]",OF="(?:\\ud83c[\\udde6-\\uddff]){2}",DF="[\\ud800-\\udbff][\\udc00-\\udfff]",Zae="\\u200d",MF=Jae+"?",IF="["+Qae+"]?",eie="(?:"+Zae+"(?:"+[EF,OF,DF].join("|")+")"+IF+MF+")*",tie=IF+MF+eie,nie="(?:"+[EF+ww+"?",ww,OF,DF,Xae].join("|")+")",rie=RegExp(Nw+"(?="+Nw+")|"+nie+tie,"g");function sie(e){return e.match(rie)||[]}var aie=sie,iie=Wae,oie=kF,lie=aie;function cie(e){return oie(e)?lie(e):iie(e)}var uie=cie,die=Mae,hie=kF,mie=uie,fie=wF;function pie(e){return function(t){t=fie(t);var n=hie(t)?mie(t):void 0,r=n?n[0]:t.charAt(0),a=n?die(n,1).join(""):t.slice(1);return r[e]()+a}}var gie=pie,vie=gie,xie=vie("toUpperCase"),yie=xie;const my=Ct(yie);function Ut(e){return function(){return e}}const $F=Math.cos,Jg=Math.sin,da=Math.sqrt,Zg=Math.PI,fy=2*Zg,Sw=Math.PI,_w=2*Sw,sl=1e-6,jie=_w-sl;function RF(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function bie(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return RF;const n=10**t;return function(r){this._+=r[0];for(let a=1,i=r.length;a<i;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}class wie{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?RF:bie(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,a){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+a}`}bezierCurveTo(t,n,r,a,i,o){this._append`C${+t},${+n},${+r},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,n,r,a,i){if(t=+t,n=+n,r=+r,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=r-t,u=a-n,d=o-t,h=l-n,m=d*d+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(m>sl)if(!(Math.abs(h*c-u*d)>sl)||!i)this._append`L${this._x1=t},${this._y1=n}`;else{let f=r-o,g=a-l,p=c*c+u*u,v=f*f+g*g,x=Math.sqrt(p),y=Math.sqrt(m),j=i*Math.tan((Sw-Math.acos((p+m-v)/(2*x*y)))/2),w=j/y,N=j/x;Math.abs(w-1)>sl&&this._append`L${t+w*d},${n+w*h}`,this._append`A${i},${i},0,0,${+(h*f>d*g)},${this._x1=t+N*c},${this._y1=n+N*u}`}}arc(t,n,r,a,i,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(a),c=r*Math.sin(a),u=t+l,d=n+c,h=1^o,m=o?a-i:i-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>sl||Math.abs(this._y1-d)>sl)&&this._append`L${u},${d}`,r&&(m<0&&(m=m%_w+_w),m>jie?this._append`A${r},${r},0,1,${h},${t-l},${n-c}A${r},${r},0,1,${h},${this._x1=u},${this._y1=d}`:m>sl&&this._append`A${r},${r},0,${+(m>=Sw)},${h},${this._x1=t+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(t,n,r,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+a}h${-r}Z`}toString(){return this._}}function u2(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new wie(t)}function d2(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function FF(e){this._context=e}FF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function py(e){return new FF(e)}function LF(e){return e[0]}function BF(e){return e[1]}function zF(e,t){var n=Ut(!0),r=null,a=py,i=null,o=u2(l);e=typeof e=="function"?e:e===void 0?LF:Ut(e),t=typeof t=="function"?t:t===void 0?BF:Ut(t);function l(c){var u,d=(c=d2(c)).length,h,m=!1,f;for(r==null&&(i=a(f=o())),u=0;u<=d;++u)!(u<d&&n(h=c[u],u,c))===m&&((m=!m)?i.lineStart():i.lineEnd()),m&&i.point(+e(h,u,c),+t(h,u,c));if(f)return i=null,f+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Ut(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Ut(+c),l):t},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Ut(!!c),l):n},l.curve=function(c){return arguments.length?(a=c,r!=null&&(i=a(r)),l):a},l.context=function(c){return arguments.length?(c==null?r=i=null:i=a(r=c),l):r},l}function Sp(e,t,n){var r=null,a=Ut(!0),i=null,o=py,l=null,c=u2(u);e=typeof e=="function"?e:e===void 0?LF:Ut(+e),t=typeof t=="function"?t:Ut(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?BF:Ut(+n);function u(h){var m,f,g,p=(h=d2(h)).length,v,x=!1,y,j=new Array(p),w=new Array(p);for(i==null&&(l=o(y=c())),m=0;m<=p;++m){if(!(m<p&&a(v=h[m],m,h))===x)if(x=!x)f=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=m-1;g>=f;--g)l.point(j[g],w[g]);l.lineEnd(),l.areaEnd()}x&&(j[m]=+e(v,m,h),w[m]=+t(v,m,h),l.point(r?+r(v,m,h):j[m],n?+n(v,m,h):w[m]))}if(y)return l=null,y+""||null}function d(){return zF().defined(a).curve(o).context(i)}return u.x=function(h){return arguments.length?(e=typeof h=="function"?h:Ut(+h),r=null,u):e},u.x0=function(h){return arguments.length?(e=typeof h=="function"?h:Ut(+h),u):e},u.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:Ut(+h),u):r},u.y=function(h){return arguments.length?(t=typeof h=="function"?h:Ut(+h),n=null,u):t},u.y0=function(h){return arguments.length?(t=typeof h=="function"?h:Ut(+h),u):t},u.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Ut(+h),u):n},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(n)},u.lineX1=function(){return d().x(r).y(t)},u.defined=function(h){return arguments.length?(a=typeof h=="function"?h:Ut(!!h),u):a},u.curve=function(h){return arguments.length?(o=h,i!=null&&(l=o(i)),u):o},u.context=function(h){return arguments.length?(h==null?i=l=null:l=o(i=h),u):i},u}class VF{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function Nie(e){return new VF(e,!0)}function Sie(e){return new VF(e,!1)}const h2={draw(e,t){const n=da(t/Zg);e.moveTo(n,0),e.arc(0,0,n,0,fy)}},_ie={draw(e,t){const n=da(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},qF=da(1/3),Cie=qF*2,Pie={draw(e,t){const n=da(t/Cie),r=n*qF;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},Aie={draw(e,t){const n=da(t),r=-n/2;e.rect(r,r,n,n)}},kie=.8908130915292852,UF=Jg(Zg/10)/Jg(7*Zg/10),Tie=Jg(fy/10)*UF,Eie=-$F(fy/10)*UF,Oie={draw(e,t){const n=da(t*kie),r=Tie*n,a=Eie*n;e.moveTo(0,-n),e.lineTo(r,a);for(let i=1;i<5;++i){const o=fy*i/5,l=$F(o),c=Jg(o);e.lineTo(c*n,-l*n),e.lineTo(l*r-c*a,c*r+l*a)}e.closePath()}},Y0=da(3),Die={draw(e,t){const n=-da(t/(Y0*3));e.moveTo(0,n*2),e.lineTo(-Y0*n,-n),e.lineTo(Y0*n,-n),e.closePath()}},ps=-.5,gs=da(3)/2,Cw=1/da(12),Mie=(Cw/2+1)*3,Iie={draw(e,t){const n=da(t/Mie),r=n/2,a=n*Cw,i=r,o=n*Cw+n,l=-i,c=o;e.moveTo(r,a),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(ps*r-gs*a,gs*r+ps*a),e.lineTo(ps*i-gs*o,gs*i+ps*o),e.lineTo(ps*l-gs*c,gs*l+ps*c),e.lineTo(ps*r+gs*a,ps*a-gs*r),e.lineTo(ps*i+gs*o,ps*o-gs*i),e.lineTo(ps*l+gs*c,ps*c-gs*l),e.closePath()}};function $ie(e,t){let n=null,r=u2(a);e=typeof e=="function"?e:Ut(e||h2),t=typeof t=="function"?t:Ut(t===void 0?64:+t);function a(){let i;if(n||(n=i=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:Ut(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:Ut(+i),a):t},a.context=function(i){return arguments.length?(n=i??null,a):n},a}function ev(){}function tv(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function WF(e){this._context=e}WF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:tv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:tv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Rie(e){return new WF(e)}function HF(e){this._context=e}HF.prototype={areaStart:ev,areaEnd:ev,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:tv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Fie(e){return new HF(e)}function KF(e){this._context=e}KF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:tv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Lie(e){return new KF(e)}function GF(e){this._context=e}GF.prototype={areaStart:ev,areaEnd:ev,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Bie(e){return new GF(e)}function yA(e){return e<0?-1:1}function jA(e,t,n){var r=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(r||a<0&&-0),o=(n-e._y1)/(a||r<0&&-0),l=(i*a+o*r)/(r+a);return(yA(i)+yA(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function bA(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Q0(e,t,n){var r=e._x0,a=e._y0,i=e._x1,o=e._y1,l=(i-r)/3;e._context.bezierCurveTo(r+l,a+l*t,i-l,o-l*n,i,o)}function nv(e){this._context=e}nv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Q0(this,this._t0,bA(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Q0(this,bA(this,n=jA(this,e,t)),n);break;default:Q0(this,this._t0,n=jA(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function YF(e){this._context=new QF(e)}(YF.prototype=Object.create(nv.prototype)).point=function(e,t){nv.prototype.point.call(this,t,e)};function QF(e){this._context=e}QF.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,a,i){this._context.bezierCurveTo(t,e,r,n,i,a)}};function zie(e){return new nv(e)}function Vie(e){return new YF(e)}function XF(e){this._context=e}XF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=wA(e),a=wA(t),i=0,o=1;o<n;++i,++o)this._context.bezierCurveTo(r[0][i],a[0][i],r[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function wA(e){var t,n=e.length-1,r,a=new Array(n),i=new Array(n),o=new Array(n);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[n-1]=2,i[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=a[t]/i[t-1],i[t]-=r,o[t]-=r*o[t-1];for(a[n-1]=o[n-1]/i[n-1],t=n-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[n-1]=(e[n]+a[n-1])/2,t=0;t<n-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function qie(e){return new XF(e)}function gy(e,t){this._context=e,this._t=t}gy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Uie(e){return new gy(e,.5)}function Wie(e){return new gy(e,0)}function Hie(e){return new gy(e,1)}function Bu(e,t){if((o=e.length)>1)for(var n=1,r,a,i=e[t[0]],o,l=i.length;n<o;++n)for(a=i,i=e[t[n]],r=0;r<l;++r)i[r][1]+=i[r][0]=isNaN(a[r][1])?a[r][0]:a[r][1]}function Pw(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Kie(e,t){return e[t]}function Gie(e){const t=[];return t.key=e,t}function Yie(){var e=Ut([]),t=Pw,n=Bu,r=Kie;function a(i){var o=Array.from(e.apply(this,arguments),Gie),l,c=o.length,u=-1,d;for(const h of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+r(h,o[l].key,u,i)]).data=h;for(l=0,d=d2(t(o));l<c;++l)o[d[l]].index=l;return n(o,d),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Ut(Array.from(i)),a):e},a.value=function(i){return arguments.length?(r=typeof i=="function"?i:Ut(+i),a):r},a.order=function(i){return arguments.length?(t=i==null?Pw:typeof i=="function"?i:Ut(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(n=i??Bu,a):n},a}function Qie(e,t){if((r=e.length)>0){for(var n,r,a=0,i=e[0].length,o;a<i;++a){for(o=n=0;n<r;++n)o+=e[n][a][1]||0;if(o)for(n=0;n<r;++n)e[n][a][1]/=o}Bu(e,t)}}function Xie(e,t){if((a=e.length)>0){for(var n=0,r=e[t[0]],a,i=r.length;n<i;++n){for(var o=0,l=0;o<a;++o)l+=e[o][n][1]||0;r[n][1]+=r[n][0]=-l/2}Bu(e,t)}}function Jie(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var n=0,r=1,a,i,o;r<i;++r){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],h=d[r][1]||0,m=d[r-1][1]||0,f=(h-m)/2,g=0;g<l;++g){var p=e[t[g]],v=p[r][1]||0,x=p[r-1][1]||0;f+=v-x}c+=h,u+=f*h}a[r-1][1]+=a[r-1][0]=n,c&&(n-=u/c)}a[r-1][1]+=a[r-1][0]=n,Bu(e,t)}}function wm(e){"@babel/helpers - typeof";return wm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wm(e)}var Zie=["type","size","sizeType"];function Aw(){return Aw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Aw.apply(this,arguments)}function NA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function SA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NA(Object(n),!0).forEach(function(r){eoe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function eoe(e,t,n){return t=toe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function toe(e){var t=noe(e,"string");return wm(t)=="symbol"?t:t+""}function noe(e,t){if(wm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(wm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function roe(e,t){if(e==null)return{};var n=soe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function soe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var JF={symbolCircle:h2,symbolCross:_ie,symbolDiamond:Pie,symbolSquare:Aie,symbolStar:Oie,symbolTriangle:Die,symbolWye:Iie},aoe=Math.PI/180,ioe=function(t){var n="symbol".concat(my(t));return JF[n]||h2},ooe=function(t,n,r){if(n==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*aoe;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},loe=function(t,n){JF["symbol".concat(my(t))]=n},m2=function(t){var n=t.type,r=n===void 0?"circle":n,a=t.size,i=a===void 0?64:a,o=t.sizeType,l=o===void 0?"area":o,c=roe(t,Zie),u=SA(SA({},c),{},{type:r,size:i,sizeType:l}),d=function(){var v=ioe(r),x=$ie().type(v).size(ooe(i,l,r));return x()},h=u.className,m=u.cx,f=u.cy,g=Le(u,!0);return m===+m&&f===+f&&i===+i?M.createElement("path",Aw({},g,{className:Ze("recharts-symbols",h),transform:"translate(".concat(m,", ").concat(f,")"),d:d()})):null};m2.registerSymbol=loe;function zu(e){"@babel/helpers - typeof";return zu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zu(e)}function kw(){return kw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kw.apply(this,arguments)}function _A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function coe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_A(Object(n),!0).forEach(function(r){Nm(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_A(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uoe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function doe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eL(r.key),r)}}function hoe(e,t,n){return t&&doe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function moe(e,t,n){return t=rv(t),foe(e,ZF()?Reflect.construct(t,n||[],rv(e).constructor):t.apply(e,n))}function foe(e,t){if(t&&(zu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return poe(e)}function poe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZF=function(){return!!e})()}function rv(e){return rv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},rv(e)}function goe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tw(e,t)}function Tw(e,t){return Tw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Tw(e,t)}function Nm(e,t,n){return t=eL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eL(e){var t=voe(e,"string");return zu(t)=="symbol"?t:t+""}function voe(e,t){if(zu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(zu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vs=32,f2=function(e){function t(){return uoe(this,t),moe(this,t,arguments)}return goe(t,e),hoe(t,[{key:"renderIcon",value:function(r){var a=this.props.inactiveColor,i=vs/2,o=vs/6,l=vs/3,c=r.inactive?a:r.color;if(r.type==="plainline")return M.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:i,x2:vs,y2:i,className:"recharts-legend-icon"});if(r.type==="line")return M.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(vs,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(r.type==="rect")return M.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(vs/8,"h").concat(vs,"v").concat(vs*3/4,"h").concat(-vs,"z"),className:"recharts-legend-icon"});if(M.isValidElement(r.legendIcon)){var u=coe({},r);return delete u.legendIcon,M.cloneElement(r.legendIcon,u)}return M.createElement(m2,{fill:c,cx:i,cy:i,size:vs,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,a=this.props,i=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,u=a.inactiveColor,d={x:0,y:0,width:vs,height:vs},h={display:l==="horizontal"?"inline-block":"block",marginRight:10},m={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(f,g){var p=f.formatter||c,v=Ze(Nm(Nm({"recharts-legend-item":!0},"legend-item-".concat(g),!0),"inactive",f.inactive));if(f.type==="none")return null;var x=He(f.value)?null:f.value;ea(!He(f.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var y=f.inactive?u:f.color;return M.createElement("li",kw({className:v,style:h,key:"legend-item-".concat(g)},Kl(r.props,f,g)),M.createElement(jw,{width:o,height:o,viewBox:d,style:m},r.renderIcon(f)),M.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},p?p(x,f,g):x))})}},{key:"render",value:function(){var r=this.props,a=r.payload,i=r.layout,o=r.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return M.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(b.PureComponent);Nm(f2,"displayName","Legend");Nm(f2,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var xoe=ey;function yoe(){this.__data__=new xoe,this.size=0}var joe=yoe;function boe(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var woe=boe;function Noe(e){return this.__data__.get(e)}var Soe=Noe;function _oe(e){return this.__data__.has(e)}var Coe=_oe,Poe=ey,Aoe=t2,koe=n2,Toe=200;function Eoe(e,t){var n=this.__data__;if(n instanceof Poe){var r=n.__data__;if(!Aoe||r.length<Toe-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new koe(r)}return n.set(e,t),this.size=n.size,this}var Ooe=Eoe,Doe=ey,Moe=joe,Ioe=woe,$oe=Soe,Roe=Coe,Foe=Ooe;function $d(e){var t=this.__data__=new Doe(e);this.size=t.size}$d.prototype.clear=Moe;$d.prototype.delete=Ioe;$d.prototype.get=$oe;$d.prototype.has=Roe;$d.prototype.set=Foe;var tL=$d,Loe="__lodash_hash_undefined__";function Boe(e){return this.__data__.set(e,Loe),this}var zoe=Boe;function Voe(e){return this.__data__.has(e)}var qoe=Voe,Uoe=n2,Woe=zoe,Hoe=qoe;function sv(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Uoe;++t<n;)this.add(e[t])}sv.prototype.add=sv.prototype.push=Woe;sv.prototype.has=Hoe;var nL=sv;function Koe(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var rL=Koe;function Goe(e,t){return e.has(t)}var sL=Goe,Yoe=nL,Qoe=rL,Xoe=sL,Joe=1,Zoe=2;function ele(e,t,n,r,a,i){var o=n&Joe,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var u=i.get(e),d=i.get(t);if(u&&d)return u==t&&d==e;var h=-1,m=!0,f=n&Zoe?new Yoe:void 0;for(i.set(e,t),i.set(t,e);++h<l;){var g=e[h],p=t[h];if(r)var v=o?r(p,g,h,t,e,i):r(g,p,h,e,t,i);if(v!==void 0){if(v)continue;m=!1;break}if(f){if(!Qoe(t,function(x,y){if(!Xoe(f,y)&&(g===x||a(g,x,n,r,i)))return f.push(y)})){m=!1;break}}else if(!(g===p||a(g,p,n,r,i))){m=!1;break}}return i.delete(e),i.delete(t),m}var aL=ele,tle=Ua,nle=tle.Uint8Array,rle=nle;function sle(e){var t=-1,n=Array(e.size);return e.forEach(function(r,a){n[++t]=[a,r]}),n}var ale=sle;function ile(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var p2=ile,CA=Pf,PA=rle,ole=e2,lle=aL,cle=ale,ule=p2,dle=1,hle=2,mle="[object Boolean]",fle="[object Date]",ple="[object Error]",gle="[object Map]",vle="[object Number]",xle="[object RegExp]",yle="[object Set]",jle="[object String]",ble="[object Symbol]",wle="[object ArrayBuffer]",Nle="[object DataView]",AA=CA?CA.prototype:void 0,X0=AA?AA.valueOf:void 0;function Sle(e,t,n,r,a,i,o){switch(n){case Nle:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case wle:return!(e.byteLength!=t.byteLength||!i(new PA(e),new PA(t)));case mle:case fle:case vle:return ole(+e,+t);case ple:return e.name==t.name&&e.message==t.message;case xle:case jle:return e==t+"";case gle:var l=cle;case yle:var c=r&dle;if(l||(l=ule),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;r|=hle,o.set(e,t);var d=lle(l(e),l(t),r,a,i,o);return o.delete(e),d;case ble:if(X0)return X0.call(e)==X0.call(t)}return!1}var _le=Sle;function Cle(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}var iL=Cle,Ple=iL,Ale=Gr;function kle(e,t,n){var r=t(e);return Ale(e)?r:Ple(r,n(e))}var Tle=kle;function Ele(e,t){for(var n=-1,r=e==null?0:e.length,a=0,i=[];++n<r;){var o=e[n];t(o,n,e)&&(i[a++]=o)}return i}var Ole=Ele;function Dle(){return[]}var Mle=Dle,Ile=Ole,$le=Mle,Rle=Object.prototype,Fle=Rle.propertyIsEnumerable,kA=Object.getOwnPropertySymbols,Lle=kA?function(e){return e==null?[]:(e=Object(e),Ile(kA(e),function(t){return Fle.call(e,t)}))}:$le,Ble=Lle;function zle(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Vle=zle,qle=Ei,Ule=Oi,Wle="[object Arguments]";function Hle(e){return Ule(e)&&qle(e)==Wle}var Kle=Hle,TA=Kle,Gle=Oi,oL=Object.prototype,Yle=oL.hasOwnProperty,Qle=oL.propertyIsEnumerable,Xle=TA(function(){return arguments}())?TA:function(e){return Gle(e)&&Yle.call(e,"callee")&&!Qle.call(e,"callee")},g2=Xle,av={exports:{}};function Jle(){return!1}var Zle=Jle;av.exports;(function(e,t){var n=Ua,r=Zle,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||r;e.exports=u})(av,av.exports);var lL=av.exports,ece=9007199254740991,tce=/^(?:0|[1-9]\d*)$/;function nce(e,t){var n=typeof e;return t=t??ece,!!t&&(n=="number"||n!="symbol"&&tce.test(e))&&e>-1&&e%1==0&&e<t}var v2=nce,rce=9007199254740991;function sce(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=rce}var x2=sce,ace=Ei,ice=x2,oce=Oi,lce="[object Arguments]",cce="[object Array]",uce="[object Boolean]",dce="[object Date]",hce="[object Error]",mce="[object Function]",fce="[object Map]",pce="[object Number]",gce="[object Object]",vce="[object RegExp]",xce="[object Set]",yce="[object String]",jce="[object WeakMap]",bce="[object ArrayBuffer]",wce="[object DataView]",Nce="[object Float32Array]",Sce="[object Float64Array]",_ce="[object Int8Array]",Cce="[object Int16Array]",Pce="[object Int32Array]",Ace="[object Uint8Array]",kce="[object Uint8ClampedArray]",Tce="[object Uint16Array]",Ece="[object Uint32Array]",Qt={};Qt[Nce]=Qt[Sce]=Qt[_ce]=Qt[Cce]=Qt[Pce]=Qt[Ace]=Qt[kce]=Qt[Tce]=Qt[Ece]=!0;Qt[lce]=Qt[cce]=Qt[bce]=Qt[uce]=Qt[wce]=Qt[dce]=Qt[hce]=Qt[mce]=Qt[fce]=Qt[pce]=Qt[gce]=Qt[vce]=Qt[xce]=Qt[yce]=Qt[jce]=!1;function Oce(e){return oce(e)&&ice(e.length)&&!!Qt[ace(e)]}var Dce=Oce;function Mce(e){return function(t){return e(t)}}var cL=Mce,iv={exports:{}};iv.exports;(function(e,t){var n=gF,r=t&&!t.nodeType&&t,a=r&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===r,o=i&&n.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(iv,iv.exports);var Ice=iv.exports,$ce=Dce,Rce=cL,EA=Ice,OA=EA&&EA.isTypedArray,Fce=OA?Rce(OA):$ce,uL=Fce,Lce=Vle,Bce=g2,zce=Gr,Vce=lL,qce=v2,Uce=uL,Wce=Object.prototype,Hce=Wce.hasOwnProperty;function Kce(e,t){var n=zce(e),r=!n&&Bce(e),a=!n&&!r&&Vce(e),i=!n&&!r&&!a&&Uce(e),o=n||r||a||i,l=o?Lce(e.length,String):[],c=l.length;for(var u in e)(t||Hce.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||qce(u,c)))&&l.push(u);return l}var Gce=Kce,Yce=Object.prototype;function Qce(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Yce;return e===n}var Xce=Qce;function Jce(e,t){return function(n){return e(t(n))}}var dL=Jce,Zce=dL,eue=Zce(Object.keys,Object),tue=eue,nue=Xce,rue=tue,sue=Object.prototype,aue=sue.hasOwnProperty;function iue(e){if(!nue(e))return rue(e);var t=[];for(var n in Object(e))aue.call(e,n)&&n!="constructor"&&t.push(n);return t}var oue=iue,lue=ZS,cue=x2;function uue(e){return e!=null&&cue(e.length)&&!lue(e)}var Af=uue,due=Gce,hue=oue,mue=Af;function fue(e){return mue(e)?due(e):hue(e)}var vy=fue,pue=Tle,gue=Ble,vue=vy;function xue(e){return pue(e,vue,gue)}var yue=xue,DA=yue,jue=1,bue=Object.prototype,wue=bue.hasOwnProperty;function Nue(e,t,n,r,a,i){var o=n&jue,l=DA(e),c=l.length,u=DA(t),d=u.length;if(c!=d&&!o)return!1;for(var h=c;h--;){var m=l[h];if(!(o?m in t:wue.call(t,m)))return!1}var f=i.get(e),g=i.get(t);if(f&&g)return f==t&&g==e;var p=!0;i.set(e,t),i.set(t,e);for(var v=o;++h<c;){m=l[h];var x=e[m],y=t[m];if(r)var j=o?r(y,x,m,t,e,i):r(x,y,m,e,t,i);if(!(j===void 0?x===y||a(x,y,n,r,i):j)){p=!1;break}v||(v=m=="constructor")}if(p&&!v){var w=e.constructor,N=t.constructor;w!=N&&"constructor"in e&&"constructor"in t&&!(typeof w=="function"&&w instanceof w&&typeof N=="function"&&N instanceof N)&&(p=!1)}return i.delete(e),i.delete(t),p}var Sue=Nue,_ue=cc,Cue=Ua,Pue=_ue(Cue,"DataView"),Aue=Pue,kue=cc,Tue=Ua,Eue=kue(Tue,"Promise"),Oue=Eue,Due=cc,Mue=Ua,Iue=Due(Mue,"Set"),hL=Iue,$ue=cc,Rue=Ua,Fue=$ue(Rue,"WeakMap"),Lue=Fue,Ew=Aue,Ow=t2,Dw=Oue,Mw=hL,Iw=Lue,mL=Ei,Rd=xF,MA="[object Map]",Bue="[object Object]",IA="[object Promise]",$A="[object Set]",RA="[object WeakMap]",FA="[object DataView]",zue=Rd(Ew),Vue=Rd(Ow),que=Rd(Dw),Uue=Rd(Mw),Wue=Rd(Iw),al=mL;(Ew&&al(new Ew(new ArrayBuffer(1)))!=FA||Ow&&al(new Ow)!=MA||Dw&&al(Dw.resolve())!=IA||Mw&&al(new Mw)!=$A||Iw&&al(new Iw)!=RA)&&(al=function(e){var t=mL(e),n=t==Bue?e.constructor:void 0,r=n?Rd(n):"";if(r)switch(r){case zue:return FA;case Vue:return MA;case que:return IA;case Uue:return $A;case Wue:return RA}return t});var Hue=al,J0=tL,Kue=aL,Gue=_le,Yue=Sue,LA=Hue,BA=Gr,zA=lL,Que=uL,Xue=1,VA="[object Arguments]",qA="[object Array]",_p="[object Object]",Jue=Object.prototype,UA=Jue.hasOwnProperty;function Zue(e,t,n,r,a,i){var o=BA(e),l=BA(t),c=o?qA:LA(e),u=l?qA:LA(t);c=c==VA?_p:c,u=u==VA?_p:u;var d=c==_p,h=u==_p,m=c==u;if(m&&zA(e)){if(!zA(t))return!1;o=!0,d=!1}if(m&&!d)return i||(i=new J0),o||Que(e)?Kue(e,t,n,r,a,i):Gue(e,t,c,n,r,a,i);if(!(n&Xue)){var f=d&&UA.call(e,"__wrapped__"),g=h&&UA.call(t,"__wrapped__");if(f||g){var p=f?e.value():e,v=g?t.value():t;return i||(i=new J0),a(p,v,n,r,i)}}return m?(i||(i=new J0),Yue(e,t,n,r,a,i)):!1}var ede=Zue,tde=ede,WA=Oi;function fL(e,t,n,r,a){return e===t?!0:e==null||t==null||!WA(e)&&!WA(t)?e!==e&&t!==t:tde(e,t,n,r,fL,a)}var y2=fL,nde=tL,rde=y2,sde=1,ade=2;function ide(e,t,n,r){var a=n.length,i=a,o=!r;if(e==null)return!i;for(e=Object(e);a--;){var l=n[a];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<i;){l=n[a];var c=l[0],u=e[c],d=l[1];if(o&&l[2]){if(u===void 0&&!(c in e))return!1}else{var h=new nde;if(r)var m=r(u,d,c,e,t,h);if(!(m===void 0?rde(d,u,sde|ade,r,h):m))return!1}}return!0}var ode=ide,lde=Wo;function cde(e){return e===e&&!lde(e)}var pL=cde,ude=pL,dde=vy;function hde(e){for(var t=dde(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,ude(a)]}return t}var mde=hde;function fde(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var gL=fde,pde=ode,gde=mde,vde=gL;function xde(e){var t=gde(e);return t.length==1&&t[0][2]?vde(t[0][0],t[0][1]):function(n){return n===e||pde(n,e,t)}}var yde=xde;function jde(e,t){return e!=null&&t in Object(e)}var bde=jde,wde=NF,Nde=g2,Sde=Gr,_de=v2,Cde=x2,Pde=ny;function Ade(e,t,n){t=wde(t,e);for(var r=-1,a=t.length,i=!1;++r<a;){var o=Pde(t[r]);if(!(i=e!=null&&n(e,o)))break;e=e[o]}return i||++r!=a?i:(a=e==null?0:e.length,!!a&&Cde(a)&&_de(o,a)&&(Sde(e)||Nde(e)))}var kde=Ade,Tde=bde,Ede=kde;function Ode(e,t){return e!=null&&Ede(e,t,Tde)}var Dde=Ode,Mde=y2,Ide=SF,$de=Dde,Rde=JS,Fde=pL,Lde=gL,Bde=ny,zde=1,Vde=2;function qde(e,t){return Rde(e)&&Fde(t)?Lde(Bde(e),t):function(n){var r=Ide(n,e);return r===void 0&&r===t?$de(n,e):Mde(t,r,zde|Vde)}}var Ude=qde;function Wde(e){return e}var Fd=Wde;function Hde(e){return function(t){return t==null?void 0:t[e]}}var Kde=Hde,Gde=a2;function Yde(e){return function(t){return Gde(t,e)}}var Qde=Yde,Xde=Kde,Jde=Qde,Zde=JS,ehe=ny;function the(e){return Zde(e)?Xde(ehe(e)):Jde(e)}var nhe=the,rhe=yde,she=Ude,ahe=Fd,ihe=Gr,ohe=nhe;function lhe(e){return typeof e=="function"?e:e==null?ahe:typeof e=="object"?ihe(e)?she(e[0],e[1]):rhe(e):ohe(e)}var Wa=lhe;function che(e,t,n,r){for(var a=e.length,i=n+(r?1:-1);r?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var vL=che;function uhe(e){return e!==e}var dhe=uhe;function hhe(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}var mhe=hhe,fhe=vL,phe=dhe,ghe=mhe;function vhe(e,t,n){return t===t?ghe(e,t,n):fhe(e,phe,n)}var xhe=vhe,yhe=xhe;function jhe(e,t){var n=e==null?0:e.length;return!!n&&yhe(e,t,0)>-1}var bhe=jhe;function whe(e,t,n){for(var r=-1,a=e==null?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}var Nhe=whe;function She(){}var _he=She,Z0=hL,Che=_he,Phe=p2,Ahe=1/0,khe=Z0&&1/Phe(new Z0([,-0]))[1]==Ahe?function(e){return new Z0(e)}:Che,The=khe,Ehe=nL,Ohe=bhe,Dhe=Nhe,Mhe=sL,Ihe=The,$he=p2,Rhe=200;function Fhe(e,t,n){var r=-1,a=Ohe,i=e.length,o=!0,l=[],c=l;if(n)o=!1,a=Dhe;else if(i>=Rhe){var u=t?null:Ihe(e);if(u)return $he(u);o=!1,a=Mhe,c=new Ehe}else c=t?[]:l;e:for(;++r<i;){var d=e[r],h=t?t(d):d;if(d=n||d!==0?d:0,o&&h===h){for(var m=c.length;m--;)if(c[m]===h)continue e;t&&c.push(h),l.push(d)}else a(c,h,n)||(c!==l&&c.push(h),l.push(d))}return l}var Lhe=Fhe,Bhe=Wa,zhe=Lhe;function Vhe(e,t){return e&&e.length?zhe(e,Bhe(t)):[]}var qhe=Vhe;const HA=Ct(qhe);function xL(e,t,n){return t===!0?HA(e,n):He(t)?HA(e,t):e}function Vu(e){"@babel/helpers - typeof";return Vu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vu(e)}var Uhe=["ref"];function KA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ya(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KA(Object(n),!0).forEach(function(r){xy(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Whe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jL(r.key),r)}}function Hhe(e,t,n){return t&&GA(e.prototype,t),n&&GA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Khe(e,t,n){return t=ov(t),Ghe(e,yL()?Reflect.construct(t,n||[],ov(e).constructor):t.apply(e,n))}function Ghe(e,t){if(t&&(Vu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yhe(e)}function Yhe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(yL=function(){return!!e})()}function ov(e){return ov=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ov(e)}function Qhe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$w(e,t)}function $w(e,t){return $w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},$w(e,t)}function xy(e,t,n){return t=jL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jL(e){var t=Xhe(e,"string");return Vu(t)=="symbol"?t:t+""}function Xhe(e,t){if(Vu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Vu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jhe(e,t){if(e==null)return{};var n=Zhe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Zhe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function eme(e){return e.value}function tme(e,t){if(M.isValidElement(e))return M.cloneElement(e,t);if(typeof e=="function")return M.createElement(e,t);t.ref;var n=Jhe(t,Uhe);return M.createElement(f2,n)}var YA=1,lu=function(e){function t(){var n;Whe(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=Khe(this,t,[].concat(a)),xy(n,"lastBoundingBox",{width:-1,height:-1}),n}return Qhe(t,e),Hhe(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>YA||Math.abs(a.height-this.lastBoundingBox.height)>YA)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,r&&r(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Ya({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var a=this.props,i=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,u=a.chartWidth,d=a.chartHeight,h,m;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&i==="vertical"){var f=this.getBBoxSnapshot();h={left:((u||0)-f.width)/2}}else h=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(l==="middle"){var g=this.getBBoxSnapshot();m={top:((d||0)-g.height)/2}}else m=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Ya(Ya({},h),m)}},{key:"render",value:function(){var r=this,a=this.props,i=a.content,o=a.width,l=a.height,c=a.wrapperStyle,u=a.payloadUniqBy,d=a.payload,h=Ya(Ya({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return M.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(f){r.wrapperNode=f}},tme(i,Ya(Ya({},this.props),{},{payload:xL(d,u,eme)})))}}],[{key:"getWithHeight",value:function(r,a){var i=Ya(Ya({},this.defaultProps),r.props),o=i.layout;return o==="vertical"&&xe(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||a}:null}}])}(b.PureComponent);xy(lu,"displayName","Legend");xy(lu,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var QA=Pf,nme=g2,rme=Gr,XA=QA?QA.isConcatSpreadable:void 0;function sme(e){return rme(e)||nme(e)||!!(XA&&e&&e[XA])}var ame=sme,ime=iL,ome=ame;function bL(e,t,n,r,a){var i=-1,o=e.length;for(n||(n=ome),a||(a=[]);++i<o;){var l=e[i];t>0&&n(l)?t>1?bL(l,t-1,n,r,a):ime(a,l):r||(a[a.length]=l)}return a}var wL=bL;function lme(e){return function(t,n,r){for(var a=-1,i=Object(t),o=r(t),l=o.length;l--;){var c=o[e?l:++a];if(n(i[c],c,i)===!1)break}return t}}var cme=lme,ume=cme,dme=ume(),hme=dme,mme=hme,fme=vy;function pme(e,t){return e&&mme(e,t,fme)}var NL=pme,gme=Af;function vme(e,t){return function(n,r){if(n==null)return n;if(!gme(n))return e(n,r);for(var a=n.length,i=t?a:-1,o=Object(n);(t?i--:++i<a)&&r(o[i],i,o)!==!1;);return n}}var xme=vme,yme=NL,jme=xme,bme=jme(yme),j2=bme,wme=j2,Nme=Af;function Sme(e,t){var n=-1,r=Nme(e)?Array(e.length):[];return wme(e,function(a,i,o){r[++n]=t(a,i,o)}),r}var SL=Sme;function _me(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}var Cme=_me,JA=Td;function Pme(e,t){if(e!==t){var n=e!==void 0,r=e===null,a=e===e,i=JA(e),o=t!==void 0,l=t===null,c=t===t,u=JA(t);if(!l&&!u&&!i&&e>t||i&&o&&c&&!l&&!u||r&&o&&c||!n&&c||!a)return 1;if(!r&&!i&&!u&&e<t||u&&n&&a&&!r&&!i||l&&n&&a||!o&&a||!c)return-1}return 0}var Ame=Pme,kme=Ame;function Tme(e,t,n){for(var r=-1,a=e.criteria,i=t.criteria,o=a.length,l=n.length;++r<o;){var c=kme(a[r],i[r]);if(c){if(r>=l)return c;var u=n[r];return c*(u=="desc"?-1:1)}}return e.index-t.index}var Eme=Tme,ej=s2,Ome=a2,Dme=Wa,Mme=SL,Ime=Cme,$me=cL,Rme=Eme,Fme=Fd,Lme=Gr;function Bme(e,t,n){t.length?t=ej(t,function(i){return Lme(i)?function(o){return Ome(o,i.length===1?i[0]:i)}:i}):t=[Fme];var r=-1;t=ej(t,$me(Dme));var a=Mme(e,function(i,o,l){var c=ej(t,function(u){return u(i)});return{criteria:c,index:++r,value:i}});return Ime(a,function(i,o){return Rme(i,o,n)})}var zme=Bme;function Vme(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var qme=Vme,Ume=qme,ZA=Math.max;function Wme(e,t,n){return t=ZA(t===void 0?e.length-1:t,0),function(){for(var r=arguments,a=-1,i=ZA(r.length-t,0),o=Array(i);++a<i;)o[a]=r[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=r[a];return l[t]=n(o),Ume(e,this,l)}}var Hme=Wme;function Kme(e){return function(){return e}}var Gme=Kme,Yme=cc,Qme=function(){try{var e=Yme(Object,"defineProperty");return e({},"",{}),e}catch{}}(),_L=Qme,Xme=Gme,ek=_L,Jme=Fd,Zme=ek?function(e,t){return ek(e,"toString",{configurable:!0,enumerable:!1,value:Xme(t),writable:!0})}:Jme,efe=Zme,tfe=800,nfe=16,rfe=Date.now;function sfe(e){var t=0,n=0;return function(){var r=rfe(),a=nfe-(r-n);if(n=r,a>0){if(++t>=tfe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var afe=sfe,ife=efe,ofe=afe,lfe=ofe(ife),cfe=lfe,ufe=Fd,dfe=Hme,hfe=cfe;function mfe(e,t){return hfe(dfe(e,t,ufe),e+"")}var ffe=mfe,pfe=e2,gfe=Af,vfe=v2,xfe=Wo;function yfe(e,t,n){if(!xfe(n))return!1;var r=typeof t;return(r=="number"?gfe(n)&&vfe(t,n.length):r=="string"&&t in n)?pfe(n[t],e):!1}var yy=yfe,jfe=wL,bfe=zme,wfe=ffe,tk=yy,Nfe=wfe(function(e,t){if(e==null)return[];var n=t.length;return n>1&&tk(e,t[0],t[1])?t=[]:n>2&&tk(t[0],t[1],t[2])&&(t=[t[0]]),bfe(e,jfe(t,1),[])}),Sfe=Nfe;const b2=Ct(Sfe);function Sm(e){"@babel/helpers - typeof";return Sm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sm(e)}function Rw(){return Rw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rw.apply(this,arguments)}function _fe(e,t){return kfe(e)||Afe(e,t)||Pfe(e,t)||Cfe()}function Cfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pfe(e,t){if(e){if(typeof e=="string")return nk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nk(e,t)}}function nk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Afe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function kfe(e){if(Array.isArray(e))return e}function rk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function tj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rk(Object(n),!0).forEach(function(r){Tfe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rk(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Tfe(e,t,n){return t=Efe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Efe(e){var t=Ofe(e,"string");return Sm(t)=="symbol"?t:t+""}function Ofe(e,t){if(Sm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Sm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dfe(e){return Array.isArray(e)&&$n(e[0])&&$n(e[1])?e.join(" ~ "):e}var Mfe=function(t){var n=t.separator,r=n===void 0?" : ":n,a=t.contentStyle,i=a===void 0?{}:a,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,d=t.payload,h=t.formatter,m=t.itemSorter,f=t.wrapperClassName,g=t.labelClassName,p=t.label,v=t.labelFormatter,x=t.accessibilityLayer,y=x===void 0?!1:x,j=function(){if(d&&d.length){var k={padding:0,margin:0},R=(m?b2(d,m):d).map(function(I,W){if(I.type==="none")return null;var V=tj({display:"block",paddingTop:4,paddingBottom:4,color:I.color||"#000"},l),q=I.formatter||h||Dfe,P=I.value,O=I.name,B=P,U=O;if(q&&B!=null&&U!=null){var X=q(P,O,I,W,d);if(Array.isArray(X)){var ie=_fe(X,2);B=ie[0],U=ie[1]}else B=X}return M.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(W),style:V},$n(U)?M.createElement("span",{className:"recharts-tooltip-item-name"},U):null,$n(U)?M.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,M.createElement("span",{className:"recharts-tooltip-item-value"},B),M.createElement("span",{className:"recharts-tooltip-item-unit"},I.unit||""))});return M.createElement("ul",{className:"recharts-tooltip-item-list",style:k},R)}return null},w=tj({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),N=tj({margin:0},u),_=!Ye(p),S=_?p:"",C=Ze("recharts-default-tooltip",f),A=Ze("recharts-tooltip-label",g);_&&v&&d!==void 0&&d!==null&&(S=v(p,d));var T=y?{role:"status","aria-live":"assertive"}:{};return M.createElement("div",Rw({className:C,style:w},T),M.createElement("p",{className:A,style:N},M.isValidElement(S)?S:"".concat(S)),j())};function _m(e){"@babel/helpers - typeof";return _m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_m(e)}function Cp(e,t,n){return t=Ife(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ife(e){var t=$fe(e,"string");return _m(t)=="symbol"?t:t+""}function $fe(e,t){if(_m(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(_m(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oh="recharts-tooltip-wrapper",Rfe={visibility:"hidden"};function Ffe(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return Ze(oh,Cp(Cp(Cp(Cp({},"".concat(oh,"-right"),xe(n)&&t&&xe(t.x)&&n>=t.x),"".concat(oh,"-left"),xe(n)&&t&&xe(t.x)&&n<t.x),"".concat(oh,"-bottom"),xe(r)&&t&&xe(t.y)&&r>=t.y),"".concat(oh,"-top"),xe(r)&&t&&xe(t.y)&&r<t.y))}function sk(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,a=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(i&&xe(i[r]))return i[r];var d=n[r]-l-a,h=n[r]+a;if(t[r])return o[r]?d:h;if(o[r]){var m=d,f=c[r];return m<f?Math.max(h,c[r]):Math.max(d,c[r])}var g=h+l,p=c[r]+u;return g>p?Math.max(d,c[r]):Math.max(h,c[r])}function Lfe(e){var t=e.translateX,n=e.translateY,r=e.useTranslate3d;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function Bfe(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.offsetTopLeft,a=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,d,h;return o.height>0&&o.width>0&&n?(d=sk({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=sk({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=Lfe({translateX:d,translateY:h,useTranslate3d:l})):u=Rfe,{cssProperties:u,cssClasses:Ffe({translateX:d,translateY:h,coordinate:n})}}function qu(e){"@babel/helpers - typeof";return qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qu(e)}function ak(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ik(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ak(Object(n),!0).forEach(function(r){Lw(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ak(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vfe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,PL(r.key),r)}}function qfe(e,t,n){return t&&Vfe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ufe(e,t,n){return t=lv(t),Wfe(e,CL()?Reflect.construct(t,n||[],lv(e).constructor):t.apply(e,n))}function Wfe(e,t){if(t&&(qu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hfe(e)}function Hfe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CL=function(){return!!e})()}function lv(e){return lv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},lv(e)}function Kfe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fw(e,t)}function Fw(e,t){return Fw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Fw(e,t)}function Lw(e,t,n){return t=PL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PL(e){var t=Gfe(e,"string");return qu(t)=="symbol"?t:t+""}function Gfe(e,t){if(qu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(qu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ok=1,Yfe=function(e){function t(){var n;zfe(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=Ufe(this,t,[].concat(a)),Lw(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Lw(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,d;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=n.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),n}return Kfe(t,e),qfe(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>ok||Math.abs(r.height-this.state.lastBoundingBox.height)>ok)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.children,d=a.coordinate,h=a.hasPayload,m=a.isAnimationActive,f=a.offset,g=a.position,p=a.reverseDirection,v=a.useTranslate3d,x=a.viewBox,y=a.wrapperStyle,j=Bfe({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:f,position:g,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:v,viewBox:x}),w=j.cssClasses,N=j.cssProperties,_=ik(ik({transition:m&&i?"transform ".concat(l,"ms ").concat(c):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&h?"visible":"hidden",position:"absolute",top:0,left:0},y);return M.createElement("div",{tabIndex:-1,className:w,style:_,ref:function(C){r.wrapperNode=C}},u)}}])}(b.PureComponent),Qfe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},ta={isSsr:Qfe(),get:function(t){return ta[t]},set:function(t,n){if(typeof t=="string")ta[t]=n;else{var r=Object.keys(t);r&&r.length&&r.forEach(function(a){ta[a]=t[a]})}}};function Uu(e){"@babel/helpers - typeof";return Uu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uu(e)}function lk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ck(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lk(Object(n),!0).forEach(function(r){w2(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lk(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Xfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jfe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kL(r.key),r)}}function Zfe(e,t,n){return t&&Jfe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function epe(e,t,n){return t=cv(t),tpe(e,AL()?Reflect.construct(t,n||[],cv(e).constructor):t.apply(e,n))}function tpe(e,t){if(t&&(Uu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return npe(e)}function npe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AL=function(){return!!e})()}function cv(e){return cv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},cv(e)}function rpe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bw(e,t)}function Bw(e,t){return Bw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Bw(e,t)}function w2(e,t,n){return t=kL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kL(e){var t=spe(e,"string");return Uu(t)=="symbol"?t:t+""}function spe(e,t){if(Uu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Uu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ape(e){return e.dataKey}function ipe(e,t){return M.isValidElement(e)?M.cloneElement(e,t):typeof e=="function"?M.createElement(e,t):M.createElement(Mfe,t)}var Un=function(e){function t(){return Xfe(this,t),epe(this,t,arguments)}return rpe(t,e),Zfe(t,[{key:"render",value:function(){var r=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.content,d=a.coordinate,h=a.filterNull,m=a.isAnimationActive,f=a.offset,g=a.payload,p=a.payloadUniqBy,v=a.position,x=a.reverseDirection,y=a.useTranslate3d,j=a.viewBox,w=a.wrapperStyle,N=g??[];h&&N.length&&(N=xL(g.filter(function(S){return S.value!=null&&(S.hide!==!0||r.props.includeHidden)}),p,ape));var _=N.length>0;return M.createElement(Yfe,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:m,active:i,coordinate:d,hasPayload:_,offset:f,position:v,reverseDirection:x,useTranslate3d:y,viewBox:j,wrapperStyle:w},ipe(u,ck(ck({},this.props),{},{payload:N})))}}])}(b.PureComponent);w2(Un,"displayName","Tooltip");w2(Un,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!ta.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var ope=Ua,lpe=function(){return ope.Date.now()},cpe=lpe,upe=/\s/;function dpe(e){for(var t=e.length;t--&&upe.test(e.charAt(t)););return t}var hpe=dpe,mpe=hpe,fpe=/^\s+/;function ppe(e){return e&&e.slice(0,mpe(e)+1).replace(fpe,"")}var gpe=ppe,vpe=gpe,uk=Wo,xpe=Td,dk=NaN,ype=/^[-+]0x[0-9a-f]+$/i,jpe=/^0b[01]+$/i,bpe=/^0o[0-7]+$/i,wpe=parseInt;function Npe(e){if(typeof e=="number")return e;if(xpe(e))return dk;if(uk(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=uk(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=vpe(e);var n=jpe.test(e);return n||bpe.test(e)?wpe(e.slice(2),n?2:8):ype.test(e)?dk:+e}var TL=Npe,Spe=Wo,nj=cpe,hk=TL,_pe="Expected a function",Cpe=Math.max,Ppe=Math.min;function Ape(e,t,n){var r,a,i,o,l,c,u=0,d=!1,h=!1,m=!0;if(typeof e!="function")throw new TypeError(_pe);t=hk(t)||0,Spe(n)&&(d=!!n.leading,h="maxWait"in n,i=h?Cpe(hk(n.maxWait)||0,t):i,m="trailing"in n?!!n.trailing:m);function f(_){var S=r,C=a;return r=a=void 0,u=_,o=e.apply(C,S),o}function g(_){return u=_,l=setTimeout(x,t),d?f(_):o}function p(_){var S=_-c,C=_-u,A=t-S;return h?Ppe(A,i-C):A}function v(_){var S=_-c,C=_-u;return c===void 0||S>=t||S<0||h&&C>=i}function x(){var _=nj();if(v(_))return y(_);l=setTimeout(x,p(_))}function y(_){return l=void 0,m&&r?f(_):(r=a=void 0,o)}function j(){l!==void 0&&clearTimeout(l),u=0,r=c=a=l=void 0}function w(){return l===void 0?o:y(nj())}function N(){var _=nj(),S=v(_);if(r=arguments,a=this,c=_,S){if(l===void 0)return g(c);if(h)return clearTimeout(l),l=setTimeout(x,t),f(c)}return l===void 0&&(l=setTimeout(x,t)),o}return N.cancel=j,N.flush=w,N}var kpe=Ape,Tpe=kpe,Epe=Wo,Ope="Expected a function";function Dpe(e,t,n){var r=!0,a=!0;if(typeof e!="function")throw new TypeError(Ope);return Epe(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),Tpe(e,t,{leading:r,maxWait:t,trailing:a})}var Mpe=Dpe;const EL=Ct(Mpe);function Cm(e){"@babel/helpers - typeof";return Cm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cm(e)}function mk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Pp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mk(Object(n),!0).forEach(function(r){Ipe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mk(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ipe(e,t,n){return t=$pe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $pe(e){var t=Rpe(e,"string");return Cm(t)=="symbol"?t:t+""}function Rpe(e,t){if(Cm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Cm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fpe(e,t){return Vpe(e)||zpe(e,t)||Bpe(e,t)||Lpe()}function Lpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bpe(e,t){if(e){if(typeof e=="string")return fk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fk(e,t)}}function fk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zpe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Vpe(e){if(Array.isArray(e))return e}var _i=b.forwardRef(function(e,t){var n=e.aspect,r=e.initialDimension,a=r===void 0?{width:-1,height:-1}:r,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,d=u===void 0?0:u,h=e.minHeight,m=e.maxHeight,f=e.children,g=e.debounce,p=g===void 0?0:g,v=e.id,x=e.className,y=e.onResize,j=e.style,w=j===void 0?{}:j,N=b.useRef(null),_=b.useRef();_.current=y,b.useImperativeHandle(t,function(){return Object.defineProperty(N.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),N.current},configurable:!0})});var S=b.useState({containerWidth:a.width,containerHeight:a.height}),C=Fpe(S,2),A=C[0],T=C[1],E=b.useCallback(function(R,I){T(function(W){var V=Math.round(R),q=Math.round(I);return W.containerWidth===V&&W.containerHeight===q?W:{containerWidth:V,containerHeight:q}})},[]);b.useEffect(function(){var R=function(O){var B,U=O[0].contentRect,X=U.width,ie=U.height;E(X,ie),(B=_.current)===null||B===void 0||B.call(_,X,ie)};p>0&&(R=EL(R,p,{trailing:!0,leading:!1}));var I=new ResizeObserver(R),W=N.current.getBoundingClientRect(),V=W.width,q=W.height;return E(V,q),I.observe(N.current),function(){I.disconnect()}},[E,p]);var k=b.useMemo(function(){var R=A.containerWidth,I=A.containerHeight;if(R<0||I<0)return null;ea(fl(o)||fl(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),ea(!n||n>0,"The aspect(%s) must be greater than zero.",n);var W=fl(o)?R:o,V=fl(c)?I:c;n&&n>0&&(W?V=W/n:V&&(W=V*n),m&&V>m&&(V=m)),ea(W>0||V>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,W,V,o,c,d,h,n);var q=!Array.isArray(f)&&fi(f.type).endsWith("Chart");return M.Children.map(f,function(P){return M.isValidElement(P)?b.cloneElement(P,Pp({width:W,height:V},q?{style:Pp({height:"100%",width:"100%",maxHeight:V,maxWidth:W},P.props.style)}:{})):P})},[n,f,c,m,h,d,A,o]);return M.createElement("div",{id:v?"".concat(v):void 0,className:Ze("recharts-responsive-container",x),style:Pp(Pp({},w),{},{width:o,height:c,minWidth:d,minHeight:h,maxHeight:m}),ref:N},k)}),Ld=function(t){return null};Ld.displayName="Cell";function Pm(e){"@babel/helpers - typeof";return Pm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pm(e)}function pk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function zw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pk(Object(n),!0).forEach(function(r){qpe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pk(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qpe(e,t,n){return t=Upe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Upe(e){var t=Wpe(e,"string");return Pm(t)=="symbol"?t:t+""}function Wpe(e,t){if(Pm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Pm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ac={widthCache:{},cacheCount:0},Hpe=2e3,Kpe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},gk="recharts_measurement_span";function Gpe(e){var t=zw({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var zh=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||ta.isSsr)return{width:0,height:0};var r=Gpe(n),a=JSON.stringify({text:t,copyStyle:r});if(Ac.widthCache[a])return Ac.widthCache[a];try{var i=document.getElementById(gk);i||(i=document.createElement("span"),i.setAttribute("id",gk),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=zw(zw({},Kpe),r);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return Ac.widthCache[a]=c,++Ac.cacheCount>Hpe&&(Ac.cacheCount=0,Ac.widthCache={}),c}catch{return{width:0,height:0}}},Ype=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Am(e){"@babel/helpers - typeof";return Am=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Am(e)}function uv(e,t){return Zpe(e)||Jpe(e,t)||Xpe(e,t)||Qpe()}function Qpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xpe(e,t){if(e){if(typeof e=="string")return vk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vk(e,t)}}function vk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jpe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Zpe(e){if(Array.isArray(e))return e}function ege(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nge(r.key),r)}}function tge(e,t,n){return t&&xk(e.prototype,t),n&&xk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function nge(e){var t=rge(e,"string");return Am(t)=="symbol"?t:t+""}function rge(e,t){if(Am(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Am(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var yk=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,jk=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,sge=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,age=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,OL={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},ige=Object.keys(OL),Hc="NaN";function oge(e,t){return e*OL[t]}var Ap=function(){function e(t,n){ege(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!sge.test(n)&&(this.num=NaN,this.unit=""),ige.includes(n)&&(this.num=oge(t,n),this.unit="px")}return tge(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,a=(r=age.exec(n))!==null&&r!==void 0?r:[],i=uv(a,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])}();function DL(e){if(e.includes(Hc))return Hc;for(var t=e;t.includes("*")||t.includes("/");){var n,r=(n=yk.exec(t))!==null&&n!==void 0?n:[],a=uv(r,4),i=a[1],o=a[2],l=a[3],c=Ap.parse(i??""),u=Ap.parse(l??""),d=o==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return Hc;t=t.replace(yk,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,m=(h=jk.exec(t))!==null&&h!==void 0?h:[],f=uv(m,4),g=f[1],p=f[2],v=f[3],x=Ap.parse(g??""),y=Ap.parse(v??""),j=p==="+"?x.add(y):x.subtract(y);if(j.isNaN())return Hc;t=t.replace(jk,j.toString())}return t}var bk=/\(([^()]*)\)/;function lge(e){for(var t=e;t.includes("(");){var n=bk.exec(t),r=uv(n,2),a=r[1];t=t.replace(bk,DL(a))}return t}function cge(e){var t=e.replace(/\s+/g,"");return t=lge(t),t=DL(t),t}function uge(e){try{return cge(e)}catch{return Hc}}function rj(e){var t=uge(e.slice(5,-1));return t===Hc?"":t}var dge=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],hge=["dx","dy","angle","className","breakAll"];function Vw(){return Vw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vw.apply(this,arguments)}function wk(e,t){if(e==null)return{};var n=mge(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function mge(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Nk(e,t){return vge(e)||gge(e,t)||pge(e,t)||fge()}function fge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pge(e,t){if(e){if(typeof e=="string")return Sk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sk(e,t)}}function Sk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gge(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function vge(e){if(Array.isArray(e))return e}var ML=/[ \f\n\r\t\v\u2028\u2029]+/,IL=function(t){var n=t.children,r=t.breakAll,a=t.style;try{var i=[];Ye(n)||(r?i=n.toString().split(""):i=n.toString().split(ML));var o=i.map(function(c){return{word:c,width:zh(c,a).width}}),l=r?0:zh(" ",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},xge=function(t,n,r,a,i){var o=t.maxLines,l=t.children,c=t.style,u=t.breakAll,d=xe(o),h=l,m=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return W.reduce(function(V,q){var P=q.word,O=q.width,B=V[V.length-1];if(B&&(a==null||i||B.width+O+r<Number(a)))B.words.push(P),B.width+=O+r;else{var U={words:[P],width:O};V.push(U)}return V},[])},f=m(n),g=function(W){return W.reduce(function(V,q){return V.width>q.width?V:q})};if(!d)return f;for(var p="…",v=function(W){var V=h.slice(0,W),q=IL({breakAll:u,style:c,children:V+p}).wordsWithComputedWidth,P=m(q),O=P.length>o||g(P).width>Number(a);return[O,P]},x=0,y=h.length-1,j=0,w;x<=y&&j<=h.length-1;){var N=Math.floor((x+y)/2),_=N-1,S=v(_),C=Nk(S,2),A=C[0],T=C[1],E=v(N),k=Nk(E,1),R=k[0];if(!A&&!R&&(x=N+1),A&&R&&(y=N-1),!A&&R){w=T;break}j++}return w||f},_k=function(t){var n=Ye(t)?[]:t.toString().split(ML);return[{words:n}]},yge=function(t){var n=t.width,r=t.scaleToFit,a=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((n||r)&&!ta.isSsr){var c,u,d=IL({breakAll:o,children:a,style:i});if(d){var h=d.wordsWithComputedWidth,m=d.spaceWidth;c=h,u=m}else return _k(a);return xge({breakAll:o,children:a,maxLines:l,style:i},c,u,n,r)}return _k(a)},Ck="#808080",Gl=function(t){var n=t.x,r=n===void 0?0:n,a=t.y,i=a===void 0?0:a,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,d=t.scaleToFit,h=d===void 0?!1:d,m=t.textAnchor,f=m===void 0?"start":m,g=t.verticalAnchor,p=g===void 0?"end":g,v=t.fill,x=v===void 0?Ck:v,y=wk(t,dge),j=b.useMemo(function(){return yge({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:h,style:y.style,width:y.width})},[y.breakAll,y.children,y.maxLines,h,y.style,y.width]),w=y.dx,N=y.dy,_=y.angle,S=y.className,C=y.breakAll,A=wk(y,hge);if(!$n(r)||!$n(i))return null;var T=r+(xe(w)?w:0),E=i+(xe(N)?N:0),k;switch(p){case"start":k=rj("calc(".concat(u,")"));break;case"middle":k=rj("calc(".concat((j.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:k=rj("calc(".concat(j.length-1," * -").concat(l,")"));break}var R=[];if(h){var I=j[0].width,W=y.width;R.push("scale(".concat((xe(W)?W/I:1)/I,")"))}return _&&R.push("rotate(".concat(_,", ").concat(T,", ").concat(E,")")),R.length&&(A.transform=R.join(" ")),M.createElement("text",Vw({},Le(A,!0),{x:T,y:E,className:Ze("recharts-text",S),textAnchor:f,fill:x.includes("url")?Ck:x}),j.map(function(V,q){var P=V.words.join(C?"":" ");return M.createElement("tspan",{x:T,dy:q===0?k:l,key:"".concat(P,"-").concat(q)},P)}))};function Co(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function jge(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function N2(e){let t,n,r;e.length!==2?(t=Co,n=(l,c)=>Co(e(l),c),r=(l,c)=>e(l)-c):(t=e===Co||e===jge?e:bge,n=e,r=e);function a(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const h=u+d>>>1;n(l[h],c)<0?u=h+1:d=h}while(u<d)}return u}function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const h=u+d>>>1;n(l[h],c)<=0?u=h+1:d=h}while(u<d)}return u}function o(l,c,u=0,d=l.length){const h=a(l,c,u,d-1);return h>u&&r(l[h-1],c)>-r(l[h],c)?h-1:h}return{left:a,center:o,right:i}}function bge(){return 0}function $L(e){return e===null?NaN:+e}function*wge(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const Nge=N2(Co),kf=Nge.right;N2($L).center;class Pk extends Map{constructor(t,n=Cge){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,a]of t)this.set(r,a)}get(t){return super.get(Ak(this,t))}has(t){return super.has(Ak(this,t))}set(t,n){return super.set(Sge(this,t),n)}delete(t){return super.delete(_ge(this,t))}}function Ak({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Sge({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function _ge({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Cge(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Pge(e=Co){if(e===Co)return RL;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function RL(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Age=Math.sqrt(50),kge=Math.sqrt(10),Tge=Math.sqrt(2);function dv(e,t,n){const r=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(r)),i=r/Math.pow(10,a),o=i>=Age?10:i>=kge?5:i>=Tge?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=n&&n<2?dv(e,t,n*2):[l,c,u]}function qw(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[a,i,o]=r?dv(t,e,n):dv(e,t,n);if(!(i>=a))return[];const l=i-a+1,c=new Array(l);if(r)if(o<0)for(let u=0;u<l;++u)c[u]=(i-u)/-o;else for(let u=0;u<l;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function Uw(e,t,n){return t=+t,e=+e,n=+n,dv(e,t,n)[2]}function Ww(e,t,n){t=+t,e=+e,n=+n;const r=t<e,a=r?Uw(t,e,n):Uw(e,t,n);return(r?-1:1)*(a<0?1/-a:a)}function kk(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function Tk(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function FL(e,t,n=0,r=1/0,a){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(a=a===void 0?RL:Pge(a);r>n;){if(r-n>600){const c=r-n+1,u=t-n+1,d=Math.log(c),h=.5*Math.exp(2*d/3),m=.5*Math.sqrt(d*h*(c-h)/c)*(u-c/2<0?-1:1),f=Math.max(n,Math.floor(t-u*h/c+m)),g=Math.min(r,Math.floor(t+(c-u)*h/c+m));FL(e,t,f,g,a)}const i=e[t];let o=n,l=r;for(lh(e,n,t),a(e[r],i)>0&&lh(e,n,r);o<l;){for(lh(e,o,l),++o,--l;a(e[o],i)<0;)++o;for(;a(e[l],i)>0;)--l}a(e[n],i)===0?lh(e,n,l):(++l,lh(e,l,r)),l<=t&&(n=l+1),t<=l&&(r=l-1)}return e}function lh(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Ege(e,t,n){if(e=Float64Array.from(wge(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return Tk(e);if(t>=1)return kk(e);var r,a=(r-1)*t,i=Math.floor(a),o=kk(FL(e,i).subarray(0,i+1)),l=Tk(e.subarray(i+1));return o+(l-o)*(a-i)}}function Oge(e,t,n=$L){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,a=(r-1)*t,i=Math.floor(a),o=+n(e[i],i,e),l=+n(e[i+1],i+1,e);return o+(l-o)*(a-i)}}function Dge(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=Math.max(0,Math.ceil((t-e)/n))|0,i=new Array(a);++r<a;)i[r]=e+r*n;return i}function Ds(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Di(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Hw=Symbol("implicit");function S2(){var e=new Pk,t=[],n=[],r=Hw;function a(i){let o=e.get(i);if(o===void 0){if(r!==Hw)return r;e.set(i,o=t.push(i)-1)}return n[o%n.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new Pk;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(n=Array.from(i),a):n.slice()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return S2(t,n).unknown(r)},Ds.apply(a,arguments),a}function km(){var e=S2().unknown(void 0),t=e.domain,n=e.range,r=0,a=1,i,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function h(){var m=t().length,f=a<r,g=f?a:r,p=f?r:a;i=(p-g)/Math.max(1,m-c+u*2),l&&(i=Math.floor(i)),g+=(p-g-i*(m-c))*d,o=i*(1-c),l&&(g=Math.round(g),o=Math.round(o));var v=Dge(m).map(function(x){return g+i*x});return n(f?v.reverse():v)}return e.domain=function(m){return arguments.length?(t(m),h()):t()},e.range=function(m){return arguments.length?([r,a]=m,r=+r,a=+a,h()):[r,a]},e.rangeRound=function(m){return[r,a]=m,r=+r,a=+a,l=!0,h()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(m){return arguments.length?(l=!!m,h()):l},e.padding=function(m){return arguments.length?(c=Math.min(1,u=+m),h()):c},e.paddingInner=function(m){return arguments.length?(c=Math.min(1,m),h()):c},e.paddingOuter=function(m){return arguments.length?(u=+m,h()):u},e.align=function(m){return arguments.length?(d=Math.max(0,Math.min(1,m)),h()):d},e.copy=function(){return km(t(),[r,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},Ds.apply(h(),arguments)}function LL(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return LL(t())},e}function Vh(){return LL(km.apply(null,arguments).paddingInner(1))}function _2(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function BL(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Tf(){}var Tm=.7,hv=1/Tm,cu="\\s*([+-]?\\d+)\\s*",Em="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",$a="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Mge=/^#([0-9a-f]{3,8})$/,Ige=new RegExp(`^rgb\\(${cu},${cu},${cu}\\)$`),$ge=new RegExp(`^rgb\\(${$a},${$a},${$a}\\)$`),Rge=new RegExp(`^rgba\\(${cu},${cu},${cu},${Em}\\)$`),Fge=new RegExp(`^rgba\\(${$a},${$a},${$a},${Em}\\)$`),Lge=new RegExp(`^hsl\\(${Em},${$a},${$a}\\)$`),Bge=new RegExp(`^hsla\\(${Em},${$a},${$a},${Em}\\)$`),Ek={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};_2(Tf,Om,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ok,formatHex:Ok,formatHex8:zge,formatHsl:Vge,formatRgb:Dk,toString:Dk});function Ok(){return this.rgb().formatHex()}function zge(){return this.rgb().formatHex8()}function Vge(){return zL(this).formatHsl()}function Dk(){return this.rgb().formatRgb()}function Om(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Mge.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Mk(t):n===3?new qr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?kp(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?kp(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Ige.exec(e))?new qr(t[1],t[2],t[3],1):(t=$ge.exec(e))?new qr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Rge.exec(e))?kp(t[1],t[2],t[3],t[4]):(t=Fge.exec(e))?kp(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Lge.exec(e))?Rk(t[1],t[2]/100,t[3]/100,1):(t=Bge.exec(e))?Rk(t[1],t[2]/100,t[3]/100,t[4]):Ek.hasOwnProperty(e)?Mk(Ek[e]):e==="transparent"?new qr(NaN,NaN,NaN,0):null}function Mk(e){return new qr(e>>16&255,e>>8&255,e&255,1)}function kp(e,t,n,r){return r<=0&&(e=t=n=NaN),new qr(e,t,n,r)}function qge(e){return e instanceof Tf||(e=Om(e)),e?(e=e.rgb(),new qr(e.r,e.g,e.b,e.opacity)):new qr}function Kw(e,t,n,r){return arguments.length===1?qge(e):new qr(e,t,n,r??1)}function qr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}_2(qr,Kw,BL(Tf,{brighter(e){return e=e==null?hv:Math.pow(hv,e),new qr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Tm:Math.pow(Tm,e),new qr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new qr(Tl(this.r),Tl(this.g),Tl(this.b),mv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ik,formatHex:Ik,formatHex8:Uge,formatRgb:$k,toString:$k}));function Ik(){return`#${pl(this.r)}${pl(this.g)}${pl(this.b)}`}function Uge(){return`#${pl(this.r)}${pl(this.g)}${pl(this.b)}${pl((isNaN(this.opacity)?1:this.opacity)*255)}`}function $k(){const e=mv(this.opacity);return`${e===1?"rgb(":"rgba("}${Tl(this.r)}, ${Tl(this.g)}, ${Tl(this.b)}${e===1?")":`, ${e})`}`}function mv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Tl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function pl(e){return e=Tl(e),(e<16?"0":"")+e.toString(16)}function Rk(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Qs(e,t,n,r)}function zL(e){if(e instanceof Qs)return new Qs(e.h,e.s,e.l,e.opacity);if(e instanceof Tf||(e=Om(e)),!e)return new Qs;if(e instanceof Qs)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,l=i-a,c=(i+a)/2;return l?(t===i?o=(n-r)/l+(n<r)*6:n===i?o=(r-t)/l+2:o=(t-n)/l+4,l/=c<.5?i+a:2-i-a,o*=60):l=c>0&&c<1?0:o,new Qs(o,l,c,e.opacity)}function Wge(e,t,n,r){return arguments.length===1?zL(e):new Qs(e,t,n,r??1)}function Qs(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}_2(Qs,Wge,BL(Tf,{brighter(e){return e=e==null?hv:Math.pow(hv,e),new Qs(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Tm:Math.pow(Tm,e),new Qs(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new qr(sj(e>=240?e-240:e+120,a,r),sj(e,a,r),sj(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new Qs(Fk(this.h),Tp(this.s),Tp(this.l),mv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=mv(this.opacity);return`${e===1?"hsl(":"hsla("}${Fk(this.h)}, ${Tp(this.s)*100}%, ${Tp(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Fk(e){return e=(e||0)%360,e<0?e+360:e}function Tp(e){return Math.max(0,Math.min(1,e||0))}function sj(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const C2=e=>()=>e;function Hge(e,t){return function(n){return e+n*t}}function Kge(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Gge(e){return(e=+e)==1?VL:function(t,n){return n-t?Kge(t,n,e):C2(isNaN(t)?n:t)}}function VL(e,t){var n=t-e;return n?Hge(e,n):C2(isNaN(e)?t:e)}const Lk=function e(t){var n=Gge(t);function r(a,i){var o=n((a=Kw(a)).r,(i=Kw(i)).r),l=n(a.g,i.g),c=n(a.b,i.b),u=VL(a.opacity,i.opacity);return function(d){return a.r=o(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return r.gamma=e,r}(1);function Yge(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),a;return function(i){for(a=0;a<n;++a)r[a]=e[a]*(1-i)+t[a]*i;return r}}function Qge(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Xge(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,a=new Array(r),i=new Array(n),o;for(o=0;o<r;++o)a[o]=Bd(e[o],t[o]);for(;o<n;++o)i[o]=t[o];return function(l){for(o=0;o<r;++o)i[o]=a[o](l);return i}}function Jge(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function fv(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Zge(e,t){var n={},r={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=Bd(e[a],t[a]):r[a]=t[a];return function(i){for(a in n)r[a]=n[a](i);return r}}var Gw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,aj=new RegExp(Gw.source,"g");function eve(e){return function(){return e}}function tve(e){return function(t){return e(t)+""}}function nve(e,t){var n=Gw.lastIndex=aj.lastIndex=0,r,a,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(r=Gw.exec(e))&&(a=aj.exec(t));)(i=a.index)>n&&(i=t.slice(n,i),l[o]?l[o]+=i:l[++o]=i),(r=r[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:fv(r,a)})),n=aj.lastIndex;return n<t.length&&(i=t.slice(n),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?tve(c[0].x):eve(t):(t=c.length,function(u){for(var d=0,h;d<t;++d)l[(h=c[d]).i]=h.x(u);return l.join("")})}function Bd(e,t){var n=typeof t,r;return t==null||n==="boolean"?C2(t):(n==="number"?fv:n==="string"?(r=Om(t))?(t=r,Lk):nve:t instanceof Om?Lk:t instanceof Date?Jge:Qge(t)?Yge:Array.isArray(t)?Xge:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Zge:fv)(e,t)}function P2(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function rve(e,t){t===void 0&&(t=e,e=Bd);for(var n=0,r=t.length-1,a=t[0],i=new Array(r<0?0:r);n<r;)i[n]=e(a,a=t[++n]);return function(o){var l=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return i[l](o-l)}}function sve(e){return function(){return e}}function pv(e){return+e}var Bk=[0,1];function Sr(e){return e}function Yw(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:sve(isNaN(t)?NaN:.5)}function ave(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function ive(e,t,n){var r=e[0],a=e[1],i=t[0],o=t[1];return a<r?(r=Yw(a,r),i=n(o,i)):(r=Yw(r,a),i=n(i,o)),function(l){return i(r(l))}}function ove(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),i=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)a[o]=Yw(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(l){var c=kf(e,l,1,r)-1;return i[c](a[c](l))}}function Ef(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function jy(){var e=Bk,t=Bk,n=Bd,r,a,i,o=Sr,l,c,u;function d(){var m=Math.min(e.length,t.length);return o!==Sr&&(o=ave(e[0],e[m-1])),l=m>2?ove:ive,c=u=null,h}function h(m){return m==null||isNaN(m=+m)?i:(c||(c=l(e.map(r),t,n)))(r(o(m)))}return h.invert=function(m){return o(a((u||(u=l(t,e.map(r),fv)))(m)))},h.domain=function(m){return arguments.length?(e=Array.from(m,pv),d()):e.slice()},h.range=function(m){return arguments.length?(t=Array.from(m),d()):t.slice()},h.rangeRound=function(m){return t=Array.from(m),n=P2,d()},h.clamp=function(m){return arguments.length?(o=m?!0:Sr,d()):o!==Sr},h.interpolate=function(m){return arguments.length?(n=m,d()):n},h.unknown=function(m){return arguments.length?(i=m,h):i},function(m,f){return r=m,a=f,d()}}function A2(){return jy()(Sr,Sr)}function lve(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function gv(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Wu(e){return e=gv(Math.abs(e)),e?e[1]:NaN}function cve(e,t){return function(n,r){for(var a=n.length,i=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),i.push(n.substring(a-=l,a+l)),!((c+=l+1)>r));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function uve(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var dve=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Dm(e){if(!(t=dve.exec(e)))throw new Error("invalid format: "+e);var t;return new k2({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Dm.prototype=k2.prototype;function k2(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}k2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function hve(e){e:for(var t=e.length,n=1,r=-1,a;n<t;++n)switch(e[n]){case".":r=a=n;break;case"0":r===0&&(r=n),a=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(a+1):e}var qL;function mve(e,t){var n=gv(e,t);if(!n)return e+"";var r=n[0],a=n[1],i=a-(qL=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+gv(e,Math.max(0,t+i-1))[0]}function zk(e,t){var n=gv(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const Vk={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:lve,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>zk(e*100,t),r:zk,s:mve,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function qk(e){return e}var Uk=Array.prototype.map,Wk=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function fve(e){var t=e.grouping===void 0||e.thousands===void 0?qk:cve(Uk.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?qk:uve(Uk.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(h){h=Dm(h);var m=h.fill,f=h.align,g=h.sign,p=h.symbol,v=h.zero,x=h.width,y=h.comma,j=h.precision,w=h.trim,N=h.type;N==="n"?(y=!0,N="g"):Vk[N]||(j===void 0&&(j=12),w=!0,N="g"),(v||m==="0"&&f==="=")&&(v=!0,m="0",f="=");var _=p==="$"?n:p==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",S=p==="$"?r:/[%p]/.test(N)?o:"",C=Vk[N],A=/[defgprs%]/.test(N);j=j===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j));function T(E){var k=_,R=S,I,W,V;if(N==="c")R=C(E)+R,E="";else{E=+E;var q=E<0||1/E<0;if(E=isNaN(E)?c:C(Math.abs(E),j),w&&(E=hve(E)),q&&+E==0&&g!=="+"&&(q=!1),k=(q?g==="("?g:l:g==="-"||g==="("?"":g)+k,R=(N==="s"?Wk[8+qL/3]:"")+R+(q&&g==="("?")":""),A){for(I=-1,W=E.length;++I<W;)if(V=E.charCodeAt(I),48>V||V>57){R=(V===46?a+E.slice(I+1):E.slice(I))+R,E=E.slice(0,I);break}}}y&&!v&&(E=t(E,1/0));var P=k.length+E.length+R.length,O=P<x?new Array(x-P+1).join(m):"";switch(y&&v&&(E=t(O+E,O.length?x-R.length:1/0),O=""),f){case"<":E=k+E+R+O;break;case"=":E=k+O+E+R;break;case"^":E=O.slice(0,P=O.length>>1)+k+E+R+O.slice(P);break;default:E=O+k+E+R;break}return i(E)}return T.toString=function(){return h+""},T}function d(h,m){var f=u((h=Dm(h),h.type="f",h)),g=Math.max(-8,Math.min(8,Math.floor(Wu(m)/3)))*3,p=Math.pow(10,-g),v=Wk[8+g/3];return function(x){return f(p*x)+v}}return{format:u,formatPrefix:d}}var Ep,T2,UL;pve({thousands:",",grouping:[3],currency:["$",""]});function pve(e){return Ep=fve(e),T2=Ep.format,UL=Ep.formatPrefix,Ep}function gve(e){return Math.max(0,-Wu(Math.abs(e)))}function vve(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Wu(t)/3)))*3-Wu(Math.abs(e)))}function xve(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Wu(t)-Wu(e))+1}function WL(e,t,n,r){var a=Ww(e,t,n),i;switch(r=Dm(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(i=vve(a,o))&&(r.precision=i),UL(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=xve(a,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=gve(a))&&(r.precision=i-(r.type==="%")*2);break}}return T2(r)}function Ho(e){var t=e.domain;return e.ticks=function(n){var r=t();return qw(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var a=t();return WL(a[0],a[a.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),a=0,i=r.length-1,o=r[a],l=r[i],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=a,a=i,i=u);d-- >0;){if(u=Uw(o,l,n),u===c)return r[a]=o,r[i]=l,t(r);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function vv(){var e=A2();return e.copy=function(){return Ef(e,vv())},Ds.apply(e,arguments),Ho(e)}function HL(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,pv),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return HL(e).unknown(t)},e=arguments.length?Array.from(e,pv):[0,1],Ho(n)}function KL(e,t){e=e.slice();var n=0,r=e.length-1,a=e[n],i=e[r],o;return i<a&&(o=n,n=r,r=o,o=a,a=i,i=o),e[n]=t.floor(a),e[r]=t.ceil(i),e}function Hk(e){return Math.log(e)}function Kk(e){return Math.exp(e)}function yve(e){return-Math.log(-e)}function jve(e){return-Math.exp(-e)}function bve(e){return isFinite(e)?+("1e"+e):e<0?0:e}function wve(e){return e===10?bve:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Nve(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Gk(e){return(t,n)=>-e(-t,n)}function E2(e){const t=e(Hk,Kk),n=t.domain;let r=10,a,i;function o(){return a=Nve(r),i=wve(r),n()[0]<0?(a=Gk(a),i=Gk(i),e(yve,jve)):e(Hk,Kk),t}return t.base=function(l){return arguments.length?(r=+l,o()):r},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const c=n();let u=c[0],d=c[c.length-1];const h=d<u;h&&([u,d]=[d,u]);let m=a(u),f=a(d),g,p;const v=l==null?10:+l;let x=[];if(!(r%1)&&f-m<v){if(m=Math.floor(m),f=Math.ceil(f),u>0){for(;m<=f;++m)for(g=1;g<r;++g)if(p=m<0?g/i(-m):g*i(m),!(p<u)){if(p>d)break;x.push(p)}}else for(;m<=f;++m)for(g=r-1;g>=1;--g)if(p=m>0?g/i(-m):g*i(m),!(p<u)){if(p>d)break;x.push(p)}x.length*2<v&&(x=qw(u,d,v))}else x=qw(m,f,Math.min(f-m,v)).map(i);return h?x.reverse():x},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=Dm(c)).precision==null&&(c.trim=!0),c=T2(c)),l===1/0)return c;const u=Math.max(1,r*l/t.ticks().length);return d=>{let h=d/i(Math.round(a(d)));return h*r<r-.5&&(h*=r),h<=u?c(d):""}},t.nice=()=>n(KL(n(),{floor:l=>i(Math.floor(a(l))),ceil:l=>i(Math.ceil(a(l)))})),t}function GL(){const e=E2(jy()).domain([1,10]);return e.copy=()=>Ef(e,GL()).base(e.base()),Ds.apply(e,arguments),e}function Yk(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Qk(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function O2(e){var t=1,n=e(Yk(t),Qk(t));return n.constant=function(r){return arguments.length?e(Yk(t=+r),Qk(t)):t},Ho(n)}function YL(){var e=O2(jy());return e.copy=function(){return Ef(e,YL()).constant(e.constant())},Ds.apply(e,arguments)}function Xk(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Sve(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function _ve(e){return e<0?-e*e:e*e}function D2(e){var t=e(Sr,Sr),n=1;function r(){return n===1?e(Sr,Sr):n===.5?e(Sve,_ve):e(Xk(n),Xk(1/n))}return t.exponent=function(a){return arguments.length?(n=+a,r()):n},Ho(t)}function M2(){var e=D2(jy());return e.copy=function(){return Ef(e,M2()).exponent(e.exponent())},Ds.apply(e,arguments),e}function Cve(){return M2.apply(null,arguments).exponent(.5)}function Jk(e){return Math.sign(e)*e*e}function Pve(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function QL(){var e=A2(),t=[0,1],n=!1,r;function a(i){var o=Pve(e(i));return isNaN(o)?r:n?Math.round(o):o}return a.invert=function(i){return e.invert(Jk(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,pv)).map(Jk)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(n=!!i,a):n},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return QL(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Ds.apply(a,arguments),Ho(a)}function XL(){var e=[],t=[],n=[],r;function a(){var o=0,l=Math.max(1,t.length);for(n=new Array(l-1);++o<l;)n[o-1]=Oge(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?r:t[kf(n,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Co),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.quantiles=function(){return n.slice()},i.copy=function(){return XL().domain(e).range(t).unknown(r)},Ds.apply(i,arguments)}function JL(){var e=0,t=1,n=1,r=[.5],a=[0,1],i;function o(c){return c!=null&&c<=c?a[kf(r,c,0,n)]:i}function l(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*t-(c-n)*e)/(n+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(n=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return r.slice()},o.copy=function(){return JL().domain([e,t]).range(a).unknown(i)},Ds.apply(Ho(o),arguments)}function ZL(){var e=[.5],t=[0,1],n,r=1;function a(i){return i!=null&&i<=i?t[kf(e,i,0,r)]:n}return a.domain=function(i){return arguments.length?(e=Array.from(i),r=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),r=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return ZL().domain(e).range(t).unknown(n)},Ds.apply(a,arguments)}const ij=new Date,oj=new Date;function Fn(e,t,n,r){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),l=a.ceil(i);return i-o<l-i?o:l},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,l)=>{const c=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return c},a.filter=i=>Fn(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),n&&(a.count=(i,o)=>(ij.setTime(+i),oj.setTime(+o),e(ij),e(oj),Math.floor(n(ij,oj))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(r?o=>r(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const xv=Fn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);xv.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Fn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):xv);xv.range;const ci=1e3,Ss=ci*60,ui=Ss*60,Ci=ui*24,I2=Ci*7,Zk=Ci*30,lj=Ci*365,gl=Fn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ci)},(e,t)=>(t-e)/ci,e=>e.getUTCSeconds());gl.range;const $2=Fn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ci)},(e,t)=>{e.setTime(+e+t*Ss)},(e,t)=>(t-e)/Ss,e=>e.getMinutes());$2.range;const R2=Fn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ss)},(e,t)=>(t-e)/Ss,e=>e.getUTCMinutes());R2.range;const F2=Fn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ci-e.getMinutes()*Ss)},(e,t)=>{e.setTime(+e+t*ui)},(e,t)=>(t-e)/ui,e=>e.getHours());F2.range;const L2=Fn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ui)},(e,t)=>(t-e)/ui,e=>e.getUTCHours());L2.range;const Of=Fn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ss)/Ci,e=>e.getDate()-1);Of.range;const by=Fn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ci,e=>e.getUTCDate()-1);by.range;const e5=Fn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ci,e=>Math.floor(e/Ci));e5.range;function dc(e){return Fn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Ss)/I2)}const wy=dc(0),yv=dc(1),Ave=dc(2),kve=dc(3),Hu=dc(4),Tve=dc(5),Eve=dc(6);wy.range;yv.range;Ave.range;kve.range;Hu.range;Tve.range;Eve.range;function hc(e){return Fn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/I2)}const Ny=hc(0),jv=hc(1),Ove=hc(2),Dve=hc(3),Ku=hc(4),Mve=hc(5),Ive=hc(6);Ny.range;jv.range;Ove.range;Dve.range;Ku.range;Mve.range;Ive.range;const B2=Fn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());B2.range;const z2=Fn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());z2.range;const Pi=Fn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Pi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Fn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Pi.range;const Ai=Fn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ai.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Fn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Ai.range;function t5(e,t,n,r,a,i){const o=[[gl,1,ci],[gl,5,5*ci],[gl,15,15*ci],[gl,30,30*ci],[i,1,Ss],[i,5,5*Ss],[i,15,15*Ss],[i,30,30*Ss],[a,1,ui],[a,3,3*ui],[a,6,6*ui],[a,12,12*ui],[r,1,Ci],[r,2,2*Ci],[n,1,I2],[t,1,Zk],[t,3,3*Zk],[e,1,lj]];function l(u,d,h){const m=d<u;m&&([u,d]=[d,u]);const f=h&&typeof h.range=="function"?h:c(u,d,h),g=f?f.range(u,+d+1):[];return m?g.reverse():g}function c(u,d,h){const m=Math.abs(d-u)/h,f=N2(([,,v])=>v).right(o,m);if(f===o.length)return e.every(Ww(u/lj,d/lj,h));if(f===0)return xv.every(Math.max(Ww(u,d,h),1));const[g,p]=o[m/o[f-1][2]<o[f][2]/m?f-1:f];return g.every(p)}return[l,c]}const[$ve,Rve]=t5(Ai,z2,Ny,e5,L2,R2),[Fve,Lve]=t5(Pi,B2,wy,Of,F2,$2);function cj(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function uj(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ch(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Bve(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=uh(a),d=dh(a),h=uh(i),m=dh(i),f=uh(o),g=dh(o),p=uh(l),v=dh(l),x=uh(c),y=dh(c),j={a:q,A:P,b:O,B,c:null,d:aT,e:aT,f:cxe,g:yxe,G:bxe,H:ixe,I:oxe,j:lxe,L:n5,m:uxe,M:dxe,p:U,q:X,Q:lT,s:cT,S:hxe,u:mxe,U:fxe,V:pxe,w:gxe,W:vxe,x:null,X:null,y:xxe,Y:jxe,Z:wxe,"%":oT},w={a:ie,A:re,b:de,B:pe,c:null,d:iT,e:iT,f:Cxe,g:$xe,G:Fxe,H:Nxe,I:Sxe,j:_xe,L:s5,m:Pxe,M:Axe,p:ce,q:se,Q:lT,s:cT,S:kxe,u:Txe,U:Exe,V:Oxe,w:Dxe,W:Mxe,x:null,X:null,y:Ixe,Y:Rxe,Z:Lxe,"%":oT},N={a:T,A:E,b:k,B:R,c:I,d:rT,e:rT,f:nxe,g:nT,G:tT,H:sT,I:sT,j:Jve,L:txe,m:Xve,M:Zve,p:A,q:Qve,Q:sxe,s:axe,S:exe,u:Wve,U:Hve,V:Kve,w:Uve,W:Gve,x:W,X:V,y:nT,Y:tT,Z:Yve,"%":rxe};j.x=_(n,j),j.X=_(r,j),j.c=_(t,j),w.x=_(n,w),w.X=_(r,w),w.c=_(t,w);function _(ae,le){return function(H){var Q=[],ve=-1,ge=0,rt=ae.length,Ge,dt,te;for(H instanceof Date||(H=new Date(+H));++ve<rt;)ae.charCodeAt(ve)===37&&(Q.push(ae.slice(ge,ve)),(dt=eT[Ge=ae.charAt(++ve)])!=null?Ge=ae.charAt(++ve):dt=Ge==="e"?" ":"0",(te=le[Ge])&&(Ge=te(H,dt)),Q.push(Ge),ge=ve+1);return Q.push(ae.slice(ge,ve)),Q.join("")}}function S(ae,le){return function(H){var Q=ch(1900,void 0,1),ve=C(Q,ae,H+="",0),ge,rt;if(ve!=H.length)return null;if("Q"in Q)return new Date(Q.Q);if("s"in Q)return new Date(Q.s*1e3+("L"in Q?Q.L:0));if(le&&!("Z"in Q)&&(Q.Z=0),"p"in Q&&(Q.H=Q.H%12+Q.p*12),Q.m===void 0&&(Q.m="q"in Q?Q.q:0),"V"in Q){if(Q.V<1||Q.V>53)return null;"w"in Q||(Q.w=1),"Z"in Q?(ge=uj(ch(Q.y,0,1)),rt=ge.getUTCDay(),ge=rt>4||rt===0?jv.ceil(ge):jv(ge),ge=by.offset(ge,(Q.V-1)*7),Q.y=ge.getUTCFullYear(),Q.m=ge.getUTCMonth(),Q.d=ge.getUTCDate()+(Q.w+6)%7):(ge=cj(ch(Q.y,0,1)),rt=ge.getDay(),ge=rt>4||rt===0?yv.ceil(ge):yv(ge),ge=Of.offset(ge,(Q.V-1)*7),Q.y=ge.getFullYear(),Q.m=ge.getMonth(),Q.d=ge.getDate()+(Q.w+6)%7)}else("W"in Q||"U"in Q)&&("w"in Q||(Q.w="u"in Q?Q.u%7:"W"in Q?1:0),rt="Z"in Q?uj(ch(Q.y,0,1)).getUTCDay():cj(ch(Q.y,0,1)).getDay(),Q.m=0,Q.d="W"in Q?(Q.w+6)%7+Q.W*7-(rt+5)%7:Q.w+Q.U*7-(rt+6)%7);return"Z"in Q?(Q.H+=Q.Z/100|0,Q.M+=Q.Z%100,uj(Q)):cj(Q)}}function C(ae,le,H,Q){for(var ve=0,ge=le.length,rt=H.length,Ge,dt;ve<ge;){if(Q>=rt)return-1;if(Ge=le.charCodeAt(ve++),Ge===37){if(Ge=le.charAt(ve++),dt=N[Ge in eT?le.charAt(ve++):Ge],!dt||(Q=dt(ae,H,Q))<0)return-1}else if(Ge!=H.charCodeAt(Q++))return-1}return Q}function A(ae,le,H){var Q=u.exec(le.slice(H));return Q?(ae.p=d.get(Q[0].toLowerCase()),H+Q[0].length):-1}function T(ae,le,H){var Q=f.exec(le.slice(H));return Q?(ae.w=g.get(Q[0].toLowerCase()),H+Q[0].length):-1}function E(ae,le,H){var Q=h.exec(le.slice(H));return Q?(ae.w=m.get(Q[0].toLowerCase()),H+Q[0].length):-1}function k(ae,le,H){var Q=x.exec(le.slice(H));return Q?(ae.m=y.get(Q[0].toLowerCase()),H+Q[0].length):-1}function R(ae,le,H){var Q=p.exec(le.slice(H));return Q?(ae.m=v.get(Q[0].toLowerCase()),H+Q[0].length):-1}function I(ae,le,H){return C(ae,t,le,H)}function W(ae,le,H){return C(ae,n,le,H)}function V(ae,le,H){return C(ae,r,le,H)}function q(ae){return o[ae.getDay()]}function P(ae){return i[ae.getDay()]}function O(ae){return c[ae.getMonth()]}function B(ae){return l[ae.getMonth()]}function U(ae){return a[+(ae.getHours()>=12)]}function X(ae){return 1+~~(ae.getMonth()/3)}function ie(ae){return o[ae.getUTCDay()]}function re(ae){return i[ae.getUTCDay()]}function de(ae){return c[ae.getUTCMonth()]}function pe(ae){return l[ae.getUTCMonth()]}function ce(ae){return a[+(ae.getUTCHours()>=12)]}function se(ae){return 1+~~(ae.getUTCMonth()/3)}return{format:function(ae){var le=_(ae+="",j);return le.toString=function(){return ae},le},parse:function(ae){var le=S(ae+="",!1);return le.toString=function(){return ae},le},utcFormat:function(ae){var le=_(ae+="",w);return le.toString=function(){return ae},le},utcParse:function(ae){var le=S(ae+="",!0);return le.toString=function(){return ae},le}}}var eT={"-":"",_:" ",0:"0"},Gn=/^\s*\d+/,zve=/^%/,Vve=/[\\^$*+?|[\]().{}]/g;function wt(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",i=a.length;return r+(i<n?new Array(n-i+1).join(t)+a:a)}function qve(e){return e.replace(Vve,"\\$&")}function uh(e){return new RegExp("^(?:"+e.map(qve).join("|")+")","i")}function dh(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Uve(e,t,n){var r=Gn.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Wve(e,t,n){var r=Gn.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Hve(e,t,n){var r=Gn.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Kve(e,t,n){var r=Gn.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Gve(e,t,n){var r=Gn.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function tT(e,t,n){var r=Gn.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function nT(e,t,n){var r=Gn.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Yve(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Qve(e,t,n){var r=Gn.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Xve(e,t,n){var r=Gn.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function rT(e,t,n){var r=Gn.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Jve(e,t,n){var r=Gn.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function sT(e,t,n){var r=Gn.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Zve(e,t,n){var r=Gn.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function exe(e,t,n){var r=Gn.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function txe(e,t,n){var r=Gn.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function nxe(e,t,n){var r=Gn.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function rxe(e,t,n){var r=zve.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function sxe(e,t,n){var r=Gn.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function axe(e,t,n){var r=Gn.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function aT(e,t){return wt(e.getDate(),t,2)}function ixe(e,t){return wt(e.getHours(),t,2)}function oxe(e,t){return wt(e.getHours()%12||12,t,2)}function lxe(e,t){return wt(1+Of.count(Pi(e),e),t,3)}function n5(e,t){return wt(e.getMilliseconds(),t,3)}function cxe(e,t){return n5(e,t)+"000"}function uxe(e,t){return wt(e.getMonth()+1,t,2)}function dxe(e,t){return wt(e.getMinutes(),t,2)}function hxe(e,t){return wt(e.getSeconds(),t,2)}function mxe(e){var t=e.getDay();return t===0?7:t}function fxe(e,t){return wt(wy.count(Pi(e)-1,e),t,2)}function r5(e){var t=e.getDay();return t>=4||t===0?Hu(e):Hu.ceil(e)}function pxe(e,t){return e=r5(e),wt(Hu.count(Pi(e),e)+(Pi(e).getDay()===4),t,2)}function gxe(e){return e.getDay()}function vxe(e,t){return wt(yv.count(Pi(e)-1,e),t,2)}function xxe(e,t){return wt(e.getFullYear()%100,t,2)}function yxe(e,t){return e=r5(e),wt(e.getFullYear()%100,t,2)}function jxe(e,t){return wt(e.getFullYear()%1e4,t,4)}function bxe(e,t){var n=e.getDay();return e=n>=4||n===0?Hu(e):Hu.ceil(e),wt(e.getFullYear()%1e4,t,4)}function wxe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+wt(t/60|0,"0",2)+wt(t%60,"0",2)}function iT(e,t){return wt(e.getUTCDate(),t,2)}function Nxe(e,t){return wt(e.getUTCHours(),t,2)}function Sxe(e,t){return wt(e.getUTCHours()%12||12,t,2)}function _xe(e,t){return wt(1+by.count(Ai(e),e),t,3)}function s5(e,t){return wt(e.getUTCMilliseconds(),t,3)}function Cxe(e,t){return s5(e,t)+"000"}function Pxe(e,t){return wt(e.getUTCMonth()+1,t,2)}function Axe(e,t){return wt(e.getUTCMinutes(),t,2)}function kxe(e,t){return wt(e.getUTCSeconds(),t,2)}function Txe(e){var t=e.getUTCDay();return t===0?7:t}function Exe(e,t){return wt(Ny.count(Ai(e)-1,e),t,2)}function a5(e){var t=e.getUTCDay();return t>=4||t===0?Ku(e):Ku.ceil(e)}function Oxe(e,t){return e=a5(e),wt(Ku.count(Ai(e),e)+(Ai(e).getUTCDay()===4),t,2)}function Dxe(e){return e.getUTCDay()}function Mxe(e,t){return wt(jv.count(Ai(e)-1,e),t,2)}function Ixe(e,t){return wt(e.getUTCFullYear()%100,t,2)}function $xe(e,t){return e=a5(e),wt(e.getUTCFullYear()%100,t,2)}function Rxe(e,t){return wt(e.getUTCFullYear()%1e4,t,4)}function Fxe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Ku(e):Ku.ceil(e),wt(e.getUTCFullYear()%1e4,t,4)}function Lxe(){return"+0000"}function oT(){return"%"}function lT(e){return+e}function cT(e){return Math.floor(+e/1e3)}var kc,i5,o5;Bxe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Bxe(e){return kc=Bve(e),i5=kc.format,kc.parse,o5=kc.utcFormat,kc.utcParse,kc}function zxe(e){return new Date(e)}function Vxe(e){return e instanceof Date?+e:+new Date(+e)}function V2(e,t,n,r,a,i,o,l,c,u){var d=A2(),h=d.invert,m=d.domain,f=u(".%L"),g=u(":%S"),p=u("%I:%M"),v=u("%I %p"),x=u("%a %d"),y=u("%b %d"),j=u("%B"),w=u("%Y");function N(_){return(c(_)<_?f:l(_)<_?g:o(_)<_?p:i(_)<_?v:r(_)<_?a(_)<_?x:y:n(_)<_?j:w)(_)}return d.invert=function(_){return new Date(h(_))},d.domain=function(_){return arguments.length?m(Array.from(_,Vxe)):m().map(zxe)},d.ticks=function(_){var S=m();return e(S[0],S[S.length-1],_??10)},d.tickFormat=function(_,S){return S==null?N:u(S)},d.nice=function(_){var S=m();return(!_||typeof _.range!="function")&&(_=t(S[0],S[S.length-1],_??10)),_?m(KL(S,_)):d},d.copy=function(){return Ef(d,V2(e,t,n,r,a,i,o,l,c,u))},d}function qxe(){return Ds.apply(V2(Fve,Lve,Pi,B2,wy,Of,F2,$2,gl,i5).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Uxe(){return Ds.apply(V2($ve,Rve,Ai,z2,Ny,by,L2,R2,gl,o5).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Sy(){var e=0,t=1,n,r,a,i,o=Sr,l=!1,c;function u(h){return h==null||isNaN(h=+h)?c:o(a===0?.5:(h=(i(h)-n)*a,l?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([e,t]=h,n=i(e=+e),r=i(t=+t),a=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(h){return arguments.length?(l=!!h,u):l},u.interpolator=function(h){return arguments.length?(o=h,u):o};function d(h){return function(m){var f,g;return arguments.length?([f,g]=m,o=h(f,g),u):[o(0),o(1)]}}return u.range=d(Bd),u.rangeRound=d(P2),u.unknown=function(h){return arguments.length?(c=h,u):c},function(h){return i=h,n=h(e),r=h(t),a=n===r?0:1/(r-n),u}}function Ko(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function l5(){var e=Ho(Sy()(Sr));return e.copy=function(){return Ko(e,l5())},Di.apply(e,arguments)}function c5(){var e=E2(Sy()).domain([1,10]);return e.copy=function(){return Ko(e,c5()).base(e.base())},Di.apply(e,arguments)}function u5(){var e=O2(Sy());return e.copy=function(){return Ko(e,u5()).constant(e.constant())},Di.apply(e,arguments)}function q2(){var e=D2(Sy());return e.copy=function(){return Ko(e,q2()).exponent(e.exponent())},Di.apply(e,arguments)}function Wxe(){return q2.apply(null,arguments).exponent(.5)}function d5(){var e=[],t=Sr;function n(r){if(r!=null&&!isNaN(r=+r))return t((kf(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let a of r)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Co),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,a)=>t(a/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(a,i)=>Ege(e,i/r))},n.copy=function(){return d5(t).domain(e)},Di.apply(n,arguments)}function _y(){var e=0,t=.5,n=1,r=1,a,i,o,l,c,u=Sr,d,h=!1,m;function f(p){return isNaN(p=+p)?m:(p=.5+((p=+d(p))-i)*(r*p<r*i?l:c),u(h?Math.max(0,Math.min(1,p)):p))}f.domain=function(p){return arguments.length?([e,t,n]=p,a=d(e=+e),i=d(t=+t),o=d(n=+n),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),r=i<a?-1:1,f):[e,t,n]},f.clamp=function(p){return arguments.length?(h=!!p,f):h},f.interpolator=function(p){return arguments.length?(u=p,f):u};function g(p){return function(v){var x,y,j;return arguments.length?([x,y,j]=v,u=rve(p,[x,y,j]),f):[u(0),u(.5),u(1)]}}return f.range=g(Bd),f.rangeRound=g(P2),f.unknown=function(p){return arguments.length?(m=p,f):m},function(p){return d=p,a=p(e),i=p(t),o=p(n),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),r=i<a?-1:1,f}}function h5(){var e=Ho(_y()(Sr));return e.copy=function(){return Ko(e,h5())},Di.apply(e,arguments)}function m5(){var e=E2(_y()).domain([.1,1,10]);return e.copy=function(){return Ko(e,m5()).base(e.base())},Di.apply(e,arguments)}function f5(){var e=O2(_y());return e.copy=function(){return Ko(e,f5()).constant(e.constant())},Di.apply(e,arguments)}function U2(){var e=D2(_y());return e.copy=function(){return Ko(e,U2()).exponent(e.exponent())},Di.apply(e,arguments)}function Hxe(){return U2.apply(null,arguments).exponent(.5)}const uT=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:km,scaleDiverging:h5,scaleDivergingLog:m5,scaleDivergingPow:U2,scaleDivergingSqrt:Hxe,scaleDivergingSymlog:f5,scaleIdentity:HL,scaleImplicit:Hw,scaleLinear:vv,scaleLog:GL,scaleOrdinal:S2,scalePoint:Vh,scalePow:M2,scaleQuantile:XL,scaleQuantize:JL,scaleRadial:QL,scaleSequential:l5,scaleSequentialLog:c5,scaleSequentialPow:q2,scaleSequentialQuantile:d5,scaleSequentialSqrt:Wxe,scaleSequentialSymlog:u5,scaleSqrt:Cve,scaleSymlog:YL,scaleThreshold:ZL,scaleTime:qxe,scaleUtc:Uxe,tickFormat:WL},Symbol.toStringTag,{value:"Module"}));var Kxe=Td;function Gxe(e,t,n){for(var r=-1,a=e.length;++r<a;){var i=e[r],o=t(i);if(o!=null&&(l===void 0?o===o&&!Kxe(o):n(o,l)))var l=o,c=i}return c}var Cy=Gxe;function Yxe(e,t){return e>t}var p5=Yxe,Qxe=Cy,Xxe=p5,Jxe=Fd;function Zxe(e){return e&&e.length?Qxe(e,Jxe,Xxe):void 0}var eye=Zxe;const mo=Ct(eye);function tye(e,t){return e<t}var g5=tye,nye=Cy,rye=g5,sye=Fd;function aye(e){return e&&e.length?nye(e,sye,rye):void 0}var iye=aye;const Py=Ct(iye);var oye=s2,lye=Wa,cye=SL,uye=Gr;function dye(e,t){var n=uye(e)?oye:cye;return n(e,lye(t))}var hye=dye,mye=wL,fye=hye;function pye(e,t){return mye(fye(e,t),1)}var gye=pye;const vye=Ct(gye);var xye=y2;function yye(e,t){return xye(e,t)}var jye=yye;const Yl=Ct(jye);var zd=1e9,bye={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},H2,tn=!0,ks="[DecimalError] ",El=ks+"Invalid argument: ",W2=ks+"Exponent out of range: ",Vd=Math.floor,il=Math.pow,wye=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,as,zn=1e7,Xt=7,v5=9007199254740991,bv=Vd(v5/Xt),$e={};$e.absoluteValue=$e.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};$e.comparedTo=$e.cmp=function(e){var t,n,r,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(r=i.d.length,a=e.d.length,t=0,n=r<a?r:a;t<n;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return r===a?0:r>a^i.s<0?1:-1};$e.decimalPlaces=$e.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Xt;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};$e.dividedBy=$e.div=function(e){return pi(this,new this.constructor(e))};$e.dividedToIntegerBy=$e.idiv=function(e){var t=this,n=t.constructor;return Lt(pi(t,new n(e),0,1),n.precision)};$e.equals=$e.eq=function(e){return!this.cmp(e)};$e.exponent=function(){return Sn(this)};$e.greaterThan=$e.gt=function(e){return this.cmp(e)>0};$e.greaterThanOrEqualTo=$e.gte=function(e){return this.cmp(e)>=0};$e.isInteger=$e.isint=function(){return this.e>this.d.length-2};$e.isNegative=$e.isneg=function(){return this.s<0};$e.isPositive=$e.ispos=function(){return this.s>0};$e.isZero=function(){return this.s===0};$e.lessThan=$e.lt=function(e){return this.cmp(e)<0};$e.lessThanOrEqualTo=$e.lte=function(e){return this.cmp(e)<1};$e.logarithm=$e.log=function(e){var t,n=this,r=n.constructor,a=r.precision,i=a+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(as))throw Error(ks+"NaN");if(n.s<1)throw Error(ks+(n.s?"NaN":"-Infinity"));return n.eq(as)?new r(0):(tn=!1,t=pi(Mm(n,i),Mm(e,i),i),tn=!0,Lt(t,a))};$e.minus=$e.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?j5(t,e):x5(t,(e.s=-e.s,e))};$e.modulo=$e.mod=function(e){var t,n=this,r=n.constructor,a=r.precision;if(e=new r(e),!e.s)throw Error(ks+"NaN");return n.s?(tn=!1,t=pi(n,e,0,1).times(e),tn=!0,n.minus(t)):Lt(new r(n),a)};$e.naturalExponential=$e.exp=function(){return y5(this)};$e.naturalLogarithm=$e.ln=function(){return Mm(this)};$e.negated=$e.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};$e.plus=$e.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?x5(t,e):j5(t,(e.s=-e.s,e))};$e.precision=$e.sd=function(e){var t,n,r,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(El+e);if(t=Sn(a)+1,r=a.d.length-1,n=r*Xt+1,r=a.d[r],r){for(;r%10==0;r/=10)n--;for(r=a.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};$e.squareRoot=$e.sqrt=function(){var e,t,n,r,a,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(ks+"NaN")}for(e=Sn(l),tn=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=Pa(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Vd((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new c(t)):r=new c(a.toString()),n=c.precision,a=o=n+3;;)if(i=r,r=i.plus(pi(l,i,o+2)).times(.5),Pa(i.d).slice(0,o)===(t=Pa(r.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(Lt(i,n+1,0),i.times(i).eq(l)){r=i;break}}else if(t!="9999")break;o+=4}return tn=!0,Lt(r,n)};$e.times=$e.mul=function(e){var t,n,r,a,i,o,l,c,u,d=this,h=d.constructor,m=d.d,f=(e=new h(e)).d;if(!d.s||!e.s)return new h(0);for(e.s*=d.s,n=d.e+e.e,c=m.length,u=f.length,c<u&&(i=m,m=f,f=i,o=c,c=u,u=o),i=[],o=c+u,r=o;r--;)i.push(0);for(r=u;--r>=0;){for(t=0,a=c+r;a>r;)l=i[a]+f[r]*m[a-r-1]+t,i[a--]=l%zn|0,t=l/zn|0;i[a]=(i[a]+t)%zn|0}for(;!i[--o];)i.pop();return t?++n:i.shift(),e.d=i,e.e=n,tn?Lt(e,h.precision):e};$e.toDecimalPlaces=$e.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(za(e,0,zd),t===void 0?t=r.rounding:za(t,0,8),Lt(n,e+Sn(n)+1,t))};$e.toExponential=function(e,t){var n,r=this,a=r.constructor;return e===void 0?n=Ql(r,!0):(za(e,0,zd),t===void 0?t=a.rounding:za(t,0,8),r=Lt(new a(r),e+1,t),n=Ql(r,!0,e+1)),n};$e.toFixed=function(e,t){var n,r,a=this,i=a.constructor;return e===void 0?Ql(a):(za(e,0,zd),t===void 0?t=i.rounding:za(t,0,8),r=Lt(new i(a),e+Sn(a)+1,t),n=Ql(r.abs(),!1,e+Sn(r)+1),a.isneg()&&!a.isZero()?"-"+n:n)};$e.toInteger=$e.toint=function(){var e=this,t=e.constructor;return Lt(new t(e),Sn(e)+1,t.rounding)};$e.toNumber=function(){return+this};$e.toPower=$e.pow=function(e){var t,n,r,a,i,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(as);if(l=new c(l),!l.s){if(e.s<1)throw Error(ks+"Infinity");return l}if(l.eq(as))return l;if(r=c.precision,e.eq(as))return Lt(l,r);if(t=e.e,n=e.d.length-1,o=t>=n,i=l.s,o){if((n=d<0?-d:d)<=v5){for(a=new c(as),t=Math.ceil(r/Xt+4),tn=!1;n%2&&(a=a.times(l),hT(a.d,t)),n=Vd(n/2),n!==0;)l=l.times(l),hT(l.d,t);return tn=!0,e.s<0?new c(as).div(a):Lt(a,r)}}else if(i<0)throw Error(ks+"NaN");return i=i<0&&e.d[Math.max(t,n)]&1?-1:1,l.s=1,tn=!1,a=e.times(Mm(l,r+u)),tn=!0,a=y5(a),a.s=i,a};$e.toPrecision=function(e,t){var n,r,a=this,i=a.constructor;return e===void 0?(n=Sn(a),r=Ql(a,n<=i.toExpNeg||n>=i.toExpPos)):(za(e,1,zd),t===void 0?t=i.rounding:za(t,0,8),a=Lt(new i(a),e,t),n=Sn(a),r=Ql(a,e<=n||n<=i.toExpNeg,e)),r};$e.toSignificantDigits=$e.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(za(e,1,zd),t===void 0?t=r.rounding:za(t,0,8)),Lt(new r(n),e,t)};$e.toString=$e.valueOf=$e.val=$e.toJSON=$e[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Sn(e),n=e.constructor;return Ql(e,t<=n.toExpNeg||t>=n.toExpPos)};function x5(e,t){var n,r,a,i,o,l,c,u,d=e.constructor,h=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),tn?Lt(t,h):t;if(c=e.d,u=t.d,o=e.e,a=t.e,c=c.slice(),i=o-a,i){for(i<0?(r=c,i=-i,l=u.length):(r=u,a=o,l=c.length),o=Math.ceil(h/Xt),l=o>l?o+1:l+1,i>l&&(i=l,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,r=u,u=c,c=r),n=0;i;)n=(c[--i]=c[i]+u[i]+n)/zn|0,c[i]%=zn;for(n&&(c.unshift(n),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,tn?Lt(t,h):t}function za(e,t,n){if(e!==~~e||e<t||e>n)throw Error(El+e)}function Pa(e){var t,n,r,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)r=e[t]+"",n=Xt-r.length,n&&(i+=Yi(n)),i+=r;o=e[t],r=o+"",n=Xt-r.length,n&&(i+=Yi(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var pi=function(){function e(r,a){var i,o=0,l=r.length;for(r=r.slice();l--;)i=r[l]*a+o,r[l]=i%zn|0,o=i/zn|0;return o&&r.unshift(o),r}function t(r,a,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(r[l]!=a[l]){c=r[l]>a[l]?1:-1;break}return c}function n(r,a,i){for(var o=0;i--;)r[i]-=o,o=r[i]<a[i]?1:0,r[i]=o*zn+r[i]-a[i];for(;!r[0]&&r.length>1;)r.shift()}return function(r,a,i,o){var l,c,u,d,h,m,f,g,p,v,x,y,j,w,N,_,S,C,A=r.constructor,T=r.s==a.s?1:-1,E=r.d,k=a.d;if(!r.s)return new A(r);if(!a.s)throw Error(ks+"Division by zero");for(c=r.e-a.e,S=k.length,N=E.length,f=new A(T),g=f.d=[],u=0;k[u]==(E[u]||0);)++u;if(k[u]>(E[u]||0)&&--c,i==null?y=i=A.precision:o?y=i+(Sn(r)-Sn(a))+1:y=i,y<0)return new A(0);if(y=y/Xt+2|0,u=0,S==1)for(d=0,k=k[0],y++;(u<N||d)&&y--;u++)j=d*zn+(E[u]||0),g[u]=j/k|0,d=j%k|0;else{for(d=zn/(k[0]+1)|0,d>1&&(k=e(k,d),E=e(E,d),S=k.length,N=E.length),w=S,p=E.slice(0,S),v=p.length;v<S;)p[v++]=0;C=k.slice(),C.unshift(0),_=k[0],k[1]>=zn/2&&++_;do d=0,l=t(k,p,S,v),l<0?(x=p[0],S!=v&&(x=x*zn+(p[1]||0)),d=x/_|0,d>1?(d>=zn&&(d=zn-1),h=e(k,d),m=h.length,v=p.length,l=t(h,p,m,v),l==1&&(d--,n(h,S<m?C:k,m))):(d==0&&(l=d=1),h=k.slice()),m=h.length,m<v&&h.unshift(0),n(p,h,v),l==-1&&(v=p.length,l=t(k,p,S,v),l<1&&(d++,n(p,S<v?C:k,v))),v=p.length):l===0&&(d++,p=[0]),g[u++]=d,l&&p[0]?p[v++]=E[w]||0:(p=[E[w]],v=1);while((w++<N||p[0]!==void 0)&&y--)}return g[0]||g.shift(),f.e=c,Lt(f,o?i+Sn(f)+1:i)}}();function y5(e,t){var n,r,a,i,o,l,c=0,u=0,d=e.constructor,h=d.precision;if(Sn(e)>16)throw Error(W2+Sn(e));if(!e.s)return new d(as);for(t==null?(tn=!1,l=h):l=t,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(r=Math.log(il(2,u))/Math.LN10*2+5|0,l+=r,n=a=i=new d(as),d.precision=l;;){if(a=Lt(a.times(e),l),n=n.times(++c),o=i.plus(pi(a,n,l)),Pa(o.d).slice(0,l)===Pa(i.d).slice(0,l)){for(;u--;)i=Lt(i.times(i),l);return d.precision=h,t==null?(tn=!0,Lt(i,h)):i}i=o}}function Sn(e){for(var t=e.e*Xt,n=e.d[0];n>=10;n/=10)t++;return t}function dj(e,t,n){if(t>e.LN10.sd())throw tn=!0,n&&(e.precision=n),Error(ks+"LN10 precision limit exceeded");return Lt(new e(e.LN10),t)}function Yi(e){for(var t="";e--;)t+="0";return t}function Mm(e,t){var n,r,a,i,o,l,c,u,d,h=1,m=10,f=e,g=f.d,p=f.constructor,v=p.precision;if(f.s<1)throw Error(ks+(f.s?"NaN":"-Infinity"));if(f.eq(as))return new p(0);if(t==null?(tn=!1,u=v):u=t,f.eq(10))return t==null&&(tn=!0),dj(p,u);if(u+=m,p.precision=u,n=Pa(g),r=n.charAt(0),i=Sn(f),Math.abs(i)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)f=f.times(e),n=Pa(f.d),r=n.charAt(0),h++;i=Sn(f),r>1?(f=new p("0."+n),i++):f=new p(r+"."+n.slice(1))}else return c=dj(p,u+2,v).times(i+""),f=Mm(new p(r+"."+n.slice(1)),u-m).plus(c),p.precision=v,t==null?(tn=!0,Lt(f,v)):f;for(l=o=f=pi(f.minus(as),f.plus(as),u),d=Lt(f.times(f),u),a=3;;){if(o=Lt(o.times(d),u),c=l.plus(pi(o,new p(a),u)),Pa(c.d).slice(0,u)===Pa(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(dj(p,u+2,v).times(i+""))),l=pi(l,new p(h),u),p.precision=v,t==null?(tn=!0,Lt(l,v)):l;l=c,a+=2}}function dT(e,t){var n,r,a;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(r,a),t){if(a-=r,n=n-r-1,e.e=Vd(n/Xt),e.d=[],r=(n+1)%Xt,n<0&&(r+=Xt),r<a){for(r&&e.d.push(+t.slice(0,r)),a-=Xt;r<a;)e.d.push(+t.slice(r,r+=Xt));t=t.slice(r),r=Xt-t.length}else r-=a;for(;r--;)t+="0";if(e.d.push(+t),tn&&(e.e>bv||e.e<-bv))throw Error(W2+n)}else e.s=0,e.e=0,e.d=[0];return e}function Lt(e,t,n){var r,a,i,o,l,c,u,d,h=e.d;for(o=1,i=h[0];i>=10;i/=10)o++;if(r=t-o,r<0)r+=Xt,a=t,u=h[d=0];else{if(d=Math.ceil((r+1)/Xt),i=h.length,d>=i)return e;for(u=i=h[d],o=1;i>=10;i/=10)o++;r%=Xt,a=r-Xt+o}if(n!==void 0&&(i=il(10,o-a-1),l=u/i%10|0,c=t<0||h[d+1]!==void 0||u%i,c=n<4?(l||c)&&(n==0||n==(e.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(r>0?a>0?u/il(10,o-a):0:h[d-1])%10&1||n==(e.s<0?8:7))),t<1||!h[0])return c?(i=Sn(e),h.length=1,t=t-i-1,h[0]=il(10,(Xt-t%Xt)%Xt),e.e=Vd(-t/Xt)||0):(h.length=1,h[0]=e.e=e.s=0),e;if(r==0?(h.length=d,i=1,d--):(h.length=d+1,i=il(10,Xt-r),h[d]=a>0?(u/il(10,o-a)%il(10,a)|0)*i:0),c)for(;;)if(d==0){(h[0]+=i)==zn&&(h[0]=1,++e.e);break}else{if(h[d]+=i,h[d]!=zn)break;h[d--]=0,i=1}for(r=h.length;h[--r]===0;)h.pop();if(tn&&(e.e>bv||e.e<-bv))throw Error(W2+Sn(e));return e}function j5(e,t){var n,r,a,i,o,l,c,u,d,h,m=e.constructor,f=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),tn?Lt(t,f):t;if(c=e.d,h=t.d,r=t.e,u=e.e,c=c.slice(),o=u-r,o){for(d=o<0,d?(n=c,o=-o,l=h.length):(n=h,r=u,l=c.length),a=Math.max(Math.ceil(f/Xt),l)+2,o>a&&(o=a,n.length=1),n.reverse(),a=o;a--;)n.push(0);n.reverse()}else{for(a=c.length,l=h.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=h[a]){d=c[a]<h[a];break}o=0}for(d&&(n=c,c=h,h=n,t.s=-t.s),l=c.length,a=h.length-l;a>0;--a)c[l++]=0;for(a=h.length;a>o;){if(c[--a]<h[a]){for(i=a;i&&c[--i]===0;)c[i]=zn-1;--c[i],c[a]+=zn}c[a]-=h[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(t.d=c,t.e=r,tn?Lt(t,f):t):new m(0)}function Ql(e,t,n){var r,a=Sn(e),i=Pa(e.d),o=i.length;return t?(n&&(r=n-o)>0?i=i.charAt(0)+"."+i.slice(1)+Yi(r):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Yi(-a-1)+i,n&&(r=n-o)>0&&(i+=Yi(r))):a>=o?(i+=Yi(a+1-o),n&&(r=n-a-1)>0&&(i=i+"."+Yi(r))):((r=a+1)<o&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-o)>0&&(a+1===o&&(i+="."),i+=Yi(r))),e.s<0?"-"+i:i}function hT(e,t){if(e.length>t)return e.length=t,!0}function b5(e){var t,n,r;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(El+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return dT(o,i.toString())}else if(typeof i!="string")throw Error(El+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,wye.test(i))dT(o,i);else throw Error(El+i)}if(a.prototype=$e,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=b5,a.config=a.set=Nye,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return a.config(e),a}function Nye(e){if(!e||typeof e!="object")throw Error(ks+"Object expected");var t,n,r,a=["precision",1,zd,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((r=e[n=a[t]])!==void 0)if(Vd(r)===r&&r>=a[t+1]&&r<=a[t+2])this[n]=r;else throw Error(El+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(El+n+": "+r);return this}var H2=b5(bye);as=new H2(1);const It=H2;function Sye(e){return Aye(e)||Pye(e)||Cye(e)||_ye()}function _ye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cye(e,t){if(e){if(typeof e=="string")return Qw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qw(e,t)}}function Pye(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Aye(e){if(Array.isArray(e))return Qw(e)}function Qw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var kye=function(t){return t},w5={"@@functional/placeholder":!0},N5=function(t){return t===w5},mT=function(t){return function n(){return arguments.length===0||arguments.length===1&&N5(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},Tye=function e(t,n){return t===1?n:mT(function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];var o=a.filter(function(l){return l!==w5}).length;return o>=t?n.apply(void 0,a):e(t-o,mT(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=a.map(function(h){return N5(h)?c.shift():h});return n.apply(void 0,Sye(d).concat(c))}))})},Ay=function(t){return Tye(t.length,t)},Xw=function(t,n){for(var r=[],a=t;a<n;++a)r[a-t]=a;return r},Eye=Ay(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),Oye=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return kye;var a=n.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},Jw=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},S5=function(t){var n=null,r=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n&&i.every(function(l,c){return l===n[c]})||(n=i,r=t.apply(void 0,i)),r}};function Dye(e){var t;return e===0?t=1:t=Math.floor(new It(e).abs().log(10).toNumber())+1,t}function Mye(e,t,n){for(var r=new It(e),a=0,i=[];r.lt(t)&&a<1e5;)i.push(r.toNumber()),r=r.add(n),a++;return i}var Iye=Ay(function(e,t,n){var r=+e,a=+t;return r+n*(a-r)}),$ye=Ay(function(e,t,n){var r=t-+e;return r=r||1/0,(n-e)/r}),Rye=Ay(function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});const ky={rangeStep:Mye,getDigitCount:Dye,interpolateNumber:Iye,uninterpolateNumber:$ye,uninterpolateTruncation:Rye};function Zw(e){return Bye(e)||Lye(e)||_5(e)||Fye()}function Fye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lye(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Bye(e){if(Array.isArray(e))return eN(e)}function Im(e,t){return qye(e)||Vye(e,t)||_5(e,t)||zye()}function zye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _5(e,t){if(e){if(typeof e=="string")return eN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eN(e,t)}}function eN(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vye(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,a=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(r=(l=o.next()).done)&&(n.push(l.value),!(t&&n.length===t));r=!0);}catch(c){a=!0,i=c}finally{try{!r&&o.return!=null&&o.return()}finally{if(a)throw i}}return n}}function qye(e){if(Array.isArray(e))return e}function C5(e){var t=Im(e,2),n=t[0],r=t[1],a=n,i=r;return n>r&&(a=r,i=n),[a,i]}function P5(e,t,n){if(e.lte(0))return new It(0);var r=ky.getDigitCount(e.toNumber()),a=new It(10).pow(r),i=e.div(a),o=r!==1?.05:.1,l=new It(Math.ceil(i.div(o).toNumber())).add(n).mul(o),c=l.mul(a);return t?c:new It(Math.ceil(c))}function Uye(e,t,n){var r=1,a=new It(e);if(!a.isint()&&n){var i=Math.abs(e);i<1?(r=new It(10).pow(ky.getDigitCount(e)-1),a=new It(Math.floor(a.div(r).toNumber())).mul(r)):i>1&&(a=new It(Math.floor(e)))}else e===0?a=new It(Math.floor((t-1)/2)):n||(a=new It(Math.floor(e)));var o=Math.floor((t-1)/2),l=Oye(Eye(function(c){return a.add(new It(c-o).mul(r)).toNumber()}),Xw);return l(0,t)}function A5(e,t,n,r){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new It(0),tickMin:new It(0),tickMax:new It(0)};var i=P5(new It(t).sub(e).div(n-1),r,a),o;e<=0&&t>=0?o=new It(0):(o=new It(e).add(t).div(2),o=o.sub(new It(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new It(t).sub(o).div(i).toNumber()),u=l+c+1;return u>n?A5(e,t,n,r,a+1):(u<n&&(c=t>0?c+(n-u):c,l=t>0?l:l+(n-u)),{step:i,tickMin:o.sub(new It(l).mul(i)),tickMax:o.add(new It(c).mul(i))})}function Wye(e){var t=Im(e,2),n=t[0],r=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=C5([n,r]),c=Im(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var h=d===1/0?[u].concat(Zw(Xw(0,a-1).map(function(){return 1/0}))):[].concat(Zw(Xw(0,a-1).map(function(){return-1/0})),[d]);return n>r?Jw(h):h}if(u===d)return Uye(u,a,i);var m=A5(u,d,o,i),f=m.step,g=m.tickMin,p=m.tickMax,v=ky.rangeStep(g,p.add(new It(.1).mul(f)),f);return n>r?Jw(v):v}function Hye(e,t){var n=Im(e,2),r=n[0],a=n[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=C5([r,a]),l=Im(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[r,a];if(c===u)return[c];var d=Math.max(t,2),h=P5(new It(u).sub(c).div(d-1),i,0),m=[].concat(Zw(ky.rangeStep(new It(c),new It(u).sub(new It(.99).mul(h)),h)),[u]);return r>a?Jw(m):m}var Kye=S5(Wye),Gye=S5(Hye),Yye="Invariant failed";function Xl(e,t){throw new Error(Yye)}var Qye=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Gu(e){"@babel/helpers - typeof";return Gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gu(e)}function wv(){return wv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wv.apply(this,arguments)}function Xye(e,t){return t0e(e)||e0e(e,t)||Zye(e,t)||Jye()}function Jye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zye(e,t){if(e){if(typeof e=="string")return fT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fT(e,t)}}function fT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function e0e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function t0e(e){if(Array.isArray(e))return e}function n0e(e,t){if(e==null)return{};var n=r0e(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function r0e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function s0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a0e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,E5(r.key),r)}}function i0e(e,t,n){return t&&a0e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function o0e(e,t,n){return t=Nv(t),l0e(e,k5()?Reflect.construct(t,n||[],Nv(e).constructor):t.apply(e,n))}function l0e(e,t){if(t&&(Gu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return c0e(e)}function c0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(k5=function(){return!!e})()}function Nv(e){return Nv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Nv(e)}function u0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tN(e,t)}function tN(e,t){return tN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},tN(e,t)}function T5(e,t,n){return t=E5(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E5(e){var t=d0e(e,"string");return Gu(t)=="symbol"?t:t+""}function d0e(e,t){if(Gu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Gu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Df=function(e){function t(){return s0e(this,t),o0e(this,t,arguments)}return u0e(t,e),i0e(t,[{key:"render",value:function(){var r=this.props,a=r.offset,i=r.layout,o=r.width,l=r.dataKey,c=r.data,u=r.dataPointFormatter,d=r.xAxis,h=r.yAxis,m=n0e(r,Qye),f=Le(m,!1);this.props.direction==="x"&&d.type!=="number"&&Xl();var g=c.map(function(p){var v=u(p,l),x=v.x,y=v.y,j=v.value,w=v.errorVal;if(!w)return null;var N=[],_,S;if(Array.isArray(w)){var C=Xye(w,2);_=C[0],S=C[1]}else _=S=w;if(i==="vertical"){var A=d.scale,T=y+a,E=T+o,k=T-o,R=A(j-_),I=A(j+S);N.push({x1:I,y1:E,x2:I,y2:k}),N.push({x1:R,y1:T,x2:I,y2:T}),N.push({x1:R,y1:E,x2:R,y2:k})}else if(i==="horizontal"){var W=h.scale,V=x+a,q=V-o,P=V+o,O=W(j-_),B=W(j+S);N.push({x1:q,y1:B,x2:P,y2:B}),N.push({x1:V,y1:O,x2:V,y2:B}),N.push({x1:q,y1:O,x2:P,y2:O})}return M.createElement(ft,wv({className:"recharts-errorBar",key:"bar-".concat(N.map(function(U){return"".concat(U.x1,"-").concat(U.x2,"-").concat(U.y1,"-").concat(U.y2)}))},f),N.map(function(U){return M.createElement("line",wv({},U,{key:"line-".concat(U.x1,"-").concat(U.x2,"-").concat(U.y1,"-").concat(U.y2)}))}))});return M.createElement(ft,{className:"recharts-errorBars"},g)}}])}(M.Component);T5(Df,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});T5(Df,"displayName","ErrorBar");function $m(e){"@babel/helpers - typeof";return $m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$m(e)}function pT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Xo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pT(Object(n),!0).forEach(function(r){h0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function h0e(e,t,n){return t=m0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m0e(e){var t=f0e(e,"string");return $m(t)=="symbol"?t:t+""}function f0e(e,t){if($m(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if($m(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var O5=function(t){var n=t.children,r=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,o=ns(n,lu);if(!o)return null;var l=lu.defaultProps,c=l!==void 0?Xo(Xo({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(r||[]).reduce(function(d,h){var m=h.item,f=h.props,g=f.sectors||f.data||[];return d.concat(g.map(function(p){return{type:o.props.iconType||m.props.legendType,value:p.name,color:p.fill,payload:p}}))},[]):u=(r||[]).map(function(d){var h=d.item,m=h.type.defaultProps,f=m!==void 0?Xo(Xo({},m),h.props):{},g=f.dataKey,p=f.name,v=f.legendType,x=f.hide;return{inactive:x,dataKey:g,type:c.iconType||v||"square",color:K2(h),value:p||g,payload:f}}),Xo(Xo(Xo({},c),lu.getWithHeight(o,a)),{},{payload:u,item:o})};function Rm(e){"@babel/helpers - typeof";return Rm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rm(e)}function gT(e){return x0e(e)||v0e(e)||g0e(e)||p0e()}function p0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g0e(e,t){if(e){if(typeof e=="string")return nN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nN(e,t)}}function v0e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function x0e(e){if(Array.isArray(e))return nN(e)}function nN(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function vT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function hn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vT(Object(n),!0).forEach(function(r){uu(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uu(e,t,n){return t=y0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y0e(e){var t=j0e(e,"string");return Rm(t)=="symbol"?t:t+""}function j0e(e,t){if(Rm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Rm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pn(e,t,n){return Ye(e)||Ye(t)?n:$n(t)?cs(e,t,n):He(t)?t(e):n}function qh(e,t,n,r){var a=vye(e,function(l){return pn(l,t)});if(n==="number"){var i=a.filter(function(l){return xe(l)||parseFloat(l)});return i.length?[Py(i),mo(i)]:[1/0,-1/0]}var o=r?a.filter(function(l){return!Ye(l)}):a;return o.map(function(l){return $n(l)||l instanceof Date?l:""})}var b0e=function(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,u=0;u<l;u++){var d=u>0?a[u-1].coordinate:a[l-1].coordinate,h=a[u].coordinate,m=u>=l-1?a[0].coordinate:a[u+1].coordinate,f=void 0;if(wr(h-d)!==wr(m-h)){var g=[];if(wr(m-h)===wr(c[1]-c[0])){f=m;var p=h+c[1]-c[0];g[0]=Math.min(p,(p+d)/2),g[1]=Math.max(p,(p+d)/2)}else{f=d;var v=m+c[1]-c[0];g[0]=Math.min(h,(v+h)/2),g[1]=Math.max(h,(v+h)/2)}var x=[Math.min(h,(f+h)/2),Math.max(h,(f+h)/2)];if(t>x[0]&&t<=x[1]||t>=g[0]&&t<=g[1]){o=a[u].index;break}}else{var y=Math.min(d,m),j=Math.max(d,m);if(t>(y+h)/2&&t<=(j+h)/2){o=a[u].index;break}}}else for(var w=0;w<l;w++)if(w===0&&t<=(r[w].coordinate+r[w+1].coordinate)/2||w>0&&w<l-1&&t>(r[w].coordinate+r[w-1].coordinate)/2&&t<=(r[w].coordinate+r[w+1].coordinate)/2||w===l-1&&t>(r[w].coordinate+r[w-1].coordinate)/2){o=r[w].index;break}return o},K2=function(t){var n,r=t,a=r.type.displayName,i=(n=t.type)!==null&&n!==void 0&&n.defaultProps?hn(hn({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},w0e=function(t){var n=t.barSize,r=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},l=Object.keys(i),c=0,u=l.length;c<u;c++)for(var d=i[l[c]].stackGroups,h=Object.keys(d),m=0,f=h.length;m<f;m++){var g=d[h[m]],p=g.items,v=g.cateAxisId,x=p.filter(function(S){return fi(S.type).indexOf("Bar")>=0});if(x&&x.length){var y=x[0].type.defaultProps,j=y!==void 0?hn(hn({},y),x[0].props):x[0].props,w=j.barSize,N=j[v];o[N]||(o[N]=[]);var _=Ye(w)?n:w;o[N].push({item:x[0],stackList:x.slice(1),barSize:Ye(_)?void 0:Nr(_,r,0)})}}return o},N0e=function(t){var n=t.barGap,r=t.barCategoryGap,a=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var u=Nr(n,a,0,!0),d,h=[];if(o[0].barSize===+o[0].barSize){var m=!1,f=a/c,g=o.reduce(function(w,N){return w+N.barSize||0},0);g+=(c-1)*u,g>=a&&(g-=(c-1)*u,u=0),g>=a&&f>0&&(m=!0,f*=.9,g=c*f);var p=(a-g)/2>>0,v={offset:p-u,size:0};d=o.reduce(function(w,N){var _={item:N.item,position:{offset:v.offset+v.size+u,size:m?f:N.barSize}},S=[].concat(gT(w),[_]);return v=S[S.length-1].position,N.stackList&&N.stackList.length&&N.stackList.forEach(function(C){S.push({item:C,position:v})}),S},h)}else{var x=Nr(r,a,0,!0);a-2*x-(c-1)*u<=0&&(u=0);var y=(a-2*x-(c-1)*u)/c;y>1&&(y>>=0);var j=l===+l?Math.min(y,l):y;d=o.reduce(function(w,N,_){var S=[].concat(gT(w),[{item:N.item,position:{offset:x+(y+u)*_+(y-j)/2,size:j}}]);return N.stackList&&N.stackList.length&&N.stackList.forEach(function(C){S.push({item:C,position:S[S.length-1].position})}),S},h)}return d},S0e=function(t,n,r,a){var i=r.children,o=r.width,l=r.margin,c=o-(l.left||0)-(l.right||0),u=O5({children:i,legendWidth:c});if(u){var d=a||{},h=d.width,m=d.height,f=u.align,g=u.verticalAlign,p=u.layout;if((p==="vertical"||p==="horizontal"&&g==="middle")&&f!=="center"&&xe(t[f]))return hn(hn({},t),{},uu({},f,t[f]+(h||0)));if((p==="horizontal"||p==="vertical"&&f==="center")&&g!=="middle"&&xe(t[g]))return hn(hn({},t),{},uu({},g,t[g]+(m||0)))}return t},_0e=function(t,n,r){return Ye(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},D5=function(t,n,r,a,i){var o=n.props.children,l=us(o,Df).filter(function(u){return _0e(a,i,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var h=pn(d,r);if(Ye(h))return u;var m=Array.isArray(h)?[Py(h),mo(h)]:[h,h],f=c.reduce(function(g,p){var v=pn(d,p,0),x=m[0]-Math.abs(Array.isArray(v)?v[0]:v),y=m[1]+Math.abs(Array.isArray(v)?v[1]:v);return[Math.min(x,g[0]),Math.max(y,g[1])]},[1/0,-1/0]);return[Math.min(f[0],u[0]),Math.max(f[1],u[1])]},[1/0,-1/0])}return null},C0e=function(t,n,r,a,i){var o=n.map(function(l){return D5(t,l,r,i,a)}).filter(function(l){return!Ye(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},M5=function(t,n,r,a,i){var o=n.map(function(c){var u=c.props.dataKey;return r==="number"&&u&&D5(t,c,u,a)||qh(t,u,r,i)});if(r==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var d=0,h=u.length;d<h;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},I5=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},$5=function(t,n,r,a){if(a)return t.map(function(c){return c.coordinate});var i,o,l=t.map(function(c){return c.coordinate===n&&(i=!0),c.coordinate===r&&(o=!0),c.coordinate});return i||l.push(n),o||l.push(r),l},di=function(t,n,r){if(!t)return null;var a=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(n||r)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?wr(l[0]-l[1])*2*u:u,n&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(h){var m=i?i.indexOf(h):h;return{coordinate:a(m)+u,value:h,offset:u}});return d.filter(function(h){return!Id(h.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(h,m){return{coordinate:a(h)+u,value:h,index:m,offset:u}}):a.ticks&&!r?a.ticks(t.tickCount).map(function(h){return{coordinate:a(h)+u,value:h,offset:u}}):a.domain().map(function(h,m){return{coordinate:a(h)+u,value:i?i[h]:h,index:m,offset:u}})},hj=new WeakMap,Op=function(t,n){if(typeof n!="function")return t;hj.has(t)||hj.set(t,new WeakMap);var r=hj.get(t);if(r.has(n))return r.get(n);var a=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,a),a},R5=function(t,n,r){var a=t.scale,i=t.type,o=t.layout,l=t.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:km(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:vv(),realScaleType:"linear"}:i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Vh(),realScaleType:"point"}:i==="category"?{scale:km(),realScaleType:"band"}:{scale:vv(),realScaleType:"linear"};if(Hl(a)){var c="scale".concat(my(a));return{scale:(uT[c]||Vh)(),realScaleType:uT[c]?c:"point"}}return He(a)?{scale:a}:{scale:Vh(),realScaleType:"point"}},xT=1e-4,F5=function(t){var n=t.domain();if(!(!n||n.length<=2)){var r=n.length,a=t.range(),i=Math.min(a[0],a[1])-xT,o=Math.max(a[0],a[1])+xT,l=t(n[0]),c=t(n[r-1]);(l<i||l>o||c<i||c>o)&&t.domain([n[0],n[r-1]])}},P0e=function(t,n){if(!t)return null;for(var r=0,a=t.length;r<a;r++)if(t[r].item===n)return t[r].position;return null},A0e=function(t,n){if(!n||n.length!==2||!xe(n[0])||!xe(n[1]))return t;var r=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]),i=[t[0],t[1]];return(!xe(t[0])||t[0]<r)&&(i[0]=r),(!xe(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<r&&(i[1]=r),i},k0e=function(t){var n=t.length;if(!(n<=0))for(var r=0,a=t[0].length;r<a;++r)for(var i=0,o=0,l=0;l<n;++l){var c=Id(t[l][r][1])?t[l][r][0]:t[l][r][1];c>=0?(t[l][r][0]=i,t[l][r][1]=i+c,i=t[l][r][1]):(t[l][r][0]=o,t[l][r][1]=o+c,o=t[l][r][1])}},T0e=function(t){var n=t.length;if(!(n<=0))for(var r=0,a=t[0].length;r<a;++r)for(var i=0,o=0;o<n;++o){var l=Id(t[o][r][1])?t[o][r][0]:t[o][r][1];l>=0?(t[o][r][0]=i,t[o][r][1]=i+l,i=t[o][r][1]):(t[o][r][0]=0,t[o][r][1]=0)}},E0e={sign:k0e,expand:Qie,none:Bu,silhouette:Xie,wiggle:Jie,positive:T0e},O0e=function(t,n,r){var a=n.map(function(l){return l.props.dataKey}),i=E0e[r],o=Yie().keys(a).value(function(l,c){return+pn(l,c,0)}).order(Pw).offset(i);return o(t)},D0e=function(t,n,r,a,i,o){if(!t)return null;var l=o?n.reverse():n,c={},u=l.reduce(function(h,m){var f,g=(f=m.type)!==null&&f!==void 0&&f.defaultProps?hn(hn({},m.type.defaultProps),m.props):m.props,p=g.stackId,v=g.hide;if(v)return h;var x=g[r],y=h[x]||{hasStack:!1,stackGroups:{}};if($n(p)){var j=y.stackGroups[p]||{numericAxisId:r,cateAxisId:a,items:[]};j.items.push(m),y.hasStack=!0,y.stackGroups[p]=j}else y.stackGroups[uc("_stackId_")]={numericAxisId:r,cateAxisId:a,items:[m]};return hn(hn({},h),{},uu({},x,y))},c),d={};return Object.keys(u).reduce(function(h,m){var f=u[m];if(f.hasStack){var g={};f.stackGroups=Object.keys(f.stackGroups).reduce(function(p,v){var x=f.stackGroups[v];return hn(hn({},p),{},uu({},v,{numericAxisId:r,cateAxisId:a,items:x.items,stackedData:O0e(t,x.items,i)}))},g)}return hn(hn({},h),{},uu({},m,f))},d)},L5=function(t,n){var r=n.realScaleType,a=n.type,i=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=r||n.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=Kye(u,i,l);return t.domain([Py(d),mo(d)]),{niceTicks:d}}if(i&&a==="number"){var h=t.domain(),m=Gye(h,i,l);return{niceTicks:m}}return null};function Sv(e){var t=e.axis,n=e.ticks,r=e.bandSize,a=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Ye(a[t.dataKey])){var l=Qg(n,"value",a[t.dataKey]);if(l)return l.coordinate+r/2}return n[i]?n[i].coordinate+r/2:null}var c=pn(a,Ye(o)?t.dataKey:o);return Ye(c)?null:t.scale(c)}var yT=function(t){var n=t.axis,r=t.ticks,a=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(n.type==="category")return r[l]?r[l].coordinate+a:null;var c=pn(o,n.dataKey,n.domain[l]);return Ye(c)?null:n.scale(c)-i/2+a},M0e=function(t){var n=t.numericAxis,r=n.scale.domain();if(n.type==="number"){var a=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return a<=0&&i>=0?0:i<0?i:a}return r[0]},I0e=function(t,n){var r,a=(r=t.type)!==null&&r!==void 0&&r.defaultProps?hn(hn({},t.type.defaultProps),t.props):t.props,i=a.stackId;if($n(i)){var o=n[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},$0e=function(t){return t.reduce(function(n,r){return[Py(r.concat([n[0]]).filter(xe)),mo(r.concat([n[1]]).filter(xe))]},[1/0,-1/0])},B5=function(t,n,r){return Object.keys(t).reduce(function(a,i){var o=t[i],l=o.stackedData,c=l.reduce(function(u,d){var h=$0e(d.slice(n,r+1));return[Math.min(u[0],h[0]),Math.max(u[1],h[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},jT=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,bT=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,rN=function(t,n,r){if(He(t))return t(n,r);if(!Array.isArray(t))return n;var a=[];if(xe(t[0]))a[0]=r?t[0]:Math.min(t[0],n[0]);else if(jT.test(t[0])){var i=+jT.exec(t[0])[1];a[0]=n[0]-i}else He(t[0])?a[0]=t[0](n[0]):a[0]=n[0];if(xe(t[1]))a[1]=r?t[1]:Math.max(t[1],n[1]);else if(bT.test(t[1])){var o=+bT.exec(t[1])[1];a[1]=n[1]+o}else He(t[1])?a[1]=t[1](n[1]):a[1]=n[1];return a},_v=function(t,n,r){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!r||a>0)return a}if(t&&n&&n.length>=2){for(var i=b2(n,function(h){return h.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var u=i[l],d=i[l-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},wT=function(t,n,r){return!t||!t.length||Yl(t,cs(r,"type.defaultProps.domain"))?n:t},z5=function(t,n){var r=t.type.defaultProps?hn(hn({},t.type.defaultProps),t.props):t.props,a=r.dataKey,i=r.name,o=r.unit,l=r.formatter,c=r.tooltipType,u=r.chartType,d=r.hide;return hn(hn({},Le(t,!1)),{},{dataKey:a,unit:o,formatter:l,name:i||a,color:K2(t),value:pn(n,a),type:c,payload:n,chartType:u,hide:d})};function Fm(e){"@babel/helpers - typeof";return Fm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fm(e)}function NT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ei(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NT(Object(n),!0).forEach(function(r){V5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function V5(e,t,n){return t=R0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R0e(e){var t=F0e(e,"string");return Fm(t)=="symbol"?t:t+""}function F0e(e,t){if(Fm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Fm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function L0e(e,t){return q0e(e)||V0e(e,t)||z0e(e,t)||B0e()}function B0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z0e(e,t){if(e){if(typeof e=="string")return ST(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ST(e,t)}}function ST(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function V0e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function q0e(e){if(Array.isArray(e))return e}var Cv=Math.PI/180,U0e=function(t){return t*180/Math.PI},Ht=function(t,n,r,a){return{x:t+Math.cos(-Cv*a)*r,y:n+Math.sin(-Cv*a)*r}},q5=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},W0e=function(t,n,r,a,i){var o=t.width,l=t.height,c=t.startAngle,u=t.endAngle,d=Nr(t.cx,o,o/2),h=Nr(t.cy,l,l/2),m=q5(o,l,r),f=Nr(t.innerRadius,m,0),g=Nr(t.outerRadius,m,m*.8),p=Object.keys(n);return p.reduce(function(v,x){var y=n[x],j=y.domain,w=y.reversed,N;if(Ye(y.range))a==="angleAxis"?N=[c,u]:a==="radiusAxis"&&(N=[f,g]),w&&(N=[N[1],N[0]]);else{N=y.range;var _=N,S=L0e(_,2);c=S[0],u=S[1]}var C=R5(y,i),A=C.realScaleType,T=C.scale;T.domain(j).range(N),F5(T);var E=L5(T,ei(ei({},y),{},{realScaleType:A})),k=ei(ei(ei({},y),E),{},{range:N,radius:g,realScaleType:A,scale:T,cx:d,cy:h,innerRadius:f,outerRadius:g,startAngle:c,endAngle:u});return ei(ei({},v),{},V5({},x,k))},{})},H0e=function(t,n){var r=t.x,a=t.y,i=n.x,o=n.y;return Math.sqrt(Math.pow(r-i,2)+Math.pow(a-o,2))},K0e=function(t,n){var r=t.x,a=t.y,i=n.cx,o=n.cy,l=H0e({x:r,y:a},{x:i,y:o});if(l<=0)return{radius:l};var c=(r-i)/l,u=Math.acos(c);return a>o&&(u=2*Math.PI-u),{radius:l,angle:U0e(u),angleInRadian:u}},G0e=function(t){var n=t.startAngle,r=t.endAngle,a=Math.floor(n/360),i=Math.floor(r/360),o=Math.min(a,i);return{startAngle:n-o*360,endAngle:r-o*360}},Y0e=function(t,n){var r=n.startAngle,a=n.endAngle,i=Math.floor(r/360),o=Math.floor(a/360),l=Math.min(i,o);return t+l*360},_T=function(t,n){var r=t.x,a=t.y,i=K0e({x:r,y:a},n),o=i.radius,l=i.angle,c=n.innerRadius,u=n.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var d=G0e(n),h=d.startAngle,m=d.endAngle,f=l,g;if(h<=m){for(;f>m;)f-=360;for(;f<h;)f+=360;g=f>=h&&f<=m}else{for(;f>h;)f-=360;for(;f<m;)f+=360;g=f>=m&&f<=h}return g?ei(ei({},n),{},{radius:o,angle:Y0e(f,n)}):null},U5=function(t){return!b.isValidElement(t)&&!He(t)&&typeof t!="boolean"?t.className:""};function Lm(e){"@babel/helpers - typeof";return Lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lm(e)}var Q0e=["offset"];function X0e(e){return tje(e)||eje(e)||Z0e(e)||J0e()}function J0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z0e(e,t){if(e){if(typeof e=="string")return sN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sN(e,t)}}function eje(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function tje(e){if(Array.isArray(e))return sN(e)}function sN(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nje(e,t){if(e==null)return{};var n=rje(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function rje(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function CT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function An(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CT(Object(n),!0).forEach(function(r){sje(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function sje(e,t,n){return t=aje(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aje(e){var t=ije(e,"string");return Lm(t)=="symbol"?t:t+""}function ije(e,t){if(Lm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Lm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bm(){return Bm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bm.apply(this,arguments)}var oje=function(t){var n=t.value,r=t.formatter,a=Ye(t.children)?n:t.children;return He(r)?r(a):a},lje=function(t,n){var r=wr(n-t),a=Math.min(Math.abs(n-t),360);return r*a},cje=function(t,n,r){var a=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,u=c.cx,d=c.cy,h=c.innerRadius,m=c.outerRadius,f=c.startAngle,g=c.endAngle,p=c.clockWise,v=(h+m)/2,x=lje(f,g),y=x>=0?1:-1,j,w;a==="insideStart"?(j=f+y*o,w=p):a==="insideEnd"?(j=g-y*o,w=!p):a==="end"&&(j=g+y*o,w=p),w=x<=0?w:!w;var N=Ht(u,d,v,j),_=Ht(u,d,v,j+(w?1:-1)*359),S="M".concat(N.x,",").concat(N.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(w?0:1,`,
    `).concat(_.x,",").concat(_.y),C=Ye(t.id)?uc("recharts-radial-line-"):t.id;return M.createElement("text",Bm({},r,{dominantBaseline:"central",className:Ze("recharts-radial-bar-label",l)}),M.createElement("defs",null,M.createElement("path",{id:C,d:S})),M.createElement("textPath",{xlinkHref:"#".concat(C)},n))},uje=function(t){var n=t.viewBox,r=t.offset,a=t.position,i=n,o=i.cx,l=i.cy,c=i.innerRadius,u=i.outerRadius,d=i.startAngle,h=i.endAngle,m=(d+h)/2;if(a==="outside"){var f=Ht(o,l,u+r,m),g=f.x,p=f.y;return{x:g,y:p,textAnchor:g>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var v=(c+u)/2,x=Ht(o,l,v,m),y=x.x,j=x.y;return{x:y,y:j,textAnchor:"middle",verticalAnchor:"middle"}},dje=function(t){var n=t.viewBox,r=t.parentViewBox,a=t.offset,i=t.position,o=n,l=o.x,c=o.y,u=o.width,d=o.height,h=d>=0?1:-1,m=h*a,f=h>0?"end":"start",g=h>0?"start":"end",p=u>=0?1:-1,v=p*a,x=p>0?"end":"start",y=p>0?"start":"end";if(i==="top"){var j={x:l+u/2,y:c-h*a,textAnchor:"middle",verticalAnchor:f};return An(An({},j),r?{height:Math.max(c-r.y,0),width:u}:{})}if(i==="bottom"){var w={x:l+u/2,y:c+d+m,textAnchor:"middle",verticalAnchor:g};return An(An({},w),r?{height:Math.max(r.y+r.height-(c+d),0),width:u}:{})}if(i==="left"){var N={x:l-v,y:c+d/2,textAnchor:x,verticalAnchor:"middle"};return An(An({},N),r?{width:Math.max(N.x-r.x,0),height:d}:{})}if(i==="right"){var _={x:l+u+v,y:c+d/2,textAnchor:y,verticalAnchor:"middle"};return An(An({},_),r?{width:Math.max(r.x+r.width-_.x,0),height:d}:{})}var S=r?{width:u,height:d}:{};return i==="insideLeft"?An({x:l+v,y:c+d/2,textAnchor:y,verticalAnchor:"middle"},S):i==="insideRight"?An({x:l+u-v,y:c+d/2,textAnchor:x,verticalAnchor:"middle"},S):i==="insideTop"?An({x:l+u/2,y:c+m,textAnchor:"middle",verticalAnchor:g},S):i==="insideBottom"?An({x:l+u/2,y:c+d-m,textAnchor:"middle",verticalAnchor:f},S):i==="insideTopLeft"?An({x:l+v,y:c+m,textAnchor:y,verticalAnchor:g},S):i==="insideTopRight"?An({x:l+u-v,y:c+m,textAnchor:x,verticalAnchor:g},S):i==="insideBottomLeft"?An({x:l+v,y:c+d-m,textAnchor:y,verticalAnchor:f},S):i==="insideBottomRight"?An({x:l+u-v,y:c+d-m,textAnchor:x,verticalAnchor:f},S):Ed(i)&&(xe(i.x)||fl(i.x))&&(xe(i.y)||fl(i.y))?An({x:l+Nr(i.x,u),y:c+Nr(i.y,d),textAnchor:"end",verticalAnchor:"end"},S):An({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},S)},hje=function(t){return"cx"in t&&xe(t.cx)};function Wn(e){var t=e.offset,n=t===void 0?5:t,r=nje(e,Q0e),a=An({offset:n},r),i=a.viewBox,o=a.position,l=a.value,c=a.children,u=a.content,d=a.className,h=d===void 0?"":d,m=a.textBreakAll;if(!i||Ye(l)&&Ye(c)&&!b.isValidElement(u)&&!He(u))return null;if(b.isValidElement(u))return b.cloneElement(u,a);var f;if(He(u)){if(f=b.createElement(u,a),b.isValidElement(f))return f}else f=oje(a);var g=hje(i),p=Le(a,!0);if(g&&(o==="insideStart"||o==="insideEnd"||o==="end"))return cje(a,f,p);var v=g?uje(a):dje(a);return M.createElement(Gl,Bm({className:Ze("recharts-label",h)},p,v,{breakAll:m}),f)}Wn.displayName="Label";var W5=function(t){var n=t.cx,r=t.cy,a=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,d=t.outerRadius,h=t.x,m=t.y,f=t.top,g=t.left,p=t.width,v=t.height,x=t.clockWise,y=t.labelViewBox;if(y)return y;if(xe(p)&&xe(v)){if(xe(h)&&xe(m))return{x:h,y:m,width:p,height:v};if(xe(f)&&xe(g))return{x:f,y:g,width:p,height:v}}return xe(h)&&xe(m)?{x:h,y:m,width:0,height:0}:xe(n)&&xe(r)?{cx:n,cy:r,startAngle:i||a||0,endAngle:o||a||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:x}:t.viewBox?t.viewBox:{}},mje=function(t,n){return t?t===!0?M.createElement(Wn,{key:"label-implicit",viewBox:n}):$n(t)?M.createElement(Wn,{key:"label-implicit",viewBox:n,value:t}):b.isValidElement(t)?t.type===Wn?b.cloneElement(t,{key:"label-implicit",viewBox:n}):M.createElement(Wn,{key:"label-implicit",content:t,viewBox:n}):He(t)?M.createElement(Wn,{key:"label-implicit",content:t,viewBox:n}):Ed(t)?M.createElement(Wn,Bm({viewBox:n},t,{key:"label-implicit"})):null:null},fje=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var a=t.children,i=W5(t),o=us(a,Wn).map(function(c,u){return b.cloneElement(c,{viewBox:n||i,key:"label-".concat(u)})});if(!r)return o;var l=mje(t.label,n||i);return[l].concat(X0e(o))};Wn.parseViewBox=W5;Wn.renderCallByParent=fje;function pje(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var gje=pje;const vje=Ct(gje);function zm(e){"@babel/helpers - typeof";return zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zm(e)}var xje=["valueAccessor"],yje=["data","dataKey","clockWise","id","textBreakAll"];function jje(e){return Sje(e)||Nje(e)||wje(e)||bje()}function bje(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wje(e,t){if(e){if(typeof e=="string")return aN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aN(e,t)}}function Nje(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Sje(e){if(Array.isArray(e))return aN(e)}function aN(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pv(){return Pv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pv.apply(this,arguments)}function PT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function AT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?PT(Object(n),!0).forEach(function(r){_je(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _je(e,t,n){return t=Cje(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cje(e){var t=Pje(e,"string");return zm(t)=="symbol"?t:t+""}function Pje(e,t){if(zm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(zm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kT(e,t){if(e==null)return{};var n=Aje(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Aje(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var kje=function(t){return Array.isArray(t.value)?vje(t.value):t.value};function Ra(e){var t=e.valueAccessor,n=t===void 0?kje:t,r=kT(e,xje),a=r.data,i=r.dataKey,o=r.clockWise,l=r.id,c=r.textBreakAll,u=kT(r,yje);return!a||!a.length?null:M.createElement(ft,{className:"recharts-label-list"},a.map(function(d,h){var m=Ye(i)?n(d,h):pn(d&&d.payload,i),f=Ye(l)?{}:{id:"".concat(l,"-").concat(h)};return M.createElement(Wn,Pv({},Le(d,!0),u,f,{parentViewBox:d.parentViewBox,value:m,textBreakAll:c,viewBox:Wn.parseViewBox(Ye(o)?d:AT(AT({},d),{},{clockWise:o})),key:"label-".concat(h),index:h}))}))}Ra.displayName="LabelList";function Tje(e,t){return e?e===!0?M.createElement(Ra,{key:"labelList-implicit",data:t}):M.isValidElement(e)||He(e)?M.createElement(Ra,{key:"labelList-implicit",data:t,content:e}):Ed(e)?M.createElement(Ra,Pv({data:t},e,{key:"labelList-implicit"})):null:null}function Eje(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var r=e.children,a=us(r,Ra).map(function(o,l){return b.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!n)return a;var i=Tje(e.label,t);return[i].concat(jje(a))}Ra.renderCallByParent=Eje;function Vm(e){"@babel/helpers - typeof";return Vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vm(e)}function iN(){return iN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iN.apply(this,arguments)}function TT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ET(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TT(Object(n),!0).forEach(function(r){Oje(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Oje(e,t,n){return t=Dje(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dje(e){var t=Mje(e,"string");return Vm(t)=="symbol"?t:t+""}function Mje(e,t){if(Vm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Vm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ije=function(t,n){var r=wr(n-t),a=Math.min(Math.abs(n-t),359.999);return r*a},Dp=function(t){var n=t.cx,r=t.cy,a=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,d=c*(l?1:-1)+a,h=Math.asin(c/d)/Cv,m=u?i:i+o*h,f=Ht(n,r,d,m),g=Ht(n,r,a,m),p=u?i-o*h:i,v=Ht(n,r,d*Math.cos(h*Cv),p);return{center:f,circleTangency:g,lineTangency:v,theta:h}},H5=function(t){var n=t.cx,r=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=Ije(o,l),u=o+c,d=Ht(n,r,i,o),h=Ht(n,r,i,u),m="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(a>0){var f=Ht(n,r,a,o),g=Ht(n,r,a,u);m+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(f.x,",").concat(f.y," Z")}else m+="L ".concat(n,",").concat(r," Z");return m},$je=function(t){var n=t.cx,r=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,h=wr(d-u),m=Dp({cx:n,cy:r,radius:i,angle:u,sign:h,cornerRadius:o,cornerIsExternal:c}),f=m.circleTangency,g=m.lineTangency,p=m.theta,v=Dp({cx:n,cy:r,radius:i,angle:d,sign:-h,cornerRadius:o,cornerIsExternal:c}),x=v.circleTangency,y=v.lineTangency,j=v.theta,w=c?Math.abs(u-d):Math.abs(u-d)-p-j;if(w<0)return l?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):H5({cx:n,cy:r,innerRadius:a,outerRadius:i,startAngle:u,endAngle:d});var N="M ".concat(g.x,",").concat(g.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(w>180),",").concat(+(h<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(y.x,",").concat(y.y,`
  `);if(a>0){var _=Dp({cx:n,cy:r,radius:a,angle:u,sign:h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),S=_.circleTangency,C=_.lineTangency,A=_.theta,T=Dp({cx:n,cy:r,radius:a,angle:d,sign:-h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),E=T.circleTangency,k=T.lineTangency,R=T.theta,I=c?Math.abs(u-d):Math.abs(u-d)-A-R;if(I<0&&o===0)return"".concat(N,"L").concat(n,",").concat(r,"Z");N+="L".concat(k.x,",").concat(k.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(E.x,",").concat(E.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(I>180),",").concat(+(h>0),",").concat(S.x,",").concat(S.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(C.x,",").concat(C.y,"Z")}else N+="L".concat(n,",").concat(r,"Z");return N},Rje={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},K5=function(t){var n=ET(ET({},Rje),t),r=n.cx,a=n.cy,i=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,u=n.cornerIsExternal,d=n.startAngle,h=n.endAngle,m=n.className;if(o<i||d===h)return null;var f=Ze("recharts-sector",m),g=o-i,p=Nr(l,g,0,!0),v;return p>0&&Math.abs(d-h)<360?v=$je({cx:r,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(p,g/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:h}):v=H5({cx:r,cy:a,innerRadius:i,outerRadius:o,startAngle:d,endAngle:h}),M.createElement("path",iN({},Le(n,!0),{className:f,d:v,role:"img"}))};function qm(e){"@babel/helpers - typeof";return qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qm(e)}function oN(){return oN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oN.apply(this,arguments)}function OT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function DT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OT(Object(n),!0).forEach(function(r){Fje(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Fje(e,t,n){return t=Lje(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lje(e){var t=Bje(e,"string");return qm(t)=="symbol"?t:t+""}function Bje(e,t){if(qm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(qm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var MT={curveBasisClosed:Fie,curveBasisOpen:Lie,curveBasis:Rie,curveBumpX:Nie,curveBumpY:Sie,curveLinearClosed:Bie,curveLinear:py,curveMonotoneX:zie,curveMonotoneY:Vie,curveNatural:qie,curveStep:Uie,curveStepAfter:Hie,curveStepBefore:Wie},Mp=function(t){return t.x===+t.x&&t.y===+t.y},hh=function(t){return t.x},mh=function(t){return t.y},zje=function(t,n){if(He(t))return t;var r="curve".concat(my(t));return(r==="curveMonotone"||r==="curveBump")&&n?MT["".concat(r).concat(n==="vertical"?"Y":"X")]:MT[r]||py},Vje=function(t){var n=t.type,r=n===void 0?"linear":n,a=t.points,i=a===void 0?[]:a,o=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,d=zje(r,l),h=u?i.filter(function(p){return Mp(p)}):i,m;if(Array.isArray(o)){var f=u?o.filter(function(p){return Mp(p)}):o,g=h.map(function(p,v){return DT(DT({},p),{},{base:f[v]})});return l==="vertical"?m=Sp().y(mh).x1(hh).x0(function(p){return p.base.x}):m=Sp().x(hh).y1(mh).y0(function(p){return p.base.y}),m.defined(Mp).curve(d),m(g)}return l==="vertical"&&xe(o)?m=Sp().y(mh).x1(hh).x0(o):xe(o)?m=Sp().x(hh).y1(mh).y0(o):m=zF().x(hh).y(mh),m.defined(Mp).curve(d),m(h)},Ol=function(t){var n=t.className,r=t.points,a=t.path,i=t.pathRef;if((!r||!r.length)&&!a)return null;var o=r&&r.length?Vje(t):a;return b.createElement("path",oN({},Le(t,!1),Xg(t),{className:Ze("recharts-curve",n),d:o,ref:i}))},G5={exports:{}},qje="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Uje=qje,Wje=Uje;function Y5(){}function Q5(){}Q5.resetWarningCache=Y5;var Hje=function(){function e(r,a,i,o,l,c){if(c!==Wje){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Q5,resetWarningCache:Y5};return n.PropTypes=n,n};G5.exports=Hje();var Kje=G5.exports;const St=Ct(Kje);var Gje=Object.getOwnPropertyNames,Yje=Object.getOwnPropertySymbols,Qje=Object.prototype.hasOwnProperty;function IT(e,t){return function(r,a,i){return e(r,a,i)&&t(r,a,i)}}function Ip(e){return function(n,r,a){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,a);var i=a.cache,o=i.get(n),l=i.get(r);if(o&&l)return o===r&&l===n;i.set(n,r),i.set(r,n);var c=e(n,r,a);return i.delete(n),i.delete(r),c}}function $T(e){return Gje(e).concat(Yje(e))}var Xje=Object.hasOwn||function(e,t){return Qje.call(e,t)};function mc(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var Jje="__v",Zje="__o",ebe="_owner",RT=Object.getOwnPropertyDescriptor,FT=Object.keys;function tbe(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function nbe(e,t){return mc(e.getTime(),t.getTime())}function rbe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function sbe(e,t){return e===t}function LT(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var a=new Array(r),i=e.entries(),o,l,c=0;(o=i.next())&&!o.done;){for(var u=t.entries(),d=!1,h=0;(l=u.next())&&!l.done;){if(a[h]){h++;continue}var m=o.value,f=l.value;if(n.equals(m[0],f[0],c,h,e,t,n)&&n.equals(m[1],f[1],m[0],f[0],e,t,n)){d=a[h]=!0;break}h++}if(!d)return!1;c++}return!0}var abe=mc;function ibe(e,t,n){var r=FT(e),a=r.length;if(FT(t).length!==a)return!1;for(;a-- >0;)if(!X5(e,t,n,r[a]))return!1;return!0}function fh(e,t,n){var r=$T(e),a=r.length;if($T(t).length!==a)return!1;for(var i,o,l;a-- >0;)if(i=r[a],!X5(e,t,n,i)||(o=RT(e,i),l=RT(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function obe(e,t){return mc(e.valueOf(),t.valueOf())}function lbe(e,t){return e.source===t.source&&e.flags===t.flags}function BT(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var a=new Array(r),i=e.values(),o,l;(o=i.next())&&!o.done;){for(var c=t.values(),u=!1,d=0;(l=c.next())&&!l.done;){if(!a[d]&&n.equals(o.value,l.value,o.value,l.value,e,t,n)){u=a[d]=!0;break}d++}if(!u)return!1}return!0}function cbe(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function ube(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function X5(e,t,n,r){return(r===ebe||r===Zje||r===Jje)&&(e.$$typeof||t.$$typeof)?!0:Xje(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}var dbe="[object Arguments]",hbe="[object Boolean]",mbe="[object Date]",fbe="[object Error]",pbe="[object Map]",gbe="[object Number]",vbe="[object Object]",xbe="[object RegExp]",ybe="[object Set]",jbe="[object String]",bbe="[object URL]",wbe=Array.isArray,zT=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,VT=Object.assign,Nbe=Object.prototype.toString.call.bind(Object.prototype.toString);function Sbe(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areErrorsEqual,a=e.areFunctionsEqual,i=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,d=e.areSetsEqual,h=e.areTypedArraysEqual,m=e.areUrlsEqual;return function(g,p,v){if(g===p)return!0;if(g==null||p==null)return!1;var x=typeof g;if(x!==typeof p)return!1;if(x!=="object")return x==="number"?o(g,p,v):x==="function"?a(g,p,v):!1;var y=g.constructor;if(y!==p.constructor)return!1;if(y===Object)return l(g,p,v);if(wbe(g))return t(g,p,v);if(zT!=null&&zT(g))return h(g,p,v);if(y===Date)return n(g,p,v);if(y===RegExp)return u(g,p,v);if(y===Map)return i(g,p,v);if(y===Set)return d(g,p,v);var j=Nbe(g);return j===mbe?n(g,p,v):j===xbe?u(g,p,v):j===pbe?i(g,p,v):j===ybe?d(g,p,v):j===vbe?typeof g.then!="function"&&typeof p.then!="function"&&l(g,p,v):j===bbe?m(g,p,v):j===fbe?r(g,p,v):j===dbe?l(g,p,v):j===hbe||j===gbe||j===jbe?c(g,p,v):!1}}function _be(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,a={areArraysEqual:r?fh:tbe,areDatesEqual:nbe,areErrorsEqual:rbe,areFunctionsEqual:sbe,areMapsEqual:r?IT(LT,fh):LT,areNumbersEqual:abe,areObjectsEqual:r?fh:ibe,arePrimitiveWrappersEqual:obe,areRegExpsEqual:lbe,areSetsEqual:r?IT(BT,fh):BT,areTypedArraysEqual:r?fh:cbe,areUrlsEqual:ube};if(n&&(a=VT({},a,n(a))),t){var i=Ip(a.areArraysEqual),o=Ip(a.areMapsEqual),l=Ip(a.areObjectsEqual),c=Ip(a.areSetsEqual);a=VT({},a,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return a}function Cbe(e){return function(t,n,r,a,i,o,l){return e(t,n,l)}}function Pbe(e){var t=e.circular,n=e.comparator,r=e.createState,a=e.equals,i=e.strict;if(r)return function(c,u){var d=r(),h=d.cache,m=h===void 0?t?new WeakMap:void 0:h,f=d.meta;return n(c,u,{cache:m,equals:a,meta:f,strict:i})};if(t)return function(c,u){return n(c,u,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var o={cache:void 0,equals:a,meta:void 0,strict:i};return function(c,u){return n(c,u,o)}}var Abe=Go();Go({strict:!0});Go({circular:!0});Go({circular:!0,strict:!0});Go({createInternalComparator:function(){return mc}});Go({strict:!0,createInternalComparator:function(){return mc}});Go({circular:!0,createInternalComparator:function(){return mc}});Go({circular:!0,createInternalComparator:function(){return mc},strict:!0});function Go(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,r=e.createInternalComparator,a=e.createState,i=e.strict,o=i===void 0?!1:i,l=_be(e),c=Sbe(l),u=r?r(c):Cbe(c);return Pbe({circular:n,comparator:c,createState:a,equals:u,strict:o})}function kbe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function qT(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function a(i){n<0&&(n=i),i-n>t?(e(i),n=-1):kbe(a)};requestAnimationFrame(r)}function lN(e){"@babel/helpers - typeof";return lN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lN(e)}function Tbe(e){return Mbe(e)||Dbe(e)||Obe(e)||Ebe()}function Ebe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Obe(e,t){if(e){if(typeof e=="string")return UT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UT(e,t)}}function UT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dbe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Mbe(e){if(Array.isArray(e))return e}function Ibe(){var e={},t=function(){return null},n=!1,r=function a(i){if(!n){if(Array.isArray(i)){if(!i.length)return;var o=i,l=Tbe(o),c=l[0],u=l.slice(1);if(typeof c=="number"){qT(a.bind(null,u),c);return}a(c),qT(a.bind(null,u));return}lN(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){n=!0},start:function(i){n=!1,r(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function Um(e){"@babel/helpers - typeof";return Um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Um(e)}function WT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function HT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WT(Object(n),!0).forEach(function(r){J5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function J5(e,t,n){return t=$be(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $be(e){var t=Rbe(e,"string");return Um(t)==="symbol"?t:String(t)}function Rbe(e,t){if(Um(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Um(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Fbe=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(r,a){return r.filter(function(i){return a.includes(i)})})},Lbe=function(t){return t},Bbe=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Uh=function(t,n){return Object.keys(n).reduce(function(r,a){return HT(HT({},r),{},J5({},a,t(a,n[a])))},{})},KT=function(t,n,r){return t.map(function(a){return"".concat(Bbe(a)," ").concat(n,"ms ").concat(r)}).join(",")};function zbe(e,t){return Ube(e)||qbe(e,t)||Z5(e,t)||Vbe()}function Vbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qbe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Ube(e){if(Array.isArray(e))return e}function Wbe(e){return Gbe(e)||Kbe(e)||Z5(e)||Hbe()}function Hbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z5(e,t){if(e){if(typeof e=="string")return cN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cN(e,t)}}function Kbe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Gbe(e){if(Array.isArray(e))return cN(e)}function cN(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Av=1e-4,e6=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},t6=function(t,n){return t.map(function(r,a){return r*Math.pow(n,a)}).reduce(function(r,a){return r+a})},GT=function(t,n){return function(r){var a=e6(t,n);return t6(a,r)}},Ybe=function(t,n){return function(r){var a=e6(t,n),i=[].concat(Wbe(a.map(function(o,l){return o*l}).slice(1)),[0]);return t6(i,r)}},YT=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":a=0,i=0,o=1,l=1;break;case"ease":a=.25,i=.1,o=.25,l=1;break;case"ease-in":a=.42,i=0,o=1,l=1;break;case"ease-out":a=.42,i=0,o=.58,l=1;break;case"ease-in-out":a=0,i=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(v){return parseFloat(v)}),d=zbe(u,4);a=d[0],i=d[1],o=d[2],l=d[3]}}}var h=GT(a,o),m=GT(i,l),f=Ybe(a,o),g=function(x){return x>1?1:x<0?0:x},p=function(x){for(var y=x>1?1:x,j=y,w=0;w<8;++w){var N=h(j)-y,_=f(j);if(Math.abs(N-y)<Av||_<Av)return m(j);j=g(j-N/_)}return m(j)};return p.isStepper=!1,p},Qbe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,r=n===void 0?100:n,a=t.damping,i=a===void 0?8:a,o=t.dt,l=o===void 0?17:o,c=function(d,h,m){var f=-(d-h)*r,g=m*i,p=m+(f-g)*l/1e3,v=m*l/1e3+d;return Math.abs(v-h)<Av&&Math.abs(p)<Av?[h,0]:[v,p]};return c.isStepper=!0,c.dt=l,c},Xbe=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return YT(a);case"spring":return Qbe();default:if(a.split("(")[0]==="cubic-bezier")return YT(a)}return typeof a=="function"?a:null};function Wm(e){"@babel/helpers - typeof";return Wm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wm(e)}function QT(e){return ewe(e)||Zbe(e)||n6(e)||Jbe()}function Jbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zbe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ewe(e){if(Array.isArray(e))return dN(e)}function XT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Yn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XT(Object(n),!0).forEach(function(r){uN(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uN(e,t,n){return t=twe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function twe(e){var t=nwe(e,"string");return Wm(t)==="symbol"?t:String(t)}function nwe(e,t){if(Wm(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Wm(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rwe(e,t){return iwe(e)||awe(e,t)||n6(e,t)||swe()}function swe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n6(e,t){if(e){if(typeof e=="string")return dN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dN(e,t)}}function dN(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function awe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function iwe(e){if(Array.isArray(e))return e}var kv=function(t,n,r){return t+(n-t)*r},hN=function(t){var n=t.from,r=t.to;return n!==r},owe=function e(t,n,r){var a=Uh(function(i,o){if(hN(o)){var l=t(o.from,o.to,o.velocity),c=rwe(l,2),u=c[0],d=c[1];return Yn(Yn({},o),{},{from:u,velocity:d})}return o},n);return r<1?Uh(function(i,o){return hN(o)?Yn(Yn({},o),{},{velocity:kv(o.velocity,a[i].velocity,r),from:kv(o.from,a[i].from,r)}):o},n):e(t,a,r-1)};const lwe=function(e,t,n,r,a){var i=Fbe(e,t),o=i.reduce(function(v,x){return Yn(Yn({},v),{},uN({},x,[e[x],t[x]]))},{}),l=i.reduce(function(v,x){return Yn(Yn({},v),{},uN({},x,{from:e[x],velocity:0,to:t[x]}))},{}),c=-1,u,d,h=function(){return null},m=function(){return Uh(function(x,y){return y.from},l)},f=function(){return!Object.values(l).filter(hN).length},g=function(x){u||(u=x);var y=x-u,j=y/n.dt;l=owe(n,l,j),a(Yn(Yn(Yn({},e),t),m())),u=x,f()||(c=requestAnimationFrame(h))},p=function(x){d||(d=x);var y=(x-d)/r,j=Uh(function(N,_){return kv.apply(void 0,QT(_).concat([n(y)]))},o);if(a(Yn(Yn(Yn({},e),t),j)),y<1)c=requestAnimationFrame(h);else{var w=Uh(function(N,_){return kv.apply(void 0,QT(_).concat([n(1)]))},o);a(Yn(Yn(Yn({},e),t),w))}};return h=n.isStepper?g:p,function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(c)}}};function Yu(e){"@babel/helpers - typeof";return Yu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yu(e)}var cwe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function uwe(e,t){if(e==null)return{};var n=dwe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function dwe(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function mj(e){return pwe(e)||fwe(e)||mwe(e)||hwe()}function hwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mwe(e,t){if(e){if(typeof e=="string")return mN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mN(e,t)}}function fwe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function pwe(e){if(Array.isArray(e))return mN(e)}function mN(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function JT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Fs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JT(Object(n),!0).forEach(function(r){Ch(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ch(e,t,n){return t=r6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vwe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r6(r.key),r)}}function xwe(e,t,n){return t&&vwe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function r6(e){var t=ywe(e,"string");return Yu(t)==="symbol"?t:String(t)}function ywe(e,t){if(Yu(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Yu(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jwe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fN(e,t)}function fN(e,t){return fN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},fN(e,t)}function bwe(e){var t=wwe();return function(){var r=Tv(e),a;if(t){var i=Tv(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return pN(this,a)}}function pN(e,t){if(t&&(Yu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gN(e)}function gN(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wwe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Tv(e){return Tv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Tv(e)}var ia=function(e){jwe(n,e);var t=bwe(n);function n(r,a){var i;gwe(this,n),i=t.call(this,r,a);var o=i.props,l=o.isActive,c=o.attributeName,u=o.from,d=o.to,h=o.steps,m=o.children,f=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(gN(i)),i.changeStyle=i.changeStyle.bind(gN(i)),!l||f<=0)return i.state={style:{}},typeof m=="function"&&(i.state={style:d}),pN(i);if(h&&h.length)i.state={style:h[0].style};else if(u){if(typeof m=="function")return i.state={style:u},pN(i);i.state={style:c?Ch({},c,u):u}}else i.state={style:{}};return i}return xwe(n,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,u=i.shouldReAnimate,d=i.to,h=i.from,m=this.state.style;if(l){if(!o){var f={style:c?Ch({},c,d):d};this.state&&m&&(c&&m[c]!==d||!c&&m!==d)&&this.setState(f);return}if(!(Abe(a.to,d)&&a.canBegin&&a.isActive)){var g=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=g||u?h:a.to;if(this.state&&m){var v={style:c?Ch({},c,p):p};(c&&m[c]!==p||!c&&m!==p)&&this.setState(v)}this.runAnimation(Fs(Fs({},this.props),{},{from:p,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,l=a.to,c=a.duration,u=a.easing,d=a.begin,h=a.onAnimationEnd,m=a.onAnimationStart,f=lwe(o,l,Xbe(u),c,this.changeStyle),g=function(){i.stopJSAnimation=f()};this.manager.start([m,d,g,c,h])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,l=a.begin,c=a.onAnimationStart,u=o[0],d=u.style,h=u.duration,m=h===void 0?0:h,f=function(p,v,x){if(x===0)return p;var y=v.duration,j=v.easing,w=j===void 0?"ease":j,N=v.style,_=v.properties,S=v.onAnimationEnd,C=x>0?o[x-1]:v,A=_||Object.keys(N);if(typeof w=="function"||w==="spring")return[].concat(mj(p),[i.runJSAnimation.bind(i,{from:C.style,to:N,duration:y,easing:w}),y]);var T=KT(A,y,w),E=Fs(Fs(Fs({},C.style),N),{},{transition:T});return[].concat(mj(p),[E,y,S]).filter(Lbe)};return this.manager.start([c].concat(mj(o.reduce(f,[d,Math.max(m,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=Ibe());var i=a.begin,o=a.duration,l=a.attributeName,c=a.to,u=a.easing,d=a.onAnimationStart,h=a.onAnimationEnd,m=a.steps,f=a.children,g=this.manager;if(this.unSubscribe=g.subscribe(this.handleStyleChange),typeof u=="function"||typeof f=="function"||u==="spring"){this.runJSAnimation(a);return}if(m.length>1){this.runStepAnimation(a);return}var p=l?Ch({},l,c):c,v=KT(Object.keys(p),o,u);g.start([d,i,Fs(Fs({},p),{},{transition:v}),o,h])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=uwe(a,cwe),u=b.Children.count(i),d=this.state.style;if(typeof i=="function")return i(d);if(!l||u===0||o<=0)return i;var h=function(f){var g=f.props,p=g.style,v=p===void 0?{}:p,x=g.className,y=b.cloneElement(f,Fs(Fs({},c),{},{style:Fs(Fs({},v),d),className:x}));return y};return u===1?h(b.Children.only(i)):M.createElement("div",null,b.Children.map(i,function(m){return h(m)}))}}]),n}(b.PureComponent);ia.displayName="Animate";ia.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};ia.propTypes={from:St.oneOfType([St.object,St.string]),to:St.oneOfType([St.object,St.string]),attributeName:St.string,duration:St.number,begin:St.number,easing:St.oneOfType([St.string,St.func]),steps:St.arrayOf(St.shape({duration:St.number.isRequired,style:St.object.isRequired,easing:St.oneOfType([St.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),St.func]),properties:St.arrayOf("string"),onAnimationEnd:St.func})),children:St.oneOfType([St.node,St.func]),isActive:St.bool,canBegin:St.bool,onAnimationEnd:St.func,shouldReAnimate:St.bool,onAnimationStart:St.func,onAnimationReStart:St.func};function Hm(e){"@babel/helpers - typeof";return Hm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hm(e)}function Ev(){return Ev=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ev.apply(this,arguments)}function Nwe(e,t){return Pwe(e)||Cwe(e,t)||_we(e,t)||Swe()}function Swe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _we(e,t){if(e){if(typeof e=="string")return ZT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZT(e,t)}}function ZT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Cwe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Pwe(e){if(Array.isArray(e))return e}function eE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function tE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eE(Object(n),!0).forEach(function(r){Awe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Awe(e,t,n){return t=kwe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kwe(e){var t=Twe(e,"string");return Hm(t)=="symbol"?t:t+""}function Twe(e,t){if(Hm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Hm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nE=function(t,n,r,a,i){var o=Math.min(Math.abs(r)/2,Math.abs(a)/2),l=a>=0?1:-1,c=r>=0?1:-1,u=a>=0&&r>=0||a<0&&r<0?1:0,d;if(o>0&&i instanceof Array){for(var h=[0,0,0,0],m=0,f=4;m<f;m++)h[m]=i[m]>o?o:i[m];d="M".concat(t,",").concat(n+l*h[0]),h[0]>0&&(d+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(u,",").concat(t+c*h[0],",").concat(n)),d+="L ".concat(t+r-c*h[1],",").concat(n),h[1]>0&&(d+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(u,`,
        `).concat(t+r,",").concat(n+l*h[1])),d+="L ".concat(t+r,",").concat(n+a-l*h[2]),h[2]>0&&(d+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(u,`,
        `).concat(t+r-c*h[2],",").concat(n+a)),d+="L ".concat(t+c*h[3],",").concat(n+a),h[3]>0&&(d+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(n+a-l*h[3])),d+="Z"}else if(o>0&&i===+i&&i>0){var g=Math.min(o,i);d="M ".concat(t,",").concat(n+l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+c*g,",").concat(n,`
            L `).concat(t+r-c*g,",").concat(n,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+r,",").concat(n+l*g,`
            L `).concat(t+r,",").concat(n+a-l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+r-c*g,",").concat(n+a,`
            L `).concat(t+c*g,",").concat(n+a,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t,",").concat(n+a-l*g," Z")}else d="M ".concat(t,",").concat(n," h ").concat(r," v ").concat(a," h ").concat(-r," Z");return d},Ewe=function(t,n){if(!t||!n)return!1;var r=t.x,a=t.y,i=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(i,i+l),d=Math.max(i,i+l),h=Math.min(o,o+c),m=Math.max(o,o+c);return r>=u&&r<=d&&a>=h&&a<=m}return!1},Owe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},G2=function(t){var n=tE(tE({},Owe),t),r=b.useRef(),a=b.useState(-1),i=Nwe(a,2),o=i[0],l=i[1];b.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var w=r.current.getTotalLength();w&&l(w)}catch{}},[]);var c=n.x,u=n.y,d=n.width,h=n.height,m=n.radius,f=n.className,g=n.animationEasing,p=n.animationDuration,v=n.animationBegin,x=n.isAnimationActive,y=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||h!==+h||d===0||h===0)return null;var j=Ze("recharts-rectangle",f);return y?M.createElement(ia,{canBegin:o>0,from:{width:d,height:h,x:c,y:u},to:{width:d,height:h,x:c,y:u},duration:p,animationEasing:g,isActive:y},function(w){var N=w.width,_=w.height,S=w.x,C=w.y;return M.createElement(ia,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:p,isActive:x,easing:g},M.createElement("path",Ev({},Le(n,!0),{className:j,d:nE(S,C,N,_,m),ref:r})))}):M.createElement("path",Ev({},Le(n,!0),{className:j,d:nE(c,u,d,h,m)}))},Dwe=["points","className","baseLinePoints","connectNulls"];function Kc(){return Kc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kc.apply(this,arguments)}function Mwe(e,t){if(e==null)return{};var n=Iwe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Iwe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function rE(e){return Lwe(e)||Fwe(e)||Rwe(e)||$we()}function $we(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rwe(e,t){if(e){if(typeof e=="string")return vN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vN(e,t)}}function Fwe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Lwe(e){if(Array.isArray(e))return vN(e)}function vN(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var sE=function(t){return t&&t.x===+t.x&&t.y===+t.y},Bwe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return t.forEach(function(r){sE(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),sE(t[0])&&n[n.length-1].push(t[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},Wh=function(t,n){var r=Bwe(t);n&&(r=[r.reduce(function(i,o){return[].concat(rE(i),rE(o))},[])]);var a=r.map(function(i){return i.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return r.length===1?"".concat(a,"Z"):a},zwe=function(t,n,r){var a=Wh(t,r);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(Wh(n.reverse(),r).slice(1))},Vwe=function(t){var n=t.points,r=t.className,a=t.baseLinePoints,i=t.connectNulls,o=Mwe(t,Dwe);if(!n||!n.length)return null;var l=Ze("recharts-polygon",r);if(a&&a.length){var c=o.stroke&&o.stroke!=="none",u=zwe(n,a,i);return M.createElement("g",{className:l},M.createElement("path",Kc({},Le(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),c?M.createElement("path",Kc({},Le(o,!0),{fill:"none",d:Wh(n,i)})):null,c?M.createElement("path",Kc({},Le(o,!0),{fill:"none",d:Wh(a,i)})):null)}var d=Wh(n,i);return M.createElement("path",Kc({},Le(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",className:l,d}))};function xN(){return xN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xN.apply(this,arguments)}var Mf=function(t){var n=t.cx,r=t.cy,a=t.r,i=t.className,o=Ze("recharts-dot",i);return n===+n&&r===+r&&a===+a?b.createElement("circle",xN({},Le(t,!1),Xg(t),{className:o,cx:n,cy:r,r:a})):null};function Km(e){"@babel/helpers - typeof";return Km=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Km(e)}var qwe=["x","y","top","left","width","height","className"];function yN(){return yN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yN.apply(this,arguments)}function aE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Uwe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aE(Object(n),!0).forEach(function(r){Wwe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Wwe(e,t,n){return t=Hwe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hwe(e){var t=Kwe(e,"string");return Km(t)=="symbol"?t:t+""}function Kwe(e,t){if(Km(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Km(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gwe(e,t){if(e==null)return{};var n=Ywe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Ywe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Qwe=function(t,n,r,a,i,o){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(o,",").concat(n,"h").concat(r)},Xwe=function(t){var n=t.x,r=n===void 0?0:n,a=t.y,i=a===void 0?0:a,o=t.top,l=o===void 0?0:o,c=t.left,u=c===void 0?0:c,d=t.width,h=d===void 0?0:d,m=t.height,f=m===void 0?0:m,g=t.className,p=Gwe(t,qwe),v=Uwe({x:r,y:i,top:l,left:u,width:h,height:f},p);return!xe(r)||!xe(i)||!xe(h)||!xe(f)||!xe(l)||!xe(u)?null:M.createElement("path",yN({},Le(v,!0),{className:Ze("recharts-cross",g),d:Qwe(r,i,h,f,l,u)}))},Jwe=Cy,Zwe=p5,eNe=Wa;function tNe(e,t){return e&&e.length?Jwe(e,eNe(t),Zwe):void 0}var nNe=tNe;const rNe=Ct(nNe);var sNe=Cy,aNe=Wa,iNe=g5;function oNe(e,t){return e&&e.length?sNe(e,aNe(t),iNe):void 0}var lNe=oNe;const cNe=Ct(lNe);var uNe=["cx","cy","angle","ticks","axisLine"],dNe=["ticks","tick","angle","tickFormatter","stroke"];function Qu(e){"@babel/helpers - typeof";return Qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qu(e)}function Hh(){return Hh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hh.apply(this,arguments)}function iE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Jo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iE(Object(n),!0).forEach(function(r){Ty(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function oE(e,t){if(e==null)return{};var n=hNe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function hNe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function mNe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a6(r.key),r)}}function fNe(e,t,n){return t&&lE(e.prototype,t),n&&lE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function pNe(e,t,n){return t=Ov(t),gNe(e,s6()?Reflect.construct(t,n||[],Ov(e).constructor):t.apply(e,n))}function gNe(e,t){if(t&&(Qu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vNe(e)}function vNe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(s6=function(){return!!e})()}function Ov(e){return Ov=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ov(e)}function xNe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jN(e,t)}function jN(e,t){return jN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},jN(e,t)}function Ty(e,t,n){return t=a6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a6(e){var t=yNe(e,"string");return Qu(t)=="symbol"?t:t+""}function yNe(e,t){if(Qu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Qu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ey=function(e){function t(){return mNe(this,t),pNe(this,t,arguments)}return xNe(t,e),fNe(t,[{key:"getTickValueCoord",value:function(r){var a=r.coordinate,i=this.props,o=i.angle,l=i.cx,c=i.cy;return Ht(l,c,a,o)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,a;switch(r){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var r=this.props,a=r.cx,i=r.cy,o=r.angle,l=r.ticks,c=rNe(l,function(d){return d.coordinate||0}),u=cNe(l,function(d){return d.coordinate||0});return{cx:a,cy:i,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,a=r.cx,i=r.cy,o=r.angle,l=r.ticks,c=r.axisLine,u=oE(r,uNe),d=l.reduce(function(g,p){return[Math.min(g[0],p.coordinate),Math.max(g[1],p.coordinate)]},[1/0,-1/0]),h=Ht(a,i,d[0],o),m=Ht(a,i,d[1],o),f=Jo(Jo(Jo({},Le(u,!1)),{},{fill:"none"},Le(c,!1)),{},{x1:h.x,y1:h.y,x2:m.x,y2:m.y});return M.createElement("line",Hh({className:"recharts-polar-radius-axis-line"},f))}},{key:"renderTicks",value:function(){var r=this,a=this.props,i=a.ticks,o=a.tick,l=a.angle,c=a.tickFormatter,u=a.stroke,d=oE(a,dNe),h=this.getTickTextAnchor(),m=Le(d,!1),f=Le(o,!1),g=i.map(function(p,v){var x=r.getTickValueCoord(p),y=Jo(Jo(Jo(Jo({textAnchor:h,transform:"rotate(".concat(90-l,", ").concat(x.x,", ").concat(x.y,")")},m),{},{stroke:"none",fill:u},f),{},{index:v},x),{},{payload:p});return M.createElement(ft,Hh({className:Ze("recharts-polar-radius-axis-tick",U5(o)),key:"tick-".concat(p.coordinate)},Kl(r.props,p,v)),t.renderTickItem(o,y,c?c(p.value,v):p.value))});return M.createElement(ft,{className:"recharts-polar-radius-axis-ticks"},g)}},{key:"render",value:function(){var r=this.props,a=r.ticks,i=r.axisLine,o=r.tick;return!a||!a.length?null:M.createElement(ft,{className:Ze("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),Wn.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,a,i){var o;return M.isValidElement(r)?o=M.cloneElement(r,a):He(r)?o=r(a):o=M.createElement(Gl,Hh({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])}(b.PureComponent);Ty(Ey,"displayName","PolarRadiusAxis");Ty(Ey,"axisType","radiusAxis");Ty(Ey,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Xu(e){"@babel/helpers - typeof";return Xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xu(e)}function ll(){return ll=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ll.apply(this,arguments)}function cE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Zo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cE(Object(n),!0).forEach(function(r){Oy(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function jNe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o6(r.key),r)}}function bNe(e,t,n){return t&&uE(e.prototype,t),n&&uE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function wNe(e,t,n){return t=Dv(t),NNe(e,i6()?Reflect.construct(t,n||[],Dv(e).constructor):t.apply(e,n))}function NNe(e,t){if(t&&(Xu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SNe(e)}function SNe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(i6=function(){return!!e})()}function Dv(e){return Dv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Dv(e)}function _Ne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bN(e,t)}function bN(e,t){return bN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},bN(e,t)}function Oy(e,t,n){return t=o6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o6(e){var t=CNe(e,"string");return Xu(t)=="symbol"?t:t+""}function CNe(e,t){if(Xu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Xu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var PNe=Math.PI/180,dE=1e-5,Dy=function(e){function t(){return jNe(this,t),wNe(this,t,arguments)}return _Ne(t,e),bNe(t,[{key:"getTickLineCoord",value:function(r){var a=this.props,i=a.cx,o=a.cy,l=a.radius,c=a.orientation,u=a.tickSize,d=u||8,h=Ht(i,o,l,r.coordinate),m=Ht(i,o,l+(c==="inner"?-1:1)*d,r.coordinate);return{x1:h.x,y1:h.y,x2:m.x,y2:m.y}}},{key:"getTickTextAnchor",value:function(r){var a=this.props.orientation,i=Math.cos(-r.coordinate*PNe),o;return i>dE?o=a==="outer"?"start":"end":i<-dE?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var r=this.props,a=r.cx,i=r.cy,o=r.radius,l=r.axisLine,c=r.axisLineType,u=Zo(Zo({},Le(this.props,!1)),{},{fill:"none"},Le(l,!1));if(c==="circle")return M.createElement(Mf,ll({className:"recharts-polar-angle-axis-line"},u,{cx:a,cy:i,r:o}));var d=this.props.ticks,h=d.map(function(m){return Ht(a,i,o,m.coordinate)});return M.createElement(Vwe,ll({className:"recharts-polar-angle-axis-line"},u,{points:h}))}},{key:"renderTicks",value:function(){var r=this,a=this.props,i=a.ticks,o=a.tick,l=a.tickLine,c=a.tickFormatter,u=a.stroke,d=Le(this.props,!1),h=Le(o,!1),m=Zo(Zo({},d),{},{fill:"none"},Le(l,!1)),f=i.map(function(g,p){var v=r.getTickLineCoord(g),x=r.getTickTextAnchor(g),y=Zo(Zo(Zo({textAnchor:x},d),{},{stroke:"none",fill:u},h),{},{index:p,payload:g,x:v.x2,y:v.y2});return M.createElement(ft,ll({className:Ze("recharts-polar-angle-axis-tick",U5(o)),key:"tick-".concat(g.coordinate)},Kl(r.props,g,p)),l&&M.createElement("line",ll({className:"recharts-polar-angle-axis-tick-line"},m,v)),o&&t.renderTickItem(o,y,c?c(g.value,p):g.value))});return M.createElement(ft,{className:"recharts-polar-angle-axis-ticks"},f)}},{key:"render",value:function(){var r=this.props,a=r.ticks,i=r.radius,o=r.axisLine;return i<=0||!a||!a.length?null:M.createElement(ft,{className:Ze("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,a,i){var o;return M.isValidElement(r)?o=M.cloneElement(r,a):He(r)?o=r(a):o=M.createElement(Gl,ll({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])}(b.PureComponent);Oy(Dy,"displayName","PolarAngleAxis");Oy(Dy,"axisType","angleAxis");Oy(Dy,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var ANe=dL,kNe=ANe(Object.getPrototypeOf,Object),TNe=kNe,ENe=Ei,ONe=TNe,DNe=Oi,MNe="[object Object]",INe=Function.prototype,$Ne=Object.prototype,l6=INe.toString,RNe=$Ne.hasOwnProperty,FNe=l6.call(Object);function LNe(e){if(!DNe(e)||ENe(e)!=MNe)return!1;var t=ONe(e);if(t===null)return!0;var n=RNe.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&l6.call(n)==FNe}var BNe=LNe;const zNe=Ct(BNe);var VNe=Ei,qNe=Oi,UNe="[object Boolean]";function WNe(e){return e===!0||e===!1||qNe(e)&&VNe(e)==UNe}var HNe=WNe;const KNe=Ct(HNe);function Gm(e){"@babel/helpers - typeof";return Gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gm(e)}function Mv(){return Mv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mv.apply(this,arguments)}function GNe(e,t){return JNe(e)||XNe(e,t)||QNe(e,t)||YNe()}function YNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QNe(e,t){if(e){if(typeof e=="string")return hE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hE(e,t)}}function hE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function XNe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function JNe(e){if(Array.isArray(e))return e}function mE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function fE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mE(Object(n),!0).forEach(function(r){ZNe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ZNe(e,t,n){return t=e1e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function e1e(e){var t=t1e(e,"string");return Gm(t)=="symbol"?t:t+""}function t1e(e,t){if(Gm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Gm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pE=function(t,n,r,a,i){var o=r-a,l;return l="M ".concat(t,",").concat(n),l+="L ".concat(t+r,",").concat(n),l+="L ".concat(t+r-o/2,",").concat(n+i),l+="L ".concat(t+r-o/2-a,",").concat(n+i),l+="L ".concat(t,",").concat(n," Z"),l},n1e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},r1e=function(t){var n=fE(fE({},n1e),t),r=b.useRef(),a=b.useState(-1),i=GNe(a,2),o=i[0],l=i[1];b.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var j=r.current.getTotalLength();j&&l(j)}catch{}},[]);var c=n.x,u=n.y,d=n.upperWidth,h=n.lowerWidth,m=n.height,f=n.className,g=n.animationEasing,p=n.animationDuration,v=n.animationBegin,x=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||h!==+h||m!==+m||d===0&&h===0||m===0)return null;var y=Ze("recharts-trapezoid",f);return x?M.createElement(ia,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:m,x:c,y:u},to:{upperWidth:d,lowerWidth:h,height:m,x:c,y:u},duration:p,animationEasing:g,isActive:x},function(j){var w=j.upperWidth,N=j.lowerWidth,_=j.height,S=j.x,C=j.y;return M.createElement(ia,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:p,easing:g},M.createElement("path",Mv({},Le(n,!0),{className:y,d:pE(S,C,w,N,_),ref:r})))}):M.createElement("g",null,M.createElement("path",Mv({},Le(n,!0),{className:y,d:pE(c,u,d,h,m)})))},s1e=["option","shapeType","propTransformer","activeClassName","isActive"];function Ym(e){"@babel/helpers - typeof";return Ym=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ym(e)}function a1e(e,t){if(e==null)return{};var n=i1e(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function i1e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function gE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Iv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gE(Object(n),!0).forEach(function(r){o1e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function o1e(e,t,n){return t=l1e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l1e(e){var t=c1e(e,"string");return Ym(t)=="symbol"?t:t+""}function c1e(e,t){if(Ym(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ym(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function u1e(e,t){return Iv(Iv({},t),e)}function d1e(e,t){return e==="symbols"}function vE(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return M.createElement(G2,n);case"trapezoid":return M.createElement(r1e,n);case"sector":return M.createElement(K5,n);case"symbols":if(d1e(t))return M.createElement(m2,n);break;default:return null}}function h1e(e){return b.isValidElement(e)?e.props:e}function c6(e){var t=e.option,n=e.shapeType,r=e.propTransformer,a=r===void 0?u1e:r,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=a1e(e,s1e),u;if(b.isValidElement(t))u=b.cloneElement(t,Iv(Iv({},c),h1e(t)));else if(He(t))u=t(c);else if(zNe(t)&&!KNe(t)){var d=a(t,c);u=M.createElement(vE,{shapeType:n,elementProps:d})}else{var h=c;u=M.createElement(vE,{shapeType:n,elementProps:h})}return l?M.createElement(ft,{className:o},u):u}function My(e,t){return t!=null&&"trapezoids"in e.props}function Iy(e,t){return t!=null&&"sectors"in e.props}function Qm(e,t){return t!=null&&"points"in e.props}function m1e(e,t){var n,r,a=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,i=e.y===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.y)||e.y===t.y;return a&&i}function f1e(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function p1e(e,t){var n=e.x===t.x,r=e.y===t.y,a=e.z===t.z;return n&&r&&a}function g1e(e,t){var n;return My(e,t)?n=m1e:Iy(e,t)?n=f1e:Qm(e,t)&&(n=p1e),n}function v1e(e,t){var n;return My(e,t)?n="trapezoids":Iy(e,t)?n="sectors":Qm(e,t)&&(n="points"),n}function x1e(e,t){if(My(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(Iy(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return Qm(e,t)?t.payload:{}}function y1e(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,a=v1e(n,t),i=x1e(n,t),o=r.filter(function(c,u){var d=Yl(i,c),h=n.props[a].filter(function(g){var p=g1e(n,t);return p(g,t)}),m=n.props[a].indexOf(h[h.length-1]),f=u===m;return d&&f}),l=r.indexOf(o[o.length-1]);return l}var rg;function Ju(e){"@babel/helpers - typeof";return Ju=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ju(e)}function Gc(){return Gc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gc.apply(this,arguments)}function xE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function qt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xE(Object(n),!0).forEach(function(r){ws(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function j1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d6(r.key),r)}}function b1e(e,t,n){return t&&yE(e.prototype,t),n&&yE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function w1e(e,t,n){return t=$v(t),N1e(e,u6()?Reflect.construct(t,n||[],$v(e).constructor):t.apply(e,n))}function N1e(e,t){if(t&&(Ju(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return S1e(e)}function S1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(u6=function(){return!!e})()}function $v(e){return $v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$v(e)}function _1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wN(e,t)}function wN(e,t){return wN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},wN(e,t)}function ws(e,t,n){return t=d6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d6(e){var t=C1e(e,"string");return Ju(t)=="symbol"?t:t+""}function C1e(e,t){if(Ju(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ju(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ha=function(e){function t(n){var r;return j1e(this,t),r=w1e(this,t,[n]),ws(r,"pieRef",null),ws(r,"sectorRefs",[]),ws(r,"id",uc("recharts-pie-")),ws(r,"handleAnimationEnd",function(){var a=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),He(a)&&a()}),ws(r,"handleAnimationStart",function(){var a=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),He(a)&&a()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return _1e(t,e),b1e(t,[{key:"isActiveIndex",value:function(r){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(r)!==-1:r===a}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,l=i.labelLine,c=i.dataKey,u=i.valueKey,d=Le(this.props,!1),h=Le(o,!1),m=Le(l,!1),f=o&&o.offsetRadius||20,g=r.map(function(p,v){var x=(p.startAngle+p.endAngle)/2,y=Ht(p.cx,p.cy,p.outerRadius+f,x),j=qt(qt(qt(qt({},d),p),{},{stroke:"none"},h),{},{index:v,textAnchor:t.getTextAnchor(y.x,p.cx)},y),w=qt(qt(qt(qt({},d),p),{},{fill:"none",stroke:p.fill},m),{},{index:v,points:[Ht(p.cx,p.cy,p.outerRadius,x),y]}),N=c;return Ye(c)&&Ye(u)?N="value":Ye(c)&&(N=u),M.createElement(ft,{key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(v)},l&&t.renderLabelLineItem(l,w,"line"),t.renderLabelItem(o,j,pn(p,N)))});return M.createElement(ft,{className:"recharts-pie-labels"},g)}},{key:"renderSectorsStatically",value:function(r){var a=this,i=this.props,o=i.activeShape,l=i.blendStroke,c=i.inactiveShape;return r.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&r.length!==1)return null;var h=a.isActiveIndex(d),m=c&&a.hasActiveIndex()?c:null,f=h?o:m,g=qt(qt({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return M.createElement(ft,Gc({ref:function(v){v&&!a.sectorRefs.includes(v)&&a.sectorRefs.push(v)},tabIndex:-1,className:"recharts-pie-sector"},Kl(a.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),M.createElement(c6,Gc({option:f,isActive:h,shapeType:"sector"},g)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,a=this.props,i=a.sectors,o=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,u=a.animationEasing,d=a.animationId,h=this.state,m=h.prevSectors,f=h.prevIsAnimationActive;return M.createElement(ia,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(f),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(g){var p=g.t,v=[],x=i&&i[0],y=x.startAngle;return i.forEach(function(j,w){var N=m&&m[w],_=w>0?cs(j,"paddingAngle",0):0;if(N){var S=Dn(N.endAngle-N.startAngle,j.endAngle-j.startAngle),C=qt(qt({},j),{},{startAngle:y+_,endAngle:y+S(p)+_});v.push(C),y=C.endAngle}else{var A=j.endAngle,T=j.startAngle,E=Dn(0,A-T),k=E(p),R=qt(qt({},j),{},{startAngle:y+_,endAngle:y+k+_});v.push(R),y=R.endAngle}}),M.createElement(ft,null,r.renderSectorsStatically(v))})}},{key:"attachKeyboardHandlers",value:function(r){var a=this;r.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,a=r.sectors,i=r.isAnimationActive,o=this.state.prevSectors;return i&&a&&a.length&&(!o||!Yl(o,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,a=this.props,i=a.hide,o=a.sectors,l=a.className,c=a.label,u=a.cx,d=a.cy,h=a.innerRadius,m=a.outerRadius,f=a.isAnimationActive,g=this.state.isAnimationFinished;if(i||!o||!o.length||!xe(u)||!xe(d)||!xe(h)||!xe(m))return null;var p=Ze("recharts-pie",l);return M.createElement(ft,{tabIndex:this.props.rootTabIndex,className:p,ref:function(x){r.pieRef=x}},this.renderSectors(),c&&this.renderLabels(o),Wn.renderCallByParent(this.props,null,!1),(!f||g)&&Ra.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,a){return a.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==a.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:r.sectors!==a.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,a){return r>a?"start":r<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,a,i){if(M.isValidElement(r))return M.cloneElement(r,a);if(He(r))return r(a);var o=Ze("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return M.createElement(Ol,Gc({},a,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(r,a,i){if(M.isValidElement(r))return M.cloneElement(r,a);var o=i;if(He(r)&&(o=r(a),M.isValidElement(o)))return o;var l=Ze("recharts-pie-label-text",typeof r!="boolean"&&!He(r)?r.className:"");return M.createElement(Gl,Gc({},a,{alignmentBaseline:"middle",className:l}),o)}}])}(b.PureComponent);rg=ha;ws(ha,"displayName","Pie");ws(ha,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!ta.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});ws(ha,"parseDeltaAngle",function(e,t){var n=wr(t-e),r=Math.min(Math.abs(t-e),360);return n*r});ws(ha,"getRealPieData",function(e){var t=e.data,n=e.children,r=Le(e,!1),a=us(n,Ld);return t&&t.length?t.map(function(i,o){return qt(qt(qt({payload:i},r),i),a&&a[o]&&a[o].props)}):a&&a.length?a.map(function(i){return qt(qt({},r),i.props)}):[]});ws(ha,"parseCoordinateOfPie",function(e,t){var n=t.top,r=t.left,a=t.width,i=t.height,o=q5(a,i),l=r+Nr(e.cx,a,a/2),c=n+Nr(e.cy,i,i/2),u=Nr(e.innerRadius,o,0),d=Nr(e.outerRadius,o,o*.8),h=e.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:h}});ws(ha,"getComposedData",function(e){var t=e.item,n=e.offset,r=t.type.defaultProps!==void 0?qt(qt({},t.type.defaultProps),t.props):t.props,a=rg.getRealPieData(r);if(!a||!a.length)return null;var i=r.cornerRadius,o=r.startAngle,l=r.endAngle,c=r.paddingAngle,u=r.dataKey,d=r.nameKey,h=r.valueKey,m=r.tooltipType,f=Math.abs(r.minAngle),g=rg.parseCoordinateOfPie(r,n),p=rg.parseDeltaAngle(o,l),v=Math.abs(p),x=u;Ye(u)&&Ye(h)?(ea(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x="value"):Ye(u)&&(ea(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x=h);var y=a.filter(function(C){return pn(C,x,0)!==0}).length,j=(v>=360?y:y-1)*c,w=v-y*f-j,N=a.reduce(function(C,A){var T=pn(A,x,0);return C+(xe(T)?T:0)},0),_;if(N>0){var S;_=a.map(function(C,A){var T=pn(C,x,0),E=pn(C,d,A),k=(xe(T)?T:0)/N,R;A?R=S.endAngle+wr(p)*c*(T!==0?1:0):R=o;var I=R+wr(p)*((T!==0?f:0)+k*w),W=(R+I)/2,V=(g.innerRadius+g.outerRadius)/2,q=[{name:E,value:T,payload:C,dataKey:x,type:m}],P=Ht(g.cx,g.cy,V,W);return S=qt(qt(qt({percent:k,cornerRadius:i,name:E,tooltipPayload:q,midAngle:W,middleRadius:V,tooltipPosition:P},C),g),{},{value:pn(C,x),startAngle:R,endAngle:I,payload:C,paddingAngle:wr(p)*c}),S})}return qt(qt({},g),{},{sectors:_,data:a})});var P1e=Math.ceil,A1e=Math.max;function k1e(e,t,n,r){for(var a=-1,i=A1e(P1e((t-e)/(n||1)),0),o=Array(i);i--;)o[r?i:++a]=e,e+=n;return o}var T1e=k1e,E1e=TL,jE=1/0,O1e=17976931348623157e292;function D1e(e){if(!e)return e===0?e:0;if(e=E1e(e),e===jE||e===-jE){var t=e<0?-1:1;return t*O1e}return e===e?e:0}var h6=D1e,M1e=T1e,I1e=yy,fj=h6;function $1e(e){return function(t,n,r){return r&&typeof r!="number"&&I1e(t,n,r)&&(n=r=void 0),t=fj(t),n===void 0?(n=t,t=0):n=fj(n),r=r===void 0?t<n?1:-1:fj(r),M1e(t,n,r,e)}}var R1e=$1e,F1e=R1e,L1e=F1e(),B1e=L1e;const Rv=Ct(B1e);function Xm(e){"@babel/helpers - typeof";return Xm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xm(e)}function bE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function wE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bE(Object(n),!0).forEach(function(r){m6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function m6(e,t,n){return t=z1e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z1e(e){var t=V1e(e,"string");return Xm(t)=="symbol"?t:t+""}function V1e(e,t){if(Xm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Xm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var q1e=["Webkit","Moz","O","ms"],U1e=function(t,n){var r=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=q1e.reduce(function(i,o){return wE(wE({},i),{},m6({},o+r,n))},{});return a[t]=n,a};function Zu(e){"@babel/helpers - typeof";return Zu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zu(e)}function Fv(){return Fv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fv.apply(this,arguments)}function NE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function pj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NE(Object(n),!0).forEach(function(r){es(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function W1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p6(r.key),r)}}function H1e(e,t,n){return t&&SE(e.prototype,t),n&&SE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function K1e(e,t,n){return t=Lv(t),G1e(e,f6()?Reflect.construct(t,n||[],Lv(e).constructor):t.apply(e,n))}function G1e(e,t){if(t&&(Zu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Y1e(e)}function Y1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(f6=function(){return!!e})()}function Lv(e){return Lv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Lv(e)}function Q1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&NN(e,t)}function NN(e,t){return NN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},NN(e,t)}function es(e,t,n){return t=p6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p6(e){var t=X1e(e,"string");return Zu(t)=="symbol"?t:t+""}function X1e(e,t){if(Zu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Zu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var J1e=function(t){var n=t.data,r=t.startIndex,a=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!n||!n.length)return{};var c=n.length,u=Vh().domain(Rv(0,c)).range([i,i+o-l]),d=u.domain().map(function(h){return u(h)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(a),scale:u,scaleValues:d}},_E=function(t){return t.changedTouches&&!!t.changedTouches.length},ed=function(e){function t(n){var r;return W1e(this,t),r=K1e(this,t,[n]),es(r,"handleDrag",function(a){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(a):r.state.isSlideMoving&&r.handleSlideDrag(a)}),es(r,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&r.handleDrag(a.changedTouches[0])}),es(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=r.props,i=a.endIndex,o=a.onDragEnd,l=a.startIndex;o==null||o({endIndex:i,startIndex:l})}),r.detachDragEndListener()}),es(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),es(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),es(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),es(r,"handleSlideDragStart",function(a){var i=_E(a)?a.changedTouches[0]:a;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return Q1e(t,e),H1e(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var a=r.startX,i=r.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,h=Math.min(a,i),m=Math.max(a,i),f=t.getIndexInRange(o,h),g=t.getIndexInRange(o,m);return{startIndex:f-f%c,endIndex:g===d?d:g-g%c}}},{key:"getTextOfTick",value:function(r){var a=this.props,i=a.data,o=a.tickFormatter,l=a.dataKey,c=pn(i[r],l,r);return He(o)?o(c,r):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var a=this.state,i=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,u=c.x,d=c.width,h=c.travellerWidth,m=c.startIndex,f=c.endIndex,g=c.onChange,p=r.pageX-i;p>0?p=Math.min(p,u+d-h-l,u+d-h-o):p<0&&(p=Math.max(p,u-o,u-l));var v=this.getIndex({startX:o+p,endX:l+p});(v.startIndex!==m||v.endIndex!==f)&&g&&g(v),this.setState({startX:o+p,endX:l+p,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,a){var i=_E(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,u=this.state[o],d=this.props,h=d.x,m=d.width,f=d.travellerWidth,g=d.onChange,p=d.gap,v=d.data,x={startX:this.state.startX,endX:this.state.endX},y=r.pageX-i;y>0?y=Math.min(y,h+m-f-u):y<0&&(y=Math.max(y,h-u)),x[o]=u+y;var j=this.getIndex(x),w=j.startIndex,N=j.endIndex,_=function(){var C=v.length-1;return o==="startX"&&(l>c?w%p===0:N%p===0)||l<c&&N===C||o==="endX"&&(l>c?N%p===0:w%p===0)||l>c&&N===C};this.setState(es(es({},o,u+y),"brushMoveStartX",r.pageX),function(){g&&_()&&g(j)})}},{key:"handleTravellerMoveKeyboard",value:function(r,a){var i=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,d=this.state[a],h=l.indexOf(d);if(h!==-1){var m=h+r;if(!(m===-1||m>=l.length)){var f=l[m];a==="startX"&&f>=u||a==="endX"&&f<=c||this.setState(es({},a,f),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,a=r.x,i=r.y,o=r.width,l=r.height,c=r.fill,u=r.stroke;return M.createElement("rect",{stroke:u,fill:c,x:a,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var r=this.props,a=r.x,i=r.y,o=r.width,l=r.height,c=r.data,u=r.children,d=r.padding,h=b.Children.only(u);return h?M.cloneElement(h,{x:a,y:i,width:o,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(r,a){var i,o,l=this,c=this.props,u=c.y,d=c.travellerWidth,h=c.height,m=c.traveller,f=c.ariaLabel,g=c.data,p=c.startIndex,v=c.endIndex,x=Math.max(r,this.props.x),y=pj(pj({},Le(this.props,!1)),{},{x,y:u,width:d,height:h}),j=f||"Min value: ".concat((i=g[p])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=g[v])===null||o===void 0?void 0:o.name);return M.createElement(ft,{tabIndex:0,role:"slider","aria-label":j,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(N){["ArrowLeft","ArrowRight"].includes(N.key)&&(N.preventDefault(),N.stopPropagation(),l.handleTravellerMoveKeyboard(N.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(m,y))}},{key:"renderSlide",value:function(r,a){var i=this.props,o=i.y,l=i.height,c=i.stroke,u=i.travellerWidth,d=Math.min(r,a)+u,h=Math.max(Math.abs(a-r)-u,0);return M.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:o,width:h,height:l})}},{key:"renderText",value:function(){var r=this.props,a=r.startIndex,i=r.endIndex,o=r.y,l=r.height,c=r.travellerWidth,u=r.stroke,d=this.state,h=d.startX,m=d.endX,f=5,g={pointerEvents:"none",fill:u};return M.createElement(ft,{className:"recharts-brush-texts"},M.createElement(Gl,Fv({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,m)-f,y:o+l/2},g),this.getTextOfTick(a)),M.createElement(Gl,Fv({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,m)+c+f,y:o+l/2},g),this.getTextOfTick(i)))}},{key:"render",value:function(){var r=this.props,a=r.data,i=r.className,o=r.children,l=r.x,c=r.y,u=r.width,d=r.height,h=r.alwaysShowText,m=this.state,f=m.startX,g=m.endX,p=m.isTextActive,v=m.isSlideMoving,x=m.isTravellerMoving,y=m.isTravellerFocused;if(!a||!a.length||!xe(l)||!xe(c)||!xe(u)||!xe(d)||u<=0||d<=0)return null;var j=Ze("recharts-brush",i),w=M.Children.count(o)===1,N=U1e("userSelect","none");return M.createElement(ft,{className:j,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:N},this.renderBackground(),w&&this.renderPanorama(),this.renderSlide(f,g),this.renderTravellerLayer(f,"startX"),this.renderTravellerLayer(g,"endX"),(p||v||x||y||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var a=r.x,i=r.y,o=r.width,l=r.height,c=r.stroke,u=Math.floor(i+l/2)-1;return M.createElement(M.Fragment,null,M.createElement("rect",{x:a,y:i,width:o,height:l,fill:c,stroke:"none"}),M.createElement("line",{x1:a+1,y1:u,x2:a+o-1,y2:u,fill:"none",stroke:"#fff"}),M.createElement("line",{x1:a+1,y1:u+2,x2:a+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,a){var i;return M.isValidElement(r)?i=M.cloneElement(r,a):He(r)?i=r(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(r,a){var i=r.data,o=r.width,l=r.x,c=r.travellerWidth,u=r.updateId,d=r.startIndex,h=r.endIndex;if(i!==a.prevData||u!==a.prevUpdateId)return pj({prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},i&&i.length?J1e({data:i,width:o,x:l,travellerWidth:c,startIndex:d,endIndex:h}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var m=a.scale.domain().map(function(f){return a.scale(f)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:a.scale(r.startIndex),endX:a.scale(r.endIndex),scaleValues:m}}return null}},{key:"getIndexInRange",value:function(r,a){for(var i=r.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);r[c]>a?l=c:o=c}return a>=r[l]?l:o}}])}(b.PureComponent);es(ed,"displayName","Brush");es(ed,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Z1e=j2;function eSe(e,t){var n;return Z1e(e,function(r,a,i){return n=t(r,a,i),!n}),!!n}var tSe=eSe,nSe=rL,rSe=Wa,sSe=tSe,aSe=Gr,iSe=yy;function oSe(e,t,n){var r=aSe(e)?nSe:sSe;return n&&iSe(e,t,n)&&(t=void 0),r(e,rSe(t))}var lSe=oSe;const cSe=Ct(lSe);var Fa=function(t,n){var r=t.alwaysShow,a=t.ifOverflow;return r&&(a="extendDomain"),a===n},CE=_L;function uSe(e,t,n){t=="__proto__"&&CE?CE(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var dSe=uSe,hSe=dSe,mSe=NL,fSe=Wa;function pSe(e,t){var n={};return t=fSe(t),mSe(e,function(r,a,i){hSe(n,a,t(r,a,i))}),n}var gSe=pSe;const vSe=Ct(gSe);function xSe(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}var ySe=xSe,jSe=j2;function bSe(e,t){var n=!0;return jSe(e,function(r,a,i){return n=!!t(r,a,i),n}),n}var wSe=bSe,NSe=ySe,SSe=wSe,_Se=Wa,CSe=Gr,PSe=yy;function ASe(e,t,n){var r=CSe(e)?NSe:SSe;return n&&PSe(e,t,n)&&(t=void 0),r(e,_Se(t))}var kSe=ASe;const g6=Ct(kSe);var TSe=["x","y"];function Jm(e){"@babel/helpers - typeof";return Jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jm(e)}function SN(){return SN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},SN.apply(this,arguments)}function PE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ph(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?PE(Object(n),!0).forEach(function(r){ESe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ESe(e,t,n){return t=OSe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function OSe(e){var t=DSe(e,"string");return Jm(t)=="symbol"?t:t+""}function DSe(e,t){if(Jm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Jm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function MSe(e,t){if(e==null)return{};var n=ISe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ISe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function $Se(e,t){var n=e.x,r=e.y,a=MSe(e,TSe),i="".concat(n),o=parseInt(i,10),l="".concat(r),c=parseInt(l,10),u="".concat(t.height||a.height),d=parseInt(u,10),h="".concat(t.width||a.width),m=parseInt(h,10);return ph(ph(ph(ph(ph({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:m,name:t.name,radius:t.radius})}function AE(e){return M.createElement(c6,SN({shapeType:"rectangle",propTransformer:$Se,activeClassName:"recharts-active-bar"},e))}var RSe=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,a){if(typeof t=="number")return t;var i=xe(r)||cae(r);return i?t(r,a):(i||Xl(),n)}},FSe=["value","background"],v6;function td(e){"@babel/helpers - typeof";return td=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},td(e)}function LSe(e,t){if(e==null)return{};var n=BSe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function BSe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Bv(){return Bv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bv.apply(this,arguments)}function kE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function jn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kE(Object(n),!0).forEach(function(r){fo(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y6(r.key),r)}}function VSe(e,t,n){return t&&TE(e.prototype,t),n&&TE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function qSe(e,t,n){return t=zv(t),USe(e,x6()?Reflect.construct(t,n||[],zv(e).constructor):t.apply(e,n))}function USe(e,t){if(t&&(td(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WSe(e)}function WSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(x6=function(){return!!e})()}function zv(e){return zv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},zv(e)}function HSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_N(e,t)}function _N(e,t){return _N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},_N(e,t)}function fo(e,t,n){return t=y6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y6(e){var t=KSe(e,"string");return td(t)=="symbol"?t:t+""}function KSe(e,t){if(td(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(td(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Aa=function(e){function t(){var n;zSe(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=qSe(this,t,[].concat(a)),fo(n,"state",{isAnimationFinished:!1}),fo(n,"id",uc("recharts-bar-")),fo(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),fo(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return HSe(t,e),VSe(t,[{key:"renderRectanglesStatically",value:function(r){var a=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,u=i.activeBar,d=Le(this.props,!1);return r&&r.map(function(h,m){var f=m===c,g=f?u:o,p=jn(jn(jn({},d),h),{},{isActive:f,option:g,index:m,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return M.createElement(ft,Bv({className:"recharts-bar-rectangle"},Kl(a.props,h,m),{key:"rectangle-".concat(h==null?void 0:h.x,"-").concat(h==null?void 0:h.y,"-").concat(h==null?void 0:h.value,"-").concat(m)}),M.createElement(AE,p))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,a=this.props,i=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,u=a.animationDuration,d=a.animationEasing,h=a.animationId,m=this.state.prevData;return M.createElement(ia,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(f){var g=f.t,p=i.map(function(v,x){var y=m&&m[x];if(y){var j=Dn(y.x,v.x),w=Dn(y.y,v.y),N=Dn(y.width,v.width),_=Dn(y.height,v.height);return jn(jn({},v),{},{x:j(g),y:w(g),width:N(g),height:_(g)})}if(o==="horizontal"){var S=Dn(0,v.height),C=S(g);return jn(jn({},v),{},{y:v.y+v.height-C,height:C})}var A=Dn(0,v.width),T=A(g);return jn(jn({},v),{},{width:T})});return M.createElement(ft,null,r.renderRectanglesStatically(p))})}},{key:"renderRectangles",value:function(){var r=this.props,a=r.data,i=r.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!Yl(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var r=this,a=this.props,i=a.data,o=a.dataKey,l=a.activeIndex,c=Le(this.props.background,!1);return i.map(function(u,d){u.value;var h=u.background,m=LSe(u,FSe);if(!h)return null;var f=jn(jn(jn(jn(jn({},m),{},{fill:"#eee"},h),c),Kl(r.props,u,d)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return M.createElement(AE,Bv({key:"background-bar-".concat(d),option:r.props.background,isActive:d===l},f))})}},{key:"renderErrorBar",value:function(r,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,h=us(d,Df);if(!h)return null;var m=u==="vertical"?o[0].height/2:o[0].width/2,f=function(v,x){var y=Array.isArray(v.value)?v.value[1]:v.value;return{x:v.x,y:v.y,value:y,errorVal:pn(v,x)}},g={clipPath:r?"url(#clipPath-".concat(a,")"):null};return M.createElement(ft,g,h.map(function(p){return M.cloneElement(p,{key:"error-bar-".concat(a,"-").concat(p.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:m,dataPointFormatter:f})}))}},{key:"render",value:function(){var r=this.props,a=r.hide,i=r.data,o=r.className,l=r.xAxis,c=r.yAxis,u=r.left,d=r.top,h=r.width,m=r.height,f=r.isAnimationActive,g=r.background,p=r.id;if(a||!i||!i.length)return null;var v=this.state.isAnimationFinished,x=Ze("recharts-bar",o),y=l&&l.allowDataOverflow,j=c&&c.allowDataOverflow,w=y||j,N=Ye(p)?this.id:p;return M.createElement(ft,{className:x},y||j?M.createElement("defs",null,M.createElement("clipPath",{id:"clipPath-".concat(N)},M.createElement("rect",{x:y?u:u-h/2,y:j?d:d-m/2,width:y?h:h*2,height:j?m:m*2}))):null,M.createElement(ft,{className:"recharts-bar-rectangles",clipPath:w?"url(#clipPath-".concat(N,")"):null},g?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(w,N),(!f||v)&&Ra.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(r,a){return r.animationId!==a.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:a.curData}:r.data!==a.curData?{curData:r.data}:null}}])}(b.PureComponent);v6=Aa;fo(Aa,"displayName","Bar");fo(Aa,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!ta.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});fo(Aa,"getComposedData",function(e){var t=e.props,n=e.item,r=e.barPosition,a=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,h=e.displayedData,m=e.offset,f=P0e(r,n);if(!f)return null;var g=t.layout,p=n.type.defaultProps,v=p!==void 0?jn(jn({},p),n.props):n.props,x=v.dataKey,y=v.children,j=v.minPointSize,w=g==="horizontal"?o:i,N=u?w.scale.domain():null,_=M0e({numericAxis:w}),S=us(y,Ld),C=h.map(function(A,T){var E,k,R,I,W,V;u?E=A0e(u[d+T],N):(E=pn(A,x),Array.isArray(E)||(E=[_,E]));var q=RSe(j,v6.defaultProps.minPointSize)(E[1],T);if(g==="horizontal"){var P,O=[o.scale(E[0]),o.scale(E[1])],B=O[0],U=O[1];k=yT({axis:i,ticks:l,bandSize:a,offset:f.offset,entry:A,index:T}),R=(P=U??B)!==null&&P!==void 0?P:void 0,I=f.size;var X=B-U;if(W=Number.isNaN(X)?0:X,V={x:k,y:o.y,width:I,height:o.height},Math.abs(q)>0&&Math.abs(W)<Math.abs(q)){var ie=wr(W||q)*(Math.abs(q)-Math.abs(W));R-=ie,W+=ie}}else{var re=[i.scale(E[0]),i.scale(E[1])],de=re[0],pe=re[1];if(k=de,R=yT({axis:o,ticks:c,bandSize:a,offset:f.offset,entry:A,index:T}),I=pe-de,W=f.size,V={x:i.x,y:R,width:i.width,height:W},Math.abs(q)>0&&Math.abs(I)<Math.abs(q)){var ce=wr(I||q)*(Math.abs(q)-Math.abs(I));I+=ce}}return jn(jn(jn({},A),{},{x:k,y:R,width:I,height:W,value:u?E:E[1],payload:A,background:V},S&&S[T]&&S[T].props),{},{tooltipPayload:[z5(n,A)],tooltipPosition:{x:k+I/2,y:R+W/2}})});return jn({data:C,layout:g},m)});function Zm(e){"@babel/helpers - typeof";return Zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zm(e)}function GSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,j6(r.key),r)}}function YSe(e,t,n){return t&&EE(e.prototype,t),n&&EE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function OE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Hs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OE(Object(n),!0).forEach(function(r){$y(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $y(e,t,n){return t=j6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j6(e){var t=QSe(e,"string");return Zm(t)=="symbol"?t:t+""}function QSe(e,t){if(Zm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Zm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Y2=function(t,n,r,a,i){var o=t.width,l=t.height,c=t.layout,u=t.children,d=Object.keys(n),h={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:l-r.bottom,bottomMirror:l-r.bottom},m=!!ns(u,Aa);return d.reduce(function(f,g){var p=n[g],v=p.orientation,x=p.domain,y=p.padding,j=y===void 0?{}:y,w=p.mirror,N=p.reversed,_="".concat(v).concat(w?"Mirror":""),S,C,A,T,E;if(p.type==="number"&&(p.padding==="gap"||p.padding==="no-gap")){var k=x[1]-x[0],R=1/0,I=p.categoricalDomain.sort(hae);if(I.forEach(function(re,de){de>0&&(R=Math.min((re||0)-(I[de-1]||0),R))}),Number.isFinite(R)){var W=R/k,V=p.layout==="vertical"?r.height:r.width;if(p.padding==="gap"&&(S=W*V/2),p.padding==="no-gap"){var q=Nr(t.barCategoryGap,W*V),P=W*V/2;S=P-q-(P-q)/V*q}}}a==="xAxis"?C=[r.left+(j.left||0)+(S||0),r.left+r.width-(j.right||0)-(S||0)]:a==="yAxis"?C=c==="horizontal"?[r.top+r.height-(j.bottom||0),r.top+(j.top||0)]:[r.top+(j.top||0)+(S||0),r.top+r.height-(j.bottom||0)-(S||0)]:C=p.range,N&&(C=[C[1],C[0]]);var O=R5(p,i,m),B=O.scale,U=O.realScaleType;B.domain(x).range(C),F5(B);var X=L5(B,Hs(Hs({},p),{},{realScaleType:U}));a==="xAxis"?(E=v==="top"&&!w||v==="bottom"&&w,A=r.left,T=h[_]-E*p.height):a==="yAxis"&&(E=v==="left"&&!w||v==="right"&&w,A=h[_]-E*p.width,T=r.top);var ie=Hs(Hs(Hs({},p),X),{},{realScaleType:U,x:A,y:T,scale:B,width:a==="xAxis"?r.width:p.width,height:a==="yAxis"?r.height:p.height});return ie.bandSize=_v(ie,X),!p.hide&&a==="xAxis"?h[_]+=(E?-1:1)*ie.height:p.hide||(h[_]+=(E?-1:1)*ie.width),Hs(Hs({},f),{},$y({},g,ie))},{})},b6=function(t,n){var r=t.x,a=t.y,i=n.x,o=n.y;return{x:Math.min(r,i),y:Math.min(a,o),width:Math.abs(i-r),height:Math.abs(o-a)}},XSe=function(t){var n=t.x1,r=t.y1,a=t.x2,i=t.y2;return b6({x:n,y:r},{x:a,y:i})},w6=function(){function e(t){GSe(this,e),this.scale=t}return YSe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=r.bandAware,i=r.position;if(n!==void 0){if(i)switch(i){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),a=r[0],i=r[r.length-1];return a<=i?n>=a&&n<=i:n>=i&&n<=a}}],[{key:"create",value:function(n){return new e(n)}}])}();$y(w6,"EPS",1e-4);var Q2=function(t){var n=Object.keys(t).reduce(function(r,a){return Hs(Hs({},r),{},$y({},a,w6.create(t[a])))},{});return Hs(Hs({},n),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return vSe(a,function(c,u){return n[u].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return g6(a,function(i,o){return n[o].isInRange(i)})}})};function JSe(e){return(e%180+180)%180}var ZSe=function(t){var n=t.width,r=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=JSe(a),o=i*Math.PI/180,l=Math.atan(r/n),c=o>l&&o<Math.PI-l?r/Math.sin(o):n/Math.cos(o);return Math.abs(c)},e2e=Wa,t2e=Af,n2e=vy;function r2e(e){return function(t,n,r){var a=Object(t);if(!t2e(t)){var i=e2e(n);t=n2e(t),n=function(l){return i(a[l],l,a)}}var o=e(t,n,r);return o>-1?a[i?t[o]:o]:void 0}}var s2e=r2e,a2e=h6;function i2e(e){var t=a2e(e),n=t%1;return t===t?n?t-n:t:0}var o2e=i2e,l2e=vL,c2e=Wa,u2e=o2e,d2e=Math.max;function h2e(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var a=n==null?0:u2e(n);return a<0&&(a=d2e(r+a,0)),l2e(e,c2e(t),a)}var m2e=h2e,f2e=s2e,p2e=m2e,g2e=f2e(p2e),v2e=g2e;const x2e=Ct(v2e);var y2e=mse(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),X2=b.createContext(void 0),J2=b.createContext(void 0),N6=b.createContext(void 0),S6=b.createContext({}),_6=b.createContext(void 0),C6=b.createContext(0),P6=b.createContext(0),DE=function(t){var n=t.state,r=n.xAxisMap,a=n.yAxisMap,i=n.offset,o=t.clipPathId,l=t.children,c=t.width,u=t.height,d=y2e(i);return M.createElement(X2.Provider,{value:r},M.createElement(J2.Provider,{value:a},M.createElement(S6.Provider,{value:i},M.createElement(N6.Provider,{value:d},M.createElement(_6.Provider,{value:o},M.createElement(C6.Provider,{value:u},M.createElement(P6.Provider,{value:c},l)))))))},j2e=function(){return b.useContext(_6)},A6=function(t){var n=b.useContext(X2);n==null&&Xl();var r=n[t];return r==null&&Xl(),r},b2e=function(){var t=b.useContext(X2);return Zi(t)},w2e=function(){var t=b.useContext(J2),n=x2e(t,function(r){return g6(r.domain,Number.isFinite)});return n||Zi(t)},k6=function(t){var n=b.useContext(J2);n==null&&Xl();var r=n[t];return r==null&&Xl(),r},N2e=function(){var t=b.useContext(N6);return t},S2e=function(){return b.useContext(S6)},Z2=function(){return b.useContext(P6)},e_=function(){return b.useContext(C6)};function nd(e){"@babel/helpers - typeof";return nd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nd(e)}function _2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C2e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,E6(r.key),r)}}function P2e(e,t,n){return t&&C2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function A2e(e,t,n){return t=Vv(t),k2e(e,T6()?Reflect.construct(t,n||[],Vv(e).constructor):t.apply(e,n))}function k2e(e,t){if(t&&(nd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return T2e(e)}function T2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(T6=function(){return!!e})()}function Vv(e){return Vv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Vv(e)}function E2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&CN(e,t)}function CN(e,t){return CN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},CN(e,t)}function ME(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function IE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ME(Object(n),!0).forEach(function(r){t_(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ME(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function t_(e,t,n){return t=E6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E6(e){var t=O2e(e,"string");return nd(t)=="symbol"?t:t+""}function O2e(e,t){if(nd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(nd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function D2e(e,t){return R2e(e)||$2e(e,t)||I2e(e,t)||M2e()}function M2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I2e(e,t){if(e){if(typeof e=="string")return $E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $E(e,t)}}function $E(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $2e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function R2e(e){if(Array.isArray(e))return e}function PN(){return PN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},PN.apply(this,arguments)}var F2e=function(t,n){var r;return M.isValidElement(t)?r=M.cloneElement(t,n):He(t)?r=t(n):r=M.createElement("line",PN({},n,{className:"recharts-reference-line-line"})),r},L2e=function(t,n,r,a,i,o,l,c,u){var d=i.x,h=i.y,m=i.width,f=i.height;if(r){var g=u.y,p=t.y.apply(g,{position:o});if(Fa(u,"discard")&&!t.y.isInRange(p))return null;var v=[{x:d+m,y:p},{x:d,y:p}];return c==="left"?v.reverse():v}if(n){var x=u.x,y=t.x.apply(x,{position:o});if(Fa(u,"discard")&&!t.x.isInRange(y))return null;var j=[{x:y,y:h+f},{x:y,y:h}];return l==="top"?j.reverse():j}if(a){var w=u.segment,N=w.map(function(_){return t.apply(_,{position:o})});return Fa(u,"discard")&&cSe(N,function(_){return!t.isInRange(_)})?null:N}return null};function B2e(e){var t=e.x,n=e.y,r=e.segment,a=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=j2e(),d=A6(a),h=k6(i),m=N2e();if(!u||!m)return null;ea(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=Q2({x:d.scale,y:h.scale}),g=$n(t),p=$n(n),v=r&&r.length===2,x=L2e(f,g,p,v,m,e.position,d.orientation,h.orientation,e);if(!x)return null;var y=D2e(x,2),j=y[0],w=j.x,N=j.y,_=y[1],S=_.x,C=_.y,A=Fa(e,"hidden")?"url(#".concat(u,")"):void 0,T=IE(IE({clipPath:A},Le(e,!0)),{},{x1:w,y1:N,x2:S,y2:C});return M.createElement(ft,{className:Ze("recharts-reference-line",l)},F2e(o,T),Wn.renderCallByParent(e,XSe({x1:w,y1:N,x2:S,y2:C})))}var n_=function(e){function t(){return _2e(this,t),A2e(this,t,arguments)}return E2e(t,e),P2e(t,[{key:"render",value:function(){return M.createElement(B2e,this.props)}}])}(M.Component);t_(n_,"displayName","ReferenceLine");t_(n_,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function AN(){return AN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},AN.apply(this,arguments)}function rd(e){"@babel/helpers - typeof";return rd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rd(e)}function RE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function FE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?RE(Object(n),!0).forEach(function(r){Ry(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function z2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V2e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,D6(r.key),r)}}function q2e(e,t,n){return t&&V2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function U2e(e,t,n){return t=qv(t),W2e(e,O6()?Reflect.construct(t,n||[],qv(e).constructor):t.apply(e,n))}function W2e(e,t){if(t&&(rd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return H2e(e)}function H2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(O6=function(){return!!e})()}function qv(e){return qv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qv(e)}function K2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kN(e,t)}function kN(e,t){return kN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},kN(e,t)}function Ry(e,t,n){return t=D6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D6(e){var t=G2e(e,"string");return rd(t)=="symbol"?t:t+""}function G2e(e,t){if(rd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(rd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Y2e=function(t){var n=t.x,r=t.y,a=t.xAxis,i=t.yAxis,o=Q2({x:a.scale,y:i.scale}),l=o.apply({x:n,y:r},{bandAware:!0});return Fa(t,"discard")&&!o.isInRange(l)?null:l},Fy=function(e){function t(){return z2e(this,t),U2e(this,t,arguments)}return K2e(t,e),q2e(t,[{key:"render",value:function(){var r=this.props,a=r.x,i=r.y,o=r.r,l=r.alwaysShow,c=r.clipPathId,u=$n(a),d=$n(i);if(ea(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var h=Y2e(this.props);if(!h)return null;var m=h.x,f=h.y,g=this.props,p=g.shape,v=g.className,x=Fa(this.props,"hidden")?"url(#".concat(c,")"):void 0,y=FE(FE({clipPath:x},Le(this.props,!0)),{},{cx:m,cy:f});return M.createElement(ft,{className:Ze("recharts-reference-dot",v)},t.renderDot(p,y),Wn.renderCallByParent(this.props,{x:m-o,y:f-o,width:2*o,height:2*o}))}}])}(M.Component);Ry(Fy,"displayName","ReferenceDot");Ry(Fy,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Ry(Fy,"renderDot",function(e,t){var n;return M.isValidElement(e)?n=M.cloneElement(e,t):He(e)?n=e(t):n=M.createElement(Mf,AN({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function TN(){return TN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},TN.apply(this,arguments)}function sd(e){"@babel/helpers - typeof";return sd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sd(e)}function LE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function BE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LE(Object(n),!0).forEach(function(r){Ly(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Q2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X2e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,I6(r.key),r)}}function J2e(e,t,n){return t&&X2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Z2e(e,t,n){return t=Uv(t),e_e(e,M6()?Reflect.construct(t,n||[],Uv(e).constructor):t.apply(e,n))}function e_e(e,t){if(t&&(sd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return t_e(e)}function t_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(M6=function(){return!!e})()}function Uv(e){return Uv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Uv(e)}function n_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&EN(e,t)}function EN(e,t){return EN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},EN(e,t)}function Ly(e,t,n){return t=I6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I6(e){var t=r_e(e,"string");return sd(t)=="symbol"?t:t+""}function r_e(e,t){if(sd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(sd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var s_e=function(t,n,r,a,i){var o=i.x1,l=i.x2,c=i.y1,u=i.y2,d=i.xAxis,h=i.yAxis;if(!d||!h)return null;var m=Q2({x:d.scale,y:h.scale}),f={x:t?m.x.apply(o,{position:"start"}):m.x.rangeMin,y:r?m.y.apply(c,{position:"start"}):m.y.rangeMin},g={x:n?m.x.apply(l,{position:"end"}):m.x.rangeMax,y:a?m.y.apply(u,{position:"end"}):m.y.rangeMax};return Fa(i,"discard")&&(!m.isInRange(f)||!m.isInRange(g))?null:b6(f,g)},By=function(e){function t(){return Q2e(this,t),Z2e(this,t,arguments)}return n_e(t,e),J2e(t,[{key:"render",value:function(){var r=this.props,a=r.x1,i=r.x2,o=r.y1,l=r.y2,c=r.className,u=r.alwaysShow,d=r.clipPathId;ea(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=$n(a),m=$n(i),f=$n(o),g=$n(l),p=this.props.shape;if(!h&&!m&&!f&&!g&&!p)return null;var v=s_e(h,m,f,g,this.props);if(!v&&!p)return null;var x=Fa(this.props,"hidden")?"url(#".concat(d,")"):void 0;return M.createElement(ft,{className:Ze("recharts-reference-area",c)},t.renderRect(p,BE(BE({clipPath:x},Le(this.props,!0)),v)),Wn.renderCallByParent(this.props,v))}}])}(M.Component);Ly(By,"displayName","ReferenceArea");Ly(By,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Ly(By,"renderRect",function(e,t){var n;return M.isValidElement(e)?n=M.cloneElement(e,t):He(e)?n=e(t):n=M.createElement(G2,TN({},t,{className:"recharts-reference-area-rect"})),n});function $6(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],a=0;a<e.length;a+=t)r.push(e[a]);return r}function a_e(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return ZSe(r,n)}function i_e(e,t,n){var r=n==="width",a=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:r?a:i,end:r?a+o:i+l}:{start:r?a+o:i+l,end:r?a:i}}function Wv(e,t,n,r,a){if(e*t<e*r||e*t>e*a)return!1;var i=n();return e*(t-e*i/2-r)>=0&&e*(t+e*i/2-a)<=0}function o_e(e,t){return $6(e,t+1)}function l_e(e,t,n,r,a){for(var i=(r||[]).slice(),o=t.start,l=t.end,c=0,u=1,d=o,h=function(){var g=r==null?void 0:r[c];if(g===void 0)return{v:$6(r,u)};var p=c,v,x=function(){return v===void 0&&(v=n(g,p)),v},y=g.coordinate,j=c===0||Wv(e,y,x,d,l);j||(c=0,d=o,u+=1),j&&(d=y+e*(x()/2+a),c+=u)},m;u<=i.length;)if(m=h(),m)return m.v;return[]}function ef(e){"@babel/helpers - typeof";return ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ef(e)}function zE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ir(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zE(Object(n),!0).forEach(function(r){c_e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function c_e(e,t,n){return t=u_e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u_e(e){var t=d_e(e,"string");return ef(t)=="symbol"?t:t+""}function d_e(e,t){if(ef(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ef(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function h_e(e,t,n,r,a){for(var i=(r||[]).slice(),o=i.length,l=t.start,c=t.end,u=function(m){var f=i[m],g,p=function(){return g===void 0&&(g=n(f,m)),g};if(m===o-1){var v=e*(f.coordinate+e*p()/2-c);i[m]=f=ir(ir({},f),{},{tickCoord:v>0?f.coordinate-v*e:f.coordinate})}else i[m]=f=ir(ir({},f),{},{tickCoord:f.coordinate});var x=Wv(e,f.tickCoord,p,l,c);x&&(c=f.tickCoord-e*(p()/2+a),i[m]=ir(ir({},f),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return i}function m_e(e,t,n,r,a,i){var o=(r||[]).slice(),l=o.length,c=t.start,u=t.end;if(i){var d=r[l-1],h=n(d,l-1),m=e*(d.coordinate+e*h/2-u);o[l-1]=d=ir(ir({},d),{},{tickCoord:m>0?d.coordinate-m*e:d.coordinate});var f=Wv(e,d.tickCoord,function(){return h},c,u);f&&(u=d.tickCoord-e*(h/2+a),o[l-1]=ir(ir({},d),{},{isShow:!0}))}for(var g=i?l-1:l,p=function(y){var j=o[y],w,N=function(){return w===void 0&&(w=n(j,y)),w};if(y===0){var _=e*(j.coordinate-e*N()/2-c);o[y]=j=ir(ir({},j),{},{tickCoord:_<0?j.coordinate-_*e:j.coordinate})}else o[y]=j=ir(ir({},j),{},{tickCoord:j.coordinate});var S=Wv(e,j.tickCoord,N,c,u);S&&(c=j.tickCoord+e*(N()/2+a),o[y]=ir(ir({},j),{},{isShow:!0}))},v=0;v<g;v++)p(v);return o}function r_(e,t,n){var r=e.tick,a=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,d=e.unit,h=e.angle;if(!a||!a.length||!r)return[];if(xe(c)||ta.isSsr)return o_e(a,typeof c=="number"&&xe(c)?c:0);var m=[],f=l==="top"||l==="bottom"?"width":"height",g=d&&f==="width"?zh(d,{fontSize:t,letterSpacing:n}):{width:0,height:0},p=function(j,w){var N=He(u)?u(j.value,w):j.value;return f==="width"?a_e(zh(N,{fontSize:t,letterSpacing:n}),g,h):zh(N,{fontSize:t,letterSpacing:n})[f]},v=a.length>=2?wr(a[1].coordinate-a[0].coordinate):1,x=i_e(i,v,f);return c==="equidistantPreserveStart"?l_e(v,x,p,a,o):(c==="preserveStart"||c==="preserveStartEnd"?m=m_e(v,x,p,a,o,c==="preserveStartEnd"):m=h_e(v,x,p,a,o),m.filter(function(y){return y.isShow}))}var f_e=["viewBox"],p_e=["viewBox"],g_e=["ticks"];function ad(e){"@babel/helpers - typeof";return ad=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ad(e)}function Yc(){return Yc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yc.apply(this,arguments)}function VE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Pn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VE(Object(n),!0).forEach(function(r){s_(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function gj(e,t){if(e==null)return{};var n=v_e(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function v_e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function x_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,F6(r.key),r)}}function y_e(e,t,n){return t&&qE(e.prototype,t),n&&qE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function j_e(e,t,n){return t=Hv(t),b_e(e,R6()?Reflect.construct(t,n||[],Hv(e).constructor):t.apply(e,n))}function b_e(e,t){if(t&&(ad(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return w_e(e)}function w_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(R6=function(){return!!e})()}function Hv(e){return Hv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Hv(e)}function N_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ON(e,t)}function ON(e,t){return ON=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},ON(e,t)}function s_(e,t,n){return t=F6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F6(e){var t=S_e(e,"string");return ad(t)=="symbol"?t:t+""}function S_e(e,t){if(ad(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ad(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qd=function(e){function t(n){var r;return x_e(this,t),r=j_e(this,t,[n]),r.state={fontSize:"",letterSpacing:""},r}return N_e(t,e),y_e(t,[{key:"shouldComponentUpdate",value:function(r,a){var i=r.viewBox,o=gj(r,f_e),l=this.props,c=l.viewBox,u=gj(l,p_e);return!ou(i,c)||!ou(o,u)||!ou(a,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var a=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var a=this.props,i=a.x,o=a.y,l=a.width,c=a.height,u=a.orientation,d=a.tickSize,h=a.mirror,m=a.tickMargin,f,g,p,v,x,y,j=h?-1:1,w=r.tickSize||d,N=xe(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":f=g=r.coordinate,v=o+ +!h*c,p=v-j*w,y=p-j*m,x=N;break;case"left":p=v=r.coordinate,g=i+ +!h*l,f=g-j*w,x=f-j*m,y=N;break;case"right":p=v=r.coordinate,g=i+ +h*l,f=g+j*w,x=f+j*m,y=N;break;default:f=g=r.coordinate,v=o+ +h*c,p=v+j*w,y=p+j*m,x=N;break}return{line:{x1:f,y1:p,x2:g,y2:v},tick:{x,y}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,a=r.orientation,i=r.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,a=r.orientation,i=r.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,a=r.x,i=r.y,o=r.width,l=r.height,c=r.orientation,u=r.mirror,d=r.axisLine,h=Pn(Pn(Pn({},Le(this.props,!1)),Le(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var m=+(c==="top"&&!u||c==="bottom"&&u);h=Pn(Pn({},h),{},{x1:a,y1:i+m*l,x2:a+o,y2:i+m*l})}else{var f=+(c==="left"&&!u||c==="right"&&u);h=Pn(Pn({},h),{},{x1:a+f*o,y1:i,x2:a+f*o,y2:i+l})}return M.createElement("line",Yc({},h,{className:Ze("recharts-cartesian-axis-line",cs(d,"className"))}))}},{key:"renderTicks",value:function(r,a,i){var o=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,h=l.tickFormatter,m=l.unit,f=r_(Pn(Pn({},this.props),{},{ticks:r}),a,i),g=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),v=Le(this.props,!1),x=Le(d,!1),y=Pn(Pn({},v),{},{fill:"none"},Le(c,!1)),j=f.map(function(w,N){var _=o.getTickLineCoord(w),S=_.line,C=_.tick,A=Pn(Pn(Pn(Pn({textAnchor:g,verticalAnchor:p},v),{},{stroke:"none",fill:u},x),C),{},{index:N,payload:w,visibleTicksCount:f.length,tickFormatter:h});return M.createElement(ft,Yc({className:"recharts-cartesian-axis-tick",key:"tick-".concat(w.value,"-").concat(w.coordinate,"-").concat(w.tickCoord)},Kl(o.props,w,N)),c&&M.createElement("line",Yc({},y,S,{className:Ze("recharts-cartesian-axis-tick-line",cs(c,"className"))})),d&&t.renderTickItem(d,A,"".concat(He(h)?h(w.value,N):w.value).concat(m||"")))});return M.createElement("g",{className:"recharts-cartesian-axis-ticks"},j)}},{key:"render",value:function(){var r=this,a=this.props,i=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,u=a.className,d=a.hide;if(d)return null;var h=this.props,m=h.ticks,f=gj(h,g_e),g=m;return He(c)&&(g=m&&m.length>0?c(this.props):c(f)),o<=0||l<=0||!g||!g.length?null:M.createElement(ft,{className:Ze("recharts-cartesian-axis",u),ref:function(v){r.layerReference=v}},i&&this.renderAxisLine(),this.renderTicks(g,this.state.fontSize,this.state.letterSpacing),Wn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,a,i){var o,l=Ze(a.className,"recharts-cartesian-axis-tick-value");return M.isValidElement(r)?o=M.cloneElement(r,Pn(Pn({},a),{},{className:l})):He(r)?o=r(Pn(Pn({},a),{},{className:l})):o=M.createElement(Gl,Yc({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(b.Component);s_(qd,"displayName","CartesianAxis");s_(qd,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var __e=["x1","y1","x2","y2","key"],C_e=["offset"];function Jl(e){"@babel/helpers - typeof";return Jl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jl(e)}function UE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ur(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?UE(Object(n),!0).forEach(function(r){P_e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function P_e(e,t,n){return t=A_e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A_e(e){var t=k_e(e,"string");return Jl(t)=="symbol"?t:t+""}function k_e(e,t){if(Jl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Jl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vl(){return vl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vl.apply(this,arguments)}function WE(e,t){if(e==null)return{};var n=T_e(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function T_e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var E_e=function(t){var n=t.fill;if(!n||n==="none")return null;var r=t.fillOpacity,a=t.x,i=t.y,o=t.width,l=t.height,c=t.ry;return M.createElement("rect",{x:a,y:i,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function L6(e,t){var n;if(M.isValidElement(e))n=M.cloneElement(e,t);else if(He(e))n=e(t);else{var r=t.x1,a=t.y1,i=t.x2,o=t.y2,l=t.key,c=WE(t,__e),u=Le(c,!1);u.offset;var d=WE(u,C_e);n=M.createElement("line",vl({},d,{x1:r,y1:a,x2:i,y2:o,fill:"none",key:l}))}return n}function O_e(e){var t=e.x,n=e.width,r=e.horizontal,a=r===void 0?!0:r,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var u=ur(ur({},e),{},{x1:t,y1:l,x2:t+n,y2:l,key:"line-".concat(c),index:c});return L6(a,u)});return M.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function D_e(e){var t=e.y,n=e.height,r=e.vertical,a=r===void 0?!0:r,i=e.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var u=ur(ur({},e),{},{x1:l,y1:t,x2:l,y2:t+n,key:"line-".concat(c),index:c});return L6(a,u)});return M.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function M_e(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,a=e.y,i=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var d=l.map(function(m){return Math.round(m+a-a)}).sort(function(m,f){return m-f});a!==d[0]&&d.unshift(0);var h=d.map(function(m,f){var g=!d[f+1],p=g?a+o-m:d[f+1]-m;if(p<=0)return null;var v=f%t.length;return M.createElement("rect",{key:"react-".concat(f),y:m,x:r,height:p,width:i,stroke:"none",fill:t[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return M.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function I_e(e){var t=e.vertical,n=t===void 0?!0:t,r=e.verticalFill,a=e.fillOpacity,i=e.x,o=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!n||!r||!r.length)return null;var d=u.map(function(m){return Math.round(m+i-i)}).sort(function(m,f){return m-f});i!==d[0]&&d.unshift(0);var h=d.map(function(m,f){var g=!d[f+1],p=g?i+l-m:d[f+1]-m;if(p<=0)return null;var v=f%r.length;return M.createElement("rect",{key:"react-".concat(f),x:m,y:o,width:p,height:c,stroke:"none",fill:r[v],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return M.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var $_e=function(t,n){var r=t.xAxis,a=t.width,i=t.height,o=t.offset;return $5(r_(ur(ur(ur({},qd.defaultProps),r),{},{ticks:di(r,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,n)},R_e=function(t,n){var r=t.yAxis,a=t.width,i=t.height,o=t.offset;return $5(r_(ur(ur(ur({},qd.defaultProps),r),{},{ticks:di(r,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,n)},Tc={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Zl(e){var t,n,r,a,i,o,l=Z2(),c=e_(),u=S2e(),d=ur(ur({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Tc.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:Tc.fill,horizontal:(r=e.horizontal)!==null&&r!==void 0?r:Tc.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:Tc.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:Tc.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:Tc.verticalFill,x:xe(e.x)?e.x:u.left,y:xe(e.y)?e.y:u.top,width:xe(e.width)?e.width:u.width,height:xe(e.height)?e.height:u.height}),h=d.x,m=d.y,f=d.width,g=d.height,p=d.syncWithTicks,v=d.horizontalValues,x=d.verticalValues,y=b2e(),j=w2e();if(!xe(f)||f<=0||!xe(g)||g<=0||!xe(h)||h!==+h||!xe(m)||m!==+m)return null;var w=d.verticalCoordinatesGenerator||$_e,N=d.horizontalCoordinatesGenerator||R_e,_=d.horizontalPoints,S=d.verticalPoints;if((!_||!_.length)&&He(N)){var C=v&&v.length,A=N({yAxis:j?ur(ur({},j),{},{ticks:C?v:j.ticks}):void 0,width:l,height:c,offset:u},C?!0:p);ea(Array.isArray(A),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Jl(A),"]")),Array.isArray(A)&&(_=A)}if((!S||!S.length)&&He(w)){var T=x&&x.length,E=w({xAxis:y?ur(ur({},y),{},{ticks:T?x:y.ticks}):void 0,width:l,height:c,offset:u},T?!0:p);ea(Array.isArray(E),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Jl(E),"]")),Array.isArray(E)&&(S=E)}return M.createElement("g",{className:"recharts-cartesian-grid"},M.createElement(E_e,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),M.createElement(O_e,vl({},d,{offset:u,horizontalPoints:_,xAxis:y,yAxis:j})),M.createElement(D_e,vl({},d,{offset:u,verticalPoints:S,xAxis:y,yAxis:j})),M.createElement(M_e,vl({},d,{horizontalPoints:_})),M.createElement(I_e,vl({},d,{verticalPoints:S})))}Zl.displayName="CartesianGrid";var F_e=["type","layout","connectNulls","ref"],L_e=["key"];function id(e){"@babel/helpers - typeof";return id=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},id(e)}function HE(e,t){if(e==null)return{};var n=B_e(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function B_e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Kh(){return Kh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kh.apply(this,arguments)}function KE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Zr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KE(Object(n),!0).forEach(function(r){Ks(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ec(e){return U_e(e)||q_e(e)||V_e(e)||z_e()}function z_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V_e(e,t){if(e){if(typeof e=="string")return DN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DN(e,t)}}function q_e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function U_e(e){if(Array.isArray(e))return DN(e)}function DN(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function W_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function GE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,z6(r.key),r)}}function H_e(e,t,n){return t&&GE(e.prototype,t),n&&GE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function K_e(e,t,n){return t=Kv(t),G_e(e,B6()?Reflect.construct(t,n||[],Kv(e).constructor):t.apply(e,n))}function G_e(e,t){if(t&&(id(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Y_e(e)}function Y_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(B6=function(){return!!e})()}function Kv(e){return Kv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Kv(e)}function Q_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&MN(e,t)}function MN(e,t){return MN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},MN(e,t)}function Ks(e,t,n){return t=z6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z6(e){var t=X_e(e,"string");return id(t)=="symbol"?t:t+""}function X_e(e,t){if(id(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(id(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var od=function(e){function t(){var n;W_e(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=K_e(this,t,[].concat(a)),Ks(n,"state",{isAnimationFinished:!0,totalLength:0}),Ks(n,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),Ks(n,"getStrokeDasharray",function(o,l,c){var u=c.reduce(function(x,y){return x+y});if(!u)return n.generateSimpleStrokeDasharray(l,o);for(var d=Math.floor(o/u),h=o%u,m=l-o,f=[],g=0,p=0;g<c.length;p+=c[g],++g)if(p+c[g]>h){f=[].concat(Ec(c.slice(0,g)),[h-p]);break}var v=f.length%2===0?[0,m]:[m];return[].concat(Ec(t.repeat(c,d)),Ec(f),v).map(function(x){return"".concat(x,"px")}).join(", ")}),Ks(n,"id",uc("recharts-line-")),Ks(n,"pathRef",function(o){n.mainCurve=o}),Ks(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Ks(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return Q_e(t,e),H_e(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,h=us(d,Df);if(!h)return null;var m=function(p,v){return{x:p.x,y:p.y,value:p.value,errorVal:pn(p.payload,v)}},f={clipPath:r?"url(#clipPath-".concat(a,")"):null};return M.createElement(ft,f,h.map(function(g){return M.cloneElement(g,{key:"bar-".concat(g.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,dataPointFormatter:m})}))}},{key:"renderDots",value:function(r,a,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,u=l.points,d=l.dataKey,h=Le(this.props,!1),m=Le(c,!0),f=u.map(function(p,v){var x=Zr(Zr(Zr({key:"dot-".concat(v),r:3},h),m),{},{index:v,cx:p.x,cy:p.y,value:p.value,dataKey:d,payload:p.payload,points:u});return t.renderDotItem(c,x)}),g={clipPath:r?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return M.createElement(ft,Kh({className:"recharts-line-dots",key:"dots"},g),f)}},{key:"renderCurveStatically",value:function(r,a,i,o){var l=this.props,c=l.type,u=l.layout,d=l.connectNulls;l.ref;var h=HE(l,F_e),m=Zr(Zr(Zr({},Le(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(i,")"):null,points:r},o),{},{type:c,layout:u,connectNulls:d});return M.createElement(Ol,Kh({},m,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,a){var i=this,o=this.props,l=o.points,c=o.strokeDasharray,u=o.isAnimationActive,d=o.animationBegin,h=o.animationDuration,m=o.animationEasing,f=o.animationId,g=o.animateNewValues,p=o.width,v=o.height,x=this.state,y=x.prevPoints,j=x.totalLength;return M.createElement(ia,{begin:d,duration:h,isActive:u,easing:m,from:{t:0},to:{t:1},key:"line-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(w){var N=w.t;if(y){var _=y.length/l.length,S=l.map(function(k,R){var I=Math.floor(R*_);if(y[I]){var W=y[I],V=Dn(W.x,k.x),q=Dn(W.y,k.y);return Zr(Zr({},k),{},{x:V(N),y:q(N)})}if(g){var P=Dn(p*2,k.x),O=Dn(v/2,k.y);return Zr(Zr({},k),{},{x:P(N),y:O(N)})}return Zr(Zr({},k),{},{x:k.x,y:k.y})});return i.renderCurveStatically(S,r,a)}var C=Dn(0,j),A=C(N),T;if(c){var E="".concat(c).split(/[,\s]+/gim).map(function(k){return parseFloat(k)});T=i.getStrokeDasharray(A,j,E)}else T=i.generateSimpleStrokeDasharray(j,A);return i.renderCurveStatically(l,r,a,{strokeDasharray:T})})}},{key:"renderCurve",value:function(r,a){var i=this.props,o=i.points,l=i.isAnimationActive,c=this.state,u=c.prevPoints,d=c.totalLength;return l&&o&&o.length&&(!u&&d>0||!Yl(u,o))?this.renderCurveWithAnimation(r,a):this.renderCurveStatically(o,r,a)}},{key:"render",value:function(){var r,a=this.props,i=a.hide,o=a.dot,l=a.points,c=a.className,u=a.xAxis,d=a.yAxis,h=a.top,m=a.left,f=a.width,g=a.height,p=a.isAnimationActive,v=a.id;if(i||!l||!l.length)return null;var x=this.state.isAnimationFinished,y=l.length===1,j=Ze("recharts-line",c),w=u&&u.allowDataOverflow,N=d&&d.allowDataOverflow,_=w||N,S=Ye(v)?this.id:v,C=(r=Le(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},A=C.r,T=A===void 0?3:A,E=C.strokeWidth,k=E===void 0?2:E,R=AF(o)?o:{},I=R.clipDot,W=I===void 0?!0:I,V=T*2+k;return M.createElement(ft,{className:j},w||N?M.createElement("defs",null,M.createElement("clipPath",{id:"clipPath-".concat(S)},M.createElement("rect",{x:w?m:m-f/2,y:N?h:h-g/2,width:w?f:f*2,height:N?g:g*2})),!W&&M.createElement("clipPath",{id:"clipPath-dots-".concat(S)},M.createElement("rect",{x:m-V/2,y:h-V/2,width:f+V,height:g+V}))):null,!y&&this.renderCurve(_,S),this.renderErrorBar(_,S),(y||o)&&this.renderDots(_,W,S),(!p||x)&&Ra.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,a){return r.animationId!==a.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:a.curPoints}:r.points!==a.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,a){for(var i=r.length%2!==0?[].concat(Ec(r),[0]):r,o=[],l=0;l<a;++l)o=[].concat(Ec(o),Ec(i));return o}},{key:"renderDotItem",value:function(r,a){var i;if(M.isValidElement(r))i=M.cloneElement(r,a);else if(He(r))i=r(a);else{var o=a.key,l=HE(a,L_e),c=Ze("recharts-line-dot",typeof r!="boolean"?r.className:"");i=M.createElement(Mf,Kh({key:o},l,{className:c}))}return i}}])}(b.PureComponent);Ks(od,"displayName","Line");Ks(od,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!ta.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Ks(od,"getComposedData",function(e){var t=e.props,n=e.xAxis,r=e.yAxis,a=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,l=e.bandSize,c=e.displayedData,u=e.offset,d=t.layout,h=c.map(function(m,f){var g=pn(m,o);return d==="horizontal"?{x:Sv({axis:n,ticks:a,bandSize:l,entry:m,index:f}),y:Ye(g)?null:r.scale(g),value:g,payload:m}:{x:Ye(g)?null:n.scale(g),y:Sv({axis:r,ticks:i,bandSize:l,entry:m,index:f}),value:g,payload:m}});return Zr({points:h,layout:d},u)});var J_e=["layout","type","stroke","connectNulls","isRange","ref"],Z_e=["key"],V6;function ld(e){"@babel/helpers - typeof";return ld=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ld(e)}function q6(e,t){if(e==null)return{};var n=eCe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function eCe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function xl(){return xl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xl.apply(this,arguments)}function YE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Hi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YE(Object(n),!0).forEach(function(r){ka(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function tCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function QE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,W6(r.key),r)}}function nCe(e,t,n){return t&&QE(e.prototype,t),n&&QE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function rCe(e,t,n){return t=Gv(t),sCe(e,U6()?Reflect.construct(t,n||[],Gv(e).constructor):t.apply(e,n))}function sCe(e,t){if(t&&(ld(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aCe(e)}function aCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(U6=function(){return!!e})()}function Gv(e){return Gv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Gv(e)}function iCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&IN(e,t)}function IN(e,t){return IN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},IN(e,t)}function ka(e,t,n){return t=W6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W6(e){var t=oCe(e,"string");return ld(t)=="symbol"?t:t+""}function oCe(e,t){if(ld(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ld(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ts=function(e){function t(){var n;tCe(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=rCe(this,t,[].concat(a)),ka(n,"state",{isAnimationFinished:!0}),ka(n,"id",uc("recharts-area-")),ka(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),He(o)&&o()}),ka(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),He(o)&&o()}),n}return iCe(t,e),nCe(t,[{key:"renderDots",value:function(r,a,i){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,u=c.dot,d=c.points,h=c.dataKey,m=Le(this.props,!1),f=Le(u,!0),g=d.map(function(v,x){var y=Hi(Hi(Hi({key:"dot-".concat(x),r:3},m),f),{},{index:x,cx:v.x,cy:v.y,dataKey:h,value:v.value,payload:v.payload,points:d});return t.renderDotItem(u,y)}),p={clipPath:r?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return M.createElement(ft,xl({className:"recharts-area-dots"},p),g)}},{key:"renderHorizontalRect",value:function(r){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].x,u=o[o.length-1].x,d=r*Math.abs(c-u),h=mo(o.map(function(m){return m.y||0}));return xe(i)&&typeof i=="number"?h=Math.max(i,h):i&&Array.isArray(i)&&i.length&&(h=Math.max(mo(i.map(function(m){return m.y||0})),h)),xe(h)?M.createElement("rect",{x:c<u?c:c-d,y:0,width:d,height:Math.floor(h+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].y,u=o[o.length-1].y,d=r*Math.abs(c-u),h=mo(o.map(function(m){return m.x||0}));return xe(i)&&typeof i=="number"?h=Math.max(i,h):i&&Array.isArray(i)&&i.length&&(h=Math.max(mo(i.map(function(m){return m.x||0})),h)),xe(h)?M.createElement("rect",{x:0,y:c<u?c:c-d,width:h+(l?parseInt("".concat(l),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(r){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,a,i,o){var l=this.props,c=l.layout,u=l.type,d=l.stroke,h=l.connectNulls,m=l.isRange;l.ref;var f=q6(l,J_e);return M.createElement(ft,{clipPath:i?"url(#clipPath-".concat(o,")"):null},M.createElement(Ol,xl({},Le(f,!0),{points:r,connectNulls:h,type:u,baseLine:a,layout:c,stroke:"none",className:"recharts-area-area"})),d!=="none"&&M.createElement(Ol,xl({},Le(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:h,fill:"none",points:r})),d!=="none"&&m&&M.createElement(Ol,xl({},Le(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:h,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(r,a){var i=this,o=this.props,l=o.points,c=o.baseLine,u=o.isAnimationActive,d=o.animationBegin,h=o.animationDuration,m=o.animationEasing,f=o.animationId,g=this.state,p=g.prevPoints,v=g.prevBaseLine;return M.createElement(ia,{begin:d,duration:h,isActive:u,easing:m,from:{t:0},to:{t:1},key:"area-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var y=x.t;if(p){var j=p.length/l.length,w=l.map(function(C,A){var T=Math.floor(A*j);if(p[T]){var E=p[T],k=Dn(E.x,C.x),R=Dn(E.y,C.y);return Hi(Hi({},C),{},{x:k(y),y:R(y)})}return C}),N;if(xe(c)&&typeof c=="number"){var _=Dn(v,c);N=_(y)}else if(Ye(c)||Id(c)){var S=Dn(v,0);N=S(y)}else N=c.map(function(C,A){var T=Math.floor(A*j);if(v[T]){var E=v[T],k=Dn(E.x,C.x),R=Dn(E.y,C.y);return Hi(Hi({},C),{},{x:k(y),y:R(y)})}return C});return i.renderAreaStatically(w,N,r,a)}return M.createElement(ft,null,M.createElement("defs",null,M.createElement("clipPath",{id:"animationClipPath-".concat(a)},i.renderClipRect(y))),M.createElement(ft,{clipPath:"url(#animationClipPath-".concat(a,")")},i.renderAreaStatically(l,c,r,a)))})}},{key:"renderArea",value:function(r,a){var i=this.props,o=i.points,l=i.baseLine,c=i.isAnimationActive,u=this.state,d=u.prevPoints,h=u.prevBaseLine,m=u.totalLength;return c&&o&&o.length&&(!d&&m>0||!Yl(d,o)||!Yl(h,l))?this.renderAreaWithAnimation(r,a):this.renderAreaStatically(o,l,r,a)}},{key:"render",value:function(){var r,a=this.props,i=a.hide,o=a.dot,l=a.points,c=a.className,u=a.top,d=a.left,h=a.xAxis,m=a.yAxis,f=a.width,g=a.height,p=a.isAnimationActive,v=a.id;if(i||!l||!l.length)return null;var x=this.state.isAnimationFinished,y=l.length===1,j=Ze("recharts-area",c),w=h&&h.allowDataOverflow,N=m&&m.allowDataOverflow,_=w||N,S=Ye(v)?this.id:v,C=(r=Le(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},A=C.r,T=A===void 0?3:A,E=C.strokeWidth,k=E===void 0?2:E,R=AF(o)?o:{},I=R.clipDot,W=I===void 0?!0:I,V=T*2+k;return M.createElement(ft,{className:j},w||N?M.createElement("defs",null,M.createElement("clipPath",{id:"clipPath-".concat(S)},M.createElement("rect",{x:w?d:d-f/2,y:N?u:u-g/2,width:w?f:f*2,height:N?g:g*2})),!W&&M.createElement("clipPath",{id:"clipPath-dots-".concat(S)},M.createElement("rect",{x:d-V/2,y:u-V/2,width:f+V,height:g+V}))):null,y?null:this.renderArea(_,S),(o||y)&&this.renderDots(_,W,S),(!p||x)&&Ra.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,a){return r.animationId!==a.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:r.points!==a.curPoints||r.baseLine!==a.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(b.PureComponent);V6=Ts;ka(Ts,"displayName","Area");ka(Ts,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!ta.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});ka(Ts,"getBaseValue",function(e,t,n,r){var a=e.layout,i=e.baseValue,o=t.props.baseValue,l=o??i;if(xe(l)&&typeof l=="number")return l;var c=a==="horizontal"?r:n,u=c.scale.domain();if(c.type==="number"){var d=Math.max(u[0],u[1]),h=Math.min(u[0],u[1]);return l==="dataMin"?h:l==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});ka(Ts,"getComposedData",function(e){var t=e.props,n=e.item,r=e.xAxis,a=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,u=e.stackedData,d=e.dataStartIndex,h=e.displayedData,m=e.offset,f=t.layout,g=u&&u.length,p=V6.getBaseValue(t,n,r,a),v=f==="horizontal",x=!1,y=h.map(function(w,N){var _;g?_=u[d+N]:(_=pn(w,c),Array.isArray(_)?x=!0:_=[p,_]);var S=_[1]==null||g&&pn(w,c)==null;return v?{x:Sv({axis:r,ticks:i,bandSize:l,entry:w,index:N}),y:S?null:a.scale(_[1]),value:_,payload:w}:{x:S?null:r.scale(_[1]),y:Sv({axis:a,ticks:o,bandSize:l,entry:w,index:N}),value:_,payload:w}}),j;return g||x?j=y.map(function(w){var N=Array.isArray(w.value)?w.value[0]:null;return v?{x:w.x,y:N!=null&&w.y!=null?a.scale(N):null}:{x:N!=null?r.scale(N):null,y:w.y}}):j=v?a.scale(p):r.scale(p),Hi({points:y,baseLine:j,layout:f,isRange:x},m)});ka(Ts,"renderDotItem",function(e,t){var n;if(M.isValidElement(e))n=M.cloneElement(e,t);else if(He(e))n=e(t);else{var r=Ze("recharts-area-dot",typeof e!="boolean"?e.className:""),a=t.key,i=q6(t,Z_e);n=M.createElement(Mf,xl({},i,{key:a,className:r}))}return n});function cd(e){"@babel/helpers - typeof";return cd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cd(e)}function lCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cCe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,G6(r.key),r)}}function uCe(e,t,n){return t&&cCe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function dCe(e,t,n){return t=Yv(t),hCe(e,H6()?Reflect.construct(t,n||[],Yv(e).constructor):t.apply(e,n))}function hCe(e,t){if(t&&(cd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mCe(e)}function mCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(H6=function(){return!!e})()}function Yv(e){return Yv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Yv(e)}function fCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$N(e,t)}function $N(e,t){return $N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},$N(e,t)}function K6(e,t,n){return t=G6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G6(e){var t=pCe(e,"string");return cd(t)=="symbol"?t:t+""}function pCe(e,t){if(cd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(cd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RN(){return RN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RN.apply(this,arguments)}function gCe(e){var t=e.xAxisId,n=Z2(),r=e_(),a=A6(t);return a==null?null:b.createElement(qd,RN({},a,{className:Ze("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(o){return di(o,!0)}}))}var oa=function(e){function t(){return lCe(this,t),dCe(this,t,arguments)}return fCe(t,e),uCe(t,[{key:"render",value:function(){return b.createElement(gCe,this.props)}}])}(b.Component);K6(oa,"displayName","XAxis");K6(oa,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function ud(e){"@babel/helpers - typeof";return ud=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ud(e)}function vCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xCe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,X6(r.key),r)}}function yCe(e,t,n){return t&&xCe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function jCe(e,t,n){return t=Qv(t),bCe(e,Y6()?Reflect.construct(t,n||[],Qv(e).constructor):t.apply(e,n))}function bCe(e,t){if(t&&(ud(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wCe(e)}function wCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Y6=function(){return!!e})()}function Qv(e){return Qv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Qv(e)}function NCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&FN(e,t)}function FN(e,t){return FN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},FN(e,t)}function Q6(e,t,n){return t=X6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X6(e){var t=SCe(e,"string");return ud(t)=="symbol"?t:t+""}function SCe(e,t){if(ud(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ud(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function LN(){return LN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},LN.apply(this,arguments)}var _Ce=function(t){var n=t.yAxisId,r=Z2(),a=e_(),i=k6(n);return i==null?null:b.createElement(qd,LN({},i,{className:Ze("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:a},ticksGenerator:function(l){return di(l,!0)}}))},la=function(e){function t(){return vCe(this,t),jCe(this,t,arguments)}return NCe(t,e),yCe(t,[{key:"render",value:function(){return b.createElement(_Ce,this.props)}}])}(b.Component);Q6(la,"displayName","YAxis");Q6(la,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function XE(e){return kCe(e)||ACe(e)||PCe(e)||CCe()}function CCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PCe(e,t){if(e){if(typeof e=="string")return BN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BN(e,t)}}function ACe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function kCe(e){if(Array.isArray(e))return BN(e)}function BN(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var zN=function(t,n,r,a,i){var o=us(t,n_),l=us(t,Fy),c=[].concat(XE(o),XE(l)),u=us(t,By),d="".concat(a,"Id"),h=a[0],m=n;if(c.length&&(m=c.reduce(function(p,v){if(v.props[d]===r&&Fa(v.props,"extendDomain")&&xe(v.props[h])){var x=v.props[h];return[Math.min(p[0],x),Math.max(p[1],x)]}return p},m)),u.length){var f="".concat(h,"1"),g="".concat(h,"2");m=u.reduce(function(p,v){if(v.props[d]===r&&Fa(v.props,"extendDomain")&&xe(v.props[f])&&xe(v.props[g])){var x=v.props[f],y=v.props[g];return[Math.min(p[0],x,y),Math.max(p[1],x,y)]}return p},m)}return i&&i.length&&(m=i.reduce(function(p,v){return xe(v)?[Math.min(p[0],v),Math.max(p[1],v)]:p},m)),m},J6={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,h,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var f=new a(d,h||c,m),g=n?n+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],f]:c._events[g].push(f):(c._events[g]=f,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)t.call(d,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=n?n+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var m=0,f=h.length,g=new Array(f);m<f;m++)g[m]=h[m].fn;return g},l.prototype.listenerCount=function(u){var d=n?n+u:u,h=this._events[d];return h?h.fn?1:h.length:0},l.prototype.emit=function(u,d,h,m,f,g){var p=n?n+u:u;if(!this._events[p])return!1;var v=this._events[p],x=arguments.length,y,j;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),x){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,h),!0;case 4:return v.fn.call(v.context,d,h,m),!0;case 5:return v.fn.call(v.context,d,h,m,f),!0;case 6:return v.fn.call(v.context,d,h,m,f,g),!0}for(j=1,y=new Array(x-1);j<x;j++)y[j-1]=arguments[j];v.fn.apply(v.context,y)}else{var w=v.length,N;for(j=0;j<w;j++)switch(v[j].once&&this.removeListener(u,v[j].fn,void 0,!0),x){case 1:v[j].fn.call(v[j].context);break;case 2:v[j].fn.call(v[j].context,d);break;case 3:v[j].fn.call(v[j].context,d,h);break;case 4:v[j].fn.call(v[j].context,d,h,m);break;default:if(!y)for(N=1,y=new Array(x-1);N<x;N++)y[N-1]=arguments[N];v[j].fn.apply(v[j].context,y)}}return!0},l.prototype.on=function(u,d,h){return i(this,u,d,h,!1)},l.prototype.once=function(u,d,h){return i(this,u,d,h,!0)},l.prototype.removeListener=function(u,d,h,m){var f=n?n+u:u;if(!this._events[f])return this;if(!d)return o(this,f),this;var g=this._events[f];if(g.fn)g.fn===d&&(!m||g.once)&&(!h||g.context===h)&&o(this,f);else{for(var p=0,v=[],x=g.length;p<x;p++)(g[p].fn!==d||m&&!g[p].once||h&&g[p].context!==h)&&v.push(g[p]);v.length?this._events[f]=v.length===1?v[0]:v:o(this,f)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&o(this,d)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l})(J6);var TCe=J6.exports;const ECe=Ct(TCe);var vj=new ECe,xj="recharts.syncMouseEvents";function tf(e){"@babel/helpers - typeof";return tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tf(e)}function OCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DCe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Z6(r.key),r)}}function MCe(e,t,n){return t&&DCe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function yj(e,t,n){return t=Z6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z6(e){var t=ICe(e,"string");return tf(t)=="symbol"?t:t+""}function ICe(e,t){if(tf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(tf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var $Ce=function(){function e(){OCe(this,e),yj(this,"activeIndex",0),yj(this,"coordinateList",[]),yj(this,"layout","horizontal")}return MCe(e,[{key:"setDetails",value:function(n){var r,a=n.coordinateList,i=a===void 0?null:a,o=n.container,l=o===void 0?null:o,c=n.layout,u=c===void 0?null:c,d=n.offset,h=d===void 0?null:d,m=n.mouseHandlerCallback,f=m===void 0?null:m;this.coordinateList=(r=i??this.coordinateList)!==null&&r!==void 0?r:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=h??this.offset,this.mouseHandlerCallback=f??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,d=((r=window)===null||r===void 0?void 0:r.scrollY)||0,h=i+c+u,m=o+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:h,pageY:m})}}}])}();function RCe(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var r=e==null?void 0:e[0],a=e==null?void 0:e[1];if(r&&a&&xe(r)&&xe(a))return!0}return!1}function FCe(e,t,n,r){var a=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-a,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function e8(e){var t=e.cx,n=e.cy,r=e.radius,a=e.startAngle,i=e.endAngle,o=Ht(t,n,r,a),l=Ht(t,n,r,i);return{points:[o,l],cx:t,cy:n,radius:r,startAngle:a,endAngle:i}}function LCe(e,t,n){var r,a,i,o;if(e==="horizontal")r=t.x,i=r,a=n.top,o=n.top+n.height;else if(e==="vertical")a=t.y,o=a,r=n.left,i=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,d=t.outerRadius,h=t.angle,m=Ht(l,c,u,h),f=Ht(l,c,d,h);r=m.x,a=m.y,i=f.x,o=f.y}else return e8(t);return[{x:r,y:a},{x:i,y:o}]}function nf(e){"@babel/helpers - typeof";return nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nf(e)}function JE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function $p(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JE(Object(n),!0).forEach(function(r){BCe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function BCe(e,t,n){return t=zCe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zCe(e){var t=VCe(e,"string");return nf(t)=="symbol"?t:t+""}function VCe(e,t){if(nf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(nf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qCe(e){var t,n,r=e.element,a=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,h=e.layout,m=e.chartName,f=(t=r.props.cursor)!==null&&t!==void 0?t:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!f||!i||!o||m!=="ScatterChart"&&a!=="axis")return null;var g,p=Ol;if(m==="ScatterChart")g=o,p=Xwe;else if(m==="BarChart")g=FCe(h,o,c,d),p=G2;else if(h==="radial"){var v=e8(o),x=v.cx,y=v.cy,j=v.radius,w=v.startAngle,N=v.endAngle;g={cx:x,cy:y,startAngle:w,endAngle:N,innerRadius:j,outerRadius:j},p=K5}else g={points:LCe(h,o,c)},p=Ol;var _=$p($p($p($p({stroke:"#ccc",pointerEvents:"none"},c),g),Le(f,!1)),{},{payload:l,payloadIndex:u,className:Ze("recharts-tooltip-cursor",f.className)});return b.isValidElement(f)?b.cloneElement(f,_):b.createElement(p,_)}var UCe=["item"],WCe=["children","className","width","height","style","compact","title","desc"];function dd(e){"@babel/helpers - typeof";return dd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dd(e)}function Qc(){return Qc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qc.apply(this,arguments)}function ZE(e,t){return GCe(e)||KCe(e,t)||n8(e,t)||HCe()}function HCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KCe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function GCe(e){if(Array.isArray(e))return e}function eO(e,t){if(e==null)return{};var n=YCe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function YCe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function QCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XCe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r8(r.key),r)}}function JCe(e,t,n){return t&&XCe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ZCe(e,t,n){return t=Xv(t),ePe(e,t8()?Reflect.construct(t,n||[],Xv(e).constructor):t.apply(e,n))}function ePe(e,t){if(t&&(dd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tPe(e)}function tPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function t8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(t8=function(){return!!e})()}function Xv(e){return Xv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Xv(e)}function nPe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VN(e,t)}function VN(e,t){return VN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},VN(e,t)}function hd(e){return aPe(e)||sPe(e)||n8(e)||rPe()}function rPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n8(e,t){if(e){if(typeof e=="string")return qN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qN(e,t)}}function sPe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function aPe(e){if(Array.isArray(e))return qN(e)}function qN(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tO(Object(n),!0).forEach(function(r){We(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function We(e,t,n){return t=r8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r8(e){var t=iPe(e,"string");return dd(t)=="symbol"?t:t+""}function iPe(e,t){if(dd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(dd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oPe={xAxis:["bottom","top"],yAxis:["left","right"]},lPe={width:"100%",height:"100%"},s8={x:0,y:0};function Rp(e){return e}var cPe=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},uPe=function(t,n,r,a){var i=n.find(function(d){return d&&d.index===r});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=a.radius;return ue(ue(ue({},a),Ht(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,u=a.angle;return ue(ue(ue({},a),Ht(a.cx,a.cy,c,u)),{},{angle:u,radius:c})}return s8},zy=function(t,n){var r=n.graphicalItems,a=n.dataStartIndex,i=n.dataEndIndex,o=(r??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(hd(l),hd(u)):l},[]);return o.length>0?o:t&&t.length&&xe(a)&&xe(i)?t.slice(a,i+1):[]};function a8(e){return e==="number"?[0,"auto"]:void 0}var UN=function(t,n,r,a){var i=t.graphicalItems,o=t.tooltipAxis,l=zy(n,t);return r<0||!i||!i.length||r>=l.length?null:i.reduce(function(c,u){var d,h=(d=u.props.data)!==null&&d!==void 0?d:n;h&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=r&&(h=h.slice(t.dataStartIndex,t.dataEndIndex+1));var m;if(o.dataKey&&!o.allowDuplicatedCategory){var f=h===void 0?l:h;m=Qg(f,o.dataKey,a)}else m=h&&h[r]||l[r];return m?[].concat(hd(c),[z5(u,m)]):c},[])},nO=function(t,n,r,a){var i=a||{x:t.chartX,y:t.chartY},o=cPe(i,r),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,d=b0e(o,l,u,c);if(d>=0&&u){var h=u[d]&&u[d].value,m=UN(t,n,d,h),f=uPe(r,l,d,i);return{activeTooltipIndex:d,activeLabel:h,activePayload:m,activeCoordinate:f}}return null},dPe=function(t,n){var r=n.axes,a=n.graphicalItems,i=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=t.layout,h=t.children,m=t.stackOffset,f=I5(d,i);return r.reduce(function(g,p){var v,x=p.type.defaultProps!==void 0?ue(ue({},p.type.defaultProps),p.props):p.props,y=x.type,j=x.dataKey,w=x.allowDataOverflow,N=x.allowDuplicatedCategory,_=x.scale,S=x.ticks,C=x.includeHidden,A=x[o];if(g[A])return g;var T=zy(t.data,{graphicalItems:a.filter(function(X){var ie,re=o in X.props?X.props[o]:(ie=X.type.defaultProps)===null||ie===void 0?void 0:ie[o];return re===A}),dataStartIndex:c,dataEndIndex:u}),E=T.length,k,R,I;RCe(x.domain,w,y)&&(k=rN(x.domain,null,w),f&&(y==="number"||_!=="auto")&&(I=qh(T,j,"category")));var W=a8(y);if(!k||k.length===0){var V,q=(V=x.domain)!==null&&V!==void 0?V:W;if(j){if(k=qh(T,j,y),y==="category"&&f){var P=dae(k);N&&P?(R=k,k=Rv(0,E)):N||(k=wT(q,k,p).reduce(function(X,ie){return X.indexOf(ie)>=0?X:[].concat(hd(X),[ie])},[]))}else if(y==="category")N?k=k.filter(function(X){return X!==""&&!Ye(X)}):k=wT(q,k,p).reduce(function(X,ie){return X.indexOf(ie)>=0||ie===""||Ye(ie)?X:[].concat(hd(X),[ie])},[]);else if(y==="number"){var O=C0e(T,a.filter(function(X){var ie,re,de=o in X.props?X.props[o]:(ie=X.type.defaultProps)===null||ie===void 0?void 0:ie[o],pe="hide"in X.props?X.props.hide:(re=X.type.defaultProps)===null||re===void 0?void 0:re.hide;return de===A&&(C||!pe)}),j,i,d);O&&(k=O)}f&&(y==="number"||_!=="auto")&&(I=qh(T,j,"category"))}else f?k=Rv(0,E):l&&l[A]&&l[A].hasStack&&y==="number"?k=m==="expand"?[0,1]:B5(l[A].stackGroups,c,u):k=M5(T,a.filter(function(X){var ie=o in X.props?X.props[o]:X.type.defaultProps[o],re="hide"in X.props?X.props.hide:X.type.defaultProps.hide;return ie===A&&(C||!re)}),y,d,!0);if(y==="number")k=zN(h,k,A,i,S),q&&(k=rN(q,k,w));else if(y==="category"&&q){var B=q,U=k.every(function(X){return B.indexOf(X)>=0});U&&(k=B)}}return ue(ue({},g),{},We({},A,ue(ue({},x),{},{axisType:i,domain:k,categoricalDomain:I,duplicateDomain:R,originalDomain:(v=x.domain)!==null&&v!==void 0?v:W,isCategorical:f,layout:d})))},{})},hPe=function(t,n){var r=n.graphicalItems,a=n.Axis,i=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=t.layout,h=t.children,m=zy(t.data,{graphicalItems:r,dataStartIndex:c,dataEndIndex:u}),f=m.length,g=I5(d,i),p=-1;return r.reduce(function(v,x){var y=x.type.defaultProps!==void 0?ue(ue({},x.type.defaultProps),x.props):x.props,j=y[o],w=a8("number");if(!v[j]){p++;var N;return g?N=Rv(0,f):l&&l[j]&&l[j].hasStack?(N=B5(l[j].stackGroups,c,u),N=zN(h,N,j,i)):(N=rN(w,M5(m,r.filter(function(_){var S,C,A=o in _.props?_.props[o]:(S=_.type.defaultProps)===null||S===void 0?void 0:S[o],T="hide"in _.props?_.props.hide:(C=_.type.defaultProps)===null||C===void 0?void 0:C.hide;return A===j&&!T}),"number",d),a.defaultProps.allowDataOverflow),N=zN(h,N,j,i)),ue(ue({},v),{},We({},j,ue(ue({axisType:i},a.defaultProps),{},{hide:!0,orientation:cs(oPe,"".concat(i,".").concat(p%2),null),domain:N,originalDomain:w,isCategorical:g,layout:d})))}return v},{})},mPe=function(t,n){var r=n.axisType,a=r===void 0?"xAxis":r,i=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=t.children,h="".concat(a,"Id"),m=us(d,i),f={};return m&&m.length?f=dPe(t,{axes:m,graphicalItems:o,axisType:a,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(f=hPe(t,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),f},fPe=function(t){var n=Zi(t),r=di(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:b2(r,function(a){return a.coordinate}),tooltipAxis:n,tooltipAxisBandSize:_v(n,r)}},rO=function(t){var n=t.children,r=t.defaultShowTooltip,a=ns(n,ed),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},pPe=function(t){return!t||!t.length?!1:t.some(function(n){var r=fi(n&&n.type);return r&&r.indexOf("Bar")>=0})},sO=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},gPe=function(t,n){var r=t.props,a=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,u=r.width,d=r.height,h=r.children,m=r.margin||{},f=ns(h,ed),g=ns(h,lu),p=Object.keys(c).reduce(function(N,_){var S=c[_],C=S.orientation;return!S.mirror&&!S.hide?ue(ue({},N),{},We({},C,N[C]+S.width)):N},{left:m.left||0,right:m.right||0}),v=Object.keys(o).reduce(function(N,_){var S=o[_],C=S.orientation;return!S.mirror&&!S.hide?ue(ue({},N),{},We({},C,cs(N,"".concat(C))+S.height)):N},{top:m.top||0,bottom:m.bottom||0}),x=ue(ue({},v),p),y=x.bottom;f&&(x.bottom+=f.props.height||ed.defaultProps.height),g&&n&&(x=S0e(x,a,r,n));var j=u-x.left-x.right,w=d-x.top-x.bottom;return ue(ue({brushBottom:y},x),{},{width:Math.max(j,0),height:Math.max(w,0)})},vPe=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},Vy=function(t){var n=t.chartName,r=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,h=t.defaultProps,m=function(x,y){var j=y.graphicalItems,w=y.stackGroups,N=y.offset,_=y.updateId,S=y.dataStartIndex,C=y.dataEndIndex,A=x.barSize,T=x.layout,E=x.barGap,k=x.barCategoryGap,R=x.maxBarSize,I=sO(T),W=I.numericAxisName,V=I.cateAxisName,q=pPe(j),P=[];return j.forEach(function(O,B){var U=zy(x.data,{graphicalItems:[O],dataStartIndex:S,dataEndIndex:C}),X=O.type.defaultProps!==void 0?ue(ue({},O.type.defaultProps),O.props):O.props,ie=X.dataKey,re=X.maxBarSize,de=X["".concat(W,"Id")],pe=X["".concat(V,"Id")],ce={},se=c.reduce(function(Ee,vt){var At=y["".concat(vt.axisType,"Map")],xn=X["".concat(vt.axisType,"Id")];At&&At[xn]||vt.axisType==="zAxis"||Xl();var Ve=At[xn];return ue(ue({},Ee),{},We(We({},vt.axisType,Ve),"".concat(vt.axisType,"Ticks"),di(Ve)))},ce),ae=se[V],le=se["".concat(V,"Ticks")],H=w&&w[de]&&w[de].hasStack&&I0e(O,w[de].stackGroups),Q=fi(O.type).indexOf("Bar")>=0,ve=_v(ae,le),ge=[],rt=q&&w0e({barSize:A,stackGroups:w,totalSize:vPe(se,V)});if(Q){var Ge,dt,te=Ye(re)?R:re,Pe=(Ge=(dt=_v(ae,le,!0))!==null&&dt!==void 0?dt:te)!==null&&Ge!==void 0?Ge:0;ge=N0e({barGap:E,barCategoryGap:k,bandSize:Pe!==ve?Pe:ve,sizeList:rt[pe],maxBarSize:te}),Pe!==ve&&(ge=ge.map(function(Ee){return ue(ue({},Ee),{},{position:ue(ue({},Ee.position),{},{offset:Ee.position.offset-Pe/2})})}))}var oe=O&&O.type&&O.type.getComposedData;oe&&P.push({props:ue(ue({},oe(ue(ue({},se),{},{displayedData:U,props:x,dataKey:ie,item:O,bandSize:ve,barPosition:ge,offset:N,stackedData:H,layout:T,dataStartIndex:S,dataEndIndex:C}))),{},We(We(We({key:O.key||"item-".concat(B)},W,se[W]),V,se[V]),"animationId",_)),childIndex:Nae(O,x.children),item:O})}),P},f=function(x,y){var j=x.props,w=x.dataStartIndex,N=x.dataEndIndex,_=x.updateId;if(!gA({props:j}))return null;var S=j.children,C=j.layout,A=j.stackOffset,T=j.data,E=j.reverseStackOrder,k=sO(C),R=k.numericAxisName,I=k.cateAxisName,W=us(S,r),V=D0e(T,W,"".concat(R,"Id"),"".concat(I,"Id"),A,E),q=c.reduce(function(X,ie){var re="".concat(ie.axisType,"Map");return ue(ue({},X),{},We({},re,mPe(j,ue(ue({},ie),{},{graphicalItems:W,stackGroups:ie.axisType===R&&V,dataStartIndex:w,dataEndIndex:N}))))},{}),P=gPe(ue(ue({},q),{},{props:j,graphicalItems:W}),y==null?void 0:y.legendBBox);Object.keys(q).forEach(function(X){q[X]=d(j,q[X],P,X.replace("Map",""),n)});var O=q["".concat(I,"Map")],B=fPe(O),U=m(j,ue(ue({},q),{},{dataStartIndex:w,dataEndIndex:N,updateId:_,graphicalItems:W,stackGroups:V,offset:P}));return ue(ue({formattedGraphicalItems:U,graphicalItems:W,offset:P,stackGroups:V},B),q)},g=function(v){function x(y){var j,w,N;return QCe(this,x),N=ZCe(this,x,[y]),We(N,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),We(N,"accessibilityManager",new $Ce),We(N,"handleLegendBBoxUpdate",function(_){if(_){var S=N.state,C=S.dataStartIndex,A=S.dataEndIndex,T=S.updateId;N.setState(ue({legendBBox:_},f({props:N.props,dataStartIndex:C,dataEndIndex:A,updateId:T},ue(ue({},N.state),{},{legendBBox:_}))))}}),We(N,"handleReceiveSyncEvent",function(_,S,C){if(N.props.syncId===_){if(C===N.eventEmitterSymbol&&typeof N.props.syncMethod!="function")return;N.applySyncEvent(S)}}),We(N,"handleBrushChange",function(_){var S=_.startIndex,C=_.endIndex;if(S!==N.state.dataStartIndex||C!==N.state.dataEndIndex){var A=N.state.updateId;N.setState(function(){return ue({dataStartIndex:S,dataEndIndex:C},f({props:N.props,dataStartIndex:S,dataEndIndex:C,updateId:A},N.state))}),N.triggerSyncEvent({dataStartIndex:S,dataEndIndex:C})}}),We(N,"handleMouseEnter",function(_){var S=N.getMouseInfo(_);if(S){var C=ue(ue({},S),{},{isTooltipActive:!0});N.setState(C),N.triggerSyncEvent(C);var A=N.props.onMouseEnter;He(A)&&A(C,_)}}),We(N,"triggeredAfterMouseMove",function(_){var S=N.getMouseInfo(_),C=S?ue(ue({},S),{},{isTooltipActive:!0}):{isTooltipActive:!1};N.setState(C),N.triggerSyncEvent(C);var A=N.props.onMouseMove;He(A)&&A(C,_)}),We(N,"handleItemMouseEnter",function(_){N.setState(function(){return{isTooltipActive:!0,activeItem:_,activePayload:_.tooltipPayload,activeCoordinate:_.tooltipPosition||{x:_.cx,y:_.cy}}})}),We(N,"handleItemMouseLeave",function(){N.setState(function(){return{isTooltipActive:!1}})}),We(N,"handleMouseMove",function(_){_.persist(),N.throttleTriggeredAfterMouseMove(_)}),We(N,"handleMouseLeave",function(_){N.throttleTriggeredAfterMouseMove.cancel();var S={isTooltipActive:!1};N.setState(S),N.triggerSyncEvent(S);var C=N.props.onMouseLeave;He(C)&&C(S,_)}),We(N,"handleOuterEvent",function(_){var S=wae(_),C=cs(N.props,"".concat(S));if(S&&He(C)){var A,T;/.*touch.*/i.test(S)?T=N.getMouseInfo(_.changedTouches[0]):T=N.getMouseInfo(_),C((A=T)!==null&&A!==void 0?A:{},_)}}),We(N,"handleClick",function(_){var S=N.getMouseInfo(_);if(S){var C=ue(ue({},S),{},{isTooltipActive:!0});N.setState(C),N.triggerSyncEvent(C);var A=N.props.onClick;He(A)&&A(C,_)}}),We(N,"handleMouseDown",function(_){var S=N.props.onMouseDown;if(He(S)){var C=N.getMouseInfo(_);S(C,_)}}),We(N,"handleMouseUp",function(_){var S=N.props.onMouseUp;if(He(S)){var C=N.getMouseInfo(_);S(C,_)}}),We(N,"handleTouchMove",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&N.throttleTriggeredAfterMouseMove(_.changedTouches[0])}),We(N,"handleTouchStart",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&N.handleMouseDown(_.changedTouches[0])}),We(N,"handleTouchEnd",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&N.handleMouseUp(_.changedTouches[0])}),We(N,"handleDoubleClick",function(_){var S=N.props.onDoubleClick;if(He(S)){var C=N.getMouseInfo(_);S(C,_)}}),We(N,"handleContextMenu",function(_){var S=N.props.onContextMenu;if(He(S)){var C=N.getMouseInfo(_);S(C,_)}}),We(N,"triggerSyncEvent",function(_){N.props.syncId!==void 0&&vj.emit(xj,N.props.syncId,_,N.eventEmitterSymbol)}),We(N,"applySyncEvent",function(_){var S=N.props,C=S.layout,A=S.syncMethod,T=N.state.updateId,E=_.dataStartIndex,k=_.dataEndIndex;if(_.dataStartIndex!==void 0||_.dataEndIndex!==void 0)N.setState(ue({dataStartIndex:E,dataEndIndex:k},f({props:N.props,dataStartIndex:E,dataEndIndex:k,updateId:T},N.state)));else if(_.activeTooltipIndex!==void 0){var R=_.chartX,I=_.chartY,W=_.activeTooltipIndex,V=N.state,q=V.offset,P=V.tooltipTicks;if(!q)return;if(typeof A=="function")W=A(P,_);else if(A==="value"){W=-1;for(var O=0;O<P.length;O++)if(P[O].value===_.activeLabel){W=O;break}}var B=ue(ue({},q),{},{x:q.left,y:q.top}),U=Math.min(R,B.x+B.width),X=Math.min(I,B.y+B.height),ie=P[W]&&P[W].value,re=UN(N.state,N.props.data,W),de=P[W]?{x:C==="horizontal"?P[W].coordinate:U,y:C==="horizontal"?X:P[W].coordinate}:s8;N.setState(ue(ue({},_),{},{activeLabel:ie,activeCoordinate:de,activePayload:re,activeTooltipIndex:W}))}else N.setState(_)}),We(N,"renderCursor",function(_){var S,C=N.state,A=C.isTooltipActive,T=C.activeCoordinate,E=C.activePayload,k=C.offset,R=C.activeTooltipIndex,I=C.tooltipAxisBandSize,W=N.getTooltipEventType(),V=(S=_.props.active)!==null&&S!==void 0?S:A,q=N.props.layout,P=_.key||"_recharts-cursor";return M.createElement(qCe,{key:P,activeCoordinate:T,activePayload:E,activeTooltipIndex:R,chartName:n,element:_,isActive:V,layout:q,offset:k,tooltipAxisBandSize:I,tooltipEventType:W})}),We(N,"renderPolarAxis",function(_,S,C){var A=cs(_,"type.axisType"),T=cs(N.state,"".concat(A,"Map")),E=_.type.defaultProps,k=E!==void 0?ue(ue({},E),_.props):_.props,R=T&&T[k["".concat(A,"Id")]];return b.cloneElement(_,ue(ue({},R),{},{className:Ze(A,R.className),key:_.key||"".concat(S,"-").concat(C),ticks:di(R,!0)}))}),We(N,"renderPolarGrid",function(_){var S=_.props,C=S.radialLines,A=S.polarAngles,T=S.polarRadius,E=N.state,k=E.radiusAxisMap,R=E.angleAxisMap,I=Zi(k),W=Zi(R),V=W.cx,q=W.cy,P=W.innerRadius,O=W.outerRadius;return b.cloneElement(_,{polarAngles:Array.isArray(A)?A:di(W,!0).map(function(B){return B.coordinate}),polarRadius:Array.isArray(T)?T:di(I,!0).map(function(B){return B.coordinate}),cx:V,cy:q,innerRadius:P,outerRadius:O,key:_.key||"polar-grid",radialLines:C})}),We(N,"renderLegend",function(){var _=N.state.formattedGraphicalItems,S=N.props,C=S.children,A=S.width,T=S.height,E=N.props.margin||{},k=A-(E.left||0)-(E.right||0),R=O5({children:C,formattedGraphicalItems:_,legendWidth:k,legendContent:u});if(!R)return null;var I=R.item,W=eO(R,UCe);return b.cloneElement(I,ue(ue({},W),{},{chartWidth:A,chartHeight:T,margin:E,onBBoxUpdate:N.handleLegendBBoxUpdate}))}),We(N,"renderTooltip",function(){var _,S=N.props,C=S.children,A=S.accessibilityLayer,T=ns(C,Un);if(!T)return null;var E=N.state,k=E.isTooltipActive,R=E.activeCoordinate,I=E.activePayload,W=E.activeLabel,V=E.offset,q=(_=T.props.active)!==null&&_!==void 0?_:k;return b.cloneElement(T,{viewBox:ue(ue({},V),{},{x:V.left,y:V.top}),active:q,label:W,payload:q?I:[],coordinate:R,accessibilityLayer:A})}),We(N,"renderBrush",function(_){var S=N.props,C=S.margin,A=S.data,T=N.state,E=T.offset,k=T.dataStartIndex,R=T.dataEndIndex,I=T.updateId;return b.cloneElement(_,{key:_.key||"_recharts-brush",onChange:Op(N.handleBrushChange,_.props.onChange),data:A,x:xe(_.props.x)?_.props.x:E.left,y:xe(_.props.y)?_.props.y:E.top+E.height+E.brushBottom-(C.bottom||0),width:xe(_.props.width)?_.props.width:E.width,startIndex:k,endIndex:R,updateId:"brush-".concat(I)})}),We(N,"renderReferenceElement",function(_,S,C){if(!_)return null;var A=N,T=A.clipPathId,E=N.state,k=E.xAxisMap,R=E.yAxisMap,I=E.offset,W=_.type.defaultProps||{},V=_.props,q=V.xAxisId,P=q===void 0?W.xAxisId:q,O=V.yAxisId,B=O===void 0?W.yAxisId:O;return b.cloneElement(_,{key:_.key||"".concat(S,"-").concat(C),xAxis:k[P],yAxis:R[B],viewBox:{x:I.left,y:I.top,width:I.width,height:I.height},clipPathId:T})}),We(N,"renderActivePoints",function(_){var S=_.item,C=_.activePoint,A=_.basePoint,T=_.childIndex,E=_.isRange,k=[],R=S.props.key,I=S.item.type.defaultProps!==void 0?ue(ue({},S.item.type.defaultProps),S.item.props):S.item.props,W=I.activeDot,V=I.dataKey,q=ue(ue({index:T,dataKey:V,cx:C.x,cy:C.y,r:4,fill:K2(S.item),strokeWidth:2,stroke:"#fff",payload:C.payload,value:C.value},Le(W,!1)),Xg(W));return k.push(x.renderActiveDot(W,q,"".concat(R,"-activePoint-").concat(T))),A?k.push(x.renderActiveDot(W,ue(ue({},q),{},{cx:A.x,cy:A.y}),"".concat(R,"-basePoint-").concat(T))):E&&k.push(null),k}),We(N,"renderGraphicChild",function(_,S,C){var A=N.filterFormatItem(_,S,C);if(!A)return null;var T=N.getTooltipEventType(),E=N.state,k=E.isTooltipActive,R=E.tooltipAxis,I=E.activeTooltipIndex,W=E.activeLabel,V=N.props.children,q=ns(V,Un),P=A.props,O=P.points,B=P.isRange,U=P.baseLine,X=A.item.type.defaultProps!==void 0?ue(ue({},A.item.type.defaultProps),A.item.props):A.item.props,ie=X.activeDot,re=X.hide,de=X.activeBar,pe=X.activeShape,ce=!!(!re&&k&&q&&(ie||de||pe)),se={};T!=="axis"&&q&&q.props.trigger==="click"?se={onClick:Op(N.handleItemMouseEnter,_.props.onClick)}:T!=="axis"&&(se={onMouseLeave:Op(N.handleItemMouseLeave,_.props.onMouseLeave),onMouseEnter:Op(N.handleItemMouseEnter,_.props.onMouseEnter)});var ae=b.cloneElement(_,ue(ue({},A.props),se));function le(vt){return typeof R.dataKey=="function"?R.dataKey(vt.payload):null}if(ce)if(I>=0){var H,Q;if(R.dataKey&&!R.allowDuplicatedCategory){var ve=typeof R.dataKey=="function"?le:"payload.".concat(R.dataKey.toString());H=Qg(O,ve,W),Q=B&&U&&Qg(U,ve,W)}else H=O==null?void 0:O[I],Q=B&&U&&U[I];if(pe||de){var ge=_.props.activeIndex!==void 0?_.props.activeIndex:I;return[b.cloneElement(_,ue(ue(ue({},A.props),se),{},{activeIndex:ge})),null,null]}if(!Ye(H))return[ae].concat(hd(N.renderActivePoints({item:A,activePoint:H,basePoint:Q,childIndex:I,isRange:B})))}else{var rt,Ge=(rt=N.getItemByXY(N.state.activeCoordinate))!==null&&rt!==void 0?rt:{graphicalItem:ae},dt=Ge.graphicalItem,te=dt.item,Pe=te===void 0?_:te,oe=dt.childIndex,Ee=ue(ue(ue({},A.props),se),{},{activeIndex:oe});return[b.cloneElement(Pe,Ee),null,null]}return B?[ae,null,null]:[ae,null]}),We(N,"renderCustomized",function(_,S,C){return b.cloneElement(_,ue(ue({key:"recharts-customized-".concat(C)},N.props),N.state))}),We(N,"renderMap",{CartesianGrid:{handler:Rp,once:!0},ReferenceArea:{handler:N.renderReferenceElement},ReferenceLine:{handler:Rp},ReferenceDot:{handler:N.renderReferenceElement},XAxis:{handler:Rp},YAxis:{handler:Rp},Brush:{handler:N.renderBrush,once:!0},Bar:{handler:N.renderGraphicChild},Line:{handler:N.renderGraphicChild},Area:{handler:N.renderGraphicChild},Radar:{handler:N.renderGraphicChild},RadialBar:{handler:N.renderGraphicChild},Scatter:{handler:N.renderGraphicChild},Pie:{handler:N.renderGraphicChild},Funnel:{handler:N.renderGraphicChild},Tooltip:{handler:N.renderCursor,once:!0},PolarGrid:{handler:N.renderPolarGrid,once:!0},PolarAngleAxis:{handler:N.renderPolarAxis},PolarRadiusAxis:{handler:N.renderPolarAxis},Customized:{handler:N.renderCustomized}}),N.clipPathId="".concat((j=y.id)!==null&&j!==void 0?j:uc("recharts"),"-clip"),N.throttleTriggeredAfterMouseMove=EL(N.triggeredAfterMouseMove,(w=y.throttleDelay)!==null&&w!==void 0?w:1e3/60),N.state={},N}return nPe(x,v),JCe(x,[{key:"componentDidMount",value:function(){var j,w;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(j=this.props.margin.left)!==null&&j!==void 0?j:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var j=this.props,w=j.children,N=j.data,_=j.height,S=j.layout,C=ns(w,Un);if(C){var A=C.props.defaultIndex;if(!(typeof A!="number"||A<0||A>this.state.tooltipTicks.length-1)){var T=this.state.tooltipTicks[A]&&this.state.tooltipTicks[A].value,E=UN(this.state,N,A,T),k=this.state.tooltipTicks[A].coordinate,R=(this.state.offset.top+_)/2,I=S==="horizontal",W=I?{x:k,y:R}:{y:k,x:R},V=this.state.formattedGraphicalItems.find(function(P){var O=P.item;return O.type.name==="Scatter"});V&&(W=ue(ue({},W),V.props.points[A].tooltipPosition),E=V.props.points[A].tooltipPayload);var q={activeTooltipIndex:A,isTooltipActive:!0,activeLabel:T,activePayload:E,activeCoordinate:W};this.setState(q),this.renderCursor(C),this.accessibilityManager.setIndex(A)}}}},{key:"getSnapshotBeforeUpdate",value:function(j,w){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==w.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==j.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==j.margin){var N,_;this.accessibilityManager.setDetails({offset:{left:(N=this.props.margin.left)!==null&&N!==void 0?N:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0}})}return null}},{key:"componentDidUpdate",value:function(j){xw([ns(j.children,Un)],[ns(this.props.children,Un)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var j=ns(this.props.children,Un);if(j&&typeof j.props.shared=="boolean"){var w=j.props.shared?"axis":"item";return l.indexOf(w)>=0?w:i}return i}},{key:"getMouseInfo",value:function(j){if(!this.container)return null;var w=this.container,N=w.getBoundingClientRect(),_=Ype(N),S={chartX:Math.round(j.pageX-_.left),chartY:Math.round(j.pageY-_.top)},C=N.width/w.offsetWidth||1,A=this.inRange(S.chartX,S.chartY,C);if(!A)return null;var T=this.state,E=T.xAxisMap,k=T.yAxisMap,R=this.getTooltipEventType(),I=nO(this.state,this.props.data,this.props.layout,A);if(R!=="axis"&&E&&k){var W=Zi(E).scale,V=Zi(k).scale,q=W&&W.invert?W.invert(S.chartX):null,P=V&&V.invert?V.invert(S.chartY):null;return ue(ue({},S),{},{xValue:q,yValue:P},I)}return I?ue(ue({},S),I):null}},{key:"inRange",value:function(j,w){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,_=this.props.layout,S=j/N,C=w/N;if(_==="horizontal"||_==="vertical"){var A=this.state.offset,T=S>=A.left&&S<=A.left+A.width&&C>=A.top&&C<=A.top+A.height;return T?{x:S,y:C}:null}var E=this.state,k=E.angleAxisMap,R=E.radiusAxisMap;if(k&&R){var I=Zi(k);return _T({x:S,y:C},I)}return null}},{key:"parseEventsOfWrapper",value:function(){var j=this.props.children,w=this.getTooltipEventType(),N=ns(j,Un),_={};N&&w==="axis"&&(N.props.trigger==="click"?_={onClick:this.handleClick}:_={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var S=Xg(this.props,this.handleOuterEvent);return ue(ue({},S),_)}},{key:"addListener",value:function(){vj.on(xj,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){vj.removeListener(xj,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(j,w,N){for(var _=this.state.formattedGraphicalItems,S=0,C=_.length;S<C;S++){var A=_[S];if(A.item===j||A.props.key===j.key||w===fi(A.item.type)&&N===A.childIndex)return A}return null}},{key:"renderClipPath",value:function(){var j=this.clipPathId,w=this.state.offset,N=w.left,_=w.top,S=w.height,C=w.width;return M.createElement("defs",null,M.createElement("clipPath",{id:j},M.createElement("rect",{x:N,y:_,height:S,width:C})))}},{key:"getXScales",value:function(){var j=this.state.xAxisMap;return j?Object.entries(j).reduce(function(w,N){var _=ZE(N,2),S=_[0],C=_[1];return ue(ue({},w),{},We({},S,C.scale))},{}):null}},{key:"getYScales",value:function(){var j=this.state.yAxisMap;return j?Object.entries(j).reduce(function(w,N){var _=ZE(N,2),S=_[0],C=_[1];return ue(ue({},w),{},We({},S,C.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(j){var w;return(w=this.state.xAxisMap)===null||w===void 0||(w=w[j])===null||w===void 0?void 0:w.scale}},{key:"getYScaleByAxisId",value:function(j){var w;return(w=this.state.yAxisMap)===null||w===void 0||(w=w[j])===null||w===void 0?void 0:w.scale}},{key:"getItemByXY",value:function(j){var w=this.state,N=w.formattedGraphicalItems,_=w.activeItem;if(N&&N.length)for(var S=0,C=N.length;S<C;S++){var A=N[S],T=A.props,E=A.item,k=E.type.defaultProps!==void 0?ue(ue({},E.type.defaultProps),E.props):E.props,R=fi(E.type);if(R==="Bar"){var I=(T.data||[]).find(function(P){return Ewe(j,P)});if(I)return{graphicalItem:A,payload:I}}else if(R==="RadialBar"){var W=(T.data||[]).find(function(P){return _T(j,P)});if(W)return{graphicalItem:A,payload:W}}else if(My(A,_)||Iy(A,_)||Qm(A,_)){var V=y1e({graphicalItem:A,activeTooltipItem:_,itemData:k.data}),q=k.activeIndex===void 0?V:k.activeIndex;return{graphicalItem:ue(ue({},A),{},{childIndex:q}),payload:Qm(A,_)?k.data[V]:A.props.data[V]}}}return null}},{key:"render",value:function(){var j=this;if(!gA(this))return null;var w=this.props,N=w.children,_=w.className,S=w.width,C=w.height,A=w.style,T=w.compact,E=w.title,k=w.desc,R=eO(w,WCe),I=Le(R,!1);if(T)return M.createElement(DE,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},M.createElement(jw,Qc({},I,{width:S,height:C,title:E,desc:k}),this.renderClipPath(),xA(N,this.renderMap)));if(this.props.accessibilityLayer){var W,V;I.tabIndex=(W=this.props.tabIndex)!==null&&W!==void 0?W:0,I.role=(V=this.props.role)!==null&&V!==void 0?V:"application",I.onKeyDown=function(P){j.accessibilityManager.keyboardEvent(P)},I.onFocus=function(){j.accessibilityManager.focus()}}var q=this.parseEventsOfWrapper();return M.createElement(DE,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},M.createElement("div",Qc({className:Ze("recharts-wrapper",_),style:ue({position:"relative",cursor:"default",width:S,height:C},A)},q,{ref:function(O){j.container=O}}),M.createElement(jw,Qc({},I,{width:S,height:C,title:E,desc:k,style:lPe}),this.renderClipPath(),xA(N,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(b.Component);We(g,"displayName",n),We(g,"defaultProps",ue({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),We(g,"getDerivedStateFromProps",function(v,x){var y=v.dataKey,j=v.data,w=v.children,N=v.width,_=v.height,S=v.layout,C=v.stackOffset,A=v.margin,T=x.dataStartIndex,E=x.dataEndIndex;if(x.updateId===void 0){var k=rO(v);return ue(ue(ue({},k),{},{updateId:0},f(ue(ue({props:v},k),{},{updateId:0}),x)),{},{prevDataKey:y,prevData:j,prevWidth:N,prevHeight:_,prevLayout:S,prevStackOffset:C,prevMargin:A,prevChildren:w})}if(y!==x.prevDataKey||j!==x.prevData||N!==x.prevWidth||_!==x.prevHeight||S!==x.prevLayout||C!==x.prevStackOffset||!ou(A,x.prevMargin)){var R=rO(v),I={chartX:x.chartX,chartY:x.chartY,isTooltipActive:x.isTooltipActive},W=ue(ue({},nO(x,j,S)),{},{updateId:x.updateId+1}),V=ue(ue(ue({},R),I),W);return ue(ue(ue({},V),f(ue({props:v},V),x)),{},{prevDataKey:y,prevData:j,prevWidth:N,prevHeight:_,prevLayout:S,prevStackOffset:C,prevMargin:A,prevChildren:w})}if(!xw(w,x.prevChildren)){var q,P,O,B,U=ns(w,ed),X=U&&(q=(P=U.props)===null||P===void 0?void 0:P.startIndex)!==null&&q!==void 0?q:T,ie=U&&(O=(B=U.props)===null||B===void 0?void 0:B.endIndex)!==null&&O!==void 0?O:E,re=X!==T||ie!==E,de=!Ye(j),pe=de&&!re?x.updateId:x.updateId+1;return ue(ue({updateId:pe},f(ue(ue({props:v},x),{},{updateId:pe,dataStartIndex:X,dataEndIndex:ie}),x)),{},{prevChildren:w,dataStartIndex:X,dataEndIndex:ie})}return null}),We(g,"renderActiveDot",function(v,x,y){var j;return b.isValidElement(v)?j=b.cloneElement(v,x):He(v)?j=v(x):j=M.createElement(Mf,x),M.createElement(ft,{className:"recharts-active-dot",key:y},j)});var p=b.forwardRef(function(x,y){return M.createElement(g,Qc({},x,{ref:y}))});return p.displayName=g.displayName,p},aO=Vy({chartName:"LineChart",GraphicalChild:od,axisComponents:[{axisType:"xAxis",AxisComp:oa},{axisType:"yAxis",AxisComp:la}],formatAxisMap:Y2}),xPe=Vy({chartName:"BarChart",GraphicalChild:Aa,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:oa},{axisType:"yAxis",AxisComp:la}],formatAxisMap:Y2}),a_=Vy({chartName:"PieChart",GraphicalChild:ha,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Dy},{axisType:"radiusAxis",AxisComp:Ey}],formatAxisMap:W0e,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),i_=Vy({chartName:"AreaChart",GraphicalChild:Ts,axisComponents:[{axisType:"xAxis",AxisComp:oa},{axisType:"yAxis",AxisComp:la}],formatAxisMap:Y2});function o_({open:e,onOpenChange:t,petId:n,consultationId:r}){const{data:a=[]}=tr(),{data:i=[]}=nr(),{data:o=[]}=HS(),l=ree(),{toast:c}=it(),[u,d]=b.useState({diagnosis:"",notes:"",validUntil:""}),[h,m]=b.useState([{medication_name:"",dosage:"",frequency:"",duration:"",instructions:"",quantity:1,route:"oral"}]),f=i.find(N=>N.id===n),g=f?a.find(N=>N.id===f.client_id):null,p=o.filter(N=>(N.category==="medication"||N.category==="supplement")&&N.current_quantity>0&&N.active),v=N=>{const{name:_,value:S}=N.target;d(C=>({...C,[_]:S}))},x=(N,_,S)=>{m(C=>C.map((A,T)=>T===N?{...A,[_]:S}:A))},y=()=>{m(N=>[...N,{medication_name:"",dosage:"",frequency:"",duration:"",instructions:"",quantity:1,route:"oral"}])},j=N=>{h.length>1&&m(_=>_.filter((S,C)=>C!==N))},w=async N=>{if(N.preventDefault(),!f||!g){c({title:"Erreur",description:"Impossible de trouver l'animal ou le client associé.",variant:"destructive"});return}const _=h.filter(C=>C.medication_name.trim()!=="");if(_.length===0){c({title:"Erreur",description:"Veuillez ajouter au moins un médicament à la prescription.",variant:"destructive"});return}const S={consultation_id:r,animal_id:f.id,client_id:g.id,diagnosis:u.diagnosis,notes:u.notes,valid_until:u.validUntil||void 0,medications:_};try{await l.mutateAsync(S),c({title:"Prescription créée",description:`Prescription créée avec succès pour ${f.name}.`}),t(!1),d({diagnosis:"",notes:"",validUntil:""}),m([{medication_name:"",dosage:"",frequency:"",duration:"",instructions:"",quantity:1,route:"oral"}])}catch(C){console.error("Error creating prescription:",C),c({title:"Erreur",description:"Une erreur est survenue lors de la création de la prescription.",variant:"destructive"})}};return!f||!g?s.jsx(et,{open:e,onOpenChange:t,children:s.jsx(Qe,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:s.jsxs(tt,{children:[s.jsx(nt,{children:"Erreur"}),s.jsx(Bt,{children:"Impossible de trouver l'animal ou le client associé."})]})})}):s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Qe,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(tt,{children:[s.jsx(nt,{children:"Nouvelle Prescription"}),s.jsxs(Bt,{children:["Créer une nouvelle prescription pour ",f.name," (",g.first_name," ",g.last_name,")"]})]}),s.jsxs("form",{onSubmit:w,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(D,{htmlFor:"diagnosis",children:"Diagnostic"}),s.jsx(Ue,{id:"diagnosis",name:"diagnosis",value:u.diagnosis,onChange:v,placeholder:"Entrez le diagnostic...",className:"h-20"})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"validUntil",children:"Valide jusqu'au (optionnel)"}),s.jsx(G,{id:"validUntil",name:"validUntil",type:"date",value:u.validUntil,onChange:v})]})]}),s.jsxs("div",{className:"space-y-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(D,{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Médicaments"}),s.jsxs(F,{type:"button",onClick:y,size:"sm",variant:"outline",children:[s.jsx(at,{className:"h-4 w-4 mr-2"}),"Ajouter un médicament"]})]}),h.map((N,_)=>s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-6 space-y-4 bg-gray-50 dark:bg-gray-800",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h4",{className:"font-medium text-base text-gray-900 dark:text-gray-100",children:["Médicament ",_+1]}),h.length>1&&s.jsx(F,{type:"button",variant:"outline",size:"sm",onClick:()=>j(_),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",children:s.jsx(rn,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"md:col-span-2 lg:col-span-1",children:[s.jsx(D,{className:"text-gray-700 dark:text-gray-300",children:"Médicament *"}),s.jsxs(we,{value:N.medication_name,onValueChange:S=>x(_,"medication_name",S),children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Sélectionner ou taper..."})}),s.jsx(be,{children:p.map(S=>s.jsxs($,{value:S.name,children:[S.name," (",S.current_quantity," ",S.unit,")"]},S.id))})]}),!p.find(S=>S.name===N.medication_name)&&s.jsx(G,{className:"mt-2",value:N.medication_name,onChange:S=>x(_,"medication_name",S.target.value),placeholder:"Nom du médicament personnalisé"})]}),s.jsxs("div",{children:[s.jsx(D,{className:"text-gray-700 dark:text-gray-300",children:"Dosage"}),s.jsx(G,{value:N.dosage||"",onChange:S=>x(_,"dosage",S.target.value),placeholder:"ex: 5mg"})]}),s.jsxs("div",{children:[s.jsx(D,{className:"text-gray-700 dark:text-gray-300",children:"Fréquence"}),s.jsxs(we,{value:N.frequency||"",onValueChange:S=>x(_,"frequency",S),children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Sélectionner..."})}),s.jsxs(be,{children:[s.jsx($,{value:"1x/jour",children:"1 fois par jour"}),s.jsx($,{value:"2x/jour",children:"2 fois par jour"}),s.jsx($,{value:"3x/jour",children:"3 fois par jour"}),s.jsx($,{value:"1x/semaine",children:"1 fois par semaine"}),s.jsx($,{value:"selon besoin",children:"Selon besoin"})]})]})]}),s.jsxs("div",{children:[s.jsx(D,{className:"text-gray-700 dark:text-gray-300",children:"Durée"}),s.jsx(G,{value:N.duration||"",onChange:S=>x(_,"duration",S.target.value),placeholder:"ex: 7 jours"})]}),s.jsxs("div",{children:[s.jsx(D,{className:"text-gray-700 dark:text-gray-300",children:"Quantité *"}),s.jsx(G,{type:"number",min:"1",value:N.quantity,onChange:S=>x(_,"quantity",parseInt(S.target.value)||1)})]}),s.jsxs("div",{children:[s.jsx(D,{className:"text-gray-700 dark:text-gray-300",children:"Voie d'administration"}),s.jsxs(we,{value:N.route||"oral",onValueChange:S=>x(_,"route",S),children:[s.jsx(je,{children:s.jsx(Ne,{})}),s.jsxs(be,{children:[s.jsx($,{value:"oral",children:"Orale"}),s.jsx($,{value:"injectable",children:"Injectable"}),s.jsx($,{value:"topique",children:"Topique"}),s.jsx($,{value:"intraveineuse",children:"Intraveineuse"}),s.jsx($,{value:"intramusculaire",children:"Intramusculaire"}),s.jsx($,{value:"sous-cutanée",children:"Sous-cutanée"})]})]})]})]}),s.jsxs("div",{children:[s.jsx(D,{className:"text-gray-700 dark:text-gray-300",children:"Instructions spéciales"}),s.jsx(Ue,{value:N.instructions||"",onChange:S=>x(_,"instructions",S.target.value),placeholder:"Instructions particulières pour ce médicament...",className:"h-16"})]})]},_)),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"notes",className:"text-gray-700 dark:text-gray-300",children:"Notes générales"}),s.jsx(Ue,{id:"notes",name:"notes",value:u.notes,onChange:v,placeholder:"Notes générales sur la prescription...",className:"h-20"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(F,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:l.isPending,children:"Annuler"}),s.jsx(F,{type:"submit",disabled:l.isPending,children:l.isPending?"Création...":"Créer la prescription"})]})]})]})})}function yPe({open:e,onOpenChange:t,prescription:n}){const{updatePrescription:r}=bt(),{toast:a}=it(),[i,o]=b.useState({date:"",prescribedBy:"",diagnosis:"",instructions:"",duration:"",followUpDate:"",status:"",notes:""}),[l,c]=b.useState([]);b.useEffect(()=>{e&&n&&(o({date:n.date,prescribedBy:n.prescribedBy,diagnosis:n.diagnosis,instructions:n.instructions,duration:n.duration,followUpDate:n.followUpDate||"",status:n.status,notes:n.notes||""}),c([...n.medications]))},[e,n]);const u=v=>{o(x=>({...x,[v.target.id]:v.target.value}))},d=(v,x)=>{o(y=>({...y,[v]:x}))},h=(v,x,y)=>{const j=[...l];j[v]={...j[v],[x]:x==="quantity"||x==="refills"||x==="cost"?Number(y):y},c(j)},m=()=>{const v=Math.max(...l.map(x=>x.id),0)+1;c([...l,{id:v,name:"",dosage:"",frequency:"",duration:"",instructions:"",quantity:1,unit:"comprimés",refills:0,cost:0}])},f=v=>{l.length>1&&c(l.filter((x,y)=>y!==v))},g=v=>{if(v.preventDefault(),!n)return;const x=l.filter(y=>y.name.trim()!=="");if(x.length===0){a({title:"Erreur",description:"Au moins un médicament doit être spécifié.",variant:"destructive"});return}r(n.id,{date:i.date,prescribedBy:i.prescribedBy,diagnosis:i.diagnosis,medications:x,instructions:i.instructions,duration:i.duration,followUpDate:i.followUpDate||void 0,status:i.status,notes:i.notes}),a({title:"Prescription mise à jour",description:"La prescription a été modifiée avec succès."}),t(!1)},p=()=>l.reduce((v,x)=>v+(x.cost||0),0);return n?s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Qe,{className:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[s.jsxs(tt,{children:[s.jsxs(nt,{className:"flex items-center gap-2",children:[s.jsx(ii,{className:"h-5 w-5"}),"Modifier la Prescription"]}),s.jsxs(Bt,{children:["Modifiez la prescription pour ",n.petName," (",n.clientName,")."]})]}),s.jsxs("form",{onSubmit:g,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"date",children:"Date de prescription *"}),s.jsx(G,{id:"date",type:"date",value:i.date,onChange:u,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"prescribedBy",children:"Prescrit par *"}),s.jsx(G,{id:"prescribedBy",value:i.prescribedBy,onChange:u,required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"diagnosis",children:"Diagnostic *"}),s.jsx(G,{id:"diagnosis",value:i.diagnosis,onChange:u,required:!0})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"duration",children:"Durée du traitement"}),s.jsx(G,{id:"duration",value:i.duration,onChange:u})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"followUpDate",children:"Date de suivi"}),s.jsx(G,{id:"followUpDate",type:"date",value:i.followUpDate,onChange:u,min:i.date})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{children:"Statut"}),s.jsxs(we,{value:i.status,onValueChange:v=>d("status",v),children:[s.jsx(je,{children:s.jsx(Ne,{})}),s.jsxs(be,{children:[s.jsx($,{value:"active",children:"Active"}),s.jsx($,{value:"completed",children:"Terminée"}),s.jsx($,{value:"discontinued",children:"Arrêtée"})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(D,{className:"text-base font-medium",children:"Médicaments prescrits"}),s.jsxs(F,{type:"button",variant:"outline",size:"sm",onClick:m,className:"gap-2",children:[s.jsx(at,{className:"h-4 w-4"}),"Ajouter médicament"]})]}),s.jsx("div",{className:"space-y-4",children:l.map((v,x)=>s.jsxs("div",{className:"p-4 border rounded-lg space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h4",{className:"font-medium",children:["Médicament ",x+1]}),l.length>1&&s.jsx(F,{type:"button",variant:"outline",size:"sm",onClick:()=>f(x),className:"text-red-600 hover:text-red-700",children:s.jsx(rn,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{children:"Nom du médicament *"}),s.jsx(G,{value:v.name,onChange:y=>h(x,"name",y.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{children:"Dosage *"}),s.jsx(G,{value:v.dosage,onChange:y=>h(x,"dosage",y.target.value),required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{children:"Fréquence *"}),s.jsx(G,{value:v.frequency,onChange:y=>h(x,"frequency",y.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{children:"Durée"}),s.jsx(G,{value:v.duration,onChange:y=>h(x,"duration",y.target.value)})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{children:"Quantité"}),s.jsx(G,{type:"number",value:v.quantity,onChange:y=>h(x,"quantity",parseInt(y.target.value)),min:"1"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{children:"Unité"}),s.jsxs(we,{value:v.unit,onValueChange:y=>h(x,"unit",y),children:[s.jsx(je,{children:s.jsx(Ne,{})}),s.jsxs(be,{children:[s.jsx($,{value:"comprimés",children:"Comprimés"}),s.jsx($,{value:"ml",children:"ml"}),s.jsx($,{value:"g",children:"g"}),s.jsx($,{value:"mg",children:"mg"}),s.jsx($,{value:"ampoules",children:"Ampoules"}),s.jsx($,{value:"flacons",children:"Flacons"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{children:"Coût (€)"}),s.jsx(G,{type:"number",step:"0.01",value:v.cost,onChange:y=>h(x,"cost",parseFloat(y.target.value)),min:"0"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{children:"Instructions spécifiques"}),s.jsx(G,{value:v.instructions,onChange:y=>h(x,"instructions",y.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{children:"Renouvellements"}),s.jsx(G,{type:"number",value:v.refills,onChange:y=>h(x,"refills",parseInt(y.target.value)),min:"0"})]})]})]},v.id))}),s.jsx("div",{className:"flex justify-end",children:s.jsxs(_e,{variant:"outline",className:"text-lg px-4 py-2",children:["Coût total: ",p().toFixed(2),"€"]})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"instructions",children:"Instructions générales"}),s.jsx(Ue,{id:"instructions",value:i.instructions,onChange:u,rows:3})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"notes",children:"Notes"}),s.jsx(Ue,{id:"notes",value:i.notes,onChange:u,rows:2})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(F,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsxs(F,{type:"submit",className:"gap-2",children:[s.jsx(Rh,{className:"h-4 w-4"}),"Sauvegarder"]})]})]})]})}):null}const jPe="vetpro-veterinarians";function WN({prescription:e}){const{settings:t}=Pt();JSON.parse(localStorage.getItem(jPe)||"[]");const n=e.prescribedBy,r=()=>{if(!e||!e.petName||!e.clientName)return;const a=window.open("","_blank");if(!a)return;const i=`
      <html>
        <head>
          <title>Prescription - ${e.petName}</title>
          <style>
            body {
              font-family: Arial, sans-serif;
              margin: 20px;
              line-height: 1.6;
            }
            .header {
              text-align: center;
              border-bottom: 2px solid #333;
              padding-bottom: 20px;
              margin-bottom: 30px;
            }
            .clinic-info {
              margin-bottom: 30px;
            }
            .patient-info {
              margin-bottom: 30px;
            }
            .prescription-details {
              margin-bottom: 30px;
            }
            .medications {
              margin-bottom: 30px;
            }
            .medication-item {
              border: 1px solid #ccc;
              padding: 15px;
              margin-bottom: 15px;
              border-radius: 5px;
            }
            .instructions {
              margin-bottom: 30px;
            }
            .footer {
              margin-top: 50px;
              text-align: center;
            }
            .signature-line {
              border-top: 1px solid #333;
              width: 200px;
              margin: 20px auto;
            }
            table {
              width: 100%;
              border-collapse: collapse;
              margin-bottom: 20px;
            }
            th, td {
              border: 1px solid #ddd;
              padding: 8px;
              text-align: left;
            }
            th {
              background-color: #f2f2f2;
            }
            .total-cost {
              font-weight: bold;
              text-align: right;
              margin-top: 20px;
            }
          </style>
        </head>
        <body>
          <div class="header">
            ${t.logo?`<img src="${t.logo}" alt="Logo clinique" style="height:60px;margin-bottom:10px;"/>`:""}
            <h1>PRESCRIPTION MÉDICALE</h1>
            <h2>${t.clinicName}</h2>
            <p>${t.address}<br>
            Tél: ${t.phone} | Email: ${t.email}</p>
          </div>

          <div class="clinic-info">
            <strong>Date de prescription:</strong> ${new Date(e.date).toLocaleDateString("fr-FR")}<br>
            <strong>Prescrit par:</strong> ${n}
          </div>

          <div class="patient-info">
            <h3>Informations du patient</h3>
            <table>
              <tr>
                <th>Propriétaire</th>
                <td>${e.clientName}</td>
              </tr>
              <tr>
                <th>Animal</th>
                <td>${e.petName}</td>
              </tr>
              <tr>
                <th>Diagnostic</th>
                <td>${e.diagnosis}</td>
              </tr>
              <tr>
                <th>Durée du traitement</th>
                <td>${e.duration}</td>
              </tr>
            </table>
          </div>

          <div class="medications">
            <h3>Médicaments prescrits</h3>
            ${e.medications.map(o=>`
              <div class="medication-item">
                <h4>${o.name}</h4>
                <table>
                  <tr>
                    <th>Posologie</th>
                    <td>${o.dosage} - ${o.frequency}</td>
                  </tr>
                  <tr>
                    <th>Durée</th>
                    <td>${o.duration}</td>
                  </tr>
                  <tr>
                    <th>Quantité</th>
                    <td>${o.quantity} ${o.unit}</td>
                  </tr>
                  ${o.refills&&o.refills>0?`
                    <tr>
                      <th>Renouvellements</th>
                      <td>${o.refills}</td>
                    </tr>
                  `:""}
                  ${o.instructions?`
                    <tr>
                      <th>Instructions</th>
                      <td>${o.instructions}</td>
                    </tr>
                  `:""}
                  ${o.cost?`
                    <tr>
                      <th>Coût</th>
                      <td>${o.cost.toFixed(2)}€</td>
                    </tr>
                  `:""}
                </table>
              </div>
            `).join("")}
            
            <div class="total-cost">
              Coût total: ${e.medications.reduce((o,l)=>o+(l.cost||0),0).toFixed(2)}€
            </div>
          </div>

          ${e.instructions?`
            <div class="instructions">
              <h3>Instructions générales</h3>
              <p>${e.instructions}</p>
            </div>
          `:""}

          ${e.followUpDate?`
            <div class="instructions">
              <h3>Suivi</h3>
              <p><strong>Date de suivi prévue:</strong> ${new Date(e.followUpDate).toLocaleDateString("fr-FR")}</p>
            </div>
          `:""}

          ${e.notes?`
            <div class="instructions">
              <h3>Notes</h3>
              <p>${e.notes}</p>
            </div>
          `:""}

          <div class="footer">
            <div class="signature-line"></div>
            <p>Signature du vétérinaire</p>
            <p><small>Cette prescription est valable pour la durée du traitement prescrit.</small></p>
          </div>
        </body>
      </html>
    `;a.document.write(i),a.document.close(),setTimeout(()=>{a.print(),a.close()},500)};return s.jsxs(F,{size:"sm",variant:"outline",onClick:r,className:"gap-2",children:[s.jsx(Ou,{className:"h-4 w-4"}),"Générer Ordonnance"]})}const bPe={active:"bg-green-100 text-green-800",completed:"bg-gray-100 text-gray-800",discontinued:"bg-red-100 text-red-800"},wPe={active:"Active",completed:"Terminée",discontinued:"Arrêtée"};function i8({petId:e,consultationId:t}){const{data:n=[]}=Cf(),{data:r=[]}=nee(e),{toast:a}=it(),[i,o]=b.useState(!1),[l,c]=b.useState(!1),[u,d]=b.useState(null),h=t?n.filter(x=>x.consultation_id===t):r,m=x=>{d(x),c(!0)},f=x=>{var y;confirm(`Êtes-vous sûr de vouloir supprimer la prescription pour ${((y=x.medications)==null?void 0:y.map(j=>j.medication_name).join(", "))||"médicaments"} ?`)&&a({title:"Fonctionnalité à implémenter",description:"La suppression de prescription n'est pas encore implémentée."})},g=x=>{switch(x){case"active":return s.jsx(qn,{className:"h-4 w-4 text-green-600"});case"completed":return s.jsx(Mn,{className:"h-4 w-4 text-gray-600"});case"discontinued":return s.jsx(dm,{className:"h-4 w-4 text-red-600"});default:return s.jsx(Kt,{className:"h-4 w-4 text-gray-600"})}},p=x=>{var y,j,w,N;return{id:x.id,consultationId:x.consultation_id,clientId:x.client_id,clientName:`${((y=x.client)==null?void 0:y.first_name)||""} ${((j=x.client)==null?void 0:j.last_name)||""}`.trim(),petId:x.animal_id,petName:((w=x.animal)==null?void 0:w.name)||"",date:x.prescription_date,prescribedBy:"Non spécifié",diagnosis:x.diagnosis||"",medications:((N=x.medications)==null?void 0:N.map(_=>({id:_.id,name:_.medication_name,dosage:_.dosage||"",frequency:_.frequency||"",duration:_.duration||"",instructions:_.instructions||"",quantity:_.quantity||1,unit:"unit",cost:0})))||[],instructions:x.notes||"",duration:x.valid_until||"",followUpDate:void 0,status:x.status||"active",notes:x.notes||"",createdAt:x.created_at}},v=x=>(x==null?void 0:x.reduce((y,j)=>y+(j.cost||0),0))||0;return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[s.jsx(ii,{className:"h-5 w-5"}),"Prescriptions (",h.length,")"]}),s.jsxs(F,{size:"sm",onClick:()=>o(!0),disabled:!t,className:"gap-2",children:[s.jsx(at,{className:"h-4 w-4"}),"Nouvelle Prescription"]})]}),h.length===0?s.jsx(Z,{children:s.jsxs(ee,{className:"p-6 text-center text-muted-foreground",children:[s.jsx(ii,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"Aucune prescription trouvée"}),s.jsx("p",{className:"text-sm",children:"Commencez par créer une nouvelle prescription"})]})}):s.jsx("div",{className:"space-y-4",children:h.sort((x,y)=>new Date(y.prescription_date||y.date).getTime()-new Date(x.prescription_date||x.date).getTime()).map(x=>{var y;return s.jsxs(Z,{className:"card-hover",children:[s.jsx(he,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[g(x.status),s.jsx(_e,{className:bPe[x.status],children:wPe[x.status]})]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx(Ke,{className:"h-4 w-4 inline mr-1"}),new Date(x.prescription_date||x.date).toLocaleDateString("fr-FR")]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(WN,{prescription:p(x)}),s.jsx(F,{size:"sm",variant:"outline",onClick:()=>m(x),className:"h-8 w-8 p-0",title:"Modifier",children:s.jsx($t,{className:"h-3 w-3"})}),s.jsx(F,{size:"sm",variant:"outline",onClick:()=>f(x),className:"h-8 w-8 p-0 text-red-600",title:"Supprimer",children:s.jsx(rn,{className:"h-3 w-3"})})]})]})}),s.jsxs(ee,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Prescrit par:"}),s.jsx("p",{className:"text-muted-foreground",children:"Non spécifié"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Diagnostic:"}),s.jsx("p",{className:"text-muted-foreground",children:x.diagnosis})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Durée:"}),s.jsx("p",{className:"text-muted-foreground",children:x.valid_until?new Date(x.valid_until).toLocaleDateString("fr-FR"):"N/A"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Coût total:"}),s.jsxs("p",{className:"text-muted-foreground",children:[v(x.medications).toFixed(2),"€"]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-3",children:"Médicaments prescrits:"}),s.jsx("div",{className:"space-y-3",children:(y=x.medications)==null?void 0:y.map(j=>s.jsx("div",{className:"p-3 border rounded-lg bg-muted/30",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"font-medium",children:j.medication_name}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx("span",{className:"font-medium",children:"Posologie:"})," ",j.dosage," - ",j.frequency]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx("span",{className:"font-medium",children:"Durée:"})," ",j.duration]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx("span",{className:"font-medium",children:"Quantité:"})," ",j.quantity]}),j.instructions&&s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx("span",{className:"font-medium",children:"Instructions:"})," ",j.instructions]})]}),j.cost&&s.jsx("div",{className:"text-right",children:s.jsxs("div",{className:"font-medium",children:[j.cost.toFixed(2),"€"]})})]})},j.id))})]}),x.instructions&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Instructions générales:"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:x.instructions})]}),x.followUpDate&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Kt,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:"Suivi prévu:"}),s.jsx("span",{className:"text-muted-foreground",children:new Date(x.followUpDate).toLocaleDateString("fr-FR")})]}),x.notes&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Notes:"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:x.notes})]})]})]},x.id)})})]}),t&&s.jsx(o_,{open:i,onOpenChange:o,petId:e.toString(),consultationId:t.toString()}),s.jsx(yPe,{open:l,onOpenChange:c,prescription:u})]})}const NPe={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},SPe=(e,t,n)=>{let r;const a=NPe[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",String(t)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"dans "+r:"il y a "+r:r},_Pe={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},CPe={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},PPe={full:"{{date}} 'à' {{time}}",long:"{{date}} 'à' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},APe={date:iu({formats:_Pe,defaultWidth:"full"}),time:iu({formats:CPe,defaultWidth:"full"}),dateTime:iu({formats:PPe,defaultWidth:"full"})},kPe={lastWeek:"eeee 'dernier à' p",yesterday:"'hier à' p",today:"'aujourd’hui à' p",tomorrow:"'demain à' p'",nextWeek:"eeee 'prochain à' p",other:"P"},TPe=(e,t,n,r)=>kPe[e],EPe={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jésus-Christ","après Jésus-Christ"]},OPe={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2ème trim.","3ème trim.","4ème trim."],wide:["1er trimestre","2ème trimestre","3ème trimestre","4ème trimestre"]},DPe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],wide:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},MPe={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},IPe={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"après-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’après-midi",evening:"du soir",night:"du matin"}},$Pe=(e,t)=>{const n=Number(e),r=t==null?void 0:t.unit;if(n===0)return"0";const a=["year","week","hour","minute","second"];let i;return n===1?i=r&&a.includes(r)?"ère":"er":i="ème",n+i},RPe=["MMM","MMMM"],FPe={preprocessor:(e,t)=>e.getDate()===1||!t.some(r=>r.isToken&&RPe.includes(r.value))?t:t.map(r=>r.isToken&&r.value==="do"?{isToken:!0,value:"d"}:r),ordinalNumber:$Pe,era:Sa({values:EPe,defaultWidth:"wide"}),quarter:Sa({values:OPe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Sa({values:DPe,defaultWidth:"wide"}),day:Sa({values:MPe,defaultWidth:"wide"}),dayPeriod:Sa({values:IPe,defaultWidth:"wide"})},LPe=/^(\d+)(ième|ère|ème|er|e)?/i,BPe=/\d+/i,zPe={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},VPe={any:[/^av/i,/^ap/i]},qPe={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},UPe={any:[/1/i,/2/i,/3/i,/4/i]},WPe={narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},HPe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},KPe={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},GPe={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},YPe={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},QPe={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},XPe={ordinalNumber:mF({matchPattern:LPe,parsePattern:BPe,valueCallback:e=>parseInt(e)}),era:_a({matchPatterns:zPe,defaultMatchWidth:"wide",parsePatterns:VPe,defaultParseWidth:"any"}),quarter:_a({matchPatterns:qPe,defaultMatchWidth:"wide",parsePatterns:UPe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:_a({matchPatterns:WPe,defaultMatchWidth:"wide",parsePatterns:HPe,defaultParseWidth:"any"}),day:_a({matchPatterns:KPe,defaultMatchWidth:"wide",parsePatterns:GPe,defaultParseWidth:"any"}),dayPeriod:_a({matchPatterns:YPe,defaultMatchWidth:"any",parsePatterns:QPe,defaultParseWidth:"any"})},Rn={code:"fr",formatDistance:SPe,formatLong:APe,formatRelative:TPe,localize:FPe,match:XPe,options:{weekStartsOn:1,firstWeekContainsDate:4}};function o8({animalId:e}){const{settings:t}=Pt(),{data:n}=nr(),{data:r}=tr(),{data:a}=Uo(),i=JSON.parse(localStorage.getItem("vetpro-veterinarians")||"[]"),o=n==null?void 0:n.find(h=>h.id===e),l=o?r==null?void 0:r.find(h=>h.id===o.client_id):null,c=(a==null?void 0:a.filter(h=>h.animal_id===e))||[],u=h=>{const m=new Date(h),f=new Date;if(isNaN(m.getTime()))return"N/A";let g=f.getFullYear()-m.getFullYear(),p=f.getMonth()-m.getMonth(),v=f.getDate()-m.getDate();if(v<0){p--;const j=new Date(f.getFullYear(),f.getMonth(),0);v+=j.getDate()}p<0&&(g--,p+=12);const x=Math.floor(v/7),y=[];return g>0&&y.push(`${g} an${g>1?"s":""}`),p>0&&y.push(`${p} mois`),x>0&&y.push(`${x} semain${x>1?"es":""}`),y.join(", ")||"0 jour"},d=()=>{if(!o||!l){alert("Données animal ou client manquantes");return}try{const h=window.open("",`vaccination_certificate_${o.id}`,"height=800,width=800");if(!h){alert("L'impression a été bloquée par le navigateur. Veuillez autoriser les popups pour ce site.");return}const m=`
        <!DOCTYPE html>
        <html>
          <head>
            <title>Certificat de Vaccination - ${o.name}</title>
            <style>
              body {
                font-family: Arial, sans-serif;
                margin: 20px;
                line-height: 1.6;
                color: #333;
              }
              .header {
                text-align: center;
                border-bottom: 3px solid #2c5530;
                padding-bottom: 20px;
                margin-bottom: 30px;
              }
              .header h1 {
                color: #2c5530;
                font-size: 32px;
                margin: 10px 0;
                font-weight: bold;
              }
              .clinic-info {
                margin-bottom: 30px;
                padding: 15px;
                background-color: #f8f9fa;
                border-radius: 8px;
              }
              .clinic-info img {
                height: 60px;
                margin-bottom: 10px;
              }
              .clinic-info h2 {
                color: #2c5530;
                margin: 10px 0;
              }
              .qr-section {
                float: right;
                margin-left: 20px;
              }
              .animal-info {
                clear: both;
                margin-bottom: 30px;
                padding: 20px;
                border: 2px solid #2c5530;
                border-radius: 8px;
              }
              .animal-info h2 {
                color: #2c5530;
                border-bottom: 2px solid #2c5530;
                padding-bottom: 10px;
                margin-bottom: 15px;
                font-size: 24px;
              }
              .animal-photo {
                text-align: center;
                margin-bottom: 20px;
              }
              .animal-photo img {
                width: 120px;
                height: 120px;
                object-fit: cover;
                border-radius: 50%;
                border: 3px solid #2c5530;
              }
              .info-grid {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 15px;
                margin-bottom: 20px;
              }
              .info-item {
                display: flex;
                align-items: center;
              }
              .info-label {
                font-weight: bold;
                min-width: 120px;
                color: #2c5530;
              }
              .info-value {
                color: #666;
              }
              .vaccinations-section {
                margin-bottom: 30px;
              }
              .vaccinations-section h2 {
                color: #2c5530;
                border-bottom: 2px solid #2c5530;
                padding-bottom: 10px;
                margin-bottom: 20px;
                font-size: 24px;
              }
              .vaccination-card {
                border: 1px solid #ddd;
                border-radius: 8px;
                margin-bottom: 15px;
                padding: 15px;
                background-color: #fdfdfd;
              }
              .vaccination-card h3 {
                color: #2c5530;
                margin: 0 0 10px 0;
                font-size: 18px;
              }
              .vaccination-details {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 15px;
              }
              .vaccination-item {
                display: flex;
                align-items: center;
              }
              .vaccination-label {
                font-weight: bold;
                min-width: 140px;
                color: #555;
              }
              .vaccination-value {
                color: #666;
              }
              .vets-info {
                margin-bottom: 30px;
                padding: 15px;
                background-color: #f8f9fa;
                border-radius: 8px;
              }
              .vets-info h2 {
                color: #2c5530;
                margin-bottom: 15px;
              }
              .vet-item {
                margin-bottom: 8px;
                color: #666;
              }
              .footer {
                text-align: center;
                margin-top: 40px;
                padding-top: 20px;
                border-top: 1px solid #ddd;
                color: #888;
                font-size: 12px;
              }
              .no-vaccinations {
                text-align: center;
                color: #666;
                font-style: italic;
                padding: 40px;
                border: 2px dashed #ddd;
                border-radius: 8px;
              }
              
              @media print {
                body { margin: 0; }
                .no-print { display: none; }
              }
            </style>
          </head>
          <body>
            <div class="header">
              ${t.logo?`<img src="${t.logo}" alt="Logo clinique" />`:""}
              <h1>CERTIFICAT DE VACCINATION</h1>
              <div class="qr-section">
                <canvas id="qrcode" width="100" height="100"></canvas>
              </div>
            </div>

            ${t.showClinicInfo?`
            <div class="clinic-info">
              <h2>${t.clinicName||"Clinique Vétérinaire"}</h2>
              <p><strong>Adresse:</strong> ${t.address||"N/A"}</p>
              <p><strong>Téléphone:</strong> ${t.phone||"N/A"} | <strong>Email:</strong> ${t.email||"N/A"}</p>
              ${t.website?`<p><strong>Site web:</strong> ${t.website}</p>`:""}
            </div>
            `:""}

            ${t.showVetsInfo&&i.length>0?`
            <div class="vets-info">
              <h2>Équipe Vétérinaire</h2>
              ${i.map(f=>`
                <div class="vet-item">
                  <strong>${f.title||"Dr."} ${f.name}</strong>
                  ${f.specialty?` - ${f.specialty}`:""}
                </div>
              `).join("")}
            </div>
            `:""}

            <div class="animal-info">
              <h2>Informations de l'Animal</h2>
              
              ${o.photo_url?`
              <div class="animal-photo">
                <img src="${o.photo_url}" alt="Photo de ${o.name}" />
              </div>
              `:""}

              <div class="info-grid">
                <div class="info-item">
                  <span class="info-label">Nom:</span>
                  <span class="info-value">${o.name}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Espèce:</span>
                  <span class="info-value">${o.species}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Race:</span>
                  <span class="info-value">${o.breed||"N/A"}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Âge:</span>
                  <span class="info-value">${o.birth_date?u(o.birth_date):"N/A"}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Sexe:</span>
                  <span class="info-value">${o.sex||"N/A"}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Poids:</span>
                  <span class="info-value">${o.weight?o.weight+" kg":"N/A"}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Propriétaire:</span>
                  <span class="info-value">${l.first_name} ${l.last_name}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Contact:</span>
                  <span class="info-value">${l.phone||l.email||"N/A"}</span>
                </div>
              </div>
            </div>

            <div class="vaccinations-section">
              <h2>Historique des Vaccinations</h2>
              
              ${c.length>0?c.map(f=>`
                  <div class="vaccination-card">
                    <h3>${f.vaccine_name}</h3>
                    <div class="vaccination-details">
                      <div class="vaccination-item">
                        <span class="vaccination-label">Date d'administration:</span>
                        <span class="vaccination-value">
                          ${f.vaccination_date?Je(new Date(f.vaccination_date),"dd/MM/yyyy",{locale:Rn}):"N/A"}
                        </span>
                      </div>
                      <div class="vaccination-item">
                        <span class="vaccination-label">Prochaine échéance:</span>
                        <span class="vaccination-value">
                          ${f.next_due_date?Je(new Date(f.next_due_date),"dd/MM/yyyy",{locale:Rn}):"N/A"}
                        </span>
                      </div>
                      <div class="vaccination-item">
                        <span class="vaccination-label">Type de vaccin:</span>
                        <span class="vaccination-value">${f.vaccine_type||"N/A"}</span>
                      </div>
                      <div class="vaccination-item">
                        <span class="vaccination-label">Fabricant:</span>
                        <span class="vaccination-value">${f.manufacturer||"N/A"}</span>
                      </div>
                      <div class="vaccination-item">
                        <span class="vaccination-label">Numéro de lot:</span>
                        <span class="vaccination-value">${f.batch_number||"N/A"}</span>
                      </div>
                  
                    </div>
                    ${f.notes?`
                      <div style="margin-top: 10px; padding-top: 10px; border-top: 1px solid #eee;">
                        <strong>Notes:</strong> ${f.notes}
                      </div>
                    `:""}
                  </div>
                `).join(""):`<div class="no-vaccinations">
                  <p>Aucune vaccination enregistrée pour cet animal</p>
                </div>`}
            </div>

            <div class="footer">
              <p>Certificat généré le ${Je(new Date,"dd/MM/yyyy à HH:mm",{locale:Rn})}</p>
              <p>VetPro - Système de Gestion Vétérinaire</p>
            </div>

            <script>
              // Generate QR Code (simple implementation)
              function generateQRCode() {
                const canvas = document.getElementById('qrcode');
                if (canvas) {
                  const ctx = canvas.getContext('2d');
                  ctx.fillStyle = '#000';
                  ctx.fillRect(0, 0, 100, 100);
                  ctx.fillStyle = '#fff';
                  ctx.font = '12px Arial';
                  ctx.textAlign = 'center';
                  ctx.fillText('QR', 50, 45);
                  ctx.fillText('CODE', 50, 60);
                }
              }
              
              window.onload = function() {
                generateQRCode();
                setTimeout(function() {
                  window.print();
                }, 500);
              };
            <\/script>
          </body>
        </html>
      `;h.document.open(),h.document.write(m),h.document.close(),h.onload=function(){setTimeout(()=>{h.focus(),h.print()},500)}}catch(h){console.error("Erreur lors de l'impression:",h),alert("Une erreur est survenue lors de l'impression du certificat.")}};return!o||!l?s.jsxs(F,{variant:"outline",disabled:!0,children:[s.jsx(Ou,{className:"h-4 w-4 mr-2"}),"Certificat de vaccination"]}):s.jsxs(F,{variant:"outline",onClick:d,children:[s.jsx(Ou,{className:"h-4 w-4 mr-2"}),"Certificat de vaccination"]})}function HN({children:e,selectedAnimalId:t,open:n,onOpenChange:r}){const{data:a=[]}=nr(),{data:i=[]}=tr(),o=qZ(),{toast:l}=it(),[c,u]=b.useState(!1),d=n!==void 0?n:c,h=r||u,[m,f]=b.useState({animalId:t||"",vaccineName:"",vaccineType:"",manufacturer:"",batchNumber:"",vaccinationDate:Je(new Date,"yyyy-MM-dd"),nextDueDate:"",administeredBy:"",notes:""}),g=async x=>{var w,N,_,S;if(x.preventDefault(),!m.animalId||!m.vaccineName||!m.vaccinationDate){l({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires",variant:"destructive"});return}if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(m.animalId)){l({title:"Erreur",description:"ID d'animal invalide",variant:"destructive"});return}const j={animal_id:m.animalId,vaccine_name:m.vaccineName.trim(),vaccine_type:m.vaccineType||void 0,manufacturer:((w=m.manufacturer)==null?void 0:w.trim())||void 0,batch_number:((N=m.batchNumber)==null?void 0:N.trim())||void 0,vaccination_date:m.vaccinationDate,next_due_date:m.nextDueDate||void 0,administered_by:((_=m.administeredBy)==null?void 0:_.trim())||void 0,notes:((S=m.notes)==null?void 0:S.trim())||void 0};try{await o.mutateAsync(j),l({title:"Vaccination ajoutée",description:`La vaccination ${m.vaccineName} a été ajoutée avec succès`}),f({animalId:t||"",vaccineName:"",vaccineType:"",manufacturer:"",batchNumber:"",vaccinationDate:Je(new Date,"yyyy-MM-dd"),nextDueDate:"",administeredBy:"",notes:""}),h(!1)}catch{l({title:"Erreur",description:"Impossible d'ajouter la vaccination",variant:"destructive"})}},p=a.find(x=>x.id===m.animalId),v=p?i.find(x=>x.id===p.client_id):null;return s.jsxs(et,{open:d,onOpenChange:h,children:[s.jsx(Vx,{asChild:!0,children:e||s.jsxs(F,{className:"gap-2",children:[s.jsx(at,{className:"h-4 w-4"}),"Nouvelle Vaccination"]})}),s.jsxs(Qe,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(tt,{children:s.jsxs(nt,{className:"flex items-center gap-2",children:[s.jsx(Br,{className:"h-5 w-5"}),"Nouvelle Vaccination"]})}),s.jsxs("form",{onSubmit:g,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"animal",children:"Animal *"}),s.jsxs(we,{value:m.animalId,onValueChange:x=>f({...m,animalId:x}),children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Sélectionnez un animal"})}),s.jsx(be,{children:a.map(x=>{const y=i.find(j=>j.id===x.client_id);return s.jsxs($,{value:x.id,children:[x.name," - ",x.species," (",y?`${y.first_name} ${y.last_name}`:"Client inconnu",")"]},x.id)})})]}),p&&v&&s.jsxs("p",{className:"text-sm text-gray-600",children:["Propriétaire: ",v.first_name," ",v.last_name]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"vaccineName",children:"Nom du vaccin *"}),s.jsx(G,{id:"vaccineName",value:m.vaccineName,onChange:x=>f({...m,vaccineName:x.target.value}),placeholder:"ex: DHPP, Rage, FVRCP...",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"vaccineType",children:"Type de vaccin"}),s.jsxs(we,{value:m.vaccineType,onValueChange:x=>f({...m,vaccineType:x}),children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Sélectionnez le type"})}),s.jsxs(be,{children:[s.jsx($,{value:"core",children:"Essentiel"}),s.jsx($,{value:"non-core",children:"Optionnel"}),s.jsx($,{value:"rabies",children:"Rage"}),s.jsx($,{value:"custom",children:"Personnalisé"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"manufacturer",children:"Fabricant"}),s.jsx(G,{id:"manufacturer",value:m.manufacturer,onChange:x=>f({...m,manufacturer:x.target.value}),placeholder:"ex: Zoetis, Virbac, Merial..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"batchNumber",children:"Numéro de lot"}),s.jsx(G,{id:"batchNumber",value:m.batchNumber,onChange:x=>f({...m,batchNumber:x.target.value}),placeholder:"Numéro de lot du vaccin"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"vaccinationDate",children:"Date de vaccination *"}),s.jsx(G,{id:"vaccinationDate",type:"date",value:m.vaccinationDate,onChange:x=>f({...m,vaccinationDate:x.target.value}),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"nextDueDate",children:"Prochain rappel"}),s.jsx(G,{id:"nextDueDate",type:"date",value:m.nextDueDate,onChange:x=>f({...m,nextDueDate:x.target.value}),min:m.vaccinationDate})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"notes",children:"Notes"}),s.jsx(Ue,{id:"notes",value:m.notes,onChange:x=>f({...m,notes:x.target.value}),placeholder:"Notes complémentaires...",rows:3})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(F,{type:"button",variant:"outline",onClick:()=>h(!1),children:"Annuler"}),s.jsx(F,{type:"submit",disabled:o.isPending,children:o.isPending?"Ajout...":"Ajouter la vaccination"})]})]})]})]})}function KN({open:e,onOpenChange:t,selectedAnimalId:n,selectedClientId:r,editingAntiparasitic:a}){const{data:i}=nr(),{data:o}=tr(),l=YZ(),{toast:c}=it(),[u,d]=b.useState({clientId:r||"",animalId:n||"",productName:"",activeIngredient:"",parasiteType:"",administrationRoute:"",dosage:"",treatmentDate:Je(new Date,"yyyy-MM-dd"),nextTreatmentDate:"",administeredBy:"",effectivenessRating:"none",notes:""}),[h,m]=b.useState(null),{data:f}=JZ(h==null?void 0:h.species);b.useEffect(()=>{r&&d(j=>({...j,clientId:r,animalId:""})),n&&d(j=>({...j,animalId:n}))},[r,n]),b.useEffect(()=>{if(u.animalId&&i){const j=i.find(w=>w.id===u.animalId);m(j),j&&d(w=>({...w,clientId:j.client_id}))}},[u.animalId,i]),b.useEffect(()=>{var j,w;a&&d({clientId:((j=a.animal)==null?void 0:j.client_id)||"",animalId:a.animal_id,productName:a.product_name,activeIngredient:a.active_ingredient||"",parasiteType:a.parasite_type||"",administrationRoute:a.administration_route||"",dosage:a.dosage||"",treatmentDate:a.treatment_date,nextTreatmentDate:a.next_treatment_date||"",administeredBy:a.administered_by||"",effectivenessRating:((w=a.effectiveness_rating)==null?void 0:w.toString())||"none",notes:a.notes||""})},[a]);const g=(j,w)=>{d(N=>({...N,[j]:w}))},p=j=>{d(w=>({...w,productName:j.product_name,activeIngredient:j.active_ingredient||"",parasiteType:j.parasite_type,administrationRoute:j.administration_route||"",dosage:j.dosage_recommendation||"",nextTreatmentDate:j.frequency_days?Je(XS(new Date(w.treatmentDate),j.frequency_days),"yyyy-MM-dd"):""})),c({title:"Protocole appliqué",description:`Le protocole ${j.product_name} a été appliqué.`})},v=()=>{d({clientId:r||"",animalId:n||"",productName:"",activeIngredient:"",parasiteType:"",administrationRoute:"",dosage:"",treatmentDate:Je(new Date,"yyyy-MM-dd"),nextTreatmentDate:"",administeredBy:"",effectivenessRating:"none",notes:""})},x=async j=>{if(j.preventDefault(),!u.animalId||!u.productName||!u.treatmentDate){c({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires.",variant:"destructive"});return}try{const w={animal_id:u.animalId,product_name:u.productName,active_ingredient:u.activeIngredient||void 0,parasite_type:u.parasiteType||void 0,administration_route:u.administrationRoute||void 0,dosage:u.dosage||void 0,treatment_date:u.treatmentDate,next_treatment_date:u.nextTreatmentDate||void 0,administered_by:u.administeredBy||void 0,effectiveness_rating:u.effectivenessRating&&u.effectivenessRating!=="none"?parseInt(u.effectivenessRating):void 0,notes:u.notes||void 0};await l.mutateAsync(w),c({title:"Succès",description:"Le traitement antiparasitaire a été enregistré avec succès."}),v(),t(!1)}catch(w){console.error("Erreur lors de la création du traitement antiparasitaire:",w),c({title:"Erreur",description:"Une erreur s'est produite lors de l'enregistrement.",variant:"destructive"})}},y=(i==null?void 0:i.filter(j=>u.clientId?j.client_id===u.clientId:!0))||[];return s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Qe,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsx(tt,{children:s.jsxs(nt,{className:"flex items-center gap-2",children:[s.jsx(Oa,{className:"h-5 w-5"}),a?"Modifier le traitement":"Nouveau traitement antiparasitaire"]})}),s.jsxs("form",{onSubmit:x,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"clientId",children:"Client *"}),s.jsxs(we,{value:u.clientId,onValueChange:j=>g("clientId",j),children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Sélectionner un client"})}),s.jsx(be,{children:o==null?void 0:o.map(j=>s.jsxs($,{value:j.id,children:[j.first_name," ",j.last_name]},j.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"animalId",children:"Animal *"}),s.jsxs(we,{value:u.animalId,onValueChange:j=>g("animalId",j),disabled:!u.clientId,children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Sélectionner un animal"})}),s.jsx(be,{children:y.map(j=>s.jsxs($,{value:j.id,children:[j.name," (",j.species,")"]},j.id))})]})]})]}),h&&s.jsxs(Z,{children:[s.jsx(he,{children:s.jsx(me,{className:"text-sm",children:"Animal sélectionné"})}),s.jsx(ee,{children:s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Nom:"})," ",h.name]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Espèce:"})," ",h.species]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Race:"})," ",h.breed||"N/A"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Poids:"})," ",h.weight?`${h.weight} kg`:"N/A"]})]})})]}),f&&f.length>0&&s.jsxs(Z,{children:[s.jsx(he,{children:s.jsxs(me,{className:"text-sm",children:["Protocoles recommandés pour ",h==null?void 0:h.species]})}),s.jsx(ee,{children:s.jsx("div",{className:"grid gap-2",children:f.map(j=>s.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:j.product_name}),s.jsxs("div",{className:"text-sm text-gray-600",children:[j.parasite_type," - ",j.active_ingredient]})]}),s.jsxs(F,{type:"button",variant:"outline",size:"sm",onClick:()=>p(j),children:[s.jsx(at,{className:"h-4 w-4 mr-1"}),"Appliquer"]})]},j.id))})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"productName",children:"Nom du produit *"}),s.jsx(G,{id:"productName",value:u.productName,onChange:j=>g("productName",j.target.value),placeholder:"Ex: Frontline, Bravecto...",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"activeIngredient",children:"Principe actif"}),s.jsx(G,{id:"activeIngredient",value:u.activeIngredient,onChange:j=>g("activeIngredient",j.target.value),placeholder:"Ex: Fipronil, Fluralaner..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"parasiteType",children:"Type de parasite"}),s.jsxs(we,{value:u.parasiteType,onValueChange:j=>g("parasiteType",j),children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Sélectionner le type"})}),s.jsxs(be,{children:[s.jsx($,{value:"puces",children:"Puces"}),s.jsx($,{value:"tiques",children:"Tiques"}),s.jsx($,{value:"vers_intestinaux",children:"Vers intestinaux"}),s.jsx($,{value:"vers_cardiaques",children:"Vers cardiaques"}),s.jsx($,{value:"acariens",children:"Acariens"}),s.jsx($,{value:"poux",children:"Poux"}),s.jsx($,{value:"multi_parasites",children:"Multi-parasites"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"administrationRoute",children:"Voie d'administration"}),s.jsxs(we,{value:u.administrationRoute,onValueChange:j=>g("administrationRoute",j),children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Sélectionner la voie"})}),s.jsxs(be,{children:[s.jsx($,{value:"spot_on",children:"Spot-on (pipette)"}),s.jsx($,{value:"oral",children:"Orale (comprimé/liquide)"}),s.jsx($,{value:"injection",children:"Injection"}),s.jsx($,{value:"spray",children:"Spray"}),s.jsx($,{value:"collier",children:"Collier"}),s.jsx($,{value:"shampoing",children:"Shampoing"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"dosage",children:"Dosage"}),s.jsx(G,{id:"dosage",value:u.dosage,onChange:j=>g("dosage",j.target.value),placeholder:"Ex: 1 pipette, 1 comprimé..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"treatmentDate",children:"Date du traitement *"}),s.jsx(G,{id:"treatmentDate",type:"date",value:u.treatmentDate,onChange:j=>g("treatmentDate",j.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"nextTreatmentDate",children:"Prochain traitement"}),s.jsx(G,{id:"nextTreatmentDate",type:"date",value:u.nextTreatmentDate,onChange:j=>g("nextTreatmentDate",j.target.value)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"effectivenessRating",children:"Efficacité (optionnel, 1-10)"}),s.jsxs(we,{value:u.effectivenessRating,onValueChange:j=>g("effectivenessRating",j),children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Évaluer l'efficacité"})}),s.jsxs(be,{children:[s.jsx($,{value:"none",children:"Non évalué"}),[...Array(10)].map((j,w)=>s.jsxs($,{value:(w+1).toString(),children:[w+1," - ",w+1<=3?"Faible":w+1<=6?"Moyenne":w+1<=8?"Bonne":"Excellente"]},w+1))]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"notes",children:"Notes"}),s.jsx(Ue,{id:"notes",value:u.notes,onChange:j=>g("notes",j.target.value),placeholder:"Observations, effets secondaires, etc.",rows:3})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx(F,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsxs(F,{type:"submit",disabled:l.isPending,children:[l.isPending&&s.jsx(Kn,{className:"h-4 w-4 mr-2 animate-spin"}),a?"Modifier":"Enregistrer"]})]})]})]})})}function JPe({open:e,onOpenChange:t,pet:n}){const{consultations:r,clients:a,getConsultationsByPetId:i,getClientById:o,getPrescriptionsByPetId:l,getActivePrescriptions:c,getVaccinationsByPetId:u,getAntiparasiticsByPetId:d,updatePet:h,updateConsultation:m,updateVaccination:f,updateVaccinationStatuses:g}=bt(),[p,v]=b.useState(!1),[x,y]=b.useState(!1),[j,w]=b.useState(!1),[N,_]=b.useState(!1),[S,C]=b.useState("overview"),[A,T]=b.useState(!1),[E,k]=b.useState({hasPedigree:!1,officialName:"",pedigreeNumber:"",breeder:"",fatherName:"",fatherPedigree:"",fatherBreed:"",fatherTitles:"",motherName:"",motherPedigree:"",motherBreed:"",motherTitles:"",pedigreePhoto:""}),[R,I]=b.useState((n==null?void 0:n.additionalPhotos)||[]),[W,V]=b.useState({clientId:0,petId:0,type:"",reason:""}),[q,P]=b.useState(null),[O,B]=b.useState(!1),[U,X]=b.useState(null),[ie,re]=b.useState(null),{toast:de}=it();b.useEffect(()=>{e&&g()},[e,g]);const pe=()=>{n&&(h(n.id,{...n,...E}),Object.assign(n,E),T(!1))},ce=()=>{n&&(k({hasPedigree:n.hasPedigree||!1,officialName:n.officialName||"",pedigreeNumber:n.pedigreeNumber||"",breeder:n.breeder||"",fatherName:n.fatherName||"",fatherPedigree:n.fatherPedigree||"",fatherBreed:n.fatherBreed||"",fatherTitles:n.fatherTitles||"",motherName:n.motherName||"",motherPedigree:n.motherPedigree||"",motherBreed:n.motherBreed||"",motherTitles:n.motherTitles||"",pedigreePhoto:n.pedigreePhoto||""}),T(!1))},se=K=>{n&&(V({clientId:n.ownerId,petId:n.id,type:"vaccination",reason:`Rappel vaccinal - ${K.vaccineName}`}),P(K),y(!0))},ae=K=>{X(K),B(!0)},le=(K,Ce)=>{f(K,{status:Ce}),re(null),de({title:"Statut mis à jour",description:`Le statut de la vaccination a été changé en "${{completed:"Terminée",scheduled:"Planifiée",overdue:"En retard",missed:"Manquée"}[Ce]}"`})},H=(K,Ce)=>{const fe=r.find(Is=>Is.id===K);if(!fe||!fe.photos)return;const ln=fe.photos.filter((Is,fs)=>fs!==Ce),Dr={...fe,photos:ln};m(K,Dr)},Q=async K=>{var ln;const Ce=(ln=K.target.files)==null?void 0:ln[0];if(!Ce)return;const fe=new FileReader;fe.onload=()=>{const Dr=fe.result,Is=[...R,Dr];I(Is),n&&h(n.id,{...n,additionalPhotos:Is})},fe.readAsDataURL(Ce)},ve=K=>{const Ce=R.filter((fe,ln)=>ln!==K);I(Ce),n&&h(n.id,{...n,additionalPhotos:Ce})};if(b.useEffect(()=>{n&&(k({hasPedigree:n.hasPedigree||!1,officialName:n.officialName||"",pedigreeNumber:n.pedigreeNumber||"",breeder:n.breeder||"",fatherName:n.fatherName||"",fatherPedigree:n.fatherPedigree||"",fatherBreed:n.fatherBreed||"",fatherTitles:n.fatherTitles||"",motherName:n.motherName||"",motherPedigree:n.motherPedigree||"",motherBreed:n.motherBreed||"",motherTitles:n.motherTitles||"",pedigreePhoto:n.pedigreePhoto||""}),I(n.additionalPhotos||[]))},[n]),!n)return null;const ge=o(n.ownerId),rt=i(n.id),Ge=u(n.id),dt=d(n.id),te=[...rt].sort((K,Ce)=>new Date(Ce.date).getTime()-new Date(K.date).getTime()),Pe=[...Ge].sort((K,Ce)=>new Date(Ce.dateGiven).getTime()-new Date(K.dateGiven).getTime()),oe=[...dt||[]].sort((K,Ce)=>new Date(Ce.dateGiven).getTime()-new Date(K.dateGiven).getTime()),Ee=te.filter(K=>K.weight||K.temperature).map(K=>({date:new Date(K.date).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit"}),weight:K.weight?parseFloat(K.weight):0,temperature:K.temperature?parseFloat(K.temperature):0})).reverse(),vt=te.filter(K=>K.weight).map(K=>parseFloat(K.weight)),At=te.filter(K=>K.temperature).map(K=>parseFloat(K.temperature)),xn=vt[0]||0,Ve=vt[1]||0,yt=xn-Ve,Cn=yt>0?"up":yt<0?"down":"stable",rr=At[0]||0,Yr=At.length>0?At.reduce((K,Ce)=>K+Ce,0)/At.length:0,yn=te[0],Ii=yn!=null&&yn.followUp?{reason:yn.followUp,estimatedDate:new Date(yn.date)}:null,Ln=[];if(yn){const K=(new Date().getTime()-new Date(yn.date).getTime())/2592e6;K>6&&Ln.push({type:"warning",title:"Contrôle de routine recommandé",message:`Dernière consultation il y a ${Math.floor(K)} mois`,action:"Planifier consultation",actionType:"consultation"})}(rr>39.5||rr<37.5)&&Ln.push({type:"danger",title:"Température anormale",message:`Température actuelle: ${rr}°C`,action:"Contrôle urgent",actionType:"consultation"}),yt<-2&&Ln.push({type:"warning",title:"Perte de poids",message:`Perte de ${Math.abs(yt)}kg depuis la dernière consultation`,action:"Surveiller",actionType:"consultation"});const Ha=new Date;new Date(Ha.getTime()+7*24*60*60*1e3),Ge.forEach(K=>{if(K.nextDueDate){const Ce=new Date(K.nextDueDate),fe=Math.ceil((Ce.getTime()-Ha.getTime())/(1e3*60*60*24));fe<0?Ln.push({type:"danger",title:"Vaccination en retard",message:`${K.vaccineName} - ${Math.abs(fe)} jour(s) de retard`,action:"Planifier vaccination",actionType:"vaccination"}):fe<=7&&Ln.push({type:"warning",title:"Vaccination à prévoir",message:`${K.vaccineName} - Dans ${fe} jour(s)`,action:"Planifier vaccination",actionType:"vaccination"})}}),dt.forEach(K=>{if(K.nextDueDate){const Ce=new Date(K.nextDueDate),fe=Math.ceil((Ce.getTime()-Ha.getTime())/(1e3*60*60*24));fe<0?Ln.push({type:"danger",title:"Traitement antiparasitaire en retard",message:`${K.productName} - ${Math.abs(fe)} jour(s) de retard`,action:"Planifier traitement",actionType:"antiparasitic"}):fe<=7&&Ln.push({type:"warning",title:"Traitement antiparasitaire à prévoir",message:`${K.productName} - Dans ${fe} jour(s)`,action:"Planifier traitement",actionType:"antiparasitic"})}});const Ms=()=>{V({clientId:(ge==null?void 0:ge.id)||0,petId:n.id,type:"consultation",reason:"Nouvelle consultation"}),y(!0)},pc=K=>{let Ce="consultation",fe="";switch(K){case"consultation":Ce="consultation",fe="Contrôle de routine recommandé";break;case"vaccination":Ce="vaccination",fe="Vaccination à effectuer";break;case"antiparasitic":Ce="controle",fe="Traitement antiparasitaire à effectuer";break;default:Ce="consultation",fe="Rendez-vous médical"}V({clientId:(ge==null?void 0:ge.id)||0,petId:n.id,type:Ce,reason:fe}),y(!0)},ma=()=>{const K=window.open("","_blank");if(!K)return;const Ce=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Dossier Médical - ${n.name}</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.6; }
            .header { text-align: center; border-bottom: 2px solid #333; padding-bottom: 20px; margin-bottom: 30px; }
            .clinic-name { font-size: 24px; font-weight: bold; color: #2563eb; }
            .pet-info { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px; }
            .info-section { border: 1px solid #ddd; padding: 15px; border-radius: 5px; }
            .info-section h3 { margin: 0 0 10px 0; color: #333; border-bottom: 1px solid #eee; padding-bottom: 5px; }
            .consultation { margin: 20px 0; border: 1px solid #eee; padding: 15px; border-radius: 5px; }
            .consultation h4 { margin: 0 0 10px 0; color: #333; }
            .stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 20px 0; }
            .stat-card { border: 1px solid #ddd; padding: 10px; text-align: center; border-radius: 5px; }
            .stat-value { font-size: 24px; font-weight: bold; color: #2563eb; }
            .stat-label { font-size: 12px; color: #666; }
            @media print { body { margin: 0; } }
          </style>
        </head>
        <body>
          <div class="header">
            <div class="clinic-name">VetPro CRM</div>
            <h2>Dossier Médical Complet</h2>
            <p><strong>Animal:</strong> ${n.name} | <strong>Généré le:</strong> ${new Date().toLocaleDateString("fr-FR")} à ${new Date().toLocaleTimeString("fr-FR")}</p>
          </div>

          <div class="pet-info">
            <div class="info-section">
              <h3>Informations Animal</h3>
              <p><strong>Nom:</strong> ${n.name}</p>
              <p><strong>Espèce:</strong> ${n.type}</p>
              <p><strong>Race:</strong> ${n.breed||"Non spécifiée"}</p>
              <p><strong>Sexe:</strong> ${n.gender==="male"?"Mâle":n.gender==="female"?"Femelle":"Non spécifié"}</p>
              <p><strong>Âge:</strong> ${n.birthDate?Du(n.birthDate):"Non spécifié"}</p>
              <p><strong>Poids actuel:</strong> ${xn}kg</p>
              <p><strong>Température actuelle:</strong> ${rr}°C</p>
              <p><strong>Couleur:</strong> ${n.color||"Non spécifiée"}</p>
              <p><strong>Puce électronique:</strong> ${n.microchip||"Non spécifiée"}</p>
              ${n.medicalNotes?`<p><strong>Notes médicales:</strong> ${n.medicalNotes}</p>`:""}
            </div>
            <div class="info-section">
              <h3>Propriétaire</h3>
              <p><strong>Nom:</strong> ${(ge==null?void 0:ge.name)||"Non spécifié"}</p>
              <p><strong>Email:</strong> ${(ge==null?void 0:ge.email)||"Non spécifié"}</p>
              <p><strong>Téléphone:</strong> ${(ge==null?void 0:ge.phone)||"Non spécifié"}</p>
            </div>
          </div>

          <div class="stats">
            <div class="stat-card">
              <div class="stat-value">${te.length}</div>
              <div class="stat-label">Consultations</div>
            </div>
            <div class="stat-card">
              <div class="stat-value">${Ge.length}</div>
              <div class="stat-label">Vaccinations</div>
            </div>
            <div class="stat-card">
              <div class="stat-value">${dt.length}</div>
              <div class="stat-label">Antiparasitaires</div>
            </div>
            <div class="stat-card">
              <div class="stat-value">${xn}kg</div>
              <div class="stat-label">Poids actuel</div>
            </div>
          </div>

          <!-- Photo principale de l'animal -->
          ${n.photo?`
            <div style="text-align: center; margin: 20px 0;">
              <img src="${n.photo}" alt="${n.name}" style="max-width: 200px; max-height: 200px; object-fit: cover; border-radius: 8px; border: 2px solid #ddd;" />
              <p style="margin-top: 10px; font-weight: bold;">Photo de ${n.name}</p>
            </div>
          `:""}

          <!-- Historique des Consultations -->
          <div style="margin: 30px 0; border: 1px solid #eee; padding: 20px; border-radius: 5px;">
            <h3 style="margin: 0 0 15px 0; color: #333; border-bottom: 2px solid #eee; padding-bottom: 10px;">Historique des Consultations (${te.length})</h3>
            ${te.length>0?te.map(fe=>`
              <div style="margin: 15px 0; border: 1px solid #ddd; padding: 15px; border-radius: 5px; background: #f9f9f9;">
                <h4 style="margin: 0 0 10px 0; color: #333;">Consultation du ${new Date(fe.date).toLocaleDateString("fr-FR")}</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                  <div>
                    <p><strong>Poids:</strong> ${fe.weight||"Non renseigné"}</p>
                    <p><strong>Température:</strong> ${fe.temperature||"Non renseigné"}</p>
                    ${fe.symptoms?`<p><strong>Symptômes:</strong> ${fe.symptoms}</p>`:""}
                  </div>
                  <div>
                    ${fe.diagnosis?`<p><strong>Diagnostic:</strong> ${fe.diagnosis}</p>`:""}
                    ${fe.treatment?`<p><strong>Traitement:</strong> ${fe.treatment}</p>`:""}
                    ${fe.medications?`<p><strong>Médicaments:</strong> ${fe.medications}</p>`:""}
                  </div>
                </div>
                ${fe.notes?`<p><strong>Notes:</strong> ${fe.notes}</p>`:""}
                ${fe.photos&&fe.photos.length>0?`
                  <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; margin: 15px 0;">
                    ${fe.photos.map((ln,Dr)=>`
                      <div style="text-align: center;">
                        <img src="${ln}" alt="Photo consultation ${Dr+1}" style="max-width: 120px; max-height: 120px; object-fit: cover; border-radius: 5px; border: 1px solid #ddd;" />
                        <div style="font-size: 11px; color: #666; margin-top: 5px;">Photo ${Dr+1}</div>
                      </div>
                    `).join("")}
                  </div>
                `:""}
              </div>
            `).join(""):'<p style="text-align: center; color: #666; font-style: italic;">Aucune consultation enregistrée</p>'}
          </div>

          <!-- Historique des Vaccinations -->
          <div style="margin: 30px 0; border: 1px solid #eee; padding: 20px; border-radius: 5px;">
            <h3 style="margin: 0 0 15px 0; color: #333; border-bottom: 2px solid #eee; padding-bottom: 10px;">Historique des Vaccinations (${Ge.length})</h3>
            ${Ge.length>0?Ge.map(fe=>`
              <div style="margin: 10px 0; padding: 10px; border-left: 3px solid #4CAF50; background: #f0f8f0;">
                <h4 style="margin: 0 0 10px 0;">${fe.vaccineName} - ${new Date(fe.dateGiven).toLocaleDateString("fr-FR")}</h4>
                <p><strong>Type:</strong> ${fe.vaccineType||"Non spécifié"}</p>
                <p><strong>Prochain rappel:</strong> ${fe.nextDueDate?new Date(fe.nextDueDate).toLocaleDateString("fr-FR"):"Non spécifié"}</p>
                <p><strong>Vétérinaire:</strong> ${fe.veterinarian||"Non spécifié"}</p>
                ${fe.notes?`<p><strong>Notes:</strong> ${fe.notes}</p>`:""}
              </div>
            `).join(""):'<p style="text-align: center; color: #666; font-style: italic;">Aucune vaccination enregistrée</p>'}
          </div>

          <!-- Historique des Antiparasitaires -->
          <div style="margin: 30px 0; border: 1px solid #eee; padding: 20px; border-radius: 5px;">
            <h3 style="margin: 0 0 15px 0; color: #333; border-bottom: 2px solid #eee; padding-bottom: 10px;">Historique des Traitements Antiparasitaires (${dt.length})</h3>
            ${dt.length>0?dt.map(fe=>`
              <div style="margin: 15px 0; padding: 15px; border-left: 4px solid #9C27B0; background: #f3e5f5; border-radius: 5px;">
                <h4 style="margin: 0 0 10px 0; color: #7B1FA2;">${fe.productName} - ${new Date(fe.dateGiven).toLocaleDateString("fr-FR")}</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 10px 0;">
                  <div>
                    <p><strong>Type de produit:</strong> ${fe.productType||"Non spécifié"}</p>
                    <p><strong>Parasites ciblés:</strong> ${fe.targetParasites||"Non spécifié"}</p>
                    <p><strong>Voie d'administration:</strong> ${fe.administrationRoute||"Non spécifié"}</p>
                    <p><strong>Dosage:</strong> ${fe.dosage||"Non spécifié"}</p>
                  </div>
                  <div>
                <p><strong>Prochain traitement:</strong> ${fe.nextDueDate?new Date(fe.nextDueDate).toLocaleDateString("fr-FR"):"Non spécifié"}</p>
                <p><strong>Vétérinaire:</strong> ${fe.veterinarian||"Non spécifié"}</p>
                    <p><strong>Statut:</strong> ${fe.status==="completed"?"Terminé":fe.status==="scheduled"?"Planifié":fe.status==="overdue"?"En retard":"Manqué"}</p>
                    ${fe.cost?`<p><strong>Coût:</strong> ${fe.cost} €</p>`:""}
                  </div>
                </div>
                ${fe.batchNumber?`<p><strong>Numéro de lot:</strong> ${fe.batchNumber}</p>`:""}
                ${fe.manufacturer?`<p><strong>Fabricant:</strong> ${fe.manufacturer}</p>`:""}
                ${fe.weight?`<p><strong>Poids de l'animal:</strong> ${fe.weight}</p>`:""}
                ${fe.notes?`
                  <div style="margin: 10px 0; padding: 10px; background: rgba(156, 39, 176, 0.1); border-radius: 3px;">
                    <p><strong>Notes:</strong> ${fe.notes}</p>
                  </div>
                `:""}
                ${fe.sideEffects?`
                  <div style="margin: 10px 0; padding: 10px; background: #ffebee; border: 1px solid #f44336; border-radius: 3px;">
                    <p style="color: #d32f2f;"><strong>⚠️ Effets indésirables:</strong> ${fe.sideEffects}</p>
                  </div>
                `:""}
              </div>
            `).join(""):'<p style="text-align: center; color: #666; font-style: italic;">Aucun traitement antiparasitaire enregistré</p>'}
          </div>

          <!-- Section Pedigree -->
          ${n.hasPedigree?`
            <div style="margin: 30px 0; border: 1px solid #eee; padding: 20px; border-radius: 5px;">
              <h3 style="margin: 0 0 15px 0; color: #333; border-bottom: 2px solid #eee; padding-bottom: 10px;">Pedigree Officiel</h3>
              
              <!-- Informations de l'animal -->
              <div style="margin: 20px 0; padding: 15px; background: #f8f9fa; border-radius: 5px;">
                <h4 style="margin: 0 0 10px 0; color: #333;">Informations de l'animal</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                  <div>
                    <p><strong>Nom officiel:</strong> ${n.officialName||"Non spécifié"}</p>
                    <p><strong>N° Pedigree/LOF:</strong> ${n.pedigreeNumber||"Non spécifié"}</p>
                    <p><strong>N° Puce/Tatouage:</strong> ${n.microchip||"Non spécifié"}</p>
                    <p><strong>Race:</strong> ${n.breed||"Non spécifiée"}</p>
                  </div>
                  <div>
                    <p><strong>Sexe:</strong> ${n.gender==="male"?"Mâle":n.gender==="female"?"Femelle":"Non spécifié"}</p>
                    <p><strong>Couleur/Robe:</strong> ${n.color||"Non spécifiée"}</p>
                    <p><strong>Date de naissance:</strong> ${n.birthDate?new Date(n.birthDate).toLocaleDateString("fr-FR"):"Non spécifié"}</p>
                    <p><strong>Éleveur:</strong> ${n.breeder||"Non spécifié"}</p>
                  </div>
                </div>
              </div>

              <!-- Parents -->
              <div style="margin: 20px 0;">
                <h4 style="margin: 0 0 10px 0; color: #333;">Ascendance</h4>
                
                <!-- Père -->
                <div style="margin: 15px 0; padding: 15px; border-left: 3px solid #007bff; background: #f0f8ff;">
                  <h5 style="margin: 0 0 8px 0; color: #007bff;">Père</h5>
                  <p><strong>Nom:</strong> ${n.fatherName||"Non spécifié"}</p>
                  <p><strong>N° Pedigree:</strong> ${n.fatherPedigree||"Non spécifié"}</p>
                  <p><strong>Race:</strong> ${n.fatherBreed||"Non spécifiée"}</p>
                  ${n.fatherTitles?`<p><strong>Titres:</strong> ${n.fatherTitles}</p>`:""}
                </div>

                <!-- Mère -->
                <div style="margin: 15px 0; padding: 15px; border-left: 3px solid #e91e63; background: #fce4ec;">
                  <h5 style="margin: 0 0 8px 0; color: #e91e63;">Mère</h5>
                  <p><strong>Nom:</strong> ${n.motherName||"Non spécifié"}</p>
                  <p><strong>N° Pedigree:</strong> ${n.motherPedigree||"Non spécifié"}</p>
                  <p><strong>Race:</strong> ${n.motherBreed||"Non spécifiée"}</p>
                  ${n.motherTitles?`<p><strong>Titres:</strong> ${n.motherTitles}</p>`:""}
                </div>
              </div>

              <!-- Certificat Pedigree -->
              ${n.pedigreePhoto?`
                <div style="margin: 20px 0; text-align: center;">
                  <h4 style="margin: 0 0 15px 0; color: #333;">Certificat Pedigree</h4>
                  <img src="${n.pedigreePhoto}" alt="Certificat Pedigree" style="max-width: 100%; max-height: 400px; object-fit: contain; border-radius: 8px; border: 2px solid #ddd; box-shadow: 0 4px 8px rgba(0,0,0,0.1);" />
                  <p style="margin-top: 10px; font-size: 12px; color: #666;">Document officiel du pedigree</p>
                </div>
              `:""}
            </div>
          `:""}

          <!-- Album Photo -->
          <div style="margin: 30px 0; border: 1px solid #eee; padding: 20px; border-radius: 5px;">
            <h3 style="margin: 0 0 15px 0; color: #333; border-bottom: 2px solid #eee; padding-bottom: 10px;">Album Photo</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px; margin: 15px 0;">
              ${n.photo?`
                <div style="text-align: center;">
                  <img src="${n.photo}" alt="Photo principale" style="max-width: 150px; max-height: 150px; object-fit: cover; border-radius: 5px; border: 1px solid #ddd;" />
                  <div style="font-size: 11px; color: #666; margin-top: 5px;">Photo principale</div>
                </div>
              `:""}
              ${te.some(fe=>fe.photos&&fe.photos.length>0)?te.map(fe=>fe.photos?fe.photos.map((ln,Dr)=>`
                    <div style="text-align: center;">
                      <img src="${ln}" alt="Consultation ${new Date(fe.date).toLocaleDateString("fr-FR")} - Photo ${Dr+1}" style="max-width: 150px; max-height: 150px; object-fit: cover; border-radius: 5px; border: 1px solid #ddd;" />
                      <div style="font-size: 11px; color: #666; margin-top: 5px;">Consultation ${new Date(fe.date).toLocaleDateString("fr-FR")}</div>
                    </div>
                  `).join(""):"").join(""):""}
            </div>
            ${!n.photo&&!te.some(fe=>fe.photos&&fe.photos.length>0)?'<p style="text-align: center; color: #666; font-style: italic;">Aucune photo disponible</p>':""}
          </div>

          <div style="margin-top: 40px; text-align: center; font-size: 12px; color: #666;">
            <p>VetPro CRM - Gestion Vétérinaire Complète</p>
          </div>
        </body>
      </html>
    `;K.document.write(Ce),K.document.close(),K.focus(),K.print(),K.close()};return s.jsxs(s.Fragment,{children:[s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Qe,{className:"sm:max-w-[1000px] max-h-[90vh] overflow-y-auto",children:[s.jsx(tt,{children:s.jsxs(nt,{className:"flex items-center gap-2",children:[s.jsx(Cr,{className:"h-5 w-5"}),"Dossier Médical - ",n.name,ge&&s.jsxs("span",{className:"text-sm text-muted-foreground",children:["(Propriétaire: ",ge.name,")"]})]})}),s.jsxs(Ti,{value:S,onValueChange:C,className:"space-y-4",children:[s.jsxs(qa,{className:"grid w-full grid-cols-7",children:[s.jsxs(Tt,{value:"overview",className:"gap-2",children:[s.jsx(ra,{className:"h-4 w-4"}),"Vue d'ensemble"]}),s.jsxs(Tt,{value:"history",className:"gap-2",children:[s.jsx(wn,{className:"h-4 w-4"}),"Historique"]}),s.jsxs(Tt,{value:"prescriptions",className:"gap-2",children:[s.jsx(Br,{className:"h-4 w-4"}),"Prescriptions"]}),s.jsxs(Tt,{value:"vaccinations",className:"gap-2",children:[s.jsx(Br,{className:"h-4 w-4"}),"Vaccinations"]}),s.jsxs(Tt,{value:"antiparasites",className:"gap-2",children:[s.jsx(hl,{className:"h-4 w-4"}),"Antiparasitaires"]}),s.jsxs(Tt,{value:"pedigree",className:"gap-2",children:[s.jsx(Ag,{className:"h-4 w-4"}),"Pedigree"]}),s.jsxs(Tt,{value:"charts",className:"gap-2",children:[s.jsx(an,{className:"h-4 w-4"}),"Évolution"]}),s.jsxs(Tt,{value:"alerts",className:"gap-2",children:[s.jsx(qn,{className:"h-4 w-4"}),"Alertes"]})]}),s.jsxs(Et,{value:"overview",className:"space-y-4",children:[s.jsxs(Z,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between",children:[s.jsx(me,{className:"text-lg",children:"Galerie photos"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:Q,className:"hidden",id:"add-photo-input"}),s.jsxs("label",{htmlFor:"add-photo-input",className:"cursor-pointer inline-flex items-center gap-2 px-3 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 transition-colors",children:[s.jsx(at,{className:"h-4 w-4"}),"Ajouter une photo"]})]})]}),s.jsx(ee,{children:s.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[n.photo&&s.jsxs("div",{className:"relative flex-shrink-0",children:[s.jsx("img",{src:n.photo,alt:"Photo officielle",className:"h-32 w-32 object-cover rounded"}),s.jsx("div",{className:"absolute bottom-1 left-1 bg-black/70 text-white text-xs px-1 rounded",children:"Officielle"})]}),R.map((K,Ce)=>s.jsxs("div",{className:"relative flex-shrink-0 group",children:[s.jsx("img",{src:K,alt:`Photo supplémentaire ${Ce+1}`,className:"h-32 w-32 object-cover rounded"}),s.jsxs("div",{className:"absolute bottom-1 left-1 bg-black/70 text-white text-xs px-1 rounded",children:["Photo ",Ce+1]}),s.jsx("button",{onClick:()=>ve(Ce),className:"absolute top-1 right-1 bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-200",title:"Supprimer cette photo",children:"×"})]},`additional-${Ce}`)),te.map(K=>{var Ce;return(Ce=K.photos)==null?void 0:Ce.map((fe,ln)=>s.jsxs("div",{className:"relative flex-shrink-0 group",children:[s.jsx("img",{src:fe,alt:`consultation-${K.id}-${ln}`,className:"h-32 w-32 object-cover rounded"}),s.jsx("div",{className:"absolute bottom-1 left-1 bg-black/70 text-white text-xs px-1 rounded",children:new Date(K.date).toLocaleDateString("fr-FR")}),s.jsx("button",{onClick:()=>H(K.id,ln),className:"absolute top-1 right-1 bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-200",title:"Supprimer cette photo",children:"×"})]},`${K.id}-${ln}`))}),!n.photo&&R.length===0&&te.every(K=>!K.photos||K.photos.length===0)&&s.jsx("div",{className:"flex items-center justify-center h-32 w-full border-2 border-dashed border-gray-300 rounded text-gray-500",children:"Aucune photo disponible"})]})})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-5",children:[s.jsx(Z,{children:s.jsx(ee,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Tg,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Poids actuel"}),s.jsxs("p",{className:"text-2xl font-bold",children:[xn,"kg"]}),yt!==0&&s.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[Cn==="up"?s.jsx(an,{className:"h-3 w-3 text-green-600"}):s.jsx(Ll,{className:"h-3 w-3 text-red-600"}),s.jsxs("span",{className:Cn==="up"?"text-green-600":"text-red-600",children:[Math.abs(yt),"kg"]})]})]})]})})}),s.jsx(Z,{children:s.jsx(ee,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(hm,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Température"}),s.jsxs("p",{className:"text-2xl font-bold",children:[rr,"°C"]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Moy: ",Yr.toFixed(1),"°C"]})]})]})})}),s.jsx(Z,{children:s.jsx(ee,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ke,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Consultations"}),s.jsx("p",{className:"text-2xl font-bold",children:te.length}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Dernière: ",yn?new Date(yn.date).toLocaleDateString("fr-FR"):"Aucune"]})]})]})})}),s.jsx(Z,{children:s.jsx(ee,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(qn,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Alertes"}),s.jsx("p",{className:"text-2xl font-bold",children:Ln.length}),s.jsx("p",{className:"text-sm text-muted-foreground",children:Ln.length>0?"À traiter":"Aucune"})]})]})})}),s.jsx(Z,{children:s.jsx(ee,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Br,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Prescriptions"}),s.jsx("p",{className:"text-2xl font-bold",children:l(n.id).length}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[c().filter(K=>K.petId===n.id).length," active(s)"]})]})]})})})]}),Ii&&s.jsx(Z,{className:"border-primary",children:s.jsx(ee,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold",children:"Prochain suivi recommandé"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:Ii.reason})]}),s.jsxs(F,{size:"sm",onClick:Ms,children:[s.jsx(at,{className:"h-4 w-4 mr-2"}),"Planifier"]})]})})}),Ln.length>0&&s.jsxs(Z,{className:"border-destructive",children:[s.jsx(he,{children:s.jsx(me,{className:"text-destructive",children:"Alertes importantes"})}),s.jsx(ee,{className:"space-y-2",children:Ln.slice(0,3).map((K,Ce)=>s.jsxs("div",{className:"flex items-center gap-3 p-2 bg-destructive/10 rounded",children:[s.jsx(qn,{className:"h-4 w-4 text-destructive"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:K.title}),s.jsx("p",{className:"text-sm text-muted-foreground",children:K.message})]}),s.jsx(F,{size:"sm",variant:"outline",onClick:()=>pc(K.actionType),children:K.action})]},Ce))})]})]}),s.jsxs(Et,{value:"history",className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Historique des consultations"}),s.jsxs(F,{size:"sm",onClick:Ms,className:"gap-2",children:[s.jsx(at,{className:"h-4 w-4"}),"Planifier Consultation"]})]}),te.length===0?s.jsx(Z,{children:s.jsxs(ee,{className:"p-8 text-center text-muted-foreground",children:[s.jsx(wn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"Aucune consultation enregistrée"}),s.jsx("p",{className:"text-sm",children:"Commencez par créer la première consultation"})]})}):s.jsx("div",{className:"space-y-4",children:te.map(K=>s.jsxs(Z,{children:[s.jsx(he,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(me,{className:"text-base",children:["Consultation #",K.id]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(Ke,{className:"h-4 w-4"}),new Date(K.date).toLocaleDateString("fr-FR")]})]})}),s.jsxs(ee,{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Poids:"}),s.jsx("span",{className:"ml-2",children:K.weight||"Non renseigné"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Température:"}),s.jsx("span",{className:"ml-2",children:K.temperature||"Non renseigné"})]})]}),K.symptoms&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Symptômes:"}),s.jsx("p",{className:"text-sm mt-1",children:K.symptoms})]}),K.diagnosis&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Diagnostic:"}),s.jsx("p",{className:"text-sm mt-1",children:K.diagnosis})]}),K.treatment&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Traitement:"}),s.jsx("p",{className:"text-sm mt-1",children:K.treatment})]}),K.medications&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Médicaments:"}),s.jsx("p",{className:"text-sm mt-1",children:K.medications})]}),K.notes&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Notes:"}),s.jsx("p",{className:"text-sm mt-1 text-muted-foreground",children:K.notes})]}),K.followUp&&s.jsxs("div",{className:"pt-2 border-t",children:[s.jsx("span",{className:"font-medium text-primary",children:"Suivi recommandé:"}),s.jsx("p",{className:"text-sm mt-1",children:K.followUp})]})]})]},K.id))})]}),s.jsx(Et,{value:"prescriptions",className:"space-y-4",children:s.jsx(i8,{petId:n.id})}),s.jsxs(Et,{value:"charts",className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Évolution du poids et de la température"}),Ee.length>0?s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Z,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(Tg,{className:"h-5 w-5"}),"Évolution du poids"]})}),s.jsx(ee,{children:s.jsx(_i,{width:"100%",height:200,children:s.jsxs(aO,{data:Ee,children:[s.jsx(Zl,{strokeDasharray:"3 3"}),s.jsx(oa,{dataKey:"date"}),s.jsx(la,{}),s.jsx(Un,{}),s.jsx(od,{type:"monotone",dataKey:"weight",stroke:"#2563eb",strokeWidth:2})]})})})]}),s.jsxs(Z,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(hm,{className:"h-5 w-5"}),"Évolution de la température"]})}),s.jsx(ee,{children:s.jsx(_i,{width:"100%",height:200,children:s.jsxs(aO,{data:Ee,children:[s.jsx(Zl,{strokeDasharray:"3 3"}),s.jsx(oa,{dataKey:"date"}),s.jsx(la,{}),s.jsx(Un,{}),s.jsx(od,{type:"monotone",dataKey:"temperature",stroke:"#dc2626",strokeWidth:2})]})})})]})]}):s.jsx(Z,{children:s.jsxs(ee,{className:"p-8 text-center text-muted-foreground",children:[s.jsx(an,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"Aucune donnée disponible pour les graphiques"}),s.jsx("p",{className:"text-sm",children:"Ajoutez des consultations avec poids et température"})]})})]}),s.jsxs(Et,{value:"vaccinations",className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Historique vaccinal"}),s.jsx(HN,{selectedClientId:ge==null?void 0:ge.id,selectedPetId:n.id,children:s.jsxs(F,{size:"sm",className:"gap-2",children:[s.jsx(at,{className:"h-4 w-4"}),"Nouvelle vaccination"]})})]}),Pe.length===0?s.jsx(Z,{children:s.jsxs(ee,{className:"p-8 text-center text-muted-foreground",children:[s.jsx(Br,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"Aucune vaccination enregistrée"}),s.jsx("p",{className:"text-sm",children:"Commencez par ajouter la première vaccination"})]})}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[s.jsx(Z,{children:s.jsx(ee,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-full",children:s.jsx(Br,{className:"h-4 w-4 text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total"}),s.jsx("p",{className:"text-xl font-bold",children:Pe.length})]})]})})}),s.jsx(Z,{children:s.jsx(ee,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:s.jsx(Ke,{className:"h-4 w-4 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"À jour"}),s.jsx("p",{className:"text-xl font-bold",children:Pe.filter(K=>K.status==="completed").length})]})]})})}),s.jsx(Z,{children:s.jsx(ee,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-red-100 rounded-full",children:s.jsx(qn,{className:"h-4 w-4 text-red-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"En retard"}),s.jsx("p",{className:"text-xl font-bold",children:Pe.filter(K=>K.status==="overdue").length})]})]})})}),s.jsx(Z,{children:s.jsx(ee,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-orange-100 rounded-full",children:s.jsx(Ke,{className:"h-4 w-4 text-orange-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Planifiées"}),s.jsx("p",{className:"text-xl font-bold",children:Pe.filter(K=>K.status==="scheduled").length})]})]})})})]}),s.jsx("div",{className:"space-y-3",children:Pe.map(K=>s.jsx(Z,{className:"hover:shadow-md transition-shadow",children:s.jsxs(ee,{className:"p-4",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx(Br,{className:`h-5 w-5 ${K.vaccinationCategory==="reminder"?"text-orange-600":"text-blue-600"}`}),s.jsxs("h4",{className:"font-semibold text-lg",children:[K.vaccineName,K.vaccinationCategory==="reminder"&&s.jsx("span",{className:"ml-2 text-sm text-orange-600 font-normal",children:"(Rappel)"})]}),s.jsx(_e,{variant:K.vaccineType==="core"?"default":"secondary",className:"text-xs",children:K.vaccineType==="core"?"Essentiel":K.vaccineType==="non-core"?"Optionnel":K.vaccineType==="rabies"?"Rage":"Personnalisé"}),K.vaccinationCategory==="reminder"&&s.jsx(_e,{variant:"secondary",className:"text-xs bg-orange-100 text-orange-800",children:"Rappel"}),ie===K.id?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(we,{value:K.status,onValueChange:Ce=>le(K.id,Ce),children:[s.jsx(je,{className:"w-32",children:s.jsx(Ne,{})}),s.jsxs(be,{children:[s.jsx($,{value:"completed",children:"Terminée"}),s.jsx($,{value:"scheduled",children:"Planifiée"}),s.jsx($,{value:"overdue",children:"En retard"}),s.jsx($,{value:"missed",children:"Manquée"})]})]}),s.jsx(F,{size:"sm",variant:"outline",onClick:()=>re(null),children:"Annuler"})]}):s.jsx(_e,{className:K.status==="completed"?"bg-green-100 text-green-800 border-green-200 cursor-pointer hover:bg-green-200":K.status==="overdue"?"bg-red-100 text-red-800 border-red-200 cursor-pointer hover:bg-red-200":K.status==="scheduled"?"bg-blue-100 text-blue-800 border-blue-200 cursor-pointer hover:bg-blue-200":"bg-orange-100 text-orange-800 border-orange-200 cursor-pointer hover:bg-orange-200",onClick:()=>re(K.id),children:K.status==="completed"?"Terminée":K.status==="overdue"?"En retard":K.status==="scheduled"?"Planifiée":"Manquée"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:K.vaccinationCategory==="reminder"?"Date du rappel":"Date administrée"}),s.jsx("p",{className:"font-medium",children:Da(K.dateGiven)})]}),K.vaccinationCategory==="new"&&s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Rappel prévu"}),s.jsx("p",{className:"font-medium",children:Da(K.nextDueDate)})]}),K.vaccinationCategory==="reminder"&&K.originalVaccinationId&&s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Vaccination originale"}),s.jsxs("p",{className:"font-medium text-sm text-gray-500",children:["ID: ",K.originalVaccinationId]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Vétérinaire"}),s.jsx("p",{className:"font-medium",children:K.veterinarian})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Coût"}),s.jsx("p",{className:"font-medium",children:K.cost?`${K.cost} €`:"Non spécifié"})]})]}),K.batchNumber&&s.jsx("div",{className:"mt-3 text-sm",children:s.jsxs("p",{className:"text-gray-600",children:["Numéro de lot: ",s.jsx("span",{className:"font-medium",children:K.batchNumber})]})}),K.manufacturer&&s.jsx("div",{className:"mt-1 text-sm",children:s.jsxs("p",{className:"text-gray-600",children:["Fabricant: ",s.jsx("span",{className:"font-medium",children:K.manufacturer})]})}),K.location&&s.jsx("div",{className:"mt-1 text-sm",children:s.jsxs("p",{className:"text-gray-600",children:["Site d'injection: ",s.jsx("span",{className:"font-medium",children:K.location==="left_shoulder"?"Épaule gauche":K.location==="right_shoulder"?"Épaule droite":K.location==="left_hip"?"Hanche gauche":K.location==="right_hip"?"Hanche droite":"Sous-cutané"})]})}),K.notes&&s.jsx("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg",children:s.jsxs("p",{className:"text-sm text-gray-700",children:[s.jsx("strong",{children:"Notes:"})," ",K.notes]})}),K.adverseReactions&&s.jsx("div",{className:"mt-2 p-3 bg-red-50 rounded-lg border border-red-200",children:s.jsxs("p",{className:"text-sm text-red-700",children:[s.jsx("strong",{children:"⚠️ Réactions adverses:"})," ",K.adverseReactions]})})]}),s.jsxs("div",{className:"flex flex-col gap-2 ml-4",children:[s.jsx(o8,{animalId:n.id.toString()}),K.nextDueDate&&new Date(K.nextDueDate)<=new Date&&K.status!=="completed"&&!K.reminderAppointmentId&&s.jsxs(F,{size:"sm",className:"gap-2",onClick:()=>se(K),children:[s.jsx(at,{className:"h-4 w-4"}),"Rappel"]}),K.reminderAppointmentId&&s.jsx(_e,{variant:"outline",className:"text-xs",children:"Rappel programmé"}),K.status==="overdue"&&s.jsxs(F,{size:"sm",className:"gap-2",onClick:()=>ae(K),children:[s.jsx(xU,{className:"h-4 w-4"}),"Confirmer"]})]})]}),K.reminderHistory&&K.reminderHistory.length>0&&s.jsxs("div",{className:"mt-4 pt-4 border-t",children:[s.jsx("h5",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Historique des rappels"}),s.jsx("div",{className:"space-y-2",children:K.reminderHistory.map(Ce=>s.jsxs("div",{className:"flex items-center justify-between text-xs bg-muted/30 p-2 rounded",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ke,{className:"h-3 w-3"}),s.jsx("span",{children:new Date(Ce.scheduledDate).toLocaleDateString("fr-FR")})]}),s.jsx(_e,{variant:Ce.status==="completed"?"default":Ce.status==="missed"?"destructive":"secondary",className:"text-xs",children:Ce.status==="completed"?"Complété":Ce.status==="missed"?"Manqué":Ce.status==="cancelled"?"Annulé":"Programmé"})]},Ce.id))})]})]})},K.id))})]})]}),s.jsxs(Et,{value:"antiparasites",className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Historique antiparasitaire"}),s.jsx(KN,{selectedClientId:ge==null?void 0:ge.id,selectedPetId:n.id,children:s.jsxs(F,{size:"sm",className:"gap-2",children:[s.jsx(at,{className:"h-4 w-4"}),"Nouveau Traitement"]})})]}),oe.length===0?s.jsx(Z,{children:s.jsxs(ee,{className:"p-8 text-center text-muted-foreground",children:[s.jsx(hl,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"Aucun traitement antiparasitaire enregistré"}),s.jsx("p",{className:"text-sm",children:"Ajoutez des traitements depuis l'onglet Antiparasitaires"})]})}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[s.jsx(Z,{children:s.jsx(ee,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-full",children:s.jsx(hl,{className:"h-4 w-4 text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total"}),s.jsx("p",{className:"text-xl font-bold",children:oe.length})]})]})})}),s.jsx(Z,{children:s.jsx(ee,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:s.jsx(Mn,{className:"h-4 w-4 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Complétés"}),s.jsx("p",{className:"text-xl font-bold",children:oe.filter(K=>K.status==="completed").length})]})]})})}),s.jsx(Z,{children:s.jsx(ee,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-red-100 rounded-full",children:s.jsx(qn,{className:"h-4 w-4 text-red-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"En retard"}),s.jsx("p",{className:"text-xl font-bold",children:oe.filter(K=>K.status==="overdue").length})]})]})})}),s.jsx(Z,{children:s.jsx(ee,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-orange-100 rounded-full",children:s.jsx(Ke,{className:"h-4 w-4 text-orange-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Planifiés"}),s.jsx("p",{className:"text-xl font-bold",children:oe.filter(K=>K.status==="scheduled").length})]})]})})})]}),s.jsx("div",{className:"space-y-3",children:oe.map(K=>s.jsx(Z,{className:"hover:shadow-md transition-shadow",children:s.jsx(ee,{className:"p-4",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx(hl,{className:"h-5 w-5 text-blue-600"}),s.jsx("h4",{className:"font-semibold text-lg",children:K.productName}),s.jsx(_e,{className:K.status==="completed"?"bg-green-100 text-green-800 border-green-200":K.status==="overdue"?"bg-red-100 text-red-800 border-red-200":K.status==="scheduled"?"bg-blue-100 text-blue-800 border-blue-200":"bg-orange-100 text-orange-800 border-orange-200",children:K.status==="completed"?"Terminé":K.status==="overdue"?"En retard":K.status==="scheduled"?"Planifié":"Manqué"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Date administrée"}),s.jsx("p",{className:"font-medium",children:new Date(K.dateGiven).toLocaleDateString("fr-FR")})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Prochain traitement"}),s.jsx("p",{className:"font-medium",children:K.nextDueDate?new Date(K.nextDueDate).toLocaleDateString("fr-FR"):"Non spécifié"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Type"}),s.jsx("p",{className:"font-medium",children:K.productType})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Vétérinaire"}),s.jsx("p",{className:"font-medium",children:K.veterinarian})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm mt-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Parasites ciblés"}),s.jsx("p",{className:"font-medium",children:K.targetParasites})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Dosage"}),s.jsx("p",{className:"font-medium",children:K.dosage||"Non spécifié"})]})]}),K.batchNumber&&s.jsx("div",{className:"mt-3 text-sm",children:s.jsxs("p",{className:"text-gray-600",children:["Numéro de lot: ",s.jsx("span",{className:"font-medium",children:K.batchNumber})]})}),K.manufacturer&&s.jsx("div",{className:"mt-1 text-sm",children:s.jsxs("p",{className:"text-gray-600",children:["Fabricant: ",s.jsx("span",{className:"font-medium",children:K.manufacturer})]})}),K.weight&&s.jsx("div",{className:"mt-1 text-sm",children:s.jsxs("p",{className:"text-gray-600",children:["Poids de l'animal: ",s.jsx("span",{className:"font-medium",children:K.weight})]})}),K.cost&&s.jsx("div",{className:"mt-1 text-sm",children:s.jsxs("p",{className:"text-gray-600",children:["Coût: ",s.jsxs("span",{className:"font-medium",children:[K.cost," €"]})]})}),K.notes&&s.jsx("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg",children:s.jsxs("p",{className:"text-sm text-gray-700",children:[s.jsx("strong",{children:"Notes:"})," ",K.notes]})}),K.sideEffects&&s.jsx("div",{className:"mt-2 p-3 bg-red-50 rounded-lg border border-red-200",children:s.jsxs("p",{className:"text-sm text-red-700",children:[s.jsx("strong",{children:"⚠️ Effets indésirables:"})," ",K.sideEffects]})})]}),s.jsx("div",{className:"flex flex-col gap-2 ml-4",children:K.nextDueDate&&new Date(K.nextDueDate)<=new Date&&K.status!=="completed"&&s.jsxs(F,{size:"sm",className:"gap-2",children:[s.jsx(at,{className:"h-4 w-4"}),"Rappel"]})})]})})},K.id))})]})]}),s.jsxs(Et,{value:"pedigree",className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Pedigree Officiel"}),s.jsxs(F,{variant:"outline",size:"sm",onClick:()=>T(!A),className:"gap-2",children:[s.jsx($t,{className:"h-4 w-4"}),A?"Annuler":"Modifier"]})]}),s.jsx(Z,{children:s.jsx(he,{children:s.jsxs(me,{className:"text-lg flex items-center gap-2",children:[s.jsx(mi,{id:"hasPedigree",checked:E.hasPedigree,onCheckedChange:K=>k(Ce=>({...Ce,hasPedigree:K})),disabled:!A}),s.jsx(D,{htmlFor:"hasPedigree",className:"text-lg",children:"Cet animal a un pedigree officiel"})]})})}),E.hasPedigree&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[s.jsxs(Z,{children:[s.jsx(he,{children:s.jsx(me,{className:"text-lg",children:"Informations sur l'animal"})}),s.jsx(ee,{className:"space-y-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(D,{htmlFor:"officialName",children:"Nom officiel"}),s.jsx(G,{id:"officialName",value:E.officialName,onChange:K=>k(Ce=>({...Ce,officialName:K.target.value})),disabled:!A,placeholder:"Nom officiel du pedigree"})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"pedigreeNumber",children:"N° pedigree/LOF"}),s.jsx(G,{id:"pedigreeNumber",value:E.pedigreeNumber,onChange:K=>k(Ce=>({...Ce,pedigreeNumber:K.target.value})),disabled:!A,placeholder:"Numéro de pedigree"})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"breeder",children:"Éleveur"}),s.jsx(G,{id:"breeder",value:E.breeder,onChange:K=>k(Ce=>({...Ce,breeder:K.target.value})),disabled:!A,placeholder:"Nom de l'éleveur"})]})]})})]}),s.jsxs(Z,{children:[s.jsx(he,{children:s.jsx(me,{className:"text-lg",children:"Parents"})}),s.jsx(ee,{className:"space-y-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-sm",children:"Père"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{placeholder:"Nom du père",value:E.fatherName,onChange:K=>k(Ce=>({...Ce,fatherName:K.target.value})),disabled:!A}),s.jsx(G,{placeholder:"N° pedigree du père",value:E.fatherPedigree,onChange:K=>k(Ce=>({...Ce,fatherPedigree:K.target.value})),disabled:!A}),s.jsx(G,{placeholder:"Race du père",value:E.fatherBreed,onChange:K=>k(Ce=>({...Ce,fatherBreed:K.target.value})),disabled:!A}),s.jsx(Ue,{placeholder:"Titres du père",value:E.fatherTitles,onChange:K=>k(Ce=>({...Ce,fatherTitles:K.target.value})),disabled:!A,rows:2})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-sm",children:"Mère"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(G,{placeholder:"Nom de la mère",value:E.motherName,onChange:K=>k(Ce=>({...Ce,motherName:K.target.value})),disabled:!A}),s.jsx(G,{placeholder:"N° pedigree de la mère",value:E.motherPedigree,onChange:K=>k(Ce=>({...Ce,motherPedigree:K.target.value})),disabled:!A}),s.jsx(G,{placeholder:"Race de la mère",value:E.motherBreed,onChange:K=>k(Ce=>({...Ce,motherBreed:K.target.value})),disabled:!A}),s.jsx(Ue,{placeholder:"Titres de la mère",value:E.motherTitles,onChange:K=>k(Ce=>({...Ce,motherTitles:K.target.value})),disabled:!A,rows:2})]})]})]})})]})]}),s.jsxs(Z,{children:[s.jsx(he,{children:s.jsx(me,{className:"text-lg",children:"Document officiel"})}),s.jsx(ee,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:async K=>{var ln;const Ce=(ln=K.target.files)==null?void 0:ln[0];if(!Ce)return;const fe=new FileReader;fe.onload=()=>k(Dr=>({...Dr,pedigreePhoto:fe.result})),fe.readAsDataURL(Ce)},disabled:!A}),E.pedigreePhoto&&s.jsx("img",{src:E.pedigreePhoto,alt:"Document pedigree",className:"h-48 w-auto object-contain rounded border"})]})})]}),A&&s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(F,{variant:"outline",onClick:ce,children:"Annuler"}),s.jsx(F,{onClick:pe,children:"Sauvegarder"})]})]}),!E.hasPedigree&&s.jsx(Z,{children:s.jsxs(ee,{className:"p-8 text-center text-muted-foreground",children:[s.jsx(Ag,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"Aucun pedigree officiel"}),s.jsx("p",{className:"text-sm",children:"Cochez la case ci-dessus pour ajouter les informations du pedigree"})]})})]}),s.jsxs(Et,{value:"alerts",className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Alertes et rappels"}),Ln.length===0?s.jsx(Z,{children:s.jsxs(ee,{className:"p-8 text-center text-muted-foreground",children:[s.jsx(qn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"Aucune alerte active"}),s.jsx("p",{className:"text-sm",children:"Tout va bien !"})]})}):s.jsx("div",{className:"space-y-4",children:Ln.map((K,Ce)=>s.jsx(Z,{className:K.type==="danger"?"border-destructive":"border-accent",children:s.jsx(ee,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(qn,{className:`h-5 w-5 ${K.type==="danger"?"text-destructive":"text-accent"}`}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold",children:K.title}),s.jsx("p",{className:"text-sm text-muted-foreground",children:K.message})]}),s.jsx(F,{size:"sm",variant:"outline",children:K.action})]})})},Ce))})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[s.jsx(F,{variant:"outline",onClick:()=>t(!1),children:"Fermer"}),s.jsxs(F,{onClick:ma,className:"gap-2",children:[s.jsx(Ou,{className:"h-4 w-4"}),"Imprimer Dossier"]})]})]})}),s.jsx(kd,{open:p,onOpenChange:v}),s.jsx(L3,{open:x,onOpenChange:K=>{y(K),K||(V({clientId:0,petId:0,type:"",reason:""}),P(null))},prefillClientId:W.clientId.toString(),prefillPetId:W.petId.toString(),prefillType:W.type,prefillReason:W.reason,originalVaccinationId:q==null?void 0:q.id}),j&&s.jsx(HN,{selectedClientId:ge==null?void 0:ge.id,selectedPetId:n.id,children:s.jsx(F,{onClick:()=>w(!1),children:"Fermer"})}),s.jsx(Tte,{open:O,onOpenChange:K=>{B(K),K||X(null)},vaccination:U}),N&&s.jsx(KN,{selectedClientId:ge==null?void 0:ge.id,selectedPetId:n.id,children:s.jsx(F,{onClick:()=>_(!1),children:"Fermer"})})]})}const ZPe={healthy:"bg-secondary text-secondary-foreground",treatment:"bg-accent text-accent-foreground",urgent:"bg-destructive text-destructive-foreground"};function eAe(){const{pets:e,consultations:t,appointments:n,clients:r}=bt();Pt();const[a,i]=b.useState(!1),[o,l]=b.useState(!1),[c,u]=b.useState(!1),[d,h]=b.useState(!1),[m,f]=b.useState(!1),[g,p]=b.useState(null),x=[...e].sort((k,R)=>!k.lastVisit&&!R.lastVisit?0:k.lastVisit?R.lastVisit?new Date(R.lastVisit).getTime()-new Date(k.lastVisit).getTime():-1:1).slice(0,5),y=e.length,j=e.filter(k=>k.status==="healthy").length;e.filter(k=>k.status==="treatment").length,e.filter(k=>k.status==="urgent").length;const w=e.filter(k=>{if(!k.lastVisit)return!1;const R=new Date(k.lastVisit),I=new Date().getMonth(),W=new Date().getFullYear();return R.getMonth()===I&&R.getFullYear()===W}).length,N=y>0?(t.length/y).toFixed(1):"0",_=k=>{p(k),l(!0)},S=k=>{p(k),u(!0)},C=k=>{p(k),h(!0)},A=k=>{p(k),f(!0)},T=k=>{const R=t.filter(V=>V.petId===k.id),I=n.filter(V=>V.petId===k.id),W=r.find(V=>V.id===k.ownerId);return{consultations:R.length,appointments:I.length,owner:(W==null?void 0:W.name)||k.owner,lastConsultation:R.length>0?Math.max(...R.map(V=>new Date(V.date).getTime())):k.lastVisit?new Date(k.lastVisit).getTime():0}},E=k=>{switch(k){case"healthy":return s.jsx(ht,{className:"h-3 w-3 text-green-600"});case"treatment":return s.jsx(wn,{className:"h-3 w-3 text-yellow-600"});case"urgent":return s.jsx(gn,{className:"h-3 w-3 text-red-600"});default:return s.jsx(ht,{className:"h-3 w-3"})}};return s.jsxs(s.Fragment,{children:[s.jsxs(Z,{className:"card-hover",children:[s.jsxs(he,{className:"flex flex-row items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(me,{className:"text-lg font-semibold",children:"Animaux Récents"}),s.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ht,{className:"h-3 w-3"}),s.jsxs("span",{children:[y," total"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ra,{className:"h-3 w-3"}),s.jsxs("span",{children:[j," en bonne santé"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(an,{className:"h-3 w-3"}),s.jsxs("span",{children:["+",w," ce mois"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Kt,{className:"h-3 w-3"}),s.jsxs("span",{children:["Ø ",N," consultations"]})]})]})]}),s.jsxs(F,{size:"sm",className:"gap-2",onClick:()=>i(!0),children:[s.jsx(at,{className:"h-4 w-4"}),"Nouvel Animal"]})]}),s.jsx(ee,{className:"space-y-4",children:x.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(ht,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"Aucun animal enregistré"}),s.jsx("p",{className:"text-sm",children:"Commencez par créer votre premier animal"})]}):x.map(k=>{const R=T(k);return s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[s.jsx(Zn,{className:"h-12 w-12 flex-shrink-0",children:k.photo?s.jsx(Ru,{src:k.photo,alt:k.name}):s.jsx(er,{className:"bg-primary-glow text-primary-foreground",children:s.jsx(ht,{className:"h-6 w-6"})})}),s.jsxs("div",{className:"space-y-1 flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h4",{className:"font-medium truncate",children:k.name}),s.jsxs(_e,{variant:"outline",className:ZPe[k.status],children:[E(k.status),s.jsx("span",{className:"ml-1",children:k.status==="healthy"?"En bonne santé":k.status==="treatment"?"En traitement":"Urgent"})]})]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"font-medium",children:k.type}),k.breed&&s.jsxs("span",{children:[" - ",k.breed]}),k.gender&&s.jsxs("span",{children:[" (",k.gender==="male"?"Mâle":"Femelle",")"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ke,{className:"h-3 w-3"}),s.jsx("span",{children:k.birthDate?Du(k.birthDate):"Âge inconnu"})]})]})}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[s.jsxs("span",{children:["Propriétaire: ",R.owner]}),s.jsxs("span",{children:["Consultations: ",R.consultations]}),s.jsxs("span",{children:["RDV: ",R.appointments]}),k.lastVisit&&s.jsxs("span",{children:["Dernière visite: ",new Date(k.lastVisit).toLocaleDateString("fr-FR")]})]})]})]}),s.jsxs("div",{className:"flex gap-1 flex-shrink-0 ml-2",children:[s.jsx(F,{size:"sm",variant:"outline",onClick:()=>_(k),className:"h-8 px-2",children:s.jsx(Nn,{className:"h-3 w-3"})}),s.jsx(F,{size:"sm",variant:"outline",onClick:()=>S(k),className:"h-8 px-2",children:s.jsx($t,{className:"h-3 w-3"})}),s.jsx(F,{size:"sm",variant:"outline",onClick:()=>C(k),className:"h-8 px-2 text-xs",children:"Dossier"}),s.jsx(F,{size:"sm",onClick:()=>A(k),className:"h-8 px-2 text-xs",children:s.jsx(wn,{className:"h-3 w-3"})})]})]},k.id)})})]}),s.jsx(Gx,{open:a,onOpenChange:i}),s.jsx(U3,{open:o,onOpenChange:l,pet:g,onEdit:()=>{l(!1),u(!0)},onShowDossier:()=>{l(!1),h(!0)}}),s.jsx(jee,{open:c,onOpenChange:u,pet:g}),s.jsx(JPe,{open:d,onOpenChange:h,pet:g}),s.jsx(kd,{open:m,onOpenChange:f})]})}function tAe({open:e,onOpenChange:t,consultation:n}){const{clients:r,pets:a,updateConsultation:i}=bt(),{toast:o}=it(),{settings:l}=Pt(),[c,u]=b.useState({clientId:0,clientName:"",petId:0,petName:"",date:"",weight:"",temperature:"",symptoms:"",diagnosis:"",treatment:"",medications:"",followUp:"",cost:"",notes:""}),d=a.filter(p=>p.ownerId===c.clientId),h=new Date().toISOString().split("T")[0],m=p=>{u(v=>({...v,[p.target.id]:p.target.value}))},f=(p,v)=>{if(p==="clientId"){const x=parseInt(v),y=r.find(j=>j.id===x);u(j=>({...j,clientId:x,clientName:(y==null?void 0:y.name)||"",petId:0,petName:""}))}else if(p==="petId"){const x=parseInt(v),y=a.find(j=>j.id===x);u(j=>({...j,petId:x,petName:(y==null?void 0:y.name)||""}))}else u(x=>({...x,[p]:v}))},g=p=>{if(p.preventDefault(),!!n){if(!c.clientId||!c.petId){o({title:"Erreur",description:"Veuillez sélectionner un client et un animal.",variant:"destructive"});return}i(n.id,{clientId:c.clientId,clientName:c.clientName,petId:c.petId,petName:c.petName,date:c.date||h,weight:c.weight,temperature:c.temperature,symptoms:c.symptoms,diagnosis:c.diagnosis,treatment:c.treatment,medications:c.medications,followUp:c.followUp,cost:c.cost,notes:c.notes}),o({title:"Consultation modifiée",description:`Consultation pour ${c.petName} (${c.clientName}) a été modifiée et sauvegardée.`}),t(!1)}};return b.useEffect(()=>{e&&n&&u({clientId:n.clientId,clientName:n.clientName,petId:n.petId,petName:n.petName,date:n.date,weight:n.weight||"",temperature:n.temperature||"",symptoms:n.symptoms||"",diagnosis:n.diagnosis||"",treatment:n.treatment||"",medications:n.medications||"",followUp:n.followUp||"",cost:n.cost||"",notes:n.notes||""})},[e,n]),n?s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Qe,{className:"sm:max-w-[700px] max-h-[80vh] overflow-y-auto",children:[s.jsxs(tt,{children:[s.jsx(nt,{children:"Modifier la Consultation"}),s.jsxs(Bt,{children:["Modifiez les détails de la consultation pour ",n.petName,"."]})]}),s.jsxs("form",{onSubmit:g,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{children:"Client *"}),s.jsxs(we,{value:c.clientId.toString(),onValueChange:p=>f("clientId",p),children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Sélectionner le client"})}),s.jsx(be,{children:r.map(p=>s.jsx($,{value:p.id.toString(),children:p.name},p.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{children:"Animal *"}),s.jsxs(we,{value:c.petId.toString(),onValueChange:p=>f("petId",p),disabled:!c.clientId,children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:c.clientId?"Sélectionner l'animal":"Sélectionnez d'abord un client"})}),s.jsx(be,{children:d.map(p=>s.jsxs($,{value:p.id.toString(),children:[p.name," (",p.type,")"]},p.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"date",children:"Date *"}),s.jsx(G,{id:"date",type:"date",value:c.date||h,onChange:m,required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"weight",children:"Poids (kg)"}),s.jsx(G,{id:"weight",type:"number",step:"0.1",value:c.weight,onChange:m,placeholder:"ex: 25.5"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"temperature",children:"Température (°C)"}),s.jsx(G,{id:"temperature",type:"number",step:"0.1",value:c.temperature,onChange:m,placeholder:"ex: 38.5"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"symptoms",children:"Symptômes observés"}),s.jsx(Ue,{id:"symptoms",value:c.symptoms,onChange:m,placeholder:"Décrivez les symptômes et observations...",rows:3})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"diagnosis",children:"Diagnostic"}),s.jsx(Ue,{id:"diagnosis",value:c.diagnosis,onChange:m,placeholder:"Diagnostic posé...",rows:3})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"treatment",children:"Traitement administré"}),s.jsx(Ue,{id:"treatment",value:c.treatment,onChange:m,placeholder:"Traitements, injections, interventions...",rows:3})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"medications",children:"Médicaments prescrits"}),s.jsx(Ue,{id:"medications",value:c.medications,onChange:m,placeholder:"Liste des médicaments avec posologie...",rows:3})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"followUp",children:"Suivi recommandé"}),s.jsx(G,{id:"followUp",value:c.followUp,onChange:m,placeholder:"ex: Contrôle dans 1 semaine"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(D,{htmlFor:"cost",children:["Coût (",l.currency,")"]}),s.jsx(G,{id:"cost",type:"number",step:"0.01",value:c.cost,onChange:m,placeholder:"ex: 85.50"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"notes",children:"Notes additionnelles"}),s.jsx(Ue,{id:"notes",value:c.notes,onChange:m,placeholder:"Notes diverses, recommandations...",rows:3})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(F,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsx(F,{type:"submit",children:"Modifier Consultation"})]})]})]})}):null}function l8({consultation:e}){const{settings:t}=Pt(),r=(i=>{var o;return i.petName&&i.clientName?i:{...i,petName:((o=i.animal)==null?void 0:o.name)||"Non spécifié",clientName:i.client?`${i.client.first_name||""} ${i.client.last_name||""}`.trim():"Non spécifié",date:i.consultation_date||i.date,symptoms:i.symptoms||"",diagnosis:i.diagnosis||"",treatment:i.treatment||"",notes:i.notes||"",weight:i.weight||null,temperature:i.temperature||null,medications:i.medications||"",followUp:i.follow_up_notes||i.followUp||null,cost:i.cost||null}})(e),a=()=>{if(!r||!r.petName||!r.clientName)return;const i=window.open("","_blank");if(!i)return;const o=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Consultation - ${r.petName}</title>
          <style>
            body {
              font-family: Arial, sans-serif;
              margin: 20px;
              line-height: 1.6;
            }
            .header {
              text-align: center;
              border-bottom: 2px solid #333;
              padding-bottom: 20px;
              margin-bottom: 30px;
            }
            .clinic-name {
              font-size: 24px;
              font-weight: bold;
              color: #2563eb;
            }
            .consultation-title {
              font-size: 20px;
              margin: 10px 0;
            }
            .info-grid {
              display: grid;
              grid-template-columns: 1fr 1fr;
              gap: 20px;
              margin-bottom: 30px;
            }
            .info-section {
              border: 1px solid #ddd;
              padding: 15px;
              border-radius: 5px;
            }
            .info-section h3 {
              margin: 0 0 10px 0;
              color: #333;
              border-bottom: 1px solid #eee;
              padding-bottom: 5px;
            }
            .info-item {
              margin: 5px 0;
            }
            .info-label {
              font-weight: bold;
              color: #666;
            }
            .medical-section {
              margin: 20px 0;
            }
            .medical-section h3 {
              color: #333;
              border-bottom: 1px solid #eee;
              padding-bottom: 5px;
            }
            .footer {
              margin-top: 40px;
              text-align: center;
              font-size: 12px;
              color: #666;
            }
            @media print {
              body { margin: 0; }
              .no-print { display: none; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            <div class="clinic-name">${t.clinicName||"VetPro CRM"}</div>
            <div class="consultation-title">Rapport de Consultation</div>
            <div>Date: ${new Date(r.date).toLocaleDateString("fr-FR")}</div>
          </div>

          <div class="info-grid">
            <div class="info-section">
              <h3>Informations Client</h3>
              <div class="info-item">
                <span class="info-label">Nom:</span> ${r.clientName}
              </div>
            </div>
            <div class="info-section">
              <h3>Informations Animal</h3>
              <div class="info-item">
                <span class="info-label">Nom:</span> ${r.petName}
              </div>
              <div class="info-item">
                <span class="info-label">Poids:</span> ${r.weight||"Non renseigné"}
              </div>
              <div class="info-item">
                <span class="info-label">Température:</span> ${r.temperature||"Non renseigné"}
              </div>
            </div>
          </div>

          ${r.symptoms?`
            <div class="medical-section">
              <h3>Symptômes Observés</h3>
              <p>${r.symptoms}</p>
            </div>
          `:""}

          ${r.diagnosis?`
            <div class="medical-section">
              <h3>Diagnostic</h3>
              <p>${r.diagnosis}</p>
            </div>
          `:""}

          ${r.treatment?`
            <div class="medical-section">
              <h3>Traitement Administré</h3>
              <p>${r.treatment}</p>
            </div>
          `:""}

          ${r.medications?`
            <div class="medical-section">
              <h3>Médicaments Prescrits</h3>
              <p>${r.medications}</p>
            </div>
          `:""}

          ${r.notes?`
            <div class="medical-section">
              <h3>Notes Additionnelles</h3>
              <p>${r.notes}</p>
            </div>
          `:""}

          <div class="info-grid">
            <div class="info-section">
              <h3>Suivi Recommandé</h3>
              <p>${r.followUp||"Aucun suivi prévu"}</p>
            </div>
            <div class="info-section">
              <h3>Coût</h3>
              <p>${r.cost?r.cost+" "+(t.currency||"MAD"):"Non renseigné"}</p>
            </div>
          </div>

          <div class="footer">
            <p>Consultation générée le ${new Date().toLocaleDateString("fr-FR")} à ${new Date().toLocaleTimeString("fr-FR")}</p>
            <p>VetPro CRM - Gestion Vétérinaire Complète</p>
          </div>
        </body>
      </html>
    `;i.document.write(o),i.document.close(),setTimeout(()=>{i.focus(),i.print(),i.close()},500)};return s.jsxs(F,{size:"sm",variant:"outline",onClick:a,className:"gap-2",children:[s.jsx(Ou,{className:"h-4 w-4"}),"Imprimer"]})}function nAe(){const{consultations:e,deleteConsultation:t,pets:n,clients:r}=bt(),{settings:a}=Pt(),{toast:i}=it(),[o,l]=b.useState(!1),[c,u]=b.useState(!1),[d,h]=b.useState(null),f=[...e].sort((R,I)=>new Date(I.date).getTime()-new Date(R.date).getTime()).slice(0,5),g=e.length,p=e.filter(R=>R.date===new Date().toISOString().split("T")[0]).length,v=new Date().getMonth(),x=new Date().getFullYear(),y=e.filter(R=>{const I=new Date(R.date);return I.getMonth()===v&&I.getFullYear()===x}).length,j=e.filter(R=>{const I=new Date(R.date),W=v===0?11:v-1,V=v===0?x-1:x;return I.getMonth()===W&&I.getFullYear()===V}).length,w=j>0?Math.round((y-j)/j*100):y>0?100:0,N=y*50,_=j*50,S=_>0?Math.round((N-_)/_*100):N>0?100:0,C=R=>{h(R),u(!0)},A=R=>{confirm(`Êtes-vous sûr de vouloir supprimer la consultation pour ${R.petName} ?`)&&(t(R.id),i({title:"Consultation supprimée",description:`La consultation pour ${R.petName} a été supprimée.`}))},T=R=>{const I=new Date().toISOString().split("T")[0];return R.date===I?"bg-accent text-accent-foreground":R.date<I?"bg-secondary text-secondary-foreground":"bg-primary text-primary-foreground"},E=R=>{const I=new Date().toISOString().split("T")[0];return R.date===I?"Aujourd'hui":R.date<I?"Terminée":"À venir"},k=R=>{const I=n.find(V=>V.id===R.petId),W=r.find(V=>V.id===R.clientId);return{petType:(I==null?void 0:I.type)||"Inconnu",petBreed:(I==null?void 0:I.breed)||"Non spécifiée",clientPhone:(W==null?void 0:W.phone)||"Non spécifié",clientCity:(W==null?void 0:W.city)||"Non spécifiée"}};return s.jsxs(s.Fragment,{children:[s.jsxs(Z,{className:"card-hover",children:[s.jsxs(he,{className:"flex flex-row items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(me,{className:"text-lg font-semibold",children:"Consultations Récentes"}),s.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(wn,{className:"h-3 w-3"}),s.jsxs("span",{children:[g," total"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ra,{className:"h-3 w-3"}),s.jsxs("span",{children:[p," aujourd'hui"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(an,{className:"h-3 w-3"}),s.jsxs("span",{children:[y," ce mois"]}),w!==0&&s.jsxs(_e,{variant:w>0?"default":"destructive",className:"text-xs",children:[w>0?"+":"",w,"%"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(vd,{className:"h-3 w-3"}),s.jsxs("span",{children:["~",N,"€ ce mois"]}),S!==0&&s.jsxs(_e,{variant:S>0?"default":"destructive",className:"text-xs",children:[S>0?"+":"",S,"%"]})]})]})]}),s.jsxs(F,{size:"sm",className:"gap-2",onClick:()=>l(!0),children:[s.jsx(at,{className:"h-4 w-4"}),"Nouvelle Consultation"]})]}),s.jsx(ee,{className:"space-y-4",children:f.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(wn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"Aucune consultation enregistrée"}),s.jsx("p",{className:"text-sm",children:"Commencez par créer votre première consultation"})]}):f.map(R=>{const I=k(R);return s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(Zn,{className:"h-12 w-12",children:s.jsx(er,{className:"bg-primary-glow text-primary-foreground",children:s.jsx(wn,{className:"h-6 w-6"})})}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("h4",{className:"font-medium",children:["Consultation #",R.id]}),s.jsx(_e,{variant:"outline",className:T(R),children:E(R)}),R.cost&&s.jsxs(_e,{variant:"secondary",className:"text-xs",children:[R.cost," ",a.currency||"€"]})]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ht,{className:"h-3 w-3"}),s.jsxs("span",{children:[R.petName," (",I.petType,")"]}),I.petBreed!=="Non spécifiée"&&s.jsxs("span",{children:[" - ",I.petBreed]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(hr,{className:"h-3 w-3"}),s.jsx("span",{children:R.clientName})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ke,{className:"h-3 w-3"}),s.jsx("span",{children:new Date(R.date).toLocaleDateString("fr-FR")})]})]})}),s.jsx("div",{className:"text-xs text-muted-foreground",children:s.jsxs("div",{className:"flex items-center gap-4",children:[R.diagnosis&&s.jsxs("span",{children:["Diagnostic: ",R.diagnosis]}),R.weight&&s.jsxs("span",{children:["Poids: ",R.weight]}),R.temperature&&s.jsxs("span",{children:["Température: ",R.temperature,"°C"]}),R.photos&&R.photos.length>0&&s.jsxs("span",{children:["📷 ",R.photos.length," photo",R.photos.length>1?"s":""]})]})})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(F,{size:"sm",variant:"outline",onClick:()=>C(R),className:"gap-2",children:[s.jsx($t,{className:"h-4 w-4"}),"Modifier"]}),s.jsx(l8,{consultation:R}),s.jsxs(F,{size:"sm",variant:"destructive",onClick:()=>A(R),className:"gap-2",children:[s.jsx(Cr,{className:"h-4 w-4"}),"Supprimer"]})]})]},R.id)})})]}),s.jsx(kd,{open:o,onOpenChange:l}),s.jsx(tAe,{open:c,onOpenChange:u,consultation:d})]})}function rAe(){const{appointments:e,stockItems:t,getUpcomingAppointments:n,getOverdueAppointments:r}=bt();Pt();const a=new Date().toISOString().split("T")[0];n();const i=r(),o=e.filter(d=>d.date===a&&d.status!=="cancelled"&&d.status!=="completed"),l=t.filter(d=>d.currentStock<=d.minimumStock),c=t.filter(d=>d.currentStock===0),u=[];return c.length>0&&u.push({type:"critical",icon:gn,title:"Stock épuisé",message:`${c.length} produit(s) en rupture de stock`,count:c.length,color:"text-red-600",bgColor:"bg-red-50",borderColor:"border-red-200"}),l.length>0&&u.push({type:"warning",icon:Oa,title:"Stock faible",message:`${l.length} produit(s) en stock faible`,count:l.length,color:"text-orange-600",bgColor:"bg-orange-50",borderColor:"border-orange-200"}),i.length>0&&u.push({type:"warning",icon:Kt,title:"Rendez-vous en retard",message:`${i.length} rendez-vous en retard`,count:i.length,color:"text-orange-600",bgColor:"bg-orange-50",borderColor:"border-orange-200"}),o.length>0&&u.push({type:"info",icon:Ke,title:"Rendez-vous aujourd'hui",message:`${o.length} rendez-vous prévus aujourd'hui`,count:o.length,color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200"}),u.length===0?s.jsxs(Z,{className:"card-hover",children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(an,{className:"h-5 w-5 text-green-600"}),"Aucune alerte"]})}),s.jsx(ee,{children:s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{className:"text-green-600 text-4xl mb-2",children:"✅"}),s.jsx("p",{className:"text-muted-foreground",children:"Tout va bien ! Aucune alerte à signaler."})]})})]}):s.jsxs(Z,{className:"card-hover",children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(gn,{className:"h-5 w-5 text-orange-600"}),"Alertes & Notifications",s.jsx(_e,{variant:"destructive",className:"ml-2",children:u.length})]})}),s.jsx(ee,{className:"space-y-3",children:u.map((d,h)=>s.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${d.borderColor} ${d.bgColor}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`p-2 rounded-full ${d.bgColor}`,children:s.jsx(d.icon,{className:`h-4 w-4 ${d.color}`})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-sm",children:d.title}),s.jsx("p",{className:"text-xs text-muted-foreground",children:d.message})]})]}),s.jsx(_e,{variant:d.type==="critical"?"destructive":d.type==="warning"?"secondary":"default",className:"text-xs",children:d.count})]},h))})]})}function sAe(){const{clients:e,pets:t,consultations:n,appointments:r,prescriptions:a,farms:i,farmInterventions:o}=bt();Pt();const l=e.reduce((x,y)=>x+y.pets.length,0),c=l===t.length,u=e.length+t.length+n.length+r.length+a.length+i.length+o.length,d=c?100:Math.round((u-Math.abs(l-t.length))/u*100),h=new Date().toISOString().split("T")[0],m=n.filter(x=>x.date===h).length,f=r.filter(x=>x.date===h&&x.status!=="cancelled"&&x.status!=="completed").length,g=new Date().getMonth(),p=new Date().getFullYear(),v=n.filter(x=>{const y=new Date(x.date);return y.getMonth()===g&&y.getFullYear()===p}).length;return s.jsxs(Z,{className:"mb-6",children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[c?s.jsx(Mn,{className:"h-5 w-5 text-green-600"}):s.jsx(qn,{className:"h-5 w-5 text-yellow-600"}),"Statut de Synchronisation"]})}),s.jsxs(ee,{children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(La,{className:"h-4 w-4 text-blue-600"}),s.jsxs("span",{className:"text-sm",children:["Clients: ",e.length]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ht,{className:"h-4 w-4 text-red-600"}),s.jsxs("span",{className:"text-sm",children:["Animaux: ",t.length]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Cr,{className:"h-4 w-4 text-green-600"}),s.jsxs("span",{className:"text-sm",children:["Consultations: ",n.length]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ke,{className:"h-4 w-4 text-purple-600"}),s.jsxs("span",{className:"text-sm",children:["RDV: ",r.length]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(an,{className:"h-4 w-4 text-blue-600"}),s.jsxs("span",{className:"text-sm",children:["Aujourd'hui: ",m+f]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Kt,{className:"h-4 w-4 text-green-600"}),s.jsxs("span",{className:"text-sm",children:["Ce mois: ",v]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Mn,{className:"h-4 w-4 text-orange-600"}),s.jsxs("span",{className:"text-sm",children:["Prescriptions: ",a.length]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Cr,{className:"h-4 w-4 text-indigo-600"}),s.jsxs("span",{className:"text-sm",children:["Fermes: ",i.length]})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"Intégrité des données:"}),s.jsxs(_e,{variant:d>=95?"default":d>=80?"secondary":"destructive",children:[d,"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full ${d>=95?"bg-green-600":d>=80?"bg-yellow-600":"bg-red-600"}`,style:{width:`${d}%`}})}),s.jsx("div",{className:"flex items-center gap-2 text-sm",children:c?s.jsxs(s.Fragment,{children:[s.jsx(Mn,{className:"h-4 w-4 text-green-600"}),s.jsx("span",{className:"text-green-700",children:"Synchronisation OK"})]}):s.jsxs(s.Fragment,{children:[s.jsx(qn,{className:"h-4 w-4 text-yellow-600"}),s.jsx("span",{className:"text-yellow-700",children:"Désynchronisation détectée"})]})}),!c&&s.jsxs("div",{className:"text-xs text-muted-foreground bg-yellow-50 p-2 rounded",children:[s.jsx("strong",{children:"Attention:"})," ",Math.abs(l-t.length)," animal(s) non synchronisé(s) entre clients et animaux"]})]})]})]})}function aAe(){const{clients:e,pets:t,consultations:n,appointments:r,prescriptions:a,farms:i,farmInterventions:o,resetData:l,exportData:c,importData:u}=bt(),{settings:d}=Pt(),{toast:h}=it(),[m,f]=b.useState(!1),[g,p]=b.useState(!1),v=e.length+t.length+n.length+r.length+a.length+i.length+o.length,x=Math.round(v*.5),y=[...e.map(k=>k.lastVisit),...t.map(k=>k.lastVisit).filter(Boolean),...n.map(k=>k.date),...r.map(k=>k.date),...a.map(k=>k.date),...i.map(k=>k.lastVisit)].filter(Boolean),j=y.length>0?new Date(Math.max(...y.map(k=>new Date(k).getTime()))):new Date,w=new Date().toISOString().split("T")[0],N=new Date().getMonth(),_=new Date().getFullYear(),S=[...e.filter(k=>k.lastVisit===w),...t.filter(k=>k.lastVisit===w),...n.filter(k=>k.date===w),...r.filter(k=>k.date===w)].length,C=[...e.filter(k=>{const R=new Date(k.lastVisit);return R.getMonth()===N&&R.getFullYear()===_}),...t.filter(k=>{if(!k.lastVisit)return!1;const R=new Date(k.lastVisit);return R.getMonth()===N&&R.getFullYear()===_}),...n.filter(k=>{const R=new Date(k.date);return R.getMonth()===N&&R.getFullYear()===_}),...r.filter(k=>{const R=new Date(k.date);return R.getMonth()===N&&R.getFullYear()===_})].length,A=()=>{try{c(),h({title:"Données exportées",description:`Export de ${v} enregistrements réussi.`})}catch{h({title:"Erreur d'export",description:"Impossible d'exporter les données.",variant:"destructive"})}},T=k=>{var W;const R=(W=k.target.files)==null?void 0:W[0];if(!R)return;const I=new FileReader;I.onload=V=>{var q,P;try{const O=JSON.parse((q=V.target)==null?void 0:q.result);if(O.clients&&O.pets)u(O),h({title:"Données importées",description:`${O.clients.length} clients, ${O.pets.length} animaux et ${((P=O.consultations)==null?void 0:P.length)||0} consultations importés avec succès.`});else throw new Error("Format de fichier invalide")}catch{h({title:"Erreur d'import",description:"Le fichier sélectionné n'est pas valide.",variant:"destructive"})}},I.readAsText(R),p(!1)},E=()=>{try{l(),h({title:"Données réinitialisées",description:"Toutes les données ont été remises aux valeurs par défaut."}),f(!1)}catch{h({title:"Erreur de réinitialisation",description:"Impossible de réinitialiser les données.",variant:"destructive"})}};return s.jsxs(s.Fragment,{children:[s.jsxs(Z,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(uU,{className:"h-5 w-5"}),"Gestion des Données"]})}),s.jsxs(ee,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Total:"}),s.jsxs("span",{className:"text-muted-foreground",children:[v," enregistrements"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Taille:"}),s.jsxs("span",{className:"text-muted-foreground",children:["~",x," KB"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Dernière modif:"}),s.jsx("span",{className:"text-muted-foreground",children:j.toLocaleDateString("fr-FR")})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(an,{className:"h-4 w-4 text-green-600"}),s.jsx("span",{className:"font-medium",children:"Aujourd'hui:"}),s.jsx("span",{className:"text-muted-foreground",children:S})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Kt,{className:"h-4 w-4 text-blue-600"}),s.jsx("span",{className:"font-medium",children:"Ce mois:"}),s.jsx("span",{className:"text-muted-foreground",children:C})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Mn,{className:"h-4 w-4 text-green-600"}),s.jsx("span",{className:"font-medium",children:"Clinique:"}),s.jsx("span",{className:"text-muted-foreground",children:d.clinicName||"Non configurée"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-xs",children:[s.jsxs("div",{className:"text-center p-2 bg-blue-50 rounded",children:[s.jsx("div",{className:"font-medium text-blue-700",children:e.length}),s.jsx("div",{className:"text-blue-600",children:"Clients"})]}),s.jsxs("div",{className:"text-center p-2 bg-red-50 rounded",children:[s.jsx("div",{className:"font-medium text-red-700",children:t.length}),s.jsx("div",{className:"text-red-600",children:"Animaux"})]}),s.jsxs("div",{className:"text-center p-2 bg-green-50 rounded",children:[s.jsx("div",{className:"font-medium text-green-700",children:n.length}),s.jsx("div",{className:"text-green-600",children:"Consultations"})]}),s.jsxs("div",{className:"text-center p-2 bg-purple-50 rounded",children:[s.jsx("div",{className:"font-medium text-purple-700",children:r.length}),s.jsx("div",{className:"text-purple-600",children:"RDV"})]}),s.jsxs("div",{className:"text-center p-2 bg-orange-50 rounded",children:[s.jsx("div",{className:"font-medium text-orange-700",children:a.length}),s.jsx("div",{className:"text-orange-600",children:"Prescriptions"})]}),s.jsxs("div",{className:"text-center p-2 bg-indigo-50 rounded",children:[s.jsx("div",{className:"font-medium text-indigo-700",children:i.length}),s.jsx("div",{className:"text-indigo-600",children:"Fermes"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(F,{size:"sm",variant:"outline",onClick:A,className:"gap-2",children:[s.jsx(yx,{className:"h-4 w-4"}),"Exporter"]}),s.jsxs(F,{size:"sm",variant:"outline",onClick:()=>p(!0),className:"gap-2",children:[s.jsx(bb,{className:"h-4 w-4"}),"Importer"]}),s.jsxs(F,{size:"sm",variant:"destructive",onClick:()=>f(!0),className:"gap-2",children:[s.jsx(bI,{className:"h-4 w-4"}),"Réinitialiser"]})]})]})]}),s.jsx(et,{open:m,onOpenChange:f,children:s.jsxs(Qe,{children:[s.jsxs(tt,{children:[s.jsxs(nt,{className:"flex items-center gap-2",children:[s.jsx(gn,{className:"h-5 w-5 text-red-600"}),"Réinitialiser toutes les données"]}),s.jsx(Bt,{children:"Cette action supprimera définitivement toutes les données (clients, animaux, consultations, etc.) et les remettra aux valeurs par défaut. Cette action ne peut pas être annulée."})]}),s.jsxs("div",{className:"flex gap-2 justify-end",children:[s.jsx(F,{variant:"outline",onClick:()=>f(!1),children:"Annuler"}),s.jsx(F,{variant:"destructive",onClick:E,children:"Réinitialiser"})]})]})}),s.jsx(et,{open:g,onOpenChange:p,children:s.jsxs(Qe,{children:[s.jsxs(tt,{children:[s.jsxs(nt,{className:"flex items-center gap-2",children:[s.jsx(bb,{className:"h-5 w-5"}),"Importer des données"]}),s.jsx(Bt,{children:"Sélectionnez un fichier JSON exporté précédemment pour restaurer vos données."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("input",{type:"file",accept:".json",onChange:T,className:"w-full"}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx("strong",{children:"Note:"})," L'import remplacera toutes les données existantes."]})]}),s.jsx("div",{className:"flex gap-2 justify-end",children:s.jsx(F,{variant:"outline",onClick:()=>p(!1),children:"Annuler"})})]})})]})}function iAe(){tr(),nr();const{data:e=[]}=qo(),{data:t=[]}=KS();Uo(),Hx();const{data:n=[]}=HS(),{settings:r}=Pt(),a=new Date().toISOString().split("T")[0];new Date().getMonth(),new Date().getFullYear();const i=e.filter(p=>p.consultation_date.split("T")[0]===a).length,o=t.filter(p=>p.appointment_date.split("T")[0]===a&&p.status!=="cancelled").length,l=0,c=[],u=n.filter(p=>p.current_quantity<=p.minimum_quantity).length,d=n.filter(p=>p.current_quantity===0).length,h={totalRevenue:0,totalExpenses:0,netIncome:0,revenueBreakdown:{consultations:0,vaccinations:0,antiparasitics:0,prescriptions:0,manualEntries:0},expenseBreakdown:{stockPurchases:0,salaries:0,rent:0,taxes:0,other:0}},g=[{title:"Consultations Aujourd'hui",value:i,icon:wn,color:"text-green-600",bgColor:"bg-green-50",trend:i>0?"up":"neutral",description:"Consultations réalisées"},{title:"RDV Aujourd'hui",value:o,icon:Ke,color:"text-blue-600",bgColor:"bg-blue-50",trend:o>0?"up":"neutral",description:"Rendez-vous programmés"},{title:"RDV Cette Semaine",value:l,icon:Kt,color:"text-purple-600",bgColor:"bg-purple-50",trend:"neutral",description:"Rendez-vous à venir"},{title:"RDV En Retard",value:c.length,icon:gn,color:c.length>0?"text-red-600":"text-gray-600",bgColor:c.length>0?"bg-red-50":"bg-gray-50",trend:c.length>0?"down":"neutral",description:"Rendez-vous en retard"},{title:"Nouveaux Clients",value:0,icon:La,color:"text-emerald-600",bgColor:"bg-emerald-50",trend:"neutral",description:"Ce mois"},{title:"Nouveaux Animaux",value:0,icon:ht,color:"text-pink-600",bgColor:"bg-pink-50",trend:"neutral",description:"Ce mois"},{title:"Revenus du Mois",value:`${h.totalRevenue.toFixed(0)} ${r.currency||"€"}`,icon:vd,color:"text-green-600",bgColor:"bg-green-50",trend:"neutral",description:`Bénéfice: ${h.netIncome.toFixed(0)} ${r.currency||"€"}`},{title:"Stock Critique",value:u,icon:ra,color:u>0?"text-orange-600":"text-green-600",bgColor:u>0?"bg-orange-50":"bg-green-50",trend:u>0?"down":"neutral",description:`${d} en rupture`}];return s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:g.map((p,v)=>s.jsxs(Z,{className:"card-hover",children:[s.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(me,{className:"text-sm font-medium text-muted-foreground",children:p.title}),s.jsx("div",{className:`p-2 rounded-lg ${p.bgColor}`,children:s.jsx(p.icon,{className:`h-4 w-4 ${p.color}`})})]}),s.jsxs(ee,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"text-2xl font-bold",children:p.value}),s.jsxs("div",{className:"flex items-center gap-1",children:[p.trend==="up"&&s.jsxs(s.Fragment,{children:[s.jsx(an,{className:"h-4 w-4 text-green-600"}),s.jsxs(_e,{variant:"secondary",className:"text-xs bg-green-100 text-green-800",children:["+",Math.floor(Math.random()*20)+5,"%"]})]}),p.trend==="down"&&s.jsxs(s.Fragment,{children:[s.jsx(Ll,{className:"h-4 w-4 text-red-600"}),s.jsxs(_e,{variant:"secondary",className:"text-xs bg-red-100 text-red-800",children:["-",Math.floor(Math.random()*15)+3,"%"]})]}),p.trend==="neutral"&&s.jsx(_e,{variant:"outline",className:"text-xs",children:"0%"})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:p.description})]})]},v))})}function oAe(){const{accountingEntries:e}=bt(),{settings:t}=Pt(),r=(()=>{const a=[],i=new Date;for(let o=5;o>=0;o--){const l=new Date(i.getFullYear(),i.getMonth()-o,1);`${l.getFullYear()}${String(l.getMonth()+1).padStart(2,"0")}`;const c=new Date(l.getFullYear(),l.getMonth(),1).toISOString().split("T")[0],u=new Date(l.getFullYear(),l.getMonth()+1,0).toISOString().split("T")[0],d=e.filter(f=>{const g=new Date(f.date);return g>=new Date(c)&&g<=new Date(u)}),h=d.filter(f=>f.type==="revenue").reduce((f,g)=>f+g.amount,0),m=d.filter(f=>f.type==="expense").reduce((f,g)=>f+g.amount,0);a.push({month:l.toLocaleDateString("fr-FR",{month:"short"}),revenue:Math.round(h),expenses:Math.round(m),profit:Math.round(h-m)})}return a})();return s.jsxs(Z,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(me,{className:"text-base font-medium",children:"Évolution des Revenus"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(vd,{className:"h-4 w-4 text-muted-foreground"}),s.jsx(an,{className:"h-4 w-4 text-green-600"})]})]}),s.jsxs(ee,{children:[s.jsx("div",{className:"h-[300px] w-full",children:s.jsx(_i,{width:"100%",height:"100%",children:s.jsxs(i_,{data:r,margin:{top:5,right:30,left:20,bottom:5},children:[s.jsx(Zl,{strokeDasharray:"3 3",className:"opacity-30"}),s.jsx(oa,{dataKey:"month",axisLine:!1,tickLine:!1,className:"text-xs"}),s.jsx(la,{axisLine:!1,tickLine:!1,className:"text-xs",tickFormatter:a=>`${a}${t.currency||"€"}`}),s.jsx(Un,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:(a,i)=>[`${a} ${t.currency||"€"}`,i==="revenue"?"Revenus":i==="expenses"?"Dépenses":"Bénéfice"]}),s.jsx(Ts,{type:"monotone",dataKey:"revenue",stackId:"1",stroke:"#10b981",fill:"#10b981",fillOpacity:.6,strokeWidth:2}),s.jsx(Ts,{type:"monotone",dataKey:"expenses",stackId:"2",stroke:"#ef4444",fill:"#ef4444",fillOpacity:.6,strokeWidth:2})]})})}),s.jsxs("div",{className:"flex items-center justify-between mt-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-muted-foreground",children:"Revenus"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),s.jsx("span",{className:"text-muted-foreground",children:"Dépenses"})]})]})]})]})}function lAe(){const{consultations:e,appointments:t,vaccinations:n,antiparasitics:r}=bt(),i=(()=>{const o=[],l=new Date;for(let c=6;c>=0;c--){const u=new Date(l);u.setDate(u.getDate()-c);const d=u.toISOString().split("T")[0],h=e.filter(p=>p.date===d).length,m=t.filter(p=>p.date===d).length,f=n.filter(p=>p.dateGiven===d).length,g=r.filter(p=>p.dateGiven===d).length;o.push({day:u.toLocaleDateString("fr-FR",{weekday:"short"}),date:d,consultations:h,appointments:m,vaccinations:f,antiparasitics:g,total:h+m+f+g})}return o})();return s.jsxs(Z,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(me,{className:"text-base font-medium",children:"Activité des 7 derniers jours"}),s.jsx(ra,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(ee,{children:[s.jsx("div",{className:"h-[300px] w-full",children:s.jsx(_i,{width:"100%",height:"100%",children:s.jsxs(xPe,{data:i,margin:{top:5,right:30,left:20,bottom:5},children:[s.jsx(Zl,{strokeDasharray:"3 3",className:"opacity-30"}),s.jsx(oa,{dataKey:"day",axisLine:!1,tickLine:!1,className:"text-xs"}),s.jsx(la,{axisLine:!1,tickLine:!1,className:"text-xs"}),s.jsx(Un,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:(o,l)=>[o,l==="consultations"?"Consultations":l==="appointments"?"Rendez-vous":l==="vaccinations"?"Vaccinations":l==="antiparasitics"?"Antiparasitaires":"Total"]}),s.jsx(Aa,{dataKey:"consultations",fill:"#10b981",radius:[2,2,0,0]}),s.jsx(Aa,{dataKey:"appointments",fill:"#3b82f6",radius:[2,2,0,0]}),s.jsx(Aa,{dataKey:"vaccinations",fill:"#8b5cf6",radius:[2,2,0,0]}),s.jsx(Aa,{dataKey:"antiparasitics",fill:"#f59e0b",radius:[2,2,0,0]})]})})}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mt-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-muted-foreground",children:"Consultations"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),s.jsx("span",{className:"text-muted-foreground",children:"Rendez-vous"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),s.jsx("span",{className:"text-muted-foreground",children:"Vaccinations"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-amber-500 rounded-full"}),s.jsx("span",{className:"text-muted-foreground",children:"Antiparasitaires"})]})]})]})]})}function cAe(){const{stockItems:e}=bt(),t=M.useMemo(()=>{const a=e.length,i=e.filter(c=>c.currentStock<=c.minimumStock&&c.currentStock>0).length,o=e.filter(c=>c.currentStock===0).length;return[{name:"Stock Normal",value:a-i-o,color:"#10b981"},{name:"Stock Faible",value:i,color:"#f59e0b"},{name:"Rupture",value:o,color:"#ef4444"}].filter(c=>c.value>0)},[e]),n=e.reduce((a,i)=>a+i.currentStock*i.purchasePrice,0),r=e.sort((a,i)=>i.currentStock*i.purchasePrice-a.currentStock*a.purchasePrice).slice(0,5);return s.jsxs(Z,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(me,{className:"text-base font-medium",children:"État du Stock"}),s.jsx(Oa,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(ee,{children:[s.jsx("div",{className:"h-[300px] w-full",children:s.jsx(_i,{width:"100%",height:"100%",children:s.jsxs(a_,{children:[s.jsx(ha,{data:t,cx:"50%",cy:"50%",labelLine:!1,label:({name:a,percent:i})=>`${a} ${(i*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:t.map((a,i)=>s.jsx(Ld,{fill:a.color},`cell-${i}`))}),s.jsx(Un,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:a=>[a,"Articles"]})]})})}),s.jsxs("div",{className:"mt-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Valeur totale du stock"}),s.jsxs("span",{className:"font-medium",children:[n.toFixed(0)," €"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-sm font-medium",children:"Articles les plus précieux"}),r.map((a,i)=>s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsx("span",{className:"truncate flex-1",children:a.name}),s.jsxs("span",{className:"text-muted-foreground ml-2",children:[(a.currentStock*a.purchasePrice).toFixed(0)," €"]})]},a.id))]})]})]})]})}function uAe(){const{clients:e,pets:t}=bt(),r=(()=>{const a=[],i=new Date;for(let o=5;o>=0;o--){const l=new Date(i.getFullYear(),i.getMonth()-o,1),c=new Date(l.getFullYear(),l.getMonth(),1),u=new Date(l.getFullYear(),l.getMonth()+1,0),d=e.filter(g=>{const p=new Date(g.createdAt);return p>=c&&p<=u}).length,h=t.filter(g=>{const p=new Date(g.createdAt);return p>=c&&p<=u}).length,m=e.filter(g=>new Date(g.createdAt)<=u).length,f=t.filter(g=>new Date(g.createdAt)<=u).length;a.push({month:l.toLocaleDateString("fr-FR",{month:"short"}),newClients:d,newPets:h,totalClients:m,totalPets:f})}return a})();return s.jsxs(Z,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(me,{className:"text-base font-medium",children:"Croissance des Clients"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(La,{className:"h-4 w-4 text-muted-foreground"}),s.jsx(an,{className:"h-4 w-4 text-blue-600"})]})]}),s.jsxs(ee,{children:[s.jsx("div",{className:"h-[300px] w-full",children:s.jsx(_i,{width:"100%",height:"100%",children:s.jsxs(i_,{data:r,margin:{top:5,right:30,left:20,bottom:5},children:[s.jsx(Zl,{strokeDasharray:"3 3",className:"opacity-30"}),s.jsx(oa,{dataKey:"month",axisLine:!1,tickLine:!1,className:"text-xs"}),s.jsx(la,{axisLine:!1,tickLine:!1,className:"text-xs"}),s.jsx(Un,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:(a,i)=>[a,i==="newClients"?"Nouveaux Clients":i==="newPets"?"Nouveaux Animaux":i==="totalClients"?"Total Clients":"Total Animaux"]}),s.jsx(Ts,{type:"monotone",dataKey:"newClients",stackId:"1",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.6,strokeWidth:2}),s.jsx(Ts,{type:"monotone",dataKey:"newPets",stackId:"2",stroke:"#8b5cf6",fill:"#8b5cf6",fillOpacity:.6,strokeWidth:2})]})})}),s.jsxs("div",{className:"flex items-center justify-between mt-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),s.jsx("span",{className:"text-muted-foreground",children:"Nouveaux Clients"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),s.jsx("span",{className:"text-muted-foreground",children:"Nouveaux Animaux"})]})]})]})]})}function dAe(){const{appointments:e}=bt(),t=M.useMemo(()=>{const c=e.reduce((h,m)=>(h[m.status]=(h[m.status]||0)+1,h),{}),u={scheduled:"Planifié",confirmed:"Confirmé",completed:"Terminé",cancelled:"Annulé","no-show":"Absent"},d={scheduled:"#3b82f6",confirmed:"#10b981",completed:"#6b7280",cancelled:"#ef4444","no-show":"#f59e0b"};return Object.entries(c).map(([h,m])=>({name:u[h]||h,value:m,color:d[h]||"#6b7280"}))},[e]),n=e.length,r=e.filter(c=>c.status==="completed").length,a=e.filter(c=>c.status==="scheduled"||c.status==="confirmed").length,i=e.filter(c=>c.status==="cancelled").length,o=n>0?r/n*100:0,l=n>0?i/n*100:0;return s.jsxs(Z,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(me,{className:"text-base font-medium",children:"Statuts des Rendez-vous"}),s.jsx(Ke,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(ee,{children:[s.jsx("div",{className:"h-[300px] w-full",children:s.jsx(_i,{width:"100%",height:"100%",children:s.jsxs(a_,{children:[s.jsx(ha,{data:t,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,dataKey:"value",children:t.map((c,u)=>s.jsx(Ld,{fill:c.color},`cell-${u}`))}),s.jsx(Un,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:c=>[c,"Rendez-vous"]})]})})}),s.jsxs("div",{className:"mt-4 space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[o.toFixed(1),"%"]}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Taux de réussite"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-red-600",children:[l.toFixed(1),"%"]}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Taux d'annulation"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Mn,{className:"h-4 w-4 text-green-600"}),s.jsx("span",{children:"Terminés"})]}),s.jsx("span",{className:"font-medium",children:r})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Kt,{className:"h-4 w-4 text-blue-600"}),s.jsx("span",{children:"À venir"})]}),s.jsx("span",{className:"font-medium",children:a})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(dm,{className:"h-4 w-4 text-red-600"}),s.jsx("span",{children:"Annulés"})]}),s.jsx("span",{className:"font-medium",children:i})]})]})]})]})]})}function hAe(){const{consultations:e}=bt(),n=(()=>{const r=[],a=new Date;for(let i=11;i>=0;i--){const o=new Date(a.getFullYear(),a.getMonth()-i,1),l=new Date(o.getFullYear(),o.getMonth(),1),c=new Date(o.getFullYear(),o.getMonth()+1,0),u=e.filter(m=>{const f=new Date(m.date);return f>=l&&f<=c}),d=u.reduce((m,f)=>m+(f.cost||0),0),h=u.length>0?d/u.length:0;r.push({month:o.toLocaleDateString("fr-FR",{month:"short",year:"2-digit"}),consultations:u.length,revenue:Math.round(d),averageRevenue:Math.round(h)})}return r})();return s.jsxs(Z,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(me,{className:"text-base font-medium",children:"Tendances des Consultations"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(wn,{className:"h-4 w-4 text-muted-foreground"}),s.jsx(an,{className:"h-4 w-4 text-blue-600"})]})]}),s.jsxs(ee,{children:[s.jsx("div",{className:"h-[300px] w-full",children:s.jsx(_i,{width:"100%",height:"100%",children:s.jsxs(i_,{data:n,margin:{top:5,right:30,left:20,bottom:5},children:[s.jsx(Zl,{strokeDasharray:"3 3",className:"opacity-30"}),s.jsx(oa,{dataKey:"month",axisLine:!1,tickLine:!1,className:"text-xs"}),s.jsx(la,{axisLine:!1,tickLine:!1,className:"text-xs"}),s.jsx(Un,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:(r,a)=>[a==="consultations"?r:`${r} €`,a==="consultations"?"Consultations":a==="revenue"?"Revenus":"Revenu moyen"]}),s.jsx(Ts,{type:"monotone",dataKey:"consultations",stackId:"1",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.6,strokeWidth:2})]})})}),s.jsx("div",{className:"flex items-center justify-between mt-4 text-sm",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),s.jsx("span",{className:"text-muted-foreground",children:"Nombre de consultations"})]})})]})]})}function mAe(){const{pets:e}=bt(),t=M.useMemo(()=>{const o=e.reduce((c,u)=>{const d=u.species||"Autre";return c[d]=(c[d]||0)+1,c},{}),l=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#84cc16","#f97316"];return Object.entries(o).map(([c,u],d)=>({name:c,value:u,color:l[d%l.length]}))},[e]),n=e.length,r=t.length>0?t[0]:null,a=e.length>0?e.reduce((o,l)=>o+(l.age||0),0)/e.length:0,i=o=>{switch(o.toLowerCase()){case"chien":case"dog":return s.jsx(dU,{className:"h-4 w-4"});case"chat":case"cat":return s.jsx(iU,{className:"h-4 w-4"});case"poisson":case"fish":return s.jsx(hU,{className:"h-4 w-4"});case"oiseau":case"bird":return s.jsx(sU,{className:"h-4 w-4"});default:return s.jsx(ht,{className:"h-4 w-4"})}};return s.jsxs(Z,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(me,{className:"text-base font-medium",children:"Répartition par Espèce"}),s.jsx(ht,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(ee,{children:[s.jsx("div",{className:"h-[300px] w-full",children:s.jsx(_i,{width:"100%",height:"100%",children:s.jsxs(a_,{children:[s.jsx(ha,{data:t,cx:"50%",cy:"50%",labelLine:!1,label:({name:o,percent:l})=>`${o} ${(l*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:t.map((o,l)=>s.jsx(Ld,{fill:o.color},`cell-${l}`))}),s.jsx(Un,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:o=>[o,"Animaux"]})]})})}),s.jsxs("div",{className:"mt-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Total d'animaux"}),s.jsx("span",{className:"font-medium",children:n})]}),r&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Espèce la plus commune"}),s.jsxs("div",{className:"flex items-center gap-2",children:[i(r.name),s.jsx("span",{className:"font-medium",children:r.name})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Âge moyen"}),s.jsxs("span",{className:"font-medium",children:[a.toFixed(1)," ans"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-sm font-medium",children:"Répartition détaillée"}),t.slice(0,5).map((o,l)=>s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[i(o.name),s.jsx("span",{children:o.name})]}),s.jsxs("span",{className:"text-muted-foreground",children:[o.value," (",(o.value/n*100).toFixed(1),"%)"]})]},l))]})]})]})]})}const fAe=()=>s.jsxs("div",{className:"container mx-auto px-2 sm:px-4 lg:px-6 py-4 sm:py-6 lg:py-8 space-y-4 sm:space-y-6 lg:space-y-8",children:[s.jsx(uee,{}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-lg sm:text-xl lg:text-2xl font-bold mb-2 sm:mb-4 lg:mb-6",children:"KPI en Temps Réel"}),s.jsx(iAe,{})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-4 lg:gap-6",children:[s.jsx(sAe,{}),s.jsx(aAe,{}),s.jsx(rAe,{})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-lg sm:text-xl lg:text-2xl font-bold mb-2 sm:mb-4 lg:mb-6",children:"Vue d'ensemble"}),s.jsx(dee,{})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-lg sm:text-xl lg:text-2xl font-bold mb-2 sm:mb-4 lg:mb-6",children:"Analyses et Tendances"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 sm:gap-4 lg:gap-6",children:[s.jsx(pw,{children:s.jsx(oAe,{})}),s.jsx(lAe,{})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-4 lg:gap-6",children:[s.jsx(cAe,{}),s.jsx(uAe,{}),s.jsx(dAe,{})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 sm:gap-4 lg:gap-6",children:[s.jsx(hAe,{}),s.jsx(mAe,{})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 sm:gap-4 lg:gap-6",children:[s.jsx(pee,{}),s.jsx(eAe,{})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-lg sm:text-xl lg:text-2xl font-bold mb-2 sm:mb-4 lg:mb-6",children:"Activité Récente"}),s.jsx(nAe,{})]}),s.jsx(pw,{children:s.jsx("section",{children:s.jsx("h2",{className:"text-lg sm:text-xl lg:text-2xl font-bold mb-2 sm:mb-4 lg:mb-6",children:"Admin Dashboard"})})})]});var c8="AlertDialog",[pAe,dTe]=Kr(c8,[DR]),Mi=DR(),u8=e=>{const{__scopeAlertDialog:t,...n}=e,r=Mi(t);return s.jsx(YR,{...r,...n,modal:!0})};u8.displayName=c8;var gAe="AlertDialogTrigger",vAe=b.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=Mi(n);return s.jsx(QR,{...a,...r,ref:t})});vAe.displayName=gAe;var xAe="AlertDialogPortal",d8=e=>{const{__scopeAlertDialog:t,...n}=e,r=Mi(t);return s.jsx(XR,{...r,...n})};d8.displayName=xAe;var yAe="AlertDialogOverlay",h8=b.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=Mi(n);return s.jsx(FS,{...a,...r,ref:t})});h8.displayName=yAe;var du="AlertDialogContent",[jAe,bAe]=pAe(du),wAe=WM("AlertDialogContent"),m8=b.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...a}=e,i=Mi(n),o=b.useRef(null),l=pt(t,o),c=b.useRef(null);return s.jsx(kJ,{contentName:du,titleName:f8,docsSlug:"alert-dialog",children:s.jsx(jAe,{scope:n,cancelRef:c,children:s.jsxs(LS,{role:"alertdialog",...i,...a,ref:l,onOpenAutoFocus:ke(a.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[s.jsx(wAe,{children:r}),s.jsx(SAe,{contentRef:o})]})})})});m8.displayName=du;var f8="AlertDialogTitle",p8=b.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=Mi(n);return s.jsx(BS,{...a,...r,ref:t})});p8.displayName=f8;var g8="AlertDialogDescription",v8=b.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=Mi(n);return s.jsx(zS,{...a,...r,ref:t})});v8.displayName=g8;var NAe="AlertDialogAction",x8=b.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=Mi(n);return s.jsx(VS,{...a,...r,ref:t})});x8.displayName=NAe;var y8="AlertDialogCancel",j8=b.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:a}=bAe(y8,n),i=Mi(n),o=pt(t,a);return s.jsx(VS,{...i,...r,ref:o})});j8.displayName=y8;var SAe=({contentRef:e})=>{const t=`\`${du}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${du}\` by passing a \`${g8}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${du}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return b.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},_Ae=u8,CAe=d8,b8=h8,w8=m8,N8=x8,S8=j8,_8=p8,C8=v8;const P8=_Ae,PAe=CAe,A8=b.forwardRef(({className:e,...t},n)=>s.jsx(b8,{className:De("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));A8.displayName=b8.displayName;const l_=b.forwardRef(({className:e,...t},n)=>s.jsxs(PAe,{children:[s.jsx(A8,{}),s.jsx(w8,{ref:n,className:De("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));l_.displayName=w8.displayName;const c_=({className:e,...t})=>s.jsx("div",{className:De("flex flex-col space-y-2 text-center sm:text-left",e),...t});c_.displayName="AlertDialogHeader";const u_=({className:e,...t})=>s.jsx("div",{className:De("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});u_.displayName="AlertDialogFooter";const d_=b.forwardRef(({className:e,...t},n)=>s.jsx(_8,{ref:n,className:De("text-lg font-semibold",e),...t}));d_.displayName=_8.displayName;const h_=b.forwardRef(({className:e,...t},n)=>s.jsx(C8,{ref:n,className:De("text-sm text-muted-foreground",e),...t}));h_.displayName=C8.displayName;const m_=b.forwardRef(({className:e,...t},n)=>s.jsx(N8,{ref:n,className:De(xS(),e),...t}));m_.displayName=N8.displayName;const f_=b.forwardRef(({className:e,...t},n)=>s.jsx(S8,{ref:n,className:De(xS({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));f_.displayName=S8.displayName;const fc=e=>{const{settings:t}=Pt();return{currentView:t.displayPreferences[e],isTableView:t.displayPreferences[e]==="table",isCardsView:t.displayPreferences[e]==="cards"}},AAe=(e,t)=>{const n=t.filter(i=>i.client_id===e.id),r=Math.abs(e.id.split("").reduce((i,o)=>(i=(i<<5)-i+o.charCodeAt(0),i&i),0)),a=n.map(i=>({id:Math.abs(i.id.split("").reduce((l,c)=>(l=(l<<5)-l+c.charCodeAt(0),l&l),0)),name:i.name,type:i.species,breed:i.breed||""}));return{id:r,name:`${e.first_name} ${e.last_name}`,firstName:e.first_name,lastName:e.last_name,email:e.email||"",phone:e.phone||e.mobile_phone||"",address:e.address||"",city:e.city,pets:a,lastVisit:new Date(e.updated_at).toLocaleDateString("fr-FR"),totalVisits:0,dbId:e.id}},kAe=()=>{const{data:e=[],isLoading:t}=tr(),{data:n=[],isLoading:r}=nr(),a=RZ(),i=FZ(),{toast:o}=it(),l=e.map(P=>AAe(P,n)),{currentView:c}=fc("clients"),[u,d]=b.useState(""),[h,m]=b.useState(c),[f,g]=b.useState(!1),[p,v]=b.useState(null),[x,y]=b.useState(!1),[j,w]=b.useState(!1),[N,_]=b.useState(!1),[S,C]=b.useState(null),[A,T]=b.useState({first_name:"",last_name:"",email:"",phone:"",mobile_phone:"",address:"",city:"Rabat",postal_code:"",country:"Maroc",notes:"",client_type:"particulier"}),E=l.filter(P=>P.name.toLowerCase().includes(u.toLowerCase())||P.email.toLowerCase().includes(u.toLowerCase())||P.city&&P.city.toLowerCase().includes(u.toLowerCase())),k=P=>{v(P),y(!0)},R=P=>{v(P),T({first_name:P.firstName,last_name:P.lastName,email:P.email,phone:P.phone,mobile_phone:"",address:P.address,city:P.city,postal_code:"",country:"Maroc",notes:"",client_type:"particulier"}),w(!0)},I=P=>{C(P),_(!0)},W=async()=>{if(S)try{await i.mutateAsync(S.dbId),o({title:"Client supprimé",description:`${S.name} a été supprimé avec succès`}),_(!1),C(null)}catch(P){o({title:"Erreur",description:P instanceof Error?P.message:"Erreur lors de la suppression du client",variant:"destructive"})}},V=()=>{p&&T({first_name:p.firstName,last_name:p.lastName,email:p.email,phone:p.phone,mobile_phone:"",address:p.address,city:p.city,postal_code:"",country:"Maroc",notes:"",client_type:"particulier"}),y(!1),w(!0)},q=async P=>{if(P.preventDefault(),!p||!A.first_name||!A.last_name){o({title:"Erreur",description:"Le prénom et le nom sont obligatoires",variant:"destructive"});return}try{await a.mutateAsync({id:p.dbId,data:A}),o({title:"Client modifié",description:`${A.first_name} ${A.last_name} a été modifié avec succès`}),w(!1),v(null)}catch(O){o({title:"Erreur",description:O instanceof Error?O.message:"Erreur lors de la modification du client",variant:"destructive"})}};return t||r?s.jsx("div",{className:"container mx-auto px-6 py-8",children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Chargement des clients..."})]})})}):s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-8 space-y-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Gestion des Clients"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Gérez tous vos clients et leurs informations"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[s.jsxs(F,{size:"sm",variant:h==="cards"?"default":"outline",onClick:()=>m("cards"),className:"gap-2 w-full sm:w-auto",children:[s.jsx(ko,{className:"h-4 w-4"}),"Cartes"]}),s.jsxs(F,{size:"sm",variant:h==="table"?"default":"outline",onClick:()=>m("table"),className:"gap-2 w-full sm:w-auto",children:[s.jsx(wi,{className:"h-4 w-4"}),"Tableau"]}),s.jsxs(F,{className:"gap-2 medical-glow w-full sm:w-auto",onClick:()=>g(!0),children:[s.jsx(at,{className:"h-4 w-4"}),"Nouveau Client"]})]})]}),s.jsxs(Z,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx($o,{className:"h-5 w-5"}),"Rechercher un client"]})}),s.jsx(ee,{children:s.jsx(G,{placeholder:"Rechercher par nom, email ou ville...",value:u,onChange:P=>d(P.target.value),className:"w-full"})})]}),h==="cards"?s.jsx("div",{className:"grid gap-6",children:E.map(P=>s.jsx(Z,{className:"card-hover",children:s.jsx(ee,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-4 flex-1",children:[s.jsx(Zn,{className:"h-12 w-12 sm:h-16 sm:w-16 mx-auto sm:mx-0",children:s.jsx(er,{className:"bg-primary text-primary-foreground text-sm sm:text-lg",children:P.name.split(" ").map(O=>O[0]).join("")})}),s.jsxs("div",{className:"space-y-3 flex-1 text-center sm:text-left",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg sm:text-xl font-semibold",children:P.name}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 mt-2 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-1",children:[s.jsx(xf,{className:"h-3 w-3"}),P.email]}),s.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-1",children:[s.jsx(Eu,{className:"h-3 w-3"}),P.phone]}),s.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-1",children:[s.jsx(rc,{className:"h-3 w-3"}),P.address]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"font-medium flex items-center justify-center sm:justify-start gap-2",children:[s.jsx(ht,{className:"h-4 w-4 text-primary"}),"Animaux (",P.pets.length,")"]}),s.jsx("div",{className:"flex gap-2 flex-wrap justify-center sm:justify-start",children:P.pets.length>0?P.pets.map((O,B)=>s.jsxs(_e,{variant:"secondary",className:"gap-1",children:[O.name," - ",O.type," ",O.breed&&`(${O.breed})`]},O.id||B)):s.jsx("span",{className:"text-sm text-muted-foreground",children:"Aucun animal enregistré"})})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-6 text-sm justify-center sm:justify-start",children:[s.jsxs("span",{children:[s.jsx("strong",{children:"Dernière visite:"})," ",P.lastVisit]}),s.jsxs("span",{children:[s.jsx("strong",{children:"Total visites:"})," ",P.totalVisits]})]})]})]}),s.jsxs("div",{className:"flex gap-2 justify-center sm:justify-end",children:[s.jsxs(F,{size:"sm",variant:"outline",className:"gap-2",onClick:()=>k(P),children:[s.jsx(Nn,{className:"h-4 w-4"}),"Voir"]}),s.jsxs(F,{size:"sm",variant:"outline",className:"gap-2",onClick:()=>R(P),children:[s.jsx($t,{className:"h-4 w-4"}),"Modifier"]}),s.jsxs(F,{size:"sm",variant:"outline",className:"gap-2 text-destructive hover:text-destructive-foreground hover:bg-destructive",onClick:()=>I(P),children:[s.jsx(rn,{className:"h-4 w-4"}),"Supprimer"]})]})]})})},P.id))}):s.jsx(Z,{children:s.jsx(ee,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"border-b",children:s.jsxs("tr",{className:"text-left",children:[s.jsx("th",{className:"p-2 sm:p-4 font-medium",children:"Client"}),s.jsx("th",{className:"p-2 sm:p-4 font-medium hidden sm:table-cell",children:"Contact"}),s.jsx("th",{className:"p-2 sm:p-4 font-medium hidden md:table-cell",children:"Animaux"}),s.jsx("th",{className:"p-2 sm:p-4 font-medium hidden lg:table-cell",children:"Dernière visite"}),s.jsx("th",{className:"p-2 sm:p-4 font-medium hidden lg:table-cell",children:"Total visites"}),s.jsx("th",{className:"p-2 sm:p-4 font-medium",children:"Actions"})]})}),s.jsx("tbody",{children:E.map(P=>s.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[s.jsx("td",{className:"p-2 sm:p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Zn,{className:"h-8 w-8 sm:h-10 sm:w-10",children:s.jsx(er,{className:"bg-primary text-primary-foreground text-xs sm:text-sm",children:P.name.split(" ").map(O=>O[0]).join("")})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-sm sm:text-base",children:P.name}),s.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:P.address})]})]})}),s.jsx("td",{className:"p-2 sm:p-4 hidden sm:table-cell",children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-xs sm:text-sm",children:P.email}),s.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:P.phone})]})}),s.jsx("td",{className:"p-2 sm:p-4 hidden md:table-cell",children:s.jsx("div",{className:"flex gap-1 flex-wrap",children:P.pets.length>0?P.pets.map((O,B)=>s.jsx(_e,{variant:"secondary",className:"text-xs",children:O.name},O.id||B)):s.jsx("span",{className:"text-xs text-muted-foreground",children:"Aucun"})})}),s.jsx("td",{className:"p-2 sm:p-4 hidden lg:table-cell text-sm",children:P.lastVisit}),s.jsx("td",{className:"p-2 sm:p-4 hidden lg:table-cell text-sm",children:P.totalVisits}),s.jsx("td",{className:"p-2 sm:p-4",children:s.jsxs("div",{className:"flex gap-1",children:[s.jsx(F,{size:"sm",variant:"outline",onClick:()=>k(P),children:s.jsx(Nn,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),s.jsx(F,{size:"sm",variant:"outline",onClick:()=>R(P),children:s.jsx($t,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),s.jsx(F,{size:"sm",variant:"outline",className:"text-destructive hover:text-destructive-foreground hover:bg-destructive",onClick:()=>I(P),children:s.jsx(rn,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]})})]},P.id))})]})})})}),s.jsx(Kx,{open:f,onOpenChange:g}),p&&x&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(Z,{className:"w-full max-w-2xl mx-auto max-h-[90vh] overflow-y-auto",children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center justify-between",children:["Profil Client - ",p.name,s.jsx(F,{variant:"ghost",size:"sm",onClick:()=>y(!1),children:"✕"})]})}),s.jsxs(ee,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Nom complet"}),s.jsx("p",{children:p.name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Email"}),s.jsx("p",{children:p.email})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Téléphone"}),s.jsx("p",{children:p.phone})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Ville"}),s.jsx("p",{children:p.city})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Adresse"}),s.jsx("p",{children:p.address})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-sm font-medium",children:["Animaux (",p.pets.length,")"]}),s.jsx("div",{className:"flex gap-2 flex-wrap mt-2",children:p.pets.map((P,O)=>s.jsxs(_e,{variant:"secondary",children:[P.name," - ",P.type," ",P.breed&&`(${P.breed})`]},P.id||O))})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-4",children:[s.jsx(F,{onClick:()=>V(),className:"w-full sm:w-auto",children:"Modifier"}),s.jsx(F,{variant:"outline",onClick:()=>{y(!1),p&&I(p)},className:"w-full sm:w-auto text-destructive hover:text-destructive-foreground hover:bg-destructive",children:"Supprimer"}),s.jsx(F,{variant:"outline",onClick:()=>y(!1),className:"w-full sm:w-auto",children:"Fermer"})]})]})]})}),p&&j&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(Z,{className:"w-full max-w-2xl mx-auto max-h-[90vh] overflow-y-auto",children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center justify-between",children:["Modifier Client - ",p.name,s.jsx(F,{variant:"ghost",size:"sm",onClick:()=>w(!1),children:"✕"})]})}),s.jsx(ee,{children:s.jsxs("form",{onSubmit:q,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"edit_first_name",children:"Prénom *"}),s.jsx(G,{id:"edit_first_name",value:A.first_name,onChange:P=>T(O=>({...O,first_name:P.target.value})),placeholder:"Prénom du client",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"edit_last_name",children:"Nom *"}),s.jsx(G,{id:"edit_last_name",value:A.last_name,onChange:P=>T(O=>({...O,last_name:P.target.value})),placeholder:"Nom du client",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"edit_email",children:"Email"}),s.jsx(G,{id:"edit_email",type:"email",value:A.email||"",onChange:P=>T(O=>({...O,email:P.target.value})),placeholder:"email@exemple.com"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"edit_phone",children:"Téléphone"}),s.jsx(G,{id:"edit_phone",value:A.phone||"",onChange:P=>T(O=>({...O,phone:P.target.value})),placeholder:"06 12 34 56 78"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"edit_mobile_phone",children:"Téléphone mobile"}),s.jsx(G,{id:"edit_mobile_phone",value:A.mobile_phone||"",onChange:P=>T(O=>({...O,mobile_phone:P.target.value})),placeholder:"06 12 34 56 78"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"edit_city",children:"Ville"}),s.jsx(G,{id:"edit_city",value:A.city||"Rabat",onChange:P=>T(O=>({...O,city:P.target.value})),placeholder:"Ville"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"edit_address",children:"Adresse"}),s.jsx(G,{id:"edit_address",value:A.address||"",onChange:P=>T(O=>({...O,address:P.target.value})),placeholder:"Adresse complète"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"edit_postal_code",children:"Code postal"}),s.jsx(G,{id:"edit_postal_code",value:A.postal_code||"",onChange:P=>T(O=>({...O,postal_code:P.target.value})),placeholder:"10000"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"edit_client_type",children:"Type de client"}),s.jsxs(we,{value:A.client_type||"particulier",onValueChange:P=>T(O=>({...O,client_type:P})),children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Type de client"})}),s.jsxs(be,{children:[s.jsx($,{value:"particulier",children:"Particulier"}),s.jsx($,{value:"eleveur",children:"Éleveur"}),s.jsx($,{value:"ferme",children:"Ferme"})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"edit_notes",children:"Notes"}),s.jsx(Ue,{id:"edit_notes",value:A.notes||"",onChange:P=>T(O=>({...O,notes:P.target.value})),placeholder:"Notes supplémentaires...",rows:3})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-4",children:[s.jsx(F,{type:"submit",disabled:a.isPending,className:"w-full sm:flex-1",children:a.isPending?s.jsxs(s.Fragment,{children:[s.jsx(Kn,{className:"h-4 w-4 animate-spin mr-2"}),"Modification..."]}):"Enregistrer"}),s.jsx(F,{type:"button",variant:"outline",onClick:()=>w(!1),disabled:a.isPending,className:"w-full sm:flex-1",children:"Annuler"})]})]})})]})}),s.jsx(P8,{open:N,onOpenChange:_,children:s.jsxs(l_,{children:[s.jsxs(c_,{children:[s.jsx(d_,{children:"Confirmer la suppression"}),s.jsxs(h_,{children:["Êtes-vous sûr de vouloir supprimer le client ",s.jsx("strong",{children:S==null?void 0:S.name})," ? Cette action est irréversible et supprimera définitivement toutes les données associées à ce client."]})]}),s.jsxs(u_,{children:[s.jsx(f_,{children:"Annuler"}),s.jsx(m_,{onClick:W,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",disabled:i.isPending,children:i.isPending?s.jsxs(s.Fragment,{children:[s.jsx(Kn,{className:"h-4 w-4 animate-spin mr-2"}),"Suppression..."]}):"Supprimer"})]})]})})]})},TAe=()=>s.jsx(kAe,{});function EAe({pet:e}){const{data:t=[]}=qo(),{data:n=[]}=Uo(),r=[],a=e.birthDate?Du(e.birthDate):"Non renseigné",i=e.weight?`${e.weight} kg`:"Non renseigné",o=t.filter(d=>d.animal_id===e.dbId),l=n.filter(d=>d.animal_id===e.dbId);r.filter(d=>d.animal_id===e.dbId);const c=o.sort((d,h)=>new Date(h.consultation_date).getTime()-new Date(d.consultation_date).getTime())[0],u=(e.status!=="healthy"?1:0)+(l.length===0?1:0)+(!c||new Date().getTime()-new Date(c.consultation_date).getTime()>365*24*60*60*1e3?1:0);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Z,{children:[s.jsx(he,{children:s.jsx(me,{children:"Informations générales"})}),s.jsx(ee,{children:s.jsxs("div",{className:"flex items-start gap-6",children:[s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx(Zn,{className:"h-32 w-32",children:e.photo?s.jsx(Ru,{src:e.photo,alt:e.name}):s.jsx(er,{className:"bg-primary-glow text-primary-foreground",children:s.jsx(ht,{className:"h-16 w-16"})})}),s.jsxs(F,{variant:"outline",size:"sm",className:"gap-2",children:[s.jsx(vf,{className:"h-4 w-4"}),"Ajouter photo"]})]}),s.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg",children:e.name}),s.jsxs("div",{className:"space-y-2 mt-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Type:"})," ",e.type]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Race:"})," ",e.breed||"Non renseignée"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Sexe:"})," ",e.gender==="male"?"Mâle":e.gender==="female"?"Femelle":"Inconnu"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Âge:"})," ",a]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Date de naissance:"})," ",e.birthDate||"Non renseignée"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Couleur:"})," ",e.color||"Non renseignée"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Poids actuel:"})," ",i]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"N° puce:"})," ",e.microchip||"Non renseigné"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Statut de santé:"}),s.jsx(_e,{variant:e.status==="healthy"?"default":e.status==="treatment"?"secondary":"destructive",children:e.status==="healthy"?"En bonne santé":e.status==="treatment"?"En traitement":"Urgent"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(hr,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:"Propriétaire:"})," ",e.owner]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Dernière visite:"})," ",c?new Date(c.consultation_date).toLocaleDateString("fr-FR"):"Aucune"]})]})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsx(Z,{children:s.jsx(ee,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Tg,{className:"h-5 w-5 text-blue-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Poids actuel"}),s.jsx("p",{className:"text-lg font-bold",children:i}),(c==null?void 0:c.weight)&&s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Précédent: ",c.weight,"kg"]})]})]})})}),s.jsx(Z,{children:s.jsx(ee,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(hm,{className:"h-5 w-5 text-red-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Température"}),s.jsx("p",{className:"text-lg font-bold",children:c!=null&&c.temperature?`${c.temperature}°C`:"N/A"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Dernière mesure"})]})]})})}),s.jsx(Z,{children:s.jsx(ee,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(wn,{className:"h-5 w-5 text-green-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Consultations"}),s.jsx("p",{className:"text-lg font-bold",children:o.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:c?`Dernière: ${new Date(c.consultation_date).toLocaleDateString("fr-FR")}`:"Aucune"})]})]})})}),s.jsx(Z,{children:s.jsx(ee,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(qn,{className:"h-5 w-5 text-yellow-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Alertes"}),s.jsx("p",{className:"text-lg font-bold",children:u}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"À traiter"})]})]})})})]}),s.jsxs(Z,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(Ke,{className:"h-5 w-5"}),"Prochain suivi recommandé"]})}),s.jsx(ee,{children:s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/20 p-4 rounded-lg",children:[s.jsx("p",{className:"font-medium",children:c?"Contrôle de routine dans 6 mois":"Première consultation recommandée"}),s.jsxs(F,{size:"sm",className:"mt-2 gap-2",children:[s.jsx(at,{className:"h-4 w-4"}),"Planifier"]})]})})]}),u>0&&s.jsxs(Z,{children:[s.jsx(he,{children:s.jsx(me,{className:"text-red-600",children:"Alertes importantes"})}),s.jsxs(ee,{className:"space-y-3",children:[e.status!=="healthy"&&s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-red-50 dark:bg-red-950/20 rounded-lg",children:[s.jsx(qn,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:"Statut de santé préoccupant"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.status==="treatment"?"Animal en cours de traitement":"Situation urgente"})]}),s.jsx(F,{size:"sm",variant:"outline",children:"Planifier consultation"})]}),!c||new Date().getTime()-new Date(c.consultation_date).getTime()>365*24*60*60*1e3?s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-red-50 dark:bg-red-950/20 rounded-lg",children:[s.jsx(qn,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:"Contrôle de routine recommandé"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:c?"Dernière consultation il y a plus d'un an":"Aucune consultation enregistrée"})]}),s.jsx(F,{size:"sm",variant:"outline",children:"Planifier consultation"})]}):null,l.length===0&&s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-red-50 dark:bg-red-950/20 rounded-lg",children:[s.jsx(qn,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:"Vaccinations manquantes"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Aucune vaccination enregistrée"})]}),s.jsx(F,{size:"sm",variant:"outline",children:"Planifier vaccination"})]})]})]})]})}function OAe({pet:e}){const{data:t=[]}=qo(),n=t.filter(r=>r.animal_id===e.dbId).sort((r,a)=>new Date(a.consultation_date).getTime()-new Date(r.consultation_date).getTime());return n.length===0?s.jsxs(Z,{children:[s.jsx(he,{children:s.jsx(me,{children:"Historique médical"})}),s.jsx(ee,{children:s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Ke,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Pas assez de données pour afficher les tendances"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Ajoutez plus de consultations avec poids et température"})]})})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs(Z,{children:[s.jsx(he,{children:s.jsxs(me,{children:["Historique médical (",n.length," consultations)"]})}),s.jsx(ee,{children:s.jsx("div",{className:"space-y-4",children:n.map(r=>s.jsx("div",{className:"border-l-4 border-primary pl-4 pb-4",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("h3",{className:"font-semibold",children:new Date(r.consultation_date).toLocaleDateString("fr-FR")}),s.jsx(_e,{variant:"outline",children:r.consultation_type||"Consultation générale"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-3",children:[r.weight&&s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Poids:"}),s.jsxs("p",{className:"font-medium",children:[r.weight," kg"]})]}),r.temperature&&s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Température:"}),s.jsxs("p",{className:"font-medium",children:[r.temperature,"°C"]})]}),r.veterinarian_id&&s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Vétérinaire:"}),s.jsxs("p",{className:"font-medium",children:["Dr. ",r.veterinarian_id]})]})]}),r.symptoms&&s.jsxs("div",{className:"mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Symptômes:"}),s.jsx("p",{className:"text-sm",children:r.symptoms})]}),r.diagnosis&&s.jsxs("div",{className:"mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Diagnostic:"}),s.jsx("p",{className:"text-sm",children:r.diagnosis})]}),r.treatment&&s.jsxs("div",{className:"mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Traitement:"}),s.jsx("p",{className:"text-sm",children:r.treatment})]}),r.notes&&s.jsxs("div",{className:"mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Notes:"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:r.notes})]}),r.follow_up_notes&&s.jsxs("div",{className:"mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Suivi:"}),s.jsx("p",{className:"text-sm",children:r.follow_up_notes})]}),r.cost&&s.jsxs("div",{className:"mt-3 pt-2 border-t",children:[s.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Coût:"}),s.jsxs("p",{className:"font-semibold text-green-600",children:[r.cost," MAD"]})]})]}),s.jsx("div",{className:"text-sm text-muted-foreground ml-4",children:new Date(r.consultation_date).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]})},r.id))})})]}),n.length>=3&&s.jsxs(Z,{children:[s.jsx(he,{children:s.jsx(me,{children:"Tendances"})}),s.jsx(ee,{children:s.jsxs("div",{className:"space-y-4",children:[n.some(r=>r.weight)&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-2",children:"Évolution du poids"}),s.jsx("div",{className:"space-y-2",children:n.filter(r=>r.weight).slice(0,5).map((r,a)=>s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("span",{children:new Date(r.consultation_date).toLocaleDateString("fr-FR")}),s.jsxs("span",{className:"font-medium",children:[r.weight," kg"]})]},r.id))})]}),n.some(r=>r.temperature)&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-2",children:"Évolution de la température"}),s.jsx("div",{className:"space-y-2",children:n.filter(r=>r.temperature).slice(0,5).map((r,a)=>s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("span",{children:new Date(r.consultation_date).toLocaleDateString("fr-FR")}),s.jsxs("span",{className:"font-medium",children:[r.temperature,"°C"]})]},r.id))})]})]})})]})]})}function DAe({pet:e}){const{data:t=[]}=Cf(),n=t.filter(r=>r.animal_id===e.dbId).sort((r,a)=>new Date(a.created_at).getTime()-new Date(r.created_at).getTime());return s.jsxs(Z,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between",children:[s.jsx(me,{children:"Prescriptions"}),s.jsxs(F,{size:"sm",className:"gap-2",children:[s.jsx(at,{className:"h-4 w-4"}),"Nouvelle prescription"]})]}),s.jsx(ee,{children:n.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Cr,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucune prescription disponible"})]}):s.jsx("div",{className:"space-y-4",children:n.map(r=>s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[s.jsx(ii,{className:"h-4 w-4"}),"Prescription du ",new Date(r.created_at).toLocaleDateString("fr-FR")]}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx(Ke,{className:"h-3 w-3 text-muted-foreground"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(r.created_at).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]})]}),s.jsx(_e,{variant:"outline",children:r.status==="active"?"Active":r.status==="completed"?"Terminée":"Annulée"})]}),r.medications&&r.medications.length>0&&s.jsxs("div",{className:"mb-3",children:[s.jsx("h4",{className:"font-medium mb-2",children:"Médicaments prescrits:"}),s.jsx("div",{className:"space-y-2",children:r.medications.map((a,i)=>s.jsxs("div",{className:"bg-muted/50 p-3 rounded",children:[s.jsx("div",{className:"font-medium",children:a.name}),a.dosage&&s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Dosage: ",a.dosage]}),a.frequency&&s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Fréquence: ",a.frequency]}),a.duration&&s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Durée: ",a.duration]}),a.instructions&&s.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Instructions: ",a.instructions]})]},i))})]}),r.diagnosis&&s.jsxs("div",{className:"mb-3",children:[s.jsx("h4",{className:"font-medium mb-1",children:"Diagnostic:"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:r.diagnosis})]}),r.notes&&s.jsxs("div",{className:"mb-3",children:[s.jsx("h4",{className:"font-medium mb-1",children:"Notes:"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:r.notes})]}),r.veterinarian_id&&s.jsxs("div",{className:"text-sm text-muted-foreground border-t pt-2",children:["Prescrit par: Dr. ",r.veterinarian_id]})]},r.id))})})]})}function MAe({pet:e}){const{data:t=[]}=Uo(),n=t.filter(a=>a.animal_id===e.dbId).sort((a,i)=>new Date(i.vaccination_date).getTime()-new Date(a.vaccination_date).getTime()),r=n.reduce((a,i)=>{const o=i.vaccine_name||"Vaccin inconnu";return a[o]||(a[o]=[]),a[o].push(i),a},{});return s.jsxs(Z,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between",children:[s.jsx(me,{children:"Vaccinations"}),s.jsxs(F,{size:"sm",className:"gap-2",children:[s.jsx(at,{className:"h-4 w-4"}),"Nouvelle vaccination"]})]}),s.jsx(ee,{children:n.length===0?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm font-medium",children:[s.jsx("div",{children:"Rage"}),s.jsx("div",{children:"DHPP"}),s.jsx("div",{children:"Lyme"})]}),s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Br,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucune vaccination enregistrée"})]})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold text-lg",children:"Historique des vaccinations"}),n.map(a=>s.jsx("div",{className:"border-l-4 border-green-500 pl-4 pb-4",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsxs("h4",{className:"font-semibold flex items-center gap-2",children:[s.jsx(Pr,{className:"h-4 w-4"}),a.vaccine_name]}),s.jsx(_e,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"Administré"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Date:"}),s.jsx("p",{className:"font-medium",children:new Date(a.vaccination_date).toLocaleDateString("fr-FR")})]}),a.batch_number&&s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"N° de lot:"}),s.jsx("p",{className:"font-medium",children:a.batch_number})]}),a.manufacturer&&s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Fabricant:"}),s.jsx("p",{className:"font-medium",children:a.manufacturer})]}),a.administered_by&&s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Administré par:"}),s.jsx("p",{className:"font-medium",children:a.administered_by})]})]}),a.next_due_date&&s.jsxs("div",{className:"mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Prochain rappel:"}),s.jsxs("p",{className:"text-sm",children:[new Date(a.next_due_date).toLocaleDateString("fr-FR"),new Date(a.next_due_date)<new Date&&s.jsx(_e,{variant:"destructive",className:"ml-2",children:"En retard"}),new Date(a.next_due_date)>new Date&&new Date(a.next_due_date).getTime()-new Date().getTime()<30*24*60*60*1e3&&s.jsx(_e,{variant:"outline",className:"ml-2 bg-yellow-50 text-yellow-700 border-yellow-200",children:"Bientôt dû"})]})]}),a.notes&&s.jsxs("div",{className:"mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Notes:"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:a.notes})]})]}),s.jsx("div",{className:"text-sm text-muted-foreground ml-4",children:new Date(a.vaccination_date).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]})},a.id))]}),s.jsxs("div",{className:"space-y-4 border-t pt-6",children:[s.jsx("h3",{className:"font-semibold text-lg",children:"Résumé par type de vaccin"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(r).map(([a,i])=>{const o=i[0],l=o.next_due_date&&new Date(o.next_due_date)<new Date,c=o.next_due_date&&new Date(o.next_due_date)>new Date&&new Date(o.next_due_date).getTime()-new Date().getTime()<30*24*60*60*1e3;return s.jsxs(Z,{className:"p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("h4",{className:"font-medium",children:a}),l?s.jsx(_e,{variant:"destructive",children:"En retard"}):c?s.jsx(_e,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200",children:"Bientôt dû"}):s.jsx(_e,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"À jour"})]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsxs("div",{children:["Dernière: ",new Date(o.vaccination_date).toLocaleDateString("fr-FR")]}),o.next_due_date&&s.jsxs("div",{children:["Prochain: ",new Date(o.next_due_date).toLocaleDateString("fr-FR")]}),s.jsxs("div",{children:["Total: ",i.length," dose",i.length>1?"s":""]})]})]},a)})})]})]})})]})}function IAe({pet:e}){return s.jsxs(Z,{children:[s.jsx(he,{children:s.jsx(me,{children:"Informations de pedigree"})}),s.jsx(ee,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Informations générales"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Nom:"}),s.jsx("p",{className:"font-medium",children:e.name})]}),e.breed&&s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Race:"}),s.jsx("p",{className:"font-medium",children:e.breed})]})]})]}),s.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-muted-foreground/25 rounded-lg",children:[s.jsx(Ag,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucune information de pedigree disponible"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Les informations de pedigree peuvent être ajoutées lors de la modification du profil"})]})]})})]})}function $Ae({pet:e}){const t=[];return s.jsxs(Z,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center justify-between",children:["Antiparasitaires",s.jsxs(F,{size:"sm",className:"gap-2",children:[s.jsx(at,{className:"h-4 w-4"}),"Nouveau traitement"]})]})}),s.jsx(ee,{children:t&&t.length>0?s.jsx("div",{className:"space-y-4",children:t.map((n,r)=>s.jsxs("div",{className:"p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:n.product_name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:n.date&&new Date(n.date).toLocaleDateString("fr-FR")})]}),s.jsx(_e,{variant:"outline",children:n.type})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Dosage:"})," ",n.dosage||"Non renseigné"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Voie:"})," ",n.route||"Non renseignée"]})]}),n.notes&&s.jsxs("div",{className:"mt-2",children:[s.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Notes:"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:n.notes})]})]},r))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(qn,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucun traitement antiparasitaire enregistré"})]})})]})}function RAe({open:e,onOpenChange:t,pet:n}){const[r,a]=b.useState("overview");return n?s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Qe,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsx(tt,{children:s.jsxs(nt,{className:"flex items-center gap-2",children:[s.jsx(Cr,{className:"h-5 w-5"}),"Dossier Médical - ",n.name," (Propriétaire: ",n.owner,")"]})}),s.jsxs(Ti,{value:r,onValueChange:a,className:"w-full",children:[s.jsxs(qa,{className:"grid w-full grid-cols-6",children:[s.jsxs(Tt,{value:"overview",className:"flex items-center gap-1",children:[s.jsx(ra,{className:"h-4 w-4"}),"Vue d'ensemble"]}),s.jsxs(Tt,{value:"historique",className:"flex items-center gap-1",children:[s.jsx(Ke,{className:"h-4 w-4"}),"Historique"]}),s.jsxs(Tt,{value:"prescriptions",className:"flex items-center gap-1",children:[s.jsx(Cr,{className:"h-4 w-4"}),"Prescriptions"]}),s.jsxs(Tt,{value:"vaccinations",className:"flex items-center gap-1",children:[s.jsx(Br,{className:"h-4 w-4"}),"Vaccinations"]}),s.jsxs(Tt,{value:"antiparasites",className:"flex items-center gap-1",children:[s.jsx(qn,{className:"h-4 w-4"}),"Antiparasites"]}),s.jsxs(Tt,{value:"pedigree",className:"flex items-center gap-1",children:[s.jsx(Ag,{className:"h-4 w-4"}),"Pedigree"]})]}),s.jsx(Et,{value:"overview",className:"space-y-6",children:s.jsx(EAe,{pet:n})}),s.jsx(Et,{value:"historique",className:"space-y-4",children:s.jsx(OAe,{pet:n})}),s.jsx(Et,{value:"prescriptions",className:"space-y-4",children:s.jsx(DAe,{pet:n})}),s.jsx(Et,{value:"vaccinations",className:"space-y-4",children:s.jsx(MAe,{pet:n})}),s.jsx(Et,{value:"antiparasites",className:"space-y-4",children:s.jsx($Ae,{pet:n})}),s.jsx(Et,{value:"pedigree",className:"space-y-4",children:s.jsx(IAe,{pet:n})})]}),s.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[s.jsx("div",{className:"flex gap-2",children:s.jsxs(F,{variant:"outline",size:"sm",children:[s.jsx(Cr,{className:"h-4 w-4 mr-2"}),"Voir Dossier Médical"]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(F,{variant:"outline",onClick:()=>t(!1),children:"Fermer"}),s.jsxs(F,{children:[s.jsx($t,{className:"h-4 w-4 mr-2"}),"Modifier"]})]})]}),s.jsxs("div",{className:"mt-4 p-4 bg-muted/50 rounded-lg",children:[s.jsx("p",{className:"text-sm font-medium",children:"Animal modifié"}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Les informations de ",n.name," ont été mises à jour."]})]})]})}):null}function FAe({pet:e,consultations:t}){var w,N,_;const n=[...t].sort((S,C)=>new Date(C.date).getTime()-new Date(S.date).getTime()),r=n.filter(S=>S.weight).map(S=>({date:S.date,weight:parseFloat(S.weight)})),a=n.filter(S=>S.temperature).map(S=>({date:S.date,temperature:parseFloat(S.temperature)})),i=((w=r[0])==null?void 0:w.weight)||0,o=((N=r[1])==null?void 0:N.weight)||0,l=i-o,c=l>0?"up":l<0?"down":"stable",u=((_=a[0])==null?void 0:_.temperature)||0,d=a.length>0?a.reduce((S,C)=>S+C.temperature,0)/a.length:0,h=a.length>0?Math.min(...a.map(S=>S.temperature)):0,m=a.length>0?Math.max(...a.map(S=>S.temperature)):0,f=t.length,g=new Date().getMonth(),p=new Date().getFullYear(),v=t.filter(S=>{const C=new Date(S.date);return C.getMonth()===g&&C.getFullYear()===p}).length,x=n[0],y=x?Math.floor((new Date().getTime()-new Date(x.date).getTime())/(1e3*60*60*24)):null,j=[];return u>39.5?j.push({type:"danger",message:"Température élevée",icon:gn}):u<37.5&&j.push({type:"warning",message:"Température basse",icon:gn}),l<-2&&j.push({type:"warning",message:"Perte de poids",icon:Ll}),y&&y>180&&j.push({type:"info",message:"Contrôle recommandé",icon:Ke}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Statistiques médicales"}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[s.jsxs(Z,{children:[s.jsx(he,{className:"pb-2",children:s.jsxs(me,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(Tg,{className:"h-4 w-4"}),"Poids actuel"]})}),s.jsxs(ee,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[i,"kg"]}),l!==0&&s.jsxs("div",{className:"flex items-center gap-1 text-sm mt-1",children:[c==="up"?s.jsx(an,{className:"h-3 w-3 text-green-600"}):c==="down"?s.jsx(Ll,{className:"h-3 w-3 text-red-600"}):s.jsx(pU,{className:"h-3 w-3 text-gray-600"}),s.jsxs("span",{className:c==="up"?"text-green-600":c==="down"?"text-red-600":"text-gray-600",children:[Math.abs(l),"kg"]})]})]})]}),s.jsxs(Z,{children:[s.jsx(he,{className:"pb-2",children:s.jsxs(me,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(hm,{className:"h-4 w-4"}),"Température"]})}),s.jsxs(ee,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[u,"°C"]}),s.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Moy: ",d.toFixed(1),"°C"]}),a.length>1&&s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Min: ",h,"°C | Max: ",m,"°C"]})]})]}),s.jsxs(Z,{children:[s.jsx(he,{className:"pb-2",children:s.jsxs(me,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(ra,{className:"h-4 w-4"}),"Consultations"]})}),s.jsxs(ee,{children:[s.jsx("div",{className:"text-2xl font-bold",children:f}),s.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Ce mois: ",v]}),x&&s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Dernière: ",new Date(x.date).toLocaleDateString("fr-FR")]})]})]}),s.jsxs(Z,{children:[s.jsx(he,{className:"pb-2",children:s.jsxs(me,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(gn,{className:"h-4 w-4"}),"Alertes"]})}),s.jsxs(ee,{children:[s.jsx("div",{className:"text-2xl font-bold",children:j.length}),s.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:j.length>0?"À traiter":"Aucune"}),j.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:j.slice(0,2).map((S,C)=>s.jsx(_e,{variant:"outline",className:"text-xs",children:S.message},C))})]})]})]}),j.length>0&&s.jsxs(Z,{className:"border-destructive/20",children:[s.jsx(he,{children:s.jsx(me,{className:"text-destructive text-base",children:"Alertes médicales"})}),s.jsx(ee,{children:s.jsx("div",{className:"space-y-2",children:j.map((S,C)=>s.jsxs("div",{className:"flex items-center gap-3 p-2 bg-destructive/5 rounded",children:[s.jsx(S.icon,{className:`h-4 w-4 ${S.type==="danger"?"text-destructive":S.type==="warning"?"text-yellow-600":"text-blue-600"}`}),s.jsx("span",{className:"text-sm font-medium",children:S.message})]},C))})})]}),r.length>1||a.length>1?s.jsxs(Z,{children:[s.jsx(he,{children:s.jsx(me,{className:"text-base",children:"Tendances"})}),s.jsx(ee,{children:s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.length>1&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-2",children:"Évolution du poids"}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Poids initial:"}),s.jsxs("span",{children:[r[r.length-1].weight,"kg"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Poids actuel:"}),s.jsxs("span",{children:[r[0].weight,"kg"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Évolution totale:"}),s.jsxs("span",{className:r[0].weight>r[r.length-1].weight?"text-green-600":"text-red-600",children:[r[0].weight-r[r.length-1].weight,"kg"]})]})]})]}),a.length>1&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-2",children:"Évolution de la température"}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Température moyenne:"}),s.jsxs("span",{children:[d.toFixed(1),"°C"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Variation:"}),s.jsxs("span",{children:[m-h,"°C"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Stabilité:"}),s.jsx("span",{className:m-h<1?"text-green-600":"text-yellow-600",children:m-h<1?"Stable":"Variable"})]})]})]})]})})]}):s.jsx(Z,{children:s.jsxs(ee,{className:"p-6 text-center text-muted-foreground",children:[s.jsx(ra,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground/50"}),s.jsx("p",{children:"Pas assez de données pour afficher les tendances"}),s.jsx("p",{className:"text-sm",children:"Ajoutez plus de consultations avec poids et température"})]})})]})}const iO={healthy:"bg-secondary text-secondary-foreground",treatment:"bg-accent text-accent-foreground",urgent:"bg-destructive text-destructive-foreground"},LAe=(e,t)=>{const n=t.find(o=>o.id===e.client_id),r=n?`${n.first_name} ${n.last_name}`:"Propriétaire inconnu",a=Math.abs(e.id.split("").reduce((o,l)=>(o=(o<<5)-o+l.charCodeAt(0),o&o),0)),i=Math.abs(e.client_id.split("").reduce((o,l)=>(o=(o<<5)-o+l.charCodeAt(0),o&o),0));return{id:a,name:e.name,type:e.species,breed:e.breed||"",gender:e.sex==="Mâle"?"male":e.sex==="Femelle"?"female":void 0,birthDate:e.birth_date||"",weight:e.weight?e.weight.toString():"",color:e.color||"",microchip:e.microchip_number||"",medicalNotes:e.notes||"",photo:e.photo_url||"",ownerId:i,owner:r,status:e.status==="vivant"?"healthy":e.status==="décédé"?"urgent":"treatment",lastVisit:e.updated_at?new Date(e.updated_at).toLocaleDateString("fr-FR"):"Jamais",nextAppointment:void 0,vaccinations:[],dbId:e.id,dbClientId:e.client_id}},BAe=()=>{var dt;const{data:e=[],isLoading:t}=nr(),{data:n=[],isLoading:r}=tr(),{data:a}=tee(),i=BZ(),o=zZ(),l=e.map(te=>LAe(te,n)),{data:c=[]}=qo(),{data:u=[]}=Uo(),d=b.useCallback(te=>{var oe;const Pe=typeof te=="string"?te:(oe=l.find(Ee=>Ee.id===te))==null?void 0:oe.dbId;return Pe?c.filter(Ee=>Ee.animal_id===Pe):[]},[l,c]),h=b.useCallback(te=>{var oe;const Pe=typeof te=="string"?te:(oe=l.find(Ee=>Ee.id===te))==null?void 0:oe.dbId;return Pe?u.filter(Ee=>Ee.animal_id===Pe):[]},[l,u]),m=b.useCallback(te=>{var Pe,oe,Ee,vt,At,xn;return{id:Math.abs(te.id.split("").reduce((Ve,yt)=>(Ve=(Ve<<5)-Ve+yt.charCodeAt(0),Ve&Ve),0)),clientId:Math.abs(te.client_id.split("").reduce((Ve,yt)=>(Ve=(Ve<<5)-Ve+yt.charCodeAt(0),Ve&Ve),0)),clientName:(Pe=te.client)!=null&&Pe.first_name&&((oe=te.client)!=null&&oe.last_name)?`${te.client.first_name} ${te.client.last_name}`:"Client inconnu",petId:Math.abs(te.animal_id.split("").reduce((Ve,yt)=>(Ve=(Ve<<5)-Ve+yt.charCodeAt(0),Ve&Ve),0)),petName:((Ee=te.animal)==null?void 0:Ee.name)||"Animal inconnu",date:te.consultation_date||te.created_at,weight:(vt=te.weight)==null?void 0:vt.toString(),temperature:(At=te.temperature)==null?void 0:At.toString(),symptoms:te.symptoms,diagnosis:te.diagnosis,treatment:te.treatment,medications:te.medications,followUp:te.follow_up,cost:(xn=te.cost)==null?void 0:xn.toString(),notes:te.notes,photos:te.photos||[],createdAt:te.created_at,purpose:te.consultation_type||"consultation",veterinarian:te.veterinarian_name||"Vétérinaire"}},[]),{currentView:f}=fc("pets"),[g,p]=b.useState(""),[v,x]=b.useState("all"),[y,j]=b.useState("all"),[w,N]=b.useState(f),{settings:_}=Pt(),S=_.species.split(",").map(te=>te.trim()).filter(te=>te.length>0),[C,A]=b.useState(!1),[T,E]=b.useState(!1),[k,R]=b.useState(null),[I,W]=b.useState(!1),[V,q]=b.useState(!1),[P,O]=b.useState(!1),[B,U]=b.useState(!1),[X,ie]=b.useState(null),{toast:re}=it(),[de,pe]=b.useState({client_id:"",name:"",species:"Chien",breed:"",color:"",sex:"Inconnu",weight:void 0,height:void 0,birth_date:"",microchip_number:"",tattoo_number:"",sterilized:!1,sterilization_date:"",notes:"",photo_url:"",status:"vivant"}),ce=l.filter(te=>{const Pe=te.name.toLowerCase().includes(g.toLowerCase())||te.breed&&te.breed.toLowerCase().includes(g.toLowerCase())||te.owner.toLowerCase().includes(g.toLowerCase()),oe=v==="all"||te.type.toLowerCase()===v.toLowerCase(),Ee=y==="all"||te.status===y;return Pe&&oe&&Ee}),se=te=>{R(te),W(!0)},ae=te=>{R(te),pe({client_id:te.dbClientId,name:te.name,species:te.type,breed:te.breed||"",color:te.color||"",sex:te.gender==="male"?"Mâle":te.gender==="female"?"Femelle":"Inconnu",weight:te.weight?parseFloat(te.weight):void 0,height:void 0,birth_date:te.birthDate||"",microchip_number:te.microchip||"",tattoo_number:"",sterilized:!1,sterilization_date:"",notes:te.medicalNotes||"",photo_url:te.photo||"",status:te.status==="healthy"?"vivant":te.status==="urgent"?"décédé":"perdu"}),q(!0)},le=()=>{k&&pe({client_id:k.dbClientId,name:k.name,species:k.type,breed:k.breed||"",color:k.color||"",sex:k.gender==="male"?"Mâle":k.gender==="female"?"Femelle":"Inconnu",weight:k.weight?parseFloat(k.weight):void 0,height:void 0,birth_date:k.birthDate||"",microchip_number:k.microchip||"",tattoo_number:"",sterilized:!1,sterilization_date:"",notes:k.medicalNotes||"",photo_url:k.photo||"",status:k.status==="healthy"?"vivant":k.status==="urgent"?"décédé":"perdu"}),W(!1),q(!0)},H=te=>{ie(te),U(!0)},Q=async()=>{if(X)try{await o.mutateAsync(X.dbId),re({title:"Animal supprimé",description:`${X.name} a été supprimé avec succès`}),U(!1),ie(null)}catch(te){re({title:"Erreur",description:te instanceof Error?te.message:"Erreur lors de la suppression de l'animal",variant:"destructive"})}},ve=te=>{R(te),O(!0)},ge=()=>{W(!1),O(!0)},rt=async()=>{if(k){if(de.microchip_number&&de.microchip_number.trim()&&e.find(Pe=>Pe.microchip_number===de.microchip_number.trim()&&Pe.id!==k.dbId)){re({title:"Erreur",description:"Un animal avec ce numéro de puce existe déjà.",variant:"destructive"});return}try{await i.mutateAsync({id:k.dbId,data:de}),re({title:"Animal modifié",description:`${de.name} a été modifié avec succès.`}),q(!1)}catch{re({title:"Erreur",description:"Une erreur s'est produite lors de la modification de l'animal.",variant:"destructive"})}}},Ge=b.useMemo(()=>k?d(k.id).map(m):[],[k,d,m]);return s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8 sm:px-6",children:[s.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold sm:text-3xl",children:"Gestion des Animaux"}),s.jsx("p",{className:"text-muted-foreground mt-2 text-sm sm:text-base",children:"Suivez tous les animaux et leurs informations médicales"})]}),s.jsxs("div",{className:"flex gap-2 flex-wrap",children:[s.jsxs(F,{size:"sm",variant:w==="cards"?"default":"outline",onClick:()=>N("cards"),className:"gap-2 flex-1 sm:flex-none",children:[s.jsx(ko,{className:"h-4 w-4"}),"Cartes"]}),s.jsxs(F,{size:"sm",variant:w==="table"?"default":"outline",onClick:()=>N("table"),className:"gap-2 flex-1 sm:flex-none",children:[s.jsx(wi,{className:"h-4 w-4"}),"Tableau"]}),s.jsxs(F,{className:"gap-2 medical-glow flex-1 sm:flex-none",onClick:()=>A(!0),children:[s.jsx(at,{className:"h-4 w-4"}),"Nouvel Animal"]})]})]}),s.jsxs("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4",children:[s.jsx(Z,{children:s.jsx(ee,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ht,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total animaux"}),s.jsx("p",{className:"text-2xl font-bold",children:(a==null?void 0:a.totalAnimals)||l.length})]})]})})}),s.jsx(Z,{children:s.jsx(ee,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Mn,{className:"h-5 w-5 text-green-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"En bonne santé"}),s.jsx("p",{className:"text-2xl font-bold",children:((dt=a==null?void 0:a.animalsByStatus)==null?void 0:dt.vivant)||l.filter(te=>te.status==="healthy").length})]})]})})}),s.jsx(Z,{children:s.jsx(ee,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(gn,{className:"h-5 w-5 text-yellow-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"En traitement"}),s.jsx("p",{className:"text-2xl font-bold",children:l.filter(te=>te.status==="treatment").length})]})]})})}),s.jsx(Z,{children:s.jsx(ee,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(hr,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Clients actifs"}),s.jsx("p",{className:"text-2xl font-bold",children:(a==null?void 0:a.totalClients)||n.length})]})]})})})]}),s.jsxs(Z,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[s.jsx($o,{className:"h-5 w-5"}),"Rechercher et filtrer"]})}),s.jsxs(ee,{className:"space-y-4",children:[s.jsx(G,{placeholder:"Rechercher par nom, race ou propriétaire...",value:g,onChange:te=>p(te.target.value),className:"w-full max-w-md"}),s.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:gap-4",children:[s.jsxs(we,{value:v,onValueChange:x,children:[s.jsx(je,{className:"w-full sm:w-40",children:s.jsx(Ne,{placeholder:"Tous types"})}),s.jsxs(be,{children:[s.jsx($,{value:"all",children:"Tous types"}),S.map((te,Pe)=>s.jsx($,{value:te.toLowerCase(),children:te},Pe))]})]}),s.jsxs(we,{value:y,onValueChange:j,children:[s.jsx(je,{className:"w-full sm:w-40",children:s.jsx(Ne,{placeholder:"Statut"})}),s.jsxs(be,{children:[s.jsx($,{value:"all",children:"Tous statuts"}),s.jsx($,{value:"healthy",children:"En bonne santé"}),s.jsx($,{value:"treatment",children:"En traitement"}),s.jsx($,{value:"urgent",children:"Urgent"})]})]})]})]})]}),w==="cards"?s.jsx("div",{className:"grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:ce.map(te=>s.jsx(Z,{className:"card-hover",children:s.jsx(ee,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Zn,{className:"h-12 w-12 sm:h-16 sm:w-16",children:te.photo?s.jsx(Ru,{src:te.photo,alt:te.name}):s.jsx(er,{className:"bg-primary-glow text-primary-foreground",children:s.jsx(ht,{className:"h-6 w-6 sm:h-8 sm:w-8"})})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("h3",{className:"text-lg sm:text-xl font-semibold truncate",children:te.name}),s.jsx("p",{className:"text-muted-foreground text-sm truncate",children:te.breed}),s.jsx(_e,{variant:"outline",className:`${iO[te.status]} text-xs`,children:te.status==="healthy"?"En bonne santé":te.status==="treatment"?"En traitement":"Urgent"})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Type:"})," ",te.type]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Âge:"})," ",te.birthDate?Du(te.birthDate):"Non renseigné"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Poids:"})," ",te.weight]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Couleur:"})," ",te.color]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(hr,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),s.jsxs("span",{className:"truncate",children:["Propriétaire: ",typeof te.owner=="string"?te.owner:(()=>{const Pe=n.find(oe=>String(oe.id)===String(te.ownerId));return Pe?`${Pe.first_name} ${Pe.last_name}`:"Non spécifié"})()]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Ke,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),s.jsxs("span",{children:["Dernière visite: ",te.lastVisit?new Date(te.lastVisit).toLocaleDateString("fr-FR"):"Aucune"]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(wn,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),s.jsxs("span",{children:["Consultations: ",d(te.id).length]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-sm",children:"Vaccinations:"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:(()=>{const Pe=h(te.id);return Pe.length>0?`${Pe.length} vaccination${Pe.length>1?"s":""} enregistrée${Pe.length>1?"s":""}`:"Aucune vaccination enregistrée"})()})]}),s.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row",children:[s.jsxs(F,{size:"sm",variant:"outline",className:"gap-2 flex-1",onClick:()=>se(te),children:[s.jsx(Nn,{className:"h-4 w-4"}),"Voir"]}),s.jsxs(F,{size:"sm",variant:"outline",className:"gap-2 flex-1",onClick:()=>ae(te),children:[s.jsx($t,{className:"h-4 w-4"}),"Modifier"]}),s.jsxs(F,{size:"sm",variant:"outline",className:"gap-2 flex-1 text-destructive hover:text-destructive-foreground hover:bg-destructive",onClick:()=>H(te),children:[s.jsx(rn,{className:"h-4 w-4"}),"Supprimer"]})]}),s.jsx("div",{className:"flex gap-2",children:s.jsxs(F,{size:"sm",className:"flex-1",onClick:()=>{R(te),E(!0)},children:[s.jsx(wn,{className:"h-4 w-4 mr-2"}),"Consultation"]})})]})})},te.id))}):s.jsx(Z,{children:s.jsx(ee,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full min-w-[600px]",children:[s.jsx("thead",{className:"border-b",children:s.jsxs("tr",{className:"text-left",children:[s.jsx("th",{className:"p-4 font-medium",children:"Animal"}),s.jsx("th",{className:"p-4 font-medium",children:"Type"}),s.jsx("th",{className:"p-4 font-medium",children:"Âge"}),s.jsx("th",{className:"p-4 font-medium",children:"Propriétaire"}),s.jsx("th",{className:"p-4 font-medium",children:"Statut"}),s.jsx("th",{className:"p-4 font-medium",children:"Dernière visite"}),s.jsx("th",{className:"p-4 font-medium",children:"Actions"})]})}),s.jsx("tbody",{children:ce.map(te=>s.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Zn,{className:"h-10 w-10",children:te.photo?s.jsx(Ru,{src:te.photo,alt:te.name}):s.jsx(er,{className:"bg-primary-glow text-primary-foreground",children:s.jsx(ht,{className:"h-5 w-5"})})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:te.name}),s.jsx("div",{className:"text-sm text-muted-foreground",children:te.breed})]})]})}),s.jsx("td",{className:"p-4",children:te.type}),s.jsx("td",{className:"p-4",children:te.birthDate?Du(te.birthDate):"Non renseigné"}),s.jsx("td",{className:"p-4",children:typeof te.owner=="string"?te.owner:(()=>{const Pe=n.find(oe=>String(oe.id)===String(te.ownerId));return Pe?`${Pe.first_name} ${Pe.last_name}`:"Non spécifié"})()}),s.jsx("td",{className:"p-4",children:s.jsx(_e,{variant:"outline",className:iO[te.status],children:te.status==="healthy"?"En bonne santé":te.status==="treatment"?"En traitement":"Urgent"})}),s.jsx("td",{className:"p-4",children:te.lastVisit?new Date(te.lastVisit).toLocaleDateString("fr-FR"):"Aucune"}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex gap-1 flex-wrap",children:[s.jsx(F,{size:"sm",variant:"outline",onClick:()=>se(te),children:s.jsx(Nn,{className:"h-4 w-4"})}),s.jsx(F,{size:"sm",variant:"outline",onClick:()=>ae(te),children:s.jsx($t,{className:"h-4 w-4"})}),s.jsx(F,{size:"sm",variant:"outline",className:"text-destructive hover:text-destructive-foreground hover:bg-destructive",onClick:()=>H(te),children:s.jsx(rn,{className:"h-4 w-4"})}),s.jsx(F,{size:"sm",variant:"outline",onClick:()=>ve(te),children:"Dossier"})]})})]},te.id))})]})})})}),k&&s.jsxs(Z,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[s.jsx(ra,{className:"h-5 w-5"}),"Statistiques médicales - ",k.name]})}),s.jsx(ee,{children:s.jsx(FAe,{pet:k,consultations:Ge})})]}),s.jsx(Gx,{open:C,onOpenChange:A}),s.jsx(kd,{open:T,onOpenChange:E}),s.jsx(U3,{open:I,onOpenChange:W,pet:k,onEdit:le,onShowDossier:ge,onDelete:k?()=>H(k):void 0}),s.jsx(et,{open:V,onOpenChange:q,children:s.jsxs(Qe,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto mx-4",children:[s.jsxs(tt,{children:[s.jsx(nt,{children:"Modifier Animal"}),s.jsx(Bt,{children:"Modifiez les informations de l'animal."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"name",children:"Nom *"}),s.jsx(G,{id:"name",value:de.name,onChange:te=>pe(Pe=>({...Pe,name:te.target.value})),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"species",children:"Espèce *"}),s.jsxs(we,{value:de.species,onValueChange:te=>pe(Pe=>({...Pe,species:te})),children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Sélectionner l'espèce"})}),s.jsxs(be,{children:[s.jsx($,{value:"Chien",children:"Chien"}),s.jsx($,{value:"Chat",children:"Chat"}),s.jsx($,{value:"Oiseau",children:"Oiseau"}),s.jsx($,{value:"Lapin",children:"Lapin"}),s.jsx($,{value:"Furet",children:"Furet"}),s.jsx($,{value:"Autre",children:"Autre"})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"client_id",children:"Propriétaire *"}),s.jsxs(we,{value:de.client_id,onValueChange:te=>pe(Pe=>({...Pe,client_id:te})),children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Sélectionner le propriétaire"})}),s.jsx(be,{children:n.map(te=>s.jsxs($,{value:te.id,children:[te.first_name," ",te.last_name]},te.id))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"breed",children:"Race"}),s.jsx(G,{id:"breed",value:de.breed||"",onChange:te=>pe(Pe=>({...Pe,breed:te.target.value}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"sex",children:"Sexe"}),s.jsxs(we,{value:de.sex,onValueChange:te=>pe(Pe=>({...Pe,sex:te})),children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Sélectionner le sexe"})}),s.jsxs(be,{children:[s.jsx($,{value:"Mâle",children:"Mâle"}),s.jsx($,{value:"Femelle",children:"Femelle"}),s.jsx($,{value:"Inconnu",children:"Inconnu"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"birth_date",children:"Date de naissance"}),s.jsx(G,{id:"birth_date",type:"date",value:de.birth_date||"",onChange:te=>pe(Pe=>({...Pe,birth_date:te.target.value||void 0}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"weight",children:"Poids (kg)"}),s.jsx(G,{id:"weight",type:"number",step:"0.1",value:de.weight||"",onChange:te=>pe(Pe=>({...Pe,weight:te.target.value?parseFloat(te.target.value):void 0}))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"color",children:"Couleur"}),s.jsx(G,{id:"color",value:de.color||"",onChange:te=>pe(Pe=>({...Pe,color:te.target.value}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"microchip_number",children:"N° puce électronique"}),s.jsx(G,{id:"microchip_number",value:de.microchip_number||"",onChange:te=>pe(Pe=>({...Pe,microchip_number:te.target.value}))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"notes",children:"Notes médicales"}),s.jsx(Ue,{id:"notes",value:de.notes||"",onChange:te=>pe(Pe=>({...Pe,notes:te.target.value})),placeholder:"Notes additionnelles..."})]}),s.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:justify-end pt-4",children:[s.jsx(F,{type:"button",variant:"outline",onClick:()=>q(!1),className:"w-full sm:w-auto",children:"Annuler"}),s.jsxs(F,{onClick:rt,disabled:i.isPending,className:"w-full sm:w-auto",children:[i.isPending&&s.jsx(Kn,{className:"mr-2 h-4 w-4 animate-spin"}),"Sauvegarder"]})]})]})]})}),s.jsx(RAe,{open:P,onOpenChange:O,pet:k}),s.jsx(P8,{open:B,onOpenChange:U,children:s.jsxs(l_,{children:[s.jsxs(c_,{children:[s.jsx(d_,{children:"Confirmer la suppression"}),s.jsxs(h_,{children:["Êtes-vous sûr de vouloir supprimer l'animal ",s.jsx("strong",{children:X==null?void 0:X.name})," ? Cette action est irréversible et supprimera définitivement toutes les données associées à cet animal, y compris ses consultations, vaccinations et historique médical."]})]}),s.jsxs(u_,{children:[s.jsx(f_,{children:"Annuler"}),s.jsx(m_,{onClick:Q,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",disabled:o.isPending,children:o.isPending?s.jsxs(s.Fragment,{children:[s.jsx(Kn,{className:"h-4 w-4 animate-spin mr-2"}),"Suppression..."]}):"Supprimer"})]})]})})]})},zAe=()=>s.jsx(BAe,{});function VAe({open:e,onOpenChange:t}){const{data:n=[]}=tr(),{data:r=[]}=nr(),a=F3(),{toast:i}=it(),[o,l]=b.useState({clientId:"",animalId:"",date:"",time:"",appointmentType:"consultation",notes:""}),[c,u]=b.useState([]),d=async f=>{if(f.preventDefault(),!o.clientId||!o.animalId||!o.date||!o.time){i({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires",variant:"destructive"});return}try{const g=new Date(`${o.date}T${o.time}:00`);await a.mutateAsync({client_id:o.clientId,animal_id:o.animalId,appointment_date:g.toISOString(),appointment_type:o.appointmentType,notes:o.notes||void 0,duration_minutes:30}),i({title:"Succès",description:"Rendez-vous créé avec succès"}),l({clientId:"",animalId:"",date:"",time:"",appointmentType:"consultation",notes:""}),u([]),t(!1)}catch(g){console.error("Error creating appointment:",g),i({title:"Erreur",description:"Impossible de créer le rendez-vous",variant:"destructive"})}},h=f=>{l(p=>({...p,clientId:f,animalId:""}));const g=r.filter(p=>p.client_id===f);u(g)},m=f=>`${f.first_name} ${f.last_name}`;return s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Qe,{className:"max-w-2xl",children:[s.jsxs(tt,{children:[s.jsxs(nt,{className:"flex items-center gap-2",children:[s.jsx(Ke,{className:"h-5 w-5"}),"Nouveau Rendez-vous"]}),s.jsx(Bt,{children:"Créer un nouveau rendez-vous pour un client et son animal"})]}),s.jsxs("form",{onSubmit:d,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"client",children:"Client *"}),s.jsxs(we,{value:o.clientId,onValueChange:h,children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Sélectionner un client"})}),s.jsx(be,{children:n.map(f=>s.jsx($,{value:f.id,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(hr,{className:"h-4 w-4"}),m(f)]})},f.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"animal",children:"Animal *"}),s.jsxs(we,{value:o.animalId,onValueChange:f=>l(g=>({...g,animalId:f})),disabled:!o.clientId,children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:o.clientId?"Sélectionner un animal":"Sélectionner d'abord un client"})}),s.jsx(be,{children:c.map(f=>s.jsx($,{value:f.id,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ht,{className:"h-4 w-4"}),f.name," (",f.species,")"]})},f.id))})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"date",children:"Date *"}),s.jsx(G,{id:"date",type:"date",value:o.date,onChange:f=>l(g=>({...g,date:f.target.value})),min:new Date().toISOString().split("T")[0]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"time",children:"Heure *"}),s.jsx(G,{id:"time",type:"time",value:o.time,onChange:f=>l(g=>({...g,time:f.target.value}))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"type",children:"Type de rendez-vous"}),s.jsxs(we,{value:o.appointmentType,onValueChange:f=>l(g=>({...g,appointmentType:f})),children:[s.jsx(je,{children:s.jsx(Ne,{})}),s.jsxs(be,{children:[s.jsx($,{value:"consultation",children:"Consultation"}),s.jsx($,{value:"vaccination",children:"Vaccination"}),s.jsx($,{value:"surgery",children:"Chirurgie"}),s.jsx($,{value:"follow-up",children:"Contrôle/Suivi"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"notes",children:"Notes (optionnel)"}),s.jsx(Ue,{id:"notes",placeholder:"Notes additionnelles sur le rendez-vous...",value:o.notes,onChange:f=>l(g=>({...g,notes:f.target.value})),rows:3})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(F,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsx(F,{type:"submit",disabled:a.isPending,children:a.isPending?"Création...":"Créer le rendez-vous"})]})]})]})})}function qAe(e,t,n){const r=[],{openingTime:a,closingTime:i,slotDuration:o,lunchBreakStart:l,lunchBreakEnd:c}=t,u=Fp(a),d=Fp(i),h=l?Fp(l):null,m=c?Fp(c):null;for(let f=u;f<d;f+=o){const g=UAe(f),p=h&&m&&f>=h&&f<m,v=n.some(x=>x.date===e&&x.time===g);r.push({time:g,isAvailable:!v&&!p,isLunchBreak:!!p})}return r}function Fp(e){const[t,n]=e.split(":").map(Number);return t*60+n}function UAe(e){const t=Math.floor(e/60),n=e%60;return`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}function WAe(e){return new Date(e).toLocaleDateString("fr-FR",{weekday:"long"})}function HAe(e,t){const n=WAe(e).toLowerCase();return t.workingDays.includes(n)}const oO=(e,t)=>{switch(e){case"appointment":switch(t){case"confirmed":return"bg-green-100 text-green-800 border-green-200";case"completed":return"bg-gray-100 text-gray-800 border-gray-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-blue-100 text-blue-800 border-blue-200"}case"vaccination":switch(t){case"completed":return"bg-green-100 text-green-800 border-green-200";case"overdue":return"bg-red-100 text-red-800 border-red-200";case"scheduled":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-yellow-100 text-yellow-800 border-yellow-200"}case"antiparasitic":switch(t){case"completed":return"bg-green-100 text-green-800 border-green-200";case"overdue":return"bg-red-100 text-red-800 border-red-200";case"scheduled":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-purple-100 text-purple-800 border-purple-200"}default:return"bg-gray-100 text-gray-800 border-gray-200"}},lO=(e,t)=>{switch(e){case"appointment":return s.jsx(Kt,{className:"h-3 w-3"});case"vaccination":return s.jsx(Mn,{className:"h-3 w-3"});case"antiparasitic":return s.jsx(gn,{className:"h-3 w-3"});default:return s.jsx(Ke,{className:"h-3 w-3"})}},KAe=({events:e,onEventClick:t,onDateClick:n,onTimeSlotClick:r,showTimeSlots:a=!1,title:i="Calendrier",icon:o=s.jsx(Ke,{className:"h-5 w-5"})})=>{var _;const{settings:l}=Pt(),[c,u]=b.useState(new Date),[d,h]=b.useState(""),m=new Date(c.getFullYear(),c.getMonth(),1),f=new Date(c.getFullYear(),c.getMonth()+1,0),g=new Date(m);g.setDate(g.getDate()-m.getDay());const p=[],v=new Date(g);for(;v<=f||p.length<42;)p.push(new Date(v)),v.setDate(v.getDate()+1);const x=b.useMemo(()=>{const S={};return e.forEach(C=>{const A=C.date;S[A]||(S[A]=[]),S[A].push(C)}),S},[e]),y=b.useMemo(()=>!d||!a?[]:qAe(d,l.scheduleSettings,[]),[d,a,l.scheduleSettings]),j=S=>{const C=new Date(c);C.setMonth(c.getMonth()+(S==="next"?1:-1)),u(C)},w=S=>{const C=Je(S,"yyyy-MM-dd");h(C),n==null||n(C)},N=S=>{r&&d&&r(d,S)};return s.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[s.jsxs(Z,{children:[s.jsx(he,{className:"pb-3 sm:pb-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-0",children:[s.jsxs(me,{className:"flex items-center gap-2 text-base sm:text-lg",children:[o,i]}),s.jsxs("div",{className:"flex items-center justify-between sm:gap-2",children:[s.jsx(F,{variant:"outline",size:"sm",onClick:()=>j("prev"),className:"flex-1 sm:flex-none",children:"←"}),s.jsx("span",{className:"font-medium text-sm sm:text-base px-2 sm:min-w-[140px] text-center",children:Je(c,"MMMM yyyy",{locale:Rn})}),s.jsx(F,{variant:"outline",size:"sm",onClick:()=>j("next"),className:"flex-1 sm:flex-none",children:"→"})]})]})}),s.jsxs(ee,{className:"p-2 sm:p-6",children:[s.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2 sm:mb-4",children:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"].map(S=>s.jsx("div",{className:"p-1 sm:p-2 text-center text-xs sm:text-sm font-medium text-gray-500",children:S},S))}),s.jsx("div",{className:"grid grid-cols-7 gap-1",children:p.map((S,C)=>{const A=Je(S,"yyyy-MM-dd"),T=x[A]||[],E=S.getMonth()===c.getMonth(),k=Aee(S,new Date),R=A===d,I=HAe(A,l.scheduleSettings);return s.jsxs("div",{className:`
                    min-h-[60px] sm:min-h-[80px] p-1 border rounded-lg relative cursor-pointer hover:bg-muted/50
                    ${E?"bg-white":"bg-gray-50"}
                    ${k?"ring-2 ring-blue-500":""}
                    ${R?"bg-blue-100 border-blue-300":""}
                    ${I?"":"opacity-50"}
                  `,onClick:()=>w(S),children:[s.jsx("div",{className:`text-xs sm:text-sm font-medium ${E?"text-gray-900":"text-gray-400"}`,children:S.getDate()}),s.jsxs("div",{className:"space-y-0.5 sm:space-y-1 mt-0.5 sm:mt-1",children:[T.slice(0,2).map((W,V)=>s.jsx("div",{className:`
                          text-xs p-0.5 sm:p-1 rounded text-center truncate border cursor-pointer
                          ${oO(W.type,W.status)}
                        `,title:`${W.title}${W.time?` - ${W.time}`:""}${W.clientName?` (${W.clientName})`:""}`,onClick:q=>{q.stopPropagation(),t==null||t(W)},children:s.jsxs("div",{className:"flex items-center gap-0.5 sm:gap-1 justify-center",children:[lO(W.type,W.status),s.jsx("span",{className:"truncate text-xs",children:W.title})]})},V)),T.length>2&&s.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["+",T.length-2]})]})]},C)})})]})]}),d&&s.jsxs(Z,{children:[s.jsx(he,{className:"pb-3",children:s.jsx(me,{className:"text-base sm:text-lg",children:Je(new Date(d),"EEEE d MMMM yyyy",{locale:Rn})})}),s.jsxs(ee,{className:"p-3 sm:p-6",children:[((_=x[d])==null?void 0:_.length)>0?s.jsx("div",{className:"space-y-3",children:x[d].map(S=>s.jsxs("div",{className:`
                      p-3 rounded-lg border cursor-pointer hover:shadow-sm
                      ${oO(S.type,S.status)}
                    `,onClick:()=>t==null?void 0:t(S),children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[lO(S.type,S.status),s.jsx("span",{className:"font-medium",children:S.title})]}),s.jsx(_e,{variant:"outline",className:"text-xs",children:S.status})]}),S.time&&s.jsxs("div",{className:"flex items-center gap-1 text-sm mt-1",children:[s.jsx(Kt,{className:"h-3 w-3"}),s.jsx("span",{children:S.time})]}),S.clientName&&s.jsxs("div",{className:"flex items-center gap-1 text-sm mt-1",children:[s.jsx(hr,{className:"h-3 w-3"}),s.jsx("span",{children:S.clientName})]}),S.petName&&s.jsxs("div",{className:"flex items-center gap-1 text-sm mt-1",children:[s.jsx(ht,{className:"h-3 w-3"}),s.jsx("span",{children:S.petName})]})]},S.id))}):s.jsx("p",{className:"text-muted-foreground text-center py-4",children:"Aucun événement prévu pour cette date"}),a&&y.length>0&&s.jsxs("div",{className:"mt-4 sm:mt-6",children:[s.jsx("h4",{className:"font-medium mb-2 sm:mb-3 text-sm sm:text-base",children:"Créneaux disponibles"}),s.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-1 sm:gap-2",children:y.map(S=>s.jsxs(F,{variant:S.isAvailable?"outline":"ghost",size:"sm",disabled:!S.isAvailable,onClick:()=>N(S.time),className:"text-xs p-1 sm:p-2",children:[S.time,S.isLunchBreak&&s.jsx(_e,{variant:"secondary",className:"ml-1 text-xs hidden sm:inline",children:"Pause"})]},S.time))})]})]})]})]})},cO={scheduled:"bg-blue-100 text-blue-800",confirmed:"bg-green-100 text-green-800",completed:"bg-gray-100 text-gray-800",cancelled:"bg-red-100 text-red-800","no-show":"bg-orange-100 text-orange-800"},jj={scheduled:"Planifié",confirmed:"Confirmé",completed:"Terminé",cancelled:"Annulé","no-show":"Absent"},uO={consultation:"Consultation générale",vaccination:"Vaccination",chirurgie:"Chirurgie",urgence:"Urgence",controle:"Contrôle post-opératoire",sterilisation:"Stérilisation",dentaire:"Soins dentaires"};function GAe(){const{data:e=[],isLoading:t,error:n}=KS(),r=iee(),a=oee(),{toast:i}=it(),{currentView:o}=fc("appointments"),[l,c]=b.useState(!1),[u,d]=b.useState(""),[h,m]=b.useState("all"),[f,g]=b.useState("all"),[p,v]=b.useState("all"),[x,y]=b.useState(new Date().toISOString().split("T")[0]),[j,w]=b.useState("list"),[N,_]=b.useState(o),[S,C]=b.useState(!1),[A,T]=b.useState(null),[E,k]=b.useState(null),[R,I]=b.useState(""),W=oe=>new Date(oe).toLocaleDateString("fr-FR"),V=oe=>new Date(oe).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),q=oe=>new Date(oe.appointment_date).toISOString().split("T")[0],P=oe=>new Date(oe.appointment_date).toTimeString().slice(0,5),[O,B]=b.useState(()=>{const oe=new Date;return new Date(oe.getFullYear(),oe.getMonth(),1)}),U=oe=>oe.client?`${oe.client.first_name} ${oe.client.last_name}`:"Unknown Client",X=oe=>{var Ee;return((Ee=oe.animal)==null?void 0:Ee.name)||"Unknown Animal"},ie=()=>{const oe=new Date;return e.filter(Ee=>new Date(Ee.appointment_date)>oe)},re=()=>{const oe=new Date;return e.filter(Ee=>new Date(Ee.appointment_date)<oe&&Ee.status==="scheduled")},de=ie(),pe=re(),ce=e.filter(oe=>{const Ee=U(oe),vt=X(oe),At=Ee.toLowerCase().includes(u.toLowerCase())||vt.toLowerCase().includes(u.toLowerCase())||oe.notes&&oe.notes.toLowerCase().includes(u.toLowerCase()),xn=h==="all"||oe.status===h,Ve=f==="all"||oe.appointment_type===f;let yt=!0;const Cn=new Date(oe.appointment_date),rr=Cn.toISOString().split("T")[0];if(p==="today")yt=rr===new Date().toISOString().split("T")[0];else if(p==="week"){const Yr=new Date,yn=new Date(Yr.getTime()+7*24*60*60*1e3);yt=Cn>=Yr&&Cn<=yn}else if(p==="month"){const Yr=new Date,yn=Yr.getMonth(),Ii=Yr.getFullYear();yt=Cn.getMonth()===yn&&Cn.getFullYear()===Ii}else p==="specific"&&(yt=rr===x);return At&&xn&&Ve&&yt}),se=async(oe,Ee)=>{try{await r.mutateAsync({id:oe,data:{status:Ee}}),i({title:"Statut mis à jour",description:`Le rendez-vous est maintenant ${jj[Ee].toLowerCase()}.`})}catch{i({title:"Erreur",description:"Impossible de mettre à jour le statut",variant:"destructive"})}},ae=async()=>{if(!E)return;const{id:oe,field:Ee}=E;if(e.find(At=>At.id===oe))try{await r.mutateAsync({id:oe,data:{[Ee]:R}}),i({title:"Modifié",description:`${Ee} mis à jour`})}catch{i({title:"Erreur",description:"Impossible de mettre à jour",variant:"destructive"})}k(null)},le=async oe=>{T(oe),C(!0)},H=async()=>{if(!A)return;const oe=X(A);try{await a.mutateAsync(A.id),i({title:"Rendez-vous supprimé",description:`Le rendez-vous pour ${oe} a été supprimé.`}),C(!1),T(null)}catch{i({title:"Erreur",description:"Impossible de supprimer le rendez-vous",variant:"destructive"})}},Q=oe=>e.filter(Ee=>new Date(Ee.appointment_date).toISOString().split("T")[0]===oe),ge=(()=>{const oe=new Date().toISOString().split("T")[0];return Q(oe)})(),rt=O.getFullYear(),Ge=O.getMonth(),dt=new Date(rt,Ge,1).getDay(),te=new Date(rt,Ge+1,0).getDate();let Pe=1-dt;for(;Pe<=te;){const oe=[];for(let Ee=0;Ee<7;Ee++)Pe>0&&Pe<=te?oe.push(Pe):oe.push(0),Pe++}return t?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Chargement des rendez-vous..."})]})}):n?s.jsx("div",{className:"p-6",children:s.jsx(Z,{className:"border-red-200 bg-red-50",children:s.jsx(ee,{className:"p-6",children:s.jsxs("div",{className:"flex items-center text-red-800",children:[s.jsx(qn,{className:"w-5 h-5 mr-2"}),s.jsxs("span",{children:["Erreur lors du chargement des rendez-vous: ",n.message]})]})})})}):s.jsxs("div",{className:"container mx-auto px-2 sm:px-4 lg:px-6 py-4 sm:py-6 lg:py-8 space-y-4 sm:space-y-6 lg:space-y-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Gestion des Rendez-vous"}),s.jsx("p",{className:"text-muted-foreground text-sm sm:text-base",children:"Planifiez et gérez tous vos rendez-vous vétérinaires"})]}),s.jsxs(F,{onClick:()=>c(!0),className:"gap-2 w-full sm:w-auto",children:[s.jsx(at,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Nouveau Rendez-vous"}),s.jsx("span",{className:"sm:hidden",children:"Nouveau RDV"})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx(F,{variant:j==="list"?"default":"outline",onClick:()=>w("list"),size:"sm",className:"flex-1 sm:flex-none",children:"Liste"}),s.jsx(F,{variant:j==="calendar"?"default":"outline",onClick:()=>w("calendar"),size:"sm",className:"flex-1 sm:flex-none",children:"Calendrier"})]}),j==="list"&&s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(F,{size:"sm",variant:N==="cards"?"default":"outline",onClick:()=>_("cards"),className:"gap-1 sm:gap-2 flex-1 sm:flex-none",children:[s.jsx(ko,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Cartes"})]}),s.jsxs(F,{size:"sm",variant:N==="table"?"default":"outline",onClick:()=>_("table"),className:"gap-1 sm:gap-2 flex-1 sm:flex-none",children:[s.jsx(wi,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Tableau"})]})]})]}),j==="calendar"?s.jsx(KAe,{events:e.map(oe=>({id:parseInt(oe.id),type:"appointment",title:`${U(oe)} - ${X(oe)}`,time:P(oe),date:q(oe),status:oe.status,clientName:U(oe),petName:X(oe)})),onEventClick:oe=>{},onDateClick:oe=>{y(oe)},onTimeSlotClick:(oe,Ee)=>{c(!0)},showTimeSlots:!0,title:"Calendrier des Rendez-vous",icon:s.jsx(Ke,{className:"h-5 w-5"})}):s.jsxs("div",{className:"grid gap-2 sm:gap-4 grid-cols-2 lg:grid-cols-4",children:[s.jsx(Z,{children:s.jsx(ee,{className:"p-3 sm:p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ke,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Aujourd'hui"}),s.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:ge.length})]})]})})}),s.jsx(Z,{children:s.jsx(ee,{className:"p-3 sm:p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Kt,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"À venir"}),s.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:de.length})]})]})})}),s.jsx(Z,{children:s.jsx(ee,{className:"p-3 sm:p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(qn,{className:"h-4 w-4 sm:h-5 sm:w-5 text-orange-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"En retard"}),s.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:pe.length})]})]})})}),s.jsx(Z,{children:s.jsx(ee,{className:"p-3 sm:p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Mn,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Total"}),s.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:e.length})]})]})})})]}),s.jsxs(Z,{children:[s.jsx(he,{className:"pb-3",children:s.jsxs(me,{className:"flex items-center gap-2 text-base sm:text-lg",children:[s.jsx(jI,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Filtres et Recherche"]})}),s.jsx(ee,{className:"space-y-3 sm:space-y-4",children:s.jsxs("div",{className:"grid gap-3 sm:gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(gh,{children:"Recherche"}),s.jsxs("div",{className:"relative",children:[s.jsx($o,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(G,{placeholder:"Client, animal, motif...",value:u,onChange:oe=>d(oe.target.value),className:"pl-10"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(gh,{children:"Statut"}),s.jsxs(we,{value:h,onValueChange:m,children:[s.jsx(je,{children:s.jsx(Ne,{})}),s.jsxs(be,{children:[s.jsx($,{value:"all",children:"Tous les statuts"}),s.jsx($,{value:"scheduled",children:"Planifié"}),s.jsx($,{value:"confirmed",children:"Confirmé"}),s.jsx($,{value:"completed",children:"Terminé"}),s.jsx($,{value:"cancelled",children:"Annulé"}),s.jsx($,{value:"no-show",children:"Absent"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(gh,{children:"Type"}),s.jsxs(we,{value:f,onValueChange:g,children:[s.jsx(je,{children:s.jsx(Ne,{})}),s.jsxs(be,{children:[s.jsx($,{value:"all",children:"Tous les types"}),s.jsx($,{value:"consultation",children:"Consultation"}),s.jsx($,{value:"vaccination",children:"Vaccination"}),s.jsx($,{value:"chirurgie",children:"Chirurgie"}),s.jsx($,{value:"urgence",children:"Urgence"}),s.jsx($,{value:"controle",children:"Contrôle"}),s.jsx($,{value:"sterilisation",children:"Stérilisation"}),s.jsx($,{value:"dentaire",children:"Dentaire"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(gh,{children:"Période"}),s.jsxs(we,{value:p,onValueChange:v,children:[s.jsx(je,{children:s.jsx(Ne,{})}),s.jsxs(be,{children:[s.jsx($,{value:"all",children:"Toutes les dates"}),s.jsx($,{value:"today",children:"Ce jour"}),s.jsx($,{value:"week",children:"Cette semaine"}),s.jsx($,{value:"month",children:"Ce mois"}),s.jsx($,{value:"specific",children:"Date spécifique"})]})]})]}),p==="specific"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(gh,{children:"Date"}),s.jsx(G,{type:"date",value:x,onChange:oe=>y(oe.target.value)})]})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("h2",{className:"text-xl font-semibold",children:["Rendez-vous (",ce.length,")"]})}),ce.length===0?s.jsx(Z,{children:s.jsxs(ee,{className:"p-8 text-center text-muted-foreground",children:[s.jsx(Ke,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"Aucun rendez-vous trouvé"}),s.jsx("p",{className:"text-sm",children:"Commencez par créer votre premier rendez-vous"})]})}):N==="cards"?s.jsx("div",{className:"space-y-4",children:ce.sort((oe,Ee)=>new Date(oe.appointment_date).getTime()-new Date(Ee.appointment_date).getTime()).map(oe=>s.jsx(Z,{className:"card-hover",children:s.jsx(ee,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[s.jsxs("div",{className:"space-y-4 flex-1",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(hr,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:U(oe)})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ht,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:X(oe)})]}),s.jsx(_e,{className:cO[oe.status],children:jj[oe.status]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ke,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{children:W(oe.appointment_date)})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Kt,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{children:V(oe.appointment_date)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Type:"}),s.jsx("span",{className:"ml-1",children:uO[oe.appointment_type]||oe.appointment_type})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Durée:"}),s.jsxs("span",{className:"ml-1",children:[oe.duration_minutes||30," min"]})]})]}),oe.notes&&s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Motif:"}),s.jsx("p",{className:"text-sm mt-1",children:oe.notes})]}),oe.notes&&s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Notes:"}),s.jsx("p",{className:"text-sm mt-1 text-muted-foreground",children:oe.notes})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:ml-4",children:[oe.status==="scheduled"&&s.jsxs(s.Fragment,{children:[s.jsxs(F,{size:"sm",variant:"outline",onClick:()=>se(oe.id,"confirmed"),className:"gap-1 w-full sm:w-auto",children:[s.jsx(Mn,{className:"h-3 w-3"}),"Confirmer"]}),s.jsxs(F,{size:"sm",variant:"outline",onClick:()=>se(oe.id,"cancelled"),className:"gap-1 text-red-600 w-full sm:w-auto",children:[s.jsx(dm,{className:"h-3 w-3"}),"Annuler"]})]}),oe.status==="confirmed"&&s.jsxs(F,{size:"sm",variant:"outline",onClick:()=>se(oe.id,"completed"),className:"gap-1 w-full sm:w-auto",children:[s.jsx(Mn,{className:"h-3 w-3"}),"Terminer"]}),s.jsxs(F,{size:"sm",variant:"outline",onClick:()=>le(oe),className:"gap-1 text-red-600 w-full sm:w-auto",children:[s.jsx(rn,{className:"h-3 w-3"}),"Supprimer"]})]})]})})},oe.id))}):s.jsx(Z,{children:s.jsx(ee,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"border-b",children:s.jsxs("tr",{className:"text-left",children:[s.jsx("th",{className:"p-2 sm:p-4 font-medium",children:"Client / Animal"}),s.jsx("th",{className:"p-2 sm:p-4 font-medium",children:"Date & Heure"}),s.jsx("th",{className:"p-2 sm:p-4 font-medium",children:"Type"}),s.jsx("th",{className:"p-2 sm:p-4 font-medium",children:"Statut"}),s.jsx("th",{className:"p-2 sm:p-4 font-medium",children:"Motif"}),s.jsx("th",{className:"p-2 sm:p-4 font-medium",children:"Actions"})]})}),s.jsx("tbody",{children:ce.sort((oe,Ee)=>new Date(oe.appointment_date).getTime()-new Date(Ee.appointment_date).getTime()).map(oe=>s.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[s.jsx("td",{className:"p-2 sm:p-4",children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(hr,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:U(oe)})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ht,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:X(oe)})]})]})}),s.jsx("td",{className:"p-2 sm:p-4",children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>{k({id:oe.id,field:"date"}),I(q(oe))},children:[s.jsx(Ke,{className:"h-4 w-4 text-muted-foreground"}),(E==null?void 0:E.id)===oe.id&&E.field==="date"?s.jsx(G,{type:"date",value:R,onChange:Ee=>I(Ee.target.value),onBlur:ae,autoFocus:!0,className:"w-32"}):s.jsx("span",{children:W(oe.appointment_date)})]}),s.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>{k({id:oe.id,field:"time"}),I(P(oe))},children:[s.jsx(Kt,{className:"h-4 w-4 text-muted-foreground"}),(E==null?void 0:E.id)===oe.id&&E.field==="time"?s.jsx(G,{type:"time",value:R,onChange:Ee=>I(Ee.target.value),onBlur:ae,autoFocus:!0,className:"w-24"}):s.jsx("span",{className:"text-sm text-muted-foreground",children:V(oe.appointment_date)})]})]})}),s.jsx("td",{className:"p-2 sm:p-4",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:uO[oe.appointment_type]||oe.appointment_type}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[oe.duration_minutes||30," min"]})]})}),s.jsx("td",{className:"p-2 sm:p-4",children:s.jsx("div",{className:"cursor-pointer",onClick:()=>{k({id:oe.id,field:"status"}),I(oe.status)},children:(E==null?void 0:E.id)===oe.id&&E.field==="status"?s.jsxs(we,{value:R,onValueChange:Ee=>{I(Ee),se(oe.id,Ee),k(null)},children:[s.jsx(je,{className:"w-32",children:s.jsx(Ne,{})}),s.jsxs(be,{children:[s.jsx($,{value:"scheduled",children:"Planifié"}),s.jsx($,{value:"confirmed",children:"Confirmé"}),s.jsx($,{value:"completed",children:"Terminé"}),s.jsx($,{value:"cancelled",children:"Annulé"}),s.jsx($,{value:"no-show",children:"Absent"})]})]}):s.jsx(_e,{className:cO[oe.status],children:jj[oe.status]})})}),s.jsx("td",{className:"p-2 sm:p-4",children:s.jsx("div",{className:"max-w-xs cursor-pointer",onClick:()=>{k({id:oe.id,field:"reason"}),I(oe.notes||"")},children:(E==null?void 0:E.id)===oe.id&&E.field==="reason"?s.jsx(G,{value:R,onChange:Ee=>I(Ee.target.value),onBlur:ae,autoFocus:!0,placeholder:"Motif du rendez-vous"}):s.jsxs(s.Fragment,{children:[oe.notes&&s.jsx("div",{className:"text-sm",children:oe.notes}),oe.notes&&s.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:oe.notes})]})})}),s.jsx("td",{className:"p-2 sm:p-4",children:s.jsxs("div",{className:"flex gap-1",children:[oe.status==="scheduled"&&s.jsxs(s.Fragment,{children:[s.jsx(F,{size:"sm",variant:"outline",onClick:()=>se(oe.id,"confirmed"),children:s.jsx(Mn,{className:"h-3 w-3"})}),s.jsx(F,{size:"sm",variant:"outline",onClick:()=>se(oe.id,"cancelled"),className:"text-red-600",children:s.jsx(dm,{className:"h-3 w-3"})})]}),oe.status==="confirmed"&&s.jsx(F,{size:"sm",variant:"outline",onClick:()=>se(oe.id,"completed"),children:s.jsx(Mn,{className:"h-3 w-3"})}),s.jsx(F,{size:"sm",variant:"outline",onClick:()=>le(oe),className:"text-red-600",children:s.jsx(rn,{className:"h-3 w-3"})})]})})]},oe.id))})]})})})})]}),s.jsx(VAe,{open:l,onOpenChange:c}),s.jsx(et,{open:S,onOpenChange:C,children:s.jsxs(Qe,{className:"max-w-md",children:[s.jsx(tt,{children:s.jsx(nt,{children:"Confirmer la suppression"})}),A&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("p",{className:"text-gray-600",children:["Êtes-vous sûr de vouloir supprimer le rendez-vous pour ",s.jsx("strong",{children:X(A)})," ?"]}),s.jsx("p",{className:"text-sm text-red-600",children:"Cette action est irréversible."}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(F,{variant:"outline",onClick:()=>C(!1),children:"Annuler"}),s.jsx(F,{variant:"destructive",onClick:H,children:"Supprimer"})]})]})]})})]})}const gh=({children:e,...t})=>s.jsx("label",{className:"text-sm font-medium",...t,children:e});function YAe({open:e,onOpenChange:t,consultation:n}){const{data:r=[]}=tr(),{data:a=[]}=nr(),i=R3(),{toast:o}=it(),{settings:l}=Pt(),[c,u]=b.useState({client_id:"",animal_id:"",consultation_date:"",consultation_type:"routine",weight:"",temperature:"",symptoms:"",diagnosis:"",treatment:"",notes:"",cost:"",follow_up_date:"",follow_up_notes:"",status:"completed"}),d=a.filter(g=>g.client_id===c.client_id);b.useEffect(()=>{var g,p,v;n&&e&&u({client_id:n.client_id||"",animal_id:n.animal_id||"",consultation_date:n.consultation_date?n.consultation_date.split("T")[0]:"",consultation_type:n.consultation_type||"routine",weight:((g=n.weight)==null?void 0:g.toString())||"",temperature:((p=n.temperature)==null?void 0:p.toString())||"",symptoms:n.symptoms||"",diagnosis:n.diagnosis||"",treatment:n.treatment||"",notes:n.notes||"",cost:((v=n.cost)==null?void 0:v.toString())||"",follow_up_date:n.follow_up_date||"",follow_up_notes:n.follow_up_notes||"",status:n.status||"completed"})},[n,e]);const h=g=>{u(p=>({...p,[g.target.id]:g.target.value}))},m=(g,p)=>{u(v=>({...v,[g]:p})),g==="client_id"&&u(v=>({...v,animal_id:""}))},f=async g=>{if(g.preventDefault(),!!n){if(!c.client_id||!c.animal_id){o({title:"Erreur",description:"Veuillez sélectionner un client et un animal.",variant:"destructive"});return}try{const p={client_id:c.client_id,animal_id:c.animal_id,consultation_date:c.consultation_date+"T00:00:00.000Z",consultation_type:c.consultation_type,symptoms:c.symptoms||void 0,diagnosis:c.diagnosis||void 0,treatment:c.treatment||void 0,notes:c.notes||void 0,weight:c.weight?parseFloat(c.weight):void 0,temperature:c.temperature?parseFloat(c.temperature):void 0,cost:c.cost?parseFloat(c.cost):void 0,follow_up_date:c.follow_up_date||null,follow_up_notes:c.follow_up_notes||void 0,status:c.status};await i.mutateAsync({id:n.id,data:p}),o({title:"Consultation modifiée",description:"La consultation a été modifiée avec succès."}),t(!1)}catch(p){console.error("Error updating consultation:",p),o({title:"Erreur",description:"Une erreur est survenue lors de la modification de la consultation.",variant:"destructive"})}}};return r.find(g=>g.id===c.client_id),a.find(g=>g.id===c.animal_id),s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Qe,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(tt,{children:[s.jsx(nt,{children:"Modifier la consultation"}),s.jsx(Bt,{children:"Modifiez les informations de la consultation"})]}),s.jsxs("form",{onSubmit:f,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"client_id",children:"Client *"}),s.jsxs(we,{value:c.client_id,onValueChange:g=>m("client_id",g),children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Sélectionner un client"})}),s.jsx(be,{children:r.map(g=>s.jsxs($,{value:g.id,children:[g.first_name," ",g.last_name]},g.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"animal_id",children:"Animal *"}),s.jsxs(we,{value:c.animal_id,onValueChange:g=>m("animal_id",g),children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Sélectionner un animal"})}),s.jsx(be,{children:d.map(g=>s.jsxs($,{value:g.id,children:[g.name," (",g.species,")"]},g.id))})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"consultation_date",children:"Date de consultation *"}),s.jsx(G,{id:"consultation_date",type:"date",value:c.consultation_date,onChange:h,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"consultation_type",children:"Type de consultation"}),s.jsxs(we,{value:c.consultation_type,onValueChange:g=>m("consultation_type",g),children:[s.jsx(je,{children:s.jsx(Ne,{})}),s.jsxs(be,{children:[s.jsx($,{value:"routine",children:"Routine"}),s.jsx($,{value:"emergency",children:"Urgence"}),s.jsx($,{value:"follow-up",children:"Suivi"}),s.jsx($,{value:"vaccination",children:"Vaccination"}),s.jsx($,{value:"surgery",children:"Chirurgie"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"weight",children:"Poids (kg)"}),s.jsx(G,{id:"weight",type:"number",step:"0.1",placeholder:"Ex: 5.2",value:c.weight,onChange:h})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"temperature",children:"Température (°C)"}),s.jsx(G,{id:"temperature",type:"number",step:"0.1",placeholder:"Ex: 38.5",value:c.temperature,onChange:h})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"symptoms",children:"Symptômes"}),s.jsx(Ue,{id:"symptoms",placeholder:"Décrivez les symptômes observés...",value:c.symptoms,onChange:h,rows:3})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"diagnosis",children:"Diagnostic"}),s.jsx(Ue,{id:"diagnosis",placeholder:"Diagnostic posé...",value:c.diagnosis,onChange:h,rows:3})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"treatment",children:"Traitement"}),s.jsx(Ue,{id:"treatment",placeholder:"Traitement prescrit...",value:c.treatment,onChange:h,rows:3})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(D,{htmlFor:"cost",children:["Coût (",l.currency,")"]}),s.jsx(G,{id:"cost",type:"number",step:"0.01",placeholder:"0.00",value:c.cost,onChange:h})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"follow_up_date",children:"Date de suivi"}),s.jsx(G,{id:"follow_up_date",type:"date",value:c.follow_up_date,onChange:h})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"follow_up_notes",children:"Notes de suivi"}),s.jsx(Ue,{id:"follow_up_notes",placeholder:"Notes pour le suivi...",value:c.follow_up_notes,onChange:h,rows:2})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"notes",children:"Notes supplémentaires"}),s.jsx(Ue,{id:"notes",placeholder:"Notes supplémentaires...",value:c.notes,onChange:h,rows:2})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"status",children:"Statut"}),s.jsxs(we,{value:c.status,onValueChange:g=>m("status",g),children:[s.jsx(je,{children:s.jsx(Ne,{})}),s.jsxs(be,{children:[s.jsx($,{value:"scheduled",children:"Programmé"}),s.jsx($,{value:"in-progress",children:"En cours"}),s.jsx($,{value:"completed",children:"Terminé"}),s.jsx($,{value:"cancelled",children:"Annulé"})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(F,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsx(F,{type:"submit",disabled:i.isPending,children:i.isPending?"Modification...":"Modifier"})]})]})]})})}function dO({consultation:e}){const{settings:t}=Pt(),n=()=>{var r,a,i,o,l,c,u,d,h;try{const m=window.open("",`print_consultation_${e.id}`,"height=800,width=800");if(!m){alert("L'impression a été bloquée par le navigateur. Veuillez autoriser les popups pour ce site.");return}const f=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Consultation - ${((r=e.animal)==null?void 0:r.name)||"Animal"}</title>
          <style>
            body {
              font-family: Arial, sans-serif;
              margin: 20px;
              line-height: 1.6;
            }
            .header {
              text-align: center;
              border-bottom: 2px solid #333;
              padding-bottom: 10px;
              margin-bottom: 20px;
            }
            .clinic-info {
              text-align: center;
              color: #666;
              margin-bottom: 30px;
            }
            .consultation-info {
              display: grid;
              grid-template-columns: 1fr 1fr;
              gap: 20px;
              margin-bottom: 30px;
            }
            .info-section {
              border: 1px solid #ddd;
              padding: 15px;
              border-radius: 5px;
            }
            .info-title {
              font-weight: bold;
              color: #333;
              margin-bottom: 10px;
              font-size: 14px;
              text-transform: uppercase;
            }
            .info-content {
              color: #666;
            }
            .medical-section {
              margin-bottom: 20px;
            }
            .medical-title {
              font-weight: bold;
              color: #333;
              margin-bottom: 8px;
              border-bottom: 1px solid #eee;
              padding-bottom: 4px;
            }
            .medical-content {
              color: #666;
              margin-bottom: 15px;
            }
            .vitals {
              display: grid;
              grid-template-columns: repeat(4, 1fr);
              gap: 15px;
              margin-bottom: 20px;
            }
            .vital-item {
              text-align: center;
              padding: 10px;
              border: 1px solid #ddd;
              border-radius: 5px;
            }
            .vital-label {
              font-size: 12px;
              color: #666;
              margin-bottom: 5px;
            }
            .vital-value {
              font-size: 18px;
              font-weight: bold;
              color: #333;
            }
            .footer {
              margin-top: 40px;
              text-align: center;
              color: #666;
              font-size: 12px;
              border-top: 1px solid #ddd;
              padding-top: 20px;
            }
            @media print {
              body { 
                margin: 0; 
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
              }
              .header { page-break-after: avoid; }
              @page { size: auto; margin: 10mm; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            <h1>${t.clinicName||"Clinique Vétérinaire"}</h1>
            <div class="clinic-info">
              <p>${t.address||""}</p>
              <p>Tél: ${t.phone||""} | Email: ${t.email||""}</p>
            </div>
            <h2>Rapport de Consultation</h2>
          </div>

          <div class="consultation-info">
            <div class="info-section">
              <div class="info-title">Informations Client</div>
              <div class="info-content">
                <strong>Nom:</strong> ${((a=e.client)==null?void 0:a.first_name)||""} ${((i=e.client)==null?void 0:i.last_name)||""}<br>
                <strong>Téléphone:</strong> ${((o=e.client)==null?void 0:o.phone)||"N/A"}<br>
                <strong>Email:</strong> ${((l=e.client)==null?void 0:l.email)||"N/A"}
              </div>
            </div>
            
            <div class="info-section">
              <div class="info-title">Informations Animal</div>
              <div class="info-content">
                <strong>Nom:</strong> ${((c=e.animal)==null?void 0:c.name)||"N/A"}<br>
                <strong>Espèce:</strong> ${((u=e.animal)==null?void 0:u.species)||"N/A"}<br>
                <strong>Race:</strong> ${((d=e.animal)==null?void 0:d.breed)||"N/A"}<br>
                <strong>Âge:</strong> ${(h=e.animal)!=null&&h.birth_date?Math.floor((new Date().getTime()-new Date(e.animal.birth_date).getTime())/(365.25*24*60*60*1e3))+" ans":"N/A"}
              </div>
            </div>
          </div>

          <div class="info-section" style="margin-bottom: 20px;">
            <div class="info-title">Détails de la Consultation</div>
            <div class="info-content">
              <strong>Date:</strong> ${new Date(e.consultation_date).toLocaleDateString("fr-FR")}<br>
              <strong>Type:</strong> ${e.consultation_type||"Routine"}<br>
              <strong>Statut:</strong> ${e.status||"Terminé"}
            </div>
          </div>

          ${e.weight||e.temperature||e.heart_rate||e.respiratory_rate?`
          <div class="vitals">
            ${e.weight?`
            <div class="vital-item">
              <div class="vital-label">Poids</div>
              <div class="vital-value">${e.weight} kg</div>
            </div>
            `:""}
            ${e.temperature?`
            <div class="vital-item">
              <div class="vital-label">Température</div>
              <div class="vital-value">${e.temperature}°C</div>
            </div>
            `:""}
            ${e.heart_rate?`
            <div class="vital-item">
              <div class="vital-label">Fréquence Cardiaque</div>
              <div class="vital-value">${e.heart_rate} bpm</div>
            </div>
            `:""}
            ${e.respiratory_rate?`
            <div class="vital-item">
              <div class="vital-label">Fréquence Respiratoire</div>
              <div class="vital-value">${e.respiratory_rate}/min</div>
            </div>
            `:""}
          </div>
          `:""}

          ${e.symptoms?`
          <div class="medical-section">
            <div class="medical-title">Symptômes</div>
            <div class="medical-content">${e.symptoms}</div>
          </div>
          `:""}

          ${e.diagnosis?`
          <div class="medical-section">
            <div class="medical-title">Diagnostic</div>
            <div class="medical-content">${e.diagnosis}</div>
          </div>
          `:""}

          ${e.treatment?`
          <div class="medical-section">
            <div class="medical-title">Traitement</div>
            <div class="medical-content">${e.treatment}</div>
          </div>
          `:""}

          ${e.notes?`
          <div class="medical-section">
            <div class="medical-title">Notes</div>
            <div class="medical-content">${e.notes}</div>
          </div>
          `:""}

          ${e.follow_up_date?`
          <div class="medical-section">
            <div class="medical-title">Suivi Programmé</div>
            <div class="medical-content">
              <strong>Date:</strong> ${new Date(e.follow_up_date).toLocaleDateString("fr-FR")}<br>
              ${e.follow_up_notes?`<strong>Notes:</strong> ${e.follow_up_notes}`:""}
            </div>
          </div>
          `:""}

          ${e.cost?`
          <div class="medical-section">
            <div class="medical-title">Coût de la Consultation</div>
            <div class="medical-content">
              <strong>${e.cost} ${t.currency||"EUR"}</strong>
            </div>
          </div>
          `:""}

          <div class="footer">
            <p>Rapport généré le ${new Date().toLocaleDateString("fr-FR")} à ${new Date().toLocaleTimeString("fr-FR")}</p>
            <p>Vétérinaire: ${e.veterinarian_id||"N/A"}</p>
          </div>
        </body>
      </html>
    `;m.document.open(),m.document.write(f),m.document.close(),m.onload=function(){try{setTimeout(()=>{m.focus(),m.print(),typeof m.onafterprint=="function"?m.onafterprint=function(){try{m.close()}catch(g){console.error("Error closing print window:",g)}}:setTimeout(()=>{try{m.close()}catch(g){console.error("Error closing print window after timeout:",g)}},2e3)},500)}catch(g){console.error("Error during print process:",g),alert("Une erreur s'est produite lors de l'impression. Veuillez réessayer.")}}}catch(m){console.error("Error in print function:",m),alert("Une erreur s'est produite lors de la préparation de l'impression. Veuillez réessayer.")}};return s.jsxs(F,{size:"sm",variant:"outline",onClick:n,className:"gap-1",children:[s.jsx(Ou,{className:"h-3 w-3"}),"Imprimer"]})}const Ud=b.forwardRef(({className:e,...t},n)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:n,className:De("w-full caption-bottom text-sm",e),...t})}));Ud.displayName="Table";const Wd=b.forwardRef(({className:e,...t},n)=>s.jsx("thead",{ref:n,className:De("[&_tr]:border-b",e),...t}));Wd.displayName="TableHeader";const Hd=b.forwardRef(({className:e,...t},n)=>s.jsx("tbody",{ref:n,className:De("[&_tr:last-child]:border-0",e),...t}));Hd.displayName="TableBody";const QAe=b.forwardRef(({className:e,...t},n)=>s.jsx("tfoot",{ref:n,className:De("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));QAe.displayName="TableFooter";const ca=b.forwardRef(({className:e,...t},n)=>s.jsx("tr",{ref:n,className:De("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));ca.displayName="TableRow";const ct=b.forwardRef(({className:e,...t},n)=>s.jsx("th",{ref:n,className:De("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));ct.displayName="TableHead";const ut=b.forwardRef(({className:e,...t},n)=>s.jsx("td",{ref:n,className:De("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));ut.displayName="TableCell";const XAe=b.forwardRef(({className:e,...t},n)=>s.jsx("caption",{ref:n,className:De("mt-4 text-sm text-muted-foreground",e),...t}));XAe.displayName="TableCaption";const JAe=()=>{const{data:e=[],isLoading:t}=qo(),{data:n=[]}=Cf();$3(),R3(),VZ();const{settings:r}=Pt();it();const{currentView:a}=fc("consultations"),[i,o]=b.useState(""),[l,c]=b.useState("all"),[u,d]=b.useState(a),[h,m]=b.useState(!1),[f,g]=b.useState(!1),[p,v]=b.useState(null),[x,y]=b.useState(null),[j,w]=b.useState(!1),[N,_]=b.useState(null),[S,C]=b.useState(null),[A,T]=b.useState(!1),[E,k]=b.useState([]),[R,I]=b.useState(""),W=U=>n.filter(X=>X.consultation_id===U),V=e.filter(U=>{var se,ae,le;const X=`${((se=U.client)==null?void 0:se.first_name)||""} ${((ae=U.client)==null?void 0:ae.last_name)||""}`.trim(),ie=((le=U.animal)==null?void 0:le.name)||"",re=X.toLowerCase().includes(i.toLowerCase())||ie.toLowerCase().includes(i.toLowerCase())||U.symptoms&&U.symptoms.toLowerCase().includes(i.toLowerCase())||U.diagnosis&&U.diagnosis.toLowerCase().includes(i.toLowerCase());if(l==="all")return re;const de=new Date(U.consultation_date),ce=(new Date().getTime()-de.getTime())/(1e3*3600*24);switch(l){case"week":return re&&ce<=7;case"month":return re&&ce<=30;case"quarter":return re&&ce<=90;default:return re}}),q=U=>{v(U),g(!0)},P=U=>{_(U.animal_id),C(U.id),w(!0)},O=U=>{y({clientId:U.client_id,animalId:U.animal_id,consultation_date:new Date().toISOString(),consultation_type:"follow-up",symptoms:"",diagnosis:"",treatment:"",notes:`Suivi de la consultation du ${new Date(U.consultation_date).toLocaleDateString("fr-FR")}`,status:"scheduled"}),m(!0)},B=U=>{var ie;const X=W(U.id);k(X),I(((ie=U.animal)==null?void 0:ie.name)||"Animal inconnu"),T(!0)};return s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-4 sm:py-8 space-y-4 sm:space-y-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Consultations"}),s.jsx("p",{className:"text-muted-foreground mt-1 sm:mt-2 text-sm sm:text-base",children:"Gérez et consultez tous les dossiers médicaux"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex border rounded-lg p-1",children:[s.jsx(F,{variant:u==="cards"?"default":"ghost",size:"sm",onClick:()=>d("cards"),className:"px-3",children:s.jsx(ko,{className:"h-4 w-4"})}),s.jsx(F,{variant:u==="table"?"default":"ghost",size:"sm",onClick:()=>d("table"),className:"px-3",children:s.jsx(wi,{className:"h-4 w-4"})})]}),s.jsxs(F,{className:"gap-2 medical-glow text-sm sm:text-base",onClick:()=>m(!0),children:[s.jsx(at,{className:"h-4 w-4"}),"Nouvelle Consultation"]})]})]}),s.jsxs(Z,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2 text-base sm:text-lg",children:[s.jsx($o,{className:"h-4 sm:h-5 w-4 sm:w-5"}),"Rechercher et filtrer"]})}),s.jsx(ee,{className:"space-y-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsx(G,{placeholder:"Rechercher par client, animal, symptômes ou diagnostic...",value:i,onChange:U=>o(U.target.value),className:"max-w-full sm:max-w-md"}),s.jsxs(we,{value:l,onValueChange:c,children:[s.jsx(je,{className:"w-full sm:w-48",children:s.jsx(Ne,{placeholder:"Période"})}),s.jsxs(be,{children:[s.jsx($,{value:"all",children:"Toutes les périodes"}),s.jsx($,{value:"week",children:"Cette semaine"}),s.jsx($,{value:"month",children:"Ce mois"}),s.jsx($,{value:"quarter",children:"Ce trimestre"})]})]})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-base sm:text-lg font-semibold",children:["Consultations récentes (",V.length,")"]}),V.length===0?s.jsx(Z,{children:s.jsxs(ee,{className:"p-6 sm:p-8 text-center text-muted-foreground",children:[s.jsx(Cr,{className:"h-10 sm:h-12 w-10 sm:w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{className:"text-sm sm:text-base",children:"Aucune consultation trouvée"}),s.jsx("p",{className:"text-xs sm:text-sm",children:"Commencez par créer votre première consultation"})]})}):u==="cards"?V.map(U=>{var X,ie,re;return s.jsx(Z,{className:"card-hover",children:s.jsx(ee,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[s.jsx("h4",{className:"text-base sm:text-lg font-semibold",children:((X=U.animal)==null?void 0:X.name)||"Animal inconnu"}),s.jsx(_e,{variant:"secondary",className:"w-fit",children:"Consultation"}),s.jsx("span",{className:"text-xs sm:text-sm text-muted-foreground",children:new Date(U.consultation_date).toLocaleDateString("fr-FR")})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-6 text-xs sm:text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(hr,{className:"h-3 sm:h-4 w-3 sm:w-4"}),(ie=U.client)==null?void 0:ie.first_name," ",(re=U.client)==null?void 0:re.last_name]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Cr,{className:"h-3 w-3"}),"Consultation #",U.id]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 text-xs sm:text-sm",children:[U.temperature&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(hm,{className:"h-3 sm:h-4 w-3 sm:w-4 text-primary"}),U.temperature,"°C"]}),U.weight&&s.jsxs("span",{children:[U.weight," kg"]})]})]}),s.jsxs("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[U.symptoms&&s.jsxs(s.Fragment,{children:[s.jsx("h5",{className:"font-medium text-sm sm:text-base",children:"Symptômes:"}),s.jsx("p",{className:"text-xs sm:text-sm",children:U.symptoms})]}),U.diagnosis&&s.jsxs(s.Fragment,{children:[s.jsx("h5",{className:"font-medium text-sm sm:text-base",children:"Diagnostic:"}),s.jsx("p",{className:"text-xs sm:text-sm",children:U.diagnosis})]})]}),s.jsxs("div",{className:"space-y-2",children:[U.treatment&&s.jsxs(s.Fragment,{children:[s.jsx("h5",{className:"font-medium text-sm sm:text-base",children:"Traitement:"}),s.jsx("p",{className:"text-xs sm:text-sm",children:U.treatment})]}),(()=>{const de=W(U.id);return de.length>0&&s.jsxs(s.Fragment,{children:[s.jsxs("h5",{className:"font-medium flex items-center gap-1 text-sm sm:text-base",children:[s.jsx(ii,{className:"h-3 sm:h-4 w-3 sm:w-4"}),"Prescriptions (",de.length,"):"]}),s.jsx("div",{className:"space-y-1",children:de.map(pe=>s.jsxs("div",{className:"text-xs sm:text-sm bg-blue-50 p-2 rounded border-l-2 border-blue-200",children:[s.jsxs("div",{className:"font-medium text-blue-800",children:["Prescription #",pe.id.slice(-8)]}),s.jsxs("div",{className:"text-blue-600 text-xs",children:[new Date(pe.prescription_date).toLocaleDateString("fr-FR")," - Status: ",pe.status]}),pe.medications&&pe.medications.length>0&&s.jsxs("div",{className:"mt-1",children:[s.jsx("div",{className:"text-xs font-medium text-blue-700",children:"Médicaments:"}),pe.medications.map((ce,se)=>s.jsxs("div",{className:"text-xs text-blue-600 ml-2",children:["• ",ce.medication_name," ",ce.dosage&&`- ${ce.dosage}`," ",ce.quantity&&`(${ce.quantity})`]},se))]})]},pe.id))})]})})()]})]}),U.notes&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h5",{className:"font-medium text-sm sm:text-base",children:"Notes:"}),s.jsx("p",{className:"text-xs sm:text-sm bg-muted p-2 sm:p-3 rounded",children:U.notes})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between pt-2 border-t gap-2",children:[s.jsxs("span",{className:"text-xs sm:text-sm text-muted-foreground",children:[s.jsx(Ke,{className:"h-3 w-3 inline mr-1"}),U.followUp?`Suivi: ${U.followUp}`:"Aucun suivi prévu"]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(dO,{consultation:U}),s.jsxs(F,{size:"sm",variant:"outline",onClick:()=>q(U),className:"gap-1 text-xs sm:text-sm",children:[s.jsx($t,{className:"h-3 w-3"}),"Modifier"]}),s.jsxs(F,{size:"sm",variant:"default",onClick:()=>P(U),className:"gap-1 text-xs sm:text-sm",children:[s.jsx(ii,{className:"h-3 w-3"}),"Prescription"]}),s.jsx(F,{size:"sm",onClick:()=>O(U),className:"text-xs sm:text-sm",children:"Nouveau suivi"})]})]})]})})},U.id)}):s.jsx(Z,{children:s.jsx(ee,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Ud,{children:[s.jsx(Wd,{children:s.jsxs(ca,{children:[s.jsx(ct,{className:"text-xs sm:text-sm",children:"Animal / Client"}),s.jsx(ct,{className:"text-xs sm:text-sm",children:"Date"}),s.jsx(ct,{className:"text-xs sm:text-sm",children:"Symptômes"}),s.jsx(ct,{className:"text-xs sm:text-sm",children:"Diagnostic"}),s.jsx(ct,{className:"text-xs sm:text-sm",children:"Température"}),s.jsx(ct,{className:"text-xs sm:text-sm",children:"Prescriptions"}),s.jsx(ct,{className:"text-xs sm:text-sm",children:"Coût"}),s.jsx(ct,{className:"text-xs sm:text-sm",children:"Actions"})]})}),s.jsx(Hd,{children:V.map(U=>{var X,ie,re;return s.jsxs(ca,{children:[s.jsx(ut,{className:"text-xs sm:text-sm",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:(X=U.animal)==null?void 0:X.name}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[(ie=U.client)==null?void 0:ie.first_name," ",(re=U.client)==null?void 0:re.last_name]})]})}),s.jsx(ut,{className:"text-xs sm:text-sm",children:new Date(U.consultation_date).toLocaleDateString("fr-FR")}),s.jsx(ut,{className:"text-xs sm:text-sm",children:s.jsx("div",{className:"max-w-xs truncate",children:U.symptoms||"-"})}),s.jsx(ut,{className:"text-xs sm:text-sm",children:s.jsx("div",{className:"max-w-xs truncate",children:U.diagnosis||"-"})}),s.jsx(ut,{className:"text-xs sm:text-sm",children:U.temperature?`${U.temperature}°C`:"-"}),s.jsx(ut,{className:"text-xs sm:text-sm",children:(()=>{const de=W(U.id);return de.length>0?s.jsx("div",{className:"space-y-1",children:s.jsxs("div",{className:"flex items-center gap-2 cursor-pointer p-1 rounded transition-colors w-fit",onClick:()=>B(U),title:"Cliquer pour voir les détails des prescriptions",children:[s.jsxs(_e,{variant:"outline",className:"text-xs",children:[de.length," prescription",de.length>1?"s":""]}),s.jsx(Nn,{className:"h-3 w-3 text-blue-600 hover:text-blue-800"})]})}):s.jsx("span",{className:"text-muted-foreground text-xs",children:"Aucune"})})()}),s.jsx(ut,{className:"text-xs sm:text-sm",children:U.cost?`${U.cost} ${r.currency}`:"-"}),s.jsx(ut,{className:"text-xs sm:text-sm",children:s.jsxs("div",{className:"flex gap-1 flex-wrap",children:[s.jsx(dO,{consultation:U}),s.jsx(F,{size:"sm",variant:"outline",onClick:()=>q(U),title:"Modifier",children:s.jsx($t,{className:"h-3 w-3"})}),s.jsx(F,{size:"sm",variant:"default",onClick:()=>P(U),title:"Nouvelle Prescription",children:s.jsx(ii,{className:"h-3 w-3"})})]})})]},U.id)})})]})})})})]}),s.jsx(kd,{open:h,onOpenChange:U=>{m(U),U||y(null)},prefillData:x||void 0}),s.jsx(YAe,{open:f,onOpenChange:g,consultation:p}),N&&S&&s.jsx(o_,{open:j,onOpenChange:w,petId:N,consultationId:S}),s.jsx(et,{open:A,onOpenChange:T,children:s.jsxs(Qe,{className:"max-w-full sm:max-w-4xl max-h-[80vh] overflow-y-auto mx-4",children:[s.jsxs(tt,{children:[s.jsxs(nt,{className:"flex items-center gap-2 text-base sm:text-lg",children:[s.jsx(ii,{className:"h-4 sm:h-5 w-4 sm:w-5"}),"Prescriptions pour ",R]}),s.jsxs(Bt,{className:"text-sm",children:["Détails des ",E.length," prescription",E.length>1?"s":""," associée",E.length>1?"s":""," à cette consultation"]})]}),s.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[E.map((U,X)=>s.jsxs(Z,{className:"border-l-4 border-l-primary",children:[s.jsxs(he,{className:"pb-3",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[s.jsxs(me,{className:"text-base sm:text-lg",children:["Prescription #",U.id.slice(-8)]}),s.jsx(_e,{variant:U.status==="active"?"default":U.status==="completed"?"secondary":"destructive",className:"text-xs w-fit",children:U.status})]}),s.jsxs("div",{className:"text-xs sm:text-sm text-muted-foreground",children:["Date: ",new Date(U.prescription_date).toLocaleDateString("fr-FR")," à ",new Date(U.prescription_date).toLocaleTimeString("fr-FR"),U.valid_until&&s.jsxs("span",{className:"ml-0 sm:ml-4 block sm:inline",children:["Valide jusqu'au: ",new Date(U.valid_until).toLocaleDateString("fr-FR")]})]})]}),s.jsxs(ee,{className:"space-y-4",children:[U.diagnosis&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-sm mb-1",children:"Diagnostic:"}),s.jsx("p",{className:"text-sm bg-muted p-2 rounded",children:U.diagnosis})]}),U.medications&&U.medications.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium text-sm mb-2",children:["Médicaments (",U.medications.length,"):"]}),s.jsx("div",{className:"grid gap-3 grid-cols-1 sm:grid-cols-2",children:U.medications.map((ie,re)=>s.jsxs("div",{className:"bg-muted p-3 rounded-lg",children:[s.jsx("div",{className:"font-medium text-sm",children:ie.medication_name}),s.jsxs("div",{className:"text-xs space-y-1 mt-1",children:[ie.dosage&&s.jsxs("div",{children:["Dosage: ",ie.dosage]}),ie.frequency&&s.jsxs("div",{children:["Fréquence: ",ie.frequency]}),ie.duration&&s.jsxs("div",{children:["Durée: ",ie.duration]}),ie.quantity&&s.jsxs("div",{children:["Quantité: ",ie.quantity]}),ie.route&&s.jsxs("div",{children:["Voie: ",ie.route]})]}),ie.instructions&&s.jsxs("div",{className:"mt-2 text-xs bg-background p-2 rounded border",children:[s.jsx("span",{className:"font-medium",children:"Instructions: "}),ie.instructions]})]},re))})]}),U.notes&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-sm mb-1",children:"Notes:"}),s.jsx("p",{className:"text-sm bg-muted p-2 rounded",children:U.notes})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 text-xs text-muted-foreground pt-2 border-t",children:[s.jsxs("span",{children:["Renouvellements: ",U.refill_count||0]}),s.jsxs("span",{children:["Créée le: ",new Date(U.created_at).toLocaleDateString("fr-FR")]}),U.updated_at!==U.created_at&&s.jsxs("span",{children:["Modifiée le: ",new Date(U.updated_at).toLocaleDateString("fr-FR")]})]})]})]},U.id)),E.length===0&&s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(ii,{className:"h-10 sm:h-12 w-10 sm:w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{className:"text-sm",children:"Aucune prescription trouvée pour cette consultation"})]})]})]})})]})},ZAe=({consultation:e,open:t,onOpenChange:n,onEdit:r})=>{if(!e)return null;const{getClientById:a,getPetById:i}=bt(),o=a(e.clientId),l=i(e.petId);return s.jsx(et,{open:t,onOpenChange:n,children:s.jsxs(Qe,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(tt,{children:[s.jsxs(nt,{children:["Consultation #",e.id," - ",Da(e.date)]}),s.jsx(Bt,{children:"Détails de la consultation générale"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsx(Ke,{className:"h-5 w-5"}),s.jsx("h3",{className:"text-lg font-semibold",children:e.purpose||"Consultation générale"})]}),s.jsxs("div",{className:"flex gap-8 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ht,{className:"h-4 w-4"}),l==null?void 0:l.name," (",l==null?void 0:l.type,")"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(hr,{className:"h-4 w-4"}),o==null?void 0:o.name]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(wn,{className:"h-4 w-4"}),e.veterinarian]})]}),e.symptoms&&s.jsx(Z,{children:s.jsx(ee,{children:s.jsxs("p",{children:[s.jsx("strong",{children:"Symptômes:"})," ",e.symptoms]})})}),s.jsxs(Ti,{defaultValue:"overview",className:"space-y-4",children:[s.jsxs(qa,{className:"grid grid-cols-2",children:[s.jsx(Tt,{value:"overview",children:"Détails"}),s.jsx(Tt,{value:"prescriptions",children:"Prescriptions"})]}),s.jsx(Et,{value:"overview",children:s.jsx(Z,{children:s.jsxs(ee,{className:"space-y-2 text-sm",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Motif:"})," ",e.purpose||"Non spécifié"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Notes:"})," ",e.notes||"Aucune"]}),e.photos&&e.photos.length>0&&s.jsxs("div",{className:"pt-4",children:[s.jsx("h5",{className:"font-medium mb-2",children:"Photos de la consultation"}),s.jsx("div",{className:"flex gap-2 overflow-x-auto",children:e.photos.map((c,u)=>s.jsx("div",{className:"relative",children:s.jsx("img",{src:c,alt:`consult-photo-${u}`,className:"h-32 w-32 object-cover rounded cursor-pointer hover:opacity-80"})},u))})]})]})})}),s.jsx(Et,{value:"prescriptions",children:s.jsx(i8,{petId:e.petId,consultationId:e.id})})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[s.jsxs(F,{variant:"outline",onClick:r,children:[s.jsx($t,{className:"h-4 w-4"})," Modifier"]}),s.jsx(l8,{consultation:e})]})]})})};function eke({prescription:e}){const{settings:t}=Pt(),{logo:n,clinicName:r,address:a,phone:i,email:o,website:l,currency:c}=t,d=e.medications.map(f=>f.cost*(f.quantity||1)).reduce((f,g)=>f+g,0),h=()=>{if(!e||!e.petName||!e.clientName)return;const f=window.open("","_blank");if(!f)return;const g=m();f.document.write(g),f.document.close(),setTimeout(()=>{f.print(),f.close()},500)},m=()=>`
      <html>
        <head>
          <title>Facture Prescription - ${e.petName}</title>
          <style>
            body {
              font-family: Arial, sans-serif;
              margin: 20px;
              line-height: 1.6;
            }
            .header {
              display: flex;
              align-items: center;
              justify-content: space-between;
              margin-bottom: 30px;
              border-bottom: 2px solid #333;
              padding-bottom: 20px;
            }
            .clinic-info {
              text-align: center;
              flex: 1;
            }
            .clinic-info h1 {
              font-size: 24px;
              font-weight: bold;
              margin-bottom: 10px;
            }
            .clinic-info p {
              font-size: 14px;
              margin: 5px 0;
            }
            .invoice-section {
              margin-bottom: 30px;
            }
            .invoice-section h2 {
              font-size: 20px;
              font-weight: 600;
              margin-bottom: 15px;
            }
            .grid {
              display: grid;
              grid-template-columns: 1fr 1fr;
              gap: 30px;
              margin-bottom: 15px;
            }
            table {
              width: 100%;
              border-collapse: collapse;
              margin-bottom: 20px;
            }
            th, td {
              border: 1px solid #ddd;
              padding: 12px;
              text-align: left;
            }
            th {
              background-color: #f2f2f2;
              font-weight: bold;
            }
            .total-row {
              font-weight: bold;
              background-color: #f8f9fa;
            }
            .print-hidden {
              display: none;
            }
            @media print {
              body { margin: 0; }
              .print-hidden { display: none !important; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            ${n?`<img src="${n}" alt="Logo clinique" style="height:60px;width:60px;object-fit:contain;"/>`:'<div style="width:60px;"></div>'}
            <div class="clinic-info">
              <h1>${r}</h1>
              <p>${a}</p>
              <p>${i} | ${o}</p>
              ${l?`<p>${l}</p>`:""}
            </div>
            <div style="width:60px;"></div>
          </div>

          <div class="invoice-section">
            <h2>Ordonnance</h2>
            <div class="grid">
              <div>
                <p><strong>Date :</strong> ${e.date}</p>
                <p><strong>Patient :</strong> ${e.petName} (${e.clientName})</p>
              </div>
              <div>
                <p><strong>Prescrit par :</strong> ${e.prescribedBy}</p>
                <p><strong>Diagnostic :</strong> ${e.diagnosis}</p>
              </div>
            </div>
          </div>

          <div class="invoice-section">
            <h2>Détail des médicaments</h2>
            <table>
              <thead>
                <tr>
                  <th>Médicament</th>
                  <th>Quantité</th>
                  <th>Prix unitaire</th>
                  <th>Total</th>
                </tr>
              </thead>
              <tbody>
                ${e.medications.map(f=>{const g=f.cost*(f.quantity||1);return`
                    <tr>
                      <td>
                        <strong>${f.name}</strong><br>
                        <small>${f.dosage} - ${f.frequency}</small>
                      </td>
                      <td>${f.quantity||1}</td>
                      <td>${f.cost.toFixed(2)} ${c}</td>
                      <td>${g.toFixed(2)} ${c}</td>
                    </tr>
                  `}).join("")}
                <tr class="total-row">
                  <td colspan="3"><strong>Total</strong></td>
                  <td><strong>${d.toFixed(2)} ${c}</strong></td>
                </tr>
              </tbody>
            </table>
          </div>

          ${e.instructions?`
            <div class="invoice-section">
              <h2>Instructions</h2>
              <p>${e.instructions}</p>
            </div>
          `:""}

          <div style="margin-top: 50px; text-align: center;">
            <div style="border-top: 1px solid #333; width: 200px; margin: 20px auto;"></div>
            <p>Signature du vétérinaire</p>
          </div>
        </body>
      </html>
    `;return s.jsxs("div",{className:"p-8 max-w-screen-lg mx-auto bg-white text-gray-800",children:[s.jsxs("header",{className:"flex items-center justify-between mb-8",children:[n&&s.jsx("img",{src:n,alt:"Logo clinique",className:"h-16 w-16 object-contain"}),s.jsxs("div",{className:"text-center flex-1",children:[s.jsx("h1",{className:"text-2xl font-bold",children:r}),s.jsx("p",{className:"text-sm",children:a}),s.jsxs("p",{className:"text-sm",children:[i," | ",o]}),l&&s.jsx("p",{className:"text-sm",children:l})]}),s.jsx("div",{children:s.jsx(F,{variant:"outline",onClick:h,className:"uppercase text-sm",children:"Imprimer"})})]}),s.jsxs("section",{className:"mb-12",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Ordonnance"}),s.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-4",children:[s.jsxs("div",{children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Date :"})," ",e.date]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Patient :"})," ",e.petName," (",e.clientName,")"]})]}),s.jsxs("div",{children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Prescrit par :"})," ",e.prescribedBy]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Diagnostic :"})," ",e.diagnosis]})]})]}),s.jsxs("table",{className:"w-full border-collapse",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"border-b py-2 text-left",children:"Médicament"}),s.jsx("th",{className:"border-b py-2 text-left",children:"Dosage"}),s.jsx("th",{className:"border-b py-2 text-left",children:"Fréquence"}),s.jsx("th",{className:"border-b py-2 text-left",children:"Durée"})]})}),s.jsx("tbody",{children:e.medications.map(f=>s.jsxs("tr",{className:"border-b",children:[s.jsx("td",{className:"py-2",children:f.name}),s.jsx("td",{className:"py-2",children:f.dosage}),s.jsx("td",{className:"py-2",children:f.frequency}),s.jsx("td",{className:"py-2",children:f.duration})]},f.id))})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Facture"}),s.jsxs("table",{className:"w-full border-collapse mb-4",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"border-b py-2 text-left",children:"Produit / Service"}),s.jsx("th",{className:"border-b py-2 text-right",children:"Quantité"}),s.jsxs("th",{className:"border-b py-2 text-right",children:["Prix Unitaire (",c,")"]}),s.jsxs("th",{className:"border-b py-2 text-right",children:["Total (",c,")"]})]})}),s.jsx("tbody",{children:e.medications.map(f=>{const g=f.quantity||1,p=(f.cost||0)*g;return s.jsxs("tr",{className:"border-b",children:[s.jsx("td",{className:"py-2",children:f.name}),s.jsx("td",{className:"py-2 text-right",children:g}),s.jsx("td",{className:"py-2 text-right",children:f.cost.toFixed(2)}),s.jsx("td",{className:"py-2 text-right",children:p.toFixed(2)})]},f.id)})}),s.jsx("tfoot",{children:s.jsxs("tr",{children:[s.jsx("td",{colSpan:3,className:"py-2 text-right font-semibold",children:"Montant total :"}),s.jsx("td",{className:"py-2 text-right font-semibold",children:d.toFixed(2)})]})})]})]})]})}const tke=()=>{var V,q;const{data:e=[]}=qo(),{data:t=[]}=Cf();tr(),nr();const n=P=>{var O,B,U,X;return{id:P.id,consultationId:P.consultation_id,clientId:P.client_id,clientName:`${((O=P.client)==null?void 0:O.first_name)||""} ${((B=P.client)==null?void 0:B.last_name)||""}`.trim(),petId:P.animal_id,petName:((U=P.animal)==null?void 0:U.name)||"",date:P.prescription_date,prescribedBy:"Non spécifié",diagnosis:P.diagnosis||"",medications:((X=P.medications)==null?void 0:X.map(ie=>({id:ie.id,name:ie.medication_name,dosage:ie.dosage||"",frequency:ie.frequency||"",duration:ie.duration||"",instructions:ie.instructions||"",quantity:ie.quantity||1,unit:"unit",cost:0})))||[],instructions:P.notes||"",duration:P.valid_until||"",followUpDate:void 0,status:P.status||"active",notes:P.notes||"",createdAt:P.created_at}},[r,a]=b.useState(""),[i,o]=b.useState("all"),[l,c]=b.useState("all"),[u,d]=b.useState("all"),[h,m]=b.useState(""),[f,g]=b.useState("cards"),[p,v]=b.useState(!1),[x,y]=b.useState(null),[j,w]=b.useState(!1),[N,_]=b.useState(null),[S,C]=b.useState(!1),[A,T]=b.useState(null),E=[...e.map(P=>{var O,B,U,X,ie;return{id:P.id,date:((O=P.consultation_date)==null?void 0:O.split("T")[0])||"",petName:((B=P.animal)==null?void 0:B.name)||"",petType:((U=P.animal)==null?void 0:U.species)||"",client:`${((X=P.client)==null?void 0:X.first_name)||""} ${((ie=P.client)==null?void 0:ie.last_name)||""}`.trim(),type:"consultation",title:P.diagnosis||"Consultation",veterinarian:P.notes||"Non spécifié",details:P.symptoms||"",prescriptions:[],cost:P.cost||0,status:"completed"}})].sort((P,O)=>new Date(O.date).getTime()-new Date(P.date).getTime()),k=t.map(P=>{var O,B,U,X,ie,re,de,pe,ce,se,ae;return{id:P.id,date:((O=P.prescription_date)==null?void 0:O.split("T")[0])||"",petName:((B=P.animal)==null?void 0:B.name)||"",client:`${((U=P.client)==null?void 0:U.first_name)||""} ${((X=P.client)==null?void 0:X.last_name)||""}`.trim(),medication:((ie=P.medications)==null?void 0:ie.map(le=>le.medication_name).join(", "))||"",dosage:((de=(re=P.medications)==null?void 0:re[0])==null?void 0:de.dosage)||"",frequency:((ce=(pe=P.medications)==null?void 0:pe[0])==null?void 0:ce.frequency)||"",duration:((ae=(se=P.medications)==null?void 0:se[0])==null?void 0:ae.duration)||"",veterinarian:"Non spécifié",status:P.status}}),R=E.filter(P=>{const O=P.petName.toLowerCase().includes(r.toLowerCase())||P.client.toLowerCase().includes(r.toLowerCase())||P.title.toLowerCase().includes(r.toLowerCase()),B=i==="all"||P.petName.toLowerCase().includes(i.toLowerCase()),U=l==="all"||P.type===l;let X=!0;if(u==="today"){const ie=new Date().toISOString().split("T")[0];X=P.date===ie}else if(u==="week"){const ie=new Date(P.date),re=new Date,de=re.getDay(),pe=re.getDate()-de+(de===0?-6:1),ce=new Date(re.setDate(pe)),se=new Date(ce);se.setDate(ce.getDate()+6),X=ie>=ce&&ie<=se}else u==="specific"&&(X=h&&P.date===h);return O&&B&&U&&X}),I=k.filter(P=>{const O=P.petName.toLowerCase().includes(r.toLowerCase())||P.client.toLowerCase().includes(r.toLowerCase())||P.medication.toLowerCase().includes(r.toLowerCase()),B=i==="all"||P.petName.toLowerCase().includes(i.toLowerCase()),U=l==="all"||!0;let X=!0;if(u==="today"){const ie=new Date().toISOString().split("T")[0];X=P.date===ie}else if(u==="week"){const ie=new Date(P.date),re=new Date,de=re.getDay(),pe=re.getDate()-de+(de===0?-6:1),ce=new Date(re.setDate(pe)),se=new Date(ce);se.setDate(ce.getDate()+6),X=ie>=ce&&ie<=se}else u==="specific"&&(X=h&&P.date===h);return O&&B&&U&&X}),W={active:"bg-blue-100 text-blue-800 hover:bg-blue-200",completed:"bg-green-100 text-green-800 hover:bg-green-200",discontinued:"bg-red-100 text-red-800 hover:bg-red-200"};return s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-8 space-y-8 max-w-7xl",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Historique Médical"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Consultez l'historique complet des soins et traitements"})]}),s.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[s.jsxs(F,{size:"sm",variant:f==="cards"?"default":"outline",onClick:()=>g("cards"),className:"gap-2 flex-1 sm:flex-none",children:[s.jsx(ko,{className:"h-4 w-4"}),"Cartes"]}),s.jsxs(F,{size:"sm",variant:f==="table"?"default":"outline",onClick:()=>g("table"),className:"gap-2 flex-1 sm:flex-none",children:[s.jsx(wi,{className:"h-4 w-4"}),"Tableau"]})]})]}),s.jsxs(Z,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx($o,{className:"h-5 w-5"}),"Rechercher"]})}),s.jsxs(ee,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(G,{placeholder:"Rechercher par nom, animal, diagnostic...",value:r,onChange:P=>a(P.target.value)}),s.jsxs(we,{value:i,onValueChange:o,children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Filtrer par animal"})}),s.jsxs(be,{children:[s.jsx($,{value:"all",children:"Tous les animaux"}),Array.from(new Set(E.map(P=>P.petName))).map(P=>s.jsx($,{value:P,children:P},P))]})]}),s.jsxs(we,{value:l,onValueChange:c,children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Filtrer par type"})}),s.jsxs(be,{children:[s.jsx($,{value:"all",children:"Tous types"}),s.jsx($,{value:"consultation",children:"Consultations"}),s.jsx($,{value:"treatment",children:"Traitements"}),s.jsx($,{value:"surgery",children:"Chirurgies"})]})]}),s.jsxs(we,{value:u,onValueChange:d,children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Période"})}),s.jsxs(be,{children:[s.jsx($,{value:"all",children:"Toute période"}),s.jsx($,{value:"today",children:"Aujourd'hui"}),s.jsx($,{value:"week",children:"Cette semaine"}),s.jsx($,{value:"specific",children:"Date spécifique"})]})]})]}),u==="specific"&&s.jsx(G,{type:"date",value:h,onChange:P=>m(P.target.value),className:"max-w-xs"})]})]}),s.jsxs(Ti,{defaultValue:"medical",className:"space-y-4",children:[s.jsxs(qa,{className:"grid w-full grid-cols-2",children:[s.jsxs(Tt,{value:"medical",className:"gap-2",children:[s.jsx(Ke,{className:"h-4 w-4"}),"Historique Médical"]}),s.jsxs(Tt,{value:"prescriptions",className:"gap-2",children:[s.jsx(ht,{className:"h-4 w-4"}),"Prescriptions"]})]}),s.jsxs(Et,{value:"medical",className:"space-y-4",children:[s.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:s.jsxs("h3",{className:"text-lg font-semibold",children:["Historique des consultations (",R.length," entrées)"]})}),f==="cards"?s.jsx("div",{className:"grid gap-6",children:R.map(P=>s.jsx(Z,{className:"card-hover",children:s.jsx(ee,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row items-start justify-between gap-4",children:[s.jsxs("div",{className:"space-y-3 flex-1",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ke,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium text-sm sm:text-base",children:new Date(P.date).toLocaleDateString("fr-FR")})]}),s.jsx(_e,{variant:"outline",className:"text-xs",children:P.type})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-semibold",children:P.title}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 text-sm text-muted-foreground mt-1",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ht,{className:"h-3 w-3"}),P.petName]}),s.jsxs("span",{children:["Client: ",P.client]}),s.jsxs("span",{children:["Vétérinaire: ",P.veterinarian]})]})]}),P.details&&s.jsx("p",{className:"text-sm text-muted-foreground",children:P.details}),P.cost&&s.jsx("div",{className:"text-sm",children:s.jsxs("span",{className:"font-medium",children:["Coût: ",P.cost," MAD"]})})]}),s.jsx("div",{className:"flex gap-2 w-full sm:w-auto justify-end",children:s.jsx(F,{size:"sm",variant:"outline",className:"flex-1 sm:flex-none",onClick:()=>{const O=e.find(B=>B.id===P.id);O&&y({...O,petId:O.animal_id,clientId:O.client_id}),v(!0)},children:s.jsx(Nn,{className:"h-4 w-4"})})})]})})},P.id))}):s.jsx(Z,{children:s.jsx(ee,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full min-w-[600px]",children:[s.jsx("thead",{className:"border-b",children:s.jsxs("tr",{className:"text-left",children:[s.jsx("th",{className:"p-4 font-medium",children:"Date"}),s.jsx("th",{className:"p-4 font-medium",children:"Type"}),s.jsx("th",{className:"p-4 font-medium",children:"Titre"}),s.jsx("th",{className:"p-4 font-medium",children:"Animal"}),s.jsx("th",{className:"p-4 font-medium",children:"Client"}),s.jsx("th",{className:"p-4 font-medium",children:"Vétérinaire"}),s.jsx("th",{className:"p-4 font-medium",children:"Actions"})]})}),s.jsx("tbody",{children:R.map(P=>s.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[s.jsx("td",{className:"p-4",children:new Date(P.date).toLocaleDateString("fr-FR")}),s.jsx("td",{className:"p-4",children:s.jsx(_e,{variant:"outline",className:"text-xs",children:P.type})}),s.jsxs("td",{className:"p-4",children:[s.jsx("div",{className:"font-medium",children:P.title}),P.details&&s.jsx("div",{className:"text-sm text-muted-foreground",children:P.details})]}),s.jsx("td",{className:"p-4",children:P.petName}),s.jsx("td",{className:"p-4",children:P.client}),s.jsx("td",{className:"p-4",children:P.veterinarian}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.jsx(F,{size:"sm",variant:"outline",onClick:()=>{const O=e.find(B=>B.id===P.id);O&&y({...O,petId:O.animal_id,clientId:O.client_id}),v(!0)},children:s.jsx(Nn,{className:"h-4 w-4"})}),s.jsx(F,{size:"sm",variant:"outline",children:s.jsx($t,{className:"h-4 w-4"})})]})})]},P.id))})]})})})})]}),s.jsxs(Et,{value:"prescriptions",className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("h3",{className:"text-lg font-semibold",children:["Historique des prescriptions (",I.length," entrées)"]}),s.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[s.jsxs(F,{size:"sm",variant:f==="cards"?"default":"outline",onClick:()=>g("cards"),className:"gap-2 flex-1 sm:flex-none",children:[s.jsx(ko,{className:"h-4 w-4"}),"Cartes"]}),s.jsxs(F,{size:"sm",variant:f==="table"?"default":"outline",onClick:()=>g("table"),className:"gap-2 flex-1 sm:flex-none",children:[s.jsx(wi,{className:"h-4 w-4"}),"Tableau"]})]})]}),f==="cards"?s.jsx("div",{className:"grid gap-6",children:I.map(P=>s.jsx(Z,{className:"card-hover",children:s.jsx(ee,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row items-start justify-between gap-4",children:[s.jsxs("div",{className:"space-y-3 flex-1",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ke,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium text-sm sm:text-base",children:new Date(P.date).toLocaleDateString("fr-FR")})]}),s.jsx(_e,{variant:"outline",className:W[P.status],children:P.status==="active"?"Actif":P.status==="completed"?"Terminé":"Arrêté"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-semibold",children:P.medication}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 text-sm text-muted-foreground mt-1",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ht,{className:"h-3 w-3"}),P.petName]}),s.jsxs("span",{children:["Client: ",P.client]}),s.jsxs("span",{children:["Prescrit par: ",P.veterinarian]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Dosage:"})," ",P.dosage]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Fréquence:"})," ",P.frequency]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Durée:"})," ",P.duration]})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 w-full sm:w-auto justify-end",children:[s.jsx(F,{size:"sm",variant:"outline",className:"flex-1 sm:flex-none",onClick:()=>{_(P),w(!0)},children:"Renouveler"}),(()=>{const O=t.find(B=>B.id===P.id);return O?s.jsx(WN,{prescription:n(O)}):s.jsx(F,{size:"sm",variant:"outline",disabled:!0,className:"flex-1 sm:flex-none",children:"Prescription indisponible"})})(),s.jsx(F,{size:"sm",variant:"outline",className:"flex-1 sm:flex-none",onClick:()=>{const O=t.find(B=>B.id===P.id);O&&(T(n(O)),C(!0))},children:"Facture"})]})]})})},P.id))}):s.jsx(Z,{children:s.jsx(ee,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full min-w-[600px]",children:[s.jsx("thead",{className:"border-b",children:s.jsxs("tr",{className:"text-left",children:[s.jsx("th",{className:"p-4 font-medium",children:"Date"}),s.jsx("th",{className:"p-4 font-medium",children:"Statut"}),s.jsx("th",{className:"p-4 font-medium",children:"Médicament"}),s.jsx("th",{className:"p-4 font-medium",children:"Animal"}),s.jsx("th",{className:"p-4 font-medium",children:"Client"}),s.jsx("th",{className:"p-4 font-medium",children:"Dosage"}),s.jsx("th",{className:"p-4 font-medium",children:"Durée"}),s.jsx("th",{className:"p-4 font-medium",children:"Actions"})]})}),s.jsx("tbody",{children:I.map(P=>s.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[s.jsx("td",{className:"p-4",children:new Date(P.date).toLocaleDateString("fr-FR")}),s.jsx("td",{className:"p-4",children:s.jsx(_e,{variant:"outline",className:W[P.status],children:P.status==="active"?"Actif":P.status==="completed"?"Terminé":"Arrêté"})}),s.jsxs("td",{className:"p-4",children:[s.jsx("div",{className:"font-medium",children:P.medication}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Prescrit par: ",P.veterinarian]})]}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ht,{className:"h-4 w-4 text-primary"}),P.petName]})}),s.jsx("td",{className:"p-4",children:P.client}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{children:P.dosage}),s.jsx("div",{className:"text-muted-foreground",children:P.frequency})]})}),s.jsx("td",{className:"p-4",children:P.duration}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.jsx(F,{size:"sm",variant:"outline",onClick:()=>{_(P),w(!0)},children:"Renouveler"}),s.jsx(WN,{prescription:n(t.find(O=>O.id===P.id))}),s.jsx(F,{size:"sm",variant:"outline",onClick:()=>{const O=t.find(B=>B.id===P.id);T(n(O)),C(!0)},children:"Facture"})]})})]},P.id))})]})})})})]})]}),s.jsx(ZAe,{consultation:x,open:p,onOpenChange:v,onEdit:()=>{}}),(N==null?void 0:N.id)&&s.jsx(o_,{open:j,onOpenChange:w,petId:((q=(V=t.find(P=>P.id===(N==null?void 0:N.id)))==null?void 0:V.animal_id)==null?void 0:q.toString())||"",consultationId:N.id.toString()}),s.jsx(et,{open:S,onOpenChange:C,children:s.jsx(Qe,{children:A&&s.jsx(eke,{prescription:A})})})]})},k8=({photos:e,onPhotosChange:t,farmName:n})=>{const{toast:r}=it(),a=b.useRef(null),[i,o]=b.useState(!1),[l,c]=b.useState(!1),[u,d]=b.useState(null),[h,m]=b.useState({description:"",category:"general"}),f=w=>{const N=w.target.files;if(!N||N.length===0)return;const _=Array.from(N).map(S=>{const C=new FileReader,A={id:`photo_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,url:"",description:h.description||`Photo de ${n}`,category:h.category,uploadedAt:new Date().toISOString()};return C.onload=T=>{var k;A.url=(k=T.target)==null?void 0:k.result;const E=[...e,A];t(E)},C.readAsDataURL(S),A});m({description:"",category:"general"}),o(!1),r({title:"Photos ajoutées",description:`${_.length} photo(s) ajoutée(s) à l'exploitation ${n}`})},g=w=>{const N=e.filter(_=>_.id!==w);t(N),r({title:"Photo supprimée",description:"La photo a été supprimée avec succès"})},p=w=>{d(w),m({description:w.description,category:w.category}),c(!0)},v=()=>{if(!u)return;const w=e.map(N=>N.id===u.id?{...N,...h}:N);t(w),c(!1),d(null),m({description:"",category:"general"}),r({title:"Photo modifiée",description:"La photo a été modifiée avec succès"})},x=w=>({cheptel:"Cheptel",batiments:"Bâtiments",equipements:"Équipements",general:"Général"})[w],y=w=>({cheptel:"bg-blue-100 text-blue-800",batiments:"bg-green-100 text-green-800",equipements:"bg-orange-100 text-orange-800",general:"bg-gray-100 text-gray-800"})[w],j=e.reduce((w,N)=>(w[N.category]||(w[N.category]=[]),w[N.category].push(N),w),{});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Photos de l'exploitation"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Gérez les photos de votre exploitation, du cheptel et des équipements"})]}),s.jsxs(et,{open:i,onOpenChange:o,children:[s.jsx(Vx,{asChild:!0,children:s.jsxs(F,{className:"gap-2",children:[s.jsx(at,{className:"h-4 w-4"}),"Ajouter des photos"]})}),s.jsxs(Qe,{className:"max-w-md",children:[s.jsx(tt,{children:s.jsx(nt,{children:"Ajouter des photos"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(D,{htmlFor:"photo-description",children:"Description"}),s.jsx(G,{id:"photo-description",placeholder:"Description des photos",value:h.description,onChange:w=>m({...h,description:w.target.value})})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"photo-category",children:"Catégorie"}),s.jsxs(we,{value:h.category,onValueChange:w=>m({...h,category:w}),children:[s.jsx(je,{children:s.jsx(Ne,{})}),s.jsxs(be,{children:[s.jsx($,{value:"cheptel",children:"Cheptel"}),s.jsx($,{value:"batiments",children:"Bâtiments"}),s.jsx($,{value:"equipements",children:"Équipements"}),s.jsx($,{value:"general",children:"Général"})]})]})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"photo-files",children:"Sélectionner des photos"}),s.jsx(G,{id:"photo-files",type:"file",multiple:!0,accept:"image/*",ref:a,onChange:f,className:"cursor-pointer"})]})]})]})]})]}),e.length===0?s.jsx(Z,{children:s.jsxs(ee,{className:"p-8 text-center",children:[s.jsx(vf,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucune photo ajoutée"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Commencez par ajouter des photos de votre exploitation"})]})}):s.jsx("div",{className:"space-y-6",children:Object.entries(j).map(([w,N])=>s.jsxs(Z,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(_e,{className:y(w),children:x(w)}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",N.length," photo",N.length>1?"s":"",")"]})]})}),s.jsx(ee,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:N.map(_=>s.jsxs("div",{className:"group relative",children:[s.jsxs("div",{className:"aspect-square rounded-lg overflow-hidden border bg-muted",children:[s.jsx("img",{src:_.url,alt:_.description,className:"w-full h-full object-cover"}),s.jsxs("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[s.jsx(F,{size:"sm",variant:"secondary",onClick:()=>d(_),children:s.jsx(Nn,{className:"h-4 w-4"})}),s.jsx(F,{size:"sm",variant:"secondary",onClick:()=>p(_),children:s.jsx($t,{className:"h-4 w-4"})}),s.jsx(F,{size:"sm",variant:"destructive",onClick:()=>g(_.id),children:s.jsx(rn,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-sm font-medium truncate",children:_.description}),s.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(_.uploadedAt).toLocaleDateString()})]})]},_.id))})})]},w))}),s.jsx(et,{open:l,onOpenChange:c,children:s.jsxs(Qe,{className:"max-w-md",children:[s.jsx(tt,{children:s.jsx(nt,{children:"Modifier la photo"})}),s.jsxs("div",{className:"space-y-4",children:[u&&s.jsx("div",{className:"aspect-square rounded-lg overflow-hidden border",children:s.jsx("img",{src:u.url,alt:u.description,className:"w-full h-full object-cover"})}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"edit-description",children:"Description"}),s.jsx(G,{id:"edit-description",value:h.description,onChange:w=>m({...h,description:w.target.value})})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"edit-category",children:"Catégorie"}),s.jsxs(we,{value:h.category,onValueChange:w=>m({...h,category:w}),children:[s.jsx(je,{children:s.jsx(Ne,{})}),s.jsxs(be,{children:[s.jsx($,{value:"cheptel",children:"Cheptel"}),s.jsx($,{value:"batiments",children:"Bâtiments"}),s.jsx($,{value:"equipements",children:"Équipements"}),s.jsx($,{value:"general",children:"Général"})]})]})]}),s.jsxs("div",{className:"flex gap-2 justify-end",children:[s.jsx(F,{variant:"outline",onClick:()=>c(!1),children:"Annuler"}),s.jsx(F,{onClick:v,children:"Enregistrer"})]})]})]})})]})},nke=({open:e,onOpenChange:t})=>{var x,y,j,w,N,_;const{addFarm:n}=bt(),{settings:r}=Pt(),{toast:a}=it(),[i,o]=b.useState({name:"",owner:"",ownerIdNumber:"",address:"",coordinates:{latitude:0,longitude:0},phone:"",email:"",types:[],totalAnimals:0,animalDetails:[],veterinarian:"",notes:"",status:"active",registrationNumber:"",surfaceArea:0,buildingDetails:"",equipmentDetails:"",certifications:[],insuranceDetails:"",emergencyContact:{name:"",phone:"",relation:""},photos:[]}),[l,c]=b.useState({category:"",maleCount:0,femaleCount:0,breeds:[],ageGroups:[]});if(!r.farmManagement)return console.error("farmManagement settings not found, using defaults"),s.jsx(et,{open:e,onOpenChange:t,children:s.jsx(Qe,{children:s.jsxs(tt,{children:[s.jsx(nt,{children:"Erreur de configuration"}),s.jsx(Bt,{children:"Les paramètres de gestion des fermes ne sont pas configurés. Veuillez recharger la page ou vérifier les paramètres."})]})})});b.useEffect(()=>{e||(o({name:"",owner:"",ownerIdNumber:"",address:"",coordinates:{latitude:0,longitude:0},phone:"",email:"",types:[],totalAnimals:0,animalDetails:[],veterinarian:"",notes:"",status:"active",registrationNumber:"",surfaceArea:0,buildingDetails:"",equipmentDetails:"",certifications:[],insuranceDetails:"",emergencyContact:{name:"",phone:"",relation:""},photos:[]}),c({category:"",maleCount:0,femaleCount:0,breeds:[],ageGroups:[]}))},[e]);const u=(S,C)=>{if(S.includes(".")){const[A,T]=S.split(".");o(E=>{const k=E[A];return{...E,[A]:{...k,[T]:C}}})}else o(A=>({...A,[S]:C}))},d=S=>{o(C=>{var A;return{...C,types:(A=C.types)!=null&&A.includes(S)?C.types.filter(T=>T!==S):[...C.types||[],S]}})},h=S=>{o(C=>{var A;return{...C,certifications:(A=C.certifications)!=null&&A.includes(S)?C.certifications.filter(T=>T!==S):[...C.certifications||[],S]}})},m=()=>{if(!l.category){a({title:"Erreur",description:"Veuillez sélectionner une catégorie d'animal",variant:"destructive"});return}o(S=>({...S,animalDetails:[...S.animalDetails||[],{...l}]})),c({category:"",maleCount:0,femaleCount:0,breeds:[],ageGroups:[]})},f=S=>{o(C=>{var A;return{...C,animalDetails:((A=C.animalDetails)==null?void 0:A.filter((T,E)=>E!==S))||[]}})},g=S=>{c(C=>({...C,breeds:[...C.breeds,S]}))},p=S=>{c(C=>({...C,breeds:C.breeds.filter(A=>A!==S)}))},v=S=>{var A;if(S.preventDefault(),!i.name||!i.owner||!i.address||!((A=i.types)!=null&&A.length)){a({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires",variant:"destructive"});return}const C={name:i.name,owner:i.owner,ownerIdNumber:i.ownerIdNumber||"",address:i.address,coordinates:i.coordinates||{latitude:0,longitude:0},phone:i.phone||"",email:i.email||"",types:i.types||[],totalAnimals:(i.animalDetails||[]).reduce((T,E)=>T+E.maleCount+E.femaleCount,0),animalDetails:i.animalDetails||[],lastVisit:new Date().toISOString().split("T")[0],status:i.status||"active",veterinarian:i.veterinarian||"",notes:i.notes||"",registrationNumber:i.registrationNumber||"",surfaceArea:i.surfaceArea||0,buildingDetails:i.buildingDetails||"",equipmentDetails:i.equipmentDetails||"",certifications:i.certifications||[],insuranceDetails:i.insuranceDetails||"",emergencyContact:i.emergencyContact||{name:"",phone:"",relation:""}};n(C),a({title:"Succès",description:"Nouvelle exploitation créée avec succès"}),t(!1)};return s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Qe,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(tt,{children:[s.jsx(nt,{children:"Nouvelle Exploitation Agricole"}),s.jsx(Bt,{children:"Créez une nouvelle exploitation agricole avec toutes les informations détaillées"})]}),s.jsxs("form",{onSubmit:v,className:"space-y-6",children:[s.jsxs(Z,{children:[s.jsx(he,{children:s.jsx(me,{children:"Informations générales"})}),s.jsxs(ee,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(D,{htmlFor:"name",children:"Nom de l'exploitation *"}),s.jsx(G,{id:"name",value:i.name||"",onChange:S=>u("name",S.target.value),placeholder:"Nom de l'exploitation"})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"owner",children:"Propriétaire *"}),s.jsx(G,{id:"owner",value:i.owner||"",onChange:S=>u("owner",S.target.value),placeholder:"Nom du propriétaire"})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"ownerIdNumber",children:"N° pièce d'identité du propriétaire"}),s.jsx(G,{id:"ownerIdNumber",value:i.ownerIdNumber||"",onChange:S=>u("ownerIdNumber",S.target.value),placeholder:"Numéro de carte d'identité, passeport, etc."})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(D,{htmlFor:"address",children:"Adresse *"}),s.jsx(G,{id:"address",value:i.address||"",onChange:S=>u("address",S.target.value),placeholder:"Adresse complète"})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"latitude",children:"Latitude"}),s.jsx(G,{id:"latitude",type:"number",step:"0.0001",value:((x=i.coordinates)==null?void 0:x.latitude)||"",onChange:S=>u("coordinates.latitude",parseFloat(S.target.value)||0),placeholder:"47.9056"})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"longitude",children:"Longitude"}),s.jsx(G,{id:"longitude",type:"number",step:"0.0001",value:((y=i.coordinates)==null?void 0:y.longitude)||"",onChange:S=>u("coordinates.longitude",parseFloat(S.target.value)||0),placeholder:"1.9190"})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"phone",children:"Téléphone"}),s.jsx(G,{id:"phone",value:i.phone||"",onChange:S=>u("phone",S.target.value),placeholder:"Téléphone"})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"email",children:"Email"}),s.jsx(G,{id:"email",type:"email",value:i.email||"",onChange:S=>u("email",S.target.value),placeholder:"Email"})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"veterinarian",children:"Vétérinaire responsable"}),s.jsx(G,{id:"veterinarian",value:i.veterinarian||"",onChange:S=>u("veterinarian",S.target.value),placeholder:"Vétérinaire"})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"status",children:"Statut"}),s.jsxs(we,{value:i.status,onValueChange:S=>u("status",S),children:[s.jsx(je,{children:s.jsx(Ne,{})}),s.jsxs(be,{children:[s.jsx($,{value:"active",children:"Active"}),s.jsx($,{value:"attention",children:"Attention"}),s.jsx($,{value:"urgent",children:"Urgent"})]})]})]})]})]}),s.jsxs(Z,{children:[s.jsx(he,{children:s.jsx(me,{children:"Types d'élevage *"})}),s.jsx(ee,{children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:r.farmManagement.farmTypes.map(S=>{var C;return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(mi,{id:`type-${S}`,checked:((C=i.types)==null?void 0:C.includes(S))||!1,onCheckedChange:()=>d(S)}),s.jsx(D,{htmlFor:`type-${S}`,children:S})]},S)})})})]}),s.jsxs(Z,{children:[s.jsx(he,{children:s.jsx(me,{children:"Détails du cheptel"})}),s.jsxs(ee,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx(D,{children:"Catégorie"}),s.jsxs(we,{value:l.category,onValueChange:S=>c(C=>({...C,category:S})),children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Sélectionner"})}),s.jsx(be,{children:r.farmManagement.animalCategories.map(S=>s.jsx($,{value:S,children:S},S))})]})]}),s.jsxs("div",{children:[s.jsx(D,{children:"Mâles"}),s.jsx(G,{type:"number",value:l.maleCount,onChange:S=>c(C=>({...C,maleCount:parseInt(S.target.value)||0})),placeholder:"0"})]}),s.jsxs("div",{children:[s.jsx(D,{children:"Femelles"}),s.jsx(G,{type:"number",value:l.femaleCount,onChange:S=>c(C=>({...C,femaleCount:parseInt(S.target.value)||0})),placeholder:"0"})]}),s.jsx("div",{className:"flex items-end",children:s.jsx(F,{type:"button",onClick:m,className:"w-full",children:"Ajouter"})})]}),l.category&&s.jsxs("div",{className:"p-4 border rounded-lg",children:[s.jsxs(D,{children:["Races pour ",l.category]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mt-2",children:(j=r.farmManagement.breedsByCategory[l.category])==null?void 0:j.map(S=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(mi,{id:`breed-${S}`,checked:l.breeds.includes(S),onCheckedChange:()=>{l.breeds.includes(S)?p(S):g(S)}}),s.jsx(D,{htmlFor:`breed-${S}`,children:S})]},S))})]}),i.animalDetails&&i.animalDetails.length>0&&s.jsxs("div",{className:"p-4 border rounded-lg",children:[s.jsx(D,{children:"Cheptel configuré"}),s.jsx("div",{className:"mt-2 space-y-2",children:i.animalDetails.map((S,C)=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[s.jsxs("span",{children:[s.jsx(_e,{variant:"secondary",children:S.category}),s.jsxs("span",{className:"ml-2",children:[S.maleCount," mâles, ",S.femaleCount," femelles"]}),S.breeds.length>0&&s.jsxs("span",{className:"ml-2 text-sm text-gray-600",children:["Races: ",S.breeds.join(", ")]})]}),s.jsx(F,{type:"button",variant:"outline",size:"sm",onClick:()=>f(C),children:"Supprimer"})]},C))})]})]})]}),s.jsxs(Z,{children:[s.jsx(he,{children:s.jsx(me,{children:"Informations administratives"})}),s.jsxs(ee,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(D,{htmlFor:"registrationNumber",children:"Numéro d'immatriculation"}),s.jsx(G,{id:"registrationNumber",value:i.registrationNumber||"",onChange:S=>u("registrationNumber",S.target.value),placeholder:"Numéro d'immatriculation"})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"surfaceArea",children:"Surface (hectares)"}),s.jsx(G,{id:"surfaceArea",type:"number",step:"0.1",value:i.surfaceArea||"",onChange:S=>u("surfaceArea",parseFloat(S.target.value)||0),placeholder:"Surface en hectares"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(D,{htmlFor:"buildingDetails",children:"Détails des bâtiments"}),s.jsx(Ue,{id:"buildingDetails",value:i.buildingDetails||"",onChange:S=>u("buildingDetails",S.target.value),placeholder:"Description des bâtiments, étables, etc."})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(D,{htmlFor:"equipmentDetails",children:"Équipements"}),s.jsx(Ue,{id:"equipmentDetails",value:i.equipmentDetails||"",onChange:S=>u("equipmentDetails",S.target.value),placeholder:"Liste des équipements disponibles"})]})]})]}),s.jsxs(Z,{children:[s.jsx(he,{children:s.jsx(me,{children:"Certifications"})}),s.jsx(ee,{children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:r.farmManagement.certificationTypes.map(S=>{var C;return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(mi,{id:`cert-${S}`,checked:((C=i.certifications)==null?void 0:C.includes(S))||!1,onCheckedChange:()=>h(S)}),s.jsx(D,{htmlFor:`cert-${S}`,children:S})]},S)})})})]}),s.jsxs(Z,{children:[s.jsx(he,{children:s.jsx(me,{children:"Assurance et contact d'urgence"})}),s.jsxs(ee,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(D,{htmlFor:"insuranceDetails",children:"Détails de l'assurance"}),s.jsx(G,{id:"insuranceDetails",value:i.insuranceDetails||"",onChange:S=>u("insuranceDetails",S.target.value),placeholder:"Compagnie d'assurance et numéro de police"})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"emergencyName",children:"Nom du contact d'urgence"}),s.jsx(G,{id:"emergencyName",value:((w=i.emergencyContact)==null?void 0:w.name)||"",onChange:S=>u("emergencyContact.name",S.target.value),placeholder:"Nom du contact"})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"emergencyPhone",children:"Téléphone d'urgence"}),s.jsx(G,{id:"emergencyPhone",value:((N=i.emergencyContact)==null?void 0:N.phone)||"",onChange:S=>u("emergencyContact.phone",S.target.value),placeholder:"Téléphone"})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"emergencyRelation",children:"Relation"}),s.jsx(G,{id:"emergencyRelation",value:((_=i.emergencyContact)==null?void 0:_.relation)||"",onChange:S=>u("emergencyContact.relation",S.target.value),placeholder:"Relation (époux, fils, etc.)"})]})]})]}),s.jsxs(Z,{children:[s.jsx(he,{children:s.jsx(me,{children:"Photos de l'exploitation"})}),s.jsx(ee,{children:s.jsx(k8,{photos:i.photos||[],onPhotosChange:S=>u("photos",S),farmName:i.name||"Nouvelle exploitation"})})]}),s.jsxs(Z,{children:[s.jsx(he,{children:s.jsx(me,{children:"Notes complémentaires"})}),s.jsx(ee,{children:s.jsx(Ue,{value:i.notes||"",onChange:S=>u("notes",S.target.value),placeholder:"Notes additionnelles sur l'exploitation...",rows:3})})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(F,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsx(F,{type:"submit",children:"Créer l'exploitation"})]})]})]})})},rke=({open:e,onOpenChange:t,farmId:n,farmName:r})=>{const{addFarmIntervention:a,farms:i}=bt(),{toast:o}=it(),[l,c]=b.useState({farmId:"",farmName:"",date:"",type:"",animals:"",veterinarian:"",description:"",status:"scheduled",followUp:"",cost:"",notes:""});b.useEffect(()=>{if(e){const m=new Date().toISOString().split("T")[0];c({farmId:(n==null?void 0:n.toString())||"",farmName:r||"",date:m,type:"",animals:"",veterinarian:"",description:"",status:"scheduled",followUp:"",cost:"",notes:""})}},[e,n,r]);const u=(m,f)=>{c(g=>({...g,[m]:f}))},{settings:d}=Pt(),h=m=>{if(m.preventDefault(),!l.farmId||!l.date||!l.type||!l.description){o({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires",variant:"destructive"});return}const f=i.find(p=>p.id===parseInt(l.farmId));if(!f){o({title:"Erreur",description:"Exploitation non trouvée",variant:"destructive"});return}const g={farmId:parseInt(l.farmId),farmName:f.name,date:l.date,type:l.type,animals:l.animals,veterinarian:l.veterinarian,description:l.description,status:l.status,followUp:l.followUp,cost:l.cost?parseFloat(l.cost):void 0,notes:l.notes};a(g),o({title:"Succès",description:"Intervention programmée avec succès"}),t(!1)};return s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Qe,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(tt,{children:[s.jsx(nt,{children:"Nouvelle Intervention"}),s.jsx(Bt,{children:"Programmez une nouvelle intervention vétérinaire"})]}),s.jsxs("form",{onSubmit:h,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"farmId",children:"Exploitation *"}),s.jsxs(we,{value:l.farmId,onValueChange:m=>{const f=i.find(g=>g.id===parseInt(m));u("farmId",m),u("farmName",(f==null?void 0:f.name)||"")},children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Sélectionner une exploitation"})}),s.jsx(be,{children:i.map(m=>s.jsx($,{value:m.id.toString(),children:m.name},m.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"date",children:"Date *"}),s.jsx(G,{id:"date",type:"date",value:l.date,onChange:m=>u("date",m.target.value),required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"type",children:"Type d'intervention *"}),s.jsxs(we,{value:l.type,onValueChange:m=>u("type",m),children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Sélectionner un type"})}),s.jsxs(be,{children:[s.jsx($,{value:"vaccination",children:"Vaccination"}),s.jsx($,{value:"controle",children:"Contrôle sanitaire"}),s.jsx($,{value:"urgence",children:"Urgence"}),s.jsx($,{value:"chirurgie",children:"Chirurgie"}),s.jsx($,{value:"prevention",children:"Prévention"}),s.jsx($,{value:"consultation",children:"Consultation"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"status",children:"Statut"}),s.jsxs(we,{value:l.status,onValueChange:m=>u("status",m),children:[s.jsx(je,{children:s.jsx(Ne,{})}),s.jsxs(be,{children:[s.jsx($,{value:"scheduled",children:"Programmée"}),s.jsx($,{value:"ongoing",children:"En cours"}),s.jsx($,{value:"completed",children:"Terminée"}),s.jsx($,{value:"cancelled",children:"Annulée"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"animals",children:"Animaux concernés"}),s.jsx(G,{id:"animals",value:l.animals,onChange:m=>u("animals",m.target.value),placeholder:"15 bovins, 50 poules..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"veterinarian",children:"Vétérinaire"}),s.jsx(G,{id:"veterinarian",value:l.veterinarian,onChange:m=>u("veterinarian",m.target.value),placeholder:"Dr. Dupont"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"description",children:"Description *"}),s.jsx(Ue,{id:"description",value:l.description,onChange:m=>u("description",m.target.value),placeholder:"Détails de l'intervention...",rows:3,required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(D,{htmlFor:"cost",children:["Coût (",d.currency,")"]}),s.jsx(G,{id:"cost",type:"number",value:l.cost,onChange:m=>u("cost",m.target.value),placeholder:"0.00",min:"0",step:"0.01"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"followUp",children:"Suivi"}),s.jsx(G,{id:"followUp",value:l.followUp,onChange:m=>u("followUp",m.target.value),placeholder:"Contrôle dans 6 mois"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"notes",children:"Notes"}),s.jsx(Ue,{id:"notes",value:l.notes,onChange:m=>u("notes",m.target.value),placeholder:"Informations complémentaires...",rows:2})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(F,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsx(F,{type:"submit",children:"Programmer Intervention"})]})]})]})})},ske=({farm:e,open:t,onOpenChange:n,onEdit:r,onNewIntervention:a})=>{var u;const{getFarmInterventionsByFarmId:i}=bt();if(!e)return null;const o=i(e.id),l={active:"bg-green-100 text-green-800",attention:"bg-yellow-100 text-yellow-800",urgent:"bg-red-100 text-red-800"},c=d=>{switch(d){case"active":return s.jsx(Mn,{className:"h-4 w-4"});case"attention":return s.jsx(gn,{className:"h-4 w-4"});case"urgent":return s.jsx(gn,{className:"h-4 w-4 text-red-600"});default:return s.jsx(Kt,{className:"h-4 w-4"})}};return s.jsx(et,{open:t,onOpenChange:n,children:s.jsxs(Qe,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(tt,{children:[s.jsxs(nt,{className:"flex items-center gap-2",children:[c(e.status),e.name,s.jsx(_e,{className:l[e.status],children:e.status==="active"?"Actif":e.status==="attention"?"Attention":"Urgent"})]}),s.jsx(Bt,{children:"Détails complets de l'exploitation agricole"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(Z,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(bU,{className:"h-5 w-5"}),"Informations Générales"]})}),s.jsxs(ee,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Propriétaire"}),s.jsx("p",{className:"font-medium",children:e.owner})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Types d'élevage"}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:(u=e.types)==null?void 0:u.map(d=>s.jsx(_e,{variant:"secondary",children:d},d))})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Nombre total d'animaux"}),s.jsx("p",{className:"font-medium",children:e.totalAnimals})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Vétérinaire"}),s.jsx("p",{className:"font-medium",children:e.veterinarian||"Non assigné"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Dernière visite"}),s.jsx("p",{className:"font-medium",children:Da(e.lastVisit)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Date de création"}),s.jsx("p",{className:"font-medium",children:Da(e.createdAt)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[s.jsx(rc,{className:"h-3 w-3"}),"Adresse"]}),s.jsx("p",{className:"font-medium",children:e.address})]}),e.coordinates&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Coordonnées GPS"}),s.jsxs("p",{className:"font-mono text-sm",children:[e.coordinates.latitude.toFixed(4),", ",e.coordinates.longitude.toFixed(4)]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[s.jsx(Eu,{className:"h-3 w-3"}),"Téléphone"]}),s.jsx("p",{className:"font-medium",children:e.phone||"Non renseigné"})]}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[s.jsx(xf,{className:"h-3 w-3"}),"Email"]}),s.jsx("p",{className:"font-medium",children:e.email||"Non renseigné"})]})]})]})]}),e.animalDetails&&e.animalDetails.length>0&&s.jsxs(Z,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(wU,{className:"h-5 w-5"}),"Détails du Cheptel"]})}),s.jsx(ee,{children:s.jsx("div",{className:"space-y-3",children:e.animalDetails.map((d,h)=>s.jsxs("div",{className:"p-3 border rounded-lg bg-muted/30",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(_e,{variant:"secondary",children:d.category}),s.jsxs("span",{className:"text-sm font-medium",children:["Total: ",d.maleCount+d.femaleCount," animaux"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Mâles:"})," ",d.maleCount]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Femelles:"})," ",d.femaleCount]}),d.breeds.length>0&&s.jsxs("div",{className:"md:col-span-3",children:[s.jsx("span",{className:"text-muted-foreground",children:"Races:"})," ",d.breeds.join(", ")]})]})]},h))})})]}),(e.registrationNumber||e.surfaceArea||e.buildingDetails||e.equipmentDetails)&&s.jsxs(Z,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(aU,{className:"h-5 w-5"}),"Informations Administratives"]})}),s.jsxs(ee,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.registrationNumber&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"N° d'immatriculation"}),s.jsx("p",{className:"font-medium",children:e.registrationNumber})]}),e.surfaceArea&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Surface"}),s.jsxs("p",{className:"font-medium",children:[e.surfaceArea," hectares"]})]})]}),e.buildingDetails&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Bâtiments"}),s.jsx("p",{className:"font-medium",children:e.buildingDetails})]}),e.equipmentDetails&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Équipements"}),s.jsx("p",{className:"font-medium",children:e.equipmentDetails})]})]})]}),e.certifications&&e.certifications.length>0&&s.jsxs(Z,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(Pr,{className:"h-5 w-5"}),"Certifications"]})}),s.jsx(ee,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:e.certifications.map(d=>s.jsx(_e,{variant:"outline",children:d},d))})})]}),(e.insuranceDetails||e.emergencyContact)&&s.jsxs(Z,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(Cr,{className:"h-5 w-5"}),"Assurance et Contact d'Urgence"]})}),s.jsxs(ee,{className:"space-y-4",children:[e.insuranceDetails&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Assurance"}),s.jsx("p",{className:"font-medium",children:e.insuranceDetails})]}),e.emergencyContact&&e.emergencyContact.name&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Contact d'urgence"}),s.jsx("p",{className:"font-medium",children:e.emergencyContact.name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Téléphone"}),s.jsx("p",{className:"font-medium",children:e.emergencyContact.phone})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Relation"}),s.jsx("p",{className:"font-medium",children:e.emergencyContact.relation})]})]})]})]}),e.notes&&s.jsxs(Z,{children:[s.jsx(he,{children:s.jsx(me,{children:"Notes"})}),s.jsx(ee,{children:s.jsx("p",{className:"text-sm",children:e.notes})})]}),s.jsxs(Z,{children:[s.jsx(he,{children:s.jsx(me,{children:"Détails du Cheptel"})}),s.jsx(ee,{children:e.animalDetails&&e.animalDetails.length>0?s.jsx("div",{className:"space-y-4",children:e.animalDetails.map((d,h)=>s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h4",{className:"font-semibold text-lg",children:d.category}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(_e,{variant:"secondary",children:[d.maleCount+d.femaleCount," animaux"]}),s.jsxs(_e,{variant:"outline",children:[d.maleCount," mâles"]}),s.jsxs(_e,{variant:"outline",children:[d.femaleCount," femelles"]})]})]}),d.breeds&&d.breeds.length>0&&s.jsxs("div",{className:"mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Races: "}),d.breeds.map((m,f)=>s.jsx(_e,{variant:"outline",className:"mr-1 text-xs",children:m},f))]}),d.ageGroups&&d.ageGroups.length>0&&s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Groupes d'âge: "}),d.ageGroups.map((m,f)=>s.jsx(_e,{variant:"outline",className:"mr-1 text-xs",children:m},f))]})]},h))}):s.jsx("p",{className:"text-muted-foreground",children:"Aucun détail de cheptel configuré pour cette exploitation"})})]}),s.jsxs(Z,{children:[s.jsx(he,{children:s.jsx(me,{children:"Photos de l'exploitation"})}),s.jsx(ee,{children:e.photos&&e.photos.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.photos.map(d=>s.jsxs("div",{className:"group relative",children:[s.jsxs("div",{className:"aspect-square rounded-lg overflow-hidden border bg-muted",children:[s.jsx("img",{src:d.url,alt:d.description,className:"w-full h-full object-cover"}),s.jsx("div",{className:"absolute top-2 right-2",children:s.jsx(_e,{variant:"secondary",className:"text-xs bg-black/70 text-white border-0",children:d.category==="cheptel"?"Cheptel":d.category==="batiments"?"Bâtiments":d.category==="equipements"?"Équipements":"Général"})})]}),s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-sm font-medium truncate",children:d.description}),s.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(d.uploadedAt).toLocaleDateString()})]})]},d.id))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(vf,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucune photo ajoutée"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Les photos peuvent être ajoutées lors de la modification de l'exploitation"})]})})]}),s.jsxs(Ti,{defaultValue:"interventions",className:"w-full",children:[s.jsx(qa,{className:"grid w-full grid-cols-1",children:s.jsxs(Tt,{value:"interventions",children:[s.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Interventions (",o.length,")"]})}),s.jsx(Et,{value:"interventions",className:"space-y-4",children:s.jsxs(Z,{children:[s.jsx(he,{children:s.jsx(me,{children:"Interventions vétérinaires"})}),s.jsx(ee,{children:o.length>0?s.jsx("div",{className:"space-y-2",children:o.map(d=>s.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:d.type}),s.jsx("span",{className:"text-sm text-muted-foreground ml-2",children:Da(d.date)})]}),s.jsx(_e,{variant:"outline",children:d.status})]},d.id))}):s.jsx("p",{className:"text-muted-foreground",children:"Aucune intervention enregistrée pour cette exploitation"})})]})})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[s.jsx(F,{onClick:a,variant:"outline",children:"Nouvelle Intervention"}),s.jsx(F,{onClick:r,children:"Modifier"})]})]})})},ake=({open:e,onOpenChange:t,farm:n})=>{var y,j,w,N,_,S;const{updateFarm:r}=bt(),{settings:a}=Pt(),{toast:i}=it(),[o,l]=b.useState({name:"",owner:"",ownerIdNumber:"",address:"",coordinates:{latitude:0,longitude:0},phone:"",email:"",types:[],totalAnimals:0,animalDetails:[],veterinarian:"",notes:"",status:"active",registrationNumber:"",surfaceArea:0,buildingDetails:"",equipmentDetails:"",certifications:[],insuranceDetails:"",emergencyContact:{name:"",phone:"",relation:""}}),[c,u]=b.useState({category:"",maleCount:0,femaleCount:0,breeds:[],ageGroups:[]});if(!a.farmManagement)return console.error("farmManagement settings not found, using defaults"),s.jsx(et,{open:e,onOpenChange:t,children:s.jsx(Qe,{children:s.jsxs(tt,{children:[s.jsx(nt,{children:"Erreur de configuration"}),s.jsx(Bt,{children:"Les paramètres de gestion des fermes ne sont pas configurés. Veuillez recharger la page ou vérifier les paramètres."})]})})});b.useEffect(()=>{n&&e&&l({...n,coordinates:n.coordinates||{latitude:0,longitude:0},types:n.types||[],animalDetails:n.animalDetails||[],certifications:n.certifications||[],emergencyContact:n.emergencyContact||{name:"",phone:"",relation:""}})},[n,e]),b.useEffect(()=>{e||(l({name:"",owner:"",ownerIdNumber:"",address:"",coordinates:{latitude:0,longitude:0},phone:"",email:"",types:[],totalAnimals:0,animalDetails:[],veterinarian:"",notes:"",status:"active",registrationNumber:"",surfaceArea:0,buildingDetails:"",equipmentDetails:"",certifications:[],insuranceDetails:"",emergencyContact:{name:"",phone:"",relation:""}}),u({category:"",maleCount:0,femaleCount:0,breeds:[],ageGroups:[]}))},[e]);const d=(C,A)=>{if(C.includes(".")){const[T,E]=C.split(".");l(k=>({...k,[T]:{...k[T],[E]:A}}))}else l(T=>({...T,[C]:A}))},h=C=>{l(A=>{var T;return{...A,types:(T=A.types)!=null&&T.includes(C)?A.types.filter(E=>E!==C):[...A.types||[],C]}})},m=C=>{l(A=>{var T;return{...A,certifications:(T=A.certifications)!=null&&T.includes(C)?A.certifications.filter(E=>E!==C):[...A.certifications||[],C]}})},f=()=>{if(!c.category){i({title:"Erreur",description:"Veuillez sélectionner une catégorie d'animal",variant:"destructive"});return}l(C=>({...C,animalDetails:[...C.animalDetails||[],{...c}]})),u({category:"",maleCount:0,femaleCount:0,breeds:[],ageGroups:[]})},g=C=>{l(A=>{var T;return{...A,animalDetails:((T=A.animalDetails)==null?void 0:T.filter((E,k)=>k!==C))||[]}})},p=C=>{u(A=>({...A,breeds:[...A.breeds,C]}))},v=C=>{u(A=>({...A,breeds:A.breeds.filter(T=>T!==C)}))},x=C=>{var T;if(C.preventDefault(),!n)return;if(!o.name||!o.owner||!o.address||!((T=o.types)!=null&&T.length)){i({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires",variant:"destructive"});return}const A={...n,...o,coordinates:o.coordinates||{latitude:0,longitude:0},types:o.types||[],animalDetails:o.animalDetails||[],totalAnimals:(o.animalDetails||[]).reduce((E,k)=>E+k.maleCount+k.femaleCount,0),certifications:o.certifications||[],emergencyContact:o.emergencyContact||{name:"",phone:"",relation:""}};r(n.id,A),i({title:"Succès",description:"Exploitation mise à jour avec succès"}),t(!1)};return n?s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Qe,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(tt,{children:[s.jsx(nt,{children:"Modifier l'Exploitation"}),s.jsx(Bt,{children:"Modifiez les informations de l'exploitation agricole"})]}),s.jsxs("form",{onSubmit:x,className:"space-y-6",children:[s.jsxs(Z,{children:[s.jsx(he,{children:s.jsx(me,{children:"Informations générales"})}),s.jsxs(ee,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(D,{htmlFor:"name",children:"Nom de l'exploitation *"}),s.jsx(G,{id:"name",value:o.name||"",onChange:C=>d("name",C.target.value),placeholder:"Nom de l'exploitation"})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"owner",children:"Propriétaire *"}),s.jsx(G,{id:"owner",value:o.owner||"",onChange:C=>d("owner",C.target.value),placeholder:"Nom du propriétaire"})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"ownerIdNumber",children:"N° pièce d'identité du propriétaire"}),s.jsx(G,{id:"ownerIdNumber",value:o.ownerIdNumber||"",onChange:C=>d("ownerIdNumber",C.target.value),placeholder:"Numéro de carte d'identité, passeport, etc."})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(D,{htmlFor:"address",children:"Adresse *"}),s.jsx(G,{id:"address",value:o.address||"",onChange:C=>d("address",C.target.value),placeholder:"Adresse complète"})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"latitude",children:"Latitude"}),s.jsx(G,{id:"latitude",type:"number",step:"0.0001",value:((y=o.coordinates)==null?void 0:y.latitude)||"",onChange:C=>d("coordinates.latitude",parseFloat(C.target.value)||0),placeholder:"47.9056"})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"longitude",children:"Longitude"}),s.jsx(G,{id:"longitude",type:"number",step:"0.0001",value:((j=o.coordinates)==null?void 0:j.longitude)||"",onChange:C=>d("coordinates.longitude",parseFloat(C.target.value)||0),placeholder:"1.9190"})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"phone",children:"Téléphone"}),s.jsx(G,{id:"phone",value:o.phone||"",onChange:C=>d("phone",C.target.value),placeholder:"Téléphone"})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"email",children:"Email"}),s.jsx(G,{id:"email",type:"email",value:o.email||"",onChange:C=>d("email",C.target.value),placeholder:"Email"})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"veterinarian",children:"Vétérinaire responsable"}),s.jsx(G,{id:"veterinarian",value:o.veterinarian||"",onChange:C=>d("veterinarian",C.target.value),placeholder:"Vétérinaire"})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"status",children:"Statut"}),s.jsxs(we,{value:o.status,onValueChange:C=>d("status",C),children:[s.jsx(je,{children:s.jsx(Ne,{})}),s.jsxs(be,{children:[s.jsx($,{value:"active",children:"Active"}),s.jsx($,{value:"attention",children:"Attention"}),s.jsx($,{value:"urgent",children:"Urgent"})]})]})]})]})]}),s.jsxs(Z,{children:[s.jsx(he,{children:s.jsx(me,{children:"Types d'élevage *"})}),s.jsx(ee,{children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:a.farmManagement.farmTypes.map(C=>{var A;return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(mi,{id:`type-${C}`,checked:((A=o.types)==null?void 0:A.includes(C))||!1,onCheckedChange:()=>h(C)}),s.jsx(D,{htmlFor:`type-${C}`,children:C})]},C)})})})]}),s.jsxs(Z,{children:[s.jsx(he,{children:s.jsx(me,{children:"Détails du cheptel"})}),s.jsxs(ee,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx(D,{children:"Catégorie"}),s.jsxs(we,{value:c.category,onValueChange:C=>u(A=>({...A,category:C})),children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Sélectionner"})}),s.jsx(be,{children:a.farmManagement.animalCategories.map(C=>s.jsx($,{value:C,children:C},C))})]})]}),s.jsxs("div",{children:[s.jsx(D,{children:"Mâles"}),s.jsx(G,{type:"number",value:c.maleCount,onChange:C=>u(A=>({...A,maleCount:parseInt(C.target.value)||0})),placeholder:"0"})]}),s.jsxs("div",{children:[s.jsx(D,{children:"Femelles"}),s.jsx(G,{type:"number",value:c.femaleCount,onChange:C=>u(A=>({...A,femaleCount:parseInt(C.target.value)||0})),placeholder:"0"})]}),s.jsx("div",{className:"flex items-end",children:s.jsx(F,{type:"button",onClick:f,className:"w-full",children:"Ajouter"})})]}),c.category&&s.jsxs("div",{className:"p-4 border rounded-lg",children:[s.jsxs(D,{children:["Races pour ",c.category]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mt-2",children:(w=a.farmManagement.breedsByCategory[c.category])==null?void 0:w.map(C=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(mi,{id:`breed-${C}`,checked:c.breeds.includes(C),onCheckedChange:()=>{c.breeds.includes(C)?v(C):p(C)}}),s.jsx(D,{htmlFor:`breed-${C}`,children:C})]},C))})]}),o.animalDetails&&o.animalDetails.length>0&&s.jsxs("div",{className:"p-4 border rounded-lg",children:[s.jsx(D,{children:"Cheptel configuré"}),s.jsx("div",{className:"mt-2 space-y-2",children:o.animalDetails.map((C,A)=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[s.jsxs("span",{children:[s.jsx(_e,{variant:"secondary",children:C.category}),s.jsxs("span",{className:"ml-2",children:[C.maleCount," mâles, ",C.femaleCount," femelles"]}),C.breeds.length>0&&s.jsxs("span",{className:"ml-2 text-sm text-gray-600",children:["Races: ",C.breeds.join(", ")]})]}),s.jsx(F,{type:"button",variant:"outline",size:"sm",onClick:()=>g(A),children:"Supprimer"})]},A))})]})]})]}),s.jsxs(Z,{children:[s.jsx(he,{children:s.jsx(me,{children:"Informations administratives"})}),s.jsxs(ee,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(D,{htmlFor:"registrationNumber",children:"Numéro d'immatriculation"}),s.jsx(G,{id:"registrationNumber",value:o.registrationNumber||"",onChange:C=>d("registrationNumber",C.target.value),placeholder:"Numéro d'immatriculation"})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"surfaceArea",children:"Surface (hectares)"}),s.jsx(G,{id:"surfaceArea",type:"number",step:"0.1",value:o.surfaceArea||"",onChange:C=>d("surfaceArea",parseFloat(C.target.value)||0),placeholder:"Surface en hectares"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(D,{htmlFor:"buildingDetails",children:"Détails des bâtiments"}),s.jsx(Ue,{id:"buildingDetails",value:o.buildingDetails||"",onChange:C=>d("buildingDetails",C.target.value),placeholder:"Description des bâtiments, étables, etc."})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(D,{htmlFor:"equipmentDetails",children:"Équipements"}),s.jsx(Ue,{id:"equipmentDetails",value:o.equipmentDetails||"",onChange:C=>d("equipmentDetails",C.target.value),placeholder:"Liste des équipements disponibles"})]})]})]}),s.jsxs(Z,{children:[s.jsx(he,{children:s.jsx(me,{children:"Certifications"})}),s.jsx(ee,{children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:a.farmManagement.certificationTypes.map(C=>{var A;return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(mi,{id:`cert-${C}`,checked:((A=o.certifications)==null?void 0:A.includes(C))||!1,onCheckedChange:()=>m(C)}),s.jsx(D,{htmlFor:`cert-${C}`,children:C})]},C)})})})]}),s.jsxs(Z,{children:[s.jsx(he,{children:s.jsx(me,{children:"Assurance et contact d'urgence"})}),s.jsxs(ee,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(D,{htmlFor:"insuranceDetails",children:"Détails de l'assurance"}),s.jsx(G,{id:"insuranceDetails",value:o.insuranceDetails||"",onChange:C=>d("insuranceDetails",C.target.value),placeholder:"Compagnie d'assurance et numéro de police"})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"emergencyName",children:"Nom du contact d'urgence"}),s.jsx(G,{id:"emergencyName",value:((N=o.emergencyContact)==null?void 0:N.name)||"",onChange:C=>d("emergencyContact.name",C.target.value),placeholder:"Nom du contact"})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"emergencyPhone",children:"Téléphone d'urgence"}),s.jsx(G,{id:"emergencyPhone",value:((_=o.emergencyContact)==null?void 0:_.phone)||"",onChange:C=>d("emergencyContact.phone",C.target.value),placeholder:"Téléphone"})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"emergencyRelation",children:"Relation"}),s.jsx(G,{id:"emergencyRelation",value:((S=o.emergencyContact)==null?void 0:S.relation)||"",onChange:C=>d("emergencyContact.relation",C.target.value),placeholder:"Relation (époux, fils, etc.)"})]})]})]}),s.jsxs(Z,{children:[s.jsx(he,{children:s.jsx(me,{children:"Photos de l'exploitation"})}),s.jsx(ee,{children:s.jsx(k8,{photos:o.photos||[],onPhotosChange:C=>d("photos",C),farmName:o.name||"Exploitation"})})]}),s.jsxs(Z,{children:[s.jsx(he,{children:s.jsx(me,{children:"Notes complémentaires"})}),s.jsx(ee,{children:s.jsx(Ue,{value:o.notes||"",onChange:C=>d("notes",C.target.value),placeholder:"Notes additionnelles sur l'exploitation...",rows:3})})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(F,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsx(F,{type:"submit",children:"Mettre à jour l'exploitation"})]})]})]})}):null},ike=({open:e,onOpenChange:t,intervention:n})=>{const{updateFarmIntervention:r,farms:a}=bt(),{toast:i}=it(),[o,l]=b.useState({farmId:"",type:"",date:"",animals:"",description:"",veterinarian:"",status:"scheduled",followUp:"",cost:""});b.useEffect(()=>{n&&e&&l({farmId:n.farmId.toString(),type:n.type,date:n.date,animals:n.animals,description:n.description,veterinarian:n.veterinarian,status:n.status,followUp:n.followUp||"",cost:n.cost||""})},[n,e]);const c=(h,m)=>{l(f=>({...f,[h]:m}))},u=h=>{if(h.preventDefault(),!n)return;if(!o.farmId||!o.type||!o.date||!o.animals||!o.description){i({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires",variant:"destructive"});return}const m={farmId:parseInt(o.farmId),type:o.type,date:o.date,animals:o.animals,description:o.description,veterinarian:o.veterinarian,status:o.status,followUp:o.followUp,cost:o.cost};r(n.id,m),i({title:"Succès",description:"Intervention mise à jour avec succès"}),t(!1)};if(!n)return null;const d=a.find(h=>h.id===parseInt(o.farmId));return s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Qe,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(tt,{children:[s.jsx(nt,{children:"Modifier l'Intervention"}),s.jsxs(Bt,{children:["Modifiez les informations de l'intervention du ",new Date(n.date).toLocaleDateString("fr-FR")]})]}),s.jsxs("form",{onSubmit:u,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{children:"Exploitation *"}),s.jsxs(we,{value:o.farmId,onValueChange:h=>c("farmId",h),children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Sélectionner l'exploitation"})}),s.jsx(be,{children:a.map(h=>s.jsxs($,{value:h.id.toString(),children:[h.name," - ",h.owner]},h.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{children:"Type d'intervention *"}),s.jsxs(we,{value:o.type,onValueChange:h=>c("type",h),children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Sélectionner le type"})}),s.jsxs(be,{children:[s.jsx($,{value:"vaccination",children:"Vaccination"}),s.jsx($,{value:"controle",children:"Contrôle sanitaire"}),s.jsx($,{value:"urgence",children:"Urgence"}),s.jsx($,{value:"chirurgie",children:"Chirurgie"}),s.jsx($,{value:"prevention",children:"Prévention"}),s.jsx($,{value:"consultation",children:"Consultation"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"date",children:"Date *"}),s.jsx(G,{id:"date",type:"date",value:o.date,onChange:h=>c("date",h.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{children:"Statut"}),s.jsxs(we,{value:o.status,onValueChange:h=>c("status",h),children:[s.jsx(je,{children:s.jsx(Ne,{})}),s.jsxs(be,{children:[s.jsx($,{value:"scheduled",children:"Programmé"}),s.jsx($,{value:"ongoing",children:"En cours"}),s.jsx($,{value:"completed",children:"Terminé"}),s.jsx($,{value:"cancelled",children:"Annulé"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"animals",children:"Animaux concernés *"}),s.jsx(G,{id:"animals",value:o.animals,onChange:h=>c("animals",h.target.value),placeholder:"ex: 50 vaches, 100 porcs...",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"veterinarian",children:"Vétérinaire *"}),s.jsx(G,{id:"veterinarian",value:o.veterinarian,onChange:h=>c("veterinarian",h.target.value),required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"description",children:"Description *"}),s.jsx(Ue,{id:"description",value:o.description,onChange:h=>c("description",h.target.value),rows:3,placeholder:"Détails de l'intervention, observations, traitements...",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"followUp",children:"Suivi recommandé"}),s.jsx(Ue,{id:"followUp",value:o.followUp,onChange:h=>c("followUp",h.target.value),rows:2,placeholder:"Recommandations, prochain contrôle..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"cost",children:"Coût (€)"}),s.jsx(G,{id:"cost",type:"number",value:o.cost,onChange:h=>c("cost",h.target.value),min:"0",step:"0.01",placeholder:"0.00"})]})]}),d&&s.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[s.jsx("h4",{className:"font-medium mb-2",children:"Informations de l'exploitation"}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Nom:"})," ",d.name]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Propriétaire:"})," ",d.owner]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Type:"})," ",d.type]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Adresse:"})," ",d.address]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(F,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsx(F,{type:"submit",children:"Mettre à jour"})]})]})]})})},oke=()=>{const{farms:e,farmInterventions:t,deleteFarm:n,deleteFarmIntervention:r,getFarmsByStatus:a,getUpcomingFarmInterventions:i}=bt(),{toast:o}=it(),{currentView:l}=fc("farms"),[c,u]=b.useState(""),[d,h]=b.useState("all"),[m,f]=b.useState(l),[g,p]=b.useState(!1),[v,x]=b.useState(!1),[y,j]=b.useState(!1),[w,N]=b.useState(!1),[_,S]=b.useState(!1),[C,A]=b.useState(null),[T,E]=b.useState(null),k=e.filter(re=>{var ce,se;const de=re.name.toLowerCase().includes(c.toLowerCase())||re.owner.toLowerCase().includes(c.toLowerCase())||((ce=re.types)==null?void 0:ce.some(ae=>ae.toLowerCase().includes(c.toLowerCase())))||!1,pe=d==="all"||((se=re.types)==null?void 0:se.includes(d))||!1;return de&&pe}),R={active:"bg-green-100 text-green-800",attention:"bg-yellow-100 text-yellow-800",urgent:"bg-red-100 text-red-800"},I={"Bovin laitier":"Élevage bovin laitier","Bovin viande":"Élevage bovin viande",Porcin:"Élevage porcin",Avicole:"Élevage avicole",Ovin:"Élevage ovin",Caprin:"Élevage caprin",Équin:"Élevage équin",Apiculture:"Apiculture",Aquaculture:"Aquaculture",Cuniculture:"Cuniculture",Mixte:"Élevage mixte"},W={vaccination:"Vaccination",controle:"Contrôle sanitaire",urgence:"Urgence",chirurgie:"Chirurgie",prevention:"Prévention",consultation:"Consultation"},V=re=>{A(re),j(!0)},q=re=>{A(re),N(!0)},P=re=>{confirm("Êtes-vous sûr de vouloir supprimer cette exploitation ?")&&(n(re),o({title:"Succès",description:"Exploitation supprimée"}))},O=re=>{x(!0)},B=re=>{confirm("Êtes-vous sûr de vouloir supprimer cette intervention ?")&&(r(re),o({title:"Succès",description:"Intervention supprimée"}))},U=re=>{E(re),S(!0)},X=a("attention").length+a("urgent").length,ie=i();return s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-8 space-y-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Gestion des Exploitations"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Gérez les fermes, élevages et interventions vétérinaires"})]}),s.jsxs(F,{className:"gap-2 medical-glow w-full sm:w-auto",onClick:()=>p(!0),children:[s.jsx(at,{className:"h-4 w-4"}),"Nouvelle Exploitation"]})]}),s.jsxs("div",{className:"grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4",children:[s.jsx(Z,{children:s.jsxs(ee,{className:"p-6 text-center",children:[s.jsx(jb,{className:"h-12 w-12 text-primary mx-auto mb-4"}),s.jsx("div",{className:"text-2xl font-bold",children:e.length}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Exploitations"})]})}),s.jsx(Z,{children:s.jsxs(ee,{className:"p-6 text-center",children:[s.jsx(gn,{className:"h-12 w-12 text-accent mx-auto mb-4"}),s.jsx("div",{className:"text-2xl font-bold",children:X}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Alertes actives"})]})}),s.jsx(Z,{children:s.jsxs(ee,{className:"p-6 text-center",children:[s.jsx(Ke,{className:"h-12 w-12 text-blue-600 mx-auto mb-4"}),s.jsx("div",{className:"text-2xl font-bold",children:ie.length}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Interventions à venir"})]})})]}),s.jsxs(Z,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx($o,{className:"h-5 w-5"}),"Rechercher et filtrer"]})}),s.jsx(ee,{className:"space-y-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsx(G,{placeholder:"Rechercher par nom, propriétaire ou type...",value:c,onChange:re=>u(re.target.value),className:"w-full sm:max-w-md"}),s.jsxs(we,{value:d,onValueChange:h,children:[s.jsx(je,{className:"w-full sm:w-48",children:s.jsx(Ne,{placeholder:"Type d'élevage"})}),s.jsxs(be,{children:[s.jsx($,{value:"all",children:"Tous types"}),s.jsx($,{value:"Bovin laitier",children:"Élevage bovin laitier"}),s.jsx($,{value:"Bovin viande",children:"Élevage bovin viande"}),s.jsx($,{value:"Porcin",children:"Élevage porcin"}),s.jsx($,{value:"Avicole",children:"Élevage avicole"}),s.jsx($,{value:"Ovin",children:"Élevage ovin"}),s.jsx($,{value:"Caprin",children:"Élevage caprin"}),s.jsx($,{value:"Équin",children:"Élevage équin"}),s.jsx($,{value:"Apiculture",children:"Apiculture"}),s.jsx($,{value:"Aquaculture",children:"Aquaculture"}),s.jsx($,{value:"Cuniculture",children:"Cuniculture"}),s.jsx($,{value:"Mixte",children:"Élevage mixte"})]})]})]})})]}),s.jsxs(Ti,{defaultValue:"farms",className:"space-y-6",children:[s.jsxs(qa,{className:"grid w-full grid-cols-2",children:[s.jsxs(Tt,{value:"farms",className:"gap-2",children:[s.jsx(jb,{className:"h-4 w-4"}),"Exploitations"]}),s.jsxs(Tt,{value:"interventions",className:"gap-2",children:[s.jsx(Ke,{className:"h-4 w-4"}),"Interventions"]})]}),s.jsxs(Et,{value:"farms",className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("h3",{className:"text-lg font-semibold",children:["Exploitations (",k.length,")"]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs(F,{size:"sm",variant:m==="cards"?"default":"outline",onClick:()=>f("cards"),className:"gap-2 flex-1 sm:flex-none",children:[s.jsx(ko,{className:"h-4 w-4"}),"Cartes"]}),s.jsxs(F,{size:"sm",variant:m==="table"?"default":"outline",onClick:()=>f("table"),className:"gap-2 flex-1 sm:flex-none",children:[s.jsx(wi,{className:"h-4 w-4"}),"Tableau"]}),s.jsxs(F,{onClick:()=>x(!0),className:"gap-2 flex-1 sm:flex-none",children:[s.jsx(wn,{className:"h-4 w-4"}),"Nouvelle Intervention"]})]})]}),k.length===0?s.jsx(Z,{children:s.jsx(ee,{className:"p-6 text-center text-muted-foreground",children:"Aucune exploitation trouvée"})}):m==="cards"?k.map(re=>{var de;return s.jsx(Z,{className:"card-hover",children:s.jsx(ee,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row items-start justify-between gap-4",children:[s.jsxs("div",{className:"space-y-3 flex-1",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4",children:[s.jsx("h4",{className:"text-xl font-semibold",children:re.name}),s.jsx(_e,{variant:"outline",className:R[re.status],children:re.status==="active"?"Actif":re.status==="attention"?"Attention":"Urgent"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Propriétaire:"})," ",re.owner]}),s.jsxs("p",{className:"flex items-center gap-1",children:[s.jsx(rc,{className:"h-3 w-3"}),re.address]}),s.jsxs("p",{className:"flex items-center gap-1",children:[s.jsx(Eu,{className:"h-3 w-3"}),re.phone]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Types:"}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:(de=re.types)==null?void 0:de.map(pe=>s.jsx(_e,{variant:"secondary",className:"text-xs",children:I[pe]||pe},pe))})]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Animaux:"})," ",re.totalAnimals]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Vétérinaire:"})," ",re.veterinarian]})]})]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Dernière visite: ",Da(re.lastVisit)]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(F,{size:"sm",variant:"outline",onClick:()=>V(re),children:s.jsx(Nn,{className:"h-4 w-4"})}),s.jsx(F,{size:"sm",variant:"outline",onClick:()=>q(re),children:s.jsx($t,{className:"h-4 w-4"})}),s.jsx(F,{size:"sm",onClick:()=>O(),children:s.jsx(wn,{className:"h-4 w-4"})}),s.jsx(F,{size:"sm",variant:"destructive",onClick:()=>P(re.id),children:s.jsx(rn,{className:"h-4 w-4"})})]})]})})},re.id)}):s.jsx(Z,{children:s.jsx(ee,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full min-w-[600px]",children:[s.jsx("thead",{className:"border-b",children:s.jsxs("tr",{className:"text-left",children:[s.jsx("th",{className:"p-4 font-medium",children:"Exploitation"}),s.jsx("th",{className:"p-4 font-medium",children:"Propriétaire"}),s.jsx("th",{className:"p-4 font-medium",children:"Type"}),s.jsx("th",{className:"p-4 font-medium",children:"Statut"}),s.jsx("th",{className:"p-4 font-medium",children:"Animaux"}),s.jsx("th",{className:"p-4 font-medium",children:"Contact"}),s.jsx("th",{className:"p-4 font-medium",children:"Actions"})]})}),s.jsx("tbody",{children:k.map(re=>{var de;return s.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[s.jsx("td",{className:"p-4",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:re.name}),s.jsx("div",{className:"text-sm text-muted-foreground",children:re.address})]})}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:re.owner}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Vét: ",re.veterinarian]})]})}),s.jsx("td",{className:"p-4",children:s.jsx("div",{className:"flex flex-wrap gap-1",children:(de=re.types)==null?void 0:de.map(pe=>s.jsx(_e,{variant:"secondary",className:"text-xs",children:I[pe]||pe},pe))})}),s.jsx("td",{className:"p-4",children:s.jsx(_e,{variant:"outline",className:R[re.status],children:re.status==="active"?"Actif":re.status==="attention"?"Attention":"Urgent"})}),s.jsx("td",{className:"p-4",children:re.totalAnimals}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Eu,{className:"h-3 w-3"}),re.phone]}),s.jsxs("div",{className:"text-muted-foreground",children:["Dernière visite: ",Da(re.lastVisit)]})]})}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.jsx(F,{size:"sm",variant:"outline",onClick:()=>V(re),children:s.jsx(Nn,{className:"h-4 w-4"})}),s.jsx(F,{size:"sm",variant:"outline",onClick:()=>q(re),children:s.jsx($t,{className:"h-4 w-4"})}),s.jsx(F,{size:"sm",onClick:()=>O(),children:s.jsx(wn,{className:"h-4 w-4"})}),s.jsx(F,{size:"sm",variant:"destructive",onClick:()=>P(re.id),children:s.jsx(rn,{className:"h-4 w-4"})})]})})]},re.id)})})]})})})})]}),s.jsxs(Et,{value:"interventions",className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("h3",{className:"text-lg font-semibold",children:["Interventions récentes (",t.length,")"]}),s.jsxs(F,{onClick:()=>x(!0),className:"gap-2 w-full sm:w-auto",children:[s.jsx(wn,{className:"h-4 w-4"}),"Nouvelle Intervention"]})]}),t.length===0?s.jsx(Z,{children:s.jsx(ee,{className:"p-6 text-center text-muted-foreground",children:"Aucune intervention enregistrée"})}):t.map(re=>s.jsx(Z,{className:"card-hover",children:s.jsx(ee,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex flex-col sm:flex-row items-start justify-between gap-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4",children:[s.jsx("h4",{className:"text-lg font-semibold",children:W[re.type]}),s.jsx(_e,{variant:"outline",className:re.status==="completed"?"bg-green-100 text-green-800":re.status==="ongoing"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800",children:re.status==="completed"?"Terminé":re.status==="ongoing"?"En cours":re.status==="scheduled"?"Programmé":"Annulé"})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-4 sm:gap-6 text-sm text-muted-foreground",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Ke,{className:"h-3 w-3"}),Da(re.date)]}),s.jsx("span",{children:re.farmName}),s.jsx("span",{children:re.veterinarian})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Animaux concernés:"})," ",re.animals]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Suivi:"})," ",re.followUp||"Aucun"]})]}),s.jsx("p",{className:"text-sm",children:re.description}),s.jsxs("div",{className:"flex flex-wrap gap-2 pt-2 border-t",children:[s.jsx(F,{size:"sm",variant:"outline",children:s.jsx(Nn,{className:"h-4 w-4"})}),s.jsx(F,{size:"sm",variant:"outline",onClick:()=>U(re),children:s.jsx($t,{className:"h-4 w-4"})}),re.status==="ongoing"&&s.jsx(F,{size:"sm",children:s.jsx(wn,{className:"h-4 w-4"})}),s.jsx(F,{size:"sm",variant:"destructive",onClick:()=>B(re.id),children:s.jsx(rn,{className:"h-4 w-4"})})]})]})})},re.id))]})]}),s.jsx(nke,{open:g,onOpenChange:p}),s.jsx(rke,{open:v,onOpenChange:x,farmId:C==null?void 0:C.id,farmName:C==null?void 0:C.name}),s.jsx(ske,{farm:C,open:y,onOpenChange:j,onEdit:()=>q(C),onNewIntervention:()=>{j(!1),x(!0)}}),s.jsx(ake,{farm:C,open:w,onOpenChange:N}),s.jsx(ike,{intervention:T,open:_,onOpenChange:S})]})};function bj({children:e,mode:t,protocol:n,open:r,onOpenChange:a}){var p;const i=KZ(),o=GZ(),{toast:l}=it(),[c,u]=b.useState(!1),d=r!==void 0?r:c,h=a||u,[m,f]=b.useState({species:(n==null?void 0:n.species)||"",vaccineName:(n==null?void 0:n.vaccine_name)||"",vaccineType:(n==null?void 0:n.vaccine_type)||"",ageRecommendation:(n==null?void 0:n.age_recommendation)||"",frequency:(n==null?void 0:n.frequency)||"",durationDays:((p=n==null?void 0:n.duration_days)==null?void 0:p.toString())||"",notes:(n==null?void 0:n.notes)||"",active:(n==null?void 0:n.active)??!0}),g=async v=>{if(v.preventDefault(),!m.species||!m.vaccineName||!m.vaccineType){l({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires",variant:"destructive"});return}try{const x={species:m.species,vaccine_name:m.vaccineName,vaccine_type:m.vaccineType,age_recommendation:m.ageRecommendation||void 0,frequency:m.frequency||void 0,duration_days:m.durationDays?parseInt(m.durationDays):void 0,notes:m.notes||void 0,active:m.active};t==="create"?(await i.mutateAsync(x),l({title:"Protocole créé",description:`Le protocole ${m.vaccineName} a été créé avec succès`})):n&&(await o.mutateAsync({id:n.id,data:x}),l({title:"Protocole modifié",description:`Le protocole ${m.vaccineName} a été modifié avec succès`})),t==="create"&&f({species:"",vaccineName:"",vaccineType:"",ageRecommendation:"",frequency:"",durationDays:"",notes:"",active:!0}),h(!1)}catch{l({title:"Erreur",description:`Impossible de ${t==="create"?"créer":"modifier"} le protocole`,variant:"destructive"})}};return s.jsxs(et,{open:d,onOpenChange:h,children:[s.jsx(Vx,{asChild:!0,children:e||s.jsxs(F,{className:"gap-2",children:[s.jsx(at,{className:"h-4 w-4"}),t==="create"?"Nouveau Protocole":"Modifier"]})}),s.jsxs(Qe,{className:"max-w-2xl",children:[s.jsx(tt,{children:s.jsxs(nt,{className:"flex items-center gap-2",children:[s.jsx(Pr,{className:"h-5 w-5"}),t==="create"?"Nouveau Protocole Vaccinal":"Modifier le Protocole"]})}),s.jsxs("form",{onSubmit:g,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"species",children:"Espèce *"}),s.jsxs(we,{value:m.species,onValueChange:v=>f({...m,species:v}),children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Sélectionnez l'espèce"})}),s.jsxs(be,{children:[s.jsx($,{value:"Chien",children:"Chien"}),s.jsx($,{value:"Chat",children:"Chat"}),s.jsx($,{value:"Oiseau",children:"Oiseau"}),s.jsx($,{value:"Lapin",children:"Lapin"}),s.jsx($,{value:"Furet",children:"Furet"}),s.jsx($,{value:"Autre",children:"Autre"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"vaccineName",children:"Nom du vaccin *"}),s.jsx(G,{id:"vaccineName",value:m.vaccineName,onChange:v=>f({...m,vaccineName:v.target.value}),placeholder:"ex: DHPP, Rage, FVRCP...",required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"vaccineType",children:"Type de vaccin *"}),s.jsxs(we,{value:m.vaccineType,onValueChange:v=>f({...m,vaccineType:v}),children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Sélectionnez le type"})}),s.jsxs(be,{children:[s.jsx($,{value:"core",children:"Essentiel"}),s.jsx($,{value:"non-core",children:"Optionnel"}),s.jsx($,{value:"rabies",children:"Rage"}),s.jsx($,{value:"custom",children:"Personnalisé"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"ageRecommendation",children:"Âge recommandé"}),s.jsx(G,{id:"ageRecommendation",value:m.ageRecommendation,onChange:v=>f({...m,ageRecommendation:v.target.value}),placeholder:"ex: 8 semaines, 3 mois..."})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"frequency",children:"Fréquence"}),s.jsx(G,{id:"frequency",value:m.frequency,onChange:v=>f({...m,frequency:v.target.value}),placeholder:"ex: Annuelle, Tous les 3 ans..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"durationDays",children:"Durée (jours)"}),s.jsx(G,{id:"durationDays",type:"number",value:m.durationDays,onChange:v=>f({...m,durationDays:v.target.value}),placeholder:"ex: 365, 1095...",min:"1"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"notes",children:"Notes"}),s.jsx(Ue,{id:"notes",value:m.notes,onChange:v=>f({...m,notes:v.target.value}),placeholder:"Informations complémentaires sur le protocole...",rows:3})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"active",checked:m.active,onChange:v=>f({...m,active:v.target.checked}),className:"rounded"}),s.jsx(D,{htmlFor:"active",children:"Protocole actif"})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(F,{type:"button",variant:"outline",onClick:()=>h(!1),children:"Annuler"}),s.jsx(F,{type:"submit",disabled:i.isPending||o.isPending,children:i.isPending||o.isPending?t==="create"?"Création...":"Modification...":t==="create"?"Créer le protocole":"Modifier le protocole"})]})]})]})]})}const lke=e=>{if(!e.next_due_date)return"completed";const t=new Date,n=new Date(e.next_due_date);return Yg(n,t)?"overdue":"scheduled"},hO=e=>{switch(e){case"completed":return"bg-green-100 text-green-800 border-green-200";case"overdue":return"bg-red-100 text-red-800 border-red-200";case"scheduled":return"bg-blue-100 text-blue-800 border-blue-200";case"missed":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},mO=e=>{switch(e){case"completed":return s.jsx(Mn,{className:"h-4 w-4"});case"overdue":return s.jsx(gn,{className:"h-4 w-4"});case"scheduled":return s.jsx(Kt,{className:"h-4 w-4"});case"missed":return s.jsx(gn,{className:"h-4 w-4"});default:return s.jsx(Kt,{className:"h-4 w-4"})}};function cke(){const{data:e=[],isLoading:t}=Uo(),{data:n=[],isLoading:r}=nr(),{data:a=[],isLoading:i}=tr(),{data:o=[]}=HZ(),l=WZ();UZ();const{toast:c}=it(),{currentView:u}=fc("vaccinations"),[d,h]=b.useState(u),[m,f]=b.useState(""),[g,p]=b.useState("all"),[v,x]=b.useState("overview"),[y,j]=b.useState(null),[w,N]=b.useState(!1),[_,S]=b.useState(!1),[C,A]=b.useState(null),T=b.useMemo(()=>t||r||i?[]:e.map(q=>{const P=n.find(B=>B.id===q.animal_id),O=a.find(B=>B.id===(P==null?void 0:P.client_id));return{...q,petName:(P==null?void 0:P.name)||"Animal inconnu",clientName:O?`${O.first_name} ${O.last_name}`:"Client inconnu",status:lke(q),animal:P,client:O}}),[e,n,a,t,r,i]),E=b.useMemo(()=>{const q=T.length,P=T.filter(X=>X.status==="completed").length,O=T.filter(X=>X.status==="overdue").length,B=T.filter(X=>X.status==="scheduled").length,U=T.filter(X=>{if(!X.next_due_date)return!1;const ie=new Date,re=new Date(X.next_due_date),de=XS(ie,30);return kte(re,ie)&&Yg(re,de)}).length;return{total:q,completed:P,overdue:O,scheduled:B,upcoming:U}},[T]),k=b.useMemo(()=>T.filter(q=>{const P=q.petName.toLowerCase().includes(m.toLowerCase())||q.clientName.toLowerCase().includes(m.toLowerCase())||q.vaccine_name.toLowerCase().includes(m.toLowerCase()),O=g==="all"||q.status===g;return P&&O}),[T,m,g]),R=q=>{A(q),S(!0)},I=()=>{C&&(l.mutate(C.id),c({title:"Vaccination supprimée",description:`La vaccination ${C.vaccine_name} a été supprimée avec succès.`}),S(!1),A(null))},W=()=>{const q=JSON.stringify(T,null,2),P=new Blob([q],{type:"application/json"}),O=URL.createObjectURL(P),B=document.createElement("a");B.href=O,B.download=`vaccinations-${Je(new Date,"yyyy-MM-dd")}.json`,B.click(),URL.revokeObjectURL(O)};return t||r||i?s.jsx("div",{className:"space-y-6 max-w-7xl mx-auto p-4 sm:p-6 lg:p-8",children:s.jsx(Z,{children:s.jsxs(ee,{className:"p-8 text-center",children:[s.jsx(Kn,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),s.jsx("p",{children:"Chargement des données de vaccination..."})]})})}):s.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto p-4 sm:p-6 lg:p-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 flex items-center gap-3 dark:text-white",children:[s.jsx(Br,{className:"h-6 sm:h-8 w-6 sm:w-8 text-blue-600"}),"Gestion Vaccinale"]}),s.jsx("p",{className:"text-gray-600 mt-1 text-sm sm:text-base",children:"Suivi et planification des vaccinations"})]}),s.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[s.jsxs(F,{onClick:W,variant:"outline",className:"gap-2 flex-1 sm:flex-none",children:[s.jsx(yx,{className:"h-4 w-4"}),"Exporter"]}),s.jsx(HN,{})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:[s.jsx(Z,{children:s.jsx(ee,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-2 sm:p-3 bg-blue-100 rounded-full",children:s.jsx(Br,{className:"h-5 sm:h-6 w-5 sm:w-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:E.total})]})]})})}),s.jsx(Z,{children:s.jsx(ee,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-2 sm:p-3 bg-green-100 rounded-full",children:s.jsx(Mn,{className:"h-5 sm:h-6 w-5 sm:w-6 text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Terminées"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:E.completed})]})]})})}),s.jsx(Z,{children:s.jsx(ee,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-2 sm:p-3 bg-red-100 rounded-full",children:s.jsx(gn,{className:"h-5 sm:h-6 w-5 sm:w-6 text-red-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"En Retard"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:E.overdue})]})]})})}),s.jsx(Z,{children:s.jsx(ee,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-2 sm:p-3 bg-orange-100 rounded-full",children:s.jsx(Kt,{className:"h-5 sm:h-6 w-5 sm:w-6 text-orange-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Prochaines 30j"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:E.upcoming})]})]})})}),s.jsx(Z,{children:s.jsx(ee,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-2 sm:p-3 bg-purple-100 rounded-full",children:s.jsx(Ke,{className:"h-5 sm:h-6 w-5 sm:w-6 text-purple-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Planifiées"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:E.scheduled})]})]})})})]}),s.jsxs(Ti,{value:v,onValueChange:x,children:[s.jsxs(qa,{className:"grid w-full grid-cols-2",children:[s.jsxs(Tt,{value:"overview",className:"flex items-center gap-2 text-xs sm:text-sm",children:[s.jsx(an,{className:"h-3 sm:h-4 w-3 sm:w-4"}),"Vue d'ensemble"]}),s.jsxs(Tt,{value:"protocols",className:"flex items-center gap-2 text-xs sm:text-sm",children:[s.jsx(Pr,{className:"h-3 sm:h-4 w-3 sm:w-4"}),"Protocoles"]})]}),s.jsxs(Et,{value:"overview",className:"space-y-4",children:[s.jsx(Z,{children:s.jsx(ee,{className:"p-4",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center justify-between",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1 w-full",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx($o,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx(G,{placeholder:"Rechercher animal, client, vaccin...",value:m,onChange:q=>f(q.target.value),className:"pl-10"})]}),s.jsxs(we,{value:g,onValueChange:p,children:[s.jsx(je,{className:"w-full sm:w-[150px]",children:s.jsx(Ne,{})}),s.jsxs(be,{children:[s.jsx($,{value:"all",children:"Tous statuts"}),s.jsx($,{value:"completed",children:"Terminées"}),s.jsx($,{value:"scheduled",children:"Planifiées"}),s.jsx($,{value:"overdue",children:"En retard"})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto justify-center sm:justify-end",children:[s.jsx(F,{variant:d==="cards"?"default":"outline",size:"sm",onClick:()=>h("cards"),children:s.jsx(ko,{className:"h-4 w-4"})}),s.jsx(F,{variant:d==="table"?"default":"outline",size:"sm",onClick:()=>h("table"),children:s.jsx(wi,{className:"h-4 w-4"})})]})]})})}),d==="cards"?s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:k.map(q=>{var P;return s.jsx(Z,{className:"hover:shadow-md transition-shadow",children:s.jsxs(ee,{className:"p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Zn,{className:"h-10 w-10",children:s.jsx(er,{children:s.jsx(kg,{className:"h-5 w-5"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-sm",children:q.petName}),s.jsxs("p",{className:"text-xs text-gray-600",children:[(P=q.animal)==null?void 0:P.species," • ",q.clientName]})]})]}),s.jsxs(_e,{className:`${hO(q.status)} text-xs`,children:[mO(q.status),s.jsx("span",{className:"ml-1 capitalize",children:q.status})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Br,{className:"h-4 w-4 text-blue-600"}),s.jsx("span",{className:"font-medium text-sm",children:q.vaccine_name}),q.vaccine_type&&s.jsx(_e,{variant:"outline",className:"text-xs",children:q.vaccine_type})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(Ke,{className:"h-4 w-4"}),s.jsxs("span",{children:["Date: ",Je(new Date(q.vaccination_date),"dd/MM/yyyy",{locale:Rn})]})]}),q.next_due_date&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(Kt,{className:"h-4 w-4"}),s.jsxs("span",{children:["Prochain: ",Je(new Date(q.next_due_date),"dd/MM/yyyy",{locale:Rn})]})]}),q.administered_by&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(La,{className:"h-4 w-4"}),s.jsx("span",{children:q.administered_by})]})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-4 pt-3 border-t",children:[s.jsxs(F,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>{j(q),N(!0)},children:[s.jsx(Nn,{className:"h-4 w-4 mr-1"}),"Détails"]}),s.jsx(F,{size:"sm",variant:"outline",onClick:()=>R(q),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:s.jsx(rn,{className:"h-4 w-4"})})]})]})},q.id)})}):s.jsx(Z,{children:s.jsx(ee,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Ud,{children:[s.jsx(Wd,{children:s.jsxs(ca,{children:[s.jsx(ct,{children:"Animal"}),s.jsx(ct,{children:"Vaccin"}),s.jsx(ct,{children:"Date"}),s.jsx(ct,{children:"Prochain"}),s.jsx(ct,{children:"Statut"}),s.jsx(ct,{children:"Actions"})]})}),s.jsx(Hd,{children:k.map(q=>s.jsxs(ca,{children:[s.jsx(ut,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Zn,{className:"h-8 w-8",children:s.jsx(er,{children:s.jsx(kg,{className:"h-4 w-4"})})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-sm",children:q.petName}),s.jsx("div",{className:"text-xs text-gray-600",children:q.clientName})]})]})}),s.jsx(ut,{className:"font-medium",children:q.vaccine_name}),s.jsx(ut,{children:Je(new Date(q.vaccination_date),"dd/MM/yyyy")}),s.jsx(ut,{children:q.next_due_date?Je(new Date(q.next_due_date),"dd/MM/yyyy"):"N/A"}),s.jsx(ut,{children:s.jsxs(_e,{className:hO(q.status),children:[mO(q.status),s.jsx("span",{className:"ml-1 capitalize",children:q.status})]})}),s.jsx(ut,{children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(F,{size:"sm",variant:"outline",onClick:()=>{j(q),N(!0)},children:s.jsx(Nn,{className:"h-4 w-4"})}),s.jsx(F,{size:"sm",variant:"outline",onClick:()=>R(q),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:s.jsx(rn,{className:"h-4 w-4"})})]})})]},q.id))})]})})})})]}),s.jsx(Et,{value:"protocols",children:s.jsxs(Z,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Pr,{className:"h-5 w-5"}),"Protocoles Vaccinaux (",o.length,")"]}),s.jsx(bj,{mode:"create"})]})}),s.jsxs(ee,{children:[s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(q=>s.jsx(Z,{className:"hover:shadow-md transition-shadow",children:s.jsx(ee,{className:"p-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsx("h4",{className:"font-semibold",children:q.vaccine_name}),!q.active&&s.jsx(_e,{variant:"secondary",className:"text-xs",children:"Inactif"})]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Espèce: ",q.species]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Type: ",q.vaccine_type]}),q.frequency&&s.jsxs("p",{className:"text-sm text-gray-600",children:["Fréquence: ",q.frequency]}),q.age_recommendation&&s.jsxs("p",{className:"text-sm text-gray-600",children:["Âge: ",q.age_recommendation]}),q.notes&&s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:q.notes}),s.jsx("div",{className:"flex gap-2 mt-3",children:s.jsx(bj,{mode:"edit",protocol:q,children:s.jsxs(F,{size:"sm",variant:"outline",className:"flex-1",children:[s.jsx($t,{className:"h-4 w-4 mr-1"}),"Modifier"]})})})]})})},q.id))}),o.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(Pr,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),s.jsx("p",{children:"Aucun protocole vaccinal configuré"}),s.jsx(bj,{mode:"create",children:s.jsxs(F,{className:"mt-4",children:[s.jsx(at,{className:"h-4 w-4 mr-2"}),"Créer un protocole"]})})]})]})]})})]}),s.jsx(et,{open:w,onOpenChange:N,children:s.jsxs(Qe,{className:"max-w-2xl w-full mx-4",children:[s.jsx(tt,{children:s.jsx(nt,{children:"Détails de la Vaccination"})}),y&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Animal:"}),s.jsx("p",{children:y.petName})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Client:"}),s.jsx("p",{children:y.clientName})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Vaccin:"}),s.jsx("p",{children:y.vaccine_name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Date:"}),s.jsx("p",{children:Je(new Date(y.vaccination_date),"dd/MM/yyyy",{locale:Rn})})]}),y.next_due_date&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Prochain rappel:"}),s.jsx("p",{children:Je(new Date(y.next_due_date),"dd/MM/yyyy",{locale:Rn})})]})]}),y.notes&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Notes:"}),s.jsx("p",{className:"text-gray-600",children:y.notes})]}),s.jsx("div",{className:"border-t pt-4 mt-4",children:s.jsx("div",{className:"flex justify-center",children:s.jsx(o8,{animalId:y.animal_id})})})]})]})}),s.jsx(et,{open:_,onOpenChange:S,children:s.jsxs(Qe,{className:"max-w-md w-full mx-4",children:[s.jsx(tt,{children:s.jsx(nt,{children:"Confirmer la suppression"})}),C&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("p",{className:"text-gray-600",children:["Êtes-vous sûr de vouloir supprimer la vaccination ",s.jsx("strong",{children:C.vaccine_name})," pour ",s.jsx("strong",{children:C.petName})," ?"]}),s.jsx("p",{className:"text-sm text-red-600",children:"Cette action est irréversible."}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2",children:[s.jsx(F,{variant:"outline",onClick:()=>S(!1),className:"w-full sm:w-auto",children:"Annuler"}),s.jsx(F,{variant:"destructive",onClick:I,className:"w-full sm:w-auto",children:"Supprimer"})]})]})]})})]})}var qy="Switch",[uke,hTe]=Kr(qy),[dke,hke]=uke(qy),T8=b.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:a,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=e,[m,f]=b.useState(null),g=pt(t,j=>f(j)),p=b.useRef(!1),v=m?d||!!m.closest("form"):!0,[x,y]=bi({prop:a,defaultProp:i??!1,onChange:u,caller:qy});return s.jsxs(dke,{scope:n,checked:x,disabled:l,children:[s.jsx(ze.button,{type:"button",role:"switch","aria-checked":x,"aria-required":o,"data-state":M8(x),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:g,onClick:ke(e.onClick,j=>{y(w=>!w),v&&(p.current=j.isPropagationStopped(),p.current||j.stopPropagation())})}),v&&s.jsx(D8,{control:m,bubbles:!p.current,name:r,value:c,checked:x,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});T8.displayName=qy;var E8="SwitchThumb",O8=b.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,a=hke(E8,n);return s.jsx(ze.span,{"data-state":M8(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t})});O8.displayName=E8;var mke="SwitchBubbleInput",D8=b.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...a},i)=>{const o=b.useRef(null),l=pt(o,i),c=qS(n),u=rS(t);return b.useEffect(()=>{const d=o.current;if(!d)return;const h=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==n&&f){const g=new Event("click",{bubbles:r});f.call(d,n),d.dispatchEvent(g)}},[c,n,r]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:l,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});D8.displayName=mke;function M8(e){return e?"checked":"unchecked"}var I8=T8,fke=O8;const Ir=b.forwardRef(({className:e,...t},n)=>s.jsx(I8,{className:De("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:s.jsx(fke,{className:De("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Ir.displayName=I8.displayName;function pke({open:e,onOpenChange:t,editingProtocol:n}){const r=ZZ(),a=eee(),{toast:i}=it(),[o,l]=b.useState({species:"",parasiteType:"",productName:"",activeIngredient:"",administrationRoute:"",dosageRecommendation:"",frequencyDays:"",ageRecommendation:"",weightRange:"",seasonRecommendation:"",notes:"",active:!0});b.useEffect(()=>{n&&l({species:n.species,parasiteType:n.parasite_type,productName:n.product_name,activeIngredient:n.active_ingredient||"",administrationRoute:n.administration_route||"",dosageRecommendation:n.dosage_per_kg||"",frequencyDays:"",ageRecommendation:n.age_restriction||"",weightRange:"",seasonRecommendation:"",notes:n.notes||"",active:n.active})},[n]);const c=(m,f)=>{l(g=>({...g,[m]:f}))},u=()=>{l({species:"",parasiteType:"",productName:"",activeIngredient:"",administrationRoute:"",dosageRecommendation:"",frequencyDays:"",ageRecommendation:"",weightRange:"",seasonRecommendation:"",notes:"",active:!0})},d=async m=>{if(m.preventDefault(),!o.species||!o.parasiteType||!o.productName){i({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires.",variant:"destructive"});return}try{const f={species:o.species,parasite_type:o.parasiteType,product_name:o.productName,active_ingredient:o.activeIngredient||void 0,administration_route:o.administrationRoute||void 0,dosage_per_kg:o.dosageRecommendation||void 0,frequency:o.frequencyDays?`${o.frequencyDays} jours`:void 0,age_restriction:o.ageRecommendation||void 0,notes:[o.notes,o.weightRange?`Poids: ${o.weightRange}`:"",o.seasonRecommendation?`Saison: ${o.seasonRecommendation}`:""].filter(Boolean).join(" | ")||void 0,active:o.active};n?(await a.mutateAsync({id:n.id,updates:f}),i({title:"Succès",description:"Le protocole antiparasitaire a été modifié avec succès."})):(await r.mutateAsync(f),i({title:"Succès",description:"Le protocole antiparasitaire a été créé avec succès."})),u(),t(!1)}catch(f){console.error("Erreur lors de la sauvegarde du protocole:",f),i({title:"Erreur",description:"Une erreur s'est produite lors de la sauvegarde.",variant:"destructive"})}},h=r.isPending||a.isPending;return s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Qe,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[s.jsx(tt,{children:s.jsxs(nt,{className:"flex items-center gap-2",children:[s.jsx(Pr,{className:"h-5 w-5"}),n?"Modifier le protocole":"Nouveau protocole antiparasitaire"]})}),s.jsxs("form",{onSubmit:d,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"species",children:"Espèce *"}),s.jsxs(we,{value:o.species,onValueChange:m=>c("species",m),children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Sélectionner une espèce"})}),s.jsxs(be,{children:[s.jsx($,{value:"Chien",children:"Chien"}),s.jsx($,{value:"Chat",children:"Chat"}),s.jsx($,{value:"Oiseau",children:"Oiseau"}),s.jsx($,{value:"Lapin",children:"Lapin"}),s.jsx($,{value:"Furet",children:"Furet"}),s.jsx($,{value:"Autre",children:"Autre"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"parasiteType",children:"Type de parasite *"}),s.jsxs(we,{value:o.parasiteType,onValueChange:m=>c("parasiteType",m),children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Sélectionner le type"})}),s.jsxs(be,{children:[s.jsx($,{value:"puces",children:"Puces"}),s.jsx($,{value:"tiques",children:"Tiques"}),s.jsx($,{value:"vers_intestinaux",children:"Vers intestinaux"}),s.jsx($,{value:"vers_cardiaques",children:"Vers cardiaques"}),s.jsx($,{value:"acariens",children:"Acariens"}),s.jsx($,{value:"poux",children:"Poux"}),s.jsx($,{value:"multi_parasites",children:"Multi-parasites"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"productName",children:"Nom du produit *"}),s.jsx(G,{id:"productName",value:o.productName,onChange:m=>c("productName",m.target.value),placeholder:"Ex: Frontline, Bravecto...",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"activeIngredient",children:"Principe actif"}),s.jsx(G,{id:"activeIngredient",value:o.activeIngredient,onChange:m=>c("activeIngredient",m.target.value),placeholder:"Ex: Fipronil, Fluralaner..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"administrationRoute",children:"Voie d'administration"}),s.jsxs(we,{value:o.administrationRoute,onValueChange:m=>c("administrationRoute",m),children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Sélectionner la voie"})}),s.jsxs(be,{children:[s.jsx($,{value:"spot_on",children:"Spot-on (pipette)"}),s.jsx($,{value:"oral",children:"Orale (comprimé/liquide)"}),s.jsx($,{value:"injection",children:"Injection"}),s.jsx($,{value:"spray",children:"Spray"}),s.jsx($,{value:"collier",children:"Collier"}),s.jsx($,{value:"shampoing",children:"Shampoing"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"dosageRecommendation",children:"Recommandation de dosage"}),s.jsx(G,{id:"dosageRecommendation",value:o.dosageRecommendation,onChange:m=>c("dosageRecommendation",m.target.value),placeholder:"Ex: 1 pipette par 10-20kg..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"frequencyDays",children:"Fréquence (jours)"}),s.jsx(G,{id:"frequencyDays",type:"number",value:o.frequencyDays,onChange:m=>c("frequencyDays",m.target.value),placeholder:"Ex: 30, 90..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"ageRecommendation",children:"Recommandation d'âge"}),s.jsx(G,{id:"ageRecommendation",value:o.ageRecommendation,onChange:m=>c("ageRecommendation",m.target.value),placeholder:"Ex: > 8 semaines, adulte..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"weightRange",children:"Gamme de poids"}),s.jsx(G,{id:"weightRange",value:o.weightRange,onChange:m=>c("weightRange",m.target.value),placeholder:"Ex: 10-20kg, < 5kg..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"seasonRecommendation",children:"Recommandation saisonnière"}),s.jsxs(we,{value:o.seasonRecommendation,onValueChange:m=>c("seasonRecommendation",m),children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Sélectionner la saison"})}),s.jsxs(be,{children:[s.jsx($,{value:"toute_annee",children:"Toute l'année"}),s.jsx($,{value:"printemps_ete",children:"Printemps-Été"}),s.jsx($,{value:"automne_hiver",children:"Automne-Hiver"}),s.jsx($,{value:"printemps",children:"Printemps"}),s.jsx($,{value:"ete",children:"Été"}),s.jsx($,{value:"automne",children:"Automne"}),s.jsx($,{value:"hiver",children:"Hiver"})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"notes",children:"Notes"}),s.jsx(Ue,{id:"notes",value:o.notes,onChange:m=>c("notes",m.target.value),placeholder:"Informations supplémentaires, contre-indications...",rows:3})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Ir,{id:"active",checked:o.active,onCheckedChange:m=>c("active",m)}),s.jsx(D,{htmlFor:"active",children:"Protocole actif"})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx(F,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsxs(F,{type:"submit",disabled:h,children:[h&&s.jsx(Kn,{className:"h-4 w-4 mr-2 animate-spin"}),n?"Modifier":"Créer"]})]})]})]})})}const gke=e=>{if(!e.next_treatment_date)return"completed";const t=new Date(e.next_treatment_date),n=new Date,r=XS(n,7);return Yg(t,n)?"overdue":Yg(t,r)?"upcoming":"scheduled"},fO=e=>{switch(e){case"completed":return"bg-green-100 text-green-800 border-green-200";case"overdue":return"bg-red-100 text-red-800 border-red-200";case"scheduled":return"bg-blue-100 text-blue-800 border-blue-200";case"upcoming":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},pO=e=>{switch(e){case"completed":return s.jsx(Mn,{className:"h-4 w-4"});case"overdue":return s.jsx(gn,{className:"h-4 w-4"});case"scheduled":return s.jsx(Kt,{className:"h-4 w-4"});case"upcoming":return s.jsx(Ke,{className:"h-4 w-4"});default:return s.jsx(Kt,{className:"h-4 w-4"})}},gO=e=>{switch(e){case"completed":return"Terminé";case"overdue":return"En retard";case"scheduled":return"Programmé";case"upcoming":return"À venir";default:return"Inconnu"}},vke=(e,t,n)=>e.map(r=>{const a=t.find(l=>l.id===r.animal_id),i=a?n.find(l=>l.id===a.client_id):null,o=gke(r);return{...r,petName:(a==null?void 0:a.name)||"Animal inconnu",petSpecies:(a==null?void 0:a.species)||"Espèce inconnue",clientName:i?`${i.first_name} ${i.last_name}`:"Client inconnu",status:o,animal:a,client:i}});function xke(){const{currentView:e}=fc("antiparasitics"),{data:t=[],isLoading:n}=Hx(),{data:r=[],isLoading:a}=XZ(),{data:i=[]}=nr(),{data:o=[]}=tr(),l=QZ(),{toast:c}=it(),[u,d]=b.useState(""),[h,m]=b.useState("all"),[f,g]=b.useState("all"),[p,v]=b.useState(!1),[x,y]=b.useState(!1),[j,w]=b.useState(!1),[N,_]=b.useState(null),[S,C]=b.useState(!1),[A,T]=b.useState(null),[E,k]=b.useState(null),R=b.useMemo(()=>vke(t,i,o),[t,i,o]),I=b.useMemo(()=>R.filter(B=>{const U=!u||B.petName.toLowerCase().includes(u.toLowerCase())||B.clientName.toLowerCase().includes(u.toLowerCase())||B.product_name.toLowerCase().includes(u.toLowerCase()),X=h==="all"||B.status===h,ie=f==="all"||B.parasite_type===f;return U&&X&&ie}),[R,u,h,f]),W=b.useMemo(()=>{const B=R.length,U=R.filter(de=>de.status==="overdue").length,X=R.filter(de=>de.status==="upcoming").length,ie=R.filter(de=>de.status==="completed").length,re=R.reduce((de,pe)=>{const ce=pe.parasite_type||"Non spécifié";return de[ce]=(de[ce]||0)+1,de},{});return{total:B,overdue:U,upcoming:X,completed:ie,parasiteTypes:re}},[R]),V=B=>{T(B),C(!0)},q=async()=>{if(A)try{await l.mutateAsync(A.id),c({title:"Succès",description:"Le traitement antiparasitaire a été supprimé."}),C(!1),T(null)}catch{c({title:"Erreur",description:"Impossible de supprimer le traitement.",variant:"destructive"})}},O=(B=>[...new Set(B)])(R.map(B=>B.parasite_type).filter(Boolean));return n?s.jsxs("div",{className:"flex items-center justify-center h-64",children:[s.jsx(Kn,{className:"h-8 w-8 animate-spin"}),s.jsx("span",{className:"ml-2",children:"Chargement des traitements antiparasitaires..."})]}):s.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto p-4 sm:p-6 lg:p-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold flex items-center gap-3",children:[s.jsx(hl,{className:"h-6 w-6 sm:h-8 sm:w-8"}),"Traitements Antiparasitaires"]}),s.jsx("p",{className:"text-gray-600 mt-1 text-sm sm:text-base",children:"Gestion des traitements antiparasitaires et protocoles"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[s.jsxs(F,{onClick:()=>y(!0),variant:"outline",className:"gap-2 w-full sm:w-auto",children:[s.jsx(Pr,{className:"h-4 w-4"}),"Protocoles"]}),s.jsxs(F,{onClick:()=>v(!0),className:"gap-2 w-full sm:w-auto",children:[s.jsx(at,{className:"h-4 w-4"}),"Nouveau traitement"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(Z,{children:s.jsx(ee,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),s.jsx("p",{className:"text-2xl font-bold",children:W.total})]}),s.jsx(Oa,{className:"h-8 w-8 text-blue-500"})]})})}),s.jsx(Z,{children:s.jsx(ee,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"En retard"}),s.jsx("p",{className:"text-2xl font-bold text-red-600",children:W.overdue})]}),s.jsx(gn,{className:"h-8 w-8 text-red-500"})]})})}),s.jsx(Z,{children:s.jsx(ee,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"À venir"}),s.jsx("p",{className:"text-2xl font-bold text-orange-600",children:W.upcoming})]}),s.jsx(Ke,{className:"h-8 w-8 text-orange-500"})]})})}),s.jsx(Z,{children:s.jsx(ee,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Terminés"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:W.completed})]}),s.jsx(Mn,{className:"h-8 w-8 text-green-500"})]})})})]}),s.jsx(Z,{children:s.jsx(ee,{className:"p-4",children:s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx($o,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx(G,{placeholder:"Rechercher par animal, client ou produit...",value:u,onChange:B=>d(B.target.value),className:"pl-10"})]})}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs(we,{value:h,onValueChange:m,children:[s.jsx(je,{className:"w-full sm:w-48",children:s.jsx(Ne,{placeholder:"Filtrer par statut"})}),s.jsxs(be,{children:[s.jsx($,{value:"all",children:"Tous les statuts"}),s.jsx($,{value:"overdue",children:"En retard"}),s.jsx($,{value:"upcoming",children:"À venir"}),s.jsx($,{value:"scheduled",children:"Programmés"}),s.jsx($,{value:"completed",children:"Terminés"})]})]}),s.jsxs(we,{value:f,onValueChange:g,children:[s.jsx(je,{className:"w-full sm:w-48",children:s.jsx(Ne,{placeholder:"Filtrer par parasite"})}),s.jsxs(be,{children:[s.jsx($,{value:"all",children:"Tous les parasites"}),O.map(B=>s.jsx($,{value:B,children:B},B))]})]})]})]})})}),s.jsxs(Ti,{defaultValue:"overview",className:"space-y-4",children:[s.jsxs(qa,{className:"flex flex-wrap",children:[s.jsxs(Tt,{value:"overview",className:"flex items-center gap-2 flex-1 sm:flex-none",children:[s.jsx(wi,{className:"h-4 w-4"}),"Vue d'ensemble"]}),s.jsxs(Tt,{value:"protocols",className:"flex items-center gap-2 flex-1 sm:flex-none",children:[s.jsx(Pr,{className:"h-4 w-4"}),"Protocoles"]}),s.jsxs(Tt,{value:"statistics",className:"flex items-center gap-2 flex-1 sm:flex-none",children:[s.jsx(an,{className:"h-4 w-4"}),"Statistiques"]})]}),s.jsx(Et,{value:"overview",children:s.jsxs(Z,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2",children:[s.jsxs("span",{children:["Traitements antiparasitaires (",I.length,")"]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs(F,{variant:"outline",size:"sm",onClick:()=>{},children:[s.jsx(yx,{className:"h-4 w-4 mr-1"}),"Export"]})})]})}),s.jsxs(ee,{children:[e==="table"?s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Ud,{children:[s.jsx(Wd,{children:s.jsxs(ca,{children:[s.jsx(ct,{children:"Animal"}),s.jsx(ct,{children:"Client"}),s.jsx(ct,{children:"Produit"}),s.jsx(ct,{children:"Parasite"}),s.jsx(ct,{children:"Date traitement"}),s.jsx(ct,{children:"Prochain traitement"}),s.jsx(ct,{children:"Statut"}),s.jsx(ct,{children:"Actions"})]})}),s.jsx(Hd,{children:I.map(B=>s.jsxs(ca,{children:[s.jsx(ut,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Zn,{className:"h-8 w-8",children:s.jsx(er,{children:s.jsx(kg,{className:"h-4 w-4"})})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:B.petName}),s.jsx("div",{className:"text-sm text-gray-500",children:B.petSpecies})]})]})}),s.jsx(ut,{children:B.clientName}),s.jsx(ut,{children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:B.product_name}),B.active_ingredient&&s.jsx("div",{className:"text-sm text-gray-500",children:B.active_ingredient})]})}),s.jsx(ut,{children:B.parasite_type&&s.jsx(_e,{variant:"outline",children:B.parasite_type})}),s.jsx(ut,{children:Je(new Date(B.treatment_date),"dd/MM/yyyy",{locale:Rn})}),s.jsx(ut,{children:B.next_treatment_date?Je(new Date(B.next_treatment_date),"dd/MM/yyyy",{locale:Rn}):"N/A"}),s.jsx(ut,{children:s.jsx(_e,{className:fO(B.status),children:s.jsxs("div",{className:"flex items-center gap-1",children:[pO(B.status),gO(B.status)]})})}),s.jsx(ut,{children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(F,{variant:"ghost",size:"sm",onClick:()=>{_(B),w(!0)},children:s.jsx(Nn,{className:"h-4 w-4"})}),s.jsx(F,{variant:"ghost",size:"sm",onClick:()=>V(B),children:s.jsx(rn,{className:"h-4 w-4"})})]})})]},B.id))})]})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:I.map(B=>s.jsx(Z,{className:"hover:shadow-md transition-shadow",children:s.jsxs(ee,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Zn,{className:"h-8 w-8",children:s.jsx(er,{children:s.jsx(kg,{className:"h-4 w-4"})})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-sm",children:B.petName}),s.jsx("p",{className:"text-xs text-gray-600",children:B.clientName})]})]}),s.jsx(_e,{className:fO(B.status),children:s.jsxs("div",{className:"flex items-center gap-1",children:[pO(B.status),gO(B.status)]})})]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Produit:"})," ",B.product_name]}),B.parasite_type&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Parasite:"})," ",B.parasite_type]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Date:"})," ",Je(new Date(B.treatment_date),"dd/MM/yyyy")]}),B.next_treatment_date&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Prochain:"})," ",Je(new Date(B.next_treatment_date),"dd/MM/yyyy")]})]}),s.jsxs("div",{className:"flex justify-between mt-4",children:[s.jsxs(F,{variant:"outline",size:"sm",onClick:()=>{_(B),w(!0)},children:[s.jsx(Nn,{className:"h-4 w-4 mr-1"}),"Détails"]}),s.jsx(F,{variant:"ghost",size:"sm",onClick:()=>V(B),children:s.jsx(rn,{className:"h-4 w-4"})})]})]})},B.id))}),I.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(hl,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),s.jsx("p",{children:"Aucun traitement antiparasitaire trouvé"})]})]})]})}),s.jsx(Et,{value:"protocols",children:s.jsxs(Z,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2",children:[s.jsxs("span",{children:["Protocoles antiparasitaires (",r.length,")"]}),s.jsxs(F,{onClick:()=>{k(null),y(!0)},className:"gap-2 w-full sm:w-auto",children:[s.jsx(at,{className:"h-4 w-4"}),"Nouveau protocole"]})]})}),s.jsxs(ee,{children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(B=>s.jsx(Z,{className:"hover:shadow-md transition-shadow",children:s.jsxs(ee,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx(_e,{variant:"outline",children:B.species}),s.jsx("div",{className:"flex gap-1",children:s.jsx(F,{variant:"ghost",size:"sm",onClick:()=>{k(B),y(!0)},children:s.jsx($t,{className:"h-4 w-4"})})})]}),s.jsx("h4",{className:"font-medium mb-2",children:B.product_name}),s.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Parasite:"})," ",B.parasite_type]}),B.active_ingredient&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Principe actif:"})," ",B.active_ingredient]}),B.frequency&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Fréquence:"})," ",B.frequency]})]})]})},B.id))}),r.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(Pr,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),s.jsx("p",{children:"Aucun protocole configuré"})]})]})]})}),s.jsx(Et,{value:"statistics",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(Z,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(an,{className:"h-5 w-5"}),"Répartition par type de parasite"]})}),s.jsx(ee,{children:s.jsx("div",{className:"space-y-3",children:Object.entries(W.parasiteTypes).map(([B,U])=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:B}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"bg-gray-200 rounded-full h-2 w-20",children:s.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${U/W.total*100}%`}})}),s.jsx("span",{className:"text-sm font-medium",children:U})]})]},B))})})]}),s.jsxs(Z,{children:[s.jsx(he,{children:s.jsx(me,{children:"Résumé des traitements"})}),s.jsx(ee,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:"Total des traitements"}),s.jsx("span",{className:"font-bold",children:W.total})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:"En retard"}),s.jsx("span",{className:"font-bold text-red-600",children:W.overdue})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:"À venir (7 jours)"}),s.jsx("span",{className:"font-bold text-orange-600",children:W.upcoming})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:"Terminés"}),s.jsx("span",{className:"font-bold text-green-600",children:W.completed})]})]})})]})]})})]}),s.jsx(KN,{open:p,onOpenChange:v}),s.jsx(pke,{open:x,onOpenChange:y,editingProtocol:E}),s.jsx(et,{open:j,onOpenChange:w,children:s.jsxs(Qe,{className:"max-w-2xl",children:[s.jsx(tt,{children:s.jsx(nt,{children:"Détails du traitement"})}),N&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Animal:"}),s.jsx("p",{children:N.petName})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Client:"}),s.jsx("p",{children:N.clientName})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Produit:"}),s.jsx("p",{children:N.product_name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Principe actif:"}),s.jsx("p",{children:N.active_ingredient||"N/A"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Type de parasite:"}),s.jsx("p",{children:N.parasite_type||"N/A"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Voie d'administration:"}),s.jsx("p",{children:N.administration_route||"N/A"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Dosage:"}),s.jsx("p",{children:N.dosage||"N/A"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Date du traitement:"}),s.jsx("p",{children:Je(new Date(N.treatment_date),"dd/MM/yyyy",{locale:Rn})})]}),N.next_treatment_date&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Prochain traitement:"}),s.jsx("p",{children:Je(new Date(N.next_treatment_date),"dd/MM/yyyy",{locale:Rn})})]}),N.effectiveness_rating&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Efficacité:"}),s.jsxs("p",{children:[N.effectiveness_rating,"/10"]})]})]}),N.notes&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Notes:"}),s.jsx("p",{className:"text-gray-600",children:N.notes})]})]})]})}),s.jsx(et,{open:S,onOpenChange:C,children:s.jsxs(Qe,{className:"max-w-md",children:[s.jsx(tt,{children:s.jsx(nt,{children:"Confirmer la suppression"})}),A&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("p",{className:"text-gray-600",children:["Êtes-vous sûr de vouloir supprimer le traitement ",s.jsx("strong",{children:A.product_name})," pour ",s.jsx("strong",{children:A.petName})," ?"]}),s.jsx("p",{className:"text-sm text-red-600",children:"Cette action est irréversible."}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2",children:[s.jsx(F,{variant:"outline",onClick:()=>C(!1),className:"w-full sm:w-auto",children:"Annuler"}),s.jsx(F,{variant:"destructive",onClick:q,className:"w-full sm:w-auto",children:"Supprimer"})]})]})]})})]})}const yke=[{value:"medication",label:"Médicaments",icon:"💊"},{value:"vaccine",label:"Vaccins",icon:"💉"},{value:"consumable",label:"Consommables",icon:"🩹"},{value:"equipment",label:"Équipement",icon:"🔧"},{value:"supplement",label:"Suppléments",icon:"🧪"}],jke=[{value:"unit",label:"Unité"},{value:"box",label:"Boîte"},{value:"vial",label:"Flacon"},{value:"bottle",label:"Bouteille"},{value:"pack",label:"Paquet"},{value:"kg",label:"Kilogramme"},{value:"g",label:"Gramme"},{value:"ml",label:"Millilitre"},{value:"l",label:"Litre"}],bke={medication:["Antibiotique","Anti-inflammatoire","Antiparasitaire","Anesthésique","Analgésique","Antihistaminique","Corticoïde","Diurétique","Autre"],vaccine:["Vaccin Core","Vaccin Non-Core","Vaccin Obligatoire","Vaccin Recommandé","Autre"],consumable:["Matériel d'injection","Protection","Pansement","Suture","Autre"],equipment:["Diagnostic","Chirurgie","Monitoring","Stérilisation","Autre"],supplement:["Vitamines","Minéraux","Probiotiques","Acides aminés","Autre"]};function vO({open:e,onOpenChange:t,editingItem:n}){var h;const{addStockItem:r,updateStockItem:a}=bt(),{settings:i}=Pt(),{toast:o}=it(),[l,c]=b.useState({name:"",category:"medication",subcategory:"",description:"",manufacturer:"",batchNumber:"",dosage:"",unit:"unit",currentStock:0,minimumStock:0,maximumStock:0,purchasePrice:0,sellingPrice:0,expirationDate:"",supplier:"",location:"",notes:"",barcode:"",sku:"",isActive:!0});b.useEffect(()=>{c(n?{name:n.name,category:n.category,subcategory:n.subcategory||"",description:n.description||"",manufacturer:n.manufacturer||"",batchNumber:n.batchNumber||"",dosage:n.dosage||"",unit:n.unit,currentStock:n.currentStock,minimumStock:n.minimumStock,maximumStock:n.maximumStock||0,purchasePrice:n.purchasePrice,sellingPrice:n.sellingPrice,expirationDate:n.expirationDate||"",supplier:n.supplier||"",location:n.location||"",notes:n.notes||"",barcode:n.barcode||"",sku:n.sku||"",isActive:n.isActive}:{name:"",category:"medication",subcategory:"",description:"",manufacturer:"",batchNumber:"",dosage:"",unit:"unit",currentStock:0,minimumStock:0,maximumStock:0,purchasePrice:0,sellingPrice:0,expirationDate:"",supplier:"",location:"",notes:"",barcode:"",sku:"",isActive:!0})},[n,e]);const u=m=>{if(m.preventDefault(),!l.name.trim()){o({title:"Erreur",description:"Le nom de l'élément est requis.",variant:"destructive"});return}if(l.currentStock<0||l.minimumStock<0||l.purchasePrice<0||l.sellingPrice<0){o({title:"Erreur",description:"Les valeurs numériques ne peuvent pas être négatives.",variant:"destructive"});return}const f={...l,currentStock:Number(l.currentStock),minimumStock:Number(l.minimumStock),maximumStock:Number(l.maximumStock)||void 0,purchasePrice:Number(l.purchasePrice),sellingPrice:Number(l.sellingPrice),expirationDate:l.expirationDate||void 0,subcategory:l.subcategory||void 0,description:l.description||void 0,manufacturer:l.manufacturer||void 0,batchNumber:l.batchNumber||void 0,dosage:l.dosage||void 0,supplier:l.supplier||void 0,location:l.location||void 0,notes:l.notes||void 0,barcode:l.barcode||void 0,sku:l.sku||void 0};n?(a(n.id,f),o({title:"Élément modifié",description:`"${l.name}" a été modifié avec succès.`})):(r(f),o({title:"Élément ajouté",description:`"${l.name}" a été ajouté au stock.`})),t(!1)},d=(m,f)=>{c(g=>({...g,[m]:f}))};return s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Qe,{className:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[s.jsxs(tt,{children:[s.jsx(nt,{children:n?"Modifier l'élément de stock":"Nouvel élément de stock"}),s.jsx(Bt,{children:n?"Modifiez les informations de l'élément de stock.":"Ajoutez un nouvel élément à votre inventaire."})]}),s.jsxs("form",{onSubmit:u,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Informations de base"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"name",children:"Nom de l'élément *"}),s.jsx(G,{id:"name",value:l.name,onChange:m=>d("name",m.target.value),placeholder:"ex: Amoxicilline 500mg",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"category",children:"Catégorie *"}),s.jsxs(we,{value:l.category,onValueChange:m=>d("category",m),children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Sélectionner une catégorie"})}),s.jsx(be,{children:yke.map(m=>s.jsxs($,{value:m.value,children:[m.icon," ",m.label]},m.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"subcategory",children:"Sous-catégorie"}),s.jsxs(we,{value:l.subcategory,onValueChange:m=>d("subcategory",m),children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Sélectionner une sous-catégorie"})}),s.jsx(be,{children:(h=bke[l.category])==null?void 0:h.map(m=>s.jsx($,{value:m,children:m},m))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"manufacturer",children:"Fabricant"}),s.jsx(G,{id:"manufacturer",value:l.manufacturer,onChange:m=>d("manufacturer",m.target.value),placeholder:"ex: Boehringer Ingelheim"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"description",children:"Description"}),s.jsx(Ue,{id:"description",value:l.description,onChange:m=>d("description",m.target.value),placeholder:"Description détaillée de l'élément...",rows:2})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Informations techniques"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"batchNumber",children:"Numéro de lot"}),s.jsx(G,{id:"batchNumber",value:l.batchNumber,onChange:m=>d("batchNumber",m.target.value),placeholder:"ex: AMX2024001"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"dosage",children:"Dosage"}),s.jsx(G,{id:"dosage",value:l.dosage,onChange:m=>d("dosage",m.target.value),placeholder:"ex: 500mg"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"unit",children:"Unité"}),s.jsxs(we,{value:l.unit,onValueChange:m=>d("unit",m),children:[s.jsx(je,{children:s.jsx(Ne,{placeholder:"Sélectionner une unité"})}),s.jsx(be,{children:jke.map(m=>s.jsx($,{value:m.value,children:m.label},m.value))})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Gestion du stock"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"currentStock",children:"Stock actuel *"}),s.jsx(G,{id:"currentStock",type:"number",min:"0",value:l.currentStock,onChange:m=>d("currentStock",parseInt(m.target.value)||0),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"minimumStock",children:"Stock minimum *"}),s.jsx(G,{id:"minimumStock",type:"number",min:"0",value:l.minimumStock,onChange:m=>d("minimumStock",parseInt(m.target.value)||0),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"maximumStock",children:"Stock maximum"}),s.jsx(G,{id:"maximumStock",type:"number",min:"0",value:l.maximumStock,onChange:m=>d("maximumStock",parseInt(m.target.value)||0)})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(D,{htmlFor:"purchasePrice",children:["Prix d'achat (",i.currency,") *"]}),s.jsx(G,{id:"purchasePrice",type:"number",step:"0.01",min:"0",value:l.purchasePrice,onChange:m=>d("purchasePrice",parseFloat(m.target.value)||0),required:!0}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Prix d'achat au fournisseur"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(D,{htmlFor:"sellingPrice",children:["Prix de vente (",i.currency,") *"]}),s.jsx(G,{id:"sellingPrice",type:"number",step:"0.01",min:"0",value:l.sellingPrice,onChange:m=>d("sellingPrice",parseFloat(m.target.value)||0),required:!0}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Prix de vente au client"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"La valeur totale sera calculée automatiquement : Prix d'achat × Stock actuel"}),l.purchasePrice>0&&l.currentStock>0&&s.jsxs("div",{className:"text-sm font-medium text-primary",children:["Valeur totale : ",(l.purchasePrice*l.currentStock).toFixed(2)," ",i.currency]}),l.purchasePrice>0&&l.sellingPrice>0&&s.jsxs("div",{className:"text-sm font-medium text-green-600",children:["Marge : ",((l.sellingPrice-l.purchasePrice)*l.currentStock).toFixed(2)," ",i.currency]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Informations supplémentaires"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"expirationDate",children:"Date d'expiration"}),s.jsx(G,{id:"expirationDate",type:"date",value:l.expirationDate,onChange:m=>d("expirationDate",m.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"supplier",children:"Fournisseur"}),s.jsx(G,{id:"supplier",value:l.supplier,onChange:m=>d("supplier",m.target.value),placeholder:"ex: Pharmacie Vétérinaire Centrale"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"location",children:"Emplacement"}),s.jsx(G,{id:"location",value:l.location,onChange:m=>d("location",m.target.value),placeholder:"ex: Armoire A - Étagère 1"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"barcode",children:"Code-barres"}),s.jsx(G,{id:"barcode",value:l.barcode,onChange:m=>d("barcode",m.target.value),placeholder:"ex: 1234567890123"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"sku",children:"SKU"}),s.jsx(G,{id:"sku",value:l.sku,onChange:m=>d("sku",m.target.value),placeholder:"ex: MED-AMX-500"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"notes",children:"Notes"}),s.jsx(Ue,{id:"notes",value:l.notes,onChange:m=>d("notes",m.target.value),placeholder:"Notes supplémentaires...",rows:3})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(F,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsx(F,{type:"submit",children:n?"Modifier":"Ajouter"})]})]})]})})}const wke=[{value:"in",label:"Entrée",icon:an,description:"Ajout de stock (achat, retour, etc.)"},{value:"out",label:"Sortie",icon:Ll,description:"Utilisation, vente, perte, etc."},{value:"adjustment",label:"Ajustement",icon:bI,description:"Correction d'inventaire"},{value:"transfer",label:"Transfert",icon:nU,description:"Déplacement entre emplacements"}],Nke={in:["Achat fournisseur","Retour client","Inventaire initial","Don/échantillon","Transfert entrant","Autre"],out:["Utilisation consultation","Vente client","Périmé/expiré","Cassé/endommagé","Vol/perte","Transfert sortant","Autre"],adjustment:["Correction inventaire","Comptage physique","Erreur saisie","Autre"],transfer:["Changement emplacement","Transfert entre sites","Réorganisation stock","Autre"]};function Ske({open:e,onOpenChange:t,item:n}){var g;const{updateStockItem:r,addStockMovement:a}=bt(),{settings:i}=Pt(),{toast:o}=it(),[l,c]=b.useState({type:"out",quantity:0,reason:"",reference:"",performedBy:"",notes:""}),[u,d]=b.useState("");b.useEffect(()=>{n&&(c({type:"out",quantity:0,reason:"",reference:"",performedBy:"",notes:""}),d(""))},[n,e]);const h=p=>{if(p.preventDefault(),!n)return;if(l.quantity<=0){o({title:"Erreur",description:"La quantité doit être supérieure à 0.",variant:"destructive"});return}if(!l.reason.trim()){o({title:"Erreur",description:"La raison du mouvement est requise.",variant:"destructive"});return}let v=n.currentStock;if(l.type==="in")v+=l.quantity;else if(l.type==="out"){if(l.quantity>n.currentStock){o({title:"Erreur",description:`Stock insuffisant. Stock disponible: ${n.currentStock}`,variant:"destructive"});return}v-=l.quantity}else l.type==="adjustment"&&(v=l.quantity);l.type!=="transfer"&&r(n.id,{currentStock:v,lastRestocked:l.type==="in"?new Date().toISOString().split("T")[0]:void 0});const x=l.performedBy==="Autre"?u:l.performedBy,y={itemId:n.id,itemName:n.name,type:l.type,quantity:l.quantity,reason:l.reason,reference:l.reference||void 0,performedBy:x||void 0,date:new Date().toISOString(),notes:l.notes||void 0};a(y),o({title:"Mouvement enregistré",description:`${{in:"Entrée",out:"Sortie",adjustment:"Ajustement",transfer:"Transfert"}[l.type]} de ${l.quantity} ${n.unit} pour "${n.name}" enregistrée.`}),t(!1)},m=(p,v)=>{c(x=>({...x,[p]:v}))},f=()=>{if(!n)return 0;let p=n.currentStock;return l.type==="in"?p+=l.quantity:l.type==="out"?p-=l.quantity:l.type==="adjustment"&&(p=l.quantity),Math.max(0,p)};return n?s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Qe,{className:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[s.jsxs(tt,{children:[s.jsxs(nt,{className:"flex items-center gap-2",children:[s.jsx(an,{className:"h-5 w-5"}),"Mouvement de stock"]}),s.jsxs(Bt,{children:['Enregistrer un mouvement pour "',n.name,'"']})]}),s.jsxs("form",{onSubmit:h,className:"space-y-6",children:[s.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-lg border border-blue-200",children:[s.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[s.jsx(Oa,{className:"h-5 w-5 text-blue-600"}),"Élément concerné"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-white p-3 rounded-lg border",children:[s.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Stock actuel"}),s.jsxs("div",{className:"font-semibold text-lg",children:[n.currentStock," ",n.unit]})]}),s.jsxs("div",{className:"bg-white p-3 rounded-lg border",children:[s.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Stock minimum"}),s.jsxs("div",{className:"font-semibold text-lg",children:[n.minimumStock," ",n.unit]})]}),s.jsxs("div",{className:"bg-white p-3 rounded-lg border",children:[s.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Emplacement"}),s.jsxs("div",{className:"font-semibold text-lg flex items-center gap-1",children:[s.jsx(rc,{className:"h-4 w-4"}),n.location||"Non défini"]})]}),s.jsxs("div",{className:"bg-white p-3 rounded-lg border",children:[s.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Prix d'achat"}),s.jsxs("div",{className:"font-semibold text-lg text-blue-600",children:[n.purchasePrice.toFixed(2)," ",i.currency]})]}),s.jsxs("div",{className:"bg-white p-3 rounded-lg border",children:[s.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Prix de vente"}),s.jsxs("div",{className:"font-semibold text-lg text-green-600",children:[n.sellingPrice.toFixed(2)," ",i.currency]})]}),s.jsxs("div",{className:"bg-white p-3 rounded-lg border",children:[s.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Valeur totale"}),s.jsxs("div",{className:"font-semibold text-lg text-purple-600",children:[n.totalValue.toFixed(2)," ",i.currency]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{className:"text-base font-medium",children:"Type de mouvement *"}),s.jsxs(we,{value:l.type,onValueChange:p=>m("type",p),children:[s.jsx(je,{className:"h-12",children:s.jsx(Ne,{placeholder:"Sélectionner le type de mouvement"})}),s.jsx(be,{children:wke.map(p=>{const v=p.icon;return s.jsx($,{value:p.value,children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(v,{className:"h-5 w-5"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:p.label}),s.jsx("div",{className:"text-xs text-muted-foreground",children:p.description})]})]})},p.value)})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"quantity",className:"text-base font-medium",children:"Quantité *"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(G,{id:"quantity",type:"number",min:"0",step:"0.01",value:l.quantity,onChange:p=>m("quantity",parseFloat(p.target.value)||0),className:"flex-1 h-12 text-lg",required:!0}),s.jsx("div",{className:"bg-muted px-3 py-2 rounded-md text-sm font-medium",children:n.unit})]}),l.quantity>0&&s.jsxs("div",{className:"bg-muted p-3 rounded-lg",children:[s.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Nouveau stock après mouvement:"}),s.jsxs("div",{className:`text-lg font-semibold ${f()<=n.minimumStock?"text-orange-600":"text-green-600"}`,children:[f()," ",n.unit]}),f()<=n.minimumStock&&s.jsxs("div",{className:"text-xs text-orange-600 mt-1 flex items-center gap-1",children:[s.jsx(gn,{className:"h-3 w-3"}),"Stock bas - Seuil minimum atteint"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"reason",className:"text-base font-medium",children:"Raison *"}),s.jsxs(we,{value:l.reason,onValueChange:p=>m("reason",p),children:[s.jsx(je,{className:"h-12",children:s.jsx(Ne,{placeholder:"Sélectionner une raison"})}),s.jsx(be,{children:(g=Nke[l.type])==null?void 0:g.map(p=>s.jsx($,{value:p,children:p},p))})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"reference",className:"text-base font-medium",children:"Référence"}),s.jsx(G,{id:"reference",value:l.reference,onChange:p=>m("reference",p.target.value),placeholder:"ex: Facture #12345, Consultation #678",className:"h-12"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"performedBy",className:"text-base font-medium",children:"Effectué par"}),s.jsxs(we,{value:l.performedBy,onValueChange:p=>m("performedBy",p),children:[s.jsx(je,{className:"h-12",children:s.jsx(Ne,{placeholder:"Sélectionner un vétérinaire"})}),s.jsxs(be,{children:[i.veterinarians.filter(p=>p.isActive).map(p=>s.jsx($,{value:p.name,children:p.name},p.id)),s.jsx($,{value:"Autre",children:"Autre (saisie manuelle)"})]})]}),l.performedBy==="Autre"&&s.jsx(G,{placeholder:"Nom du responsable",value:u,onChange:p=>d(p.target.value),className:"h-10 mt-2"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"notes",className:"text-base font-medium",children:"Notes"}),s.jsx(Ue,{id:"notes",value:l.notes,onChange:p=>m("notes",p.target.value),placeholder:"Notes supplémentaires...",rows:4,className:"resize-none"})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t",children:[s.jsx(F,{type:"button",variant:"outline",onClick:()=>t(!1),className:"h-12 px-6",children:"Annuler"}),s.jsxs(F,{type:"submit",className:"h-12 px-8 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700",children:[s.jsx(an,{className:"h-4 w-4 mr-2"}),"Enregistrer le mouvement"]})]})]})]})}):null}const vh={medication:{label:"Médicaments",color:"bg-blue-100 text-blue-800",icon:"💊"},vaccine:{label:"Vaccins",color:"bg-green-100 text-green-800",icon:"💉"},consumable:{label:"Consommables",color:"bg-orange-100 text-orange-800",icon:"🩹"},equipment:{label:"Équipement",color:"bg-purple-100 text-purple-800",icon:"🔧"},supplement:{label:"Suppléments",color:"bg-yellow-100 text-yellow-800",icon:"🧪"}},_ke=[{value:"unit",label:"Unité"},{value:"box",label:"Boîte"},{value:"vial",label:"Flacon"},{value:"bottle",label:"Bouteille"},{value:"pack",label:"Paquet"},{value:"kg",label:"Kilogramme"},{value:"g",label:"Gramme"},{value:"ml",label:"Millilitre"},{value:"l",label:"Litre"}];function Cke(){const{stockItems:e,stockAlerts:t,stockMovements:n,addStockItem:r,updateStockItem:a,deleteStockItem:i,addStockMovement:o,getStockAlerts:l}=bt(),{settings:c}=Pt(),{toast:u}=it(),[d,h]=b.useState(!1),[m,f]=b.useState(!1),[g,p]=b.useState(!1),[v,x]=b.useState(null),[y,j]=b.useState(null),[w,N]=b.useState(""),[_,S]=b.useState("all"),[C,A]=b.useState("all"),[T,E]=b.useState("name"),[k,R]=b.useState("asc"),[I,W]=b.useState(null),[V,q]=b.useState(""),P=b.useMemo(()=>{const se=e.length,ae=e.reduce((ve,ge)=>ve+ge.totalValue,0),le=e.filter(ve=>ve.currentStock<=ve.minimumStock).length,H=e.filter(ve=>ve.expirationDate&&new Date(ve.expirationDate)<new Date).length,Q=e.filter(ve=>ve.expirationDate&&new Date(ve.expirationDate)<=new Date(Date.now()+30*24*60*60*1e3)&&new Date(ve.expirationDate)>new Date).length;return{totalItems:se,totalValue:ae,lowStockItems:le,expiredItems:H,expiringSoonItems:Q}},[e]),O=b.useMemo(()=>{let se=e.filter(ae=>{var ve,ge;const le=ae.name.toLowerCase().includes(w.toLowerCase())||((ve=ae.manufacturer)==null?void 0:ve.toLowerCase().includes(w.toLowerCase()))||((ge=ae.batchNumber)==null?void 0:ge.toLowerCase().includes(w.toLowerCase())),H=_==="all"||ae.category===_;let Q=!0;return C==="low_stock"?Q=ae.currentStock<=ae.minimumStock:C==="expired"?Q=ae.expirationDate&&new Date(ae.expirationDate)<new Date:C==="expiring_soon"?Q=ae.expirationDate&&new Date(ae.expirationDate)<=new Date(Date.now()+2592e6)&&new Date(ae.expirationDate)>new Date:C==="active"&&(Q=ae.isActive),le&&H&&Q});return se.sort((ae,le)=>{let H,Q;switch(T){case"name":H=ae.name.toLowerCase(),Q=le.name.toLowerCase();break;case"currentStock":H=ae.currentStock,Q=le.currentStock;break;case"totalValue":H=ae.totalValue,Q=le.totalValue;break;case"expirationDate":H=ae.expirationDate||"9999-12-31",Q=le.expirationDate||"9999-12-31";break;default:H=ae.name.toLowerCase(),Q=le.name.toLowerCase()}return k==="asc"?H<Q?-1:H>Q?1:0:H>Q?-1:H<Q?1:0}),se},[e,w,_,C,T,k]),B=(se,ae,le)=>{const H={};switch(ae){case"currentStock":H.currentStock=parseInt(le)||0;break;case"minimumStock":H.minimumStock=parseInt(le)||0;break;case"purchasePrice":H.purchasePrice=parseFloat(le)||0;break;case"sellingPrice":H.sellingPrice=parseFloat(le)||0;break;case"location":H.location=le;break;case"notes":H.notes=le;break}a(se,H),W(null),u({title:"Stock mis à jour",description:"L'élément de stock a été mis à jour avec succès."})},U=se=>{j(se),p(!0)},X=se=>{p(se),se||j(null)},ie=se=>{confirm(`Êtes-vous sûr de vouloir supprimer "${se.name}" du stock ?`)&&(i(se.id),u({title:"Élément supprimé",description:`"${se.name}" a été supprimé du stock.`}))},re=se=>{x(se),f(!0)},de=()=>{const se=[["Nom","Catégorie","Sous-catégorie","Fabricant","Numéro de lot","Dosage","Unité","Stock actuel","Stock minimum","Prix d'achat","Prix de vente","Date d'expiration","Fournisseur","Emplacement","Notes","Code-barres","SKU"].join(","),...e.map(Q=>[`"${Q.name}"`,`"${Q.category}"`,`"${Q.subcategory||""}"`,`"${Q.manufacturer||""}"`,`"${Q.batchNumber||""}"`,`"${Q.dosage||""}"`,`"${Q.unit}"`,Q.currentStock,Q.minimumStock,Q.purchasePrice,Q.sellingPrice,`"${Q.expirationDate||""}"`,`"${Q.supplier||""}"`,`"${Q.location||""}"`,`"${Q.notes||""}"`,`"${Q.barcode||""}"`,`"${Q.sku||""}"`].join(","))].join(`
`),ae=new Blob([se],{type:"text/csv;charset=utf-8;"}),le=document.createElement("a"),H=URL.createObjectURL(ae);le.setAttribute("href",H),le.setAttribute("download",`stock_${new Date().toISOString().split("T")[0]}.csv`),le.style.visibility="hidden",document.body.appendChild(le),le.click(),document.body.removeChild(le),u({title:"Export réussi",description:"Le fichier CSV a été téléchargé avec succès."})},pe=se=>{var H;const ae=(H=se.target.files)==null?void 0:H[0];if(!ae)return;const le=new FileReader;le.onload=Q=>{var ve;try{const rt=((ve=Q.target)==null?void 0:ve.result).split(`
`),Ge=rt[0].split(",").map(vt=>vt.replace(/"/g,"").trim()),te=["Nom","Catégorie","Unité","Stock actuel","Stock minimum","Prix d'achat","Prix de vente"].filter(vt=>!Ge.includes(vt));if(te.length>0){u({title:"Erreur d'import",description:`En-têtes manquants: ${te.join(", ")}`,variant:"destructive"});return}const Pe=[];let oe=0,Ee=0;for(let vt=1;vt<rt.length;vt++){const At=rt[vt].trim();if(At)try{const xn=At.split(",").map(rr=>rr.replace(/"/g,"").trim()),Ve={};if(Ge.forEach((rr,Yr)=>{Ve[rr]=xn[Yr]||""}),!Ve.Nom||!Ve.Catégorie||!Ve.Unité){Ee++;continue}if(!Object.keys(vh).includes(Ve.Catégorie)){Ee++;continue}const Cn={id:Date.now()+vt,name:Ve.Nom,category:Ve.Catégorie,subcategory:Ve["Sous-catégorie"]||"",manufacturer:Ve.Fabricant||"",batchNumber:Ve["Numéro de lot"]||"",dosage:Ve.Dosage||"",unit:Ve.Unité,currentStock:parseInt(Ve["Stock actuel"])||0,minimumStock:parseInt(Ve["Stock minimum"])||0,purchasePrice:parseFloat(Ve["Prix d'achat"])||0,sellingPrice:parseFloat(Ve["Prix de vente"])||0,totalValue:(parseInt(Ve["Stock actuel"])||0)*(parseFloat(Ve["Prix d'achat"])||0),expirationDate:Ve["Date d'expiration"]||void 0,supplier:Ve.Fournisseur||"",location:Ve.Emplacement||"",notes:Ve.Notes||"",barcode:Ve["Code-barres"]||"",sku:Ve.SKU||"",lastUpdated:new Date().toISOString(),isActive:!0};Pe.push(Cn),oe++}catch(xn){Ee++,console.error(`Erreur ligne ${vt+1}:`,xn)}}Pe.length>0&&Pe.forEach(vt=>{r(vt)}),u({title:"Import terminé",description:`${oe} éléments importés avec succès${Ee>0?`, ${Ee} erreurs`:""}.`})}catch{u({title:"Erreur d'import",description:"Impossible de lire le fichier CSV.",variant:"destructive"})}},le.readAsText(ae),se.target.value=""},ce=()=>{const se=[["Nom","Catégorie","Sous-catégorie","Fabricant","Numéro de lot","Dosage","Unité","Stock actuel","Stock minimum","Prix d'achat","Prix de vente","Date d'expiration","Fournisseur","Emplacement","Notes","Code-barres","SKU"].join(","),["Amoxicilline 500mg","medication","Antibiotique","Boehringer Ingelheim","AMX2024001","500mg","box","15","5","20.00","25.50","2025-12-31","Pharmacie Vétérinaire Centrale","Armoire A - Étagère 1","Stockage à température ambiante","1234567890123","MED-AMX-500"].join(","),["Vaccin DHPP","vaccine","Vaccin combiné","Merial","VAC2024001","1ml","vial","25","10","45.00","55.00","2025-06-30","VetoPharma","Réfrigérateur - Étagère 1","Conservation entre 2-8°C","9876543210987","VAC-DHPP-001"].join(","),["Seringues 5ml","consumable","Matériel médical","BD","SYR2024001","5ml","unit","100","20","0.50","0.75","","MedSupply","Armoire B - Étagère 2","Usage unique","5556667778889","CON-SYR-5ML"].join(",")].join(`
`),ae=new Blob([se],{type:"text/csv;charset=utf-8;"}),le=document.createElement("a"),H=URL.createObjectURL(ae);le.setAttribute("href",H),le.setAttribute("download","gabarit_import_stock.csv"),le.style.visibility="hidden",document.body.appendChild(le),le.click(),document.body.removeChild(le),u({title:"Gabarit téléchargé",description:"Le fichier gabarit a été téléchargé avec succès."})};return s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-4 sm:py-8 space-y-4 sm:space-y-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold flex items-center gap-3",children:[s.jsx(Oa,{className:"h-6 sm:h-8 w-6 sm:w-8 text-primary"}),"Gestion de Stock"]}),s.jsx("p",{className:"text-muted-foreground mt-2 text-sm sm:text-base",children:"Gérez votre inventaire de médicaments, vaccins et consommables"})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto",children:[s.jsxs(F,{variant:"outline",onClick:de,className:"gap-2 text-xs sm:text-sm",size:"sm",children:[s.jsx(yx,{className:"h-3 sm:h-4 w-3 sm:w-4"}),"Exporter CSV"]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"file",accept:".csv,.xlsx,.xls",onChange:pe,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",id:"import-file"}),s.jsx(F,{variant:"outline",className:"gap-2 text-xs sm:text-sm",size:"sm",asChild:!0,children:s.jsxs("label",{htmlFor:"import-file",className:"cursor-pointer",children:[s.jsx(bb,{className:"h-3 sm:h-4 w-3 sm:w-4"}),"Importer CSV"]})})]}),s.jsxs(F,{variant:"outline",onClick:ce,className:"gap-2 text-xs sm:text-sm",size:"sm",children:[s.jsx(IC,{className:"h-3 sm:h-4 w-3 sm:w-4"}),"Gabarit"]}),s.jsxs(F,{className:"gap-2 medical-glow text-xs sm:text-sm",size:"sm",onClick:()=>h(!0),children:[s.jsx(at,{className:"h-3 sm:h-4 w-3 sm:w-4"}),"Nouvel Élément"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:[s.jsx(Z,{children:s.jsx(ee,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Éléments"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold",children:P.totalItems})]}),s.jsx(Oa,{className:"h-6 sm:h-8 w-6 sm:w-8 text-muted-foreground"})]})})}),s.jsx(Z,{children:s.jsx(ee,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Valeur Totale"}),s.jsxs("p",{className:"text-xl sm:text-2xl font-bold",children:[P.totalValue.toFixed(2)," ",c.currency]})]}),s.jsx(vd,{className:"h-6 sm:h-8 w-6 sm:w-8 text-green-600"})]})})}),s.jsx(Z,{children:s.jsx(ee,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Stock Bas"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-orange-600",children:P.lowStockItems})]}),s.jsx(gn,{className:"h-6 sm:h-8 w-6 sm:w-8 text-orange-600"})]})})}),s.jsx(Z,{children:s.jsx(ee,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Expirés"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-red-600",children:P.expiredItems})]}),s.jsx(dm,{className:"h-6 sm:h-8 w-6 sm:w-8 text-red-600"})]})})}),s.jsx(Z,{children:s.jsx(ee,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Expirent Bientôt"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-yellow-600",children:P.expiringSoonItems})]}),s.jsx(Kt,{className:"h-6 sm:h-8 w-6 sm:w-8 text-yellow-600"})]})})})]}),s.jsxs(Z,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[s.jsx(jI,{className:"h-4 sm:h-5 w-4 sm:w-5"}),"Rechercher et filtrer"]})}),s.jsx(ee,{className:"space-y-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-wrap",children:[s.jsx("div",{className:"flex-1 min-w-[250px] sm:min-w-[300px]",children:s.jsx(G,{placeholder:"Rechercher par nom, fabricant, lot...",value:w,onChange:se=>N(se.target.value),className:"w-full"})}),s.jsxs(we,{value:_,onValueChange:S,children:[s.jsx(je,{className:"w-full sm:w-48",children:s.jsx(Ne,{placeholder:"Catégorie"})}),s.jsxs(be,{children:[s.jsx($,{value:"all",children:"Toutes les catégories"}),Object.entries(vh).map(([se,ae])=>s.jsxs($,{value:se,children:[ae.icon," ",ae.label]},se))]})]}),s.jsxs(we,{value:C,onValueChange:A,children:[s.jsx(je,{className:"w-full sm:w-48",children:s.jsx(Ne,{placeholder:"Statut"})}),s.jsxs(be,{children:[s.jsx($,{value:"all",children:"Tous les statuts"}),s.jsx($,{value:"active",children:"Actifs"}),s.jsx($,{value:"low_stock",children:"Stock bas"}),s.jsx($,{value:"expired",children:"Expirés"}),s.jsx($,{value:"expiring_soon",children:"Expirent bientôt"})]})]}),s.jsxs(we,{value:T,onValueChange:E,children:[s.jsx(je,{className:"w-full sm:w-48",children:s.jsx(Ne,{placeholder:"Trier par"})}),s.jsxs(be,{children:[s.jsx($,{value:"name",children:"Nom"}),s.jsx($,{value:"currentStock",children:"Stock actuel"}),s.jsx($,{value:"totalValue",children:"Valeur totale"}),s.jsx($,{value:"expirationDate",children:"Date d'expiration"})]})]}),s.jsx(F,{variant:"outline",onClick:()=>R(k==="asc"?"desc":"asc"),size:"sm",className:"w-full sm:w-auto",children:k==="asc"?s.jsx(an,{className:"h-4 w-4"}):s.jsx(Ll,{className:"h-4 w-4"})})]})})]}),s.jsx(Z,{className:"bg-blue-50 border-blue-200",children:s.jsx(ee,{className:"pt-4 sm:pt-6",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(IC,{className:"h-4 sm:h-5 w-4 sm:w-5 text-blue-600 mt-0.5"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"font-semibold text-blue-900 text-sm sm:text-base",children:"Import en masse"}),s.jsx("p",{className:"text-sm text-blue-700",children:'Utilisez le bouton "Gabarit" pour télécharger un fichier CSV avec le format correct. Les données importées seront ajoutées au stock existant.'}),s.jsxs("div",{className:"text-xs text-blue-600",children:[s.jsx("strong",{children:"Catégories valides :"})," medication, vaccine, consumable, equipment, supplement"]}),s.jsxs("div",{className:"text-xs text-blue-600",children:[s.jsx("strong",{children:"Unités valides :"})," box, vial, unit, ml, mg, g, kg, l, pack, tube, sachet"]})]})]})})}),s.jsxs(Z,{children:[s.jsx(he,{children:s.jsxs(me,{className:"text-lg sm:text-xl",children:["Inventaire (",O.length," éléments)"]})}),s.jsxs(ee,{children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Ud,{children:[s.jsx(Wd,{children:s.jsxs(ca,{children:[s.jsx(ct,{className:"min-w-[150px]",children:"Nom"}),s.jsx(ct,{className:"min-w-[120px]",children:"Catégorie"}),s.jsx(ct,{className:"min-w-[100px] hidden sm:table-cell",children:"Fabricant"}),s.jsx(ct,{className:"min-w-[100px]",children:"Stock"}),s.jsx(ct,{className:"min-w-[100px] hidden md:table-cell",children:"Prix d'achat"}),s.jsx(ct,{className:"min-w-[100px] hidden md:table-cell",children:"Prix de vente"}),s.jsx(ct,{className:"min-w-[100px] hidden lg:table-cell",children:"Valeur totale"}),s.jsx(ct,{className:"min-w-[100px] hidden md:table-cell",children:"Expiration"}),s.jsx(ct,{className:"min-w-[120px] hidden lg:table-cell",children:"Emplacement"}),s.jsx(ct,{className:"min-w-[120px]",children:"Actions"})]})}),s.jsx(Hd,{children:O.map(se=>{var Q;const ae=se.currentStock<=se.minimumStock,le=se.expirationDate&&new Date(se.expirationDate)<new Date,H=se.expirationDate&&new Date(se.expirationDate)<=new Date(Date.now()+30*24*60*60*1e3)&&new Date(se.expirationDate)>new Date;return s.jsxs(ca,{className:se.isActive?"":"opacity-50",children:[s.jsx(ut,{children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"font-medium text-sm sm:text-base",children:se.name}),se.batchNumber&&s.jsxs("div",{className:"text-xs sm:text-sm text-muted-foreground",children:["Lot: ",se.batchNumber]}),se.dosage&&s.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:se.dosage})]})}),s.jsxs(ut,{children:[s.jsxs(_e,{className:`${vh[se.category].color} text-xs sm:text-sm`,children:[vh[se.category].icon," ",vh[se.category].label]}),se.subcategory&&s.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:se.subcategory})]}),s.jsx(ut,{className:"hidden sm:table-cell",children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-sm",children:se.manufacturer||"-"}),se.supplier&&s.jsx("div",{className:"text-xs text-muted-foreground",children:se.supplier})]})}),s.jsx(ut,{children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:`font-medium text-sm sm:text-base ${ae?"text-orange-600":""}`,children:[se.currentStock," ",((Q=_ke.find(ve=>ve.value===se.unit))==null?void 0:Q.label)||se.unit]}),s.jsxs("div",{className:"text-xs sm:text-sm text-muted-foreground",children:["Min: ",se.minimumStock]}),s.jsxs("div",{className:"flex items-center gap-2",children:[ae&&s.jsx(_e,{variant:"destructive",className:"text-xs",children:"Stock bas"}),se.lastUpdated&&new Date(se.lastUpdated).getTime()>Date.now()-24*60*60*1e3&&s.jsx(_e,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700",children:"Mis à jour"})]})]})}),s.jsx(ut,{className:"hidden md:table-cell",children:(I==null?void 0:I.id)===se.id&&I.field==="purchasePrice"?s.jsx(G,{type:"number",step:"0.01",value:V,onChange:ve=>q(ve.target.value),onBlur:()=>B(se.id,"purchasePrice",V),onKeyDown:ve=>{ve.key==="Enter"&&B(se.id,"purchasePrice",V)},autoFocus:!0,className:"w-16 sm:w-20"}):s.jsxs("div",{className:"cursor-pointer hover:bg-muted p-1 rounded text-sm",onClick:()=>{W({id:se.id,field:"purchasePrice"}),q(se.purchasePrice.toString())},children:[se.purchasePrice.toFixed(2)," ",c.currency]})}),s.jsx(ut,{className:"hidden md:table-cell",children:(I==null?void 0:I.id)===se.id&&I.field==="sellingPrice"?s.jsx(G,{type:"number",step:"0.01",value:V,onChange:ve=>q(ve.target.value),onBlur:()=>B(se.id,"sellingPrice",V),onKeyDown:ve=>{ve.key==="Enter"&&B(se.id,"sellingPrice",V)},autoFocus:!0,className:"w-16 sm:w-20"}):s.jsxs("div",{className:"cursor-pointer hover:bg-muted p-1 rounded",onClick:()=>{W({id:se.id,field:"sellingPrice"}),q(se.sellingPrice.toString())},children:[s.jsxs("div",{className:"font-medium text-sm",children:[se.sellingPrice.toFixed(2)," ",c.currency]}),s.jsxs("div",{className:"text-xs text-green-600",children:["Marge: ",((se.sellingPrice-se.purchasePrice)*se.currentStock).toFixed(2)," ",c.currency]})]})}),s.jsx(ut,{className:"hidden lg:table-cell",children:s.jsxs("div",{className:"font-medium text-sm",children:[se.totalValue.toFixed(2)," ",c.currency]})}),s.jsx(ut,{className:"hidden md:table-cell",children:se.expirationDate?s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:`text-xs sm:text-sm ${le?"text-red-600 font-medium":H?"text-yellow-600 font-medium":""}`,children:Je(new Date(se.expirationDate),"dd/MM/yyyy",{locale:Rn})}),le&&s.jsx(_e,{variant:"destructive",className:"text-xs",children:"Expiré"}),H&&!le&&s.jsx(_e,{variant:"secondary",className:"text-xs bg-yellow-100 text-yellow-800",children:"Expire bientôt"})]}):s.jsx("span",{className:"text-muted-foreground text-xs sm:text-sm",children:"-"})}),s.jsx(ut,{className:"hidden lg:table-cell",children:(I==null?void 0:I.id)===se.id&&I.field==="location"?s.jsx(G,{value:V,onChange:ve=>q(ve.target.value),onBlur:()=>B(se.id,"location",V),onKeyDown:ve=>{ve.key==="Enter"&&B(se.id,"location",V)},autoFocus:!0,className:"w-24 sm:w-32"}):s.jsxs("div",{className:"cursor-pointer hover:bg-muted p-1 rounded flex items-center gap-1 text-xs sm:text-sm",onClick:()=>{W({id:se.id,field:"location"}),q(se.location||"")},children:[s.jsx(rc,{className:"h-3 w-3"}),se.location||"Non défini"]})}),s.jsx(ut,{children:s.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[s.jsx(F,{size:"sm",variant:"outline",onClick:()=>re(se),className:"p-1 sm:p-2",children:s.jsx(an,{className:"h-3 w-3"})}),s.jsx(F,{size:"sm",variant:"outline",onClick:()=>U(se),className:"p-1 sm:p-2",children:s.jsx($t,{className:"h-3 w-3"})}),s.jsx(F,{size:"sm",variant:"outline",onClick:()=>ie(se),className:"p-1 sm:p-2",children:s.jsx(rn,{className:"h-3 w-3"})})]})})]},se.id)})})]})}),O.length===0&&s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Oa,{className:"h-8 sm:h-12 w-8 sm:w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{className:"text-sm sm:text-base",children:"Aucun élément trouvé"}),s.jsx("p",{className:"text-xs sm:text-sm",children:"Ajustez vos filtres ou ajoutez de nouveaux éléments"})]})]})]}),s.jsxs(Z,{children:[s.jsxs(he,{children:[s.jsxs(me,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[s.jsx(Kt,{className:"h-4 sm:h-5 w-4 sm:w-5"}),"Historique des Mouvements (",n.length,")"]}),s.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Derniers mouvements de stock (prescriptions, achats, ajustements)"})]}),s.jsx(ee,{children:n.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Kt,{className:"h-8 sm:h-12 w-8 sm:w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{className:"text-sm sm:text-base",children:"Aucun mouvement de stock enregistré"})]}):s.jsxs("div",{className:"space-y-4",children:[n.sort((se,ae)=>new Date(ae.date).getTime()-new Date(se.date).getTime()).slice(0,20).map(se=>{const le={in:{label:"Entrée",color:"text-green-600",icon:"↗️"},out:{label:se.reason==="Prescription médicale"?"Prescription":"Sortie",color:se.reason==="Prescription médicale"?"text-orange-600":"text-red-600",icon:se.reason==="Prescription médicale"?"💊":"↘️"},adjustment:{label:"Ajustement",color:"text-blue-600",icon:"⚖️"},transfer:{label:"Transfert",color:"text-purple-600",icon:"↔️"}}[se.type];return s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-3 sm:p-4 border rounded-lg hover:bg-muted/50 gap-2 sm:gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[s.jsx("div",{className:"text-xl sm:text-2xl",children:le.icon}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-sm sm:text-base",children:se.itemName}),s.jsxs("div",{className:"text-xs sm:text-sm text-muted-foreground",children:[se.reason," • ",se.performedBy||"Non spécifié"]}),se.reference&&s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Référence: ",se.reference]})]})]}),s.jsxs("div",{className:"text-right sm:text-left",children:[s.jsxs("div",{className:`font-semibold text-sm sm:text-base ${le.color}`,children:[se.type==="in"?"+":se.type==="out"?"-":"",se.quantity]}),s.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:Je(new Date(se.date),"dd/MM/yyyy HH:mm",{locale:Rn})})]})]},se.id)}),n.length>20&&s.jsx("div",{className:"text-center pt-4",children:s.jsxs(F,{variant:"outline",size:"sm",className:"text-xs sm:text-sm",children:["Voir tous les mouvements (",n.length,")"]})})]})})]}),s.jsx(vO,{open:d,onOpenChange:h}),s.jsx(vO,{open:g,onOpenChange:X,editingItem:y}),s.jsx(Ske,{open:m,onOpenChange:f,item:v})]})}const Pke={monthly:[{description:"Salaire Secrétaire",amount:3e3,type:"expense",frequency:"monthly",source:"salary"},{description:"CNSS Secrétaire",amount:700,type:"expense",frequency:"monthly",source:"insurance"},{description:"CNSS Vétérinaire",amount:1500,type:"expense",frequency:"monthly",source:"insurance"},{description:"Loyer",amount:3e3,type:"expense",frequency:"monthly",source:"rent"},{description:"Eau et Électricité",amount:300,type:"expense",frequency:"monthly",source:"other"}],annual:[{description:"Impôts",amount:3e3,type:"expense",frequency:"annual",source:"tax"},{description:"Cotisation Ordre des Vétérinaires",amount:1200,type:"expense",frequency:"annual",source:"other"}],occasional:[{description:"Maintenance Équipement",amount:500,type:"expense",frequency:"occasional",source:"other"},{description:"Formation Professionnelle",amount:800,type:"expense",frequency:"occasional",source:"other"},{description:"Achat Matériel",amount:1200,type:"expense",frequency:"occasional",source:"other"}]},Ake=()=>{const{accountingEntries:e,addAccountingEntry:t,updateAccountingEntry:n,deleteAccountingEntry:r,generateAccountingSummary:a,consultations:i,vaccinations:o,antiparasitics:l,prescriptions:c,stockMovements:u,stockItems:d}=bt(),{settings:h}=Pt();it();const[m,f]=b.useState("month"),[g,p]=b.useState(""),[v,x]=b.useState(""),[y,j]=b.useState(!1),[w,N]=b.useState(null),[_,S]=b.useState(null),[C,A]=b.useState(!1),[T,E]=b.useState(Pke),[k,R]=b.useState(!1),[I,W]=b.useState(null),[V,q]=b.useState({description:"",amount:"",type:"expense",frequency:"monthly",source:"other"}),[P,O]=b.useState({type:"revenue",frequency:"occasional",description:"",amount:"",date:"",source:"other",notes:""});b.useEffect(()=>{const H=new Date,Q=new Date(H.getFullYear(),H.getMonth(),1),ve=new Date(H.getFullYear(),H.getMonth()+1,0);p(Je(Q,"yyyy-MM-dd")),x(Je(ve,"yyyy-MM-dd"))},[]),b.useEffect(()=>{if(g&&v){const H=m==="month"?Je(new Date(g),"yyyy-MM",{locale:Rn}):m==="year"?Je(new Date(g),"yyyy",{locale:Rn}):m==="day"?Je(new Date(g),"dd/MM/yyyy",{locale:Rn}):`${Je(new Date(g),"dd/MM/yyyy")} - ${Je(new Date(v),"dd/MM/yyyy")}`,Q=a(H,g,v);S(Q)}},[g,v,m,e,i,o,l,c,u,a]);const B=H=>{f(H);const Q=new Date;switch(H){case"day":const ve=Je(Q,"yyyy-MM-dd");p(ve),x(ve);break;case"month":const ge=new Date(Q.getFullYear(),Q.getMonth(),1),rt=new Date(Q.getFullYear(),Q.getMonth()+1,0);p(Je(ge,"yyyy-MM-dd")),x(Je(rt,"yyyy-MM-dd"));break;case"quarter":const Ge=Math.floor(Q.getMonth()/3),dt=new Date(Q.getFullYear(),Ge*3,1),te=new Date(Q.getFullYear(),Ge*3+3,0);p(Je(dt,"yyyy-MM-dd")),x(Je(te,"yyyy-MM-dd"));break;case"year":const Pe=new Date(Q.getFullYear(),0,1),oe=new Date(Q.getFullYear(),11,31);p(Je(Pe,"yyyy-MM-dd")),x(Je(oe,"yyyy-MM-dd"));break}},U=()=>{if(!P.description||!P.amount||!P.date)return;const H={type:P.type,category:"manual",frequency:P.frequency,description:P.description,amount:parseFloat(P.amount),date:P.date,source:P.source,notes:P.notes};w?(n(w.id,H),N(null)):t(H),O({type:"revenue",frequency:"occasional",description:"",amount:"",date:"",source:"other",notes:""}),j(!1)},X=H=>{N(H),O({type:H.type,frequency:H.frequency,description:H.description,amount:H.amount.toString(),date:H.date,source:H.source||"other",notes:H.notes||""}),j(!0)},ie=H=>{window.confirm("Êtes-vous sûr de vouloir supprimer cette entrée ?")&&r(H)},re=H=>{O({...P,type:H.type,frequency:H.frequency||"occasional",description:H.description,amount:H.amount.toString(),source:H.source,date:P.date||Je(new Date,"yyyy-MM-dd")}),A(!1)},de=()=>{if(!V.description||!V.amount)return;const H={description:V.description,amount:parseFloat(V.amount),type:V.type,frequency:V.frequency,source:V.source};if(I){const Q={...T},ve=I.frequency,ge=Q[ve].findIndex(rt=>rt===I);ge!==-1&&(Q[ve][ge]=H),E(Q),W(null)}else{const Q={...T},ve=V.frequency;Q[ve].push(H),E(Q)}q({description:"",amount:"",type:"expense",frequency:"monthly",source:"other"}),R(!1)},pe=H=>{W(H),q({description:H.description,amount:H.amount.toString(),type:H.type,frequency:H.frequency,source:H.source}),R(!0)},ce=H=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer cette suggestion ?")){const Q={...T},ve=H.frequency;Q[ve]=Q[ve].filter(ge=>ge!==H),E(Q)}},se=e.filter(H=>{const Q=new Date(H.date),ve=new Date(g),ge=new Date(v);return Q>=ve&&Q<=ge}),ae=H=>`${H.toFixed(2)} ${h.currency}`,le=H=>{switch(H){case"consultation":return"🩺";case"vaccination":return"💉";case"antiparasitic":return"💊";case"prescription":return"📋";case"stock_purchase":return"📦";case"salary":return"👥";case"rent":return"🏢";case"tax":return"📊";case"insurance":return"🛡️";default:return"📄"}};return s.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto p-4 sm:p-6 lg:p-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold flex items-center gap-2",children:[s.jsx(vI,{className:"h-6 w-6 sm:h-8 sm:w-8"}),"Gestion Comptable"]}),s.jsx("p",{className:"text-muted-foreground text-sm sm:text-base",children:"Suivi des recettes et charges de votre clinique vétérinaire"})]}),s.jsx("div",{className:"flex gap-2 w-full sm:w-auto",children:s.jsxs(et,{open:y,onOpenChange:j,children:[s.jsx(Vx,{asChild:!0,children:s.jsxs(F,{onClick:()=>{N(null),O({type:"revenue",frequency:"occasional",description:"",amount:"",date:"",source:"other",notes:""})},className:"w-full sm:w-auto",children:[s.jsx(at,{className:"h-4 w-4 mr-2"}),"Ajouter une entrée"]})}),s.jsxs(Qe,{className:"max-w-2xl max-h-[90vh] overflow-y-auto w-full mx-4",children:[s.jsxs(tt,{children:[s.jsx(nt,{className:"text-lg sm:text-xl",children:w?"Modifier l'entrée comptable":"Ajouter une entrée comptable"}),s.jsx(Bt,{className:"text-sm sm:text-base",children:w?"Modifiez les informations de cette entrée.":"Ajoutez une nouvelle recette ou charge manuelle."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"border rounded-lg p-4 bg-muted/50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(S0,{className:"h-4 w-4 text-yellow-600"}),s.jsx(D,{className:"text-sm font-medium",children:"Suggestions prédéfinies"})]}),s.jsx(F,{variant:"ghost",size:"sm",onClick:()=>A(!C),className:"p-2",children:C?s.jsx(jx,{className:"h-4 w-4"}):s.jsx(S0,{className:"h-4 w-4"})})]}),C&&s.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Charges mensuelles"}),s.jsx("div",{className:"grid grid-cols-1 gap-2",children:T.monthly.map((H,Q)=>s.jsx(F,{variant:"outline",size:"sm",className:"justify-start text-left h-auto p-3 text-sm",onClick:()=>re(H),children:s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center w-full gap-1",children:[s.jsx("span",{className:"text-sm",children:H.description}),s.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:[H.amount," ",h.currency]})]})},Q))})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Charges annuelles"}),s.jsx("div",{className:"grid grid-cols-1 gap-2",children:T.annual.map((H,Q)=>s.jsx(F,{variant:"outline",size:"sm",className:"justify-start text-left h-auto p-3 text-sm",onClick:()=>re(H),children:s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center w-full gap-1",children:[s.jsx("span",{className:"text-sm",children:H.description}),s.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:[H.amount," ",h.currency]})]})},Q))})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Charges occasionnelles"}),s.jsx("div",{className:"grid grid-cols-1 gap-2",children:T.occasional.map((H,Q)=>s.jsx(F,{variant:"outline",size:"sm",className:"justify-start text-left h-auto p-3 text-sm",onClick:()=>re(H),children:s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center w-full gap-1",children:[s.jsx("span",{className:"text-sm",children:H.description}),s.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:[H.amount," ",h.currency]})]})},Q))})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(D,{htmlFor:"type",children:"Type"}),s.jsxs(we,{value:P.type,onValueChange:H=>O({...P,type:H}),children:[s.jsx(je,{children:s.jsx(Ne,{})}),s.jsxs(be,{children:[s.jsx($,{value:"revenue",children:"Recette"}),s.jsx($,{value:"expense",children:"Charge"})]})]})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"frequency",children:"Fréquence"}),s.jsxs(we,{value:P.frequency,onValueChange:H=>O({...P,frequency:H}),children:[s.jsx(je,{children:s.jsx(Ne,{})}),s.jsxs(be,{children:[s.jsx($,{value:"monthly",children:"Mensuel"}),s.jsx($,{value:"annual",children:"Annuel"}),s.jsx($,{value:"occasional",children:"Occasionnel"})]})]})]})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"description",children:"Description"}),s.jsx(G,{id:"description",value:P.description,onChange:H=>O({...P,description:H.target.value}),placeholder:"Ex: Salaire employé, Loyer, etc."})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs(D,{htmlFor:"amount",children:["Montant (",h.currency,")"]}),s.jsx(G,{id:"amount",type:"number",step:"0.01",value:P.amount,onChange:H=>O({...P,amount:H.target.value}),placeholder:"0.00"})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"date",children:"Date"}),s.jsx(G,{id:"date",type:"date",value:P.date,onChange:H=>O({...P,date:H.target.value})})]})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"source",children:"Source"}),s.jsxs(we,{value:P.source,onValueChange:H=>O({...P,source:H}),children:[s.jsx(je,{children:s.jsx(Ne,{})}),s.jsxs(be,{children:[s.jsx($,{value:"salary",children:"Salaire"}),s.jsx($,{value:"rent",children:"Loyer"}),s.jsx($,{value:"tax",children:"Impôts"}),s.jsx($,{value:"insurance",children:"Assurance"}),s.jsx($,{value:"other",children:"Autre"})]})]})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"notes",children:"Notes (optionnel)"}),s.jsx(Ue,{id:"notes",value:P.notes,onChange:H=>O({...P,notes:H.target.value}),placeholder:"Informations supplémentaires..."})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2",children:[s.jsx(F,{variant:"outline",onClick:()=>j(!1),className:"w-full sm:w-auto",children:"Annuler"}),s.jsx(F,{onClick:U,className:"w-full sm:w-auto",children:w?"Modifier":"Ajouter"})]})]})]})]})})]}),s.jsxs(Z,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[s.jsx(Ke,{className:"h-5 w-5"}),"Période d'analyse"]})}),s.jsx(ee,{children:s.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-end",children:[s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(F,{variant:m==="day"?"default":"outline",onClick:()=>B("day"),size:"sm",className:"flex-1 sm:flex-none",children:"Ce jour"}),s.jsx(F,{variant:m==="month"?"default":"outline",onClick:()=>B("month"),size:"sm",className:"flex-1 sm:flex-none",children:"Ce mois"}),s.jsx(F,{variant:m==="quarter"?"default":"outline",onClick:()=>B("quarter"),size:"sm",className:"flex-1 sm:flex-none",children:"Ce trimestre"}),s.jsx(F,{variant:m==="year"?"default":"outline",onClick:()=>B("year"),size:"sm",className:"flex-1 sm:flex-none",children:"Cette année"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-start sm:items-center w-full lg:w-auto",children:[s.jsx(D,{htmlFor:"startDate",className:"text-sm",children:"Du"}),s.jsx(G,{id:"startDate",type:"date",value:g,onChange:H=>p(H.target.value),className:"w-full sm:w-40"}),s.jsx(D,{htmlFor:"endDate",className:"text-sm",children:"Au"}),s.jsx(G,{id:"endDate",type:"date",value:v,onChange:H=>x(H.target.value),className:"w-full sm:w-40"})]})]})})]}),_&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs(Z,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(me,{className:"text-sm font-medium",children:"Total Recettes"}),s.jsx(an,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(ee,{children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:ae(_.totalRevenue)}),s.jsxs("div",{className:"text-xs text-muted-foreground mt-1 space-y-1",children:[s.jsxs("div",{children:["Consultations: ",ae(_.revenueBreakdown.consultations)]}),s.jsxs("div",{children:["Vaccinations: ",ae(_.revenueBreakdown.vaccinations)]}),s.jsxs("div",{children:["Antiparasitaires: ",ae(_.revenueBreakdown.antiparasitics)]}),s.jsxs("div",{children:["Prescriptions: ",ae(_.revenueBreakdown.prescriptions)]}),s.jsxs("div",{children:["Manuelles: ",ae(_.revenueBreakdown.manualEntries)]})]})]})]}),s.jsxs(Z,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(me,{className:"text-sm font-medium",children:"Total Charges"}),s.jsx(Ll,{className:"h-4 w-4 text-red-600"})]}),s.jsxs(ee,{children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:ae(_.totalExpenses)}),s.jsxs("div",{className:"text-xs text-muted-foreground mt-1 space-y-1",children:[s.jsxs("div",{children:["Achats stock: ",ae(_.expenseBreakdown.stockPurchases)]}),s.jsxs("div",{children:["Salaires: ",ae(_.expenseBreakdown.salaries)]}),s.jsxs("div",{children:["Loyer: ",ae(_.expenseBreakdown.rent)]}),s.jsxs("div",{children:["Impôts: ",ae(_.expenseBreakdown.taxes)]}),s.jsxs("div",{children:["Autres: ",ae(_.expenseBreakdown.other)]})]})]})]}),s.jsxs(Z,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(me,{className:"text-sm font-medium",children:"Résultat Net"}),s.jsx(vd,{className:"h-4 w-4"})]}),s.jsxs(ee,{children:[s.jsx("div",{className:`text-2xl font-bold ${_.netIncome>=0?"text-green-600":"text-red-600"}`,children:ae(_.netIncome)}),s.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:_.netIncome>=0?"Bénéfice":"Perte"})]})]})]}),s.jsxs(Ti,{defaultValue:"entries",className:"space-y-4",children:[s.jsxs(qa,{className:"grid w-full grid-cols-2",children:[s.jsx(Tt,{value:"entries",children:"Entrées Comptables"}),s.jsx(Tt,{value:"configuration",children:"Configuration"})]}),s.jsx(Et,{value:"entries",children:s.jsxs(Z,{children:[s.jsxs(he,{children:[s.jsxs(me,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[s.jsx(Cr,{className:"h-5 w-5"}),"Entrées comptables automatiques et manuelles"]}),s.jsx(Lu,{className:"text-sm sm:text-base",children:"Entrées générées automatiquement (consultations, vaccinations, etc.) et entrées manuelles ajoutées"})]}),s.jsxs(ee,{children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Ud,{children:[s.jsx(Wd,{children:s.jsxs(ca,{children:[s.jsx(ct,{className:"min-w-[100px]",children:"Date"}),s.jsx(ct,{className:"min-w-[80px]",children:"Type"}),s.jsx(ct,{className:"min-w-[150px]",children:"Description"}),s.jsx(ct,{className:"min-w-[100px]",children:"Source"}),s.jsx(ct,{className:"min-w-[100px]",children:"Fréquence"}),s.jsx(ct,{className:"min-w-[100px]",children:"Montant"}),s.jsx(ct,{className:"min-w-[100px]",children:"Actions"})]})}),s.jsx(Hd,{children:se.map(H=>s.jsxs(ca,{children:[s.jsx(ut,{children:Je(new Date(H.date),"dd/MM/yyyy",{locale:Rn})}),s.jsx(ut,{children:s.jsx(_e,{variant:H.type==="revenue"?"default":"destructive",className:"text-xs",children:H.type==="revenue"?"Recette":"Charge"})}),s.jsx(ut,{className:"text-sm",children:H.description}),s.jsx(ut,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:le(H.source||"other")}),s.jsx("span",{className:"text-xs",children:H.category==="automatic"?"Automatique":"Manuel"})]})}),s.jsx(ut,{children:s.jsx(_e,{variant:"outline",className:"text-xs",children:H.frequency==="monthly"?"Mensuel":H.frequency==="annual"?"Annuel":"Occasionnel"})}),s.jsxs(ut,{className:`font-medium text-sm ${H.type==="revenue"?"text-green-600":"text-red-600"}`,children:[H.type==="revenue"?"+":"-",ae(H.amount)]}),s.jsx(ut,{children:H.category==="manual"&&s.jsxs("div",{className:"flex gap-1",children:[s.jsx(F,{variant:"outline",size:"sm",onClick:()=>X(H),className:"p-1",children:s.jsx($t,{className:"h-4 w-4"})}),s.jsx(F,{variant:"outline",size:"sm",onClick:()=>ie(H.id),className:"p-1",children:s.jsx(rn,{className:"h-4 w-4"})})]})})]},H.id))})]})}),se.length===0&&s.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"Aucune entrée comptable pour cette période"})]})]})}),s.jsx(Et,{value:"configuration",children:s.jsxs(Z,{children:[s.jsxs(he,{children:[s.jsxs(me,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[s.jsx(S0,{className:"h-5 w-5"}),"Configuration des Suggestions"]}),s.jsx(Lu,{className:"text-sm sm:text-base",children:"Configurez les suggestions prédéfinies pour faciliter la saisie des charges et recettes"})]}),s.jsxs(ee,{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Suggestions Mensuelles"}),s.jsxs(F,{onClick:()=>{W(null),q({description:"",amount:"",type:"expense",frequency:"monthly",source:"other"}),R(!0)},className:"w-full sm:w-auto",children:[s.jsx(at,{className:"h-4 w-4 mr-2"}),"Ajouter"]})]}),s.jsx("div",{className:"grid gap-3",children:T.monthly.map((H,Q)=>s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-3 border rounded-lg gap-2",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-sm font-medium",children:H.description}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[H.amount," ",h.currency]})]}),s.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[s.jsx(F,{variant:"outline",size:"sm",onClick:()=>pe(H),className:"flex-1 sm:flex-none",children:s.jsx($t,{className:"h-4 w-4"})}),s.jsx(F,{variant:"outline",size:"sm",onClick:()=>ce(H),className:"flex-1 sm:flex-none",children:s.jsx(rn,{className:"h-4 w-4"})})]})]},Q))}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Suggestions Annuelles"}),s.jsxs(F,{onClick:()=>{W(null),q({description:"",amount:"",type:"expense",frequency:"annual",source:"other"}),R(!0)},className:"w-full sm:w-auto",children:[s.jsx(at,{className:"h-4 w-4 mr-2"}),"Ajouter"]})]}),s.jsx("div",{className:"grid gap-3",children:T.annual.map((H,Q)=>s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-3 border rounded-lg gap-2",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-sm font-medium",children:H.description}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[H.amount," ",h.currency]})]}),s.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[s.jsx(F,{variant:"outline",size:"sm",onClick:()=>pe(H),className:"flex-1 sm:flex-none",children:s.jsx($t,{className:"h-4 w-4"})}),s.jsx(F,{variant:"outline",size:"sm",onClick:()=>ce(H),className:"flex-1 sm:flex-none",children:s.jsx(rn,{className:"h-4 w-4"})})]})]},Q))}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Suggestions Occasionnelles"}),s.jsxs(F,{onClick:()=>{W(null),q({description:"",amount:"",type:"expense",frequency:"occasional",source:"other"}),R(!0)},className:"w-full sm:w-auto",children:[s.jsx(at,{className:"h-4 w-4 mr-2"}),"Ajouter"]})]}),s.jsx("div",{className:"grid gap-3",children:T.occasional.map((H,Q)=>s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-3 border rounded-lg gap-2",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-sm font-medium",children:H.description}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[H.amount," ",h.currency]})]}),s.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[s.jsx(F,{variant:"outline",size:"sm",onClick:()=>pe(H),className:"flex-1 sm:flex-none",children:s.jsx($t,{className:"h-4 w-4"})}),s.jsx(F,{variant:"outline",size:"sm",onClick:()=>ce(H),className:"flex-1 sm:flex-none",children:s.jsx(rn,{className:"h-4 w-4"})})]})]},Q))})]})]})})]}),s.jsx(et,{open:k,onOpenChange:R,children:s.jsxs(Qe,{className:"max-w-2xl max-h-[90vh] overflow-y-auto w-full mx-4",children:[s.jsxs(tt,{children:[s.jsx(nt,{className:"text-lg sm:text-xl",children:I?"Modifier la suggestion":"Ajouter une suggestion"}),s.jsx(Bt,{className:"text-sm sm:text-base",children:I?"Modifiez les informations de cette suggestion.":"Ajoutez une nouvelle suggestion prédéfinie."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(D,{htmlFor:"suggestion-type",children:"Type"}),s.jsxs(we,{value:V.type,onValueChange:H=>q({...V,type:H}),children:[s.jsx(je,{children:s.jsx(Ne,{})}),s.jsxs(be,{children:[s.jsx($,{value:"revenue",children:"Recette"}),s.jsx($,{value:"expense",children:"Charge"})]})]})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"suggestion-frequency",children:"Fréquence"}),s.jsxs(we,{value:V.frequency,onValueChange:H=>q({...V,frequency:H}),children:[s.jsx(je,{children:s.jsx(Ne,{})}),s.jsxs(be,{children:[s.jsx($,{value:"monthly",children:"Mensuel"}),s.jsx($,{value:"annual",children:"Annuel"}),s.jsx($,{value:"occasional",children:"Occasionnel"})]})]})]})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"suggestion-description",children:"Description"}),s.jsx(G,{id:"suggestion-description",value:V.description,onChange:H=>q({...V,description:H.target.value}),placeholder:"Ex: Salaire employé, Loyer, etc."})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs(D,{htmlFor:"suggestion-amount",children:["Montant (",h.currency,")"]}),s.jsx(G,{id:"suggestion-amount",type:"number",step:"0.01",value:V.amount,onChange:H=>q({...V,amount:H.target.value}),placeholder:"0.00"})]}),s.jsxs("div",{children:[s.jsx(D,{htmlFor:"suggestion-source",children:"Source"}),s.jsxs(we,{value:V.source,onValueChange:H=>q({...V,source:H}),children:[s.jsx(je,{children:s.jsx(Ne,{})}),s.jsxs(be,{children:[s.jsx($,{value:"salary",children:"Salaire"}),s.jsx($,{value:"rent",children:"Loyer"}),s.jsx($,{value:"tax",children:"Impôts"}),s.jsx($,{value:"insurance",children:"Assurance"}),s.jsx($,{value:"other",children:"Autre"})]})]})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2",children:[s.jsx(F,{variant:"outline",onClick:()=>R(!1),className:"w-full sm:w-auto",children:"Annuler"}),s.jsx(F,{onClick:de,className:"w-full sm:w-auto",children:I?"Modifier":"Ajouter"})]})]})]})})]})},kke=()=>{const{clients:e,consultations:t,vaccinations:n,antiparasitics:r,appointments:a,addConsultation:i,addVaccination:o,addAntiparasitic:l,updateClientStats:c}=bt(),u=()=>{if(e.length>0){const f=e[0],g=f.pets[0];g&&i({clientId:f.id,clientName:f.name,petId:g.id,petName:g.name,date:new Date().toISOString().split("T")[0],symptoms:"Test consultation",diagnosis:"Test diagnosis",treatment:"Test treatment",cost:"50",notes:"Test consultation for stats update",photos:[]})}},d=()=>{if(e.length>0){const f=e[0],g=f.pets[0];g&&o({clientId:f.id,clientName:f.name,petId:g.id,petName:g.name,vaccineName:"Test Vaccine",vaccineType:"Test Type",dateGiven:new Date().toISOString().split("T")[0],nextDueDate:new Date(Date.now()+365*24*60*60*1e3).toISOString().split("T")[0],veterinarian:"Dr. Test",cost:"30",notes:"Test vaccination for stats update",status:"completed"})}},h=()=>{if(e.length>0){const f=e[0],g=f.pets[0];g&&l({clientId:f.id,clientName:f.name,petId:g.id,petName:g.name,productName:"Test Product",productType:"Test Type",dateGiven:new Date().toISOString().split("T")[0],nextDueDate:new Date(Date.now()+90*24*60*60*1e3).toISOString().split("T")[0],targetParasites:"Test Parasites",veterinarian:"Dr. Test",cost:"25",notes:"Test antiparasitic for stats update",status:"completed"})}},m=()=>{e.length>0&&e.forEach(f=>{c(f.id)})};return s.jsxs("div",{className:"container mx-auto px-6 py-8 space-y-6",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Test des Statistiques des Clients"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.jsxs(Z,{children:[s.jsx(he,{children:s.jsx(me,{className:"text-lg",children:"Actions de Test"})}),s.jsxs(ee,{className:"space-y-3",children:[s.jsxs(F,{onClick:u,className:"w-full",children:[s.jsx(at,{className:"h-4 w-4 mr-2"}),"Ajouter Consultation Test"]}),s.jsxs(F,{onClick:d,className:"w-full",children:[s.jsx(at,{className:"h-4 w-4 mr-2"}),"Ajouter Vaccination Test"]}),s.jsxs(F,{onClick:h,className:"w-full",children:[s.jsx(at,{className:"h-4 w-4 mr-2"}),"Ajouter Antiparasite Test"]}),s.jsx(F,{onClick:m,variant:"outline",className:"w-full",children:"Mettre à jour Stats"})]})]}),s.jsxs(Z,{children:[s.jsx(he,{children:s.jsx(me,{className:"text-lg",children:"Statistiques Globales"})}),s.jsxs(ee,{className:"space-y-2",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Clients:"})," ",e.length]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Consultations:"})," ",t.length]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Vaccinations:"})," ",n.length]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Antiparasites:"})," ",r.length]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Rendez-vous:"})," ",a.length]})]})]}),s.jsxs(Z,{children:[s.jsx(he,{children:s.jsx(me,{className:"text-lg",children:"Détails des Clients"})}),s.jsx(ee,{className:"space-y-3",children:e.map(f=>s.jsxs("div",{className:"border-b pb-2",children:[s.jsx("p",{className:"font-medium",children:f.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Total visites: ",f.totalVisits," | Dernière visite: ",new Date(f.lastVisit).toLocaleDateString("fr-FR")]})]},f.id))})]})]})]})},Tke=()=>s.jsx(MS,{children:s.jsx(kke,{})}),Eke=()=>{const{clients:e,consultations:t,vaccinations:n,antiparasitics:r,appointments:a,addConsultation:i,addVaccination:o,addAntiparasitic:l,updateClientStats:c}=bt(),u=()=>{if(e.length>0){const f=e[0],g=f.pets[0];g&&i({clientId:f.id,clientName:f.name,petId:g.id,petName:g.name,date:new Date().toISOString().split("T")[0],symptoms:"Test consultation",diagnosis:"Test diagnosis",treatment:"Test treatment",cost:"50",notes:"Test consultation for stats update",photos:[]})}},d=()=>{if(e.length>0){const f=e[0],g=f.pets[0];g&&o({clientId:f.id,clientName:f.name,petId:g.id,petName:g.name,vaccineName:"Test Vaccine",vaccineType:"Test Type",dateGiven:new Date().toISOString().split("T")[0],nextDueDate:new Date(Date.now()+365*24*60*60*1e3).toISOString().split("T")[0],veterinarian:"Dr. Test",cost:"30",notes:"Test vaccination for stats update",status:"completed"})}},h=()=>{if(e.length>0){const f=e[0],g=f.pets[0];g&&l({clientId:f.id,clientName:f.name,petId:g.id,petName:g.name,productName:"Test Product",productType:"Test Type",dateGiven:new Date().toISOString().split("T")[0],nextDueDate:new Date(Date.now()+90*24*60*60*1e3).toISOString().split("T")[0],targetParasites:"Test Parasites",veterinarian:"Dr. Test",cost:"25",notes:"Test antiparasitic for stats update",status:"completed"})}},m=()=>{e.length>0&&e.forEach(f=>{c(f.id)})};return s.jsxs("div",{className:"container mx-auto px-6 py-8 space-y-6",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Test Simple des Statistiques"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.jsxs(Z,{children:[s.jsx(he,{children:s.jsx(me,{className:"text-lg",children:"Actions de Test"})}),s.jsxs(ee,{className:"space-y-3",children:[s.jsxs(F,{onClick:u,className:"w-full",children:[s.jsx(at,{className:"h-4 w-4 mr-2"}),"Ajouter Consultation Test"]}),s.jsxs(F,{onClick:d,className:"w-full",children:[s.jsx(at,{className:"h-4 w-4 mr-2"}),"Ajouter Vaccination Test"]}),s.jsxs(F,{onClick:h,className:"w-full",children:[s.jsx(at,{className:"h-4 w-4 mr-2"}),"Ajouter Antiparasite Test"]}),s.jsx(F,{onClick:m,variant:"outline",className:"w-full",children:"Mettre à jour Stats"})]})]}),s.jsxs(Z,{children:[s.jsx(he,{children:s.jsx(me,{className:"text-lg",children:"Statistiques Globales"})}),s.jsxs(ee,{className:"space-y-2",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Clients:"})," ",e.length]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Consultations:"})," ",t.length]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Vaccinations:"})," ",n.length]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Antiparasites:"})," ",r.length]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Rendez-vous:"})," ",a.length]})]})]}),s.jsxs(Z,{children:[s.jsx(he,{children:s.jsx(me,{className:"text-lg",children:"Détails des Clients"})}),s.jsx(ee,{className:"space-y-3",children:e.map(f=>s.jsxs("div",{className:"border-b pb-2",children:[s.jsx("p",{className:"font-medium",children:f.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Total visites: ",f.totalVisits," | Dernière visite: ",new Date(f.lastVisit).toLocaleDateString("fr-FR")]})]},f.id))})]})]})]})},Oke=()=>s.jsx(MS,{children:s.jsx(Eke,{})}),Dke=()=>{const e=Lo();return b.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),s.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),s.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})};var Mke="Separator",xO="horizontal",Ike=["horizontal","vertical"],$8=b.forwardRef((e,t)=>{const{decorative:n,orientation:r=xO,...a}=e,i=$ke(r)?r:xO,l=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return s.jsx(ze.div,{"data-orientation":i,...l,...a,ref:t})});$8.displayName=Mke;function $ke(e){return Ike.includes(e)}var R8=$8;const Jv=b.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},a)=>s.jsx(R8,{ref:a,decorative:n,orientation:t,className:De("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));Jv.displayName=R8.displayName;function Rke(){const{user:e,logout:t,refreshProfile:n}=oc(),{toast:r}=it(),{data:a,isLoading:i,refetch:o}=see(),l=aee(),[c,u]=b.useState(!1);b.useState(!1);const[d,h]=b.useState({full_name:"",username:"",email:"",phone:"",address:"",specialty:"",experience:"",bio:"",languages:["Français","Arabe","Anglais"]});b.useEffect(()=>{a&&e&&h(v=>({...v,full_name:a.full_name||"",username:a.username||"",email:e.email||"",phone:a.phone||"",address:a.address||"",specialty:a.specialty||"",experience:a.experience||"",bio:a.bio||""}))},[a,e]),b.useState({currentPassword:"",newPassword:"",confirmPassword:""}),b.useState({notifications:{email:!0,sms:!1,push:!0},privacy:{showEmail:!1,showPhone:!0,showAddress:!1},language:"fr",timezone:"Africa/Casablanca"});const m=async()=>{try{await l.mutateAsync({full_name:d.full_name,username:d.username,phone:d.phone,address:d.address,specialty:d.specialty,experience:d.experience,bio:d.bio}),await Promise.all([o(),n()]),r({title:"Profil mis à jour",description:"Vos informations personnelles ont été sauvegardées avec succès."}),u(!1)}catch(v){r({title:"Erreur",description:v instanceof Error?v.message:"Impossible de sauvegarder le profil.",variant:"destructive"})}},f=v=>v.split(" ").map(x=>x.charAt(0)).join("").toUpperCase().slice(0,2),g=v=>{switch(v){case"admin":return"Administrateur";case"assistant":return"Assistant";default:return"Utilisateur"}},p=v=>{switch(v){case"admin":return"bg-red-100 text-red-800";case"assistant":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return e?i?s.jsx("div",{className:"container mx-auto px-2 sm:px-4 lg:px-6 py-4 sm:py-6 lg:py-8",children:s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx(Kn,{className:"h-8 w-8 animate-spin"}),s.jsx("p",{className:"text-muted-foreground",children:"Chargement du profil..."})]})})}):s.jsxs("div",{className:"container mx-auto px-2 sm:px-4 lg:px-6 py-4 sm:py-6 lg:py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Mon Profil"}),s.jsx("p",{className:"text-muted-foreground text-sm sm:text-base",children:"Gérez vos informations personnelles et préférences"})]}),s.jsx("div",{className:"flex flex-col sm:flex-row gap-2",children:c?s.jsxs(s.Fragment,{children:[s.jsx(F,{variant:"outline",onClick:()=>u(!1),className:"w-full sm:w-auto",children:"Annuler"}),s.jsxs(F,{onClick:m,className:"gap-2 w-full sm:w-auto",disabled:l.isPending,children:[l.isPending?s.jsx(Kn,{className:"h-4 w-4 animate-spin"}):s.jsx(Rh,{className:"h-4 w-4"}),l.isPending?"Sauvegarde...":"Sauvegarder"]})]}):s.jsxs(F,{onClick:()=>u(!0),className:"gap-2 w-full sm:w-auto",children:[s.jsx($t,{className:"h-4 w-4"}),"Modifier"]})})]}),s.jsxs(Z,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(hr,{className:"h-5 w-5"}),"Informations Personnelles"]})}),s.jsxs(ee,{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Zn,{className:"h-16 w-16 sm:h-20 sm:w-20",children:s.jsx(er,{className:"bg-primary text-primary-foreground text-lg sm:text-xl",children:f(e.profile.full_name)})}),c&&s.jsx(F,{size:"sm",className:"absolute -bottom-2 -right-2 h-8 w-8 rounded-full",variant:"secondary",children:s.jsx(vf,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[s.jsx("h3",{className:"text-lg sm:text-xl font-semibold",children:e.profile.full_name||e.profile.username}),s.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 mt-1",children:[s.jsx(xf,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:e.email})]}),s.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 mt-2",children:[s.jsx(Pr,{className:"h-4 w-4 text-muted-foreground"}),s.jsx(_e,{className:p(e.profile.role),children:g(e.profile.role)})]})]})]}),s.jsx(Jv,{}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"full_name",children:"Nom complet"}),s.jsx(G,{id:"full_name",value:d.full_name,onChange:v=>h(x=>({...x,full_name:v.target.value})),disabled:!c})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"username",children:"Nom d'utilisateur"}),s.jsx(G,{id:"username",value:d.username,onChange:v=>h(x=>({...x,username:v.target.value})),disabled:!c})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"email",children:"Email"}),s.jsx(G,{id:"email",type:"email",value:d.email,disabled:!0,className:"bg-muted"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"phone",children:"Téléphone"}),s.jsx(G,{id:"phone",value:d.phone,onChange:v=>h(x=>({...x,phone:v.target.value})),disabled:!c})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"address",children:"Adresse"}),s.jsx(G,{id:"address",value:d.address,onChange:v=>h(x=>({...x,address:v.target.value})),disabled:!c})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"specialty",children:"Spécialité"}),s.jsx(G,{id:"specialty",value:d.specialty,onChange:v=>h(x=>({...x,specialty:v.target.value})),disabled:!c})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"experience",children:"Expérience"}),s.jsx(G,{id:"experience",value:d.experience,onChange:v=>h(x=>({...x,experience:v.target.value})),disabled:!c})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"bio",children:"Biographie"}),s.jsx("textarea",{id:"bio",className:"w-full min-h-[100px] px-3 py-2 border border-input bg-background rounded-md text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:d.bio,onChange:v=>h(x=>({...x,bio:v.target.value})),disabled:!c})]})]})]})]}):null}function Fke(){const{user:e}=oc(),{toast:t}=it(),[n,r]=b.useState({twoFactorAuth:!1,sessionTimeout:30,passwordExpiry:90,loginNotifications:!0,deviceTracking:!0,autoLogout:!0}),[a,i]=b.useState({rememberMe:!0,autoLogin:!1,sessionDuration:8,maxConcurrentSessions:3}),[o,l]=b.useState({loginAlerts:!0,securityAlerts:!0,deviceAlerts:!0,emailNotifications:!0,smsNotifications:!1,pushNotifications:!0});b.useState({dataSharing:!1,analytics:!0,crashReports:!0,marketingEmails:!1,profileVisibility:"private"}),b.useState({language:"fr",timezone:"Africa/Casablanca",dateFormat:"DD/MM/YYYY",timeFormat:"24h",theme:"system"});const[c]=b.useState([{id:1,device:"MacBook Pro",browser:"Chrome",location:"Rabat, Maroc",lastActive:"Maintenant",current:!0,ip:"192.168.1.100"},{id:2,device:"iPhone 14",browser:"Safari",location:"Rabat, Maroc",lastActive:"Il y a 2 heures",current:!1,ip:"192.168.1.101"}]),u=()=>{t({title:"Paramètres de sécurité sauvegardés",description:"Vos paramètres de sécurité ont été mis à jour."})},d=()=>{t({title:"Paramètres de session sauvegardés",description:"Vos paramètres de session ont été mis à jour."})},h=()=>{t({title:"Paramètres de notification sauvegardés",description:"Vos paramètres de notification ont été mis à jour."})},m=p=>{t({title:"Session terminée",description:"La session a été fermée avec succès."})},f=()=>{t({title:"Toutes les sessions terminées",description:"Toutes les autres sessions ont été fermées."})},g=p=>p.includes("iPhone")||p.includes("Android")?s.jsx(vU,{className:"h-4 w-4"}):p.includes("iPad")||p.includes("Tablet")?s.jsx(jU,{className:"h-4 w-4"}):s.jsx(RC,{className:"h-4 w-4"});return e?s.jsxs("div",{className:"container mx-auto px-2 sm:px-4 lg:px-6 py-4 sm:py-6 lg:py-8 space-y-6",children:[s.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Paramètres de Connexion"}),s.jsx("p",{className:"text-muted-foreground text-sm sm:text-base",children:"Gérez vos paramètres de sécurité et de session"})]})}),s.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[s.jsxs(Z,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(Pr,{className:"h-5 w-5"}),"Sécurité"]})}),s.jsxs(ee,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(D,{children:"Authentification à deux facteurs"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Ajoutez une couche de sécurité supplémentaire"})]}),s.jsx(Ir,{checked:n.twoFactorAuth,onCheckedChange:p=>r(v=>({...v,twoFactorAuth:p}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{children:"Délai d'expiration de session (minutes)"}),s.jsxs(we,{value:n.sessionTimeout.toString(),onValueChange:p=>r(v=>({...v,sessionTimeout:parseInt(p)})),children:[s.jsx(je,{children:s.jsx(Ne,{})}),s.jsxs(be,{children:[s.jsx($,{value:"15",children:"15 minutes"}),s.jsx($,{value:"30",children:"30 minutes"}),s.jsx($,{value:"60",children:"1 heure"}),s.jsx($,{value:"120",children:"2 heures"}),s.jsx($,{value:"480",children:"8 heures"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{children:"Expiration du mot de passe (jours)"}),s.jsxs(we,{value:n.passwordExpiry.toString(),onValueChange:p=>r(v=>({...v,passwordExpiry:parseInt(p)})),children:[s.jsx(je,{children:s.jsx(Ne,{})}),s.jsxs(be,{children:[s.jsx($,{value:"30",children:"30 jours"}),s.jsx($,{value:"60",children:"60 jours"}),s.jsx($,{value:"90",children:"90 jours"}),s.jsx($,{value:"180",children:"6 mois"}),s.jsx($,{value:"365",children:"1 an"})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(D,{children:"Notifications de connexion"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevez des alertes pour les nouvelles connexions"})]}),s.jsx(Ir,{checked:n.loginNotifications,onCheckedChange:p=>r(v=>({...v,loginNotifications:p}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(D,{children:"Suivi des appareils"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Surveillez les appareils connectés"})]}),s.jsx(Ir,{checked:n.deviceTracking,onCheckedChange:p=>r(v=>({...v,deviceTracking:p}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(D,{children:"Déconnexion automatique"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Déconnexion après inactivité"})]}),s.jsx(Ir,{checked:n.autoLogout,onCheckedChange:p=>r(v=>({...v,autoLogout:p}))})]})]}),s.jsxs(F,{onClick:u,className:"w-full gap-2",children:[s.jsx(Rh,{className:"h-4 w-4"}),"Sauvegarder les paramètres de sécurité"]})]})]}),s.jsxs(Z,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(RC,{className:"h-5 w-5"}),"Sessions Actives"]})}),s.jsxs(ee,{className:"space-y-4",children:[s.jsx("div",{className:"space-y-3",children:c.map(p=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[g(p.device),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:p.device}),p.current&&s.jsx(_e,{variant:"secondary",className:"text-xs",children:"Actuel"})]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[p.browser," • ",p.location]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Dernière activité: ",p.lastActive]})]})]}),!p.current&&s.jsx(F,{variant:"outline",size:"sm",onClick:()=>m(p.id),children:"Terminer"})]},p.id))}),s.jsx(Jv,{}),s.jsx(F,{variant:"destructive",onClick:f,className:"w-full",children:"Terminer toutes les autres sessions"})]})]}),s.jsxs(Z,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(Kt,{className:"h-5 w-5"}),"Gestion des Sessions"]})}),s.jsxs(ee,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(D,{children:"Se souvenir de moi"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Restez connecté entre les sessions"})]}),s.jsx(Ir,{checked:a.rememberMe,onCheckedChange:p=>i(v=>({...v,rememberMe:p}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(D,{children:"Connexion automatique"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Connexion automatique au démarrage"})]}),s.jsx(Ir,{checked:a.autoLogin,onCheckedChange:p=>i(v=>({...v,autoLogin:p}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{children:"Durée de session (heures)"}),s.jsxs(we,{value:a.sessionDuration.toString(),onValueChange:p=>i(v=>({...v,sessionDuration:parseInt(p)})),children:[s.jsx(je,{children:s.jsx(Ne,{})}),s.jsxs(be,{children:[s.jsx($,{value:"1",children:"1 heure"}),s.jsx($,{value:"4",children:"4 heures"}),s.jsx($,{value:"8",children:"8 heures"}),s.jsx($,{value:"12",children:"12 heures"}),s.jsx($,{value:"24",children:"24 heures"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{children:"Sessions simultanées maximum"}),s.jsxs(we,{value:a.maxConcurrentSessions.toString(),onValueChange:p=>i(v=>({...v,maxConcurrentSessions:parseInt(p)})),children:[s.jsx(je,{children:s.jsx(Ne,{})}),s.jsxs(be,{children:[s.jsx($,{value:"1",children:"1 session"}),s.jsx($,{value:"2",children:"2 sessions"}),s.jsx($,{value:"3",children:"3 sessions"}),s.jsx($,{value:"5",children:"5 sessions"}),s.jsx($,{value:"10",children:"10 sessions"})]})]})]})]}),s.jsxs(F,{onClick:d,className:"w-full gap-2",children:[s.jsx(Rh,{className:"h-4 w-4"}),"Sauvegarder les paramètres de session"]})]})]}),s.jsxs(Z,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(rU,{className:"h-5 w-5"}),"Notifications de Sécurité"]})}),s.jsxs(ee,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(D,{children:"Alertes de connexion"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications pour les nouvelles connexions"})]}),s.jsx(Ir,{checked:o.loginAlerts,onCheckedChange:p=>l(v=>({...v,loginAlerts:p}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(D,{children:"Alertes de sécurité"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications pour les événements de sécurité"})]}),s.jsx(Ir,{checked:o.securityAlerts,onCheckedChange:p=>l(v=>({...v,securityAlerts:p}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(D,{children:"Alertes d'appareil"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications pour les nouveaux appareils"})]}),s.jsx(Ir,{checked:o.deviceAlerts,onCheckedChange:p=>l(v=>({...v,deviceAlerts:p}))})]}),s.jsx(Jv,{}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(D,{children:"Notifications par email"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevez les alertes par email"})]}),s.jsx(Ir,{checked:o.emailNotifications,onCheckedChange:p=>l(v=>({...v,emailNotifications:p}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(D,{children:"Notifications SMS"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevez les alertes par SMS"})]}),s.jsx(Ir,{checked:o.smsNotifications,onCheckedChange:p=>l(v=>({...v,smsNotifications:p}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(D,{children:"Notifications push"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevez les alertes push"})]}),s.jsx(Ir,{checked:o.pushNotifications,onCheckedChange:p=>l(v=>({...v,pushNotifications:p}))})]})]}),s.jsxs(F,{onClick:h,className:"w-full gap-2",children:[s.jsx(Rh,{className:"h-4 w-4"}),"Sauvegarder les paramètres de notification"]})]})]})]})]}):null}function Lke(){const[e,t]=b.useState(""),[n,r]=b.useState(""),[a,i]=b.useState(!1),[o,l]=b.useState(!1),[c,u]=b.useState(""),[d,h]=b.useState(!1),[m,f]=b.useState(!1),g=_d(),{toast:p}=it();rK(),b.useEffect(()=>{(async()=>{try{const{data:{session:j},error:w}=await Re.auth.getSession();if(w){u("Lien de réinitialisation invalide ou expiré");return}j?f(!0):u("Lien de réinitialisation invalide ou expiré")}catch{u("Erreur lors de la vérification du lien de réinitialisation")}})()},[]);const v=y=>y.length<8?"Le mot de passe doit contenir au moins 8 caractères":/[A-Z]/.test(y)?/[a-z]/.test(y)?/\d/.test(y)?/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>?]/.test(y)?null:"Le mot de passe doit contenir au moins un caractère spécial":"Le mot de passe doit contenir au moins un chiffre":"Le mot de passe doit contenir au moins une lettre minuscule":"Le mot de passe doit contenir au moins une lettre majuscule",x=async y=>{if(y.preventDefault(),u(""),!e||!n){p({title:"Champs requis",description:"Veuillez remplir tous les champs",variant:"destructive"});return}if(e!==n){p({title:"Erreur",description:"Les mots de passe ne correspondent pas",variant:"destructive"});return}const j=v(e);if(j){p({title:"Mot de passe invalide",description:j,variant:"destructive"});return}h(!0);try{const{error:w}=await Re.auth.updateUser({password:e});if(w)throw w;p({title:"Mot de passe mis à jour",description:"Votre mot de passe a été réinitialisé avec succès."}),g("/login")}catch(w){u(w instanceof Error?w.message:"Une erreur est survenue lors de la mise à jour du mot de passe")}finally{h(!1)}};return!m&&!c?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-green-50 dark:from-gray-900 dark:to-gray-800 px-4",children:s.jsx(Z,{className:"w-full max-w-md",children:s.jsxs(ee,{className:"pt-6",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx(Kn,{className:"h-8 w-8 animate-spin"})}),s.jsx("p",{className:"text-center mt-4 text-sm text-muted-foreground",children:"Vérification du lien de réinitialisation..."})]})})}):c?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-green-50 dark:from-gray-900 dark:to-gray-800 px-4",children:s.jsxs(Z,{className:"w-full max-w-md",children:[s.jsxs(he,{className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:s.jsx(ht,{className:"h-8 w-8 text-red-600"})})}),s.jsx(me,{className:"text-2xl font-bold text-red-600",children:"Lien invalide"})]}),s.jsxs(ee,{children:[s.jsx(qg,{className:"mb-4",children:s.jsx(Ug,{children:c})}),s.jsx(F,{onClick:()=>g("/login"),className:"w-full",children:"Retour à la connexion"})]})]})}):s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-green-50 dark:from-gray-900 dark:to-gray-800 px-4",children:s.jsxs(Z,{className:"w-full max-w-md",children:[s.jsxs(he,{className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"p-3 bg-primary/10 rounded-full",children:s.jsx(ht,{className:"h-8 w-8 text-primary"})})}),s.jsx(me,{className:"text-2xl font-bold",children:"VetPro CRM3"}),s.jsx(Lu,{children:"Définir un nouveau mot de passe"})]}),s.jsx(ee,{children:s.jsxs("form",{onSubmit:x,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"password",children:"Nouveau mot de passe"}),s.jsxs("div",{className:"relative",children:[s.jsx(G,{id:"password",type:a?"text":"password",value:e,onChange:y=>t(y.target.value),placeholder:"Votre nouveau mot de passe",required:!0}),s.jsx(F,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>i(!a),children:a?s.jsx(yb,{className:"h-4 w-4"}):s.jsx(Nn,{className:"h-4 w-4"})})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Le mot de passe doit contenir au moins 8 caractères, une majuscule, une minuscule, un chiffre et un caractère spécial."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(D,{htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),s.jsxs("div",{className:"relative",children:[s.jsx(G,{id:"confirmPassword",type:o?"text":"password",value:n,onChange:y=>r(y.target.value),placeholder:"Confirmer votre nouveau mot de passe",required:!0}),s.jsx(F,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>l(!o),children:o?s.jsx(yb,{className:"h-4 w-4"}):s.jsx(Nn,{className:"h-4 w-4"})})]})]}),s.jsx(F,{type:"submit",className:"w-full",disabled:d,children:d?s.jsxs(s.Fragment,{children:[s.jsx(Kn,{className:"mr-2 h-4 w-4 animate-spin"}),"Mise à jour..."]}):"Mettre à jour le mot de passe"})]})})]})})}const Bke=new UW({defaultOptions:{queries:{retry:(e,t)=>(t==null?void 0:t.status)>=400&&(t==null?void 0:t.status)<500?!1:e<2,staleTime:3*60*1e3,gcTime:8*60*1e3,refetchOnWindowFocus:!1,refetchOnReconnect:"always",refetchOnMount:!0,networkMode:"offlineFirst"},mutations:{retry:1,networkMode:"offlineFirst"}}}),zke=()=>s.jsx(mJ,{children:s.jsx(WW,{client:Bke,children:s.jsxs(jW,{children:[s.jsx(s7,{}),s.jsx($7,{}),s.jsx(dJ,{children:s.jsx(MS,{children:s.jsx(lee,{children:s.jsx(sK,{children:s.jsx(ZH,{children:s.jsx("div",{className:"min-h-screen bg-background w-full text-foreground overflow-x-hidden",children:s.jsxs(WH,{children:[s.jsx(mn,{path:"/",element:s.jsx(bJ,{})}),s.jsx(mn,{path:"/login",element:s.jsx(jJ,{children:s.jsx(yJ,{})})}),s.jsx(mn,{path:"/register",element:s.jsx(wJ,{})}),s.jsx(mn,{path:"/dashboard",element:s.jsxs(vr,{children:[s.jsx(gr,{}),s.jsx(fAe,{})]})}),s.jsx(mn,{path:"/clients",element:s.jsxs(vr,{children:[s.jsx(gr,{}),s.jsx(TAe,{})]})}),s.jsx(mn,{path:"/pets",element:s.jsxs(vr,{children:[s.jsx(gr,{}),s.jsx(zAe,{})]})}),s.jsx(mn,{path:"/appointments",element:s.jsxs(vr,{children:[s.jsx(gr,{}),s.jsx(GAe,{})]})}),s.jsx(mn,{path:"/consultations",element:s.jsxs(vr,{children:[s.jsx(gr,{}),s.jsx(JAe,{})]})}),s.jsx(mn,{path:"/history",element:s.jsxs(vr,{children:[s.jsx(gr,{}),s.jsx(tke,{})]})}),s.jsx(mn,{path:"/farm",element:s.jsxs(vr,{children:[s.jsx(gr,{}),s.jsx(oke,{})]})}),s.jsx(mn,{path:"/vaccinations",element:s.jsxs(vr,{children:[s.jsx(gr,{}),s.jsx(cke,{})]})}),s.jsx(mn,{path:"/antiparasites",element:s.jsxs(vr,{children:[s.jsx(gr,{}),s.jsx(xke,{})]})}),s.jsx(mn,{path:"/stock",element:s.jsxs(vr,{children:[s.jsx(gr,{}),s.jsx(Cke,{})]})}),s.jsx(mn,{path:"/accounting",element:s.jsxs(vr,{children:[s.jsx(gr,{}),s.jsx(Ake,{})]})}),s.jsx(mn,{path:"/test-stats",element:s.jsxs(vr,{children:[s.jsx(gr,{}),s.jsx(Tke,{})]})}),s.jsx(mn,{path:"/simple-test",element:s.jsxs(vr,{children:[s.jsx(gr,{}),s.jsx(Oke,{})]})}),s.jsx(mn,{path:"/profile",element:s.jsxs(vr,{children:[s.jsx(gr,{}),s.jsx(Rke,{})]})}),s.jsx(mn,{path:"/auth-settings",element:s.jsxs(vr,{children:[s.jsx(gr,{}),s.jsx(Fke,{})]})}),s.jsx(mn,{path:"/reset-password",element:s.jsx(Lke,{})}),s.jsx(mn,{path:"*",element:s.jsx(Dke,{})})]})})})})})})})]})})});qM(document.getElementById("root")).render(s.jsx(zke,{}));
