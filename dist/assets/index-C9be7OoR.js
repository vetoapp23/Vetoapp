var JC=e=>{throw TypeError(e)};var qy=(e,t,n)=>t.has(e)||JC("Cannot "+n);var X=(e,t,n)=>(qy(e,t,"read from private field"),n?n.call(e):t.get(e)),Fe=(e,t,n)=>t.has(e)?JC("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Te=(e,t,n,s)=>(qy(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),at=(e,t,n)=>(qy(e,t,"access private method"),n);var Im=(e,t,n,s)=>({set _(a){Te(e,t,a,n)},get _(){return X(e,t,s)}});function K8(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(s,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var cr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Y8(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var a=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(n,s,a.get?a:{enumerable:!0,get:function(){return e[s]}})}),n}var dO={exports:{}},Xv={},hO={exports:{}},ft={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var im=Symbol.for("react.element"),Q8=Symbol.for("react.portal"),X8=Symbol.for("react.fragment"),J8=Symbol.for("react.strict_mode"),Z8=Symbol.for("react.profiler"),eB=Symbol.for("react.provider"),tB=Symbol.for("react.context"),nB=Symbol.for("react.forward_ref"),rB=Symbol.for("react.suspense"),sB=Symbol.for("react.memo"),aB=Symbol.for("react.lazy"),ZC=Symbol.iterator;function iB(e){return e===null||typeof e!="object"?null:(e=ZC&&e[ZC]||e["@@iterator"],typeof e=="function"?e:null)}var fO={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mO=Object.assign,pO={};function cd(e,t,n){this.props=e,this.context=t,this.refs=pO,this.updater=n||fO}cd.prototype.isReactComponent={};cd.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};cd.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function gO(){}gO.prototype=cd.prototype;function qN(e,t,n){this.props=e,this.context=t,this.refs=pO,this.updater=n||fO}var UN=qN.prototype=new gO;UN.constructor=qN;mO(UN,cd.prototype);UN.isPureReactComponent=!0;var e2=Array.isArray,vO=Object.prototype.hasOwnProperty,WN={current:null},xO={key:!0,ref:!0,__self:!0,__source:!0};function yO(e,t,n){var s,a={},i=null,o=null;if(t!=null)for(s in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)vO.call(t,s)&&!xO.hasOwnProperty(s)&&(a[s]=t[s]);var l=arguments.length-2;if(l===1)a.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)a[s]===void 0&&(a[s]=l[s]);return{$$typeof:im,type:e,key:i,ref:o,props:a,_owner:WN.current}}function oB(e,t){return{$$typeof:im,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function HN(e){return typeof e=="object"&&e!==null&&e.$$typeof===im}function lB(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var t2=/\/+/g;function Uy(e,t){return typeof e=="object"&&e!==null&&e.key!=null?lB(""+e.key):t.toString(36)}function $p(e,t,n,s,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case im:case Q8:o=!0}}if(o)return o=e,a=a(o),e=s===""?"."+Uy(o,0):s,e2(a)?(n="",e!=null&&(n=e.replace(t2,"$&/")+"/"),$p(a,t,n,"",function(u){return u})):a!=null&&(HN(a)&&(a=oB(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(t2,"$&/")+"/")+e)),t.push(a)),1;if(o=0,s=s===""?".":s+":",e2(e))for(var l=0;l<e.length;l++){i=e[l];var c=s+Uy(i,l);o+=$p(i,t,n,c,a)}else if(c=iB(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=s+Uy(i,l++),o+=$p(i,t,n,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function $m(e,t,n){if(e==null)return e;var s=[],a=0;return $p(e,s,"","",function(i){return t.call(n,i,a++)}),s}function cB(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Cr={current:null},Rp={transition:null},uB={ReactCurrentDispatcher:Cr,ReactCurrentBatchConfig:Rp,ReactCurrentOwner:WN};function jO(){throw Error("act(...) is not supported in production builds of React.")}ft.Children={map:$m,forEach:function(e,t,n){$m(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return $m(e,function(){t++}),t},toArray:function(e){return $m(e,function(t){return t})||[]},only:function(e){if(!HN(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ft.Component=cd;ft.Fragment=X8;ft.Profiler=Z8;ft.PureComponent=qN;ft.StrictMode=J8;ft.Suspense=rB;ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uB;ft.act=jO;ft.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=mO({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=WN.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)vO.call(t,c)&&!xO.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:im,type:e.type,key:a,ref:i,props:s,_owner:o}};ft.createContext=function(e){return e={$$typeof:tB,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:eB,_context:e},e.Consumer=e};ft.createElement=yO;ft.createFactory=function(e){var t=yO.bind(null,e);return t.type=e,t};ft.createRef=function(){return{current:null}};ft.forwardRef=function(e){return{$$typeof:nB,render:e}};ft.isValidElement=HN;ft.lazy=function(e){return{$$typeof:aB,_payload:{_status:-1,_result:e},_init:cB}};ft.memo=function(e,t){return{$$typeof:sB,type:e,compare:t===void 0?null:t}};ft.startTransition=function(e){var t=Rp.transition;Rp.transition={};try{e()}finally{Rp.transition=t}};ft.unstable_act=jO;ft.useCallback=function(e,t){return Cr.current.useCallback(e,t)};ft.useContext=function(e){return Cr.current.useContext(e)};ft.useDebugValue=function(){};ft.useDeferredValue=function(e){return Cr.current.useDeferredValue(e)};ft.useEffect=function(e,t){return Cr.current.useEffect(e,t)};ft.useId=function(){return Cr.current.useId()};ft.useImperativeHandle=function(e,t,n){return Cr.current.useImperativeHandle(e,t,n)};ft.useInsertionEffect=function(e,t){return Cr.current.useInsertionEffect(e,t)};ft.useLayoutEffect=function(e,t){return Cr.current.useLayoutEffect(e,t)};ft.useMemo=function(e,t){return Cr.current.useMemo(e,t)};ft.useReducer=function(e,t,n){return Cr.current.useReducer(e,t,n)};ft.useRef=function(e){return Cr.current.useRef(e)};ft.useState=function(e){return Cr.current.useState(e)};ft.useSyncExternalStore=function(e,t,n){return Cr.current.useSyncExternalStore(e,t,n)};ft.useTransition=function(){return Cr.current.useTransition()};ft.version="18.3.1";hO.exports=ft;var b=hO.exports;const F=Pt(b),GN=K8({__proto__:null,default:F},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dB=b,hB=Symbol.for("react.element"),fB=Symbol.for("react.fragment"),mB=Object.prototype.hasOwnProperty,pB=dB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gB={key:!0,ref:!0,__self:!0,__source:!0};function bO(e,t,n){var s,a={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(s in t)mB.call(t,s)&&!gB.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:hB,type:e,key:i,ref:o,props:a,_owner:pB.current}}Xv.Fragment=fB;Xv.jsx=bO;Xv.jsxs=bO;dO.exports=Xv;var r=dO.exports,wO={exports:{}},os={},NO={exports:{}},SO={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(I,E){var q=I.length;I.push(E);e:for(;0<q;){var Y=q-1>>>1,re=I[Y];if(0<a(re,E))I[Y]=E,I[q]=re,q=Y;else break e}}function n(I){return I.length===0?null:I[0]}function s(I){if(I.length===0)return null;var E=I[0],q=I.pop();if(q!==E){I[0]=q;e:for(var Y=0,re=I.length,oe=re>>>1;Y<oe;){var ae=2*(Y+1)-1,me=I[ae],we=ae+1,ue=I[we];if(0>a(me,q))we<re&&0>a(ue,me)?(I[Y]=ue,I[we]=q,Y=we):(I[Y]=me,I[ae]=q,Y=ae);else if(we<re&&0>a(ue,q))I[Y]=ue,I[we]=q,Y=we;else break e}}return E}function a(I,E){var q=I.sortIndex-E.sortIndex;return q!==0?q:I.id-E.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,g=!1,p=!1,v=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(I){for(var E=n(u);E!==null;){if(E.callback===null)s(u);else if(E.startTime<=I)s(u),E.sortIndex=E.expirationTime,t(c,E);else break;E=n(u)}}function N(I){if(p=!1,y(I),!g)if(n(c)!==null)g=!0,z(w);else{var E=n(u);E!==null&&$(N,E.startTime-I)}}function w(I,E){g=!1,p&&(p=!1,j(_),_=-1),m=!0;var q=f;try{for(y(E),h=n(c);h!==null&&(!(h.expirationTime>E)||I&&!P());){var Y=h.callback;if(typeof Y=="function"){h.callback=null,f=h.priorityLevel;var re=Y(h.expirationTime<=E);E=e.unstable_now(),typeof re=="function"?h.callback=re:h===n(c)&&s(c),y(E)}else s(c);h=n(c)}if(h!==null)var oe=!0;else{var ae=n(u);ae!==null&&$(N,ae.startTime-E),oe=!1}return oe}finally{h=null,f=q,m=!1}}var C=!1,S=null,_=-1,k=5,T=-1;function P(){return!(e.unstable_now()-T<k)}function A(){if(S!==null){var I=e.unstable_now();T=I;var E=!0;try{E=S(!0,I)}finally{E?B():(C=!1,S=null)}}else C=!1}var B;if(typeof x=="function")B=function(){x(A)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,H=L.port2;L.port1.onmessage=A,B=function(){H.postMessage(null)}}else B=function(){v(A,0)};function z(I){S=I,C||(C=!0,B())}function $(I,E){_=v(function(){I(e.unstable_now())},E)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){g||m||(g=!0,z(w))},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(I){switch(f){case 1:case 2:case 3:var E=3;break;default:E=f}var q=f;f=E;try{return I()}finally{f=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(I,E){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var q=f;f=I;try{return E()}finally{f=q}},e.unstable_scheduleCallback=function(I,E,q){var Y=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?Y+q:Y):q=Y,I){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=q+re,I={id:d++,callback:E,priorityLevel:I,startTime:q,expirationTime:re,sortIndex:-1},q>Y?(I.sortIndex=q,t(u,I),n(c)===null&&I===n(u)&&(p?(j(_),_=-1):p=!0,$(N,q-Y))):(I.sortIndex=re,t(c,I),g||m||(g=!0,z(w))),I},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(I){var E=f;return function(){var q=f;f=E;try{return I.apply(this,arguments)}finally{f=q}}}})(SO);NO.exports=SO;var vB=NO.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xB=b,is=vB;function be(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var CO=new Set,Wh={};function Xl(e,t){yu(e,t),yu(e+"Capture",t)}function yu(e,t){for(Wh[e]=t,e=0;e<t.length;e++)CO.add(t[e])}var pi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vj=Object.prototype.hasOwnProperty,yB=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,n2={},r2={};function jB(e){return vj.call(r2,e)?!0:vj.call(n2,e)?!1:yB.test(e)?r2[e]=!0:(n2[e]=!0,!1)}function bB(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function wB(e,t,n,s){if(t===null||typeof t>"u"||bB(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function _r(e,t,n,s,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Zn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Zn[e]=new _r(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Zn[t]=new _r(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Zn[e]=new _r(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Zn[e]=new _r(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Zn[e]=new _r(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Zn[e]=new _r(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Zn[e]=new _r(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Zn[e]=new _r(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Zn[e]=new _r(e,5,!1,e.toLowerCase(),null,!1,!1)});var KN=/[\-:]([a-z])/g;function YN(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(KN,YN);Zn[t]=new _r(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(KN,YN);Zn[t]=new _r(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(KN,YN);Zn[t]=new _r(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Zn[e]=new _r(e,1,!1,e.toLowerCase(),null,!1,!1)});Zn.xlinkHref=new _r("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Zn[e]=new _r(e,1,!1,e.toLowerCase(),null,!0,!0)});function QN(e,t,n,s){var a=Zn.hasOwnProperty(t)?Zn[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(wB(t,n,a,s)&&(n=null),s||a===null?jB(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,s=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var Pi=xB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rm=Symbol.for("react.element"),Tc=Symbol.for("react.portal"),Ec=Symbol.for("react.fragment"),XN=Symbol.for("react.strict_mode"),xj=Symbol.for("react.profiler"),_O=Symbol.for("react.provider"),PO=Symbol.for("react.context"),JN=Symbol.for("react.forward_ref"),yj=Symbol.for("react.suspense"),jj=Symbol.for("react.suspense_list"),ZN=Symbol.for("react.memo"),qi=Symbol.for("react.lazy"),AO=Symbol.for("react.offscreen"),s2=Symbol.iterator;function Ud(e){return e===null||typeof e!="object"?null:(e=s2&&e[s2]||e["@@iterator"],typeof e=="function"?e:null)}var on=Object.assign,Wy;function ph(e){if(Wy===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Wy=t&&t[1]||""}return`
`+Wy+e}var Hy=!1;function Gy(e,t){if(!e||Hy)return"";Hy=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var s=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){s=u}e.call(t.prototype)}else{try{throw Error()}catch(u){s=u}e()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=s.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Hy=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ph(e):""}function NB(e){switch(e.tag){case 5:return ph(e.type);case 16:return ph("Lazy");case 13:return ph("Suspense");case 19:return ph("SuspenseList");case 0:case 2:case 15:return e=Gy(e.type,!1),e;case 11:return e=Gy(e.type.render,!1),e;case 1:return e=Gy(e.type,!0),e;default:return""}}function bj(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ec:return"Fragment";case Tc:return"Portal";case xj:return"Profiler";case XN:return"StrictMode";case yj:return"Suspense";case jj:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case PO:return(e.displayName||"Context")+".Consumer";case _O:return(e._context.displayName||"Context")+".Provider";case JN:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ZN:return t=e.displayName||null,t!==null?t:bj(e.type)||"Memo";case qi:t=e._payload,e=e._init;try{return bj(e(t))}catch{}}return null}function SB(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bj(t);case 8:return t===XN?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function So(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function kO(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function CB(e){var t=kO(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Fm(e){e._valueTracker||(e._valueTracker=CB(e))}function TO(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=kO(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function ng(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function wj(e,t){var n=t.checked;return on({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function a2(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=So(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function EO(e,t){t=t.checked,t!=null&&QN(e,"checked",t,!1)}function Nj(e,t){EO(e,t);var n=So(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Sj(e,t.type,n):t.hasOwnProperty("defaultValue")&&Sj(e,t.type,So(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function i2(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Sj(e,t,n){(t!=="number"||ng(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var gh=Array.isArray;function Gc(e,t,n,s){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&s&&(e[n].defaultSelected=!0)}else{for(n=""+So(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Cj(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(be(91));return on({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function o2(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(be(92));if(gh(n)){if(1<n.length)throw Error(be(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:So(n)}}function OO(e,t){var n=So(t.value),s=So(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function l2(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function DO(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _j(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?DO(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Lm,MO=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Lm=Lm||document.createElement("div"),Lm.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Lm.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Hh(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Sh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_B=["Webkit","ms","Moz","O"];Object.keys(Sh).forEach(function(e){_B.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Sh[t]=Sh[e]})});function IO(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Sh.hasOwnProperty(e)&&Sh[e]?(""+t).trim():t+"px"}function $O(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,a=IO(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,a):e[n]=a}}var PB=on({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pj(e,t){if(t){if(PB[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(be(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(be(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(be(61))}if(t.style!=null&&typeof t.style!="object")throw Error(be(62))}}function Aj(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kj=null;function e1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Tj=null,Kc=null,Yc=null;function c2(e){if(e=cm(e)){if(typeof Tj!="function")throw Error(be(280));var t=e.stateNode;t&&(t=nx(t),Tj(e.stateNode,e.type,t))}}function RO(e){Kc?Yc?Yc.push(e):Yc=[e]:Kc=e}function FO(){if(Kc){var e=Kc,t=Yc;if(Yc=Kc=null,c2(e),t)for(e=0;e<t.length;e++)c2(t[e])}}function LO(e,t){return e(t)}function BO(){}var Ky=!1;function VO(e,t,n){if(Ky)return e(t,n);Ky=!0;try{return LO(e,t,n)}finally{Ky=!1,(Kc!==null||Yc!==null)&&(BO(),FO())}}function Gh(e,t){var n=e.stateNode;if(n===null)return null;var s=nx(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(be(231,t,typeof n));return n}var Ej=!1;if(pi)try{var Wd={};Object.defineProperty(Wd,"passive",{get:function(){Ej=!0}}),window.addEventListener("test",Wd,Wd),window.removeEventListener("test",Wd,Wd)}catch{Ej=!1}function AB(e,t,n,s,a,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var Ch=!1,rg=null,sg=!1,Oj=null,kB={onError:function(e){Ch=!0,rg=e}};function TB(e,t,n,s,a,i,o,l,c){Ch=!1,rg=null,AB.apply(kB,arguments)}function EB(e,t,n,s,a,i,o,l,c){if(TB.apply(this,arguments),Ch){if(Ch){var u=rg;Ch=!1,rg=null}else throw Error(be(198));sg||(sg=!0,Oj=u)}}function Jl(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function zO(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function u2(e){if(Jl(e)!==e)throw Error(be(188))}function OB(e){var t=e.alternate;if(!t){if(t=Jl(e),t===null)throw Error(be(188));return t!==e?null:e}for(var n=e,s=t;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(s=a.return,s!==null){n=s;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return u2(a),e;if(i===s)return u2(a),t;i=i.sibling}throw Error(be(188))}if(n.return!==s.return)n=a,s=i;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,s=i;break}if(l===s){o=!0,s=a,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,s=a;break}if(l===s){o=!0,s=i,n=a;break}l=l.sibling}if(!o)throw Error(be(189))}}if(n.alternate!==s)throw Error(be(190))}if(n.tag!==3)throw Error(be(188));return n.stateNode.current===n?e:t}function qO(e){return e=OB(e),e!==null?UO(e):null}function UO(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=UO(e);if(t!==null)return t;e=e.sibling}return null}var WO=is.unstable_scheduleCallback,d2=is.unstable_cancelCallback,DB=is.unstable_shouldYield,MB=is.unstable_requestPaint,pn=is.unstable_now,IB=is.unstable_getCurrentPriorityLevel,t1=is.unstable_ImmediatePriority,HO=is.unstable_UserBlockingPriority,ag=is.unstable_NormalPriority,$B=is.unstable_LowPriority,GO=is.unstable_IdlePriority,Jv=null,ka=null;function RB(e){if(ka&&typeof ka.onCommitFiberRoot=="function")try{ka.onCommitFiberRoot(Jv,e,void 0,(e.current.flags&128)===128)}catch{}}var Xs=Math.clz32?Math.clz32:BB,FB=Math.log,LB=Math.LN2;function BB(e){return e>>>=0,e===0?32:31-(FB(e)/LB|0)|0}var Bm=64,Vm=4194304;function vh(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ig(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,a=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~a;l!==0?s=vh(l):(i&=o,i!==0&&(s=vh(i)))}else o=n&~a,o!==0?s=vh(o):i!==0&&(s=vh(i));if(s===0)return 0;if(t!==0&&t!==s&&!(t&a)&&(a=s&-s,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-Xs(t),a=1<<n,s|=e[n],t&=~a;return s}function VB(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zB(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Xs(i),l=1<<o,c=a[o];c===-1?(!(l&n)||l&s)&&(a[o]=VB(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Dj(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function KO(){var e=Bm;return Bm<<=1,!(Bm&4194240)&&(Bm=64),e}function Yy(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function om(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Xs(t),e[t]=n}function qB(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Xs(n),i=1<<a;t[a]=0,s[a]=-1,e[a]=-1,n&=~i}}function n1(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-Xs(n),a=1<<s;a&t|e[s]&t&&(e[s]|=t),n&=~a}}var Et=0;function YO(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var QO,r1,XO,JO,ZO,Mj=!1,zm=[],ho=null,fo=null,mo=null,Kh=new Map,Yh=new Map,Hi=[],UB="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function h2(e,t){switch(e){case"focusin":case"focusout":ho=null;break;case"dragenter":case"dragleave":fo=null;break;case"mouseover":case"mouseout":mo=null;break;case"pointerover":case"pointerout":Kh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yh.delete(t.pointerId)}}function Hd(e,t,n,s,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[a]},t!==null&&(t=cm(t),t!==null&&r1(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function WB(e,t,n,s,a){switch(t){case"focusin":return ho=Hd(ho,e,t,n,s,a),!0;case"dragenter":return fo=Hd(fo,e,t,n,s,a),!0;case"mouseover":return mo=Hd(mo,e,t,n,s,a),!0;case"pointerover":var i=a.pointerId;return Kh.set(i,Hd(Kh.get(i)||null,e,t,n,s,a)),!0;case"gotpointercapture":return i=a.pointerId,Yh.set(i,Hd(Yh.get(i)||null,e,t,n,s,a)),!0}return!1}function eD(e){var t=il(e.target);if(t!==null){var n=Jl(t);if(n!==null){if(t=n.tag,t===13){if(t=zO(n),t!==null){e.blockedOn=t,ZO(e.priority,function(){XO(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Fp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ij(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);kj=s,n.target.dispatchEvent(s),kj=null}else return t=cm(n),t!==null&&r1(t),e.blockedOn=n,!1;t.shift()}return!0}function f2(e,t,n){Fp(e)&&n.delete(t)}function HB(){Mj=!1,ho!==null&&Fp(ho)&&(ho=null),fo!==null&&Fp(fo)&&(fo=null),mo!==null&&Fp(mo)&&(mo=null),Kh.forEach(f2),Yh.forEach(f2)}function Gd(e,t){e.blockedOn===t&&(e.blockedOn=null,Mj||(Mj=!0,is.unstable_scheduleCallback(is.unstable_NormalPriority,HB)))}function Qh(e){function t(a){return Gd(a,e)}if(0<zm.length){Gd(zm[0],e);for(var n=1;n<zm.length;n++){var s=zm[n];s.blockedOn===e&&(s.blockedOn=null)}}for(ho!==null&&Gd(ho,e),fo!==null&&Gd(fo,e),mo!==null&&Gd(mo,e),Kh.forEach(t),Yh.forEach(t),n=0;n<Hi.length;n++)s=Hi[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<Hi.length&&(n=Hi[0],n.blockedOn===null);)eD(n),n.blockedOn===null&&Hi.shift()}var Qc=Pi.ReactCurrentBatchConfig,og=!0;function GB(e,t,n,s){var a=Et,i=Qc.transition;Qc.transition=null;try{Et=1,s1(e,t,n,s)}finally{Et=a,Qc.transition=i}}function KB(e,t,n,s){var a=Et,i=Qc.transition;Qc.transition=null;try{Et=4,s1(e,t,n,s)}finally{Et=a,Qc.transition=i}}function s1(e,t,n,s){if(og){var a=Ij(e,t,n,s);if(a===null)a0(e,t,s,lg,n),h2(e,s);else if(WB(a,e,t,n,s))s.stopPropagation();else if(h2(e,s),t&4&&-1<UB.indexOf(e)){for(;a!==null;){var i=cm(a);if(i!==null&&QO(i),i=Ij(e,t,n,s),i===null&&a0(e,t,s,lg,n),i===a)break;a=i}a!==null&&s.stopPropagation()}else a0(e,t,s,null,n)}}var lg=null;function Ij(e,t,n,s){if(lg=null,e=e1(s),e=il(e),e!==null)if(t=Jl(e),t===null)e=null;else if(n=t.tag,n===13){if(e=zO(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return lg=e,null}function tD(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(IB()){case t1:return 1;case HO:return 4;case ag:case $B:return 16;case GO:return 536870912;default:return 16}default:return 16}}var io=null,a1=null,Lp=null;function nD(){if(Lp)return Lp;var e,t=a1,n=t.length,s,a="value"in io?io.value:io.textContent,i=a.length;for(e=0;e<n&&t[e]===a[e];e++);var o=n-e;for(s=1;s<=o&&t[n-s]===a[i-s];s++);return Lp=a.slice(e,1<s?1-s:void 0)}function Bp(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function qm(){return!0}function m2(){return!1}function ls(e){function t(n,s,a,i,o){this._reactName=n,this._targetInst=a,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?qm:m2,this.isPropagationStopped=m2,this}return on(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=qm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=qm)},persist:function(){},isPersistent:qm}),t}var ud={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},i1=ls(ud),lm=on({},ud,{view:0,detail:0}),YB=ls(lm),Qy,Xy,Kd,Zv=on({},lm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:o1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Kd&&(Kd&&e.type==="mousemove"?(Qy=e.screenX-Kd.screenX,Xy=e.screenY-Kd.screenY):Xy=Qy=0,Kd=e),Qy)},movementY:function(e){return"movementY"in e?e.movementY:Xy}}),p2=ls(Zv),QB=on({},Zv,{dataTransfer:0}),XB=ls(QB),JB=on({},lm,{relatedTarget:0}),Jy=ls(JB),ZB=on({},ud,{animationName:0,elapsedTime:0,pseudoElement:0}),eV=ls(ZB),tV=on({},ud,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),nV=ls(tV),rV=on({},ud,{data:0}),g2=ls(rV),sV={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oV(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=iV[e])?!!t[e]:!1}function o1(){return oV}var lV=on({},lm,{key:function(e){if(e.key){var t=sV[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Bp(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?aV[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:o1,charCode:function(e){return e.type==="keypress"?Bp(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Bp(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),cV=ls(lV),uV=on({},Zv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),v2=ls(uV),dV=on({},lm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:o1}),hV=ls(dV),fV=on({},ud,{propertyName:0,elapsedTime:0,pseudoElement:0}),mV=ls(fV),pV=on({},Zv,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),gV=ls(pV),vV=[9,13,27,32],l1=pi&&"CompositionEvent"in window,_h=null;pi&&"documentMode"in document&&(_h=document.documentMode);var xV=pi&&"TextEvent"in window&&!_h,rD=pi&&(!l1||_h&&8<_h&&11>=_h),x2=" ",y2=!1;function sD(e,t){switch(e){case"keyup":return vV.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aD(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Oc=!1;function yV(e,t){switch(e){case"compositionend":return aD(t);case"keypress":return t.which!==32?null:(y2=!0,x2);case"textInput":return e=t.data,e===x2&&y2?null:e;default:return null}}function jV(e,t){if(Oc)return e==="compositionend"||!l1&&sD(e,t)?(e=nD(),Lp=a1=io=null,Oc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return rD&&t.locale!=="ko"?null:t.data;default:return null}}var bV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function j2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!bV[e.type]:t==="textarea"}function iD(e,t,n,s){RO(s),t=cg(t,"onChange"),0<t.length&&(n=new i1("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Ph=null,Xh=null;function wV(e){vD(e,0)}function ex(e){var t=Ic(e);if(TO(t))return e}function NV(e,t){if(e==="change")return t}var oD=!1;if(pi){var Zy;if(pi){var e0="oninput"in document;if(!e0){var b2=document.createElement("div");b2.setAttribute("oninput","return;"),e0=typeof b2.oninput=="function"}Zy=e0}else Zy=!1;oD=Zy&&(!document.documentMode||9<document.documentMode)}function w2(){Ph&&(Ph.detachEvent("onpropertychange",lD),Xh=Ph=null)}function lD(e){if(e.propertyName==="value"&&ex(Xh)){var t=[];iD(t,Xh,e,e1(e)),VO(wV,t)}}function SV(e,t,n){e==="focusin"?(w2(),Ph=t,Xh=n,Ph.attachEvent("onpropertychange",lD)):e==="focusout"&&w2()}function CV(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ex(Xh)}function _V(e,t){if(e==="click")return ex(t)}function PV(e,t){if(e==="input"||e==="change")return ex(t)}function AV(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ta=typeof Object.is=="function"?Object.is:AV;function Jh(e,t){if(ta(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var a=n[s];if(!vj.call(t,a)||!ta(e[a],t[a]))return!1}return!0}function N2(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function S2(e,t){var n=N2(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=N2(n)}}function cD(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?cD(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function uD(){for(var e=window,t=ng();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ng(e.document)}return t}function c1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function kV(e){var t=uD(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&cD(n.ownerDocument.documentElement,n)){if(s!==null&&c1(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(s.start,a);s=s.end===void 0?i:Math.min(s.end,a),!e.extend&&i>s&&(a=s,s=i,i=a),a=S2(n,i);var o=S2(n,s);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>s?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var TV=pi&&"documentMode"in document&&11>=document.documentMode,Dc=null,$j=null,Ah=null,Rj=!1;function C2(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Rj||Dc==null||Dc!==ng(s)||(s=Dc,"selectionStart"in s&&c1(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ah&&Jh(Ah,s)||(Ah=s,s=cg($j,"onSelect"),0<s.length&&(t=new i1("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=Dc)))}function Um(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Mc={animationend:Um("Animation","AnimationEnd"),animationiteration:Um("Animation","AnimationIteration"),animationstart:Um("Animation","AnimationStart"),transitionend:Um("Transition","TransitionEnd")},t0={},dD={};pi&&(dD=document.createElement("div").style,"AnimationEvent"in window||(delete Mc.animationend.animation,delete Mc.animationiteration.animation,delete Mc.animationstart.animation),"TransitionEvent"in window||delete Mc.transitionend.transition);function tx(e){if(t0[e])return t0[e];if(!Mc[e])return e;var t=Mc[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in dD)return t0[e]=t[n];return e}var hD=tx("animationend"),fD=tx("animationiteration"),mD=tx("animationstart"),pD=tx("transitionend"),gD=new Map,_2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function To(e,t){gD.set(e,t),Xl(t,[e])}for(var n0=0;n0<_2.length;n0++){var r0=_2[n0],EV=r0.toLowerCase(),OV=r0[0].toUpperCase()+r0.slice(1);To(EV,"on"+OV)}To(hD,"onAnimationEnd");To(fD,"onAnimationIteration");To(mD,"onAnimationStart");To("dblclick","onDoubleClick");To("focusin","onFocus");To("focusout","onBlur");To(pD,"onTransitionEnd");yu("onMouseEnter",["mouseout","mouseover"]);yu("onMouseLeave",["mouseout","mouseover"]);yu("onPointerEnter",["pointerout","pointerover"]);yu("onPointerLeave",["pointerout","pointerover"]);Xl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DV=new Set("cancel close invalid load scroll toggle".split(" ").concat(xh));function P2(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,EB(s,t,void 0,e),e.currentTarget=null}function vD(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],a=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;P2(a,l,u),i=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;P2(a,l,u),i=c}}}if(sg)throw e=Oj,sg=!1,Oj=null,e}function Wt(e,t){var n=t[zj];n===void 0&&(n=t[zj]=new Set);var s=e+"__bubble";n.has(s)||(xD(t,e,2,!1),n.add(s))}function s0(e,t,n){var s=0;t&&(s|=4),xD(n,e,s,t)}var Wm="_reactListening"+Math.random().toString(36).slice(2);function Zh(e){if(!e[Wm]){e[Wm]=!0,CO.forEach(function(n){n!=="selectionchange"&&(DV.has(n)||s0(n,!1,e),s0(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Wm]||(t[Wm]=!0,s0("selectionchange",!1,t))}}function xD(e,t,n,s){switch(tD(t)){case 1:var a=GB;break;case 4:a=KB;break;default:a=s1}n=a.bind(null,t,n,e),a=void 0,!Ej||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function a0(e,t,n,s,a){var i=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=il(l),o===null)return;if(c=o.tag,c===5||c===6){s=i=o;continue e}l=l.parentNode}}s=s.return}VO(function(){var u=i,d=e1(n),h=[];e:{var f=gD.get(e);if(f!==void 0){var m=i1,g=e;switch(e){case"keypress":if(Bp(n)===0)break e;case"keydown":case"keyup":m=cV;break;case"focusin":g="focus",m=Jy;break;case"focusout":g="blur",m=Jy;break;case"beforeblur":case"afterblur":m=Jy;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=p2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=XB;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=hV;break;case hD:case fD:case mD:m=eV;break;case pD:m=mV;break;case"scroll":m=YB;break;case"wheel":m=gV;break;case"copy":case"cut":case"paste":m=nV;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=v2}var p=(t&4)!==0,v=!p&&e==="scroll",j=p?f!==null?f+"Capture":null:f;p=[];for(var x=u,y;x!==null;){y=x;var N=y.stateNode;if(y.tag===5&&N!==null&&(y=N,j!==null&&(N=Gh(x,j),N!=null&&p.push(ef(x,N,y)))),v)break;x=x.return}0<p.length&&(f=new m(f,g,null,n,d),h.push({event:f,listeners:p}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&n!==kj&&(g=n.relatedTarget||n.fromElement)&&(il(g)||g[gi]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(g=n.relatedTarget||n.toElement,m=u,g=g?il(g):null,g!==null&&(v=Jl(g),g!==v||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(p=p2,N="onMouseLeave",j="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(p=v2,N="onPointerLeave",j="onPointerEnter",x="pointer"),v=m==null?f:Ic(m),y=g==null?f:Ic(g),f=new p(N,x+"leave",m,n,d),f.target=v,f.relatedTarget=y,N=null,il(d)===u&&(p=new p(j,x+"enter",g,n,d),p.target=y,p.relatedTarget=v,N=p),v=N,m&&g)t:{for(p=m,j=g,x=0,y=p;y;y=fc(y))x++;for(y=0,N=j;N;N=fc(N))y++;for(;0<x-y;)p=fc(p),x--;for(;0<y-x;)j=fc(j),y--;for(;x--;){if(p===j||j!==null&&p===j.alternate)break t;p=fc(p),j=fc(j)}p=null}else p=null;m!==null&&A2(h,f,m,p,!1),g!==null&&v!==null&&A2(h,v,g,p,!0)}}e:{if(f=u?Ic(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var w=NV;else if(j2(f))if(oD)w=PV;else{w=CV;var C=SV}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(w=_V);if(w&&(w=w(e,u))){iD(h,w,n,d);break e}C&&C(e,f,u),e==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&Sj(f,"number",f.value)}switch(C=u?Ic(u):window,e){case"focusin":(j2(C)||C.contentEditable==="true")&&(Dc=C,$j=u,Ah=null);break;case"focusout":Ah=$j=Dc=null;break;case"mousedown":Rj=!0;break;case"contextmenu":case"mouseup":case"dragend":Rj=!1,C2(h,n,d);break;case"selectionchange":if(TV)break;case"keydown":case"keyup":C2(h,n,d)}var S;if(l1)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Oc?sD(e,n)&&(_="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(rD&&n.locale!=="ko"&&(Oc||_!=="onCompositionStart"?_==="onCompositionEnd"&&Oc&&(S=nD()):(io=d,a1="value"in io?io.value:io.textContent,Oc=!0)),C=cg(u,_),0<C.length&&(_=new g2(_,e,null,n,d),h.push({event:_,listeners:C}),S?_.data=S:(S=aD(n),S!==null&&(_.data=S)))),(S=xV?yV(e,n):jV(e,n))&&(u=cg(u,"onBeforeInput"),0<u.length&&(d=new g2("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=S))}vD(h,t)})}function ef(e,t,n){return{instance:e,listener:t,currentTarget:n}}function cg(e,t){for(var n=t+"Capture",s=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Gh(e,n),i!=null&&s.unshift(ef(e,i,a)),i=Gh(e,t),i!=null&&s.push(ef(e,i,a))),e=e.return}return s}function fc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function A2(e,t,n,s,a){for(var i=t._reactName,o=[];n!==null&&n!==s;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&u!==null&&(l=u,a?(c=Gh(n,i),c!=null&&o.unshift(ef(n,c,l))):a||(c=Gh(n,i),c!=null&&o.push(ef(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var MV=/\r\n?/g,IV=/\u0000|\uFFFD/g;function k2(e){return(typeof e=="string"?e:""+e).replace(MV,`
`).replace(IV,"")}function Hm(e,t,n){if(t=k2(t),k2(e)!==t&&n)throw Error(be(425))}function ug(){}var Fj=null,Lj=null;function Bj(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Vj=typeof setTimeout=="function"?setTimeout:void 0,$V=typeof clearTimeout=="function"?clearTimeout:void 0,T2=typeof Promise=="function"?Promise:void 0,RV=typeof queueMicrotask=="function"?queueMicrotask:typeof T2<"u"?function(e){return T2.resolve(null).then(e).catch(FV)}:Vj;function FV(e){setTimeout(function(){throw e})}function i0(e,t){var n=t,s=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(s===0){e.removeChild(a),Qh(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=a}while(n);Qh(t)}function po(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function E2(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var dd=Math.random().toString(36).slice(2),ba="__reactFiber$"+dd,tf="__reactProps$"+dd,gi="__reactContainer$"+dd,zj="__reactEvents$"+dd,LV="__reactListeners$"+dd,BV="__reactHandles$"+dd;function il(e){var t=e[ba];if(t)return t;for(var n=e.parentNode;n;){if(t=n[gi]||n[ba]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=E2(e);e!==null;){if(n=e[ba])return n;e=E2(e)}return t}e=n,n=e.parentNode}return null}function cm(e){return e=e[ba]||e[gi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ic(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(be(33))}function nx(e){return e[tf]||null}var qj=[],$c=-1;function Eo(e){return{current:e}}function Kt(e){0>$c||(e.current=qj[$c],qj[$c]=null,$c--)}function Vt(e,t){$c++,qj[$c]=e.current,e.current=t}var Co={},dr=Eo(Co),Fr=Eo(!1),Tl=Co;function ju(e,t){var n=e.type.contextTypes;if(!n)return Co;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in n)a[i]=t[i];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Lr(e){return e=e.childContextTypes,e!=null}function dg(){Kt(Fr),Kt(dr)}function O2(e,t,n){if(dr.current!==Co)throw Error(be(168));Vt(dr,t),Vt(Fr,n)}function yD(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error(be(108,SB(e)||"Unknown",a));return on({},n,s)}function hg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Co,Tl=dr.current,Vt(dr,e),Vt(Fr,Fr.current),!0}function D2(e,t,n){var s=e.stateNode;if(!s)throw Error(be(169));n?(e=yD(e,t,Tl),s.__reactInternalMemoizedMergedChildContext=e,Kt(Fr),Kt(dr),Vt(dr,e)):Kt(Fr),Vt(Fr,n)}var ti=null,rx=!1,o0=!1;function jD(e){ti===null?ti=[e]:ti.push(e)}function VV(e){rx=!0,jD(e)}function Oo(){if(!o0&&ti!==null){o0=!0;var e=0,t=Et;try{var n=ti;for(Et=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}ti=null,rx=!1}catch(a){throw ti!==null&&(ti=ti.slice(e+1)),WO(t1,Oo),a}finally{Et=t,o0=!1}}return null}var Rc=[],Fc=0,fg=null,mg=0,xs=[],ys=0,El=null,ii=1,oi="";function Xo(e,t){Rc[Fc++]=mg,Rc[Fc++]=fg,fg=e,mg=t}function bD(e,t,n){xs[ys++]=ii,xs[ys++]=oi,xs[ys++]=El,El=e;var s=ii;e=oi;var a=32-Xs(s)-1;s&=~(1<<a),n+=1;var i=32-Xs(t)+a;if(30<i){var o=a-a%5;i=(s&(1<<o)-1).toString(32),s>>=o,a-=o,ii=1<<32-Xs(t)+a|n<<a|s,oi=i+e}else ii=1<<i|n<<a|s,oi=e}function u1(e){e.return!==null&&(Xo(e,1),bD(e,1,0))}function d1(e){for(;e===fg;)fg=Rc[--Fc],Rc[Fc]=null,mg=Rc[--Fc],Rc[Fc]=null;for(;e===El;)El=xs[--ys],xs[ys]=null,oi=xs[--ys],xs[ys]=null,ii=xs[--ys],xs[ys]=null}var ns=null,ts=null,Zt=!1,Hs=null;function wD(e,t){var n=bs(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function M2(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ns=e,ts=po(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ns=e,ts=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=El!==null?{id:ii,overflow:oi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=bs(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ns=e,ts=null,!0):!1;default:return!1}}function Uj(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Wj(e){if(Zt){var t=ts;if(t){var n=t;if(!M2(e,t)){if(Uj(e))throw Error(be(418));t=po(n.nextSibling);var s=ns;t&&M2(e,t)?wD(s,n):(e.flags=e.flags&-4097|2,Zt=!1,ns=e)}}else{if(Uj(e))throw Error(be(418));e.flags=e.flags&-4097|2,Zt=!1,ns=e}}}function I2(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ns=e}function Gm(e){if(e!==ns)return!1;if(!Zt)return I2(e),Zt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Bj(e.type,e.memoizedProps)),t&&(t=ts)){if(Uj(e))throw ND(),Error(be(418));for(;t;)wD(e,t),t=po(t.nextSibling)}if(I2(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(be(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ts=po(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ts=null}}else ts=ns?po(e.stateNode.nextSibling):null;return!0}function ND(){for(var e=ts;e;)e=po(e.nextSibling)}function bu(){ts=ns=null,Zt=!1}function h1(e){Hs===null?Hs=[e]:Hs.push(e)}var zV=Pi.ReactCurrentBatchConfig;function Yd(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(be(309));var s=n.stateNode}if(!s)throw Error(be(147,e));var a=s,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(be(284));if(!n._owner)throw Error(be(290,e))}return e}function Km(e,t){throw e=Object.prototype.toString.call(t),Error(be(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function $2(e){var t=e._init;return t(e._payload)}function SD(e){function t(j,x){if(e){var y=j.deletions;y===null?(j.deletions=[x],j.flags|=16):y.push(x)}}function n(j,x){if(!e)return null;for(;x!==null;)t(j,x),x=x.sibling;return null}function s(j,x){for(j=new Map;x!==null;)x.key!==null?j.set(x.key,x):j.set(x.index,x),x=x.sibling;return j}function a(j,x){return j=yo(j,x),j.index=0,j.sibling=null,j}function i(j,x,y){return j.index=y,e?(y=j.alternate,y!==null?(y=y.index,y<x?(j.flags|=2,x):y):(j.flags|=2,x)):(j.flags|=1048576,x)}function o(j){return e&&j.alternate===null&&(j.flags|=2),j}function l(j,x,y,N){return x===null||x.tag!==6?(x=m0(y,j.mode,N),x.return=j,x):(x=a(x,y),x.return=j,x)}function c(j,x,y,N){var w=y.type;return w===Ec?d(j,x,y.props.children,N,y.key):x!==null&&(x.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===qi&&$2(w)===x.type)?(N=a(x,y.props),N.ref=Yd(j,x,y),N.return=j,N):(N=Gp(y.type,y.key,y.props,null,j.mode,N),N.ref=Yd(j,x,y),N.return=j,N)}function u(j,x,y,N){return x===null||x.tag!==4||x.stateNode.containerInfo!==y.containerInfo||x.stateNode.implementation!==y.implementation?(x=p0(y,j.mode,N),x.return=j,x):(x=a(x,y.children||[]),x.return=j,x)}function d(j,x,y,N,w){return x===null||x.tag!==7?(x=_l(y,j.mode,N,w),x.return=j,x):(x=a(x,y),x.return=j,x)}function h(j,x,y){if(typeof x=="string"&&x!==""||typeof x=="number")return x=m0(""+x,j.mode,y),x.return=j,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Rm:return y=Gp(x.type,x.key,x.props,null,j.mode,y),y.ref=Yd(j,null,x),y.return=j,y;case Tc:return x=p0(x,j.mode,y),x.return=j,x;case qi:var N=x._init;return h(j,N(x._payload),y)}if(gh(x)||Ud(x))return x=_l(x,j.mode,y,null),x.return=j,x;Km(j,x)}return null}function f(j,x,y,N){var w=x!==null?x.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return w!==null?null:l(j,x,""+y,N);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Rm:return y.key===w?c(j,x,y,N):null;case Tc:return y.key===w?u(j,x,y,N):null;case qi:return w=y._init,f(j,x,w(y._payload),N)}if(gh(y)||Ud(y))return w!==null?null:d(j,x,y,N,null);Km(j,y)}return null}function m(j,x,y,N,w){if(typeof N=="string"&&N!==""||typeof N=="number")return j=j.get(y)||null,l(x,j,""+N,w);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Rm:return j=j.get(N.key===null?y:N.key)||null,c(x,j,N,w);case Tc:return j=j.get(N.key===null?y:N.key)||null,u(x,j,N,w);case qi:var C=N._init;return m(j,x,y,C(N._payload),w)}if(gh(N)||Ud(N))return j=j.get(y)||null,d(x,j,N,w,null);Km(x,N)}return null}function g(j,x,y,N){for(var w=null,C=null,S=x,_=x=0,k=null;S!==null&&_<y.length;_++){S.index>_?(k=S,S=null):k=S.sibling;var T=f(j,S,y[_],N);if(T===null){S===null&&(S=k);break}e&&S&&T.alternate===null&&t(j,S),x=i(T,x,_),C===null?w=T:C.sibling=T,C=T,S=k}if(_===y.length)return n(j,S),Zt&&Xo(j,_),w;if(S===null){for(;_<y.length;_++)S=h(j,y[_],N),S!==null&&(x=i(S,x,_),C===null?w=S:C.sibling=S,C=S);return Zt&&Xo(j,_),w}for(S=s(j,S);_<y.length;_++)k=m(S,j,_,y[_],N),k!==null&&(e&&k.alternate!==null&&S.delete(k.key===null?_:k.key),x=i(k,x,_),C===null?w=k:C.sibling=k,C=k);return e&&S.forEach(function(P){return t(j,P)}),Zt&&Xo(j,_),w}function p(j,x,y,N){var w=Ud(y);if(typeof w!="function")throw Error(be(150));if(y=w.call(y),y==null)throw Error(be(151));for(var C=w=null,S=x,_=x=0,k=null,T=y.next();S!==null&&!T.done;_++,T=y.next()){S.index>_?(k=S,S=null):k=S.sibling;var P=f(j,S,T.value,N);if(P===null){S===null&&(S=k);break}e&&S&&P.alternate===null&&t(j,S),x=i(P,x,_),C===null?w=P:C.sibling=P,C=P,S=k}if(T.done)return n(j,S),Zt&&Xo(j,_),w;if(S===null){for(;!T.done;_++,T=y.next())T=h(j,T.value,N),T!==null&&(x=i(T,x,_),C===null?w=T:C.sibling=T,C=T);return Zt&&Xo(j,_),w}for(S=s(j,S);!T.done;_++,T=y.next())T=m(S,j,_,T.value,N),T!==null&&(e&&T.alternate!==null&&S.delete(T.key===null?_:T.key),x=i(T,x,_),C===null?w=T:C.sibling=T,C=T);return e&&S.forEach(function(A){return t(j,A)}),Zt&&Xo(j,_),w}function v(j,x,y,N){if(typeof y=="object"&&y!==null&&y.type===Ec&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Rm:e:{for(var w=y.key,C=x;C!==null;){if(C.key===w){if(w=y.type,w===Ec){if(C.tag===7){n(j,C.sibling),x=a(C,y.props.children),x.return=j,j=x;break e}}else if(C.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===qi&&$2(w)===C.type){n(j,C.sibling),x=a(C,y.props),x.ref=Yd(j,C,y),x.return=j,j=x;break e}n(j,C);break}else t(j,C);C=C.sibling}y.type===Ec?(x=_l(y.props.children,j.mode,N,y.key),x.return=j,j=x):(N=Gp(y.type,y.key,y.props,null,j.mode,N),N.ref=Yd(j,x,y),N.return=j,j=N)}return o(j);case Tc:e:{for(C=y.key;x!==null;){if(x.key===C)if(x.tag===4&&x.stateNode.containerInfo===y.containerInfo&&x.stateNode.implementation===y.implementation){n(j,x.sibling),x=a(x,y.children||[]),x.return=j,j=x;break e}else{n(j,x);break}else t(j,x);x=x.sibling}x=p0(y,j.mode,N),x.return=j,j=x}return o(j);case qi:return C=y._init,v(j,x,C(y._payload),N)}if(gh(y))return g(j,x,y,N);if(Ud(y))return p(j,x,y,N);Km(j,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,x!==null&&x.tag===6?(n(j,x.sibling),x=a(x,y),x.return=j,j=x):(n(j,x),x=m0(y,j.mode,N),x.return=j,j=x),o(j)):n(j,x)}return v}var wu=SD(!0),CD=SD(!1),pg=Eo(null),gg=null,Lc=null,f1=null;function m1(){f1=Lc=gg=null}function p1(e){var t=pg.current;Kt(pg),e._currentValue=t}function Hj(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function Xc(e,t){gg=e,f1=Lc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&($r=!0),e.firstContext=null)}function Cs(e){var t=e._currentValue;if(f1!==e)if(e={context:e,memoizedValue:t,next:null},Lc===null){if(gg===null)throw Error(be(308));Lc=e,gg.dependencies={lanes:0,firstContext:e}}else Lc=Lc.next=e;return t}var ol=null;function g1(e){ol===null?ol=[e]:ol.push(e)}function _D(e,t,n,s){var a=t.interleaved;return a===null?(n.next=n,g1(t)):(n.next=a.next,a.next=n),t.interleaved=n,vi(e,s)}function vi(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ui=!1;function v1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function PD(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function di(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function go(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,vt&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,vi(e,n)}return a=s.interleaved,a===null?(t.next=t,g1(s)):(t.next=a.next,a.next=t),s.interleaved=t,vi(e,n)}function Vp(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,n1(e,n)}}function R2(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?a=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?a=i=t:i=i.next=t}else a=i=t;n={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function vg(e,t,n,s){var a=e.updateQueue;Ui=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=a.baseState;o=0,d=u=c=null,l=i;do{var f=l.lane,m=l.eventTime;if((s&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,p=l;switch(f=t,m=n,p.tag){case 1:if(g=p.payload,typeof g=="function"){h=g.call(m,h,f);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=p.payload,f=typeof g=="function"?g.call(m,h,f):g,f==null)break e;h=on({},h,f);break e;case 2:Ui=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=a.effects,f===null?a.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=h):d=d.next=m,o|=f;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;f=l,l=f.next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}while(!0);if(d===null&&(c=h),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Dl|=o,e.lanes=o,e.memoizedState=h}}function F2(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=n,typeof a!="function")throw Error(be(191,a));a.call(s)}}}var um={},Ta=Eo(um),nf=Eo(um),rf=Eo(um);function ll(e){if(e===um)throw Error(be(174));return e}function x1(e,t){switch(Vt(rf,t),Vt(nf,e),Vt(Ta,um),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:_j(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=_j(t,e)}Kt(Ta),Vt(Ta,t)}function Nu(){Kt(Ta),Kt(nf),Kt(rf)}function AD(e){ll(rf.current);var t=ll(Ta.current),n=_j(t,e.type);t!==n&&(Vt(nf,e),Vt(Ta,n))}function y1(e){nf.current===e&&(Kt(Ta),Kt(nf))}var nn=Eo(0);function xg(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var l0=[];function j1(){for(var e=0;e<l0.length;e++)l0[e]._workInProgressVersionPrimary=null;l0.length=0}var zp=Pi.ReactCurrentDispatcher,c0=Pi.ReactCurrentBatchConfig,Ol=0,sn=null,kn=null,zn=null,yg=!1,kh=!1,sf=0,qV=0;function tr(){throw Error(be(321))}function b1(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ta(e[n],t[n]))return!1;return!0}function w1(e,t,n,s,a,i){if(Ol=i,sn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,zp.current=e===null||e.memoizedState===null?GV:KV,e=n(s,a),kh){i=0;do{if(kh=!1,sf=0,25<=i)throw Error(be(301));i+=1,zn=kn=null,t.updateQueue=null,zp.current=YV,e=n(s,a)}while(kh)}if(zp.current=jg,t=kn!==null&&kn.next!==null,Ol=0,zn=kn=sn=null,yg=!1,t)throw Error(be(300));return e}function N1(){var e=sf!==0;return sf=0,e}function ga(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zn===null?sn.memoizedState=zn=e:zn=zn.next=e,zn}function _s(){if(kn===null){var e=sn.alternate;e=e!==null?e.memoizedState:null}else e=kn.next;var t=zn===null?sn.memoizedState:zn.next;if(t!==null)zn=t,kn=e;else{if(e===null)throw Error(be(310));kn=e,e={memoizedState:kn.memoizedState,baseState:kn.baseState,baseQueue:kn.baseQueue,queue:kn.queue,next:null},zn===null?sn.memoizedState=zn=e:zn=zn.next=e}return zn}function af(e,t){return typeof t=="function"?t(e):t}function u0(e){var t=_s(),n=t.queue;if(n===null)throw Error(be(311));n.lastRenderedReducer=e;var s=kn,a=s.baseQueue,i=n.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}s.baseQueue=a=i,n.pending=null}if(a!==null){i=a.next,s=s.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((Ol&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:e(s,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=s):c=c.next=h,sn.lanes|=d,Dl|=d}u=u.next}while(u!==null&&u!==i);c===null?o=s:c.next=l,ta(s,t.memoizedState)||($r=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=c,n.lastRenderedState=s}if(e=n.interleaved,e!==null){a=e;do i=a.lane,sn.lanes|=i,Dl|=i,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function d0(e){var t=_s(),n=t.queue;if(n===null)throw Error(be(311));n.lastRenderedReducer=e;var s=n.dispatch,a=n.pending,i=t.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);ta(i,t.memoizedState)||($r=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,s]}function kD(){}function TD(e,t){var n=sn,s=_s(),a=t(),i=!ta(s.memoizedState,a);if(i&&(s.memoizedState=a,$r=!0),s=s.queue,S1(DD.bind(null,n,s,e),[e]),s.getSnapshot!==t||i||zn!==null&&zn.memoizedState.tag&1){if(n.flags|=2048,of(9,OD.bind(null,n,s,a,t),void 0,null),Wn===null)throw Error(be(349));Ol&30||ED(n,t,a)}return a}function ED(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=sn.updateQueue,t===null?(t={lastEffect:null,stores:null},sn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function OD(e,t,n,s){t.value=n,t.getSnapshot=s,MD(t)&&ID(e)}function DD(e,t,n){return n(function(){MD(t)&&ID(e)})}function MD(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ta(e,n)}catch{return!0}}function ID(e){var t=vi(e,1);t!==null&&Js(t,e,1,-1)}function L2(e){var t=ga();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:af,lastRenderedState:e},t.queue=e,e=e.dispatch=HV.bind(null,sn,e),[t.memoizedState,e]}function of(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=sn.updateQueue,t===null?(t={lastEffect:null,stores:null},sn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function $D(){return _s().memoizedState}function qp(e,t,n,s){var a=ga();sn.flags|=e,a.memoizedState=of(1|t,n,void 0,s===void 0?null:s)}function sx(e,t,n,s){var a=_s();s=s===void 0?null:s;var i=void 0;if(kn!==null){var o=kn.memoizedState;if(i=o.destroy,s!==null&&b1(s,o.deps)){a.memoizedState=of(t,n,i,s);return}}sn.flags|=e,a.memoizedState=of(1|t,n,i,s)}function B2(e,t){return qp(8390656,8,e,t)}function S1(e,t){return sx(2048,8,e,t)}function RD(e,t){return sx(4,2,e,t)}function FD(e,t){return sx(4,4,e,t)}function LD(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function BD(e,t,n){return n=n!=null?n.concat([e]):null,sx(4,4,LD.bind(null,t,e),n)}function C1(){}function VD(e,t){var n=_s();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&b1(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function zD(e,t){var n=_s();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&b1(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function qD(e,t,n){return Ol&21?(ta(n,t)||(n=KO(),sn.lanes|=n,Dl|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,$r=!0),e.memoizedState=n)}function UV(e,t){var n=Et;Et=n!==0&&4>n?n:4,e(!0);var s=c0.transition;c0.transition={};try{e(!1),t()}finally{Et=n,c0.transition=s}}function UD(){return _s().memoizedState}function WV(e,t,n){var s=xo(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},WD(e))HD(t,n);else if(n=_D(e,t,n,s),n!==null){var a=wr();Js(n,e,s,a),GD(n,t,s)}}function HV(e,t,n){var s=xo(e),a={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(WD(e))HD(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(a.hasEagerState=!0,a.eagerState=l,ta(l,o)){var c=t.interleaved;c===null?(a.next=a,g1(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}n=_D(e,t,a,s),n!==null&&(a=wr(),Js(n,e,s,a),GD(n,t,s))}}function WD(e){var t=e.alternate;return e===sn||t!==null&&t===sn}function HD(e,t){kh=yg=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function GD(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,n1(e,n)}}var jg={readContext:Cs,useCallback:tr,useContext:tr,useEffect:tr,useImperativeHandle:tr,useInsertionEffect:tr,useLayoutEffect:tr,useMemo:tr,useReducer:tr,useRef:tr,useState:tr,useDebugValue:tr,useDeferredValue:tr,useTransition:tr,useMutableSource:tr,useSyncExternalStore:tr,useId:tr,unstable_isNewReconciler:!1},GV={readContext:Cs,useCallback:function(e,t){return ga().memoizedState=[e,t===void 0?null:t],e},useContext:Cs,useEffect:B2,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,qp(4194308,4,LD.bind(null,t,e),n)},useLayoutEffect:function(e,t){return qp(4194308,4,e,t)},useInsertionEffect:function(e,t){return qp(4,2,e,t)},useMemo:function(e,t){var n=ga();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=ga();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=WV.bind(null,sn,e),[s.memoizedState,e]},useRef:function(e){var t=ga();return e={current:e},t.memoizedState=e},useState:L2,useDebugValue:C1,useDeferredValue:function(e){return ga().memoizedState=e},useTransition:function(){var e=L2(!1),t=e[0];return e=UV.bind(null,e[1]),ga().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=sn,a=ga();if(Zt){if(n===void 0)throw Error(be(407));n=n()}else{if(n=t(),Wn===null)throw Error(be(349));Ol&30||ED(s,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,B2(DD.bind(null,s,i,e),[e]),s.flags|=2048,of(9,OD.bind(null,s,i,n,t),void 0,null),n},useId:function(){var e=ga(),t=Wn.identifierPrefix;if(Zt){var n=oi,s=ii;n=(s&~(1<<32-Xs(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=sf++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=qV++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},KV={readContext:Cs,useCallback:VD,useContext:Cs,useEffect:S1,useImperativeHandle:BD,useInsertionEffect:RD,useLayoutEffect:FD,useMemo:zD,useReducer:u0,useRef:$D,useState:function(){return u0(af)},useDebugValue:C1,useDeferredValue:function(e){var t=_s();return qD(t,kn.memoizedState,e)},useTransition:function(){var e=u0(af)[0],t=_s().memoizedState;return[e,t]},useMutableSource:kD,useSyncExternalStore:TD,useId:UD,unstable_isNewReconciler:!1},YV={readContext:Cs,useCallback:VD,useContext:Cs,useEffect:S1,useImperativeHandle:BD,useInsertionEffect:RD,useLayoutEffect:FD,useMemo:zD,useReducer:d0,useRef:$D,useState:function(){return d0(af)},useDebugValue:C1,useDeferredValue:function(e){var t=_s();return kn===null?t.memoizedState=e:qD(t,kn.memoizedState,e)},useTransition:function(){var e=d0(af)[0],t=_s().memoizedState;return[e,t]},useMutableSource:kD,useSyncExternalStore:TD,useId:UD,unstable_isNewReconciler:!1};function Ls(e,t){if(e&&e.defaultProps){t=on({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Gj(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:on({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ax={isMounted:function(e){return(e=e._reactInternals)?Jl(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=wr(),a=xo(e),i=di(s,a);i.payload=t,n!=null&&(i.callback=n),t=go(e,i,a),t!==null&&(Js(t,e,a,s),Vp(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=wr(),a=xo(e),i=di(s,a);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=go(e,i,a),t!==null&&(Js(t,e,a,s),Vp(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=wr(),s=xo(e),a=di(n,s);a.tag=2,t!=null&&(a.callback=t),t=go(e,a,s),t!==null&&(Js(t,e,s,n),Vp(t,e,s))}};function V2(e,t,n,s,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,o):t.prototype&&t.prototype.isPureReactComponent?!Jh(n,s)||!Jh(a,i):!0}function KD(e,t,n){var s=!1,a=Co,i=t.contextType;return typeof i=="object"&&i!==null?i=Cs(i):(a=Lr(t)?Tl:dr.current,s=t.contextTypes,i=(s=s!=null)?ju(e,a):Co),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ax,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function z2(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&ax.enqueueReplaceState(t,t.state,null)}function Kj(e,t,n,s){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},v1(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Cs(i):(i=Lr(t)?Tl:dr.current,a.context=ju(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Gj(e,t,i,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&ax.enqueueReplaceState(a,a.state,null),vg(e,n,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Su(e,t){try{var n="",s=t;do n+=NB(s),s=s.return;while(s);var a=n}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function h0(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Yj(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var QV=typeof WeakMap=="function"?WeakMap:Map;function YD(e,t,n){n=di(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){wg||(wg=!0,ab=s),Yj(e,t)},n}function QD(e,t,n){n=di(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;n.payload=function(){return s(a)},n.callback=function(){Yj(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Yj(e,t),typeof s!="function"&&(vo===null?vo=new Set([this]):vo.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function q2(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new QV;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(n)||(a.add(n),e=uz.bind(null,e,t,n),t.then(e,e))}function U2(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function W2(e,t,n,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=di(-1,1),t.tag=2,go(n,t,1))),n.lanes|=1),e)}var XV=Pi.ReactCurrentOwner,$r=!1;function gr(e,t,n,s){t.child=e===null?CD(t,null,n,s):wu(t,e.child,n,s)}function H2(e,t,n,s,a){n=n.render;var i=t.ref;return Xc(t,a),s=w1(e,t,n,s,i,a),n=N1(),e!==null&&!$r?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,xi(e,t,a)):(Zt&&n&&u1(t),t.flags|=1,gr(e,t,s,a),t.child)}function G2(e,t,n,s,a){if(e===null){var i=n.type;return typeof i=="function"&&!D1(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,XD(e,t,i,s,a)):(e=Gp(n.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Jh,n(o,s)&&e.ref===t.ref)return xi(e,t,a)}return t.flags|=1,e=yo(i,s),e.ref=t.ref,e.return=t,t.child=e}function XD(e,t,n,s,a){if(e!==null){var i=e.memoizedProps;if(Jh(i,s)&&e.ref===t.ref)if($r=!1,t.pendingProps=s=i,(e.lanes&a)!==0)e.flags&131072&&($r=!0);else return t.lanes=e.lanes,xi(e,t,a)}return Qj(e,t,n,s,a)}function JD(e,t,n){var s=t.pendingProps,a=s.children,i=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vt(Vc,Qr),Qr|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Vt(Vc,Qr),Qr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,Vt(Vc,Qr),Qr|=s}else i!==null?(s=i.baseLanes|n,t.memoizedState=null):s=n,Vt(Vc,Qr),Qr|=s;return gr(e,t,a,n),t.child}function ZD(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Qj(e,t,n,s,a){var i=Lr(n)?Tl:dr.current;return i=ju(t,i),Xc(t,a),n=w1(e,t,n,s,i,a),s=N1(),e!==null&&!$r?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,xi(e,t,a)):(Zt&&s&&u1(t),t.flags|=1,gr(e,t,n,a),t.child)}function K2(e,t,n,s,a){if(Lr(n)){var i=!0;hg(t)}else i=!1;if(Xc(t,a),t.stateNode===null)Up(e,t),KD(t,n,s),Kj(t,n,s,a),s=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Cs(u):(u=Lr(n)?Tl:dr.current,u=ju(t,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==s||c!==u)&&z2(t,o,s,u),Ui=!1;var f=t.memoizedState;o.state=f,vg(t,s,o,a),c=t.memoizedState,l!==s||f!==c||Fr.current||Ui?(typeof d=="function"&&(Gj(t,n,d,s),c=t.memoizedState),(l=Ui||V2(t,n,l,s,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),o.props=s,o.state=c,o.context=u,s=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,PD(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Ls(t.type,l),o.props=u,h=t.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Cs(c):(c=Lr(n)?Tl:dr.current,c=ju(t,c));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&z2(t,o,s,c),Ui=!1,f=t.memoizedState,o.state=f,vg(t,s,o,a);var g=t.memoizedState;l!==h||f!==g||Fr.current||Ui?(typeof m=="function"&&(Gj(t,n,m,s),g=t.memoizedState),(u=Ui||V2(t,n,u,s,f,g,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,g,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,g,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=g),o.props=s,o.state=g,o.context=c,s=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),s=!1)}return Xj(e,t,n,s,i,a)}function Xj(e,t,n,s,a,i){ZD(e,t);var o=(t.flags&128)!==0;if(!s&&!o)return a&&D2(t,n,!1),xi(e,t,i);s=t.stateNode,XV.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&o?(t.child=wu(t,e.child,null,i),t.child=wu(t,null,l,i)):gr(e,t,l,i),t.memoizedState=s.state,a&&D2(t,n,!0),t.child}function eM(e){var t=e.stateNode;t.pendingContext?O2(e,t.pendingContext,t.pendingContext!==t.context):t.context&&O2(e,t.context,!1),x1(e,t.containerInfo)}function Y2(e,t,n,s,a){return bu(),h1(a),t.flags|=256,gr(e,t,n,s),t.child}var Jj={dehydrated:null,treeContext:null,retryLane:0};function Zj(e){return{baseLanes:e,cachePool:null,transitions:null}}function tM(e,t,n){var s=t.pendingProps,a=nn.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Vt(nn,a&1),e===null)return Wj(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=s.children,e=s.fallback,i?(s=t.mode,i=t.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=lx(o,s,0,null),e=_l(e,s,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Zj(n),t.memoizedState=Jj,e):_1(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return JV(e,t,o,s,l,a,n);if(i){i=s.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=yo(a,c),s.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=yo(l,i):(i=_l(i,o,n,null),i.flags|=2),i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,o=e.child.memoizedState,o=o===null?Zj(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=Jj,s}return i=e.child,e=i.sibling,s=yo(i,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function _1(e,t){return t=lx({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ym(e,t,n,s){return s!==null&&h1(s),wu(t,e.child,null,n),e=_1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function JV(e,t,n,s,a,i,o){if(n)return t.flags&256?(t.flags&=-257,s=h0(Error(be(422))),Ym(e,t,o,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=s.fallback,a=t.mode,s=lx({mode:"visible",children:s.children},a,0,null),i=_l(i,a,o,null),i.flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,t.mode&1&&wu(t,e.child,null,o),t.child.memoizedState=Zj(o),t.memoizedState=Jj,i);if(!(t.mode&1))return Ym(e,t,o,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var l=s.dgst;return s=l,i=Error(be(419)),s=h0(i,s,void 0),Ym(e,t,o,s)}if(l=(o&e.childLanes)!==0,$r||l){if(s=Wn,s!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,vi(e,a),Js(s,e,a,-1))}return O1(),s=h0(Error(be(421))),Ym(e,t,o,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=dz.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,ts=po(a.nextSibling),ns=t,Zt=!0,Hs=null,e!==null&&(xs[ys++]=ii,xs[ys++]=oi,xs[ys++]=El,ii=e.id,oi=e.overflow,El=t),t=_1(t,s.children),t.flags|=4096,t)}function Q2(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Hj(e.return,t,n)}function f0(e,t,n,s,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=a)}function nM(e,t,n){var s=t.pendingProps,a=s.revealOrder,i=s.tail;if(gr(e,t,s.children,n),s=nn.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Q2(e,n,t);else if(e.tag===19)Q2(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Vt(nn,s),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&xg(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),f0(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&xg(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}f0(t,!0,n,null,i);break;case"together":f0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Up(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function xi(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Dl|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(be(153));if(t.child!==null){for(e=t.child,n=yo(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=yo(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function ZV(e,t,n){switch(t.tag){case 3:eM(t),bu();break;case 5:AD(t);break;case 1:Lr(t.type)&&hg(t);break;case 4:x1(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;Vt(pg,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Vt(nn,nn.current&1),t.flags|=128,null):n&t.child.childLanes?tM(e,t,n):(Vt(nn,nn.current&1),e=xi(e,t,n),e!==null?e.sibling:null);Vt(nn,nn.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return nM(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Vt(nn,nn.current),s)break;return null;case 22:case 23:return t.lanes=0,JD(e,t,n)}return xi(e,t,n)}var rM,eb,sM,aM;rM=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};eb=function(){};sM=function(e,t,n,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,ll(Ta.current);var i=null;switch(n){case"input":a=wj(e,a),s=wj(e,s),i=[];break;case"select":a=on({},a,{value:void 0}),s=on({},s,{value:void 0}),i=[];break;case"textarea":a=Cj(e,a),s=Cj(e,s),i=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=ug)}Pj(n,s);var o;n=null;for(u in a)if(!s.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Wh.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in s){var c=s[u];if(l=a!=null?a[u]:void 0,s.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Wh.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Wt("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};aM=function(e,t,n,s){n!==s&&(t.flags|=4)};function Qd(e,t){if(!Zt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function nr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function ez(e,t,n){var s=t.pendingProps;switch(d1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nr(t),null;case 1:return Lr(t.type)&&dg(),nr(t),null;case 3:return s=t.stateNode,Nu(),Kt(Fr),Kt(dr),j1(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Gm(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Hs!==null&&(lb(Hs),Hs=null))),eb(e,t),nr(t),null;case 5:y1(t);var a=ll(rf.current);if(n=t.type,e!==null&&t.stateNode!=null)sM(e,t,n,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(be(166));return nr(t),null}if(e=ll(Ta.current),Gm(t)){s=t.stateNode,n=t.type;var i=t.memoizedProps;switch(s[ba]=t,s[tf]=i,e=(t.mode&1)!==0,n){case"dialog":Wt("cancel",s),Wt("close",s);break;case"iframe":case"object":case"embed":Wt("load",s);break;case"video":case"audio":for(a=0;a<xh.length;a++)Wt(xh[a],s);break;case"source":Wt("error",s);break;case"img":case"image":case"link":Wt("error",s),Wt("load",s);break;case"details":Wt("toggle",s);break;case"input":a2(s,i),Wt("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},Wt("invalid",s);break;case"textarea":o2(s,i),Wt("invalid",s)}Pj(n,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?s.textContent!==l&&(i.suppressHydrationWarning!==!0&&Hm(s.textContent,l,e),a=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Hm(s.textContent,l,e),a=["children",""+l]):Wh.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Wt("scroll",s)}switch(n){case"input":Fm(s),i2(s,i,!0);break;case"textarea":Fm(s),l2(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=ug)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=DO(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=o.createElement(n,{is:s.is}):(e=o.createElement(n),n==="select"&&(o=e,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):e=o.createElementNS(e,n),e[ba]=t,e[tf]=s,rM(e,t,!1,!1),t.stateNode=e;e:{switch(o=Aj(n,s),n){case"dialog":Wt("cancel",e),Wt("close",e),a=s;break;case"iframe":case"object":case"embed":Wt("load",e),a=s;break;case"video":case"audio":for(a=0;a<xh.length;a++)Wt(xh[a],e);a=s;break;case"source":Wt("error",e),a=s;break;case"img":case"image":case"link":Wt("error",e),Wt("load",e),a=s;break;case"details":Wt("toggle",e),a=s;break;case"input":a2(e,s),a=wj(e,s),Wt("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=on({},s,{value:void 0}),Wt("invalid",e);break;case"textarea":o2(e,s),a=Cj(e,s),Wt("invalid",e);break;default:a=s}Pj(n,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?$O(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&MO(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Hh(e,c):typeof c=="number"&&Hh(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Wh.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Wt("scroll",e):c!=null&&QN(e,i,c,o))}switch(n){case"input":Fm(e),i2(e,s,!1);break;case"textarea":Fm(e),l2(e);break;case"option":s.value!=null&&e.setAttribute("value",""+So(s.value));break;case"select":e.multiple=!!s.multiple,i=s.value,i!=null?Gc(e,!!s.multiple,i,!1):s.defaultValue!=null&&Gc(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=ug)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return nr(t),null;case 6:if(e&&t.stateNode!=null)aM(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(be(166));if(n=ll(rf.current),ll(Ta.current),Gm(t)){if(s=t.stateNode,n=t.memoizedProps,s[ba]=t,(i=s.nodeValue!==n)&&(e=ns,e!==null))switch(e.tag){case 3:Hm(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Hm(s.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[ba]=t,t.stateNode=s}return nr(t),null;case 13:if(Kt(nn),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Zt&&ts!==null&&t.mode&1&&!(t.flags&128))ND(),bu(),t.flags|=98560,i=!1;else if(i=Gm(t),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error(be(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(be(317));i[ba]=t}else bu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;nr(t),i=!1}else Hs!==null&&(lb(Hs),Hs=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||nn.current&1?Mn===0&&(Mn=3):O1())),t.updateQueue!==null&&(t.flags|=4),nr(t),null);case 4:return Nu(),eb(e,t),e===null&&Zh(t.stateNode.containerInfo),nr(t),null;case 10:return p1(t.type._context),nr(t),null;case 17:return Lr(t.type)&&dg(),nr(t),null;case 19:if(Kt(nn),i=t.memoizedState,i===null)return nr(t),null;if(s=(t.flags&128)!==0,o=i.rendering,o===null)if(s)Qd(i,!1);else{if(Mn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=xg(e),o!==null){for(t.flags|=128,Qd(i,!1),s=o.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)i=n,e=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Vt(nn,nn.current&1|2),t.child}e=e.sibling}i.tail!==null&&pn()>Cu&&(t.flags|=128,s=!0,Qd(i,!1),t.lanes=4194304)}else{if(!s)if(e=xg(o),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Qd(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Zt)return nr(t),null}else 2*pn()-i.renderingStartTime>Cu&&n!==1073741824&&(t.flags|=128,s=!0,Qd(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=pn(),t.sibling=null,n=nn.current,Vt(nn,s?n&1|2:n&1),t):(nr(t),null);case 22:case 23:return E1(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Qr&1073741824&&(nr(t),t.subtreeFlags&6&&(t.flags|=8192)):nr(t),null;case 24:return null;case 25:return null}throw Error(be(156,t.tag))}function tz(e,t){switch(d1(t),t.tag){case 1:return Lr(t.type)&&dg(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Nu(),Kt(Fr),Kt(dr),j1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return y1(t),null;case 13:if(Kt(nn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(be(340));bu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Kt(nn),null;case 4:return Nu(),null;case 10:return p1(t.type._context),null;case 22:case 23:return E1(),null;case 24:return null;default:return null}}var Qm=!1,ir=!1,nz=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function Bc(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){hn(e,t,s)}else n.current=null}function tb(e,t,n){try{n()}catch(s){hn(e,t,s)}}var X2=!1;function rz(e,t){if(Fj=og,e=uD(),c1(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var a=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==n||a!==0&&h.nodeType!==3||(l=o+a),h!==i||s!==0&&h.nodeType!==3||(c=o+s),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===e)break t;if(f===n&&++u===a&&(l=o),f===i&&++d===s&&(c=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Lj={focusedElem:e,selectionRange:n},og=!1,Oe=t;Oe!==null;)if(t=Oe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Oe=e;else for(;Oe!==null;){t=Oe;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var p=g.memoizedProps,v=g.memoizedState,j=t.stateNode,x=j.getSnapshotBeforeUpdate(t.elementType===t.type?p:Ls(t.type,p),v);j.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(be(163))}}catch(N){hn(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,Oe=e;break}Oe=t.return}return g=X2,X2=!1,g}function Th(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&tb(t,n,i)}a=a.next}while(a!==s)}}function ix(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function nb(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function iM(e){var t=e.alternate;t!==null&&(e.alternate=null,iM(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ba],delete t[tf],delete t[zj],delete t[LV],delete t[BV])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function oM(e){return e.tag===5||e.tag===3||e.tag===4}function J2(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||oM(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function rb(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ug));else if(s!==4&&(e=e.child,e!==null))for(rb(e,t,n),e=e.sibling;e!==null;)rb(e,t,n),e=e.sibling}function sb(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(sb(e,t,n),e=e.sibling;e!==null;)sb(e,t,n),e=e.sibling}var Qn=null,zs=!1;function Mi(e,t,n){for(n=n.child;n!==null;)lM(e,t,n),n=n.sibling}function lM(e,t,n){if(ka&&typeof ka.onCommitFiberUnmount=="function")try{ka.onCommitFiberUnmount(Jv,n)}catch{}switch(n.tag){case 5:ir||Bc(n,t);case 6:var s=Qn,a=zs;Qn=null,Mi(e,t,n),Qn=s,zs=a,Qn!==null&&(zs?(e=Qn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Qn.removeChild(n.stateNode));break;case 18:Qn!==null&&(zs?(e=Qn,n=n.stateNode,e.nodeType===8?i0(e.parentNode,n):e.nodeType===1&&i0(e,n),Qh(e)):i0(Qn,n.stateNode));break;case 4:s=Qn,a=zs,Qn=n.stateNode.containerInfo,zs=!0,Mi(e,t,n),Qn=s,zs=a;break;case 0:case 11:case 14:case 15:if(!ir&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&tb(n,t,o),a=a.next}while(a!==s)}Mi(e,t,n);break;case 1:if(!ir&&(Bc(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(l){hn(n,t,l)}Mi(e,t,n);break;case 21:Mi(e,t,n);break;case 22:n.mode&1?(ir=(s=ir)||n.memoizedState!==null,Mi(e,t,n),ir=s):Mi(e,t,n);break;default:Mi(e,t,n)}}function Z2(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new nz),t.forEach(function(s){var a=hz.bind(null,e,s);n.has(s)||(n.add(s),s.then(a,a))})}}function Ms(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var a=n[s];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Qn=l.stateNode,zs=!1;break e;case 3:Qn=l.stateNode.containerInfo,zs=!0;break e;case 4:Qn=l.stateNode.containerInfo,zs=!0;break e}l=l.return}if(Qn===null)throw Error(be(160));lM(i,o,a),Qn=null,zs=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){hn(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)cM(t,e),t=t.sibling}function cM(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ms(t,e),pa(e),s&4){try{Th(3,e,e.return),ix(3,e)}catch(p){hn(e,e.return,p)}try{Th(5,e,e.return)}catch(p){hn(e,e.return,p)}}break;case 1:Ms(t,e),pa(e),s&512&&n!==null&&Bc(n,n.return);break;case 5:if(Ms(t,e),pa(e),s&512&&n!==null&&Bc(n,n.return),e.flags&32){var a=e.stateNode;try{Hh(a,"")}catch(p){hn(e,e.return,p)}}if(s&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&EO(a,i),Aj(l,o);var u=Aj(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?$O(a,h):d==="dangerouslySetInnerHTML"?MO(a,h):d==="children"?Hh(a,h):QN(a,d,h,u)}switch(l){case"input":Nj(a,i);break;case"textarea":OO(a,i);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Gc(a,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?Gc(a,!!i.multiple,i.defaultValue,!0):Gc(a,!!i.multiple,i.multiple?[]:"",!1))}a[tf]=i}catch(p){hn(e,e.return,p)}}break;case 6:if(Ms(t,e),pa(e),s&4){if(e.stateNode===null)throw Error(be(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(p){hn(e,e.return,p)}}break;case 3:if(Ms(t,e),pa(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Qh(t.containerInfo)}catch(p){hn(e,e.return,p)}break;case 4:Ms(t,e),pa(e);break;case 13:Ms(t,e),pa(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(k1=pn())),s&4&&Z2(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(ir=(u=ir)||d,Ms(t,e),ir=u):Ms(t,e),pa(e),s&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Oe=e,d=e.child;d!==null;){for(h=Oe=d;Oe!==null;){switch(f=Oe,m=f.child,f.tag){case 0:case 11:case 14:case 15:Th(4,f,f.return);break;case 1:Bc(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){s=f,n=f.return;try{t=s,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(p){hn(s,n,p)}}break;case 5:Bc(f,f.return);break;case 22:if(f.memoizedState!==null){t_(h);continue}}m!==null?(m.return=f,Oe=m):t_(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{a=h.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=IO("display",o))}catch(p){hn(e,e.return,p)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(p){hn(e,e.return,p)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ms(t,e),pa(e),s&4&&Z2(e);break;case 21:break;default:Ms(t,e),pa(e)}}function pa(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(oM(n)){var s=n;break e}n=n.return}throw Error(be(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(Hh(a,""),s.flags&=-33);var i=J2(e);sb(e,i,a);break;case 3:case 4:var o=s.stateNode.containerInfo,l=J2(e);rb(e,l,o);break;default:throw Error(be(161))}}catch(c){hn(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function sz(e,t,n){Oe=e,uM(e)}function uM(e,t,n){for(var s=(e.mode&1)!==0;Oe!==null;){var a=Oe,i=a.child;if(a.tag===22&&s){var o=a.memoizedState!==null||Qm;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||ir;l=Qm;var u=ir;if(Qm=o,(ir=c)&&!u)for(Oe=a;Oe!==null;)o=Oe,c=o.child,o.tag===22&&o.memoizedState!==null?n_(a):c!==null?(c.return=o,Oe=c):n_(a);for(;i!==null;)Oe=i,uM(i),i=i.sibling;Oe=a,Qm=l,ir=u}e_(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Oe=i):e_(e)}}function e_(e){for(;Oe!==null;){var t=Oe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ir||ix(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!ir)if(n===null)s.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Ls(t.type,n.memoizedProps);s.componentDidUpdate(a,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&F2(t,i,s);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}F2(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Qh(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(be(163))}ir||t.flags&512&&nb(t)}catch(f){hn(t,t.return,f)}}if(t===e){Oe=null;break}if(n=t.sibling,n!==null){n.return=t.return,Oe=n;break}Oe=t.return}}function t_(e){for(;Oe!==null;){var t=Oe;if(t===e){Oe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Oe=n;break}Oe=t.return}}function n_(e){for(;Oe!==null;){var t=Oe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ix(4,t)}catch(c){hn(t,n,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(c){hn(t,a,c)}}var i=t.return;try{nb(t)}catch(c){hn(t,i,c)}break;case 5:var o=t.return;try{nb(t)}catch(c){hn(t,o,c)}}}catch(c){hn(t,t.return,c)}if(t===e){Oe=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Oe=l;break}Oe=t.return}}var az=Math.ceil,bg=Pi.ReactCurrentDispatcher,P1=Pi.ReactCurrentOwner,Ns=Pi.ReactCurrentBatchConfig,vt=0,Wn=null,jn=null,Jn=0,Qr=0,Vc=Eo(0),Mn=0,lf=null,Dl=0,ox=0,A1=0,Eh=null,Dr=null,k1=0,Cu=1/0,Ja=null,wg=!1,ab=null,vo=null,Xm=!1,oo=null,Ng=0,Oh=0,ib=null,Wp=-1,Hp=0;function wr(){return vt&6?pn():Wp!==-1?Wp:Wp=pn()}function xo(e){return e.mode&1?vt&2&&Jn!==0?Jn&-Jn:zV.transition!==null?(Hp===0&&(Hp=KO()),Hp):(e=Et,e!==0||(e=window.event,e=e===void 0?16:tD(e.type)),e):1}function Js(e,t,n,s){if(50<Oh)throw Oh=0,ib=null,Error(be(185));om(e,n,s),(!(vt&2)||e!==Wn)&&(e===Wn&&(!(vt&2)&&(ox|=n),Mn===4&&Gi(e,Jn)),Br(e,s),n===1&&vt===0&&!(t.mode&1)&&(Cu=pn()+500,rx&&Oo()))}function Br(e,t){var n=e.callbackNode;zB(e,t);var s=ig(e,e===Wn?Jn:0);if(s===0)n!==null&&d2(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&d2(n),t===1)e.tag===0?VV(r_.bind(null,e)):jD(r_.bind(null,e)),RV(function(){!(vt&6)&&Oo()}),n=null;else{switch(YO(s)){case 1:n=t1;break;case 4:n=HO;break;case 16:n=ag;break;case 536870912:n=GO;break;default:n=ag}n=xM(n,dM.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function dM(e,t){if(Wp=-1,Hp=0,vt&6)throw Error(be(327));var n=e.callbackNode;if(Jc()&&e.callbackNode!==n)return null;var s=ig(e,e===Wn?Jn:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Sg(e,s);else{t=s;var a=vt;vt|=2;var i=fM();(Wn!==e||Jn!==t)&&(Ja=null,Cu=pn()+500,Cl(e,t));do try{lz();break}catch(l){hM(e,l)}while(!0);m1(),bg.current=i,vt=a,jn!==null?t=0:(Wn=null,Jn=0,t=Mn)}if(t!==0){if(t===2&&(a=Dj(e),a!==0&&(s=a,t=ob(e,a))),t===1)throw n=lf,Cl(e,0),Gi(e,s),Br(e,pn()),n;if(t===6)Gi(e,s);else{if(a=e.current.alternate,!(s&30)&&!iz(a)&&(t=Sg(e,s),t===2&&(i=Dj(e),i!==0&&(s=i,t=ob(e,i))),t===1))throw n=lf,Cl(e,0),Gi(e,s),Br(e,pn()),n;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(be(345));case 2:Jo(e,Dr,Ja);break;case 3:if(Gi(e,s),(s&130023424)===s&&(t=k1+500-pn(),10<t)){if(ig(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){wr(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Vj(Jo.bind(null,e,Dr,Ja),t);break}Jo(e,Dr,Ja);break;case 4:if(Gi(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var o=31-Xs(s);i=1<<o,o=t[o],o>a&&(a=o),s&=~i}if(s=a,s=pn()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*az(s/1960))-s,10<s){e.timeoutHandle=Vj(Jo.bind(null,e,Dr,Ja),s);break}Jo(e,Dr,Ja);break;case 5:Jo(e,Dr,Ja);break;default:throw Error(be(329))}}}return Br(e,pn()),e.callbackNode===n?dM.bind(null,e):null}function ob(e,t){var n=Eh;return e.current.memoizedState.isDehydrated&&(Cl(e,t).flags|=256),e=Sg(e,t),e!==2&&(t=Dr,Dr=n,t!==null&&lb(t)),e}function lb(e){Dr===null?Dr=e:Dr.push.apply(Dr,e)}function iz(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var a=n[s],i=a.getSnapshot;a=a.value;try{if(!ta(i(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Gi(e,t){for(t&=~A1,t&=~ox,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Xs(t),s=1<<n;e[n]=-1,t&=~s}}function r_(e){if(vt&6)throw Error(be(327));Jc();var t=ig(e,0);if(!(t&1))return Br(e,pn()),null;var n=Sg(e,t);if(e.tag!==0&&n===2){var s=Dj(e);s!==0&&(t=s,n=ob(e,s))}if(n===1)throw n=lf,Cl(e,0),Gi(e,t),Br(e,pn()),n;if(n===6)throw Error(be(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Jo(e,Dr,Ja),Br(e,pn()),null}function T1(e,t){var n=vt;vt|=1;try{return e(t)}finally{vt=n,vt===0&&(Cu=pn()+500,rx&&Oo())}}function Ml(e){oo!==null&&oo.tag===0&&!(vt&6)&&Jc();var t=vt;vt|=1;var n=Ns.transition,s=Et;try{if(Ns.transition=null,Et=1,e)return e()}finally{Et=s,Ns.transition=n,vt=t,!(vt&6)&&Oo()}}function E1(){Qr=Vc.current,Kt(Vc)}function Cl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,$V(n)),jn!==null)for(n=jn.return;n!==null;){var s=n;switch(d1(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&dg();break;case 3:Nu(),Kt(Fr),Kt(dr),j1();break;case 5:y1(s);break;case 4:Nu();break;case 13:Kt(nn);break;case 19:Kt(nn);break;case 10:p1(s.type._context);break;case 22:case 23:E1()}n=n.return}if(Wn=e,jn=e=yo(e.current,null),Jn=Qr=t,Mn=0,lf=null,A1=ox=Dl=0,Dr=Eh=null,ol!==null){for(t=0;t<ol.length;t++)if(n=ol[t],s=n.interleaved,s!==null){n.interleaved=null;var a=s.next,i=n.pending;if(i!==null){var o=i.next;i.next=a,s.next=o}n.pending=s}ol=null}return e}function hM(e,t){do{var n=jn;try{if(m1(),zp.current=jg,yg){for(var s=sn.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}yg=!1}if(Ol=0,zn=kn=sn=null,kh=!1,sf=0,P1.current=null,n===null||n.return===null){Mn=1,lf=t,jn=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=Jn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=U2(o);if(m!==null){m.flags&=-257,W2(m,o,l,i,t),m.mode&1&&q2(i,u,t),t=m,c=u;var g=t.updateQueue;if(g===null){var p=new Set;p.add(c),t.updateQueue=p}else g.add(c);break e}else{if(!(t&1)){q2(i,u,t),O1();break e}c=Error(be(426))}}else if(Zt&&l.mode&1){var v=U2(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),W2(v,o,l,i,t),h1(Su(c,l));break e}}i=c=Su(c,l),Mn!==4&&(Mn=2),Eh===null?Eh=[i]:Eh.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var j=YD(i,c,t);R2(i,j);break e;case 1:l=c;var x=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(vo===null||!vo.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t;var N=QD(i,l,t);R2(i,N);break e}}i=i.return}while(i!==null)}pM(n)}catch(w){t=w,jn===n&&n!==null&&(jn=n=n.return);continue}break}while(!0)}function fM(){var e=bg.current;return bg.current=jg,e===null?jg:e}function O1(){(Mn===0||Mn===3||Mn===2)&&(Mn=4),Wn===null||!(Dl&268435455)&&!(ox&268435455)||Gi(Wn,Jn)}function Sg(e,t){var n=vt;vt|=2;var s=fM();(Wn!==e||Jn!==t)&&(Ja=null,Cl(e,t));do try{oz();break}catch(a){hM(e,a)}while(!0);if(m1(),vt=n,bg.current=s,jn!==null)throw Error(be(261));return Wn=null,Jn=0,Mn}function oz(){for(;jn!==null;)mM(jn)}function lz(){for(;jn!==null&&!DB();)mM(jn)}function mM(e){var t=vM(e.alternate,e,Qr);e.memoizedProps=e.pendingProps,t===null?pM(e):jn=t,P1.current=null}function pM(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=tz(n,t),n!==null){n.flags&=32767,jn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Mn=6,jn=null;return}}else if(n=ez(n,t,Qr),n!==null){jn=n;return}if(t=t.sibling,t!==null){jn=t;return}jn=t=e}while(t!==null);Mn===0&&(Mn=5)}function Jo(e,t,n){var s=Et,a=Ns.transition;try{Ns.transition=null,Et=1,cz(e,t,n,s)}finally{Ns.transition=a,Et=s}return null}function cz(e,t,n,s){do Jc();while(oo!==null);if(vt&6)throw Error(be(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(be(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(qB(e,i),e===Wn&&(jn=Wn=null,Jn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Xm||(Xm=!0,xM(ag,function(){return Jc(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ns.transition,Ns.transition=null;var o=Et;Et=1;var l=vt;vt|=4,P1.current=null,rz(e,n),cM(n,e),kV(Lj),og=!!Fj,Lj=Fj=null,e.current=n,sz(n),MB(),vt=l,Et=o,Ns.transition=i}else e.current=n;if(Xm&&(Xm=!1,oo=e,Ng=a),i=e.pendingLanes,i===0&&(vo=null),RB(n.stateNode),Br(e,pn()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],s(a.value,{componentStack:a.stack,digest:a.digest});if(wg)throw wg=!1,e=ab,ab=null,e;return Ng&1&&e.tag!==0&&Jc(),i=e.pendingLanes,i&1?e===ib?Oh++:(Oh=0,ib=e):Oh=0,Oo(),null}function Jc(){if(oo!==null){var e=YO(Ng),t=Ns.transition,n=Et;try{if(Ns.transition=null,Et=16>e?16:e,oo===null)var s=!1;else{if(e=oo,oo=null,Ng=0,vt&6)throw Error(be(331));var a=vt;for(vt|=4,Oe=e.current;Oe!==null;){var i=Oe,o=i.child;if(Oe.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Oe=u;Oe!==null;){var d=Oe;switch(d.tag){case 0:case 11:case 15:Th(8,d,i)}var h=d.child;if(h!==null)h.return=d,Oe=h;else for(;Oe!==null;){d=Oe;var f=d.sibling,m=d.return;if(iM(d),d===u){Oe=null;break}if(f!==null){f.return=m,Oe=f;break}Oe=m}}}var g=i.alternate;if(g!==null){var p=g.child;if(p!==null){g.child=null;do{var v=p.sibling;p.sibling=null,p=v}while(p!==null)}}Oe=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Oe=o;else e:for(;Oe!==null;){if(i=Oe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Th(9,i,i.return)}var j=i.sibling;if(j!==null){j.return=i.return,Oe=j;break e}Oe=i.return}}var x=e.current;for(Oe=x;Oe!==null;){o=Oe;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,Oe=y;else e:for(o=x;Oe!==null;){if(l=Oe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ix(9,l)}}catch(w){hn(l,l.return,w)}if(l===o){Oe=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,Oe=N;break e}Oe=l.return}}if(vt=a,Oo(),ka&&typeof ka.onPostCommitFiberRoot=="function")try{ka.onPostCommitFiberRoot(Jv,e)}catch{}s=!0}return s}finally{Et=n,Ns.transition=t}}return!1}function s_(e,t,n){t=Su(n,t),t=YD(e,t,1),e=go(e,t,1),t=wr(),e!==null&&(om(e,1,t),Br(e,t))}function hn(e,t,n){if(e.tag===3)s_(e,e,n);else for(;t!==null;){if(t.tag===3){s_(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(vo===null||!vo.has(s))){e=Su(n,e),e=QD(t,e,1),t=go(t,e,1),e=wr(),t!==null&&(om(t,1,e),Br(t,e));break}}t=t.return}}function uz(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=wr(),e.pingedLanes|=e.suspendedLanes&n,Wn===e&&(Jn&n)===n&&(Mn===4||Mn===3&&(Jn&130023424)===Jn&&500>pn()-k1?Cl(e,0):A1|=n),Br(e,t)}function gM(e,t){t===0&&(e.mode&1?(t=Vm,Vm<<=1,!(Vm&130023424)&&(Vm=4194304)):t=1);var n=wr();e=vi(e,t),e!==null&&(om(e,t,n),Br(e,n))}function dz(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),gM(e,n)}function hz(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(be(314))}s!==null&&s.delete(t),gM(e,n)}var vM;vM=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Fr.current)$r=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return $r=!1,ZV(e,t,n);$r=!!(e.flags&131072)}else $r=!1,Zt&&t.flags&1048576&&bD(t,mg,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Up(e,t),e=t.pendingProps;var a=ju(t,dr.current);Xc(t,n),a=w1(null,t,s,e,a,n);var i=N1();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Lr(s)?(i=!0,hg(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,v1(t),a.updater=ax,t.stateNode=a,a._reactInternals=t,Kj(t,s,e,n),t=Xj(null,t,s,!0,i,n)):(t.tag=0,Zt&&i&&u1(t),gr(null,t,a,n),t=t.child),t;case 16:s=t.elementType;e:{switch(Up(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=mz(s),e=Ls(s,e),a){case 0:t=Qj(null,t,s,e,n);break e;case 1:t=K2(null,t,s,e,n);break e;case 11:t=H2(null,t,s,e,n);break e;case 14:t=G2(null,t,s,Ls(s.type,e),n);break e}throw Error(be(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Ls(s,a),Qj(e,t,s,a,n);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Ls(s,a),K2(e,t,s,a,n);case 3:e:{if(eM(t),e===null)throw Error(be(387));s=t.pendingProps,i=t.memoizedState,a=i.element,PD(e,t),vg(t,s,null,n);var o=t.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Su(Error(be(423)),t),t=Y2(e,t,s,n,a);break e}else if(s!==a){a=Su(Error(be(424)),t),t=Y2(e,t,s,n,a);break e}else for(ts=po(t.stateNode.containerInfo.firstChild),ns=t,Zt=!0,Hs=null,n=CD(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(bu(),s===a){t=xi(e,t,n);break e}gr(e,t,s,n)}t=t.child}return t;case 5:return AD(t),e===null&&Wj(t),s=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,Bj(s,a)?o=null:i!==null&&Bj(s,i)&&(t.flags|=32),ZD(e,t),gr(e,t,o,n),t.child;case 6:return e===null&&Wj(t),null;case 13:return tM(e,t,n);case 4:return x1(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=wu(t,null,s,n):gr(e,t,s,n),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Ls(s,a),H2(e,t,s,a,n);case 7:return gr(e,t,t.pendingProps,n),t.child;case 8:return gr(e,t,t.pendingProps.children,n),t.child;case 12:return gr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Vt(pg,s._currentValue),s._currentValue=o,i!==null)if(ta(i.value,o)){if(i.children===a.children&&!Fr.current){t=xi(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=di(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Hj(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(be(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Hj(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}gr(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,Xc(t,n),a=Cs(a),s=s(a),t.flags|=1,gr(e,t,s,n),t.child;case 14:return s=t.type,a=Ls(s,t.pendingProps),a=Ls(s.type,a),G2(e,t,s,a,n);case 15:return XD(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Ls(s,a),Up(e,t),t.tag=1,Lr(s)?(e=!0,hg(t)):e=!1,Xc(t,n),KD(t,s,a),Kj(t,s,a,n),Xj(null,t,s,!0,e,n);case 19:return nM(e,t,n);case 22:return JD(e,t,n)}throw Error(be(156,t.tag))};function xM(e,t){return WO(e,t)}function fz(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bs(e,t,n,s){return new fz(e,t,n,s)}function D1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function mz(e){if(typeof e=="function")return D1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===JN)return 11;if(e===ZN)return 14}return 2}function yo(e,t){var n=e.alternate;return n===null?(n=bs(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Gp(e,t,n,s,a,i){var o=2;if(s=e,typeof e=="function")D1(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Ec:return _l(n.children,a,i,t);case XN:o=8,a|=8;break;case xj:return e=bs(12,n,t,a|2),e.elementType=xj,e.lanes=i,e;case yj:return e=bs(13,n,t,a),e.elementType=yj,e.lanes=i,e;case jj:return e=bs(19,n,t,a),e.elementType=jj,e.lanes=i,e;case AO:return lx(n,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case _O:o=10;break e;case PO:o=9;break e;case JN:o=11;break e;case ZN:o=14;break e;case qi:o=16,s=null;break e}throw Error(be(130,e==null?e:typeof e,""))}return t=bs(o,n,t,a),t.elementType=e,t.type=s,t.lanes=i,t}function _l(e,t,n,s){return e=bs(7,e,s,t),e.lanes=n,e}function lx(e,t,n,s){return e=bs(22,e,s,t),e.elementType=AO,e.lanes=n,e.stateNode={isHidden:!1},e}function m0(e,t,n){return e=bs(6,e,null,t),e.lanes=n,e}function p0(e,t,n){return t=bs(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function pz(e,t,n,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yy(0),this.expirationTimes=Yy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yy(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function M1(e,t,n,s,a,i,o,l,c){return e=new pz(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=bs(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},v1(i),e}function gz(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Tc,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function yM(e){if(!e)return Co;e=e._reactInternals;e:{if(Jl(e)!==e||e.tag!==1)throw Error(be(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Lr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(be(171))}if(e.tag===1){var n=e.type;if(Lr(n))return yD(e,n,t)}return t}function jM(e,t,n,s,a,i,o,l,c){return e=M1(n,s,!0,e,a,i,o,l,c),e.context=yM(null),n=e.current,s=wr(),a=xo(n),i=di(s,a),i.callback=t??null,go(n,i,a),e.current.lanes=a,om(e,a,s),Br(e,s),e}function cx(e,t,n,s){var a=t.current,i=wr(),o=xo(a);return n=yM(n),t.context===null?t.context=n:t.pendingContext=n,t=di(i,o),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=go(a,t,o),e!==null&&(Js(e,a,o,i),Vp(e,a,o)),o}function Cg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function a_(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function I1(e,t){a_(e,t),(e=e.alternate)&&a_(e,t)}function vz(){return null}var bM=typeof reportError=="function"?reportError:function(e){console.error(e)};function $1(e){this._internalRoot=e}ux.prototype.render=$1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(be(409));cx(e,t,null,null)};ux.prototype.unmount=$1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ml(function(){cx(null,e,null,null)}),t[gi]=null}};function ux(e){this._internalRoot=e}ux.prototype.unstable_scheduleHydration=function(e){if(e){var t=JO();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Hi.length&&t!==0&&t<Hi[n].priority;n++);Hi.splice(n,0,e),n===0&&eD(e)}};function R1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function dx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function i_(){}function xz(e,t,n,s,a){if(a){if(typeof s=="function"){var i=s;s=function(){var u=Cg(o);i.call(u)}}var o=jM(t,s,e,0,null,!1,!1,"",i_);return e._reactRootContainer=o,e[gi]=o.current,Zh(e.nodeType===8?e.parentNode:e),Ml(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var l=s;s=function(){var u=Cg(c);l.call(u)}}var c=M1(e,0,!1,null,null,!1,!1,"",i_);return e._reactRootContainer=c,e[gi]=c.current,Zh(e.nodeType===8?e.parentNode:e),Ml(function(){cx(t,c,n,s)}),c}function hx(e,t,n,s,a){var i=n._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=Cg(o);l.call(c)}}cx(t,o,e,a)}else o=xz(n,t,e,a,s);return Cg(o)}QO=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=vh(t.pendingLanes);n!==0&&(n1(t,n|1),Br(t,pn()),!(vt&6)&&(Cu=pn()+500,Oo()))}break;case 13:Ml(function(){var s=vi(e,1);if(s!==null){var a=wr();Js(s,e,1,a)}}),I1(e,1)}};r1=function(e){if(e.tag===13){var t=vi(e,134217728);if(t!==null){var n=wr();Js(t,e,134217728,n)}I1(e,134217728)}};XO=function(e){if(e.tag===13){var t=xo(e),n=vi(e,t);if(n!==null){var s=wr();Js(n,e,t,s)}I1(e,t)}};JO=function(){return Et};ZO=function(e,t){var n=Et;try{return Et=e,t()}finally{Et=n}};Tj=function(e,t,n){switch(t){case"input":if(Nj(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var a=nx(s);if(!a)throw Error(be(90));TO(s),Nj(s,a)}}}break;case"textarea":OO(e,n);break;case"select":t=n.value,t!=null&&Gc(e,!!n.multiple,t,!1)}};LO=T1;BO=Ml;var yz={usingClientEntryPoint:!1,Events:[cm,Ic,nx,RO,FO,T1]},Xd={findFiberByHostInstance:il,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jz={bundleType:Xd.bundleType,version:Xd.version,rendererPackageName:Xd.rendererPackageName,rendererConfig:Xd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=qO(e),e===null?null:e.stateNode},findFiberByHostInstance:Xd.findFiberByHostInstance||vz,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jm.isDisabled&&Jm.supportsFiber)try{Jv=Jm.inject(jz),ka=Jm}catch{}}os.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yz;os.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!R1(t))throw Error(be(200));return gz(e,t,null,n)};os.createRoot=function(e,t){if(!R1(e))throw Error(be(299));var n=!1,s="",a=bM;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=M1(e,1,!1,null,null,n,!1,s,a),e[gi]=t.current,Zh(e.nodeType===8?e.parentNode:e),new $1(t)};os.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(be(188)):(e=Object.keys(e).join(","),Error(be(268,e)));return e=qO(t),e=e===null?null:e.stateNode,e};os.flushSync=function(e){return Ml(e)};os.hydrate=function(e,t,n){if(!dx(t))throw Error(be(200));return hx(null,e,t,!0,n)};os.hydrateRoot=function(e,t,n){if(!R1(e))throw Error(be(405));var s=n!=null&&n.hydratedSources||null,a=!1,i="",o=bM;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=jM(t,null,e,1,n??null,a,!1,i,o),e[gi]=t.current,Zh(e),s)for(e=0;e<s.length;e++)n=s[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new ux(t)};os.render=function(e,t,n){if(!dx(t))throw Error(be(200));return hx(null,e,t,!1,n)};os.unmountComponentAtNode=function(e){if(!dx(e))throw Error(be(40));return e._reactRootContainer?(Ml(function(){hx(null,null,e,!1,function(){e._reactRootContainer=null,e[gi]=null})}),!0):!1};os.unstable_batchedUpdates=T1;os.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!dx(n))throw Error(be(200));if(e==null||e._reactInternals===void 0)throw Error(be(38));return hx(e,t,n,!1,s)};os.version="18.3.1-next-f1338f8080-20240426";function wM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wM)}catch(e){console.error(e)}}wM(),wO.exports=os;var Zl=wO.exports;const NM=Pt(Zl);var SM,o_=Zl;SM=o_.createRoot,o_.hydrateRoot;const bz=1,wz=1e6;let g0=0;function Nz(){return g0=(g0+1)%Number.MAX_SAFE_INTEGER,g0.toString()}const v0=new Map,l_=e=>{if(v0.has(e))return;const t=setTimeout(()=>{v0.delete(e),Dh({type:"REMOVE_TOAST",toastId:e})},wz);v0.set(e,t)},Sz=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,bz)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?l_(n):e.toasts.forEach(s=>{l_(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===n||n===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},Kp=[];let Yp={toasts:[]};function Dh(e){Yp=Sz(Yp,e),Kp.forEach(t=>{t(Yp)})}function Cz({...e}){const t=Nz(),n=a=>Dh({type:"UPDATE_TOAST",toast:{...a,id:t}}),s=()=>Dh({type:"DISMISS_TOAST",toastId:t});return Dh({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||s()}}}),{id:t,dismiss:s,update:n}}function et(){const[e,t]=b.useState(Yp);return b.useEffect(()=>(Kp.push(t),()=>{const n=Kp.indexOf(t);n>-1&&Kp.splice(n,1)}),[e]),{...e,toast:Cz,dismiss:n=>Dh({type:"DISMISS_TOAST",toastId:n})}}function Ae(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function c_(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function fx(...e){return t=>{let n=!1;const s=e.map(a=>{const i=c_(a,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let a=0;a<s.length;a++){const i=s[a];typeof i=="function"?i():c_(e[a],null)}}}}function pt(...e){return b.useCallback(fx(...e),e)}function _z(e,t){const n=b.createContext(t),s=i=>{const{children:o,...l}=i,c=b.useMemo(()=>l,Object.values(l));return r.jsx(n.Provider,{value:c,children:o})};s.displayName=e+"Provider";function a(i){const o=b.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[s,a]}function cs(e,t=[]){let n=[];function s(i,o){const l=b.createContext(o),c=n.length;n=[...n,o];const u=h=>{var j;const{scope:f,children:m,...g}=h,p=((j=f==null?void 0:f[e])==null?void 0:j[c])||l,v=b.useMemo(()=>g,Object.values(g));return r.jsx(p.Provider,{value:v,children:m})};u.displayName=i+"Provider";function d(h,f){var p;const m=((p=f==null?void 0:f[e])==null?void 0:p[c])||l,g=b.useContext(m);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const a=()=>{const i=n.map(o=>b.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return b.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[s,Pz(a,...t)]}function Pz(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const s=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=s.reduce((l,{useScope:c,scopeName:u})=>{const h=c(i)[`__scope${u}`];return{...l,...h}},{});return b.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function Il(e){const t=kz(e),n=b.forwardRef((s,a)=>{const{children:i,...o}=s,l=b.Children.toArray(i),c=l.find(Ez);if(c){const u=c.props.children,d=l.map(h=>h===c?b.Children.count(u)>1?b.Children.only(null):b.isValidElement(u)?u.props.children:null:h);return r.jsx(t,{...o,ref:a,children:b.isValidElement(u)?b.cloneElement(u,void 0,d):null})}return r.jsx(t,{...o,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}var Az=Il("Slot");function kz(e){const t=b.forwardRef((n,s)=>{const{children:a,...i}=n;if(b.isValidElement(a)){const o=Dz(a),l=Oz(i,a.props);return a.type!==b.Fragment&&(l.ref=s?fx(s,o):o),b.cloneElement(a,l)}return b.Children.count(a)>1?b.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var CM=Symbol("radix.slottable");function Tz(e){const t=({children:n})=>r.jsx(r.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=CM,t}function Ez(e){return b.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===CM}function Oz(e,t){const n={...t};for(const s in t){const a=e[s],i=t[s];/^on[A-Z]/.test(s)?a&&i?n[s]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(n[s]=a):s==="style"?n[s]={...a,...i}:s==="className"&&(n[s]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function Dz(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function mx(e){const t=e+"CollectionProvider",[n,s]=cs(t),[a,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:v,children:j}=p,x=F.useRef(null),y=F.useRef(new Map).current;return r.jsx(a,{scope:v,itemMap:y,collectionRef:x,children:j})};o.displayName=t;const l=e+"CollectionSlot",c=Il(l),u=F.forwardRef((p,v)=>{const{scope:j,children:x}=p,y=i(l,j),N=pt(v,y.collectionRef);return r.jsx(c,{ref:N,children:x})});u.displayName=l;const d=e+"CollectionItemSlot",h="data-radix-collection-item",f=Il(d),m=F.forwardRef((p,v)=>{const{scope:j,children:x,...y}=p,N=F.useRef(null),w=pt(v,N),C=i(d,j);return F.useEffect(()=>(C.itemMap.set(N,{ref:N,...y}),()=>void C.itemMap.delete(N))),r.jsx(f,{[h]:"",ref:w,children:x})});m.displayName=d;function g(p){const v=i(e+"CollectionConsumer",p);return F.useCallback(()=>{const x=v.collectionRef.current;if(!x)return[];const y=Array.from(x.querySelectorAll(`[${h}]`));return Array.from(v.itemMap.values()).sort((C,S)=>y.indexOf(C.ref.current)-y.indexOf(S.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:u,ItemSlot:m},g,s]}var Mz=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Le=Mz.reduce((e,t)=>{const n=Il(`Primitive.${t}`),s=b.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,{...l,ref:i})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function F1(e,t){e&&Zl.flushSync(()=>e.dispatchEvent(t))}function Sr(e){const t=b.useRef(e);return b.useEffect(()=>{t.current=e}),b.useMemo(()=>(...n)=>{var s;return(s=t.current)==null?void 0:s.call(t,...n)},[])}function Iz(e,t=globalThis==null?void 0:globalThis.document){const n=Sr(e);b.useEffect(()=>{const s=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[n,t])}var $z="DismissableLayer",cb="dismissableLayer.update",Rz="dismissableLayer.pointerDownOutside",Fz="dismissableLayer.focusOutside",u_,_M=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),hd=b.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,u=b.useContext(_M),[d,h]=b.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=b.useState({}),g=pt(t,S=>h(S)),p=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),j=p.indexOf(v),x=d?p.indexOf(d):-1,y=u.layersWithOutsidePointerEventsDisabled.size>0,N=x>=j,w=Bz(S=>{const _=S.target,k=[...u.branches].some(T=>T.contains(_));!N||k||(a==null||a(S),o==null||o(S),S.defaultPrevented||l==null||l())},f),C=Vz(S=>{const _=S.target;[...u.branches].some(T=>T.contains(_))||(i==null||i(S),o==null||o(S),S.defaultPrevented||l==null||l())},f);return Iz(S=>{x===u.layers.size-1&&(s==null||s(S),!S.defaultPrevented&&l&&(S.preventDefault(),l()))},f),b.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(u_=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),d_(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=u_)}},[d,f,n,u]),b.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),d_())},[d,u]),b.useEffect(()=>{const S=()=>m({});return document.addEventListener(cb,S),()=>document.removeEventListener(cb,S)},[]),r.jsx(Le.div,{...c,ref:g,style:{pointerEvents:y?N?"auto":"none":void 0,...e.style},onFocusCapture:Ae(e.onFocusCapture,C.onFocusCapture),onBlurCapture:Ae(e.onBlurCapture,C.onBlurCapture),onPointerDownCapture:Ae(e.onPointerDownCapture,w.onPointerDownCapture)})});hd.displayName=$z;var Lz="DismissableLayerBranch",PM=b.forwardRef((e,t)=>{const n=b.useContext(_M),s=b.useRef(null),a=pt(t,s);return b.useEffect(()=>{const i=s.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),r.jsx(Le.div,{...e,ref:a})});PM.displayName=Lz;function Bz(e,t=globalThis==null?void 0:globalThis.document){const n=Sr(e),s=b.useRef(!1),a=b.useRef(()=>{});return b.useEffect(()=>{const i=l=>{if(l.target&&!s.current){let c=function(){AM(Rz,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);s.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>s.current=!0}}function Vz(e,t=globalThis==null?void 0:globalThis.document){const n=Sr(e),s=b.useRef(!1);return b.useEffect(()=>{const a=i=>{i.target&&!s.current&&AM(Fz,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function d_(){const e=new CustomEvent(cb);document.dispatchEvent(e)}function AM(e,t,n,{discrete:s}){const a=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),s?F1(a,i):a.dispatchEvent(i)}var zz=hd,qz=PM,Sn=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},Uz="Portal",dm=b.forwardRef((e,t)=>{var l;const{container:n,...s}=e,[a,i]=b.useState(!1);Sn(()=>i(!0),[]);const o=n||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?NM.createPortal(r.jsx(Le.div,{...s,ref:t}),o):null});dm.displayName=Uz;function Wz(e,t){return b.useReducer((n,s)=>t[n][s]??n,e)}var ks=e=>{const{present:t,children:n}=e,s=Hz(t),a=typeof n=="function"?n({present:s.isPresent}):b.Children.only(n),i=pt(s.ref,Gz(a));return typeof n=="function"||s.isPresent?b.cloneElement(a,{ref:i}):null};ks.displayName="Presence";function Hz(e){const[t,n]=b.useState(),s=b.useRef(null),a=b.useRef(e),i=b.useRef("none"),o=e?"mounted":"unmounted",[l,c]=Wz(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const u=Zm(s.current);i.current=l==="mounted"?u:"none"},[l]),Sn(()=>{const u=s.current,d=a.current;if(d!==e){const f=i.current,m=Zm(u);e?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&f!==m?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),Sn(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,h=m=>{const p=Zm(s.current).includes(m.animationName);if(m.target===t&&p&&(c("ANIMATION_END"),!a.current)){const v=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=v)})}},f=m=>{m.target===t&&(i.current=Zm(s.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:b.useCallback(u=>{s.current=u?getComputedStyle(u):null,n(u)},[])}}function Zm(e){return(e==null?void 0:e.animationName)||"none"}function Gz(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Kz=GN[" useInsertionEffect ".trim().toString()]||Sn;function yi({prop:e,defaultProp:t,onChange:n=()=>{},caller:s}){const[a,i,o]=Yz({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:a;{const d=b.useRef(e!==void 0);b.useEffect(()=>{const h=d.current;h!==l&&console.warn(`${s} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,s])}const u=b.useCallback(d=>{var h;if(l){const f=Qz(d)?d(e):d;f!==e&&((h=o.current)==null||h.call(o,f))}else i(d)},[l,e,i,o]);return[c,u]}function Yz({defaultProp:e,onChange:t}){const[n,s]=b.useState(e),a=b.useRef(n),i=b.useRef(t);return Kz(()=>{i.current=t},[t]),b.useEffect(()=>{var o;a.current!==n&&((o=i.current)==null||o.call(i,n),a.current=n)},[n,a]),[n,s,i]}function Qz(e){return typeof e=="function"}var kM=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Xz="VisuallyHidden",px=b.forwardRef((e,t)=>r.jsx(Le.span,{...e,ref:t,style:{...kM,...e.style}}));px.displayName=Xz;var Jz=px,L1="ToastProvider",[B1,Zz,eq]=mx("Toast"),[TM,YAe]=cs("Toast",[eq]),[tq,gx]=TM(L1),EM=e=>{const{__scopeToast:t,label:n="Notification",duration:s=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=e,[l,c]=b.useState(null),[u,d]=b.useState(0),h=b.useRef(!1),f=b.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${L1}\`. Expected non-empty \`string\`.`),r.jsx(B1.Provider,{scope:t,children:r.jsx(tq,{scope:t,label:n,duration:s,swipeDirection:a,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:b.useCallback(()=>d(m=>m+1),[]),onToastRemove:b.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};EM.displayName=L1;var OM="ToastViewport",nq=["F8"],ub="toast.viewportPause",db="toast.viewportResume",DM=b.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:s=nq,label:a="Notifications ({hotkey})",...i}=e,o=gx(OM,n),l=Zz(n),c=b.useRef(null),u=b.useRef(null),d=b.useRef(null),h=b.useRef(null),f=pt(t,h,o.onViewportChange),m=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;b.useEffect(()=>{const v=j=>{var y;s.length!==0&&s.every(N=>j[N]||j.code===N)&&((y=h.current)==null||y.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[s]),b.useEffect(()=>{const v=c.current,j=h.current;if(g&&v&&j){const x=()=>{if(!o.isClosePausedRef.current){const C=new CustomEvent(ub);j.dispatchEvent(C),o.isClosePausedRef.current=!0}},y=()=>{if(o.isClosePausedRef.current){const C=new CustomEvent(db);j.dispatchEvent(C),o.isClosePausedRef.current=!1}},N=C=>{!v.contains(C.relatedTarget)&&y()},w=()=>{v.contains(document.activeElement)||y()};return v.addEventListener("focusin",x),v.addEventListener("focusout",N),v.addEventListener("pointermove",x),v.addEventListener("pointerleave",w),window.addEventListener("blur",x),window.addEventListener("focus",y),()=>{v.removeEventListener("focusin",x),v.removeEventListener("focusout",N),v.removeEventListener("pointermove",x),v.removeEventListener("pointerleave",w),window.removeEventListener("blur",x),window.removeEventListener("focus",y)}}},[g,o.isClosePausedRef]);const p=b.useCallback(({tabbingDirection:v})=>{const x=l().map(y=>{const N=y.ref.current,w=[N,...pq(N)];return v==="forwards"?w:w.reverse()});return(v==="forwards"?x.reverse():x).flat()},[l]);return b.useEffect(()=>{const v=h.current;if(v){const j=x=>{var w,C,S;const y=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!y){const _=document.activeElement,k=x.shiftKey;if(x.target===v&&k){(w=u.current)==null||w.focus();return}const A=p({tabbingDirection:k?"backwards":"forwards"}),B=A.findIndex(L=>L===_);x0(A.slice(B+1))?x.preventDefault():k?(C=u.current)==null||C.focus():(S=d.current)==null||S.focus()}};return v.addEventListener("keydown",j),()=>v.removeEventListener("keydown",j)}},[l,p]),r.jsxs(qz,{ref:c,role:"region","aria-label":a.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&r.jsx(hb,{ref:u,onFocusFromOutsideViewport:()=>{const v=p({tabbingDirection:"forwards"});x0(v)}}),r.jsx(B1.Slot,{scope:n,children:r.jsx(Le.ol,{tabIndex:-1,...i,ref:f})}),g&&r.jsx(hb,{ref:d,onFocusFromOutsideViewport:()=>{const v=p({tabbingDirection:"backwards"});x0(v)}})]})});DM.displayName=OM;var MM="ToastFocusProxy",hb=b.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:s,...a}=e,i=gx(MM,n);return r.jsx(px,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&s()}})});hb.displayName=MM;var hm="Toast",rq="toast.swipeStart",sq="toast.swipeMove",aq="toast.swipeCancel",iq="toast.swipeEnd",IM=b.forwardRef((e,t)=>{const{forceMount:n,open:s,defaultOpen:a,onOpenChange:i,...o}=e,[l,c]=yi({prop:s,defaultProp:a??!0,onChange:i,caller:hm});return r.jsx(ks,{present:n||l,children:r.jsx(cq,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:Sr(e.onPause),onResume:Sr(e.onResume),onSwipeStart:Ae(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Ae(e.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Ae(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Ae(e.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});IM.displayName=hm;var[oq,lq]=TM(hm,{onClose(){}}),cq=b.forwardRef((e,t)=>{const{__scopeToast:n,type:s="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:m,...g}=e,p=gx(hm,n),[v,j]=b.useState(null),x=pt(t,L=>j(L)),y=b.useRef(null),N=b.useRef(null),w=a||p.duration,C=b.useRef(0),S=b.useRef(w),_=b.useRef(0),{onToastAdd:k,onToastRemove:T}=p,P=Sr(()=>{var H;(v==null?void 0:v.contains(document.activeElement))&&((H=p.viewport)==null||H.focus()),o()}),A=b.useCallback(L=>{!L||L===1/0||(window.clearTimeout(_.current),C.current=new Date().getTime(),_.current=window.setTimeout(P,L))},[P]);b.useEffect(()=>{const L=p.viewport;if(L){const H=()=>{A(S.current),u==null||u()},z=()=>{const $=new Date().getTime()-C.current;S.current=S.current-$,window.clearTimeout(_.current),c==null||c()};return L.addEventListener(ub,z),L.addEventListener(db,H),()=>{L.removeEventListener(ub,z),L.removeEventListener(db,H)}}},[p.viewport,w,c,u,A]),b.useEffect(()=>{i&&!p.isClosePausedRef.current&&A(w)},[i,w,p.isClosePausedRef,A]),b.useEffect(()=>(k(),()=>T()),[k,T]);const B=b.useMemo(()=>v?zM(v):null,[v]);return p.viewport?r.jsxs(r.Fragment,{children:[B&&r.jsx(uq,{__scopeToast:n,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:B}),r.jsx(oq,{scope:n,onClose:P,children:Zl.createPortal(r.jsx(B1.ItemSlot,{scope:n,children:r.jsx(zz,{asChild:!0,onEscapeKeyDown:Ae(l,()=>{p.isFocusedToastEscapeKeyDownRef.current||P(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:r.jsx(Le.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":p.swipeDirection,...g,ref:x,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Ae(e.onKeyDown,L=>{L.key==="Escape"&&(l==null||l(L.nativeEvent),L.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,P()))}),onPointerDown:Ae(e.onPointerDown,L=>{L.button===0&&(y.current={x:L.clientX,y:L.clientY})}),onPointerMove:Ae(e.onPointerMove,L=>{if(!y.current)return;const H=L.clientX-y.current.x,z=L.clientY-y.current.y,$=!!N.current,I=["left","right"].includes(p.swipeDirection),E=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,q=I?E(0,H):0,Y=I?0:E(0,z),re=L.pointerType==="touch"?10:2,oe={x:q,y:Y},ae={originalEvent:L,delta:oe};$?(N.current=oe,ep(sq,h,ae,{discrete:!1})):h_(oe,p.swipeDirection,re)?(N.current=oe,ep(rq,d,ae,{discrete:!1}),L.target.setPointerCapture(L.pointerId)):(Math.abs(H)>re||Math.abs(z)>re)&&(y.current=null)}),onPointerUp:Ae(e.onPointerUp,L=>{const H=N.current,z=L.target;if(z.hasPointerCapture(L.pointerId)&&z.releasePointerCapture(L.pointerId),N.current=null,y.current=null,H){const $=L.currentTarget,I={originalEvent:L,delta:H};h_(H,p.swipeDirection,p.swipeThreshold)?ep(iq,m,I,{discrete:!0}):ep(aq,f,I,{discrete:!0}),$.addEventListener("click",E=>E.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),uq=e=>{const{__scopeToast:t,children:n,...s}=e,a=gx(hm,t),[i,o]=b.useState(!1),[l,c]=b.useState(!1);return fq(()=>o(!0)),b.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:r.jsx(dm,{asChild:!0,children:r.jsx(px,{...s,children:i&&r.jsxs(r.Fragment,{children:[a.label," ",n]})})})},dq="ToastTitle",$M=b.forwardRef((e,t)=>{const{__scopeToast:n,...s}=e;return r.jsx(Le.div,{...s,ref:t})});$M.displayName=dq;var hq="ToastDescription",RM=b.forwardRef((e,t)=>{const{__scopeToast:n,...s}=e;return r.jsx(Le.div,{...s,ref:t})});RM.displayName=hq;var FM="ToastAction",LM=b.forwardRef((e,t)=>{const{altText:n,...s}=e;return n.trim()?r.jsx(VM,{altText:n,asChild:!0,children:r.jsx(V1,{...s,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${FM}\`. Expected non-empty \`string\`.`),null)});LM.displayName=FM;var BM="ToastClose",V1=b.forwardRef((e,t)=>{const{__scopeToast:n,...s}=e,a=lq(BM,n);return r.jsx(VM,{asChild:!0,children:r.jsx(Le.button,{type:"button",...s,ref:t,onClick:Ae(e.onClick,a.onClose)})})});V1.displayName=BM;var VM=b.forwardRef((e,t)=>{const{__scopeToast:n,altText:s,...a}=e;return r.jsx(Le.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...a,ref:t})});function zM(e){const t=[];return Array.from(e.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&t.push(s.textContent),mq(s)){const a=s.ariaHidden||s.hidden||s.style.display==="none",i=s.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=s.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...zM(s))}}),t}function ep(e,t,n,{discrete:s}){const a=n.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),s?F1(a,i):a.dispatchEvent(i)}var h_=(e,t,n=0)=>{const s=Math.abs(e.x),a=Math.abs(e.y),i=s>a;return t==="left"||t==="right"?i&&s>n:!i&&a>n};function fq(e=()=>{}){const t=Sr(e);Sn(()=>{let n=0,s=0;return n=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(s)}},[t])}function mq(e){return e.nodeType===e.ELEMENT_NODE}function pq(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function x0(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var gq=EM,qM=DM,UM=IM,WM=$M,HM=RM,GM=LM,KM=V1;function YM(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=YM(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function Ze(){for(var e,t,n=0,s="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=YM(e))&&(s&&(s+=" "),s+=t);return s}const f_=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,m_=Ze,fm=(e,t)=>n=>{var s;if((t==null?void 0:t.variants)==null)return m_(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(u=>{const d=n==null?void 0:n[u],h=i==null?void 0:i[u];if(d===null)return null;const f=f_(d)||f_(h);return a[u][f]}),l=n&&Object.entries(n).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),c=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((u,d)=>{let{class:h,className:f,...m}=d;return Object.entries(m).every(g=>{let[p,v]=g;return Array.isArray(v)?v.includes({...i,...l}[p]):{...i,...l}[p]===v})?[...u,h,f]:u},[]);return m_(e,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vq=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),QM=(...e)=>e.filter((t,n,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xq={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yq=b.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:a="",children:i,iconNode:o,...l},c)=>b.createElement("svg",{ref:c,...xq,width:t,height:t,stroke:e,strokeWidth:s?Number(n)*24/Number(t):n,className:QM("lucide",a),...l},[...o.map(([u,d])=>b.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=(e,t)=>{const n=b.forwardRef(({className:s,...a},i)=>b.createElement(yq,{ref:i,iconNode:t,className:QM(`lucide-${vq(e)}`,s),...a}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=ke("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p_=ke("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jq=ke("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=ke("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _g=ke("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bq=ke("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wq=ke("Bird",[["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M3.4 18H12a8 8 0 0 0 8-8V7a4 4 0 0 0-7.28-2.3L2 20",key:"oj1oa8"}],["path",{d:"m20 7 2 .5-2 .5",key:"12nv4d"}],["path",{d:"M10 18v3",key:"1yea0a"}],["path",{d:"M14 17.75V21",key:"1pymcb"}],["path",{d:"M7 18a6 6 0 0 0 3.84-10.61",key:"1npnn0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=ke("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nq=ke("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=ke("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=ke("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=ke("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sq=ke("Cat",[["path",{d:"M12 5c.67 0 1.35.09 2 .26 1.78-2 5.03-2.84 6.42-2.26 1.4.58-.42 7-.42 7 .57 1.07 1 2.24 1 3.44C21 17.9 16.97 21 12 21s-9-3-9-7.56c0-1.25.5-2.4 1-3.44 0 0-1.89-6.42-.5-7 1.39-.58 4.72.23 6.5 2.23A9.04 9.04 0 0 1 12 5Z",key:"x6xyqk"}],["path",{d:"M8 14v.5",key:"1nzgdb"}],["path",{d:"M16 14v.5",key:"1lajdz"}],["path",{d:"M11.25 16.25h1.5L12 17l-.75-.75Z",key:"12kq1m"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=ke("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=ke("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=ke("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cq=ke("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _q=ke("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=ke("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=ke("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cf=ke("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pq=ke("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=ke("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aq=ke("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kq=ke("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tq=ke("Dog",[["path",{d:"M11.25 16.25h1.5L12 17z",key:"w7jh35"}],["path",{d:"M16 14v.5",key:"1lajdz"}],["path",{d:"M4.42 11.247A13.152 13.152 0 0 0 4 14.556C4 18.728 7.582 21 12 21s8-2.272 8-6.444a11.702 11.702 0 0 0-.493-3.309",key:"u7s9ue"}],["path",{d:"M8 14v.5",key:"1nzgdb"}],["path",{d:"M8.5 8.5c-.384 1.05-1.083 2.028-2.344 2.5-1.931.722-3.576-.297-3.656-1-.113-.994 1.177-6.53 4-7 1.923-.321 3.651.845 3.651 2.235A7.497 7.497 0 0 1 14 5.277c0-1.39 1.844-2.598 3.767-2.277 2.823.47 4.113 6.006 4 7-.08.703-1.725 1.722-3.656 1-1.261-.472-1.855-1.45-2.239-2.5",key:"v8hric"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fd=ke("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vx=ke("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mb=ke("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=ke("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g_=ke("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=ke("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eI=ke("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eq=ke("Fish",[["path",{d:"M6.5 12c.94-3.46 4.94-6 8.5-6 3.56 0 6.06 2.54 7 6-.94 3.47-3.44 6-7 6s-7.56-2.53-8.5-6Z",key:"15baut"}],["path",{d:"M18 12v.5",key:"18hhni"}],["path",{d:"M16 17.93a9.77 9.77 0 0 1 0-11.86",key:"16dt7o"}],["path",{d:"M7 10.67C7 8 5.58 5.97 2.73 5.5c-1 1.5-1 5 .23 6.5-1.24 1.5-1.24 5-.23 6.5C5.58 18.03 7 16 7 13.33",key:"l9di03"}],["path",{d:"M10.46 7.26C10.2 5.88 9.17 4.24 8 3h5.8a2 2 0 0 1 1.98 1.67l.23 1.4",key:"1kjonw"}],["path",{d:"m16.01 17.93-.23 1.4A2 2 0 0 1 13.8 21H9.5a5.96 5.96 0 0 0 1.49-3.98",key:"1zlm23"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=ke("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=ke("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oq=ke("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=ke("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=ke("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=ke("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tI=ke("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const md=ke("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=ke("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v_=ke("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dq=ke("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x_=ke("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mq=ke("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=ke("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pg=ke("PawPrint",[["circle",{cx:"11",cy:"4",r:"2",key:"vol9p0"}],["circle",{cx:"18",cy:"8",r:"2",key:"17gozi"}],["circle",{cx:"20",cy:"16",r:"2",key:"1v9bxh"}],["path",{d:"M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z",key:"1ydw1z"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=ke("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ki=ke("Pill",[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=ke("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=ke("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nI=ke("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mh=ke("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=ke("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iq=ke("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=ke("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $q=ke("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rq=ke("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=ke("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=ke("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fq=ke("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=ke("Syringe",[["path",{d:"m18 2 4 4",key:"22kx64"}],["path",{d:"m17 7 3-3",key:"1w1zoj"}],["path",{d:"M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5",key:"1exhtz"}],["path",{d:"m9 11 4 4",key:"rovt3i"}],["path",{d:"m5 19-3 3",key:"59f2uf"}],["path",{d:"m14 4 6 6",key:"yqp9t2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lq=ke("Tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uf=ke("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pb=ke("Tractor",[["path",{d:"m10 11 11 .9a1 1 0 0 1 .8 1.1l-.665 4.158a1 1 0 0 1-.988.842H20",key:"she1j9"}],["path",{d:"M16 18h-5",key:"bq60fd"}],["path",{d:"M18 5a1 1 0 0 0-1 1v5.573",key:"1kv8ia"}],["path",{d:"M3 4h8.129a1 1 0 0 1 .99.863L13 11.246",key:"1q1ert"}],["path",{d:"M4 11V4",key:"9ft8pt"}],["path",{d:"M7 15h.01",key:"k5ht0j"}],["path",{d:"M8 10.1V4",key:"1jgyzo"}],["circle",{cx:"18",cy:"18",r:"2",key:"1emm8v"}],["circle",{cx:"7",cy:"15",r:"5",key:"ddtuc"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=ke("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $l=ke("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=ke("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=ke("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gb=ke("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bq=ke("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=ke("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vq=ke("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=ke("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ag=ke("Weight",[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xx=ke("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),q1="-",zq=e=>{const t=Uq(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:o=>{const l=o.split(q1);return l[0]===""&&l.length!==1&&l.shift(),rI(l,t)||qq(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&s[o]?[...c,...s[o]]:c}}},rI=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],s=t.nextPart.get(n),a=s?rI(e.slice(1),s):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(q1);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},y_=/^\[(.+)\]$/,qq=e=>{if(y_.test(e)){const t=y_.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},Uq=e=>{const{theme:t,prefix:n}=e,s={nextPart:new Map,validators:[]};return Hq(Object.entries(e.classGroups),n).forEach(([i,o])=>{vb(o,s,i,t)}),s},vb=(e,t,n,s)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:j_(t,a);i.classGroupId=n;return}if(typeof a=="function"){if(Wq(a)){vb(a(s),t,n,s);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([i,o])=>{vb(o,j_(t,i),n,s)})})},j_=(e,t)=>{let n=e;return t.split(q1).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},Wq=e=>e.isThemeGetter,Hq=(e,t)=>t?e.map(([n,s])=>{const a=s.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[n,a]}):e,Gq=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,s=new Map;const a=(i,o)=>{n.set(i,o),t++,t>e&&(t=0,s=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=s.get(i))!==void 0)return a(i,o),o},set(i,o){n.has(i)?n.set(i,o):a(i,o)}}},sI="!",Kq=e=>{const{separator:t,experimentalParseClassName:n}=e,s=t.length===1,a=t[0],i=t.length,o=l=>{const c=[];let u=0,d=0,h;for(let v=0;v<l.length;v++){let j=l[v];if(u===0){if(j===a&&(s||l.slice(v,v+i)===t)){c.push(l.slice(d,v)),d=v+i;continue}if(j==="/"){h=v;continue}}j==="["?u++:j==="]"&&u--}const f=c.length===0?l:l.substring(d),m=f.startsWith(sI),g=m?f.substring(1):f,p=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:g,maybePostfixModifierPosition:p}};return n?l=>n({className:l,parseClassName:o}):o},Yq=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(s=>{s[0]==="["?(t.push(...n.sort(),s),n=[]):n.push(s)}),t.push(...n.sort()),t},Qq=e=>({cache:Gq(e.cacheSize),parseClassName:Kq(e),...zq(e)}),Xq=/\s+/,Jq=(e,t)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(Xq);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:m}=n(u);let g=!!m,p=s(g?f.substring(0,m):f);if(!p){if(!g){l=u+(l.length>0?" "+l:l);continue}if(p=s(f),!p){l=u+(l.length>0?" "+l:l);continue}g=!1}const v=Yq(d).join(":"),j=h?v+sI:v,x=j+p;if(i.includes(x))continue;i.push(x);const y=a(p,g);for(let N=0;N<y.length;++N){const w=y[N];i.push(j+w)}l=u+(l.length>0?" "+l:l)}return l};function Zq(){let e=0,t,n,s="";for(;e<arguments.length;)(t=arguments[e++])&&(n=aI(t))&&(s&&(s+=" "),s+=n);return s}const aI=e=>{if(typeof e=="string")return e;let t,n="";for(let s=0;s<e.length;s++)e[s]&&(t=aI(e[s]))&&(n&&(n+=" "),n+=t);return n};function eU(e,...t){let n,s,a,i=o;function o(c){const u=t.reduce((d,h)=>h(d),e());return n=Qq(u),s=n.cache.get,a=n.cache.set,i=l,l(c)}function l(c){const u=s(c);if(u)return u;const d=Jq(c,n);return a(c,d),d}return function(){return i(Zq.apply(null,arguments))}}const Ut=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},iI=/^\[(?:([a-z-]+):)?(.+)\]$/i,tU=/^\d+\/\d+$/,nU=new Set(["px","full","screen"]),rU=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,sU=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,aU=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,iU=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,oU=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ka=e=>Zc(e)||nU.has(e)||tU.test(e),Ii=e=>pd(e,"length",pU),Zc=e=>!!e&&!Number.isNaN(Number(e)),j0=e=>pd(e,"number",Zc),Jd=e=>!!e&&Number.isInteger(Number(e)),lU=e=>e.endsWith("%")&&Zc(e.slice(0,-1)),rt=e=>iI.test(e),$i=e=>rU.test(e),cU=new Set(["length","size","percentage"]),uU=e=>pd(e,cU,oI),dU=e=>pd(e,"position",oI),hU=new Set(["image","url"]),fU=e=>pd(e,hU,vU),mU=e=>pd(e,"",gU),Zd=()=>!0,pd=(e,t,n)=>{const s=iI.exec(e);return s?s[1]?typeof t=="string"?s[1]===t:t.has(s[1]):n(s[2]):!1},pU=e=>sU.test(e)&&!aU.test(e),oI=()=>!1,gU=e=>iU.test(e),vU=e=>oU.test(e),xU=()=>{const e=Ut("colors"),t=Ut("spacing"),n=Ut("blur"),s=Ut("brightness"),a=Ut("borderColor"),i=Ut("borderRadius"),o=Ut("borderSpacing"),l=Ut("borderWidth"),c=Ut("contrast"),u=Ut("grayscale"),d=Ut("hueRotate"),h=Ut("invert"),f=Ut("gap"),m=Ut("gradientColorStops"),g=Ut("gradientColorStopPositions"),p=Ut("inset"),v=Ut("margin"),j=Ut("opacity"),x=Ut("padding"),y=Ut("saturate"),N=Ut("scale"),w=Ut("sepia"),C=Ut("skew"),S=Ut("space"),_=Ut("translate"),k=()=>["auto","contain","none"],T=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto",rt,t],A=()=>[rt,t],B=()=>["",Ka,Ii],L=()=>["auto",Zc,rt],H=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],z=()=>["solid","dashed","dotted","double","none"],$=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],I=()=>["start","end","center","between","around","evenly","stretch"],E=()=>["","0",rt],q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Y=()=>[Zc,rt];return{cacheSize:500,separator:":",theme:{colors:[Zd],spacing:[Ka,Ii],blur:["none","",$i,rt],brightness:Y(),borderColor:[e],borderRadius:["none","","full",$i,rt],borderSpacing:A(),borderWidth:B(),contrast:Y(),grayscale:E(),hueRotate:Y(),invert:E(),gap:A(),gradientColorStops:[e],gradientColorStopPositions:[lU,Ii],inset:P(),margin:P(),opacity:Y(),padding:A(),saturate:Y(),scale:Y(),sepia:E(),skew:Y(),space:A(),translate:A()},classGroups:{aspect:[{aspect:["auto","square","video",rt]}],container:["container"],columns:[{columns:[$i]}],"break-after":[{"break-after":q()}],"break-before":[{"break-before":q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...H(),rt]}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Jd,rt]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",rt]}],grow:[{grow:E()}],shrink:[{shrink:E()}],order:[{order:["first","last","none",Jd,rt]}],"grid-cols":[{"grid-cols":[Zd]}],"col-start-end":[{col:["auto",{span:["full",Jd,rt]},rt]}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":[Zd]}],"row-start-end":[{row:["auto",{span:[Jd,rt]},rt]}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",rt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",rt]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...I()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...I(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...I(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",rt,t]}],"min-w":[{"min-w":[rt,t,"min","max","fit"]}],"max-w":[{"max-w":[rt,t,"none","full","min","max","fit","prose",{screen:[$i]},$i]}],h:[{h:[rt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[rt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[rt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[rt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",$i,Ii]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",j0]}],"font-family":[{font:[Zd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",rt]}],"line-clamp":[{"line-clamp":["none",Zc,j0]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ka,rt]}],"list-image":[{"list-image":["none",rt]}],"list-style-type":[{list:["none","disc","decimal",rt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[j]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[j]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ka,Ii]}],"underline-offset":[{"underline-offset":["auto",Ka,rt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",rt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",rt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[j]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...H(),dU]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",uU]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},fU]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[j]}],"border-style":[{border:[...z(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[j]}],"divide-style":[{divide:z()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...z()]}],"outline-offset":[{"outline-offset":[Ka,rt]}],"outline-w":[{outline:[Ka,Ii]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:B()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[j]}],"ring-offset-w":[{"ring-offset":[Ka,Ii]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",$i,mU]}],"shadow-color":[{shadow:[Zd]}],opacity:[{opacity:[j]}],"mix-blend":[{"mix-blend":[...$(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":$()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[s]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",$i,rt]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[y]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[j]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",rt]}],duration:[{duration:Y()}],ease:[{ease:["linear","in","out","in-out",rt]}],delay:[{delay:Y()}],animate:[{animate:["none","spin","ping","pulse","bounce",rt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[Jd,rt]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[C]}],"skew-y":[{"skew-y":[C]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",rt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",rt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",rt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Ka,Ii,j0]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},yU=eU(xU);function Ie(...e){return yU(Ze(e))}function ku(e){if(!e)return"Âge inconnu";const t=new Date(e),n=new Date;if(isNaN(t.getTime()))return"Date invalide";let s=n.getFullYear()-t.getFullYear(),a=n.getMonth()-t.getMonth();if((a<0||a===0&&n.getDate()<t.getDate())&&(s--,a+=12),s===0){if(a===0){const i=Math.floor((n.getTime()-t.getTime())/864e5);return`${i} jour${i>1?"s":""}`}return`${a} mois`}else return a===0?`${s} an${s>1?"s":""}`:`${s} an${s>1?"s":""} et ${a} mois`}function Oa(e){if(!e)return"Non renseigné";const t=new Date(e);return isNaN(t.getTime())?"Date invalide":t.toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})}const jU=gq,lI=b.forwardRef(({className:e,...t},n)=>r.jsx(qM,{ref:n,className:Ie("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));lI.displayName=qM.displayName;const bU=fm("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),cI=b.forwardRef(({className:e,variant:t,...n},s)=>r.jsx(UM,{ref:s,className:Ie(bU({variant:t}),e),...n}));cI.displayName=UM.displayName;const wU=b.forwardRef(({className:e,...t},n)=>r.jsx(GM,{ref:n,className:Ie("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));wU.displayName=GM.displayName;const uI=b.forwardRef(({className:e,...t},n)=>r.jsx(KM,{ref:n,className:Ie("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:r.jsx(xx,{className:"h-4 w-4"})}));uI.displayName=KM.displayName;const dI=b.forwardRef(({className:e,...t},n)=>r.jsx(WM,{ref:n,className:Ie("text-sm font-semibold",e),...t}));dI.displayName=WM.displayName;const hI=b.forwardRef(({className:e,...t},n)=>r.jsx(HM,{ref:n,className:Ie("text-sm opacity-90",e),...t}));hI.displayName=HM.displayName;function NU(){const{toasts:e}=et();return r.jsxs(jU,{children:[e.map(function({id:t,title:n,description:s,action:a,...i}){return r.jsxs(cI,{...i,children:[r.jsxs("div",{className:"grid gap-1",children:[n&&r.jsx(dI,{children:n}),s&&r.jsx(hI,{children:s})]}),a,r.jsx(uI,{})]},t)}),r.jsx(lI,{})]})}var b_=["light","dark"],SU="(prefers-color-scheme: dark)",CU=b.createContext(void 0),_U={setTheme:e=>{},themes:[]},PU=()=>{var e;return(e=b.useContext(CU))!=null?e:_U};b.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:s,enableColorScheme:a,defaultTheme:i,value:o,attrs:l,nonce:c})=>{let u=i==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(g=>`'${g}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=a?b_.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(g,p=!1,v=!0)=>{let j=o?o[g]:g,x=p?g+"|| ''":`'${j}'`,y="";return a&&v&&!p&&b_.includes(g)&&(y+=`d.style.colorScheme = '${g}';`),n==="class"?p||j?y+=`c.add(${x})`:y+="null":j&&(y+=`d[s](n,${x})`),y},m=e?`!function(){${d}${f(e)}}()`:s?`!function(){try{${d}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${SU}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${u?"":"else{"+f(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${h}}catch(t){}}();`;return b.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})});var AU=e=>{switch(e){case"success":return EU;case"info":return DU;case"warning":return OU;case"error":return MU;default:return null}},kU=Array(12).fill(0),TU=({visible:e,className:t})=>F.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},F.createElement("div",{className:"sonner-spinner"},kU.map((n,s)=>F.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),EU=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},F.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),OU=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},F.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),DU=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},F.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),MU=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},F.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),IU=F.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},F.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),F.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),$U=()=>{let[e,t]=F.useState(document.hidden);return F.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},xb=1,RU=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...s}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:xb++,i=this.toasts.find(l=>l.id===a),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),i?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...e,id:a,title:n}),{...l,...e,id:a,dismissible:o,title:n}):l):this.addToast({title:n,...s,dismissible:o,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let s=e instanceof Promise?e:e(),a=n!==void 0,i,o=s.then(async c=>{if(i=["resolve",c],F.isValidElement(c))a=!1,this.create({id:n,type:"default",message:c});else if(LU(c)&&!c.ok){a=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,d=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:n,type:"error",message:u,description:d})}else if(t.success!==void 0){a=!1;let u=typeof t.success=="function"?await t.success(c):t.success,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"success",message:u,description:d})}}).catch(async c=>{if(i=["reject",c],t.error!==void 0){a=!1;let u=typeof t.error=="function"?await t.error(c):t.error,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"error",message:u,description:d})}}).finally(()=>{var c;a&&(this.dismiss(n),n=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,u)=>o.then(()=>i[0]==="reject"?u(i[1]):c(i[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||xb++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Or=new RU,FU=(e,t)=>{let n=(t==null?void 0:t.id)||xb++;return Or.addToast({title:e,...t,id:n}),n},LU=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",BU=FU,VU=()=>Or.toasts,zU=()=>Or.getActiveToasts();Object.assign(BU,{success:Or.success,info:Or.info,warning:Or.warning,error:Or.error,custom:Or.custom,message:Or.message,promise:Or.promise,dismiss:Or.dismiss,loading:Or.loading},{getHistory:VU,getToasts:zU});function qU(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",t==="top"&&n.firstChild?n.insertBefore(s,n.firstChild):n.appendChild(s),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e))}qU(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function tp(e){return e.label!==void 0}var UU=3,WU="32px",HU="16px",w_=4e3,GU=356,KU=14,YU=20,QU=200;function Is(...e){return e.filter(Boolean).join(" ")}function XU(e){let[t,n]=e.split("-"),s=[];return t&&s.push(t),n&&s.push(n),s}var JU=e=>{var t,n,s,a,i,o,l,c,u,d,h;let{invert:f,toast:m,unstyled:g,interacting:p,setHeights:v,visibleToasts:j,heights:x,index:y,toasts:N,expanded:w,removeToast:C,defaultRichColors:S,closeButton:_,style:k,cancelButtonStyle:T,actionButtonStyle:P,className:A="",descriptionClassName:B="",duration:L,position:H,gap:z,loadingIcon:$,expandByDefault:I,classNames:E,icons:q,closeButtonAriaLabel:Y="Close toast",pauseWhenPageIsHidden:re}=e,[oe,ae]=F.useState(null),[me,we]=F.useState(null),[ue,J]=F.useState(!1),[ee,G]=F.useState(!1),[W,O]=F.useState(!1),[le,ce]=F.useState(!1),[ie,Ce]=F.useState(!1),[st,tt]=F.useState(0),[wt,tn]=F.useState(0),bt=F.useRef(m.duration||L||w_),gt=F.useRef(null),Qt=F.useRef(null),mn=y===0,ut=y+1<=j,Xt=m.type,qr=m.dismissible!==!1,Ur=m.className||"",Wo=m.descriptionClassName||"",er=F.useMemo(()=>x.findIndex(Xe=>Xe.toastId===m.id)||0,[x,m.id]),uc=F.useMemo(()=>{var Xe;return(Xe=m.closeButton)!=null?Xe:_},[m.closeButton,_]),Ln=F.useMemo(()=>m.duration||L||w_,[m.duration,L]),Ha=F.useRef(0),Os=F.useRef(0),dc=F.useRef(0),ha=F.useRef(null),[Q,_e]=H.split("-"),ye=F.useMemo(()=>x.reduce((Xe,Nt,Rt)=>Rt>=er?Xe:Xe+Nt.height,0),[x,er]),ln=$U(),Ar=m.invert||f,Ds=Xt==="loading";Os.current=F.useMemo(()=>er*z+ye,[er,ye]),F.useEffect(()=>{bt.current=Ln},[Ln]),F.useEffect(()=>{J(!0)},[]),F.useEffect(()=>{let Xe=Qt.current;if(Xe){let Nt=Xe.getBoundingClientRect().height;return tn(Nt),v(Rt=>[{toastId:m.id,height:Nt,position:m.position},...Rt]),()=>v(Rt=>Rt.filter(Wr=>Wr.toastId!==m.id))}},[v,m.id]),F.useLayoutEffect(()=>{if(!ue)return;let Xe=Qt.current,Nt=Xe.style.height;Xe.style.height="auto";let Rt=Xe.getBoundingClientRect().height;Xe.style.height=Nt,tn(Rt),v(Wr=>Wr.find(Hr=>Hr.toastId===m.id)?Wr.map(Hr=>Hr.toastId===m.id?{...Hr,height:Rt}:Hr):[{toastId:m.id,height:Rt,position:m.position},...Wr])},[ue,m.title,m.description,v,m.id]);let hs=F.useCallback(()=>{G(!0),tt(Os.current),v(Xe=>Xe.filter(Nt=>Nt.toastId!==m.id)),setTimeout(()=>{C(m)},QU)},[m,C,v,Os]);F.useEffect(()=>{if(m.promise&&Xt==="loading"||m.duration===1/0||m.type==="loading")return;let Xe;return w||p||re&&ln?(()=>{if(dc.current<Ha.current){let Nt=new Date().getTime()-Ha.current;bt.current=bt.current-Nt}dc.current=new Date().getTime()})():bt.current!==1/0&&(Ha.current=new Date().getTime(),Xe=setTimeout(()=>{var Nt;(Nt=m.onAutoClose)==null||Nt.call(m,m),hs()},bt.current)),()=>clearTimeout(Xe)},[w,p,m,Xt,re,ln,hs]),F.useEffect(()=>{m.delete&&hs()},[hs,m.delete]);function Ly(){var Xe,Nt,Rt;return q!=null&&q.loading?F.createElement("div",{className:Is(E==null?void 0:E.loader,(Xe=m==null?void 0:m.classNames)==null?void 0:Xe.loader,"sonner-loader"),"data-visible":Xt==="loading"},q.loading):$?F.createElement("div",{className:Is(E==null?void 0:E.loader,(Nt=m==null?void 0:m.classNames)==null?void 0:Nt.loader,"sonner-loader"),"data-visible":Xt==="loading"},$):F.createElement(TU,{className:Is(E==null?void 0:E.loader,(Rt=m==null?void 0:m.classNames)==null?void 0:Rt.loader),visible:Xt==="loading"})}return F.createElement("li",{tabIndex:0,ref:Qt,className:Is(A,Ur,E==null?void 0:E.toast,(t=m==null?void 0:m.classNames)==null?void 0:t.toast,E==null?void 0:E.default,E==null?void 0:E[Xt],(n=m==null?void 0:m.classNames)==null?void 0:n[Xt]),"data-sonner-toast":"","data-rich-colors":(s=m.richColors)!=null?s:S,"data-styled":!(m.jsx||m.unstyled||g),"data-mounted":ue,"data-promise":!!m.promise,"data-swiped":ie,"data-removed":ee,"data-visible":ut,"data-y-position":Q,"data-x-position":_e,"data-index":y,"data-front":mn,"data-swiping":W,"data-dismissible":qr,"data-type":Xt,"data-invert":Ar,"data-swipe-out":le,"data-swipe-direction":me,"data-expanded":!!(w||I&&ue),style:{"--index":y,"--toasts-before":y,"--z-index":N.length-y,"--offset":`${ee?st:Os.current}px`,"--initial-height":I?"auto":`${wt}px`,...k,...m.style},onDragEnd:()=>{O(!1),ae(null),ha.current=null},onPointerDown:Xe=>{Ds||!qr||(gt.current=new Date,tt(Os.current),Xe.target.setPointerCapture(Xe.pointerId),Xe.target.tagName!=="BUTTON"&&(O(!0),ha.current={x:Xe.clientX,y:Xe.clientY}))},onPointerUp:()=>{var Xe,Nt,Rt,Wr;if(le||!qr)return;ha.current=null;let Hr=Number(((Xe=Qt.current)==null?void 0:Xe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),fa=Number(((Nt=Qt.current)==null?void 0:Nt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Ga=new Date().getTime()-((Rt=gt.current)==null?void 0:Rt.getTime()),Gr=oe==="x"?Hr:fa,ma=Math.abs(Gr)/Ga;if(Math.abs(Gr)>=YU||ma>.11){tt(Os.current),(Wr=m.onDismiss)==null||Wr.call(m,m),we(oe==="x"?Hr>0?"right":"left":fa>0?"down":"up"),hs(),ce(!0),Ce(!1);return}O(!1),ae(null)},onPointerMove:Xe=>{var Nt,Rt,Wr,Hr;if(!ha.current||!qr||((Nt=window.getSelection())==null?void 0:Nt.toString().length)>0)return;let fa=Xe.clientY-ha.current.y,Ga=Xe.clientX-ha.current.x,Gr=(Rt=e.swipeDirections)!=null?Rt:XU(H);!oe&&(Math.abs(Ga)>1||Math.abs(fa)>1)&&ae(Math.abs(Ga)>Math.abs(fa)?"x":"y");let ma={x:0,y:0};oe==="y"?(Gr.includes("top")||Gr.includes("bottom"))&&(Gr.includes("top")&&fa<0||Gr.includes("bottom")&&fa>0)&&(ma.y=fa):oe==="x"&&(Gr.includes("left")||Gr.includes("right"))&&(Gr.includes("left")&&Ga<0||Gr.includes("right")&&Ga>0)&&(ma.x=Ga),(Math.abs(ma.x)>0||Math.abs(ma.y)>0)&&Ce(!0),(Wr=Qt.current)==null||Wr.style.setProperty("--swipe-amount-x",`${ma.x}px`),(Hr=Qt.current)==null||Hr.style.setProperty("--swipe-amount-y",`${ma.y}px`)}},uc&&!m.jsx?F.createElement("button",{"aria-label":Y,"data-disabled":Ds,"data-close-button":!0,onClick:Ds||!qr?()=>{}:()=>{var Xe;hs(),(Xe=m.onDismiss)==null||Xe.call(m,m)},className:Is(E==null?void 0:E.closeButton,(a=m==null?void 0:m.classNames)==null?void 0:a.closeButton)},(i=q==null?void 0:q.close)!=null?i:IU):null,m.jsx||b.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:F.createElement(F.Fragment,null,Xt||m.icon||m.promise?F.createElement("div",{"data-icon":"",className:Is(E==null?void 0:E.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Ly():null,m.type!=="loading"?m.icon||(q==null?void 0:q[Xt])||AU(Xt):null):null,F.createElement("div",{"data-content":"",className:Is(E==null?void 0:E.content,(l=m==null?void 0:m.classNames)==null?void 0:l.content)},F.createElement("div",{"data-title":"",className:Is(E==null?void 0:E.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?F.createElement("div",{"data-description":"",className:Is(B,Wo,E==null?void 0:E.description,(u=m==null?void 0:m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),b.isValidElement(m.cancel)?m.cancel:m.cancel&&tp(m.cancel)?F.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||T,onClick:Xe=>{var Nt,Rt;tp(m.cancel)&&qr&&((Rt=(Nt=m.cancel).onClick)==null||Rt.call(Nt,Xe),hs())},className:Is(E==null?void 0:E.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,b.isValidElement(m.action)?m.action:m.action&&tp(m.action)?F.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||P,onClick:Xe=>{var Nt,Rt;tp(m.action)&&((Rt=(Nt=m.action).onClick)==null||Rt.call(Nt,Xe),!Xe.defaultPrevented&&hs())},className:Is(E==null?void 0:E.actionButton,(h=m==null?void 0:m.classNames)==null?void 0:h.actionButton)},m.action.label):null))};function N_(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function ZU(e,t){let n={};return[e,t].forEach((s,a)=>{let i=a===1,o=i?"--mobile-offset":"--offset",l=i?HU:WU;function c(u){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof s=="number"||typeof s=="string"?c(s):typeof s=="object"?["top","right","bottom","left"].forEach(u=>{s[u]===void 0?n[`${o}-${u}`]=l:n[`${o}-${u}`]=typeof s[u]=="number"?`${s[u]}px`:s[u]}):c(l)}),n}var e7=b.forwardRef(function(e,t){let{invert:n,position:s="bottom-right",hotkey:a=["altKey","KeyT"],expand:i,closeButton:o,className:l,offset:c,mobileOffset:u,theme:d="light",richColors:h,duration:f,style:m,visibleToasts:g=UU,toastOptions:p,dir:v=N_(),gap:j=KU,loadingIcon:x,icons:y,containerAriaLabel:N="Notifications",pauseWhenPageIsHidden:w}=e,[C,S]=F.useState([]),_=F.useMemo(()=>Array.from(new Set([s].concat(C.filter(re=>re.position).map(re=>re.position)))),[C,s]),[k,T]=F.useState([]),[P,A]=F.useState(!1),[B,L]=F.useState(!1),[H,z]=F.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),$=F.useRef(null),I=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),E=F.useRef(null),q=F.useRef(!1),Y=F.useCallback(re=>{S(oe=>{var ae;return(ae=oe.find(me=>me.id===re.id))!=null&&ae.delete||Or.dismiss(re.id),oe.filter(({id:me})=>me!==re.id)})},[]);return F.useEffect(()=>Or.subscribe(re=>{if(re.dismiss){S(oe=>oe.map(ae=>ae.id===re.id?{...ae,delete:!0}:ae));return}setTimeout(()=>{NM.flushSync(()=>{S(oe=>{let ae=oe.findIndex(me=>me.id===re.id);return ae!==-1?[...oe.slice(0,ae),{...oe[ae],...re},...oe.slice(ae+1)]:[re,...oe]})})})}),[]),F.useEffect(()=>{if(d!=="system"){z(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?z("dark"):z("light")),typeof window>"u")return;let re=window.matchMedia("(prefers-color-scheme: dark)");try{re.addEventListener("change",({matches:oe})=>{z(oe?"dark":"light")})}catch{re.addListener(({matches:ae})=>{try{z(ae?"dark":"light")}catch(me){console.error(me)}})}},[d]),F.useEffect(()=>{C.length<=1&&A(!1)},[C]),F.useEffect(()=>{let re=oe=>{var ae,me;a.every(we=>oe[we]||oe.code===we)&&(A(!0),(ae=$.current)==null||ae.focus()),oe.code==="Escape"&&(document.activeElement===$.current||(me=$.current)!=null&&me.contains(document.activeElement))&&A(!1)};return document.addEventListener("keydown",re),()=>document.removeEventListener("keydown",re)},[a]),F.useEffect(()=>{if($.current)return()=>{E.current&&(E.current.focus({preventScroll:!0}),E.current=null,q.current=!1)}},[$.current]),F.createElement("section",{ref:t,"aria-label":`${N} ${I}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},_.map((re,oe)=>{var ae;let[me,we]=re.split("-");return C.length?F.createElement("ol",{key:re,dir:v==="auto"?N_():v,tabIndex:-1,ref:$,className:l,"data-sonner-toaster":!0,"data-theme":H,"data-y-position":me,"data-lifted":P&&C.length>1&&!i,"data-x-position":we,style:{"--front-toast-height":`${((ae=k[0])==null?void 0:ae.height)||0}px`,"--width":`${GU}px`,"--gap":`${j}px`,...m,...ZU(c,u)},onBlur:ue=>{q.current&&!ue.currentTarget.contains(ue.relatedTarget)&&(q.current=!1,E.current&&(E.current.focus({preventScroll:!0}),E.current=null))},onFocus:ue=>{ue.target instanceof HTMLElement&&ue.target.dataset.dismissible==="false"||q.current||(q.current=!0,E.current=ue.relatedTarget)},onMouseEnter:()=>A(!0),onMouseMove:()=>A(!0),onMouseLeave:()=>{B||A(!1)},onDragEnd:()=>A(!1),onPointerDown:ue=>{ue.target instanceof HTMLElement&&ue.target.dataset.dismissible==="false"||L(!0)},onPointerUp:()=>L(!1)},C.filter(ue=>!ue.position&&oe===0||ue.position===re).map((ue,J)=>{var ee,G;return F.createElement(JU,{key:ue.id,icons:y,index:J,toast:ue,defaultRichColors:h,duration:(ee=p==null?void 0:p.duration)!=null?ee:f,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:n,visibleToasts:g,closeButton:(G=p==null?void 0:p.closeButton)!=null?G:o,interacting:B,position:re,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,removeToast:Y,toasts:C.filter(W=>W.position==ue.position),heights:k.filter(W=>W.position==ue.position),setHeights:T,expandByDefault:i,gap:j,loadingIcon:x,expanded:P,pauseWhenPageIsHidden:w,swipeDirections:e.swipeDirections})})):null}))});const t7=({...e})=>{const{theme:t="system"}=PU();return r.jsx(e7,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var n7=GN[" useId ".trim().toString()]||(()=>{}),r7=0;function Da(e){const[t,n]=b.useState(n7());return Sn(()=>{n(s=>s??String(r7++))},[e]),t?`radix-${t}`:""}const s7=["top","right","bottom","left"],Po=Math.min,Jr=Math.max,kg=Math.round,np=Math.floor,Ma=e=>({x:e,y:e}),a7={left:"right",right:"left",bottom:"top",top:"bottom"},i7={start:"end",end:"start"};function yb(e,t,n){return Jr(e,Po(t,n))}function bi(e,t){return typeof e=="function"?e(t):e}function wi(e){return e.split("-")[0]}function gd(e){return e.split("-")[1]}function U1(e){return e==="x"?"y":"x"}function W1(e){return e==="y"?"height":"width"}const o7=new Set(["top","bottom"]);function Ca(e){return o7.has(wi(e))?"y":"x"}function H1(e){return U1(Ca(e))}function l7(e,t,n){n===void 0&&(n=!1);const s=gd(e),a=H1(e),i=W1(a);let o=a==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=Tg(o)),[o,Tg(o)]}function c7(e){const t=Tg(e);return[jb(e),t,jb(t)]}function jb(e){return e.replace(/start|end/g,t=>i7[t])}const S_=["left","right"],C_=["right","left"],u7=["top","bottom"],d7=["bottom","top"];function h7(e,t,n){switch(e){case"top":case"bottom":return n?t?C_:S_:t?S_:C_;case"left":case"right":return t?u7:d7;default:return[]}}function f7(e,t,n,s){const a=gd(e);let i=h7(wi(e),n==="start",s);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(jb)))),i}function Tg(e){return e.replace(/left|right|bottom|top/g,t=>a7[t])}function m7(e){return{top:0,right:0,bottom:0,left:0,...e}}function fI(e){return typeof e!="number"?m7(e):{top:e,right:e,bottom:e,left:e}}function Eg(e){const{x:t,y:n,width:s,height:a}=e;return{width:s,height:a,top:n,left:t,right:t+s,bottom:n+a,x:t,y:n}}function __(e,t,n){let{reference:s,floating:a}=e;const i=Ca(t),o=H1(t),l=W1(o),c=wi(t),u=i==="y",d=s.x+s.width/2-a.width/2,h=s.y+s.height/2-a.height/2,f=s[l]/2-a[l]/2;let m;switch(c){case"top":m={x:d,y:s.y-a.height};break;case"bottom":m={x:d,y:s.y+s.height};break;case"right":m={x:s.x+s.width,y:h};break;case"left":m={x:s.x-a.width,y:h};break;default:m={x:s.x,y:s.y}}switch(gd(t)){case"start":m[o]-=f*(n&&u?-1:1);break;case"end":m[o]+=f*(n&&u?-1:1);break}return m}const p7=async(e,t,n)=>{const{placement:s="bottom",strategy:a="absolute",middleware:i=[],platform:o}=n,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:h}=__(u,s,c),f=s,m={},g=0;for(let p=0;p<l.length;p++){const{name:v,fn:j}=l[p],{x,y,data:N,reset:w}=await j({x:d,y:h,initialPlacement:s,placement:f,strategy:a,middlewareData:m,rects:u,platform:o,elements:{reference:e,floating:t}});d=x??d,h=y??h,m={...m,[v]:{...m[v],...N}},w&&g<=50&&(g++,typeof w=="object"&&(w.placement&&(f=w.placement),w.rects&&(u=w.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):w.rects),{x:d,y:h}=__(u,f,c)),p=-1)}return{x:d,y:h,placement:f,strategy:a,middlewareData:m}};async function df(e,t){var n;t===void 0&&(t={});const{x:s,y:a,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:m=0}=bi(t,e),g=fI(m),v=l[f?h==="floating"?"reference":"floating":h],j=Eg(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(v)))==null||n?v:v.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),x=h==="floating"?{x:s,y:a,width:o.floating.width,height:o.floating.height}:o.reference,y=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),N=await(i.isElement==null?void 0:i.isElement(y))?await(i.getScale==null?void 0:i.getScale(y))||{x:1,y:1}:{x:1,y:1},w=Eg(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:x,offsetParent:y,strategy:c}):x);return{top:(j.top-w.top+g.top)/N.y,bottom:(w.bottom-j.bottom+g.bottom)/N.y,left:(j.left-w.left+g.left)/N.x,right:(w.right-j.right+g.right)/N.x}}const g7=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:s,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=bi(e,t)||{};if(u==null)return{};const h=fI(d),f={x:n,y:s},m=H1(a),g=W1(m),p=await o.getDimensions(u),v=m==="y",j=v?"top":"left",x=v?"bottom":"right",y=v?"clientHeight":"clientWidth",N=i.reference[g]+i.reference[m]-f[m]-i.floating[g],w=f[m]-i.reference[m],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let S=C?C[y]:0;(!S||!await(o.isElement==null?void 0:o.isElement(C)))&&(S=l.floating[y]||i.floating[g]);const _=N/2-w/2,k=S/2-p[g]/2-1,T=Po(h[j],k),P=Po(h[x],k),A=T,B=S-p[g]-P,L=S/2-p[g]/2+_,H=yb(A,L,B),z=!c.arrow&&gd(a)!=null&&L!==H&&i.reference[g]/2-(L<A?T:P)-p[g]/2<0,$=z?L<A?L-A:L-B:0;return{[m]:f[m]+$,data:{[m]:H,centerOffset:L-H-$,...z&&{alignmentOffset:$}},reset:z}}}),v7=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,s;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:p=!0,...v}=bi(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const j=wi(a),x=Ca(l),y=wi(l)===l,N=await(c.isRTL==null?void 0:c.isRTL(u.floating)),w=f||(y||!p?[Tg(l)]:c7(l)),C=g!=="none";!f&&C&&w.push(...f7(l,p,g,N));const S=[l,...w],_=await df(t,v),k=[];let T=((s=i.flip)==null?void 0:s.overflows)||[];if(d&&k.push(_[j]),h){const L=l7(a,o,N);k.push(_[L[0]],_[L[1]])}if(T=[...T,{placement:a,overflows:k}],!k.every(L=>L<=0)){var P,A;const L=(((P=i.flip)==null?void 0:P.index)||0)+1,H=S[L];if(H&&(!(h==="alignment"?x!==Ca(H):!1)||T.every(I=>I.overflows[0]>0&&Ca(I.placement)===x)))return{data:{index:L,overflows:T},reset:{placement:H}};let z=(A=T.filter($=>$.overflows[0]<=0).sort(($,I)=>$.overflows[1]-I.overflows[1])[0])==null?void 0:A.placement;if(!z)switch(m){case"bestFit":{var B;const $=(B=T.filter(I=>{if(C){const E=Ca(I.placement);return E===x||E==="y"}return!0}).map(I=>[I.placement,I.overflows.filter(E=>E>0).reduce((E,q)=>E+q,0)]).sort((I,E)=>I[1]-E[1])[0])==null?void 0:B[0];$&&(z=$);break}case"initialPlacement":z=l;break}if(a!==z)return{reset:{placement:z}}}return{}}}};function P_(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function A_(e){return s7.some(t=>e[t]>=0)}const x7=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:s="referenceHidden",...a}=bi(e,t);switch(s){case"referenceHidden":{const i=await df(t,{...a,elementContext:"reference"}),o=P_(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:A_(o)}}}case"escaped":{const i=await df(t,{...a,altBoundary:!0}),o=P_(i,n.floating);return{data:{escapedOffsets:o,escaped:A_(o)}}}default:return{}}}}},mI=new Set(["left","top"]);async function y7(e,t){const{placement:n,platform:s,elements:a}=e,i=await(s.isRTL==null?void 0:s.isRTL(a.floating)),o=wi(n),l=gd(n),c=Ca(n)==="y",u=mI.has(o)?-1:1,d=i&&c?-1:1,h=bi(t,e);let{mainAxis:f,crossAxis:m,alignmentAxis:g}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof g=="number"&&(m=l==="end"?g*-1:g),c?{x:m*d,y:f*u}:{x:f*u,y:m*d}}const j7=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,s;const{x:a,y:i,placement:o,middlewareData:l}=t,c=await y7(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},b7=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:s,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:v=>{let{x:j,y:x}=v;return{x:j,y:x}}},...c}=bi(e,t),u={x:n,y:s},d=await df(t,c),h=Ca(wi(a)),f=U1(h);let m=u[f],g=u[h];if(i){const v=f==="y"?"top":"left",j=f==="y"?"bottom":"right",x=m+d[v],y=m-d[j];m=yb(x,m,y)}if(o){const v=h==="y"?"top":"left",j=h==="y"?"bottom":"right",x=g+d[v],y=g-d[j];g=yb(x,g,y)}const p=l.fn({...t,[f]:m,[h]:g});return{...p,data:{x:p.x-n,y:p.y-s,enabled:{[f]:i,[h]:o}}}}}},w7=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:s,placement:a,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=bi(e,t),d={x:n,y:s},h=Ca(a),f=U1(h);let m=d[f],g=d[h];const p=bi(l,t),v=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const y=f==="y"?"height":"width",N=i.reference[f]-i.floating[y]+v.mainAxis,w=i.reference[f]+i.reference[y]-v.mainAxis;m<N?m=N:m>w&&(m=w)}if(u){var j,x;const y=f==="y"?"width":"height",N=mI.has(wi(a)),w=i.reference[h]-i.floating[y]+(N&&((j=o.offset)==null?void 0:j[h])||0)+(N?0:v.crossAxis),C=i.reference[h]+i.reference[y]+(N?0:((x=o.offset)==null?void 0:x[h])||0)-(N?v.crossAxis:0);g<w?g=w:g>C&&(g=C)}return{[f]:m,[h]:g}}}},N7=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,s;const{placement:a,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...u}=bi(e,t),d=await df(t,u),h=wi(a),f=gd(a),m=Ca(a)==="y",{width:g,height:p}=i.floating;let v,j;h==="top"||h==="bottom"?(v=h,j=f===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(j=h,v=f==="end"?"top":"bottom");const x=p-d.top-d.bottom,y=g-d.left-d.right,N=Po(p-d[v],x),w=Po(g-d[j],y),C=!t.middlewareData.shift;let S=N,_=w;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(_=y),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(S=x),C&&!f){const T=Jr(d.left,0),P=Jr(d.right,0),A=Jr(d.top,0),B=Jr(d.bottom,0);m?_=g-2*(T!==0||P!==0?T+P:Jr(d.left,d.right)):S=p-2*(A!==0||B!==0?A+B:Jr(d.top,d.bottom))}await c({...t,availableWidth:_,availableHeight:S});const k=await o.getDimensions(l.floating);return g!==k.width||p!==k.height?{reset:{rects:!0}}:{}}}};function yx(){return typeof window<"u"}function vd(e){return pI(e)?(e.nodeName||"").toLowerCase():"#document"}function rs(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function za(e){var t;return(t=(pI(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function pI(e){return yx()?e instanceof Node||e instanceof rs(e).Node:!1}function ra(e){return yx()?e instanceof Element||e instanceof rs(e).Element:!1}function Ba(e){return yx()?e instanceof HTMLElement||e instanceof rs(e).HTMLElement:!1}function k_(e){return!yx()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof rs(e).ShadowRoot}const S7=new Set(["inline","contents"]);function mm(e){const{overflow:t,overflowX:n,overflowY:s,display:a}=sa(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+n)&&!S7.has(a)}const C7=new Set(["table","td","th"]);function _7(e){return C7.has(vd(e))}const P7=[":popover-open",":modal"];function jx(e){return P7.some(t=>{try{return e.matches(t)}catch{return!1}})}const A7=["transform","translate","scale","rotate","perspective"],k7=["transform","translate","scale","rotate","perspective","filter"],T7=["paint","layout","strict","content"];function G1(e){const t=K1(),n=ra(e)?sa(e):e;return A7.some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||k7.some(s=>(n.willChange||"").includes(s))||T7.some(s=>(n.contain||"").includes(s))}function E7(e){let t=Ao(e);for(;Ba(t)&&!Tu(t);){if(G1(t))return t;if(jx(t))return null;t=Ao(t)}return null}function K1(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const O7=new Set(["html","body","#document"]);function Tu(e){return O7.has(vd(e))}function sa(e){return rs(e).getComputedStyle(e)}function bx(e){return ra(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ao(e){if(vd(e)==="html")return e;const t=e.assignedSlot||e.parentNode||k_(e)&&e.host||za(e);return k_(t)?t.host:t}function gI(e){const t=Ao(e);return Tu(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ba(t)&&mm(t)?t:gI(t)}function hf(e,t,n){var s;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=gI(e),i=a===((s=e.ownerDocument)==null?void 0:s.body),o=rs(a);if(i){const l=bb(o);return t.concat(o,o.visualViewport||[],mm(a)?a:[],l&&n?hf(l):[])}return t.concat(a,hf(a,[],n))}function bb(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function vI(e){const t=sa(e);let n=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const a=Ba(e),i=a?e.offsetWidth:n,o=a?e.offsetHeight:s,l=kg(n)!==i||kg(s)!==o;return l&&(n=i,s=o),{width:n,height:s,$:l}}function Y1(e){return ra(e)?e:e.contextElement}function eu(e){const t=Y1(e);if(!Ba(t))return Ma(1);const n=t.getBoundingClientRect(),{width:s,height:a,$:i}=vI(t);let o=(i?kg(n.width):n.width)/s,l=(i?kg(n.height):n.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const D7=Ma(0);function xI(e){const t=rs(e);return!K1()||!t.visualViewport?D7:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function M7(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==rs(e)?!1:t}function Rl(e,t,n,s){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),i=Y1(e);let o=Ma(1);t&&(s?ra(s)&&(o=eu(s)):o=eu(e));const l=M7(i,n,s)?xI(i):Ma(0);let c=(a.left+l.x)/o.x,u=(a.top+l.y)/o.y,d=a.width/o.x,h=a.height/o.y;if(i){const f=rs(i),m=s&&ra(s)?rs(s):s;let g=f,p=bb(g);for(;p&&s&&m!==g;){const v=eu(p),j=p.getBoundingClientRect(),x=sa(p),y=j.left+(p.clientLeft+parseFloat(x.paddingLeft))*v.x,N=j.top+(p.clientTop+parseFloat(x.paddingTop))*v.y;c*=v.x,u*=v.y,d*=v.x,h*=v.y,c+=y,u+=N,g=rs(p),p=bb(g)}}return Eg({width:d,height:h,x:c,y:u})}function Q1(e,t){const n=bx(e).scrollLeft;return t?t.left+n:Rl(za(e)).left+n}function yI(e,t,n){n===void 0&&(n=!1);const s=e.getBoundingClientRect(),a=s.left+t.scrollLeft-(n?0:Q1(e,s)),i=s.top+t.scrollTop;return{x:a,y:i}}function I7(e){let{elements:t,rect:n,offsetParent:s,strategy:a}=e;const i=a==="fixed",o=za(s),l=t?jx(t.floating):!1;if(s===o||l&&i)return n;let c={scrollLeft:0,scrollTop:0},u=Ma(1);const d=Ma(0),h=Ba(s);if((h||!h&&!i)&&((vd(s)!=="body"||mm(o))&&(c=bx(s)),Ba(s))){const m=Rl(s);u=eu(s),d.x=m.x+s.clientLeft,d.y=m.y+s.clientTop}const f=o&&!h&&!i?yI(o,c,!0):Ma(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+f.x,y:n.y*u.y-c.scrollTop*u.y+d.y+f.y}}function $7(e){return Array.from(e.getClientRects())}function R7(e){const t=za(e),n=bx(e),s=e.ownerDocument.body,a=Jr(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),i=Jr(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let o=-n.scrollLeft+Q1(e);const l=-n.scrollTop;return sa(s).direction==="rtl"&&(o+=Jr(t.clientWidth,s.clientWidth)-a),{width:a,height:i,x:o,y:l}}function F7(e,t){const n=rs(e),s=za(e),a=n.visualViewport;let i=s.clientWidth,o=s.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const u=K1();(!u||u&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:l,y:c}}const L7=new Set(["absolute","fixed"]);function B7(e,t){const n=Rl(e,!0,t==="fixed"),s=n.top+e.clientTop,a=n.left+e.clientLeft,i=Ba(e)?eu(e):Ma(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,u=s*i.y;return{width:o,height:l,x:c,y:u}}function T_(e,t,n){let s;if(t==="viewport")s=F7(e,n);else if(t==="document")s=R7(za(e));else if(ra(t))s=B7(t,n);else{const a=xI(e);s={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Eg(s)}function jI(e,t){const n=Ao(e);return n===t||!ra(n)||Tu(n)?!1:sa(n).position==="fixed"||jI(n,t)}function V7(e,t){const n=t.get(e);if(n)return n;let s=hf(e,[],!1).filter(l=>ra(l)&&vd(l)!=="body"),a=null;const i=sa(e).position==="fixed";let o=i?Ao(e):e;for(;ra(o)&&!Tu(o);){const l=sa(o),c=G1(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&L7.has(a.position)||mm(o)&&!c&&jI(e,o))?s=s.filter(d=>d!==o):a=l,o=Ao(o)}return t.set(e,s),s}function z7(e){let{element:t,boundary:n,rootBoundary:s,strategy:a}=e;const o=[...n==="clippingAncestors"?jx(t)?[]:V7(t,this._c):[].concat(n),s],l=o[0],c=o.reduce((u,d)=>{const h=T_(t,d,a);return u.top=Jr(h.top,u.top),u.right=Po(h.right,u.right),u.bottom=Po(h.bottom,u.bottom),u.left=Jr(h.left,u.left),u},T_(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function q7(e){const{width:t,height:n}=vI(e);return{width:t,height:n}}function U7(e,t,n){const s=Ba(t),a=za(t),i=n==="fixed",o=Rl(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=Ma(0);function u(){c.x=Q1(a)}if(s||!s&&!i)if((vd(t)!=="body"||mm(a))&&(l=bx(t)),s){const m=Rl(t,!0,i,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else a&&u();i&&!s&&a&&u();const d=a&&!s&&!i?yI(a,l):Ma(0),h=o.left+l.scrollLeft-c.x-d.x,f=o.top+l.scrollTop-c.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function b0(e){return sa(e).position==="static"}function E_(e,t){if(!Ba(e)||sa(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return za(e)===n&&(n=n.ownerDocument.body),n}function bI(e,t){const n=rs(e);if(jx(e))return n;if(!Ba(e)){let a=Ao(e);for(;a&&!Tu(a);){if(ra(a)&&!b0(a))return a;a=Ao(a)}return n}let s=E_(e,t);for(;s&&_7(s)&&b0(s);)s=E_(s,t);return s&&Tu(s)&&b0(s)&&!G1(s)?n:s||E7(e)||n}const W7=async function(e){const t=this.getOffsetParent||bI,n=this.getDimensions,s=await n(e.floating);return{reference:U7(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function H7(e){return sa(e).direction==="rtl"}const G7={convertOffsetParentRelativeRectToViewportRelativeRect:I7,getDocumentElement:za,getClippingRect:z7,getOffsetParent:bI,getElementRects:W7,getClientRects:$7,getDimensions:q7,getScale:eu,isElement:ra,isRTL:H7};function wI(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function K7(e,t){let n=null,s;const a=za(e);function i(){var l;clearTimeout(s),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=e.getBoundingClientRect(),{left:d,top:h,width:f,height:m}=u;if(l||t(),!f||!m)return;const g=np(h),p=np(a.clientWidth-(d+f)),v=np(a.clientHeight-(h+m)),j=np(d),y={rootMargin:-g+"px "+-p+"px "+-v+"px "+-j+"px",threshold:Jr(0,Po(1,c))||1};let N=!0;function w(C){const S=C[0].intersectionRatio;if(S!==c){if(!N)return o();S?o(!1,S):s=setTimeout(()=>{o(!1,1e-7)},1e3)}S===1&&!wI(u,e.getBoundingClientRect())&&o(),N=!1}try{n=new IntersectionObserver(w,{...y,root:a.ownerDocument})}catch{n=new IntersectionObserver(w,y)}n.observe(e)}return o(!0),i}function Y7(e,t,n,s){s===void 0&&(s={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,u=Y1(e),d=a||i?[...u?hf(u):[],...hf(t)]:[];d.forEach(j=>{a&&j.addEventListener("scroll",n,{passive:!0}),i&&j.addEventListener("resize",n)});const h=u&&l?K7(u,n):null;let f=-1,m=null;o&&(m=new ResizeObserver(j=>{let[x]=j;x&&x.target===u&&m&&(m.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var y;(y=m)==null||y.observe(t)})),n()}),u&&!c&&m.observe(u),m.observe(t));let g,p=c?Rl(e):null;c&&v();function v(){const j=Rl(e);p&&!wI(p,j)&&n(),p=j,g=requestAnimationFrame(v)}return n(),()=>{var j;d.forEach(x=>{a&&x.removeEventListener("scroll",n),i&&x.removeEventListener("resize",n)}),h==null||h(),(j=m)==null||j.disconnect(),m=null,c&&cancelAnimationFrame(g)}}const Q7=j7,X7=b7,J7=v7,Z7=N7,e9=x7,O_=g7,t9=w7,n9=(e,t,n)=>{const s=new Map,a={platform:G7,...n},i={...a.platform,_c:s};return p7(e,t,{...a,platform:i})};var r9=typeof document<"u",s9=function(){},Qp=r9?b.useLayoutEffect:s9;function Og(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,s,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(s=n;s--!==0;)if(!Og(e[s],t[s]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(t,a[s]))return!1;for(s=n;s--!==0;){const i=a[s];if(!(i==="_owner"&&e.$$typeof)&&!Og(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function NI(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function D_(e,t){const n=NI(e);return Math.round(t*n)/n}function w0(e){const t=b.useRef(e);return Qp(()=>{t.current=e}),t}function a9(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:s=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,h]=b.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,m]=b.useState(s);Og(f,s)||m(s);const[g,p]=b.useState(null),[v,j]=b.useState(null),x=b.useCallback(I=>{I!==C.current&&(C.current=I,p(I))},[]),y=b.useCallback(I=>{I!==S.current&&(S.current=I,j(I))},[]),N=i||g,w=o||v,C=b.useRef(null),S=b.useRef(null),_=b.useRef(d),k=c!=null,T=w0(c),P=w0(a),A=w0(u),B=b.useCallback(()=>{if(!C.current||!S.current)return;const I={placement:t,strategy:n,middleware:f};P.current&&(I.platform=P.current),n9(C.current,S.current,I).then(E=>{const q={...E,isPositioned:A.current!==!1};L.current&&!Og(_.current,q)&&(_.current=q,Zl.flushSync(()=>{h(q)}))})},[f,t,n,P,A]);Qp(()=>{u===!1&&_.current.isPositioned&&(_.current.isPositioned=!1,h(I=>({...I,isPositioned:!1})))},[u]);const L=b.useRef(!1);Qp(()=>(L.current=!0,()=>{L.current=!1}),[]),Qp(()=>{if(N&&(C.current=N),w&&(S.current=w),N&&w){if(T.current)return T.current(N,w,B);B()}},[N,w,B,T,k]);const H=b.useMemo(()=>({reference:C,floating:S,setReference:x,setFloating:y}),[x,y]),z=b.useMemo(()=>({reference:N,floating:w}),[N,w]),$=b.useMemo(()=>{const I={position:n,left:0,top:0};if(!z.floating)return I;const E=D_(z.floating,d.x),q=D_(z.floating,d.y);return l?{...I,transform:"translate("+E+"px, "+q+"px)",...NI(z.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:E,top:q}},[n,l,z.floating,d.x,d.y]);return b.useMemo(()=>({...d,update:B,refs:H,elements:z,floatingStyles:$}),[d,B,H,z,$])}const i9=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:s,padding:a}=typeof e=="function"?e(n):e;return s&&t(s)?s.current!=null?O_({element:s.current,padding:a}).fn(n):{}:s?O_({element:s,padding:a}).fn(n):{}}}},o9=(e,t)=>({...Q7(e),options:[e,t]}),l9=(e,t)=>({...X7(e),options:[e,t]}),c9=(e,t)=>({...t9(e),options:[e,t]}),u9=(e,t)=>({...J7(e),options:[e,t]}),d9=(e,t)=>({...Z7(e),options:[e,t]}),h9=(e,t)=>({...e9(e),options:[e,t]}),f9=(e,t)=>({...i9(e),options:[e,t]});var m9="Arrow",SI=b.forwardRef((e,t)=>{const{children:n,width:s=10,height:a=5,...i}=e;return r.jsx(Le.svg,{...i,ref:t,width:s,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:r.jsx("polygon",{points:"0,0 30,0 15,10"})})});SI.displayName=m9;var p9=SI;function X1(e){const[t,n]=b.useState(void 0);return Sn(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;n({width:o,height:l})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else n(void 0)},[e]),t}var J1="Popper",[CI,xd]=cs(J1),[g9,_I]=CI(J1),PI=e=>{const{__scopePopper:t,children:n}=e,[s,a]=b.useState(null);return r.jsx(g9,{scope:t,anchor:s,onAnchorChange:a,children:n})};PI.displayName=J1;var AI="PopperAnchor",kI=b.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:s,...a}=e,i=_I(AI,n),o=b.useRef(null),l=pt(t,o);return b.useEffect(()=>{i.onAnchorChange((s==null?void 0:s.current)||o.current)}),s?null:r.jsx(Le.div,{...a,ref:l})});kI.displayName=AI;var Z1="PopperContent",[v9,x9]=CI(Z1),TI=b.forwardRef((e,t)=>{var ue,J,ee,G,W,O;const{__scopePopper:n,side:s="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:g,...p}=e,v=_I(Z1,n),[j,x]=b.useState(null),y=pt(t,le=>x(le)),[N,w]=b.useState(null),C=X1(N),S=(C==null?void 0:C.width)??0,_=(C==null?void 0:C.height)??0,k=s+(i!=="center"?"-"+i:""),T=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},P=Array.isArray(u)?u:[u],A=P.length>0,B={padding:T,boundary:P.filter(j9),altBoundary:A},{refs:L,floatingStyles:H,placement:z,isPositioned:$,middlewareData:I}=a9({strategy:"fixed",placement:k,whileElementsMounted:(...le)=>Y7(...le,{animationFrame:m==="always"}),elements:{reference:v.anchor},middleware:[o9({mainAxis:a+_,alignmentAxis:o}),c&&l9({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?c9():void 0,...B}),c&&u9({...B}),d9({...B,apply:({elements:le,rects:ce,availableWidth:ie,availableHeight:Ce})=>{const{width:st,height:tt}=ce.reference,wt=le.floating.style;wt.setProperty("--radix-popper-available-width",`${ie}px`),wt.setProperty("--radix-popper-available-height",`${Ce}px`),wt.setProperty("--radix-popper-anchor-width",`${st}px`),wt.setProperty("--radix-popper-anchor-height",`${tt}px`)}}),N&&f9({element:N,padding:l}),b9({arrowWidth:S,arrowHeight:_}),f&&h9({strategy:"referenceHidden",...B})]}),[E,q]=DI(z),Y=Sr(g);Sn(()=>{$&&(Y==null||Y())},[$,Y]);const re=(ue=I.arrow)==null?void 0:ue.x,oe=(J=I.arrow)==null?void 0:J.y,ae=((ee=I.arrow)==null?void 0:ee.centerOffset)!==0,[me,we]=b.useState();return Sn(()=>{j&&we(window.getComputedStyle(j).zIndex)},[j]),r.jsx("div",{ref:L.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:$?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:me,"--radix-popper-transform-origin":[(G=I.transformOrigin)==null?void 0:G.x,(W=I.transformOrigin)==null?void 0:W.y].join(" "),...((O=I.hide)==null?void 0:O.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:r.jsx(v9,{scope:n,placedSide:E,onArrowChange:w,arrowX:re,arrowY:oe,shouldHideArrow:ae,children:r.jsx(Le.div,{"data-side":E,"data-align":q,...p,ref:y,style:{...p.style,animation:$?void 0:"none"}})})})});TI.displayName=Z1;var EI="PopperArrow",y9={top:"bottom",right:"left",bottom:"top",left:"right"},OI=b.forwardRef(function(t,n){const{__scopePopper:s,...a}=t,i=x9(EI,s),o=y9[i.placedSide];return r.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:r.jsx(p9,{...a,ref:n,style:{...a.style,display:"block"}})})});OI.displayName=EI;function j9(e){return e!==null}var b9=e=>({name:"transformOrigin",options:e,fn(t){var v,j,x;const{placement:n,rects:s,middlewareData:a}=t,o=((v=a.arrow)==null?void 0:v.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[u,d]=DI(n),h={start:"0%",center:"50%",end:"100%"}[d],f=(((j=a.arrow)==null?void 0:j.x)??0)+l/2,m=(((x=a.arrow)==null?void 0:x.y)??0)+c/2;let g="",p="";return u==="bottom"?(g=o?h:`${f}px`,p=`${-c}px`):u==="top"?(g=o?h:`${f}px`,p=`${s.floating.height+c}px`):u==="right"?(g=`${-c}px`,p=o?h:`${m}px`):u==="left"&&(g=`${s.floating.width+c}px`,p=o?h:`${m}px`),{data:{x:g,y:p}}}});function DI(e){const[t,n="center"]=e.split("-");return[t,n]}var MI=PI,eS=kI,tS=TI,nS=OI,[wx,QAe]=cs("Tooltip",[xd]),rS=xd(),II="TooltipProvider",w9=700,M_="tooltip.open",[N9,$I]=wx(II),RI=e=>{const{__scopeTooltip:t,delayDuration:n=w9,skipDelayDuration:s=300,disableHoverableContent:a=!1,children:i}=e,o=b.useRef(!0),l=b.useRef(!1),c=b.useRef(0);return b.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),r.jsx(N9,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:b.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:b.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,s)},[s]),isPointerInTransitRef:l,onPointerInTransitChange:b.useCallback(u=>{l.current=u},[]),disableHoverableContent:a,children:i})};RI.displayName=II;var FI="Tooltip",[XAe,Nx]=wx(FI),wb="TooltipTrigger",S9=b.forwardRef((e,t)=>{const{__scopeTooltip:n,...s}=e,a=Nx(wb,n),i=$I(wb,n),o=rS(n),l=b.useRef(null),c=pt(t,l,a.onTriggerChange),u=b.useRef(!1),d=b.useRef(!1),h=b.useCallback(()=>u.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),r.jsx(eS,{asChild:!0,...o,children:r.jsx(Le.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...s,ref:c,onPointerMove:Ae(e.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),d.current=!0)}),onPointerLeave:Ae(e.onPointerLeave,()=>{a.onTriggerLeave(),d.current=!1}),onPointerDown:Ae(e.onPointerDown,()=>{a.open&&a.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Ae(e.onFocus,()=>{u.current||a.onOpen()}),onBlur:Ae(e.onBlur,a.onClose),onClick:Ae(e.onClick,a.onClose)})})});S9.displayName=wb;var C9="TooltipPortal",[JAe,_9]=wx(C9,{forceMount:void 0}),Eu="TooltipContent",LI=b.forwardRef((e,t)=>{const n=_9(Eu,e.__scopeTooltip),{forceMount:s=n.forceMount,side:a="top",...i}=e,o=Nx(Eu,e.__scopeTooltip);return r.jsx(ks,{present:s||o.open,children:o.disableHoverableContent?r.jsx(BI,{side:a,...i,ref:t}):r.jsx(P9,{side:a,...i,ref:t})})}),P9=b.forwardRef((e,t)=>{const n=Nx(Eu,e.__scopeTooltip),s=$I(Eu,e.__scopeTooltip),a=b.useRef(null),i=pt(t,a),[o,l]=b.useState(null),{trigger:c,onClose:u}=n,d=a.current,{onPointerInTransitChange:h}=s,f=b.useCallback(()=>{l(null),h(!1)},[h]),m=b.useCallback((g,p)=>{const v=g.currentTarget,j={x:g.clientX,y:g.clientY},x=O9(j,v.getBoundingClientRect()),y=D9(j,x),N=M9(p.getBoundingClientRect()),w=$9([...y,...N]);l(w),h(!0)},[h]);return b.useEffect(()=>()=>f(),[f]),b.useEffect(()=>{if(c&&d){const g=v=>m(v,d),p=v=>m(v,c);return c.addEventListener("pointerleave",g),d.addEventListener("pointerleave",p),()=>{c.removeEventListener("pointerleave",g),d.removeEventListener("pointerleave",p)}}},[c,d,m,f]),b.useEffect(()=>{if(o){const g=p=>{const v=p.target,j={x:p.clientX,y:p.clientY},x=(c==null?void 0:c.contains(v))||(d==null?void 0:d.contains(v)),y=!I9(j,o);x?f():y&&(f(),u())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,d,o,u,f]),r.jsx(BI,{...e,ref:i})}),[A9,k9]=wx(FI,{isInside:!1}),T9=Tz("TooltipContent"),BI=b.forwardRef((e,t)=>{const{__scopeTooltip:n,children:s,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,c=Nx(Eu,n),u=rS(n),{onClose:d}=c;return b.useEffect(()=>(document.addEventListener(M_,d),()=>document.removeEventListener(M_,d)),[d]),b.useEffect(()=>{if(c.trigger){const h=f=>{const m=f.target;m!=null&&m.contains(c.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,d]),r.jsx(hd,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:r.jsxs(tS,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[r.jsx(T9,{children:s}),r.jsx(A9,{scope:n,isInside:!0,children:r.jsx(Jz,{id:c.contentId,role:"tooltip",children:a||s})})]})})});LI.displayName=Eu;var VI="TooltipArrow",E9=b.forwardRef((e,t)=>{const{__scopeTooltip:n,...s}=e,a=rS(n);return k9(VI,n).isInside?null:r.jsx(nS,{...a,...s,ref:t})});E9.displayName=VI;function O9(e,t){const n=Math.abs(t.top-e.y),s=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,s,a,i)){case i:return"left";case a:return"right";case n:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function D9(e,t,n=5){const s=[];switch(t){case"top":s.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":s.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":s.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":s.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return s}function M9(e){const{top:t,right:n,bottom:s,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:s},{x:a,y:s}]}function I9(e,t){const{x:n,y:s}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],u=l.x,d=l.y,h=c.x,f=c.y;d>s!=f>s&&n<(h-u)*(s-d)/(f-d)+u&&(a=!a)}return a}function $9(e){const t=e.slice();return t.sort((n,s)=>n.x<s.x?-1:n.x>s.x?1:n.y<s.y?-1:n.y>s.y?1:0),R9(t)}function R9(e){if(e.length<=1)return e.slice();const t=[];for(let s=0;s<e.length;s++){const a=e[s];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let s=e.length-1;s>=0;s--){const a=e[s];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var F9=RI,zI=LI;const L9=F9,B9=b.forwardRef(({className:e,sideOffset:t=4,...n},s)=>r.jsx(zI,{ref:s,sideOffset:t,className:Ie("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));B9.displayName=zI.displayName;var yd=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},V9={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Xi,zN,eO,z9=(eO=class{constructor(){Fe(this,Xi,V9);Fe(this,zN,!1)}setTimeoutProvider(e){Te(this,Xi,e)}setTimeout(e,t){return X(this,Xi).setTimeout(e,t)}clearTimeout(e){X(this,Xi).clearTimeout(e)}setInterval(e,t){return X(this,Xi).setInterval(e,t)}clearInterval(e){X(this,Xi).clearInterval(e)}},Xi=new WeakMap,zN=new WeakMap,eO),ul=new z9;function q9(e){setTimeout(e,0)}var Fl=typeof window>"u"||"Deno"in globalThis;function vr(){}function U9(e,t){return typeof e=="function"?e(t):e}function Nb(e){return typeof e=="number"&&e>=0&&e!==1/0}function qI(e,t){return Math.max(e+(t||0)-Date.now(),0)}function jo(e,t){return typeof e=="function"?e(t):e}function vs(e,t){return typeof e=="function"?e(t):e}function I_(e,t){const{type:n="all",exact:s,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(s){if(t.queryHash!==sS(o,t.options))return!1}else if(!ff(t.queryKey,o))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function $_(e,t){const{exact:n,status:s,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(Ll(t.options.mutationKey)!==Ll(i))return!1}else if(!ff(t.options.mutationKey,i))return!1}return!(s&&t.state.status!==s||a&&!a(t))}function sS(e,t){return((t==null?void 0:t.queryKeyHashFn)||Ll)(e)}function Ll(e){return JSON.stringify(e,(t,n)=>Sb(n)?Object.keys(n).sort().reduce((s,a)=>(s[a]=n[a],s),{}):n)}function ff(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>ff(e[n],t[n])):!1}var W9=Object.prototype.hasOwnProperty;function UI(e,t){if(e===t)return e;const n=R_(e)&&R_(t);if(!n&&!(Sb(e)&&Sb(t)))return t;const a=(n?e:Object.keys(e)).length,i=n?t:Object.keys(t),o=i.length,l=n?new Array(o):{};let c=0;for(let u=0;u<o;u++){const d=n?u:i[u],h=e[d],f=t[d];if(h===f){l[d]=h,(n?u<a:W9.call(e,d))&&c++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){l[d]=f;continue}const m=UI(h,f);l[d]=m,m===h&&c++}return a===o&&c===a?e:l}function Dg(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function R_(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Sb(e){if(!F_(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!F_(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function F_(e){return Object.prototype.toString.call(e)==="[object Object]"}function H9(e){return new Promise(t=>{ul.setTimeout(t,e)})}function Cb(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?UI(e,t):t}function G9(e,t,n=0){const s=[...e,t];return n&&s.length>n?s.slice(1):s}function K9(e,t,n=0){const s=[t,...e];return n&&s.length>n?s.slice(0,-1):s}var aS=Symbol();function WI(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===aS?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function HI(e,t){return typeof e=="function"?e(...t):!!e}var gl,Ji,ou,tO,Y9=(tO=class extends yd{constructor(){super();Fe(this,gl);Fe(this,Ji);Fe(this,ou);Te(this,ou,t=>{if(!Fl&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){X(this,Ji)||this.setEventListener(X(this,ou))}onUnsubscribe(){var t;this.hasListeners()||((t=X(this,Ji))==null||t.call(this),Te(this,Ji,void 0))}setEventListener(t){var n;Te(this,ou,t),(n=X(this,Ji))==null||n.call(this),Te(this,Ji,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){X(this,gl)!==t&&(Te(this,gl,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof X(this,gl)=="boolean"?X(this,gl):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},gl=new WeakMap,Ji=new WeakMap,ou=new WeakMap,tO),iS=new Y9;function _b(){let e,t;const n=new Promise((a,i)=>{e=a,t=i});n.status="pending",n.catch(()=>{});function s(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{s({status:"fulfilled",value:a}),e(a)},n.reject=a=>{s({status:"rejected",reason:a}),t(a)},n}var Q9=q9;function X9(){let e=[],t=0,n=l=>{l()},s=l=>{l()},a=Q9;const i=l=>{t?e.push(l):a(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{s(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{s=l},setScheduler:l=>{a=l}}}var En=X9(),lu,Zi,cu,nO,J9=(nO=class extends yd{constructor(){super();Fe(this,lu,!0);Fe(this,Zi);Fe(this,cu);Te(this,cu,t=>{if(!Fl&&window.addEventListener){const n=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",s)}}})}onSubscribe(){X(this,Zi)||this.setEventListener(X(this,cu))}onUnsubscribe(){var t;this.hasListeners()||((t=X(this,Zi))==null||t.call(this),Te(this,Zi,void 0))}setEventListener(t){var n;Te(this,cu,t),(n=X(this,Zi))==null||n.call(this),Te(this,Zi,t(this.setOnline.bind(this)))}setOnline(t){X(this,lu)!==t&&(Te(this,lu,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return X(this,lu)}},lu=new WeakMap,Zi=new WeakMap,cu=new WeakMap,nO),Mg=new J9;function Z9(e){return Math.min(1e3*2**e,3e4)}function GI(e){return(e??"online")==="online"?Mg.isOnline():!0}var Pb=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function KI(e){let t=!1,n=0,s;const a=_b(),i=()=>a.status!=="pending",o=p=>{var v;if(!i()){const j=new Pb(p);f(j),(v=e.onCancel)==null||v.call(e,j)}},l=()=>{t=!0},c=()=>{t=!1},u=()=>iS.isFocused()&&(e.networkMode==="always"||Mg.isOnline())&&e.canRun(),d=()=>GI(e.networkMode)&&e.canRun(),h=p=>{i()||(s==null||s(),a.resolve(p))},f=p=>{i()||(s==null||s(),a.reject(p))},m=()=>new Promise(p=>{var v;s=j=>{(i()||u())&&p(j)},(v=e.onPause)==null||v.call(e)}).then(()=>{var p;s=void 0,i()||(p=e.onContinue)==null||p.call(e)}),g=()=>{if(i())return;let p;const v=n===0?e.initialPromise:void 0;try{p=v??e.fn()}catch(j){p=Promise.reject(j)}Promise.resolve(p).then(h).catch(j=>{var C;if(i())return;const x=e.retry??(Fl?0:3),y=e.retryDelay??Z9,N=typeof y=="function"?y(n,j):y,w=x===!0||typeof x=="number"&&n<x||typeof x=="function"&&x(n,j);if(t||!w){f(j);return}n++,(C=e.onFail)==null||C.call(e,n,j),H9(N).then(()=>u()?void 0:m()).then(()=>{t?f(j):g()})})};return{promise:a,status:()=>a.status,cancel:o,continue:()=>(s==null||s(),a),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?g():m().then(g),a)}}var vl,rO,YI=(rO=class{constructor(){Fe(this,vl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Nb(this.gcTime)&&Te(this,vl,ul.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Fl?1/0:5*60*1e3))}clearGcTimeout(){X(this,vl)&&(ul.clearTimeout(X(this,vl)),Te(this,vl,void 0))}},vl=new WeakMap,rO),xl,uu,gs,yl,Bn,tm,jl,Bs,Qa,sO,eW=(sO=class extends YI{constructor(t){super();Fe(this,Bs);Fe(this,xl);Fe(this,uu);Fe(this,gs);Fe(this,yl);Fe(this,Bn);Fe(this,tm);Fe(this,jl);Te(this,jl,!1),Te(this,tm,t.defaultOptions),this.setOptions(t.options),this.observers=[],Te(this,yl,t.client),Te(this,gs,X(this,yl).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Te(this,xl,L_(this.options)),this.state=t.state??X(this,xl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=X(this,Bn))==null?void 0:t.promise}setOptions(t){if(this.options={...X(this,tm),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=L_(this.options);n.data!==void 0&&(this.setData(n.data,{updatedAt:n.dataUpdatedAt,manual:!0}),Te(this,xl,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&X(this,gs).remove(this)}setData(t,n){const s=Cb(this.state.data,t,this.options);return at(this,Bs,Qa).call(this,{data:s,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),s}setState(t,n){at(this,Bs,Qa).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var s,a;const n=(s=X(this,Bn))==null?void 0:s.promise;return(a=X(this,Bn))==null||a.cancel(t),n?n.then(vr).catch(vr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(X(this,xl))}isActive(){return this.observers.some(t=>vs(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===aS||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>jo(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!qI(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=X(this,Bn))==null||n.continue()}onOnline(){var n;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=X(this,Bn))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),X(this,gs).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(X(this,Bn)&&(X(this,jl)?X(this,Bn).cancel({revert:!0}):X(this,Bn).cancelRetry()),this.scheduleGc()),X(this,gs).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||at(this,Bs,Qa).call(this,{type:"invalidate"})}async fetch(t,n){var c,u,d,h,f,m,g,p,v,j,x,y;if(this.state.fetchStatus!=="idle"&&((c=X(this,Bn))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(X(this,Bn))return X(this,Bn).continueRetry(),X(this,Bn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const N=this.observers.find(w=>w.options.queryFn);N&&this.setOptions(N.options)}const s=new AbortController,a=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(Te(this,jl,!0),s.signal)})},i=()=>{const N=WI(this.options,n),C=(()=>{const S={client:X(this,yl),queryKey:this.queryKey,meta:this.meta};return a(S),S})();return Te(this,jl,!1),this.options.persister?this.options.persister(N,C,this):N(C)},l=(()=>{const N={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:X(this,yl),state:this.state,fetchFn:i};return a(N),N})();(u=this.options.behavior)==null||u.onFetch(l,this),Te(this,uu,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&at(this,Bs,Qa).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta}),Te(this,Bn,KI({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,onCancel:N=>{N instanceof Pb&&N.revert&&this.setState({...X(this,uu),fetchStatus:"idle"}),s.abort()},onFail:(N,w)=>{at(this,Bs,Qa).call(this,{type:"failed",failureCount:N,error:w})},onPause:()=>{at(this,Bs,Qa).call(this,{type:"pause"})},onContinue:()=>{at(this,Bs,Qa).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const N=await X(this,Bn).start();if(N===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(N),(m=(f=X(this,gs).config).onSuccess)==null||m.call(f,N,this),(p=(g=X(this,gs).config).onSettled)==null||p.call(g,N,this.state.error,this),N}catch(N){if(N instanceof Pb){if(N.silent)return X(this,Bn).promise;if(N.revert){if(this.state.data===void 0)throw N;return this.state.data}}throw at(this,Bs,Qa).call(this,{type:"error",error:N}),(j=(v=X(this,gs).config).onError)==null||j.call(v,N,this),(y=(x=X(this,gs).config).onSettled)==null||y.call(x,this.state.data,N,this),N}finally{this.scheduleGc()}}},xl=new WeakMap,uu=new WeakMap,gs=new WeakMap,yl=new WeakMap,Bn=new WeakMap,tm=new WeakMap,jl=new WeakMap,Bs=new WeakSet,Qa=function(t){const n=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...QI(s.data,this.options),fetchMeta:t.meta??null};case"success":const a={...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Te(this,uu,t.manual?a:void 0),a;case"error":const i=t.error;return{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=n(this.state),En.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),X(this,gs).notify({query:this,type:"updated",action:t})})},sO);function QI(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:GI(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function L_(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,s=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Tr,mt,nm,mr,bl,du,ni,eo,rm,hu,fu,wl,Nl,to,mu,_t,yh,Ab,kb,Tb,Eb,Ob,Db,Mb,XI,aO,tW=(aO=class extends yd{constructor(t,n){super();Fe(this,_t);Fe(this,Tr);Fe(this,mt);Fe(this,nm);Fe(this,mr);Fe(this,bl);Fe(this,du);Fe(this,ni);Fe(this,eo);Fe(this,rm);Fe(this,hu);Fe(this,fu);Fe(this,wl);Fe(this,Nl);Fe(this,to);Fe(this,mu,new Set);this.options=n,Te(this,Tr,t),Te(this,eo,null),Te(this,ni,_b()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(X(this,mt).addObserver(this),B_(X(this,mt),this.options)?at(this,_t,yh).call(this):this.updateResult(),at(this,_t,Eb).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ib(X(this,mt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ib(X(this,mt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,at(this,_t,Ob).call(this),at(this,_t,Db).call(this),X(this,mt).removeObserver(this)}setOptions(t){const n=this.options,s=X(this,mt);if(this.options=X(this,Tr).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof vs(this.options.enabled,X(this,mt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");at(this,_t,Mb).call(this),X(this,mt).setOptions(this.options),n._defaulted&&!Dg(this.options,n)&&X(this,Tr).getQueryCache().notify({type:"observerOptionsUpdated",query:X(this,mt),observer:this});const a=this.hasListeners();a&&V_(X(this,mt),s,this.options,n)&&at(this,_t,yh).call(this),this.updateResult(),a&&(X(this,mt)!==s||vs(this.options.enabled,X(this,mt))!==vs(n.enabled,X(this,mt))||jo(this.options.staleTime,X(this,mt))!==jo(n.staleTime,X(this,mt)))&&at(this,_t,Ab).call(this);const i=at(this,_t,kb).call(this);a&&(X(this,mt)!==s||vs(this.options.enabled,X(this,mt))!==vs(n.enabled,X(this,mt))||i!==X(this,to))&&at(this,_t,Tb).call(this,i)}getOptimisticResult(t){const n=X(this,Tr).getQueryCache().build(X(this,Tr),t),s=this.createResult(n,t);return rW(this,s)&&(Te(this,mr,s),Te(this,du,this.options),Te(this,bl,X(this,mt).state)),s}getCurrentResult(){return X(this,mr)}trackResult(t,n){return new Proxy(t,{get:(s,a)=>(this.trackProp(a),n==null||n(a),a==="promise"&&!this.options.experimental_prefetchInRender&&X(this,ni).status==="pending"&&X(this,ni).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(s,a))})}trackProp(t){X(this,mu).add(t)}getCurrentQuery(){return X(this,mt)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=X(this,Tr).defaultQueryOptions(t),s=X(this,Tr).getQueryCache().build(X(this,Tr),n);return s.fetch().then(()=>this.createResult(s,n))}fetch(t){return at(this,_t,yh).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),X(this,mr)))}createResult(t,n){var k;const s=X(this,mt),a=this.options,i=X(this,mr),o=X(this,bl),l=X(this,du),u=t!==s?t.state:X(this,nm),{state:d}=t;let h={...d},f=!1,m;if(n._optimisticResults){const T=this.hasListeners(),P=!T&&B_(t,n),A=T&&V_(t,s,n,a);(P||A)&&(h={...h,...QI(d.data,t.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:g,errorUpdatedAt:p,status:v}=h;m=h.data;let j=!1;if(n.placeholderData!==void 0&&m===void 0&&v==="pending"){let T;i!=null&&i.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(T=i.data,j=!0):T=typeof n.placeholderData=="function"?n.placeholderData((k=X(this,fu))==null?void 0:k.state.data,X(this,fu)):n.placeholderData,T!==void 0&&(v="success",m=Cb(i==null?void 0:i.data,T,n),f=!0)}if(n.select&&m!==void 0&&!j)if(i&&m===(o==null?void 0:o.data)&&n.select===X(this,rm))m=X(this,hu);else try{Te(this,rm,n.select),m=n.select(m),m=Cb(i==null?void 0:i.data,m,n),Te(this,hu,m),Te(this,eo,null)}catch(T){Te(this,eo,T)}X(this,eo)&&(g=X(this,eo),m=X(this,hu),p=Date.now(),v="error");const x=h.fetchStatus==="fetching",y=v==="pending",N=v==="error",w=y&&x,C=m!==void 0,_={status:v,fetchStatus:h.fetchStatus,isPending:y,isSuccess:v==="success",isError:N,isInitialLoading:w,isLoading:w,data:m,dataUpdatedAt:h.dataUpdatedAt,error:g,errorUpdatedAt:p,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:x,isRefetching:x&&!y,isLoadingError:N&&!C,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:N&&C,isStale:oS(t,n),refetch:this.refetch,promise:X(this,ni),isEnabled:vs(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const T=B=>{_.status==="error"?B.reject(_.error):_.data!==void 0&&B.resolve(_.data)},P=()=>{const B=Te(this,ni,_.promise=_b());T(B)},A=X(this,ni);switch(A.status){case"pending":t.queryHash===s.queryHash&&T(A);break;case"fulfilled":(_.status==="error"||_.data!==A.value)&&P();break;case"rejected":(_.status!=="error"||_.error!==A.reason)&&P();break}}return _}updateResult(){const t=X(this,mr),n=this.createResult(X(this,mt),this.options);if(Te(this,bl,X(this,mt).state),Te(this,du,this.options),X(this,bl).data!==void 0&&Te(this,fu,X(this,mt)),Dg(n,t))return;Te(this,mr,n);const s=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!X(this,mu).size)return!0;const o=new Set(i??X(this,mu));return this.options.throwOnError&&o.add("error"),Object.keys(X(this,mr)).some(l=>{const c=l;return X(this,mr)[c]!==t[c]&&o.has(c)})};at(this,_t,XI).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&at(this,_t,Eb).call(this)}},Tr=new WeakMap,mt=new WeakMap,nm=new WeakMap,mr=new WeakMap,bl=new WeakMap,du=new WeakMap,ni=new WeakMap,eo=new WeakMap,rm=new WeakMap,hu=new WeakMap,fu=new WeakMap,wl=new WeakMap,Nl=new WeakMap,to=new WeakMap,mu=new WeakMap,_t=new WeakSet,yh=function(t){at(this,_t,Mb).call(this);let n=X(this,mt).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(vr)),n},Ab=function(){at(this,_t,Ob).call(this);const t=jo(this.options.staleTime,X(this,mt));if(Fl||X(this,mr).isStale||!Nb(t))return;const s=qI(X(this,mr).dataUpdatedAt,t)+1;Te(this,wl,ul.setTimeout(()=>{X(this,mr).isStale||this.updateResult()},s))},kb=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(X(this,mt)):this.options.refetchInterval)??!1},Tb=function(t){at(this,_t,Db).call(this),Te(this,to,t),!(Fl||vs(this.options.enabled,X(this,mt))===!1||!Nb(X(this,to))||X(this,to)===0)&&Te(this,Nl,ul.setInterval(()=>{(this.options.refetchIntervalInBackground||iS.isFocused())&&at(this,_t,yh).call(this)},X(this,to)))},Eb=function(){at(this,_t,Ab).call(this),at(this,_t,Tb).call(this,at(this,_t,kb).call(this))},Ob=function(){X(this,wl)&&(ul.clearTimeout(X(this,wl)),Te(this,wl,void 0))},Db=function(){X(this,Nl)&&(ul.clearInterval(X(this,Nl)),Te(this,Nl,void 0))},Mb=function(){const t=X(this,Tr).getQueryCache().build(X(this,Tr),this.options);if(t===X(this,mt))return;const n=X(this,mt);Te(this,mt,t),Te(this,nm,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},XI=function(t){En.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(X(this,mr))}),X(this,Tr).getQueryCache().notify({query:X(this,mt),type:"observerResultsUpdated"})})},aO);function nW(e,t){return vs(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function B_(e,t){return nW(e,t)||e.state.data!==void 0&&Ib(e,t,t.refetchOnMount)}function Ib(e,t,n){if(vs(t.enabled,e)!==!1&&jo(t.staleTime,e)!=="static"){const s=typeof n=="function"?n(e):n;return s==="always"||s!==!1&&oS(e,t)}return!1}function V_(e,t,n,s){return(e!==t||vs(s.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&oS(e,n)}function oS(e,t){return vs(t.enabled,e)!==!1&&e.isStaleByTime(jo(t.staleTime,e))}function rW(e,t){return!Dg(e.getCurrentResult(),t)}function z_(e){return{onFetch:(t,n)=>{var d,h,f,m,g;const s=t.options,a=(f=(h=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((m=t.state.data)==null?void 0:m.pages)||[],o=((g=t.state.data)==null?void 0:g.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let p=!1;const v=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(t.signal.aborted?p=!0:t.signal.addEventListener("abort",()=>{p=!0}),t.signal)})},j=WI(t.options,t.fetchOptions),x=async(y,N,w)=>{if(p)return Promise.reject();if(N==null&&y.pages.length)return Promise.resolve(y);const S=(()=>{const P={client:t.client,queryKey:t.queryKey,pageParam:N,direction:w?"backward":"forward",meta:t.options.meta};return v(P),P})(),_=await j(S),{maxPages:k}=t.options,T=w?K9:G9;return{pages:T(y.pages,_,k),pageParams:T(y.pageParams,N,k)}};if(a&&i.length){const y=a==="backward",N=y?sW:q_,w={pages:i,pageParams:o},C=N(s,w);l=await x(w,C,y)}else{const y=e??i.length;do{const N=c===0?o[0]??s.initialPageParam:q_(s,l);if(c>0&&N==null)break;l=await x(l,N),c++}while(c<y)}return l};t.options.persister?t.fetchFn=()=>{var p,v;return(v=(p=t.options).persister)==null?void 0:v.call(p,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function q_(e,{pages:t,pageParams:n}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,n[s],n):void 0}function sW(e,{pages:t,pageParams:n}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,n[0],n):void 0}var sm,xa,pr,Sl,ya,Li,iO,aW=(iO=class extends YI{constructor(t){super();Fe(this,ya);Fe(this,sm);Fe(this,xa);Fe(this,pr);Fe(this,Sl);Te(this,sm,t.client),this.mutationId=t.mutationId,Te(this,pr,t.mutationCache),Te(this,xa,[]),this.state=t.state||JI(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){X(this,xa).includes(t)||(X(this,xa).push(t),this.clearGcTimeout(),X(this,pr).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Te(this,xa,X(this,xa).filter(n=>n!==t)),this.scheduleGc(),X(this,pr).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){X(this,xa).length||(this.state.status==="pending"?this.scheduleGc():X(this,pr).remove(this))}continue(){var t;return((t=X(this,Sl))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,c,u,d,h,f,m,g,p,v,j,x,y,N,w,C,S,_,k;const n=()=>{at(this,ya,Li).call(this,{type:"continue"})},s={client:X(this,sm),meta:this.options.meta,mutationKey:this.options.mutationKey};Te(this,Sl,KI({fn:()=>this.options.mutationFn?this.options.mutationFn(t,s):Promise.reject(new Error("No mutationFn found")),onFail:(T,P)=>{at(this,ya,Li).call(this,{type:"failed",failureCount:T,error:P})},onPause:()=>{at(this,ya,Li).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>X(this,pr).canRun(this)}));const a=this.state.status==="pending",i=!X(this,Sl).canStart();try{if(a)n();else{at(this,ya,Li).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(o=X(this,pr).config).onMutate)==null?void 0:l.call(o,t,this,s));const P=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,t,s));P!==this.state.context&&at(this,ya,Li).call(this,{type:"pending",context:P,variables:t,isPaused:i})}const T=await X(this,Sl).start();return await((h=(d=X(this,pr).config).onSuccess)==null?void 0:h.call(d,T,t,this.state.context,this,s)),await((m=(f=this.options).onSuccess)==null?void 0:m.call(f,T,t,this.state.context,s)),await((p=(g=X(this,pr).config).onSettled)==null?void 0:p.call(g,T,null,this.state.variables,this.state.context,this,s)),await((j=(v=this.options).onSettled)==null?void 0:j.call(v,T,null,t,this.state.context,s)),at(this,ya,Li).call(this,{type:"success",data:T}),T}catch(T){try{throw await((y=(x=X(this,pr).config).onError)==null?void 0:y.call(x,T,t,this.state.context,this,s)),await((w=(N=this.options).onError)==null?void 0:w.call(N,T,t,this.state.context,s)),await((S=(C=X(this,pr).config).onSettled)==null?void 0:S.call(C,void 0,T,this.state.variables,this.state.context,this,s)),await((k=(_=this.options).onSettled)==null?void 0:k.call(_,void 0,T,t,this.state.context,s)),T}finally{at(this,ya,Li).call(this,{type:"error",error:T})}}finally{X(this,pr).runNext(this)}}},sm=new WeakMap,xa=new WeakMap,pr=new WeakMap,Sl=new WeakMap,ya=new WeakSet,Li=function(t){const n=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),En.batch(()=>{X(this,xa).forEach(s=>{s.onMutationUpdate(t)}),X(this,pr).notify({mutation:this,type:"updated",action:t})})},iO);function JI(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ri,Vs,am,oO,iW=(oO=class extends yd{constructor(t={}){super();Fe(this,ri);Fe(this,Vs);Fe(this,am);this.config=t,Te(this,ri,new Set),Te(this,Vs,new Map),Te(this,am,0)}build(t,n,s){const a=new aW({client:t,mutationCache:this,mutationId:++Im(this,am)._,options:t.defaultMutationOptions(n),state:s});return this.add(a),a}add(t){X(this,ri).add(t);const n=rp(t);if(typeof n=="string"){const s=X(this,Vs).get(n);s?s.push(t):X(this,Vs).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(X(this,ri).delete(t)){const n=rp(t);if(typeof n=="string"){const s=X(this,Vs).get(n);if(s)if(s.length>1){const a=s.indexOf(t);a!==-1&&s.splice(a,1)}else s[0]===t&&X(this,Vs).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=rp(t);if(typeof n=="string"){const s=X(this,Vs).get(n),a=s==null?void 0:s.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var s;const n=rp(t);if(typeof n=="string"){const a=(s=X(this,Vs).get(n))==null?void 0:s.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){En.batch(()=>{X(this,ri).forEach(t=>{this.notify({type:"removed",mutation:t})}),X(this,ri).clear(),X(this,Vs).clear()})}getAll(){return Array.from(X(this,ri))}find(t){const n={exact:!0,...t};return this.getAll().find(s=>$_(n,s))}findAll(t={}){return this.getAll().filter(n=>$_(t,n))}notify(t){En.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return En.batch(()=>Promise.all(t.map(n=>n.continue().catch(vr))))}},ri=new WeakMap,Vs=new WeakMap,am=new WeakMap,oO);function rp(e){var t;return(t=e.options.scope)==null?void 0:t.id}var si,no,Er,ai,mi,Xp,$b,lO,oW=(lO=class extends yd{constructor(n,s){super();Fe(this,mi);Fe(this,si);Fe(this,no);Fe(this,Er);Fe(this,ai);Te(this,si,n),this.setOptions(s),this.bindMethods(),at(this,mi,Xp).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var a;const s=this.options;this.options=X(this,si).defaultMutationOptions(n),Dg(this.options,s)||X(this,si).getMutationCache().notify({type:"observerOptionsUpdated",mutation:X(this,Er),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&Ll(s.mutationKey)!==Ll(this.options.mutationKey)?this.reset():((a=X(this,Er))==null?void 0:a.state.status)==="pending"&&X(this,Er).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=X(this,Er))==null||n.removeObserver(this)}onMutationUpdate(n){at(this,mi,Xp).call(this),at(this,mi,$b).call(this,n)}getCurrentResult(){return X(this,no)}reset(){var n;(n=X(this,Er))==null||n.removeObserver(this),Te(this,Er,void 0),at(this,mi,Xp).call(this),at(this,mi,$b).call(this)}mutate(n,s){var a;return Te(this,ai,s),(a=X(this,Er))==null||a.removeObserver(this),Te(this,Er,X(this,si).getMutationCache().build(X(this,si),this.options)),X(this,Er).addObserver(this),X(this,Er).execute(n)}},si=new WeakMap,no=new WeakMap,Er=new WeakMap,ai=new WeakMap,mi=new WeakSet,Xp=function(){var s;const n=((s=X(this,Er))==null?void 0:s.state)??JI();Te(this,no,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},$b=function(n){En.batch(()=>{var s,a,i,o,l,c,u,d;if(X(this,ai)&&this.hasListeners()){const h=X(this,no).variables,f=X(this,no).context,m={client:X(this,si),meta:this.options.meta,mutationKey:this.options.mutationKey};(n==null?void 0:n.type)==="success"?((a=(s=X(this,ai)).onSuccess)==null||a.call(s,n.data,h,f,m),(o=(i=X(this,ai)).onSettled)==null||o.call(i,n.data,null,h,f,m)):(n==null?void 0:n.type)==="error"&&((c=(l=X(this,ai)).onError)==null||c.call(l,n.error,h,f,m),(d=(u=X(this,ai)).onSettled)==null||d.call(u,void 0,n.error,h,f,m))}this.listeners.forEach(h=>{h(X(this,no))})})},lO),ja,cO,lW=(cO=class extends yd{constructor(t={}){super();Fe(this,ja);this.config=t,Te(this,ja,new Map)}build(t,n,s){const a=n.queryKey,i=n.queryHash??sS(a,n);let o=this.get(i);return o||(o=new eW({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(n),state:s,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){X(this,ja).has(t.queryHash)||(X(this,ja).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=X(this,ja).get(t.queryHash);n&&(t.destroy(),n===t&&X(this,ja).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){En.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return X(this,ja).get(t)}getAll(){return[...X(this,ja).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(s=>I_(n,s))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(s=>I_(t,s)):n}notify(t){En.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){En.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){En.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},ja=new WeakMap,cO),dn,ro,so,pu,gu,ao,vu,xu,uO,cW=(uO=class{constructor(e={}){Fe(this,dn);Fe(this,ro);Fe(this,so);Fe(this,pu);Fe(this,gu);Fe(this,ao);Fe(this,vu);Fe(this,xu);Te(this,dn,e.queryCache||new lW),Te(this,ro,e.mutationCache||new iW),Te(this,so,e.defaultOptions||{}),Te(this,pu,new Map),Te(this,gu,new Map),Te(this,ao,0)}mount(){Im(this,ao)._++,X(this,ao)===1&&(Te(this,vu,iS.subscribe(async e=>{e&&(await this.resumePausedMutations(),X(this,dn).onFocus())})),Te(this,xu,Mg.subscribe(async e=>{e&&(await this.resumePausedMutations(),X(this,dn).onOnline())})))}unmount(){var e,t;Im(this,ao)._--,X(this,ao)===0&&((e=X(this,vu))==null||e.call(this),Te(this,vu,void 0),(t=X(this,xu))==null||t.call(this),Te(this,xu,void 0))}isFetching(e){return X(this,dn).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return X(this,ro).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=X(this,dn).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=X(this,dn).build(this,t),s=n.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(jo(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return X(this,dn).findAll(e).map(({queryKey:t,state:n})=>{const s=n.data;return[t,s]})}setQueryData(e,t,n){const s=this.defaultQueryOptions({queryKey:e}),a=X(this,dn).get(s.queryHash),i=a==null?void 0:a.state.data,o=U9(t,i);if(o!==void 0)return X(this,dn).build(this,s).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return En.batch(()=>X(this,dn).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=X(this,dn).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=X(this,dn);En.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=X(this,dn);return En.batch(()=>(n.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},s=En.batch(()=>X(this,dn).findAll(e).map(a=>a.cancel(n)));return Promise.all(s).then(vr).catch(vr)}invalidateQueries(e,t={}){return En.batch(()=>(X(this,dn).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},s=En.batch(()=>X(this,dn).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,n);return n.throwOnError||(i=i.catch(vr)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(vr)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=X(this,dn).build(this,t);return n.isStaleByTime(jo(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(vr).catch(vr)}fetchInfiniteQuery(e){return e.behavior=z_(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(vr).catch(vr)}ensureInfiniteQueryData(e){return e.behavior=z_(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Mg.isOnline()?X(this,ro).resumePausedMutations():Promise.resolve()}getQueryCache(){return X(this,dn)}getMutationCache(){return X(this,ro)}getDefaultOptions(){return X(this,so)}setDefaultOptions(e){Te(this,so,e)}setQueryDefaults(e,t){X(this,pu).set(Ll(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...X(this,pu).values()],n={};return t.forEach(s=>{ff(e,s.queryKey)&&Object.assign(n,s.defaultOptions)}),n}setMutationDefaults(e,t){X(this,gu).set(Ll(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...X(this,gu).values()],n={};return t.forEach(s=>{ff(e,s.mutationKey)&&Object.assign(n,s.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...X(this,so).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=sS(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===aS&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...X(this,so).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){X(this,dn).clear(),X(this,ro).clear()}},dn=new WeakMap,ro=new WeakMap,so=new WeakMap,pu=new WeakMap,gu=new WeakMap,ao=new WeakMap,vu=new WeakMap,xu=new WeakMap,uO),ZI=b.createContext(void 0),$t=e=>{const t=b.useContext(ZI);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},uW=({client:e,children:t})=>(b.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),r.jsx(ZI.Provider,{value:e,children:t})),e$=b.createContext(!1),dW=()=>b.useContext(e$);e$.Provider;function hW(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var fW=b.createContext(hW()),mW=()=>b.useContext(fW),pW=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},gW=e=>{b.useEffect(()=>{e.clearReset()},[e])},vW=({result:e,errorResetBoundary:t,throwOnError:n,query:s,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&(a&&e.data===void 0||HI(n,[e.error,s])),xW=e=>{if(e.suspense){const n=a=>a==="static"?a:Math.max(a??1e3,1e3),s=e.staleTime;e.staleTime=typeof s=="function"?(...a)=>n(s(...a)):n(s),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},yW=(e,t)=>e.isLoading&&e.isFetching&&!t,jW=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,U_=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function bW(e,t,n){var h,f,m,g,p;const s=dW(),a=mW(),i=$t(),o=i.defaultQueryOptions(e);(f=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,o),o._optimisticResults=s?"isRestoring":"optimistic",xW(o),pW(o,a),gW(a);const l=!i.getQueryCache().get(o.queryHash),[c]=b.useState(()=>new t(i,o)),u=c.getOptimisticResult(o),d=!s&&e.subscribed!==!1;if(b.useSyncExternalStore(b.useCallback(v=>{const j=d?c.subscribe(En.batchCalls(v)):vr;return c.updateResult(),j},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),b.useEffect(()=>{c.setOptions(o)},[o,c]),jW(o,u))throw U_(o,c,a);if(vW({result:u,errorResetBoundary:a,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;if((g=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||g.call(m,o,u),o.experimental_prefetchInRender&&!Fl&&yW(u,s)){const v=l?U_(o,c,a):(p=i.getQueryCache().get(o.queryHash))==null?void 0:p.promise;v==null||v.catch(vr).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?u:c.trackResult(u)}function Vr(e,t){return bW(e,tW)}function qt(e,t){const n=$t(),[s]=b.useState(()=>new oW(n,e));b.useEffect(()=>{s.setOptions(e)},[s,e]);const a=b.useSyncExternalStore(b.useCallback(o=>s.subscribe(En.batchCalls(o)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),i=b.useCallback((o,l)=>{s.mutate(o,l).catch(vr)},[s]);if(a.error&&HI(s.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mf(){return mf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},mf.apply(this,arguments)}var lo;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(lo||(lo={}));const W_="popstate";function wW(e){e===void 0&&(e={});function t(s,a){let{pathname:i,search:o,hash:l}=s.location;return Rb("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){return typeof a=="string"?a:Ig(a)}return SW(t,n,null,e)}function xn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function t$(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function NW(){return Math.random().toString(36).substr(2,8)}function H_(e,t){return{usr:e.state,key:e.key,idx:t}}function Rb(e,t,n,s){return n===void 0&&(n=null),mf({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?jd(t):t,{state:n,key:t&&t.key||s||NW()})}function Ig(e){let{pathname:t="/",search:n="",hash:s=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function jd(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function SW(e,t,n,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:i=!1}=s,o=a.history,l=lo.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(mf({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=lo.Pop;let v=d(),j=v==null?null:v-u;u=v,c&&c({action:l,location:p.location,delta:j})}function f(v,j){l=lo.Push;let x=Rb(p.location,v,j);u=d()+1;let y=H_(x,u),N=p.createHref(x);try{o.pushState(y,"",N)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;a.location.assign(N)}i&&c&&c({action:l,location:p.location,delta:1})}function m(v,j){l=lo.Replace;let x=Rb(p.location,v,j);u=d();let y=H_(x,u),N=p.createHref(x);o.replaceState(y,"",N),i&&c&&c({action:l,location:p.location,delta:0})}function g(v){let j=a.location.origin!=="null"?a.location.origin:a.location.href,x=typeof v=="string"?v:Ig(v);return x=x.replace(/ $/,"%20"),xn(j,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,j)}let p={get action(){return l},get location(){return e(a,o)},listen(v){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(W_,h),c=v,()=>{a.removeEventListener(W_,h),c=null}},createHref(v){return t(a,v)},createURL:g,encodeLocation(v){let j=g(v);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:f,replace:m,go(v){return o.go(v)}};return p}var G_;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(G_||(G_={}));function CW(e,t,n){return n===void 0&&(n="/"),_W(e,t,n,!1)}function _W(e,t,n,s){let a=typeof t=="string"?jd(t):t,i=lS(a.pathname||"/",n);if(i==null)return null;let o=n$(e);PW(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=FW(i);l=$W(o[c],u,s)}return l}function n$(e,t,n,s){t===void 0&&(t=[]),n===void 0&&(n=[]),s===void 0&&(s="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(xn(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let u=bo([s,c.relativePath]),d=n.concat(c);i.children&&i.children.length>0&&(xn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),n$(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:MW(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of r$(i.path))a(i,o,c)}),t}function r$(e){let t=e.split("/");if(t.length===0)return[];let[n,...s]=t,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(s.length===0)return a?[i,""]:[i];let o=r$(s.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function PW(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:IW(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const AW=/^:[\w-]+$/,kW=3,TW=2,EW=1,OW=10,DW=-2,K_=e=>e==="*";function MW(e,t){let n=e.split("/"),s=n.length;return n.some(K_)&&(s+=DW),t&&(s+=TW),n.filter(a=>!K_(a)).reduce((a,i)=>a+(AW.test(i)?kW:i===""?EW:OW),s)}function IW(e,t){return e.length===t.length&&e.slice(0,-1).every((s,a)=>s===t[a])?e[e.length-1]-t[t.length-1]:0}function $W(e,t,n){let{routesMeta:s}=e,a={},i="/",o=[];for(let l=0;l<s.length;++l){let c=s[l],u=l===s.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=Y_({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h&&u&&n&&!s[s.length-1].route.index&&(h=Y_({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(a,h.params),o.push({params:a,pathname:bo([i,h.pathname]),pathnameBase:zW(bo([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=bo([i,h.pathnameBase]))}return o}function Y_(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=RW(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:s.reduce((u,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let p=l[h]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const g=l[h];return m&&!g?u[f]=void 0:u[f]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function RW(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),t$(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function FW(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return t$(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function lS(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&s!=="/"?null:e.slice(n)||"/"}function LW(e,t){t===void 0&&(t="/");let{pathname:n,search:s="",hash:a=""}=typeof e=="string"?jd(e):e;return{pathname:n?n.startsWith("/")?n:BW(n,t):t,search:qW(s),hash:UW(a)}}function BW(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function N0(e,t,n,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function VW(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function cS(e,t){let n=VW(e);return t?n.map((s,a)=>a===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function uS(e,t,n,s){s===void 0&&(s=!1);let a;typeof e=="string"?a=jd(e):(a=mf({},e),xn(!a.pathname||!a.pathname.includes("?"),N0("?","pathname","search",a)),xn(!a.pathname||!a.pathname.includes("#"),N0("#","pathname","hash",a)),xn(!a.search||!a.search.includes("#"),N0("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=n;else{let h=t.length-1;if(!s&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;a.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=LW(a,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const bo=e=>e.join("/").replace(/\/\/+/g,"/"),zW=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),qW=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,UW=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function WW(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const s$=["post","put","patch","delete"];new Set(s$);const HW=["get",...s$];new Set(HW);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pf(){return pf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},pf.apply(this,arguments)}const dS=b.createContext(null),GW=b.createContext(null),Mo=b.createContext(null),Sx=b.createContext(null),Io=b.createContext({outlet:null,matches:[],isDataRoute:!1}),a$=b.createContext(null);function KW(e,t){let{relative:n}=t===void 0?{}:t;bd()||xn(!1);let{basename:s,navigator:a}=b.useContext(Mo),{hash:i,pathname:o,search:l}=o$(e,{relative:n}),c=o;return s!=="/"&&(c=o==="/"?s:bo([s,o])),a.createHref({pathname:c,search:l,hash:i})}function bd(){return b.useContext(Sx)!=null}function $o(){return bd()||xn(!1),b.useContext(Sx).location}function i$(e){b.useContext(Mo).static||b.useLayoutEffect(e)}function wd(){let{isDataRoute:e}=b.useContext(Io);return e?oH():YW()}function YW(){bd()||xn(!1);let e=b.useContext(dS),{basename:t,future:n,navigator:s}=b.useContext(Mo),{matches:a}=b.useContext(Io),{pathname:i}=$o(),o=JSON.stringify(cS(a,n.v7_relativeSplatPath)),l=b.useRef(!1);return i$(()=>{l.current=!0}),b.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){s.go(u);return}let h=uS(u,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:bo([t,h.pathname])),(d.replace?s.replace:s.push)(h,d.state,d)},[t,s,o,i,e])}function o$(e,t){let{relative:n}=t===void 0?{}:t,{future:s}=b.useContext(Mo),{matches:a}=b.useContext(Io),{pathname:i}=$o(),o=JSON.stringify(cS(a,s.v7_relativeSplatPath));return b.useMemo(()=>uS(e,JSON.parse(o),i,n==="path"),[e,o,i,n])}function QW(e,t){return XW(e,t)}function XW(e,t,n,s){bd()||xn(!1);let{navigator:a}=b.useContext(Mo),{matches:i}=b.useContext(Io),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=$o(),d;if(t){var h;let v=typeof t=="string"?jd(t):t;c==="/"||(h=v.pathname)!=null&&h.startsWith(c)||xn(!1),d=v}else d=u;let f=d.pathname||"/",m=f;if(c!=="/"){let v=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let g=CW(e,{pathname:m}),p=nH(g&&g.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:bo([c,a.encodeLocation?a.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:bo([c,a.encodeLocation?a.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,n,s);return t&&p?b.createElement(Sx.Provider,{value:{location:pf({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:lo.Pop}},p):p}function JW(){let e=iH(),t=WW(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},t),n?b.createElement("pre",{style:a},n):null,null)}const ZW=b.createElement(JW,null);class eH extends b.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?b.createElement(Io.Provider,{value:this.props.routeContext},b.createElement(a$.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function tH(e){let{routeContext:t,match:n,children:s}=e,a=b.useContext(dS);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(Io.Provider,{value:t},s)}function nH(e,t,n,s){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),s===void 0&&(s=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=s)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(a=n)==null?void 0:a.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||xn(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(n&&s&&s.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:m}=n,g=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||g){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let m,g=!1,p=null,v=null;n&&(m=l&&h.route.id?l[h.route.id]:void 0,p=h.route.errorElement||ZW,c&&(u<0&&f===0?(g=!0,v=null):u===f&&(g=!0,v=h.route.hydrateFallbackElement||null)));let j=t.concat(o.slice(0,f+1)),x=()=>{let y;return m?y=p:g?y=v:h.route.Component?y=b.createElement(h.route.Component,null):h.route.element?y=h.route.element:y=d,b.createElement(tH,{match:h,routeContext:{outlet:d,matches:j,isDataRoute:n!=null},children:y})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?b.createElement(eH,{location:n.location,revalidation:n.revalidation,component:p,error:m,children:x(),routeContext:{outlet:null,matches:j,isDataRoute:!0}}):x()},null)}var l$=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(l$||{}),$g=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}($g||{});function rH(e){let t=b.useContext(dS);return t||xn(!1),t}function sH(e){let t=b.useContext(GW);return t||xn(!1),t}function aH(e){let t=b.useContext(Io);return t||xn(!1),t}function c$(e){let t=aH(),n=t.matches[t.matches.length-1];return n.route.id||xn(!1),n.route.id}function iH(){var e;let t=b.useContext(a$),n=sH($g.UseRouteError),s=c$($g.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[s]}function oH(){let{router:e}=rH(l$.UseNavigateStable),t=c$($g.UseNavigateStable),n=b.useRef(!1);return i$(()=>{n.current=!0}),b.useCallback(function(a,i){i===void 0&&(i={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,pf({fromRouteId:t},i)))},[e,t])}function lH(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Fb(e){let{to:t,replace:n,state:s,relative:a}=e;bd()||xn(!1);let{future:i,static:o}=b.useContext(Mo),{matches:l}=b.useContext(Io),{pathname:c}=$o(),u=wd(),d=uS(t,cS(l,i.v7_relativeSplatPath),c,a==="path"),h=JSON.stringify(d);return b.useEffect(()=>u(JSON.parse(h),{replace:n,state:s,relative:a}),[u,h,a,n,s]),null}function un(e){xn(!1)}function cH(e){let{basename:t="/",children:n=null,location:s,navigationType:a=lo.Pop,navigator:i,static:o=!1,future:l}=e;bd()&&xn(!1);let c=t.replace(/^\/*/,"/"),u=b.useMemo(()=>({basename:c,navigator:i,static:o,future:pf({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof s=="string"&&(s=jd(s));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:g="default"}=s,p=b.useMemo(()=>{let v=lS(d,c);return v==null?null:{location:{pathname:v,search:h,hash:f,state:m,key:g},navigationType:a}},[c,d,h,f,m,g,a]);return p==null?null:b.createElement(Mo.Provider,{value:u},b.createElement(Sx.Provider,{children:n,value:p}))}function uH(e){let{children:t,location:n}=e;return QW(Lb(t),n)}new Promise(()=>{});function Lb(e,t){t===void 0&&(t=[]);let n=[];return b.Children.forEach(e,(s,a)=>{if(!b.isValidElement(s))return;let i=[...t,a];if(s.type===b.Fragment){n.push.apply(n,Lb(s.props.children,i));return}s.type!==un&&xn(!1),!s.props.index||!s.props.children||xn(!1);let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=Lb(s.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bb(){return Bb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Bb.apply(this,arguments)}function dH(e,t){if(e==null)return{};var n={},s=Object.keys(e),a,i;for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function hH(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function fH(e,t){return e.button===0&&(!t||t==="_self")&&!hH(e)}function Vb(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let s=e[n];return t.concat(Array.isArray(s)?s.map(a=>[n,a]):[[n,s]])},[]))}function mH(e,t){let n=Vb(e);return t&&t.forEach((s,a)=>{n.has(a)||t.getAll(a).forEach(i=>{n.append(a,i)})}),n}const pH=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],gH="6";try{window.__reactRouterVersion=gH}catch{}const vH="startTransition",Q_=GN[vH];function xH(e){let{basename:t,children:n,future:s,window:a}=e,i=b.useRef();i.current==null&&(i.current=wW({window:a,v5Compat:!0}));let o=i.current,[l,c]=b.useState({action:o.action,location:o.location}),{v7_startTransition:u}=s||{},d=b.useCallback(h=>{u&&Q_?Q_(()=>c(h)):c(h)},[c,u]);return b.useLayoutEffect(()=>o.listen(d),[o,d]),b.useEffect(()=>lH(s),[s]),b.createElement(cH,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:s})}const yH=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",jH=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Gs=b.forwardRef(function(t,n){let{onClick:s,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,f=dH(t,pH),{basename:m}=b.useContext(Mo),g,p=!1;if(typeof u=="string"&&jH.test(u)&&(g=u,yH))try{let y=new URL(window.location.href),N=u.startsWith("//")?new URL(y.protocol+u):new URL(u),w=lS(N.pathname,m);N.origin===y.origin&&w!=null?u=w+N.search+N.hash:p=!0}catch{}let v=KW(u,{relative:a}),j=bH(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:h});function x(y){s&&s(y),y.defaultPrevented||j(y)}return b.createElement("a",Bb({},f,{href:g||v,onClick:p||i?s:x,ref:n,target:c}))});var X_;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(X_||(X_={}));var J_;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(J_||(J_={}));function bH(e,t){let{target:n,replace:s,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=wd(),u=$o(),d=o$(e,{relative:o});return b.useCallback(h=>{if(fH(h,n)){h.preventDefault();let f=s!==void 0?s:Ig(u)===Ig(d);c(e,{replace:f,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,s,a,n,e,i,o,l])}function wH(e){let t=b.useRef(Vb(e)),n=b.useRef(!1),s=$o(),a=b.useMemo(()=>mH(s.search,n.current?null:t.current),[s.search]),i=wd(),o=b.useCallback((l,c)=>{const u=Vb(typeof l=="function"?l(a):l);n.current=!0,i("?"+u,c)},[i,a]);return[a,o]}const NH=fm("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),R=b.forwardRef(({className:e,variant:t,size:n,asChild:s=!1,...a},i)=>{const o=s?Az:"button";return r.jsx(o,{className:Ie(NH({variant:t,size:n,className:e})),ref:i,...a})});R.displayName="Button";const u$=b.createContext(void 0);function SH({children:e}){const[t,n]=b.useState(()=>{const a=localStorage.getItem("theme");return a||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});b.useEffect(()=>{localStorage.setItem("theme",t);const a=document.documentElement;t==="dark"?a.classList.add("dark"):a.classList.remove("dark")},[t]);const s=()=>{n(a=>a==="light"?"dark":"light")};return r.jsx(u$.Provider,{value:{theme:t,setTheme:n,toggleTheme:s},children:e})}function d$(){const e=b.useContext(u$);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e}function Z_(){const{theme:e,toggleTheme:t}=d$();return r.jsxs(R,{variant:"outline",size:"sm",onClick:t,className:"h-9 w-9 p-0",title:e==="light"?"Activer le mode sombre":"Activer le mode clair",children:[e==="light"?r.jsx(Mq,{className:"h-4 w-4"}):r.jsx(Fq,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:e==="light"?"Activer le mode sombre":"Activer le mode clair"})]})}var CH=b.createContext(void 0);function Cx(e){const t=b.useContext(CH);return e||t||"ltr"}var S0=0;function hS(){b.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??eP()),document.body.insertAdjacentElement("beforeend",e[1]??eP()),S0++,()=>{S0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),S0--}},[])}function eP(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var C0="focusScope.autoFocusOnMount",_0="focusScope.autoFocusOnUnmount",tP={bubbles:!1,cancelable:!0},_H="FocusScope",_x=b.forwardRef((e,t)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=b.useState(null),u=Sr(a),d=Sr(i),h=b.useRef(null),f=pt(t,p=>c(p)),m=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(s){let p=function(y){if(m.paused||!l)return;const N=y.target;l.contains(N)?h.current=N:Bi(h.current,{select:!0})},v=function(y){if(m.paused||!l)return;const N=y.relatedTarget;N!==null&&(l.contains(N)||Bi(h.current,{select:!0}))},j=function(y){if(document.activeElement===document.body)for(const w of y)w.removedNodes.length>0&&Bi(l)};document.addEventListener("focusin",p),document.addEventListener("focusout",v);const x=new MutationObserver(j);return l&&x.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",v),x.disconnect()}}},[s,l,m.paused]),b.useEffect(()=>{if(l){rP.add(m);const p=document.activeElement;if(!l.contains(p)){const j=new CustomEvent(C0,tP);l.addEventListener(C0,u),l.dispatchEvent(j),j.defaultPrevented||(PH(OH(h$(l)),{select:!0}),document.activeElement===p&&Bi(l))}return()=>{l.removeEventListener(C0,u),setTimeout(()=>{const j=new CustomEvent(_0,tP);l.addEventListener(_0,d),l.dispatchEvent(j),j.defaultPrevented||Bi(p??document.body,{select:!0}),l.removeEventListener(_0,d),rP.remove(m)},0)}}},[l,u,d,m]);const g=b.useCallback(p=>{if(!n&&!s||m.paused)return;const v=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,j=document.activeElement;if(v&&j){const x=p.currentTarget,[y,N]=AH(x);y&&N?!p.shiftKey&&j===N?(p.preventDefault(),n&&Bi(y,{select:!0})):p.shiftKey&&j===y&&(p.preventDefault(),n&&Bi(N,{select:!0})):j===x&&p.preventDefault()}},[n,s,m.paused]);return r.jsx(Le.div,{tabIndex:-1,...o,ref:f,onKeyDown:g})});_x.displayName=_H;function PH(e,{select:t=!1}={}){const n=document.activeElement;for(const s of e)if(Bi(s,{select:t}),document.activeElement!==n)return}function AH(e){const t=h$(e),n=nP(t,e),s=nP(t.reverse(),e);return[n,s]}function h$(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function nP(e,t){for(const n of e)if(!kH(n,{upTo:t}))return n}function kH(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function TH(e){return e instanceof HTMLInputElement&&"select"in e}function Bi(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&TH(e)&&t&&e.select()}}var rP=EH();function EH(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=sP(e,t),e.unshift(t)},remove(t){var n;e=sP(e,t),(n=e[0])==null||n.resume()}}}function sP(e,t){const n=[...e],s=n.indexOf(t);return s!==-1&&n.splice(s,1),n}function OH(e){return e.filter(t=>t.tagName!=="A")}var P0="rovingFocusGroup.onEntryFocus",DH={bubbles:!1,cancelable:!0},pm="RovingFocusGroup",[zb,f$,MH]=mx(pm),[IH,Px]=cs(pm,[MH]),[$H,RH]=IH(pm),m$=b.forwardRef((e,t)=>r.jsx(zb.Provider,{scope:e.__scopeRovingFocusGroup,children:r.jsx(zb.Slot,{scope:e.__scopeRovingFocusGroup,children:r.jsx(FH,{...e,ref:t})})}));m$.displayName=pm;var FH=b.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:s,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=e,f=b.useRef(null),m=pt(t,f),g=Cx(i),[p,v]=yi({prop:o,defaultProp:l??null,onChange:c,caller:pm}),[j,x]=b.useState(!1),y=Sr(u),N=f$(n),w=b.useRef(!1),[C,S]=b.useState(0);return b.useEffect(()=>{const _=f.current;if(_)return _.addEventListener(P0,y),()=>_.removeEventListener(P0,y)},[y]),r.jsx($H,{scope:n,orientation:s,dir:g,loop:a,currentTabStopId:p,onItemFocus:b.useCallback(_=>v(_),[v]),onItemShiftTab:b.useCallback(()=>x(!0),[]),onFocusableItemAdd:b.useCallback(()=>S(_=>_+1),[]),onFocusableItemRemove:b.useCallback(()=>S(_=>_-1),[]),children:r.jsx(Le.div,{tabIndex:j||C===0?-1:0,"data-orientation":s,...h,ref:m,style:{outline:"none",...e.style},onMouseDown:Ae(e.onMouseDown,()=>{w.current=!0}),onFocus:Ae(e.onFocus,_=>{const k=!w.current;if(_.target===_.currentTarget&&k&&!j){const T=new CustomEvent(P0,DH);if(_.currentTarget.dispatchEvent(T),!T.defaultPrevented){const P=N().filter(z=>z.focusable),A=P.find(z=>z.active),B=P.find(z=>z.id===p),H=[A,B,...P].filter(Boolean).map(z=>z.ref.current);v$(H,d)}}w.current=!1}),onBlur:Ae(e.onBlur,()=>x(!1))})})}),p$="RovingFocusGroupItem",g$=b.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:a=!1,tabStopId:i,children:o,...l}=e,c=Da(),u=i||c,d=RH(p$,n),h=d.currentTabStopId===u,f=f$(n),{onFocusableItemAdd:m,onFocusableItemRemove:g,currentTabStopId:p}=d;return b.useEffect(()=>{if(s)return m(),()=>g()},[s,m,g]),r.jsx(zb.ItemSlot,{scope:n,id:u,focusable:s,active:a,children:r.jsx(Le.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:Ae(e.onMouseDown,v=>{s?d.onItemFocus(u):v.preventDefault()}),onFocus:Ae(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:Ae(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){d.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const j=VH(v,d.orientation,d.dir);if(j!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let y=f().filter(N=>N.focusable).map(N=>N.ref.current);if(j==="last")y.reverse();else if(j==="prev"||j==="next"){j==="prev"&&y.reverse();const N=y.indexOf(v.currentTarget);y=d.loop?zH(y,N+1):y.slice(N+1)}setTimeout(()=>v$(y))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:p!=null}):o})})});g$.displayName=p$;var LH={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function BH(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function VH(e,t,n){const s=BH(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return LH[s]}function v$(e,t=!1){const n=document.activeElement;for(const s of e)if(s===n||(s.focus({preventScroll:t}),document.activeElement!==n))return}function zH(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var x$=m$,y$=g$,qH=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},mc=new WeakMap,sp=new WeakMap,ap={},A0=0,j$=function(e){return e&&(e.host||j$(e.parentNode))},UH=function(e,t){return t.map(function(n){if(e.contains(n))return n;var s=j$(n);return s&&e.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},WH=function(e,t,n,s){var a=UH(t,Array.isArray(e)?e:[e]);ap[n]||(ap[n]=new WeakMap);var i=ap[n],o=[],l=new Set,c=new Set(a),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};a.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(f){if(l.has(f))d(f);else try{var m=f.getAttribute(s),g=m!==null&&m!=="false",p=(mc.get(f)||0)+1,v=(i.get(f)||0)+1;mc.set(f,p),i.set(f,v),o.push(f),p===1&&g&&sp.set(f,!0),v===1&&f.setAttribute(n,"true"),g||f.setAttribute(s,"true")}catch(j){console.error("aria-hidden: cannot operate on ",f,j)}})};return d(t),l.clear(),A0++,function(){o.forEach(function(h){var f=mc.get(h)-1,m=i.get(h)-1;mc.set(h,f),i.set(h,m),f||(sp.has(h)||h.removeAttribute(s),sp.delete(h)),m||h.removeAttribute(n)}),A0--,A0||(mc=new WeakMap,mc=new WeakMap,sp=new WeakMap,ap={})}},fS=function(e,t,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),a=qH(e);return a?(s.push.apply(s,Array.from(a.querySelectorAll("[aria-live]"))),WH(s,a,n,"aria-hidden")):function(){return null}},wa=function(){return wa=Object.assign||function(t){for(var n,s=1,a=arguments.length;s<a;s++){n=arguments[s];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},wa.apply(this,arguments)};function b$(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]]);return n}function HH(e,t,n){if(n||arguments.length===2)for(var s=0,a=t.length,i;s<a;s++)(i||!(s in t))&&(i||(i=Array.prototype.slice.call(t,0,s)),i[s]=t[s]);return e.concat(i||Array.prototype.slice.call(t))}var Jp="right-scroll-bar-position",Zp="width-before-scroll-bar",GH="with-scroll-bars-hidden",KH="--removed-body-scroll-bar-size";function k0(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function YH(e,t){var n=b.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(s){var a=n.value;a!==s&&(n.value=s,n.callback(s,a))}}}})[0];return n.callback=t,n.facade}var QH=typeof window<"u"?b.useLayoutEffect:b.useEffect,aP=new WeakMap;function XH(e,t){var n=YH(null,function(s){return e.forEach(function(a){return k0(a,s)})});return QH(function(){var s=aP.get(n);if(s){var a=new Set(s),i=new Set(e),o=n.current;a.forEach(function(l){i.has(l)||k0(l,null)}),i.forEach(function(l){a.has(l)||k0(l,o)})}aP.set(n,e)},[e]),n}function JH(e){return e}function ZH(e,t){t===void 0&&(t=JH);var n=[],s=!1,a={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var o=t(i,s);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(s=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){s=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(i),o=n}var c=function(){var d=o;o=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),n}}}};return a}function eG(e){e===void 0&&(e={});var t=ZH(null);return t.options=wa({async:!0,ssr:!1},e),t}var w$=function(e){var t=e.sideCar,n=b$(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return b.createElement(s,wa({},n))};w$.isSideCarExport=!0;function tG(e,t){return e.useMedium(t),w$}var N$=eG(),T0=function(){},Ax=b.forwardRef(function(e,t){var n=b.useRef(null),s=b.useState({onScrollCapture:T0,onWheelCapture:T0,onTouchMoveCapture:T0}),a=s[0],i=s[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,h=e.shards,f=e.sideCar,m=e.noRelative,g=e.noIsolation,p=e.inert,v=e.allowPinchZoom,j=e.as,x=j===void 0?"div":j,y=e.gapMode,N=b$(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=f,C=XH([n,t]),S=wa(wa({},N),a);return b.createElement(b.Fragment,null,d&&b.createElement(w,{sideCar:N$,removeScrollBar:u,shards:h,noRelative:m,noIsolation:g,inert:p,setCallbacks:i,allowPinchZoom:!!v,lockRef:n,gapMode:y}),o?b.cloneElement(b.Children.only(l),wa(wa({},S),{ref:C})):b.createElement(x,wa({},S,{className:c,ref:C}),l))});Ax.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ax.classNames={fullWidth:Zp,zeroRight:Jp};var nG=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function rG(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=nG();return t&&e.setAttribute("nonce",t),e}function sG(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function aG(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var iG=function(){var e=0,t=null;return{add:function(n){e==0&&(t=rG())&&(sG(t,n),aG(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},oG=function(){var e=iG();return function(t,n){b.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},S$=function(){var e=oG(),t=function(n){var s=n.styles,a=n.dynamic;return e(s,a),null};return t},lG={left:0,top:0,right:0,gap:0},E0=function(e){return parseInt(e||"",10)||0},cG=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[E0(n),E0(s),E0(a)]},uG=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return lG;var t=cG(e),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-n+t[2]-t[0])}},dG=S$(),tu="data-scroll-locked",hG=function(e,t,n,s){var a=e.left,i=e.top,o=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(GH,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(l,"px ").concat(s,`;
  }
  body[`).concat(tu,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Jp,` {
    right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(Zp,` {
    margin-right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(Jp," .").concat(Jp,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(Zp," .").concat(Zp,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(tu,`] {
    `).concat(KH,": ").concat(l,`px;
  }
`)},iP=function(){var e=parseInt(document.body.getAttribute(tu)||"0",10);return isFinite(e)?e:0},fG=function(){b.useEffect(function(){return document.body.setAttribute(tu,(iP()+1).toString()),function(){var e=iP()-1;e<=0?document.body.removeAttribute(tu):document.body.setAttribute(tu,e.toString())}},[])},mG=function(e){var t=e.noRelative,n=e.noImportant,s=e.gapMode,a=s===void 0?"margin":s;fG();var i=b.useMemo(function(){return uG(a)},[a]);return b.createElement(dG,{styles:hG(i,!t,a,n?"":"!important")})},qb=!1;if(typeof window<"u")try{var ip=Object.defineProperty({},"passive",{get:function(){return qb=!0,!0}});window.addEventListener("test",ip,ip),window.removeEventListener("test",ip,ip)}catch{qb=!1}var pc=qb?{passive:!1}:!1,pG=function(e){return e.tagName==="TEXTAREA"},C$=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!pG(e)&&n[t]==="visible")},gG=function(e){return C$(e,"overflowY")},vG=function(e){return C$(e,"overflowX")},oP=function(e,t){var n=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var a=_$(e,s);if(a){var i=P$(e,s),o=i[1],l=i[2];if(o>l)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},xG=function(e){var t=e.scrollTop,n=e.scrollHeight,s=e.clientHeight;return[t,n,s]},yG=function(e){var t=e.scrollLeft,n=e.scrollWidth,s=e.clientWidth;return[t,n,s]},_$=function(e,t){return e==="v"?gG(t):vG(t)},P$=function(e,t){return e==="v"?xG(t):yG(t)},jG=function(e,t){return e==="h"&&t==="rtl"?-1:1},bG=function(e,t,n,s,a){var i=jG(e,window.getComputedStyle(t).direction),o=i*s,l=n.target,c=t.contains(l),u=!1,d=o>0,h=0,f=0;do{if(!l)break;var m=P$(e,l),g=m[0],p=m[1],v=m[2],j=p-v-i*g;(g||j)&&_$(e,l)&&(h+=j,f+=g);var x=l.parentNode;l=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&(Math.abs(h)<1||!a)||!d&&(Math.abs(f)<1||!a))&&(u=!0),u},op=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},lP=function(e){return[e.deltaX,e.deltaY]},cP=function(e){return e&&"current"in e?e.current:e},wG=function(e,t){return e[0]===t[0]&&e[1]===t[1]},NG=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},SG=0,gc=[];function CG(e){var t=b.useRef([]),n=b.useRef([0,0]),s=b.useRef(),a=b.useState(SG++)[0],i=b.useState(S$)[0],o=b.useRef(e);b.useEffect(function(){o.current=e},[e]),b.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var p=HH([e.lockRef.current],(e.shards||[]).map(cP),!0).filter(Boolean);return p.forEach(function(v){return v.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),p.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=b.useCallback(function(p,v){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!o.current.allowPinchZoom;var j=op(p),x=n.current,y="deltaX"in p?p.deltaX:x[0]-j[0],N="deltaY"in p?p.deltaY:x[1]-j[1],w,C=p.target,S=Math.abs(y)>Math.abs(N)?"h":"v";if("touches"in p&&S==="h"&&C.type==="range")return!1;var _=oP(S,C);if(!_)return!0;if(_?w=S:(w=S==="v"?"h":"v",_=oP(S,C)),!_)return!1;if(!s.current&&"changedTouches"in p&&(y||N)&&(s.current=w),!w)return!0;var k=s.current||w;return bG(k,v,p,k==="h"?y:N,!0)},[]),c=b.useCallback(function(p){var v=p;if(!(!gc.length||gc[gc.length-1]!==i)){var j="deltaY"in v?lP(v):op(v),x=t.current.filter(function(w){return w.name===v.type&&(w.target===v.target||v.target===w.shadowParent)&&wG(w.delta,j)})[0];if(x&&x.should){v.cancelable&&v.preventDefault();return}if(!x){var y=(o.current.shards||[]).map(cP).filter(Boolean).filter(function(w){return w.contains(v.target)}),N=y.length>0?l(v,y[0]):!o.current.noIsolation;N&&v.cancelable&&v.preventDefault()}}},[]),u=b.useCallback(function(p,v,j,x){var y={name:p,delta:v,target:j,should:x,shadowParent:_G(j)};t.current.push(y),setTimeout(function(){t.current=t.current.filter(function(N){return N!==y})},1)},[]),d=b.useCallback(function(p){n.current=op(p),s.current=void 0},[]),h=b.useCallback(function(p){u(p.type,lP(p),p.target,l(p,e.lockRef.current))},[]),f=b.useCallback(function(p){u(p.type,op(p),p.target,l(p,e.lockRef.current))},[]);b.useEffect(function(){return gc.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,pc),document.addEventListener("touchmove",c,pc),document.addEventListener("touchstart",d,pc),function(){gc=gc.filter(function(p){return p!==i}),document.removeEventListener("wheel",c,pc),document.removeEventListener("touchmove",c,pc),document.removeEventListener("touchstart",d,pc)}},[]);var m=e.removeScrollBar,g=e.inert;return b.createElement(b.Fragment,null,g?b.createElement(i,{styles:NG(a)}):null,m?b.createElement(mG,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function _G(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const PG=tG(N$,CG);var kx=b.forwardRef(function(e,t){return b.createElement(Ax,wa({},e,{ref:t,sideCar:PG}))});kx.classNames=Ax.classNames;var Ub=["Enter"," "],AG=["ArrowDown","PageUp","Home"],A$=["ArrowUp","PageDown","End"],kG=[...AG,...A$],TG={ltr:[...Ub,"ArrowRight"],rtl:[...Ub,"ArrowLeft"]},EG={ltr:["ArrowLeft"],rtl:["ArrowRight"]},gm="Menu",[gf,OG,DG]=mx(gm),[tc,k$]=cs(gm,[DG,xd,Px]),Tx=xd(),T$=Px(),[MG,nc]=tc(gm),[IG,vm]=tc(gm),E$=e=>{const{__scopeMenu:t,open:n=!1,children:s,dir:a,onOpenChange:i,modal:o=!0}=e,l=Tx(t),[c,u]=b.useState(null),d=b.useRef(!1),h=Sr(i),f=Cx(a);return b.useEffect(()=>{const m=()=>{d.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>d.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),r.jsx(MI,{...l,children:r.jsx(MG,{scope:t,open:n,onOpenChange:h,content:c,onContentChange:u,children:r.jsx(IG,{scope:t,onClose:b.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:f,modal:o,children:s})})})};E$.displayName=gm;var $G="MenuAnchor",mS=b.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e,a=Tx(n);return r.jsx(eS,{...a,...s,ref:t})});mS.displayName=$G;var pS="MenuPortal",[RG,O$]=tc(pS,{forceMount:void 0}),D$=e=>{const{__scopeMenu:t,forceMount:n,children:s,container:a}=e,i=nc(pS,t);return r.jsx(RG,{scope:t,forceMount:n,children:r.jsx(ks,{present:n||i.open,children:r.jsx(dm,{asChild:!0,container:a,children:s})})})};D$.displayName=pS;var Ss="MenuContent",[FG,gS]=tc(Ss),M$=b.forwardRef((e,t)=>{const n=O$(Ss,e.__scopeMenu),{forceMount:s=n.forceMount,...a}=e,i=nc(Ss,e.__scopeMenu),o=vm(Ss,e.__scopeMenu);return r.jsx(gf.Provider,{scope:e.__scopeMenu,children:r.jsx(ks,{present:s||i.open,children:r.jsx(gf.Slot,{scope:e.__scopeMenu,children:o.modal?r.jsx(LG,{...a,ref:t}):r.jsx(BG,{...a,ref:t})})})})}),LG=b.forwardRef((e,t)=>{const n=nc(Ss,e.__scopeMenu),s=b.useRef(null),a=pt(t,s);return b.useEffect(()=>{const i=s.current;if(i)return fS(i)},[]),r.jsx(vS,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Ae(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),BG=b.forwardRef((e,t)=>{const n=nc(Ss,e.__scopeMenu);return r.jsx(vS,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),VG=Il("MenuContent.ScrollLock"),vS=b.forwardRef((e,t)=>{const{__scopeMenu:n,loop:s=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:m,disableOutsideScroll:g,...p}=e,v=nc(Ss,n),j=vm(Ss,n),x=Tx(n),y=T$(n),N=OG(n),[w,C]=b.useState(null),S=b.useRef(null),_=pt(t,S,v.onContentChange),k=b.useRef(0),T=b.useRef(""),P=b.useRef(0),A=b.useRef(null),B=b.useRef("right"),L=b.useRef(0),H=g?kx:b.Fragment,z=g?{as:VG,allowPinchZoom:!0}:void 0,$=E=>{var ue,J;const q=T.current+E,Y=N().filter(ee=>!ee.disabled),re=document.activeElement,oe=(ue=Y.find(ee=>ee.ref.current===re))==null?void 0:ue.textValue,ae=Y.map(ee=>ee.textValue),me=ZG(ae,q,oe),we=(J=Y.find(ee=>ee.textValue===me))==null?void 0:J.ref.current;(function ee(G){T.current=G,window.clearTimeout(k.current),G!==""&&(k.current=window.setTimeout(()=>ee(""),1e3))})(q),we&&setTimeout(()=>we.focus())};b.useEffect(()=>()=>window.clearTimeout(k.current),[]),hS();const I=b.useCallback(E=>{var Y,re;return B.current===((Y=A.current)==null?void 0:Y.side)&&tK(E,(re=A.current)==null?void 0:re.area)},[]);return r.jsx(FG,{scope:n,searchRef:T,onItemEnter:b.useCallback(E=>{I(E)&&E.preventDefault()},[I]),onItemLeave:b.useCallback(E=>{var q;I(E)||((q=S.current)==null||q.focus(),C(null))},[I]),onTriggerLeave:b.useCallback(E=>{I(E)&&E.preventDefault()},[I]),pointerGraceTimerRef:P,onPointerGraceIntentChange:b.useCallback(E=>{A.current=E},[]),children:r.jsx(H,{...z,children:r.jsx(_x,{asChild:!0,trapped:a,onMountAutoFocus:Ae(i,E=>{var q;E.preventDefault(),(q=S.current)==null||q.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:r.jsx(hd,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:m,children:r.jsx(x$,{asChild:!0,...y,dir:j.dir,orientation:"vertical",loop:s,currentTabStopId:w,onCurrentTabStopIdChange:C,onEntryFocus:Ae(c,E=>{j.isUsingKeyboardRef.current||E.preventDefault()}),preventScrollOnEntryFocus:!0,children:r.jsx(tS,{role:"menu","aria-orientation":"vertical","data-state":Q$(v.open),"data-radix-menu-content":"",dir:j.dir,...x,...p,ref:_,style:{outline:"none",...p.style},onKeyDown:Ae(p.onKeyDown,E=>{const Y=E.target.closest("[data-radix-menu-content]")===E.currentTarget,re=E.ctrlKey||E.altKey||E.metaKey,oe=E.key.length===1;Y&&(E.key==="Tab"&&E.preventDefault(),!re&&oe&&$(E.key));const ae=S.current;if(E.target!==ae||!kG.includes(E.key))return;E.preventDefault();const we=N().filter(ue=>!ue.disabled).map(ue=>ue.ref.current);A$.includes(E.key)&&we.reverse(),XG(we)}),onBlur:Ae(e.onBlur,E=>{E.currentTarget.contains(E.target)||(window.clearTimeout(k.current),T.current="")}),onPointerMove:Ae(e.onPointerMove,vf(E=>{const q=E.target,Y=L.current!==E.clientX;if(E.currentTarget.contains(q)&&Y){const re=E.clientX>L.current?"right":"left";B.current=re,L.current=E.clientX}}))})})})})})})});M$.displayName=Ss;var zG="MenuGroup",xS=b.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return r.jsx(Le.div,{role:"group",...s,ref:t})});xS.displayName=zG;var qG="MenuLabel",I$=b.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return r.jsx(Le.div,{...s,ref:t})});I$.displayName=qG;var Rg="MenuItem",uP="menu.itemSelect",Ex=b.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:s,...a}=e,i=b.useRef(null),o=vm(Rg,e.__scopeMenu),l=gS(Rg,e.__scopeMenu),c=pt(t,i),u=b.useRef(!1),d=()=>{const h=i.current;if(!n&&h){const f=new CustomEvent(uP,{bubbles:!0,cancelable:!0});h.addEventListener(uP,m=>s==null?void 0:s(m),{once:!0}),F1(h,f),f.defaultPrevented?u.current=!1:o.onClose()}};return r.jsx($$,{...a,ref:c,disabled:n,onClick:Ae(e.onClick,d),onPointerDown:h=>{var f;(f=e.onPointerDown)==null||f.call(e,h),u.current=!0},onPointerUp:Ae(e.onPointerUp,h=>{var f;u.current||(f=h.currentTarget)==null||f.click()}),onKeyDown:Ae(e.onKeyDown,h=>{const f=l.searchRef.current!=="";n||f&&h.key===" "||Ub.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});Ex.displayName=Rg;var $$=b.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:s=!1,textValue:a,...i}=e,o=gS(Rg,n),l=T$(n),c=b.useRef(null),u=pt(t,c),[d,h]=b.useState(!1),[f,m]=b.useState("");return b.useEffect(()=>{const g=c.current;g&&m((g.textContent??"").trim())},[i.children]),r.jsx(gf.ItemSlot,{scope:n,disabled:s,textValue:a??f,children:r.jsx(y$,{asChild:!0,...l,focusable:!s,children:r.jsx(Le.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...i,ref:u,onPointerMove:Ae(e.onPointerMove,vf(g=>{s?o.onItemLeave(g):(o.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ae(e.onPointerLeave,vf(g=>o.onItemLeave(g))),onFocus:Ae(e.onFocus,()=>h(!0)),onBlur:Ae(e.onBlur,()=>h(!1))})})})}),UG="MenuCheckboxItem",R$=b.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:s,...a}=e;return r.jsx(z$,{scope:e.__scopeMenu,checked:n,children:r.jsx(Ex,{role:"menuitemcheckbox","aria-checked":Fg(n)?"mixed":n,...a,ref:t,"data-state":jS(n),onSelect:Ae(a.onSelect,()=>s==null?void 0:s(Fg(n)?!0:!n),{checkForDefaultPrevented:!1})})})});R$.displayName=UG;var F$="MenuRadioGroup",[WG,HG]=tc(F$,{value:void 0,onValueChange:()=>{}}),L$=b.forwardRef((e,t)=>{const{value:n,onValueChange:s,...a}=e,i=Sr(s);return r.jsx(WG,{scope:e.__scopeMenu,value:n,onValueChange:i,children:r.jsx(xS,{...a,ref:t})})});L$.displayName=F$;var B$="MenuRadioItem",V$=b.forwardRef((e,t)=>{const{value:n,...s}=e,a=HG(B$,e.__scopeMenu),i=n===a.value;return r.jsx(z$,{scope:e.__scopeMenu,checked:i,children:r.jsx(Ex,{role:"menuitemradio","aria-checked":i,...s,ref:t,"data-state":jS(i),onSelect:Ae(s.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,n)},{checkForDefaultPrevented:!1})})})});V$.displayName=B$;var yS="MenuItemIndicator",[z$,GG]=tc(yS,{checked:!1}),q$=b.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:s,...a}=e,i=GG(yS,n);return r.jsx(ks,{present:s||Fg(i.checked)||i.checked===!0,children:r.jsx(Le.span,{...a,ref:t,"data-state":jS(i.checked)})})});q$.displayName=yS;var KG="MenuSeparator",U$=b.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return r.jsx(Le.div,{role:"separator","aria-orientation":"horizontal",...s,ref:t})});U$.displayName=KG;var YG="MenuArrow",W$=b.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e,a=Tx(n);return r.jsx(nS,{...a,...s,ref:t})});W$.displayName=YG;var QG="MenuSub",[eke,H$]=tc(QG),jh="MenuSubTrigger",G$=b.forwardRef((e,t)=>{const n=nc(jh,e.__scopeMenu),s=vm(jh,e.__scopeMenu),a=H$(jh,e.__scopeMenu),i=gS(jh,e.__scopeMenu),o=b.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,u={__scopeMenu:e.__scopeMenu},d=b.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return b.useEffect(()=>d,[d]),b.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),r.jsx(mS,{asChild:!0,...u,children:r.jsx($$,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":Q$(n.open),...e,ref:fx(t,a.onTriggerChange),onClick:h=>{var f;(f=e.onClick)==null||f.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Ae(e.onPointerMove,vf(h=>{i.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:Ae(e.onPointerLeave,vf(h=>{var m,g;d();const f=(m=n.content)==null?void 0:m.getBoundingClientRect();if(f){const p=(g=n.content)==null?void 0:g.dataset.side,v=p==="right",j=v?-5:5,x=f[v?"left":"right"],y=f[v?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+j,y:h.clientY},{x,y:f.top},{x:y,y:f.top},{x:y,y:f.bottom},{x,y:f.bottom}],side:p}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Ae(e.onKeyDown,h=>{var m;const f=i.searchRef.current!=="";e.disabled||f&&h.key===" "||TG[s.dir].includes(h.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),h.preventDefault())})})})});G$.displayName=jh;var K$="MenuSubContent",Y$=b.forwardRef((e,t)=>{const n=O$(Ss,e.__scopeMenu),{forceMount:s=n.forceMount,...a}=e,i=nc(Ss,e.__scopeMenu),o=vm(Ss,e.__scopeMenu),l=H$(K$,e.__scopeMenu),c=b.useRef(null),u=pt(t,c);return r.jsx(gf.Provider,{scope:e.__scopeMenu,children:r.jsx(ks,{present:s||i.open,children:r.jsx(gf.Slot,{scope:e.__scopeMenu,children:r.jsx(vS,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:Ae(e.onFocusOutside,d=>{d.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Ae(e.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:Ae(e.onKeyDown,d=>{var m;const h=d.currentTarget.contains(d.target),f=EG[o.dir].includes(d.key);h&&f&&(i.onOpenChange(!1),(m=l.trigger)==null||m.focus(),d.preventDefault())})})})})})});Y$.displayName=K$;function Q$(e){return e?"open":"closed"}function Fg(e){return e==="indeterminate"}function jS(e){return Fg(e)?"indeterminate":e?"checked":"unchecked"}function XG(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function JG(e,t){return e.map((n,s)=>e[(t+s)%e.length])}function ZG(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=JG(e,Math.max(i,0));a.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function eK(e,t){const{x:n,y:s}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],u=l.x,d=l.y,h=c.x,f=c.y;d>s!=f>s&&n<(h-u)*(s-d)/(f-d)+u&&(a=!a)}return a}function tK(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return eK(n,t)}function vf(e){return t=>t.pointerType==="mouse"?e(t):void 0}var nK=E$,rK=mS,sK=D$,aK=M$,iK=xS,oK=I$,lK=Ex,cK=R$,uK=L$,dK=V$,hK=q$,fK=U$,mK=W$,pK=G$,gK=Y$,Ox="DropdownMenu",[vK,tke]=cs(Ox,[k$]),Pr=k$(),[xK,X$]=vK(Ox),J$=e=>{const{__scopeDropdownMenu:t,children:n,dir:s,open:a,defaultOpen:i,onOpenChange:o,modal:l=!0}=e,c=Pr(t),u=b.useRef(null),[d,h]=yi({prop:a,defaultProp:i??!1,onChange:o,caller:Ox});return r.jsx(xK,{scope:t,triggerId:Da(),triggerRef:u,contentId:Da(),open:d,onOpenChange:h,onOpenToggle:b.useCallback(()=>h(f=>!f),[h]),modal:l,children:r.jsx(nK,{...c,open:d,onOpenChange:h,dir:s,modal:l,children:n})})};J$.displayName=Ox;var Z$="DropdownMenuTrigger",e4=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:s=!1,...a}=e,i=X$(Z$,n),o=Pr(n);return r.jsx(rK,{asChild:!0,...o,children:r.jsx(Le.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...a,ref:fx(t,i.triggerRef),onPointerDown:Ae(e.onPointerDown,l=>{!s&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:Ae(e.onKeyDown,l=>{s||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});e4.displayName=Z$;var yK="DropdownMenuPortal",t4=e=>{const{__scopeDropdownMenu:t,...n}=e,s=Pr(t);return r.jsx(sK,{...s,...n})};t4.displayName=yK;var n4="DropdownMenuContent",r4=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=X$(n4,n),i=Pr(n),o=b.useRef(!1);return r.jsx(aK,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...s,ref:t,onCloseAutoFocus:Ae(e.onCloseAutoFocus,l=>{var c;o.current||(c=a.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:Ae(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!a.modal||d)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});r4.displayName=n4;var jK="DropdownMenuGroup",bK=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Pr(n);return r.jsx(iK,{...a,...s,ref:t})});bK.displayName=jK;var wK="DropdownMenuLabel",s4=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Pr(n);return r.jsx(oK,{...a,...s,ref:t})});s4.displayName=wK;var NK="DropdownMenuItem",a4=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Pr(n);return r.jsx(lK,{...a,...s,ref:t})});a4.displayName=NK;var SK="DropdownMenuCheckboxItem",i4=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Pr(n);return r.jsx(cK,{...a,...s,ref:t})});i4.displayName=SK;var CK="DropdownMenuRadioGroup",_K=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Pr(n);return r.jsx(uK,{...a,...s,ref:t})});_K.displayName=CK;var PK="DropdownMenuRadioItem",o4=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Pr(n);return r.jsx(dK,{...a,...s,ref:t})});o4.displayName=PK;var AK="DropdownMenuItemIndicator",l4=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Pr(n);return r.jsx(hK,{...a,...s,ref:t})});l4.displayName=AK;var kK="DropdownMenuSeparator",c4=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Pr(n);return r.jsx(fK,{...a,...s,ref:t})});c4.displayName=kK;var TK="DropdownMenuArrow",EK=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Pr(n);return r.jsx(mK,{...a,...s,ref:t})});EK.displayName=TK;var OK="DropdownMenuSubTrigger",u4=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Pr(n);return r.jsx(pK,{...a,...s,ref:t})});u4.displayName=OK;var DK="DropdownMenuSubContent",d4=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,a=Pr(n);return r.jsx(gK,{...a,...s,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});d4.displayName=DK;var MK=J$,IK=e4,$K=t4,h4=r4,f4=s4,m4=a4,p4=i4,g4=o4,v4=l4,x4=c4,y4=u4,j4=d4;const RK=MK,FK=IK,LK=b.forwardRef(({className:e,inset:t,children:n,...s},a)=>r.jsxs(y4,{ref:a,className:Ie("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...s,children:[n,r.jsx(Cq,{className:"ml-auto h-4 w-4"})]}));LK.displayName=y4.displayName;const BK=b.forwardRef(({className:e,...t},n)=>r.jsx(j4,{ref:n,className:Ie("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));BK.displayName=j4.displayName;const b4=b.forwardRef(({className:e,sideOffset:t=4,...n},s)=>r.jsx($K,{children:r.jsx(h4,{ref:s,sideOffset:t,className:Ie("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));b4.displayName=h4.displayName;const eg=b.forwardRef(({className:e,inset:t,...n},s)=>r.jsx(m4,{ref:s,className:Ie("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));eg.displayName=m4.displayName;const VK=b.forwardRef(({className:e,children:t,checked:n,...s},a)=>r.jsxs(p4,{ref:a,className:Ie("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...s,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(v4,{children:r.jsx(z1,{className:"h-4 w-4"})})}),t]}));VK.displayName=p4.displayName;const zK=b.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(g4,{ref:s,className:Ie("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(v4,{children:r.jsx(Pq,{className:"h-2 w-2 fill-current"})})}),t]}));zK.displayName=g4.displayName;const w4=b.forwardRef(({className:e,inset:t,...n},s)=>r.jsx(f4,{ref:s,className:Ie("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));w4.displayName=f4.displayName;const Wb=b.forwardRef(({className:e,...t},n)=>r.jsx(x4,{ref:n,className:Ie("-mx-1 my-1 h-px bg-muted",e),...t}));Wb.displayName=x4.displayName;var N4={exports:{}},S4={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ou=b;function qK(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var UK=typeof Object.is=="function"?Object.is:qK,WK=Ou.useState,HK=Ou.useEffect,GK=Ou.useLayoutEffect,KK=Ou.useDebugValue;function YK(e,t){var n=t(),s=WK({inst:{value:n,getSnapshot:t}}),a=s[0].inst,i=s[1];return GK(function(){a.value=n,a.getSnapshot=t,O0(a)&&i({inst:a})},[e,n,t]),HK(function(){return O0(a)&&i({inst:a}),e(function(){O0(a)&&i({inst:a})})},[e]),KK(n),n}function O0(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!UK(e,n)}catch{return!0}}function QK(e,t){return t()}var XK=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?QK:YK;S4.useSyncExternalStore=Ou.useSyncExternalStore!==void 0?Ou.useSyncExternalStore:XK;N4.exports=S4;var JK=N4.exports;function ZK(){return JK.useSyncExternalStore(eY,()=>!0,()=>!1)}function eY(){return()=>{}}var bS="Avatar",[tY,nke]=cs(bS),[nY,C4]=tY(bS),_4=b.forwardRef((e,t)=>{const{__scopeAvatar:n,...s}=e,[a,i]=b.useState("idle");return r.jsx(nY,{scope:n,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:r.jsx(Le.span,{...s,ref:t})})});_4.displayName=bS;var P4="AvatarImage",A4=b.forwardRef((e,t)=>{const{__scopeAvatar:n,src:s,onLoadingStatusChange:a=()=>{},...i}=e,o=C4(P4,n),l=rY(s,i),c=Sr(u=>{a(u),o.onImageLoadingStatusChange(u)});return Sn(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?r.jsx(Le.img,{...i,ref:t,src:s}):null});A4.displayName=P4;var k4="AvatarFallback",T4=b.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:s,...a}=e,i=C4(k4,n),[o,l]=b.useState(s===void 0);return b.useEffect(()=>{if(s!==void 0){const c=window.setTimeout(()=>l(!0),s);return()=>window.clearTimeout(c)}},[s]),o&&i.imageLoadingStatus!=="loaded"?r.jsx(Le.span,{...a,ref:t}):null});T4.displayName=k4;function dP(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function rY(e,{referrerPolicy:t,crossOrigin:n}){const s=ZK(),a=b.useRef(null),i=s?(a.current||(a.current=new window.Image),a.current):null,[o,l]=b.useState(()=>dP(i,e));return Sn(()=>{l(dP(i,e))},[i,e]),Sn(()=>{const c=h=>()=>{l(h)};if(!i)return;const u=c("loaded"),d=c("error");return i.addEventListener("load",u),i.addEventListener("error",d),t&&(i.referrerPolicy=t),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",u),i.removeEventListener("error",d)}},[i,n,t]),o}var E4=_4,O4=A4,D4=T4;const Hn=b.forwardRef(({className:e,...t},n)=>r.jsx(E4,{ref:n,className:Ie("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));Hn.displayName=E4.displayName;const Du=b.forwardRef(({className:e,...t},n)=>r.jsx(O4,{ref:n,className:Ie("aspect-square h-full w-full",e),...t}));Du.displayName=O4.displayName;const Gn=b.forwardRef(({className:e,...t},n)=>r.jsx(D4,{ref:n,className:Ie("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));Gn.displayName=D4.displayName;const sY="modulepreload",aY=function(e){return"/"+e},hP={},xm=function(t,n,s){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(n.map(c=>{if(c=aY(c),c in hP)return;hP[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":sY,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},iY=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>xm(async()=>{const{default:s}=await Promise.resolve().then(()=>Nd);return{default:s}},void 0).then(({default:s})=>s(...n)):t=fetch,(...n)=>t(...n)};class wS extends Error{constructor(t,n="FunctionsError",s){super(t),this.name=n,this.context=s}}class oY extends wS{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class fP extends wS{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class mP extends wS{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Hb;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Hb||(Hb={}));var lY=function(e,t,n,s){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((s=s.apply(e,t||[])).next())})};class cY{constructor(t,{headers:n={},customFetch:s,region:a=Hb.Any}={}){this.url=t,this.headers=n,this.region=a,this.fetch=iY(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var s;return lY(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:o}=n;let l={},{region:c}=n;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const h=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:d}).catch(p=>{throw new oY(p)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new fP(h);if(!h.ok)throw new mP(h);let m=((s=h.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),g;return m==="application/json"?g=yield h.json():m==="application/octet-stream"?g=yield h.blob():m==="text/event-stream"?g=h:m==="multipart/form-data"?g=yield h.formData():g=yield h.text(),{data:g,error:null,response:h}}catch(a){return{data:null,error:a,response:a instanceof mP||a instanceof fP?a.context:void 0}}})}}var Ir={},NS={},Dx={},ym={},Mx={},Ix={},uY=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Mu=uY();const dY=Mu.fetch,M4=Mu.fetch.bind(Mu),I4=Mu.Headers,hY=Mu.Request,fY=Mu.Response,Nd=Object.freeze(Object.defineProperty({__proto__:null,Headers:I4,Request:hY,Response:fY,default:M4,fetch:dY},Symbol.toStringTag,{value:"Module"})),mY=Y8(Nd);var $x={};Object.defineProperty($x,"__esModule",{value:!0});let pY=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};$x.default=pY;var $4=cr&&cr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ix,"__esModule",{value:!0});const gY=$4(mY),vY=$4($x);let xY=class{constructor(t){var n,s;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(n=t.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=t.signal,this.isMaybeSingle=(s=t.isMaybeSingle)!==null&&s!==void 0?s:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=gY.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=new Headers(this.headers),this.headers.set(t,n),this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let a=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c,u;let d=null,h=null,f=null,m=i.status,g=i.statusText;if(i.ok){if(this.method!=="HEAD"){const x=await i.text();x===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=x:h=JSON.parse(x))}const v=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),j=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");v&&j&&j.length>1&&(f=parseInt(j[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,m=406,g="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const v=await i.text();try{d=JSON.parse(v),Array.isArray(d)&&i.status===404&&(h=[],d=null,m=200,g="OK")}catch{i.status===404&&v===""?(m=204,g="No Content"):d={message:v}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,m=200,g="OK"),d&&this.shouldThrowOnError)throw new vY.default(d)}return{error:d,data:h,count:f,status:m,statusText:g}});return this.shouldThrowOnError||(a=a.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,n)}returns(){return this}overrideTypes(){return this}};Ix.default=xY;var yY=cr&&cr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Mx,"__esModule",{value:!0});const jY=yY(Ix);let bY=class extends jY.default{select(t){let n=!1;const s=(t??"*").split("").map(a=>/\s/.test(a)&&!n?"":(a==='"'&&(n=!n),a)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:n=!0,nullsFirst:s,foreignTable:a,referencedTable:i=a}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:s=n}={}){const a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,n,{foreignTable:s,referencedTable:a=s}={}){const i=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:n=!1,settings:s=!1,buffers:a=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,n?"verbose":null,s?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Mx.default=bY;var wY=cr&&cr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ym,"__esModule",{value:!0});const NY=wY(Mx);let SY=class extends NY.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const s=Array.from(new Set(n)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${s})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:s,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const o=s===void 0?"":`(${s})`;return this.url.searchParams.append(t,`${i}fts${o}.${n}`),this}match(t){return Object.entries(t).forEach(([n,s])=>{this.url.searchParams.append(n,`eq.${s}`)}),this}not(t,n,s){return this.url.searchParams.append(t,`not.${n}.${s}`),this}or(t,{foreignTable:n,referencedTable:s=n}={}){const a=s?`${s}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,n,s){return this.url.searchParams.append(t,`${n}.${s}`),this}};ym.default=SY;var CY=cr&&cr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Dx,"__esModule",{value:!0});const eh=CY(ym);let _Y=class{constructor(t,{headers:n={},schema:s,fetch:a}){this.url=t,this.headers=new Headers(n),this.schema=s,this.fetch=a}select(t,{head:n=!1,count:s}={}){const a=n?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),s&&this.headers.append("Prefer",`count=${s}`),new eh.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:n,defaultToNull:s=!0}={}){var a;const i="POST";if(n&&this.headers.append("Prefer",`count=${n}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new eh.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(t,{onConflict:n,ignoreDuplicates:s=!1,count:a,defaultToNull:i=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),a&&this.headers.append("Prefer",`count=${a}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new eh.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:n}={}){var s;const a="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new eh.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:t}={}){var n;const s="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new eh.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};Dx.default=_Y;var R4=cr&&cr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(NS,"__esModule",{value:!0});const PY=R4(Dx),AY=R4(ym);let kY=class F4{constructor(t,{headers:n={},schema:s,fetch:a}={}){this.url=t,this.headers=new Headers(n),this.schemaName=s,this.fetch=a}from(t){const n=new URL(`${this.url}/${t}`);return new PY.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new F4(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:s=!1,get:a=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;s||a?(l=s?"HEAD":"GET",Object.entries(n).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{c.searchParams.append(h,f)})):(l="POST",u=n);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new AY.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};NS.default=kY;var Sd=cr&&cr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ir,"__esModule",{value:!0});Ir.PostgrestError=Ir.PostgrestBuilder=Ir.PostgrestTransformBuilder=Ir.PostgrestFilterBuilder=Ir.PostgrestQueryBuilder=Ir.PostgrestClient=void 0;const L4=Sd(NS);Ir.PostgrestClient=L4.default;const B4=Sd(Dx);Ir.PostgrestQueryBuilder=B4.default;const V4=Sd(ym);Ir.PostgrestFilterBuilder=V4.default;const z4=Sd(Mx);Ir.PostgrestTransformBuilder=z4.default;const q4=Sd(Ix);Ir.PostgrestBuilder=q4.default;const U4=Sd($x);Ir.PostgrestError=U4.default;var TY=Ir.default={PostgrestClient:L4.default,PostgrestQueryBuilder:B4.default,PostgrestFilterBuilder:V4.default,PostgrestTransformBuilder:z4.default,PostgrestBuilder:q4.default,PostgrestError:U4.default};const{PostgrestClient:EY,PostgrestQueryBuilder:lke,PostgrestFilterBuilder:cke,PostgrestTransformBuilder:uke,PostgrestBuilder:dke,PostgrestError:hke}=TY;class OY{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const s=n.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const s=this.getWebSocketConstructor();return new s(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const DY="2.15.5",MY=`realtime-js/${DY}`,IY="1.0.0",Gb=1e4,$Y=1e3,RY=100;var Ih;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ih||(Ih={}));var Pn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Pn||(Pn={}));var qs;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(qs||(qs={}));var Kb;(function(e){e.websocket="websocket"})(Kb||(Kb={}));var sl;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(sl||(sl={}));class FY{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),s=new TextDecoder;return this._decodeBroadcast(t,n,s)}_decodeBroadcast(t,n,s){const a=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const l=s.decode(t.slice(o,o+a));o=o+a;const c=s.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(s.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class W4{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ft;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ft||(Ft={}));const pP=(e,t,n={})=>{var s;const a=(s=n.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(t).reduce((i,o)=>(i[o]=LY(o,e,t,a),i),{})},LY=(e,t,n,s)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,o=n[e];return i&&!s.includes(i)?H4(i,o):Yb(o)},H4=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return qY(t,n)}switch(e){case Ft.bool:return BY(t);case Ft.float4:case Ft.float8:case Ft.int2:case Ft.int4:case Ft.int8:case Ft.numeric:case Ft.oid:return VY(t);case Ft.json:case Ft.jsonb:return zY(t);case Ft.timestamp:return UY(t);case Ft.abstime:case Ft.date:case Ft.daterange:case Ft.int4range:case Ft.int8range:case Ft.money:case Ft.reltime:case Ft.text:case Ft.time:case Ft.timestamptz:case Ft.timetz:case Ft.tsrange:case Ft.tstzrange:return Yb(t);default:return Yb(t)}},Yb=e=>e,BY=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},VY=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},zY=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},qY=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,s=e[n];if(e[0]==="{"&&s==="}"){let i;const o=e.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>H4(t,l))}return e},UY=e=>typeof e=="string"?e.replace(" ","T"):e,G4=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class D0{constructor(t,n,s={},a=Gb){this.channel=t,this.event=n,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var s;return this._hasReceived(t)&&n((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var gP;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(gP||(gP={}));class $h{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=$h.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=$h.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=$h.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,s,a){const i=this.cloneDeep(t),o=this.transformState(n),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const f=d.map(v=>v.presence_ref),m=h.map(v=>v.presence_ref),g=d.filter(v=>m.indexOf(v.presence_ref)<0),p=h.filter(v=>f.indexOf(v.presence_ref)<0);g.length>0&&(l[u]=g),p.length>0&&(c[u]=p)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},s,a)}static syncDiff(t,n,s,a){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(m=>m.presence_ref),f=d.filter(m=>h.indexOf(m.presence_ref)<0);t[l].unshift(...f)}s(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,a(l,u,c),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(s=>n(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,s)=>{const a=t[s];return"metas"in a?n[s]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[s]=a,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var vP;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(vP||(vP={}));var Rh;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Rh||(Rh={}));var Za;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Za||(Za={}));class SS{constructor(t,n={config:{}},s){this.topic=t,this.params=n,this.socket=s,this.bindings={},this.state=Pn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new D0(this,qs.join,this.params,this.timeout),this.rejoinTimer=new W4(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Pn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Pn.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Pn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Pn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Pn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(qs.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new $h(this),this.broadcastEndpointURL=G4(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var s,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Pn.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(m=>m.filter))!==null&&a!==void 0?a:[],d=!!this.bindings[Rh.PRESENCE]&&this.bindings[Rh.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(Za.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(Za.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:m})=>{var g;if(this.socket.setAuth(),m===void 0){t==null||t(Za.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,v=(g=p==null?void 0:p.length)!==null&&g!==void 0?g:0,j=[];for(let x=0;x<v;x++){const y=p[x],{filter:{event:N,schema:w,table:C,filter:S}}=y,_=m&&m[x];if(_&&_.event===N&&_.schema===w&&_.table===C&&_.filter===S)j.push(Object.assign(Object.assign({},y),{id:_.id}));else{this.unsubscribe(),this.state=Pn.errored,t==null||t(Za.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=j,t&&t(Za.SUBSCRIBED);return}}).receive("error",m=>{this.state=Pn.errored,t==null||t(Za.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Za.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,s){return this.state===Pn.joined&&t===Rh.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,s)}async send(t,n={}){var s,a;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Pn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(qs.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new D0(this,qs.leave,{},t),s.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Pn.closed,this.bindings={}}async _fetchWithTimeout(t,n,s){const a=new AbortController,i=setTimeout(()=>a.abort(),s),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(i),o}_push(t,n,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new D0(this,t,n,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>RY){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,s){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,s){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=qs;if(s&&[l,c,u,d].indexOf(o)>=0&&s!==this._joinRef())return;let f=this._onMessage(o,n,s);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(m=>{var g,p,v;return((g=m.filter)===null||g===void 0?void 0:g.event)==="*"||((v=(p=m.filter)===null||p===void 0?void 0:p.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(m=>m.callback(f,s)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var g,p,v,j,x,y;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const N=m.id,w=(g=m.filter)===null||g===void 0?void 0:g.event;return N&&((p=n.ids)===null||p===void 0?void 0:p.includes(N))&&(w==="*"||(w==null?void 0:w.toLocaleLowerCase())===((v=n.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const N=(x=(j=m==null?void 0:m.filter)===null||j===void 0?void 0:j.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return N==="*"||N===((y=n==null?void 0:n.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof f=="object"&&"ids"in f){const g=f.data,{schema:p,table:v,commit_timestamp:j,type:x,errors:y}=g;f=Object.assign(Object.assign({},{schema:p,table:v,commit_timestamp:j,eventType:x,new:{},old:{},errors:y}),this._getPayloadRecords(g))}m.callback(f,s)})}_isClosed(){return this.state===Pn.closed}_isJoined(){return this.state===Pn.joined}_isJoining(){return this.state===Pn.joining}_isLeaving(){return this.state===Pn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,s){const a=t.toLocaleLowerCase(),i={type:a,filter:n,callback:s};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,n){const s=t.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&SS.isEqual(a.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const s in t)if(t[s]!==n[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(qs.close,{},t)}_onError(t){this._on(qs.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Pn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=pP(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=pP(t.columns,t.old_record)),n}}const M0=()=>{},lp={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},WY=[1e3,2e3,5e3,1e4],HY=1e4,GY=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class KY{constructor(t,n){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Gb,this.transport=null,this.heartbeatIntervalMs=lp.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=M0,this.ref=0,this.reconnectTimer=null,this.logger=M0,this.conn=null,this.sendBuffer=[],this.serializer=new FY,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let i;return a?i=a:typeof fetch>"u"?i=(...o)=>xm(async()=>{const{default:l}=await Promise.resolve().then(()=>Nd);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((s=n==null?void 0:n.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${Kb.websocket}`,this.httpEndpoint=G4(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=OY.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:IY}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,s){this.logger(t,n,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Ih.connecting:return sl.Connecting;case Ih.open:return sl.Open;case Ih.closing:return sl.Closing;default:return sl.Closed}}isConnected(){return this.connectionState()===sl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const s=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===s);if(a)return a;{const i=new SS(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:s,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${s} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close($Y,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},lp.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:a,payload:i,ref:o}=n,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${s} ${a} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(s)).forEach(u=>u._trigger(a,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(qs.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const s=t.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${t}${s}${a}`}_workerObjectUrl(t){let n;if(t)n=t;else{const s=new Blob([GY],{type:"application/javascript"});n=URL.createObjectURL(s)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(s=>{const a={access_token:n,version:MY};n&&s.updateJoinPayload(a),s.joinedOnce&&s._isJoined()&&s._push(qs.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(s=>{try{s(n)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(s){this.log("error",`error triggering ${t} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new W4(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},lp.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,s,a,i,o,l,c,u,d;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(s=t==null?void 0:t.timeout)!==null&&s!==void 0?s:Gb,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:lp.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:M0,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:h=>WY[h-1]||HY,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(h,f)=>f(JSON.stringify(h)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class CS extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function An(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class YY extends CS{constructor(t,n,s){super(t),this.name="StorageApiError",this.status=n,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Qb extends CS{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var QY=function(e,t,n,s){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((s=s.apply(e,t||[])).next())})};const K4=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>xm(async()=>{const{default:s}=await Promise.resolve().then(()=>Nd);return{default:s}},void 0).then(({default:s})=>s(...n)):t=fetch,(...n)=>t(...n)},XY=()=>QY(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield xm(()=>Promise.resolve().then(()=>Nd),void 0)).Response:Response}),Xb=e=>{if(Array.isArray(e))return e.map(n=>Xb(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,s])=>{const a=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=Xb(s)}),t},JY=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var rc=function(e,t,n,s){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((s=s.apply(e,t||[])).next())})};const I0=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ZY=(e,t,n)=>rc(void 0,void 0,void 0,function*(){const s=yield XY();e instanceof s&&!(n!=null&&n.noResolveJson)?e.json().then(a=>{const i=e.status||500,o=(a==null?void 0:a.statusCode)||i+"";t(new YY(I0(a),i,o))}).catch(a=>{t(new Qb(I0(a),a))}):t(new Qb(I0(e),e))}),eQ=(e,t,n,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!s?a:(JY(s)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(s)):a.body=s,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),n))};function jm(e,t,n,s,a,i){return rc(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(n,eQ(t,s,a,i)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>ZY(c,l,s))})})}function Lg(e,t,n,s){return rc(this,void 0,void 0,function*(){return jm(e,"GET",t,n,s)})}function va(e,t,n,s,a){return rc(this,void 0,void 0,function*(){return jm(e,"POST",t,s,a,n)})}function Jb(e,t,n,s,a){return rc(this,void 0,void 0,function*(){return jm(e,"PUT",t,s,a,n)})}function tQ(e,t,n,s){return rc(this,void 0,void 0,function*(){return jm(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),s)})}function Y4(e,t,n,s,a){return rc(this,void 0,void 0,function*(){return jm(e,"DELETE",t,s,a,n)})}var fr=function(e,t,n,s){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((s=s.apply(e,t||[])).next())})};const nQ={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},xP={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class rQ{constructor(t,n={},s,a){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=s,this.fetch=K4(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,s,a){return fr(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},xP),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=s,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),h=yield(t=="PUT"?Jb:va)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(An(i))return{data:null,error:i};throw i}})}upload(t,n,s){return fr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,s)})}uploadToSignedUrl(t,n,s,a){return fr(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:xP.upsert},a),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",u.cacheControl)):(c=s,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield Jb(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(An(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return fr(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t);const a=Object.assign({},this.headers);n!=null&&n.upsert&&(a["x-upsert"]="true");const i=yield va(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new CS("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(An(s))return{data:null,error:s};throw s}})}update(t,n,s){return fr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,s)})}move(t,n,s){return fr(this,void 0,void 0,function*(){try{return{data:yield va(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(An(a))return{data:null,error:a};throw a}})}copy(t,n,s){return fr(this,void 0,void 0,function*(){try{return{data:{path:(yield va(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(An(a))return{data:null,error:a};throw a}})}createSignedUrl(t,n,s){return fr(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield va(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(An(a))return{data:null,error:a};throw a}})}createSignedUrls(t,n,s){return fr(this,void 0,void 0,function*(){try{const a=yield va(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(An(a))return{data:null,error:a};throw a}})}download(t,n){return fr(this,void 0,void 0,function*(){const a=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield Lg(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(An(l))return{data:null,error:l};throw l}})}info(t){return fr(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const s=yield Lg(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Xb(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(An(s))return{data:null,error:s};throw s}})}exists(t){return fr(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield tQ(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(An(s)&&s instanceof Qb){const a=s.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:s}}throw s}})}getPublicUrl(t,n){const s=this._getFinalPath(t),a=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&a.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&a.push(c);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${u}`)}}}remove(t){return fr(this,void 0,void 0,function*(){try{return{data:yield Y4(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(An(n))return{data:null,error:n};throw n}})}list(t,n,s){return fr(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},nQ),n),{prefix:t||""});return{data:yield va(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(An(a))return{data:null,error:a};throw a}})}listV2(t,n){return fr(this,void 0,void 0,function*(){try{const s=Object.assign({},t);return{data:yield va(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(An(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const sQ="2.12.1",aQ={"X-Client-Info":`storage-js/${sQ}`};var vc=function(e,t,n,s){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((s=s.apply(e,t||[])).next())})};class iQ{constructor(t,n={},s,a){this.shouldThrowOnError=!1;const i=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},aQ),n),this.fetch=K4(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return vc(this,void 0,void 0,function*(){try{return{data:yield Lg(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(An(t))return{data:null,error:t};throw t}})}getBucket(t){return vc(this,void 0,void 0,function*(){try{return{data:yield Lg(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(An(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return vc(this,void 0,void 0,function*(){try{return{data:yield va(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(An(s))return{data:null,error:s};throw s}})}updateBucket(t,n){return vc(this,void 0,void 0,function*(){try{return{data:yield Jb(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(An(s))return{data:null,error:s};throw s}})}emptyBucket(t){return vc(this,void 0,void 0,function*(){try{return{data:yield va(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(An(n))return{data:null,error:n};throw n}})}deleteBucket(t){return vc(this,void 0,void 0,function*(){try{return{data:yield Y4(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(An(n))return{data:null,error:n};throw n}})}}class oQ extends iQ{constructor(t,n={},s,a){super(t,n,s,a)}from(t){return new rQ(this.url,this.headers,t,this.fetch)}}const lQ="2.57.4";let bh="";typeof Deno<"u"?bh="deno":typeof document<"u"?bh="web":typeof navigator<"u"&&navigator.product==="ReactNative"?bh="react-native":bh="node";const cQ={"X-Client-Info":`supabase-js-${bh}/${lQ}`},uQ={headers:cQ},dQ={schema:"public"},hQ={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},fQ={};var mQ=function(e,t,n,s){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((s=s.apply(e,t||[])).next())})};const pQ=e=>{let t;return e?t=e:typeof fetch>"u"?t=M4:t=fetch,(...n)=>t(...n)},gQ=()=>typeof Headers>"u"?I4:Headers,vQ=(e,t,n)=>{const s=pQ(n),a=gQ();return(i,o)=>mQ(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new a(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),s(i,Object.assign(Object.assign({},o),{headers:u}))})};var xQ=function(e,t,n,s){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((s=s.apply(e,t||[])).next())})};function yQ(e){return e.endsWith("/")?e:e+"/"}function jQ(e,t){var n,s;const{db:a,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,f={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(s=l==null?void 0:l.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>xQ(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function bQ(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(yQ(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Q4="2.71.1",Ac=30*1e3,Zb=3,$0=Zb*Ac,wQ="http://localhost:9999",NQ="supabase.auth.token",SQ={"X-Client-Info":`gotrue-js/${Q4}`},ew="X-Supabase-Api-Version",X4={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},CQ=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,_Q=10*60*1e3;class _S extends Error{constructor(t,n,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=s}}function nt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class PQ extends _S{constructor(t,n,s){super(t,n,s),this.name="AuthApiError",this.status=n,this.code=s}}function AQ(e){return nt(e)&&e.name==="AuthApiError"}class J4 extends _S{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Ro extends _S{constructor(t,n,s,a){super(t,s,a),this.name=n,this.status=s}}class Vi extends Ro{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function kQ(e){return nt(e)&&e.name==="AuthSessionMissingError"}class cp extends Ro{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class up extends Ro{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class dp extends Ro{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function TQ(e){return nt(e)&&e.name==="AuthImplicitGrantRedirectError"}class yP extends Ro{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class tw extends Ro{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function R0(e){return nt(e)&&e.name==="AuthRetryableFetchError"}class jP extends Ro{constructor(t,n,s){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=s}}class nw extends Ro{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Bg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),bP=` 	
\r=`.split(""),EQ=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<bP.length;t+=1)e[bP[t].charCodeAt(0)]=-2;for(let t=0;t<Bg.length;t+=1)e[Bg[t].charCodeAt(0)]=t;return e})();function wP(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;n(Bg[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;n(Bg[s]),t.queuedBits-=6}}function Z4(e,t,n){const s=EQ[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function NP(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{MQ(o,s,n)};for(let o=0;o<e.length;o+=1)Z4(e.charCodeAt(o),a,i);return t.join("")}function OQ(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function DQ(e,t){for(let n=0;n<e.length;n+=1){let s=e.charCodeAt(n);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(e.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}OQ(s,t)}}function MQ(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let s=1;s<6;s+=1)if(!(e>>7-s&1)){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function IQ(e){const t=[],n={queue:0,queuedBits:0},s=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)Z4(e.charCodeAt(a),n,s);return new Uint8Array(t)}function $Q(e){const t=[];return DQ(e,n=>t.push(n)),new Uint8Array(t)}function RQ(e){const t=[],n={queue:0,queuedBits:0},s=a=>{t.push(a)};return e.forEach(a=>wP(a,n,s)),wP(null,n,s),t.join("")}function FQ(e){return Math.round(Date.now()/1e3)+e}function LQ(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Rs=()=>typeof window<"u"&&typeof document<"u",Ho={tested:!1,writable:!1},eR=()=>{if(!Rs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ho.tested)return Ho.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ho.tested=!0,Ho.writable=!0}catch{Ho.tested=!0,Ho.writable=!1}return Ho.writable};function BQ(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return n.searchParams.forEach((s,a)=>{t[a]=s}),t}const tR=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>xm(async()=>{const{default:s}=await Promise.resolve().then(()=>Nd);return{default:s}},void 0).then(({default:s})=>s(...n)):t=fetch,(...n)=>t(...n)},VQ=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",kc=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Go=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ri=async(e,t)=>{await e.removeItem(t)};class Rx{constructor(){this.promise=new Rx.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Rx.promiseConstructor=Promise;function F0(e){const t=e.split(".");if(t.length!==3)throw new nw("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!CQ.test(t[s]))throw new nw("JWT not in base64url format");return{header:JSON.parse(NP(t[0])),payload:JSON.parse(NP(t[1])),signature:IQ(t[2]),raw:{header:t[0],payload:t[1]}}}async function zQ(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function qQ(e,t){return new Promise((s,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){s(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function UQ(e){return("0"+e.toString(16)).substr(-2)}function WQ(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=n.length;let a="";for(let i=0;i<56;i++)a+=n.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(t),Array.from(t,UQ).join("")}async function HQ(e){const n=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(s);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function GQ(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await HQ(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function xc(e,t,n=!1){const s=WQ();let a=s;n&&(a+="/PASSWORD_RECOVERY"),await kc(e,`${t}-code-verifier`,a);const i=await GQ(s);return[i,s===i?"plain":"s256"]}const KQ=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function YQ(e){const t=e.headers.get(ew);if(!t||!t.match(KQ))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function QQ(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function XQ(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const JQ=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function yc(e){if(!JQ.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function L0(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const s=n.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function SP(e){return JSON.parse(JSON.stringify(e))}var ZQ=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]]);return n};const Zo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),eX=[502,503,504];async function CP(e){var t;if(!VQ(e))throw new tw(Zo(e),0);if(eX.includes(e.status))throw new tw(Zo(e),e.status);let n;try{n=await e.json()}catch(i){throw new J4(Zo(i),i)}let s;const a=YQ(e);if(a&&a.getTime()>=X4["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?s=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(s=n.error_code),s){if(s==="weak_password")throw new jP(Zo(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new Vi}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new jP(Zo(n),e.status,n.weak_password.reasons);throw new PQ(Zo(n),e.status||500,s)}const tX=(e,t,n,s)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),n))};async function dt(e,t,n,s){var a;const i=Object.assign({},s==null?void 0:s.headers);i[ew]||(i[ew]=X4["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(a=s==null?void 0:s.query)!==null&&a!==void 0?a:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await nX(e,t,n+l,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function nX(e,t,n,s,a,i){const o=tX(t,s,a,i);let l;try{l=await e(n,Object.assign({},o))}catch(c){throw console.error(c),new tw(Zo(c),0)}if(l.ok||await CP(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(c){await CP(c)}}function Xa(e){var t;let n=null;iX(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=FQ(e.expires_in)));const s=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:s},error:null}}function _P(e){const t=Xa(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,s)=>n&&typeof s=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Yi(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function rX(e){return{data:e,error:null}}function sX(e){const{action_link:t,email_otp:n,hashed_token:s,redirect_to:a,verification_type:i}=e,o=ZQ(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:s,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function aX(e){return e}function iX(e){return e.access_token&&e.refresh_token&&e.expires_in}const B0=["global","local","others"];var oX=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]]);return n};class lX{constructor({url:t="",headers:n={},fetch:s}){this.url=t,this.headers=n,this.fetch=tR(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=B0[0]){if(B0.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${B0.join(", ")}`);try{return await dt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(nt(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,n={}){try{return await dt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Yi})}catch(s){if(nt(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:n}=t,s=oX(t,["options"]),a=Object.assign(Object.assign({},s),n);return"newEmail"in s&&(a.new_email=s==null?void 0:s.newEmail,delete a.newEmail),await dt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:sX,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(nt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await dt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Yi})}catch(n){if(nt(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,s,a,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await dt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&s!==void 0?s:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:aX});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const p=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(g.split(";")[1].split("=")[1]);u[`${v}Page`]=p}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(nt(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){yc(t);try{return await dt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Yi})}catch(n){if(nt(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){yc(t);try{return await dt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Yi})}catch(s){if(nt(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,n=!1){yc(t);try{return await dt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Yi})}catch(s){if(nt(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){yc(t.userId);try{const{data:n,error:s}=await dt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:s}}catch(n){if(nt(n))return{data:null,error:n};throw n}}async _deleteFactor(t){yc(t.userId),yc(t.id);try{return{data:await dt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(nt(n))return{data:null,error:n};throw n}}}function PP(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function cX(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const jc={debug:!!(globalThis&&eR()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class nR extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class uX extends nR{}async function dX(e,t,n){jc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),jc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){jc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await n()}finally{jc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw jc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new uX(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(jc.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}cX();const hX={url:wQ,storageKey:NQ,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:SQ,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function AP(e,t,n){return await n()}const bc={};class xf{constructor(t){var n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=xf.nextInstanceID,xf.nextInstanceID+=1,this.instanceID>0&&Rs()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},hX),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new lX({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=tR(a.fetch),this.lock=a.lock||AP,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Rs()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=dX:this.lock=AP,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:eR()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=PP(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=PP(this.memoryStorage)),Rs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=bc[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){bc[this.storageKey]=Object.assign(Object.assign({},bc[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=bc[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){bc[this.storageKey]=Object.assign(Object.assign({},bc[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Q4}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=BQ(window.location.href);let s="none";if(this._isImplicitGrantCallback(n)?s="implicit":await this._isPKCECallback(n)&&(s="pkce"),Rs()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:i}=await this._getSessionFromURL(n,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),TQ(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return nt(n)?{error:n}:{error:new J4("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,s,a;try{const i=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Xa}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(nt(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,s,a;try{let i;if("email"in t){const{email:d,password:h,options:f}=t;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await xc(this.storage,this.storageKey)),i=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:g},xform:Xa})}else if("phone"in t){const{phone:d,password:h,options:f}=t;i=await dt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},channel:(a=f==null?void 0:f.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Xa})}else throw new up("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(nt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:o,options:l}=t;n=await dt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:_P})}else if("phone"in t){const{phone:i,password:o,options:l}=t;n=await dt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:_P})}else throw new up("You must provide either an email or phone number and a password");const{data:s,error:a}=n;return a?{data:{user:null,session:null},error:a}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new cp}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(n){if(nt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,s,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,s,a,i,o,l,c,u,d,h,f,m;let g,p;if("message"in t)g=t.message,p=t.signature;else{const{chain:v,wallet:j,statement:x,options:y}=t;let N;if(Rs())if(typeof j=="object")N=j;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))N=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=j}const w=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in N&&N.signIn){const C=await N.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:w.host,uri:w.href}),x?{statement:x}:null));let S;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")S=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)S=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)g=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),p=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in N)||typeof N.signMessage!="function"||!("publicKey"in N)||typeof N!="object"||!N.publicKey||!("toBase58"in N.publicKey)||typeof N.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${w.host} wants you to sign in with your Solana account:`,N.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${w.href}`,`Issued At: ${(a=(s=y==null?void 0:y.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((c=y==null?void 0:y.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((h=(d=y==null?void 0:y.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...y.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const C=await N.signMessage(new TextEncoder().encode(g),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=C}}try{const{data:v,error:j}=await dt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:RQ(p)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Xa});if(j)throw j;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new cp}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:j})}catch(v){if(nt(v))return{data:{user:null,session:null},error:v};throw v}}async _exchangeCodeForSession(t){const n=await Go(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(n??"").split("/");try{const{data:i,error:o}=await dt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:Xa});if(await Ri(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new cp}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(nt(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:s,token:a,access_token:i,nonce:o}=t,l=await dt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Xa}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new cp}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(nt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,s,a,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await xc(this.storage,this.storageKey));const{error:h}=await dt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await dt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new up("You must provide either an email or phone number.")}catch(l){if(nt(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,s;try{let a,i;"options"in t&&(a=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:o,error:l}=await dt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Xa});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(nt(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var n,s,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await xc(this.storage,this.storageKey)),await dt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:rX})}catch(i){if(nt(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:s}=t;if(s)throw s;if(!n)throw new Vi;const{error:a}=await dt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(nt(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:s,type:a,options:i}=t,{error:o}=await dt(this.fetch,"POST",n,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:s,type:a,options:i}=t,{data:o,error:l}=await dt(this.fetch,"POST",n,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new up("You must provide either an email or phone number and a type")}catch(n){if(nt(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=n();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Go(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<$0:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.userStorage){const o=await Go(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=L0()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await dt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Yi}):await this._useSession(async n=>{var s,a,i;const{data:o,error:l}=n;if(l)throw l;return!(!((s=o.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Vi}:await dt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Yi})})}catch(n){if(nt(n))return kQ(n)&&(await this._removeSession(),await Ri(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async s=>{const{data:a,error:i}=s;if(i)throw i;if(!a.session)throw new Vi;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await xc(this.storage,this.storageKey));const{data:u,error:d}=await dt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Yi});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(s){if(nt(s))return{data:{user:null},error:s};throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Vi;const n=Date.now()/1e3;let s=n,a=!0,i=null;const{payload:o}=F0(t.access_token);if(o.exp&&(s=o.exp,a=s<=n),a){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:s-n,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(nt(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var s;if(!t){const{data:o,error:l}=n;if(l)throw l;t=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(t!=null&&t.refresh_token))throw new Vi;const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(nt(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Rs())throw new dp("No browser detected.");if(t.error||t.error_description||t.error_code)throw new dp(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new yP("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new dp("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new yP("No code detected.");const{data:x,error:y}=await this._exchangeCodeForSession(t.code);if(y)throw y;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new dp("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const m=f-d;m*1e3<=Ac&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const g=f-h;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,f,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,f,d);const{data:p,error:v}=await this._getUser(i);if(v)throw v;const j={provider_token:s,provider_refresh_token:a,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:j,redirectType:t.type},error:null}}catch(s){if(nt(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Go(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var s;const{data:a,error:i}=n;if(i)return{error:i};const o=(s=a.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(AQ(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Ri(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=LQ(),s={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async n=>{var s,a;try{const{data:{session:i},error:o}=n;if(o)throw o;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await xc(this.storage,this.storageKey,!0));try{return await dt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(nt(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(nt(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:s,error:a}=await this._useSession(async i=>{var o,l,c,u,d;const{data:h,error:f}=i;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await dt(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return Rs()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:t.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(nt(s))return{data:{provider:t.provider,url:null},error:s};throw s}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var s,a;const{data:i,error:o}=n;if(o)throw o;return await dt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(nt(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const s=Date.now();return await qQ(async a=>(a>0&&await zQ(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await dt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Xa})),(a,i)=>{const o=200*Math.pow(2,a);return i&&R0(i)&&Date.now()+o-s<Ac})}catch(s){if(this._debug(n,"error",s),nt(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",s),Rs()&&!n.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t,n;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await Go(this.storage,this.storageKey);if(a&&this.userStorage){let o=await Go(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await kc(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:L0()}else if(a&&!a.user&&!a.user){const o=await Go(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await Ri(this.storage,this.storageKey+"-user"),await kc(this.storage,this.storageKey,a)):a.user=L0()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const i=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<$0;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${$0}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),R0(o)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(s,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var n,s;if(!t)throw new Vi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Rx;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Vi;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),nt(i)){const o={session:null,error:i};return R0(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,n,s=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",n,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),s=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&n.user&&await kc(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const i=SP(a);await kc(this.storage,this.storageKey,i)}else{const a=SP(n);await kc(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Ri(this.storage,this.storageKey),await Ri(this.storage,this.storageKey+"-code-verifier"),await Ri(this.storage,this.storageKey+"-user"),this.userStorage&&await Ri(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Rs()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ac);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:s}}=n;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-t)/Ac);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Ac}ms, refresh threshold is ${Zb} ticks`),a<=Zb&&await this._callRefreshToken(s.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof nR)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Rs()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,s){const a=[`provider=${encodeURIComponent(n)}`];if(s!=null&&s.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,o]=await xc(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);a.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var s;const{data:a,error:i}=n;return i?{data:null,error:i}:await dt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(nt(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var s,a;const{data:i,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await dt(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(nt(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:a,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:l}=await dt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(n){if(nt(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var s;const{data:a,error:i}=n;return i?{data:null,error:i}:await dt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(s=a==null?void 0:a.session)===null||s===void 0?void 0:s.access_token})})}catch(n){if(nt(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:s}=await this._challenge({factorId:t.factorId});return s?{data:null,error:s}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const s=(t==null?void 0:t.factors)||[],a=s.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=s.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:s,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,s;const{data:{session:a},error:i}=t;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=F0(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((s=(n=a.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,n={keys:[]}){let s=n.keys.find(l=>l.kid===t);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(l=>l.kid===t),s&&this.jwks_cached_at+_Q>a)return s;const{data:i,error:o}=await dt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,s=i.keys.find(l=>l.kid===t),!s)?null:s}async getClaims(t,n={}){try{let s=t;if(!s){const{data:m,error:g}=await this.getSession();if(g||!m.session)return{data:null,error:g};s=m.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=F0(s);n!=null&&n.allowExpired||QQ(i.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:m}=await this.getUser(s);if(m)throw m;return{data:{claims:i,header:a,signature:o},error:null}}const d=XQ(a.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,$Q(`${l}.${c}`)))throw new nw("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(s){if(nt(s))return{data:null,error:s};throw s}}}xf.nextInstanceID=0;const fX=xf;class mX extends fX{constructor(t){super(t)}}var pX=function(e,t,n,s){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((s=s.apply(e,t||[])).next())})};class gX{constructor(t,n,s){var a,i,o;this.supabaseUrl=t,this.supabaseKey=n;const l=bQ(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:dQ,realtime:fQ,auth:Object.assign(Object.assign({},hQ),{storageKey:c}),global:uQ},d=jQ(s??{},u);this.storageKey=(a=d.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=vQ(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new EY(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new oQ(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new cY(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},s={}){return this.rest.rpc(t,n,s)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return pX(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(n=(t=s.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:s,storage:a,userStorage:i,storageKey:o,flowType:l,lock:c,debug:u},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new mX({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),d),storageKey:o,autoRefreshToken:t,persistSession:n,detectSessionInUrl:s,storage:a,userStorage:i,flowType:l,lock:c,debug:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new KY(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,s)=>{this._handleTokenChanged(n,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(t,n,s){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const vX=(e,t,n)=>new gX(e,t,n);function xX(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}xX()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const rR="https://fqmeqckchbppabetefuk.supabase.co",yX="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZxbWVxY2tjaGJwcGFiZXRlZnVrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY2NzUzODYsImV4cCI6MjA3MjI1MTM4Nn0.MkyVvQVmqUXShrHXHTpHib0Dyq39ZB47KhGZZgBlF-o",Me=vX(rR,yX,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),sR=async()=>{const{data:{user:e},error:t}=await Me.auth.getUser();if(t)throw t;return e},Fx=async()=>{const e=await sR();if(!e)return null;const{data:t,error:n}=await Me.from("user_profiles").select("*").eq("id",e.id).single();if(n)throw n;return t},jX=async(e,t,n,s,a="assistant")=>{const{data:i,error:o}=await Me.auth.signUp({email:e,password:t,options:{data:{username:n,full_name:s,role:a}}});if(o)throw o;return i},bX=async()=>{const{error:e}=await Me.auth.signOut();if(e)throw e;try{localStorage.removeItem("supabase.auth.token"),localStorage.removeItem("sb-"+rR.split("//")[1].split(".")[0]+"-auth-token"),document.cookie.split(";").forEach(t=>{document.cookie=t.replace(/^ +/,"").replace(/=.*/,"=;expires="+new Date().toUTCString()+";path=/")})}catch(t){console.warn("Error clearing auth storage:",t)}},wX=async e=>{const t=await sR();if(!t)throw new Error("No authenticated user");const{data:n,error:s}=await Me.from("user_profiles").select("*").eq("id",t.id).single();n||await aR(t);const a=Object.entries({...e,updated_at:new Date().toISOString()}).reduce((l,[c,u])=>(u!=null&&u!==""&&(l[c]=u),l),{}),{data:i,error:o}=await Me.from("user_profiles").update(a).eq("id",t.id).select().single();if(o){const l=t.user_metadata||{},c=l.full_name||l.name||"",u=(n==null?void 0:n.username)||l.username||t.email.split("@")[0],d=(n==null?void 0:n.role)||l.role||"assistant",h={id:t.id,email:t.email,username:u,full_name:c,role:d,...a},{data:f,error:m}=await Me.from("user_profiles").upsert(h).select().single();if(m)throw new Error(`Profile update failed: ${m.message}`);return f}return i},aR=async e=>{const t=await Fx();if(t)return t;const n=e.user_metadata||{},s=n.full_name||n.name||"",a=n.username||e.email.split("@")[0],i=n.role||"assistant",{data:o,error:l}=await Me.from("user_profiles").insert({id:e.id,email:e.email,username:a,full_name:s,role:i}).select().single();if(l)throw l;return o},NX=async e=>{const{data:t,error:n}=await Me.auth.resetPasswordForEmail(e,{redirectTo:"http://localhost:8000/dashboard/reset-password"});if(n)throw n;return t},Qs={all:["auth"],session:()=>[...Qs.all,"session"]},SX=async()=>{try{const{data:{session:e},error:t}=await Me.auth.getSession();if(t||!(e!=null&&e.user))return null;let n=null;try{n=await Fx()}catch{try{n=await aR(e.user)}catch(a){console.error("Failed to create user profile:",a);const i=e.user.user_metadata||{},o=i.full_name||i.name||"",l=i.username||e.user.email.split("@")[0];n={id:e.user.id,email:e.user.email,username:l,full_name:o,role:"assistant",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),avatar_url:i.avatar_url||i.picture||null}}}return n?{id:e.user.id,email:e.user.email,profile:n}:null}catch{return null}},CX=()=>Vr({queryKey:Qs.session(),queryFn:SX,staleTime:5*60*1e3,gcTime:10*60*1e3,retry:!1,refetchOnWindowFocus:!1,refetchOnMount:"always",refetchOnReconnect:!1,networkMode:"offlineFirst"}),_X=()=>{const e=$t();return qt({mutationFn:async({email:t,password:n})=>{const{data:s,error:a}=await Me.auth.signInWithPassword({email:t,password:n});if(a){const o={"Invalid login credentials":"Email ou mot de passe incorrect","Email not confirmed":"Veuillez confirmer votre email avant de vous connecter","Too many requests":"Trop de tentatives de connexion. Veuillez réessayer plus tard"}[a.message]||a.message;throw new Error(o)}if(!s.user||!s.session)throw new Error("Échec de connexion - session invalide");return s.user},onSuccess:async()=>{await new Promise(t=>setTimeout(t,100)),e.refetchQueries({queryKey:Qs.session()})},onError:()=>{e.setQueryData(Qs.session(),null)}})},PX=()=>{const e=$t();return qt({mutationFn:async()=>{await bX()},onSuccess:()=>{e.setQueryData(Qs.session(),null),e.removeQueries({queryKey:Qs.session()})}})},AX=()=>{const e=$t();return qt({mutationFn:async()=>{const t=await Fx();if(!t)throw new Error("Could not refresh profile");return t},onSuccess:()=>{e.invalidateQueries({queryKey:Qs.session()})}})},kX=()=>qt({mutationFn:async()=>{const{data:e,error:t}=await Me.auth.signInWithOAuth({provider:"google",options:{redirectTo:"http://localhost:8000/dashboard/dashboard"}});if(t)throw t;return e}}),TX=()=>qt({mutationFn:async e=>{await NX(e)}}),iR=b.createContext(void 0);function EX({children:e}){const{data:t,isLoading:n,error:s}=CX(),a=_X(),i=PX(),o=AX(),l=$t(),[c,u]=b.useState(!1),d=b.useRef(!1);b.useEffect(()=>{if(d.current)return;d.current=!0;const{data:{subscription:j}}=Me.auth.onAuthStateChange((y,N)=>{y==="SIGNED_OUT"?(l.setQueryData(Qs.session(),null),l.removeQueries({queryKey:Qs.session()})):y==="TOKEN_REFRESHED"&&N&&l.invalidateQueries({queryKey:Qs.session()}),c||u(!0)}),x=setTimeout(()=>{c||u(!0)},2e3);return()=>{j.unsubscribe(),clearTimeout(x),d.current=!1}},[l,c]);const h=async(j,x)=>{try{return await a.mutateAsync({email:j,password:x}),!0}catch(y){return console.error("Login error:",y),!1}},f=async()=>{try{await i.mutateAsync()}catch(j){console.error("Logout error:",j),l.setQueryData(Qs.session(),null)}},m=async()=>{await o.mutateAsync()},g=!c||n&&!s&&t===void 0,p=a.isPending||i.isPending,v={user:t||null,isAuthenticated:!!t&&c,isLoading:g||p,login:h,logout:f,refreshProfile:m};return r.jsx(iR.Provider,{value:v,children:e})}function Fo(){const e=b.useContext(iR);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}function kP(){const{user:e,logout:t}=Fo(),{toast:n}=et(),s=wd(),[a,i]=b.useState(!1),o=async()=>{i(!0),await new Promise(d=>setTimeout(d,500)),t(),n({title:"Déconnexion réussie",description:"Vous avez été déconnecté avec succès."}),i(!1)};if(!e)return null;const l=d=>d?d.split(" ").map(h=>h.charAt(0)).join("").toUpperCase().slice(0,2):e.profile.username.charAt(0).toUpperCase(),c=d=>{switch(d){case"admin":return"Administrateur";case"assistant":return"Assistant";default:return"Utilisateur"}},u=d=>{switch(d){case"admin":return r.jsx(ur,{className:"h-3 w-3"});case"assistant":return r.jsx(Rn,{className:"h-3 w-3"});default:return r.jsx(Rn,{className:"h-3 w-3"})}};return r.jsxs(RK,{children:[r.jsx(FK,{asChild:!0,children:r.jsx(R,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:r.jsx(Hn,{className:"h-8 w-8",children:r.jsx(Gn,{className:"bg-primary text-primary-foreground text-sm",children:l(e.profile.full_name)})})})}),r.jsxs(b4,{className:"w-56",align:"end",forceMount:!0,children:[r.jsx(w4,{className:"font-normal",children:r.jsxs("div",{className:"flex flex-col space-y-1",children:[r.jsx("p",{className:"text-sm font-medium leading-none",children:e.profile.full_name||e.profile.username}),r.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:e.email}),r.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[u(e.profile.role),r.jsx("span",{className:"text-xs text-muted-foreground",children:c(e.profile.role)})]})]})}),r.jsx(Wb,{}),r.jsxs(eg,{className:"cursor-pointer",onClick:()=>s("/profile"),children:[r.jsx(Rn,{className:"mr-2 h-4 w-4"}),r.jsx("span",{children:"Profil"})]}),r.jsxs(eg,{className:"cursor-pointer",onClick:()=>s("/auth-settings"),children:[r.jsx(Iq,{className:"mr-2 h-4 w-4"}),r.jsx("span",{children:"Paramètres de connexion"})]}),r.jsx(Wb,{}),r.jsxs(eg,{className:"cursor-pointer text-red-600 focus:text-red-600",onClick:o,disabled:a,children:[r.jsx(tI,{className:"mr-2 h-4 w-4"}),r.jsx("span",{children:a?"Déconnexion...":"Se déconnecter"})]})]})]})}const oR=[{icon:Oq,label:"Dashboard",path:"/dashboard"},{icon:La,label:"Clients",path:"/clients"},{icon:lt,label:"Animaux",path:"/pets"},{icon:Ye,label:"RDV",path:"/appointments"},{icon:xr,label:"Consultations",path:"/consultations"},{icon:Mr,label:"Vaccinations",path:"/vaccinations"},{icon:cl,label:"Antiparasites",path:"/antiparasites"},{icon:JM,label:"Historiques",path:"/history"},{icon:pb,label:"Farm Mgmt",path:"/farm"}],lR=[{icon:Ea,label:"Stock",path:"/stock"},{icon:XM,label:"Comptabilité",path:"/accounting"},{icon:Aq,label:"Paramètres",path:"/settings"}],OX=[...oR,...lR];function rr(){const e=$o(),[t,n]=b.useState(!1);return r.jsx("nav",{className:"bg-card border-b shadow-card",children:r.jsxs("div",{className:"container mx-auto px-2 sm:px-4 py-2 sm:py-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-shrink-0",children:[r.jsxs(Gs,{to:"/dashboard",className:"flex items-center gap-1 sm:gap-2",children:[r.jsx(lt,{className:"h-6 w-6 sm:h-7 sm:w-7 text-primary"}),r.jsx("h1",{className:"text-lg sm:text-xl font-bold gradient-primary bg-clip-text text-transparent hidden sm:block",children:"VetPro CRM"}),r.jsx("h1",{className:"text-base sm:text-lg font-bold gradient-primary bg-clip-text text-transparent sm:hidden",children:"VetPro"})]}),r.jsx("div",{className:"hidden sm:block",children:r.jsx(Z_,{})})]}),r.jsxs("div",{className:"hidden lg:flex items-center gap-1",children:[oR.map(s=>r.jsx(R,{variant:e.pathname===s.path?"default":"ghost",size:"sm",className:"gap-1 px-3 transition-all hover:medical-glow",asChild:!0,children:r.jsxs(Gs,{to:s.path,children:[r.jsx(s.icon,{className:"h-4 w-4"}),r.jsx("span",{className:"hidden xl:inline",children:s.label})]})},s.path)),r.jsxs("div",{className:"relative group",children:[r.jsxs(R,{variant:"ghost",size:"sm",className:"gap-1 px-3 transition-all hover:medical-glow",children:[r.jsx(v_,{className:"h-4 w-4"}),r.jsx("span",{className:"hidden xl:inline",children:"Plus"})]}),r.jsx("div",{className:"absolute right-0 top-full mt-1 w-40 bg-card border rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:r.jsx("div",{className:"py-1",children:lR.map(s=>r.jsxs(Gs,{to:s.path,className:`flex items-center gap-2 px-4 py-2 text-sm transition-colors hover:bg-muted ${e.pathname===s.path?"bg-primary text-primary-foreground":""}`,children:[r.jsx(s.icon,{className:"h-4 w-4"}),s.label]},s.path))})})]})]}),r.jsx("div",{className:"hidden lg:flex items-center gap-2",children:r.jsx(kP,{})}),r.jsxs("div",{className:"lg:hidden flex items-center gap-2",children:[r.jsx("div",{className:"sm:hidden",children:r.jsx(Z_,{})}),r.jsx(kP,{}),r.jsx(R,{variant:"ghost",size:"sm",onClick:()=>n(!t),className:"gap-1 p-2",children:t?r.jsx(xx,{className:"h-4 w-4"}):r.jsx(v_,{className:"h-4 w-4"})})]})]}),t&&r.jsx("div",{className:"lg:hidden mt-2 pt-2 border-t",children:r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1",children:OX.map(s=>r.jsx(R,{variant:e.pathname===s.path?"default":"ghost",size:"sm",className:"gap-2 justify-start text-xs sm:text-sm",asChild:!0,onClick:()=>n(!1),children:r.jsxs(Gs,{to:s.path,children:[r.jsx(s.icon,{className:"h-3 w-3 sm:h-4 sm:w-4"}),r.jsx("span",{className:"truncate",children:s.label})]})},s.path))})})]})})}class DX extends b.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){console.error("ErrorBoundary caught an error:",t,n),this.setState({error:t,errorInfo:n})}render(){var t,n;return this.state.hasError?r.jsx("div",{className:"min-h-screen bg-red-50 flex items-center justify-center p-8",children:r.jsxs("div",{className:"max-w-2xl bg-white p-8 rounded-lg shadow-lg border border-red-200",children:[r.jsx("h1",{className:"text-2xl font-bold text-red-800 mb-4",children:"🚨 Erreur dans l'application"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-red-700 mb-2",children:"Erreur :"}),r.jsx("pre",{className:"bg-red-100 p-4 rounded text-sm text-red-800 overflow-auto",children:(t=this.state.error)==null?void 0:t.toString()})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-red-700 mb-2",children:"Stack Trace :"}),r.jsx("pre",{className:"bg-gray-100 p-4 rounded text-sm text-gray-800 overflow-auto max-h-64",children:(n=this.state.errorInfo)==null?void 0:n.componentStack})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Recharger la page"}),r.jsx("button",{onClick:()=>window.history.back(),className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"Retour"})]})]})]})}):this.props.children}}const cR=b.createContext(void 0),TP=[{id:1,name:"Marie Dubois",firstName:"Marie",lastName:"Dubois",email:"marie.dubois@email.com",phone:"06 12 34 56 78",address:"123 Rue de la Paix",city:"Paris",postalCode:"75001",idNumber:"1234567890123",pets:[{id:1,name:"Bella",type:"Chien",breed:"Golden Retriever",gender:"female",birthDate:"2021-03-15",weight:"28 kg",color:"Doré",ownerId:1,owner:"Marie Dubois",status:"healthy",lastVisit:"2024-01-15",nextAppointment:"2024-01-25",microchip:"982000123456789",vaccinations:["Rage","DHPP","Lyme"]},{id:4,name:"Luna",type:"Chat",breed:"Siamois",gender:"female",birthDate:"2022-05-12",weight:"3.8 kg",color:"Crème et marron",ownerId:1,owner:"Marie Dubois",status:"healthy",lastVisit:"2024-01-08",nextAppointment:"2024-02-08",microchip:"982000111222333",vaccinations:["Rage","FVRCP","FeLV"]}],lastVisit:"2024-01-15",totalVisits:12},{id:2,name:"Jean Martin",firstName:"Jean",lastName:"Martin",email:"jean.martin@email.com",phone:"06 98 76 54 32",address:"45 Avenue des Roses",city:"Lyon",postalCode:"69000",idNumber:"9876543210987",pets:[{id:2,name:"Whiskers",type:"Chat",breed:"Persan",gender:"male",birthDate:"2019-08-22",weight:"4.5 kg",color:"Blanc",ownerId:2,owner:"Jean Martin",status:"treatment",lastVisit:"2024-01-10",nextAppointment:"2024-01-22",microchip:"982000987654321",vaccinations:["Rage","FVRCP"]}],lastVisit:"2024-01-10",totalVisits:8},{id:3,name:"Sophie Leroux",firstName:"Sophie",lastName:"Leroux",email:"sophie.leroux@email.com",phone:"06 45 67 89 12",address:"78 Boulevard Maritime",city:"Marseille",postalCode:"13000",idNumber:"4567891234567",pets:[{id:3,name:"Rex",type:"Chien",breed:"Berger Allemand",gender:"male",birthDate:"2017-11-10",weight:"32 kg",color:"Noir et feu",ownerId:3,owner:"Sophie Leroux",status:"healthy",lastVisit:"2024-01-18",nextAppointment:"2024-02-01",microchip:"982000555444333",vaccinations:["Rage","DHPP","Bordetella"]},{id:5,name:"Max",type:"Chien",breed:"Labrador",gender:"male",birthDate:"2020-09-03",weight:"30 kg",color:"Noir",ownerId:3,owner:"Sophie Leroux",status:"healthy",lastVisit:"2024-01-22",nextAppointment:"2024-02-22",microchip:"982000444555666",vaccinations:["Rage","DHPP","Lyme","Bordetella"]}],lastVisit:"2024-01-18",totalVisits:15}],th=[{id:1,name:"Bella",type:"Chien",breed:"Golden Retriever",birthDate:"2021-03-15",weight:"28 kg",color:"Doré",ownerId:1,owner:"Marie Dubois",status:"healthy",lastVisit:"2024-01-15",nextAppointment:"2024-01-25",microchip:"982000123456789",vaccinations:["Rage","DHPP","Lyme"]},{id:2,name:"Whiskers",type:"Chat",breed:"Persan",birthDate:"2019-08-22",weight:"4.5 kg",color:"Blanc",ownerId:2,owner:"Jean Martin",status:"treatment",lastVisit:"2024-01-10",nextAppointment:"2024-01-22",microchip:"982000987654321",vaccinations:["Rage","FVRCP"]},{id:3,name:"Rex",type:"Chien",breed:"Berger Allemand",birthDate:"2017-11-10",weight:"32 kg",color:"Noir et feu",ownerId:3,owner:"Sophie Leroux",status:"healthy",lastVisit:"2024-01-18",nextAppointment:"2024-02-01",microchip:"982000555444333",vaccinations:["Rage","DHPP","Bordetella"]}],hp=[{id:1,clientId:1,clientName:"Marie Dubois",petId:1,petName:"Bella",date:"2024-01-15",weight:"28.2 kg",temperature:"38.5",symptoms:"Contrôle annuel, bonne santé générale",diagnosis:"Aucun problème détecté",treatment:"Vaccination annuelle",medications:"Rappel vaccin DHPP",followUp:"Contrôle dans 1 an",cost:"85.00",notes:"Animal en excellente santé",photos:[],createdAt:"2024-01-15T10:30:00Z"},{id:2,clientId:2,clientName:"Jean Martin",petId:2,petName:"Whiskers",date:"2024-01-10",weight:"4.3 kg",temperature:"39.2",symptoms:"Perte d'appétit, léthargie",diagnosis:"Infection urinaire",treatment:"Antibiotiques",medications:"Amoxicilline 50mg 2x/jour pendant 7 jours",followUp:"Contrôle dans 1 semaine",cost:"120.00",notes:"Surveiller la consommation d'eau",photos:[],createdAt:"2024-01-10T14:15:00Z"}],fp=[{id:1,clientId:1,clientName:"Marie Dubois",petId:1,petName:"Bella",date:"2024-01-25",time:"14:30",type:"vaccination",duration:30,reason:"Vaccination annuelle",notes:"Rappel vaccinal complet",status:"scheduled",reminderSent:!1,createdAt:"2024-01-20T09:00:00Z"},{id:2,clientId:2,clientName:"Jean Martin",petId:2,petName:"Whiskers",date:"2024-01-22",time:"10:00",type:"controle",duration:45,reason:"Contrôle post-traitement",notes:"Vérifier l'amélioration de l'appétit",status:"confirmed",reminderSent:!0,createdAt:"2024-01-18T16:30:00Z"},{id:3,clientId:3,clientName:"Sophie Leroux",petId:3,petName:"Rex",date:"2024-01-26",time:"16:00",type:"sterilisation",duration:60,reason:"Stérilisation",notes:"Jeûne 12h avant l'intervention",status:"scheduled",reminderSent:!1,createdAt:"2024-01-19T11:15:00Z"}],mp=[{id:1,consultationId:1,clientId:1,clientName:"Marie Dubois",petId:1,petName:"Bella",date:"2024-01-15",prescribedBy:"Dr. Martin",diagnosis:"Trachéobronchite",medications:[{id:1,name:"Doxycycline",dosage:"100mg",frequency:"2x/jour",duration:"7 jours",instructions:"Donner avec de la nourriture",quantity:14,unit:"comprimés",refills:0,cost:25.5},{id:2,name:"Sirop antitussif",dosage:"5ml",frequency:"3x/jour",duration:"5 jours",instructions:"Donner 30 minutes avant les repas",quantity:75,unit:"ml",refills:1,cost:15}],instructions:"Surveiller la température et l'appétit. Retour en cas d'aggravation.",duration:"7 jours",followUpDate:"2024-01-22",status:"active",notes:"Patient calme, bon appétit maintenu",createdAt:"2024-01-15T10:30:00Z"},{id:2,consultationId:2,clientId:2,clientName:"Jean Martin",petId:2,petName:"Whiskers",date:"2024-01-10",prescribedBy:"Dr. Martin",diagnosis:"Infection urinaire",medications:[{id:3,name:"Amoxicilline",dosage:"50mg",frequency:"2x/jour",duration:"7 jours",instructions:"Donner avec de la nourriture",quantity:14,unit:"comprimés",refills:0,cost:18}],instructions:"Augmenter la consommation d'eau. Surveiller les urines.",duration:"7 jours",followUpDate:"2024-01-17",status:"completed",notes:"Amélioration progressive",createdAt:"2024-01-10T14:15:00Z"}],pp=[{id:1,name:"Ferme des Prairies",owner:"Pierre Durand",address:"123 Route de la Campagne, 45000 Orléans",coordinates:{latitude:47.9056,longitude:1.919},phone:"02 38 45 67 89",email:"p.durand@fermedespra.fr",types:["Bovin laitier"],totalAnimals:85,animalDetails:[{category:"Bovins laitiers",maleCount:3,femaleCount:82,breeds:["Holstein","Prim'Holstein"],ageGroups:["Veaux (0-6 mois)","Génisses (6-24 mois)","Vaches adultes"]}],lastVisit:"2024-01-15",status:"active",veterinarian:"Dr. Dupont",notes:"Exploitation bien gérée, animaux en bonne santé",registrationNumber:"FR45123456789",surfaceArea:45.5,buildingDetails:"Étable moderne 850m², stabulation libre, salle de traite 2x8",equipmentDetails:"Tracteur John Deere, Tank à lait 2000L, Système de ventilation automatique",certifications:["Agriculture Biologique","Haute Valeur Environnementale"],insuranceDetails:"Groupama - Police n°123456789",emergencyContact:{name:"Marie Durand",phone:"06 12 34 56 78",relation:"Épouse"},photos:[{id:"photo_1",url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgdmlld0JveD0iMCAwIDQwMCA0MDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iNDAwIiBmaWxsPSIjRjNGNEY2Ii8+Cjx0ZXh0IHg9IjIwMCIgeT0iMjAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IiM2QjcyODAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5QaG90byBDaGVwdGVsPC90ZXh0Pgo8L3N2Zz4K",description:"Vaches Holstein dans le pré",category:"cheptel",uploadedAt:"2024-01-15T10:00:00Z"},{id:"photo_2",url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgdmlld0JveD0iMCAwIDQwMCA0MDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iNDAwIiBmaWxsPSIjRjNGNEY2Ii8+Cjx0ZXh0IHg9IjIwMCIgeT0iMjAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IiM2QjcyODAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5QaG90byBCw6J0aW1lbnRzPC90ZXh0Pgo8L3N2Zz4K",description:"Étable moderne avec salle de traite",category:"batiments",uploadedAt:"2024-01-15T10:00:00Z"}],createdAt:"2024-01-01T09:00:00Z"},{id:2,name:"Élevage Martin",owner:"Jean-Luc Martin",address:"456 Chemin des Champs, 41000 Blois",coordinates:{latitude:47.5886,longitude:1.334},phone:"02 54 78 90 12",email:"jl.martin@elevagemartin.fr",types:["Porcin"],totalAnimals:150,animalDetails:[{category:"Porcs",maleCount:75,femaleCount:75,breeds:["Large White","Landrace"],ageGroups:["Porcelets (0-2 mois)","Porcs en croissance (2-6 mois)"]}],lastVisit:"2024-01-10",status:"active",veterinarian:"Dr. Martin",notes:"Nouveau système de ventilation installé",registrationNumber:"FR41987654321",surfaceArea:28.3,buildingDetails:"Porcherie 600m², nurserie 200m², système de ventilation automatique",equipmentDetails:"Système d'alimentation automatique, Pompe à lisier, Générateur de secours",certifications:["Label Rouge"],insuranceDetails:"Crédit Agricole Assurances - Police n°987654321",emergencyContact:{name:"Sophie Martin",phone:"06 98 76 54 32",relation:"Sœur"},createdAt:"2024-01-02T10:30:00Z"},{id:3,name:"Ferme Avicole Leroux",owner:"Marie Leroux",address:"789 Avenue des Volailles, 37000 Tours",coordinates:{latitude:47.3936,longitude:.6848},phone:"02 47 12 34 56",email:"m.leroux@avicole-leroux.fr",types:["Avicole"],totalAnimals:2500,animalDetails:[{category:"Poules pondeuses",maleCount:50,femaleCount:2e3,breeds:["ISA Brown","Lohmann Brown"],ageGroups:["Poussins (0-18 semaines)","Pondeuses (18+ semaines)"]},{category:"Poulets de chair",maleCount:225,femaleCount:225,breeds:["Cobb 500","Ross 308"],ageGroups:["0-6 semaines"]}],lastVisit:"2024-01-18",status:"attention",veterinarian:"Dr. Dupont",notes:"Problème de ventilation détecté, surveillance renforcée",registrationNumber:"FR37555666777",surfaceArea:12.8,buildingDetails:"Poulailler automatisé 1200m², aire de parcours 5000m²",equipmentDetails:"Système de ramassage automatique des œufs, Ventilation programmable, Éclairage LED",certifications:["Œufs de France","Bien-être animal"],insuranceDetails:"MMA - Police n°555666777",emergencyContact:{name:"Paul Leroux",phone:"06 47 12 34 56",relation:"Fils"},createdAt:"2024-01-03T14:15:00Z"},{id:4,name:"Ferme Équine du Val",owner:"Sophie Moreau",address:"12 Chemin des Écuries, 78000 Versailles",coordinates:{latitude:48.8044,longitude:2.1232},phone:"01 39 50 12 34",email:"s.moreau@fermeequine.fr",types:["Équin"],totalAnimals:25,animalDetails:[{category:"Chevaux",maleCount:8,femaleCount:17,breeds:["Pur-sang","Selle français","Arabe"],ageGroups:["Poulains (0-3 ans)","Jeunes chevaux (3-7 ans)","Chevaux adultes (7+ ans)"]}],lastVisit:"2024-01-20",status:"active",veterinarian:"Dr. Martin",notes:"Écurie de prestige, chevaux de compétition",registrationNumber:"FR78123456789",surfaceArea:15.2,buildingDetails:"Écuries 800m², manège couvert 1200m², carrière extérieure 2000m²",equipmentDetails:"Tracteur, Système d'arrosage automatique, Éclairage LED, Système de sécurité",certifications:["Bien-être animal","Équitation de tradition française"],insuranceDetails:"Allianz - Police n°781234567",emergencyContact:{name:"Marc Moreau",phone:"06 12 34 56 78",relation:"Époux"},createdAt:"2024-01-04T08:30:00Z"},{id:5,name:"Rucher des Fleurs",owner:"Jean Dupuis",address:"45 Route des Champs, 13000 Marseille",coordinates:{latitude:43.2965,longitude:5.3698},phone:"04 91 23 45 67",email:"j.dupuis@rucherdesfleurs.fr",types:["Apiculture"],totalAnimals:120,animalDetails:[{category:"Abeilles",maleCount:0,femaleCount:120,breeds:["Abeille noire","Buckfast"],ageGroups:["Reines (1-3 ans)","Ouvrières (6 semaines)","Faux-bourdons (3 mois)"]}],lastVisit:"2024-01-12",status:"active",veterinarian:"Dr. Dupont",notes:"Production de miel de qualité, apiculture biologique",registrationNumber:"FR13123456789",surfaceArea:8.5,buildingDetails:"Miellerie 200m², entrepôt 150m², zone de conditionnement 100m²",equipmentDetails:"Extracteur de miel, Centrifugeuse, Filtres, Matériel de conditionnement",certifications:["Agriculture Biologique","Miel de France"],insuranceDetails:"MAIF - Police n°131234567",emergencyContact:{name:"Marie Dupuis",phone:"06 91 23 45 67",relation:"Épouse"},createdAt:"2024-01-05T11:15:00Z"}],gp=[{id:1,date:"2024-01-20",farmId:1,farmName:"Ferme des Prairies",type:"vaccination",animals:"15 bovins",veterinarian:"Dr. Dupont",description:"Vaccination contre la fièvre aphteuse",status:"completed",followUp:"Contrôle dans 6 mois",cost:450,notes:"Intervention réussie, aucun effet secondaire",createdAt:"2024-01-20T08:00:00Z"},{id:2,date:"2024-01-18",farmId:3,farmName:"Ferme Avicole Leroux",type:"urgence",animals:"50 poules",veterinarian:"Dr. Dupont",description:"Traitement infection respiratoire",status:"ongoing",followUp:"Suivi hebdomadaire",cost:320,notes:"Traitement antibiotique en cours",createdAt:"2024-01-18T14:30:00Z"},{id:3,date:"2024-01-15",farmId:2,farmName:"Élevage Martin",type:"controle",animals:"Tous les porcins",veterinarian:"Dr. Martin",description:"Contrôle sanitaire trimestriel",status:"completed",followUp:"Prochain contrôle en avril",cost:280,notes:"Tous les paramètres dans les normes",createdAt:"2024-01-15T10:00:00Z"}],vp=[{id:1,petId:1,petName:"Bella",clientId:1,clientName:"Marie Dubois",vaccineName:"DHPP",vaccineType:"core",vaccinationCategory:"new",dateGiven:"2024-01-15",nextDueDate:"2025-01-15",batchNumber:"VAC2024-001",veterinarian:"Dr. Martin",notes:"Première vaccination annuelle",status:"completed",cost:"45.00",location:"left_shoulder",manufacturer:"Zoetis",expirationDate:"2025-12-31",createdAt:"2024-01-15T10:30:00Z",isInStock:!1,stockQuantity:0,stockDeducted:!1},{id:2,petId:1,petName:"Bella",clientId:1,clientName:"Marie Dubois",vaccineName:"Rage",vaccineType:"rabies",vaccinationCategory:"new",dateGiven:"2024-01-15",nextDueDate:"2027-01-15",batchNumber:"RAB2024-005",veterinarian:"Dr. Martin",notes:"Vaccination antirabique obligatoire",status:"completed",cost:"35.00",location:"right_shoulder",manufacturer:"Merial",expirationDate:"2026-08-15",createdAt:"2024-01-15T10:45:00Z",isInStock:!1,stockQuantity:0,stockDeducted:!1},{id:3,petId:2,petName:"Whiskers",clientId:2,clientName:"Jean Martin",vaccineName:"FVRCP",vaccineType:"core",vaccinationCategory:"new",dateGiven:"2023-08-22",nextDueDate:"2024-08-22",batchNumber:"CAT2023-012",veterinarian:"Dr. Dupont",notes:"Vaccination de base pour chat",status:"overdue",cost:"40.00",location:"subcutaneous",manufacturer:"Virbac",expirationDate:"2025-06-30",createdAt:"2023-08-22T14:20:00Z",isInStock:!1,stockQuantity:0,stockDeducted:!1},{id:4,petId:3,petName:"Rex",clientId:3,clientName:"Sophie Leroux",vaccineName:"Bordetella",vaccineType:"non-core",vaccinationCategory:"new",dateGiven:"2024-01-18",nextDueDate:"2025-01-18",batchNumber:"BOR2024-008",veterinarian:"Dr. Martin",notes:"Vaccination contre la toux de chenil",status:"completed",cost:"30.00",location:"left_shoulder",manufacturer:"Zoetis",expirationDate:"2025-09-30",createdAt:"2024-01-18T16:15:00Z",isInStock:!1,stockQuantity:0,stockDeducted:!1},{id:5,petId:1,petName:"Bella",clientId:1,clientName:"Marie Dubois",vaccineName:"Lyme",vaccineType:"non-core",vaccinationCategory:"new",dateGiven:"2024-01-25",nextDueDate:"2024-04-25",batchNumber:"LYM2024-003",veterinarian:"Dr. Martin",notes:"Vaccination contre la maladie de Lyme",status:"scheduled",cost:"50.00",location:"left_hip",manufacturer:"Boehringer Ingelheim",expirationDate:"2025-11-20",createdAt:"2024-01-25T09:00:00Z",isInStock:!1,stockQuantity:0,stockDeducted:!1}],wc=[{id:1,petId:1,petName:"Bella",clientId:1,clientName:"Marie Dubois",productName:"Frontline Combo Spot-On",productType:"flea_tick",targetParasites:"Puces, Tiques, Poux broyeurs",dateGiven:"2024-01-10",nextDueDate:"2024-02-10",dosage:"1 pipette",administrationRoute:"topical",veterinarian:"Dr. Martin",notes:"Application entre les omoplates",batchNumber:"FRC2024-001",manufacturer:"Boehringer Ingelheim",weight:"28kg",status:"completed",cost:"25.50",sideEffects:"",createdAt:new Date().toISOString(),isInStock:!1,stockQuantity:0,stockDeducted:!1},{id:2,petId:2,petName:"Whiskers",clientId:2,clientName:"Jean Martin",productName:"Milbemax Chat",productType:"worming",targetParasites:"Vers ronds, Vers plats, Vers du cœur",dateGiven:"2024-01-05",nextDueDate:"2024-04-05",dosage:"1/2 comprimé",administrationRoute:"oral",veterinarian:"Dr. Dupont",notes:"Donné avec la nourriture",batchNumber:"MLX2024-008",manufacturer:"Novartis",weight:"4.5kg",status:"completed",cost:"18.00",sideEffects:"",createdAt:new Date().toISOString(),isInStock:!1,stockQuantity:0,stockDeducted:!1}],nh=[{id:1,name:"Frontline Combo Spot-On",species:"Chien",productType:"flea_tick",targetParasites:"Puces, Tiques, Poux broyeurs",description:"Protection complète contre puces et tiques pendant 8 semaines",manufacturer:"Boehringer Ingelheim",intervals:[{offsetDays:0,label:"Application initiale"},{offsetDays:28,label:"Rappel mensuel"}],weightRange:"2-60kg",ageRequirement:"Dès 8 semaines",seasonalTreatment:!0,notes:"Éviter le bain 48h avant et après application",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:2,name:"NexGard Spectra",species:"Chien",productType:"combined",targetParasites:"Puces, Tiques, Vers du cœur, Vers ronds, Vers plats",description:"Protection combinée externe et interne mensuelle",manufacturer:"Boehringer Ingelheim",intervals:[{offsetDays:0,label:"Première dose"},{offsetDays:30,label:"Dose mensuelle"}],weightRange:"2-60kg",ageRequirement:"Dès 8 semaines",seasonalTreatment:!1,notes:"Donner avec la nourriture pour une meilleure absorption",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:3,name:"Drontal Plus",species:"Chien",productType:"worming",targetParasites:"Vers ronds, Vers plats, Ankylostomes, Trichures",description:"Vermifugation large spectre",manufacturer:"Bayer",intervals:[{offsetDays:0,label:"Première vermifugation"},{offsetDays:90,label:"Rappel trimestriel"},{offsetDays:180,label:"Rappel semestriel"}],weightRange:"2-35kg",ageRequirement:"Dès 2 semaines",seasonalTreatment:!1,notes:"Administrer le matin à jeun, répéter selon exposition aux parasites",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:4,name:"Advocate Spot-On",species:"Chien",productType:"combined",targetParasites:"Puces, Vers du cœur, Vers ronds, Ankylostomes, Gale sarcoptique",description:"Protection topique combinée mensuelle",manufacturer:"Bayer",intervals:[{offsetDays:0,label:"Application initiale"},{offsetDays:30,label:"Application mensuelle"}],weightRange:"1-40kg",ageRequirement:"Dès 7 semaines",seasonalTreatment:!1,notes:"Appliquer sur peau sèche entre les omoplates",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:5,name:"Frontline Combo Chat",species:"Chat",productType:"flea_tick",targetParasites:"Puces, Tiques",description:"Protection mensuelle contre puces et tiques chez le chat",manufacturer:"Boehringer Ingelheim",intervals:[{offsetDays:0,label:"Application initiale"},{offsetDays:28,label:"Rappel mensuel"}],weightRange:"1-8kg",ageRequirement:"Dès 8 semaines",seasonalTreatment:!0,notes:"Attention aux réactions cutanées, surveiller 24h après application",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:6,name:"Stronghold Plus",species:"Chat",productType:"combined",targetParasites:"Puces, Vers du cœur, Vers ronds, Ankylostomes, Gale des oreilles",description:"Protection combinée mensuelle pour chats",manufacturer:"Zoetis",intervals:[{offsetDays:0,label:"Application initiale"},{offsetDays:30,label:"Application mensuelle"}],weightRange:"0.5-8kg",ageRequirement:"Dès 6 semaines",seasonalTreatment:!1,notes:"Efficace contre gale des oreilles en 1 application",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:7,name:"Milbemax Chat",species:"Chat",productType:"worming",targetParasites:"Vers ronds, Vers plats, Vers du cœur",description:"Vermifugation complète pour chats",manufacturer:"Novartis",intervals:[{offsetDays:0,label:"Première vermifugation"},{offsetDays:90,label:"Rappel trimestriel"}],weightRange:"0.5-8kg",ageRequirement:"Dès 6 semaines",seasonalTreatment:!1,notes:"Comprimés appétents, peut être donné avec ou sans nourriture",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:8,name:"Eprinex Pour-On",species:"Bovins",productType:"external",targetParasites:"Mouches, Poux, Gales, Vers gastro-intestinaux",description:"Traitement pour-on systémique pour bovins",manufacturer:"Boehringer Ingelheim",intervals:[{offsetDays:0,label:"Application unique"},{offsetDays:84,label:"Rappel saisonnier"}],weightRange:"50-800kg",ageRequirement:"Tous âges",seasonalTreatment:!0,notes:"Temps d'attente viande: 15 jours, lait: 0 jour",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:9,name:"Panacur 100",species:"Bovins",productType:"worming",targetParasites:"Vers gastro-intestinaux, Vers pulmonaires",description:"Vermifuge oral pour bovins",manufacturer:"MSD",intervals:[{offsetDays:0,label:"Traitement initial"},{offsetDays:120,label:"Rappel saisonnier"}],weightRange:"50-800kg",ageRequirement:"Dès 2 semaines",seasonalTreatment:!1,notes:"Temps d'attente viande: 14 jours, lait: 3 jours",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:10,name:"Cydectin 0.1%",species:"Ovins",productType:"combined",targetParasites:"Vers gastro-intestinaux, Vers pulmonaires, Gales",description:"Traitement injectable pour ovins et caprins",manufacturer:"Boehringer Ingelheim",intervals:[{offsetDays:0,label:"Injection unique"},{offsetDays:90,label:"Rappel saisonnier"}],weightRange:"10-100kg",ageRequirement:"Dès 4 semaines",seasonalTreatment:!0,notes:"Temps d'attente viande: 35 jours",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}],EP=[{id:1,name:"Amoxicilline 500mg",category:"medication",subcategory:"Antibiotique",description:"Antibiotique à large spectre",manufacturer:"Boehringer Ingelheim",batchNumber:"AMX2024001",dosage:"500mg",unit:"box",currentStock:15,minimumStock:5,maximumStock:50,purchasePrice:20,sellingPrice:25.5,totalValue:300,expirationDate:"2025-12-31",supplier:"Pharmacie Vétérinaire Centrale",location:"Armoire A - Étagère 1",notes:"Stockage à température ambiante",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-15",isActive:!0,barcode:"1234567890123",sku:"MED-AMX-500"},{id:2,name:"Frontline Combo Spot-On",category:"medication",subcategory:"Antiparasitaire",description:"Traitement contre puces et tiques",manufacturer:"Boehringer Ingelheim",batchNumber:"FRC2024001",dosage:"1 pipette",unit:"pack",currentStock:8,minimumStock:10,maximumStock:100,purchasePrice:15,sellingPrice:18.75,totalValue:120,expirationDate:"2026-06-30",supplier:"VetoSupply Maroc",location:"Armoire B - Étagère 2",notes:"Pour chiens 20-40kg",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-10",isActive:!0,barcode:"2345678901234",sku:"ANT-FRONT-20-40"},{id:3,name:"DHPP Canine",category:"vaccine",subcategory:"Vaccin Core",description:"Vaccin contre Distemper, Hépatite, Parvovirus, Parainfluenza",manufacturer:"Merial",batchNumber:"DHPP2024001",dosage:"1 dose",unit:"vial",currentStock:25,minimumStock:10,maximumStock:100,purchasePrice:9.5,sellingPrice:12,totalValue:237.5,expirationDate:"2025-08-15",supplier:"Vaccins Vétérinaires SA",location:"Réfrigérateur - Étagère 1",notes:"Conservation 2-8°C",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-20",isActive:!0,barcode:"3456789012345",sku:"VAC-DHPP-001"},{id:4,name:"Rage Canine",category:"vaccine",subcategory:"Vaccin Obligatoire",description:"Vaccin antirabique obligatoire",manufacturer:"Merial",batchNumber:"RAB2024001",dosage:"1 dose",unit:"vial",currentStock:12,minimumStock:5,maximumStock:50,purchasePrice:12,sellingPrice:15,totalValue:144,expirationDate:"2025-10-20",supplier:"Vaccins Vétérinaires SA",location:"Réfrigérateur - Étagère 2",notes:"Conservation 2-8°C - Obligatoire",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-18",isActive:!0,barcode:"4567890123456",sku:"VAC-RAB-001"},{id:5,name:"Seringues 5ml",category:"consumable",subcategory:"Matériel d'injection",description:"Seringues stériles 5ml avec aiguilles",manufacturer:"BD Medical",batchNumber:"SYR2024001",dosage:"5ml",unit:"box",currentStock:50,minimumStock:20,maximumStock:200,purchasePrice:.35,sellingPrice:.45,totalValue:17.5,expirationDate:"2027-03-15",supplier:"Matériel Médical Pro",location:"Armoire C - Étagère 1",notes:"Stériles, usage unique",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-12",isActive:!0,barcode:"5678901234567",sku:"CON-SYR-5ML"},{id:6,name:"Masques chirurgicaux",category:"consumable",subcategory:"Protection",description:"Masques chirurgicaux jetables",manufacturer:"3M",batchNumber:"MSK2024001",dosage:"1 unité",unit:"box",currentStock:200,minimumStock:50,maximumStock:500,purchasePrice:.12,sellingPrice:.15,totalValue:24,expirationDate:"2026-12-31",supplier:"Protection Médicale",location:"Armoire D - Étagère 1",notes:"Type IIR, boîte de 50",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-08",isActive:!0,barcode:"6789012345678",sku:"CON-MSK-50"},{id:7,name:"Gants nitrile",category:"consumable",subcategory:"Protection",description:"Gants nitrile non poudrés",manufacturer:"Ansell",batchNumber:"GNT2024001",dosage:"1 paire",unit:"box",currentStock:30,minimumStock:10,maximumStock:100,purchasePrice:.2,sellingPrice:.25,totalValue:6,expirationDate:"2026-08-20",supplier:"Protection Médicale",location:"Armoire D - Étagère 2",notes:"Taille M, boîte de 100",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-05",isActive:!0,barcode:"7890123456789",sku:"CON-GNT-M-100"},{id:8,name:"Thermomètre digital",category:"equipment",subcategory:"Diagnostic",description:"Thermomètre digital vétérinaire",manufacturer:"Gima",batchNumber:"THM2024001",dosage:"1 unité",unit:"unit",currentStock:3,minimumStock:2,maximumStock:10,purchasePrice:35,sellingPrice:45,totalValue:105,expirationDate:void 0,supplier:"Équipement Vétérinaire",location:"Bureau - Tiroir 1",notes:"Résistant à l'eau, écran LCD",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-03",isActive:!0,barcode:"8901234567890",sku:"EQP-THM-DIG"},{id:9,name:"Vitamines B Complex",category:"supplement",subcategory:"Vitamines",description:"Complexe vitaminique B pour animaux",manufacturer:"Virbac",batchNumber:"VIT2024001",dosage:"1ml",unit:"bottle",currentStock:5,minimumStock:3,maximumStock:20,purchasePrice:6.5,sellingPrice:8.5,totalValue:32.5,expirationDate:"2025-11-30",supplier:"Suppléments Vétérinaires",location:"Armoire A - Étagère 3",notes:"Flacon 50ml",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-14",isActive:!0,barcode:"9012345678901",sku:"SUP-VIT-B-50"}],xp=[{id:1,name:"DAPP (DHPP)",species:"Chien",vaccineType:"core",description:"Distemper, Adénovirus, Parvovirus, Parainfluenza - Vaccination essentielle",manufacturer:"Zoetis",intervals:[{offsetDays:0,label:"J0 (première injection)"},{offsetDays:21,label:"21 jours (2e injection)"},{offsetDays:42,label:"42 jours (3e injection)"},{offsetDays:365,label:"1 an (rappel)"}],ageRequirement:"6-8 semaines (renforcer jusqu'à 16 semaines)",notes:"Protocole d'initiation à 6-8-12-16 semaines puis rappel à 1 an, puis triennal",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"},{id:2,name:"Rage (Rabies)",species:"Chien",vaccineType:"rabies",description:"Vaccination antirabique obligatoire selon la législation locale",manufacturer:"Merial",intervals:[{offsetDays:0,label:"À l'âge de 12 semaines minimum"},{offsetDays:365,label:"1 an (rappel)"}],ageRequirement:"12 semaines minimum",notes:"Rappel annuel ou biennal selon réglementation",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"},{id:3,name:"Bordetella bronchiseptica",species:"Chien",vaccineType:"non-core",description:"Protection contre la toux de chenil",manufacturer:"Zoetis",intervals:[{offsetDays:8,label:"8 semaines"}],ageRequirement:"8 semaines",notes:"Vaccination intracellulaire recommandée pour chiens en collectivité",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"},{id:4,name:"Leptospirose",species:"Chien",vaccineType:"non-core",description:"Protection contre les sérovars pathogènes de Leptospira",manufacturer:"Virbac",intervals:[{offsetDays:12,label:"12 semaines"}],ageRequirement:"12 semaines",notes:"Double sérovariels recommandé",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"},{id:5,name:"RCP (FVRCP)",species:"Chat",vaccineType:"core",description:"Calicivirose, Panleucopénie, Rhinotrachéite virale féline",manufacturer:"Virbac",intervals:[{offsetDays:0,label:"6 semaines"},{offsetDays:21,label:"12 semaines"},{offsetDays:28,label:"1 an"}],ageRequirement:"6-8-12 semaines",notes:"Renforcement à 1 an puis rappel triennal ou annuel selon protocole",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"},{id:6,name:"Rage (Rabies)",species:"Chat",vaccineType:"rabies",description:"Vaccination antirabique selon réglementation voyage",manufacturer:"Merial",intervals:[{offsetDays:365,label:"1 an"},{offsetDays:730,label:"2 ans"}],ageRequirement:"12 semaines",notes:"Rappel annuel ou biennal selon réglementation",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"},{id:7,name:"Distemper furet (Maladie de Carré)",species:"Furet",vaccineType:"core",description:"Protection contre le morbillivirus (Carré)",manufacturer:"Merial",intervals:[{offsetDays:6,label:"6 semaines"},{offsetDays:12,label:"8 semaines"}],ageRequirement:"6-8 semaines",notes:"Protocole similaire à celui des chiens",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"},{id:8,name:"Myxomatose",species:"Lapin",vaccineType:"core",description:"Protection contre la myxomatose",manufacturer:"Virbac",intervals:[{offsetDays:180,label:"180 jours"}],ageRequirement:"5-6 semaines",notes:"Vaccination semestrielle",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"},{id:9,name:"VHD (Maladie hémorragique virale)",species:"Lapin",vaccineType:"core",description:"Protection contre VHD de type 1 et 2",manufacturer:"Virbac",intervals:[{offsetDays:6,label:"6 semaines"}],ageRequirement:"6 semaines",notes:"Rappel annuel",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"}];function PS({children:e}){const t=()=>{try{const V=localStorage.getItem("vetpro-clients"),Z=localStorage.getItem("vetpro-pets"),se=localStorage.getItem("vetpro-consultations"),Pe=localStorage.getItem("vetpro-appointments"),Ee=localStorage.getItem("vetpro-prescriptions"),Ne=localStorage.getItem("vetpro-farms"),$e=localStorage.getItem("vetpro-farmInterventions"),Jt=localStorage.getItem("vetpro-vaccinations"),Mt=localStorage.getItem("vetpro-vaccinationProtocols"),Ve=localStorage.getItem("vetpro-antiparasitics"),cn=localStorage.getItem("vetpro-antiparasiticProtocols"),kr=localStorage.getItem("vetpro-stockItems"),Oi=localStorage.getItem("vetpro-stockAlerts"),Di=localStorage.getItem("vetpro-stockMovements"),Mm=localStorage.getItem("vetpro-accountingEntries");if(V&&Z){const D8=JSON.parse(V),QC=JSON.parse(Z),M8=se?JSON.parse(se):hp,I8=Pe?JSON.parse(Pe):fp,$8=Ee?JSON.parse(Ee):mp,R8=Ne?JSON.parse(Ne):pp,F8=$e?JSON.parse($e):gp,L8=Jt?JSON.parse(Jt):vp,B8=Mt?JSON.parse(Mt):xp,V8=Ve?JSON.parse(Ve):wc,z8=cn?JSON.parse(cn):nh,q8=kr?JSON.parse(kr):EP,U8=Oi?JSON.parse(Oi):[],W8=Di?JSON.parse(Di):[],H8=Mm?JSON.parse(Mm):[];return{clients:D8.map(XC=>({...XC,pets:QC.filter(G8=>G8.ownerId===XC.id)})),pets:QC,consultations:M8,appointments:I8,prescriptions:$8,farms:R8,farmInterventions:F8,vaccinations:L8,vaccinationProtocols:B8,antiparasitics:V8,antiparasiticProtocols:z8,stockItems:q8,stockAlerts:U8,stockMovements:W8,accountingEntries:H8}}}catch(V){console.error("Erreur lors du chargement des données:",V)}return{clients:TP.map(V=>({...V,pets:th.filter(Z=>Z.ownerId===V.id)})),pets:th,consultations:hp,appointments:fp,prescriptions:mp,farms:pp,farmInterventions:gp,vaccinations:vp,vaccinationProtocols:xp,antiparasitics:wc,antiparasiticProtocols:nh,stockItems:EP,stockAlerts:[],stockMovements:[],accountingEntries:[]}},n=(U,V,Z,se=d,Pe=f,Ee=g,Ne=v,$e=x,Jt=N,Mt=C,Ve=_,cn=T,kr=A,Oi=L,Di=z)=>{try{localStorage.setItem("vetpro-clients",JSON.stringify(U)),localStorage.setItem("vetpro-pets",JSON.stringify(V)),localStorage.setItem("vetpro-consultations",JSON.stringify(Z)),localStorage.setItem("vetpro-appointments",JSON.stringify(se)),localStorage.setItem("vetpro-prescriptions",JSON.stringify(Pe)),localStorage.setItem("vetpro-farms",JSON.stringify(Ee)),localStorage.setItem("vetpro-farmInterventions",JSON.stringify(Ne)),localStorage.setItem("vetpro-vaccinations",JSON.stringify($e)),localStorage.setItem("vetpro-vaccinationProtocols",JSON.stringify(Jt)),localStorage.setItem("vetpro-antiparasitics",JSON.stringify(Mt)),localStorage.setItem("vetpro-antiparasiticProtocols",JSON.stringify(Ve)),localStorage.setItem("vetpro-stockItems",JSON.stringify(cn)),localStorage.setItem("vetpro-stockAlerts",JSON.stringify(kr)),localStorage.setItem("vetpro-stockMovements",JSON.stringify(Oi)),localStorage.setItem("vetpro-accountingEntries",JSON.stringify(Di))}catch(Mm){console.error("Erreur lors de la sauvegarde des données:",Mm)}},s=t(),[a,i]=b.useState(s.clients),[o,l]=b.useState(s.pets),[c,u]=b.useState(s.consultations),[d,h]=b.useState(s.appointments),[f,m]=b.useState(s.prescriptions),[g,p]=b.useState(s.farms),[v,j]=b.useState(s.farmInterventions),[x,y]=b.useState(s.vaccinations),[N,w]=b.useState(s.vaccinationProtocols),[C,S]=b.useState(s.antiparasitics),[_,k]=b.useState(s.antiparasiticProtocols),[T,P]=b.useState(s.stockItems||[]),[A,B]=b.useState(s.stockAlerts||[]),[L,H]=b.useState(s.stockMovements||[]),[z,$]=b.useState(s.accountingEntries||[]);b.useEffect(()=>{localStorage.getItem("vetpro-antiparasiticProtocols")||localStorage.setItem("vetpro-antiparasiticProtocols",JSON.stringify(nh)),localStorage.getItem("vetpro-antiparasitics")||(localStorage.setItem("vetpro-antiparasitics",JSON.stringify(wc)),S(wc))},[]),b.useEffect(()=>{const U=new Date;new Date(U.getFullYear(),U.getMonth(),1),new Date(U.getFullYear(),U.getMonth()+1,0)},[]),b.useEffect(()=>{const U=new Date,V=new Date(U.getFullYear(),U.getMonth(),1),Z=new Date(U.getFullYear(),U.getMonth()+1,0);Vy(V.toISOString().split("T")[0],Z.toISOString().split("T")[0]),zy(V.toISOString().split("T")[0],Z.toISOString().split("T")[0])},[c,x,C,f,L]),b.useEffect(()=>{},[C]),b.useEffect(()=>{a.length>0&&c.length>=0&&x.length>=0&&C.length>=0&&d.length>=0&&a.forEach(U=>{re(U.id)})},[a.length,c.length,x.length,C.length,d.length]);const I=U=>{const V={...U,name:`${U.firstName} ${U.lastName}`,id:Math.max(...a.map(se=>se.id),0)+1,pets:[],lastVisit:new Date().toISOString().split("T")[0],totalVisits:0},Z=[...a,V];i(Z),n(Z,o,c,d,f,g,v,x)},E=U=>{const V={...U,id:Math.max(...o.map(Pe=>Pe.id),0)+1,status:U.status||"healthy",lastVisit:new Date().toISOString().split("T")[0]},Z=[...o,V];l(Z);const se=a.map(Pe=>Pe.id===U.ownerId?{...Pe,pets:[...Pe.pets,{id:V.id,name:V.name,type:V.type,breed:V.breed,birthDate:V.birthDate,weight:V.weight,color:V.color,microchip:V.microchip,medicalNotes:V.medicalNotes,photo:V.photo,ownerId:V.ownerId,owner:V.owner,status:V.status,lastVisit:V.lastVisit,nextAppointment:V.nextAppointment,vaccinations:V.vaccinations}]}:Pe);i(se),n(se,Z,c,d,f,g,v,x)},q=(U,V)=>{const Z=a.map(se=>se.id===U?{...se,...V,name:V.firstName&&V.lastName?`${V.firstName} ${V.lastName}`:se.name}:se);i(Z),n(Z,o,c,d,f,g,v,x)},Y=(U,V)=>{({...o.find(Pe=>Pe.id===U),...V});const Z=o.map(Pe=>Pe.id===U?{...Pe,...V}:Pe);l(Z);const se=a.map(Pe=>({...Pe,pets:Pe.pets.map(Ee=>Ee.id===U?{...Ee,...V}:Ee)}));i(se),n(se,Z,c)},re=U=>{const V=a.find(Ve=>Ve.id===U);if(!V)return;const Z=c.filter(Ve=>Ve.clientId===U),se=x.filter(Ve=>Ve.clientId===U),Pe=C.filter(Ve=>Ve.clientId===U),Ee=d.filter(Ve=>Ve.clientId===U&&Ve.status==="completed"),Ne=Z.length+se.length+Pe.length+Ee.length,$e=[...Z.map(Ve=>({date:Ve.date,type:"consultation"})),...se.map(Ve=>({date:Ve.dateGiven,type:"vaccination"})),...Pe.map(Ve=>({date:Ve.dateGiven,type:"antiparasitic"})),...Ee.map(Ve=>({date:Ve.date,type:"appointment"}))],Jt=$e.length>0?$e.reduce((Ve,cn)=>new Date(cn.date)>new Date(Ve.date)?cn:Ve).date:V.lastVisit,Mt=a.map(Ve=>Ve.id===U?{...Ve,totalVisits:Ne,lastVisit:Jt}:Ve);return i(Mt),{totalVisits:Ne,lastVisit:Jt}},oe=U=>{const V={...U,id:Math.max(...T.map(se=>se.id),0)+1,lastUpdated:new Date().toISOString(),totalValue:U.currentStock*U.purchasePrice},Z=[...T,V];return P(Z),n(a,o,c,d,f,g,v,x,N,C,_,Z,A,L),V},ae=(U,V)=>{const Z=T.map(se=>{if(se.id===U){const Pe={...se,...V};return(V.currentStock!==void 0||V.purchasePrice!==void 0)&&(Pe.totalValue=Pe.currentStock*Pe.purchasePrice),Pe.lastUpdated=new Date().toISOString(),Pe}return se});return P(Z),n(a,o,c,d,f,g,v,x,N,C,_,Z,A,L),Z.find(se=>se.id===U)},me=U=>{const V=T.filter(Z=>Z.id!==U);P(V),n(a,o,c,d,f,g,v,x,N,C,_,V,A,L)},we=U=>{const V={...U,id:Math.max(...L.map(se=>se.id),0)+1},Z=[...L,V];return H(Z),n(a,o,c,d,f,g,v,x,N,C,_,T,A,Z),V},ue=()=>{const U=[],V=new Date().toISOString().split("T")[0],Z=new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0];return T.forEach(se=>{se.currentStock<=se.minimumStock&&U.push({id:U.length+1,itemId:se.id,itemName:se.name,type:"low_stock",message:`Stock bas: ${se.currentStock} ${se.unit} restant(s)`,severity:se.currentStock===0?"critical":"high",createdAt:new Date().toISOString(),isRead:!1}),se.expirationDate&&(se.expirationDate<V?U.push({id:U.length+1,itemId:se.id,itemName:se.name,type:"expired",message:`Expiré le ${se.expirationDate}`,severity:"critical",createdAt:new Date().toISOString(),isRead:!1}):se.expirationDate<=Z&&U.push({id:U.length+1,itemId:se.id,itemName:se.name,type:"expiring_soon",message:`Expire le ${se.expirationDate}`,severity:"medium",createdAt:new Date().toISOString(),isRead:!1}))}),U},J=U=>{const V={...U,id:Math.max(...c.map(Ee=>Ee.id),0)+1,createdAt:new Date().toISOString(),photos:U.photos||[]},Z=[...c,V];u(Z);const se=o.map(Ee=>Ee.id===U.petId?{...Ee,lastVisit:U.date}:Ee);l(se);const Pe=a.map(Ee=>({...Ee,pets:Ee.pets.map(Ne=>Ne.id===U.petId?{...Ne,lastVisit:U.date}:Ne)}));i(Pe),re(U.clientId),n(Pe,se,Z)},ee=U=>{if(!o.find(Pe=>Pe.id===U))return;const Z=o.filter(Pe=>Pe.id!==U);l(Z);const se=a.map(Pe=>({...Pe,pets:Pe.pets.filter(Ee=>Ee.id!==U)}));i(se),n(se,Z,c)},G=()=>{localStorage.removeItem("vetpro-clients"),localStorage.removeItem("vetpro-pets"),localStorage.removeItem("vetpro-consultations"),localStorage.removeItem("vetpro-appointments"),localStorage.removeItem("vetpro-prescriptions"),localStorage.removeItem("vetpro-farms"),localStorage.removeItem("vetpro-farmInterventions"),localStorage.removeItem("vetpro-vaccinations"),localStorage.removeItem("vetpro-vaccinationProtocols"),localStorage.removeItem("vetpro-antiparasitics"),localStorage.removeItem("vetpro-antiparasiticProtocols");const U=TP.map(V=>({...V,pets:th.filter(Z=>Z.ownerId===V.id)}));i(U),l(th),u(hp),h(fp),m(mp),p(pp),j(gp),y(vp),w(xp),S(wc),k(nh),n(U,th,hp,fp,mp,pp,gp,vp,xp,wc,nh)},W=()=>{const U={clients:a,pets:o,consultations:c,appointments:d,prescriptions:f,farms:g,farmInterventions:v,vaccinations:x,vaccinationProtocols:N,antiparasitics:C,antiparasiticProtocols:_},V=new Blob([JSON.stringify(U,null,2)],{type:"application/json"}),Z=URL.createObjectURL(V),se=document.createElement("a");se.href=Z,se.download=`vetpro-data-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(se),se.click(),document.body.removeChild(se),URL.revokeObjectURL(Z)},O=U=>{const V=U.clients.map(Z=>({...Z,pets:U.pets.filter(se=>se.ownerId===Z.id)}));i(V),l(U.pets),u(U.consultations||[]),h(U.appointments||[]),m(U.prescriptions||[]),p(U.farms||[]),j(U.farmInterventions||[]),y(U.vaccinations||[]),w(U.vaccinationProtocols||[]),S(U.antiparasitics||[]),k(U.antiparasiticProtocols||[]),n(V,U.pets,U.consultations||[],U.appointments||[],U.prescriptions||[],U.farms||[],U.farmInterventions||[],U.vaccinations||[],U.vaccinationProtocols||[],U.antiparasitics||[],U.antiparasiticProtocols||[])},le=(U,V)=>{const Z=c.map(se=>se.id===U?{...se,...V}:se);u(Z),n(a,o,Z)},ce=U=>{const V=c.filter(Z=>Z.id!==U);u(V),n(a,o,V)},ie=U=>{const V=T.find(Z=>Z.name.toLowerCase()===U.productName.toLowerCase()&&Z.category==="medication"&&Z.isActive);return V&&V.currentStock>=1?{...U,stockItemId:V.id,isInStock:!0,stockQuantity:V.currentStock,stockDeducted:!0}:V&&V.currentStock>0?{...U,stockItemId:V.id,isInStock:!0,stockQuantity:V.currentStock,stockDeducted:!1}:{...U,isInStock:!1,stockQuantity:0,stockDeducted:!1}},Ce=U=>{const V=ie(U);let Z=[...T];if(V.stockDeducted&&V.stockItemId){const Ee=Z.findIndex(Ne=>Ne.id===V.stockItemId);if(Ee!==-1){const Ne=Z[Ee];Z[Ee]={...Ne,currentStock:Ne.currentStock-1,lastUpdated:new Date().toISOString()},we({itemId:V.stockItemId,itemName:V.productName,type:"out",quantity:1,reason:"Traitement antiparasitaire",reference:`Antiparasitaire #${Math.max(0,...C.map($e=>$e.id))+1}`,performedBy:V.veterinarian,date:new Date().toISOString(),notes:`Traitement antiparasitaire de ${V.petName} - ${V.productName}`})}}const se={...V,id:Math.max(0,...C.map(Ee=>Ee.id))+1,createdAt:new Date().toISOString()},Pe=[...C,se];S(Pe),P(Z),re(U.clientId),n(a,o,c,d,f,g,v,x,N,Pe,_,Z,A,L),localStorage.getItem("vetpro-antiparasitics")},st=(U,V)=>{const Z=C.map(se=>se.id===U?{...se,...V}:se);S(Z),n(a,o,c,d,f,g,v,x,N,Z,_)},tt=U=>{const V=C.filter(Z=>Z.id!==U);S(V),n(a,o,c,d,f,g,v,x,N,V,_)},wt=U=>{const V={...U,id:Math.max(0,..._.map(se=>se.id))+1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},Z=[..._,V];k(Z),localStorage.setItem("vetpro-antiparasiticProtocols",JSON.stringify(Z))},tn=(U,V)=>{const Z=_.map(se=>se.id===U?{...se,...V,updatedAt:new Date().toISOString()}:se);k(Z),localStorage.setItem("vetpro-antiparasiticProtocols",JSON.stringify(Z))},bt=U=>{const V=_.filter(Z=>Z.id!==U);k(V),localStorage.setItem("vetpro-antiparasiticProtocols",JSON.stringify(V))},gt=U=>C.find(V=>V.id===U),Qt=U=>C.filter(Z=>Z.petId===U),mn=U=>C.filter(V=>V.clientId===U),ut=()=>{const U=new Date().toISOString().split("T")[0];return C.filter(V=>V.nextDueDate&&V.nextDueDate<U&&V.status!=="completed")},Xt=(U=7)=>{const V=new Date,Z=new Date(V.getTime()+U*24*60*60*1e3);return C.filter(se=>{if(!se.nextDueDate)return!1;const Pe=new Date(se.nextDueDate);return Pe>=V&&Pe<=Z})},qr=U=>C.filter(V=>V.status===U),Ur=U=>_.find(V=>V.id===U),Wo=U=>_.filter(V=>V.species===U&&V.isActive),er=()=>_.filter(U=>U.isActive),uc=U=>a.find(V=>V.id===U),Ln=U=>o.find(V=>V.id===U),Ha=U=>c.find(V=>V.id===U),Os=U=>o.filter(V=>V.ownerId===U),dc=U=>c.filter(V=>V.petId===U),ha=U=>c.filter(V=>V.clientId===U),Q=U=>{const V={...U,id:Math.max(...d.map(se=>se.id),0)+1,createdAt:new Date().toISOString()},Z=[...d,V];h(Z),re(U.clientId),n(a,o,c,Z,f)},_e=(U,V)=>{const Z=d.map(se=>se.id===U?{...se,...V}:se);h(Z),n(a,o,c,Z,f)},ye=U=>{const V=d.filter(Z=>Z.id!==U);h(V),n(a,o,c,V,f)},ln=U=>d.find(V=>V.id===U),Ar=U=>d.filter(V=>V.clientId===U),Ds=U=>d.filter(V=>V.petId===U),hs=U=>d.filter(V=>V.date===U),Ly=()=>{const U=new Date().toISOString().split("T")[0];return d.filter(V=>V.date>=U&&V.status!=="cancelled"&&V.status!=="completed").sort((V,Z)=>new Date(V.date+"T"+V.time).getTime()-new Date(Z.date+"T"+Z.time).getTime())},Xe=()=>{const U=new Date().toISOString().split("T")[0];return d.filter(V=>V.date<U&&V.status==="scheduled").sort((V,Z)=>new Date(V.date+"T"+V.time).getTime()-new Date(Z.date+"T"+Z.time).getTime())},Nt=U=>U.map(V=>{const Z=T.find(se=>se.name.toLowerCase()===V.name.toLowerCase()&&se.category==="medication"&&se.isActive);return Z&&Z.currentStock>=V.quantity?{...V,stockItemId:Z.id,isInStock:!0,stockQuantity:Z.currentStock,stockDeducted:!0}:Z&&Z.currentStock>0?{...V,stockItemId:Z.id,isInStock:!0,stockQuantity:Z.currentStock,stockDeducted:!1}:{...V,isInStock:!1,stockQuantity:0,stockDeducted:!1}}),Rt=U=>{const V=Nt(U.medications);let Z=[...T];V.forEach(Ee=>{if(Ee.stockDeducted&&Ee.stockItemId){const Ne=Z.findIndex($e=>$e.id===Ee.stockItemId);if(Ne!==-1){const $e=Z[Ne];Z[Ne]={...$e,currentStock:$e.currentStock-Ee.quantity,lastUpdated:new Date().toISOString()},we({itemId:Ee.stockItemId,itemName:Ee.name,type:"out",quantity:Ee.quantity,reason:"Prescription médicale",reference:`Prescription #${Math.max(...f.map(Jt=>Jt.id),0)+1}`,performedBy:U.prescribedBy,date:new Date().toISOString(),notes:`Prescription pour ${U.petName} - ${U.diagnosis}`})}}});const se={...U,medications:V,id:Math.max(...f.map(Ee=>Ee.id),0)+1,createdAt:new Date().toISOString()},Pe=[...f,se];m(Pe),P(Z),n(a,o,c,d,Pe,g,v,x,N,C,_,Z,A,L,z)},Wr=(U,V)=>{const Z=f.map(se=>se.id===U?{...se,...V}:se);m(Z),n(a,o,c,d,Z,g,v,x,N,C,_,T,A,L,z)},Hr=U=>{const V=f.filter(Z=>Z.id!==U);m(V),n(a,o,c,d,V,g,v,x,N,C,_,T,A,L,z)},fa=U=>f.find(V=>V.id===U),Ga=U=>f.filter(V=>V.petId===U),Gr=U=>f.filter(V=>V.consultationId===U),ma=()=>f.filter(U=>U.status==="active").sort((U,V)=>new Date(V.date).getTime()-new Date(U.date).getTime()),t8=U=>{const V={...U,id:Math.max(...g.map(se=>se.id),0)+1,createdAt:new Date().toISOString()},Z=[...g,V];p(Z),n(a,o,c,d,f,Z,v)},n8=(U,V)=>{const Z=g.map(se=>se.id===U?{...se,...V}:se);p(Z),n(a,o,c,d,f,Z,v)},r8=U=>{const V=g.filter(Z=>Z.id!==U);p(V),n(a,o,c,d,f,V,v)},s8=U=>{const V={...U,id:Math.max(...v.map(se=>se.id),0)+1,createdAt:new Date().toISOString()},Z=[...v,V];j(Z),n(a,o,c,d,f,g,Z)},a8=(U,V)=>{const Z=v.map(se=>se.id===U?{...se,...V}:se);j(Z),n(a,o,c,d,f,g,Z)},i8=U=>{const V=v.filter(Z=>Z.id!==U);j(V),n(a,o,c,d,f,g,V)},o8=U=>g.find(V=>V.id===U),l8=U=>v.find(V=>V.id===U),c8=U=>v.filter(V=>V.farmId===U),u8=()=>{const U=new Date().toISOString().split("T")[0];return v.filter(V=>V.date>=U&&V.status!=="cancelled").sort((V,Z)=>new Date(V.date).getTime()-new Date(Z.date).getTime())},d8=U=>g.filter(V=>V.status===U),h8=U=>{const V=T.find(Z=>Z.name.toLowerCase()===U.vaccineName.toLowerCase()&&Z.category==="vaccine"&&Z.isActive);return V&&V.currentStock>=1?{...U,stockItemId:V.id,isInStock:!0,stockQuantity:V.currentStock,stockDeducted:!0}:V&&V.currentStock>0?{...U,stockItemId:V.id,isInStock:!0,stockQuantity:V.currentStock,stockDeducted:!1}:{...U,isInStock:!1,stockQuantity:0,stockDeducted:!1}},By=U=>{const V=h8(U);let Z=[...T];if(V.stockDeducted&&V.stockItemId){const Pe=Z.findIndex(Ee=>Ee.id===V.stockItemId);if(Pe!==-1){const Ee=Z[Pe];Z[Pe]={...Ee,currentStock:Ee.currentStock-1,lastUpdated:new Date().toISOString()},we({itemId:V.stockItemId,itemName:V.vaccineName,type:"out",quantity:1,reason:"Vaccination",reference:`Vaccination #${Math.max(...x.map(Ne=>Ne.id),0)+1}`,performedBy:V.veterinarian,date:new Date().toISOString(),notes:`Vaccination de ${V.petName} - ${V.vaccineName}`})}}const se={...V,id:Math.max(...x.map(Pe=>Pe.id),0)+1,createdAt:new Date().toISOString()};return y(Pe=>{const Ee=[...Pe,se];return re(U.clientId),n(a,o,c,d,f,g,v,Ee,N,C,_,Z,A,L),Ee}),P(Z),se.id},Om=(U,V)=>{const Z=x.map(se=>se.id===U?{...se,...V}:se);y(Z),n(a,o,c,d,f,g,v,Z)},f8=U=>{const V=x.find(se=>se.id===U);if(!V)return;let Z=[...x];V.vaccinationCategory==="new"?(x.filter(se=>se.originalVaccinationId===U),Z=x.filter(se=>se.id!==U&&se.originalVaccinationId!==U)):Z=x.filter(se=>se.id!==U),y(Z),n(a,o,c,d,f,g,v,Z)},Dm=U=>x.find(V=>V.id===U),m8=U=>x.filter(V=>V.petId===U),p8=U=>x.filter(V=>V.clientId===U),g8=()=>{const U=new Date().toISOString().split("T")[0];return x.filter(V=>V.nextDueDate<U&&V.status!=="completed").sort((V,Z)=>new Date(V.nextDueDate).getTime()-new Date(Z.nextDueDate).getTime())},v8=()=>{const U=new Date,V=new Date(U.getTime()+30*24*60*60*1e3).toISOString().split("T")[0],Z=U.toISOString().split("T")[0];return x.filter(se=>se.nextDueDate>=Z&&se.nextDueDate<=V&&se.status!=="completed").sort((se,Pe)=>new Date(se.nextDueDate).getTime()-new Date(Pe.nextDueDate).getTime())},x8=U=>x.filter(V=>V.status===U),y8=()=>{const U=new Date().toISOString().split("T")[0];let V=!1;const Z=x.map(se=>se.status==="completed"?se:se.nextDueDate<U&&se.status!=="overdue"?(V=!0,{...se,status:"overdue"}):se.nextDueDate>=U&&se.status!=="scheduled"?(V=!0,{...se,status:"scheduled"}):se);return V&&(y(Z),n(a,o,c,d,f,g,v,Z)),Z},j8=U=>{const V={...U,id:Math.max(...N.map(se=>se.id),0)+1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},Z=[...N,V];w(Z),n(a,o,c,d,f,g,v,x,Z)},b8=(U,V)=>{const Z=N.map(se=>se.id===U?{...se,...V,updatedAt:new Date().toISOString()}:se);w(Z),n(a,o,c,d,f,g,v,x,Z)},w8=U=>{const V=N.filter(Z=>Z.id!==U);w(V),n(a,o,c,d,f,g,v,x,V)},N8=U=>N.find(V=>V.id===U),S8=U=>N.filter(V=>V.species===U&&V.isActive),C8=()=>N.filter(U=>U.isActive),_8=(U,V,Z)=>{const se=N.find(Ne=>Ne.name===U&&Ne.species===V&&Ne.isActive);if(!se||!se.intervals.length)return null;const Pe=se.intervals[se.intervals.length-1],Ee=new Date(Z);return Ee.setDate(Ee.getDate()+Pe.offsetDays),Ee.toISOString().split("T")[0]},P8=(U,V,Z)=>{var Mt;const se=Dm(U);if(!se)return;const Pe={clientId:se.clientId,clientName:se.clientName,petId:se.petId,petName:se.petName,date:V,time:Z,type:"vaccination",duration:30,reason:`Rappel vaccinal - ${se.vaccineName}`,notes:`Rappel pour ${se.vaccineName} (vaccination originale ID: ${U})`,status:"scheduled",reminderSent:!1};Q(Pe);const Ee=Math.max(...d.map(Ve=>Ve.id),0)+1,Ne={petId:se.petId,petName:se.petName,clientId:se.clientId,clientName:se.clientName,vaccineName:se.vaccineName,vaccineType:se.vaccineType,vaccinationCategory:"reminder",dateGiven:V,nextDueDate:se.nextDueDate,batchNumber:se.batchNumber,veterinarian:se.veterinarian,notes:`Rappel de ${se.vaccineName} (original: ${U})`,status:"scheduled",cost:se.cost,location:se.location,manufacturer:se.manufacturer,originalVaccinationId:U,reminderAppointmentId:Ee,isReminder:!0};By(Ne);const $e={id:Math.max(...((Mt=se.reminderHistory)==null?void 0:Mt.map(Ve=>Ve.id))||[0],0)+1,vaccinationId:U,appointmentId:Ee,scheduledDate:V,status:"scheduled",notes:`Rappel programmé pour ${se.vaccineName}`,createdAt:new Date().toISOString()},Jt=[...se.reminderHistory||[],$e];return Om(U,{reminderHistory:Jt}),{appointment:Pe,reminderVaccination:Ne,reminder:$e}},A8=(U,V,Z)=>{var Ne;const se=Dm(U);if(!se)return;const Ee={status:"completed",reminderHistory:((Ne=se.reminderHistory)==null?void 0:Ne.map($e=>$e.appointmentId===V?{...$e,status:"completed"}:$e))||[],reminderAppointmentId:void 0};return Z&&(Ee.nextDueDate=Z),Om(U,Ee),_e(V,{status:"completed"}),se},k8=(U,V)=>{const Z=Dm(U);if(!Z)return null;const se={petId:Z.petId,petName:Z.petName,clientId:Z.clientId,clientName:Z.clientName,vaccineName:Z.vaccineName,vaccineType:Z.vaccineType,vaccinationCategory:"reminder",dateGiven:V.datePerformed,nextDueDate:V.newNextDueDate||Z.nextDueDate,calculatedDueDate:Z.calculatedDueDate,batchNumber:V.batchNumber||Z.batchNumber,veterinarian:V.veterinarian,notes:V.notes||`Rappel effectué - ${Z.vaccineName}`,status:"completed",cost:Z.cost,location:Z.location,manufacturer:Z.manufacturer,expirationDate:Z.expirationDate,adverseReactions:Z.adverseReactions,originalVaccinationId:U,isReminder:!0};By(se);const Pe={status:"completed",reminderAppointmentId:void 0};return V.newNextDueDate&&(Pe.nextDueDate=V.newNextDueDate),Om(U,Pe),se},hc=U=>{const V={...U,id:Math.max(...z.map(se=>se.id),0)+1,createdAt:new Date().toISOString()},Z=[...z,V];return $(Z),n(a,o,c,d,f,g,v,x,N,C,_,T,A,L,Z),V},T8=(U,V)=>{const Z=z.map(se=>se.id===U?{...se,...V}:se);$(Z),n(a,o,c,d,f,g,v,x,N,C,_,T,A,L,Z)},E8=U=>{const V=z.filter(Z=>Z.id!==U);$(V),n(a,o,c,d,f,g,v,x,N,C,_,T,A,L,V)},Vy=(U,V)=>{const Z=new Date(U),se=new Date(V);let Pe=0;const Ee={consultations:0,vaccinations:0,antiparasitics:0,prescriptions:0,stockSales:0,manualEntries:0,recurringCharges:0};return c.filter(Ne=>{const $e=new Date(Ne.date);return $e>=Z&&$e<=se}).forEach(Ne=>{var Mt;const $e=parseFloat(((Mt=Ne.cost)==null?void 0:Mt.toString())||"0");Pe+=$e,Ee.consultations+=$e,z.find(Ve=>Ve.source==="consultation"&&Ve.sourceId===Ne.id)||hc({type:"revenue",category:"automatic",frequency:"occasional",description:`Consultation - ${Ne.petName}`,amount:$e,date:Ne.date,reference:`Consultation #${Ne.id}`,source:"consultation",sourceId:Ne.id,notes:`Consultation automatique pour ${Ne.petName}`})}),x.filter(Ne=>{const $e=new Date(Ne.dateGiven);return $e>=Z&&$e<=se}).forEach(Ne=>{var Mt;const $e=parseFloat(((Mt=Ne.cost)==null?void 0:Mt.toString())||"0");Pe+=$e,Ee.vaccinations+=$e,z.find(Ve=>Ve.source==="vaccination"&&Ve.sourceId===Ne.id)||hc({type:"revenue",category:"automatic",frequency:"occasional",description:`Vaccination - ${Ne.vaccineName}`,amount:$e,date:Ne.dateGiven,reference:`Vaccination #${Ne.id}`,source:"vaccination",sourceId:Ne.id,notes:`Vaccination automatique pour ${Ne.petName}`})}),C.filter(Ne=>{const $e=new Date(Ne.dateGiven);return $e>=Z&&$e<=se}).forEach(Ne=>{var Mt;const $e=parseFloat(((Mt=Ne.cost)==null?void 0:Mt.toString())||"0");Pe+=$e,Ee.antiparasitics+=$e,z.find(Ve=>Ve.source==="antiparasitic"&&Ve.sourceId===Ne.id)||hc({type:"revenue",category:"automatic",frequency:"occasional",description:`Antiparasitaire - ${Ne.productName}`,amount:$e,date:Ne.dateGiven,reference:`Antiparasitaire #${Ne.id}`,source:"antiparasitic",sourceId:Ne.id,notes:`Antiparasitaire automatique pour ${Ne.petName}`})}),f.filter(Ne=>{const $e=new Date(Ne.createdAt);return $e>=Z&&$e<=se}).forEach(Ne=>{const $e=Ne.medications.reduce((Mt,Ve)=>{var cn;return Mt+parseFloat(((cn=Ve.cost)==null?void 0:cn.toString())||"0")*Ve.quantity},0);Pe+=$e,Ee.prescriptions+=$e,!z.find(Mt=>Mt.source==="prescription"&&Mt.sourceId===Ne.id)&&$e>0&&hc({type:"revenue",category:"automatic",frequency:"occasional",description:`Prescription - ${Ne.petName}`,amount:$e,date:Ne.createdAt,reference:`Prescription #${Ne.id}`,source:"prescription",sourceId:Ne.id,notes:`Prescription automatique pour ${Ne.petName}`})}),{totalRevenue:Pe,revenueBreakdown:Ee}},zy=(U,V)=>{const Z=new Date(U),se=new Date(V);let Pe=0;const Ee={stockPurchases:0,salaries:0,rent:0,taxes:0,insurance:0,other:0,manualEntries:0,recurringCharges:0};return L.filter(Ne=>{const $e=new Date(Ne.date);return $e>=Z&&$e<=se&&Ne.type==="in"&&Ne.reason==="Achat fournisseur"}).forEach(Ne=>{const $e=T.find(Jt=>Jt.id===Ne.itemId);if($e){const Jt=$e.purchasePrice*Ne.quantity;Pe+=Jt,Ee.stockPurchases+=Jt,z.find(Ve=>Ve.source==="stock_purchase"&&Ve.reference===Ne.reference)||hc({type:"expense",category:"automatic",frequency:"occasional",description:`Achat stock - ${Ne.itemName}`,amount:Jt,date:Ne.date,reference:Ne.reference,source:"stock_purchase",notes:`Achat automatique de ${Ne.quantity} ${Ne.itemName}`})}}),{totalExpenses:Pe,expenseBreakdown:Ee}},O8=(U,V,Z)=>{const{totalRevenue:se,revenueBreakdown:Pe}=Vy(V,Z),{totalExpenses:Ee,expenseBreakdown:Ne}=zy(V,Z),$e=z.filter(cn=>{const kr=new Date(cn.date),Oi=new Date(V),Di=new Date(Z);return kr>=Oi&&kr<=Di&&cn.category==="manual"&&cn.type==="revenue"}).reduce((cn,kr)=>cn+kr.amount,0),Jt=z.filter(cn=>{const kr=new Date(cn.date),Oi=new Date(V),Di=new Date(Z);return kr>=Oi&&kr<=Di&&cn.category==="manual"&&cn.type==="expense"}).reduce((cn,kr)=>cn+kr.amount,0);Pe.manualEntries=$e,Ne.manualEntries=Jt;const Mt=se+$e,Ve=Ee+Jt;return{period:U,totalRevenue:Mt,totalExpenses:Ve,netIncome:Mt-Ve,revenueBreakdown:Pe,expenseBreakdown:Ne}};return r.jsx(cR.Provider,{value:{clients:a,pets:o,consultations:c,appointments:d,prescriptions:f,farms:g,farmInterventions:v,vaccinations:x,vaccinationProtocols:N,antiparasitics:C,antiparasiticProtocols:_,stockItems:T,stockAlerts:A,stockMovements:L,accountingEntries:z,addClient:I,addPet:E,addConsultation:J,addAppointment:Q,addPrescription:Rt,addFarm:t8,addFarmIntervention:s8,addVaccination:By,addVaccinationProtocol:j8,addAntiparasitic:Ce,addAntiparasiticProtocol:wt,addStockItem:oe,addStockMovement:we,addAccountingEntry:hc,updateAccountingEntry:T8,deleteAccountingEntry:E8,calculateAutomaticRevenue:Vy,calculateAutomaticExpenses:zy,generateAccountingSummary:O8,updateClient:q,updatePet:Y,updateConsultation:le,updateAppointment:_e,updatePrescription:Wr,updateFarm:n8,updateFarmIntervention:a8,updateVaccination:Om,updateVaccinationProtocol:b8,updateAntiparasitic:st,updateAntiparasiticProtocol:tn,updateStockItem:ae,deletePet:ee,deleteConsultation:ce,deleteAppointment:ye,deletePrescription:Hr,deleteFarm:r8,deleteFarmIntervention:i8,deleteVaccination:f8,deleteVaccinationProtocol:w8,deleteAntiparasitic:tt,deleteAntiparasiticProtocol:bt,deleteStockItem:me,resetData:G,exportData:W,importData:O,getClientById:uc,getPetById:Ln,getConsultationById:Ha,getAppointmentById:ln,getPrescriptionById:fa,getFarmById:o8,getFarmInterventionById:l8,getVaccinationById:Dm,getVaccinationProtocolById:N8,getVaccinationProtocolsBySpecies:S8,getActiveVaccinationProtocols:C8,getAntiparasiticById:gt,getAntiparasiticsByPetId:Qt,getAntiparasiticsByClientId:mn,getOverdueAntiparasitics:ut,getUpcomingAntiparasitics:Xt,getAntiparasiticsByStatus:qr,getAntiparasiticProtocolById:Ur,getAntiparasiticProtocolsBySpecies:Wo,getActiveAntiparasiticProtocols:er,getPetsByOwnerId:Os,getConsultationsByPetId:dc,getConsultationsByClientId:ha,getAppointmentsByClientId:Ar,getAppointmentsByPetId:Ds,getAppointmentsByDate:hs,getUpcomingAppointments:Ly,getOverdueAppointments:Xe,getPrescriptionsByPetId:Ga,getPrescriptionsByConsultationId:Gr,getActivePrescriptions:ma,getFarmInterventionsByFarmId:c8,getUpcomingFarmInterventions:u8,getFarmsByStatus:d8,getVaccinationsByPetId:m8,getVaccinationsByClientId:p8,getOverdueVaccinations:g8,getUpcomingVaccinations:v8,getVaccinationsByStatus:x8,createVaccinationReminder:P8,completeVaccinationReminder:A8,confirmVaccinationReminder:k8,updateVaccinationStatuses:y8,calculateDueDateFromProtocol:_8,updateClientStats:re,getStockAlerts:ue},children:e})}const ct=()=>{const e=b.useContext(cR);if(e===void 0)throw new Error("useClients must be used within a ClientProvider");return e},K=b.forwardRef(({className:e,type:t,...n},s)=>r.jsx("input",{type:t,className:Ie("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...n}));K.displayName="Input";var MX="Label",uR=b.forwardRef((e,t)=>r.jsx(Le.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));uR.displayName=MX;var dR=uR;const IX=fm("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),D=b.forwardRef(({className:e,...t},n)=>r.jsx(dR,{ref:n,className:Ie(IX(),e),...t}));D.displayName=dR.displayName;const te=b.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ie("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));te.displayName="Card";const he=b.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ie("flex flex-col space-y-1.5 p-6",e),...t}));he.displayName="CardHeader";const fe=b.forwardRef(({className:e,...t},n)=>r.jsx("h3",{ref:n,className:Ie("text-2xl font-semibold leading-none tracking-tight",e),...t}));fe.displayName="CardTitle";const Iu=b.forwardRef(({className:e,...t},n)=>r.jsx("p",{ref:n,className:Ie("text-sm text-muted-foreground",e),...t}));Iu.displayName="CardDescription";const ne=b.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ie("p-6 pt-0",e),...t}));ne.displayName="CardContent";const $X=b.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ie("flex items-center p-6 pt-0",e),...t}));$X.displayName="CardFooter";const RX=fm("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Vg=b.forwardRef(({className:e,variant:t,...n},s)=>r.jsx("div",{ref:s,role:"alert",className:Ie(RX({variant:t}),e),...n}));Vg.displayName="Alert";const FX=b.forwardRef(({className:e,...t},n)=>r.jsx("h5",{ref:n,className:Ie("mb-1 font-medium leading-none tracking-tight",e),...t}));FX.displayName="AlertTitle";const zg=b.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Ie("text-sm [&_p]:leading-relaxed",e),...t}));zg.displayName="AlertDescription";function LX(){const[e,t]=b.useState(""),[n,s]=b.useState(""),[a,i]=b.useState(!1),[o,l]=b.useState(""),[c,u]=b.useState(!1),[d,h]=b.useState(!1),{login:f,isLoading:m}=Fo(),g=kX(),p=TX(),v=async N=>{if(N.preventDefault(),l(""),!e||!n){l("Veuillez remplir tous les champs");return}await f(e,n)||l("Email ou mot de passe incorrect, ou email non confirmé")},j=async()=>{l("");try{await g.mutateAsync()}catch{l("Erreur lors de la connexion avec Google")}},x=async N=>{if(N.preventDefault(),l(""),!e){l("Veuillez saisir votre email");return}try{await p.mutateAsync(e),h(!0)}catch(w){l(w instanceof Error?w.message:"Une erreur est survenue")}},y=()=>{u(!1),h(!1),l(""),s("")};return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-green-50 dark:from-gray-900 dark:to-gray-800 px-4",children:r.jsxs(te,{className:"w-full max-w-md",children:[r.jsxs(he,{className:"text-center",children:[r.jsx("div",{className:"flex justify-center mb-4",children:r.jsx("div",{className:"p-3 bg-primary/10 rounded-full",children:r.jsx(lt,{className:"h-8 w-8 text-primary"})})}),r.jsx(fe,{className:"text-2xl font-bold",children:"VetPro CRM3"}),r.jsx(Iu,{children:c?d?"Vérifiez votre email":"Réinitialiser votre mot de passe":"Connectez-vous à votre espace vétérinaire"})]}),r.jsx(ne,{children:d?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Nous avons envoyé un lien de réinitialisation à ",r.jsx("strong",{children:e})]}),r.jsx("p",{className:"text-xs text-muted-foreground mb-6",children:"Cliquez sur le lien dans l'email pour réinitialiser votre mot de passe. Si vous ne voyez pas l'email, vérifiez votre dossier spam."})]}),r.jsxs(R,{onClick:y,className:"w-full",children:[r.jsx(p_,{className:"mr-2 h-4 w-4"}),"Retour à la connexion"]})]}):c?r.jsxs("form",{onSubmit:x,className:"space-y-4",children:[o&&r.jsx(Vg,{variant:"destructive",children:r.jsx(zg,{children:o})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"reset-email",children:"Email"}),r.jsx(K,{id:"reset-email",type:"email",placeholder:"votre.email@example.com",value:e,onChange:N=>t(N.target.value),disabled:p.isPending,required:!0}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Entrez l'adresse email associée à votre compte"})]}),r.jsx(R,{type:"submit",className:"w-full",disabled:p.isPending,children:p.isPending?r.jsxs(r.Fragment,{children:[r.jsx(Nr,{className:"mr-2 h-4 w-4 animate-spin"}),"Envoi en cours..."]}):"Envoyer le lien de réinitialisation"}),r.jsx("div",{className:"text-center",children:r.jsxs(R,{type:"button",variant:"link",onClick:y,className:"text-sm",children:[r.jsx(p_,{className:"mr-1 h-4 w-4"}),"Retour à la connexion"]})})]}):r.jsxs(r.Fragment,{children:[r.jsxs("form",{onSubmit:v,className:"space-y-4",children:[o&&r.jsx(Vg,{variant:"destructive",children:r.jsx(zg,{children:o})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"email",children:"Email"}),r.jsx(K,{id:"email",type:"email",placeholder:"vet@vetpro.com",value:e,onChange:N=>t(N.target.value),disabled:m,required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"password",children:"Mot de passe"}),r.jsxs("div",{className:"relative",children:[r.jsx(K,{id:"password",type:a?"text":"password",placeholder:"••••••••",value:n,onChange:N=>s(N.target.value),disabled:m,required:!0}),r.jsx(R,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>i(!a),disabled:m,children:a?r.jsx(mb,{className:"h-4 w-4"}):r.jsx(wn,{className:"h-4 w-4"})})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx(R,{type:"button",variant:"link",className:"text-xs p-0 h-auto",onClick:()=>u(!0),children:"Mot de passe oublié ?"})})]}),r.jsx(R,{type:"submit",className:"w-full",disabled:m,children:m?r.jsxs(r.Fragment,{children:[r.jsx(Nr,{className:"mr-2 h-4 w-4 animate-spin"}),"Connexion..."]}):"Se connecter"})]}),r.jsxs("div",{className:"relative my-6",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("span",{className:"w-full border-t"})}),r.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:r.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Ou continuer avec"})})]}),r.jsx(R,{type:"button",variant:"outline",className:"w-full",onClick:j,disabled:m||g.isPending,children:g.isPending?r.jsxs(r.Fragment,{children:[r.jsx(Nr,{className:"mr-2 h-4 w-4 animate-spin"}),"Connexion avec Google..."]}):r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"mr-2 h-4 w-4",viewBox:"0 0 24 24",children:[r.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),r.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),r.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),r.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuer avec Google"]})}),r.jsx("div",{className:"mt-6 text-center",children:r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Pas encore de compte ?"," ",r.jsx("a",{href:"/register",className:"text-primary hover:underline",children:"S'inscrire"})]})})]})})]})})}function sr({children:e}){const{isAuthenticated:t,isLoading:n,user:s}=Fo(),[a,i]=b.useState(!1);return b.useEffect(()=>{if(n){const o=setTimeout(()=>{i(!0)},3e3);return()=>clearTimeout(o)}else i(!1)},[n]),a?r.jsx(Fb,{to:"/login",replace:!0}):n&&!a?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:r.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Vérification de l'authentification..."})]})}):!t||!s?r.jsx(Fb,{to:"/login",replace:!0}):r.jsx(r.Fragment,{children:e})}function BX({children:e,redirectTo:t="/dashboard"}){const{isAuthenticated:n,isLoading:s,user:a}=Fo(),[i,o]=b.useState(!1);return b.useEffect(()=>{if(s){const l=setTimeout(()=>{o(!0)},2e3);return()=>clearTimeout(l)}else o(!1)},[s]),i?r.jsx(r.Fragment,{children:e}):s&&!i?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:r.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[r.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Chargement..."})]})}):n&&a?r.jsx(Fb,{to:t,replace:!0}):r.jsx(r.Fragment,{children:e})}const hR="/assets/vet-hero-UFBVcjRL.jpg";function VX(){return r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsx("header",{className:"border-b",children:r.jsxs("div",{className:"container mx-auto px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(lt,{className:"h-8 w-8 text-primary"}),r.jsx("span",{className:"text-xl font-bold",children:"VetPro"})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx(R,{variant:"ghost",asChild:!0,children:r.jsx(Gs,{to:"/login",children:"Se connecter"})}),r.jsx(R,{asChild:!0,children:r.jsx(Gs,{to:"/register",children:"Commencer"})})]})]})}),r.jsx("section",{className:"py-20",children:r.jsx("div",{className:"container mx-auto px-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1 space-y-8",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(lt,{className:"h-8 w-8 text-primary"}),r.jsx("span",{className:"text-sm font-medium text-primary",children:"Solution CRM Vétérinaire Complète"})]}),r.jsxs("h1",{className:"text-5xl font-bold leading-tight",children:["Gérez votre pratique",r.jsx("span",{className:"gradient-primary bg-clip-text text-transparent block",children:"vétérinaire efficacement"})]}),r.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl",children:"VetPro vous aide à gérer vos clients, leurs animaux, les rendez-vous, consultations et l'historique médical. Optimisez votre pratique avec notre solution tout-en-un."})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx(R,{size:"lg",className:"gap-2 medical-glow",asChild:!0,children:r.jsxs(Gs,{to:"/register",children:["Commencer gratuitement",r.jsx(fb,{className:"h-4 w-4"})]})}),r.jsx(R,{variant:"outline",size:"lg",className:"gap-2",asChild:!0,children:r.jsx(Gs,{to:"/login",children:"Voir la démo"})})]})]}),r.jsx("div",{className:"hidden lg:block",children:r.jsx("img",{src:hR,alt:"Vétérinaire professionnel",className:"w-96 h-64 object-cover rounded-xl shadow-medical"})})]})})}),r.jsx("section",{className:"py-20 bg-muted/30",children:r.jsxs("div",{className:"container mx-auto px-6",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Tout ce dont vous avez besoin pour votre clinique"}),r.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Une solution complète pour moderniser et optimiser votre pratique vétérinaire"})]}),r.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"bg-card p-6 rounded-xl border shadow-sm",children:[r.jsx(La,{className:"h-12 w-12 text-primary mb-4"}),r.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Gestion des Clients"}),r.jsx("p",{className:"text-muted-foreground",children:"Gérez facilement vos clients et leurs animaux avec un système intuitif et complet."})]}),r.jsxs("div",{className:"bg-card p-6 rounded-xl border shadow-sm",children:[r.jsx(Ye,{className:"h-12 w-12 text-primary mb-4"}),r.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Rendez-vous"}),r.jsx("p",{className:"text-muted-foreground",children:"Planifiez et gérez vos rendez-vous avec un calendrier intelligent et flexible."})]}),r.jsxs("div",{className:"bg-card p-6 rounded-xl border shadow-sm",children:[r.jsx(xr,{className:"h-12 w-12 text-primary mb-4"}),r.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Consultations"}),r.jsx("p",{className:"text-muted-foreground",children:"Documentez vos consultations et maintenez un historique médical détaillé."})]}),r.jsxs("div",{className:"bg-card p-6 rounded-xl border shadow-sm",children:[r.jsx(JM,{className:"h-12 w-12 text-primary mb-4"}),r.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Statistiques"}),r.jsx("p",{className:"text-muted-foreground",children:"Analysez votre activité avec des rapports détaillés et des tableaux de bord."})]}),r.jsxs("div",{className:"bg-card p-6 rounded-xl border shadow-sm",children:[r.jsx(ur,{className:"h-12 w-12 text-primary mb-4"}),r.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Sécurisé"}),r.jsx("p",{className:"text-muted-foreground",children:"Vos données sont protégées avec les plus hauts standards de sécurité."})]}),r.jsxs("div",{className:"bg-card p-6 rounded-xl border shadow-sm",children:[r.jsx(lt,{className:"h-12 w-12 text-primary mb-4"}),r.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Farm Management"}),r.jsx("p",{className:"text-muted-foreground",children:"Gérez les exploitations agricoles et suivez la santé des troupeaux."})]})]})]})}),r.jsx("section",{className:"py-20",children:r.jsx("div",{className:"container mx-auto px-6 text-center",children:r.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[r.jsx("h2",{className:"text-3xl font-bold",children:"Prêt à moderniser votre pratique ?"}),r.jsx("p",{className:"text-lg text-muted-foreground",children:"Rejoignez des centaines de vétérinaires qui font confiance à VetPro pour gérer leur clinique efficacement."}),r.jsx("div",{className:"flex gap-4 justify-center",children:r.jsx(R,{size:"lg",className:"gap-2 medical-glow",asChild:!0,children:r.jsxs(Gs,{to:"/register",children:["Commencer maintenant",r.jsx(fb,{className:"h-4 w-4"})]})})})]})})}),r.jsx("footer",{className:"border-t py-8",children:r.jsx("div",{className:"container mx-auto px-6 text-center text-muted-foreground",children:r.jsxs("p",{children:["© ",new Date().getFullYear()," VetPro. Tous droits réservés."]})})})]})}const zX=()=>{const e=wd(),{toast:t}=et(),[n,s]=b.useState(!1),[a,i]=b.useState({username:"",fullName:"",email:"",password:"",confirmPassword:""}),o=u=>u.length<8?"Le mot de passe doit contenir au moins 8 caractères":/[A-Z]/.test(u)?/[a-z]/.test(u)?/\d/.test(u)?/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>?]/.test(u)?null:"Le mot de passe doit contenir au moins un caractère spécial":"Le mot de passe doit contenir au moins un chiffre":"Le mot de passe doit contenir au moins une lettre minuscule":"Le mot de passe doit contenir au moins une lettre majuscule",l=u=>{i(d=>({...d,[u.target.id]:u.target.value}))},c=async u=>{if(u.preventDefault(),s(!0),a.password!==a.confirmPassword){t({title:"Erreur",description:"Les mots de passe ne correspondent pas",variant:"destructive"}),s(!1);return}const d=o(a.password);if(d){t({title:"Erreur",description:d,variant:"destructive"}),s(!1);return}try{await jX(a.email,a.password,a.username,a.fullName,"assistant"),t({title:"Inscription réussie",description:"Votre compte a été créé avec succès. Veuillez vérifier votre email et cliquer sur le lien de confirmation pour pouvoir vous connecter."}),e("/login")}catch(h){const f=h instanceof Error?h.message:"Une erreur est survenue lors de l'inscription";t({title:"Erreur d'inscription",description:f,variant:"destructive"})}finally{s(!1)}};return r.jsx("div",{className:"min-h-screen bg-gradient-hero flex items-center justify-center p-6",children:r.jsxs(te,{className:"w-full max-w-md",children:[r.jsxs(he,{className:"text-center",children:[r.jsx("div",{className:"flex justify-center mb-4",children:r.jsx(lt,{className:"h-12 w-12 text-primary"})}),r.jsx(fe,{className:"text-2xl gradient-primary bg-clip-text text-transparent",children:"VetPro CRM"}),r.jsx(Iu,{children:"Créez votre compte vétérinaire"})]}),r.jsxs(ne,{children:[r.jsxs("form",{onSubmit:c,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"username",children:"Nom d'utilisateur"}),r.jsx(K,{id:"username",placeholder:"martin.dubois",value:a.username,onChange:l,required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"fullName",children:"Nom complet"}),r.jsx(K,{id:"fullName",placeholder:"Dr. Martin Dubois",value:a.fullName,onChange:l,required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"email",children:"Email"}),r.jsx(K,{id:"email",type:"email",placeholder:"votre.email@example.com",value:a.email,onChange:l,required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"password",children:"Mot de passe"}),r.jsx(K,{id:"password",type:"password",placeholder:"Votre mot de passe sécurisé",value:a.password,onChange:l,required:!0,minLength:8}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Le mot de passe doit contenir au moins 8 caractères, une majuscule, une minuscule, un chiffre et un caractère spécial."})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),r.jsx(K,{id:"confirmPassword",type:"password",placeholder:"Confirmer votre mot de passe",value:a.confirmPassword,onChange:l,required:!0,minLength:8})]}),r.jsx(R,{type:"submit",className:"w-full",disabled:n,children:n?r.jsxs(r.Fragment,{children:[r.jsx(Nr,{className:"mr-2 h-4 w-4 animate-spin"}),"Création en cours..."]}):"Créer le compte"})]}),r.jsxs("div",{className:"mt-6 text-center",children:[r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Déjà un compte ?"," ",r.jsx(Gs,{to:"/login",className:"text-primary hover:underline",children:"Se connecter"})]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:r.jsx(Gs,{to:"/",className:"hover:underline",children:"Retour à l'accueil"})})]})]})]})})};var Lx="Dialog",[fR,fke]=cs(Lx),[qX,ca]=fR(Lx),mR=e=>{const{__scopeDialog:t,children:n,open:s,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=b.useRef(null),c=b.useRef(null),[u,d]=yi({prop:s,defaultProp:a??!1,onChange:i,caller:Lx});return r.jsx(qX,{scope:t,triggerRef:l,contentRef:c,contentId:Da(),titleId:Da(),descriptionId:Da(),open:u,onOpenChange:d,onOpenToggle:b.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};mR.displayName=Lx;var pR="DialogTrigger",gR=b.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=ca(pR,n),i=pt(t,a.triggerRef);return r.jsx(Le.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":TS(a.open),...s,ref:i,onClick:Ae(e.onClick,a.onOpenToggle)})});gR.displayName=pR;var AS="DialogPortal",[UX,vR]=fR(AS,{forceMount:void 0}),xR=e=>{const{__scopeDialog:t,forceMount:n,children:s,container:a}=e,i=ca(AS,t);return r.jsx(UX,{scope:t,forceMount:n,children:b.Children.map(s,o=>r.jsx(ks,{present:n||i.open,children:r.jsx(dm,{asChild:!0,container:a,children:o})}))})};xR.displayName=AS;var qg="DialogOverlay",yR=b.forwardRef((e,t)=>{const n=vR(qg,e.__scopeDialog),{forceMount:s=n.forceMount,...a}=e,i=ca(qg,e.__scopeDialog);return i.modal?r.jsx(ks,{present:s||i.open,children:r.jsx(HX,{...a,ref:t})}):null});yR.displayName=qg;var WX=Il("DialogOverlay.RemoveScroll"),HX=b.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=ca(qg,n);return r.jsx(kx,{as:WX,allowPinchZoom:!0,shards:[a.contentRef],children:r.jsx(Le.div,{"data-state":TS(a.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),Bl="DialogContent",jR=b.forwardRef((e,t)=>{const n=vR(Bl,e.__scopeDialog),{forceMount:s=n.forceMount,...a}=e,i=ca(Bl,e.__scopeDialog);return r.jsx(ks,{present:s||i.open,children:i.modal?r.jsx(GX,{...a,ref:t}):r.jsx(KX,{...a,ref:t})})});jR.displayName=Bl;var GX=b.forwardRef((e,t)=>{const n=ca(Bl,e.__scopeDialog),s=b.useRef(null),a=pt(t,n.contentRef,s);return b.useEffect(()=>{const i=s.current;if(i)return fS(i)},[]),r.jsx(bR,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ae(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Ae(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:Ae(e.onFocusOutside,i=>i.preventDefault())})}),KX=b.forwardRef((e,t)=>{const n=ca(Bl,e.__scopeDialog),s=b.useRef(!1),a=b.useRef(!1);return r.jsx(bR,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(s.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:i=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(s.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),bR=b.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,l=ca(Bl,n),c=b.useRef(null),u=pt(t,c);return hS(),r.jsxs(r.Fragment,{children:[r.jsx(_x,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:i,children:r.jsx(hd,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":TS(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),r.jsxs(r.Fragment,{children:[r.jsx(YX,{titleId:l.titleId}),r.jsx(XX,{contentRef:c,descriptionId:l.descriptionId})]})]})}),kS="DialogTitle",wR=b.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=ca(kS,n);return r.jsx(Le.h2,{id:a.titleId,...s,ref:t})});wR.displayName=kS;var NR="DialogDescription",SR=b.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=ca(NR,n);return r.jsx(Le.p,{id:a.descriptionId,...s,ref:t})});SR.displayName=NR;var CR="DialogClose",_R=b.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,a=ca(CR,n);return r.jsx(Le.button,{type:"button",...s,ref:t,onClick:Ae(e.onClick,()=>a.onOpenChange(!1))})});_R.displayName=CR;function TS(e){return e?"open":"closed"}var PR="DialogTitleWarning",[mke,AR]=_z(PR,{contentName:Bl,titleName:kS,docsSlug:"dialog"}),YX=({titleId:e})=>{const t=AR(PR),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return b.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},QX="DialogDescriptionWarning",XX=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${AR(QX).contentName}}.`;return b.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},JX=mR,ZX=gR,eJ=xR,kR=yR,TR=jR,ER=wR,OR=SR,tJ=_R;const He=JX,Bx=ZX,nJ=eJ,DR=b.forwardRef(({className:e,...t},n)=>r.jsx(kR,{ref:n,className:Ie("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));DR.displayName=kR.displayName;const We=b.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(nJ,{children:[r.jsx(DR,{}),r.jsxs(TR,{ref:s,className:Ie("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,r.jsxs(tJ,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[r.jsx(xx,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));We.displayName=TR.displayName;const Ge=({className:e,...t})=>r.jsx("div",{className:Ie("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Ge.displayName="DialogHeader";const Ke=b.forwardRef(({className:e,...t},n)=>r.jsx(ER,{ref:n,className:Ie("text-lg font-semibold leading-none tracking-tight",e),...t}));Ke.displayName=ER.displayName;const yt=b.forwardRef(({className:e,...t},n)=>r.jsx(OR,{ref:n,className:Ie("text-sm text-muted-foreground",e),...t}));yt.displayName=OR.displayName;const Be=b.forwardRef(({className:e,...t},n)=>r.jsx("textarea",{className:Ie("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));Be.displayName="Textarea";function OP(e,[t,n]){return Math.min(n,Math.max(t,e))}function ES(e){const t=b.useRef({value:e,previous:e});return b.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var rJ=[" ","Enter","ArrowUp","ArrowDown"],sJ=[" ","Enter"],Vl="Select",[Vx,zx,aJ]=mx(Vl),[Cd,pke]=cs(Vl,[aJ,xd]),qx=xd(),[iJ,Lo]=Cd(Vl),[oJ,lJ]=Cd(Vl),MR=e=>{const{__scopeSelect:t,children:n,open:s,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:f,required:m,form:g}=e,p=qx(t),[v,j]=b.useState(null),[x,y]=b.useState(null),[N,w]=b.useState(!1),C=Cx(u),[S,_]=yi({prop:s,defaultProp:a??!1,onChange:i,caller:Vl}),[k,T]=yi({prop:o,defaultProp:l,onChange:c,caller:Vl}),P=b.useRef(null),A=v?g||!!v.closest("form"):!0,[B,L]=b.useState(new Set),H=Array.from(B).map(z=>z.props.value).join(";");return r.jsx(MI,{...p,children:r.jsxs(iJ,{required:m,scope:t,trigger:v,onTriggerChange:j,valueNode:x,onValueNodeChange:y,valueNodeHasChildren:N,onValueNodeHasChildrenChange:w,contentId:Da(),value:k,onValueChange:T,open:S,onOpenChange:_,dir:C,triggerPointerDownPosRef:P,disabled:f,children:[r.jsx(Vx.Provider,{scope:t,children:r.jsx(oJ,{scope:e.__scopeSelect,onNativeOptionAdd:b.useCallback(z=>{L($=>new Set($).add(z))},[]),onNativeOptionRemove:b.useCallback(z=>{L($=>{const I=new Set($);return I.delete(z),I})},[]),children:n})}),A?r.jsxs(s3,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:h,value:k,onChange:z=>T(z.target.value),disabled:f,form:g,children:[k===void 0?r.jsx("option",{value:""}):null,Array.from(B)]},H):null]})})};MR.displayName=Vl;var IR="SelectTrigger",$R=b.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:s=!1,...a}=e,i=qx(n),o=Lo(IR,n),l=o.disabled||s,c=pt(t,o.onTriggerChange),u=zx(n),d=b.useRef("touch"),[h,f,m]=i3(p=>{const v=u().filter(y=>!y.disabled),j=v.find(y=>y.value===o.value),x=o3(v,p,j);x!==void 0&&o.onValueChange(x.value)}),g=p=>{l||(o.onOpenChange(!0),m()),p&&(o.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return r.jsx(eS,{asChild:!0,...i,children:r.jsx(Le.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":a3(o.value)?"":void 0,...a,ref:c,onClick:Ae(a.onClick,p=>{p.currentTarget.focus(),d.current!=="mouse"&&g(p)}),onPointerDown:Ae(a.onPointerDown,p=>{d.current=p.pointerType;const v=p.target;v.hasPointerCapture(p.pointerId)&&v.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(g(p),p.preventDefault())}),onKeyDown:Ae(a.onKeyDown,p=>{const v=h.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&f(p.key),!(v&&p.key===" ")&&rJ.includes(p.key)&&(g(),p.preventDefault())})})})});$R.displayName=IR;var RR="SelectValue",FR=b.forwardRef((e,t)=>{const{__scopeSelect:n,className:s,style:a,children:i,placeholder:o="",...l}=e,c=Lo(RR,n),{onValueNodeHasChildrenChange:u}=c,d=i!==void 0,h=pt(t,c.onValueNodeChange);return Sn(()=>{u(d)},[u,d]),r.jsx(Le.span,{...l,ref:h,style:{pointerEvents:"none"},children:a3(c.value)?r.jsx(r.Fragment,{children:o}):i})});FR.displayName=RR;var cJ="SelectIcon",LR=b.forwardRef((e,t)=>{const{__scopeSelect:n,children:s,...a}=e;return r.jsx(Le.span,{"aria-hidden":!0,...a,ref:t,children:s||"▼"})});LR.displayName=cJ;var uJ="SelectPortal",BR=e=>r.jsx(dm,{asChild:!0,...e});BR.displayName=uJ;var zl="SelectContent",VR=b.forwardRef((e,t)=>{const n=Lo(zl,e.__scopeSelect),[s,a]=b.useState();if(Sn(()=>{a(new DocumentFragment)},[]),!n.open){const i=s;return i?Zl.createPortal(r.jsx(zR,{scope:e.__scopeSelect,children:r.jsx(Vx.Slot,{scope:e.__scopeSelect,children:r.jsx("div",{children:e.children})})}),i):null}return r.jsx(qR,{...e,ref:t})});VR.displayName=zl;var Fs=10,[zR,Bo]=Cd(zl),dJ="SelectContentImpl",hJ=Il("SelectContent.RemoveScroll"),qR=b.forwardRef((e,t)=>{const{__scopeSelect:n,position:s="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:g,hideWhenDetached:p,avoidCollisions:v,...j}=e,x=Lo(zl,n),[y,N]=b.useState(null),[w,C]=b.useState(null),S=pt(t,ue=>N(ue)),[_,k]=b.useState(null),[T,P]=b.useState(null),A=zx(n),[B,L]=b.useState(!1),H=b.useRef(!1);b.useEffect(()=>{if(y)return fS(y)},[y]),hS();const z=b.useCallback(ue=>{const[J,...ee]=A().map(O=>O.ref.current),[G]=ee.slice(-1),W=document.activeElement;for(const O of ue)if(O===W||(O==null||O.scrollIntoView({block:"nearest"}),O===J&&w&&(w.scrollTop=0),O===G&&w&&(w.scrollTop=w.scrollHeight),O==null||O.focus(),document.activeElement!==W))return},[A,w]),$=b.useCallback(()=>z([_,y]),[z,_,y]);b.useEffect(()=>{B&&$()},[B,$]);const{onOpenChange:I,triggerPointerDownPosRef:E}=x;b.useEffect(()=>{if(y){let ue={x:0,y:0};const J=G=>{var W,O;ue={x:Math.abs(Math.round(G.pageX)-(((W=E.current)==null?void 0:W.x)??0)),y:Math.abs(Math.round(G.pageY)-(((O=E.current)==null?void 0:O.y)??0))}},ee=G=>{ue.x<=10&&ue.y<=10?G.preventDefault():y.contains(G.target)||I(!1),document.removeEventListener("pointermove",J),E.current=null};return E.current!==null&&(document.addEventListener("pointermove",J),document.addEventListener("pointerup",ee,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",J),document.removeEventListener("pointerup",ee,{capture:!0})}}},[y,I,E]),b.useEffect(()=>{const ue=()=>I(!1);return window.addEventListener("blur",ue),window.addEventListener("resize",ue),()=>{window.removeEventListener("blur",ue),window.removeEventListener("resize",ue)}},[I]);const[q,Y]=i3(ue=>{const J=A().filter(W=>!W.disabled),ee=J.find(W=>W.ref.current===document.activeElement),G=o3(J,ue,ee);G&&setTimeout(()=>G.ref.current.focus())}),re=b.useCallback((ue,J,ee)=>{const G=!H.current&&!ee;(x.value!==void 0&&x.value===J||G)&&(k(ue),G&&(H.current=!0))},[x.value]),oe=b.useCallback(()=>y==null?void 0:y.focus(),[y]),ae=b.useCallback((ue,J,ee)=>{const G=!H.current&&!ee;(x.value!==void 0&&x.value===J||G)&&P(ue)},[x.value]),me=s==="popper"?rw:UR,we=me===rw?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:g,hideWhenDetached:p,avoidCollisions:v}:{};return r.jsx(zR,{scope:n,content:y,viewport:w,onViewportChange:C,itemRefCallback:re,selectedItem:_,onItemLeave:oe,itemTextRefCallback:ae,focusSelectedItem:$,selectedItemText:T,position:s,isPositioned:B,searchRef:q,children:r.jsx(kx,{as:hJ,allowPinchZoom:!0,children:r.jsx(_x,{asChild:!0,trapped:x.open,onMountAutoFocus:ue=>{ue.preventDefault()},onUnmountAutoFocus:Ae(a,ue=>{var J;(J=x.trigger)==null||J.focus({preventScroll:!0}),ue.preventDefault()}),children:r.jsx(hd,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:ue=>ue.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:r.jsx(me,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:ue=>ue.preventDefault(),...j,...we,onPlaced:()=>L(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...j.style},onKeyDown:Ae(j.onKeyDown,ue=>{const J=ue.ctrlKey||ue.altKey||ue.metaKey;if(ue.key==="Tab"&&ue.preventDefault(),!J&&ue.key.length===1&&Y(ue.key),["ArrowUp","ArrowDown","Home","End"].includes(ue.key)){let G=A().filter(W=>!W.disabled).map(W=>W.ref.current);if(["ArrowUp","End"].includes(ue.key)&&(G=G.slice().reverse()),["ArrowUp","ArrowDown"].includes(ue.key)){const W=ue.target,O=G.indexOf(W);G=G.slice(O+1)}setTimeout(()=>z(G)),ue.preventDefault()}})})})})})})});qR.displayName=dJ;var fJ="SelectItemAlignedPosition",UR=b.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:s,...a}=e,i=Lo(zl,n),o=Bo(zl,n),[l,c]=b.useState(null),[u,d]=b.useState(null),h=pt(t,S=>d(S)),f=zx(n),m=b.useRef(!1),g=b.useRef(!0),{viewport:p,selectedItem:v,selectedItemText:j,focusSelectedItem:x}=o,y=b.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&p&&v&&j){const S=i.trigger.getBoundingClientRect(),_=u.getBoundingClientRect(),k=i.valueNode.getBoundingClientRect(),T=j.getBoundingClientRect();if(i.dir!=="rtl"){const W=T.left-_.left,O=k.left-W,le=S.left-O,ce=S.width+le,ie=Math.max(ce,_.width),Ce=window.innerWidth-Fs,st=OP(O,[Fs,Math.max(Fs,Ce-ie)]);l.style.minWidth=ce+"px",l.style.left=st+"px"}else{const W=_.right-T.right,O=window.innerWidth-k.right-W,le=window.innerWidth-S.right-O,ce=S.width+le,ie=Math.max(ce,_.width),Ce=window.innerWidth-Fs,st=OP(O,[Fs,Math.max(Fs,Ce-ie)]);l.style.minWidth=ce+"px",l.style.right=st+"px"}const P=f(),A=window.innerHeight-Fs*2,B=p.scrollHeight,L=window.getComputedStyle(u),H=parseInt(L.borderTopWidth,10),z=parseInt(L.paddingTop,10),$=parseInt(L.borderBottomWidth,10),I=parseInt(L.paddingBottom,10),E=H+z+B+I+$,q=Math.min(v.offsetHeight*5,E),Y=window.getComputedStyle(p),re=parseInt(Y.paddingTop,10),oe=parseInt(Y.paddingBottom,10),ae=S.top+S.height/2-Fs,me=A-ae,we=v.offsetHeight/2,ue=v.offsetTop+we,J=H+z+ue,ee=E-J;if(J<=ae){const W=P.length>0&&v===P[P.length-1].ref.current;l.style.bottom="0px";const O=u.clientHeight-p.offsetTop-p.offsetHeight,le=Math.max(me,we+(W?oe:0)+O+$),ce=J+le;l.style.height=ce+"px"}else{const W=P.length>0&&v===P[0].ref.current;l.style.top="0px";const le=Math.max(ae,H+p.offsetTop+(W?re:0)+we)+ee;l.style.height=le+"px",p.scrollTop=J-ae+p.offsetTop}l.style.margin=`${Fs}px 0`,l.style.minHeight=q+"px",l.style.maxHeight=A+"px",s==null||s(),requestAnimationFrame(()=>m.current=!0)}},[f,i.trigger,i.valueNode,l,u,p,v,j,i.dir,s]);Sn(()=>y(),[y]);const[N,w]=b.useState();Sn(()=>{u&&w(window.getComputedStyle(u).zIndex)},[u]);const C=b.useCallback(S=>{S&&g.current===!0&&(y(),x==null||x(),g.current=!1)},[y,x]);return r.jsx(pJ,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:C,children:r.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:r.jsx(Le.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});UR.displayName=fJ;var mJ="SelectPopperPosition",rw=b.forwardRef((e,t)=>{const{__scopeSelect:n,align:s="start",collisionPadding:a=Fs,...i}=e,o=qx(n);return r.jsx(tS,{...o,...i,ref:t,align:s,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});rw.displayName=mJ;var[pJ,OS]=Cd(zl,{}),sw="SelectViewport",WR=b.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:s,...a}=e,i=Bo(sw,n),o=OS(sw,n),l=pt(t,i.onViewportChange),c=b.useRef(0);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),r.jsx(Vx.Slot,{scope:n,children:r.jsx(Le.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Ae(a.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&h){const m=Math.abs(c.current-d.scrollTop);if(m>0){const g=window.innerHeight-Fs*2,p=parseFloat(h.style.minHeight),v=parseFloat(h.style.height),j=Math.max(p,v);if(j<g){const x=j+m,y=Math.min(g,x),N=x-y;h.style.height=y+"px",h.style.bottom==="0px"&&(d.scrollTop=N>0?N:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});WR.displayName=sw;var HR="SelectGroup",[gJ,vJ]=Cd(HR),xJ=b.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,a=Da();return r.jsx(gJ,{scope:n,id:a,children:r.jsx(Le.div,{role:"group","aria-labelledby":a,...s,ref:t})})});xJ.displayName=HR;var GR="SelectLabel",KR=b.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,a=vJ(GR,n);return r.jsx(Le.div,{id:a.id,...s,ref:t})});KR.displayName=GR;var Ug="SelectItem",[yJ,YR]=Cd(Ug),QR=b.forwardRef((e,t)=>{const{__scopeSelect:n,value:s,disabled:a=!1,textValue:i,...o}=e,l=Lo(Ug,n),c=Bo(Ug,n),u=l.value===s,[d,h]=b.useState(i??""),[f,m]=b.useState(!1),g=pt(t,x=>{var y;return(y=c.itemRefCallback)==null?void 0:y.call(c,x,s,a)}),p=Da(),v=b.useRef("touch"),j=()=>{a||(l.onValueChange(s),l.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return r.jsx(yJ,{scope:n,value:s,disabled:a,textId:p,isSelected:u,onItemTextChange:b.useCallback(x=>{h(y=>y||((x==null?void 0:x.textContent)??"").trim())},[]),children:r.jsx(Vx.ItemSlot,{scope:n,value:s,disabled:a,textValue:d,children:r.jsx(Le.div,{role:"option","aria-labelledby":p,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:g,onFocus:Ae(o.onFocus,()=>m(!0)),onBlur:Ae(o.onBlur,()=>m(!1)),onClick:Ae(o.onClick,()=>{v.current!=="mouse"&&j()}),onPointerUp:Ae(o.onPointerUp,()=>{v.current==="mouse"&&j()}),onPointerDown:Ae(o.onPointerDown,x=>{v.current=x.pointerType}),onPointerMove:Ae(o.onPointerMove,x=>{var y;v.current=x.pointerType,a?(y=c.onItemLeave)==null||y.call(c):v.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ae(o.onPointerLeave,x=>{var y;x.currentTarget===document.activeElement&&((y=c.onItemLeave)==null||y.call(c))}),onKeyDown:Ae(o.onKeyDown,x=>{var N;((N=c.searchRef)==null?void 0:N.current)!==""&&x.key===" "||(sJ.includes(x.key)&&j(),x.key===" "&&x.preventDefault())})})})})});QR.displayName=Ug;var wh="SelectItemText",XR=b.forwardRef((e,t)=>{const{__scopeSelect:n,className:s,style:a,...i}=e,o=Lo(wh,n),l=Bo(wh,n),c=YR(wh,n),u=lJ(wh,n),[d,h]=b.useState(null),f=pt(t,j=>h(j),c.onItemTextChange,j=>{var x;return(x=l.itemTextRefCallback)==null?void 0:x.call(l,j,c.value,c.disabled)}),m=d==null?void 0:d.textContent,g=b.useMemo(()=>r.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:p,onNativeOptionRemove:v}=u;return Sn(()=>(p(g),()=>v(g)),[p,v,g]),r.jsxs(r.Fragment,{children:[r.jsx(Le.span,{id:c.textId,...i,ref:f}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Zl.createPortal(i.children,o.valueNode):null]})});XR.displayName=wh;var JR="SelectItemIndicator",ZR=b.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e;return YR(JR,n).isSelected?r.jsx(Le.span,{"aria-hidden":!0,...s,ref:t}):null});ZR.displayName=JR;var aw="SelectScrollUpButton",e3=b.forwardRef((e,t)=>{const n=Bo(aw,e.__scopeSelect),s=OS(aw,e.__scopeSelect),[a,i]=b.useState(!1),o=pt(t,s.onScrollButtonChange);return Sn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?r.jsx(n3,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});e3.displayName=aw;var iw="SelectScrollDownButton",t3=b.forwardRef((e,t)=>{const n=Bo(iw,e.__scopeSelect),s=OS(iw,e.__scopeSelect),[a,i]=b.useState(!1),o=pt(t,s.onScrollButtonChange);return Sn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;i(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?r.jsx(n3,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});t3.displayName=iw;var n3=b.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:s,...a}=e,i=Bo("SelectScrollButton",n),o=b.useRef(null),l=zx(n),c=b.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return b.useEffect(()=>()=>c(),[c]),Sn(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),r.jsx(Le.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Ae(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(s,50))}),onPointerMove:Ae(a.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(s,50))}),onPointerLeave:Ae(a.onPointerLeave,()=>{c()})})}),jJ="SelectSeparator",r3=b.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e;return r.jsx(Le.div,{"aria-hidden":!0,...s,ref:t})});r3.displayName=jJ;var ow="SelectArrow",bJ=b.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,a=qx(n),i=Lo(ow,n),o=Bo(ow,n);return i.open&&o.position==="popper"?r.jsx(nS,{...a,...s,ref:t}):null});bJ.displayName=ow;var wJ="SelectBubbleInput",s3=b.forwardRef(({__scopeSelect:e,value:t,...n},s)=>{const a=b.useRef(null),i=pt(s,a),o=ES(t);return b.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&d){const h=new Event("change",{bubbles:!0});d.call(l,t),l.dispatchEvent(h)}},[o,t]),r.jsx(Le.select,{...n,style:{...kM,...n.style},ref:i,defaultValue:t})});s3.displayName=wJ;function a3(e){return e===""||e===void 0}function i3(e){const t=Sr(e),n=b.useRef(""),s=b.useRef(0),a=b.useCallback(o=>{const l=n.current+o;t(l),function c(u){n.current=u,window.clearTimeout(s.current),u!==""&&(s.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=b.useCallback(()=>{n.current="",window.clearTimeout(s.current)},[]);return b.useEffect(()=>()=>window.clearTimeout(s.current),[]),[n,a,i]}function o3(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=NJ(e,Math.max(i,0));a.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function NJ(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var SJ=MR,l3=$R,CJ=FR,_J=LR,PJ=BR,c3=VR,AJ=WR,u3=KR,d3=QR,kJ=XR,TJ=ZR,h3=e3,f3=t3,m3=r3;const ve=SJ,xe=CJ,pe=b.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(l3,{ref:s,className:Ie("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,r.jsx(_J,{asChild:!0,children:r.jsx(ZM,{className:"h-4 w-4 opacity-50"})})]}));pe.displayName=l3.displayName;const p3=b.forwardRef(({className:e,...t},n)=>r.jsx(h3,{ref:n,className:Ie("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(_q,{className:"h-4 w-4"})}));p3.displayName=h3.displayName;const g3=b.forwardRef(({className:e,...t},n)=>r.jsx(f3,{ref:n,className:Ie("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(ZM,{className:"h-4 w-4"})}));g3.displayName=f3.displayName;const ge=b.forwardRef(({className:e,children:t,position:n="popper",...s},a)=>r.jsx(PJ,{children:r.jsxs(c3,{ref:a,className:Ie("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...s,children:[r.jsx(p3,{}),r.jsx(AJ,{className:Ie("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),r.jsx(g3,{})]})}));ge.displayName=c3.displayName;const EJ=b.forwardRef(({className:e,...t},n)=>r.jsx(u3,{ref:n,className:Ie("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));EJ.displayName=u3.displayName;const M=b.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(d3,{ref:s,className:Ie("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(TJ,{children:r.jsx(z1,{className:"h-4 w-4"})})}),r.jsx(kJ,{children:t})]}));M.displayName=d3.displayName;const OJ=b.forwardRef(({className:e,...t},n)=>r.jsx(m3,{ref:n,className:Ie("-mx-1 my-1 h-px bg-muted",e),...t}));OJ.displayName=m3.displayName;const DJ=async()=>{const{data:e,error:t}=await Me.from("clients").select("*").order("created_at",{ascending:!1});if(t)throw new Error(`Error fetching clients: ${t.message}`);return e||[]},MJ=async e=>{const{data:{user:t}}=await Me.auth.getUser();if(!t)throw new Error("User not authenticated");const{data:n,error:s}=await Me.from("clients").insert({...e,user_id:t.id,city:e.city||"Rabat",country:e.country||"Maroc",client_type:e.client_type||"particulier"}).select().single();if(s)throw new Error(`Error creating client: ${s.message}`);return n},IJ=async(e,t)=>{const{data:n,error:s}=await Me.from("clients").update(t).eq("id",e).select().single();if(s)throw new Error(`Error updating client: ${s.message}`);return n},$J=async()=>{const{data:e,error:t}=await Me.from("animals").select(`
      *,
      client:clients(*)
    `).order("created_at",{ascending:!1});if(t)throw new Error(`Error fetching animals: ${t.message}`);return e||[]},RJ=async e=>{var o,l,c;const{data:{user:t}}=await Me.auth.getUser();if(!t)throw new Error("User not authenticated");const n={...e};"microchip_number"in n&&!((o=n.microchip_number)!=null&&o.trim())&&delete n.microchip_number,"birth_date"in n&&!((l=n.birth_date)!=null&&l.trim())&&delete n.birth_date,"sterilization_date"in n&&!((c=n.sterilization_date)!=null&&c.trim())&&delete n.sterilization_date;const s=u=>{switch(u){case"healthy":return"vivant";case"urgent":return"décédé";case"treatment":return"perdu";default:return"vivant"}},{data:a,error:i}=await Me.from("animals").insert({...n,user_id:t.id,sterilized:n.sterilized||!1,status:s(n.status)}).select(`
      *,
      client:clients(*)
    `).single();if(i)throw new Error(`Error creating animal: ${i.message}`);return a},FJ=async(e,t)=>{var i,o,l;const n={...t};"microchip_number"in n&&!((i=n.microchip_number)!=null&&i.trim())&&(n.microchip_number=null),"birth_date"in n&&!((o=n.birth_date)!=null&&o.trim())&&(n.birth_date=null),"sterilization_date"in n&&!((l=n.sterilization_date)!=null&&l.trim())&&(n.sterilization_date=null);const{data:s,error:a}=await Me.from("animals").update(n).eq("id",e).select(`
      *,
      client:clients(*)
    `).single();if(a)throw new Error(`Error updating animal: ${a.message}`);return s},LJ=async()=>{const{data:e,error:t}=await Me.from("vaccinations").select(`
      *,
      animal:animals(*)
    `).order("vaccination_date",{ascending:!1});if(t)throw new Error(`Error fetching vaccinations: ${t.message}`);return e||[]},BJ=async e=>{const{data:{user:t}}=await Me.auth.getUser();if(!t)throw new Error("User not authenticated");let n=e.administered_by;if(!n||n.trim()===""){const{data:i}=await Me.from("user_profiles").select("id").eq("id",t.id).single();n=i?t.id:null}const{data:s,error:a}=await Me.from("vaccinations").insert({...e,administered_by:n}).select(`
      *,
      animal:animals(*)
    `).single();if(a)throw new Error(`Error creating vaccination: ${a.message}`);return s},VJ=async(e,t)=>{const{data:n,error:s}=await Me.from("vaccinations").update(t).eq("id",e).select(`
      *,
      animal:animals(*)
    `).single();if(s)throw new Error(`Error updating vaccination: ${s.message}`);return n},zJ=async e=>{const{error:t}=await Me.from("vaccinations").delete().eq("id",e);if(t)throw new Error(`Error deleting vaccination: ${t.message}`)},qJ=async()=>{const{data:e,error:t}=await Me.from("vaccination_protocols").select("*").order("species",{ascending:!0}).order("vaccine_name",{ascending:!0});if(t)throw new Error(`Error fetching vaccination protocols: ${t.message}`);return e||[]},UJ=async e=>{const{data:t,error:n}=await Me.from("vaccination_protocols").insert(e).select().single();if(n)throw new Error(`Error creating vaccination protocol: ${n.message}`);return t},WJ=async(e,t)=>{const{data:n,error:s}=await Me.from("vaccination_protocols").update(t).eq("id",e).select().single();if(s)throw new Error(`Error updating vaccination protocol: ${s.message}`);return n},HJ=async()=>{const{data:e,error:t}=await Me.from("antiparasitics").select(`
      *,
      animal:animals(*)
    `).order("treatment_date",{ascending:!1});if(t)throw new Error(`Error fetching antiparasitics: ${t.message}`);return e||[]},GJ=async e=>{const{data:{user:t}}=await Me.auth.getUser();if(!t)throw new Error("User must be authenticated to create antiparasitic");if(e.administered_by){const{data:a}=await Me.from("user_profiles").select("id").eq("id",e.administered_by).single();a||(console.warn("administered_by user not found, setting to null"),e.administered_by=null)}const{data:n,error:s}=await Me.from("antiparasitics").insert([e]).select(`
      *,
      animal:animals(*)
    `).single();if(s)throw new Error(`Error creating antiparasitic: ${s.message}`);return n},KJ=async e=>{const{error:t}=await Me.from("antiparasitics").delete().eq("id",e);if(t)throw new Error(`Error deleting antiparasitic: ${t.message}`)},YJ=async()=>{const{data:e,error:t}=await Me.from("antiparasitic_protocols").select("*").order("species",{ascending:!0});if(t)throw new Error(`Error fetching antiparasitic protocols: ${t.message}`);return e||[]},QJ=async e=>{const{data:t,error:n}=await Me.from("antiparasitic_protocols").select("*").eq("species",e).eq("active",!0).order("parasite_type",{ascending:!0});if(n)throw new Error(`Error fetching antiparasitic protocols for species: ${n.message}`);return t||[]},XJ=async e=>{const{data:t,error:n}=await Me.from("antiparasitic_protocols").insert([e]).select("*").single();if(n)throw new Error(`Error creating antiparasitic protocol: ${n.message}`);return t},JJ=async(e,t)=>{const{data:n,error:s}=await Me.from("antiparasitic_protocols").update(t).eq("id",e).select("*").single();if(s)throw new Error(`Error updating antiparasitic protocol: ${s.message}`);return n},ZJ=async()=>{const{data:e,error:t}=await Me.from("appointments").select(`
      *,
      client:clients(*),
      animal:animals(*)
    `).order("appointment_date",{ascending:!0});if(t)throw new Error(`Error fetching appointments: ${t.message}`);return e||[]},eZ=async e=>{const{data:{user:t}}=await Me.auth.getUser();if(!t)throw new Error("User not authenticated");const{data:n,error:s}=await Me.from("appointments").insert({...e,veterinarian_id:e.veterinarian_id||t.id,duration_minutes:e.duration_minutes||30}).select(`
      *,
      client:clients(*),
      animal:animals(*)
    `).single();if(s)throw new Error(`Error creating appointment: ${s.message}`);return n},tZ=async(e,t)=>{const{data:n,error:s}=await Me.from("appointments").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select(`
      *,
      client:clients(*),
      animal:animals(*)
    `).single();if(s)throw new Error(`Error updating appointment: ${s.message}`);return n},nZ=async e=>{const{error:t}=await Me.from("appointments").delete().eq("id",e);if(t)throw new Error(`Error deleting appointment: ${t.message}`)},Ks={all:["clients"],lists:()=>[...Ks.all,"list"],list:e=>[...Ks.lists(),{filters:e}],details:()=>[...Ks.all,"detail"],detail:e=>[...Ks.details(),e],search:e=>[...Ks.all,"search",e]},Zr={all:["animals"],lists:()=>[...Zr.all,"list"],list:e=>[...Zr.lists(),{filters:e}],details:()=>[...Zr.all,"detail"],detail:e=>[...Zr.details(),e],byClient:e=>[...Zr.all,"client",e],search:e=>[...Zr.all,"search",e]},or={all:["appointments"],lists:()=>[...or.all,"list"],list:e=>[...or.lists(),{filters:e}],details:()=>[...or.all,"detail"],detail:e=>[...or.details(),e],byAnimal:e=>[...or.all,"animal",e],byClient:e=>[...or.all,"client",e]},bm={all:["stats"],clients:()=>[...bm.all,"clients"]},DS={all:["userProfile"],profile:()=>[...DS.all,"profile"]},us=()=>Vr({queryKey:Ks.lists(),queryFn:DJ,staleTime:5*60*1e3}),rZ=()=>{const e=$t();return qt({mutationFn:MJ,onSuccess:t=>{e.invalidateQueries({queryKey:Ks.lists()}),e.setQueryData(Ks.detail(t.id),t),e.invalidateQueries({queryKey:bm.clients()})}})},sZ=()=>{const e=$t();return qt({mutationFn:({id:t,data:n})=>IJ(t,n),onSuccess:t=>{e.setQueryData(Ks.detail(t.id),t),e.invalidateQueries({queryKey:Ks.lists()})}})},ds=()=>Vr({queryKey:Zr.lists(),queryFn:$J,staleTime:5*60*1e3}),aZ=()=>{const e=$t();return qt({mutationFn:RJ,onSuccess:t=>{e.invalidateQueries({queryKey:Zr.lists()}),e.setQueryData(Zr.detail(t.id),t),e.invalidateQueries({queryKey:Zr.byClient(t.client_id)}),e.invalidateQueries({queryKey:bm.clients()})}})},iZ=()=>{const e=$t();return qt({mutationFn:({id:t,data:n})=>FJ(t,n),onSuccess:t=>{e.setQueryData(Zr.detail(t.id),t),e.invalidateQueries({queryKey:Zr.lists()}),e.invalidateQueries({queryKey:Zr.byClient(t.client_id)})}})},v3=()=>Vr({queryKey:["consultations"],queryFn:async()=>{try{const{data:e,error:t}=await Me.from("consultations").select(`
            id,
            animal_id,
            client_id,
            veterinarian_id,
            consultation_date,
            consultation_type,
            symptoms,
            diagnosis,
            treatment,
            notes,
            weight,
            temperature,
            heart_rate,
            respiratory_rate,
            photos,
            follow_up_date,
            follow_up_notes,
            status,
            created_at,
            updated_at,
            animal:animals(
              id,
              name,
              species,
              breed,
              color,
              sex,
              weight,
              birth_date,
              microchip_number,
              status
            ),
            client:clients(
              id,
              first_name,
              last_name,
              email,
              phone,
              mobile_phone,
              address,
              city,
              client_type
            )
          `).order("consultation_date",{ascending:!1});if(t)throw console.error("Error fetching consultations:",t),t;return(e||[]).map(n=>({...n,followUp:n.follow_up_notes||null,cost:null,animal:Array.isArray(n.animal)?n.animal[0]:n.animal,client:Array.isArray(n.client)?n.client[0]:n.client}))}catch(e){throw console.error("Failed to fetch consultations:",e),e}},staleTime:5*60*1e3,retry:3,retryDelay:e=>Math.min(1e3*2**e,3e4)}),x3=()=>{const e=$t();return qt({mutationFn:async t=>{try{const{data:{user:n}}=await Me.auth.getUser();if(!n)throw new Error("User not authenticated");const s={animal_id:t.animal_id,client_id:t.client_id,veterinarian_id:n.id,consultation_date:t.consultation_date||new Date().toISOString(),consultation_type:t.consultation_type,symptoms:t.symptoms||null,diagnosis:t.diagnosis||null,treatment:t.treatment||null,notes:t.notes||null,weight:t.weight||null,temperature:t.temperature||null,heart_rate:t.heart_rate||null,respiratory_rate:t.respiratory_rate||null,photos:t.photos||null,follow_up_date:t.follow_up_date||null,follow_up_notes:t.follow_up_notes||null,status:t.status||"completed"},{data:a,error:i}=await Me.from("consultations").insert(s).select(`
            id,
            animal_id,
            client_id,
            veterinarian_id,
            consultation_date,
            consultation_type,
            symptoms,
            diagnosis,
            treatment,
            notes,
            weight,
            temperature,
            heart_rate,
            respiratory_rate,
            photos,
            follow_up_date,
            follow_up_notes,
            status,
            created_at,
            updated_at,
            animal:animals(
              id,
              name,
              species,
              breed,
              color,
              sex,
              weight,
              birth_date,
              microchip_number,
              status
            ),
            client:clients(
              id,
              first_name,
              last_name,
              email,
              phone,
              mobile_phone,
              address,
              city,
              client_type
            )
          `).single();if(i)throw console.error("Error creating consultation:",i),i;return{...a,followUp:a.follow_up_notes||null,cost:null}}catch(n){throw console.error("Failed to create consultation:",n),n}},onSuccess:()=>{e.invalidateQueries({queryKey:["consultations"]}),e.invalidateQueries({queryKey:["dashboard-stats"]})}})},y3=()=>{const e=$t();return qt({mutationFn:async({id:t,data:n})=>{const{data:s,error:a}=await Me.from("consultations").update(n).eq("id",t).select(`
          *,
          animal:animals(*),
          client:clients(*)
        `).single();if(a)throw a;return s},onSuccess:()=>{e.invalidateQueries({queryKey:["consultations"]}),e.invalidateQueries({queryKey:["dashboard-stats"]})}})},oZ=()=>{const e=$t();return qt({mutationFn:async t=>{try{console.log(`Attempting dynamic deletion of consultation with ID: ${t}`);const n=[{table:"prescriptions",field:"consultation_id"},{table:"vaccinations",field:"consultation_id"},{table:"lab_results",field:"consultation_id"},{table:"antiparasitics",field:"consultation_id"}];for(const a of n)try{const{data:i,error:o}=await Me.from(a.table).select("id").eq(a.field,t);if(o){console.warn(`Could not check ${a.table}: ${o.message}`);continue}if(i&&i.length>0){if(console.log(`Found ${i.length} related records in ${a.table}`),a.table==="prescriptions")for(const c of i){const{error:u}=await Me.from("prescription_medications").delete().eq("prescription_id",c.id);u&&console.warn(`Could not delete prescription medications: ${u.message}`)}const{error:l}=await Me.from(a.table).delete().eq(a.field,t);l?console.warn(`Could not delete from ${a.table}: ${l.message}`):console.log(`Successfully deleted related records from ${a.table}`)}}catch(i){console.warn(`Error handling ${a.table}:`,i)}const{error:s}=await Me.from("consultations").delete().eq("id",t);if(s)throw console.error(`Database error during consultation deletion: ${s.message}`),new Error(`Failed to delete consultation: ${s.message}`);return console.log(`Successfully deleted consultation with ID: ${t}`),{success:!0,id:t}}catch(n){throw console.error("Dynamic deletion failed:",n),new Error(`Deletion failed: ${n.message||"Unknown error"}`)}},onSuccess:()=>{e.invalidateQueries({queryKey:["consultations"]}),e.invalidateQueries({queryKey:["prescriptions"]}),e.invalidateQueries({queryKey:["dashboard-stats"]}),e.invalidateQueries({queryKey:["vaccinations"]}),e.invalidateQueries({queryKey:["lab-results"]})},retry:1})},MS=()=>Vr({queryKey:["vaccinations"],queryFn:()=>LJ()}),lZ=()=>{const e=$t();return qt({mutationFn:BJ,onSuccess:()=>{e.invalidateQueries({queryKey:["vaccinations"]}),e.invalidateQueries({queryKey:["animals"]})}})},cZ=()=>{const e=$t();return qt({mutationFn:({id:t,data:n})=>VJ(t,n),onSuccess:()=>{e.invalidateQueries({queryKey:["vaccinations"]}),e.invalidateQueries({queryKey:["animals"]})}})},uZ=()=>{const e=$t();return qt({mutationFn:zJ,onSuccess:()=>{e.invalidateQueries({queryKey:["vaccinations"]}),e.invalidateQueries({queryKey:["animals"]})}})},dZ=()=>Vr({queryKey:["vaccination-protocols"],queryFn:()=>qJ()}),hZ=()=>{const e=$t();return qt({mutationFn:UJ,onSuccess:()=>{e.invalidateQueries({queryKey:["vaccination-protocols"]})}})},fZ=()=>{const e=$t();return qt({mutationFn:({id:t,data:n})=>WJ(t,n),onSuccess:()=>{e.invalidateQueries({queryKey:["vaccination-protocols"]})}})},mZ=()=>Vr({queryKey:["antiparasitics"],queryFn:HJ}),pZ=()=>{const e=$t();return qt({mutationFn:GJ,onSuccess:()=>{e.invalidateQueries({queryKey:["antiparasitics"]})}})},gZ=()=>{const e=$t();return qt({mutationFn:KJ,onSuccess:()=>{e.invalidateQueries({queryKey:["antiparasitics"]})}})},vZ=()=>Vr({queryKey:["antiparasitic-protocols"],queryFn:YJ}),xZ=e=>Vr({queryKey:["antiparasitic-protocols","by-species",e],queryFn:()=>e?QJ(e):Promise.resolve([]),enabled:!!e}),yZ=()=>{const e=$t();return qt({mutationFn:XJ,onSuccess:()=>{e.invalidateQueries({queryKey:["antiparasitic-protocols"]})}})},jZ=()=>{const e=$t();return qt({mutationFn:({id:t,updates:n})=>JJ(t,n),onSuccess:()=>{e.invalidateQueries({queryKey:["antiparasitic-protocols"]})}})},bZ=()=>Vr({queryKey:["client-stats"],queryFn:async()=>{var i,o,l,c;const[e,t]=await Promise.all([Me.from("clients").select("id, status"),Me.from("animals").select("id, status")]);if(e.error||t.error)throw new Error("Failed to fetch client stats");const n=((i=e.data)==null?void 0:i.filter(u=>u.status==="actif").length)||0;(o=e.data)!=null&&o.length;const s=((l=t.data)==null?void 0:l.length)||0,a=((c=t.data)==null?void 0:c.reduce((u,d)=>(u[d.status]=(u[d.status]||0)+1,u),{}))||{};return{totalClients:n,totalAnimals:s,animalsByStatus:a}},staleTime:5*60*1e3}),wZ=()=>Vr({queryKey:["prescriptions"],queryFn:async()=>{try{console.log("Fetching prescriptions dynamically");const{data:e,error:t}=await Me.from("prescriptions").select(`
            id,
            consultation_id,
            animal_id,
            client_id,
            veterinarian_id,
            prescription_date,
            diagnosis,
            notes,
            status,
            refill_count,
            valid_until,
            created_at,
            updated_at,
            animal:animals(
              id,
              name,
              species,
              breed,
              color,
              sex,
              weight,
              birth_date,
              microchip_number,
              status
            ),
            client:clients(
              id,
              first_name,
              last_name,
              email,
              phone,
              mobile_phone,
              address,
              city,
              client_type
            ),
            medications:prescription_medications(
              id,
              prescription_id,
              stock_item_id,
              medication_name,
              dosage,
              frequency,
              duration,
              quantity,
              instructions,
              route,
              created_at
            )
          `).order("prescription_date",{ascending:!1});if(t)throw console.error("Error fetching prescriptions:",t),t;return console.log(`Successfully fetched ${(e==null?void 0:e.length)||0} prescriptions`),e||[]}catch(e){throw console.error("Dynamic prescription fetch failed:",e),e}},staleTime:5*60*1e3,retry:3,retryDelay:e=>Math.min(1e3*2**e,3e4)}),NZ=()=>{const e=$t();return qt({mutationFn:async t=>{try{console.log("Creating prescription dynamically:",t);const{data:{user:n}}=await Me.auth.getUser();if(!n)throw new Error("User not authenticated");const{medications:s,...a}=t,i={consultation_id:a.consultation_id,animal_id:a.animal_id,client_id:a.client_id,veterinarian_id:a.veterinarian_id||n.id,prescription_date:a.prescription_date||new Date().toISOString(),diagnosis:a.diagnosis||null,notes:a.notes||null,status:a.status||"active",refill_count:a.refill_count||0,valid_until:a.valid_until||null},{data:o,error:l}=await Me.from("prescriptions").insert(i).select(`
            id,
            consultation_id,
            animal_id,
            client_id,
            veterinarian_id,
            prescription_date,
            diagnosis,
            notes,
            status,
            refill_count,
            valid_until,
            created_at,
            updated_at,
            animal:animals(
              id,
              name,
              species,
              breed,
              color,
              sex,
              weight,
              birth_date,
              microchip_number,
              status
            ),
            client:clients(
              id,
              first_name,
              last_name,
              email,
              phone,
              mobile_phone,
              address,
              city,
              client_type
            )
          `).single();if(l)throw console.error("Error creating prescription:",l),new Error(`Error creating prescription: ${l.message}`);if(s&&s.length>0){const c=s.map(h=>({prescription_id:o.id,stock_item_id:h.stock_item_id||null,medication_name:h.medication_name,dosage:h.dosage||null,frequency:h.frequency||null,duration:h.duration||null,quantity:h.quantity||1,instructions:h.instructions||null,route:h.route||null})),{data:u,error:d}=await Me.from("prescription_medications").insert(c).select();if(d)throw console.error("Error creating prescription medications:",d),await Me.from("prescriptions").delete().eq("id",o.id),new Error(`Error creating prescription medications: ${d.message}`);console.log(`Successfully created ${u.length} prescription medications`)}return console.log("Successfully created prescription:",o.id),{...o,medications:s||[]}}catch(n){throw console.error("Dynamic prescription creation failed:",n),n}},onSuccess:()=>{e.invalidateQueries({queryKey:["prescriptions"]}),e.invalidateQueries({queryKey:["consultations"]}),e.invalidateQueries({queryKey:["dashboard-stats"]}),e.invalidateQueries({queryKey:["stock-items"]})},retry:1})},SZ=()=>Vr({queryKey:["stock-items"],queryFn:async()=>{try{console.log("Fetching stock items dynamically");const{data:e,error:t}=await Me.from("stock_items").select(`
            id,
            name,
            description,
            category,
            unit,
            current_quantity,
            minimum_quantity,
            maximum_quantity,
            unit_cost,
            selling_price,
            supplier,
            batch_number,
            expiration_date,
            location,
            requires_prescription,
            active,
            created_at,
            updated_at
          `).eq("active",!0).order("name");if(t)throw console.error("Error fetching stock items:",t),t;return console.log(`Successfully fetched ${(e==null?void 0:e.length)||0} stock items`),e||[]}catch(e){throw console.error("Dynamic stock items fetch failed:",e),e}},staleTime:5*60*1e3,retry:3,retryDelay:e=>Math.min(1e3*2**e,3e4)}),CZ=()=>Vr({queryKey:DS.profile(),queryFn:Fx,staleTime:5*60*1e3}),_Z=()=>{const e=$t();return qt({mutationFn:t=>wX(t),onSuccess:t=>{e.setQueryData(DS.profile(),t),e.invalidateQueries({queryKey:["auth","session"]})}})},j3=()=>Vr({queryKey:or.lists(),queryFn:ZJ,staleTime:2*60*1e3}),b3=()=>{const e=$t();return qt({mutationFn:eZ,onSuccess:t=>{e.invalidateQueries({queryKey:or.lists()}),t.animal_id&&e.invalidateQueries({queryKey:or.byAnimal(t.animal_id)}),t.client_id&&(e.invalidateQueries({queryKey:or.byClient(t.client_id)}),e.invalidateQueries({queryKey:Ks.detail(t.client_id)})),e.invalidateQueries({queryKey:bm.clients()})}})},PZ=()=>{const e=$t();return qt({mutationFn:({id:t,data:n})=>tZ(t,n),onSuccess:t=>{e.invalidateQueries({queryKey:or.lists()}),e.setQueryData(or.lists(),n=>n?n.map(s=>s.id===t.id?t:s):[]),t.animal_id&&e.invalidateQueries({queryKey:or.byAnimal(t.animal_id)}),t.client_id&&e.invalidateQueries({queryKey:or.byClient(t.client_id)})}})},AZ=()=>{const e=$t();return qt({mutationFn:nZ,onSuccess:(t,n)=>{e.setQueryData(or.lists(),s=>s?s.filter(a=>a.id!==n):[]),e.invalidateQueries({queryKey:or.lists()}),e.invalidateQueries({queryKey:bm.clients()})}})};function wm({open:e,onOpenChange:t}){const n=rZ(),{toast:s}=et(),[a,i]=b.useState({first_name:"",last_name:"",email:"",phone:"",mobile_phone:"",address:"",city:"",postal_code:"",country:"Maroc",notes:"",client_type:"particulier"}),o=u=>{const{id:d,value:h}=u.target;i(f=>({...f,[d]:h}))},l=(u,d)=>{i(h=>({...h,[u]:d}))},c=async u=>{u.preventDefault();try{await n.mutateAsync(a),s({title:"Client ajouté",description:`${a.first_name} ${a.last_name} a été ajouté et sauvegardé avec succès.`}),i({first_name:"",last_name:"",email:"",phone:"",mobile_phone:"",address:"",city:"",postal_code:"",country:"Maroc",notes:"",client_type:"particulier"}),t(!1)}catch{s({title:"Erreur",description:"Une erreur s'est produite lors de l'ajout du client.",variant:"destructive"})}};return r.jsx(He,{open:e,onOpenChange:t,children:r.jsxs(We,{className:"sm:max-w-[500px]",children:[r.jsxs(Ge,{children:[r.jsx(Ke,{children:"Nouveau Client"}),r.jsx(yt,{children:"Ajoutez un nouveau client à votre base de données."})]}),r.jsxs("form",{onSubmit:c,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"first_name",children:"Prénom *"}),r.jsx(K,{id:"first_name",value:a.first_name,onChange:o,required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"last_name",children:"Nom *"}),r.jsx(K,{id:"last_name",value:a.last_name,onChange:o,required:!0})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"email",children:"Email"}),r.jsx(K,{id:"email",type:"email",value:a.email||"",onChange:o})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"phone",children:"Téléphone *"}),r.jsx(K,{id:"phone",value:a.phone||"",onChange:o,required:!0})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"address",children:"Adresse"}),r.jsx(K,{id:"address",value:a.address||"",onChange:o})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"city",children:"Ville"}),r.jsx(K,{id:"city",value:a.city||"",onChange:o})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"postal_code",children:"Code postal"}),r.jsx(K,{id:"postal_code",value:a.postal_code||"",onChange:o})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"mobile_phone",children:"Téléphone portable"}),r.jsx(K,{id:"mobile_phone",value:a.mobile_phone||"",onChange:o,placeholder:"Numéro de téléphone portable"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"client_type",children:"Type de client"}),r.jsxs(ve,{value:a.client_type,onValueChange:u=>l("client_type",u),children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Sélectionner le type"})}),r.jsxs(ge,{children:[r.jsx(M,{value:"particulier",children:"Particulier"}),r.jsx(M,{value:"eleveur",children:"Éleveur"}),r.jsx(M,{value:"ferme",children:"Ferme"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"notes",children:"Notes"}),r.jsx(Be,{id:"notes",value:a.notes||"",onChange:o,placeholder:"Notes additionnelles..."})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(R,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),r.jsxs(R,{type:"submit",disabled:n.isPending,children:[n.isPending&&r.jsx(Nr,{className:"mr-2 h-4 w-4 animate-spin"}),"Ajouter Client"]})]})]})]})})}const kZ=fm("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Se({className:e,variant:t,...n}){return r.jsx("div",{className:Ie(kZ({variant:t}),e),...n})}const yp="vetpro-clinicSettings",w3={farmTypes:["Bovin laitier","Bovin viande","Porcin","Avicole","Ovin","Caprin","Équin","Apiculture","Aquaculture","Cuniculture","Mixte"],animalCategories:["Bovins laitiers","Bovins à viande","Porcs","Poules pondeuses","Poulets de chair","Ovins","Caprins","Chevaux","Lapins","Abeilles","Poissons"],breedsByCategory:{"Bovins laitiers":["Holstein","Prim'Holstein","Montbéliarde","Normande","Simmental"],"Bovins à viande":["Charolaise","Limousine","Blonde d'Aquitaine","Angus","Salers"],Porcs:["Large White","Landrace","Piétrain","Duroc","Hampshire"],"Poules pondeuses":["ISA Brown","Lohmann Brown","Hy-Line","Novogen","Dekalb"],"Poulets de chair":["Cobb 500","Ross 308","Hubbard","Arbor Acres"],Ovins:["Lacaune","Brebis laitière","Ile-de-France","Texel","Suffolk"],Caprins:["Saanen","Alpine","Poitevine","Boer","Angora"],Chevaux:["Pur-sang","Trotteur","Selle français","Arabe","Quarter Horse"],Lapins:["Néo-Zélandais","Californien","Fauve de Bourgogne","Géant des Flandres"],Abeilles:["Abeille noire","Buckfast","Carnica","Caucasienne"],Poissons:["Truite arc-en-ciel","Saumon","Carpe","Bar","Daurade"]},certificationTypes:["Agriculture Biologique","Label Rouge","AOC/AOP","IGP","Haute Valeur Environnementale","Bien-être animal","Global GAP","IFS Food","BRC Food","Œufs de France"],equipmentTypes:["Tracteur","Moissonneuse","Épandeur","Charrue","Système de traite","Tank à lait","Système d'alimentation automatique","Ventilation","Générateur","Système d'irrigation","Matériel de récolte"],defaultSurfaceUnit:"hectares",defaultCoordinateFormat:"decimal"},N3={clients:"table",pets:"cards",consultations:"table",appointments:"table",prescriptions:"table",farms:"cards",vaccinations:"table",antiparasitics:"table"},S3={openingTime:"08:00",closingTime:"18:00",slotDuration:30,lunchBreakStart:"12:00",lunchBreakEnd:"13:00",workingDays:["monday","tuesday","wednesday","thursday","friday","saturday"]},lw=[{id:1,name:"Dr. Jean Dupont",isActive:!0},{id:2,name:"Dr. Marie Martin",isActive:!0},{id:3,name:"Pr. Ahmed El Alaoui",isActive:!0}],jp={clinicName:"",address:"",phone:"",email:"",website:"",footerText:"",logo:"/placeholder.svg",currency:"MAD",species:"",showClinicInfo:!0,showVetsInfo:!0,veterinarians:lw,farmManagement:w3,displayPreferences:N3,defaultConsultationPrice:150,scheduleSettings:S3},C3=b.createContext(void 0),TZ=({children:e})=>{const[t,n]=b.useState(jp);b.useEffect(()=>{const a=localStorage.getItem(yp);if(a)try{const i=JSON.parse(a),o={...jp,...i,veterinarians:i.veterinarians&&i.veterinarians.some(l=>l.name==="Dr. Martin"||l.name==="Dr. Dupont")?lw:i.veterinarians||lw,farmManagement:{...w3,...i.farmManagement},displayPreferences:{...N3,...i.displayPreferences},scheduleSettings:{...S3,...i.scheduleSettings}};n(o),localStorage.setItem(yp,JSON.stringify(o))}catch(i){console.error("Erreur lors du chargement des paramètres:",i),n(jp)}else localStorage.setItem(yp,JSON.stringify(jp))},[]);const s=a=>{n(a),localStorage.setItem(yp,JSON.stringify(a))};return r.jsx(C3.Provider,{value:{settings:t,updateSettings:s},children:e})},xt=()=>{const e=b.useContext(C3);if(!e)throw new Error("useSettings must be used within SettingsProvider");return e};var Ux="Checkbox",[EZ,gke]=cs(Ux),[OZ,IS]=EZ(Ux);function DZ(e){const{__scopeCheckbox:t,checked:n,children:s,defaultChecked:a,disabled:i,form:o,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:h}=e,[f,m]=yi({prop:n,defaultProp:a??!1,onChange:c,caller:Ux}),[g,p]=b.useState(null),[v,j]=b.useState(null),x=b.useRef(!1),y=g?!!o||!!g.closest("form"):!0,N={checked:f,disabled:i,setChecked:m,control:g,setControl:p,name:l,form:o,value:d,hasConsumerStoppedPropagationRef:x,required:u,defaultChecked:wo(a)?!1:a,isFormControl:y,bubbleInput:v,setBubbleInput:j};return r.jsx(OZ,{scope:t,...N,children:MZ(h)?h(N):s})}var _3="CheckboxTrigger",P3=b.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...s},a)=>{const{control:i,value:o,disabled:l,checked:c,required:u,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:f,isFormControl:m,bubbleInput:g}=IS(_3,e),p=pt(a,d),v=b.useRef(c);return b.useEffect(()=>{const j=i==null?void 0:i.form;if(j){const x=()=>h(v.current);return j.addEventListener("reset",x),()=>j.removeEventListener("reset",x)}},[i,h]),r.jsx(Le.button,{type:"button",role:"checkbox","aria-checked":wo(c)?"mixed":c,"aria-required":u,"data-state":O3(c),"data-disabled":l?"":void 0,disabled:l,value:o,...s,ref:p,onKeyDown:Ae(t,j=>{j.key==="Enter"&&j.preventDefault()}),onClick:Ae(n,j=>{h(x=>wo(x)?!0:!x),g&&m&&(f.current=j.isPropagationStopped(),f.current||j.stopPropagation())})})});P3.displayName=_3;var $S=b.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:s,checked:a,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:u,form:d,...h}=e;return r.jsx(DZ,{__scopeCheckbox:n,checked:a,defaultChecked:i,disabled:l,required:o,onCheckedChange:u,name:s,form:d,value:c,internal_do_not_use_render:({isFormControl:f})=>r.jsxs(r.Fragment,{children:[r.jsx(P3,{...h,ref:t,__scopeCheckbox:n}),f&&r.jsx(E3,{__scopeCheckbox:n})]})})});$S.displayName=Ux;var A3="CheckboxIndicator",k3=b.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:s,...a}=e,i=IS(A3,n);return r.jsx(ks,{present:s||wo(i.checked)||i.checked===!0,children:r.jsx(Le.span,{"data-state":O3(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});k3.displayName=A3;var T3="CheckboxBubbleInput",E3=b.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:s,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:o,required:l,disabled:c,name:u,value:d,form:h,bubbleInput:f,setBubbleInput:m}=IS(T3,e),g=pt(n,m),p=ES(i),v=X1(s);b.useEffect(()=>{const x=f;if(!x)return;const y=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(y,"checked").set,C=!a.current;if(p!==i&&w){const S=new Event("click",{bubbles:C});x.indeterminate=wo(i),w.call(x,wo(i)?!1:i),x.dispatchEvent(S)}},[f,p,i,a]);const j=b.useRef(wo(i)?!1:i);return r.jsx(Le.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??j.current,required:l,disabled:c,name:u,value:d,form:h,...t,tabIndex:-1,ref:g,style:{...t.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});E3.displayName=T3;function MZ(e){return typeof e=="function"}function wo(e){return e==="indeterminate"}function O3(e){return wo(e)?"indeterminate":e?"checked":"unchecked"}const Ia=b.forwardRef(({className:e,...t},n)=>r.jsx($S,{ref:n,className:Ie("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:r.jsx(k3,{className:Ie("flex items-center justify-center text-current"),children:r.jsx(z1,{className:"h-4 w-4"})})}));Ia.displayName=$S.displayName;function Nm({open:e,onOpenChange:t}){const{data:n=[]}=us(),{data:s=[]}=ds(),a=aZ(),{settings:i}=xt(),{toast:o}=et(),[l,c]=b.useState({name:"",type:"",breed:"",gender:"",birthDate:"",weight:"",color:"",ownerId:"",microchip:"",medicalNotes:"",photo:"",status:"healthy",hasPedigree:!1,officialName:"",pedigreeNumber:"",breeder:"",fatherName:"",fatherPedigree:"",fatherBreed:"",fatherTitles:"",motherName:"",motherPedigree:"",motherBreed:"",motherTitles:"",pedigreePhoto:""}),u=f=>{c(m=>({...m,[f.target.id]:f.target.value}))},d=(f,m)=>{c(g=>({...g,[f]:m}))},h=async f=>{if(f.preventDefault(),!n.find(g=>g.id===l.ownerId)){o({title:"Erreur",description:"Veuillez sélectionner un propriétaire valide."});return}if(l.microchip&&l.microchip.trim()&&s.find(p=>p.microchip_number===l.microchip.trim())){o({title:"Erreur",description:"Un animal avec ce numéro de puce existe déjà.",variant:"destructive"});return}try{const g={client_id:l.ownerId,name:l.name,species:l.type,breed:l.breed||void 0,color:l.color||void 0,sex:l.gender==="male"?"Mâle":l.gender==="female"?"Femelle":"Inconnu",weight:l.weight?Number(l.weight):void 0,birth_date:l.birthDate||void 0,...l.microchip&&l.microchip.trim()?{microchip_number:l.microchip.trim()}:{},notes:l.medicalNotes||void 0,photo_url:l.photo||void 0,status:l.status};await a.mutateAsync(g),o({title:"Animal ajouté",description:`${l.name} a été ajouté et sauvegardé avec succès.`}),c({name:"",type:"",breed:"",gender:"",birthDate:"",weight:"",color:"",ownerId:"",microchip:"",medicalNotes:"",photo:"",status:"healthy",hasPedigree:!1,officialName:"",pedigreeNumber:"",breeder:"",fatherName:"",fatherPedigree:"",fatherBreed:"",fatherTitles:"",motherName:"",motherPedigree:"",motherBreed:"",motherTitles:"",pedigreePhoto:""}),t(!1)}catch{o({title:"Erreur",description:"Erreur lors de l'ajout de l'animal",variant:"destructive"})}};return r.jsx(He,{open:e,onOpenChange:t,children:r.jsxs(We,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto",children:[r.jsxs(Ge,{children:[r.jsx(Ke,{children:"Nouvel Animal"}),r.jsx(yt,{children:"Ajoutez un nouvel animal à votre base de données."})]}),r.jsxs("form",{onSubmit:h,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"name",children:"Nom de l'animal *"}),r.jsx(K,{id:"name",value:l.name,onChange:u,required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{children:"Type d'animal *"}),r.jsxs(ve,{value:l.type,onValueChange:f=>d("type",f),children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Sélectionner le type"})}),r.jsx(ge,{children:i.species?i.species.split(",").map((f,m)=>{const g=f.trim();return g?r.jsx(M,{value:g,children:g},m):null}).filter(Boolean):r.jsxs(r.Fragment,{children:[r.jsx(M,{value:"Chien",children:"Chien"}),r.jsx(M,{value:"Chat",children:"Chat"}),r.jsx(M,{value:"Oiseau",children:"Oiseau"}),r.jsx(M,{value:"Lapin",children:"Lapin"}),r.jsx(M,{value:"Furet",children:"Furet"}),r.jsx(M,{value:"Souris",children:"Souris"}),r.jsx(M,{value:"Hamster",children:"Hamster"}),r.jsx(M,{value:"Reptile",children:"Reptile"}),r.jsx(M,{value:"Autre",children:"Autre"})]})})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"breed",children:"Race"}),r.jsx(K,{id:"breed",value:l.breed,onChange:u})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{children:"Sexe"}),r.jsxs(ve,{value:l.gender,onValueChange:f=>d("gender",f),children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Sélectionner le sexe"})}),r.jsxs(ge,{children:[r.jsx(M,{value:"male",children:"Mâle"}),r.jsx(M,{value:"female",children:"Femelle"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"birthDate",children:"Date de naissance"}),r.jsx(K,{id:"birthDate",type:"date",value:l.birthDate,onChange:u,max:new Date().toISOString().split("T")[0]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"weight",children:"Poids (kg)"}),r.jsx(K,{id:"weight",value:l.weight,onChange:u})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"color",children:"Couleur"}),r.jsx(K,{id:"color",value:l.color,onChange:u})]}),r.jsx("div",{className:"space-y-2"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{children:"Propriétaire *"}),n.length===0?r.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:r.jsx("p",{className:"text-yellow-800 text-sm",children:"Aucun client disponible. Veuillez d'abord ajouter un client."})}):r.jsxs(ve,{value:l.ownerId.toString(),onValueChange:f=>d("ownerId",f),children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Sélectionner le propriétaire"})}),r.jsx(ge,{children:n.map(f=>r.jsxs(M,{value:f.id.toString(),children:[f.first_name," ",f.last_name," - ",f.email]},f.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"microchip",children:"Numéro de puce électronique"}),r.jsx(K,{id:"microchip",value:l.microchip,onChange:u})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"medicalNotes",children:"Notes médicales"}),r.jsx(Be,{id:"medicalNotes",value:l.medicalNotes,onChange:u,placeholder:"Allergies, conditions médicales, notes importantes..."})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{children:"État de santé"}),r.jsxs(ve,{value:l.status,onValueChange:f=>d("status",f),children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Sélectionner l'état de santé"})}),r.jsxs(ge,{children:[r.jsx(M,{value:"healthy",children:"En bonne santé"}),r.jsx(M,{value:"treatment",children:"En traitement"}),r.jsx(M,{value:"urgent",children:"Urgent"})]})]})]}),r.jsxs("div",{className:"space-y-4 border-t pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ia,{id:"hasPedigree",checked:l.hasPedigree,onCheckedChange:f=>c(m=>({...m,hasPedigree:f}))}),r.jsx(D,{htmlFor:"hasPedigree",className:"text-lg font-medium",children:"Cet animal a un pedigree officiel"})]}),l.hasPedigree&&r.jsxs("div",{className:"space-y-4 pl-6 border-l-2 border-primary/20",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"officialName",children:"Nom officiel"}),r.jsx(K,{id:"officialName",value:l.officialName,onChange:u,placeholder:"Nom officiel du pedigree"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"pedigreeNumber",children:"N° pedigree/LOF"}),r.jsx(K,{id:"pedigreeNumber",value:l.pedigreeNumber,onChange:u,placeholder:"Numéro de pedigree"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"breeder",children:"Éleveur"}),r.jsx(K,{id:"breeder",value:l.breeder,onChange:u,placeholder:"Nom de l'éleveur"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsx("h4",{className:"font-medium text-sm",children:"Père"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(K,{placeholder:"Nom du père",value:l.fatherName,onChange:u}),r.jsx(K,{placeholder:"N° pedigree du père",value:l.fatherPedigree,onChange:u}),r.jsx(K,{placeholder:"Race du père",value:l.fatherBreed,onChange:u}),r.jsx(Be,{placeholder:"Titres du père",value:l.fatherTitles,onChange:u,rows:2})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h4",{className:"font-medium text-sm",children:"Mère"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(K,{placeholder:"Nom de la mère",value:l.motherName,onChange:u}),r.jsx(K,{placeholder:"N° pedigree de la mère",value:l.motherPedigree,onChange:u}),r.jsx(K,{placeholder:"Race de la mère",value:l.motherBreed,onChange:u}),r.jsx(Be,{placeholder:"Titres de la mère",value:l.motherTitles,onChange:u,rows:2})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{children:"Document pedigree"}),r.jsx("input",{type:"file",accept:"image/*",onChange:async f=>{var p;const m=(p=f.target.files)==null?void 0:p[0];if(!m)return;const g=new FileReader;g.onload=()=>c(v=>({...v,pedigreePhoto:g.result})),g.readAsDataURL(m)}}),l.pedigreePhoto&&r.jsx("img",{src:l.pedigreePhoto,alt:"Document pedigree",className:"h-32 w-auto object-contain rounded border"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{children:"Photo de l'animal"}),r.jsx("input",{type:"file",accept:"image/*",onChange:async f=>{var p;const m=(p=f.target.files)==null?void 0:p[0];if(!m)return;const g=new FileReader;g.onload=()=>c(v=>({...v,photo:g.result})),g.readAsDataURL(m)}}),l.photo&&r.jsx("img",{src:l.photo,alt:"preview",className:"h-24 w-24 object-cover rounded"})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(R,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),r.jsx(R,{type:"submit",children:"Ajouter Animal"})]})]})]})})}function RS(e,t,n){const s=[],{openingTime:a,closingTime:i,slotDuration:o,lunchBreakStart:l,lunchBreakEnd:c}=t,u=bp(a),d=bp(i),h=l?bp(l):null,f=c?bp(c):null;for(let m=u;m<d;m+=o){const g=$Z(m),p=h&&f&&m>=h&&m<f,v=n.some(j=>j.date===e&&j.time===g);s.push({time:g,isAvailable:!v&&!p,isLunchBreak:!!p})}return s}function IZ(e,t,n,s){const i=RS(e,n,s).find(o=>o.time===t);return i?i.isAvailable:!1}function bp(e){const[t,n]=e.split(":").map(Number);return t*60+n}function $Z(e){const t=Math.floor(e/60),n=e%60;return`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}function RZ(e){return new Date(e).toLocaleDateString("fr-FR",{weekday:"long"})}function FZ(e,t){const n=RZ(e).toLowerCase();return t.workingDays.includes(n)}function D3({open:e,onOpenChange:t,prefillClientId:n,prefillPetId:s,prefillType:a,prefillReason:i,originalVaccinationId:o}){var H,z;const{data:l=[]}=us(),{data:c=[]}=ds(),{data:u=[]}=j3();b3();const{settings:d}=xt(),{toast:h}=et(),[f,m]=b.useState(!1),[g,p]=b.useState(!1),[v,j]=b.useState([]),[x,y]=b.useState({clientId:"",petId:"",date:"",time:"",type:"",duration:30,reason:"",notes:""}),[N,w]=b.useState([]),[C,S]=b.useState([]);b.useEffect(()=>{e&&(y({clientId:n||"",petId:s||"",date:"",time:"",type:a||"",duration:30,reason:i||"",notes:""}),w([]),S([]))},[e,n,s,a,i]);const _=$=>c.filter(I=>I.client_id===$);b.useEffect(()=>{if(e&&n&&s){const $=_(n);w($),$.find(I=>I.id===s)?y(I=>({...I,petId:s})):y(I=>({...I,petId:""}))}},[e,n,s,c]),b.useEffect(()=>{if(x.clientId){const $=_(x.clientId);w($),(!s||!$.find(I=>I.id===x.petId))&&y(I=>({...I,petId:""}))}else w([])},[x.clientId,c,s]),b.useEffect(()=>{if(x.clientId>0){const $=getPetsByOwnerId(x.clientId);w($),(!s||!$.find(I=>I.id===s))&&y(I=>({...I,petId:0}))}else w([])},[x.clientId,getPetsByOwnerId,s]),b.useEffect(()=>{if(x.date){const $=RS(x.date,d.scheduleSettings,u);j($),x.time&&!IZ(x.date,x.time,d.scheduleSettings,u)&&y(I=>({...I,time:""}))}else j([])},[x.date,d.scheduleSettings,u]),b.useEffect(()=>{x.date&&x.time&&x.duration&&k()},[x.date,x.time,x.duration]);const k=()=>{const $=[],I=new Date(`${x.date}T${x.time}`),E=new Date(I.getTime()+x.duration*6e4),q=I.getHours(),Y=E.getHours();(q<8||Y>18)&&$.push("Le rendez-vous doit être entre 8h00 et 18h00");const re=I.getDay();(re===0||re===6)&&$.push("Pas de rendez-vous le weekend"),S($)},T=$=>{y(I=>({...I,[$.target.id]:$.target.value}))},P=($,I)=>{y(E=>({...E,[$]:$==="clientId"||$==="petId"||$==="duration"?parseInt(I):I}))},A=$=>{if($.preventDefault(),C.length>0){h({title:"Conflits détectés",description:C.join(", "),variant:"destructive"});return}if(!x.clientId||!x.petId||!x.date||!x.time||!x.type){h({title:"Informations manquantes",description:"Veuillez remplir tous les champs obligatoires.",variant:"destructive"});return}const I=l.find(q=>q.id===x.clientId),E=pets.find(q=>q.id===x.petId);if(!I||!E){h({title:"Erreur",description:"Client ou animal non trouvé.",variant:"destructive"});return}addAppointment({clientId:x.clientId,clientName:I.name,petId:x.petId,petName:E.name,date:x.date,time:x.time,type:x.type,duration:x.duration,reason:x.reason,notes:x.notes,status:"scheduled",reminderSent:!1}),a==="vaccination"&&o&&(createVaccinationReminder(o,x.date,x.time),h({title:"Rappel enregistré",description:"Le rappel de vaccination a été ajouté."})),h({title:"Rendez-vous planifié",description:`RDV pour ${E.name} (${I.name}) prévu le ${x.date} à ${x.time}.`}),t(!1)},B=()=>new Date().toISOString().split("T")[0],L=$=>({consultation:"Consultation générale",vaccination:"Vaccination",chirurgie:"Chirurgie",urgence:"Urgence",controle:"Contrôle post-opératoire",sterilisation:"Stérilisation",dentaire:"Soins dentaires"})[$]||$;return r.jsxs(r.Fragment,{children:[r.jsx(He,{open:e,onOpenChange:t,children:r.jsxs(We,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[r.jsxs(Ge,{children:[r.jsxs(Ke,{className:"flex items-center gap-2",children:[r.jsx(Ye,{className:"h-5 w-5"}),"Nouveau Rendez-vous"]}),r.jsx(yt,{children:"Planifiez un nouveau rendez-vous pour un client et son animal."})]}),r.jsxs("form",{onSubmit:A,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{children:"Client *"}),l.length===0?r.jsxs("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:[r.jsx("p",{className:"text-yellow-800 text-sm",children:"Aucun client disponible."}),r.jsxs(R,{type:"button",size:"sm",variant:"outline",className:"mt-2 gap-1",onClick:()=>m(!0),children:[r.jsx(Ue,{className:"h-3 w-3"}),"Ajouter Client"]})]}):r.jsxs(ve,{value:x.clientId.toString(),onValueChange:$=>P("clientId",$),children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Sélectionner le client"})}),r.jsx(ge,{children:l.map($=>r.jsx(M,{value:$.id.toString(),children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Rn,{className:"h-3 w-3"}),$.name]})},$.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{children:"Animal *"}),x.clientId===0?r.jsx("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-md",children:r.jsx("p",{className:"text-gray-600 text-sm",children:"Sélectionnez d'abord un client"})}):N.length===0?r.jsxs("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:[r.jsx("p",{className:"text-yellow-800 text-sm",children:"Aucun animal pour ce client."}),r.jsxs(R,{type:"button",size:"sm",variant:"outline",className:"mt-2 gap-1",onClick:()=>p(!0),children:[r.jsx(Ue,{className:"h-3 w-3"}),"Ajouter Animal"]})]}):r.jsxs(ve,{value:x.petId.toString(),onValueChange:$=>P("petId",$),children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Sélectionner l'animal"})}),r.jsx(ge,{children:N.map($=>r.jsx(M,{value:$.id.toString(),children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(lt,{className:"h-3 w-3"}),$.name," (",$.type,")"]})},$.id))})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"date",children:"Date *"}),r.jsx(K,{id:"date",type:"date",value:x.date,onChange:T,min:B(),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"time",children:"Heure *"}),x.date?r.jsxs("div",{className:"space-y-2",children:[r.jsxs(ve,{value:x.time,onValueChange:$=>y(I=>({...I,time:$})),children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Sélectionner un créneau"})}),r.jsx(ge,{className:"max-h-60",children:v.map($=>r.jsx(M,{value:$.time,disabled:!$.isAvailable,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{children:$.time}),$.isLunchBreak&&r.jsx(Se,{variant:"secondary",className:"text-xs",children:"Pause"}),!$.isAvailable&&r.jsx(Se,{variant:"destructive",className:"text-xs",children:"Occupé"})]})},$.time))})]}),v.length===0&&r.jsx("p",{className:"text-sm text-muted-foreground",children:"Aucun créneau disponible pour cette date"})]}):r.jsx(K,{id:"time",type:"time",value:x.time,onChange:T,disabled:!0,placeholder:"Sélectionnez d'abord une date"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{children:"Type de consultation *"}),r.jsxs(ve,{value:x.type,onValueChange:$=>P("type",$),children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Type de RDV"})}),r.jsxs(ge,{children:[r.jsx(M,{value:"consultation",children:"Consultation générale"}),r.jsx(M,{value:"vaccination",children:"Vaccination"}),r.jsx(M,{value:"chirurgie",children:"Chirurgie"}),r.jsx(M,{value:"urgence",children:"Urgence"}),r.jsx(M,{value:"controle",children:"Contrôle post-opératoire"}),r.jsx(M,{value:"sterilisation",children:"Stérilisation"}),r.jsx(M,{value:"dentaire",children:"Soins dentaires"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{children:"Durée (minutes)"}),r.jsxs(ve,{value:x.duration.toString(),onValueChange:$=>P("duration",$),children:[r.jsx(pe,{children:r.jsx(xe,{})}),r.jsxs(ge,{children:[r.jsx(M,{value:"15",children:"15 minutes"}),r.jsx(M,{value:"30",children:"30 minutes"}),r.jsx(M,{value:"45",children:"45 minutes"}),r.jsx(M,{value:"60",children:"1 heure"}),r.jsx(M,{value:"90",children:"1h30"}),r.jsx(M,{value:"120",children:"2 heures"})]})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"reason",children:"Motif de consultation"}),r.jsx(K,{id:"reason",value:x.reason,onChange:T,placeholder:"ex: Vaccination annuelle, boiterie, contrôle..."})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"notes",children:"Notes"}),r.jsx(Be,{id:"notes",value:x.notes,onChange:T,placeholder:"Instructions spéciales, préparation nécessaire..."})]}),C.length>0&&r.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:[r.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[r.jsx(Tn,{className:"h-4 w-4"}),r.jsx("span",{className:"font-medium",children:"Conflits détectés :"})]}),r.jsx("ul",{className:"mt-2 text-sm text-red-700",children:C.map(($,I)=>r.jsxs("li",{children:["• ",$]},I))})]}),x.clientId&&x.petId&&x.date&&x.time&&x.type&&r.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-md",children:[r.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Résumé du rendez-vous :"}),r.jsxs("div",{className:"space-y-1 text-sm text-blue-800",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Client :"})," ",(H=l.find($=>$.id===x.clientId))==null?void 0:H.name]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Animal :"})," ",(z=pets.find($=>$.id===x.petId))==null?void 0:z.name]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Date :"})," ",new Date(x.date).toLocaleDateString("fr-FR")]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Heure :"})," ",x.time]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Type :"})," ",L(x.type)]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Durée :"})," ",x.duration," minutes"]})]})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(R,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),r.jsx(R,{type:"submit",disabled:C.length>0,children:"Planifier RDV"})]})]})]})}),r.jsx(wm,{open:f,onOpenChange:m}),r.jsx(Nm,{open:g,onOpenChange:p})]})}function _d({open:e,onOpenChange:t,prefillData:n}){var w,C,S;const{data:s=[],isLoading:a}=us(),{data:i=[],isLoading:o}=ds(),l=x3(),{toast:c}=et(),{settings:u}=xt(),[d,h]=b.useState(!1),[f,m]=b.useState(!1),[g,p]=b.useState({clientId:(n==null?void 0:n.clientId)||"",clientName:"",animalId:(n==null?void 0:n.animalId)||"",animalName:"",date:n!=null&&n.consultation_date?new Date(n.consultation_date).toISOString().split("T")[0]:"",weight:((w=n==null?void 0:n.weight)==null?void 0:w.toString())||"",temperature:((C=n==null?void 0:n.temperature)==null?void 0:C.toString())||"",symptoms:(n==null?void 0:n.symptoms)||"",diagnosis:(n==null?void 0:n.diagnosis)||"",treatment:(n==null?void 0:n.treatment)||"",followUp:(n==null?void 0:n.follow_up_notes)||"",cost:((S=n==null?void 0:n.cost)==null?void 0:S.toString())||u.defaultConsultationPrice.toString(),notes:(n==null?void 0:n.notes)||"",photos:(n==null?void 0:n.photos)||[]}),v=i.filter(_=>_.client_id===g.clientId),j=new Date().toISOString().split("T")[0];b.useEffect(()=>{u.defaultConsultationPrice&&!g.cost&&p(_=>({..._,cost:u.defaultConsultationPrice.toString()}))},[u.defaultConsultationPrice,g.cost]);const x=_=>{p(k=>({...k,[_.target.id]:_.target.value}))},y=(_,k)=>{if(_==="clientId"){const T=s.find(P=>P.id===k);p(P=>({...P,clientId:k,clientName:T?`${T.first_name} ${T.last_name}`:"",animalId:"",animalName:""}))}else if(_==="animalId"){const T=i.find(P=>P.id===k);p(P=>({...P,animalId:k,animalName:(T==null?void 0:T.name)||""}))}else p(T=>({...T,[_]:k}))},N=async _=>{if(_.preventDefault(),!g.clientId||!g.animalId){c({title:"Erreur",description:"Veuillez sélectionner un client et un animal.",variant:"destructive"});return}try{const k={client_id:g.clientId,animal_id:g.animalId,consultation_type:"routine",consultation_date:g.date||j,weight:g.weight?Math.min(parseFloat(g.weight),999.9):void 0,temperature:g.temperature?Math.min(parseFloat(g.temperature),99.9):void 0,symptoms:g.symptoms,diagnosis:g.diagnosis,treatment:g.treatment,follow_up_notes:g.followUp,notes:g.notes};await l.mutateAsync(k),c({title:"Consultation enregistrée",description:`Consultation pour ${g.animalName} (${g.clientName}) a été enregistrée avec succès.`}),p({clientId:"",clientName:"",animalId:"",animalName:"",date:j,weight:"",temperature:"",symptoms:"",diagnosis:"",treatment:"",followUp:"",cost:u.defaultConsultationPrice.toString(),notes:"",photos:[]}),t(!1)}catch{c({title:"Erreur",description:"Impossible d'enregistrer la consultation. Veuillez réessayer.",variant:"destructive"})}};return b.useEffect(()=>{e&&p({clientId:"",clientName:"",animalId:"",animalName:"",date:j,weight:"",temperature:"",symptoms:"",diagnosis:"",treatment:"",followUp:"",cost:u.defaultConsultationPrice.toString(),notes:"",photos:[]})},[e,j]),r.jsxs(r.Fragment,{children:[r.jsx(He,{open:e,onOpenChange:t,children:r.jsxs(We,{className:"sm:max-w-[700px] max-h-[80vh] overflow-y-auto",children:[r.jsxs(Ge,{children:[r.jsx(Ke,{children:"Nouvelle Consultation"}),r.jsx(yt,{children:"Enregistrez une nouvelle consultation vétérinaire."})]}),r.jsxs("form",{onSubmit:N,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{children:"Client *"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(ve,{value:g.clientId.toString(),onValueChange:_=>y("clientId",_),children:[r.jsx(pe,{className:"flex-1",children:r.jsx(xe,{placeholder:"Sélectionner le client"})}),r.jsx(ge,{children:s.map(_=>r.jsxs(M,{value:_.id,children:[_.first_name," ",_.last_name]},_.id))})]}),r.jsx(R,{type:"button",size:"sm",variant:"outline",onClick:()=>h(!0),className:"px-2",children:r.jsx(Ue,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{children:"Animal *"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(ve,{value:g.animalId,onValueChange:_=>y("animalId",_),disabled:!g.clientId,children:[r.jsx(pe,{className:"flex-1",children:r.jsx(xe,{placeholder:g.clientId?"Sélectionner l'animal":"Sélectionnez d'abord un client"})}),r.jsx(ge,{children:v.map(_=>r.jsxs(M,{value:_.id,children:[_.name," (",_.species,")"]},_.id))})]}),r.jsx(R,{type:"button",size:"sm",variant:"outline",onClick:()=>m(!0),className:"px-2",disabled:!g.clientId,children:r.jsx(Ue,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"date",children:"Date *"}),r.jsx(K,{id:"date",type:"date",value:g.date||j,onChange:x,required:!0})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"weight",children:"Poids (kg)"}),r.jsx(K,{id:"weight",type:"number",step:"0.1",min:"0",max:"999.9",value:g.weight,onChange:x,placeholder:"ex: 25.5"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"temperature",children:"Température (°C)"}),r.jsx(K,{id:"temperature",type:"number",step:"0.1",min:"0",max:"99.9",value:g.temperature,onChange:x,placeholder:"ex: 38.5"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"symptoms",children:"Symptômes observés"}),r.jsx(Be,{id:"symptoms",value:g.symptoms,onChange:x,placeholder:"Décrivez les symptômes et observations...",rows:3})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"diagnosis",children:"Diagnostic"}),r.jsx(Be,{id:"diagnosis",value:g.diagnosis,onChange:x,placeholder:"Diagnostic posé...",rows:3})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"treatment",children:"Traitement administré"}),r.jsx(Be,{id:"treatment",value:g.treatment,onChange:x,placeholder:"Traitements, injections, interventions...",rows:3})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"followUp",children:"Suivi recommandé"}),r.jsx(K,{id:"followUp",value:g.followUp,onChange:x,placeholder:"ex: Contrôle dans 1 semaine"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(D,{htmlFor:"cost",children:["Coût (",u.currency,")"]}),r.jsx(K,{id:"cost",type:"number",step:"0.01",value:g.cost,onChange:x,placeholder:"ex: 85.50"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"notes",children:"Notes additionnelles"}),r.jsx(Be,{id:"notes",value:g.notes,onChange:x,placeholder:"Notes diverses, recommandations...",rows:3})]}),r.jsxs("div",{className:"space-y-2 col-span-2",children:[r.jsx(D,{children:"Photos de la consultation"}),r.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:async _=>{const k=Array.from(_.target.files||[]),T=await Promise.all(k.map(P=>new Promise((A,B)=>{const L=new FileReader;L.onload=()=>A(L.result),L.onerror=()=>B(),L.readAsDataURL(P)})));p(P=>({...P,photos:[...P.photos,...T]}))},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary file:text-primary-foreground hover:file:bg-primary/90"}),g.photos.length>0&&r.jsx("div",{className:"flex gap-2 overflow-x-auto pt-2",children:g.photos.map((_,k)=>r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:_,alt:`photo-${k}`,className:"h-24 w-24 object-cover rounded"}),r.jsx("button",{type:"button",onClick:()=>p(T=>({...T,photos:T.photos.filter((P,A)=>A!==k)})),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600",children:"×"})]},k))})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(R,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),r.jsx(R,{type:"submit",disabled:!g.animalId||l.isPending,children:l.isPending?"Enregistrement...":"Enregistrer Consultation"})]})]})]})}),r.jsx(wm,{open:d,onOpenChange:h}),r.jsx(Nm,{open:f,onOpenChange:m})]})}const LZ=({children:e,allowedRoles:t,fallback:n=null})=>{const{user:s}=Fo();return!s||!t.includes(s.profile.role)?r.jsx(r.Fragment,{children:n}):r.jsx(r.Fragment,{children:e})},cw=({children:e,fallback:t=null})=>r.jsx(LZ,{allowedRoles:["admin"],fallback:t,children:e});function BZ(){const{clients:e,pets:t,consultations:n,vaccinations:s,antiparasitics:a,generateAccountingSummary:i}=ct(),{settings:o}=xt(),l=JSON.parse(localStorage.getItem("vetpro-veterinarians")||"[]"),c=l.length===1?`Bienvenue ${l[0].title} ${l[0].name}`:`Bienvenue à ${o.clinicName}`,[u,d]=b.useState(!1),[h,f]=b.useState(!1),[m,g]=b.useState(!1),[p,v]=b.useState(!1),j=e.length,x=t.length,y=s.length,N=a.length,w=new Date().toISOString().split("T")[0],C=n.filter(A=>A.date===w).length,S=new Date().getMonth(),_=new Date().getFullYear(),k=new Date(_,S,1).toISOString().split("T")[0],T=new Date(_,S+1,0).toISOString().split("T")[0],P=i(`${_}-${String(S+1).padStart(2,"0")}`,k,T);return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"relative overflow-hidden gradient-hero rounded-2xl p-8 mb-8",children:r.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center gap-8",children:[o.logo&&r.jsx("img",{src:o.logo,alt:"Logo clinique",className:"h-20 w-20 object-contain rounded"}),r.jsxs("div",{className:"flex-1 space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(lt,{className:"h-8 w-8 text-primary"}),r.jsx("span",{className:"text-sm font-medium text-primary",children:"Gestion Vétérinaire Complète"})]}),r.jsxs("h1",{className:"text-4xl font-bold leading-tight max-w-3xl",children:[c,", ",r.jsx("span",{className:"gradient-primary bg-clip-text text-transparent block",children:"Dashboard VetPro"})]}),r.jsx("p",{className:"text-lg text-muted-foreground max-w-3xl",children:"Gérez efficacement vos clients, leurs animaux, les rendez-vous et consultations. Votre pratique vétérinaire optimisée en un seul endroit."}),r.jsxs("div",{className:"flex flex-wrap gap-4 pt-4",children:[r.jsxs(R,{size:"lg",className:"gap-2 medical-glow",onClick:()=>d(!0),children:[r.jsx(La,{className:"h-5 w-5"}),"Nouveau Client",r.jsx(fb,{className:"h-4 w-4"})]}),r.jsxs(R,{variant:"outline",size:"lg",className:"gap-2",onClick:()=>g(!0),children:[r.jsx(lt,{className:"h-5 w-5"}),"Nouvel Animal"]}),r.jsxs(R,{variant:"outline",size:"lg",className:"gap-2",onClick:()=>f(!0),children:[r.jsx(Ye,{className:"h-5 w-5"}),"Planifier RDV"]}),r.jsxs(R,{variant:"outline",size:"lg",className:"gap-2",onClick:()=>v(!0),children:[r.jsx(bn,{className:"h-5 w-5"}),"Nouvelle Consultation"]})]}),r.jsxs("div",{className:"flex gap-6 pt-8 flex-wrap",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-primary",children:j}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Clients actifs"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-secondary",children:x}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Animaux suivis"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-accent",children:C}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Consultations aujourd'hui"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:y}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Vaccinations"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-purple-600",children:N}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Antiparasitaires"})]}),r.jsx(cw,{children:r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"text-2xl font-bold text-emerald-600",children:[P.totalRevenue.toFixed(0)," ",o.currency||"€"]}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Revenus ce mois"})]})})]})]}),r.jsx("div",{className:"hidden lg:block",children:r.jsx("img",{src:hR,alt:"Vétérinaire professionnel examinant un chien",className:"w-96 h-64 object-cover rounded-xl shadow-medical"})})]})}),r.jsx(wm,{open:u,onOpenChange:d}),r.jsx(D3,{open:h,onOpenChange:f}),r.jsx(Nm,{open:m,onOpenChange:g}),r.jsx(_d,{open:p,onOpenChange:v})]})}function VZ(){const{clients:e,pets:t,consultations:n,appointments:s,prescriptions:a,farms:i,vaccinations:o,antiparasitics:l,stockItems:c,stockMovements:u,accountingEntries:d,getUpcomingAppointments:h,getOverdueAppointments:f,generateAccountingSummary:m}=ct(),{settings:g}=xt(),p=e.length,v=t.length;n.length,s.length,a.length;const j=i.length,x=o.length,y=l.length,N=c.length,w=new Date().getMonth(),C=new Date().getFullYear(),S=n.filter(J=>{const ee=new Date(J.date);return ee.getMonth()===w&&ee.getFullYear()===C}).length,_=o.filter(J=>{const ee=new Date(J.dateGiven);return ee.getMonth()===w&&ee.getFullYear()===C}).length,k=l.filter(J=>{const ee=new Date(J.dateGiven);return ee.getMonth()===w&&ee.getFullYear()===C}).length,T=new Date().toISOString().split("T")[0],P=n.filter(J=>J.date===T).length,A=s.filter(J=>J.date===T&&J.status!=="cancelled"&&J.status!=="completed").length,B=h();f();const L=c.filter(J=>J.currentStock<=J.minimumStock).length,H=c.filter(J=>J.currentStock===0).length;c.reduce((J,ee)=>J+ee.currentStock*ee.purchasePrice,0);const z=new Date(C,w,1).toISOString().split("T")[0],$=new Date(C,w+1,0).toISOString().split("T")[0],I=m(`${C}-${String(w+1).padStart(2,"0")}`,z,$),E=I.totalRevenue;I.totalExpenses;const q=I.netIncome,Y=(J,ee)=>{if(ee===0)return J>0?"+100%":"0%";const G=(J-ee)/ee*100;return G>=0?`+${Math.round(G)}%`:`${Math.round(G)}%`},re=w===0?11:w-1,oe=w===0?C-1:C,ae=n.filter(J=>{const ee=new Date(J.date);return ee.getMonth()===re&&ee.getFullYear()===oe}).length,me=e.filter(J=>{const ee=new Date(J.lastVisit);return ee.getMonth()===re&&ee.getFullYear()===oe}).length,we=t.filter(J=>{if(!J.lastVisit)return!1;const ee=new Date(J.lastVisit);return ee.getMonth()===re&&ee.getFullYear()===oe}).length;s.filter(J=>{const ee=new Date(J.date);return ee.getMonth()===re&&ee.getFullYear()===oe}).length;const ue=[{title:"Clients Total",value:p.toString(),change:Y(p,me),icon:La,color:"text-blue-600",bgColor:"bg-blue-50",description:`${p>0?Math.round(p/10):0} nouveaux ce mois`},{title:"Animaux Suivis",value:v.toString(),change:Y(v,we),icon:lt,color:"text-red-600",bgColor:"bg-red-50",description:`${v>0?Math.round(v/8):0} nouveaux ce mois`},{title:"RDV Aujourd'hui",value:A.toString(),change:A>0?"+"+Math.min(20,Math.floor(A*.3))+"%":"0%",icon:Ye,color:"text-purple-600",bgColor:"bg-purple-50",description:`${B.length} à venir cette semaine`},{title:"Consultations",value:S.toString(),change:Y(S,ae),icon:bn,color:"text-green-600",bgColor:"bg-green-50",description:`${P} aujourd'hui`},{title:"Revenus Réels",value:`${E.toFixed(0)} ${g.currency||"€"}`,change:E>0?"+"+Math.round(E/1e3*10)+"%":"0%",icon:fd,color:"text-emerald-600",bgColor:"bg-emerald-50",description:`Bénéfice: ${q.toFixed(0)} ${g.currency||"€"}`},{title:"Activité Ferme",value:j.toString(),change:j>0?"+"+Math.min(15,Math.floor(j*.2))+"%":"0%",icon:na,color:"text-orange-600",bgColor:"bg-orange-50",description:`${j} exploitations actives`},{title:"Vaccinations",value:_.toString(),change:_>0?"+"+Math.min(25,Math.floor(_*.3))+"%":"0%",icon:Mr,color:"text-blue-600",bgColor:"bg-blue-50",description:`${x} total ce mois`},{title:"Antiparasitaires",value:k.toString(),change:k>0?"+"+Math.min(20,Math.floor(k*.25))+"%":"0%",icon:ur,color:"text-purple-600",bgColor:"bg-purple-50",description:`${y} total ce mois`},{title:"Stock",value:N.toString(),change:L>0?"-"+Math.min(15,Math.floor(L*.2))+"%":"0%",icon:L>0?vn:Ea,color:L>0?"text-red-600":"text-green-600",bgColor:L>0?"bg-red-50":"bg-green-50",description:`${L} en rupture, ${H} épuisés`}];return r.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:ue.map(J=>r.jsxs(te,{className:"card-hover",children:[r.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(fe,{className:"text-sm font-medium text-muted-foreground",children:J.title}),r.jsx("div",{className:`p-2 rounded-lg ${J.bgColor}`,children:r.jsx(J.icon,{className:`h-4 w-4 ${J.color}`})})]}),r.jsxs(ne,{children:[r.jsx("div",{className:"text-2xl font-bold",children:J.value}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[r.jsx("span",{className:"text-secondary font-medium",children:J.change})," vs mois dernier"]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:J.description})]})]},J.title))})}function zZ({open:e,onOpenChange:t,client:n,onEdit:s}){return n?r.jsx(He,{open:e,onOpenChange:t,children:r.jsxs(We,{className:"sm:max-w-[600px]",children:[r.jsx(Ge,{children:r.jsx(Ke,{children:"Profil Client"})}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(Hn,{className:"h-20 w-20",children:r.jsx(Gn,{className:"bg-primary text-primary-foreground text-xl",children:n.name.split(" ").map(a=>a[0]).join("")})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h2",{className:"text-2xl font-semibold",children:n.name}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(md,{className:"h-3 w-3"}),n.email]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Pu,{className:"h-3 w-3"}),n.phone]})]})]})]}),n.address&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("h3",{className:"font-semibold",children:"Adresse"}),r.jsxs("div",{className:"flex items-start gap-2 text-muted-foreground",children:[r.jsx(ec,{className:"h-4 w-4 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{children:n.address}),r.jsxs("p",{children:[n.postalCode," ",n.city]})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[r.jsx(lt,{className:"h-4 w-4 text-primary"}),"Animaux (",n.pets.length,")"]}),n.pets.length>0?r.jsx("div",{className:"space-y-2",children:n.pets.map((a,i)=>r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium",children:a.name}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.type," • ",a.breed]})]}),r.jsx(Se,{variant:"outline",children:a.status==="healthy"?"En bonne santé":a.status==="treatment"?"En traitement":"Urgent"})]},i))}):r.jsx("p",{className:"text-muted-foreground",children:"Aucun animal enregistré"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-muted/30 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Dernière visite:"}),r.jsx("p",{children:new Date(n.lastVisit).toLocaleDateString("fr-FR")})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Total visites:"}),r.jsx("p",{children:n.totalVisits})]})]}),n.notes&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("h3",{className:"font-semibold",children:"Notes"}),r.jsx("p",{className:"text-muted-foreground",children:n.notes})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(R,{variant:"outline",onClick:()=>t(!1),children:"Fermer"}),r.jsxs(R,{onClick:s,className:"gap-2",children:[r.jsx(Ct,{className:"h-4 w-4"}),"Modifier"]})]})]})]})}):null}function qZ({open:e,onOpenChange:t,client:n}){const{updateClient:s}=ct(),{toast:a}=et(),[i,o]=b.useState({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",postalCode:"",idNumber:"",notes:""});b.useEffect(()=>{n&&o({firstName:n.firstName,lastName:n.lastName,email:n.email,phone:n.phone,address:n.address||"",city:n.city||"",postalCode:n.postalCode||"",idNumber:n.idNumber||"",notes:n.notes||""})},[n]);const l=u=>{o(d=>({...d,[u.target.id]:u.target.value}))},c=u=>{u.preventDefault(),n&&(s(n.id,i),a({title:"Client modifié",description:`Les informations de ${i.firstName} ${i.lastName} ont été mises à jour.`}),t(!1))};return n?r.jsx(He,{open:e,onOpenChange:t,children:r.jsxs(We,{className:"sm:max-w-[500px]",children:[r.jsx(Ge,{children:r.jsx(Ke,{children:"Modifier Client"})}),r.jsxs("form",{onSubmit:c,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"firstName",children:"Prénom *"}),r.jsx(K,{id:"firstName",value:i.firstName,onChange:l,required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"lastName",children:"Nom *"}),r.jsx(K,{id:"lastName",value:i.lastName,onChange:l,required:!0})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"email",children:"Email"}),r.jsx(K,{id:"email",type:"email",value:i.email,onChange:l})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"phone",children:"Téléphone *"}),r.jsx(K,{id:"phone",value:i.phone,onChange:l,required:!0})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"address",children:"Adresse"}),r.jsx(K,{id:"address",value:i.address,onChange:l})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"city",children:"Ville"}),r.jsx(K,{id:"city",value:i.city,onChange:l})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"postalCode",children:"Code postal"}),r.jsx(K,{id:"postalCode",value:i.postalCode,onChange:l})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"idNumber",children:"N° pièce d'identité"}),r.jsx(K,{id:"idNumber",value:i.idNumber,onChange:l,placeholder:"Numéro de carte d'identité, passeport, etc."})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"notes",children:"Notes"}),r.jsx(Be,{id:"notes",value:i.notes,onChange:l,placeholder:"Notes additionnelles..."})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(R,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),r.jsx(R,{type:"submit",children:"Sauvegarder"})]})]})]})}):null}function UZ(){const{clients:e,pets:t,consultations:n,appointments:s}=ct();xt();const[a,i]=b.useState(!1),[o,l]=b.useState(!1),[c,u]=b.useState(!1),[d,h]=b.useState(null),m=[...e].sort((S,_)=>new Date(_.lastVisit).getTime()-new Date(S.lastVisit).getTime()).slice(0,5),g=e.length,p=e.filter(S=>{const _=new Date(S.lastVisit),k=new Date;return k.setDate(k.getDate()-30),_>=k}).length,v=e.filter(S=>{const _=new Date(S.lastVisit),k=new Date().getMonth(),T=new Date().getFullYear();return _.getMonth()===k&&_.getFullYear()===T}).length,j=g>0?(t.length/g).toFixed(1):"0",x=S=>{h(S),l(!0)},y=S=>{h(S),u(!0)},N=()=>{l(!1),u(!0)},w=S=>{const _=new Date(S),T=Math.abs(new Date().getTime()-_.getTime()),P=Math.ceil(T/(1e3*60*60*24));return P===0?"Aujourd'hui":P===1?"Hier":P<7?`Il y a ${P} jours`:P<30?`Il y a ${Math.floor(P/7)} semaine${Math.floor(P/7)>1?"s":""}`:`Il y a ${Math.floor(P/30)} mois`},C=S=>{const _=t.filter(P=>P.ownerId===S.id),k=n.filter(P=>P.clientId===S.id),T=s.filter(P=>P.clientId===S.id);return{pets:_.length,consultations:k.length,appointments:T.length,lastActivity:k.length>0?Math.max(...k.map(P=>new Date(P.date).getTime())):new Date(S.lastVisit).getTime()}};return r.jsxs(r.Fragment,{children:[r.jsxs(te,{className:"card-hover",children:[r.jsxs(he,{className:"flex flex-row items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(fe,{className:"text-lg font-semibold",children:"Clients Récents"}),r.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-muted-foreground",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(La,{className:"h-3 w-3"}),r.jsxs("span",{children:[g," total"]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(na,{className:"h-3 w-3"}),r.jsxs("span",{children:[p," actifs"]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(an,{className:"h-3 w-3"}),r.jsxs("span",{children:["+",v," ce mois"]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Yt,{className:"h-3 w-3"}),r.jsxs("span",{children:["Ø ",j," animaux"]})]})]})]}),r.jsxs(R,{size:"sm",className:"gap-2",onClick:()=>i(!0),children:[r.jsx(Ue,{className:"h-4 w-4"}),"Nouveau Client"]})]}),r.jsx(ne,{className:"space-y-4",children:m.length===0?r.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[r.jsx(La,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"Aucun client enregistré"}),r.jsx("p",{className:"text-sm",children:"Commencez par créer votre premier client"})]}):m.map(S=>{const _=C(S);return r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(Hn,{children:r.jsx(Gn,{className:"bg-primary text-primary-foreground",children:S.name.split(" ").map(k=>k[0]).join("")})}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h4",{className:"font-medium",children:S.name}),r.jsxs(Se,{variant:"outline",className:"text-xs",children:[_.pets," animal",_.pets>1?"s":""]})]}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(md,{className:"h-3 w-3"}),S.email]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Pu,{className:"h-3 w-3"}),S.phone]}),S.city&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(ec,{className:"h-3 w-3"}),S.city]})]}),r.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[r.jsxs("span",{children:["Dernière visite: ",w(S.lastVisit)]}),r.jsxs("span",{children:["Total visites: ",S.totalVisits]}),r.jsxs("span",{children:["Consultations: ",_.consultations]}),r.jsxs("span",{children:["RDV: ",_.appointments]})]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(R,{size:"sm",variant:"outline",className:"gap-2",onClick:()=>x(S),children:[r.jsx(wn,{className:"h-4 w-4"}),"Voir"]}),r.jsxs(R,{size:"sm",variant:"outline",className:"gap-2",onClick:()=>y(S),children:[r.jsx(Ct,{className:"h-4 w-4"}),"Modifier"]})]})]},S.id)})})]}),r.jsx(wm,{open:a,onOpenChange:i}),r.jsx(zZ,{open:o,onOpenChange:l,client:d,onEdit:N}),r.jsx(qZ,{open:c,onOpenChange:u,client:d})]})}function M3({open:e,onOpenChange:t,pet:n,onEdit:s,onShowDossier:a}){const{updatePet:i}=ct(),[o,l]=b.useState(null);b.useEffect(()=>{e&&l((n==null?void 0:n.photo)||null)},[e,n]);const c=b.useRef(null),u=d=>{var f;const h=(f=d.target.files)==null?void 0:f[0];if(h){const m=new FileReader;m.onload=g=>{var v;const p=(v=g.target)==null?void 0:v.result;l(p),i(n.id,{photo:p})},m.readAsDataURL(h)}};return n?r.jsx(He,{open:e,onOpenChange:t,children:r.jsxs(We,{className:"sm:max-w-[700px] max-h-[80vh] overflow-y-auto",children:[r.jsx(Ge,{children:r.jsx(Ke,{children:"Profil Animal"})}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-start gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx(Hn,{className:"h-24 w-24",children:o?r.jsx(Du,{src:o,alt:n.name,className:"h-full w-full object-cover rounded-full"}):r.jsx(Gn,{className:"bg-primary-glow text-primary-foreground",children:r.jsx(lt,{className:"h-12 w-12"})})}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(R,{size:"sm",variant:"outline",className:"gap-2 w-full flex items-center justify-center",onClick:()=>{var d;return(d=c.current)==null?void 0:d.click()},children:[r.jsx(_u,{className:"h-4 w-4"}),o?"Changer photo":"Ajouter photo"]}),o&&r.jsx(R,{size:"sm",variant:"destructive",className:"gap-2 w-full",onClick:()=>{l(null),i(n.id,{photo:void 0})},children:"Supprimer photo"}),r.jsx("input",{ref:c,type:"file",accept:"image/*",onChange:u,className:"hidden"})]})]}),r.jsxs("div",{className:"flex-1 space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("h2",{className:"text-2xl font-semibold",children:n.name}),r.jsx(Se,{variant:"outline",className:n.status==="healthy"?"bg-secondary text-secondary-foreground":n.status==="treatment"?"bg-accent text-accent-foreground":"bg-destructive text-destructive-foreground",children:n.status==="healthy"?"En bonne santé":n.status==="treatment"?"En traitement":"Urgent"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Type:"}),r.jsx("p",{className:"text-muted-foreground",children:n.type})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Race:"}),r.jsx("p",{className:"text-muted-foreground",children:n.breed||"Non spécifiée"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Âge:"}),r.jsx("p",{className:"text-muted-foreground",children:n.birthDate?r.jsxs(r.Fragment,{children:[ku(n.birthDate),r.jsx("br",{}),r.jsxs("span",{className:"text-xs",children:["Né(e) le ",Oa(n.birthDate)]})]}):"Non spécifié"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Poids:"}),r.jsx("p",{className:"text-muted-foreground",children:n.weight||"Non spécifié"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Couleur:"}),r.jsx("p",{className:"text-muted-foreground",children:n.color||"Non spécifiée"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Rn,{className:"h-4 w-4 text-muted-foreground"}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Propriétaire:"}),r.jsx("p",{className:"text-muted-foreground",children:n.owner})]})]}),n.microchip&&r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Puce électronique:"}),r.jsx("p",{className:"text-muted-foreground font-mono",children:n.microchip})]})]}),r.jsxs("div",{className:"space-y-4",children:[n.lastVisit&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ye,{className:"h-4 w-4 text-muted-foreground"}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Dernière visite:"}),r.jsx("p",{className:"text-muted-foreground",children:new Date(n.lastVisit).toLocaleDateString("fr-FR")})]})]}),n.nextAppointment&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ye,{className:"h-4 w-4 text-muted-foreground"}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Prochain RDV:"}),r.jsx("p",{className:"text-muted-foreground",children:new Date(n.nextAppointment).toLocaleDateString("fr-FR")})]})]})]})]}),n.vaccinations&&n.vaccinations.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("h3",{className:"font-semibold",children:"Vaccinations"}),r.jsx("div",{className:"flex gap-2 flex-wrap",children:n.vaccinations.map((d,h)=>r.jsx(Se,{variant:"outline",children:d},h))})]}),n.medicalNotes&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("h3",{className:"font-semibold",children:"Notes médicales"}),r.jsx("p",{className:"text-muted-foreground p-3 bg-muted/30 rounded-lg",children:n.medicalNotes})]}),r.jsxs("div",{className:"flex justify-between gap-2 pt-4 border-t",children:[r.jsxs(R,{variant:"outline",onClick:a,className:"gap-2",children:[r.jsx(xr,{className:"h-4 w-4"}),"Voir Dossier Médical"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(R,{variant:"outline",onClick:()=>t(!1),children:"Fermer"}),r.jsxs(R,{onClick:s,className:"gap-2",children:[r.jsx(Ct,{className:"h-4 w-4"}),"Modifier"]})]})]})]})]})}):null}function WZ({open:e,onOpenChange:t,pet:n}){const{updatePet:s,clients:a}=ct(),{settings:i}=xt(),{toast:o}=et(),[l,c]=b.useState({name:"",type:"",breed:"",gender:"",birthDate:"",weight:"",color:"",ownerId:0,microchip:"",medicalNotes:"",status:"healthy",hasPedigree:!1,officialName:"",pedigreeNumber:"",breeder:"",fatherName:"",fatherPedigree:"",fatherBreed:"",fatherTitles:"",motherName:"",motherPedigree:"",motherBreed:"",motherTitles:"",pedigreePhoto:""});b.useEffect(()=>{n&&c({name:n.name,type:n.type,breed:n.breed||"",gender:n.gender||"",birthDate:n.birthDate||"",weight:n.weight||"",color:n.color||"",ownerId:n.ownerId,microchip:n.microchip||"",medicalNotes:n.medicalNotes||"",status:n.status,hasPedigree:n.hasPedigree||!1,officialName:n.officialName||"",pedigreeNumber:n.pedigreeNumber||"",breeder:n.breeder||"",fatherName:n.fatherName||"",fatherPedigree:n.fatherPedigree||"",fatherBreed:n.fatherBreed||"",fatherTitles:n.fatherTitles||"",motherName:n.motherName||"",motherPedigree:n.motherPedigree||"",motherBreed:n.motherBreed||"",motherTitles:n.motherTitles||"",pedigreePhoto:n.pedigreePhoto||""})},[n]);const u=f=>{c(m=>({...m,[f.target.id]:f.target.value}))},d=(f,m)=>{c(g=>({...g,[f]:f==="ownerId"?parseInt(m):m}))},h=f=>{if(f.preventDefault(),!n)return;const m=a.find(g=>g.id===l.ownerId);s(n.id,{...l,owner:(m==null?void 0:m.name)||n.owner}),o({title:"Animal modifié",description:`Les informations de ${l.name} ont été mises à jour.`}),t(!1)};return n?r.jsx(He,{open:e,onOpenChange:t,children:r.jsxs(We,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto",children:[r.jsx(Ge,{children:r.jsx(Ke,{children:"Modifier Animal"})}),r.jsxs("form",{onSubmit:h,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"name",children:"Nom de l'animal *"}),r.jsx(K,{id:"name",value:l.name,onChange:u,required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{children:"Type d'animal *"}),r.jsxs(ve,{value:l.type,onValueChange:f=>d("type",f),children:[r.jsx(pe,{children:r.jsx(xe,{})}),r.jsx(ge,{children:i.species?i.species.split(",").map((f,m)=>{const g=f.trim();return g?r.jsx(M,{value:g,children:g},m):null}).filter(Boolean):r.jsx(M,{value:"Chien",children:"Chien"})})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"breed",children:"Race"}),r.jsx(K,{id:"breed",value:l.breed,onChange:u})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{children:"Sexe"}),r.jsxs(ve,{value:l.gender,onValueChange:f=>d("gender",f),children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Sélectionner le sexe"})}),r.jsxs(ge,{children:[r.jsx(M,{value:"male",children:"Mâle"}),r.jsx(M,{value:"female",children:"Femelle"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"birthDate",children:"Date de naissance"}),r.jsx(K,{id:"birthDate",type:"date",value:l.birthDate,onChange:u,max:new Date().toISOString().split("T")[0]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"weight",children:"Poids (kg)"}),r.jsx(K,{id:"weight",value:l.weight,onChange:u})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"color",children:"Couleur"}),r.jsx(K,{id:"color",value:l.color,onChange:u})]}),r.jsx("div",{className:"space-y-2"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{children:"Propriétaire *"}),r.jsxs(ve,{value:l.ownerId.toString(),onValueChange:f=>d("ownerId",f),children:[r.jsx(pe,{children:r.jsx(xe,{})}),r.jsx(ge,{children:a.map(f=>r.jsx(M,{value:f.id.toString(),children:f.name},f.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{children:"Statut de santé"}),r.jsxs(ve,{value:l.status,onValueChange:f=>d("status",f),children:[r.jsx(pe,{children:r.jsx(xe,{})}),r.jsxs(ge,{children:[r.jsx(M,{value:"healthy",children:"En bonne santé"}),r.jsx(M,{value:"treatment",children:"En traitement"}),r.jsx(M,{value:"urgent",children:"Urgent"})]})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"microchip",children:"Numéro de puce électronique"}),r.jsx(K,{id:"microchip",value:l.microchip,onChange:u})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"medicalNotes",children:"Notes médicales"}),r.jsx(Be,{id:"medicalNotes",value:l.medicalNotes,onChange:u,placeholder:"Allergies, conditions médicales, notes importantes..."})]}),r.jsxs("div",{className:"space-y-4 border-t pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ia,{id:"hasPedigree",checked:l.hasPedigree,onCheckedChange:f=>c(m=>({...m,hasPedigree:f}))}),r.jsx(D,{htmlFor:"hasPedigree",className:"text-lg font-medium",children:"Cet animal a un pedigree officiel"})]}),l.hasPedigree&&r.jsxs("div",{className:"space-y-4 pl-6 border-l-2 border-primary/20",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"officialName",children:"Nom officiel"}),r.jsx(K,{id:"officialName",value:l.officialName,onChange:u,placeholder:"Nom officiel du pedigree"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"pedigreeNumber",children:"N° pedigree/LOF"}),r.jsx(K,{id:"pedigreeNumber",value:l.pedigreeNumber,onChange:u,placeholder:"Numéro de pedigree"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"breeder",children:"Éleveur"}),r.jsx(K,{id:"breeder",value:l.breeder,onChange:u,placeholder:"Nom de l'éleveur"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsx("h4",{className:"font-medium text-sm",children:"Père"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(K,{placeholder:"Nom du père",value:l.fatherName,onChange:u}),r.jsx(K,{placeholder:"N° pedigree du père",value:l.fatherPedigree,onChange:u}),r.jsx(K,{placeholder:"Race du père",value:l.fatherBreed,onChange:u}),r.jsx(Be,{placeholder:"Titres du père",value:l.fatherTitles,onChange:u,rows:2})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h4",{className:"font-medium text-sm",children:"Mère"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(K,{placeholder:"Nom de la mère",value:l.motherName,onChange:u}),r.jsx(K,{placeholder:"N° pedigree de la mère",value:l.motherPedigree,onChange:u}),r.jsx(K,{placeholder:"Race de la mère",value:l.motherBreed,onChange:u}),r.jsx(Be,{placeholder:"Titres de la mère",value:l.motherTitles,onChange:u,rows:2})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{children:"Document pedigree"}),r.jsx("input",{type:"file",accept:"image/*",onChange:async f=>{var p;const m=(p=f.target.files)==null?void 0:p[0];if(!m)return;const g=new FileReader;g.onload=()=>c(v=>({...v,pedigreePhoto:g.result})),g.readAsDataURL(m)}}),l.pedigreePhoto&&r.jsx("img",{src:l.pedigreePhoto,alt:"Document pedigree",className:"h-32 w-auto object-contain rounded border"})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(R,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),r.jsx(R,{type:"submit",children:"Sauvegarder"})]})]})]})}):null}var Wx="Tabs",[HZ,vke]=cs(Wx,[Px]),I3=Px(),[GZ,FS]=HZ(Wx),$3=b.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=Cx(l),[h,f]=yi({prop:s,onChange:a,defaultProp:i??"",caller:Wx});return r.jsx(GZ,{scope:n,baseId:Da(),value:h,onValueChange:f,orientation:o,dir:d,activationMode:c,children:r.jsx(Le.div,{dir:d,"data-orientation":o,...u,ref:t})})});$3.displayName=Wx;var R3="TabsList",F3=b.forwardRef((e,t)=>{const{__scopeTabs:n,loop:s=!0,...a}=e,i=FS(R3,n),o=I3(n);return r.jsx(x$,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:s,children:r.jsx(Le.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});F3.displayName=R3;var L3="TabsTrigger",B3=b.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,disabled:a=!1,...i}=e,o=FS(L3,n),l=I3(n),c=q3(o.baseId,s),u=U3(o.baseId,s),d=s===o.value;return r.jsx(y$,{asChild:!0,...l,focusable:!a,active:d,children:r.jsx(Le.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:Ae(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?o.onValueChange(s):h.preventDefault()}),onKeyDown:Ae(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(s)}),onFocus:Ae(e.onFocus,()=>{const h=o.activationMode!=="manual";!d&&!a&&h&&o.onValueChange(s)})})})});B3.displayName=L3;var V3="TabsContent",z3=b.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,forceMount:a,children:i,...o}=e,l=FS(V3,n),c=q3(l.baseId,s),u=U3(l.baseId,s),d=s===l.value,h=b.useRef(d);return b.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),r.jsx(ks,{present:a||d,children:({present:f})=>r.jsx(Le.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:f&&i})})});z3.displayName=V3;function q3(e,t){return`${e}-trigger-${t}`}function U3(e,t){return`${e}-content-${t}`}var KZ=$3,W3=F3,H3=B3,G3=z3;const Ai=KZ,qa=b.forwardRef(({className:e,...t},n)=>r.jsx(W3,{ref:n,className:Ie("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));qa.displayName=W3.displayName;const kt=b.forwardRef(({className:e,...t},n)=>r.jsx(H3,{ref:n,className:Ie("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));kt.displayName=H3.displayName;const Tt=b.forwardRef(({className:e,...t},n)=>r.jsx(G3,{ref:n,className:Ie("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Tt.displayName=G3.displayName;function hr(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function ko(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function LS(e,t){const n=hr(e);return isNaN(t)?ko(e,NaN):(t&&n.setDate(n.getDate()+t),n)}const K3=6048e5,YZ=864e5;let QZ={};function Hx(){return QZ}function yf(e,t){var l,c,u,d;const n=Hx(),s=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=hr(e),i=a.getDay(),o=(i<s?7:0)+i-s;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function Wg(e){return yf(e,{weekStartsOn:1})}function Y3(e){const t=hr(e),n=t.getFullYear(),s=ko(e,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const a=Wg(s),i=ko(e,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const o=Wg(i);return t.getTime()>=a.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function Hg(e){const t=hr(e);return t.setHours(0,0,0,0),t}function DP(e){const t=hr(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function XZ(e,t){const n=Hg(e),s=Hg(t),a=+n-DP(n),i=+s-DP(s);return Math.round((a-i)/YZ)}function JZ(e){const t=Y3(e),n=ko(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Wg(n)}function ZZ(e,t){const n=Hg(e),s=Hg(t);return+n==+s}function eee(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function tee(e){if(!eee(e)&&typeof e!="number")return!1;const t=hr(e);return!isNaN(Number(t))}function nee(e){const t=hr(e),n=ko(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}const ree={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},see=(e,t,n)=>{let s;const a=ree[e];return typeof a=="string"?s=a:t===1?s=a.one:s=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function nu(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const aee={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},iee={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},oee={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},lee={date:nu({formats:aee,defaultWidth:"full"}),time:nu({formats:iee,defaultWidth:"full"}),dateTime:nu({formats:oee,defaultWidth:"full"})},cee={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},uee=(e,t,n,s)=>cee[e];function Na(e){return(t,n)=>{const s=n!=null&&n.context?String(n.context):"standalone";let a;if(s==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const dee={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},hee={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},fee={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},mee={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},pee={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},gee={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},vee=(e,t)=>{const n=Number(e),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},xee={ordinalNumber:vee,era:Na({values:dee,defaultWidth:"wide"}),quarter:Na({values:hee,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Na({values:fee,defaultWidth:"wide"}),day:Na({values:mee,defaultWidth:"wide"}),dayPeriod:Na({values:pee,defaultWidth:"wide",formattingValues:gee,defaultFormattingWidth:"wide"})};function Sa(e){return(t,n={})=>{const s=n.width,a=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],l=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?jee(l,h=>h.test(o)):yee(l,h=>h.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=t.slice(o.length);return{value:u,rest:d}}}function yee(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function jee(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function Q3(e){return(t,n={})=>{const s=t.match(e.matchPattern);if(!s)return null;const a=s[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const bee=/^(\d+)(th|st|nd|rd)?/i,wee=/\d+/i,Nee={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},See={any:[/^b/i,/^(a|c)/i]},Cee={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},_ee={any:[/1/i,/2/i,/3/i,/4/i]},Pee={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Aee={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},kee={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Tee={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Eee={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Oee={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Dee={ordinalNumber:Q3({matchPattern:bee,parsePattern:wee,valueCallback:e=>parseInt(e,10)}),era:Sa({matchPatterns:Nee,defaultMatchWidth:"wide",parsePatterns:See,defaultParseWidth:"any"}),quarter:Sa({matchPatterns:Cee,defaultMatchWidth:"wide",parsePatterns:_ee,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Sa({matchPatterns:Pee,defaultMatchWidth:"wide",parsePatterns:Aee,defaultParseWidth:"any"}),day:Sa({matchPatterns:kee,defaultMatchWidth:"wide",parsePatterns:Tee,defaultParseWidth:"any"}),dayPeriod:Sa({matchPatterns:Eee,defaultMatchWidth:"any",parsePatterns:Oee,defaultParseWidth:"any"})},Mee={code:"en-US",formatDistance:see,formatLong:lee,formatRelative:uee,localize:xee,match:Dee,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Iee(e){const t=hr(e);return XZ(t,nee(t))+1}function $ee(e){const t=hr(e),n=+Wg(t)-+JZ(t);return Math.round(n/K3)+1}function X3(e,t){var d,h,f,m;const n=hr(e),s=n.getFullYear(),a=Hx(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??a.firstWeekContainsDate??((m=(f=a.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,o=ko(e,0);o.setFullYear(s+1,0,i),o.setHours(0,0,0,0);const l=yf(o,t),c=ko(e,0);c.setFullYear(s,0,i),c.setHours(0,0,0,0);const u=yf(c,t);return n.getTime()>=l.getTime()?s+1:n.getTime()>=u.getTime()?s:s-1}function Ree(e,t){var l,c,u,d;const n=Hx(),s=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=X3(e,t),i=ko(e,0);return i.setFullYear(a,0,s),i.setHours(0,0,0,0),yf(i,t)}function Fee(e,t){const n=hr(e),s=+yf(n,t)-+Ree(n,t);return Math.round(s/K3)+1}function At(e,t){const n=e<0?"-":"",s=Math.abs(e).toString().padStart(t,"0");return n+s}const Fi={y(e,t){const n=e.getFullYear(),s=n>0?n:1-n;return At(t==="yy"?s%100:s,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):At(n+1,2)},d(e,t){return At(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return At(e.getHours()%12||12,t.length)},H(e,t){return At(e.getHours(),t.length)},m(e,t){return At(e.getMinutes(),t.length)},s(e,t){return At(e.getSeconds(),t.length)},S(e,t){const n=t.length,s=e.getMilliseconds(),a=Math.trunc(s*Math.pow(10,n-3));return At(a,t.length)}},Nc={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},MP={G:function(e,t,n){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});case"GGGG":default:return n.era(s,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const s=e.getFullYear(),a=s>0?s:1-s;return n.ordinalNumber(a,{unit:"year"})}return Fi.y(e,t)},Y:function(e,t,n,s){const a=X3(e,s),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return At(o,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):At(i,t.length)},R:function(e,t){const n=Y3(e);return At(n,t.length)},u:function(e,t){const n=e.getFullYear();return At(n,t.length)},Q:function(e,t,n){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return At(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,n){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return At(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,n){const s=e.getMonth();switch(t){case"M":case"MM":return Fi.M(e,t);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,n){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return At(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,n,s){const a=Fee(e,s);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):At(a,t.length)},I:function(e,t,n){const s=$ee(e);return t==="Io"?n.ordinalNumber(s,{unit:"week"}):At(s,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Fi.d(e,t)},D:function(e,t,n){const s=Iee(e);return t==="Do"?n.ordinalNumber(s,{unit:"dayOfYear"}):At(s,t.length)},E:function(e,t,n){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});case"EEEE":default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,n,s){const a=e.getDay(),i=(a-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return At(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,s){const a=e.getDay(),i=(a-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return At(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const s=e.getDay(),a=s===0?7:s;switch(t){case"i":return String(a);case"ii":return At(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});case"iiii":default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const s=e.getHours();let a;switch(s===12?a=Nc.noon:s===0?a=Nc.midnight:a=s/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const s=e.getHours();let a;switch(s>=17?a=Nc.evening:s>=12?a=Nc.afternoon:s>=4?a=Nc.morning:a=Nc.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let s=e.getHours()%12;return s===0&&(s=12),n.ordinalNumber(s,{unit:"hour"})}return Fi.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Fi.H(e,t)},K:function(e,t,n){const s=e.getHours()%12;return t==="Ko"?n.ordinalNumber(s,{unit:"hour"}):At(s,t.length)},k:function(e,t,n){let s=e.getHours();return s===0&&(s=24),t==="ko"?n.ordinalNumber(s,{unit:"hour"}):At(s,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Fi.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Fi.s(e,t)},S:function(e,t){return Fi.S(e,t)},X:function(e,t,n){const s=e.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return $P(s);case"XXXX":case"XX":return el(s);case"XXXXX":case"XXX":default:return el(s,":")}},x:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"x":return $P(s);case"xxxx":case"xx":return el(s);case"xxxxx":case"xxx":default:return el(s,":")}},O:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+IP(s,":");case"OOOO":default:return"GMT"+el(s,":")}},z:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+IP(s,":");case"zzzz":default:return"GMT"+el(s,":")}},t:function(e,t,n){const s=Math.trunc(e.getTime()/1e3);return At(s,t.length)},T:function(e,t,n){const s=e.getTime();return At(s,t.length)}};function IP(e,t=""){const n=e>0?"-":"+",s=Math.abs(e),a=Math.trunc(s/60),i=s%60;return i===0?n+String(a):n+String(a)+t+At(i,2)}function $P(e,t){return e%60===0?(e>0?"-":"+")+At(Math.abs(e)/60,2):el(e,t)}function el(e,t=""){const n=e>0?"-":"+",s=Math.abs(e),a=At(Math.trunc(s/60),2),i=At(s%60,2);return n+a+t+i}const RP=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},J3=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Lee=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],s=n[1],a=n[2];if(!a)return RP(e,t);let i;switch(s){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",RP(s,t)).replace("{{time}}",J3(a,t))},Bee={p:J3,P:Lee},Vee=/^D+$/,zee=/^Y+$/,qee=["D","DD","YY","YYYY"];function Uee(e){return Vee.test(e)}function Wee(e){return zee.test(e)}function Hee(e,t,n){const s=Gee(e,t,n);if(console.warn(s),qee.includes(e))throw new RangeError(s)}function Gee(e,t,n){const s=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Kee=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Yee=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Qee=/^'([^]*?)'?$/,Xee=/''/g,Jee=/[a-zA-Z]/;function Je(e,t,n){var d,h,f,m,g,p,v,j;const s=Hx(),a=(n==null?void 0:n.locale)??s.locale??Mee,i=(n==null?void 0:n.firstWeekContainsDate)??((h=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(f=s.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((p=(g=n==null?void 0:n.locale)==null?void 0:g.options)==null?void 0:p.weekStartsOn)??s.weekStartsOn??((j=(v=s.locale)==null?void 0:v.options)==null?void 0:j.weekStartsOn)??0,l=hr(e);if(!tee(l))throw new RangeError("Invalid time value");let c=t.match(Yee).map(x=>{const y=x[0];if(y==="p"||y==="P"){const N=Bee[y];return N(x,a.formatLong)}return x}).join("").match(Kee).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const y=x[0];if(y==="'")return{isToken:!1,value:Zee(x)};if(MP[y])return{isToken:!0,value:x};if(y.match(Jee))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");return{isToken:!1,value:x}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return c.map(x=>{if(!x.isToken)return x.value;const y=x.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&Wee(y)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&Uee(y))&&Hee(y,t,String(e));const N=MP[y[0]];return N(l,y,a.localize,u)}).join("")}function Zee(e){const t=e.match(Qee);return t?t[1].replace(Xee,"'"):e}function ete(e,t){const n=hr(e),s=hr(t);return n.getTime()>s.getTime()}function Gg(e,t){const n=hr(e),s=hr(t);return+n<+s}function tte({open:e,onOpenChange:t,vaccination:n}){const{confirmVaccinationReminder:s,calculateDueDateFromProtocol:a}=ct(),{toast:i}=et(),[o,l]=b.useState({datePerformed:Je(new Date,"yyyy-MM-dd"),veterinarian:"",batchNumber:"",notes:"",newNextDueDate:""}),c=d=>{if(d.preventDefault(),!o.veterinarian){i({title:"Erreur",description:"Le nom du vétérinaire est requis",variant:"destructive"});return}let h=o.newNextDueDate;!h&&n&&(h=a(n.vaccineName,"chien",o.datePerformed)||""),s(n.id,{datePerformed:o.datePerformed,veterinarian:o.veterinarian,batchNumber:o.batchNumber,notes:o.notes,newNextDueDate:h})&&(i({title:"Rappel confirmé",description:`Le rappel de ${n.vaccineName} a été confirmé et enregistré`}),l({datePerformed:Je(new Date,"yyyy-MM-dd"),veterinarian:"",batchNumber:"",notes:"",newNextDueDate:""}),t(!1))},u=d=>{l(h=>({...h,[d.target.name]:d.target.value}))};return n?r.jsx(He,{open:e,onOpenChange:t,children:r.jsxs(We,{className:"sm:max-w-[500px]",children:[r.jsx(Ge,{children:r.jsx(Ke,{children:"Confirmer le rappel de vaccination"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-sm mb-2",children:"Vaccination à confirmer :"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[r.jsx("strong",{children:n.vaccineName})," pour ",n.petName]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Rappel prévu le : ",new Date(n.nextDueDate).toLocaleDateString("fr-FR")]})]}),r.jsxs("form",{onSubmit:c,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(D,{htmlFor:"datePerformed",children:"Date d'administration *"}),r.jsx(K,{id:"datePerformed",name:"datePerformed",type:"date",value:o.datePerformed,onChange:u,required:!0})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"veterinarian",children:"Vétérinaire *"}),r.jsx(K,{id:"veterinarian",name:"veterinarian",value:o.veterinarian,onChange:u,placeholder:"Nom du vétérinaire",required:!0})]})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"batchNumber",children:"Numéro de lot"}),r.jsx(K,{id:"batchNumber",name:"batchNumber",value:o.batchNumber,onChange:u,placeholder:"Numéro de lot du vaccin"})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"newNextDueDate",children:"Nouvelle date de rappel"}),r.jsx(K,{id:"newNextDueDate",name:"newNextDueDate",type:"date",value:o.newNextDueDate,onChange:u,placeholder:"Date du prochain rappel"}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Laissez vide pour utiliser la date calculée selon le protocole"})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"notes",children:"Notes"}),r.jsx(Be,{id:"notes",name:"notes",value:o.notes,onChange:u,placeholder:"Notes sur l'administration du vaccin",rows:3})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(R,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),r.jsx(R,{type:"submit",children:"Confirmer le rappel"})]})]})]})]})}):null}var nte=Array.isArray,zr=nte,rte=typeof cr=="object"&&cr&&cr.Object===Object&&cr,Z3=rte,ste=Z3,ate=typeof self=="object"&&self&&self.Object===Object&&self,ite=ste||ate||Function("return this")(),Ua=ite,ote=Ua,lte=ote.Symbol,Sm=lte,FP=Sm,eF=Object.prototype,cte=eF.hasOwnProperty,ute=eF.toString,rh=FP?FP.toStringTag:void 0;function dte(e){var t=cte.call(e,rh),n=e[rh];try{e[rh]=void 0;var s=!0}catch{}var a=ute.call(e);return s&&(t?e[rh]=n:delete e[rh]),a}var hte=dte,fte=Object.prototype,mte=fte.toString;function pte(e){return mte.call(e)}var gte=pte,LP=Sm,vte=hte,xte=gte,yte="[object Null]",jte="[object Undefined]",BP=LP?LP.toStringTag:void 0;function bte(e){return e==null?e===void 0?jte:yte:BP&&BP in Object(e)?vte(e):xte(e)}var ki=bte;function wte(e){return e!=null&&typeof e=="object"}var Ti=wte,Nte=ki,Ste=Ti,Cte="[object Symbol]";function _te(e){return typeof e=="symbol"||Ste(e)&&Nte(e)==Cte}var Pd=_te,Pte=zr,Ate=Pd,kte=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Tte=/^\w*$/;function Ete(e,t){if(Pte(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||Ate(e)?!0:Tte.test(e)||!kte.test(e)||t!=null&&e in Object(t)}var BS=Ete;function Ote(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Vo=Ote;const Ad=Pt(Vo);var Dte=ki,Mte=Vo,Ite="[object AsyncFunction]",$te="[object Function]",Rte="[object GeneratorFunction]",Fte="[object Proxy]";function Lte(e){if(!Mte(e))return!1;var t=Dte(e);return t==$te||t==Rte||t==Ite||t==Fte}var VS=Lte;const qe=Pt(VS);var Bte=Ua,Vte=Bte["__core-js_shared__"],zte=Vte,V0=zte,VP=function(){var e=/[^.]+$/.exec(V0&&V0.keys&&V0.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function qte(e){return!!VP&&VP in e}var Ute=qte,Wte=Function.prototype,Hte=Wte.toString;function Gte(e){if(e!=null){try{return Hte.call(e)}catch{}try{return e+""}catch{}}return""}var tF=Gte,Kte=VS,Yte=Ute,Qte=Vo,Xte=tF,Jte=/[\\^$.*+?()[\]{}|]/g,Zte=/^\[object .+?Constructor\]$/,ene=Function.prototype,tne=Object.prototype,nne=ene.toString,rne=tne.hasOwnProperty,sne=RegExp("^"+nne.call(rne).replace(Jte,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ane(e){if(!Qte(e)||Yte(e))return!1;var t=Kte(e)?sne:Zte;return t.test(Xte(e))}var ine=ane;function one(e,t){return e==null?void 0:e[t]}var lne=one,cne=ine,une=lne;function dne(e,t){var n=une(e,t);return cne(n)?n:void 0}var sc=dne,hne=sc,fne=hne(Object,"create"),Gx=fne,zP=Gx;function mne(){this.__data__=zP?zP(null):{},this.size=0}var pne=mne;function gne(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var vne=gne,xne=Gx,yne="__lodash_hash_undefined__",jne=Object.prototype,bne=jne.hasOwnProperty;function wne(e){var t=this.__data__;if(xne){var n=t[e];return n===yne?void 0:n}return bne.call(t,e)?t[e]:void 0}var Nne=wne,Sne=Gx,Cne=Object.prototype,_ne=Cne.hasOwnProperty;function Pne(e){var t=this.__data__;return Sne?t[e]!==void 0:_ne.call(t,e)}var Ane=Pne,kne=Gx,Tne="__lodash_hash_undefined__";function Ene(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=kne&&t===void 0?Tne:t,this}var One=Ene,Dne=pne,Mne=vne,Ine=Nne,$ne=Ane,Rne=One;function kd(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}kd.prototype.clear=Dne;kd.prototype.delete=Mne;kd.prototype.get=Ine;kd.prototype.has=$ne;kd.prototype.set=Rne;var Fne=kd;function Lne(){this.__data__=[],this.size=0}var Bne=Lne;function Vne(e,t){return e===t||e!==e&&t!==t}var zS=Vne,zne=zS;function qne(e,t){for(var n=e.length;n--;)if(zne(e[n][0],t))return n;return-1}var Kx=qne,Une=Kx,Wne=Array.prototype,Hne=Wne.splice;function Gne(e){var t=this.__data__,n=Une(t,e);if(n<0)return!1;var s=t.length-1;return n==s?t.pop():Hne.call(t,n,1),--this.size,!0}var Kne=Gne,Yne=Kx;function Qne(e){var t=this.__data__,n=Yne(t,e);return n<0?void 0:t[n][1]}var Xne=Qne,Jne=Kx;function Zne(e){return Jne(this.__data__,e)>-1}var ere=Zne,tre=Kx;function nre(e,t){var n=this.__data__,s=tre(n,e);return s<0?(++this.size,n.push([e,t])):n[s][1]=t,this}var rre=nre,sre=Bne,are=Kne,ire=Xne,ore=ere,lre=rre;function Td(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}Td.prototype.clear=sre;Td.prototype.delete=are;Td.prototype.get=ire;Td.prototype.has=ore;Td.prototype.set=lre;var Yx=Td,cre=sc,ure=Ua,dre=cre(ure,"Map"),qS=dre,qP=Fne,hre=Yx,fre=qS;function mre(){this.size=0,this.__data__={hash:new qP,map:new(fre||hre),string:new qP}}var pre=mre;function gre(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var vre=gre,xre=vre;function yre(e,t){var n=e.__data__;return xre(t)?n[typeof t=="string"?"string":"hash"]:n.map}var Qx=yre,jre=Qx;function bre(e){var t=jre(this,e).delete(e);return this.size-=t?1:0,t}var wre=bre,Nre=Qx;function Sre(e){return Nre(this,e).get(e)}var Cre=Sre,_re=Qx;function Pre(e){return _re(this,e).has(e)}var Are=Pre,kre=Qx;function Tre(e,t){var n=kre(this,e),s=n.size;return n.set(e,t),this.size+=n.size==s?0:1,this}var Ere=Tre,Ore=pre,Dre=wre,Mre=Cre,Ire=Are,$re=Ere;function Ed(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}Ed.prototype.clear=Ore;Ed.prototype.delete=Dre;Ed.prototype.get=Mre;Ed.prototype.has=Ire;Ed.prototype.set=$re;var US=Ed,nF=US,Rre="Expected a function";function WS(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Rre);var n=function(){var s=arguments,a=t?t.apply(this,s):s[0],i=n.cache;if(i.has(a))return i.get(a);var o=e.apply(this,s);return n.cache=i.set(a,o)||i,o};return n.cache=new(WS.Cache||nF),n}WS.Cache=nF;var rF=WS;const Fre=Pt(rF);var Lre=rF,Bre=500;function Vre(e){var t=Lre(e,function(s){return n.size===Bre&&n.clear(),s}),n=t.cache;return t}var zre=Vre,qre=zre,Ure=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Wre=/\\(\\)?/g,Hre=qre(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Ure,function(n,s,a,i){t.push(a?i.replace(Wre,"$1"):s||n)}),t}),Gre=Hre;function Kre(e,t){for(var n=-1,s=e==null?0:e.length,a=Array(s);++n<s;)a[n]=t(e[n],n,e);return a}var HS=Kre,UP=Sm,Yre=HS,Qre=zr,Xre=Pd,Jre=1/0,WP=UP?UP.prototype:void 0,HP=WP?WP.toString:void 0;function sF(e){if(typeof e=="string")return e;if(Qre(e))return Yre(e,sF)+"";if(Xre(e))return HP?HP.call(e):"";var t=e+"";return t=="0"&&1/e==-Jre?"-0":t}var Zre=sF,ese=Zre;function tse(e){return e==null?"":ese(e)}var aF=tse,nse=zr,rse=BS,sse=Gre,ase=aF;function ise(e,t){return nse(e)?e:rse(e,t)?[e]:sse(ase(e))}var iF=ise,ose=Pd,lse=1/0;function cse(e){if(typeof e=="string"||ose(e))return e;var t=e+"";return t=="0"&&1/e==-lse?"-0":t}var Xx=cse,use=iF,dse=Xx;function hse(e,t){t=use(t,e);for(var n=0,s=t.length;e!=null&&n<s;)e=e[dse(t[n++])];return n&&n==s?e:void 0}var GS=hse,fse=GS;function mse(e,t,n){var s=e==null?void 0:fse(e,t);return s===void 0?n:s}var oF=mse;const ss=Pt(oF);function pse(e){return e==null}var gse=pse;const Qe=Pt(gse);var vse=ki,xse=zr,yse=Ti,jse="[object String]";function bse(e){return typeof e=="string"||!xse(e)&&yse(e)&&vse(e)==jse}var wse=bse;const ql=Pt(wse);var lF={exports:{}},Ot={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KS=Symbol.for("react.element"),YS=Symbol.for("react.portal"),Jx=Symbol.for("react.fragment"),Zx=Symbol.for("react.strict_mode"),ey=Symbol.for("react.profiler"),ty=Symbol.for("react.provider"),ny=Symbol.for("react.context"),Nse=Symbol.for("react.server_context"),ry=Symbol.for("react.forward_ref"),sy=Symbol.for("react.suspense"),ay=Symbol.for("react.suspense_list"),iy=Symbol.for("react.memo"),oy=Symbol.for("react.lazy"),Sse=Symbol.for("react.offscreen"),cF;cF=Symbol.for("react.module.reference");function Ts(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case KS:switch(e=e.type,e){case Jx:case ey:case Zx:case sy:case ay:return e;default:switch(e=e&&e.$$typeof,e){case Nse:case ny:case ry:case oy:case iy:case ty:return e;default:return t}}case YS:return t}}}Ot.ContextConsumer=ny;Ot.ContextProvider=ty;Ot.Element=KS;Ot.ForwardRef=ry;Ot.Fragment=Jx;Ot.Lazy=oy;Ot.Memo=iy;Ot.Portal=YS;Ot.Profiler=ey;Ot.StrictMode=Zx;Ot.Suspense=sy;Ot.SuspenseList=ay;Ot.isAsyncMode=function(){return!1};Ot.isConcurrentMode=function(){return!1};Ot.isContextConsumer=function(e){return Ts(e)===ny};Ot.isContextProvider=function(e){return Ts(e)===ty};Ot.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===KS};Ot.isForwardRef=function(e){return Ts(e)===ry};Ot.isFragment=function(e){return Ts(e)===Jx};Ot.isLazy=function(e){return Ts(e)===oy};Ot.isMemo=function(e){return Ts(e)===iy};Ot.isPortal=function(e){return Ts(e)===YS};Ot.isProfiler=function(e){return Ts(e)===ey};Ot.isStrictMode=function(e){return Ts(e)===Zx};Ot.isSuspense=function(e){return Ts(e)===sy};Ot.isSuspenseList=function(e){return Ts(e)===ay};Ot.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Jx||e===ey||e===Zx||e===sy||e===ay||e===Sse||typeof e=="object"&&e!==null&&(e.$$typeof===oy||e.$$typeof===iy||e.$$typeof===ty||e.$$typeof===ny||e.$$typeof===ry||e.$$typeof===cF||e.getModuleId!==void 0)};Ot.typeOf=Ts;lF.exports=Ot;var Cse=lF.exports,_se=ki,Pse=Ti,Ase="[object Number]";function kse(e){return typeof e=="number"||Pse(e)&&_se(e)==Ase}var uF=kse;const Tse=Pt(uF);var Ese=uF;function Ose(e){return Ese(e)&&e!=+e}var Dse=Ose;const Od=Pt(Dse);var yr=function(t){return t===0?0:t>0?1:-1},dl=function(t){return ql(t)&&t.indexOf("%")===t.length-1},je=function(t){return Tse(t)&&!Od(t)},Mse=function(t){return Qe(t)},In=function(t){return je(t)||ql(t)},Ise=0,ac=function(t){var n=++Ise;return"".concat(t||"").concat(n)},jr=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!je(t)&&!ql(t))return s;var i;if(dl(t)){var o=t.indexOf("%");i=n*parseFloat(t.slice(0,o))/100}else i=+t;return Od(i)&&(i=s),a&&i>n&&(i=n),i},Qi=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},$se=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,s={},a=0;a<n;a++)if(!s[t[a]])s[t[a]]=!0;else return!0;return!1},On=function(t,n){return je(t)&&je(n)?function(s){return t+s*(n-t)}:function(){return n}};function Kg(e,t,n){return!e||!e.length?null:e.find(function(s){return s&&(typeof t=="function"?t(s):ss(s,t))===n})}var Rse=function(t,n){return je(t)&&je(n)?t-n:ql(t)&&ql(n)?t.localeCompare(n):t instanceof Date&&n instanceof Date?t.getTime()-n.getTime():String(t).localeCompare(String(n))};function ru(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var s in t)if({}.hasOwnProperty.call(t,s)&&!{}.hasOwnProperty.call(e,s))return!1;return!0}function uw(e){"@babel/helpers - typeof";return uw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uw(e)}var Fse=["viewBox","children"],Lse=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],GP=["points","pathLength"],z0={svg:Fse,polygon:GP,polyline:GP},QS=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Yg=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(b.isValidElement(t)&&(s=t.props),!Ad(s))return null;var a={};return Object.keys(s).forEach(function(i){QS.includes(i)&&(a[i]=n||function(o){return s[i](s,o)})}),a},Bse=function(t,n,s){return function(a){return t(n,s,a),null}},Ul=function(t,n,s){if(!Ad(t)||uw(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var o=t[i];QS.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=Bse(o,n,s))}),a},Vse=["children"],zse=["children"];function KP(e,t){if(e==null)return{};var n=qse(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function qse(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function dw(e){"@babel/helpers - typeof";return dw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dw(e)}var YP={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},hi=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},QP=null,q0=null,XS=function e(t){if(t===QP&&Array.isArray(q0))return q0;var n=[];return b.Children.forEach(t,function(s){Qe(s)||(Cse.isFragment(s)?n=n.concat(e(s.props.children)):n.push(s))}),q0=n,QP=t,n};function as(e,t){var n=[],s=[];return Array.isArray(t)?s=t.map(function(a){return hi(a)}):s=[hi(t)],XS(e).forEach(function(a){var i=ss(a,"type.displayName")||ss(a,"type.name");s.indexOf(i)!==-1&&n.push(a)}),n}function Xr(e,t){var n=as(e,t);return n&&n[0]}var XP=function(t){if(!t||!t.props)return!1;var n=t.props,s=n.width,a=n.height;return!(!je(s)||s<=0||!je(a)||a<=0)},Use=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Wse=function(t){return t&&t.type&&ql(t.type)&&Use.indexOf(t.type)>=0},dF=function(t){return t&&dw(t)==="object"&&"clipDot"in t},Hse=function(t,n,s,a){var i,o=(i=z0==null?void 0:z0[a])!==null&&i!==void 0?i:[];return n.startsWith("data-")||!qe(t)&&(a&&o.includes(n)||Lse.includes(n))||s&&QS.includes(n)},Re=function(t,n,s){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(b.isValidElement(t)&&(a=t.props),!Ad(a))return null;var i={};return Object.keys(a).forEach(function(o){var l;Hse((l=a)===null||l===void 0?void 0:l[o],o,n,s)&&(i[o]=a[o])}),i},hw=function e(t,n){if(t===n)return!0;var s=b.Children.count(t);if(s!==b.Children.count(n))return!1;if(s===0)return!0;if(s===1)return JP(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var a=0;a<s;a++){var i=t[a],o=n[a];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!JP(i,o))return!1}return!0},JP=function(t,n){if(Qe(t)&&Qe(n))return!0;if(!Qe(t)&&!Qe(n)){var s=t.props||{},a=s.children,i=KP(s,Vse),o=n.props||{},l=o.children,c=KP(o,zse);return a&&l?ru(i,c)&&hw(a,l):!a&&!l?ru(i,c):!1}return!1},ZP=function(t,n){var s=[],a={};return XS(t).forEach(function(i,o){if(Wse(i))s.push(i);else if(i){var l=hi(i.type),c=n[l]||{},u=c.handler,d=c.once;if(u&&(!d||!a[l])){var h=u(i,l,o);s.push(h),a[l]=!0}}}),s},Gse=function(t){var n=t&&t.type;return n&&YP[n]?YP[n]:null},Kse=function(t,n){return XS(n).indexOf(t)},Yse=["children","width","height","viewBox","className","style","title","desc"];function fw(){return fw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},fw.apply(this,arguments)}function Qse(e,t){if(e==null)return{};var n=Xse(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Xse(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function mw(e){var t=e.children,n=e.width,s=e.height,a=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,u=Qse(e,Yse),d=a||{width:n,height:s,x:0,y:0},h=Ze("recharts-surface",i);return F.createElement("svg",fw({},Re(u,!0,"svg"),{className:h,width:n,height:s,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),F.createElement("title",null,l),F.createElement("desc",null,c),t)}var Jse=["children","className"];function pw(){return pw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},pw.apply(this,arguments)}function Zse(e,t){if(e==null)return{};var n=eae(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function eae(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var ht=F.forwardRef(function(e,t){var n=e.children,s=e.className,a=Zse(e,Jse),i=Ze("recharts-layer",s);return F.createElement("g",pw({className:i},Re(a,!0),{ref:t}),n)}),Zs=function(t,n){for(var s=arguments.length,a=new Array(s>2?s-2:0),i=2;i<s;i++)a[i-2]=arguments[i]};function tae(e,t,n){var s=-1,a=e.length;t<0&&(t=-t>a?0:a+t),n=n>a?a:n,n<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(a);++s<a;)i[s]=e[s+t];return i}var nae=tae,rae=nae;function sae(e,t,n){var s=e.length;return n=n===void 0?s:n,!t&&n>=s?e:rae(e,t,n)}var aae=sae,iae="\\ud800-\\udfff",oae="\\u0300-\\u036f",lae="\\ufe20-\\ufe2f",cae="\\u20d0-\\u20ff",uae=oae+lae+cae,dae="\\ufe0e\\ufe0f",hae="\\u200d",fae=RegExp("["+hae+iae+uae+dae+"]");function mae(e){return fae.test(e)}var hF=mae;function pae(e){return e.split("")}var gae=pae,fF="\\ud800-\\udfff",vae="\\u0300-\\u036f",xae="\\ufe20-\\ufe2f",yae="\\u20d0-\\u20ff",jae=vae+xae+yae,bae="\\ufe0e\\ufe0f",wae="["+fF+"]",gw="["+jae+"]",vw="\\ud83c[\\udffb-\\udfff]",Nae="(?:"+gw+"|"+vw+")",mF="[^"+fF+"]",pF="(?:\\ud83c[\\udde6-\\uddff]){2}",gF="[\\ud800-\\udbff][\\udc00-\\udfff]",Sae="\\u200d",vF=Nae+"?",xF="["+bae+"]?",Cae="(?:"+Sae+"(?:"+[mF,pF,gF].join("|")+")"+xF+vF+")*",_ae=xF+vF+Cae,Pae="(?:"+[mF+gw+"?",gw,pF,gF,wae].join("|")+")",Aae=RegExp(vw+"(?="+vw+")|"+Pae+_ae,"g");function kae(e){return e.match(Aae)||[]}var Tae=kae,Eae=gae,Oae=hF,Dae=Tae;function Mae(e){return Oae(e)?Dae(e):Eae(e)}var Iae=Mae,$ae=aae,Rae=hF,Fae=Iae,Lae=aF;function Bae(e){return function(t){t=Lae(t);var n=Rae(t)?Fae(t):void 0,s=n?n[0]:t.charAt(0),a=n?$ae(n,1).join(""):t.slice(1);return s[e]()+a}}var Vae=Bae,zae=Vae,qae=zae("toUpperCase"),Uae=qae;const ly=Pt(Uae);function Bt(e){return function(){return e}}const yF=Math.cos,Qg=Math.sin,ua=Math.sqrt,Xg=Math.PI,cy=2*Xg,xw=Math.PI,yw=2*xw,tl=1e-6,Wae=yw-tl;function jF(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Hae(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return jF;const n=10**t;return function(s){this._+=s[0];for(let a=1,i=s.length;a<i;++a)this._+=Math.round(arguments[a]*n)/n+s[a]}}class Gae{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?jF:Hae(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,s,a){this._append`Q${+t},${+n},${this._x1=+s},${this._y1=+a}`}bezierCurveTo(t,n,s,a,i,o){this._append`C${+t},${+n},${+s},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,n,s,a,i){if(t=+t,n=+n,s=+s,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=s-t,u=a-n,d=o-t,h=l-n,f=d*d+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(f>tl)if(!(Math.abs(h*c-u*d)>tl)||!i)this._append`L${this._x1=t},${this._y1=n}`;else{let m=s-o,g=a-l,p=c*c+u*u,v=m*m+g*g,j=Math.sqrt(p),x=Math.sqrt(f),y=i*Math.tan((xw-Math.acos((p+f-v)/(2*j*x)))/2),N=y/x,w=y/j;Math.abs(N-1)>tl&&this._append`L${t+N*d},${n+N*h}`,this._append`A${i},${i},0,0,${+(h*m>d*g)},${this._x1=t+w*c},${this._y1=n+w*u}`}}arc(t,n,s,a,i,o){if(t=+t,n=+n,s=+s,o=!!o,s<0)throw new Error(`negative radius: ${s}`);let l=s*Math.cos(a),c=s*Math.sin(a),u=t+l,d=n+c,h=1^o,f=o?a-i:i-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>tl||Math.abs(this._y1-d)>tl)&&this._append`L${u},${d}`,s&&(f<0&&(f=f%yw+yw),f>Wae?this._append`A${s},${s},0,1,${h},${t-l},${n-c}A${s},${s},0,1,${h},${this._x1=u},${this._y1=d}`:f>tl&&this._append`A${s},${s},0,${+(f>=xw)},${h},${this._x1=t+s*Math.cos(i)},${this._y1=n+s*Math.sin(i)}`)}rect(t,n,s,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${s=+s}v${+a}h${-s}Z`}toString(){return this._}}function JS(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const s=Math.floor(n);if(!(s>=0))throw new RangeError(`invalid digits: ${n}`);t=s}return e},()=>new Gae(t)}function ZS(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function bF(e){this._context=e}bF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function uy(e){return new bF(e)}function wF(e){return e[0]}function NF(e){return e[1]}function SF(e,t){var n=Bt(!0),s=null,a=uy,i=null,o=JS(l);e=typeof e=="function"?e:e===void 0?wF:Bt(e),t=typeof t=="function"?t:t===void 0?NF:Bt(t);function l(c){var u,d=(c=ZS(c)).length,h,f=!1,m;for(s==null&&(i=a(m=o())),u=0;u<=d;++u)!(u<d&&n(h=c[u],u,c))===f&&((f=!f)?i.lineStart():i.lineEnd()),f&&i.point(+e(h,u,c),+t(h,u,c));if(m)return i=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Bt(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Bt(+c),l):t},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Bt(!!c),l):n},l.curve=function(c){return arguments.length?(a=c,s!=null&&(i=a(s)),l):a},l.context=function(c){return arguments.length?(c==null?s=i=null:i=a(s=c),l):s},l}function wp(e,t,n){var s=null,a=Bt(!0),i=null,o=uy,l=null,c=JS(u);e=typeof e=="function"?e:e===void 0?wF:Bt(+e),t=typeof t=="function"?t:Bt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?NF:Bt(+n);function u(h){var f,m,g,p=(h=ZS(h)).length,v,j=!1,x,y=new Array(p),N=new Array(p);for(i==null&&(l=o(x=c())),f=0;f<=p;++f){if(!(f<p&&a(v=h[f],f,h))===j)if(j=!j)m=f,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=f-1;g>=m;--g)l.point(y[g],N[g]);l.lineEnd(),l.areaEnd()}j&&(y[f]=+e(v,f,h),N[f]=+t(v,f,h),l.point(s?+s(v,f,h):y[f],n?+n(v,f,h):N[f]))}if(x)return l=null,x+""||null}function d(){return SF().defined(a).curve(o).context(i)}return u.x=function(h){return arguments.length?(e=typeof h=="function"?h:Bt(+h),s=null,u):e},u.x0=function(h){return arguments.length?(e=typeof h=="function"?h:Bt(+h),u):e},u.x1=function(h){return arguments.length?(s=h==null?null:typeof h=="function"?h:Bt(+h),u):s},u.y=function(h){return arguments.length?(t=typeof h=="function"?h:Bt(+h),n=null,u):t},u.y0=function(h){return arguments.length?(t=typeof h=="function"?h:Bt(+h),u):t},u.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Bt(+h),u):n},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(n)},u.lineX1=function(){return d().x(s).y(t)},u.defined=function(h){return arguments.length?(a=typeof h=="function"?h:Bt(!!h),u):a},u.curve=function(h){return arguments.length?(o=h,i!=null&&(l=o(i)),u):o},u.context=function(h){return arguments.length?(h==null?i=l=null:l=o(i=h),u):i},u}class CF{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function Kae(e){return new CF(e,!0)}function Yae(e){return new CF(e,!1)}const eC={draw(e,t){const n=ua(t/Xg);e.moveTo(n,0),e.arc(0,0,n,0,cy)}},Qae={draw(e,t){const n=ua(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},_F=ua(1/3),Xae=_F*2,Jae={draw(e,t){const n=ua(t/Xae),s=n*_F;e.moveTo(0,-n),e.lineTo(s,0),e.lineTo(0,n),e.lineTo(-s,0),e.closePath()}},Zae={draw(e,t){const n=ua(t),s=-n/2;e.rect(s,s,n,n)}},eie=.8908130915292852,PF=Qg(Xg/10)/Qg(7*Xg/10),tie=Qg(cy/10)*PF,nie=-yF(cy/10)*PF,rie={draw(e,t){const n=ua(t*eie),s=tie*n,a=nie*n;e.moveTo(0,-n),e.lineTo(s,a);for(let i=1;i<5;++i){const o=cy*i/5,l=yF(o),c=Qg(o);e.lineTo(c*n,-l*n),e.lineTo(l*s-c*a,c*s+l*a)}e.closePath()}},U0=ua(3),sie={draw(e,t){const n=-ua(t/(U0*3));e.moveTo(0,n*2),e.lineTo(-U0*n,-n),e.lineTo(U0*n,-n),e.closePath()}},fs=-.5,ms=ua(3)/2,jw=1/ua(12),aie=(jw/2+1)*3,iie={draw(e,t){const n=ua(t/aie),s=n/2,a=n*jw,i=s,o=n*jw+n,l=-i,c=o;e.moveTo(s,a),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(fs*s-ms*a,ms*s+fs*a),e.lineTo(fs*i-ms*o,ms*i+fs*o),e.lineTo(fs*l-ms*c,ms*l+fs*c),e.lineTo(fs*s+ms*a,fs*a-ms*s),e.lineTo(fs*i+ms*o,fs*o-ms*i),e.lineTo(fs*l+ms*c,fs*c-ms*l),e.closePath()}};function oie(e,t){let n=null,s=JS(a);e=typeof e=="function"?e:Bt(e||eC),t=typeof t=="function"?t:Bt(t===void 0?64:+t);function a(){let i;if(n||(n=i=s()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:Bt(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:Bt(+i),a):t},a.context=function(i){return arguments.length?(n=i??null,a):n},a}function Jg(){}function Zg(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function AF(e){this._context=e}AF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Zg(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Zg(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function lie(e){return new AF(e)}function kF(e){this._context=e}kF.prototype={areaStart:Jg,areaEnd:Jg,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Zg(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function cie(e){return new kF(e)}function TF(e){this._context=e}TF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,s=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,s):this._context.moveTo(n,s);break;case 3:this._point=4;default:Zg(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function uie(e){return new TF(e)}function EF(e){this._context=e}EF.prototype={areaStart:Jg,areaEnd:Jg,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function die(e){return new EF(e)}function eA(e){return e<0?-1:1}function tA(e,t,n){var s=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(s||a<0&&-0),o=(n-e._y1)/(a||s<0&&-0),l=(i*a+o*s)/(s+a);return(eA(i)+eA(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function nA(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function W0(e,t,n){var s=e._x0,a=e._y0,i=e._x1,o=e._y1,l=(i-s)/3;e._context.bezierCurveTo(s+l,a+l*t,i-l,o-l*n,i,o)}function ev(e){this._context=e}ev.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:W0(this,this._t0,nA(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,W0(this,nA(this,n=tA(this,e,t)),n);break;default:W0(this,this._t0,n=tA(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function OF(e){this._context=new DF(e)}(OF.prototype=Object.create(ev.prototype)).point=function(e,t){ev.prototype.point.call(this,t,e)};function DF(e){this._context=e}DF.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,s,a,i){this._context.bezierCurveTo(t,e,s,n,i,a)}};function hie(e){return new ev(e)}function fie(e){return new OF(e)}function MF(e){this._context=e}MF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var s=rA(e),a=rA(t),i=0,o=1;o<n;++i,++o)this._context.bezierCurveTo(s[0][i],a[0][i],s[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function rA(e){var t,n=e.length-1,s,a=new Array(n),i=new Array(n),o=new Array(n);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[n-1]=2,i[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)s=a[t]/i[t-1],i[t]-=s,o[t]-=s*o[t-1];for(a[n-1]=o[n-1]/i[n-1],t=n-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[n-1]=(e[n]+a[n-1])/2,t=0;t<n-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function mie(e){return new MF(e)}function dy(e,t){this._context=e,this._t=t}dy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function pie(e){return new dy(e,.5)}function gie(e){return new dy(e,0)}function vie(e){return new dy(e,1)}function $u(e,t){if((o=e.length)>1)for(var n=1,s,a,i=e[t[0]],o,l=i.length;n<o;++n)for(a=i,i=e[t[n]],s=0;s<l;++s)i[s][1]+=i[s][0]=isNaN(a[s][1])?a[s][0]:a[s][1]}function bw(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function xie(e,t){return e[t]}function yie(e){const t=[];return t.key=e,t}function jie(){var e=Bt([]),t=bw,n=$u,s=xie;function a(i){var o=Array.from(e.apply(this,arguments),yie),l,c=o.length,u=-1,d;for(const h of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+s(h,o[l].key,u,i)]).data=h;for(l=0,d=ZS(t(o));l<c;++l)o[d[l]].index=l;return n(o,d),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Bt(Array.from(i)),a):e},a.value=function(i){return arguments.length?(s=typeof i=="function"?i:Bt(+i),a):s},a.order=function(i){return arguments.length?(t=i==null?bw:typeof i=="function"?i:Bt(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(n=i??$u,a):n},a}function bie(e,t){if((s=e.length)>0){for(var n,s,a=0,i=e[0].length,o;a<i;++a){for(o=n=0;n<s;++n)o+=e[n][a][1]||0;if(o)for(n=0;n<s;++n)e[n][a][1]/=o}$u(e,t)}}function wie(e,t){if((a=e.length)>0){for(var n=0,s=e[t[0]],a,i=s.length;n<i;++n){for(var o=0,l=0;o<a;++o)l+=e[o][n][1]||0;s[n][1]+=s[n][0]=-l/2}$u(e,t)}}function Nie(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var n=0,s=1,a,i,o;s<i;++s){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],h=d[s][1]||0,f=d[s-1][1]||0,m=(h-f)/2,g=0;g<l;++g){var p=e[t[g]],v=p[s][1]||0,j=p[s-1][1]||0;m+=v-j}c+=h,u+=m*h}a[s-1][1]+=a[s-1][0]=n,c&&(n-=u/c)}a[s-1][1]+=a[s-1][0]=n,$u(e,t)}}function jf(e){"@babel/helpers - typeof";return jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jf(e)}var Sie=["type","size","sizeType"];function ww(){return ww=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ww.apply(this,arguments)}function sA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function aA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sA(Object(n),!0).forEach(function(s){Cie(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sA(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Cie(e,t,n){return t=_ie(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _ie(e){var t=Pie(e,"string");return jf(t)=="symbol"?t:t+""}function Pie(e,t){if(jf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(jf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Aie(e,t){if(e==null)return{};var n=kie(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function kie(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var IF={symbolCircle:eC,symbolCross:Qae,symbolDiamond:Jae,symbolSquare:Zae,symbolStar:rie,symbolTriangle:sie,symbolWye:iie},Tie=Math.PI/180,Eie=function(t){var n="symbol".concat(ly(t));return IF[n]||eC},Oie=function(t,n,s){if(n==="area")return t;switch(s){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*Tie;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Die=function(t,n){IF["symbol".concat(ly(t))]=n},tC=function(t){var n=t.type,s=n===void 0?"circle":n,a=t.size,i=a===void 0?64:a,o=t.sizeType,l=o===void 0?"area":o,c=Aie(t,Sie),u=aA(aA({},c),{},{type:s,size:i,sizeType:l}),d=function(){var v=Eie(s),j=oie().type(v).size(Oie(i,l,s));return j()},h=u.className,f=u.cx,m=u.cy,g=Re(u,!0);return f===+f&&m===+m&&i===+i?F.createElement("path",ww({},g,{className:Ze("recharts-symbols",h),transform:"translate(".concat(f,", ").concat(m,")"),d:d()})):null};tC.registerSymbol=Die;function Ru(e){"@babel/helpers - typeof";return Ru=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ru(e)}function Nw(){return Nw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Nw.apply(this,arguments)}function iA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Mie(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iA(Object(n),!0).forEach(function(s){bf(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iA(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Iie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $ie(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,RF(s.key),s)}}function Rie(e,t,n){return t&&$ie(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fie(e,t,n){return t=tv(t),Lie(e,$F()?Reflect.construct(t,n||[],tv(e).constructor):t.apply(e,n))}function Lie(e,t){if(t&&(Ru(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bie(e)}function Bie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $F(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($F=function(){return!!e})()}function tv(e){return tv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},tv(e)}function Vie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sw(e,t)}function Sw(e,t){return Sw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},Sw(e,t)}function bf(e,t,n){return t=RF(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RF(e){var t=zie(e,"string");return Ru(t)=="symbol"?t:t+""}function zie(e,t){if(Ru(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Ru(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ps=32,nC=function(e){function t(){return Iie(this,t),Fie(this,t,arguments)}return Vie(t,e),Rie(t,[{key:"renderIcon",value:function(s){var a=this.props.inactiveColor,i=ps/2,o=ps/6,l=ps/3,c=s.inactive?a:s.color;if(s.type==="plainline")return F.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:s.payload.strokeDasharray,x1:0,y1:i,x2:ps,y2:i,className:"recharts-legend-icon"});if(s.type==="line")return F.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(ps,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(s.type==="rect")return F.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(ps/8,"h").concat(ps,"v").concat(ps*3/4,"h").concat(-ps,"z"),className:"recharts-legend-icon"});if(F.isValidElement(s.legendIcon)){var u=Mie({},s);return delete u.legendIcon,F.cloneElement(s.legendIcon,u)}return F.createElement(tC,{fill:c,cx:i,cy:i,size:ps,sizeType:"diameter",type:s.type})}},{key:"renderItems",value:function(){var s=this,a=this.props,i=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,u=a.inactiveColor,d={x:0,y:0,width:ps,height:ps},h={display:l==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(m,g){var p=m.formatter||c,v=Ze(bf(bf({"recharts-legend-item":!0},"legend-item-".concat(g),!0),"inactive",m.inactive));if(m.type==="none")return null;var j=qe(m.value)?null:m.value;Zs(!qe(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var x=m.inactive?u:m.color;return F.createElement("li",Nw({className:v,style:h,key:"legend-item-".concat(g)},Ul(s.props,m,g)),F.createElement(mw,{width:o,height:o,viewBox:d,style:f},s.renderIcon(m)),F.createElement("span",{className:"recharts-legend-item-text",style:{color:x}},p?p(j,m,g):j))})}},{key:"render",value:function(){var s=this.props,a=s.payload,i=s.layout,o=s.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return F.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(b.PureComponent);bf(nC,"displayName","Legend");bf(nC,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var qie=Yx;function Uie(){this.__data__=new qie,this.size=0}var Wie=Uie;function Hie(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var Gie=Hie;function Kie(e){return this.__data__.get(e)}var Yie=Kie;function Qie(e){return this.__data__.has(e)}var Xie=Qie,Jie=Yx,Zie=qS,eoe=US,toe=200;function noe(e,t){var n=this.__data__;if(n instanceof Jie){var s=n.__data__;if(!Zie||s.length<toe-1)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new eoe(s)}return n.set(e,t),this.size=n.size,this}var roe=noe,soe=Yx,aoe=Wie,ioe=Gie,ooe=Yie,loe=Xie,coe=roe;function Dd(e){var t=this.__data__=new soe(e);this.size=t.size}Dd.prototype.clear=aoe;Dd.prototype.delete=ioe;Dd.prototype.get=ooe;Dd.prototype.has=loe;Dd.prototype.set=coe;var FF=Dd,uoe="__lodash_hash_undefined__";function doe(e){return this.__data__.set(e,uoe),this}var hoe=doe;function foe(e){return this.__data__.has(e)}var moe=foe,poe=US,goe=hoe,voe=moe;function nv(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new poe;++t<n;)this.add(e[t])}nv.prototype.add=nv.prototype.push=goe;nv.prototype.has=voe;var LF=nv;function xoe(e,t){for(var n=-1,s=e==null?0:e.length;++n<s;)if(t(e[n],n,e))return!0;return!1}var BF=xoe;function yoe(e,t){return e.has(t)}var VF=yoe,joe=LF,boe=BF,woe=VF,Noe=1,Soe=2;function Coe(e,t,n,s,a,i){var o=n&Noe,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var u=i.get(e),d=i.get(t);if(u&&d)return u==t&&d==e;var h=-1,f=!0,m=n&Soe?new joe:void 0;for(i.set(e,t),i.set(t,e);++h<l;){var g=e[h],p=t[h];if(s)var v=o?s(p,g,h,t,e,i):s(g,p,h,e,t,i);if(v!==void 0){if(v)continue;f=!1;break}if(m){if(!boe(t,function(j,x){if(!woe(m,x)&&(g===j||a(g,j,n,s,i)))return m.push(x)})){f=!1;break}}else if(!(g===p||a(g,p,n,s,i))){f=!1;break}}return i.delete(e),i.delete(t),f}var zF=Coe,_oe=Ua,Poe=_oe.Uint8Array,Aoe=Poe;function koe(e){var t=-1,n=Array(e.size);return e.forEach(function(s,a){n[++t]=[a,s]}),n}var Toe=koe;function Eoe(e){var t=-1,n=Array(e.size);return e.forEach(function(s){n[++t]=s}),n}var rC=Eoe,oA=Sm,lA=Aoe,Ooe=zS,Doe=zF,Moe=Toe,Ioe=rC,$oe=1,Roe=2,Foe="[object Boolean]",Loe="[object Date]",Boe="[object Error]",Voe="[object Map]",zoe="[object Number]",qoe="[object RegExp]",Uoe="[object Set]",Woe="[object String]",Hoe="[object Symbol]",Goe="[object ArrayBuffer]",Koe="[object DataView]",cA=oA?oA.prototype:void 0,H0=cA?cA.valueOf:void 0;function Yoe(e,t,n,s,a,i,o){switch(n){case Koe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Goe:return!(e.byteLength!=t.byteLength||!i(new lA(e),new lA(t)));case Foe:case Loe:case zoe:return Ooe(+e,+t);case Boe:return e.name==t.name&&e.message==t.message;case qoe:case Woe:return e==t+"";case Voe:var l=Moe;case Uoe:var c=s&$oe;if(l||(l=Ioe),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;s|=Roe,o.set(e,t);var d=Doe(l(e),l(t),s,a,i,o);return o.delete(e),d;case Hoe:if(H0)return H0.call(e)==H0.call(t)}return!1}var Qoe=Yoe;function Xoe(e,t){for(var n=-1,s=t.length,a=e.length;++n<s;)e[a+n]=t[n];return e}var qF=Xoe,Joe=qF,Zoe=zr;function ele(e,t,n){var s=t(e);return Zoe(e)?s:Joe(s,n(e))}var tle=ele;function nle(e,t){for(var n=-1,s=e==null?0:e.length,a=0,i=[];++n<s;){var o=e[n];t(o,n,e)&&(i[a++]=o)}return i}var rle=nle;function sle(){return[]}var ale=sle,ile=rle,ole=ale,lle=Object.prototype,cle=lle.propertyIsEnumerable,uA=Object.getOwnPropertySymbols,ule=uA?function(e){return e==null?[]:(e=Object(e),ile(uA(e),function(t){return cle.call(e,t)}))}:ole,dle=ule;function hle(e,t){for(var n=-1,s=Array(e);++n<e;)s[n]=t(n);return s}var fle=hle,mle=ki,ple=Ti,gle="[object Arguments]";function vle(e){return ple(e)&&mle(e)==gle}var xle=vle,dA=xle,yle=Ti,UF=Object.prototype,jle=UF.hasOwnProperty,ble=UF.propertyIsEnumerable,wle=dA(function(){return arguments}())?dA:function(e){return yle(e)&&jle.call(e,"callee")&&!ble.call(e,"callee")},sC=wle,rv={exports:{}};function Nle(){return!1}var Sle=Nle;rv.exports;(function(e,t){var n=Ua,s=Sle,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||s;e.exports=u})(rv,rv.exports);var WF=rv.exports,Cle=9007199254740991,_le=/^(?:0|[1-9]\d*)$/;function Ple(e,t){var n=typeof e;return t=t??Cle,!!t&&(n=="number"||n!="symbol"&&_le.test(e))&&e>-1&&e%1==0&&e<t}var aC=Ple,Ale=9007199254740991;function kle(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Ale}var iC=kle,Tle=ki,Ele=iC,Ole=Ti,Dle="[object Arguments]",Mle="[object Array]",Ile="[object Boolean]",$le="[object Date]",Rle="[object Error]",Fle="[object Function]",Lle="[object Map]",Ble="[object Number]",Vle="[object Object]",zle="[object RegExp]",qle="[object Set]",Ule="[object String]",Wle="[object WeakMap]",Hle="[object ArrayBuffer]",Gle="[object DataView]",Kle="[object Float32Array]",Yle="[object Float64Array]",Qle="[object Int8Array]",Xle="[object Int16Array]",Jle="[object Int32Array]",Zle="[object Uint8Array]",ece="[object Uint8ClampedArray]",tce="[object Uint16Array]",nce="[object Uint32Array]",Ht={};Ht[Kle]=Ht[Yle]=Ht[Qle]=Ht[Xle]=Ht[Jle]=Ht[Zle]=Ht[ece]=Ht[tce]=Ht[nce]=!0;Ht[Dle]=Ht[Mle]=Ht[Hle]=Ht[Ile]=Ht[Gle]=Ht[$le]=Ht[Rle]=Ht[Fle]=Ht[Lle]=Ht[Ble]=Ht[Vle]=Ht[zle]=Ht[qle]=Ht[Ule]=Ht[Wle]=!1;function rce(e){return Ole(e)&&Ele(e.length)&&!!Ht[Tle(e)]}var sce=rce;function ace(e){return function(t){return e(t)}}var HF=ace,sv={exports:{}};sv.exports;(function(e,t){var n=Z3,s=t&&!t.nodeType&&t,a=s&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===s,o=i&&n.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(sv,sv.exports);var ice=sv.exports,oce=sce,lce=HF,hA=ice,fA=hA&&hA.isTypedArray,cce=fA?lce(fA):oce,GF=cce,uce=fle,dce=sC,hce=zr,fce=WF,mce=aC,pce=GF,gce=Object.prototype,vce=gce.hasOwnProperty;function xce(e,t){var n=hce(e),s=!n&&dce(e),a=!n&&!s&&fce(e),i=!n&&!s&&!a&&pce(e),o=n||s||a||i,l=o?uce(e.length,String):[],c=l.length;for(var u in e)(t||vce.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||mce(u,c)))&&l.push(u);return l}var yce=xce,jce=Object.prototype;function bce(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||jce;return e===n}var wce=bce;function Nce(e,t){return function(n){return e(t(n))}}var KF=Nce,Sce=KF,Cce=Sce(Object.keys,Object),_ce=Cce,Pce=wce,Ace=_ce,kce=Object.prototype,Tce=kce.hasOwnProperty;function Ece(e){if(!Pce(e))return Ace(e);var t=[];for(var n in Object(e))Tce.call(e,n)&&n!="constructor"&&t.push(n);return t}var Oce=Ece,Dce=VS,Mce=iC;function Ice(e){return e!=null&&Mce(e.length)&&!Dce(e)}var Cm=Ice,$ce=yce,Rce=Oce,Fce=Cm;function Lce(e){return Fce(e)?$ce(e):Rce(e)}var hy=Lce,Bce=tle,Vce=dle,zce=hy;function qce(e){return Bce(e,zce,Vce)}var Uce=qce,mA=Uce,Wce=1,Hce=Object.prototype,Gce=Hce.hasOwnProperty;function Kce(e,t,n,s,a,i){var o=n&Wce,l=mA(e),c=l.length,u=mA(t),d=u.length;if(c!=d&&!o)return!1;for(var h=c;h--;){var f=l[h];if(!(o?f in t:Gce.call(t,f)))return!1}var m=i.get(e),g=i.get(t);if(m&&g)return m==t&&g==e;var p=!0;i.set(e,t),i.set(t,e);for(var v=o;++h<c;){f=l[h];var j=e[f],x=t[f];if(s)var y=o?s(x,j,f,t,e,i):s(j,x,f,e,t,i);if(!(y===void 0?j===x||a(j,x,n,s,i):y)){p=!1;break}v||(v=f=="constructor")}if(p&&!v){var N=e.constructor,w=t.constructor;N!=w&&"constructor"in e&&"constructor"in t&&!(typeof N=="function"&&N instanceof N&&typeof w=="function"&&w instanceof w)&&(p=!1)}return i.delete(e),i.delete(t),p}var Yce=Kce,Qce=sc,Xce=Ua,Jce=Qce(Xce,"DataView"),Zce=Jce,eue=sc,tue=Ua,nue=eue(tue,"Promise"),rue=nue,sue=sc,aue=Ua,iue=sue(aue,"Set"),YF=iue,oue=sc,lue=Ua,cue=oue(lue,"WeakMap"),uue=cue,Cw=Zce,_w=qS,Pw=rue,Aw=YF,kw=uue,QF=ki,Md=tF,pA="[object Map]",due="[object Object]",gA="[object Promise]",vA="[object Set]",xA="[object WeakMap]",yA="[object DataView]",hue=Md(Cw),fue=Md(_w),mue=Md(Pw),pue=Md(Aw),gue=Md(kw),nl=QF;(Cw&&nl(new Cw(new ArrayBuffer(1)))!=yA||_w&&nl(new _w)!=pA||Pw&&nl(Pw.resolve())!=gA||Aw&&nl(new Aw)!=vA||kw&&nl(new kw)!=xA)&&(nl=function(e){var t=QF(e),n=t==due?e.constructor:void 0,s=n?Md(n):"";if(s)switch(s){case hue:return yA;case fue:return pA;case mue:return gA;case pue:return vA;case gue:return xA}return t});var vue=nl,G0=FF,xue=zF,yue=Qoe,jue=Yce,jA=vue,bA=zr,wA=WF,bue=GF,wue=1,NA="[object Arguments]",SA="[object Array]",Np="[object Object]",Nue=Object.prototype,CA=Nue.hasOwnProperty;function Sue(e,t,n,s,a,i){var o=bA(e),l=bA(t),c=o?SA:jA(e),u=l?SA:jA(t);c=c==NA?Np:c,u=u==NA?Np:u;var d=c==Np,h=u==Np,f=c==u;if(f&&wA(e)){if(!wA(t))return!1;o=!0,d=!1}if(f&&!d)return i||(i=new G0),o||bue(e)?xue(e,t,n,s,a,i):yue(e,t,c,n,s,a,i);if(!(n&wue)){var m=d&&CA.call(e,"__wrapped__"),g=h&&CA.call(t,"__wrapped__");if(m||g){var p=m?e.value():e,v=g?t.value():t;return i||(i=new G0),a(p,v,n,s,i)}}return f?(i||(i=new G0),jue(e,t,n,s,a,i)):!1}var Cue=Sue,_ue=Cue,_A=Ti;function XF(e,t,n,s,a){return e===t?!0:e==null||t==null||!_A(e)&&!_A(t)?e!==e&&t!==t:_ue(e,t,n,s,XF,a)}var oC=XF,Pue=FF,Aue=oC,kue=1,Tue=2;function Eue(e,t,n,s){var a=n.length,i=a,o=!s;if(e==null)return!i;for(e=Object(e);a--;){var l=n[a];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<i;){l=n[a];var c=l[0],u=e[c],d=l[1];if(o&&l[2]){if(u===void 0&&!(c in e))return!1}else{var h=new Pue;if(s)var f=s(u,d,c,e,t,h);if(!(f===void 0?Aue(d,u,kue|Tue,s,h):f))return!1}}return!0}var Oue=Eue,Due=Vo;function Mue(e){return e===e&&!Due(e)}var JF=Mue,Iue=JF,$ue=hy;function Rue(e){for(var t=$ue(e),n=t.length;n--;){var s=t[n],a=e[s];t[n]=[s,a,Iue(a)]}return t}var Fue=Rue;function Lue(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var ZF=Lue,Bue=Oue,Vue=Fue,zue=ZF;function que(e){var t=Vue(e);return t.length==1&&t[0][2]?zue(t[0][0],t[0][1]):function(n){return n===e||Bue(n,e,t)}}var Uue=que;function Wue(e,t){return e!=null&&t in Object(e)}var Hue=Wue,Gue=iF,Kue=sC,Yue=zr,Que=aC,Xue=iC,Jue=Xx;function Zue(e,t,n){t=Gue(t,e);for(var s=-1,a=t.length,i=!1;++s<a;){var o=Jue(t[s]);if(!(i=e!=null&&n(e,o)))break;e=e[o]}return i||++s!=a?i:(a=e==null?0:e.length,!!a&&Xue(a)&&Que(o,a)&&(Yue(e)||Kue(e)))}var ede=Zue,tde=Hue,nde=ede;function rde(e,t){return e!=null&&nde(e,t,tde)}var sde=rde,ade=oC,ide=oF,ode=sde,lde=BS,cde=JF,ude=ZF,dde=Xx,hde=1,fde=2;function mde(e,t){return lde(e)&&cde(t)?ude(dde(e),t):function(n){var s=ide(n,e);return s===void 0&&s===t?ode(n,e):ade(t,s,hde|fde)}}var pde=mde;function gde(e){return e}var Id=gde;function vde(e){return function(t){return t==null?void 0:t[e]}}var xde=vde,yde=GS;function jde(e){return function(t){return yde(t,e)}}var bde=jde,wde=xde,Nde=bde,Sde=BS,Cde=Xx;function _de(e){return Sde(e)?wde(Cde(e)):Nde(e)}var Pde=_de,Ade=Uue,kde=pde,Tde=Id,Ede=zr,Ode=Pde;function Dde(e){return typeof e=="function"?e:e==null?Tde:typeof e=="object"?Ede(e)?kde(e[0],e[1]):Ade(e):Ode(e)}var Wa=Dde;function Mde(e,t,n,s){for(var a=e.length,i=n+(s?1:-1);s?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var eL=Mde;function Ide(e){return e!==e}var $de=Ide;function Rde(e,t,n){for(var s=n-1,a=e.length;++s<a;)if(e[s]===t)return s;return-1}var Fde=Rde,Lde=eL,Bde=$de,Vde=Fde;function zde(e,t,n){return t===t?Vde(e,t,n):Lde(e,Bde,n)}var qde=zde,Ude=qde;function Wde(e,t){var n=e==null?0:e.length;return!!n&&Ude(e,t,0)>-1}var Hde=Wde;function Gde(e,t,n){for(var s=-1,a=e==null?0:e.length;++s<a;)if(n(t,e[s]))return!0;return!1}var Kde=Gde;function Yde(){}var Qde=Yde,K0=YF,Xde=Qde,Jde=rC,Zde=1/0,ehe=K0&&1/Jde(new K0([,-0]))[1]==Zde?function(e){return new K0(e)}:Xde,the=ehe,nhe=LF,rhe=Hde,she=Kde,ahe=VF,ihe=the,ohe=rC,lhe=200;function che(e,t,n){var s=-1,a=rhe,i=e.length,o=!0,l=[],c=l;if(n)o=!1,a=she;else if(i>=lhe){var u=t?null:ihe(e);if(u)return ohe(u);o=!1,a=ahe,c=new nhe}else c=t?[]:l;e:for(;++s<i;){var d=e[s],h=t?t(d):d;if(d=n||d!==0?d:0,o&&h===h){for(var f=c.length;f--;)if(c[f]===h)continue e;t&&c.push(h),l.push(d)}else a(c,h,n)||(c!==l&&c.push(h),l.push(d))}return l}var uhe=che,dhe=Wa,hhe=uhe;function fhe(e,t){return e&&e.length?hhe(e,dhe(t)):[]}var mhe=fhe;const PA=Pt(mhe);function tL(e,t,n){return t===!0?PA(e,n):qe(t)?PA(e,t):e}function Fu(e){"@babel/helpers - typeof";return Fu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fu(e)}var phe=["ref"];function AA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Ya(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AA(Object(n),!0).forEach(function(s){fy(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AA(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function ghe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kA(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,rL(s.key),s)}}function vhe(e,t,n){return t&&kA(e.prototype,t),n&&kA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function xhe(e,t,n){return t=av(t),yhe(e,nL()?Reflect.construct(t,n||[],av(e).constructor):t.apply(e,n))}function yhe(e,t){if(t&&(Fu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jhe(e)}function jhe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nL=function(){return!!e})()}function av(e){return av=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},av(e)}function bhe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tw(e,t)}function Tw(e,t){return Tw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},Tw(e,t)}function fy(e,t,n){return t=rL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rL(e){var t=whe(e,"string");return Fu(t)=="symbol"?t:t+""}function whe(e,t){if(Fu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Fu(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nhe(e,t){if(e==null)return{};var n=She(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function She(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function Che(e){return e.value}function _he(e,t){if(F.isValidElement(e))return F.cloneElement(e,t);if(typeof e=="function")return F.createElement(e,t);t.ref;var n=Nhe(t,phe);return F.createElement(nC,n)}var TA=1,su=function(e){function t(){var n;ghe(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return n=xhe(this,t,[].concat(a)),fy(n,"lastBoundingBox",{width:-1,height:-1}),n}return bhe(t,e),vhe(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();return s.height=this.wrapperNode.offsetHeight,s.width=this.wrapperNode.offsetWidth,s}return null}},{key:"updateBBox",value:function(){var s=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>TA||Math.abs(a.height-this.lastBoundingBox.height)>TA)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,s&&s(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,s&&s(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Ya({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(s){var a=this.props,i=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,u=a.chartWidth,d=a.chartHeight,h,f;if(!s||(s.left===void 0||s.left===null)&&(s.right===void 0||s.right===null))if(o==="center"&&i==="vertical"){var m=this.getBBoxSnapshot();h={left:((u||0)-m.width)/2}}else h=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!s||(s.top===void 0||s.top===null)&&(s.bottom===void 0||s.bottom===null))if(l==="middle"){var g=this.getBBoxSnapshot();f={top:((d||0)-g.height)/2}}else f=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Ya(Ya({},h),f)}},{key:"render",value:function(){var s=this,a=this.props,i=a.content,o=a.width,l=a.height,c=a.wrapperStyle,u=a.payloadUniqBy,d=a.payload,h=Ya(Ya({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return F.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(m){s.wrapperNode=m}},_he(i,Ya(Ya({},this.props),{},{payload:tL(d,u,Che)})))}}],[{key:"getWithHeight",value:function(s,a){var i=Ya(Ya({},this.defaultProps),s.props),o=i.layout;return o==="vertical"&&je(s.props.height)?{height:s.props.height}:o==="horizontal"?{width:s.props.width||a}:null}}])}(b.PureComponent);fy(su,"displayName","Legend");fy(su,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var EA=Sm,Phe=sC,Ahe=zr,OA=EA?EA.isConcatSpreadable:void 0;function khe(e){return Ahe(e)||Phe(e)||!!(OA&&e&&e[OA])}var The=khe,Ehe=qF,Ohe=The;function sL(e,t,n,s,a){var i=-1,o=e.length;for(n||(n=Ohe),a||(a=[]);++i<o;){var l=e[i];t>0&&n(l)?t>1?sL(l,t-1,n,s,a):Ehe(a,l):s||(a[a.length]=l)}return a}var aL=sL;function Dhe(e){return function(t,n,s){for(var a=-1,i=Object(t),o=s(t),l=o.length;l--;){var c=o[e?l:++a];if(n(i[c],c,i)===!1)break}return t}}var Mhe=Dhe,Ihe=Mhe,$he=Ihe(),Rhe=$he,Fhe=Rhe,Lhe=hy;function Bhe(e,t){return e&&Fhe(e,t,Lhe)}var iL=Bhe,Vhe=Cm;function zhe(e,t){return function(n,s){if(n==null)return n;if(!Vhe(n))return e(n,s);for(var a=n.length,i=t?a:-1,o=Object(n);(t?i--:++i<a)&&s(o[i],i,o)!==!1;);return n}}var qhe=zhe,Uhe=iL,Whe=qhe,Hhe=Whe(Uhe),lC=Hhe,Ghe=lC,Khe=Cm;function Yhe(e,t){var n=-1,s=Khe(e)?Array(e.length):[];return Ghe(e,function(a,i,o){s[++n]=t(a,i,o)}),s}var oL=Yhe;function Qhe(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}var Xhe=Qhe,DA=Pd;function Jhe(e,t){if(e!==t){var n=e!==void 0,s=e===null,a=e===e,i=DA(e),o=t!==void 0,l=t===null,c=t===t,u=DA(t);if(!l&&!u&&!i&&e>t||i&&o&&c&&!l&&!u||s&&o&&c||!n&&c||!a)return 1;if(!s&&!i&&!u&&e<t||u&&n&&a&&!s&&!i||l&&n&&a||!o&&a||!c)return-1}return 0}var Zhe=Jhe,efe=Zhe;function tfe(e,t,n){for(var s=-1,a=e.criteria,i=t.criteria,o=a.length,l=n.length;++s<o;){var c=efe(a[s],i[s]);if(c){if(s>=l)return c;var u=n[s];return c*(u=="desc"?-1:1)}}return e.index-t.index}var nfe=tfe,Y0=HS,rfe=GS,sfe=Wa,afe=oL,ife=Xhe,ofe=HF,lfe=nfe,cfe=Id,ufe=zr;function dfe(e,t,n){t.length?t=Y0(t,function(i){return ufe(i)?function(o){return rfe(o,i.length===1?i[0]:i)}:i}):t=[cfe];var s=-1;t=Y0(t,ofe(sfe));var a=afe(e,function(i,o,l){var c=Y0(t,function(u){return u(i)});return{criteria:c,index:++s,value:i}});return ife(a,function(i,o){return lfe(i,o,n)})}var hfe=dfe;function ffe(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var mfe=ffe,pfe=mfe,MA=Math.max;function gfe(e,t,n){return t=MA(t===void 0?e.length-1:t,0),function(){for(var s=arguments,a=-1,i=MA(s.length-t,0),o=Array(i);++a<i;)o[a]=s[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=s[a];return l[t]=n(o),pfe(e,this,l)}}var vfe=gfe;function xfe(e){return function(){return e}}var yfe=xfe,jfe=sc,bfe=function(){try{var e=jfe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),lL=bfe,wfe=yfe,IA=lL,Nfe=Id,Sfe=IA?function(e,t){return IA(e,"toString",{configurable:!0,enumerable:!1,value:wfe(t),writable:!0})}:Nfe,Cfe=Sfe,_fe=800,Pfe=16,Afe=Date.now;function kfe(e){var t=0,n=0;return function(){var s=Afe(),a=Pfe-(s-n);if(n=s,a>0){if(++t>=_fe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Tfe=kfe,Efe=Cfe,Ofe=Tfe,Dfe=Ofe(Efe),Mfe=Dfe,Ife=Id,$fe=vfe,Rfe=Mfe;function Ffe(e,t){return Rfe($fe(e,t,Ife),e+"")}var Lfe=Ffe,Bfe=zS,Vfe=Cm,zfe=aC,qfe=Vo;function Ufe(e,t,n){if(!qfe(n))return!1;var s=typeof t;return(s=="number"?Vfe(n)&&zfe(t,n.length):s=="string"&&t in n)?Bfe(n[t],e):!1}var my=Ufe,Wfe=aL,Hfe=hfe,Gfe=Lfe,$A=my,Kfe=Gfe(function(e,t){if(e==null)return[];var n=t.length;return n>1&&$A(e,t[0],t[1])?t=[]:n>2&&$A(t[0],t[1],t[2])&&(t=[t[0]]),Hfe(e,Wfe(t,1),[])}),Yfe=Kfe;const cC=Pt(Yfe);function wf(e){"@babel/helpers - typeof";return wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wf(e)}function Ew(){return Ew=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ew.apply(this,arguments)}function Qfe(e,t){return eme(e)||Zfe(e,t)||Jfe(e,t)||Xfe()}function Xfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jfe(e,t){if(e){if(typeof e=="string")return RA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RA(e,t)}}function RA(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Zfe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function eme(e){if(Array.isArray(e))return e}function FA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Q0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FA(Object(n),!0).forEach(function(s){tme(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FA(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function tme(e,t,n){return t=nme(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nme(e){var t=rme(e,"string");return wf(t)=="symbol"?t:t+""}function rme(e,t){if(wf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(wf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sme(e){return Array.isArray(e)&&In(e[0])&&In(e[1])?e.join(" ~ "):e}var ame=function(t){var n=t.separator,s=n===void 0?" : ":n,a=t.contentStyle,i=a===void 0?{}:a,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,d=t.payload,h=t.formatter,f=t.itemSorter,m=t.wrapperClassName,g=t.labelClassName,p=t.label,v=t.labelFormatter,j=t.accessibilityLayer,x=j===void 0?!1:j,y=function(){if(d&&d.length){var A={padding:0,margin:0},B=(f?cC(d,f):d).map(function(L,H){if(L.type==="none")return null;var z=Q0({display:"block",paddingTop:4,paddingBottom:4,color:L.color||"#000"},l),$=L.formatter||h||sme,I=L.value,E=L.name,q=I,Y=E;if($&&q!=null&&Y!=null){var re=$(I,E,L,H,d);if(Array.isArray(re)){var oe=Qfe(re,2);q=oe[0],Y=oe[1]}else q=re}return F.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(H),style:z},In(Y)?F.createElement("span",{className:"recharts-tooltip-item-name"},Y):null,In(Y)?F.createElement("span",{className:"recharts-tooltip-item-separator"},s):null,F.createElement("span",{className:"recharts-tooltip-item-value"},q),F.createElement("span",{className:"recharts-tooltip-item-unit"},L.unit||""))});return F.createElement("ul",{className:"recharts-tooltip-item-list",style:A},B)}return null},N=Q0({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),w=Q0({margin:0},u),C=!Qe(p),S=C?p:"",_=Ze("recharts-default-tooltip",m),k=Ze("recharts-tooltip-label",g);C&&v&&d!==void 0&&d!==null&&(S=v(p,d));var T=x?{role:"status","aria-live":"assertive"}:{};return F.createElement("div",Ew({className:_,style:N},T),F.createElement("p",{className:k,style:w},F.isValidElement(S)?S:"".concat(S)),y())};function Nf(e){"@babel/helpers - typeof";return Nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nf(e)}function Sp(e,t,n){return t=ime(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ime(e){var t=ome(e,"string");return Nf(t)=="symbol"?t:t+""}function ome(e,t){if(Nf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Nf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sh="recharts-tooltip-wrapper",lme={visibility:"hidden"};function cme(e){var t=e.coordinate,n=e.translateX,s=e.translateY;return Ze(sh,Sp(Sp(Sp(Sp({},"".concat(sh,"-right"),je(n)&&t&&je(t.x)&&n>=t.x),"".concat(sh,"-left"),je(n)&&t&&je(t.x)&&n<t.x),"".concat(sh,"-bottom"),je(s)&&t&&je(t.y)&&s>=t.y),"".concat(sh,"-top"),je(s)&&t&&je(t.y)&&s<t.y))}function LA(e){var t=e.allowEscapeViewBox,n=e.coordinate,s=e.key,a=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(i&&je(i[s]))return i[s];var d=n[s]-l-a,h=n[s]+a;if(t[s])return o[s]?d:h;if(o[s]){var f=d,m=c[s];return f<m?Math.max(h,c[s]):Math.max(d,c[s])}var g=h+l,p=c[s]+u;return g>p?Math.max(d,c[s]):Math.max(h,c[s])}function ume(e){var t=e.translateX,n=e.translateY,s=e.useTranslate3d;return{transform:s?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function dme(e){var t=e.allowEscapeViewBox,n=e.coordinate,s=e.offsetTopLeft,a=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,d,h;return o.height>0&&o.width>0&&n?(d=LA({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:s,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=LA({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:s,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=ume({translateX:d,translateY:h,useTranslate3d:l})):u=lme,{cssProperties:u,cssClasses:cme({translateX:d,translateY:h,coordinate:n})}}function Lu(e){"@babel/helpers - typeof";return Lu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lu(e)}function BA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function VA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BA(Object(n),!0).forEach(function(s){Dw(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BA(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function hme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fme(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,uL(s.key),s)}}function mme(e,t,n){return t&&fme(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function pme(e,t,n){return t=iv(t),gme(e,cL()?Reflect.construct(t,n||[],iv(e).constructor):t.apply(e,n))}function gme(e,t){if(t&&(Lu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vme(e)}function vme(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cL=function(){return!!e})()}function iv(e){return iv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},iv(e)}function xme(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ow(e,t)}function Ow(e,t){return Ow=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},Ow(e,t)}function Dw(e,t,n){return t=uL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uL(e){var t=yme(e,"string");return Lu(t)=="symbol"?t:t+""}function yme(e,t){if(Lu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Lu(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zA=1,jme=function(e){function t(){var n;hme(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return n=pme(this,t,[].concat(a)),Dw(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Dw(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,d;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=n.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),n}return xme(t,e),mme(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();(Math.abs(s.width-this.state.lastBoundingBox.width)>zA||Math.abs(s.height-this.state.lastBoundingBox.height)>zA)&&this.setState({lastBoundingBox:{width:s.width,height:s.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var s,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((s=this.props.coordinate)===null||s===void 0?void 0:s.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var s=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.children,d=a.coordinate,h=a.hasPayload,f=a.isAnimationActive,m=a.offset,g=a.position,p=a.reverseDirection,v=a.useTranslate3d,j=a.viewBox,x=a.wrapperStyle,y=dme({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:m,position:g,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:v,viewBox:j}),N=y.cssClasses,w=y.cssProperties,C=VA(VA({transition:f&&i?"transform ".concat(l,"ms ").concat(c):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&h?"visible":"hidden",position:"absolute",top:0,left:0},x);return F.createElement("div",{tabIndex:-1,className:N,style:C,ref:function(_){s.wrapperNode=_}},u)}}])}(b.PureComponent),bme=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},ea={isSsr:bme(),get:function(t){return ea[t]},set:function(t,n){if(typeof t=="string")ea[t]=n;else{var s=Object.keys(t);s&&s.length&&s.forEach(function(a){ea[a]=t[a]})}}};function Bu(e){"@babel/helpers - typeof";return Bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bu(e)}function qA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function UA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qA(Object(n),!0).forEach(function(s){uC(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qA(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function wme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nme(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,hL(s.key),s)}}function Sme(e,t,n){return t&&Nme(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Cme(e,t,n){return t=ov(t),_me(e,dL()?Reflect.construct(t,n||[],ov(e).constructor):t.apply(e,n))}function _me(e,t){if(t&&(Bu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pme(e)}function Pme(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dL=function(){return!!e})()}function ov(e){return ov=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ov(e)}function Ame(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mw(e,t)}function Mw(e,t){return Mw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},Mw(e,t)}function uC(e,t,n){return t=hL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hL(e){var t=kme(e,"string");return Bu(t)=="symbol"?t:t+""}function kme(e,t){if(Bu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Bu(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tme(e){return e.dataKey}function Eme(e,t){return F.isValidElement(e)?F.cloneElement(e,t):typeof e=="function"?F.createElement(e,t):F.createElement(ame,t)}var qn=function(e){function t(){return wme(this,t),Cme(this,t,arguments)}return Ame(t,e),Sme(t,[{key:"render",value:function(){var s=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.content,d=a.coordinate,h=a.filterNull,f=a.isAnimationActive,m=a.offset,g=a.payload,p=a.payloadUniqBy,v=a.position,j=a.reverseDirection,x=a.useTranslate3d,y=a.viewBox,N=a.wrapperStyle,w=g??[];h&&w.length&&(w=tL(g.filter(function(S){return S.value!=null&&(S.hide!==!0||s.props.includeHidden)}),p,Tme));var C=w.length>0;return F.createElement(jme,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:f,active:i,coordinate:d,hasPayload:C,offset:m,position:v,reverseDirection:j,useTranslate3d:x,viewBox:y,wrapperStyle:N},Eme(u,UA(UA({},this.props),{},{payload:w})))}}])}(b.PureComponent);uC(qn,"displayName","Tooltip");uC(qn,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!ea.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Ome=Ua,Dme=function(){return Ome.Date.now()},Mme=Dme,Ime=/\s/;function $me(e){for(var t=e.length;t--&&Ime.test(e.charAt(t)););return t}var Rme=$me,Fme=Rme,Lme=/^\s+/;function Bme(e){return e&&e.slice(0,Fme(e)+1).replace(Lme,"")}var Vme=Bme,zme=Vme,WA=Vo,qme=Pd,HA=NaN,Ume=/^[-+]0x[0-9a-f]+$/i,Wme=/^0b[01]+$/i,Hme=/^0o[0-7]+$/i,Gme=parseInt;function Kme(e){if(typeof e=="number")return e;if(qme(e))return HA;if(WA(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=WA(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=zme(e);var n=Wme.test(e);return n||Hme.test(e)?Gme(e.slice(2),n?2:8):Ume.test(e)?HA:+e}var fL=Kme,Yme=Vo,X0=Mme,GA=fL,Qme="Expected a function",Xme=Math.max,Jme=Math.min;function Zme(e,t,n){var s,a,i,o,l,c,u=0,d=!1,h=!1,f=!0;if(typeof e!="function")throw new TypeError(Qme);t=GA(t)||0,Yme(n)&&(d=!!n.leading,h="maxWait"in n,i=h?Xme(GA(n.maxWait)||0,t):i,f="trailing"in n?!!n.trailing:f);function m(C){var S=s,_=a;return s=a=void 0,u=C,o=e.apply(_,S),o}function g(C){return u=C,l=setTimeout(j,t),d?m(C):o}function p(C){var S=C-c,_=C-u,k=t-S;return h?Jme(k,i-_):k}function v(C){var S=C-c,_=C-u;return c===void 0||S>=t||S<0||h&&_>=i}function j(){var C=X0();if(v(C))return x(C);l=setTimeout(j,p(C))}function x(C){return l=void 0,f&&s?m(C):(s=a=void 0,o)}function y(){l!==void 0&&clearTimeout(l),u=0,s=c=a=l=void 0}function N(){return l===void 0?o:x(X0())}function w(){var C=X0(),S=v(C);if(s=arguments,a=this,c=C,S){if(l===void 0)return g(c);if(h)return clearTimeout(l),l=setTimeout(j,t),m(c)}return l===void 0&&(l=setTimeout(j,t)),o}return w.cancel=y,w.flush=N,w}var epe=Zme,tpe=epe,npe=Vo,rpe="Expected a function";function spe(e,t,n){var s=!0,a=!0;if(typeof e!="function")throw new TypeError(rpe);return npe(n)&&(s="leading"in n?!!n.leading:s,a="trailing"in n?!!n.trailing:a),tpe(e,t,{leading:s,maxWait:t,trailing:a})}var ape=spe;const mL=Pt(ape);function Sf(e){"@babel/helpers - typeof";return Sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sf(e)}function KA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Cp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KA(Object(n),!0).forEach(function(s){ipe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KA(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function ipe(e,t,n){return t=ope(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ope(e){var t=lpe(e,"string");return Sf(t)=="symbol"?t:t+""}function lpe(e,t){if(Sf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Sf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cpe(e,t){return fpe(e)||hpe(e,t)||dpe(e,t)||upe()}function upe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dpe(e,t){if(e){if(typeof e=="string")return YA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YA(e,t)}}function YA(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function hpe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function fpe(e){if(Array.isArray(e))return e}var Ni=b.forwardRef(function(e,t){var n=e.aspect,s=e.initialDimension,a=s===void 0?{width:-1,height:-1}:s,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,d=u===void 0?0:u,h=e.minHeight,f=e.maxHeight,m=e.children,g=e.debounce,p=g===void 0?0:g,v=e.id,j=e.className,x=e.onResize,y=e.style,N=y===void 0?{}:y,w=b.useRef(null),C=b.useRef();C.current=x,b.useImperativeHandle(t,function(){return Object.defineProperty(w.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),w.current},configurable:!0})});var S=b.useState({containerWidth:a.width,containerHeight:a.height}),_=cpe(S,2),k=_[0],T=_[1],P=b.useCallback(function(B,L){T(function(H){var z=Math.round(B),$=Math.round(L);return H.containerWidth===z&&H.containerHeight===$?H:{containerWidth:z,containerHeight:$}})},[]);b.useEffect(function(){var B=function(E){var q,Y=E[0].contentRect,re=Y.width,oe=Y.height;P(re,oe),(q=C.current)===null||q===void 0||q.call(C,re,oe)};p>0&&(B=mL(B,p,{trailing:!0,leading:!1}));var L=new ResizeObserver(B),H=w.current.getBoundingClientRect(),z=H.width,$=H.height;return P(z,$),L.observe(w.current),function(){L.disconnect()}},[P,p]);var A=b.useMemo(function(){var B=k.containerWidth,L=k.containerHeight;if(B<0||L<0)return null;Zs(dl(o)||dl(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Zs(!n||n>0,"The aspect(%s) must be greater than zero.",n);var H=dl(o)?B:o,z=dl(c)?L:c;n&&n>0&&(H?z=H/n:z&&(H=z*n),f&&z>f&&(z=f)),Zs(H>0||z>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,H,z,o,c,d,h,n);var $=!Array.isArray(m)&&hi(m.type).endsWith("Chart");return F.Children.map(m,function(I){return F.isValidElement(I)?b.cloneElement(I,Cp({width:H,height:z},$?{style:Cp({height:"100%",width:"100%",maxHeight:z,maxWidth:H},I.props.style)}:{})):I})},[n,m,c,f,h,d,k,o]);return F.createElement("div",{id:v?"".concat(v):void 0,className:Ze("recharts-responsive-container",j),style:Cp(Cp({},N),{},{width:o,height:c,minWidth:d,minHeight:h,maxHeight:f}),ref:w},A)}),$d=function(t){return null};$d.displayName="Cell";function Cf(e){"@babel/helpers - typeof";return Cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cf(e)}function QA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Iw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QA(Object(n),!0).forEach(function(s){mpe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QA(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function mpe(e,t,n){return t=ppe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ppe(e){var t=gpe(e,"string");return Cf(t)=="symbol"?t:t+""}function gpe(e,t){if(Cf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Cf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Sc={widthCache:{},cacheCount:0},vpe=2e3,xpe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},XA="recharts_measurement_span";function ype(e){var t=Iw({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var Fh=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||ea.isSsr)return{width:0,height:0};var s=ype(n),a=JSON.stringify({text:t,copyStyle:s});if(Sc.widthCache[a])return Sc.widthCache[a];try{var i=document.getElementById(XA);i||(i=document.createElement("span"),i.setAttribute("id",XA),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=Iw(Iw({},xpe),s);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return Sc.widthCache[a]=c,++Sc.cacheCount>vpe&&(Sc.cacheCount=0,Sc.widthCache={}),c}catch{return{width:0,height:0}}},jpe=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function _f(e){"@babel/helpers - typeof";return _f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_f(e)}function lv(e,t){return Spe(e)||Npe(e,t)||wpe(e,t)||bpe()}function bpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wpe(e,t){if(e){if(typeof e=="string")return JA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JA(e,t)}}function JA(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Npe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(s=i.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Spe(e){if(Array.isArray(e))return e}function Cpe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZA(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Ppe(s.key),s)}}function _pe(e,t,n){return t&&ZA(e.prototype,t),n&&ZA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ppe(e){var t=Ape(e,"string");return _f(t)=="symbol"?t:t+""}function Ape(e,t){if(_f(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(_f(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ek=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,tk=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,kpe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Tpe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,pL={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Epe=Object.keys(pL),zc="NaN";function Ope(e,t){return e*pL[t]}var _p=function(){function e(t,n){Cpe(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!kpe.test(n)&&(this.num=NaN,this.unit=""),Epe.includes(n)&&(this.num=Ope(t,n),this.unit="px")}return _pe(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var s,a=(s=Tpe.exec(n))!==null&&s!==void 0?s:[],i=lv(a,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])}();function gL(e){if(e.includes(zc))return zc;for(var t=e;t.includes("*")||t.includes("/");){var n,s=(n=ek.exec(t))!==null&&n!==void 0?n:[],a=lv(s,4),i=a[1],o=a[2],l=a[3],c=_p.parse(i??""),u=_p.parse(l??""),d=o==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return zc;t=t.replace(ek,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,f=(h=tk.exec(t))!==null&&h!==void 0?h:[],m=lv(f,4),g=m[1],p=m[2],v=m[3],j=_p.parse(g??""),x=_p.parse(v??""),y=p==="+"?j.add(x):j.subtract(x);if(y.isNaN())return zc;t=t.replace(tk,y.toString())}return t}var nk=/\(([^()]*)\)/;function Dpe(e){for(var t=e;t.includes("(");){var n=nk.exec(t),s=lv(n,2),a=s[1];t=t.replace(nk,gL(a))}return t}function Mpe(e){var t=e.replace(/\s+/g,"");return t=Dpe(t),t=gL(t),t}function Ipe(e){try{return Mpe(e)}catch{return zc}}function J0(e){var t=Ipe(e.slice(5,-1));return t===zc?"":t}var $pe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Rpe=["dx","dy","angle","className","breakAll"];function $w(){return $w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},$w.apply(this,arguments)}function rk(e,t){if(e==null)return{};var n=Fpe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Fpe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function sk(e,t){return zpe(e)||Vpe(e,t)||Bpe(e,t)||Lpe()}function Lpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bpe(e,t){if(e){if(typeof e=="string")return ak(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ak(e,t)}}function ak(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Vpe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(s=i.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function zpe(e){if(Array.isArray(e))return e}var vL=/[ \f\n\r\t\v\u2028\u2029]+/,xL=function(t){var n=t.children,s=t.breakAll,a=t.style;try{var i=[];Qe(n)||(s?i=n.toString().split(""):i=n.toString().split(vL));var o=i.map(function(c){return{word:c,width:Fh(c,a).width}}),l=s?0:Fh(" ",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},qpe=function(t,n,s,a,i){var o=t.maxLines,l=t.children,c=t.style,u=t.breakAll,d=je(o),h=l,f=function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return H.reduce(function(z,$){var I=$.word,E=$.width,q=z[z.length-1];if(q&&(a==null||i||q.width+E+s<Number(a)))q.words.push(I),q.width+=E+s;else{var Y={words:[I],width:E};z.push(Y)}return z},[])},m=f(n),g=function(H){return H.reduce(function(z,$){return z.width>$.width?z:$})};if(!d)return m;for(var p="…",v=function(H){var z=h.slice(0,H),$=xL({breakAll:u,style:c,children:z+p}).wordsWithComputedWidth,I=f($),E=I.length>o||g(I).width>Number(a);return[E,I]},j=0,x=h.length-1,y=0,N;j<=x&&y<=h.length-1;){var w=Math.floor((j+x)/2),C=w-1,S=v(C),_=sk(S,2),k=_[0],T=_[1],P=v(w),A=sk(P,1),B=A[0];if(!k&&!B&&(j=w+1),k&&B&&(x=w-1),!k&&B){N=T;break}y++}return N||m},ik=function(t){var n=Qe(t)?[]:t.toString().split(vL);return[{words:n}]},Upe=function(t){var n=t.width,s=t.scaleToFit,a=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((n||s)&&!ea.isSsr){var c,u,d=xL({breakAll:o,children:a,style:i});if(d){var h=d.wordsWithComputedWidth,f=d.spaceWidth;c=h,u=f}else return ik(a);return qpe({breakAll:o,children:a,maxLines:l,style:i},c,u,n,s)}return ik(a)},ok="#808080",Wl=function(t){var n=t.x,s=n===void 0?0:n,a=t.y,i=a===void 0?0:a,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,d=t.scaleToFit,h=d===void 0?!1:d,f=t.textAnchor,m=f===void 0?"start":f,g=t.verticalAnchor,p=g===void 0?"end":g,v=t.fill,j=v===void 0?ok:v,x=rk(t,$pe),y=b.useMemo(function(){return Upe({breakAll:x.breakAll,children:x.children,maxLines:x.maxLines,scaleToFit:h,style:x.style,width:x.width})},[x.breakAll,x.children,x.maxLines,h,x.style,x.width]),N=x.dx,w=x.dy,C=x.angle,S=x.className,_=x.breakAll,k=rk(x,Rpe);if(!In(s)||!In(i))return null;var T=s+(je(N)?N:0),P=i+(je(w)?w:0),A;switch(p){case"start":A=J0("calc(".concat(u,")"));break;case"middle":A=J0("calc(".concat((y.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:A=J0("calc(".concat(y.length-1," * -").concat(l,")"));break}var B=[];if(h){var L=y[0].width,H=x.width;B.push("scale(".concat((je(H)?H/L:1)/L,")"))}return C&&B.push("rotate(".concat(C,", ").concat(T,", ").concat(P,")")),B.length&&(k.transform=B.join(" ")),F.createElement("text",$w({},Re(k,!0),{x:T,y:P,className:Ze("recharts-text",S),textAnchor:m,fill:j.includes("url")?ok:j}),y.map(function(z,$){var I=z.words.join(_?"":" ");return F.createElement("tspan",{x:T,dy:$===0?A:l,key:"".concat(I,"-").concat($)},I)}))};function No(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Wpe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function dC(e){let t,n,s;e.length!==2?(t=No,n=(l,c)=>No(e(l),c),s=(l,c)=>e(l)-c):(t=e===No||e===Wpe?e:Hpe,n=e,s=e);function a(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const h=u+d>>>1;n(l[h],c)<0?u=h+1:d=h}while(u<d)}return u}function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const h=u+d>>>1;n(l[h],c)<=0?u=h+1:d=h}while(u<d)}return u}function o(l,c,u=0,d=l.length){const h=a(l,c,u,d-1);return h>u&&s(l[h-1],c)>-s(l[h],c)?h-1:h}return{left:a,center:o,right:i}}function Hpe(){return 0}function yL(e){return e===null?NaN:+e}function*Gpe(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const Kpe=dC(No),_m=Kpe.right;dC(yL).center;class lk extends Map{constructor(t,n=Xpe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[s,a]of t)this.set(s,a)}get(t){return super.get(ck(this,t))}has(t){return super.has(ck(this,t))}set(t,n){return super.set(Ype(this,t),n)}delete(t){return super.delete(Qpe(this,t))}}function ck({_intern:e,_key:t},n){const s=t(n);return e.has(s)?e.get(s):n}function Ype({_intern:e,_key:t},n){const s=t(n);return e.has(s)?e.get(s):(e.set(s,n),n)}function Qpe({_intern:e,_key:t},n){const s=t(n);return e.has(s)&&(n=e.get(s),e.delete(s)),n}function Xpe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Jpe(e=No){if(e===No)return jL;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const s=e(t,n);return s||s===0?s:(e(n,n)===0)-(e(t,t)===0)}}function jL(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Zpe=Math.sqrt(50),ege=Math.sqrt(10),tge=Math.sqrt(2);function cv(e,t,n){const s=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(s)),i=s/Math.pow(10,a),o=i>=Zpe?10:i>=ege?5:i>=tge?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=n&&n<2?cv(e,t,n*2):[l,c,u]}function Rw(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const s=t<e,[a,i,o]=s?cv(t,e,n):cv(e,t,n);if(!(i>=a))return[];const l=i-a+1,c=new Array(l);if(s)if(o<0)for(let u=0;u<l;++u)c[u]=(i-u)/-o;else for(let u=0;u<l;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function Fw(e,t,n){return t=+t,e=+e,n=+n,cv(e,t,n)[2]}function Lw(e,t,n){t=+t,e=+e,n=+n;const s=t<e,a=s?Fw(t,e,n):Fw(e,t,n);return(s?-1:1)*(a<0?1/-a:a)}function uk(e,t){let n;for(const s of e)s!=null&&(n<s||n===void 0&&s>=s)&&(n=s);return n}function dk(e,t){let n;for(const s of e)s!=null&&(n>s||n===void 0&&s>=s)&&(n=s);return n}function bL(e,t,n=0,s=1/0,a){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),s=Math.floor(Math.min(e.length-1,s)),!(n<=t&&t<=s))return e;for(a=a===void 0?jL:Jpe(a);s>n;){if(s-n>600){const c=s-n+1,u=t-n+1,d=Math.log(c),h=.5*Math.exp(2*d/3),f=.5*Math.sqrt(d*h*(c-h)/c)*(u-c/2<0?-1:1),m=Math.max(n,Math.floor(t-u*h/c+f)),g=Math.min(s,Math.floor(t+(c-u)*h/c+f));bL(e,t,m,g,a)}const i=e[t];let o=n,l=s;for(ah(e,n,t),a(e[s],i)>0&&ah(e,n,s);o<l;){for(ah(e,o,l),++o,--l;a(e[o],i)<0;)++o;for(;a(e[l],i)>0;)--l}a(e[n],i)===0?ah(e,n,l):(++l,ah(e,l,s)),l<=t&&(n=l+1),t<=l&&(s=l-1)}return e}function ah(e,t,n){const s=e[t];e[t]=e[n],e[n]=s}function nge(e,t,n){if(e=Float64Array.from(Gpe(e)),!(!(s=e.length)||isNaN(t=+t))){if(t<=0||s<2)return dk(e);if(t>=1)return uk(e);var s,a=(s-1)*t,i=Math.floor(a),o=uk(bL(e,i).subarray(0,i+1)),l=dk(e.subarray(i+1));return o+(l-o)*(a-i)}}function rge(e,t,n=yL){if(!(!(s=e.length)||isNaN(t=+t))){if(t<=0||s<2)return+n(e[0],0,e);if(t>=1)return+n(e[s-1],s-1,e);var s,a=(s-1)*t,i=Math.floor(a),o=+n(e[i],i,e),l=+n(e[i+1],i+1,e);return o+(l-o)*(a-i)}}function sge(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var s=-1,a=Math.max(0,Math.ceil((t-e)/n))|0,i=new Array(a);++s<a;)i[s]=e+s*n;return i}function Es(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ei(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Bw=Symbol("implicit");function hC(){var e=new lk,t=[],n=[],s=Bw;function a(i){let o=e.get(i);if(o===void 0){if(s!==Bw)return s;e.set(i,o=t.push(i)-1)}return n[o%n.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new lk;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(n=Array.from(i),a):n.slice()},a.unknown=function(i){return arguments.length?(s=i,a):s},a.copy=function(){return hC(t,n).unknown(s)},Es.apply(a,arguments),a}function Pf(){var e=hC().unknown(void 0),t=e.domain,n=e.range,s=0,a=1,i,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function h(){var f=t().length,m=a<s,g=m?a:s,p=m?s:a;i=(p-g)/Math.max(1,f-c+u*2),l&&(i=Math.floor(i)),g+=(p-g-i*(f-c))*d,o=i*(1-c),l&&(g=Math.round(g),o=Math.round(o));var v=sge(f).map(function(j){return g+i*j});return n(m?v.reverse():v)}return e.domain=function(f){return arguments.length?(t(f),h()):t()},e.range=function(f){return arguments.length?([s,a]=f,s=+s,a=+a,h()):[s,a]},e.rangeRound=function(f){return[s,a]=f,s=+s,a=+a,l=!0,h()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(l=!!f,h()):l},e.padding=function(f){return arguments.length?(c=Math.min(1,u=+f),h()):c},e.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),h()):c},e.paddingOuter=function(f){return arguments.length?(u=+f,h()):u},e.align=function(f){return arguments.length?(d=Math.max(0,Math.min(1,f)),h()):d},e.copy=function(){return Pf(t(),[s,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},Es.apply(h(),arguments)}function wL(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return wL(t())},e}function Lh(){return wL(Pf.apply(null,arguments).paddingInner(1))}function fC(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function NL(e,t){var n=Object.create(e.prototype);for(var s in t)n[s]=t[s];return n}function Pm(){}var Af=.7,uv=1/Af,au="\\s*([+-]?\\d+)\\s*",kf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",$a="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",age=/^#([0-9a-f]{3,8})$/,ige=new RegExp(`^rgb\\(${au},${au},${au}\\)$`),oge=new RegExp(`^rgb\\(${$a},${$a},${$a}\\)$`),lge=new RegExp(`^rgba\\(${au},${au},${au},${kf}\\)$`),cge=new RegExp(`^rgba\\(${$a},${$a},${$a},${kf}\\)$`),uge=new RegExp(`^hsl\\(${kf},${$a},${$a}\\)$`),dge=new RegExp(`^hsla\\(${kf},${$a},${$a},${kf}\\)$`),hk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};fC(Pm,Tf,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:fk,formatHex:fk,formatHex8:hge,formatHsl:fge,formatRgb:mk,toString:mk});function fk(){return this.rgb().formatHex()}function hge(){return this.rgb().formatHex8()}function fge(){return SL(this).formatHsl()}function mk(){return this.rgb().formatRgb()}function Tf(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=age.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?pk(t):n===3?new Rr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Pp(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Pp(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ige.exec(e))?new Rr(t[1],t[2],t[3],1):(t=oge.exec(e))?new Rr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=lge.exec(e))?Pp(t[1],t[2],t[3],t[4]):(t=cge.exec(e))?Pp(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=uge.exec(e))?xk(t[1],t[2]/100,t[3]/100,1):(t=dge.exec(e))?xk(t[1],t[2]/100,t[3]/100,t[4]):hk.hasOwnProperty(e)?pk(hk[e]):e==="transparent"?new Rr(NaN,NaN,NaN,0):null}function pk(e){return new Rr(e>>16&255,e>>8&255,e&255,1)}function Pp(e,t,n,s){return s<=0&&(e=t=n=NaN),new Rr(e,t,n,s)}function mge(e){return e instanceof Pm||(e=Tf(e)),e?(e=e.rgb(),new Rr(e.r,e.g,e.b,e.opacity)):new Rr}function Vw(e,t,n,s){return arguments.length===1?mge(e):new Rr(e,t,n,s??1)}function Rr(e,t,n,s){this.r=+e,this.g=+t,this.b=+n,this.opacity=+s}fC(Rr,Vw,NL(Pm,{brighter(e){return e=e==null?uv:Math.pow(uv,e),new Rr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Af:Math.pow(Af,e),new Rr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Rr(Pl(this.r),Pl(this.g),Pl(this.b),dv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:gk,formatHex:gk,formatHex8:pge,formatRgb:vk,toString:vk}));function gk(){return`#${hl(this.r)}${hl(this.g)}${hl(this.b)}`}function pge(){return`#${hl(this.r)}${hl(this.g)}${hl(this.b)}${hl((isNaN(this.opacity)?1:this.opacity)*255)}`}function vk(){const e=dv(this.opacity);return`${e===1?"rgb(":"rgba("}${Pl(this.r)}, ${Pl(this.g)}, ${Pl(this.b)}${e===1?")":`, ${e})`}`}function dv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Pl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function hl(e){return e=Pl(e),(e<16?"0":"")+e.toString(16)}function xk(e,t,n,s){return s<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ys(e,t,n,s)}function SL(e){if(e instanceof Ys)return new Ys(e.h,e.s,e.l,e.opacity);if(e instanceof Pm||(e=Tf(e)),!e)return new Ys;if(e instanceof Ys)return e;e=e.rgb();var t=e.r/255,n=e.g/255,s=e.b/255,a=Math.min(t,n,s),i=Math.max(t,n,s),o=NaN,l=i-a,c=(i+a)/2;return l?(t===i?o=(n-s)/l+(n<s)*6:n===i?o=(s-t)/l+2:o=(t-n)/l+4,l/=c<.5?i+a:2-i-a,o*=60):l=c>0&&c<1?0:o,new Ys(o,l,c,e.opacity)}function gge(e,t,n,s){return arguments.length===1?SL(e):new Ys(e,t,n,s??1)}function Ys(e,t,n,s){this.h=+e,this.s=+t,this.l=+n,this.opacity=+s}fC(Ys,gge,NL(Pm,{brighter(e){return e=e==null?uv:Math.pow(uv,e),new Ys(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Af:Math.pow(Af,e),new Ys(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*t,a=2*n-s;return new Rr(Z0(e>=240?e-240:e+120,a,s),Z0(e,a,s),Z0(e<120?e+240:e-120,a,s),this.opacity)},clamp(){return new Ys(yk(this.h),Ap(this.s),Ap(this.l),dv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=dv(this.opacity);return`${e===1?"hsl(":"hsla("}${yk(this.h)}, ${Ap(this.s)*100}%, ${Ap(this.l)*100}%${e===1?")":`, ${e})`}`}}));function yk(e){return e=(e||0)%360,e<0?e+360:e}function Ap(e){return Math.max(0,Math.min(1,e||0))}function Z0(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const mC=e=>()=>e;function vge(e,t){return function(n){return e+n*t}}function xge(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(s){return Math.pow(e+s*t,n)}}function yge(e){return(e=+e)==1?CL:function(t,n){return n-t?xge(t,n,e):mC(isNaN(t)?n:t)}}function CL(e,t){var n=t-e;return n?vge(e,n):mC(isNaN(e)?t:e)}const jk=function e(t){var n=yge(t);function s(a,i){var o=n((a=Vw(a)).r,(i=Vw(i)).r),l=n(a.g,i.g),c=n(a.b,i.b),u=CL(a.opacity,i.opacity);return function(d){return a.r=o(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return s.gamma=e,s}(1);function jge(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,s=t.slice(),a;return function(i){for(a=0;a<n;++a)s[a]=e[a]*(1-i)+t[a]*i;return s}}function bge(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function wge(e,t){var n=t?t.length:0,s=e?Math.min(n,e.length):0,a=new Array(s),i=new Array(n),o;for(o=0;o<s;++o)a[o]=Rd(e[o],t[o]);for(;o<n;++o)i[o]=t[o];return function(l){for(o=0;o<s;++o)i[o]=a[o](l);return i}}function Nge(e,t){var n=new Date;return e=+e,t=+t,function(s){return n.setTime(e*(1-s)+t*s),n}}function hv(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Sge(e,t){var n={},s={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=Rd(e[a],t[a]):s[a]=t[a];return function(i){for(a in n)s[a]=n[a](i);return s}}var zw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ej=new RegExp(zw.source,"g");function Cge(e){return function(){return e}}function _ge(e){return function(t){return e(t)+""}}function Pge(e,t){var n=zw.lastIndex=ej.lastIndex=0,s,a,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(s=zw.exec(e))&&(a=ej.exec(t));)(i=a.index)>n&&(i=t.slice(n,i),l[o]?l[o]+=i:l[++o]=i),(s=s[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:hv(s,a)})),n=ej.lastIndex;return n<t.length&&(i=t.slice(n),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?_ge(c[0].x):Cge(t):(t=c.length,function(u){for(var d=0,h;d<t;++d)l[(h=c[d]).i]=h.x(u);return l.join("")})}function Rd(e,t){var n=typeof t,s;return t==null||n==="boolean"?mC(t):(n==="number"?hv:n==="string"?(s=Tf(t))?(t=s,jk):Pge:t instanceof Tf?jk:t instanceof Date?Nge:bge(t)?jge:Array.isArray(t)?wge:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Sge:hv)(e,t)}function pC(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Age(e,t){t===void 0&&(t=e,e=Rd);for(var n=0,s=t.length-1,a=t[0],i=new Array(s<0?0:s);n<s;)i[n]=e(a,a=t[++n]);return function(o){var l=Math.max(0,Math.min(s-1,Math.floor(o*=s)));return i[l](o-l)}}function kge(e){return function(){return e}}function fv(e){return+e}var bk=[0,1];function br(e){return e}function qw(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:kge(isNaN(t)?NaN:.5)}function Tge(e,t){var n;return e>t&&(n=e,e=t,t=n),function(s){return Math.max(e,Math.min(t,s))}}function Ege(e,t,n){var s=e[0],a=e[1],i=t[0],o=t[1];return a<s?(s=qw(a,s),i=n(o,i)):(s=qw(s,a),i=n(i,o)),function(l){return i(s(l))}}function Oge(e,t,n){var s=Math.min(e.length,t.length)-1,a=new Array(s),i=new Array(s),o=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<s;)a[o]=qw(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(l){var c=_m(e,l,1,s)-1;return i[c](a[c](l))}}function Am(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function py(){var e=bk,t=bk,n=Rd,s,a,i,o=br,l,c,u;function d(){var f=Math.min(e.length,t.length);return o!==br&&(o=Tge(e[0],e[f-1])),l=f>2?Oge:Ege,c=u=null,h}function h(f){return f==null||isNaN(f=+f)?i:(c||(c=l(e.map(s),t,n)))(s(o(f)))}return h.invert=function(f){return o(a((u||(u=l(t,e.map(s),hv)))(f)))},h.domain=function(f){return arguments.length?(e=Array.from(f,fv),d()):e.slice()},h.range=function(f){return arguments.length?(t=Array.from(f),d()):t.slice()},h.rangeRound=function(f){return t=Array.from(f),n=pC,d()},h.clamp=function(f){return arguments.length?(o=f?!0:br,d()):o!==br},h.interpolate=function(f){return arguments.length?(n=f,d()):n},h.unknown=function(f){return arguments.length?(i=f,h):i},function(f,m){return s=f,a=m,d()}}function gC(){return py()(br,br)}function Dge(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function mv(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,s=e.slice(0,n);return[s.length>1?s[0]+s.slice(2):s,+e.slice(n+1)]}function Vu(e){return e=mv(Math.abs(e)),e?e[1]:NaN}function Mge(e,t){return function(n,s){for(var a=n.length,i=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>s&&(l=Math.max(1,s-c)),i.push(n.substring(a-=l,a+l)),!((c+=l+1)>s));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function Ige(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var $ge=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ef(e){if(!(t=$ge.exec(e)))throw new Error("invalid format: "+e);var t;return new vC({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ef.prototype=vC.prototype;function vC(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}vC.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Rge(e){e:for(var t=e.length,n=1,s=-1,a;n<t;++n)switch(e[n]){case".":s=a=n;break;case"0":s===0&&(s=n),a=n;break;default:if(!+e[n])break e;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(a+1):e}var _L;function Fge(e,t){var n=mv(e,t);if(!n)return e+"";var s=n[0],a=n[1],i=a-(_L=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=s.length;return i===o?s:i>o?s+new Array(i-o+1).join("0"):i>0?s.slice(0,i)+"."+s.slice(i):"0."+new Array(1-i).join("0")+mv(e,Math.max(0,t+i-1))[0]}function wk(e,t){var n=mv(e,t);if(!n)return e+"";var s=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+s:s.length>a+1?s.slice(0,a+1)+"."+s.slice(a+1):s+new Array(a-s.length+2).join("0")}const Nk={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Dge,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>wk(e*100,t),r:wk,s:Fge,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Sk(e){return e}var Ck=Array.prototype.map,_k=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Lge(e){var t=e.grouping===void 0||e.thousands===void 0?Sk:Mge(Ck.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?Sk:Ige(Ck.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(h){h=Ef(h);var f=h.fill,m=h.align,g=h.sign,p=h.symbol,v=h.zero,j=h.width,x=h.comma,y=h.precision,N=h.trim,w=h.type;w==="n"?(x=!0,w="g"):Nk[w]||(y===void 0&&(y=12),N=!0,w="g"),(v||f==="0"&&m==="=")&&(v=!0,f="0",m="=");var C=p==="$"?n:p==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",S=p==="$"?s:/[%p]/.test(w)?o:"",_=Nk[w],k=/[defgprs%]/.test(w);y=y===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function T(P){var A=C,B=S,L,H,z;if(w==="c")B=_(P)+B,P="";else{P=+P;var $=P<0||1/P<0;if(P=isNaN(P)?c:_(Math.abs(P),y),N&&(P=Rge(P)),$&&+P==0&&g!=="+"&&($=!1),A=($?g==="("?g:l:g==="-"||g==="("?"":g)+A,B=(w==="s"?_k[8+_L/3]:"")+B+($&&g==="("?")":""),k){for(L=-1,H=P.length;++L<H;)if(z=P.charCodeAt(L),48>z||z>57){B=(z===46?a+P.slice(L+1):P.slice(L))+B,P=P.slice(0,L);break}}}x&&!v&&(P=t(P,1/0));var I=A.length+P.length+B.length,E=I<j?new Array(j-I+1).join(f):"";switch(x&&v&&(P=t(E+P,E.length?j-B.length:1/0),E=""),m){case"<":P=A+P+B+E;break;case"=":P=A+E+P+B;break;case"^":P=E.slice(0,I=E.length>>1)+A+P+B+E.slice(I);break;default:P=E+A+P+B;break}return i(P)}return T.toString=function(){return h+""},T}function d(h,f){var m=u((h=Ef(h),h.type="f",h)),g=Math.max(-8,Math.min(8,Math.floor(Vu(f)/3)))*3,p=Math.pow(10,-g),v=_k[8+g/3];return function(j){return m(p*j)+v}}return{format:u,formatPrefix:d}}var kp,xC,PL;Bge({thousands:",",grouping:[3],currency:["$",""]});function Bge(e){return kp=Lge(e),xC=kp.format,PL=kp.formatPrefix,kp}function Vge(e){return Math.max(0,-Vu(Math.abs(e)))}function zge(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Vu(t)/3)))*3-Vu(Math.abs(e)))}function qge(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Vu(t)-Vu(e))+1}function AL(e,t,n,s){var a=Lw(e,t,n),i;switch(s=Ef(s??",f"),s.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return s.precision==null&&!isNaN(i=zge(a,o))&&(s.precision=i),PL(s,o)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(i=qge(a,Math.max(Math.abs(e),Math.abs(t))))&&(s.precision=i-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(i=Vge(a))&&(s.precision=i-(s.type==="%")*2);break}}return xC(s)}function zo(e){var t=e.domain;return e.ticks=function(n){var s=t();return Rw(s[0],s[s.length-1],n??10)},e.tickFormat=function(n,s){var a=t();return AL(a[0],a[a.length-1],n??10,s)},e.nice=function(n){n==null&&(n=10);var s=t(),a=0,i=s.length-1,o=s[a],l=s[i],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=a,a=i,i=u);d-- >0;){if(u=Fw(o,l,n),u===c)return s[a]=o,s[i]=l,t(s);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function pv(){var e=gC();return e.copy=function(){return Am(e,pv())},Es.apply(e,arguments),zo(e)}function kL(e){var t;function n(s){return s==null||isNaN(s=+s)?t:s}return n.invert=n,n.domain=n.range=function(s){return arguments.length?(e=Array.from(s,fv),n):e.slice()},n.unknown=function(s){return arguments.length?(t=s,n):t},n.copy=function(){return kL(e).unknown(t)},e=arguments.length?Array.from(e,fv):[0,1],zo(n)}function TL(e,t){e=e.slice();var n=0,s=e.length-1,a=e[n],i=e[s],o;return i<a&&(o=n,n=s,s=o,o=a,a=i,i=o),e[n]=t.floor(a),e[s]=t.ceil(i),e}function Pk(e){return Math.log(e)}function Ak(e){return Math.exp(e)}function Uge(e){return-Math.log(-e)}function Wge(e){return-Math.exp(-e)}function Hge(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Gge(e){return e===10?Hge:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Kge(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function kk(e){return(t,n)=>-e(-t,n)}function yC(e){const t=e(Pk,Ak),n=t.domain;let s=10,a,i;function o(){return a=Kge(s),i=Gge(s),n()[0]<0?(a=kk(a),i=kk(i),e(Uge,Wge)):e(Pk,Ak),t}return t.base=function(l){return arguments.length?(s=+l,o()):s},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const c=n();let u=c[0],d=c[c.length-1];const h=d<u;h&&([u,d]=[d,u]);let f=a(u),m=a(d),g,p;const v=l==null?10:+l;let j=[];if(!(s%1)&&m-f<v){if(f=Math.floor(f),m=Math.ceil(m),u>0){for(;f<=m;++f)for(g=1;g<s;++g)if(p=f<0?g/i(-f):g*i(f),!(p<u)){if(p>d)break;j.push(p)}}else for(;f<=m;++f)for(g=s-1;g>=1;--g)if(p=f>0?g/i(-f):g*i(f),!(p<u)){if(p>d)break;j.push(p)}j.length*2<v&&(j=Rw(u,d,v))}else j=Rw(f,m,Math.min(m-f,v)).map(i);return h?j.reverse():j},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=s===10?"s":","),typeof c!="function"&&(!(s%1)&&(c=Ef(c)).precision==null&&(c.trim=!0),c=xC(c)),l===1/0)return c;const u=Math.max(1,s*l/t.ticks().length);return d=>{let h=d/i(Math.round(a(d)));return h*s<s-.5&&(h*=s),h<=u?c(d):""}},t.nice=()=>n(TL(n(),{floor:l=>i(Math.floor(a(l))),ceil:l=>i(Math.ceil(a(l)))})),t}function EL(){const e=yC(py()).domain([1,10]);return e.copy=()=>Am(e,EL()).base(e.base()),Es.apply(e,arguments),e}function Tk(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Ek(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function jC(e){var t=1,n=e(Tk(t),Ek(t));return n.constant=function(s){return arguments.length?e(Tk(t=+s),Ek(t)):t},zo(n)}function OL(){var e=jC(py());return e.copy=function(){return Am(e,OL()).constant(e.constant())},Es.apply(e,arguments)}function Ok(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Yge(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Qge(e){return e<0?-e*e:e*e}function bC(e){var t=e(br,br),n=1;function s(){return n===1?e(br,br):n===.5?e(Yge,Qge):e(Ok(n),Ok(1/n))}return t.exponent=function(a){return arguments.length?(n=+a,s()):n},zo(t)}function wC(){var e=bC(py());return e.copy=function(){return Am(e,wC()).exponent(e.exponent())},Es.apply(e,arguments),e}function Xge(){return wC.apply(null,arguments).exponent(.5)}function Dk(e){return Math.sign(e)*e*e}function Jge(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function DL(){var e=gC(),t=[0,1],n=!1,s;function a(i){var o=Jge(e(i));return isNaN(o)?s:n?Math.round(o):o}return a.invert=function(i){return e.invert(Dk(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,fv)).map(Dk)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(n=!!i,a):n},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(s=i,a):s},a.copy=function(){return DL(e.domain(),t).round(n).clamp(e.clamp()).unknown(s)},Es.apply(a,arguments),zo(a)}function ML(){var e=[],t=[],n=[],s;function a(){var o=0,l=Math.max(1,t.length);for(n=new Array(l-1);++o<l;)n[o-1]=rge(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?s:t[_m(n,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(No),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(s=o,i):s},i.quantiles=function(){return n.slice()},i.copy=function(){return ML().domain(e).range(t).unknown(s)},Es.apply(i,arguments)}function IL(){var e=0,t=1,n=1,s=[.5],a=[0,1],i;function o(c){return c!=null&&c<=c?a[_m(s,c,0,n)]:i}function l(){var c=-1;for(s=new Array(n);++c<n;)s[c]=((c+1)*t-(c-n)*e)/(n+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(n=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,s[0]]:u>=n?[s[n-1],t]:[s[u-1],s[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return s.slice()},o.copy=function(){return IL().domain([e,t]).range(a).unknown(i)},Es.apply(zo(o),arguments)}function $L(){var e=[.5],t=[0,1],n,s=1;function a(i){return i!=null&&i<=i?t[_m(e,i,0,s)]:n}return a.domain=function(i){return arguments.length?(e=Array.from(i),s=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),s=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return $L().domain(e).range(t).unknown(n)},Es.apply(a,arguments)}const tj=new Date,nj=new Date;function Fn(e,t,n,s){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),l=a.ceil(i);return i-o<l-i?o:l},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,l)=>{const c=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return c},a.filter=i=>Fn(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),n&&(a.count=(i,o)=>(tj.setTime(+i),nj.setTime(+o),e(tj),e(nj),Math.floor(n(tj,nj))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(s?o=>s(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const gv=Fn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);gv.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Fn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):gv);gv.range;const li=1e3,ws=li*60,ci=ws*60,Si=ci*24,NC=Si*7,Mk=Si*30,rj=Si*365,fl=Fn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*li)},(e,t)=>(t-e)/li,e=>e.getUTCSeconds());fl.range;const SC=Fn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*li)},(e,t)=>{e.setTime(+e+t*ws)},(e,t)=>(t-e)/ws,e=>e.getMinutes());SC.range;const CC=Fn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ws)},(e,t)=>(t-e)/ws,e=>e.getUTCMinutes());CC.range;const _C=Fn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*li-e.getMinutes()*ws)},(e,t)=>{e.setTime(+e+t*ci)},(e,t)=>(t-e)/ci,e=>e.getHours());_C.range;const PC=Fn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ci)},(e,t)=>(t-e)/ci,e=>e.getUTCHours());PC.range;const km=Fn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ws)/Si,e=>e.getDate()-1);km.range;const gy=Fn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Si,e=>e.getUTCDate()-1);gy.range;const RL=Fn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Si,e=>Math.floor(e/Si));RL.range;function ic(e){return Fn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ws)/NC)}const vy=ic(0),vv=ic(1),Zge=ic(2),eve=ic(3),zu=ic(4),tve=ic(5),nve=ic(6);vy.range;vv.range;Zge.range;eve.range;zu.range;tve.range;nve.range;function oc(e){return Fn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/NC)}const xy=oc(0),xv=oc(1),rve=oc(2),sve=oc(3),qu=oc(4),ave=oc(5),ive=oc(6);xy.range;xv.range;rve.range;sve.range;qu.range;ave.range;ive.range;const AC=Fn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());AC.range;const kC=Fn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());kC.range;const Ci=Fn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ci.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Fn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Ci.range;const _i=Fn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());_i.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Fn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});_i.range;function FL(e,t,n,s,a,i){const o=[[fl,1,li],[fl,5,5*li],[fl,15,15*li],[fl,30,30*li],[i,1,ws],[i,5,5*ws],[i,15,15*ws],[i,30,30*ws],[a,1,ci],[a,3,3*ci],[a,6,6*ci],[a,12,12*ci],[s,1,Si],[s,2,2*Si],[n,1,NC],[t,1,Mk],[t,3,3*Mk],[e,1,rj]];function l(u,d,h){const f=d<u;f&&([u,d]=[d,u]);const m=h&&typeof h.range=="function"?h:c(u,d,h),g=m?m.range(u,+d+1):[];return f?g.reverse():g}function c(u,d,h){const f=Math.abs(d-u)/h,m=dC(([,,v])=>v).right(o,f);if(m===o.length)return e.every(Lw(u/rj,d/rj,h));if(m===0)return gv.every(Math.max(Lw(u,d,h),1));const[g,p]=o[f/o[m-1][2]<o[m][2]/f?m-1:m];return g.every(p)}return[l,c]}const[ove,lve]=FL(_i,kC,xy,RL,PC,CC),[cve,uve]=FL(Ci,AC,vy,km,_C,SC);function sj(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function aj(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ih(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function dve(e){var t=e.dateTime,n=e.date,s=e.time,a=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=oh(a),d=lh(a),h=oh(i),f=lh(i),m=oh(o),g=lh(o),p=oh(l),v=lh(l),j=oh(c),x=lh(c),y={a:$,A:I,b:E,B:q,c:null,d:Bk,e:Bk,f:Mve,g:Uve,G:Hve,H:Eve,I:Ove,j:Dve,L:LL,m:Ive,M:$ve,p:Y,q:re,Q:qk,s:Uk,S:Rve,u:Fve,U:Lve,V:Bve,w:Vve,W:zve,x:null,X:null,y:qve,Y:Wve,Z:Gve,"%":zk},N={a:oe,A:ae,b:me,B:we,c:null,d:Vk,e:Vk,f:Xve,g:oxe,G:cxe,H:Kve,I:Yve,j:Qve,L:VL,m:Jve,M:Zve,p:ue,q:J,Q:qk,s:Uk,S:exe,u:txe,U:nxe,V:rxe,w:sxe,W:axe,x:null,X:null,y:ixe,Y:lxe,Z:uxe,"%":zk},w={a:T,A:P,b:A,B,c:L,d:Fk,e:Fk,f:Pve,g:Rk,G:$k,H:Lk,I:Lk,j:Nve,L:_ve,m:wve,M:Sve,p:k,q:bve,Q:kve,s:Tve,S:Cve,u:gve,U:vve,V:xve,w:pve,W:yve,x:H,X:z,y:Rk,Y:$k,Z:jve,"%":Ave};y.x=C(n,y),y.X=C(s,y),y.c=C(t,y),N.x=C(n,N),N.X=C(s,N),N.c=C(t,N);function C(ee,G){return function(W){var O=[],le=-1,ce=0,ie=ee.length,Ce,st,tt;for(W instanceof Date||(W=new Date(+W));++le<ie;)ee.charCodeAt(le)===37&&(O.push(ee.slice(ce,le)),(st=Ik[Ce=ee.charAt(++le)])!=null?Ce=ee.charAt(++le):st=Ce==="e"?" ":"0",(tt=G[Ce])&&(Ce=tt(W,st)),O.push(Ce),ce=le+1);return O.push(ee.slice(ce,le)),O.join("")}}function S(ee,G){return function(W){var O=ih(1900,void 0,1),le=_(O,ee,W+="",0),ce,ie;if(le!=W.length)return null;if("Q"in O)return new Date(O.Q);if("s"in O)return new Date(O.s*1e3+("L"in O?O.L:0));if(G&&!("Z"in O)&&(O.Z=0),"p"in O&&(O.H=O.H%12+O.p*12),O.m===void 0&&(O.m="q"in O?O.q:0),"V"in O){if(O.V<1||O.V>53)return null;"w"in O||(O.w=1),"Z"in O?(ce=aj(ih(O.y,0,1)),ie=ce.getUTCDay(),ce=ie>4||ie===0?xv.ceil(ce):xv(ce),ce=gy.offset(ce,(O.V-1)*7),O.y=ce.getUTCFullYear(),O.m=ce.getUTCMonth(),O.d=ce.getUTCDate()+(O.w+6)%7):(ce=sj(ih(O.y,0,1)),ie=ce.getDay(),ce=ie>4||ie===0?vv.ceil(ce):vv(ce),ce=km.offset(ce,(O.V-1)*7),O.y=ce.getFullYear(),O.m=ce.getMonth(),O.d=ce.getDate()+(O.w+6)%7)}else("W"in O||"U"in O)&&("w"in O||(O.w="u"in O?O.u%7:"W"in O?1:0),ie="Z"in O?aj(ih(O.y,0,1)).getUTCDay():sj(ih(O.y,0,1)).getDay(),O.m=0,O.d="W"in O?(O.w+6)%7+O.W*7-(ie+5)%7:O.w+O.U*7-(ie+6)%7);return"Z"in O?(O.H+=O.Z/100|0,O.M+=O.Z%100,aj(O)):sj(O)}}function _(ee,G,W,O){for(var le=0,ce=G.length,ie=W.length,Ce,st;le<ce;){if(O>=ie)return-1;if(Ce=G.charCodeAt(le++),Ce===37){if(Ce=G.charAt(le++),st=w[Ce in Ik?G.charAt(le++):Ce],!st||(O=st(ee,W,O))<0)return-1}else if(Ce!=W.charCodeAt(O++))return-1}return O}function k(ee,G,W){var O=u.exec(G.slice(W));return O?(ee.p=d.get(O[0].toLowerCase()),W+O[0].length):-1}function T(ee,G,W){var O=m.exec(G.slice(W));return O?(ee.w=g.get(O[0].toLowerCase()),W+O[0].length):-1}function P(ee,G,W){var O=h.exec(G.slice(W));return O?(ee.w=f.get(O[0].toLowerCase()),W+O[0].length):-1}function A(ee,G,W){var O=j.exec(G.slice(W));return O?(ee.m=x.get(O[0].toLowerCase()),W+O[0].length):-1}function B(ee,G,W){var O=p.exec(G.slice(W));return O?(ee.m=v.get(O[0].toLowerCase()),W+O[0].length):-1}function L(ee,G,W){return _(ee,t,G,W)}function H(ee,G,W){return _(ee,n,G,W)}function z(ee,G,W){return _(ee,s,G,W)}function $(ee){return o[ee.getDay()]}function I(ee){return i[ee.getDay()]}function E(ee){return c[ee.getMonth()]}function q(ee){return l[ee.getMonth()]}function Y(ee){return a[+(ee.getHours()>=12)]}function re(ee){return 1+~~(ee.getMonth()/3)}function oe(ee){return o[ee.getUTCDay()]}function ae(ee){return i[ee.getUTCDay()]}function me(ee){return c[ee.getUTCMonth()]}function we(ee){return l[ee.getUTCMonth()]}function ue(ee){return a[+(ee.getUTCHours()>=12)]}function J(ee){return 1+~~(ee.getUTCMonth()/3)}return{format:function(ee){var G=C(ee+="",y);return G.toString=function(){return ee},G},parse:function(ee){var G=S(ee+="",!1);return G.toString=function(){return ee},G},utcFormat:function(ee){var G=C(ee+="",N);return G.toString=function(){return ee},G},utcParse:function(ee){var G=S(ee+="",!0);return G.toString=function(){return ee},G}}}var Ik={"-":"",_:" ",0:"0"},Kn=/^\s*\d+/,hve=/^%/,fve=/[\\^$*+?|[\]().{}]/g;function jt(e,t,n){var s=e<0?"-":"",a=(s?-e:e)+"",i=a.length;return s+(i<n?new Array(n-i+1).join(t)+a:a)}function mve(e){return e.replace(fve,"\\$&")}function oh(e){return new RegExp("^(?:"+e.map(mve).join("|")+")","i")}function lh(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function pve(e,t,n){var s=Kn.exec(t.slice(n,n+1));return s?(e.w=+s[0],n+s[0].length):-1}function gve(e,t,n){var s=Kn.exec(t.slice(n,n+1));return s?(e.u=+s[0],n+s[0].length):-1}function vve(e,t,n){var s=Kn.exec(t.slice(n,n+2));return s?(e.U=+s[0],n+s[0].length):-1}function xve(e,t,n){var s=Kn.exec(t.slice(n,n+2));return s?(e.V=+s[0],n+s[0].length):-1}function yve(e,t,n){var s=Kn.exec(t.slice(n,n+2));return s?(e.W=+s[0],n+s[0].length):-1}function $k(e,t,n){var s=Kn.exec(t.slice(n,n+4));return s?(e.y=+s[0],n+s[0].length):-1}function Rk(e,t,n){var s=Kn.exec(t.slice(n,n+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),n+s[0].length):-1}function jve(e,t,n){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),n+s[0].length):-1}function bve(e,t,n){var s=Kn.exec(t.slice(n,n+1));return s?(e.q=s[0]*3-3,n+s[0].length):-1}function wve(e,t,n){var s=Kn.exec(t.slice(n,n+2));return s?(e.m=s[0]-1,n+s[0].length):-1}function Fk(e,t,n){var s=Kn.exec(t.slice(n,n+2));return s?(e.d=+s[0],n+s[0].length):-1}function Nve(e,t,n){var s=Kn.exec(t.slice(n,n+3));return s?(e.m=0,e.d=+s[0],n+s[0].length):-1}function Lk(e,t,n){var s=Kn.exec(t.slice(n,n+2));return s?(e.H=+s[0],n+s[0].length):-1}function Sve(e,t,n){var s=Kn.exec(t.slice(n,n+2));return s?(e.M=+s[0],n+s[0].length):-1}function Cve(e,t,n){var s=Kn.exec(t.slice(n,n+2));return s?(e.S=+s[0],n+s[0].length):-1}function _ve(e,t,n){var s=Kn.exec(t.slice(n,n+3));return s?(e.L=+s[0],n+s[0].length):-1}function Pve(e,t,n){var s=Kn.exec(t.slice(n,n+6));return s?(e.L=Math.floor(s[0]/1e3),n+s[0].length):-1}function Ave(e,t,n){var s=hve.exec(t.slice(n,n+1));return s?n+s[0].length:-1}function kve(e,t,n){var s=Kn.exec(t.slice(n));return s?(e.Q=+s[0],n+s[0].length):-1}function Tve(e,t,n){var s=Kn.exec(t.slice(n));return s?(e.s=+s[0],n+s[0].length):-1}function Bk(e,t){return jt(e.getDate(),t,2)}function Eve(e,t){return jt(e.getHours(),t,2)}function Ove(e,t){return jt(e.getHours()%12||12,t,2)}function Dve(e,t){return jt(1+km.count(Ci(e),e),t,3)}function LL(e,t){return jt(e.getMilliseconds(),t,3)}function Mve(e,t){return LL(e,t)+"000"}function Ive(e,t){return jt(e.getMonth()+1,t,2)}function $ve(e,t){return jt(e.getMinutes(),t,2)}function Rve(e,t){return jt(e.getSeconds(),t,2)}function Fve(e){var t=e.getDay();return t===0?7:t}function Lve(e,t){return jt(vy.count(Ci(e)-1,e),t,2)}function BL(e){var t=e.getDay();return t>=4||t===0?zu(e):zu.ceil(e)}function Bve(e,t){return e=BL(e),jt(zu.count(Ci(e),e)+(Ci(e).getDay()===4),t,2)}function Vve(e){return e.getDay()}function zve(e,t){return jt(vv.count(Ci(e)-1,e),t,2)}function qve(e,t){return jt(e.getFullYear()%100,t,2)}function Uve(e,t){return e=BL(e),jt(e.getFullYear()%100,t,2)}function Wve(e,t){return jt(e.getFullYear()%1e4,t,4)}function Hve(e,t){var n=e.getDay();return e=n>=4||n===0?zu(e):zu.ceil(e),jt(e.getFullYear()%1e4,t,4)}function Gve(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+jt(t/60|0,"0",2)+jt(t%60,"0",2)}function Vk(e,t){return jt(e.getUTCDate(),t,2)}function Kve(e,t){return jt(e.getUTCHours(),t,2)}function Yve(e,t){return jt(e.getUTCHours()%12||12,t,2)}function Qve(e,t){return jt(1+gy.count(_i(e),e),t,3)}function VL(e,t){return jt(e.getUTCMilliseconds(),t,3)}function Xve(e,t){return VL(e,t)+"000"}function Jve(e,t){return jt(e.getUTCMonth()+1,t,2)}function Zve(e,t){return jt(e.getUTCMinutes(),t,2)}function exe(e,t){return jt(e.getUTCSeconds(),t,2)}function txe(e){var t=e.getUTCDay();return t===0?7:t}function nxe(e,t){return jt(xy.count(_i(e)-1,e),t,2)}function zL(e){var t=e.getUTCDay();return t>=4||t===0?qu(e):qu.ceil(e)}function rxe(e,t){return e=zL(e),jt(qu.count(_i(e),e)+(_i(e).getUTCDay()===4),t,2)}function sxe(e){return e.getUTCDay()}function axe(e,t){return jt(xv.count(_i(e)-1,e),t,2)}function ixe(e,t){return jt(e.getUTCFullYear()%100,t,2)}function oxe(e,t){return e=zL(e),jt(e.getUTCFullYear()%100,t,2)}function lxe(e,t){return jt(e.getUTCFullYear()%1e4,t,4)}function cxe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?qu(e):qu.ceil(e),jt(e.getUTCFullYear()%1e4,t,4)}function uxe(){return"+0000"}function zk(){return"%"}function qk(e){return+e}function Uk(e){return Math.floor(+e/1e3)}var Cc,qL,UL;dxe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function dxe(e){return Cc=dve(e),qL=Cc.format,Cc.parse,UL=Cc.utcFormat,Cc.utcParse,Cc}function hxe(e){return new Date(e)}function fxe(e){return e instanceof Date?+e:+new Date(+e)}function TC(e,t,n,s,a,i,o,l,c,u){var d=gC(),h=d.invert,f=d.domain,m=u(".%L"),g=u(":%S"),p=u("%I:%M"),v=u("%I %p"),j=u("%a %d"),x=u("%b %d"),y=u("%B"),N=u("%Y");function w(C){return(c(C)<C?m:l(C)<C?g:o(C)<C?p:i(C)<C?v:s(C)<C?a(C)<C?j:x:n(C)<C?y:N)(C)}return d.invert=function(C){return new Date(h(C))},d.domain=function(C){return arguments.length?f(Array.from(C,fxe)):f().map(hxe)},d.ticks=function(C){var S=f();return e(S[0],S[S.length-1],C??10)},d.tickFormat=function(C,S){return S==null?w:u(S)},d.nice=function(C){var S=f();return(!C||typeof C.range!="function")&&(C=t(S[0],S[S.length-1],C??10)),C?f(TL(S,C)):d},d.copy=function(){return Am(d,TC(e,t,n,s,a,i,o,l,c,u))},d}function mxe(){return Es.apply(TC(cve,uve,Ci,AC,vy,km,_C,SC,fl,qL).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function pxe(){return Es.apply(TC(ove,lve,_i,kC,xy,gy,PC,CC,fl,UL).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function yy(){var e=0,t=1,n,s,a,i,o=br,l=!1,c;function u(h){return h==null||isNaN(h=+h)?c:o(a===0?.5:(h=(i(h)-n)*a,l?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([e,t]=h,n=i(e=+e),s=i(t=+t),a=n===s?0:1/(s-n),u):[e,t]},u.clamp=function(h){return arguments.length?(l=!!h,u):l},u.interpolator=function(h){return arguments.length?(o=h,u):o};function d(h){return function(f){var m,g;return arguments.length?([m,g]=f,o=h(m,g),u):[o(0),o(1)]}}return u.range=d(Rd),u.rangeRound=d(pC),u.unknown=function(h){return arguments.length?(c=h,u):c},function(h){return i=h,n=h(e),s=h(t),a=n===s?0:1/(s-n),u}}function qo(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function WL(){var e=zo(yy()(br));return e.copy=function(){return qo(e,WL())},Ei.apply(e,arguments)}function HL(){var e=yC(yy()).domain([1,10]);return e.copy=function(){return qo(e,HL()).base(e.base())},Ei.apply(e,arguments)}function GL(){var e=jC(yy());return e.copy=function(){return qo(e,GL()).constant(e.constant())},Ei.apply(e,arguments)}function EC(){var e=bC(yy());return e.copy=function(){return qo(e,EC()).exponent(e.exponent())},Ei.apply(e,arguments)}function gxe(){return EC.apply(null,arguments).exponent(.5)}function KL(){var e=[],t=br;function n(s){if(s!=null&&!isNaN(s=+s))return t((_m(e,s,1)-1)/(e.length-1))}return n.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(No),n},n.interpolator=function(s){return arguments.length?(t=s,n):t},n.range=function(){return e.map((s,a)=>t(a/(e.length-1)))},n.quantiles=function(s){return Array.from({length:s+1},(a,i)=>nge(e,i/s))},n.copy=function(){return KL(t).domain(e)},Ei.apply(n,arguments)}function jy(){var e=0,t=.5,n=1,s=1,a,i,o,l,c,u=br,d,h=!1,f;function m(p){return isNaN(p=+p)?f:(p=.5+((p=+d(p))-i)*(s*p<s*i?l:c),u(h?Math.max(0,Math.min(1,p)):p))}m.domain=function(p){return arguments.length?([e,t,n]=p,a=d(e=+e),i=d(t=+t),o=d(n=+n),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),s=i<a?-1:1,m):[e,t,n]},m.clamp=function(p){return arguments.length?(h=!!p,m):h},m.interpolator=function(p){return arguments.length?(u=p,m):u};function g(p){return function(v){var j,x,y;return arguments.length?([j,x,y]=v,u=Age(p,[j,x,y]),m):[u(0),u(.5),u(1)]}}return m.range=g(Rd),m.rangeRound=g(pC),m.unknown=function(p){return arguments.length?(f=p,m):f},function(p){return d=p,a=p(e),i=p(t),o=p(n),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),s=i<a?-1:1,m}}function YL(){var e=zo(jy()(br));return e.copy=function(){return qo(e,YL())},Ei.apply(e,arguments)}function QL(){var e=yC(jy()).domain([.1,1,10]);return e.copy=function(){return qo(e,QL()).base(e.base())},Ei.apply(e,arguments)}function XL(){var e=jC(jy());return e.copy=function(){return qo(e,XL()).constant(e.constant())},Ei.apply(e,arguments)}function OC(){var e=bC(jy());return e.copy=function(){return qo(e,OC()).exponent(e.exponent())},Ei.apply(e,arguments)}function vxe(){return OC.apply(null,arguments).exponent(.5)}const Wk=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Pf,scaleDiverging:YL,scaleDivergingLog:QL,scaleDivergingPow:OC,scaleDivergingSqrt:vxe,scaleDivergingSymlog:XL,scaleIdentity:kL,scaleImplicit:Bw,scaleLinear:pv,scaleLog:EL,scaleOrdinal:hC,scalePoint:Lh,scalePow:wC,scaleQuantile:ML,scaleQuantize:IL,scaleRadial:DL,scaleSequential:WL,scaleSequentialLog:HL,scaleSequentialPow:EC,scaleSequentialQuantile:KL,scaleSequentialSqrt:gxe,scaleSequentialSymlog:GL,scaleSqrt:Xge,scaleSymlog:OL,scaleThreshold:$L,scaleTime:mxe,scaleUtc:pxe,tickFormat:AL},Symbol.toStringTag,{value:"Module"}));var xxe=Pd;function yxe(e,t,n){for(var s=-1,a=e.length;++s<a;){var i=e[s],o=t(i);if(o!=null&&(l===void 0?o===o&&!xxe(o):n(o,l)))var l=o,c=i}return c}var by=yxe;function jxe(e,t){return e>t}var JL=jxe,bxe=by,wxe=JL,Nxe=Id;function Sxe(e){return e&&e.length?bxe(e,Nxe,wxe):void 0}var Cxe=Sxe;const co=Pt(Cxe);function _xe(e,t){return e<t}var ZL=_xe,Pxe=by,Axe=ZL,kxe=Id;function Txe(e){return e&&e.length?Pxe(e,kxe,Axe):void 0}var Exe=Txe;const wy=Pt(Exe);var Oxe=HS,Dxe=Wa,Mxe=oL,Ixe=zr;function $xe(e,t){var n=Ixe(e)?Oxe:Mxe;return n(e,Dxe(t))}var Rxe=$xe,Fxe=aL,Lxe=Rxe;function Bxe(e,t){return Fxe(Lxe(e,t),1)}var Vxe=Bxe;const zxe=Pt(Vxe);var qxe=oC;function Uxe(e,t){return qxe(e,t)}var Wxe=Uxe;const Hl=Pt(Wxe);var Fd=1e9,Hxe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},MC,en=!0,Ps="[DecimalError] ",Al=Ps+"Invalid argument: ",DC=Ps+"Exponent out of range: ",Ld=Math.floor,rl=Math.pow,Gxe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,es,Vn=1e7,Gt=7,e5=9007199254740991,yv=Ld(e5/Gt),De={};De.absoluteValue=De.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};De.comparedTo=De.cmp=function(e){var t,n,s,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(s=i.d.length,a=e.d.length,t=0,n=s<a?s:a;t<n;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return s===a?0:s>a^i.s<0?1:-1};De.decimalPlaces=De.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Gt;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};De.dividedBy=De.div=function(e){return fi(this,new this.constructor(e))};De.dividedToIntegerBy=De.idiv=function(e){var t=this,n=t.constructor;return It(fi(t,new n(e),0,1),n.precision)};De.equals=De.eq=function(e){return!this.cmp(e)};De.exponent=function(){return Nn(this)};De.greaterThan=De.gt=function(e){return this.cmp(e)>0};De.greaterThanOrEqualTo=De.gte=function(e){return this.cmp(e)>=0};De.isInteger=De.isint=function(){return this.e>this.d.length-2};De.isNegative=De.isneg=function(){return this.s<0};De.isPositive=De.ispos=function(){return this.s>0};De.isZero=function(){return this.s===0};De.lessThan=De.lt=function(e){return this.cmp(e)<0};De.lessThanOrEqualTo=De.lte=function(e){return this.cmp(e)<1};De.logarithm=De.log=function(e){var t,n=this,s=n.constructor,a=s.precision,i=a+5;if(e===void 0)e=new s(10);else if(e=new s(e),e.s<1||e.eq(es))throw Error(Ps+"NaN");if(n.s<1)throw Error(Ps+(n.s?"NaN":"-Infinity"));return n.eq(es)?new s(0):(en=!1,t=fi(Of(n,i),Of(e,i),i),en=!0,It(t,a))};De.minus=De.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?r5(t,e):t5(t,(e.s=-e.s,e))};De.modulo=De.mod=function(e){var t,n=this,s=n.constructor,a=s.precision;if(e=new s(e),!e.s)throw Error(Ps+"NaN");return n.s?(en=!1,t=fi(n,e,0,1).times(e),en=!0,n.minus(t)):It(new s(n),a)};De.naturalExponential=De.exp=function(){return n5(this)};De.naturalLogarithm=De.ln=function(){return Of(this)};De.negated=De.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};De.plus=De.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?t5(t,e):r5(t,(e.s=-e.s,e))};De.precision=De.sd=function(e){var t,n,s,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Al+e);if(t=Nn(a)+1,s=a.d.length-1,n=s*Gt+1,s=a.d[s],s){for(;s%10==0;s/=10)n--;for(s=a.d[0];s>=10;s/=10)n++}return e&&t>n?t:n};De.squareRoot=De.sqrt=function(){var e,t,n,s,a,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Ps+"NaN")}for(e=Nn(l),en=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=_a(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Ld((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),s=new c(t)):s=new c(a.toString()),n=c.precision,a=o=n+3;;)if(i=s,s=i.plus(fi(l,i,o+2)).times(.5),_a(i.d).slice(0,o)===(t=_a(s.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(It(i,n+1,0),i.times(i).eq(l)){s=i;break}}else if(t!="9999")break;o+=4}return en=!0,It(s,n)};De.times=De.mul=function(e){var t,n,s,a,i,o,l,c,u,d=this,h=d.constructor,f=d.d,m=(e=new h(e)).d;if(!d.s||!e.s)return new h(0);for(e.s*=d.s,n=d.e+e.e,c=f.length,u=m.length,c<u&&(i=f,f=m,m=i,o=c,c=u,u=o),i=[],o=c+u,s=o;s--;)i.push(0);for(s=u;--s>=0;){for(t=0,a=c+s;a>s;)l=i[a]+m[s]*f[a-s-1]+t,i[a--]=l%Vn|0,t=l/Vn|0;i[a]=(i[a]+t)%Vn|0}for(;!i[--o];)i.pop();return t?++n:i.shift(),e.d=i,e.e=n,en?It(e,h.precision):e};De.toDecimalPlaces=De.todp=function(e,t){var n=this,s=n.constructor;return n=new s(n),e===void 0?n:(Va(e,0,Fd),t===void 0?t=s.rounding:Va(t,0,8),It(n,e+Nn(n)+1,t))};De.toExponential=function(e,t){var n,s=this,a=s.constructor;return e===void 0?n=Gl(s,!0):(Va(e,0,Fd),t===void 0?t=a.rounding:Va(t,0,8),s=It(new a(s),e+1,t),n=Gl(s,!0,e+1)),n};De.toFixed=function(e,t){var n,s,a=this,i=a.constructor;return e===void 0?Gl(a):(Va(e,0,Fd),t===void 0?t=i.rounding:Va(t,0,8),s=It(new i(a),e+Nn(a)+1,t),n=Gl(s.abs(),!1,e+Nn(s)+1),a.isneg()&&!a.isZero()?"-"+n:n)};De.toInteger=De.toint=function(){var e=this,t=e.constructor;return It(new t(e),Nn(e)+1,t.rounding)};De.toNumber=function(){return+this};De.toPower=De.pow=function(e){var t,n,s,a,i,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(es);if(l=new c(l),!l.s){if(e.s<1)throw Error(Ps+"Infinity");return l}if(l.eq(es))return l;if(s=c.precision,e.eq(es))return It(l,s);if(t=e.e,n=e.d.length-1,o=t>=n,i=l.s,o){if((n=d<0?-d:d)<=e5){for(a=new c(es),t=Math.ceil(s/Gt+4),en=!1;n%2&&(a=a.times(l),Gk(a.d,t)),n=Ld(n/2),n!==0;)l=l.times(l),Gk(l.d,t);return en=!0,e.s<0?new c(es).div(a):It(a,s)}}else if(i<0)throw Error(Ps+"NaN");return i=i<0&&e.d[Math.max(t,n)]&1?-1:1,l.s=1,en=!1,a=e.times(Of(l,s+u)),en=!0,a=n5(a),a.s=i,a};De.toPrecision=function(e,t){var n,s,a=this,i=a.constructor;return e===void 0?(n=Nn(a),s=Gl(a,n<=i.toExpNeg||n>=i.toExpPos)):(Va(e,1,Fd),t===void 0?t=i.rounding:Va(t,0,8),a=It(new i(a),e,t),n=Nn(a),s=Gl(a,e<=n||n<=i.toExpNeg,e)),s};De.toSignificantDigits=De.tosd=function(e,t){var n=this,s=n.constructor;return e===void 0?(e=s.precision,t=s.rounding):(Va(e,1,Fd),t===void 0?t=s.rounding:Va(t,0,8)),It(new s(n),e,t)};De.toString=De.valueOf=De.val=De.toJSON=De[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Nn(e),n=e.constructor;return Gl(e,t<=n.toExpNeg||t>=n.toExpPos)};function t5(e,t){var n,s,a,i,o,l,c,u,d=e.constructor,h=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),en?It(t,h):t;if(c=e.d,u=t.d,o=e.e,a=t.e,c=c.slice(),i=o-a,i){for(i<0?(s=c,i=-i,l=u.length):(s=u,a=o,l=c.length),o=Math.ceil(h/Gt),l=o>l?o+1:l+1,i>l&&(i=l,s.length=1),s.reverse();i--;)s.push(0);s.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,s=u,u=c,c=s),n=0;i;)n=(c[--i]=c[i]+u[i]+n)/Vn|0,c[i]%=Vn;for(n&&(c.unshift(n),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,en?It(t,h):t}function Va(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Al+e)}function _a(e){var t,n,s,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)s=e[t]+"",n=Gt-s.length,n&&(i+=Wi(n)),i+=s;o=e[t],s=o+"",n=Gt-s.length,n&&(i+=Wi(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var fi=function(){function e(s,a){var i,o=0,l=s.length;for(s=s.slice();l--;)i=s[l]*a+o,s[l]=i%Vn|0,o=i/Vn|0;return o&&s.unshift(o),s}function t(s,a,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(s[l]!=a[l]){c=s[l]>a[l]?1:-1;break}return c}function n(s,a,i){for(var o=0;i--;)s[i]-=o,o=s[i]<a[i]?1:0,s[i]=o*Vn+s[i]-a[i];for(;!s[0]&&s.length>1;)s.shift()}return function(s,a,i,o){var l,c,u,d,h,f,m,g,p,v,j,x,y,N,w,C,S,_,k=s.constructor,T=s.s==a.s?1:-1,P=s.d,A=a.d;if(!s.s)return new k(s);if(!a.s)throw Error(Ps+"Division by zero");for(c=s.e-a.e,S=A.length,w=P.length,m=new k(T),g=m.d=[],u=0;A[u]==(P[u]||0);)++u;if(A[u]>(P[u]||0)&&--c,i==null?x=i=k.precision:o?x=i+(Nn(s)-Nn(a))+1:x=i,x<0)return new k(0);if(x=x/Gt+2|0,u=0,S==1)for(d=0,A=A[0],x++;(u<w||d)&&x--;u++)y=d*Vn+(P[u]||0),g[u]=y/A|0,d=y%A|0;else{for(d=Vn/(A[0]+1)|0,d>1&&(A=e(A,d),P=e(P,d),S=A.length,w=P.length),N=S,p=P.slice(0,S),v=p.length;v<S;)p[v++]=0;_=A.slice(),_.unshift(0),C=A[0],A[1]>=Vn/2&&++C;do d=0,l=t(A,p,S,v),l<0?(j=p[0],S!=v&&(j=j*Vn+(p[1]||0)),d=j/C|0,d>1?(d>=Vn&&(d=Vn-1),h=e(A,d),f=h.length,v=p.length,l=t(h,p,f,v),l==1&&(d--,n(h,S<f?_:A,f))):(d==0&&(l=d=1),h=A.slice()),f=h.length,f<v&&h.unshift(0),n(p,h,v),l==-1&&(v=p.length,l=t(A,p,S,v),l<1&&(d++,n(p,S<v?_:A,v))),v=p.length):l===0&&(d++,p=[0]),g[u++]=d,l&&p[0]?p[v++]=P[N]||0:(p=[P[N]],v=1);while((N++<w||p[0]!==void 0)&&x--)}return g[0]||g.shift(),m.e=c,It(m,o?i+Nn(m)+1:i)}}();function n5(e,t){var n,s,a,i,o,l,c=0,u=0,d=e.constructor,h=d.precision;if(Nn(e)>16)throw Error(DC+Nn(e));if(!e.s)return new d(es);for(t==null?(en=!1,l=h):l=t,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(s=Math.log(rl(2,u))/Math.LN10*2+5|0,l+=s,n=a=i=new d(es),d.precision=l;;){if(a=It(a.times(e),l),n=n.times(++c),o=i.plus(fi(a,n,l)),_a(o.d).slice(0,l)===_a(i.d).slice(0,l)){for(;u--;)i=It(i.times(i),l);return d.precision=h,t==null?(en=!0,It(i,h)):i}i=o}}function Nn(e){for(var t=e.e*Gt,n=e.d[0];n>=10;n/=10)t++;return t}function ij(e,t,n){if(t>e.LN10.sd())throw en=!0,n&&(e.precision=n),Error(Ps+"LN10 precision limit exceeded");return It(new e(e.LN10),t)}function Wi(e){for(var t="";e--;)t+="0";return t}function Of(e,t){var n,s,a,i,o,l,c,u,d,h=1,f=10,m=e,g=m.d,p=m.constructor,v=p.precision;if(m.s<1)throw Error(Ps+(m.s?"NaN":"-Infinity"));if(m.eq(es))return new p(0);if(t==null?(en=!1,u=v):u=t,m.eq(10))return t==null&&(en=!0),ij(p,u);if(u+=f,p.precision=u,n=_a(g),s=n.charAt(0),i=Nn(m),Math.abs(i)<15e14){for(;s<7&&s!=1||s==1&&n.charAt(1)>3;)m=m.times(e),n=_a(m.d),s=n.charAt(0),h++;i=Nn(m),s>1?(m=new p("0."+n),i++):m=new p(s+"."+n.slice(1))}else return c=ij(p,u+2,v).times(i+""),m=Of(new p(s+"."+n.slice(1)),u-f).plus(c),p.precision=v,t==null?(en=!0,It(m,v)):m;for(l=o=m=fi(m.minus(es),m.plus(es),u),d=It(m.times(m),u),a=3;;){if(o=It(o.times(d),u),c=l.plus(fi(o,new p(a),u)),_a(c.d).slice(0,u)===_a(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(ij(p,u+2,v).times(i+""))),l=fi(l,new p(h),u),p.precision=v,t==null?(en=!0,It(l,v)):l;l=c,a+=2}}function Hk(e,t){var n,s,a;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(n<0&&(n=s),n+=+t.slice(s+1),t=t.substring(0,s)):n<0&&(n=t.length),s=0;t.charCodeAt(s)===48;)++s;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(s,a),t){if(a-=s,n=n-s-1,e.e=Ld(n/Gt),e.d=[],s=(n+1)%Gt,n<0&&(s+=Gt),s<a){for(s&&e.d.push(+t.slice(0,s)),a-=Gt;s<a;)e.d.push(+t.slice(s,s+=Gt));t=t.slice(s),s=Gt-t.length}else s-=a;for(;s--;)t+="0";if(e.d.push(+t),en&&(e.e>yv||e.e<-yv))throw Error(DC+n)}else e.s=0,e.e=0,e.d=[0];return e}function It(e,t,n){var s,a,i,o,l,c,u,d,h=e.d;for(o=1,i=h[0];i>=10;i/=10)o++;if(s=t-o,s<0)s+=Gt,a=t,u=h[d=0];else{if(d=Math.ceil((s+1)/Gt),i=h.length,d>=i)return e;for(u=i=h[d],o=1;i>=10;i/=10)o++;s%=Gt,a=s-Gt+o}if(n!==void 0&&(i=rl(10,o-a-1),l=u/i%10|0,c=t<0||h[d+1]!==void 0||u%i,c=n<4?(l||c)&&(n==0||n==(e.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(s>0?a>0?u/rl(10,o-a):0:h[d-1])%10&1||n==(e.s<0?8:7))),t<1||!h[0])return c?(i=Nn(e),h.length=1,t=t-i-1,h[0]=rl(10,(Gt-t%Gt)%Gt),e.e=Ld(-t/Gt)||0):(h.length=1,h[0]=e.e=e.s=0),e;if(s==0?(h.length=d,i=1,d--):(h.length=d+1,i=rl(10,Gt-s),h[d]=a>0?(u/rl(10,o-a)%rl(10,a)|0)*i:0),c)for(;;)if(d==0){(h[0]+=i)==Vn&&(h[0]=1,++e.e);break}else{if(h[d]+=i,h[d]!=Vn)break;h[d--]=0,i=1}for(s=h.length;h[--s]===0;)h.pop();if(en&&(e.e>yv||e.e<-yv))throw Error(DC+Nn(e));return e}function r5(e,t){var n,s,a,i,o,l,c,u,d,h,f=e.constructor,m=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),en?It(t,m):t;if(c=e.d,h=t.d,s=t.e,u=e.e,c=c.slice(),o=u-s,o){for(d=o<0,d?(n=c,o=-o,l=h.length):(n=h,s=u,l=c.length),a=Math.max(Math.ceil(m/Gt),l)+2,o>a&&(o=a,n.length=1),n.reverse(),a=o;a--;)n.push(0);n.reverse()}else{for(a=c.length,l=h.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=h[a]){d=c[a]<h[a];break}o=0}for(d&&(n=c,c=h,h=n,t.s=-t.s),l=c.length,a=h.length-l;a>0;--a)c[l++]=0;for(a=h.length;a>o;){if(c[--a]<h[a]){for(i=a;i&&c[--i]===0;)c[i]=Vn-1;--c[i],c[a]+=Vn}c[a]-=h[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--s;return c[0]?(t.d=c,t.e=s,en?It(t,m):t):new f(0)}function Gl(e,t,n){var s,a=Nn(e),i=_a(e.d),o=i.length;return t?(n&&(s=n-o)>0?i=i.charAt(0)+"."+i.slice(1)+Wi(s):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Wi(-a-1)+i,n&&(s=n-o)>0&&(i+=Wi(s))):a>=o?(i+=Wi(a+1-o),n&&(s=n-a-1)>0&&(i=i+"."+Wi(s))):((s=a+1)<o&&(i=i.slice(0,s)+"."+i.slice(s)),n&&(s=n-o)>0&&(a+1===o&&(i+="."),i+=Wi(s))),e.s<0?"-"+i:i}function Gk(e,t){if(e.length>t)return e.length=t,!0}function s5(e){var t,n,s;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Al+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return Hk(o,i.toString())}else if(typeof i!="string")throw Error(Al+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,Gxe.test(i))Hk(o,i);else throw Error(Al+i)}if(a.prototype=De,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=s5,a.config=a.set=Kxe,e===void 0&&(e={}),e)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<s.length;)e.hasOwnProperty(n=s[t++])||(e[n]=this[n]);return a.config(e),a}function Kxe(e){if(!e||typeof e!="object")throw Error(Ps+"Object expected");var t,n,s,a=["precision",1,Fd,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((s=e[n=a[t]])!==void 0)if(Ld(s)===s&&s>=a[t+1]&&s<=a[t+2])this[n]=s;else throw Error(Al+n+": "+s);if((s=e[n="LN10"])!==void 0)if(s==Math.LN10)this[n]=new this(s);else throw Error(Al+n+": "+s);return this}var MC=s5(Hxe);es=new MC(1);const Dt=MC;function Yxe(e){return Zxe(e)||Jxe(e)||Xxe(e)||Qxe()}function Qxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xxe(e,t){if(e){if(typeof e=="string")return Uw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Uw(e,t)}}function Jxe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Zxe(e){if(Array.isArray(e))return Uw(e)}function Uw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var eye=function(t){return t},a5={"@@functional/placeholder":!0},i5=function(t){return t===a5},Kk=function(t){return function n(){return arguments.length===0||arguments.length===1&&i5(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},tye=function e(t,n){return t===1?n:Kk(function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];var o=a.filter(function(l){return l!==a5}).length;return o>=t?n.apply(void 0,a):e(t-o,Kk(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=a.map(function(h){return i5(h)?c.shift():h});return n.apply(void 0,Yxe(d).concat(c))}))})},Ny=function(t){return tye(t.length,t)},Ww=function(t,n){for(var s=[],a=t;a<n;++a)s[a-t]=a;return s},nye=Ny(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),rye=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];if(!n.length)return eye;var a=n.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},Hw=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},o5=function(t){var n=null,s=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n&&i.every(function(l,c){return l===n[c]})||(n=i,s=t.apply(void 0,i)),s}};function sye(e){var t;return e===0?t=1:t=Math.floor(new Dt(e).abs().log(10).toNumber())+1,t}function aye(e,t,n){for(var s=new Dt(e),a=0,i=[];s.lt(t)&&a<1e5;)i.push(s.toNumber()),s=s.add(n),a++;return i}var iye=Ny(function(e,t,n){var s=+e,a=+t;return s+n*(a-s)}),oye=Ny(function(e,t,n){var s=t-+e;return s=s||1/0,(n-e)/s}),lye=Ny(function(e,t,n){var s=t-+e;return s=s||1/0,Math.max(0,Math.min(1,(n-e)/s))});const Sy={rangeStep:aye,getDigitCount:sye,interpolateNumber:iye,uninterpolateNumber:oye,uninterpolateTruncation:lye};function Gw(e){return dye(e)||uye(e)||l5(e)||cye()}function cye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uye(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function dye(e){if(Array.isArray(e))return Kw(e)}function Df(e,t){return mye(e)||fye(e,t)||l5(e,t)||hye()}function hye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l5(e,t){if(e){if(typeof e=="string")return Kw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kw(e,t)}}function Kw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function fye(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],s=!0,a=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(s=(l=o.next()).done)&&(n.push(l.value),!(t&&n.length===t));s=!0);}catch(c){a=!0,i=c}finally{try{!s&&o.return!=null&&o.return()}finally{if(a)throw i}}return n}}function mye(e){if(Array.isArray(e))return e}function c5(e){var t=Df(e,2),n=t[0],s=t[1],a=n,i=s;return n>s&&(a=s,i=n),[a,i]}function u5(e,t,n){if(e.lte(0))return new Dt(0);var s=Sy.getDigitCount(e.toNumber()),a=new Dt(10).pow(s),i=e.div(a),o=s!==1?.05:.1,l=new Dt(Math.ceil(i.div(o).toNumber())).add(n).mul(o),c=l.mul(a);return t?c:new Dt(Math.ceil(c))}function pye(e,t,n){var s=1,a=new Dt(e);if(!a.isint()&&n){var i=Math.abs(e);i<1?(s=new Dt(10).pow(Sy.getDigitCount(e)-1),a=new Dt(Math.floor(a.div(s).toNumber())).mul(s)):i>1&&(a=new Dt(Math.floor(e)))}else e===0?a=new Dt(Math.floor((t-1)/2)):n||(a=new Dt(Math.floor(e)));var o=Math.floor((t-1)/2),l=rye(nye(function(c){return a.add(new Dt(c-o).mul(s)).toNumber()}),Ww);return l(0,t)}function d5(e,t,n,s){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new Dt(0),tickMin:new Dt(0),tickMax:new Dt(0)};var i=u5(new Dt(t).sub(e).div(n-1),s,a),o;e<=0&&t>=0?o=new Dt(0):(o=new Dt(e).add(t).div(2),o=o.sub(new Dt(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new Dt(t).sub(o).div(i).toNumber()),u=l+c+1;return u>n?d5(e,t,n,s,a+1):(u<n&&(c=t>0?c+(n-u):c,l=t>0?l:l+(n-u)),{step:i,tickMin:o.sub(new Dt(l).mul(i)),tickMax:o.add(new Dt(c).mul(i))})}function gye(e){var t=Df(e,2),n=t[0],s=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=c5([n,s]),c=Df(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var h=d===1/0?[u].concat(Gw(Ww(0,a-1).map(function(){return 1/0}))):[].concat(Gw(Ww(0,a-1).map(function(){return-1/0})),[d]);return n>s?Hw(h):h}if(u===d)return pye(u,a,i);var f=d5(u,d,o,i),m=f.step,g=f.tickMin,p=f.tickMax,v=Sy.rangeStep(g,p.add(new Dt(.1).mul(m)),m);return n>s?Hw(v):v}function vye(e,t){var n=Df(e,2),s=n[0],a=n[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=c5([s,a]),l=Df(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[s,a];if(c===u)return[c];var d=Math.max(t,2),h=u5(new Dt(u).sub(c).div(d-1),i,0),f=[].concat(Gw(Sy.rangeStep(new Dt(c),new Dt(u).sub(new Dt(.99).mul(h)),h)),[u]);return s>a?Hw(f):f}var xye=o5(gye),yye=o5(vye),jye="Invariant failed";function Kl(e,t){throw new Error(jye)}var bye=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Uu(e){"@babel/helpers - typeof";return Uu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uu(e)}function jv(){return jv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},jv.apply(this,arguments)}function wye(e,t){return _ye(e)||Cye(e,t)||Sye(e,t)||Nye()}function Nye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sye(e,t){if(e){if(typeof e=="string")return Yk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yk(e,t)}}function Yk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Cye(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function _ye(e){if(Array.isArray(e))return e}function Pye(e,t){if(e==null)return{};var n=Aye(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Aye(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function kye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tye(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,m5(s.key),s)}}function Eye(e,t,n){return t&&Tye(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Oye(e,t,n){return t=bv(t),Dye(e,h5()?Reflect.construct(t,n||[],bv(e).constructor):t.apply(e,n))}function Dye(e,t){if(t&&(Uu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mye(e)}function Mye(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(h5=function(){return!!e})()}function bv(e){return bv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},bv(e)}function Iye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yw(e,t)}function Yw(e,t){return Yw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},Yw(e,t)}function f5(e,t,n){return t=m5(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m5(e){var t=$ye(e,"string");return Uu(t)=="symbol"?t:t+""}function $ye(e,t){if(Uu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Uu(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Tm=function(e){function t(){return kye(this,t),Oye(this,t,arguments)}return Iye(t,e),Eye(t,[{key:"render",value:function(){var s=this.props,a=s.offset,i=s.layout,o=s.width,l=s.dataKey,c=s.data,u=s.dataPointFormatter,d=s.xAxis,h=s.yAxis,f=Pye(s,bye),m=Re(f,!1);this.props.direction==="x"&&d.type!=="number"&&Kl();var g=c.map(function(p){var v=u(p,l),j=v.x,x=v.y,y=v.value,N=v.errorVal;if(!N)return null;var w=[],C,S;if(Array.isArray(N)){var _=wye(N,2);C=_[0],S=_[1]}else C=S=N;if(i==="vertical"){var k=d.scale,T=x+a,P=T+o,A=T-o,B=k(y-C),L=k(y+S);w.push({x1:L,y1:P,x2:L,y2:A}),w.push({x1:B,y1:T,x2:L,y2:T}),w.push({x1:B,y1:P,x2:B,y2:A})}else if(i==="horizontal"){var H=h.scale,z=j+a,$=z-o,I=z+o,E=H(y-C),q=H(y+S);w.push({x1:$,y1:q,x2:I,y2:q}),w.push({x1:z,y1:E,x2:z,y2:q}),w.push({x1:$,y1:E,x2:I,y2:E})}return F.createElement(ht,jv({className:"recharts-errorBar",key:"bar-".concat(w.map(function(Y){return"".concat(Y.x1,"-").concat(Y.x2,"-").concat(Y.y1,"-").concat(Y.y2)}))},m),w.map(function(Y){return F.createElement("line",jv({},Y,{key:"line-".concat(Y.x1,"-").concat(Y.x2,"-").concat(Y.y1,"-").concat(Y.y2)}))}))});return F.createElement(ht,{className:"recharts-errorBars"},g)}}])}(F.Component);f5(Tm,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});f5(Tm,"displayName","ErrorBar");function Mf(e){"@babel/helpers - typeof";return Mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mf(e)}function Qk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Ko(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Qk(Object(n),!0).forEach(function(s){Rye(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qk(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Rye(e,t,n){return t=Fye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fye(e){var t=Lye(e,"string");return Mf(t)=="symbol"?t:t+""}function Lye(e,t){if(Mf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Mf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var p5=function(t){var n=t.children,s=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,o=Xr(n,su);if(!o)return null;var l=su.defaultProps,c=l!==void 0?Ko(Ko({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(s||[]).reduce(function(d,h){var f=h.item,m=h.props,g=m.sectors||m.data||[];return d.concat(g.map(function(p){return{type:o.props.iconType||f.props.legendType,value:p.name,color:p.fill,payload:p}}))},[]):u=(s||[]).map(function(d){var h=d.item,f=h.type.defaultProps,m=f!==void 0?Ko(Ko({},f),h.props):{},g=m.dataKey,p=m.name,v=m.legendType,j=m.hide;return{inactive:j,dataKey:g,type:c.iconType||v||"square",color:IC(h),value:p||g,payload:m}}),Ko(Ko(Ko({},c),su.getWithHeight(o,a)),{},{payload:u,item:o})};function If(e){"@babel/helpers - typeof";return If=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},If(e)}function Xk(e){return qye(e)||zye(e)||Vye(e)||Bye()}function Bye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vye(e,t){if(e){if(typeof e=="string")return Qw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qw(e,t)}}function zye(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function qye(e){if(Array.isArray(e))return Qw(e)}function Qw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Jk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function fn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Jk(Object(n),!0).forEach(function(s){iu(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jk(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function iu(e,t,n){return t=Uye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Uye(e){var t=Wye(e,"string");return If(t)=="symbol"?t:t+""}function Wye(e,t){if(If(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(If(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gn(e,t,n){return Qe(e)||Qe(t)?n:In(t)?ss(e,t,n):qe(t)?t(e):n}function Bh(e,t,n,s){var a=zxe(e,function(l){return gn(l,t)});if(n==="number"){var i=a.filter(function(l){return je(l)||parseFloat(l)});return i.length?[wy(i),co(i)]:[1/0,-1/0]}var o=s?a.filter(function(l){return!Qe(l)}):a;return o.map(function(l){return In(l)||l instanceof Date?l:""})}var Hye=function(t){var n,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=s==null?void 0:s.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,u=0;u<l;u++){var d=u>0?a[u-1].coordinate:a[l-1].coordinate,h=a[u].coordinate,f=u>=l-1?a[0].coordinate:a[u+1].coordinate,m=void 0;if(yr(h-d)!==yr(f-h)){var g=[];if(yr(f-h)===yr(c[1]-c[0])){m=f;var p=h+c[1]-c[0];g[0]=Math.min(p,(p+d)/2),g[1]=Math.max(p,(p+d)/2)}else{m=d;var v=f+c[1]-c[0];g[0]=Math.min(h,(v+h)/2),g[1]=Math.max(h,(v+h)/2)}var j=[Math.min(h,(m+h)/2),Math.max(h,(m+h)/2)];if(t>j[0]&&t<=j[1]||t>=g[0]&&t<=g[1]){o=a[u].index;break}}else{var x=Math.min(d,f),y=Math.max(d,f);if(t>(x+h)/2&&t<=(y+h)/2){o=a[u].index;break}}}else for(var N=0;N<l;N++)if(N===0&&t<=(s[N].coordinate+s[N+1].coordinate)/2||N>0&&N<l-1&&t>(s[N].coordinate+s[N-1].coordinate)/2&&t<=(s[N].coordinate+s[N+1].coordinate)/2||N===l-1&&t>(s[N].coordinate+s[N-1].coordinate)/2){o=s[N].index;break}return o},IC=function(t){var n,s=t,a=s.type.displayName,i=(n=t.type)!==null&&n!==void 0&&n.defaultProps?fn(fn({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},Gye=function(t){var n=t.barSize,s=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},l=Object.keys(i),c=0,u=l.length;c<u;c++)for(var d=i[l[c]].stackGroups,h=Object.keys(d),f=0,m=h.length;f<m;f++){var g=d[h[f]],p=g.items,v=g.cateAxisId,j=p.filter(function(S){return hi(S.type).indexOf("Bar")>=0});if(j&&j.length){var x=j[0].type.defaultProps,y=x!==void 0?fn(fn({},x),j[0].props):j[0].props,N=y.barSize,w=y[v];o[w]||(o[w]=[]);var C=Qe(N)?n:N;o[w].push({item:j[0],stackList:j.slice(1),barSize:Qe(C)?void 0:jr(C,s,0)})}}return o},Kye=function(t){var n=t.barGap,s=t.barCategoryGap,a=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var u=jr(n,a,0,!0),d,h=[];if(o[0].barSize===+o[0].barSize){var f=!1,m=a/c,g=o.reduce(function(N,w){return N+w.barSize||0},0);g+=(c-1)*u,g>=a&&(g-=(c-1)*u,u=0),g>=a&&m>0&&(f=!0,m*=.9,g=c*m);var p=(a-g)/2>>0,v={offset:p-u,size:0};d=o.reduce(function(N,w){var C={item:w.item,position:{offset:v.offset+v.size+u,size:f?m:w.barSize}},S=[].concat(Xk(N),[C]);return v=S[S.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function(_){S.push({item:_,position:v})}),S},h)}else{var j=jr(s,a,0,!0);a-2*j-(c-1)*u<=0&&(u=0);var x=(a-2*j-(c-1)*u)/c;x>1&&(x>>=0);var y=l===+l?Math.min(x,l):x;d=o.reduce(function(N,w,C){var S=[].concat(Xk(N),[{item:w.item,position:{offset:j+(x+u)*C+(x-y)/2,size:y}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function(_){S.push({item:_,position:S[S.length-1].position})}),S},h)}return d},Yye=function(t,n,s,a){var i=s.children,o=s.width,l=s.margin,c=o-(l.left||0)-(l.right||0),u=p5({children:i,legendWidth:c});if(u){var d=a||{},h=d.width,f=d.height,m=u.align,g=u.verticalAlign,p=u.layout;if((p==="vertical"||p==="horizontal"&&g==="middle")&&m!=="center"&&je(t[m]))return fn(fn({},t),{},iu({},m,t[m]+(h||0)));if((p==="horizontal"||p==="vertical"&&m==="center")&&g!=="middle"&&je(t[g]))return fn(fn({},t),{},iu({},g,t[g]+(f||0)))}return t},Qye=function(t,n,s){return Qe(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||s==="x"?n==="xAxis":s==="y"?n==="yAxis":!0},g5=function(t,n,s,a,i){var o=n.props.children,l=as(o,Tm).filter(function(u){return Qye(a,i,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var h=gn(d,s);if(Qe(h))return u;var f=Array.isArray(h)?[wy(h),co(h)]:[h,h],m=c.reduce(function(g,p){var v=gn(d,p,0),j=f[0]-Math.abs(Array.isArray(v)?v[0]:v),x=f[1]+Math.abs(Array.isArray(v)?v[1]:v);return[Math.min(j,g[0]),Math.max(x,g[1])]},[1/0,-1/0]);return[Math.min(m[0],u[0]),Math.max(m[1],u[1])]},[1/0,-1/0])}return null},Xye=function(t,n,s,a,i){var o=n.map(function(l){return g5(t,l,s,i,a)}).filter(function(l){return!Qe(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},v5=function(t,n,s,a,i){var o=n.map(function(c){var u=c.props.dataKey;return s==="number"&&u&&g5(t,c,u,a)||Bh(t,u,s,i)});if(s==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var d=0,h=u.length;d<h;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},x5=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},y5=function(t,n,s,a){if(a)return t.map(function(c){return c.coordinate});var i,o,l=t.map(function(c){return c.coordinate===n&&(i=!0),c.coordinate===s&&(o=!0),c.coordinate});return i||l.push(n),o||l.push(s),l},ui=function(t,n,s){if(!t)return null;var a=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(n||s)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?yr(l[0]-l[1])*2*u:u,n&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(h){var f=i?i.indexOf(h):h;return{coordinate:a(f)+u,value:h,offset:u}});return d.filter(function(h){return!Od(h.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(h,f){return{coordinate:a(h)+u,value:h,index:f,offset:u}}):a.ticks&&!s?a.ticks(t.tickCount).map(function(h){return{coordinate:a(h)+u,value:h,offset:u}}):a.domain().map(function(h,f){return{coordinate:a(h)+u,value:i?i[h]:h,index:f,offset:u}})},oj=new WeakMap,Tp=function(t,n){if(typeof n!="function")return t;oj.has(t)||oj.set(t,new WeakMap);var s=oj.get(t);if(s.has(n))return s.get(n);var a=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return s.set(n,a),a},j5=function(t,n,s){var a=t.scale,i=t.type,o=t.layout,l=t.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Pf(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:pv(),realScaleType:"linear"}:i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!s)?{scale:Lh(),realScaleType:"point"}:i==="category"?{scale:Pf(),realScaleType:"band"}:{scale:pv(),realScaleType:"linear"};if(ql(a)){var c="scale".concat(ly(a));return{scale:(Wk[c]||Lh)(),realScaleType:Wk[c]?c:"point"}}return qe(a)?{scale:a}:{scale:Lh(),realScaleType:"point"}},Zk=1e-4,b5=function(t){var n=t.domain();if(!(!n||n.length<=2)){var s=n.length,a=t.range(),i=Math.min(a[0],a[1])-Zk,o=Math.max(a[0],a[1])+Zk,l=t(n[0]),c=t(n[s-1]);(l<i||l>o||c<i||c>o)&&t.domain([n[0],n[s-1]])}},Jye=function(t,n){if(!t)return null;for(var s=0,a=t.length;s<a;s++)if(t[s].item===n)return t[s].position;return null},Zye=function(t,n){if(!n||n.length!==2||!je(n[0])||!je(n[1]))return t;var s=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]),i=[t[0],t[1]];return(!je(t[0])||t[0]<s)&&(i[0]=s),(!je(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<s&&(i[1]=s),i},e0e=function(t){var n=t.length;if(!(n<=0))for(var s=0,a=t[0].length;s<a;++s)for(var i=0,o=0,l=0;l<n;++l){var c=Od(t[l][s][1])?t[l][s][0]:t[l][s][1];c>=0?(t[l][s][0]=i,t[l][s][1]=i+c,i=t[l][s][1]):(t[l][s][0]=o,t[l][s][1]=o+c,o=t[l][s][1])}},t0e=function(t){var n=t.length;if(!(n<=0))for(var s=0,a=t[0].length;s<a;++s)for(var i=0,o=0;o<n;++o){var l=Od(t[o][s][1])?t[o][s][0]:t[o][s][1];l>=0?(t[o][s][0]=i,t[o][s][1]=i+l,i=t[o][s][1]):(t[o][s][0]=0,t[o][s][1]=0)}},n0e={sign:e0e,expand:bie,none:$u,silhouette:wie,wiggle:Nie,positive:t0e},r0e=function(t,n,s){var a=n.map(function(l){return l.props.dataKey}),i=n0e[s],o=jie().keys(a).value(function(l,c){return+gn(l,c,0)}).order(bw).offset(i);return o(t)},s0e=function(t,n,s,a,i,o){if(!t)return null;var l=o?n.reverse():n,c={},u=l.reduce(function(h,f){var m,g=(m=f.type)!==null&&m!==void 0&&m.defaultProps?fn(fn({},f.type.defaultProps),f.props):f.props,p=g.stackId,v=g.hide;if(v)return h;var j=g[s],x=h[j]||{hasStack:!1,stackGroups:{}};if(In(p)){var y=x.stackGroups[p]||{numericAxisId:s,cateAxisId:a,items:[]};y.items.push(f),x.hasStack=!0,x.stackGroups[p]=y}else x.stackGroups[ac("_stackId_")]={numericAxisId:s,cateAxisId:a,items:[f]};return fn(fn({},h),{},iu({},j,x))},c),d={};return Object.keys(u).reduce(function(h,f){var m=u[f];if(m.hasStack){var g={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(p,v){var j=m.stackGroups[v];return fn(fn({},p),{},iu({},v,{numericAxisId:s,cateAxisId:a,items:j.items,stackedData:r0e(t,j.items,i)}))},g)}return fn(fn({},h),{},iu({},f,m))},d)},w5=function(t,n){var s=n.realScaleType,a=n.type,i=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=s||n.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=xye(u,i,l);return t.domain([wy(d),co(d)]),{niceTicks:d}}if(i&&a==="number"){var h=t.domain(),f=yye(h,i,l);return{niceTicks:f}}return null};function wv(e){var t=e.axis,n=e.ticks,s=e.bandSize,a=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Qe(a[t.dataKey])){var l=Kg(n,"value",a[t.dataKey]);if(l)return l.coordinate+s/2}return n[i]?n[i].coordinate+s/2:null}var c=gn(a,Qe(o)?t.dataKey:o);return Qe(c)?null:t.scale(c)}var eT=function(t){var n=t.axis,s=t.ticks,a=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(n.type==="category")return s[l]?s[l].coordinate+a:null;var c=gn(o,n.dataKey,n.domain[l]);return Qe(c)?null:n.scale(c)-i/2+a},a0e=function(t){var n=t.numericAxis,s=n.scale.domain();if(n.type==="number"){var a=Math.min(s[0],s[1]),i=Math.max(s[0],s[1]);return a<=0&&i>=0?0:i<0?i:a}return s[0]},i0e=function(t,n){var s,a=(s=t.type)!==null&&s!==void 0&&s.defaultProps?fn(fn({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(In(i)){var o=n[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},o0e=function(t){return t.reduce(function(n,s){return[wy(s.concat([n[0]]).filter(je)),co(s.concat([n[1]]).filter(je))]},[1/0,-1/0])},N5=function(t,n,s){return Object.keys(t).reduce(function(a,i){var o=t[i],l=o.stackedData,c=l.reduce(function(u,d){var h=o0e(d.slice(n,s+1));return[Math.min(u[0],h[0]),Math.max(u[1],h[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},tT=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,nT=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Xw=function(t,n,s){if(qe(t))return t(n,s);if(!Array.isArray(t))return n;var a=[];if(je(t[0]))a[0]=s?t[0]:Math.min(t[0],n[0]);else if(tT.test(t[0])){var i=+tT.exec(t[0])[1];a[0]=n[0]-i}else qe(t[0])?a[0]=t[0](n[0]):a[0]=n[0];if(je(t[1]))a[1]=s?t[1]:Math.max(t[1],n[1]);else if(nT.test(t[1])){var o=+nT.exec(t[1])[1];a[1]=n[1]+o}else qe(t[1])?a[1]=t[1](n[1]):a[1]=n[1];return a},Nv=function(t,n,s){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!s||a>0)return a}if(t&&n&&n.length>=2){for(var i=cC(n,function(h){return h.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var u=i[l],d=i[l-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return s?void 0:0},rT=function(t,n,s){return!t||!t.length||Hl(t,ss(s,"type.defaultProps.domain"))?n:t},S5=function(t,n){var s=t.type.defaultProps?fn(fn({},t.type.defaultProps),t.props):t.props,a=s.dataKey,i=s.name,o=s.unit,l=s.formatter,c=s.tooltipType,u=s.chartType,d=s.hide;return fn(fn({},Re(t,!1)),{},{dataKey:a,unit:o,formatter:l,name:i||a,color:IC(t),value:gn(n,a),type:c,payload:n,chartType:u,hide:d})};function $f(e){"@babel/helpers - typeof";return $f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$f(e)}function sT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function ei(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sT(Object(n),!0).forEach(function(s){C5(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function C5(e,t,n){return t=l0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l0e(e){var t=c0e(e,"string");return $f(t)=="symbol"?t:t+""}function c0e(e,t){if($f(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if($f(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function u0e(e,t){return m0e(e)||f0e(e,t)||h0e(e,t)||d0e()}function d0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function h0e(e,t){if(e){if(typeof e=="string")return aT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aT(e,t)}}function aT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function f0e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function m0e(e){if(Array.isArray(e))return e}var Sv=Math.PI/180,p0e=function(t){return t*180/Math.PI},zt=function(t,n,s,a){return{x:t+Math.cos(-Sv*a)*s,y:n+Math.sin(-Sv*a)*s}},_5=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(s.left||0)-(s.right||0)),Math.abs(n-(s.top||0)-(s.bottom||0)))/2},g0e=function(t,n,s,a,i){var o=t.width,l=t.height,c=t.startAngle,u=t.endAngle,d=jr(t.cx,o,o/2),h=jr(t.cy,l,l/2),f=_5(o,l,s),m=jr(t.innerRadius,f,0),g=jr(t.outerRadius,f,f*.8),p=Object.keys(n);return p.reduce(function(v,j){var x=n[j],y=x.domain,N=x.reversed,w;if(Qe(x.range))a==="angleAxis"?w=[c,u]:a==="radiusAxis"&&(w=[m,g]),N&&(w=[w[1],w[0]]);else{w=x.range;var C=w,S=u0e(C,2);c=S[0],u=S[1]}var _=j5(x,i),k=_.realScaleType,T=_.scale;T.domain(y).range(w),b5(T);var P=w5(T,ei(ei({},x),{},{realScaleType:k})),A=ei(ei(ei({},x),P),{},{range:w,radius:g,realScaleType:k,scale:T,cx:d,cy:h,innerRadius:m,outerRadius:g,startAngle:c,endAngle:u});return ei(ei({},v),{},C5({},j,A))},{})},v0e=function(t,n){var s=t.x,a=t.y,i=n.x,o=n.y;return Math.sqrt(Math.pow(s-i,2)+Math.pow(a-o,2))},x0e=function(t,n){var s=t.x,a=t.y,i=n.cx,o=n.cy,l=v0e({x:s,y:a},{x:i,y:o});if(l<=0)return{radius:l};var c=(s-i)/l,u=Math.acos(c);return a>o&&(u=2*Math.PI-u),{radius:l,angle:p0e(u),angleInRadian:u}},y0e=function(t){var n=t.startAngle,s=t.endAngle,a=Math.floor(n/360),i=Math.floor(s/360),o=Math.min(a,i);return{startAngle:n-o*360,endAngle:s-o*360}},j0e=function(t,n){var s=n.startAngle,a=n.endAngle,i=Math.floor(s/360),o=Math.floor(a/360),l=Math.min(i,o);return t+l*360},iT=function(t,n){var s=t.x,a=t.y,i=x0e({x:s,y:a},n),o=i.radius,l=i.angle,c=n.innerRadius,u=n.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var d=y0e(n),h=d.startAngle,f=d.endAngle,m=l,g;if(h<=f){for(;m>f;)m-=360;for(;m<h;)m+=360;g=m>=h&&m<=f}else{for(;m>h;)m-=360;for(;m<f;)m+=360;g=m>=f&&m<=h}return g?ei(ei({},n),{},{radius:o,angle:j0e(m,n)}):null},P5=function(t){return!b.isValidElement(t)&&!qe(t)&&typeof t!="boolean"?t.className:""};function Rf(e){"@babel/helpers - typeof";return Rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rf(e)}var b0e=["offset"];function w0e(e){return _0e(e)||C0e(e)||S0e(e)||N0e()}function N0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S0e(e,t){if(e){if(typeof e=="string")return Jw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jw(e,t)}}function C0e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _0e(e){if(Array.isArray(e))return Jw(e)}function Jw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function P0e(e,t){if(e==null)return{};var n=A0e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function A0e(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function oT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function _n(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oT(Object(n),!0).forEach(function(s){k0e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function k0e(e,t,n){return t=T0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T0e(e){var t=E0e(e,"string");return Rf(t)=="symbol"?t:t+""}function E0e(e,t){if(Rf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Rf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ff(){return Ff=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ff.apply(this,arguments)}var O0e=function(t){var n=t.value,s=t.formatter,a=Qe(t.children)?n:t.children;return qe(s)?s(a):a},D0e=function(t,n){var s=yr(n-t),a=Math.min(Math.abs(n-t),360);return s*a},M0e=function(t,n,s){var a=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,u=c.cx,d=c.cy,h=c.innerRadius,f=c.outerRadius,m=c.startAngle,g=c.endAngle,p=c.clockWise,v=(h+f)/2,j=D0e(m,g),x=j>=0?1:-1,y,N;a==="insideStart"?(y=m+x*o,N=p):a==="insideEnd"?(y=g-x*o,N=!p):a==="end"&&(y=g+x*o,N=p),N=j<=0?N:!N;var w=zt(u,d,v,y),C=zt(u,d,v,y+(N?1:-1)*359),S="M".concat(w.x,",").concat(w.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(N?0:1,`,
    `).concat(C.x,",").concat(C.y),_=Qe(t.id)?ac("recharts-radial-line-"):t.id;return F.createElement("text",Ff({},s,{dominantBaseline:"central",className:Ze("recharts-radial-bar-label",l)}),F.createElement("defs",null,F.createElement("path",{id:_,d:S})),F.createElement("textPath",{xlinkHref:"#".concat(_)},n))},I0e=function(t){var n=t.viewBox,s=t.offset,a=t.position,i=n,o=i.cx,l=i.cy,c=i.innerRadius,u=i.outerRadius,d=i.startAngle,h=i.endAngle,f=(d+h)/2;if(a==="outside"){var m=zt(o,l,u+s,f),g=m.x,p=m.y;return{x:g,y:p,textAnchor:g>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var v=(c+u)/2,j=zt(o,l,v,f),x=j.x,y=j.y;return{x,y,textAnchor:"middle",verticalAnchor:"middle"}},$0e=function(t){var n=t.viewBox,s=t.parentViewBox,a=t.offset,i=t.position,o=n,l=o.x,c=o.y,u=o.width,d=o.height,h=d>=0?1:-1,f=h*a,m=h>0?"end":"start",g=h>0?"start":"end",p=u>=0?1:-1,v=p*a,j=p>0?"end":"start",x=p>0?"start":"end";if(i==="top"){var y={x:l+u/2,y:c-h*a,textAnchor:"middle",verticalAnchor:m};return _n(_n({},y),s?{height:Math.max(c-s.y,0),width:u}:{})}if(i==="bottom"){var N={x:l+u/2,y:c+d+f,textAnchor:"middle",verticalAnchor:g};return _n(_n({},N),s?{height:Math.max(s.y+s.height-(c+d),0),width:u}:{})}if(i==="left"){var w={x:l-v,y:c+d/2,textAnchor:j,verticalAnchor:"middle"};return _n(_n({},w),s?{width:Math.max(w.x-s.x,0),height:d}:{})}if(i==="right"){var C={x:l+u+v,y:c+d/2,textAnchor:x,verticalAnchor:"middle"};return _n(_n({},C),s?{width:Math.max(s.x+s.width-C.x,0),height:d}:{})}var S=s?{width:u,height:d}:{};return i==="insideLeft"?_n({x:l+v,y:c+d/2,textAnchor:x,verticalAnchor:"middle"},S):i==="insideRight"?_n({x:l+u-v,y:c+d/2,textAnchor:j,verticalAnchor:"middle"},S):i==="insideTop"?_n({x:l+u/2,y:c+f,textAnchor:"middle",verticalAnchor:g},S):i==="insideBottom"?_n({x:l+u/2,y:c+d-f,textAnchor:"middle",verticalAnchor:m},S):i==="insideTopLeft"?_n({x:l+v,y:c+f,textAnchor:x,verticalAnchor:g},S):i==="insideTopRight"?_n({x:l+u-v,y:c+f,textAnchor:j,verticalAnchor:g},S):i==="insideBottomLeft"?_n({x:l+v,y:c+d-f,textAnchor:x,verticalAnchor:m},S):i==="insideBottomRight"?_n({x:l+u-v,y:c+d-f,textAnchor:j,verticalAnchor:m},S):Ad(i)&&(je(i.x)||dl(i.x))&&(je(i.y)||dl(i.y))?_n({x:l+jr(i.x,u),y:c+jr(i.y,d),textAnchor:"end",verticalAnchor:"end"},S):_n({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},S)},R0e=function(t){return"cx"in t&&je(t.cx)};function Un(e){var t=e.offset,n=t===void 0?5:t,s=P0e(e,b0e),a=_n({offset:n},s),i=a.viewBox,o=a.position,l=a.value,c=a.children,u=a.content,d=a.className,h=d===void 0?"":d,f=a.textBreakAll;if(!i||Qe(l)&&Qe(c)&&!b.isValidElement(u)&&!qe(u))return null;if(b.isValidElement(u))return b.cloneElement(u,a);var m;if(qe(u)){if(m=b.createElement(u,a),b.isValidElement(m))return m}else m=O0e(a);var g=R0e(i),p=Re(a,!0);if(g&&(o==="insideStart"||o==="insideEnd"||o==="end"))return M0e(a,m,p);var v=g?I0e(a):$0e(a);return F.createElement(Wl,Ff({className:Ze("recharts-label",h)},p,v,{breakAll:f}),m)}Un.displayName="Label";var A5=function(t){var n=t.cx,s=t.cy,a=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,d=t.outerRadius,h=t.x,f=t.y,m=t.top,g=t.left,p=t.width,v=t.height,j=t.clockWise,x=t.labelViewBox;if(x)return x;if(je(p)&&je(v)){if(je(h)&&je(f))return{x:h,y:f,width:p,height:v};if(je(m)&&je(g))return{x:m,y:g,width:p,height:v}}return je(h)&&je(f)?{x:h,y:f,width:0,height:0}:je(n)&&je(s)?{cx:n,cy:s,startAngle:i||a||0,endAngle:o||a||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:j}:t.viewBox?t.viewBox:{}},F0e=function(t,n){return t?t===!0?F.createElement(Un,{key:"label-implicit",viewBox:n}):In(t)?F.createElement(Un,{key:"label-implicit",viewBox:n,value:t}):b.isValidElement(t)?t.type===Un?b.cloneElement(t,{key:"label-implicit",viewBox:n}):F.createElement(Un,{key:"label-implicit",content:t,viewBox:n}):qe(t)?F.createElement(Un,{key:"label-implicit",content:t,viewBox:n}):Ad(t)?F.createElement(Un,Ff({viewBox:n},t,{key:"label-implicit"})):null:null},L0e=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&s&&!t.label)return null;var a=t.children,i=A5(t),o=as(a,Un).map(function(c,u){return b.cloneElement(c,{viewBox:n||i,key:"label-".concat(u)})});if(!s)return o;var l=F0e(t.label,n||i);return[l].concat(w0e(o))};Un.parseViewBox=A5;Un.renderCallByParent=L0e;function B0e(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var V0e=B0e;const z0e=Pt(V0e);function Lf(e){"@babel/helpers - typeof";return Lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lf(e)}var q0e=["valueAccessor"],U0e=["data","dataKey","clockWise","id","textBreakAll"];function W0e(e){return Y0e(e)||K0e(e)||G0e(e)||H0e()}function H0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G0e(e,t){if(e){if(typeof e=="string")return Zw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zw(e,t)}}function K0e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Y0e(e){if(Array.isArray(e))return Zw(e)}function Zw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Cv(){return Cv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Cv.apply(this,arguments)}function lT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function cT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lT(Object(n),!0).forEach(function(s){Q0e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Q0e(e,t,n){return t=X0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X0e(e){var t=J0e(e,"string");return Lf(t)=="symbol"?t:t+""}function J0e(e,t){if(Lf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Lf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uT(e,t){if(e==null)return{};var n=Z0e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Z0e(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var eje=function(t){return Array.isArray(t.value)?z0e(t.value):t.value};function Ra(e){var t=e.valueAccessor,n=t===void 0?eje:t,s=uT(e,q0e),a=s.data,i=s.dataKey,o=s.clockWise,l=s.id,c=s.textBreakAll,u=uT(s,U0e);return!a||!a.length?null:F.createElement(ht,{className:"recharts-label-list"},a.map(function(d,h){var f=Qe(i)?n(d,h):gn(d&&d.payload,i),m=Qe(l)?{}:{id:"".concat(l,"-").concat(h)};return F.createElement(Un,Cv({},Re(d,!0),u,m,{parentViewBox:d.parentViewBox,value:f,textBreakAll:c,viewBox:Un.parseViewBox(Qe(o)?d:cT(cT({},d),{},{clockWise:o})),key:"label-".concat(h),index:h}))}))}Ra.displayName="LabelList";function tje(e,t){return e?e===!0?F.createElement(Ra,{key:"labelList-implicit",data:t}):F.isValidElement(e)||qe(e)?F.createElement(Ra,{key:"labelList-implicit",data:t,content:e}):Ad(e)?F.createElement(Ra,Cv({data:t},e,{key:"labelList-implicit"})):null:null}function nje(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var s=e.children,a=as(s,Ra).map(function(o,l){return b.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!n)return a;var i=tje(e.label,t);return[i].concat(W0e(a))}Ra.renderCallByParent=nje;function Bf(e){"@babel/helpers - typeof";return Bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bf(e)}function eN(){return eN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},eN.apply(this,arguments)}function dT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function hT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dT(Object(n),!0).forEach(function(s){rje(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function rje(e,t,n){return t=sje(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sje(e){var t=aje(e,"string");return Bf(t)=="symbol"?t:t+""}function aje(e,t){if(Bf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Bf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ije=function(t,n){var s=yr(n-t),a=Math.min(Math.abs(n-t),359.999);return s*a},Ep=function(t){var n=t.cx,s=t.cy,a=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,d=c*(l?1:-1)+a,h=Math.asin(c/d)/Sv,f=u?i:i+o*h,m=zt(n,s,d,f),g=zt(n,s,a,f),p=u?i-o*h:i,v=zt(n,s,d*Math.cos(h*Sv),p);return{center:m,circleTangency:g,lineTangency:v,theta:h}},k5=function(t){var n=t.cx,s=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=ije(o,l),u=o+c,d=zt(n,s,i,o),h=zt(n,s,i,u),f="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(a>0){var m=zt(n,s,a,o),g=zt(n,s,a,u);f+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(m.x,",").concat(m.y," Z")}else f+="L ".concat(n,",").concat(s," Z");return f},oje=function(t){var n=t.cx,s=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,h=yr(d-u),f=Ep({cx:n,cy:s,radius:i,angle:u,sign:h,cornerRadius:o,cornerIsExternal:c}),m=f.circleTangency,g=f.lineTangency,p=f.theta,v=Ep({cx:n,cy:s,radius:i,angle:d,sign:-h,cornerRadius:o,cornerIsExternal:c}),j=v.circleTangency,x=v.lineTangency,y=v.theta,N=c?Math.abs(u-d):Math.abs(u-d)-p-y;if(N<0)return l?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):k5({cx:n,cy:s,innerRadius:a,outerRadius:i,startAngle:u,endAngle:d});var w="M ".concat(g.x,",").concat(g.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(N>180),",").concat(+(h<0),",").concat(j.x,",").concat(j.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(x.x,",").concat(x.y,`
  `);if(a>0){var C=Ep({cx:n,cy:s,radius:a,angle:u,sign:h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),S=C.circleTangency,_=C.lineTangency,k=C.theta,T=Ep({cx:n,cy:s,radius:a,angle:d,sign:-h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),P=T.circleTangency,A=T.lineTangency,B=T.theta,L=c?Math.abs(u-d):Math.abs(u-d)-k-B;if(L<0&&o===0)return"".concat(w,"L").concat(n,",").concat(s,"Z");w+="L".concat(A.x,",").concat(A.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(L>180),",").concat(+(h>0),",").concat(S.x,",").concat(S.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(_.x,",").concat(_.y,"Z")}else w+="L".concat(n,",").concat(s,"Z");return w},lje={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},T5=function(t){var n=hT(hT({},lje),t),s=n.cx,a=n.cy,i=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,u=n.cornerIsExternal,d=n.startAngle,h=n.endAngle,f=n.className;if(o<i||d===h)return null;var m=Ze("recharts-sector",f),g=o-i,p=jr(l,g,0,!0),v;return p>0&&Math.abs(d-h)<360?v=oje({cx:s,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(p,g/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:h}):v=k5({cx:s,cy:a,innerRadius:i,outerRadius:o,startAngle:d,endAngle:h}),F.createElement("path",eN({},Re(n,!0),{className:m,d:v,role:"img"}))};function Vf(e){"@babel/helpers - typeof";return Vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vf(e)}function tN(){return tN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},tN.apply(this,arguments)}function fT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function mT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fT(Object(n),!0).forEach(function(s){cje(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function cje(e,t,n){return t=uje(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uje(e){var t=dje(e,"string");return Vf(t)=="symbol"?t:t+""}function dje(e,t){if(Vf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Vf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pT={curveBasisClosed:cie,curveBasisOpen:uie,curveBasis:lie,curveBumpX:Kae,curveBumpY:Yae,curveLinearClosed:die,curveLinear:uy,curveMonotoneX:hie,curveMonotoneY:fie,curveNatural:mie,curveStep:pie,curveStepAfter:vie,curveStepBefore:gie},Op=function(t){return t.x===+t.x&&t.y===+t.y},ch=function(t){return t.x},uh=function(t){return t.y},hje=function(t,n){if(qe(t))return t;var s="curve".concat(ly(t));return(s==="curveMonotone"||s==="curveBump")&&n?pT["".concat(s).concat(n==="vertical"?"Y":"X")]:pT[s]||uy},fje=function(t){var n=t.type,s=n===void 0?"linear":n,a=t.points,i=a===void 0?[]:a,o=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,d=hje(s,l),h=u?i.filter(function(p){return Op(p)}):i,f;if(Array.isArray(o)){var m=u?o.filter(function(p){return Op(p)}):o,g=h.map(function(p,v){return mT(mT({},p),{},{base:m[v]})});return l==="vertical"?f=wp().y(uh).x1(ch).x0(function(p){return p.base.x}):f=wp().x(ch).y1(uh).y0(function(p){return p.base.y}),f.defined(Op).curve(d),f(g)}return l==="vertical"&&je(o)?f=wp().y(uh).x1(ch).x0(o):je(o)?f=wp().x(ch).y1(uh).y0(o):f=SF().x(ch).y(uh),f.defined(Op).curve(d),f(h)},kl=function(t){var n=t.className,s=t.points,a=t.path,i=t.pathRef;if((!s||!s.length)&&!a)return null;var o=s&&s.length?fje(t):a;return b.createElement("path",tN({},Re(t,!1),Yg(t),{className:Ze("recharts-curve",n),d:o,ref:i}))},E5={exports:{}},mje="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",pje=mje,gje=pje;function O5(){}function D5(){}D5.resetWarningCache=O5;var vje=function(){function e(s,a,i,o,l,c){if(c!==gje){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:D5,resetWarningCache:O5};return n.PropTypes=n,n};E5.exports=vje();var xje=E5.exports;const St=Pt(xje);var yje=Object.getOwnPropertyNames,jje=Object.getOwnPropertySymbols,bje=Object.prototype.hasOwnProperty;function gT(e,t){return function(s,a,i){return e(s,a,i)&&t(s,a,i)}}function Dp(e){return function(n,s,a){if(!n||!s||typeof n!="object"||typeof s!="object")return e(n,s,a);var i=a.cache,o=i.get(n),l=i.get(s);if(o&&l)return o===s&&l===n;i.set(n,s),i.set(s,n);var c=e(n,s,a);return i.delete(n),i.delete(s),c}}function vT(e){return yje(e).concat(jje(e))}var wje=Object.hasOwn||function(e,t){return bje.call(e,t)};function lc(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var Nje="__v",Sje="__o",Cje="_owner",xT=Object.getOwnPropertyDescriptor,yT=Object.keys;function _je(e,t,n){var s=e.length;if(t.length!==s)return!1;for(;s-- >0;)if(!n.equals(e[s],t[s],s,s,e,t,n))return!1;return!0}function Pje(e,t){return lc(e.getTime(),t.getTime())}function Aje(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function kje(e,t){return e===t}function jT(e,t,n){var s=e.size;if(s!==t.size)return!1;if(!s)return!0;for(var a=new Array(s),i=e.entries(),o,l,c=0;(o=i.next())&&!o.done;){for(var u=t.entries(),d=!1,h=0;(l=u.next())&&!l.done;){if(a[h]){h++;continue}var f=o.value,m=l.value;if(n.equals(f[0],m[0],c,h,e,t,n)&&n.equals(f[1],m[1],f[0],m[0],e,t,n)){d=a[h]=!0;break}h++}if(!d)return!1;c++}return!0}var Tje=lc;function Eje(e,t,n){var s=yT(e),a=s.length;if(yT(t).length!==a)return!1;for(;a-- >0;)if(!M5(e,t,n,s[a]))return!1;return!0}function dh(e,t,n){var s=vT(e),a=s.length;if(vT(t).length!==a)return!1;for(var i,o,l;a-- >0;)if(i=s[a],!M5(e,t,n,i)||(o=xT(e,i),l=xT(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function Oje(e,t){return lc(e.valueOf(),t.valueOf())}function Dje(e,t){return e.source===t.source&&e.flags===t.flags}function bT(e,t,n){var s=e.size;if(s!==t.size)return!1;if(!s)return!0;for(var a=new Array(s),i=e.values(),o,l;(o=i.next())&&!o.done;){for(var c=t.values(),u=!1,d=0;(l=c.next())&&!l.done;){if(!a[d]&&n.equals(o.value,l.value,o.value,l.value,e,t,n)){u=a[d]=!0;break}d++}if(!u)return!1}return!0}function Mje(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function Ije(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function M5(e,t,n,s){return(s===Cje||s===Sje||s===Nje)&&(e.$$typeof||t.$$typeof)?!0:wje(t,s)&&n.equals(e[s],t[s],s,s,e,t,n)}var $je="[object Arguments]",Rje="[object Boolean]",Fje="[object Date]",Lje="[object Error]",Bje="[object Map]",Vje="[object Number]",zje="[object Object]",qje="[object RegExp]",Uje="[object Set]",Wje="[object String]",Hje="[object URL]",Gje=Array.isArray,wT=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,NT=Object.assign,Kje=Object.prototype.toString.call.bind(Object.prototype.toString);function Yje(e){var t=e.areArraysEqual,n=e.areDatesEqual,s=e.areErrorsEqual,a=e.areFunctionsEqual,i=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,d=e.areSetsEqual,h=e.areTypedArraysEqual,f=e.areUrlsEqual;return function(g,p,v){if(g===p)return!0;if(g==null||p==null)return!1;var j=typeof g;if(j!==typeof p)return!1;if(j!=="object")return j==="number"?o(g,p,v):j==="function"?a(g,p,v):!1;var x=g.constructor;if(x!==p.constructor)return!1;if(x===Object)return l(g,p,v);if(Gje(g))return t(g,p,v);if(wT!=null&&wT(g))return h(g,p,v);if(x===Date)return n(g,p,v);if(x===RegExp)return u(g,p,v);if(x===Map)return i(g,p,v);if(x===Set)return d(g,p,v);var y=Kje(g);return y===Fje?n(g,p,v):y===qje?u(g,p,v):y===Bje?i(g,p,v):y===Uje?d(g,p,v):y===zje?typeof g.then!="function"&&typeof p.then!="function"&&l(g,p,v):y===Hje?f(g,p,v):y===Lje?s(g,p,v):y===$je?l(g,p,v):y===Rje||y===Vje||y===Wje?c(g,p,v):!1}}function Qje(e){var t=e.circular,n=e.createCustomConfig,s=e.strict,a={areArraysEqual:s?dh:_je,areDatesEqual:Pje,areErrorsEqual:Aje,areFunctionsEqual:kje,areMapsEqual:s?gT(jT,dh):jT,areNumbersEqual:Tje,areObjectsEqual:s?dh:Eje,arePrimitiveWrappersEqual:Oje,areRegExpsEqual:Dje,areSetsEqual:s?gT(bT,dh):bT,areTypedArraysEqual:s?dh:Mje,areUrlsEqual:Ije};if(n&&(a=NT({},a,n(a))),t){var i=Dp(a.areArraysEqual),o=Dp(a.areMapsEqual),l=Dp(a.areObjectsEqual),c=Dp(a.areSetsEqual);a=NT({},a,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return a}function Xje(e){return function(t,n,s,a,i,o,l){return e(t,n,l)}}function Jje(e){var t=e.circular,n=e.comparator,s=e.createState,a=e.equals,i=e.strict;if(s)return function(c,u){var d=s(),h=d.cache,f=h===void 0?t?new WeakMap:void 0:h,m=d.meta;return n(c,u,{cache:f,equals:a,meta:m,strict:i})};if(t)return function(c,u){return n(c,u,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var o={cache:void 0,equals:a,meta:void 0,strict:i};return function(c,u){return n(c,u,o)}}var Zje=Uo();Uo({strict:!0});Uo({circular:!0});Uo({circular:!0,strict:!0});Uo({createInternalComparator:function(){return lc}});Uo({strict:!0,createInternalComparator:function(){return lc}});Uo({circular:!0,createInternalComparator:function(){return lc}});Uo({circular:!0,createInternalComparator:function(){return lc},strict:!0});function Uo(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,s=e.createInternalComparator,a=e.createState,i=e.strict,o=i===void 0?!1:i,l=Qje(e),c=Yje(l),u=s?s(c):Xje(c);return Jje({circular:n,comparator:c,createState:a,equals:u,strict:o})}function ebe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function ST(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,s=function a(i){n<0&&(n=i),i-n>t?(e(i),n=-1):ebe(a)};requestAnimationFrame(s)}function nN(e){"@babel/helpers - typeof";return nN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nN(e)}function tbe(e){return abe(e)||sbe(e)||rbe(e)||nbe()}function nbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rbe(e,t){if(e){if(typeof e=="string")return CT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return CT(e,t)}}function CT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function sbe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function abe(e){if(Array.isArray(e))return e}function ibe(){var e={},t=function(){return null},n=!1,s=function a(i){if(!n){if(Array.isArray(i)){if(!i.length)return;var o=i,l=tbe(o),c=l[0],u=l.slice(1);if(typeof c=="number"){ST(a.bind(null,u),c);return}a(c),ST(a.bind(null,u));return}nN(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){n=!0},start:function(i){n=!1,s(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function zf(e){"@babel/helpers - typeof";return zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zf(e)}function _T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function PT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_T(Object(n),!0).forEach(function(s){I5(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_T(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function I5(e,t,n){return t=obe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function obe(e){var t=lbe(e,"string");return zf(t)==="symbol"?t:String(t)}function lbe(e,t){if(zf(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(zf(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cbe=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(s,a){return s.filter(function(i){return a.includes(i)})})},ube=function(t){return t},dbe=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Vh=function(t,n){return Object.keys(n).reduce(function(s,a){return PT(PT({},s),{},I5({},a,t(a,n[a])))},{})},AT=function(t,n,s){return t.map(function(a){return"".concat(dbe(a)," ").concat(n,"ms ").concat(s)}).join(",")};function hbe(e,t){return pbe(e)||mbe(e,t)||$5(e,t)||fbe()}function fbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mbe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function pbe(e){if(Array.isArray(e))return e}function gbe(e){return ybe(e)||xbe(e)||$5(e)||vbe()}function vbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $5(e,t){if(e){if(typeof e=="string")return rN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rN(e,t)}}function xbe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ybe(e){if(Array.isArray(e))return rN(e)}function rN(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var _v=1e-4,R5=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},F5=function(t,n){return t.map(function(s,a){return s*Math.pow(n,a)}).reduce(function(s,a){return s+a})},kT=function(t,n){return function(s){var a=R5(t,n);return F5(a,s)}},jbe=function(t,n){return function(s){var a=R5(t,n),i=[].concat(gbe(a.map(function(o,l){return o*l}).slice(1)),[0]);return F5(i,s)}},TT=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];var a=n[0],i=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":a=0,i=0,o=1,l=1;break;case"ease":a=.25,i=.1,o=.25,l=1;break;case"ease-in":a=.42,i=0,o=1,l=1;break;case"ease-out":a=.42,i=0,o=.58,l=1;break;case"ease-in-out":a=0,i=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(v){return parseFloat(v)}),d=hbe(u,4);a=d[0],i=d[1],o=d[2],l=d[3]}}}var h=kT(a,o),f=kT(i,l),m=jbe(a,o),g=function(j){return j>1?1:j<0?0:j},p=function(j){for(var x=j>1?1:j,y=x,N=0;N<8;++N){var w=h(y)-x,C=m(y);if(Math.abs(w-x)<_v||C<_v)return f(y);y=g(y-w/C)}return f(y)};return p.isStepper=!1,p},bbe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,s=n===void 0?100:n,a=t.damping,i=a===void 0?8:a,o=t.dt,l=o===void 0?17:o,c=function(d,h,f){var m=-(d-h)*s,g=f*i,p=f+(m-g)*l/1e3,v=f*l/1e3+d;return Math.abs(v-h)<_v&&Math.abs(p)<_v?[h,0]:[v,p]};return c.isStepper=!0,c.dt=l,c},wbe=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];var a=n[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return TT(a);case"spring":return bbe();default:if(a.split("(")[0]==="cubic-bezier")return TT(a)}return typeof a=="function"?a:null};function qf(e){"@babel/helpers - typeof";return qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qf(e)}function ET(e){return Cbe(e)||Sbe(e)||L5(e)||Nbe()}function Nbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sbe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Cbe(e){if(Array.isArray(e))return aN(e)}function OT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Yn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OT(Object(n),!0).forEach(function(s){sN(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function sN(e,t,n){return t=_be(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _be(e){var t=Pbe(e,"string");return qf(t)==="symbol"?t:String(t)}function Pbe(e,t){if(qf(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(qf(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Abe(e,t){return Ebe(e)||Tbe(e,t)||L5(e,t)||kbe()}function kbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function L5(e,t){if(e){if(typeof e=="string")return aN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aN(e,t)}}function aN(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Tbe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Ebe(e){if(Array.isArray(e))return e}var Pv=function(t,n,s){return t+(n-t)*s},iN=function(t){var n=t.from,s=t.to;return n!==s},Obe=function e(t,n,s){var a=Vh(function(i,o){if(iN(o)){var l=t(o.from,o.to,o.velocity),c=Abe(l,2),u=c[0],d=c[1];return Yn(Yn({},o),{},{from:u,velocity:d})}return o},n);return s<1?Vh(function(i,o){return iN(o)?Yn(Yn({},o),{},{velocity:Pv(o.velocity,a[i].velocity,s),from:Pv(o.from,a[i].from,s)}):o},n):e(t,a,s-1)};const Dbe=function(e,t,n,s,a){var i=cbe(e,t),o=i.reduce(function(v,j){return Yn(Yn({},v),{},sN({},j,[e[j],t[j]]))},{}),l=i.reduce(function(v,j){return Yn(Yn({},v),{},sN({},j,{from:e[j],velocity:0,to:t[j]}))},{}),c=-1,u,d,h=function(){return null},f=function(){return Vh(function(j,x){return x.from},l)},m=function(){return!Object.values(l).filter(iN).length},g=function(j){u||(u=j);var x=j-u,y=x/n.dt;l=Obe(n,l,y),a(Yn(Yn(Yn({},e),t),f())),u=j,m()||(c=requestAnimationFrame(h))},p=function(j){d||(d=j);var x=(j-d)/s,y=Vh(function(w,C){return Pv.apply(void 0,ET(C).concat([n(x)]))},o);if(a(Yn(Yn(Yn({},e),t),y)),x<1)c=requestAnimationFrame(h);else{var N=Vh(function(w,C){return Pv.apply(void 0,ET(C).concat([n(1)]))},o);a(Yn(Yn(Yn({},e),t),N))}};return h=n.isStepper?g:p,function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(c)}}};function Wu(e){"@babel/helpers - typeof";return Wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wu(e)}var Mbe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Ibe(e,t){if(e==null)return{};var n=$be(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function $be(e,t){if(e==null)return{};var n={},s=Object.keys(e),a,i;for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function lj(e){return Bbe(e)||Lbe(e)||Fbe(e)||Rbe()}function Rbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fbe(e,t){if(e){if(typeof e=="string")return oN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oN(e,t)}}function Lbe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Bbe(e){if(Array.isArray(e))return oN(e)}function oN(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function DT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function $s(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DT(Object(n),!0).forEach(function(s){Nh(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Nh(e,t,n){return t=B5(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zbe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,B5(s.key),s)}}function qbe(e,t,n){return t&&zbe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function B5(e){var t=Ube(e,"string");return Wu(t)==="symbol"?t:String(t)}function Ube(e,t){if(Wu(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Wu(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wbe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lN(e,t)}function lN(e,t){return lN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},lN(e,t)}function Hbe(e){var t=Gbe();return function(){var s=Av(e),a;if(t){var i=Av(this).constructor;a=Reflect.construct(s,arguments,i)}else a=s.apply(this,arguments);return cN(this,a)}}function cN(e,t){if(t&&(Wu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uN(e)}function uN(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gbe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Av(e){return Av=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Av(e)}var aa=function(e){Wbe(n,e);var t=Hbe(n);function n(s,a){var i;Vbe(this,n),i=t.call(this,s,a);var o=i.props,l=o.isActive,c=o.attributeName,u=o.from,d=o.to,h=o.steps,f=o.children,m=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(uN(i)),i.changeStyle=i.changeStyle.bind(uN(i)),!l||m<=0)return i.state={style:{}},typeof f=="function"&&(i.state={style:d}),cN(i);if(h&&h.length)i.state={style:h[0].style};else if(u){if(typeof f=="function")return i.state={style:u},cN(i);i.state={style:c?Nh({},c,u):u}}else i.state={style:{}};return i}return qbe(n,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,u=i.shouldReAnimate,d=i.to,h=i.from,f=this.state.style;if(l){if(!o){var m={style:c?Nh({},c,d):d};this.state&&f&&(c&&f[c]!==d||!c&&f!==d)&&this.setState(m);return}if(!(Zje(a.to,d)&&a.canBegin&&a.isActive)){var g=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=g||u?h:a.to;if(this.state&&f){var v={style:c?Nh({},c,p):p};(c&&f[c]!==p||!c&&f!==p)&&this.setState(v)}this.runAnimation($s($s({},this.props),{},{from:p,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,l=a.to,c=a.duration,u=a.easing,d=a.begin,h=a.onAnimationEnd,f=a.onAnimationStart,m=Dbe(o,l,wbe(u),c,this.changeStyle),g=function(){i.stopJSAnimation=m()};this.manager.start([f,d,g,c,h])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,l=a.begin,c=a.onAnimationStart,u=o[0],d=u.style,h=u.duration,f=h===void 0?0:h,m=function(p,v,j){if(j===0)return p;var x=v.duration,y=v.easing,N=y===void 0?"ease":y,w=v.style,C=v.properties,S=v.onAnimationEnd,_=j>0?o[j-1]:v,k=C||Object.keys(w);if(typeof N=="function"||N==="spring")return[].concat(lj(p),[i.runJSAnimation.bind(i,{from:_.style,to:w,duration:x,easing:N}),x]);var T=AT(k,x,N),P=$s($s($s({},_.style),w),{},{transition:T});return[].concat(lj(p),[P,x,S]).filter(ube)};return this.manager.start([c].concat(lj(o.reduce(m,[d,Math.max(f,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=ibe());var i=a.begin,o=a.duration,l=a.attributeName,c=a.to,u=a.easing,d=a.onAnimationStart,h=a.onAnimationEnd,f=a.steps,m=a.children,g=this.manager;if(this.unSubscribe=g.subscribe(this.handleStyleChange),typeof u=="function"||typeof m=="function"||u==="spring"){this.runJSAnimation(a);return}if(f.length>1){this.runStepAnimation(a);return}var p=l?Nh({},l,c):c,v=AT(Object.keys(p),o,u);g.start([d,i,$s($s({},p),{},{transition:v}),o,h])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=Ibe(a,Mbe),u=b.Children.count(i),d=this.state.style;if(typeof i=="function")return i(d);if(!l||u===0||o<=0)return i;var h=function(m){var g=m.props,p=g.style,v=p===void 0?{}:p,j=g.className,x=b.cloneElement(m,$s($s({},c),{},{style:$s($s({},v),d),className:j}));return x};return u===1?h(b.Children.only(i)):F.createElement("div",null,b.Children.map(i,function(f){return h(f)}))}}]),n}(b.PureComponent);aa.displayName="Animate";aa.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};aa.propTypes={from:St.oneOfType([St.object,St.string]),to:St.oneOfType([St.object,St.string]),attributeName:St.string,duration:St.number,begin:St.number,easing:St.oneOfType([St.string,St.func]),steps:St.arrayOf(St.shape({duration:St.number.isRequired,style:St.object.isRequired,easing:St.oneOfType([St.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),St.func]),properties:St.arrayOf("string"),onAnimationEnd:St.func})),children:St.oneOfType([St.node,St.func]),isActive:St.bool,canBegin:St.bool,onAnimationEnd:St.func,shouldReAnimate:St.bool,onAnimationStart:St.func,onAnimationReStart:St.func};function Uf(e){"@babel/helpers - typeof";return Uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uf(e)}function kv(){return kv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},kv.apply(this,arguments)}function Kbe(e,t){return Jbe(e)||Xbe(e,t)||Qbe(e,t)||Ybe()}function Ybe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qbe(e,t){if(e){if(typeof e=="string")return MT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MT(e,t)}}function MT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Xbe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Jbe(e){if(Array.isArray(e))return e}function IT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function $T(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IT(Object(n),!0).forEach(function(s){Zbe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Zbe(e,t,n){return t=ewe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ewe(e){var t=twe(e,"string");return Uf(t)=="symbol"?t:t+""}function twe(e,t){if(Uf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Uf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var RT=function(t,n,s,a,i){var o=Math.min(Math.abs(s)/2,Math.abs(a)/2),l=a>=0?1:-1,c=s>=0?1:-1,u=a>=0&&s>=0||a<0&&s<0?1:0,d;if(o>0&&i instanceof Array){for(var h=[0,0,0,0],f=0,m=4;f<m;f++)h[f]=i[f]>o?o:i[f];d="M".concat(t,",").concat(n+l*h[0]),h[0]>0&&(d+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(u,",").concat(t+c*h[0],",").concat(n)),d+="L ".concat(t+s-c*h[1],",").concat(n),h[1]>0&&(d+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(u,`,
        `).concat(t+s,",").concat(n+l*h[1])),d+="L ".concat(t+s,",").concat(n+a-l*h[2]),h[2]>0&&(d+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(u,`,
        `).concat(t+s-c*h[2],",").concat(n+a)),d+="L ".concat(t+c*h[3],",").concat(n+a),h[3]>0&&(d+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(n+a-l*h[3])),d+="Z"}else if(o>0&&i===+i&&i>0){var g=Math.min(o,i);d="M ".concat(t,",").concat(n+l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+c*g,",").concat(n,`
            L `).concat(t+s-c*g,",").concat(n,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+s,",").concat(n+l*g,`
            L `).concat(t+s,",").concat(n+a-l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t+s-c*g,",").concat(n+a,`
            L `).concat(t+c*g,",").concat(n+a,`
            A `).concat(g,",").concat(g,",0,0,").concat(u,",").concat(t,",").concat(n+a-l*g," Z")}else d="M ".concat(t,",").concat(n," h ").concat(s," v ").concat(a," h ").concat(-s," Z");return d},nwe=function(t,n){if(!t||!n)return!1;var s=t.x,a=t.y,i=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(i,i+l),d=Math.max(i,i+l),h=Math.min(o,o+c),f=Math.max(o,o+c);return s>=u&&s<=d&&a>=h&&a<=f}return!1},rwe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},$C=function(t){var n=$T($T({},rwe),t),s=b.useRef(),a=b.useState(-1),i=Kbe(a,2),o=i[0],l=i[1];b.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var N=s.current.getTotalLength();N&&l(N)}catch{}},[]);var c=n.x,u=n.y,d=n.width,h=n.height,f=n.radius,m=n.className,g=n.animationEasing,p=n.animationDuration,v=n.animationBegin,j=n.isAnimationActive,x=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||h!==+h||d===0||h===0)return null;var y=Ze("recharts-rectangle",m);return x?F.createElement(aa,{canBegin:o>0,from:{width:d,height:h,x:c,y:u},to:{width:d,height:h,x:c,y:u},duration:p,animationEasing:g,isActive:x},function(N){var w=N.width,C=N.height,S=N.x,_=N.y;return F.createElement(aa,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:p,isActive:j,easing:g},F.createElement("path",kv({},Re(n,!0),{className:y,d:RT(S,_,w,C,f),ref:s})))}):F.createElement("path",kv({},Re(n,!0),{className:y,d:RT(c,u,d,h,f)}))},swe=["points","className","baseLinePoints","connectNulls"];function qc(){return qc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},qc.apply(this,arguments)}function awe(e,t){if(e==null)return{};var n=iwe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function iwe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function FT(e){return uwe(e)||cwe(e)||lwe(e)||owe()}function owe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lwe(e,t){if(e){if(typeof e=="string")return dN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dN(e,t)}}function cwe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function uwe(e){if(Array.isArray(e))return dN(e)}function dN(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var LT=function(t){return t&&t.x===+t.x&&t.y===+t.y},dwe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return t.forEach(function(s){LT(s)?n[n.length-1].push(s):n[n.length-1].length>0&&n.push([])}),LT(t[0])&&n[n.length-1].push(t[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},zh=function(t,n){var s=dwe(t);n&&(s=[s.reduce(function(i,o){return[].concat(FT(i),FT(o))},[])]);var a=s.map(function(i){return i.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return s.length===1?"".concat(a,"Z"):a},hwe=function(t,n,s){var a=zh(t,s);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(zh(n.reverse(),s).slice(1))},fwe=function(t){var n=t.points,s=t.className,a=t.baseLinePoints,i=t.connectNulls,o=awe(t,swe);if(!n||!n.length)return null;var l=Ze("recharts-polygon",s);if(a&&a.length){var c=o.stroke&&o.stroke!=="none",u=hwe(n,a,i);return F.createElement("g",{className:l},F.createElement("path",qc({},Re(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),c?F.createElement("path",qc({},Re(o,!0),{fill:"none",d:zh(n,i)})):null,c?F.createElement("path",qc({},Re(o,!0),{fill:"none",d:zh(a,i)})):null)}var d=zh(n,i);return F.createElement("path",qc({},Re(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",className:l,d}))};function hN(){return hN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},hN.apply(this,arguments)}var Em=function(t){var n=t.cx,s=t.cy,a=t.r,i=t.className,o=Ze("recharts-dot",i);return n===+n&&s===+s&&a===+a?b.createElement("circle",hN({},Re(t,!1),Yg(t),{className:o,cx:n,cy:s,r:a})):null};function Wf(e){"@babel/helpers - typeof";return Wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wf(e)}var mwe=["x","y","top","left","width","height","className"];function fN(){return fN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},fN.apply(this,arguments)}function BT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function pwe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BT(Object(n),!0).forEach(function(s){gwe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function gwe(e,t,n){return t=vwe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vwe(e){var t=xwe(e,"string");return Wf(t)=="symbol"?t:t+""}function xwe(e,t){if(Wf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Wf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ywe(e,t){if(e==null)return{};var n=jwe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function jwe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var bwe=function(t,n,s,a,i,o){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(o,",").concat(n,"h").concat(s)},wwe=function(t){var n=t.x,s=n===void 0?0:n,a=t.y,i=a===void 0?0:a,o=t.top,l=o===void 0?0:o,c=t.left,u=c===void 0?0:c,d=t.width,h=d===void 0?0:d,f=t.height,m=f===void 0?0:f,g=t.className,p=ywe(t,mwe),v=pwe({x:s,y:i,top:l,left:u,width:h,height:m},p);return!je(s)||!je(i)||!je(h)||!je(m)||!je(l)||!je(u)?null:F.createElement("path",fN({},Re(v,!0),{className:Ze("recharts-cross",g),d:bwe(s,i,h,m,l,u)}))},Nwe=by,Swe=JL,Cwe=Wa;function _we(e,t){return e&&e.length?Nwe(e,Cwe(t),Swe):void 0}var Pwe=_we;const Awe=Pt(Pwe);var kwe=by,Twe=Wa,Ewe=ZL;function Owe(e,t){return e&&e.length?kwe(e,Twe(t),Ewe):void 0}var Dwe=Owe;const Mwe=Pt(Dwe);var Iwe=["cx","cy","angle","ticks","axisLine"],$we=["ticks","tick","angle","tickFormatter","stroke"];function Hu(e){"@babel/helpers - typeof";return Hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hu(e)}function qh(){return qh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},qh.apply(this,arguments)}function VT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Yo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VT(Object(n),!0).forEach(function(s){Cy(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function zT(e,t){if(e==null)return{};var n=Rwe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Rwe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function Fwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qT(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,z5(s.key),s)}}function Lwe(e,t,n){return t&&qT(e.prototype,t),n&&qT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Bwe(e,t,n){return t=Tv(t),Vwe(e,V5()?Reflect.construct(t,n||[],Tv(e).constructor):t.apply(e,n))}function Vwe(e,t){if(t&&(Hu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zwe(e)}function zwe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(V5=function(){return!!e})()}function Tv(e){return Tv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Tv(e)}function qwe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mN(e,t)}function mN(e,t){return mN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},mN(e,t)}function Cy(e,t,n){return t=z5(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z5(e){var t=Uwe(e,"string");return Hu(t)=="symbol"?t:t+""}function Uwe(e,t){if(Hu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Hu(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _y=function(e){function t(){return Fwe(this,t),Bwe(this,t,arguments)}return qwe(t,e),Lwe(t,[{key:"getTickValueCoord",value:function(s){var a=s.coordinate,i=this.props,o=i.angle,l=i.cx,c=i.cy;return zt(l,c,a,o)}},{key:"getTickTextAnchor",value:function(){var s=this.props.orientation,a;switch(s){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var s=this.props,a=s.cx,i=s.cy,o=s.angle,l=s.ticks,c=Awe(l,function(d){return d.coordinate||0}),u=Mwe(l,function(d){return d.coordinate||0});return{cx:a,cy:i,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var s=this.props,a=s.cx,i=s.cy,o=s.angle,l=s.ticks,c=s.axisLine,u=zT(s,Iwe),d=l.reduce(function(g,p){return[Math.min(g[0],p.coordinate),Math.max(g[1],p.coordinate)]},[1/0,-1/0]),h=zt(a,i,d[0],o),f=zt(a,i,d[1],o),m=Yo(Yo(Yo({},Re(u,!1)),{},{fill:"none"},Re(c,!1)),{},{x1:h.x,y1:h.y,x2:f.x,y2:f.y});return F.createElement("line",qh({className:"recharts-polar-radius-axis-line"},m))}},{key:"renderTicks",value:function(){var s=this,a=this.props,i=a.ticks,o=a.tick,l=a.angle,c=a.tickFormatter,u=a.stroke,d=zT(a,$we),h=this.getTickTextAnchor(),f=Re(d,!1),m=Re(o,!1),g=i.map(function(p,v){var j=s.getTickValueCoord(p),x=Yo(Yo(Yo(Yo({textAnchor:h,transform:"rotate(".concat(90-l,", ").concat(j.x,", ").concat(j.y,")")},f),{},{stroke:"none",fill:u},m),{},{index:v},j),{},{payload:p});return F.createElement(ht,qh({className:Ze("recharts-polar-radius-axis-tick",P5(o)),key:"tick-".concat(p.coordinate)},Ul(s.props,p,v)),t.renderTickItem(o,x,c?c(p.value,v):p.value))});return F.createElement(ht,{className:"recharts-polar-radius-axis-ticks"},g)}},{key:"render",value:function(){var s=this.props,a=s.ticks,i=s.axisLine,o=s.tick;return!a||!a.length?null:F.createElement(ht,{className:Ze("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),Un.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(s,a,i){var o;return F.isValidElement(s)?o=F.cloneElement(s,a):qe(s)?o=s(a):o=F.createElement(Wl,qh({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])}(b.PureComponent);Cy(_y,"displayName","PolarRadiusAxis");Cy(_y,"axisType","radiusAxis");Cy(_y,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Gu(e){"@babel/helpers - typeof";return Gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gu(e)}function al(){return al=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},al.apply(this,arguments)}function UT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Qo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?UT(Object(n),!0).forEach(function(s){Py(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Wwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WT(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,U5(s.key),s)}}function Hwe(e,t,n){return t&&WT(e.prototype,t),n&&WT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Gwe(e,t,n){return t=Ev(t),Kwe(e,q5()?Reflect.construct(t,n||[],Ev(e).constructor):t.apply(e,n))}function Kwe(e,t){if(t&&(Gu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ywe(e)}function Ywe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(q5=function(){return!!e})()}function Ev(e){return Ev=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ev(e)}function Qwe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pN(e,t)}function pN(e,t){return pN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},pN(e,t)}function Py(e,t,n){return t=U5(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U5(e){var t=Xwe(e,"string");return Gu(t)=="symbol"?t:t+""}function Xwe(e,t){if(Gu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Gu(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Jwe=Math.PI/180,HT=1e-5,Ay=function(e){function t(){return Wwe(this,t),Gwe(this,t,arguments)}return Qwe(t,e),Hwe(t,[{key:"getTickLineCoord",value:function(s){var a=this.props,i=a.cx,o=a.cy,l=a.radius,c=a.orientation,u=a.tickSize,d=u||8,h=zt(i,o,l,s.coordinate),f=zt(i,o,l+(c==="inner"?-1:1)*d,s.coordinate);return{x1:h.x,y1:h.y,x2:f.x,y2:f.y}}},{key:"getTickTextAnchor",value:function(s){var a=this.props.orientation,i=Math.cos(-s.coordinate*Jwe),o;return i>HT?o=a==="outer"?"start":"end":i<-HT?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var s=this.props,a=s.cx,i=s.cy,o=s.radius,l=s.axisLine,c=s.axisLineType,u=Qo(Qo({},Re(this.props,!1)),{},{fill:"none"},Re(l,!1));if(c==="circle")return F.createElement(Em,al({className:"recharts-polar-angle-axis-line"},u,{cx:a,cy:i,r:o}));var d=this.props.ticks,h=d.map(function(f){return zt(a,i,o,f.coordinate)});return F.createElement(fwe,al({className:"recharts-polar-angle-axis-line"},u,{points:h}))}},{key:"renderTicks",value:function(){var s=this,a=this.props,i=a.ticks,o=a.tick,l=a.tickLine,c=a.tickFormatter,u=a.stroke,d=Re(this.props,!1),h=Re(o,!1),f=Qo(Qo({},d),{},{fill:"none"},Re(l,!1)),m=i.map(function(g,p){var v=s.getTickLineCoord(g),j=s.getTickTextAnchor(g),x=Qo(Qo(Qo({textAnchor:j},d),{},{stroke:"none",fill:u},h),{},{index:p,payload:g,x:v.x2,y:v.y2});return F.createElement(ht,al({className:Ze("recharts-polar-angle-axis-tick",P5(o)),key:"tick-".concat(g.coordinate)},Ul(s.props,g,p)),l&&F.createElement("line",al({className:"recharts-polar-angle-axis-tick-line"},f,v)),o&&t.renderTickItem(o,x,c?c(g.value,p):g.value))});return F.createElement(ht,{className:"recharts-polar-angle-axis-ticks"},m)}},{key:"render",value:function(){var s=this.props,a=s.ticks,i=s.radius,o=s.axisLine;return i<=0||!a||!a.length?null:F.createElement(ht,{className:Ze("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(s,a,i){var o;return F.isValidElement(s)?o=F.cloneElement(s,a):qe(s)?o=s(a):o=F.createElement(Wl,al({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])}(b.PureComponent);Py(Ay,"displayName","PolarAngleAxis");Py(Ay,"axisType","angleAxis");Py(Ay,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Zwe=KF,eNe=Zwe(Object.getPrototypeOf,Object),tNe=eNe,nNe=ki,rNe=tNe,sNe=Ti,aNe="[object Object]",iNe=Function.prototype,oNe=Object.prototype,W5=iNe.toString,lNe=oNe.hasOwnProperty,cNe=W5.call(Object);function uNe(e){if(!sNe(e)||nNe(e)!=aNe)return!1;var t=rNe(e);if(t===null)return!0;var n=lNe.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&W5.call(n)==cNe}var dNe=uNe;const hNe=Pt(dNe);var fNe=ki,mNe=Ti,pNe="[object Boolean]";function gNe(e){return e===!0||e===!1||mNe(e)&&fNe(e)==pNe}var vNe=gNe;const xNe=Pt(vNe);function Hf(e){"@babel/helpers - typeof";return Hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hf(e)}function Ov(){return Ov=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ov.apply(this,arguments)}function yNe(e,t){return NNe(e)||wNe(e,t)||bNe(e,t)||jNe()}function jNe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bNe(e,t){if(e){if(typeof e=="string")return GT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GT(e,t)}}function GT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function wNe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function NNe(e){if(Array.isArray(e))return e}function KT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function YT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KT(Object(n),!0).forEach(function(s){SNe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function SNe(e,t,n){return t=CNe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CNe(e){var t=_Ne(e,"string");return Hf(t)=="symbol"?t:t+""}function _Ne(e,t){if(Hf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Hf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var QT=function(t,n,s,a,i){var o=s-a,l;return l="M ".concat(t,",").concat(n),l+="L ".concat(t+s,",").concat(n),l+="L ".concat(t+s-o/2,",").concat(n+i),l+="L ".concat(t+s-o/2-a,",").concat(n+i),l+="L ".concat(t,",").concat(n," Z"),l},PNe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ANe=function(t){var n=YT(YT({},PNe),t),s=b.useRef(),a=b.useState(-1),i=yNe(a,2),o=i[0],l=i[1];b.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var y=s.current.getTotalLength();y&&l(y)}catch{}},[]);var c=n.x,u=n.y,d=n.upperWidth,h=n.lowerWidth,f=n.height,m=n.className,g=n.animationEasing,p=n.animationDuration,v=n.animationBegin,j=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||h!==+h||f!==+f||d===0&&h===0||f===0)return null;var x=Ze("recharts-trapezoid",m);return j?F.createElement(aa,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:f,x:c,y:u},to:{upperWidth:d,lowerWidth:h,height:f,x:c,y:u},duration:p,animationEasing:g,isActive:j},function(y){var N=y.upperWidth,w=y.lowerWidth,C=y.height,S=y.x,_=y.y;return F.createElement(aa,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:p,easing:g},F.createElement("path",Ov({},Re(n,!0),{className:x,d:QT(S,_,N,w,C),ref:s})))}):F.createElement("g",null,F.createElement("path",Ov({},Re(n,!0),{className:x,d:QT(c,u,d,h,f)})))},kNe=["option","shapeType","propTransformer","activeClassName","isActive"];function Gf(e){"@babel/helpers - typeof";return Gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gf(e)}function TNe(e,t){if(e==null)return{};var n=ENe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function ENe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function XT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Dv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XT(Object(n),!0).forEach(function(s){ONe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function ONe(e,t,n){return t=DNe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DNe(e){var t=MNe(e,"string");return Gf(t)=="symbol"?t:t+""}function MNe(e,t){if(Gf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Gf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function INe(e,t){return Dv(Dv({},t),e)}function $Ne(e,t){return e==="symbols"}function JT(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return F.createElement($C,n);case"trapezoid":return F.createElement(ANe,n);case"sector":return F.createElement(T5,n);case"symbols":if($Ne(t))return F.createElement(tC,n);break;default:return null}}function RNe(e){return b.isValidElement(e)?e.props:e}function H5(e){var t=e.option,n=e.shapeType,s=e.propTransformer,a=s===void 0?INe:s,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=TNe(e,kNe),u;if(b.isValidElement(t))u=b.cloneElement(t,Dv(Dv({},c),RNe(t)));else if(qe(t))u=t(c);else if(hNe(t)&&!xNe(t)){var d=a(t,c);u=F.createElement(JT,{shapeType:n,elementProps:d})}else{var h=c;u=F.createElement(JT,{shapeType:n,elementProps:h})}return l?F.createElement(ht,{className:o},u):u}function ky(e,t){return t!=null&&"trapezoids"in e.props}function Ty(e,t){return t!=null&&"sectors"in e.props}function Kf(e,t){return t!=null&&"points"in e.props}function FNe(e,t){var n,s,a=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,i=e.y===(t==null||(s=t.labelViewBox)===null||s===void 0?void 0:s.y)||e.y===t.y;return a&&i}function LNe(e,t){var n=e.endAngle===t.endAngle,s=e.startAngle===t.startAngle;return n&&s}function BNe(e,t){var n=e.x===t.x,s=e.y===t.y,a=e.z===t.z;return n&&s&&a}function VNe(e,t){var n;return ky(e,t)?n=FNe:Ty(e,t)?n=LNe:Kf(e,t)&&(n=BNe),n}function zNe(e,t){var n;return ky(e,t)?n="trapezoids":Ty(e,t)?n="sectors":Kf(e,t)&&(n="points"),n}function qNe(e,t){if(ky(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(Ty(e,t)){var s;return(s=t.tooltipPayload)===null||s===void 0||(s=s[0])===null||s===void 0||(s=s.payload)===null||s===void 0?void 0:s.payload}return Kf(e,t)?t.payload:{}}function UNe(e){var t=e.activeTooltipItem,n=e.graphicalItem,s=e.itemData,a=zNe(n,t),i=qNe(n,t),o=s.filter(function(c,u){var d=Hl(i,c),h=n.props[a].filter(function(g){var p=VNe(n,t);return p(g,t)}),f=n.props[a].indexOf(h[h.length-1]),m=u===f;return d&&m}),l=s.indexOf(o[o.length-1]);return l}var tg;function Ku(e){"@babel/helpers - typeof";return Ku=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ku(e)}function Uc(){return Uc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Uc.apply(this,arguments)}function ZT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Lt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZT(Object(n),!0).forEach(function(s){js(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZT(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function WNe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eE(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,K5(s.key),s)}}function HNe(e,t,n){return t&&eE(e.prototype,t),n&&eE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function GNe(e,t,n){return t=Mv(t),KNe(e,G5()?Reflect.construct(t,n||[],Mv(e).constructor):t.apply(e,n))}function KNe(e,t){if(t&&(Ku(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return YNe(e)}function YNe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(G5=function(){return!!e})()}function Mv(e){return Mv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Mv(e)}function QNe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gN(e,t)}function gN(e,t){return gN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},gN(e,t)}function js(e,t,n){return t=K5(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K5(e){var t=XNe(e,"string");return Ku(t)=="symbol"?t:t+""}function XNe(e,t){if(Ku(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Ku(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var da=function(e){function t(n){var s;return WNe(this,t),s=GNe(this,t,[n]),js(s,"pieRef",null),js(s,"sectorRefs",[]),js(s,"id",ac("recharts-pie-")),js(s,"handleAnimationEnd",function(){var a=s.props.onAnimationEnd;s.setState({isAnimationFinished:!0}),qe(a)&&a()}),js(s,"handleAnimationStart",function(){var a=s.props.onAnimationStart;s.setState({isAnimationFinished:!1}),qe(a)&&a()}),s.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},s}return QNe(t,e),HNe(t,[{key:"isActiveIndex",value:function(s){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(s)!==-1:s===a}},{key:"hasActiveIndex",value:function(){var s=this.props.activeIndex;return Array.isArray(s)?s.length!==0:s||s===0}},{key:"renderLabels",value:function(s){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,l=i.labelLine,c=i.dataKey,u=i.valueKey,d=Re(this.props,!1),h=Re(o,!1),f=Re(l,!1),m=o&&o.offsetRadius||20,g=s.map(function(p,v){var j=(p.startAngle+p.endAngle)/2,x=zt(p.cx,p.cy,p.outerRadius+m,j),y=Lt(Lt(Lt(Lt({},d),p),{},{stroke:"none"},h),{},{index:v,textAnchor:t.getTextAnchor(x.x,p.cx)},x),N=Lt(Lt(Lt(Lt({},d),p),{},{fill:"none",stroke:p.fill},f),{},{index:v,points:[zt(p.cx,p.cy,p.outerRadius,j),x]}),w=c;return Qe(c)&&Qe(u)?w="value":Qe(c)&&(w=u),F.createElement(ht,{key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(v)},l&&t.renderLabelLineItem(l,N,"line"),t.renderLabelItem(o,y,gn(p,w)))});return F.createElement(ht,{className:"recharts-pie-labels"},g)}},{key:"renderSectorsStatically",value:function(s){var a=this,i=this.props,o=i.activeShape,l=i.blendStroke,c=i.inactiveShape;return s.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&s.length!==1)return null;var h=a.isActiveIndex(d),f=c&&a.hasActiveIndex()?c:null,m=h?o:f,g=Lt(Lt({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return F.createElement(ht,Uc({ref:function(v){v&&!a.sectorRefs.includes(v)&&a.sectorRefs.push(v)},tabIndex:-1,className:"recharts-pie-sector"},Ul(a.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),F.createElement(H5,Uc({option:m,isActive:h,shapeType:"sector"},g)))})}},{key:"renderSectorsWithAnimation",value:function(){var s=this,a=this.props,i=a.sectors,o=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,u=a.animationEasing,d=a.animationId,h=this.state,f=h.prevSectors,m=h.prevIsAnimationActive;return F.createElement(aa,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(m),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(g){var p=g.t,v=[],j=i&&i[0],x=j.startAngle;return i.forEach(function(y,N){var w=f&&f[N],C=N>0?ss(y,"paddingAngle",0):0;if(w){var S=On(w.endAngle-w.startAngle,y.endAngle-y.startAngle),_=Lt(Lt({},y),{},{startAngle:x+C,endAngle:x+S(p)+C});v.push(_),x=_.endAngle}else{var k=y.endAngle,T=y.startAngle,P=On(0,k-T),A=P(p),B=Lt(Lt({},y),{},{startAngle:x+C,endAngle:x+A+C});v.push(B),x=B.endAngle}}),F.createElement(ht,null,s.renderSectorsStatically(v))})}},{key:"attachKeyboardHandlers",value:function(s){var a=this;s.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var s=this.props,a=s.sectors,i=s.isAnimationActive,o=this.state.prevSectors;return i&&a&&a.length&&(!o||!Hl(o,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var s=this,a=this.props,i=a.hide,o=a.sectors,l=a.className,c=a.label,u=a.cx,d=a.cy,h=a.innerRadius,f=a.outerRadius,m=a.isAnimationActive,g=this.state.isAnimationFinished;if(i||!o||!o.length||!je(u)||!je(d)||!je(h)||!je(f))return null;var p=Ze("recharts-pie",l);return F.createElement(ht,{tabIndex:this.props.rootTabIndex,className:p,ref:function(j){s.pieRef=j}},this.renderSectors(),c&&this.renderLabels(o),Un.renderCallByParent(this.props,null,!1),(!m||g)&&Ra.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return a.prevIsAnimationActive!==s.isAnimationActive?{prevIsAnimationActive:s.isAnimationActive,prevAnimationId:s.animationId,curSectors:s.sectors,prevSectors:[],isAnimationFinished:!0}:s.isAnimationActive&&s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curSectors:s.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:s.sectors!==a.curSectors?{curSectors:s.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(s,a){return s>a?"start":s<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(s,a,i){if(F.isValidElement(s))return F.cloneElement(s,a);if(qe(s))return s(a);var o=Ze("recharts-pie-label-line",typeof s!="boolean"?s.className:"");return F.createElement(kl,Uc({},a,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(s,a,i){if(F.isValidElement(s))return F.cloneElement(s,a);var o=i;if(qe(s)&&(o=s(a),F.isValidElement(o)))return o;var l=Ze("recharts-pie-label-text",typeof s!="boolean"&&!qe(s)?s.className:"");return F.createElement(Wl,Uc({},a,{alignmentBaseline:"middle",className:l}),o)}}])}(b.PureComponent);tg=da;js(da,"displayName","Pie");js(da,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!ea.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});js(da,"parseDeltaAngle",function(e,t){var n=yr(t-e),s=Math.min(Math.abs(t-e),360);return n*s});js(da,"getRealPieData",function(e){var t=e.data,n=e.children,s=Re(e,!1),a=as(n,$d);return t&&t.length?t.map(function(i,o){return Lt(Lt(Lt({payload:i},s),i),a&&a[o]&&a[o].props)}):a&&a.length?a.map(function(i){return Lt(Lt({},s),i.props)}):[]});js(da,"parseCoordinateOfPie",function(e,t){var n=t.top,s=t.left,a=t.width,i=t.height,o=_5(a,i),l=s+jr(e.cx,a,a/2),c=n+jr(e.cy,i,i/2),u=jr(e.innerRadius,o,0),d=jr(e.outerRadius,o,o*.8),h=e.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:h}});js(da,"getComposedData",function(e){var t=e.item,n=e.offset,s=t.type.defaultProps!==void 0?Lt(Lt({},t.type.defaultProps),t.props):t.props,a=tg.getRealPieData(s);if(!a||!a.length)return null;var i=s.cornerRadius,o=s.startAngle,l=s.endAngle,c=s.paddingAngle,u=s.dataKey,d=s.nameKey,h=s.valueKey,f=s.tooltipType,m=Math.abs(s.minAngle),g=tg.parseCoordinateOfPie(s,n),p=tg.parseDeltaAngle(o,l),v=Math.abs(p),j=u;Qe(u)&&Qe(h)?(Zs(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),j="value"):Qe(u)&&(Zs(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),j=h);var x=a.filter(function(_){return gn(_,j,0)!==0}).length,y=(v>=360?x:x-1)*c,N=v-x*m-y,w=a.reduce(function(_,k){var T=gn(k,j,0);return _+(je(T)?T:0)},0),C;if(w>0){var S;C=a.map(function(_,k){var T=gn(_,j,0),P=gn(_,d,k),A=(je(T)?T:0)/w,B;k?B=S.endAngle+yr(p)*c*(T!==0?1:0):B=o;var L=B+yr(p)*((T!==0?m:0)+A*N),H=(B+L)/2,z=(g.innerRadius+g.outerRadius)/2,$=[{name:P,value:T,payload:_,dataKey:j,type:f}],I=zt(g.cx,g.cy,z,H);return S=Lt(Lt(Lt({percent:A,cornerRadius:i,name:P,tooltipPayload:$,midAngle:H,middleRadius:z,tooltipPosition:I},_),g),{},{value:gn(_,j),startAngle:B,endAngle:L,payload:_,paddingAngle:yr(p)*c}),S})}return Lt(Lt({},g),{},{sectors:C,data:a})});var JNe=Math.ceil,ZNe=Math.max;function e1e(e,t,n,s){for(var a=-1,i=ZNe(JNe((t-e)/(n||1)),0),o=Array(i);i--;)o[s?i:++a]=e,e+=n;return o}var t1e=e1e,n1e=fL,tE=1/0,r1e=17976931348623157e292;function s1e(e){if(!e)return e===0?e:0;if(e=n1e(e),e===tE||e===-tE){var t=e<0?-1:1;return t*r1e}return e===e?e:0}var Y5=s1e,a1e=t1e,i1e=my,cj=Y5;function o1e(e){return function(t,n,s){return s&&typeof s!="number"&&i1e(t,n,s)&&(n=s=void 0),t=cj(t),n===void 0?(n=t,t=0):n=cj(n),s=s===void 0?t<n?1:-1:cj(s),a1e(t,n,s,e)}}var l1e=o1e,c1e=l1e,u1e=c1e(),d1e=u1e;const Iv=Pt(d1e);function Yf(e){"@babel/helpers - typeof";return Yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yf(e)}function nE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function rE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nE(Object(n),!0).forEach(function(s){Q5(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nE(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Q5(e,t,n){return t=h1e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h1e(e){var t=f1e(e,"string");return Yf(t)=="symbol"?t:t+""}function f1e(e,t){if(Yf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Yf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var m1e=["Webkit","Moz","O","ms"],p1e=function(t,n){var s=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=m1e.reduce(function(i,o){return rE(rE({},i),{},Q5({},o+s,n))},{});return a[t]=n,a};function Yu(e){"@babel/helpers - typeof";return Yu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yu(e)}function $v(){return $v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},$v.apply(this,arguments)}function sE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function uj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sE(Object(n),!0).forEach(function(s){Yr(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sE(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function g1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aE(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,J5(s.key),s)}}function v1e(e,t,n){return t&&aE(e.prototype,t),n&&aE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function x1e(e,t,n){return t=Rv(t),y1e(e,X5()?Reflect.construct(t,n||[],Rv(e).constructor):t.apply(e,n))}function y1e(e,t){if(t&&(Yu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return j1e(e)}function j1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(X5=function(){return!!e})()}function Rv(e){return Rv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Rv(e)}function b1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vN(e,t)}function vN(e,t){return vN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},vN(e,t)}function Yr(e,t,n){return t=J5(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J5(e){var t=w1e(e,"string");return Yu(t)=="symbol"?t:t+""}function w1e(e,t){if(Yu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Yu(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var N1e=function(t){var n=t.data,s=t.startIndex,a=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!n||!n.length)return{};var c=n.length,u=Lh().domain(Iv(0,c)).range([i,i+o-l]),d=u.domain().map(function(h){return u(h)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(s),endX:u(a),scale:u,scaleValues:d}},iE=function(t){return t.changedTouches&&!!t.changedTouches.length},Qu=function(e){function t(n){var s;return g1e(this,t),s=x1e(this,t,[n]),Yr(s,"handleDrag",function(a){s.leaveTimer&&(clearTimeout(s.leaveTimer),s.leaveTimer=null),s.state.isTravellerMoving?s.handleTravellerMove(a):s.state.isSlideMoving&&s.handleSlideDrag(a)}),Yr(s,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&s.handleDrag(a.changedTouches[0])}),Yr(s,"handleDragEnd",function(){s.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=s.props,i=a.endIndex,o=a.onDragEnd,l=a.startIndex;o==null||o({endIndex:i,startIndex:l})}),s.detachDragEndListener()}),Yr(s,"handleLeaveWrapper",function(){(s.state.isTravellerMoving||s.state.isSlideMoving)&&(s.leaveTimer=window.setTimeout(s.handleDragEnd,s.props.leaveTimeOut))}),Yr(s,"handleEnterSlideOrTraveller",function(){s.setState({isTextActive:!0})}),Yr(s,"handleLeaveSlideOrTraveller",function(){s.setState({isTextActive:!1})}),Yr(s,"handleSlideDragStart",function(a){var i=iE(a)?a.changedTouches[0]:a;s.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),s.attachDragEndListener()}),s.travellerDragStartHandlers={startX:s.handleTravellerDragStart.bind(s,"startX"),endX:s.handleTravellerDragStart.bind(s,"endX")},s.state={},s}return b1e(t,e),v1e(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(s){var a=s.startX,i=s.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,h=Math.min(a,i),f=Math.max(a,i),m=t.getIndexInRange(o,h),g=t.getIndexInRange(o,f);return{startIndex:m-m%c,endIndex:g===d?d:g-g%c}}},{key:"getTextOfTick",value:function(s){var a=this.props,i=a.data,o=a.tickFormatter,l=a.dataKey,c=gn(i[s],l,s);return qe(o)?o(c,s):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(s){var a=this.state,i=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,u=c.x,d=c.width,h=c.travellerWidth,f=c.startIndex,m=c.endIndex,g=c.onChange,p=s.pageX-i;p>0?p=Math.min(p,u+d-h-l,u+d-h-o):p<0&&(p=Math.max(p,u-o,u-l));var v=this.getIndex({startX:o+p,endX:l+p});(v.startIndex!==f||v.endIndex!==m)&&g&&g(v),this.setState({startX:o+p,endX:l+p,slideMoveStartX:s.pageX})}},{key:"handleTravellerDragStart",value:function(s,a){var i=iE(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:s,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(s){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,u=this.state[o],d=this.props,h=d.x,f=d.width,m=d.travellerWidth,g=d.onChange,p=d.gap,v=d.data,j={startX:this.state.startX,endX:this.state.endX},x=s.pageX-i;x>0?x=Math.min(x,h+f-m-u):x<0&&(x=Math.max(x,h-u)),j[o]=u+x;var y=this.getIndex(j),N=y.startIndex,w=y.endIndex,C=function(){var _=v.length-1;return o==="startX"&&(l>c?N%p===0:w%p===0)||l<c&&w===_||o==="endX"&&(l>c?w%p===0:N%p===0)||l>c&&w===_};this.setState(Yr(Yr({},o,u+x),"brushMoveStartX",s.pageX),function(){g&&C()&&g(y)})}},{key:"handleTravellerMoveKeyboard",value:function(s,a){var i=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,d=this.state[a],h=l.indexOf(d);if(h!==-1){var f=h+s;if(!(f===-1||f>=l.length)){var m=l[f];a==="startX"&&m>=u||a==="endX"&&m<=c||this.setState(Yr({},a,m),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var s=this.props,a=s.x,i=s.y,o=s.width,l=s.height,c=s.fill,u=s.stroke;return F.createElement("rect",{stroke:u,fill:c,x:a,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var s=this.props,a=s.x,i=s.y,o=s.width,l=s.height,c=s.data,u=s.children,d=s.padding,h=b.Children.only(u);return h?F.cloneElement(h,{x:a,y:i,width:o,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(s,a){var i,o,l=this,c=this.props,u=c.y,d=c.travellerWidth,h=c.height,f=c.traveller,m=c.ariaLabel,g=c.data,p=c.startIndex,v=c.endIndex,j=Math.max(s,this.props.x),x=uj(uj({},Re(this.props,!1)),{},{x:j,y:u,width:d,height:h}),y=m||"Min value: ".concat((i=g[p])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=g[v])===null||o===void 0?void 0:o.name);return F.createElement(ht,{tabIndex:0,role:"slider","aria-label":y,"aria-valuenow":s,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(w){["ArrowLeft","ArrowRight"].includes(w.key)&&(w.preventDefault(),w.stopPropagation(),l.handleTravellerMoveKeyboard(w.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(f,x))}},{key:"renderSlide",value:function(s,a){var i=this.props,o=i.y,l=i.height,c=i.stroke,u=i.travellerWidth,d=Math.min(s,a)+u,h=Math.max(Math.abs(a-s)-u,0);return F.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:o,width:h,height:l})}},{key:"renderText",value:function(){var s=this.props,a=s.startIndex,i=s.endIndex,o=s.y,l=s.height,c=s.travellerWidth,u=s.stroke,d=this.state,h=d.startX,f=d.endX,m=5,g={pointerEvents:"none",fill:u};return F.createElement(ht,{className:"recharts-brush-texts"},F.createElement(Wl,$v({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,f)-m,y:o+l/2},g),this.getTextOfTick(a)),F.createElement(Wl,$v({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,f)+c+m,y:o+l/2},g),this.getTextOfTick(i)))}},{key:"render",value:function(){var s=this.props,a=s.data,i=s.className,o=s.children,l=s.x,c=s.y,u=s.width,d=s.height,h=s.alwaysShowText,f=this.state,m=f.startX,g=f.endX,p=f.isTextActive,v=f.isSlideMoving,j=f.isTravellerMoving,x=f.isTravellerFocused;if(!a||!a.length||!je(l)||!je(c)||!je(u)||!je(d)||u<=0||d<=0)return null;var y=Ze("recharts-brush",i),N=F.Children.count(o)===1,w=p1e("userSelect","none");return F.createElement(ht,{className:y,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),N&&this.renderPanorama(),this.renderSlide(m,g),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(g,"endX"),(p||v||j||x||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(s){var a=s.x,i=s.y,o=s.width,l=s.height,c=s.stroke,u=Math.floor(i+l/2)-1;return F.createElement(F.Fragment,null,F.createElement("rect",{x:a,y:i,width:o,height:l,fill:c,stroke:"none"}),F.createElement("line",{x1:a+1,y1:u,x2:a+o-1,y2:u,fill:"none",stroke:"#fff"}),F.createElement("line",{x1:a+1,y1:u+2,x2:a+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(s,a){var i;return F.isValidElement(s)?i=F.cloneElement(s,a):qe(s)?i=s(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(s,a){var i=s.data,o=s.width,l=s.x,c=s.travellerWidth,u=s.updateId,d=s.startIndex,h=s.endIndex;if(i!==a.prevData||u!==a.prevUpdateId)return uj({prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},i&&i.length?N1e({data:i,width:o,x:l,travellerWidth:c,startIndex:d,endIndex:h}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var f=a.scale.domain().map(function(m){return a.scale(m)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:a.scale(s.startIndex),endX:a.scale(s.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(s,a){for(var i=s.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);s[c]>a?l=c:o=c}return a>=s[l]?l:o}}])}(b.PureComponent);Yr(Qu,"displayName","Brush");Yr(Qu,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var S1e=lC;function C1e(e,t){var n;return S1e(e,function(s,a,i){return n=t(s,a,i),!n}),!!n}var _1e=C1e,P1e=BF,A1e=Wa,k1e=_1e,T1e=zr,E1e=my;function O1e(e,t,n){var s=T1e(e)?P1e:k1e;return n&&E1e(e,t,n)&&(t=void 0),s(e,A1e(t))}var D1e=O1e;const M1e=Pt(D1e);var Fa=function(t,n){var s=t.alwaysShow,a=t.ifOverflow;return s&&(a="extendDomain"),a===n},oE=lL;function I1e(e,t,n){t=="__proto__"&&oE?oE(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var $1e=I1e,R1e=$1e,F1e=iL,L1e=Wa;function B1e(e,t){var n={};return t=L1e(t),F1e(e,function(s,a,i){R1e(n,a,t(s,a,i))}),n}var V1e=B1e;const z1e=Pt(V1e);function q1e(e,t){for(var n=-1,s=e==null?0:e.length;++n<s;)if(!t(e[n],n,e))return!1;return!0}var U1e=q1e,W1e=lC;function H1e(e,t){var n=!0;return W1e(e,function(s,a,i){return n=!!t(s,a,i),n}),n}var G1e=H1e,K1e=U1e,Y1e=G1e,Q1e=Wa,X1e=zr,J1e=my;function Z1e(e,t,n){var s=X1e(e)?K1e:Y1e;return n&&J1e(e,t,n)&&(t=void 0),s(e,Q1e(t))}var eSe=Z1e;const Z5=Pt(eSe);var tSe=["x","y"];function Qf(e){"@babel/helpers - typeof";return Qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qf(e)}function xN(){return xN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},xN.apply(this,arguments)}function lE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function hh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lE(Object(n),!0).forEach(function(s){nSe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lE(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function nSe(e,t,n){return t=rSe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rSe(e){var t=sSe(e,"string");return Qf(t)=="symbol"?t:t+""}function sSe(e,t){if(Qf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Qf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aSe(e,t){if(e==null)return{};var n=iSe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function iSe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function oSe(e,t){var n=e.x,s=e.y,a=aSe(e,tSe),i="".concat(n),o=parseInt(i,10),l="".concat(s),c=parseInt(l,10),u="".concat(t.height||a.height),d=parseInt(u,10),h="".concat(t.width||a.width),f=parseInt(h,10);return hh(hh(hh(hh(hh({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:f,name:t.name,radius:t.radius})}function cE(e){return F.createElement(H5,xN({shapeType:"rectangle",propTransformer:oSe,activeClassName:"recharts-active-bar"},e))}var lSe=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(s,a){if(typeof t=="number")return t;var i=je(s)||Mse(s);return i?t(s,a):(i||Kl(),n)}},cSe=["value","background"],e6;function Xu(e){"@babel/helpers - typeof";return Xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xu(e)}function uSe(e,t){if(e==null)return{};var n=dSe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function dSe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function Fv(){return Fv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Fv.apply(this,arguments)}function uE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function yn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uE(Object(n),!0).forEach(function(s){uo(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uE(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function hSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dE(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,n6(s.key),s)}}function fSe(e,t,n){return t&&dE(e.prototype,t),n&&dE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function mSe(e,t,n){return t=Lv(t),pSe(e,t6()?Reflect.construct(t,n||[],Lv(e).constructor):t.apply(e,n))}function pSe(e,t){if(t&&(Xu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gSe(e)}function gSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function t6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(t6=function(){return!!e})()}function Lv(e){return Lv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Lv(e)}function vSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yN(e,t)}function yN(e,t){return yN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},yN(e,t)}function uo(e,t,n){return t=n6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n6(e){var t=xSe(e,"string");return Xu(t)=="symbol"?t:t+""}function xSe(e,t){if(Xu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Xu(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pa=function(e){function t(){var n;hSe(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return n=mSe(this,t,[].concat(a)),uo(n,"state",{isAnimationFinished:!1}),uo(n,"id",ac("recharts-bar-")),uo(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),uo(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return vSe(t,e),fSe(t,[{key:"renderRectanglesStatically",value:function(s){var a=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,u=i.activeBar,d=Re(this.props,!1);return s&&s.map(function(h,f){var m=f===c,g=m?u:o,p=yn(yn(yn({},d),h),{},{isActive:m,option:g,index:f,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return F.createElement(ht,Fv({className:"recharts-bar-rectangle"},Ul(a.props,h,f),{key:"rectangle-".concat(h==null?void 0:h.x,"-").concat(h==null?void 0:h.y,"-").concat(h==null?void 0:h.value,"-").concat(f)}),F.createElement(cE,p))})}},{key:"renderRectanglesWithAnimation",value:function(){var s=this,a=this.props,i=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,u=a.animationDuration,d=a.animationEasing,h=a.animationId,f=this.state.prevData;return F.createElement(aa,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var g=m.t,p=i.map(function(v,j){var x=f&&f[j];if(x){var y=On(x.x,v.x),N=On(x.y,v.y),w=On(x.width,v.width),C=On(x.height,v.height);return yn(yn({},v),{},{x:y(g),y:N(g),width:w(g),height:C(g)})}if(o==="horizontal"){var S=On(0,v.height),_=S(g);return yn(yn({},v),{},{y:v.y+v.height-_,height:_})}var k=On(0,v.width),T=k(g);return yn(yn({},v),{},{width:T})});return F.createElement(ht,null,s.renderRectanglesStatically(p))})}},{key:"renderRectangles",value:function(){var s=this.props,a=s.data,i=s.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!Hl(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var s=this,a=this.props,i=a.data,o=a.dataKey,l=a.activeIndex,c=Re(this.props.background,!1);return i.map(function(u,d){u.value;var h=u.background,f=uSe(u,cSe);if(!h)return null;var m=yn(yn(yn(yn(yn({},f),{},{fill:"#eee"},h),c),Ul(s.props,u,d)),{},{onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return F.createElement(cE,Fv({key:"background-bar-".concat(d),option:s.props.background,isActive:d===l},m))})}},{key:"renderErrorBar",value:function(s,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,h=as(d,Tm);if(!h)return null;var f=u==="vertical"?o[0].height/2:o[0].width/2,m=function(v,j){var x=Array.isArray(v.value)?v.value[1]:v.value;return{x:v.x,y:v.y,value:x,errorVal:gn(v,j)}},g={clipPath:s?"url(#clipPath-".concat(a,")"):null};return F.createElement(ht,g,h.map(function(p){return F.cloneElement(p,{key:"error-bar-".concat(a,"-").concat(p.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:f,dataPointFormatter:m})}))}},{key:"render",value:function(){var s=this.props,a=s.hide,i=s.data,o=s.className,l=s.xAxis,c=s.yAxis,u=s.left,d=s.top,h=s.width,f=s.height,m=s.isAnimationActive,g=s.background,p=s.id;if(a||!i||!i.length)return null;var v=this.state.isAnimationFinished,j=Ze("recharts-bar",o),x=l&&l.allowDataOverflow,y=c&&c.allowDataOverflow,N=x||y,w=Qe(p)?this.id:p;return F.createElement(ht,{className:j},x||y?F.createElement("defs",null,F.createElement("clipPath",{id:"clipPath-".concat(w)},F.createElement("rect",{x:x?u:u-h/2,y:y?d:d-f/2,width:x?h:h*2,height:y?f:f*2}))):null,F.createElement(ht,{className:"recharts-bar-rectangles",clipPath:N?"url(#clipPath-".concat(w,")"):null},g?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(N,w),(!m||v)&&Ra.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curData:s.data,prevData:a.curData}:s.data!==a.curData?{curData:s.data}:null}}])}(b.PureComponent);e6=Pa;uo(Pa,"displayName","Bar");uo(Pa,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!ea.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});uo(Pa,"getComposedData",function(e){var t=e.props,n=e.item,s=e.barPosition,a=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,h=e.displayedData,f=e.offset,m=Jye(s,n);if(!m)return null;var g=t.layout,p=n.type.defaultProps,v=p!==void 0?yn(yn({},p),n.props):n.props,j=v.dataKey,x=v.children,y=v.minPointSize,N=g==="horizontal"?o:i,w=u?N.scale.domain():null,C=a0e({numericAxis:N}),S=as(x,$d),_=h.map(function(k,T){var P,A,B,L,H,z;u?P=Zye(u[d+T],w):(P=gn(k,j),Array.isArray(P)||(P=[C,P]));var $=lSe(y,e6.defaultProps.minPointSize)(P[1],T);if(g==="horizontal"){var I,E=[o.scale(P[0]),o.scale(P[1])],q=E[0],Y=E[1];A=eT({axis:i,ticks:l,bandSize:a,offset:m.offset,entry:k,index:T}),B=(I=Y??q)!==null&&I!==void 0?I:void 0,L=m.size;var re=q-Y;if(H=Number.isNaN(re)?0:re,z={x:A,y:o.y,width:L,height:o.height},Math.abs($)>0&&Math.abs(H)<Math.abs($)){var oe=yr(H||$)*(Math.abs($)-Math.abs(H));B-=oe,H+=oe}}else{var ae=[i.scale(P[0]),i.scale(P[1])],me=ae[0],we=ae[1];if(A=me,B=eT({axis:o,ticks:c,bandSize:a,offset:m.offset,entry:k,index:T}),L=we-me,H=m.size,z={x:i.x,y:B,width:i.width,height:H},Math.abs($)>0&&Math.abs(L)<Math.abs($)){var ue=yr(L||$)*(Math.abs($)-Math.abs(L));L+=ue}}return yn(yn(yn({},k),{},{x:A,y:B,width:L,height:H,value:u?P:P[1],payload:k,background:z},S&&S[T]&&S[T].props),{},{tooltipPayload:[S5(n,k)],tooltipPosition:{x:A+L/2,y:B+H/2}})});return yn({data:_,layout:g},f)});function Xf(e){"@babel/helpers - typeof";return Xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xf(e)}function ySe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hE(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,r6(s.key),s)}}function jSe(e,t,n){return t&&hE(e.prototype,t),n&&hE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function fE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Us(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fE(Object(n),!0).forEach(function(s){Ey(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fE(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Ey(e,t,n){return t=r6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r6(e){var t=bSe(e,"string");return Xf(t)=="symbol"?t:t+""}function bSe(e,t){if(Xf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Xf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var RC=function(t,n,s,a,i){var o=t.width,l=t.height,c=t.layout,u=t.children,d=Object.keys(n),h={left:s.left,leftMirror:s.left,right:o-s.right,rightMirror:o-s.right,top:s.top,topMirror:s.top,bottom:l-s.bottom,bottomMirror:l-s.bottom},f=!!Xr(u,Pa);return d.reduce(function(m,g){var p=n[g],v=p.orientation,j=p.domain,x=p.padding,y=x===void 0?{}:x,N=p.mirror,w=p.reversed,C="".concat(v).concat(N?"Mirror":""),S,_,k,T,P;if(p.type==="number"&&(p.padding==="gap"||p.padding==="no-gap")){var A=j[1]-j[0],B=1/0,L=p.categoricalDomain.sort(Rse);if(L.forEach(function(ae,me){me>0&&(B=Math.min((ae||0)-(L[me-1]||0),B))}),Number.isFinite(B)){var H=B/A,z=p.layout==="vertical"?s.height:s.width;if(p.padding==="gap"&&(S=H*z/2),p.padding==="no-gap"){var $=jr(t.barCategoryGap,H*z),I=H*z/2;S=I-$-(I-$)/z*$}}}a==="xAxis"?_=[s.left+(y.left||0)+(S||0),s.left+s.width-(y.right||0)-(S||0)]:a==="yAxis"?_=c==="horizontal"?[s.top+s.height-(y.bottom||0),s.top+(y.top||0)]:[s.top+(y.top||0)+(S||0),s.top+s.height-(y.bottom||0)-(S||0)]:_=p.range,w&&(_=[_[1],_[0]]);var E=j5(p,i,f),q=E.scale,Y=E.realScaleType;q.domain(j).range(_),b5(q);var re=w5(q,Us(Us({},p),{},{realScaleType:Y}));a==="xAxis"?(P=v==="top"&&!N||v==="bottom"&&N,k=s.left,T=h[C]-P*p.height):a==="yAxis"&&(P=v==="left"&&!N||v==="right"&&N,k=h[C]-P*p.width,T=s.top);var oe=Us(Us(Us({},p),re),{},{realScaleType:Y,x:k,y:T,scale:q,width:a==="xAxis"?s.width:p.width,height:a==="yAxis"?s.height:p.height});return oe.bandSize=Nv(oe,re),!p.hide&&a==="xAxis"?h[C]+=(P?-1:1)*oe.height:p.hide||(h[C]+=(P?-1:1)*oe.width),Us(Us({},m),{},Ey({},g,oe))},{})},s6=function(t,n){var s=t.x,a=t.y,i=n.x,o=n.y;return{x:Math.min(s,i),y:Math.min(a,o),width:Math.abs(i-s),height:Math.abs(o-a)}},wSe=function(t){var n=t.x1,s=t.y1,a=t.x2,i=t.y2;return s6({x:n,y:s},{x:a,y:i})},a6=function(){function e(t){ySe(this,e),this.scale=t}return jSe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.bandAware,i=s.position;if(n!==void 0){if(i)switch(i){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var s=this.range(),a=s[0],i=s[s.length-1];return a<=i?n>=a&&n<=i:n>=i&&n<=a}}],[{key:"create",value:function(n){return new e(n)}}])}();Ey(a6,"EPS",1e-4);var FC=function(t){var n=Object.keys(t).reduce(function(s,a){return Us(Us({},s),{},Ey({},a,a6.create(t[a])))},{});return Us(Us({},n),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return z1e(a,function(c,u){return n[u].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return Z5(a,function(i,o){return n[o].isInRange(i)})}})};function NSe(e){return(e%180+180)%180}var SSe=function(t){var n=t.width,s=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=NSe(a),o=i*Math.PI/180,l=Math.atan(s/n),c=o>l&&o<Math.PI-l?s/Math.sin(o):n/Math.cos(o);return Math.abs(c)},CSe=Wa,_Se=Cm,PSe=hy;function ASe(e){return function(t,n,s){var a=Object(t);if(!_Se(t)){var i=CSe(n);t=PSe(t),n=function(l){return i(a[l],l,a)}}var o=e(t,n,s);return o>-1?a[i?t[o]:o]:void 0}}var kSe=ASe,TSe=Y5;function ESe(e){var t=TSe(e),n=t%1;return t===t?n?t-n:t:0}var OSe=ESe,DSe=eL,MSe=Wa,ISe=OSe,$Se=Math.max;function RSe(e,t,n){var s=e==null?0:e.length;if(!s)return-1;var a=n==null?0:ISe(n);return a<0&&(a=$Se(s+a,0)),DSe(e,MSe(t),a)}var FSe=RSe,LSe=kSe,BSe=FSe,VSe=LSe(BSe),zSe=VSe;const qSe=Pt(zSe);var USe=Fre(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),LC=b.createContext(void 0),BC=b.createContext(void 0),i6=b.createContext(void 0),o6=b.createContext({}),l6=b.createContext(void 0),c6=b.createContext(0),u6=b.createContext(0),mE=function(t){var n=t.state,s=n.xAxisMap,a=n.yAxisMap,i=n.offset,o=t.clipPathId,l=t.children,c=t.width,u=t.height,d=USe(i);return F.createElement(LC.Provider,{value:s},F.createElement(BC.Provider,{value:a},F.createElement(o6.Provider,{value:i},F.createElement(i6.Provider,{value:d},F.createElement(l6.Provider,{value:o},F.createElement(c6.Provider,{value:u},F.createElement(u6.Provider,{value:c},l)))))))},WSe=function(){return b.useContext(l6)},d6=function(t){var n=b.useContext(LC);n==null&&Kl();var s=n[t];return s==null&&Kl(),s},HSe=function(){var t=b.useContext(LC);return Qi(t)},GSe=function(){var t=b.useContext(BC),n=qSe(t,function(s){return Z5(s.domain,Number.isFinite)});return n||Qi(t)},h6=function(t){var n=b.useContext(BC);n==null&&Kl();var s=n[t];return s==null&&Kl(),s},KSe=function(){var t=b.useContext(i6);return t},YSe=function(){return b.useContext(o6)},VC=function(){return b.useContext(u6)},zC=function(){return b.useContext(c6)};function Ju(e){"@babel/helpers - typeof";return Ju=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ju(e)}function QSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XSe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,m6(s.key),s)}}function JSe(e,t,n){return t&&XSe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ZSe(e,t,n){return t=Bv(t),eCe(e,f6()?Reflect.construct(t,n||[],Bv(e).constructor):t.apply(e,n))}function eCe(e,t){if(t&&(Ju(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tCe(e)}function tCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(f6=function(){return!!e})()}function Bv(e){return Bv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Bv(e)}function nCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jN(e,t)}function jN(e,t){return jN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},jN(e,t)}function pE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function gE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pE(Object(n),!0).forEach(function(s){qC(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pE(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function qC(e,t,n){return t=m6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m6(e){var t=rCe(e,"string");return Ju(t)=="symbol"?t:t+""}function rCe(e,t){if(Ju(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Ju(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sCe(e,t){return lCe(e)||oCe(e,t)||iCe(e,t)||aCe()}function aCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iCe(e,t){if(e){if(typeof e=="string")return vE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vE(e,t)}}function vE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function oCe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function lCe(e){if(Array.isArray(e))return e}function bN(){return bN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},bN.apply(this,arguments)}var cCe=function(t,n){var s;return F.isValidElement(t)?s=F.cloneElement(t,n):qe(t)?s=t(n):s=F.createElement("line",bN({},n,{className:"recharts-reference-line-line"})),s},uCe=function(t,n,s,a,i,o,l,c,u){var d=i.x,h=i.y,f=i.width,m=i.height;if(s){var g=u.y,p=t.y.apply(g,{position:o});if(Fa(u,"discard")&&!t.y.isInRange(p))return null;var v=[{x:d+f,y:p},{x:d,y:p}];return c==="left"?v.reverse():v}if(n){var j=u.x,x=t.x.apply(j,{position:o});if(Fa(u,"discard")&&!t.x.isInRange(x))return null;var y=[{x,y:h+m},{x,y:h}];return l==="top"?y.reverse():y}if(a){var N=u.segment,w=N.map(function(C){return t.apply(C,{position:o})});return Fa(u,"discard")&&M1e(w,function(C){return!t.isInRange(C)})?null:w}return null};function dCe(e){var t=e.x,n=e.y,s=e.segment,a=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=WSe(),d=d6(a),h=h6(i),f=KSe();if(!u||!f)return null;Zs(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=FC({x:d.scale,y:h.scale}),g=In(t),p=In(n),v=s&&s.length===2,j=uCe(m,g,p,v,f,e.position,d.orientation,h.orientation,e);if(!j)return null;var x=sCe(j,2),y=x[0],N=y.x,w=y.y,C=x[1],S=C.x,_=C.y,k=Fa(e,"hidden")?"url(#".concat(u,")"):void 0,T=gE(gE({clipPath:k},Re(e,!0)),{},{x1:N,y1:w,x2:S,y2:_});return F.createElement(ht,{className:Ze("recharts-reference-line",l)},cCe(o,T),Un.renderCallByParent(e,wSe({x1:N,y1:w,x2:S,y2:_})))}var UC=function(e){function t(){return QSe(this,t),ZSe(this,t,arguments)}return nCe(t,e),JSe(t,[{key:"render",value:function(){return F.createElement(dCe,this.props)}}])}(F.Component);qC(UC,"displayName","ReferenceLine");qC(UC,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function wN(){return wN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},wN.apply(this,arguments)}function Zu(e){"@babel/helpers - typeof";return Zu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zu(e)}function xE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function yE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xE(Object(n),!0).forEach(function(s){Oy(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xE(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function hCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fCe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,g6(s.key),s)}}function mCe(e,t,n){return t&&fCe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function pCe(e,t,n){return t=Vv(t),gCe(e,p6()?Reflect.construct(t,n||[],Vv(e).constructor):t.apply(e,n))}function gCe(e,t){if(t&&(Zu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vCe(e)}function vCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(p6=function(){return!!e})()}function Vv(e){return Vv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Vv(e)}function xCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&NN(e,t)}function NN(e,t){return NN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},NN(e,t)}function Oy(e,t,n){return t=g6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g6(e){var t=yCe(e,"string");return Zu(t)=="symbol"?t:t+""}function yCe(e,t){if(Zu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Zu(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jCe=function(t){var n=t.x,s=t.y,a=t.xAxis,i=t.yAxis,o=FC({x:a.scale,y:i.scale}),l=o.apply({x:n,y:s},{bandAware:!0});return Fa(t,"discard")&&!o.isInRange(l)?null:l},Dy=function(e){function t(){return hCe(this,t),pCe(this,t,arguments)}return xCe(t,e),mCe(t,[{key:"render",value:function(){var s=this.props,a=s.x,i=s.y,o=s.r,l=s.alwaysShow,c=s.clipPathId,u=In(a),d=In(i);if(Zs(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var h=jCe(this.props);if(!h)return null;var f=h.x,m=h.y,g=this.props,p=g.shape,v=g.className,j=Fa(this.props,"hidden")?"url(#".concat(c,")"):void 0,x=yE(yE({clipPath:j},Re(this.props,!0)),{},{cx:f,cy:m});return F.createElement(ht,{className:Ze("recharts-reference-dot",v)},t.renderDot(p,x),Un.renderCallByParent(this.props,{x:f-o,y:m-o,width:2*o,height:2*o}))}}])}(F.Component);Oy(Dy,"displayName","ReferenceDot");Oy(Dy,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Oy(Dy,"renderDot",function(e,t){var n;return F.isValidElement(e)?n=F.cloneElement(e,t):qe(e)?n=e(t):n=F.createElement(Em,wN({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function SN(){return SN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},SN.apply(this,arguments)}function ed(e){"@babel/helpers - typeof";return ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ed(e)}function jE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function bE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jE(Object(n),!0).forEach(function(s){My(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jE(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function bCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wCe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,x6(s.key),s)}}function NCe(e,t,n){return t&&wCe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function SCe(e,t,n){return t=zv(t),CCe(e,v6()?Reflect.construct(t,n||[],zv(e).constructor):t.apply(e,n))}function CCe(e,t){if(t&&(ed(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _Ce(e)}function _Ce(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(v6=function(){return!!e})()}function zv(e){return zv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},zv(e)}function PCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&CN(e,t)}function CN(e,t){return CN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},CN(e,t)}function My(e,t,n){return t=x6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x6(e){var t=ACe(e,"string");return ed(t)=="symbol"?t:t+""}function ACe(e,t){if(ed(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(ed(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kCe=function(t,n,s,a,i){var o=i.x1,l=i.x2,c=i.y1,u=i.y2,d=i.xAxis,h=i.yAxis;if(!d||!h)return null;var f=FC({x:d.scale,y:h.scale}),m={x:t?f.x.apply(o,{position:"start"}):f.x.rangeMin,y:s?f.y.apply(c,{position:"start"}):f.y.rangeMin},g={x:n?f.x.apply(l,{position:"end"}):f.x.rangeMax,y:a?f.y.apply(u,{position:"end"}):f.y.rangeMax};return Fa(i,"discard")&&(!f.isInRange(m)||!f.isInRange(g))?null:s6(m,g)},Iy=function(e){function t(){return bCe(this,t),SCe(this,t,arguments)}return PCe(t,e),NCe(t,[{key:"render",value:function(){var s=this.props,a=s.x1,i=s.x2,o=s.y1,l=s.y2,c=s.className,u=s.alwaysShow,d=s.clipPathId;Zs(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=In(a),f=In(i),m=In(o),g=In(l),p=this.props.shape;if(!h&&!f&&!m&&!g&&!p)return null;var v=kCe(h,f,m,g,this.props);if(!v&&!p)return null;var j=Fa(this.props,"hidden")?"url(#".concat(d,")"):void 0;return F.createElement(ht,{className:Ze("recharts-reference-area",c)},t.renderRect(p,bE(bE({clipPath:j},Re(this.props,!0)),v)),Un.renderCallByParent(this.props,v))}}])}(F.Component);My(Iy,"displayName","ReferenceArea");My(Iy,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});My(Iy,"renderRect",function(e,t){var n;return F.isValidElement(e)?n=F.cloneElement(e,t):qe(e)?n=e(t):n=F.createElement($C,SN({},t,{className:"recharts-reference-area-rect"})),n});function y6(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var s=[],a=0;a<e.length;a+=t)s.push(e[a]);return s}function TCe(e,t,n){var s={width:e.width+t.width,height:e.height+t.height};return SSe(s,n)}function ECe(e,t,n){var s=n==="width",a=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:s?a:i,end:s?a+o:i+l}:{start:s?a+o:i+l,end:s?a:i}}function qv(e,t,n,s,a){if(e*t<e*s||e*t>e*a)return!1;var i=n();return e*(t-e*i/2-s)>=0&&e*(t+e*i/2-a)<=0}function OCe(e,t){return y6(e,t+1)}function DCe(e,t,n,s,a){for(var i=(s||[]).slice(),o=t.start,l=t.end,c=0,u=1,d=o,h=function(){var g=s==null?void 0:s[c];if(g===void 0)return{v:y6(s,u)};var p=c,v,j=function(){return v===void 0&&(v=n(g,p)),v},x=g.coordinate,y=c===0||qv(e,x,j,d,l);y||(c=0,d=o,u+=1),y&&(d=x+e*(j()/2+a),c+=u)},f;u<=i.length;)if(f=h(),f)return f.v;return[]}function Jf(e){"@babel/helpers - typeof";return Jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jf(e)}function wE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function ar(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wE(Object(n),!0).forEach(function(s){MCe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wE(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function MCe(e,t,n){return t=ICe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ICe(e){var t=$Ce(e,"string");return Jf(t)=="symbol"?t:t+""}function $Ce(e,t){if(Jf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Jf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RCe(e,t,n,s,a){for(var i=(s||[]).slice(),o=i.length,l=t.start,c=t.end,u=function(f){var m=i[f],g,p=function(){return g===void 0&&(g=n(m,f)),g};if(f===o-1){var v=e*(m.coordinate+e*p()/2-c);i[f]=m=ar(ar({},m),{},{tickCoord:v>0?m.coordinate-v*e:m.coordinate})}else i[f]=m=ar(ar({},m),{},{tickCoord:m.coordinate});var j=qv(e,m.tickCoord,p,l,c);j&&(c=m.tickCoord-e*(p()/2+a),i[f]=ar(ar({},m),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return i}function FCe(e,t,n,s,a,i){var o=(s||[]).slice(),l=o.length,c=t.start,u=t.end;if(i){var d=s[l-1],h=n(d,l-1),f=e*(d.coordinate+e*h/2-u);o[l-1]=d=ar(ar({},d),{},{tickCoord:f>0?d.coordinate-f*e:d.coordinate});var m=qv(e,d.tickCoord,function(){return h},c,u);m&&(u=d.tickCoord-e*(h/2+a),o[l-1]=ar(ar({},d),{},{isShow:!0}))}for(var g=i?l-1:l,p=function(x){var y=o[x],N,w=function(){return N===void 0&&(N=n(y,x)),N};if(x===0){var C=e*(y.coordinate-e*w()/2-c);o[x]=y=ar(ar({},y),{},{tickCoord:C<0?y.coordinate-C*e:y.coordinate})}else o[x]=y=ar(ar({},y),{},{tickCoord:y.coordinate});var S=qv(e,y.tickCoord,w,c,u);S&&(c=y.tickCoord+e*(w()/2+a),o[x]=ar(ar({},y),{},{isShow:!0}))},v=0;v<g;v++)p(v);return o}function WC(e,t,n){var s=e.tick,a=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,d=e.unit,h=e.angle;if(!a||!a.length||!s)return[];if(je(c)||ea.isSsr)return OCe(a,typeof c=="number"&&je(c)?c:0);var f=[],m=l==="top"||l==="bottom"?"width":"height",g=d&&m==="width"?Fh(d,{fontSize:t,letterSpacing:n}):{width:0,height:0},p=function(y,N){var w=qe(u)?u(y.value,N):y.value;return m==="width"?TCe(Fh(w,{fontSize:t,letterSpacing:n}),g,h):Fh(w,{fontSize:t,letterSpacing:n})[m]},v=a.length>=2?yr(a[1].coordinate-a[0].coordinate):1,j=ECe(i,v,m);return c==="equidistantPreserveStart"?DCe(v,j,p,a,o):(c==="preserveStart"||c==="preserveStartEnd"?f=FCe(v,j,p,a,o,c==="preserveStartEnd"):f=RCe(v,j,p,a,o),f.filter(function(x){return x.isShow}))}var LCe=["viewBox"],BCe=["viewBox"],VCe=["ticks"];function td(e){"@babel/helpers - typeof";return td=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},td(e)}function Wc(){return Wc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Wc.apply(this,arguments)}function NE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Cn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NE(Object(n),!0).forEach(function(s){HC(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NE(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function dj(e,t){if(e==null)return{};var n=zCe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function zCe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function qCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SE(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,b6(s.key),s)}}function UCe(e,t,n){return t&&SE(e.prototype,t),n&&SE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function WCe(e,t,n){return t=Uv(t),HCe(e,j6()?Reflect.construct(t,n||[],Uv(e).constructor):t.apply(e,n))}function HCe(e,t){if(t&&(td(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return GCe(e)}function GCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(j6=function(){return!!e})()}function Uv(e){return Uv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Uv(e)}function KCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_N(e,t)}function _N(e,t){return _N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},_N(e,t)}function HC(e,t,n){return t=b6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b6(e){var t=YCe(e,"string");return td(t)=="symbol"?t:t+""}function YCe(e,t){if(td(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(td(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Bd=function(e){function t(n){var s;return qCe(this,t),s=WCe(this,t,[n]),s.state={fontSize:"",letterSpacing:""},s}return KCe(t,e),UCe(t,[{key:"shouldComponentUpdate",value:function(s,a){var i=s.viewBox,o=dj(s,LCe),l=this.props,c=l.viewBox,u=dj(l,BCe);return!ru(i,c)||!ru(o,u)||!ru(a,this.state)}},{key:"componentDidMount",value:function(){var s=this.layerReference;if(s){var a=s.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(s){var a=this.props,i=a.x,o=a.y,l=a.width,c=a.height,u=a.orientation,d=a.tickSize,h=a.mirror,f=a.tickMargin,m,g,p,v,j,x,y=h?-1:1,N=s.tickSize||d,w=je(s.tickCoord)?s.tickCoord:s.coordinate;switch(u){case"top":m=g=s.coordinate,v=o+ +!h*c,p=v-y*N,x=p-y*f,j=w;break;case"left":p=v=s.coordinate,g=i+ +!h*l,m=g-y*N,j=m-y*f,x=w;break;case"right":p=v=s.coordinate,g=i+ +h*l,m=g+y*N,j=m+y*f,x=w;break;default:m=g=s.coordinate,v=o+ +h*c,p=v+y*N,x=p+y*f,j=w;break}return{line:{x1:m,y1:p,x2:g,y2:v},tick:{x:j,y:x}}}},{key:"getTickTextAnchor",value:function(){var s=this.props,a=s.orientation,i=s.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var s=this.props,a=s.orientation,i=s.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var s=this.props,a=s.x,i=s.y,o=s.width,l=s.height,c=s.orientation,u=s.mirror,d=s.axisLine,h=Cn(Cn(Cn({},Re(this.props,!1)),Re(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var f=+(c==="top"&&!u||c==="bottom"&&u);h=Cn(Cn({},h),{},{x1:a,y1:i+f*l,x2:a+o,y2:i+f*l})}else{var m=+(c==="left"&&!u||c==="right"&&u);h=Cn(Cn({},h),{},{x1:a+m*o,y1:i,x2:a+m*o,y2:i+l})}return F.createElement("line",Wc({},h,{className:Ze("recharts-cartesian-axis-line",ss(d,"className"))}))}},{key:"renderTicks",value:function(s,a,i){var o=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,h=l.tickFormatter,f=l.unit,m=WC(Cn(Cn({},this.props),{},{ticks:s}),a,i),g=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),v=Re(this.props,!1),j=Re(d,!1),x=Cn(Cn({},v),{},{fill:"none"},Re(c,!1)),y=m.map(function(N,w){var C=o.getTickLineCoord(N),S=C.line,_=C.tick,k=Cn(Cn(Cn(Cn({textAnchor:g,verticalAnchor:p},v),{},{stroke:"none",fill:u},j),_),{},{index:w,payload:N,visibleTicksCount:m.length,tickFormatter:h});return F.createElement(ht,Wc({className:"recharts-cartesian-axis-tick",key:"tick-".concat(N.value,"-").concat(N.coordinate,"-").concat(N.tickCoord)},Ul(o.props,N,w)),c&&F.createElement("line",Wc({},x,S,{className:Ze("recharts-cartesian-axis-tick-line",ss(c,"className"))})),d&&t.renderTickItem(d,k,"".concat(qe(h)?h(N.value,w):N.value).concat(f||"")))});return F.createElement("g",{className:"recharts-cartesian-axis-ticks"},y)}},{key:"render",value:function(){var s=this,a=this.props,i=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,u=a.className,d=a.hide;if(d)return null;var h=this.props,f=h.ticks,m=dj(h,VCe),g=f;return qe(c)&&(g=f&&f.length>0?c(this.props):c(m)),o<=0||l<=0||!g||!g.length?null:F.createElement(ht,{className:Ze("recharts-cartesian-axis",u),ref:function(v){s.layerReference=v}},i&&this.renderAxisLine(),this.renderTicks(g,this.state.fontSize,this.state.letterSpacing),Un.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(s,a,i){var o,l=Ze(a.className,"recharts-cartesian-axis-tick-value");return F.isValidElement(s)?o=F.cloneElement(s,Cn(Cn({},a),{},{className:l})):qe(s)?o=s(Cn(Cn({},a),{},{className:l})):o=F.createElement(Wl,Wc({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(b.Component);HC(Bd,"displayName","CartesianAxis");HC(Bd,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var QCe=["x1","y1","x2","y2","key"],XCe=["offset"];function Yl(e){"@babel/helpers - typeof";return Yl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yl(e)}function CE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function lr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CE(Object(n),!0).forEach(function(s){JCe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CE(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function JCe(e,t,n){return t=ZCe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZCe(e){var t=e2e(e,"string");return Yl(t)=="symbol"?t:t+""}function e2e(e,t){if(Yl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(Yl(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ml(){return ml=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ml.apply(this,arguments)}function _E(e,t){if(e==null)return{};var n=t2e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function t2e(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var n2e=function(t){var n=t.fill;if(!n||n==="none")return null;var s=t.fillOpacity,a=t.x,i=t.y,o=t.width,l=t.height,c=t.ry;return F.createElement("rect",{x:a,y:i,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:s,className:"recharts-cartesian-grid-bg"})};function w6(e,t){var n;if(F.isValidElement(e))n=F.cloneElement(e,t);else if(qe(e))n=e(t);else{var s=t.x1,a=t.y1,i=t.x2,o=t.y2,l=t.key,c=_E(t,QCe),u=Re(c,!1);u.offset;var d=_E(u,XCe);n=F.createElement("line",ml({},d,{x1:s,y1:a,x2:i,y2:o,fill:"none",key:l}))}return n}function r2e(e){var t=e.x,n=e.width,s=e.horizontal,a=s===void 0?!0:s,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var u=lr(lr({},e),{},{x1:t,y1:l,x2:t+n,y2:l,key:"line-".concat(c),index:c});return w6(a,u)});return F.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function s2e(e){var t=e.y,n=e.height,s=e.vertical,a=s===void 0?!0:s,i=e.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var u=lr(lr({},e),{},{x1:l,y1:t,x2:l,y2:t+n,key:"line-".concat(c),index:c});return w6(a,u)});return F.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function a2e(e){var t=e.horizontalFill,n=e.fillOpacity,s=e.x,a=e.y,i=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var d=l.map(function(f){return Math.round(f+a-a)}).sort(function(f,m){return f-m});a!==d[0]&&d.unshift(0);var h=d.map(function(f,m){var g=!d[m+1],p=g?a+o-f:d[m+1]-f;if(p<=0)return null;var v=m%t.length;return F.createElement("rect",{key:"react-".concat(m),y:f,x:s,height:p,width:i,stroke:"none",fill:t[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return F.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function i2e(e){var t=e.vertical,n=t===void 0?!0:t,s=e.verticalFill,a=e.fillOpacity,i=e.x,o=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!n||!s||!s.length)return null;var d=u.map(function(f){return Math.round(f+i-i)}).sort(function(f,m){return f-m});i!==d[0]&&d.unshift(0);var h=d.map(function(f,m){var g=!d[m+1],p=g?i+l-f:d[m+1]-f;if(p<=0)return null;var v=m%s.length;return F.createElement("rect",{key:"react-".concat(m),x:f,y:o,width:p,height:c,stroke:"none",fill:s[v],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return F.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var o2e=function(t,n){var s=t.xAxis,a=t.width,i=t.height,o=t.offset;return y5(WC(lr(lr(lr({},Bd.defaultProps),s),{},{ticks:ui(s,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,n)},l2e=function(t,n){var s=t.yAxis,a=t.width,i=t.height,o=t.offset;return y5(WC(lr(lr(lr({},Bd.defaultProps),s),{},{ticks:ui(s,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,n)},_c={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Ql(e){var t,n,s,a,i,o,l=VC(),c=zC(),u=YSe(),d=lr(lr({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:_c.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:_c.fill,horizontal:(s=e.horizontal)!==null&&s!==void 0?s:_c.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:_c.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:_c.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:_c.verticalFill,x:je(e.x)?e.x:u.left,y:je(e.y)?e.y:u.top,width:je(e.width)?e.width:u.width,height:je(e.height)?e.height:u.height}),h=d.x,f=d.y,m=d.width,g=d.height,p=d.syncWithTicks,v=d.horizontalValues,j=d.verticalValues,x=HSe(),y=GSe();if(!je(m)||m<=0||!je(g)||g<=0||!je(h)||h!==+h||!je(f)||f!==+f)return null;var N=d.verticalCoordinatesGenerator||o2e,w=d.horizontalCoordinatesGenerator||l2e,C=d.horizontalPoints,S=d.verticalPoints;if((!C||!C.length)&&qe(w)){var _=v&&v.length,k=w({yAxis:y?lr(lr({},y),{},{ticks:_?v:y.ticks}):void 0,width:l,height:c,offset:u},_?!0:p);Zs(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Yl(k),"]")),Array.isArray(k)&&(C=k)}if((!S||!S.length)&&qe(N)){var T=j&&j.length,P=N({xAxis:x?lr(lr({},x),{},{ticks:T?j:x.ticks}):void 0,width:l,height:c,offset:u},T?!0:p);Zs(Array.isArray(P),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Yl(P),"]")),Array.isArray(P)&&(S=P)}return F.createElement("g",{className:"recharts-cartesian-grid"},F.createElement(n2e,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),F.createElement(r2e,ml({},d,{offset:u,horizontalPoints:C,xAxis:x,yAxis:y})),F.createElement(s2e,ml({},d,{offset:u,verticalPoints:S,xAxis:x,yAxis:y})),F.createElement(a2e,ml({},d,{horizontalPoints:C})),F.createElement(i2e,ml({},d,{verticalPoints:S})))}Ql.displayName="CartesianGrid";var c2e=["type","layout","connectNulls","ref"],u2e=["key"];function nd(e){"@babel/helpers - typeof";return nd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nd(e)}function PE(e,t){if(e==null)return{};var n=d2e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function d2e(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function Uh(){return Uh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Uh.apply(this,arguments)}function AE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Kr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AE(Object(n),!0).forEach(function(s){Ws(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AE(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Pc(e){return p2e(e)||m2e(e)||f2e(e)||h2e()}function h2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f2e(e,t){if(e){if(typeof e=="string")return PN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PN(e,t)}}function m2e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function p2e(e){if(Array.isArray(e))return PN(e)}function PN(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function g2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kE(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,S6(s.key),s)}}function v2e(e,t,n){return t&&kE(e.prototype,t),n&&kE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function x2e(e,t,n){return t=Wv(t),y2e(e,N6()?Reflect.construct(t,n||[],Wv(e).constructor):t.apply(e,n))}function y2e(e,t){if(t&&(nd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return j2e(e)}function j2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(N6=function(){return!!e})()}function Wv(e){return Wv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Wv(e)}function b2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&AN(e,t)}function AN(e,t){return AN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},AN(e,t)}function Ws(e,t,n){return t=S6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S6(e){var t=w2e(e,"string");return nd(t)=="symbol"?t:t+""}function w2e(e,t){if(nd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(nd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rd=function(e){function t(){var n;g2e(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return n=x2e(this,t,[].concat(a)),Ws(n,"state",{isAnimationFinished:!0,totalLength:0}),Ws(n,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),Ws(n,"getStrokeDasharray",function(o,l,c){var u=c.reduce(function(j,x){return j+x});if(!u)return n.generateSimpleStrokeDasharray(l,o);for(var d=Math.floor(o/u),h=o%u,f=l-o,m=[],g=0,p=0;g<c.length;p+=c[g],++g)if(p+c[g]>h){m=[].concat(Pc(c.slice(0,g)),[h-p]);break}var v=m.length%2===0?[0,f]:[f];return[].concat(Pc(t.repeat(c,d)),Pc(m),v).map(function(j){return"".concat(j,"px")}).join(", ")}),Ws(n,"id",ac("recharts-line-")),Ws(n,"pathRef",function(o){n.mainCurve=o}),Ws(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Ws(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return b2e(t,e),v2e(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();this.setState({totalLength:s})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();s!==this.state.totalLength&&this.setState({totalLength:s})}}},{key:"getTotalLength",value:function(){var s=this.mainCurve;try{return s&&s.getTotalLength&&s.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(s,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,h=as(d,Tm);if(!h)return null;var f=function(p,v){return{x:p.x,y:p.y,value:p.value,errorVal:gn(p.payload,v)}},m={clipPath:s?"url(#clipPath-".concat(a,")"):null};return F.createElement(ht,m,h.map(function(g){return F.cloneElement(g,{key:"bar-".concat(g.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,dataPointFormatter:f})}))}},{key:"renderDots",value:function(s,a,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,u=l.points,d=l.dataKey,h=Re(this.props,!1),f=Re(c,!0),m=u.map(function(p,v){var j=Kr(Kr(Kr({key:"dot-".concat(v),r:3},h),f),{},{index:v,cx:p.x,cy:p.y,value:p.value,dataKey:d,payload:p.payload,points:u});return t.renderDotItem(c,j)}),g={clipPath:s?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return F.createElement(ht,Uh({className:"recharts-line-dots",key:"dots"},g),m)}},{key:"renderCurveStatically",value:function(s,a,i,o){var l=this.props,c=l.type,u=l.layout,d=l.connectNulls;l.ref;var h=PE(l,c2e),f=Kr(Kr(Kr({},Re(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(i,")"):null,points:s},o),{},{type:c,layout:u,connectNulls:d});return F.createElement(kl,Uh({},f,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(s,a){var i=this,o=this.props,l=o.points,c=o.strokeDasharray,u=o.isAnimationActive,d=o.animationBegin,h=o.animationDuration,f=o.animationEasing,m=o.animationId,g=o.animateNewValues,p=o.width,v=o.height,j=this.state,x=j.prevPoints,y=j.totalLength;return F.createElement(aa,{begin:d,duration:h,isActive:u,easing:f,from:{t:0},to:{t:1},key:"line-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(N){var w=N.t;if(x){var C=x.length/l.length,S=l.map(function(A,B){var L=Math.floor(B*C);if(x[L]){var H=x[L],z=On(H.x,A.x),$=On(H.y,A.y);return Kr(Kr({},A),{},{x:z(w),y:$(w)})}if(g){var I=On(p*2,A.x),E=On(v/2,A.y);return Kr(Kr({},A),{},{x:I(w),y:E(w)})}return Kr(Kr({},A),{},{x:A.x,y:A.y})});return i.renderCurveStatically(S,s,a)}var _=On(0,y),k=_(w),T;if(c){var P="".concat(c).split(/[,\s]+/gim).map(function(A){return parseFloat(A)});T=i.getStrokeDasharray(k,y,P)}else T=i.generateSimpleStrokeDasharray(y,k);return i.renderCurveStatically(l,s,a,{strokeDasharray:T})})}},{key:"renderCurve",value:function(s,a){var i=this.props,o=i.points,l=i.isAnimationActive,c=this.state,u=c.prevPoints,d=c.totalLength;return l&&o&&o.length&&(!u&&d>0||!Hl(u,o))?this.renderCurveWithAnimation(s,a):this.renderCurveStatically(o,s,a)}},{key:"render",value:function(){var s,a=this.props,i=a.hide,o=a.dot,l=a.points,c=a.className,u=a.xAxis,d=a.yAxis,h=a.top,f=a.left,m=a.width,g=a.height,p=a.isAnimationActive,v=a.id;if(i||!l||!l.length)return null;var j=this.state.isAnimationFinished,x=l.length===1,y=Ze("recharts-line",c),N=u&&u.allowDataOverflow,w=d&&d.allowDataOverflow,C=N||w,S=Qe(v)?this.id:v,_=(s=Re(o,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},k=_.r,T=k===void 0?3:k,P=_.strokeWidth,A=P===void 0?2:P,B=dF(o)?o:{},L=B.clipDot,H=L===void 0?!0:L,z=T*2+A;return F.createElement(ht,{className:y},N||w?F.createElement("defs",null,F.createElement("clipPath",{id:"clipPath-".concat(S)},F.createElement("rect",{x:N?f:f-m/2,y:w?h:h-g/2,width:N?m:m*2,height:w?g:g*2})),!H&&F.createElement("clipPath",{id:"clipPath-dots-".concat(S)},F.createElement("rect",{x:f-z/2,y:h-z/2,width:m+z,height:g+z}))):null,!x&&this.renderCurve(C,S),this.renderErrorBar(C,S),(x||o)&&this.renderDots(C,H,S),(!p||j)&&Ra.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,prevPoints:a.curPoints}:s.points!==a.curPoints?{curPoints:s.points}:null}},{key:"repeat",value:function(s,a){for(var i=s.length%2!==0?[].concat(Pc(s),[0]):s,o=[],l=0;l<a;++l)o=[].concat(Pc(o),Pc(i));return o}},{key:"renderDotItem",value:function(s,a){var i;if(F.isValidElement(s))i=F.cloneElement(s,a);else if(qe(s))i=s(a);else{var o=a.key,l=PE(a,u2e),c=Ze("recharts-line-dot",typeof s!="boolean"?s.className:"");i=F.createElement(Em,Uh({key:o},l,{className:c}))}return i}}])}(b.PureComponent);Ws(rd,"displayName","Line");Ws(rd,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!ea.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Ws(rd,"getComposedData",function(e){var t=e.props,n=e.xAxis,s=e.yAxis,a=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,l=e.bandSize,c=e.displayedData,u=e.offset,d=t.layout,h=c.map(function(f,m){var g=gn(f,o);return d==="horizontal"?{x:wv({axis:n,ticks:a,bandSize:l,entry:f,index:m}),y:Qe(g)?null:s.scale(g),value:g,payload:f}:{x:Qe(g)?null:n.scale(g),y:wv({axis:s,ticks:i,bandSize:l,entry:f,index:m}),value:g,payload:f}});return Kr({points:h,layout:d},u)});var N2e=["layout","type","stroke","connectNulls","isRange","ref"],S2e=["key"],C6;function sd(e){"@babel/helpers - typeof";return sd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sd(e)}function _6(e,t){if(e==null)return{};var n=C2e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function C2e(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function pl(){return pl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},pl.apply(this,arguments)}function TE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function zi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TE(Object(n),!0).forEach(function(s){Aa(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TE(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function _2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EE(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,A6(s.key),s)}}function P2e(e,t,n){return t&&EE(e.prototype,t),n&&EE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function A2e(e,t,n){return t=Hv(t),k2e(e,P6()?Reflect.construct(t,n||[],Hv(e).constructor):t.apply(e,n))}function k2e(e,t){if(t&&(sd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return T2e(e)}function T2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(P6=function(){return!!e})()}function Hv(e){return Hv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Hv(e)}function E2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kN(e,t)}function kN(e,t){return kN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},kN(e,t)}function Aa(e,t,n){return t=A6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A6(e){var t=O2e(e,"string");return sd(t)=="symbol"?t:t+""}function O2e(e,t){if(sd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(sd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var As=function(e){function t(){var n;_2e(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return n=A2e(this,t,[].concat(a)),Aa(n,"state",{isAnimationFinished:!0}),Aa(n,"id",ac("recharts-area-")),Aa(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),qe(o)&&o()}),Aa(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),qe(o)&&o()}),n}return E2e(t,e),P2e(t,[{key:"renderDots",value:function(s,a,i){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,u=c.dot,d=c.points,h=c.dataKey,f=Re(this.props,!1),m=Re(u,!0),g=d.map(function(v,j){var x=zi(zi(zi({key:"dot-".concat(j),r:3},f),m),{},{index:j,cx:v.x,cy:v.y,dataKey:h,value:v.value,payload:v.payload,points:d});return t.renderDotItem(u,x)}),p={clipPath:s?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return F.createElement(ht,pl({className:"recharts-area-dots"},p),g)}},{key:"renderHorizontalRect",value:function(s){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].x,u=o[o.length-1].x,d=s*Math.abs(c-u),h=co(o.map(function(f){return f.y||0}));return je(i)&&typeof i=="number"?h=Math.max(i,h):i&&Array.isArray(i)&&i.length&&(h=Math.max(co(i.map(function(f){return f.y||0})),h)),je(h)?F.createElement("rect",{x:c<u?c:c-d,y:0,width:d,height:Math.floor(h+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(s){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].y,u=o[o.length-1].y,d=s*Math.abs(c-u),h=co(o.map(function(f){return f.x||0}));return je(i)&&typeof i=="number"?h=Math.max(i,h):i&&Array.isArray(i)&&i.length&&(h=Math.max(co(i.map(function(f){return f.x||0})),h)),je(h)?F.createElement("rect",{x:0,y:c<u?c:c-d,width:h+(l?parseInt("".concat(l),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(s){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(s):this.renderHorizontalRect(s)}},{key:"renderAreaStatically",value:function(s,a,i,o){var l=this.props,c=l.layout,u=l.type,d=l.stroke,h=l.connectNulls,f=l.isRange;l.ref;var m=_6(l,N2e);return F.createElement(ht,{clipPath:i?"url(#clipPath-".concat(o,")"):null},F.createElement(kl,pl({},Re(m,!0),{points:s,connectNulls:h,type:u,baseLine:a,layout:c,stroke:"none",className:"recharts-area-area"})),d!=="none"&&F.createElement(kl,pl({},Re(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:h,fill:"none",points:s})),d!=="none"&&f&&F.createElement(kl,pl({},Re(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:h,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(s,a){var i=this,o=this.props,l=o.points,c=o.baseLine,u=o.isAnimationActive,d=o.animationBegin,h=o.animationDuration,f=o.animationEasing,m=o.animationId,g=this.state,p=g.prevPoints,v=g.prevBaseLine;return F.createElement(aa,{begin:d,duration:h,isActive:u,easing:f,from:{t:0},to:{t:1},key:"area-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(j){var x=j.t;if(p){var y=p.length/l.length,N=l.map(function(_,k){var T=Math.floor(k*y);if(p[T]){var P=p[T],A=On(P.x,_.x),B=On(P.y,_.y);return zi(zi({},_),{},{x:A(x),y:B(x)})}return _}),w;if(je(c)&&typeof c=="number"){var C=On(v,c);w=C(x)}else if(Qe(c)||Od(c)){var S=On(v,0);w=S(x)}else w=c.map(function(_,k){var T=Math.floor(k*y);if(v[T]){var P=v[T],A=On(P.x,_.x),B=On(P.y,_.y);return zi(zi({},_),{},{x:A(x),y:B(x)})}return _});return i.renderAreaStatically(N,w,s,a)}return F.createElement(ht,null,F.createElement("defs",null,F.createElement("clipPath",{id:"animationClipPath-".concat(a)},i.renderClipRect(x))),F.createElement(ht,{clipPath:"url(#animationClipPath-".concat(a,")")},i.renderAreaStatically(l,c,s,a)))})}},{key:"renderArea",value:function(s,a){var i=this.props,o=i.points,l=i.baseLine,c=i.isAnimationActive,u=this.state,d=u.prevPoints,h=u.prevBaseLine,f=u.totalLength;return c&&o&&o.length&&(!d&&f>0||!Hl(d,o)||!Hl(h,l))?this.renderAreaWithAnimation(s,a):this.renderAreaStatically(o,l,s,a)}},{key:"render",value:function(){var s,a=this.props,i=a.hide,o=a.dot,l=a.points,c=a.className,u=a.top,d=a.left,h=a.xAxis,f=a.yAxis,m=a.width,g=a.height,p=a.isAnimationActive,v=a.id;if(i||!l||!l.length)return null;var j=this.state.isAnimationFinished,x=l.length===1,y=Ze("recharts-area",c),N=h&&h.allowDataOverflow,w=f&&f.allowDataOverflow,C=N||w,S=Qe(v)?this.id:v,_=(s=Re(o,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},k=_.r,T=k===void 0?3:k,P=_.strokeWidth,A=P===void 0?2:P,B=dF(o)?o:{},L=B.clipDot,H=L===void 0?!0:L,z=T*2+A;return F.createElement(ht,{className:y},N||w?F.createElement("defs",null,F.createElement("clipPath",{id:"clipPath-".concat(S)},F.createElement("rect",{x:N?d:d-m/2,y:w?u:u-g/2,width:N?m:m*2,height:w?g:g*2})),!H&&F.createElement("clipPath",{id:"clipPath-dots-".concat(S)},F.createElement("rect",{x:d-z/2,y:u-z/2,width:m+z,height:g+z}))):null,x?null:this.renderArea(C,S),(o||x)&&this.renderDots(C,H,S),(!p||j)&&Ra.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,curBaseLine:s.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:s.points!==a.curPoints||s.baseLine!==a.curBaseLine?{curPoints:s.points,curBaseLine:s.baseLine}:null}}])}(b.PureComponent);C6=As;Aa(As,"displayName","Area");Aa(As,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!ea.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Aa(As,"getBaseValue",function(e,t,n,s){var a=e.layout,i=e.baseValue,o=t.props.baseValue,l=o??i;if(je(l)&&typeof l=="number")return l;var c=a==="horizontal"?s:n,u=c.scale.domain();if(c.type==="number"){var d=Math.max(u[0],u[1]),h=Math.min(u[0],u[1]);return l==="dataMin"?h:l==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});Aa(As,"getComposedData",function(e){var t=e.props,n=e.item,s=e.xAxis,a=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,u=e.stackedData,d=e.dataStartIndex,h=e.displayedData,f=e.offset,m=t.layout,g=u&&u.length,p=C6.getBaseValue(t,n,s,a),v=m==="horizontal",j=!1,x=h.map(function(N,w){var C;g?C=u[d+w]:(C=gn(N,c),Array.isArray(C)?j=!0:C=[p,C]);var S=C[1]==null||g&&gn(N,c)==null;return v?{x:wv({axis:s,ticks:i,bandSize:l,entry:N,index:w}),y:S?null:a.scale(C[1]),value:C,payload:N}:{x:S?null:s.scale(C[1]),y:wv({axis:a,ticks:o,bandSize:l,entry:N,index:w}),value:C,payload:N}}),y;return g||j?y=x.map(function(N){var w=Array.isArray(N.value)?N.value[0]:null;return v?{x:N.x,y:w!=null&&N.y!=null?a.scale(w):null}:{x:w!=null?s.scale(w):null,y:N.y}}):y=v?a.scale(p):s.scale(p),zi({points:x,baseLine:y,layout:m,isRange:j},f)});Aa(As,"renderDotItem",function(e,t){var n;if(F.isValidElement(e))n=F.cloneElement(e,t);else if(qe(e))n=e(t);else{var s=Ze("recharts-area-dot",typeof e!="boolean"?e.className:""),a=t.key,i=_6(t,S2e);n=F.createElement(Em,pl({},i,{key:a,className:s}))}return n});function ad(e){"@babel/helpers - typeof";return ad=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ad(e)}function D2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M2e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,E6(s.key),s)}}function I2e(e,t,n){return t&&M2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function $2e(e,t,n){return t=Gv(t),R2e(e,k6()?Reflect.construct(t,n||[],Gv(e).constructor):t.apply(e,n))}function R2e(e,t){if(t&&(ad(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return F2e(e)}function F2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(k6=function(){return!!e})()}function Gv(e){return Gv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Gv(e)}function L2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&TN(e,t)}function TN(e,t){return TN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},TN(e,t)}function T6(e,t,n){return t=E6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E6(e){var t=B2e(e,"string");return ad(t)=="symbol"?t:t+""}function B2e(e,t){if(ad(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(ad(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EN(){return EN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},EN.apply(this,arguments)}function V2e(e){var t=e.xAxisId,n=VC(),s=zC(),a=d6(t);return a==null?null:b.createElement(Bd,EN({},a,{className:Ze("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:n,height:s},ticksGenerator:function(o){return ui(o,!0)}}))}var ia=function(e){function t(){return D2e(this,t),$2e(this,t,arguments)}return L2e(t,e),I2e(t,[{key:"render",value:function(){return b.createElement(V2e,this.props)}}])}(b.Component);T6(ia,"displayName","XAxis");T6(ia,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function id(e){"@babel/helpers - typeof";return id=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},id(e)}function z2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q2e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,M6(s.key),s)}}function U2e(e,t,n){return t&&q2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function W2e(e,t,n){return t=Kv(t),H2e(e,O6()?Reflect.construct(t,n||[],Kv(e).constructor):t.apply(e,n))}function H2e(e,t){if(t&&(id(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return G2e(e)}function G2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(O6=function(){return!!e})()}function Kv(e){return Kv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Kv(e)}function K2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ON(e,t)}function ON(e,t){return ON=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},ON(e,t)}function D6(e,t,n){return t=M6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M6(e){var t=Y2e(e,"string");return id(t)=="symbol"?t:t+""}function Y2e(e,t){if(id(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(id(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function DN(){return DN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},DN.apply(this,arguments)}var Q2e=function(t){var n=t.yAxisId,s=VC(),a=zC(),i=h6(n);return i==null?null:b.createElement(Bd,DN({},i,{className:Ze("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:s,height:a},ticksGenerator:function(l){return ui(l,!0)}}))},oa=function(e){function t(){return z2e(this,t),W2e(this,t,arguments)}return K2e(t,e),U2e(t,[{key:"render",value:function(){return b.createElement(Q2e,this.props)}}])}(b.Component);D6(oa,"displayName","YAxis");D6(oa,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function OE(e){return e_e(e)||Z2e(e)||J2e(e)||X2e()}function X2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J2e(e,t){if(e){if(typeof e=="string")return MN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return MN(e,t)}}function Z2e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function e_e(e){if(Array.isArray(e))return MN(e)}function MN(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var IN=function(t,n,s,a,i){var o=as(t,UC),l=as(t,Dy),c=[].concat(OE(o),OE(l)),u=as(t,Iy),d="".concat(a,"Id"),h=a[0],f=n;if(c.length&&(f=c.reduce(function(p,v){if(v.props[d]===s&&Fa(v.props,"extendDomain")&&je(v.props[h])){var j=v.props[h];return[Math.min(p[0],j),Math.max(p[1],j)]}return p},f)),u.length){var m="".concat(h,"1"),g="".concat(h,"2");f=u.reduce(function(p,v){if(v.props[d]===s&&Fa(v.props,"extendDomain")&&je(v.props[m])&&je(v.props[g])){var j=v.props[m],x=v.props[g];return[Math.min(p[0],j,x),Math.max(p[1],j,x)]}return p},f)}return i&&i.length&&(f=i.reduce(function(p,v){return je(v)?[Math.min(p[0],v),Math.max(p[1],v)]:p},f)),f},I6={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(n=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,h,f){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new a(d,h||c,f),g=n?n+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],m]:c._events[g].push(m):(c._events[g]=m,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new s:delete c._events[u]}function l(){this._events=new s,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)t.call(d,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=n?n+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,m=h.length,g=new Array(m);f<m;f++)g[f]=h[f].fn;return g},l.prototype.listenerCount=function(u){var d=n?n+u:u,h=this._events[d];return h?h.fn?1:h.length:0},l.prototype.emit=function(u,d,h,f,m,g){var p=n?n+u:u;if(!this._events[p])return!1;var v=this._events[p],j=arguments.length,x,y;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),j){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,h),!0;case 4:return v.fn.call(v.context,d,h,f),!0;case 5:return v.fn.call(v.context,d,h,f,m),!0;case 6:return v.fn.call(v.context,d,h,f,m,g),!0}for(y=1,x=new Array(j-1);y<j;y++)x[y-1]=arguments[y];v.fn.apply(v.context,x)}else{var N=v.length,w;for(y=0;y<N;y++)switch(v[y].once&&this.removeListener(u,v[y].fn,void 0,!0),j){case 1:v[y].fn.call(v[y].context);break;case 2:v[y].fn.call(v[y].context,d);break;case 3:v[y].fn.call(v[y].context,d,h);break;case 4:v[y].fn.call(v[y].context,d,h,f);break;default:if(!x)for(w=1,x=new Array(j-1);w<j;w++)x[w-1]=arguments[w];v[y].fn.apply(v[y].context,x)}}return!0},l.prototype.on=function(u,d,h){return i(this,u,d,h,!1)},l.prototype.once=function(u,d,h){return i(this,u,d,h,!0)},l.prototype.removeListener=function(u,d,h,f){var m=n?n+u:u;if(!this._events[m])return this;if(!d)return o(this,m),this;var g=this._events[m];if(g.fn)g.fn===d&&(!f||g.once)&&(!h||g.context===h)&&o(this,m);else{for(var p=0,v=[],j=g.length;p<j;p++)(g[p].fn!==d||f&&!g[p].once||h&&g[p].context!==h)&&v.push(g[p]);v.length?this._events[m]=v.length===1?v[0]:v:o(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&o(this,d)):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l})(I6);var t_e=I6.exports;const n_e=Pt(t_e);var hj=new n_e,fj="recharts.syncMouseEvents";function Zf(e){"@babel/helpers - typeof";return Zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zf(e)}function r_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s_e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,$6(s.key),s)}}function a_e(e,t,n){return t&&s_e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function mj(e,t,n){return t=$6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $6(e){var t=i_e(e,"string");return Zf(t)=="symbol"?t:t+""}function i_e(e,t){if(Zf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Zf(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var o_e=function(){function e(){r_e(this,e),mj(this,"activeIndex",0),mj(this,"coordinateList",[]),mj(this,"layout","horizontal")}return a_e(e,[{key:"setDetails",value:function(n){var s,a=n.coordinateList,i=a===void 0?null:a,o=n.container,l=o===void 0?null:o,c=n.layout,u=c===void 0?null:c,d=n.offset,h=d===void 0?null:d,f=n.mouseHandlerCallback,m=f===void 0?null:f;this.coordinateList=(s=i??this.coordinateList)!==null&&s!==void 0?s:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=h??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,s;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,d=((s=window)===null||s===void 0?void 0:s.scrollY)||0,h=i+c+u,f=o+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:h,pageY:f})}}}])}();function l_e(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var s=e==null?void 0:e[0],a=e==null?void 0:e[1];if(s&&a&&je(s)&&je(a))return!0}return!1}function c_e(e,t,n,s){var a=s/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-a,width:e==="horizontal"?s:n.width-1,height:e==="horizontal"?n.height-1:s}}function R6(e){var t=e.cx,n=e.cy,s=e.radius,a=e.startAngle,i=e.endAngle,o=zt(t,n,s,a),l=zt(t,n,s,i);return{points:[o,l],cx:t,cy:n,radius:s,startAngle:a,endAngle:i}}function u_e(e,t,n){var s,a,i,o;if(e==="horizontal")s=t.x,i=s,a=n.top,o=n.top+n.height;else if(e==="vertical")a=t.y,o=a,s=n.left,i=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,d=t.outerRadius,h=t.angle,f=zt(l,c,u,h),m=zt(l,c,d,h);s=f.x,a=f.y,i=m.x,o=m.y}else return R6(t);return[{x:s,y:a},{x:i,y:o}]}function em(e){"@babel/helpers - typeof";return em=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},em(e)}function DE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Mp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DE(Object(n),!0).forEach(function(s){d_e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DE(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function d_e(e,t,n){return t=h_e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h_e(e){var t=f_e(e,"string");return em(t)=="symbol"?t:t+""}function f_e(e,t){if(em(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(em(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function m_e(e){var t,n,s=e.element,a=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,h=e.layout,f=e.chartName,m=(t=s.props.cursor)!==null&&t!==void 0?t:(n=s.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!s||!m||!i||!o||f!=="ScatterChart"&&a!=="axis")return null;var g,p=kl;if(f==="ScatterChart")g=o,p=wwe;else if(f==="BarChart")g=c_e(h,o,c,d),p=$C;else if(h==="radial"){var v=R6(o),j=v.cx,x=v.cy,y=v.radius,N=v.startAngle,w=v.endAngle;g={cx:j,cy:x,startAngle:N,endAngle:w,innerRadius:y,outerRadius:y},p=T5}else g={points:u_e(h,o,c)},p=kl;var C=Mp(Mp(Mp(Mp({stroke:"#ccc",pointerEvents:"none"},c),g),Re(m,!1)),{},{payload:l,payloadIndex:u,className:Ze("recharts-tooltip-cursor",m.className)});return b.isValidElement(m)?b.cloneElement(m,C):b.createElement(p,C)}var p_e=["item"],g_e=["children","className","width","height","style","compact","title","desc"];function od(e){"@babel/helpers - typeof";return od=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},od(e)}function Hc(){return Hc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Hc.apply(this,arguments)}function ME(e,t){return y_e(e)||x_e(e,t)||L6(e,t)||v_e()}function v_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function x_e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function y_e(e){if(Array.isArray(e))return e}function IE(e,t){if(e==null)return{};var n=j_e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function j_e(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function b_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w_e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,B6(s.key),s)}}function N_e(e,t,n){return t&&w_e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function S_e(e,t,n){return t=Yv(t),C_e(e,F6()?Reflect.construct(t,n||[],Yv(e).constructor):t.apply(e,n))}function C_e(e,t){if(t&&(od(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return __e(e)}function __e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(F6=function(){return!!e})()}function Yv(e){return Yv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Yv(e)}function P_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$N(e,t)}function $N(e,t){return $N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},$N(e,t)}function ld(e){return T_e(e)||k_e(e)||L6(e)||A_e()}function A_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function L6(e,t){if(e){if(typeof e=="string")return RN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RN(e,t)}}function k_e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function T_e(e){if(Array.isArray(e))return RN(e)}function RN(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function $E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$E(Object(n),!0).forEach(function(s){ze(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$E(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function ze(e,t,n){return t=B6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B6(e){var t=E_e(e,"string");return od(t)=="symbol"?t:t+""}function E_e(e,t){if(od(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t||"default");if(od(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var O_e={xAxis:["bottom","top"],yAxis:["left","right"]},D_e={width:"100%",height:"100%"},V6={x:0,y:0};function Ip(e){return e}var M_e=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},I_e=function(t,n,s,a){var i=n.find(function(d){return d&&d.index===s});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=a.radius;return de(de(de({},a),zt(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,u=a.angle;return de(de(de({},a),zt(a.cx,a.cy,c,u)),{},{angle:u,radius:c})}return V6},$y=function(t,n){var s=n.graphicalItems,a=n.dataStartIndex,i=n.dataEndIndex,o=(s??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(ld(l),ld(u)):l},[]);return o.length>0?o:t&&t.length&&je(a)&&je(i)?t.slice(a,i+1):[]};function z6(e){return e==="number"?[0,"auto"]:void 0}var FN=function(t,n,s,a){var i=t.graphicalItems,o=t.tooltipAxis,l=$y(n,t);return s<0||!i||!i.length||s>=l.length?null:i.reduce(function(c,u){var d,h=(d=u.props.data)!==null&&d!==void 0?d:n;h&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=s&&(h=h.slice(t.dataStartIndex,t.dataEndIndex+1));var f;if(o.dataKey&&!o.allowDuplicatedCategory){var m=h===void 0?l:h;f=Kg(m,o.dataKey,a)}else f=h&&h[s]||l[s];return f?[].concat(ld(c),[S5(u,f)]):c},[])},RE=function(t,n,s,a){var i=a||{x:t.chartX,y:t.chartY},o=M_e(i,s),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,d=Hye(o,l,u,c);if(d>=0&&u){var h=u[d]&&u[d].value,f=FN(t,n,d,h),m=I_e(s,l,d,i);return{activeTooltipIndex:d,activeLabel:h,activePayload:f,activeCoordinate:m}}return null},$_e=function(t,n){var s=n.axes,a=n.graphicalItems,i=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=t.layout,h=t.children,f=t.stackOffset,m=x5(d,i);return s.reduce(function(g,p){var v,j=p.type.defaultProps!==void 0?de(de({},p.type.defaultProps),p.props):p.props,x=j.type,y=j.dataKey,N=j.allowDataOverflow,w=j.allowDuplicatedCategory,C=j.scale,S=j.ticks,_=j.includeHidden,k=j[o];if(g[k])return g;var T=$y(t.data,{graphicalItems:a.filter(function(re){var oe,ae=o in re.props?re.props[o]:(oe=re.type.defaultProps)===null||oe===void 0?void 0:oe[o];return ae===k}),dataStartIndex:c,dataEndIndex:u}),P=T.length,A,B,L;l_e(j.domain,N,x)&&(A=Xw(j.domain,null,N),m&&(x==="number"||C!=="auto")&&(L=Bh(T,y,"category")));var H=z6(x);if(!A||A.length===0){var z,$=(z=j.domain)!==null&&z!==void 0?z:H;if(y){if(A=Bh(T,y,x),x==="category"&&m){var I=$se(A);w&&I?(B=A,A=Iv(0,P)):w||(A=rT($,A,p).reduce(function(re,oe){return re.indexOf(oe)>=0?re:[].concat(ld(re),[oe])},[]))}else if(x==="category")w?A=A.filter(function(re){return re!==""&&!Qe(re)}):A=rT($,A,p).reduce(function(re,oe){return re.indexOf(oe)>=0||oe===""||Qe(oe)?re:[].concat(ld(re),[oe])},[]);else if(x==="number"){var E=Xye(T,a.filter(function(re){var oe,ae,me=o in re.props?re.props[o]:(oe=re.type.defaultProps)===null||oe===void 0?void 0:oe[o],we="hide"in re.props?re.props.hide:(ae=re.type.defaultProps)===null||ae===void 0?void 0:ae.hide;return me===k&&(_||!we)}),y,i,d);E&&(A=E)}m&&(x==="number"||C!=="auto")&&(L=Bh(T,y,"category"))}else m?A=Iv(0,P):l&&l[k]&&l[k].hasStack&&x==="number"?A=f==="expand"?[0,1]:N5(l[k].stackGroups,c,u):A=v5(T,a.filter(function(re){var oe=o in re.props?re.props[o]:re.type.defaultProps[o],ae="hide"in re.props?re.props.hide:re.type.defaultProps.hide;return oe===k&&(_||!ae)}),x,d,!0);if(x==="number")A=IN(h,A,k,i,S),$&&(A=Xw($,A,N));else if(x==="category"&&$){var q=$,Y=A.every(function(re){return q.indexOf(re)>=0});Y&&(A=q)}}return de(de({},g),{},ze({},k,de(de({},j),{},{axisType:i,domain:A,categoricalDomain:L,duplicateDomain:B,originalDomain:(v=j.domain)!==null&&v!==void 0?v:H,isCategorical:m,layout:d})))},{})},R_e=function(t,n){var s=n.graphicalItems,a=n.Axis,i=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=t.layout,h=t.children,f=$y(t.data,{graphicalItems:s,dataStartIndex:c,dataEndIndex:u}),m=f.length,g=x5(d,i),p=-1;return s.reduce(function(v,j){var x=j.type.defaultProps!==void 0?de(de({},j.type.defaultProps),j.props):j.props,y=x[o],N=z6("number");if(!v[y]){p++;var w;return g?w=Iv(0,m):l&&l[y]&&l[y].hasStack?(w=N5(l[y].stackGroups,c,u),w=IN(h,w,y,i)):(w=Xw(N,v5(f,s.filter(function(C){var S,_,k=o in C.props?C.props[o]:(S=C.type.defaultProps)===null||S===void 0?void 0:S[o],T="hide"in C.props?C.props.hide:(_=C.type.defaultProps)===null||_===void 0?void 0:_.hide;return k===y&&!T}),"number",d),a.defaultProps.allowDataOverflow),w=IN(h,w,y,i)),de(de({},v),{},ze({},y,de(de({axisType:i},a.defaultProps),{},{hide:!0,orientation:ss(O_e,"".concat(i,".").concat(p%2),null),domain:w,originalDomain:N,isCategorical:g,layout:d})))}return v},{})},F_e=function(t,n){var s=n.axisType,a=s===void 0?"xAxis":s,i=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=t.children,h="".concat(a,"Id"),f=as(d,i),m={};return f&&f.length?m=$_e(t,{axes:f,graphicalItems:o,axisType:a,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(m=R_e(t,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),m},L_e=function(t){var n=Qi(t),s=ui(n,!1,!0);return{tooltipTicks:s,orderedTooltipTicks:cC(s,function(a){return a.coordinate}),tooltipAxis:n,tooltipAxisBandSize:Nv(n,s)}},FE=function(t){var n=t.children,s=t.defaultShowTooltip,a=Xr(n,Qu),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!s}},B_e=function(t){return!t||!t.length?!1:t.some(function(n){var s=hi(n&&n.type);return s&&s.indexOf("Bar")>=0})},LE=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},V_e=function(t,n){var s=t.props,a=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,u=s.width,d=s.height,h=s.children,f=s.margin||{},m=Xr(h,Qu),g=Xr(h,su),p=Object.keys(c).reduce(function(w,C){var S=c[C],_=S.orientation;return!S.mirror&&!S.hide?de(de({},w),{},ze({},_,w[_]+S.width)):w},{left:f.left||0,right:f.right||0}),v=Object.keys(o).reduce(function(w,C){var S=o[C],_=S.orientation;return!S.mirror&&!S.hide?de(de({},w),{},ze({},_,ss(w,"".concat(_))+S.height)):w},{top:f.top||0,bottom:f.bottom||0}),j=de(de({},v),p),x=j.bottom;m&&(j.bottom+=m.props.height||Qu.defaultProps.height),g&&n&&(j=Yye(j,a,s,n));var y=u-j.left-j.right,N=d-j.top-j.bottom;return de(de({brushBottom:x},j),{},{width:Math.max(y,0),height:Math.max(N,0)})},z_e=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},Ry=function(t){var n=t.chartName,s=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,h=t.defaultProps,f=function(j,x){var y=x.graphicalItems,N=x.stackGroups,w=x.offset,C=x.updateId,S=x.dataStartIndex,_=x.dataEndIndex,k=j.barSize,T=j.layout,P=j.barGap,A=j.barCategoryGap,B=j.maxBarSize,L=LE(T),H=L.numericAxisName,z=L.cateAxisName,$=B_e(y),I=[];return y.forEach(function(E,q){var Y=$y(j.data,{graphicalItems:[E],dataStartIndex:S,dataEndIndex:_}),re=E.type.defaultProps!==void 0?de(de({},E.type.defaultProps),E.props):E.props,oe=re.dataKey,ae=re.maxBarSize,me=re["".concat(H,"Id")],we=re["".concat(z,"Id")],ue={},J=c.reduce(function(bt,gt){var Qt=x["".concat(gt.axisType,"Map")],mn=re["".concat(gt.axisType,"Id")];Qt&&Qt[mn]||gt.axisType==="zAxis"||Kl();var ut=Qt[mn];return de(de({},bt),{},ze(ze({},gt.axisType,ut),"".concat(gt.axisType,"Ticks"),ui(ut)))},ue),ee=J[z],G=J["".concat(z,"Ticks")],W=N&&N[me]&&N[me].hasStack&&i0e(E,N[me].stackGroups),O=hi(E.type).indexOf("Bar")>=0,le=Nv(ee,G),ce=[],ie=$&&Gye({barSize:k,stackGroups:N,totalSize:z_e(J,z)});if(O){var Ce,st,tt=Qe(ae)?B:ae,wt=(Ce=(st=Nv(ee,G,!0))!==null&&st!==void 0?st:tt)!==null&&Ce!==void 0?Ce:0;ce=Kye({barGap:P,barCategoryGap:A,bandSize:wt!==le?wt:le,sizeList:ie[we],maxBarSize:tt}),wt!==le&&(ce=ce.map(function(bt){return de(de({},bt),{},{position:de(de({},bt.position),{},{offset:bt.position.offset-wt/2})})}))}var tn=E&&E.type&&E.type.getComposedData;tn&&I.push({props:de(de({},tn(de(de({},J),{},{displayedData:Y,props:j,dataKey:oe,item:E,bandSize:le,barPosition:ce,offset:w,stackedData:W,layout:T,dataStartIndex:S,dataEndIndex:_}))),{},ze(ze(ze({key:E.key||"item-".concat(q)},H,J[H]),z,J[z]),"animationId",C)),childIndex:Kse(E,j.children),item:E})}),I},m=function(j,x){var y=j.props,N=j.dataStartIndex,w=j.dataEndIndex,C=j.updateId;if(!XP({props:y}))return null;var S=y.children,_=y.layout,k=y.stackOffset,T=y.data,P=y.reverseStackOrder,A=LE(_),B=A.numericAxisName,L=A.cateAxisName,H=as(S,s),z=s0e(T,H,"".concat(B,"Id"),"".concat(L,"Id"),k,P),$=c.reduce(function(re,oe){var ae="".concat(oe.axisType,"Map");return de(de({},re),{},ze({},ae,F_e(y,de(de({},oe),{},{graphicalItems:H,stackGroups:oe.axisType===B&&z,dataStartIndex:N,dataEndIndex:w}))))},{}),I=V_e(de(de({},$),{},{props:y,graphicalItems:H}),x==null?void 0:x.legendBBox);Object.keys($).forEach(function(re){$[re]=d(y,$[re],I,re.replace("Map",""),n)});var E=$["".concat(L,"Map")],q=L_e(E),Y=f(y,de(de({},$),{},{dataStartIndex:N,dataEndIndex:w,updateId:C,graphicalItems:H,stackGroups:z,offset:I}));return de(de({formattedGraphicalItems:Y,graphicalItems:H,offset:I,stackGroups:z},q),$)},g=function(v){function j(x){var y,N,w;return b_e(this,j),w=S_e(this,j,[x]),ze(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),ze(w,"accessibilityManager",new o_e),ze(w,"handleLegendBBoxUpdate",function(C){if(C){var S=w.state,_=S.dataStartIndex,k=S.dataEndIndex,T=S.updateId;w.setState(de({legendBBox:C},m({props:w.props,dataStartIndex:_,dataEndIndex:k,updateId:T},de(de({},w.state),{},{legendBBox:C}))))}}),ze(w,"handleReceiveSyncEvent",function(C,S,_){if(w.props.syncId===C){if(_===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent(S)}}),ze(w,"handleBrushChange",function(C){var S=C.startIndex,_=C.endIndex;if(S!==w.state.dataStartIndex||_!==w.state.dataEndIndex){var k=w.state.updateId;w.setState(function(){return de({dataStartIndex:S,dataEndIndex:_},m({props:w.props,dataStartIndex:S,dataEndIndex:_,updateId:k},w.state))}),w.triggerSyncEvent({dataStartIndex:S,dataEndIndex:_})}}),ze(w,"handleMouseEnter",function(C){var S=w.getMouseInfo(C);if(S){var _=de(de({},S),{},{isTooltipActive:!0});w.setState(_),w.triggerSyncEvent(_);var k=w.props.onMouseEnter;qe(k)&&k(_,C)}}),ze(w,"triggeredAfterMouseMove",function(C){var S=w.getMouseInfo(C),_=S?de(de({},S),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState(_),w.triggerSyncEvent(_);var k=w.props.onMouseMove;qe(k)&&k(_,C)}),ze(w,"handleItemMouseEnter",function(C){w.setState(function(){return{isTooltipActive:!0,activeItem:C,activePayload:C.tooltipPayload,activeCoordinate:C.tooltipPosition||{x:C.cx,y:C.cy}}})}),ze(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),ze(w,"handleMouseMove",function(C){C.persist(),w.throttleTriggeredAfterMouseMove(C)}),ze(w,"handleMouseLeave",function(C){w.throttleTriggeredAfterMouseMove.cancel();var S={isTooltipActive:!1};w.setState(S),w.triggerSyncEvent(S);var _=w.props.onMouseLeave;qe(_)&&_(S,C)}),ze(w,"handleOuterEvent",function(C){var S=Gse(C),_=ss(w.props,"".concat(S));if(S&&qe(_)){var k,T;/.*touch.*/i.test(S)?T=w.getMouseInfo(C.changedTouches[0]):T=w.getMouseInfo(C),_((k=T)!==null&&k!==void 0?k:{},C)}}),ze(w,"handleClick",function(C){var S=w.getMouseInfo(C);if(S){var _=de(de({},S),{},{isTooltipActive:!0});w.setState(_),w.triggerSyncEvent(_);var k=w.props.onClick;qe(k)&&k(_,C)}}),ze(w,"handleMouseDown",function(C){var S=w.props.onMouseDown;if(qe(S)){var _=w.getMouseInfo(C);S(_,C)}}),ze(w,"handleMouseUp",function(C){var S=w.props.onMouseUp;if(qe(S)){var _=w.getMouseInfo(C);S(_,C)}}),ze(w,"handleTouchMove",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(C.changedTouches[0])}),ze(w,"handleTouchStart",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&w.handleMouseDown(C.changedTouches[0])}),ze(w,"handleTouchEnd",function(C){C.changedTouches!=null&&C.changedTouches.length>0&&w.handleMouseUp(C.changedTouches[0])}),ze(w,"handleDoubleClick",function(C){var S=w.props.onDoubleClick;if(qe(S)){var _=w.getMouseInfo(C);S(_,C)}}),ze(w,"handleContextMenu",function(C){var S=w.props.onContextMenu;if(qe(S)){var _=w.getMouseInfo(C);S(_,C)}}),ze(w,"triggerSyncEvent",function(C){w.props.syncId!==void 0&&hj.emit(fj,w.props.syncId,C,w.eventEmitterSymbol)}),ze(w,"applySyncEvent",function(C){var S=w.props,_=S.layout,k=S.syncMethod,T=w.state.updateId,P=C.dataStartIndex,A=C.dataEndIndex;if(C.dataStartIndex!==void 0||C.dataEndIndex!==void 0)w.setState(de({dataStartIndex:P,dataEndIndex:A},m({props:w.props,dataStartIndex:P,dataEndIndex:A,updateId:T},w.state)));else if(C.activeTooltipIndex!==void 0){var B=C.chartX,L=C.chartY,H=C.activeTooltipIndex,z=w.state,$=z.offset,I=z.tooltipTicks;if(!$)return;if(typeof k=="function")H=k(I,C);else if(k==="value"){H=-1;for(var E=0;E<I.length;E++)if(I[E].value===C.activeLabel){H=E;break}}var q=de(de({},$),{},{x:$.left,y:$.top}),Y=Math.min(B,q.x+q.width),re=Math.min(L,q.y+q.height),oe=I[H]&&I[H].value,ae=FN(w.state,w.props.data,H),me=I[H]?{x:_==="horizontal"?I[H].coordinate:Y,y:_==="horizontal"?re:I[H].coordinate}:V6;w.setState(de(de({},C),{},{activeLabel:oe,activeCoordinate:me,activePayload:ae,activeTooltipIndex:H}))}else w.setState(C)}),ze(w,"renderCursor",function(C){var S,_=w.state,k=_.isTooltipActive,T=_.activeCoordinate,P=_.activePayload,A=_.offset,B=_.activeTooltipIndex,L=_.tooltipAxisBandSize,H=w.getTooltipEventType(),z=(S=C.props.active)!==null&&S!==void 0?S:k,$=w.props.layout,I=C.key||"_recharts-cursor";return F.createElement(m_e,{key:I,activeCoordinate:T,activePayload:P,activeTooltipIndex:B,chartName:n,element:C,isActive:z,layout:$,offset:A,tooltipAxisBandSize:L,tooltipEventType:H})}),ze(w,"renderPolarAxis",function(C,S,_){var k=ss(C,"type.axisType"),T=ss(w.state,"".concat(k,"Map")),P=C.type.defaultProps,A=P!==void 0?de(de({},P),C.props):C.props,B=T&&T[A["".concat(k,"Id")]];return b.cloneElement(C,de(de({},B),{},{className:Ze(k,B.className),key:C.key||"".concat(S,"-").concat(_),ticks:ui(B,!0)}))}),ze(w,"renderPolarGrid",function(C){var S=C.props,_=S.radialLines,k=S.polarAngles,T=S.polarRadius,P=w.state,A=P.radiusAxisMap,B=P.angleAxisMap,L=Qi(A),H=Qi(B),z=H.cx,$=H.cy,I=H.innerRadius,E=H.outerRadius;return b.cloneElement(C,{polarAngles:Array.isArray(k)?k:ui(H,!0).map(function(q){return q.coordinate}),polarRadius:Array.isArray(T)?T:ui(L,!0).map(function(q){return q.coordinate}),cx:z,cy:$,innerRadius:I,outerRadius:E,key:C.key||"polar-grid",radialLines:_})}),ze(w,"renderLegend",function(){var C=w.state.formattedGraphicalItems,S=w.props,_=S.children,k=S.width,T=S.height,P=w.props.margin||{},A=k-(P.left||0)-(P.right||0),B=p5({children:_,formattedGraphicalItems:C,legendWidth:A,legendContent:u});if(!B)return null;var L=B.item,H=IE(B,p_e);return b.cloneElement(L,de(de({},H),{},{chartWidth:k,chartHeight:T,margin:P,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),ze(w,"renderTooltip",function(){var C,S=w.props,_=S.children,k=S.accessibilityLayer,T=Xr(_,qn);if(!T)return null;var P=w.state,A=P.isTooltipActive,B=P.activeCoordinate,L=P.activePayload,H=P.activeLabel,z=P.offset,$=(C=T.props.active)!==null&&C!==void 0?C:A;return b.cloneElement(T,{viewBox:de(de({},z),{},{x:z.left,y:z.top}),active:$,label:H,payload:$?L:[],coordinate:B,accessibilityLayer:k})}),ze(w,"renderBrush",function(C){var S=w.props,_=S.margin,k=S.data,T=w.state,P=T.offset,A=T.dataStartIndex,B=T.dataEndIndex,L=T.updateId;return b.cloneElement(C,{key:C.key||"_recharts-brush",onChange:Tp(w.handleBrushChange,C.props.onChange),data:k,x:je(C.props.x)?C.props.x:P.left,y:je(C.props.y)?C.props.y:P.top+P.height+P.brushBottom-(_.bottom||0),width:je(C.props.width)?C.props.width:P.width,startIndex:A,endIndex:B,updateId:"brush-".concat(L)})}),ze(w,"renderReferenceElement",function(C,S,_){if(!C)return null;var k=w,T=k.clipPathId,P=w.state,A=P.xAxisMap,B=P.yAxisMap,L=P.offset,H=C.type.defaultProps||{},z=C.props,$=z.xAxisId,I=$===void 0?H.xAxisId:$,E=z.yAxisId,q=E===void 0?H.yAxisId:E;return b.cloneElement(C,{key:C.key||"".concat(S,"-").concat(_),xAxis:A[I],yAxis:B[q],viewBox:{x:L.left,y:L.top,width:L.width,height:L.height},clipPathId:T})}),ze(w,"renderActivePoints",function(C){var S=C.item,_=C.activePoint,k=C.basePoint,T=C.childIndex,P=C.isRange,A=[],B=S.props.key,L=S.item.type.defaultProps!==void 0?de(de({},S.item.type.defaultProps),S.item.props):S.item.props,H=L.activeDot,z=L.dataKey,$=de(de({index:T,dataKey:z,cx:_.x,cy:_.y,r:4,fill:IC(S.item),strokeWidth:2,stroke:"#fff",payload:_.payload,value:_.value},Re(H,!1)),Yg(H));return A.push(j.renderActiveDot(H,$,"".concat(B,"-activePoint-").concat(T))),k?A.push(j.renderActiveDot(H,de(de({},$),{},{cx:k.x,cy:k.y}),"".concat(B,"-basePoint-").concat(T))):P&&A.push(null),A}),ze(w,"renderGraphicChild",function(C,S,_){var k=w.filterFormatItem(C,S,_);if(!k)return null;var T=w.getTooltipEventType(),P=w.state,A=P.isTooltipActive,B=P.tooltipAxis,L=P.activeTooltipIndex,H=P.activeLabel,z=w.props.children,$=Xr(z,qn),I=k.props,E=I.points,q=I.isRange,Y=I.baseLine,re=k.item.type.defaultProps!==void 0?de(de({},k.item.type.defaultProps),k.item.props):k.item.props,oe=re.activeDot,ae=re.hide,me=re.activeBar,we=re.activeShape,ue=!!(!ae&&A&&$&&(oe||me||we)),J={};T!=="axis"&&$&&$.props.trigger==="click"?J={onClick:Tp(w.handleItemMouseEnter,C.props.onClick)}:T!=="axis"&&(J={onMouseLeave:Tp(w.handleItemMouseLeave,C.props.onMouseLeave),onMouseEnter:Tp(w.handleItemMouseEnter,C.props.onMouseEnter)});var ee=b.cloneElement(C,de(de({},k.props),J));function G(gt){return typeof B.dataKey=="function"?B.dataKey(gt.payload):null}if(ue)if(L>=0){var W,O;if(B.dataKey&&!B.allowDuplicatedCategory){var le=typeof B.dataKey=="function"?G:"payload.".concat(B.dataKey.toString());W=Kg(E,le,H),O=q&&Y&&Kg(Y,le,H)}else W=E==null?void 0:E[L],O=q&&Y&&Y[L];if(we||me){var ce=C.props.activeIndex!==void 0?C.props.activeIndex:L;return[b.cloneElement(C,de(de(de({},k.props),J),{},{activeIndex:ce})),null,null]}if(!Qe(W))return[ee].concat(ld(w.renderActivePoints({item:k,activePoint:W,basePoint:O,childIndex:L,isRange:q})))}else{var ie,Ce=(ie=w.getItemByXY(w.state.activeCoordinate))!==null&&ie!==void 0?ie:{graphicalItem:ee},st=Ce.graphicalItem,tt=st.item,wt=tt===void 0?C:tt,tn=st.childIndex,bt=de(de(de({},k.props),J),{},{activeIndex:tn});return[b.cloneElement(wt,bt),null,null]}return q?[ee,null,null]:[ee,null]}),ze(w,"renderCustomized",function(C,S,_){return b.cloneElement(C,de(de({key:"recharts-customized-".concat(_)},w.props),w.state))}),ze(w,"renderMap",{CartesianGrid:{handler:Ip,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:Ip},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:Ip},YAxis:{handler:Ip},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((y=x.id)!==null&&y!==void 0?y:ac("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=mL(w.triggeredAfterMouseMove,(N=x.throttleDelay)!==null&&N!==void 0?N:1e3/60),w.state={},w}return P_e(j,v),N_e(j,[{key:"componentDidMount",value:function(){var y,N;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(y=this.props.margin.left)!==null&&y!==void 0?y:0,top:(N=this.props.margin.top)!==null&&N!==void 0?N:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var y=this.props,N=y.children,w=y.data,C=y.height,S=y.layout,_=Xr(N,qn);if(_){var k=_.props.defaultIndex;if(!(typeof k!="number"||k<0||k>this.state.tooltipTicks.length-1)){var T=this.state.tooltipTicks[k]&&this.state.tooltipTicks[k].value,P=FN(this.state,w,k,T),A=this.state.tooltipTicks[k].coordinate,B=(this.state.offset.top+C)/2,L=S==="horizontal",H=L?{x:A,y:B}:{y:A,x:B},z=this.state.formattedGraphicalItems.find(function(I){var E=I.item;return E.type.name==="Scatter"});z&&(H=de(de({},H),z.props.points[k].tooltipPosition),P=z.props.points[k].tooltipPayload);var $={activeTooltipIndex:k,isTooltipActive:!0,activeLabel:T,activePayload:P,activeCoordinate:H};this.setState($),this.renderCursor(_),this.accessibilityManager.setIndex(k)}}}},{key:"getSnapshotBeforeUpdate",value:function(y,N){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==N.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==y.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==y.margin){var w,C;this.accessibilityManager.setDetails({offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(C=this.props.margin.top)!==null&&C!==void 0?C:0}})}return null}},{key:"componentDidUpdate",value:function(y){hw([Xr(y.children,qn)],[Xr(this.props.children,qn)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var y=Xr(this.props.children,qn);if(y&&typeof y.props.shared=="boolean"){var N=y.props.shared?"axis":"item";return l.indexOf(N)>=0?N:i}return i}},{key:"getMouseInfo",value:function(y){if(!this.container)return null;var N=this.container,w=N.getBoundingClientRect(),C=jpe(w),S={chartX:Math.round(y.pageX-C.left),chartY:Math.round(y.pageY-C.top)},_=w.width/N.offsetWidth||1,k=this.inRange(S.chartX,S.chartY,_);if(!k)return null;var T=this.state,P=T.xAxisMap,A=T.yAxisMap,B=this.getTooltipEventType(),L=RE(this.state,this.props.data,this.props.layout,k);if(B!=="axis"&&P&&A){var H=Qi(P).scale,z=Qi(A).scale,$=H&&H.invert?H.invert(S.chartX):null,I=z&&z.invert?z.invert(S.chartY):null;return de(de({},S),{},{xValue:$,yValue:I},L)}return L?de(de({},S),L):null}},{key:"inRange",value:function(y,N){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,C=this.props.layout,S=y/w,_=N/w;if(C==="horizontal"||C==="vertical"){var k=this.state.offset,T=S>=k.left&&S<=k.left+k.width&&_>=k.top&&_<=k.top+k.height;return T?{x:S,y:_}:null}var P=this.state,A=P.angleAxisMap,B=P.radiusAxisMap;if(A&&B){var L=Qi(A);return iT({x:S,y:_},L)}return null}},{key:"parseEventsOfWrapper",value:function(){var y=this.props.children,N=this.getTooltipEventType(),w=Xr(y,qn),C={};w&&N==="axis"&&(w.props.trigger==="click"?C={onClick:this.handleClick}:C={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var S=Yg(this.props,this.handleOuterEvent);return de(de({},S),C)}},{key:"addListener",value:function(){hj.on(fj,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){hj.removeListener(fj,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(y,N,w){for(var C=this.state.formattedGraphicalItems,S=0,_=C.length;S<_;S++){var k=C[S];if(k.item===y||k.props.key===y.key||N===hi(k.item.type)&&w===k.childIndex)return k}return null}},{key:"renderClipPath",value:function(){var y=this.clipPathId,N=this.state.offset,w=N.left,C=N.top,S=N.height,_=N.width;return F.createElement("defs",null,F.createElement("clipPath",{id:y},F.createElement("rect",{x:w,y:C,height:S,width:_})))}},{key:"getXScales",value:function(){var y=this.state.xAxisMap;return y?Object.entries(y).reduce(function(N,w){var C=ME(w,2),S=C[0],_=C[1];return de(de({},N),{},ze({},S,_.scale))},{}):null}},{key:"getYScales",value:function(){var y=this.state.yAxisMap;return y?Object.entries(y).reduce(function(N,w){var C=ME(w,2),S=C[0],_=C[1];return de(de({},N),{},ze({},S,_.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(y){var N;return(N=this.state.xAxisMap)===null||N===void 0||(N=N[y])===null||N===void 0?void 0:N.scale}},{key:"getYScaleByAxisId",value:function(y){var N;return(N=this.state.yAxisMap)===null||N===void 0||(N=N[y])===null||N===void 0?void 0:N.scale}},{key:"getItemByXY",value:function(y){var N=this.state,w=N.formattedGraphicalItems,C=N.activeItem;if(w&&w.length)for(var S=0,_=w.length;S<_;S++){var k=w[S],T=k.props,P=k.item,A=P.type.defaultProps!==void 0?de(de({},P.type.defaultProps),P.props):P.props,B=hi(P.type);if(B==="Bar"){var L=(T.data||[]).find(function(I){return nwe(y,I)});if(L)return{graphicalItem:k,payload:L}}else if(B==="RadialBar"){var H=(T.data||[]).find(function(I){return iT(y,I)});if(H)return{graphicalItem:k,payload:H}}else if(ky(k,C)||Ty(k,C)||Kf(k,C)){var z=UNe({graphicalItem:k,activeTooltipItem:C,itemData:A.data}),$=A.activeIndex===void 0?z:A.activeIndex;return{graphicalItem:de(de({},k),{},{childIndex:$}),payload:Kf(k,C)?A.data[z]:k.props.data[z]}}}return null}},{key:"render",value:function(){var y=this;if(!XP(this))return null;var N=this.props,w=N.children,C=N.className,S=N.width,_=N.height,k=N.style,T=N.compact,P=N.title,A=N.desc,B=IE(N,g_e),L=Re(B,!1);if(T)return F.createElement(mE,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},F.createElement(mw,Hc({},L,{width:S,height:_,title:P,desc:A}),this.renderClipPath(),ZP(w,this.renderMap)));if(this.props.accessibilityLayer){var H,z;L.tabIndex=(H=this.props.tabIndex)!==null&&H!==void 0?H:0,L.role=(z=this.props.role)!==null&&z!==void 0?z:"application",L.onKeyDown=function(I){y.accessibilityManager.keyboardEvent(I)},L.onFocus=function(){y.accessibilityManager.focus()}}var $=this.parseEventsOfWrapper();return F.createElement(mE,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},F.createElement("div",Hc({className:Ze("recharts-wrapper",C),style:de({position:"relative",cursor:"default",width:S,height:_},k)},$,{ref:function(E){y.container=E}}),F.createElement(mw,Hc({},L,{width:S,height:_,title:P,desc:A,style:D_e}),this.renderClipPath(),ZP(w,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(b.Component);ze(g,"displayName",n),ze(g,"defaultProps",de({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),ze(g,"getDerivedStateFromProps",function(v,j){var x=v.dataKey,y=v.data,N=v.children,w=v.width,C=v.height,S=v.layout,_=v.stackOffset,k=v.margin,T=j.dataStartIndex,P=j.dataEndIndex;if(j.updateId===void 0){var A=FE(v);return de(de(de({},A),{},{updateId:0},m(de(de({props:v},A),{},{updateId:0}),j)),{},{prevDataKey:x,prevData:y,prevWidth:w,prevHeight:C,prevLayout:S,prevStackOffset:_,prevMargin:k,prevChildren:N})}if(x!==j.prevDataKey||y!==j.prevData||w!==j.prevWidth||C!==j.prevHeight||S!==j.prevLayout||_!==j.prevStackOffset||!ru(k,j.prevMargin)){var B=FE(v),L={chartX:j.chartX,chartY:j.chartY,isTooltipActive:j.isTooltipActive},H=de(de({},RE(j,y,S)),{},{updateId:j.updateId+1}),z=de(de(de({},B),L),H);return de(de(de({},z),m(de({props:v},z),j)),{},{prevDataKey:x,prevData:y,prevWidth:w,prevHeight:C,prevLayout:S,prevStackOffset:_,prevMargin:k,prevChildren:N})}if(!hw(N,j.prevChildren)){var $,I,E,q,Y=Xr(N,Qu),re=Y&&($=(I=Y.props)===null||I===void 0?void 0:I.startIndex)!==null&&$!==void 0?$:T,oe=Y&&(E=(q=Y.props)===null||q===void 0?void 0:q.endIndex)!==null&&E!==void 0?E:P,ae=re!==T||oe!==P,me=!Qe(y),we=me&&!ae?j.updateId:j.updateId+1;return de(de({updateId:we},m(de(de({props:v},j),{},{updateId:we,dataStartIndex:re,dataEndIndex:oe}),j)),{},{prevChildren:N,dataStartIndex:re,dataEndIndex:oe})}return null}),ze(g,"renderActiveDot",function(v,j,x){var y;return b.isValidElement(v)?y=b.cloneElement(v,j):qe(v)?y=v(j):y=F.createElement(Em,j),F.createElement(ht,{className:"recharts-active-dot",key:x},y)});var p=b.forwardRef(function(j,x){return F.createElement(g,Hc({},j,{ref:x}))});return p.displayName=g.displayName,p},BE=Ry({chartName:"LineChart",GraphicalChild:rd,axisComponents:[{axisType:"xAxis",AxisComp:ia},{axisType:"yAxis",AxisComp:oa}],formatAxisMap:RC}),q_e=Ry({chartName:"BarChart",GraphicalChild:Pa,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:ia},{axisType:"yAxis",AxisComp:oa}],formatAxisMap:RC}),GC=Ry({chartName:"PieChart",GraphicalChild:da,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Ay},{axisType:"radiusAxis",AxisComp:_y}],formatAxisMap:g0e,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),KC=Ry({chartName:"AreaChart",GraphicalChild:As,axisComponents:[{axisType:"xAxis",AxisComp:ia},{axisType:"yAxis",AxisComp:oa}],formatAxisMap:RC});function YC({open:e,onOpenChange:t,petId:n,consultationId:s}){const{data:a=[]}=us(),{data:i=[]}=ds(),{data:o=[]}=SZ(),l=NZ(),{toast:c}=et(),[u,d]=b.useState({diagnosis:"",notes:"",validUntil:""}),[h,f]=b.useState([{medication_name:"",dosage:"",frequency:"",duration:"",instructions:"",quantity:1,route:"oral"}]),m=i.find(w=>w.id===n),g=m?a.find(w=>w.id===m.client_id):null,p=o.filter(w=>(w.category==="medication"||w.category==="supplement")&&w.current_quantity>0&&w.active),v=w=>{const{name:C,value:S}=w.target;d(_=>({..._,[C]:S}))},j=(w,C,S)=>{f(_=>_.map((k,T)=>T===w?{...k,[C]:S}:k))},x=()=>{f(w=>[...w,{medication_name:"",dosage:"",frequency:"",duration:"",instructions:"",quantity:1,route:"oral"}])},y=w=>{h.length>1&&f(C=>C.filter((S,_)=>_!==w))},N=async w=>{if(w.preventDefault(),!m||!g){c({title:"Erreur",description:"Impossible de trouver l'animal ou le client associé.",variant:"destructive"});return}const C=h.filter(_=>_.medication_name.trim()!=="");if(C.length===0){c({title:"Erreur",description:"Veuillez ajouter au moins un médicament à la prescription.",variant:"destructive"});return}const S={consultation_id:s,animal_id:m.id,client_id:g.id,diagnosis:u.diagnosis,notes:u.notes,valid_until:u.validUntil||void 0,medications:C};try{await l.mutateAsync(S),c({title:"Prescription créée",description:`Prescription créée avec succès pour ${m.name}.`}),t(!1),d({diagnosis:"",notes:"",validUntil:""}),f([{medication_name:"",dosage:"",frequency:"",duration:"",instructions:"",quantity:1,route:"oral"}])}catch(_){console.error("Error creating prescription:",_),c({title:"Erreur",description:"Une erreur est survenue lors de la création de la prescription.",variant:"destructive"})}};return!m||!g?r.jsx(He,{open:e,onOpenChange:t,children:r.jsx(We,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:r.jsxs(Ge,{children:[r.jsx(Ke,{children:"Erreur"}),r.jsx(yt,{children:"Impossible de trouver l'animal ou le client associé."})]})})}):r.jsx(He,{open:e,onOpenChange:t,children:r.jsxs(We,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(Ge,{children:[r.jsx(Ke,{children:"Nouvelle Prescription"}),r.jsxs(yt,{children:["Créer une nouvelle prescription pour ",m.name," (",g.first_name," ",g.last_name,")"]})]}),r.jsxs("form",{onSubmit:N,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(D,{htmlFor:"diagnosis",children:"Diagnostic"}),r.jsx(Be,{id:"diagnosis",name:"diagnosis",value:u.diagnosis,onChange:v,placeholder:"Entrez le diagnostic...",className:"h-20"})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"validUntil",children:"Valide jusqu'au (optionnel)"}),r.jsx(K,{id:"validUntil",name:"validUntil",type:"date",value:u.validUntil,onChange:v})]})]}),r.jsxs("div",{className:"space-y-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(D,{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Médicaments"}),r.jsxs(R,{type:"button",onClick:x,size:"sm",variant:"outline",children:[r.jsx(Ue,{className:"h-4 w-4 mr-2"}),"Ajouter un médicament"]})]}),h.map((w,C)=>r.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-6 space-y-4 bg-gray-50 dark:bg-gray-800",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("h4",{className:"font-medium text-base text-gray-900 dark:text-gray-100",children:["Médicament ",C+1]}),h.length>1&&r.jsx(R,{type:"button",variant:"outline",size:"sm",onClick:()=>y(C),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",children:r.jsx(rn,{className:"h-4 w-4"})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"md:col-span-2 lg:col-span-1",children:[r.jsx(D,{className:"text-gray-700 dark:text-gray-300",children:"Médicament *"}),r.jsxs(ve,{value:w.medication_name,onValueChange:S=>j(C,"medication_name",S),children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Sélectionner ou taper..."})}),r.jsx(ge,{children:p.map(S=>r.jsxs(M,{value:S.name,children:[S.name," (",S.current_quantity," ",S.unit,")"]},S.id))})]}),!p.find(S=>S.name===w.medication_name)&&r.jsx(K,{className:"mt-2",value:w.medication_name,onChange:S=>j(C,"medication_name",S.target.value),placeholder:"Nom du médicament personnalisé"})]}),r.jsxs("div",{children:[r.jsx(D,{className:"text-gray-700 dark:text-gray-300",children:"Dosage"}),r.jsx(K,{value:w.dosage||"",onChange:S=>j(C,"dosage",S.target.value),placeholder:"ex: 5mg"})]}),r.jsxs("div",{children:[r.jsx(D,{className:"text-gray-700 dark:text-gray-300",children:"Fréquence"}),r.jsxs(ve,{value:w.frequency||"",onValueChange:S=>j(C,"frequency",S),children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Sélectionner..."})}),r.jsxs(ge,{children:[r.jsx(M,{value:"1x/jour",children:"1 fois par jour"}),r.jsx(M,{value:"2x/jour",children:"2 fois par jour"}),r.jsx(M,{value:"3x/jour",children:"3 fois par jour"}),r.jsx(M,{value:"1x/semaine",children:"1 fois par semaine"}),r.jsx(M,{value:"selon besoin",children:"Selon besoin"})]})]})]}),r.jsxs("div",{children:[r.jsx(D,{className:"text-gray-700 dark:text-gray-300",children:"Durée"}),r.jsx(K,{value:w.duration||"",onChange:S=>j(C,"duration",S.target.value),placeholder:"ex: 7 jours"})]}),r.jsxs("div",{children:[r.jsx(D,{className:"text-gray-700 dark:text-gray-300",children:"Quantité *"}),r.jsx(K,{type:"number",min:"1",value:w.quantity,onChange:S=>j(C,"quantity",parseInt(S.target.value)||1)})]}),r.jsxs("div",{children:[r.jsx(D,{className:"text-gray-700 dark:text-gray-300",children:"Voie d'administration"}),r.jsxs(ve,{value:w.route||"oral",onValueChange:S=>j(C,"route",S),children:[r.jsx(pe,{children:r.jsx(xe,{})}),r.jsxs(ge,{children:[r.jsx(M,{value:"oral",children:"Orale"}),r.jsx(M,{value:"injectable",children:"Injectable"}),r.jsx(M,{value:"topique",children:"Topique"}),r.jsx(M,{value:"intraveineuse",children:"Intraveineuse"}),r.jsx(M,{value:"intramusculaire",children:"Intramusculaire"}),r.jsx(M,{value:"sous-cutanée",children:"Sous-cutanée"})]})]})]})]}),r.jsxs("div",{children:[r.jsx(D,{className:"text-gray-700 dark:text-gray-300",children:"Instructions spéciales"}),r.jsx(Be,{value:w.instructions||"",onChange:S=>j(C,"instructions",S.target.value),placeholder:"Instructions particulières pour ce médicament...",className:"h-16"})]})]},C)),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"notes",className:"text-gray-700 dark:text-gray-300",children:"Notes générales"}),r.jsx(Be,{id:"notes",name:"notes",value:u.notes,onChange:v,placeholder:"Notes générales sur la prescription...",className:"h-20"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx(R,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:l.isPending,children:"Annuler"}),r.jsx(R,{type:"submit",disabled:l.isPending,children:l.isPending?"Création...":"Créer la prescription"})]})]})]})})}function U_e({open:e,onOpenChange:t,prescription:n}){const{updatePrescription:s}=ct(),{toast:a}=et(),[i,o]=b.useState({date:"",prescribedBy:"",diagnosis:"",instructions:"",duration:"",followUpDate:"",status:"",notes:""}),[l,c]=b.useState([]);b.useEffect(()=>{e&&n&&(o({date:n.date,prescribedBy:n.prescribedBy,diagnosis:n.diagnosis,instructions:n.instructions,duration:n.duration,followUpDate:n.followUpDate||"",status:n.status,notes:n.notes||""}),c([...n.medications]))},[e,n]);const u=v=>{o(j=>({...j,[v.target.id]:v.target.value}))},d=(v,j)=>{o(x=>({...x,[v]:j}))},h=(v,j,x)=>{const y=[...l];y[v]={...y[v],[j]:j==="quantity"||j==="refills"||j==="cost"?Number(x):x},c(y)},f=()=>{const v=Math.max(...l.map(j=>j.id),0)+1;c([...l,{id:v,name:"",dosage:"",frequency:"",duration:"",instructions:"",quantity:1,unit:"comprimés",refills:0,cost:0}])},m=v=>{l.length>1&&c(l.filter((j,x)=>x!==v))},g=v=>{if(v.preventDefault(),!n)return;const j=l.filter(x=>x.name.trim()!=="");if(j.length===0){a({title:"Erreur",description:"Au moins un médicament doit être spécifié.",variant:"destructive"});return}s(n.id,{date:i.date,prescribedBy:i.prescribedBy,diagnosis:i.diagnosis,medications:j,instructions:i.instructions,duration:i.duration,followUpDate:i.followUpDate||void 0,status:i.status,notes:i.notes}),a({title:"Prescription mise à jour",description:"La prescription a été modifiée avec succès."}),t(!1)},p=()=>l.reduce((v,j)=>v+(j.cost||0),0);return n?r.jsx(He,{open:e,onOpenChange:t,children:r.jsxs(We,{className:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[r.jsxs(Ge,{children:[r.jsxs(Ke,{className:"flex items-center gap-2",children:[r.jsx(Ki,{className:"h-5 w-5"}),"Modifier la Prescription"]}),r.jsxs(yt,{children:["Modifiez la prescription pour ",n.petName," (",n.clientName,")."]})]}),r.jsxs("form",{onSubmit:g,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"date",children:"Date de prescription *"}),r.jsx(K,{id:"date",type:"date",value:i.date,onChange:u,required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"prescribedBy",children:"Prescrit par *"}),r.jsx(K,{id:"prescribedBy",value:i.prescribedBy,onChange:u,required:!0})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"diagnosis",children:"Diagnostic *"}),r.jsx(K,{id:"diagnosis",value:i.diagnosis,onChange:u,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"duration",children:"Durée du traitement"}),r.jsx(K,{id:"duration",value:i.duration,onChange:u})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"followUpDate",children:"Date de suivi"}),r.jsx(K,{id:"followUpDate",type:"date",value:i.followUpDate,onChange:u,min:i.date})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{children:"Statut"}),r.jsxs(ve,{value:i.status,onValueChange:v=>d("status",v),children:[r.jsx(pe,{children:r.jsx(xe,{})}),r.jsxs(ge,{children:[r.jsx(M,{value:"active",children:"Active"}),r.jsx(M,{value:"completed",children:"Terminée"}),r.jsx(M,{value:"discontinued",children:"Arrêtée"})]})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(D,{className:"text-base font-medium",children:"Médicaments prescrits"}),r.jsxs(R,{type:"button",variant:"outline",size:"sm",onClick:f,className:"gap-2",children:[r.jsx(Ue,{className:"h-4 w-4"}),"Ajouter médicament"]})]}),r.jsx("div",{className:"space-y-4",children:l.map((v,j)=>r.jsxs("div",{className:"p-4 border rounded-lg space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("h4",{className:"font-medium",children:["Médicament ",j+1]}),l.length>1&&r.jsx(R,{type:"button",variant:"outline",size:"sm",onClick:()=>m(j),className:"text-red-600 hover:text-red-700",children:r.jsx(rn,{className:"h-4 w-4"})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{children:"Nom du médicament *"}),r.jsx(K,{value:v.name,onChange:x=>h(j,"name",x.target.value),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{children:"Dosage *"}),r.jsx(K,{value:v.dosage,onChange:x=>h(j,"dosage",x.target.value),required:!0})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{children:"Fréquence *"}),r.jsx(K,{value:v.frequency,onChange:x=>h(j,"frequency",x.target.value),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{children:"Durée"}),r.jsx(K,{value:v.duration,onChange:x=>h(j,"duration",x.target.value)})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{children:"Quantité"}),r.jsx(K,{type:"number",value:v.quantity,onChange:x=>h(j,"quantity",parseInt(x.target.value)),min:"1"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{children:"Unité"}),r.jsxs(ve,{value:v.unit,onValueChange:x=>h(j,"unit",x),children:[r.jsx(pe,{children:r.jsx(xe,{})}),r.jsxs(ge,{children:[r.jsx(M,{value:"comprimés",children:"Comprimés"}),r.jsx(M,{value:"ml",children:"ml"}),r.jsx(M,{value:"g",children:"g"}),r.jsx(M,{value:"mg",children:"mg"}),r.jsx(M,{value:"ampoules",children:"Ampoules"}),r.jsx(M,{value:"flacons",children:"Flacons"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{children:"Coût (€)"}),r.jsx(K,{type:"number",step:"0.01",value:v.cost,onChange:x=>h(j,"cost",parseFloat(x.target.value)),min:"0"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{children:"Instructions spécifiques"}),r.jsx(K,{value:v.instructions,onChange:x=>h(j,"instructions",x.target.value)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{children:"Renouvellements"}),r.jsx(K,{type:"number",value:v.refills,onChange:x=>h(j,"refills",parseInt(x.target.value)),min:"0"})]})]})]},v.id))}),r.jsx("div",{className:"flex justify-end",children:r.jsxs(Se,{variant:"outline",className:"text-lg px-4 py-2",children:["Coût total: ",p().toFixed(2),"€"]})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"instructions",children:"Instructions générales"}),r.jsx(Be,{id:"instructions",value:i.instructions,onChange:u,rows:3})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"notes",children:"Notes"}),r.jsx(Be,{id:"notes",value:i.notes,onChange:u,rows:2})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(R,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),r.jsxs(R,{type:"submit",className:"gap-2",children:[r.jsx(Mh,{className:"h-4 w-4"}),"Sauvegarder"]})]})]})]})}):null}const W_e="vetpro-veterinarians";function LN({prescription:e}){const{settings:t}=xt();JSON.parse(localStorage.getItem(W_e)||"[]");const n=e.prescribedBy,s=()=>{const a=window.open("","_blank");if(!a)return;const i=`
      <html>
        <head>
          <title>Prescription - ${e.petName}</title>
          <style>
            body {
              font-family: Arial, sans-serif;
              margin: 20px;
              line-height: 1.6;
            }
            .header {
              text-align: center;
              border-bottom: 2px solid #333;
              padding-bottom: 20px;
              margin-bottom: 30px;
            }
            .clinic-info {
              margin-bottom: 30px;
            }
            .patient-info {
              margin-bottom: 30px;
            }
            .prescription-details {
              margin-bottom: 30px;
            }
            .medications {
              margin-bottom: 30px;
            }
            .medication-item {
              border: 1px solid #ccc;
              padding: 15px;
              margin-bottom: 15px;
              border-radius: 5px;
            }
            .instructions {
              margin-bottom: 30px;
            }
            .footer {
              margin-top: 50px;
              text-align: center;
            }
            .signature-line {
              border-top: 1px solid #333;
              width: 200px;
              margin: 20px auto;
            }
            table {
              width: 100%;
              border-collapse: collapse;
              margin-bottom: 20px;
            }
            th, td {
              border: 1px solid #ddd;
              padding: 8px;
              text-align: left;
            }
            th {
              background-color: #f2f2f2;
            }
            .total-cost {
              font-weight: bold;
              text-align: right;
              margin-top: 20px;
            }
          </style>
        </head>
        <body>
          <div class="header">
            ${t.logo?`<img src="${t.logo}" alt="Logo clinique" style="height:60px;margin-bottom:10px;"/>`:""}
            <h1>PRESCRIPTION MÉDICALE</h1>
            <h2>${t.clinicName}</h2>
            <p>${t.address}<br>
            Tél: ${t.phone} | Email: ${t.email}</p>
          </div>

          <div class="clinic-info">
            <strong>Date de prescription:</strong> ${new Date(e.date).toLocaleDateString("fr-FR")}<br>
            <strong>Prescrit par:</strong> ${n}
          </div>

          <div class="patient-info">
            <h3>Informations du patient</h3>
            <table>
              <tr>
                <th>Propriétaire</th>
                <td>${e.clientName}</td>
              </tr>
              <tr>
                <th>Animal</th>
                <td>${e.petName}</td>
              </tr>
              <tr>
                <th>Diagnostic</th>
                <td>${e.diagnosis}</td>
              </tr>
              <tr>
                <th>Durée du traitement</th>
                <td>${e.duration}</td>
              </tr>
            </table>
          </div>

          <div class="medications">
            <h3>Médicaments prescrits</h3>
            ${e.medications.map(o=>`
              <div class="medication-item">
                <h4>${o.name}</h4>
                <table>
                  <tr>
                    <th>Posologie</th>
                    <td>${o.dosage} - ${o.frequency}</td>
                  </tr>
                  <tr>
                    <th>Durée</th>
                    <td>${o.duration}</td>
                  </tr>
                  <tr>
                    <th>Quantité</th>
                    <td>${o.quantity} ${o.unit}</td>
                  </tr>
                  ${o.refills&&o.refills>0?`
                    <tr>
                      <th>Renouvellements</th>
                      <td>${o.refills}</td>
                    </tr>
                  `:""}
                  ${o.instructions?`
                    <tr>
                      <th>Instructions</th>
                      <td>${o.instructions}</td>
                    </tr>
                  `:""}
                  ${o.cost?`
                    <tr>
                      <th>Coût</th>
                      <td>${o.cost.toFixed(2)}€</td>
                    </tr>
                  `:""}
                </table>
              </div>
            `).join("")}
            
            <div class="total-cost">
              Coût total: ${e.medications.reduce((o,l)=>o+(l.cost||0),0).toFixed(2)}€
            </div>
          </div>

          ${e.instructions?`
            <div class="instructions">
              <h3>Instructions générales</h3>
              <p>${e.instructions}</p>
            </div>
          `:""}

          ${e.followUpDate?`
            <div class="instructions">
              <h3>Suivi</h3>
              <p><strong>Date de suivi prévue:</strong> ${new Date(e.followUpDate).toLocaleDateString("fr-FR")}</p>
            </div>
          `:""}

          ${e.notes?`
            <div class="instructions">
              <h3>Notes</h3>
              <p>${e.notes}</p>
            </div>
          `:""}

          <div class="footer">
            <div class="signature-line"></div>
            <p>Signature du vétérinaire</p>
            <p><small>Cette prescription est valable pour la durée du traitement prescrit.</small></p>
          </div>
        </body>
      </html>
    `;a.document.write(i),a.document.close(),a.focus(),a.print(),a.close()};return r.jsxs(R,{size:"sm",variant:"outline",onClick:s,className:"gap-2",children:[r.jsx(Au,{className:"h-4 w-4"}),"Générer Ordonnance"]})}const H_e={active:"bg-green-100 text-green-800",completed:"bg-gray-100 text-gray-800",discontinued:"bg-red-100 text-red-800"},G_e={active:"Active",completed:"Terminée",discontinued:"Arrêtée"};function q6({petId:e,consultationId:t}){const{prescriptions:n,getPrescriptionsByPetId:s,getPrescriptionsByConsultationId:a,deletePrescription:i}=ct(),{toast:o}=et(),[l,c]=b.useState(!1),[u,d]=b.useState(!1),[h,f]=b.useState(null),m=t?a(t):s(e),g=x=>{f(x),d(!0)},p=x=>{confirm(`Êtes-vous sûr de vouloir supprimer la prescription pour ${x.medications.map(y=>y.name).join(", ")} ?`)&&(i(x.id),o({title:"Prescription supprimée",description:"La prescription a été supprimée avec succès."}))},v=x=>{switch(x){case"active":return r.jsx(Tn,{className:"h-4 w-4 text-green-600"});case"completed":return r.jsx(Dn,{className:"h-4 w-4 text-gray-600"});case"discontinued":return r.jsx(cf,{className:"h-4 w-4 text-red-600"});default:return r.jsx(Yt,{className:"h-4 w-4 text-gray-600"})}},j=x=>x.reduce((y,N)=>y+(N.cost||0),0);return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[r.jsx(Ki,{className:"h-5 w-5"}),"Prescriptions (",m.length,")"]}),r.jsxs(R,{size:"sm",onClick:()=>c(!0),disabled:!t,className:"gap-2",children:[r.jsx(Ue,{className:"h-4 w-4"}),"Nouvelle Prescription"]})]}),m.length===0?r.jsx(te,{children:r.jsxs(ne,{className:"p-6 text-center text-muted-foreground",children:[r.jsx(Ki,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"Aucune prescription trouvée"}),r.jsx("p",{className:"text-sm",children:"Commencez par créer une nouvelle prescription"})]})}):r.jsx("div",{className:"space-y-4",children:m.sort((x,y)=>new Date(y.date).getTime()-new Date(x.date).getTime()).map(x=>r.jsxs(te,{className:"card-hover",children:[r.jsx(he,{className:"pb-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[v(x.status),r.jsx(Se,{className:H_e[x.status],children:G_e[x.status]})]}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[r.jsx(Ye,{className:"h-4 w-4 inline mr-1"}),new Date(x.date).toLocaleDateString("fr-FR")]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(LN,{prescription:x}),r.jsx(R,{size:"sm",variant:"outline",onClick:()=>g(x),className:"h-8 w-8 p-0",title:"Modifier",children:r.jsx(Ct,{className:"h-3 w-3"})}),r.jsx(R,{size:"sm",variant:"outline",onClick:()=>p(x),className:"h-8 w-8 p-0 text-red-600",title:"Supprimer",children:r.jsx(rn,{className:"h-3 w-3"})})]})]})}),r.jsxs(ne,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Prescrit par:"}),r.jsx("p",{className:"text-muted-foreground",children:x.prescribedBy})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Diagnostic:"}),r.jsx("p",{className:"text-muted-foreground",children:x.diagnosis})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Durée:"}),r.jsx("p",{className:"text-muted-foreground",children:x.duration})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Coût total:"}),r.jsxs("p",{className:"text-muted-foreground",children:[j(x.medications).toFixed(2),"€"]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-3",children:"Médicaments prescrits:"}),r.jsx("div",{className:"space-y-3",children:x.medications.map(y=>r.jsx("div",{className:"p-3 border rounded-lg bg-muted/30",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"font-medium",children:y.name}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[r.jsx("span",{className:"font-medium",children:"Posologie:"})," ",y.dosage," - ",y.frequency]}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[r.jsx("span",{className:"font-medium",children:"Durée:"})," ",y.duration]}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[r.jsx("span",{className:"font-medium",children:"Quantité:"})," ",y.quantity," ",y.unit]}),y.refills&&y.refills>0&&r.jsxs("div",{className:"text-sm text-muted-foreground",children:[r.jsx("span",{className:"font-medium",children:"Renouvellements:"})," ",y.refills]}),y.instructions&&r.jsxs("div",{className:"text-sm text-muted-foreground",children:[r.jsx("span",{className:"font-medium",children:"Instructions:"})," ",y.instructions]})]}),y.cost&&r.jsx("div",{className:"text-right",children:r.jsxs("div",{className:"font-medium",children:[y.cost.toFixed(2),"€"]})})]})},y.id))})]}),x.instructions&&r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Instructions générales:"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:x.instructions})]}),x.followUpDate&&r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Yt,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"font-medium",children:"Suivi prévu:"}),r.jsx("span",{className:"text-muted-foreground",children:new Date(x.followUpDate).toLocaleDateString("fr-FR")})]}),x.notes&&r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Notes:"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:x.notes})]})]})]},x.id))})]}),t&&r.jsx(YC,{open:l,onOpenChange:c,petId:e.toString(),consultationId:t.toString()}),r.jsx(U_e,{open:u,onOpenChange:d,prescription:h})]})}const K_e={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},Y_e=(e,t,n)=>{let s;const a=K_e[e];return typeof a=="string"?s=a:t===1?s=a.one:s=a.other.replace("{{count}}",String(t)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"dans "+s:"il y a "+s:s},Q_e={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},X_e={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},J_e={full:"{{date}} 'à' {{time}}",long:"{{date}} 'à' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Z_e={date:nu({formats:Q_e,defaultWidth:"full"}),time:nu({formats:X_e,defaultWidth:"full"}),dateTime:nu({formats:J_e,defaultWidth:"full"})},ePe={lastWeek:"eeee 'dernier à' p",yesterday:"'hier à' p",today:"'aujourd’hui à' p",tomorrow:"'demain à' p'",nextWeek:"eeee 'prochain à' p",other:"P"},tPe=(e,t,n,s)=>ePe[e],nPe={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jésus-Christ","après Jésus-Christ"]},rPe={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2ème trim.","3ème trim.","4ème trim."],wide:["1er trimestre","2ème trimestre","3ème trimestre","4ème trimestre"]},sPe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],wide:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},aPe={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},iPe={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"après-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’après-midi",evening:"du soir",night:"du matin"}},oPe=(e,t)=>{const n=Number(e),s=t==null?void 0:t.unit;if(n===0)return"0";const a=["year","week","hour","minute","second"];let i;return n===1?i=s&&a.includes(s)?"ère":"er":i="ème",n+i},lPe=["MMM","MMMM"],cPe={preprocessor:(e,t)=>e.getDate()===1||!t.some(s=>s.isToken&&lPe.includes(s.value))?t:t.map(s=>s.isToken&&s.value==="do"?{isToken:!0,value:"d"}:s),ordinalNumber:oPe,era:Na({values:nPe,defaultWidth:"wide"}),quarter:Na({values:rPe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Na({values:sPe,defaultWidth:"wide"}),day:Na({values:aPe,defaultWidth:"wide"}),dayPeriod:Na({values:iPe,defaultWidth:"wide"})},uPe=/^(\d+)(ième|ère|ème|er|e)?/i,dPe=/\d+/i,hPe={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},fPe={any:[/^av/i,/^ap/i]},mPe={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},pPe={any:[/1/i,/2/i,/3/i,/4/i]},gPe={narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},vPe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},xPe={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},yPe={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},jPe={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},bPe={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},wPe={ordinalNumber:Q3({matchPattern:uPe,parsePattern:dPe,valueCallback:e=>parseInt(e)}),era:Sa({matchPatterns:hPe,defaultMatchWidth:"wide",parsePatterns:fPe,defaultParseWidth:"any"}),quarter:Sa({matchPatterns:mPe,defaultMatchWidth:"wide",parsePatterns:pPe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Sa({matchPatterns:gPe,defaultMatchWidth:"wide",parsePatterns:vPe,defaultParseWidth:"any"}),day:Sa({matchPatterns:xPe,defaultMatchWidth:"wide",parsePatterns:yPe,defaultParseWidth:"any"}),dayPeriod:Sa({matchPatterns:jPe,defaultMatchWidth:"any",parsePatterns:bPe,defaultParseWidth:"any"})},$n={code:"fr",formatDistance:Y_e,formatLong:Z_e,formatRelative:tPe,localize:cPe,match:wPe,options:{weekStartsOn:1,firstWeekContainsDate:4}};function U6({animalId:e}){const{settings:t}=xt(),{data:n}=ds(),{data:s}=us(),{data:a}=MS(),i=JSON.parse(localStorage.getItem("vetpro-veterinarians")||"[]"),o=n==null?void 0:n.find(h=>h.id===e),l=o?s==null?void 0:s.find(h=>h.id===o.client_id):null,c=(a==null?void 0:a.filter(h=>h.animal_id===e))||[],u=h=>{const f=new Date(h),m=new Date;if(isNaN(f.getTime()))return"N/A";let g=m.getFullYear()-f.getFullYear(),p=m.getMonth()-f.getMonth(),v=m.getDate()-f.getDate();if(v<0){p--;const y=new Date(m.getFullYear(),m.getMonth(),0);v+=y.getDate()}p<0&&(g--,p+=12);const j=Math.floor(v/7),x=[];return g>0&&x.push(`${g} an${g>1?"s":""}`),p>0&&x.push(`${p} mois`),j>0&&x.push(`${j} semain${j>1?"es":""}`),x.join(", ")||"0 jour"},d=()=>{if(!o||!l){alert("Données animal ou client manquantes");return}try{const h=window.open("",`vaccination_certificate_${o.id}`,"height=800,width=800");if(!h){alert("L'impression a été bloquée par le navigateur. Veuillez autoriser les popups pour ce site.");return}const f=`
        <!DOCTYPE html>
        <html>
          <head>
            <title>Certificat de Vaccination - ${o.name}</title>
            <style>
              body {
                font-family: Arial, sans-serif;
                margin: 20px;
                line-height: 1.6;
                color: #333;
              }
              .header {
                text-align: center;
                border-bottom: 3px solid #2c5530;
                padding-bottom: 20px;
                margin-bottom: 30px;
              }
              .header h1 {
                color: #2c5530;
                font-size: 32px;
                margin: 10px 0;
                font-weight: bold;
              }
              .clinic-info {
                margin-bottom: 30px;
                padding: 15px;
                background-color: #f8f9fa;
                border-radius: 8px;
              }
              .clinic-info img {
                height: 60px;
                margin-bottom: 10px;
              }
              .clinic-info h2 {
                color: #2c5530;
                margin: 10px 0;
              }
              .qr-section {
                float: right;
                margin-left: 20px;
              }
              .animal-info {
                clear: both;
                margin-bottom: 30px;
                padding: 20px;
                border: 2px solid #2c5530;
                border-radius: 8px;
              }
              .animal-info h2 {
                color: #2c5530;
                border-bottom: 2px solid #2c5530;
                padding-bottom: 10px;
                margin-bottom: 15px;
                font-size: 24px;
              }
              .animal-photo {
                text-align: center;
                margin-bottom: 20px;
              }
              .animal-photo img {
                width: 120px;
                height: 120px;
                object-fit: cover;
                border-radius: 50%;
                border: 3px solid #2c5530;
              }
              .info-grid {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 15px;
                margin-bottom: 20px;
              }
              .info-item {
                display: flex;
                align-items: center;
              }
              .info-label {
                font-weight: bold;
                min-width: 120px;
                color: #2c5530;
              }
              .info-value {
                color: #666;
              }
              .vaccinations-section {
                margin-bottom: 30px;
              }
              .vaccinations-section h2 {
                color: #2c5530;
                border-bottom: 2px solid #2c5530;
                padding-bottom: 10px;
                margin-bottom: 20px;
                font-size: 24px;
              }
              .vaccination-card {
                border: 1px solid #ddd;
                border-radius: 8px;
                margin-bottom: 15px;
                padding: 15px;
                background-color: #fdfdfd;
              }
              .vaccination-card h3 {
                color: #2c5530;
                margin: 0 0 10px 0;
                font-size: 18px;
              }
              .vaccination-details {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 15px;
              }
              .vaccination-item {
                display: flex;
                align-items: center;
              }
              .vaccination-label {
                font-weight: bold;
                min-width: 140px;
                color: #555;
              }
              .vaccination-value {
                color: #666;
              }
              .vets-info {
                margin-bottom: 30px;
                padding: 15px;
                background-color: #f8f9fa;
                border-radius: 8px;
              }
              .vets-info h2 {
                color: #2c5530;
                margin-bottom: 15px;
              }
              .vet-item {
                margin-bottom: 8px;
                color: #666;
              }
              .footer {
                text-align: center;
                margin-top: 40px;
                padding-top: 20px;
                border-top: 1px solid #ddd;
                color: #888;
                font-size: 12px;
              }
              .no-vaccinations {
                text-align: center;
                color: #666;
                font-style: italic;
                padding: 40px;
                border: 2px dashed #ddd;
                border-radius: 8px;
              }
              
              @media print {
                body { margin: 0; }
                .no-print { display: none; }
              }
            </style>
          </head>
          <body>
            <div class="header">
              ${t.logo?`<img src="${t.logo}" alt="Logo clinique" />`:""}
              <h1>CERTIFICAT DE VACCINATION</h1>
              <div class="qr-section">
                <canvas id="qrcode" width="100" height="100"></canvas>
              </div>
            </div>

            ${t.showClinicInfo?`
            <div class="clinic-info">
              <h2>${t.clinicName||"Clinique Vétérinaire"}</h2>
              <p><strong>Adresse:</strong> ${t.address||"N/A"}</p>
              <p><strong>Téléphone:</strong> ${t.phone||"N/A"} | <strong>Email:</strong> ${t.email||"N/A"}</p>
              ${t.website?`<p><strong>Site web:</strong> ${t.website}</p>`:""}
            </div>
            `:""}

            ${t.showVetsInfo&&i.length>0?`
            <div class="vets-info">
              <h2>Équipe Vétérinaire</h2>
              ${i.map(m=>`
                <div class="vet-item">
                  <strong>${m.title||"Dr."} ${m.name}</strong>
                  ${m.specialty?` - ${m.specialty}`:""}
                </div>
              `).join("")}
            </div>
            `:""}

            <div class="animal-info">
              <h2>Informations de l'Animal</h2>
              
              ${o.photo_url?`
              <div class="animal-photo">
                <img src="${o.photo_url}" alt="Photo de ${o.name}" />
              </div>
              `:""}

              <div class="info-grid">
                <div class="info-item">
                  <span class="info-label">Nom:</span>
                  <span class="info-value">${o.name}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Espèce:</span>
                  <span class="info-value">${o.species}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Race:</span>
                  <span class="info-value">${o.breed||"N/A"}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Âge:</span>
                  <span class="info-value">${o.birth_date?u(o.birth_date):"N/A"}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Sexe:</span>
                  <span class="info-value">${o.sex||"N/A"}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Poids:</span>
                  <span class="info-value">${o.weight?o.weight+" kg":"N/A"}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Propriétaire:</span>
                  <span class="info-value">${l.first_name} ${l.last_name}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Contact:</span>
                  <span class="info-value">${l.phone||l.email||"N/A"}</span>
                </div>
              </div>
            </div>

            <div class="vaccinations-section">
              <h2>Historique des Vaccinations</h2>
              
              ${c.length>0?c.map(m=>`
                  <div class="vaccination-card">
                    <h3>${m.vaccine_name}</h3>
                    <div class="vaccination-details">
                      <div class="vaccination-item">
                        <span class="vaccination-label">Date d'administration:</span>
                        <span class="vaccination-value">
                          ${m.vaccination_date?Je(new Date(m.vaccination_date),"dd/MM/yyyy",{locale:$n}):"N/A"}
                        </span>
                      </div>
                      <div class="vaccination-item">
                        <span class="vaccination-label">Prochaine échéance:</span>
                        <span class="vaccination-value">
                          ${m.next_due_date?Je(new Date(m.next_due_date),"dd/MM/yyyy",{locale:$n}):"N/A"}
                        </span>
                      </div>
                      <div class="vaccination-item">
                        <span class="vaccination-label">Type de vaccin:</span>
                        <span class="vaccination-value">${m.vaccine_type||"N/A"}</span>
                      </div>
                      <div class="vaccination-item">
                        <span class="vaccination-label">Fabricant:</span>
                        <span class="vaccination-value">${m.manufacturer||"N/A"}</span>
                      </div>
                      <div class="vaccination-item">
                        <span class="vaccination-label">Numéro de lot:</span>
                        <span class="vaccination-value">${m.batch_number||"N/A"}</span>
                      </div>
                  
                    </div>
                    ${m.notes?`
                      <div style="margin-top: 10px; padding-top: 10px; border-top: 1px solid #eee;">
                        <strong>Notes:</strong> ${m.notes}
                      </div>
                    `:""}
                  </div>
                `).join(""):`<div class="no-vaccinations">
                  <p>Aucune vaccination enregistrée pour cet animal</p>
                </div>`}
            </div>

            <div class="footer">
              <p>Certificat généré le ${Je(new Date,"dd/MM/yyyy à HH:mm",{locale:$n})}</p>
              <p>VetPro - Système de Gestion Vétérinaire</p>
            </div>

            <script>
              // Generate QR Code (simple implementation)
              function generateQRCode() {
                const canvas = document.getElementById('qrcode');
                if (canvas) {
                  const ctx = canvas.getContext('2d');
                  ctx.fillStyle = '#000';
                  ctx.fillRect(0, 0, 100, 100);
                  ctx.fillStyle = '#fff';
                  ctx.font = '12px Arial';
                  ctx.textAlign = 'center';
                  ctx.fillText('QR', 50, 45);
                  ctx.fillText('CODE', 50, 60);
                }
              }
              
              window.onload = function() {
                generateQRCode();
                setTimeout(function() {
                  window.print();
                }, 500);
              };
            <\/script>
          </body>
        </html>
      `;h.document.open(),h.document.write(f),h.document.close(),h.onload=function(){setTimeout(()=>{h.focus(),h.print()},500)}}catch(h){console.error("Erreur lors de l'impression:",h),alert("Une erreur est survenue lors de l'impression du certificat.")}};return!o||!l?r.jsxs(R,{variant:"outline",disabled:!0,children:[r.jsx(Au,{className:"h-4 w-4 mr-2"}),"Certificat de vaccination"]}):r.jsxs(R,{variant:"outline",onClick:d,children:[r.jsx(Au,{className:"h-4 w-4 mr-2"}),"Certificat de vaccination"]})}function BN({children:e,selectedAnimalId:t,open:n,onOpenChange:s}){const{data:a=[]}=ds(),{data:i=[]}=us(),o=lZ(),{toast:l}=et(),[c,u]=b.useState(!1),d=n!==void 0?n:c,h=s||u,[f,m]=b.useState({animalId:t||"",vaccineName:"",vaccineType:"",manufacturer:"",batchNumber:"",vaccinationDate:Je(new Date,"yyyy-MM-dd"),nextDueDate:"",administeredBy:"",notes:""}),g=async j=>{var N,w,C,S;if(j.preventDefault(),!f.animalId||!f.vaccineName||!f.vaccinationDate){l({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires",variant:"destructive"});return}if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(f.animalId)){l({title:"Erreur",description:"ID d'animal invalide",variant:"destructive"});return}const y={animal_id:f.animalId,vaccine_name:f.vaccineName.trim(),vaccine_type:f.vaccineType||void 0,manufacturer:((N=f.manufacturer)==null?void 0:N.trim())||void 0,batch_number:((w=f.batchNumber)==null?void 0:w.trim())||void 0,vaccination_date:f.vaccinationDate,next_due_date:f.nextDueDate||void 0,administered_by:((C=f.administeredBy)==null?void 0:C.trim())||void 0,notes:((S=f.notes)==null?void 0:S.trim())||void 0};console.log("Vaccination payload:",y);try{await o.mutateAsync(y),l({title:"Vaccination ajoutée",description:`La vaccination ${f.vaccineName} a été ajoutée avec succès`}),m({animalId:t||"",vaccineName:"",vaccineType:"",manufacturer:"",batchNumber:"",vaccinationDate:Je(new Date,"yyyy-MM-dd"),nextDueDate:"",administeredBy:"",notes:""}),h(!1)}catch{l({title:"Erreur",description:"Impossible d'ajouter la vaccination",variant:"destructive"})}},p=a.find(j=>j.id===f.animalId),v=p?i.find(j=>j.id===p.client_id):null;return r.jsxs(He,{open:d,onOpenChange:h,children:[r.jsx(Bx,{asChild:!0,children:e||r.jsxs(R,{className:"gap-2",children:[r.jsx(Ue,{className:"h-4 w-4"}),"Nouvelle Vaccination"]})}),r.jsxs(We,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx(Ge,{children:r.jsxs(Ke,{className:"flex items-center gap-2",children:[r.jsx(Mr,{className:"h-5 w-5"}),"Nouvelle Vaccination"]})}),r.jsxs("form",{onSubmit:g,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"animal",children:"Animal *"}),r.jsxs(ve,{value:f.animalId,onValueChange:j=>m({...f,animalId:j}),children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Sélectionnez un animal"})}),r.jsx(ge,{children:a.map(j=>{const x=i.find(y=>y.id===j.client_id);return r.jsxs(M,{value:j.id,children:[j.name," - ",j.species," (",x?`${x.first_name} ${x.last_name}`:"Client inconnu",")"]},j.id)})})]}),p&&v&&r.jsxs("p",{className:"text-sm text-gray-600",children:["Propriétaire: ",v.first_name," ",v.last_name]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"vaccineName",children:"Nom du vaccin *"}),r.jsx(K,{id:"vaccineName",value:f.vaccineName,onChange:j=>m({...f,vaccineName:j.target.value}),placeholder:"ex: DHPP, Rage, FVRCP...",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"vaccineType",children:"Type de vaccin"}),r.jsxs(ve,{value:f.vaccineType,onValueChange:j=>m({...f,vaccineType:j}),children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Sélectionnez le type"})}),r.jsxs(ge,{children:[r.jsx(M,{value:"core",children:"Essentiel"}),r.jsx(M,{value:"non-core",children:"Optionnel"}),r.jsx(M,{value:"rabies",children:"Rage"}),r.jsx(M,{value:"custom",children:"Personnalisé"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"manufacturer",children:"Fabricant"}),r.jsx(K,{id:"manufacturer",value:f.manufacturer,onChange:j=>m({...f,manufacturer:j.target.value}),placeholder:"ex: Zoetis, Virbac, Merial..."})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"batchNumber",children:"Numéro de lot"}),r.jsx(K,{id:"batchNumber",value:f.batchNumber,onChange:j=>m({...f,batchNumber:j.target.value}),placeholder:"Numéro de lot du vaccin"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"vaccinationDate",children:"Date de vaccination *"}),r.jsx(K,{id:"vaccinationDate",type:"date",value:f.vaccinationDate,onChange:j=>m({...f,vaccinationDate:j.target.value}),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"nextDueDate",children:"Prochain rappel"}),r.jsx(K,{id:"nextDueDate",type:"date",value:f.nextDueDate,onChange:j=>m({...f,nextDueDate:j.target.value}),min:f.vaccinationDate})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"notes",children:"Notes"}),r.jsx(Be,{id:"notes",value:f.notes,onChange:j=>m({...f,notes:j.target.value}),placeholder:"Notes complémentaires...",rows:3})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(R,{type:"button",variant:"outline",onClick:()=>h(!1),children:"Annuler"}),r.jsx(R,{type:"submit",disabled:o.isPending,children:o.isPending?"Ajout...":"Ajouter la vaccination"})]})]})]})]})}function VN({open:e,onOpenChange:t,selectedAnimalId:n,selectedClientId:s,editingAntiparasitic:a}){const{data:i}=ds(),{data:o}=us(),l=pZ(),{toast:c}=et(),[u,d]=b.useState({clientId:s||"",animalId:n||"",productName:"",activeIngredient:"",parasiteType:"",administrationRoute:"",dosage:"",treatmentDate:Je(new Date,"yyyy-MM-dd"),nextTreatmentDate:"",administeredBy:"",effectivenessRating:"none",notes:""}),[h,f]=b.useState(null),{data:m}=xZ(h==null?void 0:h.species);b.useEffect(()=>{s&&d(y=>({...y,clientId:s,animalId:""})),n&&d(y=>({...y,animalId:n}))},[s,n]),b.useEffect(()=>{if(u.animalId&&i){const y=i.find(N=>N.id===u.animalId);f(y),y&&d(N=>({...N,clientId:y.client_id}))}},[u.animalId,i]),b.useEffect(()=>{var y,N;a&&d({clientId:((y=a.animal)==null?void 0:y.client_id)||"",animalId:a.animal_id,productName:a.product_name,activeIngredient:a.active_ingredient||"",parasiteType:a.parasite_type||"",administrationRoute:a.administration_route||"",dosage:a.dosage||"",treatmentDate:a.treatment_date,nextTreatmentDate:a.next_treatment_date||"",administeredBy:a.administered_by||"",effectivenessRating:((N=a.effectiveness_rating)==null?void 0:N.toString())||"none",notes:a.notes||""})},[a]);const g=(y,N)=>{d(w=>({...w,[y]:N}))},p=y=>{d(N=>({...N,productName:y.product_name,activeIngredient:y.active_ingredient||"",parasiteType:y.parasite_type,administrationRoute:y.administration_route||"",dosage:y.dosage_recommendation||"",nextTreatmentDate:y.frequency_days?Je(LS(new Date(N.treatmentDate),y.frequency_days),"yyyy-MM-dd"):""})),c({title:"Protocole appliqué",description:`Le protocole ${y.product_name} a été appliqué.`})},v=()=>{d({clientId:s||"",animalId:n||"",productName:"",activeIngredient:"",parasiteType:"",administrationRoute:"",dosage:"",treatmentDate:Je(new Date,"yyyy-MM-dd"),nextTreatmentDate:"",administeredBy:"",effectivenessRating:"none",notes:""})},j=async y=>{if(y.preventDefault(),!u.animalId||!u.productName||!u.treatmentDate){c({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires.",variant:"destructive"});return}try{const N={animal_id:u.animalId,product_name:u.productName,active_ingredient:u.activeIngredient||void 0,parasite_type:u.parasiteType||void 0,administration_route:u.administrationRoute||void 0,dosage:u.dosage||void 0,treatment_date:u.treatmentDate,next_treatment_date:u.nextTreatmentDate||void 0,administered_by:u.administeredBy||void 0,effectiveness_rating:u.effectivenessRating&&u.effectivenessRating!=="none"?parseInt(u.effectivenessRating):void 0,notes:u.notes||void 0};console.log("Antiparasitic data being sent:",N),await l.mutateAsync(N),c({title:"Succès",description:"Le traitement antiparasitaire a été enregistré avec succès."}),v(),t(!1)}catch(N){console.error("Erreur lors de la création du traitement antiparasitaire:",N),c({title:"Erreur",description:"Une erreur s'est produite lors de l'enregistrement.",variant:"destructive"})}},x=(i==null?void 0:i.filter(y=>u.clientId?y.client_id===u.clientId:!0))||[];return r.jsx(He,{open:e,onOpenChange:t,children:r.jsxs(We,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsx(Ge,{children:r.jsxs(Ke,{className:"flex items-center gap-2",children:[r.jsx(Ea,{className:"h-5 w-5"}),a?"Modifier le traitement":"Nouveau traitement antiparasitaire"]})}),r.jsxs("form",{onSubmit:j,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"clientId",children:"Client *"}),r.jsxs(ve,{value:u.clientId,onValueChange:y=>g("clientId",y),children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Sélectionner un client"})}),r.jsx(ge,{children:o==null?void 0:o.map(y=>r.jsxs(M,{value:y.id,children:[y.first_name," ",y.last_name]},y.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"animalId",children:"Animal *"}),r.jsxs(ve,{value:u.animalId,onValueChange:y=>g("animalId",y),disabled:!u.clientId,children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Sélectionner un animal"})}),r.jsx(ge,{children:x.map(y=>r.jsxs(M,{value:y.id,children:[y.name," (",y.species,")"]},y.id))})]})]})]}),h&&r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{className:"text-sm",children:"Animal sélectionné"})}),r.jsx(ne,{children:r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Nom:"})," ",h.name]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Espèce:"})," ",h.species]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Race:"})," ",h.breed||"N/A"]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Poids:"})," ",h.weight?`${h.weight} kg`:"N/A"]})]})})]}),m&&m.length>0&&r.jsxs(te,{children:[r.jsx(he,{children:r.jsxs(fe,{className:"text-sm",children:["Protocoles recommandés pour ",h==null?void 0:h.species]})}),r.jsx(ne,{children:r.jsx("div",{className:"grid gap-2",children:m.map(y=>r.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:y.product_name}),r.jsxs("div",{className:"text-sm text-gray-600",children:[y.parasite_type," - ",y.active_ingredient]})]}),r.jsxs(R,{type:"button",variant:"outline",size:"sm",onClick:()=>p(y),children:[r.jsx(Ue,{className:"h-4 w-4 mr-1"}),"Appliquer"]})]},y.id))})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"productName",children:"Nom du produit *"}),r.jsx(K,{id:"productName",value:u.productName,onChange:y=>g("productName",y.target.value),placeholder:"Ex: Frontline, Bravecto...",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"activeIngredient",children:"Principe actif"}),r.jsx(K,{id:"activeIngredient",value:u.activeIngredient,onChange:y=>g("activeIngredient",y.target.value),placeholder:"Ex: Fipronil, Fluralaner..."})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"parasiteType",children:"Type de parasite"}),r.jsxs(ve,{value:u.parasiteType,onValueChange:y=>g("parasiteType",y),children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Sélectionner le type"})}),r.jsxs(ge,{children:[r.jsx(M,{value:"puces",children:"Puces"}),r.jsx(M,{value:"tiques",children:"Tiques"}),r.jsx(M,{value:"vers_intestinaux",children:"Vers intestinaux"}),r.jsx(M,{value:"vers_cardiaques",children:"Vers cardiaques"}),r.jsx(M,{value:"acariens",children:"Acariens"}),r.jsx(M,{value:"poux",children:"Poux"}),r.jsx(M,{value:"multi_parasites",children:"Multi-parasites"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"administrationRoute",children:"Voie d'administration"}),r.jsxs(ve,{value:u.administrationRoute,onValueChange:y=>g("administrationRoute",y),children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Sélectionner la voie"})}),r.jsxs(ge,{children:[r.jsx(M,{value:"spot_on",children:"Spot-on (pipette)"}),r.jsx(M,{value:"oral",children:"Orale (comprimé/liquide)"}),r.jsx(M,{value:"injection",children:"Injection"}),r.jsx(M,{value:"spray",children:"Spray"}),r.jsx(M,{value:"collier",children:"Collier"}),r.jsx(M,{value:"shampoing",children:"Shampoing"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"dosage",children:"Dosage"}),r.jsx(K,{id:"dosage",value:u.dosage,onChange:y=>g("dosage",y.target.value),placeholder:"Ex: 1 pipette, 1 comprimé..."})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"treatmentDate",children:"Date du traitement *"}),r.jsx(K,{id:"treatmentDate",type:"date",value:u.treatmentDate,onChange:y=>g("treatmentDate",y.target.value),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"nextTreatmentDate",children:"Prochain traitement"}),r.jsx(K,{id:"nextTreatmentDate",type:"date",value:u.nextTreatmentDate,onChange:y=>g("nextTreatmentDate",y.target.value)})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"effectivenessRating",children:"Efficacité (optionnel, 1-10)"}),r.jsxs(ve,{value:u.effectivenessRating,onValueChange:y=>g("effectivenessRating",y),children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Évaluer l'efficacité"})}),r.jsxs(ge,{children:[r.jsx(M,{value:"none",children:"Non évalué"}),[...Array(10)].map((y,N)=>r.jsxs(M,{value:(N+1).toString(),children:[N+1," - ",N+1<=3?"Faible":N+1<=6?"Moyenne":N+1<=8?"Bonne":"Excellente"]},N+1))]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"notes",children:"Notes"}),r.jsx(Be,{id:"notes",value:u.notes,onChange:y=>g("notes",y.target.value),placeholder:"Observations, effets secondaires, etc.",rows:3})]}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx(R,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),r.jsxs(R,{type:"submit",disabled:l.isPending,children:[l.isPending&&r.jsx(Nr,{className:"h-4 w-4 mr-2 animate-spin"}),a?"Modifier":"Enregistrer"]})]})]})]})})}function NPe({open:e,onOpenChange:t,pet:n}){const{consultations:s,clients:a,getConsultationsByPetId:i,getClientById:o,getPrescriptionsByPetId:l,getActivePrescriptions:c,getVaccinationsByPetId:u,getAntiparasiticsByPetId:d,updatePet:h,updateConsultation:f,updateVaccination:m,updateVaccinationStatuses:g}=ct(),[p,v]=b.useState(!1),[j,x]=b.useState(!1),[y,N]=b.useState(!1),[w,C]=b.useState(!1),[S,_]=b.useState("overview"),[k,T]=b.useState(!1),[P,A]=b.useState({hasPedigree:!1,officialName:"",pedigreeNumber:"",breeder:"",fatherName:"",fatherPedigree:"",fatherBreed:"",fatherTitles:"",motherName:"",motherPedigree:"",motherBreed:"",motherTitles:"",pedigreePhoto:""}),[B,L]=b.useState((n==null?void 0:n.additionalPhotos)||[]),[H,z]=b.useState({clientId:0,petId:0,type:"",reason:""}),[$,I]=b.useState(null),[E,q]=b.useState(!1),[Y,re]=b.useState(null),[oe,ae]=b.useState(null),{toast:me}=et();b.useEffect(()=>{e&&g()},[e,g]);const we=()=>{n&&(h(n.id,{...n,...P}),Object.assign(n,P),T(!1))},ue=()=>{n&&(A({hasPedigree:n.hasPedigree||!1,officialName:n.officialName||"",pedigreeNumber:n.pedigreeNumber||"",breeder:n.breeder||"",fatherName:n.fatherName||"",fatherPedigree:n.fatherPedigree||"",fatherBreed:n.fatherBreed||"",fatherTitles:n.fatherTitles||"",motherName:n.motherName||"",motherPedigree:n.motherPedigree||"",motherBreed:n.motherBreed||"",motherTitles:n.motherTitles||"",pedigreePhoto:n.pedigreePhoto||""}),T(!1))},J=Q=>{n&&(z({clientId:n.ownerId,petId:n.id,type:"vaccination",reason:`Rappel vaccinal - ${Q.vaccineName}`}),I(Q),x(!0))},ee=Q=>{re(Q),q(!0)},G=(Q,_e)=>{m(Q,{status:_e}),ae(null),me({title:"Statut mis à jour",description:`Le statut de la vaccination a été changé en "${{completed:"Terminée",scheduled:"Planifiée",overdue:"En retard",missed:"Manquée"}[_e]}"`})},W=(Q,_e)=>{const ye=s.find(Ds=>Ds.id===Q);if(!ye||!ye.photos)return;const ln=ye.photos.filter((Ds,hs)=>hs!==_e),Ar={...ye,photos:ln};f(Q,Ar)},O=async Q=>{var ln;const _e=(ln=Q.target.files)==null?void 0:ln[0];if(!_e)return;const ye=new FileReader;ye.onload=()=>{const Ar=ye.result,Ds=[...B,Ar];L(Ds),n&&h(n.id,{...n,additionalPhotos:Ds})},ye.readAsDataURL(_e)},le=Q=>{const _e=B.filter((ye,ln)=>ln!==Q);L(_e),n&&h(n.id,{...n,additionalPhotos:_e})};if(b.useEffect(()=>{n&&(A({hasPedigree:n.hasPedigree||!1,officialName:n.officialName||"",pedigreeNumber:n.pedigreeNumber||"",breeder:n.breeder||"",fatherName:n.fatherName||"",fatherPedigree:n.fatherPedigree||"",fatherBreed:n.fatherBreed||"",fatherTitles:n.fatherTitles||"",motherName:n.motherName||"",motherPedigree:n.motherPedigree||"",motherBreed:n.motherBreed||"",motherTitles:n.motherTitles||"",pedigreePhoto:n.pedigreePhoto||""}),L(n.additionalPhotos||[]))},[n]),!n)return null;const ce=o(n.ownerId),ie=i(n.id),Ce=u(n.id),st=d(n.id),tt=[...ie].sort((Q,_e)=>new Date(_e.date).getTime()-new Date(Q.date).getTime()),wt=[...Ce].sort((Q,_e)=>new Date(_e.dateGiven).getTime()-new Date(Q.dateGiven).getTime()),tn=[...st||[]].sort((Q,_e)=>new Date(_e.dateGiven).getTime()-new Date(Q.dateGiven).getTime()),bt=tt.filter(Q=>Q.weight||Q.temperature).map(Q=>({date:new Date(Q.date).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit"}),weight:Q.weight?parseFloat(Q.weight):0,temperature:Q.temperature?parseFloat(Q.temperature):0})).reverse(),gt=tt.filter(Q=>Q.weight).map(Q=>parseFloat(Q.weight)),Qt=tt.filter(Q=>Q.temperature).map(Q=>parseFloat(Q.temperature)),mn=gt[0]||0,ut=gt[1]||0,Xt=mn-ut,qr=Xt>0?"up":Xt<0?"down":"stable",Ur=Qt[0]||0,Wo=Qt.length>0?Qt.reduce((Q,_e)=>Q+_e,0)/Qt.length:0,er=tt[0],uc=er!=null&&er.followUp?{reason:er.followUp,estimatedDate:new Date(er.date)}:null,Ln=[];if(er){const Q=(new Date().getTime()-new Date(er.date).getTime())/2592e6;Q>6&&Ln.push({type:"warning",title:"Contrôle de routine recommandé",message:`Dernière consultation il y a ${Math.floor(Q)} mois`,action:"Planifier consultation",actionType:"consultation"})}(Ur>39.5||Ur<37.5)&&Ln.push({type:"danger",title:"Température anormale",message:`Température actuelle: ${Ur}°C`,action:"Contrôle urgent",actionType:"consultation"}),Xt<-2&&Ln.push({type:"warning",title:"Perte de poids",message:`Perte de ${Math.abs(Xt)}kg depuis la dernière consultation`,action:"Surveiller",actionType:"consultation"});const Ha=new Date;new Date(Ha.getTime()+7*24*60*60*1e3),Ce.forEach(Q=>{if(Q.nextDueDate){const _e=new Date(Q.nextDueDate),ye=Math.ceil((_e.getTime()-Ha.getTime())/(1e3*60*60*24));ye<0?Ln.push({type:"danger",title:"Vaccination en retard",message:`${Q.vaccineName} - ${Math.abs(ye)} jour(s) de retard`,action:"Planifier vaccination",actionType:"vaccination"}):ye<=7&&Ln.push({type:"warning",title:"Vaccination à prévoir",message:`${Q.vaccineName} - Dans ${ye} jour(s)`,action:"Planifier vaccination",actionType:"vaccination"})}}),st.forEach(Q=>{if(Q.nextDueDate){const _e=new Date(Q.nextDueDate),ye=Math.ceil((_e.getTime()-Ha.getTime())/(1e3*60*60*24));ye<0?Ln.push({type:"danger",title:"Traitement antiparasitaire en retard",message:`${Q.productName} - ${Math.abs(ye)} jour(s) de retard`,action:"Planifier traitement",actionType:"antiparasitic"}):ye<=7&&Ln.push({type:"warning",title:"Traitement antiparasitaire à prévoir",message:`${Q.productName} - Dans ${ye} jour(s)`,action:"Planifier traitement",actionType:"antiparasitic"})}});const Os=()=>{z({clientId:(ce==null?void 0:ce.id)||0,petId:n.id,type:"consultation",reason:"Nouvelle consultation"}),x(!0)},dc=Q=>{let _e="consultation",ye="";switch(Q){case"consultation":_e="consultation",ye="Contrôle de routine recommandé";break;case"vaccination":_e="vaccination",ye="Vaccination à effectuer";break;case"antiparasitic":_e="controle",ye="Traitement antiparasitaire à effectuer";break;default:_e="consultation",ye="Rendez-vous médical"}z({clientId:(ce==null?void 0:ce.id)||0,petId:n.id,type:_e,reason:ye}),x(!0)},ha=()=>{const Q=window.open("","_blank");if(!Q)return;const _e=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Dossier Médical - ${n.name}</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.6; }
            .header { text-align: center; border-bottom: 2px solid #333; padding-bottom: 20px; margin-bottom: 30px; }
            .clinic-name { font-size: 24px; font-weight: bold; color: #2563eb; }
            .pet-info { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px; }
            .info-section { border: 1px solid #ddd; padding: 15px; border-radius: 5px; }
            .info-section h3 { margin: 0 0 10px 0; color: #333; border-bottom: 1px solid #eee; padding-bottom: 5px; }
            .consultation { margin: 20px 0; border: 1px solid #eee; padding: 15px; border-radius: 5px; }
            .consultation h4 { margin: 0 0 10px 0; color: #333; }
            .stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 20px 0; }
            .stat-card { border: 1px solid #ddd; padding: 10px; text-align: center; border-radius: 5px; }
            .stat-value { font-size: 24px; font-weight: bold; color: #2563eb; }
            .stat-label { font-size: 12px; color: #666; }
            @media print { body { margin: 0; } }
          </style>
        </head>
        <body>
          <div class="header">
            <div class="clinic-name">VetPro CRM</div>
            <h2>Dossier Médical Complet</h2>
            <p><strong>Animal:</strong> ${n.name} | <strong>Généré le:</strong> ${new Date().toLocaleDateString("fr-FR")} à ${new Date().toLocaleTimeString("fr-FR")}</p>
          </div>

          <div class="pet-info">
            <div class="info-section">
              <h3>Informations Animal</h3>
              <p><strong>Nom:</strong> ${n.name}</p>
              <p><strong>Espèce:</strong> ${n.type}</p>
              <p><strong>Race:</strong> ${n.breed||"Non spécifiée"}</p>
              <p><strong>Sexe:</strong> ${n.gender==="male"?"Mâle":n.gender==="female"?"Femelle":"Non spécifié"}</p>
              <p><strong>Âge:</strong> ${n.birthDate?ku(n.birthDate):"Non spécifié"}</p>
              <p><strong>Poids actuel:</strong> ${mn}kg</p>
              <p><strong>Température actuelle:</strong> ${Ur}°C</p>
              <p><strong>Couleur:</strong> ${n.color||"Non spécifiée"}</p>
              <p><strong>Puce électronique:</strong> ${n.microchip||"Non spécifiée"}</p>
              ${n.medicalNotes?`<p><strong>Notes médicales:</strong> ${n.medicalNotes}</p>`:""}
            </div>
            <div class="info-section">
              <h3>Propriétaire</h3>
              <p><strong>Nom:</strong> ${(ce==null?void 0:ce.name)||"Non spécifié"}</p>
              <p><strong>Email:</strong> ${(ce==null?void 0:ce.email)||"Non spécifié"}</p>
              <p><strong>Téléphone:</strong> ${(ce==null?void 0:ce.phone)||"Non spécifié"}</p>
            </div>
          </div>

          <div class="stats">
            <div class="stat-card">
              <div class="stat-value">${tt.length}</div>
              <div class="stat-label">Consultations</div>
            </div>
            <div class="stat-card">
              <div class="stat-value">${Ce.length}</div>
              <div class="stat-label">Vaccinations</div>
            </div>
            <div class="stat-card">
              <div class="stat-value">${st.length}</div>
              <div class="stat-label">Antiparasitaires</div>
            </div>
            <div class="stat-card">
              <div class="stat-value">${mn}kg</div>
              <div class="stat-label">Poids actuel</div>
            </div>
          </div>

          <!-- Photo principale de l'animal -->
          ${n.photo?`
            <div style="text-align: center; margin: 20px 0;">
              <img src="${n.photo}" alt="${n.name}" style="max-width: 200px; max-height: 200px; object-fit: cover; border-radius: 8px; border: 2px solid #ddd;" />
              <p style="margin-top: 10px; font-weight: bold;">Photo de ${n.name}</p>
            </div>
          `:""}

          <!-- Historique des Consultations -->
          <div style="margin: 30px 0; border: 1px solid #eee; padding: 20px; border-radius: 5px;">
            <h3 style="margin: 0 0 15px 0; color: #333; border-bottom: 2px solid #eee; padding-bottom: 10px;">Historique des Consultations (${tt.length})</h3>
            ${tt.length>0?tt.map(ye=>`
              <div style="margin: 15px 0; border: 1px solid #ddd; padding: 15px; border-radius: 5px; background: #f9f9f9;">
                <h4 style="margin: 0 0 10px 0; color: #333;">Consultation du ${new Date(ye.date).toLocaleDateString("fr-FR")}</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                  <div>
                    <p><strong>Poids:</strong> ${ye.weight||"Non renseigné"}</p>
                    <p><strong>Température:</strong> ${ye.temperature||"Non renseigné"}</p>
                    ${ye.symptoms?`<p><strong>Symptômes:</strong> ${ye.symptoms}</p>`:""}
                  </div>
                  <div>
                    ${ye.diagnosis?`<p><strong>Diagnostic:</strong> ${ye.diagnosis}</p>`:""}
                    ${ye.treatment?`<p><strong>Traitement:</strong> ${ye.treatment}</p>`:""}
                    ${ye.medications?`<p><strong>Médicaments:</strong> ${ye.medications}</p>`:""}
                  </div>
                </div>
                ${ye.notes?`<p><strong>Notes:</strong> ${ye.notes}</p>`:""}
                ${ye.photos&&ye.photos.length>0?`
                  <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; margin: 15px 0;">
                    ${ye.photos.map((ln,Ar)=>`
                      <div style="text-align: center;">
                        <img src="${ln}" alt="Photo consultation ${Ar+1}" style="max-width: 120px; max-height: 120px; object-fit: cover; border-radius: 5px; border: 1px solid #ddd;" />
                        <div style="font-size: 11px; color: #666; margin-top: 5px;">Photo ${Ar+1}</div>
                      </div>
                    `).join("")}
                  </div>
                `:""}
              </div>
            `).join(""):'<p style="text-align: center; color: #666; font-style: italic;">Aucune consultation enregistrée</p>'}
          </div>

          <!-- Historique des Vaccinations -->
          <div style="margin: 30px 0; border: 1px solid #eee; padding: 20px; border-radius: 5px;">
            <h3 style="margin: 0 0 15px 0; color: #333; border-bottom: 2px solid #eee; padding-bottom: 10px;">Historique des Vaccinations (${Ce.length})</h3>
            ${Ce.length>0?Ce.map(ye=>`
              <div style="margin: 10px 0; padding: 10px; border-left: 3px solid #4CAF50; background: #f0f8f0;">
                <h4 style="margin: 0 0 10px 0;">${ye.vaccineName} - ${new Date(ye.dateGiven).toLocaleDateString("fr-FR")}</h4>
                <p><strong>Type:</strong> ${ye.vaccineType||"Non spécifié"}</p>
                <p><strong>Prochain rappel:</strong> ${ye.nextDueDate?new Date(ye.nextDueDate).toLocaleDateString("fr-FR"):"Non spécifié"}</p>
                <p><strong>Vétérinaire:</strong> ${ye.veterinarian||"Non spécifié"}</p>
                ${ye.notes?`<p><strong>Notes:</strong> ${ye.notes}</p>`:""}
              </div>
            `).join(""):'<p style="text-align: center; color: #666; font-style: italic;">Aucune vaccination enregistrée</p>'}
          </div>

          <!-- Historique des Antiparasitaires -->
          <div style="margin: 30px 0; border: 1px solid #eee; padding: 20px; border-radius: 5px;">
            <h3 style="margin: 0 0 15px 0; color: #333; border-bottom: 2px solid #eee; padding-bottom: 10px;">Historique des Traitements Antiparasitaires (${st.length})</h3>
            ${st.length>0?st.map(ye=>`
              <div style="margin: 15px 0; padding: 15px; border-left: 4px solid #9C27B0; background: #f3e5f5; border-radius: 5px;">
                <h4 style="margin: 0 0 10px 0; color: #7B1FA2;">${ye.productName} - ${new Date(ye.dateGiven).toLocaleDateString("fr-FR")}</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 10px 0;">
                  <div>
                    <p><strong>Type de produit:</strong> ${ye.productType||"Non spécifié"}</p>
                    <p><strong>Parasites ciblés:</strong> ${ye.targetParasites||"Non spécifié"}</p>
                    <p><strong>Voie d'administration:</strong> ${ye.administrationRoute||"Non spécifié"}</p>
                    <p><strong>Dosage:</strong> ${ye.dosage||"Non spécifié"}</p>
                  </div>
                  <div>
                <p><strong>Prochain traitement:</strong> ${ye.nextDueDate?new Date(ye.nextDueDate).toLocaleDateString("fr-FR"):"Non spécifié"}</p>
                <p><strong>Vétérinaire:</strong> ${ye.veterinarian||"Non spécifié"}</p>
                    <p><strong>Statut:</strong> ${ye.status==="completed"?"Terminé":ye.status==="scheduled"?"Planifié":ye.status==="overdue"?"En retard":"Manqué"}</p>
                    ${ye.cost?`<p><strong>Coût:</strong> ${ye.cost} €</p>`:""}
                  </div>
                </div>
                ${ye.batchNumber?`<p><strong>Numéro de lot:</strong> ${ye.batchNumber}</p>`:""}
                ${ye.manufacturer?`<p><strong>Fabricant:</strong> ${ye.manufacturer}</p>`:""}
                ${ye.weight?`<p><strong>Poids de l'animal:</strong> ${ye.weight}</p>`:""}
                ${ye.notes?`
                  <div style="margin: 10px 0; padding: 10px; background: rgba(156, 39, 176, 0.1); border-radius: 3px;">
                    <p><strong>Notes:</strong> ${ye.notes}</p>
                  </div>
                `:""}
                ${ye.sideEffects?`
                  <div style="margin: 10px 0; padding: 10px; background: #ffebee; border: 1px solid #f44336; border-radius: 3px;">
                    <p style="color: #d32f2f;"><strong>⚠️ Effets indésirables:</strong> ${ye.sideEffects}</p>
                  </div>
                `:""}
              </div>
            `).join(""):'<p style="text-align: center; color: #666; font-style: italic;">Aucun traitement antiparasitaire enregistré</p>'}
          </div>

          <!-- Section Pedigree -->
          ${n.hasPedigree?`
            <div style="margin: 30px 0; border: 1px solid #eee; padding: 20px; border-radius: 5px;">
              <h3 style="margin: 0 0 15px 0; color: #333; border-bottom: 2px solid #eee; padding-bottom: 10px;">Pedigree Officiel</h3>
              
              <!-- Informations de l'animal -->
              <div style="margin: 20px 0; padding: 15px; background: #f8f9fa; border-radius: 5px;">
                <h4 style="margin: 0 0 10px 0; color: #333;">Informations de l'animal</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                  <div>
                    <p><strong>Nom officiel:</strong> ${n.officialName||"Non spécifié"}</p>
                    <p><strong>N° Pedigree/LOF:</strong> ${n.pedigreeNumber||"Non spécifié"}</p>
                    <p><strong>N° Puce/Tatouage:</strong> ${n.microchip||"Non spécifié"}</p>
                    <p><strong>Race:</strong> ${n.breed||"Non spécifiée"}</p>
                  </div>
                  <div>
                    <p><strong>Sexe:</strong> ${n.gender==="male"?"Mâle":n.gender==="female"?"Femelle":"Non spécifié"}</p>
                    <p><strong>Couleur/Robe:</strong> ${n.color||"Non spécifiée"}</p>
                    <p><strong>Date de naissance:</strong> ${n.birthDate?new Date(n.birthDate).toLocaleDateString("fr-FR"):"Non spécifié"}</p>
                    <p><strong>Éleveur:</strong> ${n.breeder||"Non spécifié"}</p>
                  </div>
                </div>
              </div>

              <!-- Parents -->
              <div style="margin: 20px 0;">
                <h4 style="margin: 0 0 10px 0; color: #333;">Ascendance</h4>
                
                <!-- Père -->
                <div style="margin: 15px 0; padding: 15px; border-left: 3px solid #007bff; background: #f0f8ff;">
                  <h5 style="margin: 0 0 8px 0; color: #007bff;">Père</h5>
                  <p><strong>Nom:</strong> ${n.fatherName||"Non spécifié"}</p>
                  <p><strong>N° Pedigree:</strong> ${n.fatherPedigree||"Non spécifié"}</p>
                  <p><strong>Race:</strong> ${n.fatherBreed||"Non spécifiée"}</p>
                  ${n.fatherTitles?`<p><strong>Titres:</strong> ${n.fatherTitles}</p>`:""}
                </div>

                <!-- Mère -->
                <div style="margin: 15px 0; padding: 15px; border-left: 3px solid #e91e63; background: #fce4ec;">
                  <h5 style="margin: 0 0 8px 0; color: #e91e63;">Mère</h5>
                  <p><strong>Nom:</strong> ${n.motherName||"Non spécifié"}</p>
                  <p><strong>N° Pedigree:</strong> ${n.motherPedigree||"Non spécifié"}</p>
                  <p><strong>Race:</strong> ${n.motherBreed||"Non spécifiée"}</p>
                  ${n.motherTitles?`<p><strong>Titres:</strong> ${n.motherTitles}</p>`:""}
                </div>
              </div>

              <!-- Certificat Pedigree -->
              ${n.pedigreePhoto?`
                <div style="margin: 20px 0; text-align: center;">
                  <h4 style="margin: 0 0 15px 0; color: #333;">Certificat Pedigree</h4>
                  <img src="${n.pedigreePhoto}" alt="Certificat Pedigree" style="max-width: 100%; max-height: 400px; object-fit: contain; border-radius: 8px; border: 2px solid #ddd; box-shadow: 0 4px 8px rgba(0,0,0,0.1);" />
                  <p style="margin-top: 10px; font-size: 12px; color: #666;">Document officiel du pedigree</p>
                </div>
              `:""}
            </div>
          `:""}

          <!-- Album Photo -->
          <div style="margin: 30px 0; border: 1px solid #eee; padding: 20px; border-radius: 5px;">
            <h3 style="margin: 0 0 15px 0; color: #333; border-bottom: 2px solid #eee; padding-bottom: 10px;">Album Photo</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px; margin: 15px 0;">
              ${n.photo?`
                <div style="text-align: center;">
                  <img src="${n.photo}" alt="Photo principale" style="max-width: 150px; max-height: 150px; object-fit: cover; border-radius: 5px; border: 1px solid #ddd;" />
                  <div style="font-size: 11px; color: #666; margin-top: 5px;">Photo principale</div>
                </div>
              `:""}
              ${tt.some(ye=>ye.photos&&ye.photos.length>0)?tt.map(ye=>ye.photos?ye.photos.map((ln,Ar)=>`
                    <div style="text-align: center;">
                      <img src="${ln}" alt="Consultation ${new Date(ye.date).toLocaleDateString("fr-FR")} - Photo ${Ar+1}" style="max-width: 150px; max-height: 150px; object-fit: cover; border-radius: 5px; border: 1px solid #ddd;" />
                      <div style="font-size: 11px; color: #666; margin-top: 5px;">Consultation ${new Date(ye.date).toLocaleDateString("fr-FR")}</div>
                    </div>
                  `).join(""):"").join(""):""}
            </div>
            ${!n.photo&&!tt.some(ye=>ye.photos&&ye.photos.length>0)?'<p style="text-align: center; color: #666; font-style: italic;">Aucune photo disponible</p>':""}
          </div>

          <div style="margin-top: 40px; text-align: center; font-size: 12px; color: #666;">
            <p>VetPro CRM - Gestion Vétérinaire Complète</p>
          </div>
        </body>
      </html>
    `;Q.document.write(_e),Q.document.close(),Q.focus(),Q.print(),Q.close()};return r.jsxs(r.Fragment,{children:[r.jsx(He,{open:e,onOpenChange:t,children:r.jsxs(We,{className:"sm:max-w-[1000px] max-h-[90vh] overflow-y-auto",children:[r.jsx(Ge,{children:r.jsxs(Ke,{className:"flex items-center gap-2",children:[r.jsx(xr,{className:"h-5 w-5"}),"Dossier Médical - ",n.name,ce&&r.jsxs("span",{className:"text-sm text-muted-foreground",children:["(Propriétaire: ",ce.name,")"]})]})}),r.jsxs(Ai,{value:S,onValueChange:_,className:"space-y-4",children:[r.jsxs(qa,{className:"grid w-full grid-cols-7",children:[r.jsxs(kt,{value:"overview",className:"gap-2",children:[r.jsx(na,{className:"h-4 w-4"}),"Vue d'ensemble"]}),r.jsxs(kt,{value:"history",className:"gap-2",children:[r.jsx(bn,{className:"h-4 w-4"}),"Historique"]}),r.jsxs(kt,{value:"prescriptions",className:"gap-2",children:[r.jsx(Mr,{className:"h-4 w-4"}),"Prescriptions"]}),r.jsxs(kt,{value:"vaccinations",className:"gap-2",children:[r.jsx(Mr,{className:"h-4 w-4"}),"Vaccinations"]}),r.jsxs(kt,{value:"antiparasites",className:"gap-2",children:[r.jsx(cl,{className:"h-4 w-4"}),"Antiparasitaires"]}),r.jsxs(kt,{value:"pedigree",className:"gap-2",children:[r.jsx(_g,{className:"h-4 w-4"}),"Pedigree"]}),r.jsxs(kt,{value:"charts",className:"gap-2",children:[r.jsx(an,{className:"h-4 w-4"}),"Évolution"]}),r.jsxs(kt,{value:"alerts",className:"gap-2",children:[r.jsx(Tn,{className:"h-4 w-4"}),"Alertes"]})]}),r.jsxs(Tt,{value:"overview",className:"space-y-4",children:[r.jsxs(te,{children:[r.jsxs(he,{className:"flex flex-row items-center justify-between",children:[r.jsx(fe,{className:"text-lg",children:"Galerie photos"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"file",accept:"image/*",onChange:O,className:"hidden",id:"add-photo-input"}),r.jsxs("label",{htmlFor:"add-photo-input",className:"cursor-pointer inline-flex items-center gap-2 px-3 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 transition-colors",children:[r.jsx(Ue,{className:"h-4 w-4"}),"Ajouter une photo"]})]})]}),r.jsx(ne,{children:r.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[n.photo&&r.jsxs("div",{className:"relative flex-shrink-0",children:[r.jsx("img",{src:n.photo,alt:"Photo officielle",className:"h-32 w-32 object-cover rounded"}),r.jsx("div",{className:"absolute bottom-1 left-1 bg-black/70 text-white text-xs px-1 rounded",children:"Officielle"})]}),B.map((Q,_e)=>r.jsxs("div",{className:"relative flex-shrink-0 group",children:[r.jsx("img",{src:Q,alt:`Photo supplémentaire ${_e+1}`,className:"h-32 w-32 object-cover rounded"}),r.jsxs("div",{className:"absolute bottom-1 left-1 bg-black/70 text-white text-xs px-1 rounded",children:["Photo ",_e+1]}),r.jsx("button",{onClick:()=>le(_e),className:"absolute top-1 right-1 bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-200",title:"Supprimer cette photo",children:"×"})]},`additional-${_e}`)),tt.map(Q=>{var _e;return(_e=Q.photos)==null?void 0:_e.map((ye,ln)=>r.jsxs("div",{className:"relative flex-shrink-0 group",children:[r.jsx("img",{src:ye,alt:`consultation-${Q.id}-${ln}`,className:"h-32 w-32 object-cover rounded"}),r.jsx("div",{className:"absolute bottom-1 left-1 bg-black/70 text-white text-xs px-1 rounded",children:new Date(Q.date).toLocaleDateString("fr-FR")}),r.jsx("button",{onClick:()=>W(Q.id,ln),className:"absolute top-1 right-1 bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-200",title:"Supprimer cette photo",children:"×"})]},`${Q.id}-${ln}`))}),!n.photo&&B.length===0&&tt.every(Q=>!Q.photos||Q.photos.length===0)&&r.jsx("div",{className:"flex items-center justify-center h-32 w-full border-2 border-dashed border-gray-300 rounded text-gray-500",children:"Aucune photo disponible"})]})})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-5",children:[r.jsx(te,{children:r.jsx(ne,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ag,{className:"h-5 w-5 text-primary"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Poids actuel"}),r.jsxs("p",{className:"text-2xl font-bold",children:[mn,"kg"]}),Xt!==0&&r.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[qr==="up"?r.jsx(an,{className:"h-3 w-3 text-green-600"}):r.jsx($l,{className:"h-3 w-3 text-red-600"}),r.jsxs("span",{className:qr==="up"?"text-green-600":"text-red-600",children:[Math.abs(Xt),"kg"]})]})]})]})})}),r.jsx(te,{children:r.jsx(ne,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(uf,{className:"h-5 w-5 text-primary"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Température"}),r.jsxs("p",{className:"text-2xl font-bold",children:[Ur,"°C"]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Moy: ",Wo.toFixed(1),"°C"]})]})]})})}),r.jsx(te,{children:r.jsx(ne,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ye,{className:"h-5 w-5 text-primary"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Consultations"}),r.jsx("p",{className:"text-2xl font-bold",children:tt.length}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Dernière: ",er?new Date(er.date).toLocaleDateString("fr-FR"):"Aucune"]})]})]})})}),r.jsx(te,{children:r.jsx(ne,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Tn,{className:"h-5 w-5 text-primary"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Alertes"}),r.jsx("p",{className:"text-2xl font-bold",children:Ln.length}),r.jsx("p",{className:"text-sm text-muted-foreground",children:Ln.length>0?"À traiter":"Aucune"})]})]})})}),r.jsx(te,{children:r.jsx(ne,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Mr,{className:"h-5 w-5 text-primary"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Prescriptions"}),r.jsx("p",{className:"text-2xl font-bold",children:l(n.id).length}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[c().filter(Q=>Q.petId===n.id).length," active(s)"]})]})]})})})]}),uc&&r.jsx(te,{className:"border-primary",children:r.jsx(ne,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold",children:"Prochain suivi recommandé"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:uc.reason})]}),r.jsxs(R,{size:"sm",onClick:Os,children:[r.jsx(Ue,{className:"h-4 w-4 mr-2"}),"Planifier"]})]})})}),Ln.length>0&&r.jsxs(te,{className:"border-destructive",children:[r.jsx(he,{children:r.jsx(fe,{className:"text-destructive",children:"Alertes importantes"})}),r.jsx(ne,{className:"space-y-2",children:Ln.slice(0,3).map((Q,_e)=>r.jsxs("div",{className:"flex items-center gap-3 p-2 bg-destructive/10 rounded",children:[r.jsx(Tn,{className:"h-4 w-4 text-destructive"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium",children:Q.title}),r.jsx("p",{className:"text-sm text-muted-foreground",children:Q.message})]}),r.jsx(R,{size:"sm",variant:"outline",onClick:()=>dc(Q.actionType),children:Q.action})]},_e))})]})]}),r.jsxs(Tt,{value:"history",className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Historique des consultations"}),r.jsxs(R,{size:"sm",onClick:Os,className:"gap-2",children:[r.jsx(Ue,{className:"h-4 w-4"}),"Planifier Consultation"]})]}),tt.length===0?r.jsx(te,{children:r.jsxs(ne,{className:"p-8 text-center text-muted-foreground",children:[r.jsx(bn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"Aucune consultation enregistrée"}),r.jsx("p",{className:"text-sm",children:"Commencez par créer la première consultation"})]})}):r.jsx("div",{className:"space-y-4",children:tt.map(Q=>r.jsxs(te,{children:[r.jsx(he,{className:"pb-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(fe,{className:"text-base",children:["Consultation #",Q.id]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[r.jsx(Ye,{className:"h-4 w-4"}),new Date(Q.date).toLocaleDateString("fr-FR")]})]})}),r.jsxs(ne,{className:"space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Poids:"}),r.jsx("span",{className:"ml-2",children:Q.weight||"Non renseigné"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Température:"}),r.jsx("span",{className:"ml-2",children:Q.temperature||"Non renseigné"})]})]}),Q.symptoms&&r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Symptômes:"}),r.jsx("p",{className:"text-sm mt-1",children:Q.symptoms})]}),Q.diagnosis&&r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Diagnostic:"}),r.jsx("p",{className:"text-sm mt-1",children:Q.diagnosis})]}),Q.treatment&&r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Traitement:"}),r.jsx("p",{className:"text-sm mt-1",children:Q.treatment})]}),Q.medications&&r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Médicaments:"}),r.jsx("p",{className:"text-sm mt-1",children:Q.medications})]}),Q.notes&&r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Notes:"}),r.jsx("p",{className:"text-sm mt-1 text-muted-foreground",children:Q.notes})]}),Q.followUp&&r.jsxs("div",{className:"pt-2 border-t",children:[r.jsx("span",{className:"font-medium text-primary",children:"Suivi recommandé:"}),r.jsx("p",{className:"text-sm mt-1",children:Q.followUp})]})]})]},Q.id))})]}),r.jsx(Tt,{value:"prescriptions",className:"space-y-4",children:r.jsx(q6,{petId:n.id})}),r.jsxs(Tt,{value:"charts",className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Évolution du poids et de la température"}),bt.length>0?r.jsxs("div",{className:"space-y-6",children:[r.jsxs(te,{children:[r.jsx(he,{children:r.jsxs(fe,{className:"flex items-center gap-2",children:[r.jsx(Ag,{className:"h-5 w-5"}),"Évolution du poids"]})}),r.jsx(ne,{children:r.jsx(Ni,{width:"100%",height:200,children:r.jsxs(BE,{data:bt,children:[r.jsx(Ql,{strokeDasharray:"3 3"}),r.jsx(ia,{dataKey:"date"}),r.jsx(oa,{}),r.jsx(qn,{}),r.jsx(rd,{type:"monotone",dataKey:"weight",stroke:"#2563eb",strokeWidth:2})]})})})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsxs(fe,{className:"flex items-center gap-2",children:[r.jsx(uf,{className:"h-5 w-5"}),"Évolution de la température"]})}),r.jsx(ne,{children:r.jsx(Ni,{width:"100%",height:200,children:r.jsxs(BE,{data:bt,children:[r.jsx(Ql,{strokeDasharray:"3 3"}),r.jsx(ia,{dataKey:"date"}),r.jsx(oa,{}),r.jsx(qn,{}),r.jsx(rd,{type:"monotone",dataKey:"temperature",stroke:"#dc2626",strokeWidth:2})]})})})]})]}):r.jsx(te,{children:r.jsxs(ne,{className:"p-8 text-center text-muted-foreground",children:[r.jsx(an,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"Aucune donnée disponible pour les graphiques"}),r.jsx("p",{className:"text-sm",children:"Ajoutez des consultations avec poids et température"})]})})]}),r.jsxs(Tt,{value:"vaccinations",className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Historique vaccinal"}),r.jsx(BN,{selectedClientId:ce==null?void 0:ce.id,selectedPetId:n.id,children:r.jsxs(R,{size:"sm",className:"gap-2",children:[r.jsx(Ue,{className:"h-4 w-4"}),"Nouvelle vaccination"]})})]}),wt.length===0?r.jsx(te,{children:r.jsxs(ne,{className:"p-8 text-center text-muted-foreground",children:[r.jsx(Mr,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"Aucune vaccination enregistrée"}),r.jsx("p",{className:"text-sm",children:"Commencez par ajouter la première vaccination"})]})}):r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[r.jsx(te,{children:r.jsx(ne,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-green-100 rounded-full",children:r.jsx(Mr,{className:"h-4 w-4 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total"}),r.jsx("p",{className:"text-xl font-bold",children:wt.length})]})]})})}),r.jsx(te,{children:r.jsx(ne,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:r.jsx(Ye,{className:"h-4 w-4 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"À jour"}),r.jsx("p",{className:"text-xl font-bold",children:wt.filter(Q=>Q.status==="completed").length})]})]})})}),r.jsx(te,{children:r.jsx(ne,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-red-100 rounded-full",children:r.jsx(Tn,{className:"h-4 w-4 text-red-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"En retard"}),r.jsx("p",{className:"text-xl font-bold",children:wt.filter(Q=>Q.status==="overdue").length})]})]})})}),r.jsx(te,{children:r.jsx(ne,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-orange-100 rounded-full",children:r.jsx(Ye,{className:"h-4 w-4 text-orange-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Planifiées"}),r.jsx("p",{className:"text-xl font-bold",children:wt.filter(Q=>Q.status==="scheduled").length})]})]})})})]}),r.jsx("div",{className:"space-y-3",children:wt.map(Q=>r.jsx(te,{className:"hover:shadow-md transition-shadow",children:r.jsxs(ne,{className:"p-4",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(Mr,{className:`h-5 w-5 ${Q.vaccinationCategory==="reminder"?"text-orange-600":"text-blue-600"}`}),r.jsxs("h4",{className:"font-semibold text-lg",children:[Q.vaccineName,Q.vaccinationCategory==="reminder"&&r.jsx("span",{className:"ml-2 text-sm text-orange-600 font-normal",children:"(Rappel)"})]}),r.jsx(Se,{variant:Q.vaccineType==="core"?"default":"secondary",className:"text-xs",children:Q.vaccineType==="core"?"Essentiel":Q.vaccineType==="non-core"?"Optionnel":Q.vaccineType==="rabies"?"Rage":"Personnalisé"}),Q.vaccinationCategory==="reminder"&&r.jsx(Se,{variant:"secondary",className:"text-xs bg-orange-100 text-orange-800",children:"Rappel"}),oe===Q.id?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(ve,{value:Q.status,onValueChange:_e=>G(Q.id,_e),children:[r.jsx(pe,{className:"w-32",children:r.jsx(xe,{})}),r.jsxs(ge,{children:[r.jsx(M,{value:"completed",children:"Terminée"}),r.jsx(M,{value:"scheduled",children:"Planifiée"}),r.jsx(M,{value:"overdue",children:"En retard"}),r.jsx(M,{value:"missed",children:"Manquée"})]})]}),r.jsx(R,{size:"sm",variant:"outline",onClick:()=>ae(null),children:"Annuler"})]}):r.jsx(Se,{className:Q.status==="completed"?"bg-green-100 text-green-800 border-green-200 cursor-pointer hover:bg-green-200":Q.status==="overdue"?"bg-red-100 text-red-800 border-red-200 cursor-pointer hover:bg-red-200":Q.status==="scheduled"?"bg-blue-100 text-blue-800 border-blue-200 cursor-pointer hover:bg-blue-200":"bg-orange-100 text-orange-800 border-orange-200 cursor-pointer hover:bg-orange-200",onClick:()=>ae(Q.id),children:Q.status==="completed"?"Terminée":Q.status==="overdue"?"En retard":Q.status==="scheduled"?"Planifiée":"Manquée"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600",children:Q.vaccinationCategory==="reminder"?"Date du rappel":"Date administrée"}),r.jsx("p",{className:"font-medium",children:Oa(Q.dateGiven)})]}),Q.vaccinationCategory==="new"&&r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600",children:"Rappel prévu"}),r.jsx("p",{className:"font-medium",children:Oa(Q.nextDueDate)})]}),Q.vaccinationCategory==="reminder"&&Q.originalVaccinationId&&r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600",children:"Vaccination originale"}),r.jsxs("p",{className:"font-medium text-sm text-gray-500",children:["ID: ",Q.originalVaccinationId]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600",children:"Vétérinaire"}),r.jsx("p",{className:"font-medium",children:Q.veterinarian})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600",children:"Coût"}),r.jsx("p",{className:"font-medium",children:Q.cost?`${Q.cost} €`:"Non spécifié"})]})]}),Q.batchNumber&&r.jsx("div",{className:"mt-3 text-sm",children:r.jsxs("p",{className:"text-gray-600",children:["Numéro de lot: ",r.jsx("span",{className:"font-medium",children:Q.batchNumber})]})}),Q.manufacturer&&r.jsx("div",{className:"mt-1 text-sm",children:r.jsxs("p",{className:"text-gray-600",children:["Fabricant: ",r.jsx("span",{className:"font-medium",children:Q.manufacturer})]})}),Q.location&&r.jsx("div",{className:"mt-1 text-sm",children:r.jsxs("p",{className:"text-gray-600",children:["Site d'injection: ",r.jsx("span",{className:"font-medium",children:Q.location==="left_shoulder"?"Épaule gauche":Q.location==="right_shoulder"?"Épaule droite":Q.location==="left_hip"?"Hanche gauche":Q.location==="right_hip"?"Hanche droite":"Sous-cutané"})]})}),Q.notes&&r.jsx("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg",children:r.jsxs("p",{className:"text-sm text-gray-700",children:[r.jsx("strong",{children:"Notes:"})," ",Q.notes]})}),Q.adverseReactions&&r.jsx("div",{className:"mt-2 p-3 bg-red-50 rounded-lg border border-red-200",children:r.jsxs("p",{className:"text-sm text-red-700",children:[r.jsx("strong",{children:"⚠️ Réactions adverses:"})," ",Q.adverseReactions]})})]}),r.jsxs("div",{className:"flex flex-col gap-2 ml-4",children:[r.jsx(U6,{animalId:n.id.toString()}),Q.nextDueDate&&new Date(Q.nextDueDate)<=new Date&&Q.status!=="completed"&&!Q.reminderAppointmentId&&r.jsxs(R,{size:"sm",className:"gap-2",onClick:()=>J(Q),children:[r.jsx(Ue,{className:"h-4 w-4"}),"Rappel"]}),Q.reminderAppointmentId&&r.jsx(Se,{variant:"outline",className:"text-xs",children:"Rappel programmé"}),Q.status==="overdue"&&r.jsxs(R,{size:"sm",className:"gap-2",onClick:()=>ee(Q),children:[r.jsx(Rq,{className:"h-4 w-4"}),"Confirmer"]})]})]}),Q.reminderHistory&&Q.reminderHistory.length>0&&r.jsxs("div",{className:"mt-4 pt-4 border-t",children:[r.jsx("h5",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Historique des rappels"}),r.jsx("div",{className:"space-y-2",children:Q.reminderHistory.map(_e=>r.jsxs("div",{className:"flex items-center justify-between text-xs bg-muted/30 p-2 rounded",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ye,{className:"h-3 w-3"}),r.jsx("span",{children:new Date(_e.scheduledDate).toLocaleDateString("fr-FR")})]}),r.jsx(Se,{variant:_e.status==="completed"?"default":_e.status==="missed"?"destructive":"secondary",className:"text-xs",children:_e.status==="completed"?"Complété":_e.status==="missed"?"Manqué":_e.status==="cancelled"?"Annulé":"Programmé"})]},_e.id))})]})]})},Q.id))})]})]}),r.jsxs(Tt,{value:"antiparasites",className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Historique antiparasitaire"}),r.jsx(VN,{selectedClientId:ce==null?void 0:ce.id,selectedPetId:n.id,children:r.jsxs(R,{size:"sm",className:"gap-2",children:[r.jsx(Ue,{className:"h-4 w-4"}),"Nouveau Traitement"]})})]}),tn.length===0?r.jsx(te,{children:r.jsxs(ne,{className:"p-8 text-center text-muted-foreground",children:[r.jsx(cl,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"Aucun traitement antiparasitaire enregistré"}),r.jsx("p",{className:"text-sm",children:"Ajoutez des traitements depuis l'onglet Antiparasitaires"})]})}):r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[r.jsx(te,{children:r.jsx(ne,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-green-100 rounded-full",children:r.jsx(cl,{className:"h-4 w-4 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total"}),r.jsx("p",{className:"text-xl font-bold",children:tn.length})]})]})})}),r.jsx(te,{children:r.jsx(ne,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:r.jsx(Dn,{className:"h-4 w-4 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Complétés"}),r.jsx("p",{className:"text-xl font-bold",children:tn.filter(Q=>Q.status==="completed").length})]})]})})}),r.jsx(te,{children:r.jsx(ne,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-red-100 rounded-full",children:r.jsx(Tn,{className:"h-4 w-4 text-red-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"En retard"}),r.jsx("p",{className:"text-xl font-bold",children:tn.filter(Q=>Q.status==="overdue").length})]})]})})}),r.jsx(te,{children:r.jsx(ne,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-orange-100 rounded-full",children:r.jsx(Ye,{className:"h-4 w-4 text-orange-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Planifiés"}),r.jsx("p",{className:"text-xl font-bold",children:tn.filter(Q=>Q.status==="scheduled").length})]})]})})})]}),r.jsx("div",{className:"space-y-3",children:tn.map(Q=>r.jsx(te,{className:"hover:shadow-md transition-shadow",children:r.jsx(ne,{className:"p-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(cl,{className:"h-5 w-5 text-blue-600"}),r.jsx("h4",{className:"font-semibold text-lg",children:Q.productName}),r.jsx(Se,{className:Q.status==="completed"?"bg-green-100 text-green-800 border-green-200":Q.status==="overdue"?"bg-red-100 text-red-800 border-red-200":Q.status==="scheduled"?"bg-blue-100 text-blue-800 border-blue-200":"bg-orange-100 text-orange-800 border-orange-200",children:Q.status==="completed"?"Terminé":Q.status==="overdue"?"En retard":Q.status==="scheduled"?"Planifié":"Manqué"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600",children:"Date administrée"}),r.jsx("p",{className:"font-medium",children:new Date(Q.dateGiven).toLocaleDateString("fr-FR")})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600",children:"Prochain traitement"}),r.jsx("p",{className:"font-medium",children:Q.nextDueDate?new Date(Q.nextDueDate).toLocaleDateString("fr-FR"):"Non spécifié"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600",children:"Type"}),r.jsx("p",{className:"font-medium",children:Q.productType})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600",children:"Vétérinaire"}),r.jsx("p",{className:"font-medium",children:Q.veterinarian})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm mt-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600",children:"Parasites ciblés"}),r.jsx("p",{className:"font-medium",children:Q.targetParasites})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600",children:"Dosage"}),r.jsx("p",{className:"font-medium",children:Q.dosage||"Non spécifié"})]})]}),Q.batchNumber&&r.jsx("div",{className:"mt-3 text-sm",children:r.jsxs("p",{className:"text-gray-600",children:["Numéro de lot: ",r.jsx("span",{className:"font-medium",children:Q.batchNumber})]})}),Q.manufacturer&&r.jsx("div",{className:"mt-1 text-sm",children:r.jsxs("p",{className:"text-gray-600",children:["Fabricant: ",r.jsx("span",{className:"font-medium",children:Q.manufacturer})]})}),Q.weight&&r.jsx("div",{className:"mt-1 text-sm",children:r.jsxs("p",{className:"text-gray-600",children:["Poids de l'animal: ",r.jsx("span",{className:"font-medium",children:Q.weight})]})}),Q.cost&&r.jsx("div",{className:"mt-1 text-sm",children:r.jsxs("p",{className:"text-gray-600",children:["Coût: ",r.jsxs("span",{className:"font-medium",children:[Q.cost," €"]})]})}),Q.notes&&r.jsx("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg",children:r.jsxs("p",{className:"text-sm text-gray-700",children:[r.jsx("strong",{children:"Notes:"})," ",Q.notes]})}),Q.sideEffects&&r.jsx("div",{className:"mt-2 p-3 bg-red-50 rounded-lg border border-red-200",children:r.jsxs("p",{className:"text-sm text-red-700",children:[r.jsx("strong",{children:"⚠️ Effets indésirables:"})," ",Q.sideEffects]})})]}),r.jsx("div",{className:"flex flex-col gap-2 ml-4",children:Q.nextDueDate&&new Date(Q.nextDueDate)<=new Date&&Q.status!=="completed"&&r.jsxs(R,{size:"sm",className:"gap-2",children:[r.jsx(Ue,{className:"h-4 w-4"}),"Rappel"]})})]})})},Q.id))})]})]}),r.jsxs(Tt,{value:"pedigree",className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Pedigree Officiel"}),r.jsxs(R,{variant:"outline",size:"sm",onClick:()=>T(!k),className:"gap-2",children:[r.jsx(Ct,{className:"h-4 w-4"}),k?"Annuler":"Modifier"]})]}),r.jsx(te,{children:r.jsx(he,{children:r.jsxs(fe,{className:"text-lg flex items-center gap-2",children:[r.jsx(Ia,{id:"hasPedigree",checked:P.hasPedigree,onCheckedChange:Q=>A(_e=>({..._e,hasPedigree:Q})),disabled:!k}),r.jsx(D,{htmlFor:"hasPedigree",className:"text-lg",children:"Cet animal a un pedigree officiel"})]})})}),P.hasPedigree&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{className:"text-lg",children:"Informations sur l'animal"})}),r.jsx(ne,{className:"space-y-4",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx(D,{htmlFor:"officialName",children:"Nom officiel"}),r.jsx(K,{id:"officialName",value:P.officialName,onChange:Q=>A(_e=>({..._e,officialName:Q.target.value})),disabled:!k,placeholder:"Nom officiel du pedigree"})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"pedigreeNumber",children:"N° pedigree/LOF"}),r.jsx(K,{id:"pedigreeNumber",value:P.pedigreeNumber,onChange:Q=>A(_e=>({..._e,pedigreeNumber:Q.target.value})),disabled:!k,placeholder:"Numéro de pedigree"})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"breeder",children:"Éleveur"}),r.jsx(K,{id:"breeder",value:P.breeder,onChange:Q=>A(_e=>({..._e,breeder:Q.target.value})),disabled:!k,placeholder:"Nom de l'éleveur"})]})]})})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{className:"text-lg",children:"Parents"})}),r.jsx(ne,{className:"space-y-4",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-sm",children:"Père"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(K,{placeholder:"Nom du père",value:P.fatherName,onChange:Q=>A(_e=>({..._e,fatherName:Q.target.value})),disabled:!k}),r.jsx(K,{placeholder:"N° pedigree du père",value:P.fatherPedigree,onChange:Q=>A(_e=>({..._e,fatherPedigree:Q.target.value})),disabled:!k}),r.jsx(K,{placeholder:"Race du père",value:P.fatherBreed,onChange:Q=>A(_e=>({..._e,fatherBreed:Q.target.value})),disabled:!k}),r.jsx(Be,{placeholder:"Titres du père",value:P.fatherTitles,onChange:Q=>A(_e=>({..._e,fatherTitles:Q.target.value})),disabled:!k,rows:2})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-sm",children:"Mère"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(K,{placeholder:"Nom de la mère",value:P.motherName,onChange:Q=>A(_e=>({..._e,motherName:Q.target.value})),disabled:!k}),r.jsx(K,{placeholder:"N° pedigree de la mère",value:P.motherPedigree,onChange:Q=>A(_e=>({..._e,motherPedigree:Q.target.value})),disabled:!k}),r.jsx(K,{placeholder:"Race de la mère",value:P.motherBreed,onChange:Q=>A(_e=>({..._e,motherBreed:Q.target.value})),disabled:!k}),r.jsx(Be,{placeholder:"Titres de la mère",value:P.motherTitles,onChange:Q=>A(_e=>({..._e,motherTitles:Q.target.value})),disabled:!k,rows:2})]})]})]})})]})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{className:"text-lg",children:"Document officiel"})}),r.jsx(ne,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("input",{type:"file",accept:"image/*",onChange:async Q=>{var ln;const _e=(ln=Q.target.files)==null?void 0:ln[0];if(!_e)return;const ye=new FileReader;ye.onload=()=>A(Ar=>({...Ar,pedigreePhoto:ye.result})),ye.readAsDataURL(_e)},disabled:!k}),P.pedigreePhoto&&r.jsx("img",{src:P.pedigreePhoto,alt:"Document pedigree",className:"h-48 w-auto object-contain rounded border"})]})})]}),k&&r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(R,{variant:"outline",onClick:ue,children:"Annuler"}),r.jsx(R,{onClick:we,children:"Sauvegarder"})]})]}),!P.hasPedigree&&r.jsx(te,{children:r.jsxs(ne,{className:"p-8 text-center text-muted-foreground",children:[r.jsx(_g,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"Aucun pedigree officiel"}),r.jsx("p",{className:"text-sm",children:"Cochez la case ci-dessus pour ajouter les informations du pedigree"})]})})]}),r.jsxs(Tt,{value:"alerts",className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Alertes et rappels"}),Ln.length===0?r.jsx(te,{children:r.jsxs(ne,{className:"p-8 text-center text-muted-foreground",children:[r.jsx(Tn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"Aucune alerte active"}),r.jsx("p",{className:"text-sm",children:"Tout va bien !"})]})}):r.jsx("div",{className:"space-y-4",children:Ln.map((Q,_e)=>r.jsx(te,{className:Q.type==="danger"?"border-destructive":"border-accent",children:r.jsx(ne,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Tn,{className:`h-5 w-5 ${Q.type==="danger"?"text-destructive":"text-accent"}`}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-semibold",children:Q.title}),r.jsx("p",{className:"text-sm text-muted-foreground",children:Q.message})]}),r.jsx(R,{size:"sm",variant:"outline",children:Q.action})]})})},_e))})]})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[r.jsx(R,{variant:"outline",onClick:()=>t(!1),children:"Fermer"}),r.jsxs(R,{onClick:ha,className:"gap-2",children:[r.jsx(Au,{className:"h-4 w-4"}),"Imprimer Dossier"]})]})]})}),r.jsx(_d,{open:p,onOpenChange:v}),r.jsx(D3,{open:j,onOpenChange:Q=>{x(Q),Q||(z({clientId:0,petId:0,type:"",reason:""}),I(null))},prefillClientId:H.clientId.toString(),prefillPetId:H.petId.toString(),prefillType:H.type,prefillReason:H.reason,originalVaccinationId:$==null?void 0:$.id}),y&&r.jsx(BN,{selectedClientId:ce==null?void 0:ce.id,selectedPetId:n.id,children:r.jsx(R,{onClick:()=>N(!1),children:"Fermer"})}),r.jsx(tte,{open:E,onOpenChange:Q=>{q(Q),Q||re(null)},vaccination:Y}),w&&r.jsx(VN,{selectedClientId:ce==null?void 0:ce.id,selectedPetId:n.id,children:r.jsx(R,{onClick:()=>C(!1),children:"Fermer"})})]})}const SPe={healthy:"bg-secondary text-secondary-foreground",treatment:"bg-accent text-accent-foreground",urgent:"bg-destructive text-destructive-foreground"};function CPe(){const{pets:e,consultations:t,appointments:n,clients:s}=ct();xt();const[a,i]=b.useState(!1),[o,l]=b.useState(!1),[c,u]=b.useState(!1),[d,h]=b.useState(!1),[f,m]=b.useState(!1),[g,p]=b.useState(null),j=[...e].sort((A,B)=>!A.lastVisit&&!B.lastVisit?0:A.lastVisit?B.lastVisit?new Date(B.lastVisit).getTime()-new Date(A.lastVisit).getTime():-1:1).slice(0,5),x=e.length,y=e.filter(A=>A.status==="healthy").length;e.filter(A=>A.status==="treatment").length,e.filter(A=>A.status==="urgent").length;const N=e.filter(A=>{if(!A.lastVisit)return!1;const B=new Date(A.lastVisit),L=new Date().getMonth(),H=new Date().getFullYear();return B.getMonth()===L&&B.getFullYear()===H}).length,w=x>0?(t.length/x).toFixed(1):"0",C=A=>{p(A),l(!0)},S=A=>{p(A),u(!0)},_=A=>{p(A),h(!0)},k=A=>{p(A),m(!0)},T=A=>{const B=t.filter(z=>z.petId===A.id),L=n.filter(z=>z.petId===A.id),H=s.find(z=>z.id===A.ownerId);return{consultations:B.length,appointments:L.length,owner:(H==null?void 0:H.name)||A.owner,lastConsultation:B.length>0?Math.max(...B.map(z=>new Date(z.date).getTime())):A.lastVisit?new Date(A.lastVisit).getTime():0}},P=A=>{switch(A){case"healthy":return r.jsx(lt,{className:"h-3 w-3 text-green-600"});case"treatment":return r.jsx(bn,{className:"h-3 w-3 text-yellow-600"});case"urgent":return r.jsx(vn,{className:"h-3 w-3 text-red-600"});default:return r.jsx(lt,{className:"h-3 w-3"})}};return r.jsxs(r.Fragment,{children:[r.jsxs(te,{className:"card-hover",children:[r.jsxs(he,{className:"flex flex-row items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(fe,{className:"text-lg font-semibold",children:"Animaux Récents"}),r.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-muted-foreground",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(lt,{className:"h-3 w-3"}),r.jsxs("span",{children:[x," total"]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(na,{className:"h-3 w-3"}),r.jsxs("span",{children:[y," en bonne santé"]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(an,{className:"h-3 w-3"}),r.jsxs("span",{children:["+",N," ce mois"]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Yt,{className:"h-3 w-3"}),r.jsxs("span",{children:["Ø ",w," consultations"]})]})]})]}),r.jsxs(R,{size:"sm",className:"gap-2",onClick:()=>i(!0),children:[r.jsx(Ue,{className:"h-4 w-4"}),"Nouvel Animal"]})]}),r.jsx(ne,{className:"space-y-4",children:j.length===0?r.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[r.jsx(lt,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"Aucun animal enregistré"}),r.jsx("p",{className:"text-sm",children:"Commencez par créer votre premier animal"})]}):j.map(A=>{const B=T(A);return r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[r.jsx(Hn,{className:"h-12 w-12 flex-shrink-0",children:A.photo?r.jsx(Du,{src:A.photo,alt:A.name}):r.jsx(Gn,{className:"bg-primary-glow text-primary-foreground",children:r.jsx(lt,{className:"h-6 w-6"})})}),r.jsxs("div",{className:"space-y-1 flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h4",{className:"font-medium truncate",children:A.name}),r.jsxs(Se,{variant:"outline",className:SPe[A.status],children:[P(A.status),r.jsx("span",{className:"ml-1",children:A.status==="healthy"?"En bonne santé":A.status==="treatment"?"En traitement":"Urgent"})]})]}),r.jsx("div",{className:"text-sm text-muted-foreground",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"font-medium",children:A.type}),A.breed&&r.jsxs("span",{children:[" - ",A.breed]}),A.gender&&r.jsxs("span",{children:[" (",A.gender==="male"?"Mâle":"Femelle",")"]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Ye,{className:"h-3 w-3"}),r.jsx("span",{children:A.birthDate?ku(A.birthDate):"Âge inconnu"})]})]})}),r.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[r.jsxs("span",{children:["Propriétaire: ",B.owner]}),r.jsxs("span",{children:["Consultations: ",B.consultations]}),r.jsxs("span",{children:["RDV: ",B.appointments]}),A.lastVisit&&r.jsxs("span",{children:["Dernière visite: ",new Date(A.lastVisit).toLocaleDateString("fr-FR")]})]})]})]}),r.jsxs("div",{className:"flex gap-1 flex-shrink-0 ml-2",children:[r.jsx(R,{size:"sm",variant:"outline",onClick:()=>C(A),className:"h-8 px-2",children:r.jsx(wn,{className:"h-3 w-3"})}),r.jsx(R,{size:"sm",variant:"outline",onClick:()=>S(A),className:"h-8 px-2",children:r.jsx(Ct,{className:"h-3 w-3"})}),r.jsx(R,{size:"sm",variant:"outline",onClick:()=>_(A),className:"h-8 px-2 text-xs",children:"Dossier"}),r.jsx(R,{size:"sm",onClick:()=>k(A),className:"h-8 px-2 text-xs",children:r.jsx(bn,{className:"h-3 w-3"})})]})]},A.id)})})]}),r.jsx(Nm,{open:a,onOpenChange:i}),r.jsx(M3,{open:o,onOpenChange:l,pet:g,onEdit:()=>{l(!1),u(!0)},onShowDossier:()=>{l(!1),h(!0)}}),r.jsx(WZ,{open:c,onOpenChange:u,pet:g}),r.jsx(NPe,{open:d,onOpenChange:h,pet:g}),r.jsx(_d,{open:f,onOpenChange:m})]})}function _Pe({open:e,onOpenChange:t,consultation:n}){const{clients:s,pets:a,updateConsultation:i}=ct(),{toast:o}=et(),{settings:l}=xt(),[c,u]=b.useState({clientId:0,clientName:"",petId:0,petName:"",date:"",weight:"",temperature:"",symptoms:"",diagnosis:"",treatment:"",medications:"",followUp:"",cost:"",notes:""}),d=a.filter(p=>p.ownerId===c.clientId),h=new Date().toISOString().split("T")[0],f=p=>{u(v=>({...v,[p.target.id]:p.target.value}))},m=(p,v)=>{if(p==="clientId"){const j=parseInt(v),x=s.find(y=>y.id===j);u(y=>({...y,clientId:j,clientName:(x==null?void 0:x.name)||"",petId:0,petName:""}))}else if(p==="petId"){const j=parseInt(v),x=a.find(y=>y.id===j);u(y=>({...y,petId:j,petName:(x==null?void 0:x.name)||""}))}else u(j=>({...j,[p]:v}))},g=p=>{if(p.preventDefault(),!!n){if(!c.clientId||!c.petId){o({title:"Erreur",description:"Veuillez sélectionner un client et un animal.",variant:"destructive"});return}i(n.id,{clientId:c.clientId,clientName:c.clientName,petId:c.petId,petName:c.petName,date:c.date||h,weight:c.weight,temperature:c.temperature,symptoms:c.symptoms,diagnosis:c.diagnosis,treatment:c.treatment,medications:c.medications,followUp:c.followUp,cost:c.cost,notes:c.notes}),o({title:"Consultation modifiée",description:`Consultation pour ${c.petName} (${c.clientName}) a été modifiée et sauvegardée.`}),t(!1)}};return b.useEffect(()=>{e&&n&&u({clientId:n.clientId,clientName:n.clientName,petId:n.petId,petName:n.petName,date:n.date,weight:n.weight||"",temperature:n.temperature||"",symptoms:n.symptoms||"",diagnosis:n.diagnosis||"",treatment:n.treatment||"",medications:n.medications||"",followUp:n.followUp||"",cost:n.cost||"",notes:n.notes||""})},[e,n]),n?r.jsx(He,{open:e,onOpenChange:t,children:r.jsxs(We,{className:"sm:max-w-[700px] max-h-[80vh] overflow-y-auto",children:[r.jsxs(Ge,{children:[r.jsx(Ke,{children:"Modifier la Consultation"}),r.jsxs(yt,{children:["Modifiez les détails de la consultation pour ",n.petName,"."]})]}),r.jsxs("form",{onSubmit:g,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{children:"Client *"}),r.jsxs(ve,{value:c.clientId.toString(),onValueChange:p=>m("clientId",p),children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Sélectionner le client"})}),r.jsx(ge,{children:s.map(p=>r.jsx(M,{value:p.id.toString(),children:p.name},p.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{children:"Animal *"}),r.jsxs(ve,{value:c.petId.toString(),onValueChange:p=>m("petId",p),disabled:!c.clientId,children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:c.clientId?"Sélectionner l'animal":"Sélectionnez d'abord un client"})}),r.jsx(ge,{children:d.map(p=>r.jsxs(M,{value:p.id.toString(),children:[p.name," (",p.type,")"]},p.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"date",children:"Date *"}),r.jsx(K,{id:"date",type:"date",value:c.date||h,onChange:f,required:!0})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"weight",children:"Poids (kg)"}),r.jsx(K,{id:"weight",type:"number",step:"0.1",value:c.weight,onChange:f,placeholder:"ex: 25.5"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"temperature",children:"Température (°C)"}),r.jsx(K,{id:"temperature",type:"number",step:"0.1",value:c.temperature,onChange:f,placeholder:"ex: 38.5"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"symptoms",children:"Symptômes observés"}),r.jsx(Be,{id:"symptoms",value:c.symptoms,onChange:f,placeholder:"Décrivez les symptômes et observations...",rows:3})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"diagnosis",children:"Diagnostic"}),r.jsx(Be,{id:"diagnosis",value:c.diagnosis,onChange:f,placeholder:"Diagnostic posé...",rows:3})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"treatment",children:"Traitement administré"}),r.jsx(Be,{id:"treatment",value:c.treatment,onChange:f,placeholder:"Traitements, injections, interventions...",rows:3})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"medications",children:"Médicaments prescrits"}),r.jsx(Be,{id:"medications",value:c.medications,onChange:f,placeholder:"Liste des médicaments avec posologie...",rows:3})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"followUp",children:"Suivi recommandé"}),r.jsx(K,{id:"followUp",value:c.followUp,onChange:f,placeholder:"ex: Contrôle dans 1 semaine"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(D,{htmlFor:"cost",children:["Coût (",l.currency,")"]}),r.jsx(K,{id:"cost",type:"number",step:"0.01",value:c.cost,onChange:f,placeholder:"ex: 85.50"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"notes",children:"Notes additionnelles"}),r.jsx(Be,{id:"notes",value:c.notes,onChange:f,placeholder:"Notes diverses, recommandations...",rows:3})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(R,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),r.jsx(R,{type:"submit",children:"Modifier Consultation"})]})]})]})}):null}function W6({consultation:e}){const{settings:t}=xt(),n=()=>{const s=window.open("","_blank");if(!s)return;const a=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Consultation - ${e.petName}</title>
          <style>
            body {
              font-family: Arial, sans-serif;
              margin: 20px;
              line-height: 1.6;
            }
            .header {
              text-align: center;
              border-bottom: 2px solid #333;
              padding-bottom: 20px;
              margin-bottom: 30px;
            }
            .clinic-name {
              font-size: 24px;
              font-weight: bold;
              color: #2563eb;
            }
            .consultation-title {
              font-size: 20px;
              margin: 10px 0;
            }
            .info-grid {
              display: grid;
              grid-template-columns: 1fr 1fr;
              gap: 20px;
              margin-bottom: 30px;
            }
            .info-section {
              border: 1px solid #ddd;
              padding: 15px;
              border-radius: 5px;
            }
            .info-section h3 {
              margin: 0 0 10px 0;
              color: #333;
              border-bottom: 1px solid #eee;
              padding-bottom: 5px;
            }
            .info-item {
              margin: 5px 0;
            }
            .info-label {
              font-weight: bold;
              color: #666;
            }
            .medical-section {
              margin: 20px 0;
            }
            .medical-section h3 {
              color: #333;
              border-bottom: 1px solid #eee;
              padding-bottom: 5px;
            }
            .footer {
              margin-top: 40px;
              text-align: center;
              font-size: 12px;
              color: #666;
            }
            @media print {
              body { margin: 0; }
              .no-print { display: none; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            <div class="clinic-name">VetPro CRM</div>
            <div class="consultation-title">Rapport de Consultation</div>
            <div>Date: ${new Date(e.date).toLocaleDateString("fr-FR")}</div>
          </div>

          <div class="info-grid">
            <div class="info-section">
              <h3>Informations Client</h3>
              <div class="info-item">
                <span class="info-label">Nom:</span> ${e.clientName}
              </div>
            </div>
            <div class="info-section">
              <h3>Informations Animal</h3>
              <div class="info-item">
                <span class="info-label">Nom:</span> ${e.petName}
              </div>
              <div class="info-item">
                <span class="info-label">Poids:</span> ${e.weight||"Non renseigné"}
              </div>
              <div class="info-item">
                <span class="info-label">Température:</span> ${e.temperature||"Non renseigné"}
              </div>
            </div>
          </div>

          ${e.symptoms?`
            <div class="medical-section">
              <h3>Symptômes Observés</h3>
              <p>${e.symptoms}</p>
            </div>
          `:""}

          ${e.diagnosis?`
            <div class="medical-section">
              <h3>Diagnostic</h3>
              <p>${e.diagnosis}</p>
            </div>
          `:""}

          ${e.treatment?`
            <div class="medical-section">
              <h3>Traitement Administré</h3>
              <p>${e.treatment}</p>
            </div>
          `:""}

          ${e.medications?`
            <div class="medical-section">
              <h3>Médicaments Prescrits</h3>
              <p>${e.medications}</p>
            </div>
          `:""}

          ${e.notes?`
            <div class="medical-section">
              <h3>Notes Additionnelles</h3>
              <p>${e.notes}</p>
            </div>
          `:""}

          <div class="info-grid">
            <div class="info-section">
              <h3>Suivi Recommandé</h3>
              <p>${e.followUp||"Aucun suivi prévu"}</p>
            </div>
            <div class="info-section">
              <h3>Coût</h3>
              <p>${e.cost?e.cost+" "+t.currency:"Non renseigné"}</p>
            </div>
          </div>

          <div class="footer">
            <p>Consultation générée le ${new Date().toLocaleDateString("fr-FR")} à ${new Date().toLocaleTimeString("fr-FR")}</p>
            <p>VetPro CRM - Gestion Vétérinaire Complète</p>
          </div>
        </body>
      </html>
    `;s.document.write(a),s.document.close(),s.focus(),s.print(),s.close()};return r.jsxs(R,{size:"sm",variant:"outline",onClick:n,className:"gap-2",children:[r.jsx(Au,{className:"h-4 w-4"}),"Imprimer"]})}function PPe(){const{consultations:e,deleteConsultation:t,pets:n,clients:s}=ct(),{settings:a}=xt(),{toast:i}=et(),[o,l]=b.useState(!1),[c,u]=b.useState(!1),[d,h]=b.useState(null),m=[...e].sort((B,L)=>new Date(L.date).getTime()-new Date(B.date).getTime()).slice(0,5),g=e.length,p=e.filter(B=>B.date===new Date().toISOString().split("T")[0]).length,v=new Date().getMonth(),j=new Date().getFullYear(),x=e.filter(B=>{const L=new Date(B.date);return L.getMonth()===v&&L.getFullYear()===j}).length,y=e.filter(B=>{const L=new Date(B.date),H=v===0?11:v-1,z=v===0?j-1:j;return L.getMonth()===H&&L.getFullYear()===z}).length,N=y>0?Math.round((x-y)/y*100):x>0?100:0,w=x*50,C=y*50,S=C>0?Math.round((w-C)/C*100):w>0?100:0,_=B=>{h(B),u(!0)},k=B=>{confirm(`Êtes-vous sûr de vouloir supprimer la consultation pour ${B.petName} ?`)&&(t(B.id),i({title:"Consultation supprimée",description:`La consultation pour ${B.petName} a été supprimée.`}))},T=B=>{const L=new Date().toISOString().split("T")[0];return B.date===L?"bg-accent text-accent-foreground":B.date<L?"bg-secondary text-secondary-foreground":"bg-primary text-primary-foreground"},P=B=>{const L=new Date().toISOString().split("T")[0];return B.date===L?"Aujourd'hui":B.date<L?"Terminée":"À venir"},A=B=>{const L=n.find(z=>z.id===B.petId),H=s.find(z=>z.id===B.clientId);return{petType:(L==null?void 0:L.type)||"Inconnu",petBreed:(L==null?void 0:L.breed)||"Non spécifiée",clientPhone:(H==null?void 0:H.phone)||"Non spécifié",clientCity:(H==null?void 0:H.city)||"Non spécifiée"}};return r.jsxs(r.Fragment,{children:[r.jsxs(te,{className:"card-hover",children:[r.jsxs(he,{className:"flex flex-row items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(fe,{className:"text-lg font-semibold",children:"Consultations Récentes"}),r.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-muted-foreground",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(bn,{className:"h-3 w-3"}),r.jsxs("span",{children:[g," total"]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(na,{className:"h-3 w-3"}),r.jsxs("span",{children:[p," aujourd'hui"]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(an,{className:"h-3 w-3"}),r.jsxs("span",{children:[x," ce mois"]}),N!==0&&r.jsxs(Se,{variant:N>0?"default":"destructive",className:"text-xs",children:[N>0?"+":"",N,"%"]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(fd,{className:"h-3 w-3"}),r.jsxs("span",{children:["~",w,"€ ce mois"]}),S!==0&&r.jsxs(Se,{variant:S>0?"default":"destructive",className:"text-xs",children:[S>0?"+":"",S,"%"]})]})]})]}),r.jsxs(R,{size:"sm",className:"gap-2",onClick:()=>l(!0),children:[r.jsx(Ue,{className:"h-4 w-4"}),"Nouvelle Consultation"]})]}),r.jsx(ne,{className:"space-y-4",children:m.length===0?r.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[r.jsx(bn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"Aucune consultation enregistrée"}),r.jsx("p",{className:"text-sm",children:"Commencez par créer votre première consultation"})]}):m.map(B=>{const L=A(B);return r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(Hn,{className:"h-12 w-12",children:r.jsx(Gn,{className:"bg-primary-glow text-primary-foreground",children:r.jsx(bn,{className:"h-6 w-6"})})}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("h4",{className:"font-medium",children:["Consultation #",B.id]}),r.jsx(Se,{variant:"outline",className:T(B),children:P(B)}),B.cost&&r.jsxs(Se,{variant:"secondary",className:"text-xs",children:[B.cost," ",a.currency||"€"]})]}),r.jsx("div",{className:"text-sm text-muted-foreground",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(lt,{className:"h-3 w-3"}),r.jsxs("span",{children:[B.petName," (",L.petType,")"]}),L.petBreed!=="Non spécifiée"&&r.jsxs("span",{children:[" - ",L.petBreed]})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Rn,{className:"h-3 w-3"}),r.jsx("span",{children:B.clientName})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Ye,{className:"h-3 w-3"}),r.jsx("span",{children:new Date(B.date).toLocaleDateString("fr-FR")})]})]})}),r.jsx("div",{className:"text-xs text-muted-foreground",children:r.jsxs("div",{className:"flex items-center gap-4",children:[B.diagnosis&&r.jsxs("span",{children:["Diagnostic: ",B.diagnosis]}),B.weight&&r.jsxs("span",{children:["Poids: ",B.weight]}),B.temperature&&r.jsxs("span",{children:["Température: ",B.temperature,"°C"]}),B.photos&&B.photos.length>0&&r.jsxs("span",{children:["📷 ",B.photos.length," photo",B.photos.length>1?"s":""]})]})})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(R,{size:"sm",variant:"outline",onClick:()=>_(B),className:"gap-2",children:[r.jsx(Ct,{className:"h-4 w-4"}),"Modifier"]}),r.jsx(W6,{consultation:B}),r.jsxs(R,{size:"sm",variant:"destructive",onClick:()=>k(B),className:"gap-2",children:[r.jsx(xr,{className:"h-4 w-4"}),"Supprimer"]})]})]},B.id)})})]}),r.jsx(_d,{open:o,onOpenChange:l}),r.jsx(_Pe,{open:c,onOpenChange:u,consultation:d})]})}function APe(){const{appointments:e,stockItems:t,getUpcomingAppointments:n,getOverdueAppointments:s}=ct();xt();const a=new Date().toISOString().split("T")[0];n();const i=s(),o=e.filter(d=>d.date===a&&d.status!=="cancelled"&&d.status!=="completed"),l=t.filter(d=>d.currentStock<=d.minimumStock),c=t.filter(d=>d.currentStock===0),u=[];return c.length>0&&u.push({type:"critical",icon:vn,title:"Stock épuisé",message:`${c.length} produit(s) en rupture de stock`,count:c.length,color:"text-red-600",bgColor:"bg-red-50",borderColor:"border-red-200"}),l.length>0&&u.push({type:"warning",icon:Ea,title:"Stock faible",message:`${l.length} produit(s) en stock faible`,count:l.length,color:"text-orange-600",bgColor:"bg-orange-50",borderColor:"border-orange-200"}),i.length>0&&u.push({type:"warning",icon:Yt,title:"Rendez-vous en retard",message:`${i.length} rendez-vous en retard`,count:i.length,color:"text-orange-600",bgColor:"bg-orange-50",borderColor:"border-orange-200"}),o.length>0&&u.push({type:"info",icon:Ye,title:"Rendez-vous aujourd'hui",message:`${o.length} rendez-vous prévus aujourd'hui`,count:o.length,color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200"}),u.length===0?r.jsxs(te,{className:"card-hover",children:[r.jsx(he,{children:r.jsxs(fe,{className:"flex items-center gap-2",children:[r.jsx(an,{className:"h-5 w-5 text-green-600"}),"Aucune alerte"]})}),r.jsx(ne,{children:r.jsxs("div",{className:"text-center py-4",children:[r.jsx("div",{className:"text-green-600 text-4xl mb-2",children:"✅"}),r.jsx("p",{className:"text-muted-foreground",children:"Tout va bien ! Aucune alerte à signaler."})]})})]}):r.jsxs(te,{className:"card-hover",children:[r.jsx(he,{children:r.jsxs(fe,{className:"flex items-center gap-2",children:[r.jsx(vn,{className:"h-5 w-5 text-orange-600"}),"Alertes & Notifications",r.jsx(Se,{variant:"destructive",className:"ml-2",children:u.length})]})}),r.jsx(ne,{className:"space-y-3",children:u.map((d,h)=>r.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${d.borderColor} ${d.bgColor}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-full ${d.bgColor}`,children:r.jsx(d.icon,{className:`h-4 w-4 ${d.color}`})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-sm",children:d.title}),r.jsx("p",{className:"text-xs text-muted-foreground",children:d.message})]})]}),r.jsx(Se,{variant:d.type==="critical"?"destructive":d.type==="warning"?"secondary":"default",className:"text-xs",children:d.count})]},h))})]})}function kPe(){const{clients:e,pets:t,consultations:n,appointments:s,prescriptions:a,farms:i,farmInterventions:o}=ct();xt();const l=e.reduce((j,x)=>j+x.pets.length,0),c=l===t.length,u=e.length+t.length+n.length+s.length+a.length+i.length+o.length,d=c?100:Math.round((u-Math.abs(l-t.length))/u*100),h=new Date().toISOString().split("T")[0],f=n.filter(j=>j.date===h).length,m=s.filter(j=>j.date===h&&j.status!=="cancelled"&&j.status!=="completed").length,g=new Date().getMonth(),p=new Date().getFullYear(),v=n.filter(j=>{const x=new Date(j.date);return x.getMonth()===g&&x.getFullYear()===p}).length;return r.jsxs(te,{className:"mb-6",children:[r.jsx(he,{children:r.jsxs(fe,{className:"flex items-center gap-2",children:[c?r.jsx(Dn,{className:"h-5 w-5 text-green-600"}):r.jsx(Tn,{className:"h-5 w-5 text-yellow-600"}),"Statut de Synchronisation"]})}),r.jsxs(ne,{children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(La,{className:"h-4 w-4 text-blue-600"}),r.jsxs("span",{className:"text-sm",children:["Clients: ",e.length]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(lt,{className:"h-4 w-4 text-red-600"}),r.jsxs("span",{className:"text-sm",children:["Animaux: ",t.length]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(xr,{className:"h-4 w-4 text-green-600"}),r.jsxs("span",{className:"text-sm",children:["Consultations: ",n.length]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ye,{className:"h-4 w-4 text-purple-600"}),r.jsxs("span",{className:"text-sm",children:["RDV: ",s.length]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(an,{className:"h-4 w-4 text-blue-600"}),r.jsxs("span",{className:"text-sm",children:["Aujourd'hui: ",f+m]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Yt,{className:"h-4 w-4 text-green-600"}),r.jsxs("span",{className:"text-sm",children:["Ce mois: ",v]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Dn,{className:"h-4 w-4 text-orange-600"}),r.jsxs("span",{className:"text-sm",children:["Prescriptions: ",a.length]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(xr,{className:"h-4 w-4 text-indigo-600"}),r.jsxs("span",{className:"text-sm",children:["Fermes: ",i.length]})]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium",children:"Intégrité des données:"}),r.jsxs(Se,{variant:d>=95?"default":d>=80?"secondary":"destructive",children:[d,"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:`h-2 rounded-full ${d>=95?"bg-green-600":d>=80?"bg-yellow-600":"bg-red-600"}`,style:{width:`${d}%`}})}),r.jsx("div",{className:"flex items-center gap-2 text-sm",children:c?r.jsxs(r.Fragment,{children:[r.jsx(Dn,{className:"h-4 w-4 text-green-600"}),r.jsx("span",{className:"text-green-700",children:"Synchronisation OK"})]}):r.jsxs(r.Fragment,{children:[r.jsx(Tn,{className:"h-4 w-4 text-yellow-600"}),r.jsx("span",{className:"text-yellow-700",children:"Désynchronisation détectée"})]})}),!c&&r.jsxs("div",{className:"text-xs text-muted-foreground bg-yellow-50 p-2 rounded",children:[r.jsx("strong",{children:"Attention:"})," ",Math.abs(l-t.length)," animal(s) non synchronisé(s) entre clients et animaux"]})]})]})]})}function TPe(){const{clients:e,pets:t,consultations:n,appointments:s,prescriptions:a,farms:i,farmInterventions:o,resetData:l,exportData:c,importData:u}=ct(),{settings:d}=xt(),{toast:h}=et(),[f,m]=b.useState(!1),[g,p]=b.useState(!1),v=e.length+t.length+n.length+s.length+a.length+i.length+o.length,j=Math.round(v*.5),x=[...e.map(A=>A.lastVisit),...t.map(A=>A.lastVisit).filter(Boolean),...n.map(A=>A.date),...s.map(A=>A.date),...a.map(A=>A.date),...i.map(A=>A.lastVisit)].filter(Boolean),y=x.length>0?new Date(Math.max(...x.map(A=>new Date(A).getTime()))):new Date,N=new Date().toISOString().split("T")[0],w=new Date().getMonth(),C=new Date().getFullYear(),S=[...e.filter(A=>A.lastVisit===N),...t.filter(A=>A.lastVisit===N),...n.filter(A=>A.date===N),...s.filter(A=>A.date===N)].length,_=[...e.filter(A=>{const B=new Date(A.lastVisit);return B.getMonth()===w&&B.getFullYear()===C}),...t.filter(A=>{if(!A.lastVisit)return!1;const B=new Date(A.lastVisit);return B.getMonth()===w&&B.getFullYear()===C}),...n.filter(A=>{const B=new Date(A.date);return B.getMonth()===w&&B.getFullYear()===C}),...s.filter(A=>{const B=new Date(A.date);return B.getMonth()===w&&B.getFullYear()===C})].length,k=()=>{try{c(),h({title:"Données exportées",description:`Export de ${v} enregistrements réussi.`})}catch{h({title:"Erreur d'export",description:"Impossible d'exporter les données.",variant:"destructive"})}},T=A=>{var H;const B=(H=A.target.files)==null?void 0:H[0];if(!B)return;const L=new FileReader;L.onload=z=>{var $,I;try{const E=JSON.parse(($=z.target)==null?void 0:$.result);if(E.clients&&E.pets)u(E),h({title:"Données importées",description:`${E.clients.length} clients, ${E.pets.length} animaux et ${((I=E.consultations)==null?void 0:I.length)||0} consultations importés avec succès.`});else throw new Error("Format de fichier invalide")}catch{h({title:"Erreur d'import",description:"Le fichier sélectionné n'est pas valide.",variant:"destructive"})}},L.readAsText(B),p(!1)},P=()=>{try{l(),h({title:"Données réinitialisées",description:"Toutes les données ont été remises aux valeurs par défaut."}),m(!1)}catch{h({title:"Erreur de réinitialisation",description:"Impossible de réinitialiser les données.",variant:"destructive"})}};return r.jsxs(r.Fragment,{children:[r.jsxs(te,{children:[r.jsx(he,{children:r.jsxs(fe,{className:"flex items-center gap-2",children:[r.jsx(kq,{className:"h-5 w-5"}),"Gestion des Données"]})}),r.jsxs(ne,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium",children:"Total:"}),r.jsxs("span",{className:"text-muted-foreground",children:[v," enregistrements"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium",children:"Taille:"}),r.jsxs("span",{className:"text-muted-foreground",children:["~",j," KB"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium",children:"Dernière modif:"}),r.jsx("span",{className:"text-muted-foreground",children:y.toLocaleDateString("fr-FR")})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(an,{className:"h-4 w-4 text-green-600"}),r.jsx("span",{className:"font-medium",children:"Aujourd'hui:"}),r.jsx("span",{className:"text-muted-foreground",children:S})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Yt,{className:"h-4 w-4 text-blue-600"}),r.jsx("span",{className:"font-medium",children:"Ce mois:"}),r.jsx("span",{className:"text-muted-foreground",children:_})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Dn,{className:"h-4 w-4 text-green-600"}),r.jsx("span",{className:"font-medium",children:"Clinique:"}),r.jsx("span",{className:"text-muted-foreground",children:d.clinicName||"Non configurée"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 text-xs",children:[r.jsxs("div",{className:"text-center p-2 bg-blue-50 rounded",children:[r.jsx("div",{className:"font-medium text-blue-700",children:e.length}),r.jsx("div",{className:"text-blue-600",children:"Clients"})]}),r.jsxs("div",{className:"text-center p-2 bg-red-50 rounded",children:[r.jsx("div",{className:"font-medium text-red-700",children:t.length}),r.jsx("div",{className:"text-red-600",children:"Animaux"})]}),r.jsxs("div",{className:"text-center p-2 bg-green-50 rounded",children:[r.jsx("div",{className:"font-medium text-green-700",children:n.length}),r.jsx("div",{className:"text-green-600",children:"Consultations"})]}),r.jsxs("div",{className:"text-center p-2 bg-purple-50 rounded",children:[r.jsx("div",{className:"font-medium text-purple-700",children:s.length}),r.jsx("div",{className:"text-purple-600",children:"RDV"})]}),r.jsxs("div",{className:"text-center p-2 bg-orange-50 rounded",children:[r.jsx("div",{className:"font-medium text-orange-700",children:a.length}),r.jsx("div",{className:"text-orange-600",children:"Prescriptions"})]}),r.jsxs("div",{className:"text-center p-2 bg-indigo-50 rounded",children:[r.jsx("div",{className:"font-medium text-indigo-700",children:i.length}),r.jsx("div",{className:"text-indigo-600",children:"Fermes"})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(R,{size:"sm",variant:"outline",onClick:k,className:"gap-2",children:[r.jsx(vx,{className:"h-4 w-4"}),"Exporter"]}),r.jsxs(R,{size:"sm",variant:"outline",onClick:()=>p(!0),className:"gap-2",children:[r.jsx(gb,{className:"h-4 w-4"}),"Importer"]}),r.jsxs(R,{size:"sm",variant:"destructive",onClick:()=>m(!0),className:"gap-2",children:[r.jsx(nI,{className:"h-4 w-4"}),"Réinitialiser"]})]})]})]}),r.jsx(He,{open:f,onOpenChange:m,children:r.jsxs(We,{children:[r.jsxs(Ge,{children:[r.jsxs(Ke,{className:"flex items-center gap-2",children:[r.jsx(vn,{className:"h-5 w-5 text-red-600"}),"Réinitialiser toutes les données"]}),r.jsx(yt,{children:"Cette action supprimera définitivement toutes les données (clients, animaux, consultations, etc.) et les remettra aux valeurs par défaut. Cette action ne peut pas être annulée."})]}),r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsx(R,{variant:"outline",onClick:()=>m(!1),children:"Annuler"}),r.jsx(R,{variant:"destructive",onClick:P,children:"Réinitialiser"})]})]})}),r.jsx(He,{open:g,onOpenChange:p,children:r.jsxs(We,{children:[r.jsxs(Ge,{children:[r.jsxs(Ke,{className:"flex items-center gap-2",children:[r.jsx(gb,{className:"h-5 w-5"}),"Importer des données"]}),r.jsx(yt,{children:"Sélectionnez un fichier JSON exporté précédemment pour restaurer vos données."})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("input",{type:"file",accept:".json",onChange:T,className:"w-full"}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[r.jsx("strong",{children:"Note:"})," L'import remplacera toutes les données existantes."]})]}),r.jsx("div",{className:"flex gap-2 justify-end",children:r.jsx(R,{variant:"outline",onClick:()=>p(!1),children:"Annuler"})})]})})]})}function EPe(){const{clients:e,pets:t,consultations:n,appointments:s,vaccinations:a,antiparasitics:i,stockItems:o,getUpcomingAppointments:l,getOverdueAppointments:c,generateAccountingSummary:u}=ct(),{settings:d}=xt(),h=new Date().toISOString().split("T")[0],f=new Date().getMonth(),m=new Date().getFullYear(),g=n.filter(P=>P.date===h).length,p=s.filter(P=>P.date===h&&P.status!=="cancelled").length,j=l().filter(P=>{const A=new Date(P.date),B=new Date,L=new Date(B.getTime()+7*24*60*60*1e3);return A<=L}).length,x=c(),y=o.filter(P=>P.currentStock<=P.minimumStock).length,N=o.filter(P=>P.currentStock===0).length,w=new Date(m,f,1).toISOString().split("T")[0],C=new Date(m,f+1,0).toISOString().split("T")[0],S=u(`${m}-${String(f+1).padStart(2,"0")}`,w,C),_=e.filter(P=>{const A=new Date(P.createdAt);return A.getMonth()===f&&A.getFullYear()===m}).length,k=t.filter(P=>{const A=new Date(P.createdAt);return A.getMonth()===f&&A.getFullYear()===m}).length,T=[{title:"Consultations Aujourd'hui",value:g,icon:bn,color:"text-green-600",bgColor:"bg-green-50",trend:g>0?"up":"neutral",description:"Consultations réalisées"},{title:"RDV Aujourd'hui",value:p,icon:Ye,color:"text-blue-600",bgColor:"bg-blue-50",trend:p>0?"up":"neutral",description:"Rendez-vous programmés"},{title:"RDV Cette Semaine",value:j,icon:Yt,color:"text-purple-600",bgColor:"bg-purple-50",trend:j>0?"up":"neutral",description:"Rendez-vous à venir"},{title:"RDV En Retard",value:x.length,icon:vn,color:x.length>0?"text-red-600":"text-gray-600",bgColor:x.length>0?"bg-red-50":"bg-gray-50",trend:x.length>0?"down":"neutral",description:"Rendez-vous en retard"},{title:"Nouveaux Clients",value:_,icon:La,color:"text-emerald-600",bgColor:"bg-emerald-50",trend:_>0?"up":"neutral",description:"Ce mois"},{title:"Nouveaux Animaux",value:k,icon:lt,color:"text-pink-600",bgColor:"bg-pink-50",trend:k>0?"up":"neutral",description:"Ce mois"},{title:"Revenus du Mois",value:`${S.totalRevenue.toFixed(0)} ${d.currency||"€"}`,icon:fd,color:"text-green-600",bgColor:"bg-green-50",trend:S.totalRevenue>0?"up":"neutral",description:`Bénéfice: ${S.netIncome.toFixed(0)} ${d.currency||"€"}`},{title:"Stock Critique",value:y,icon:na,color:y>0?"text-orange-600":"text-green-600",bgColor:y>0?"bg-orange-50":"bg-green-50",trend:y>0?"down":"neutral",description:`${N} en rupture`}];return r.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:T.map((P,A)=>r.jsxs(te,{className:"card-hover",children:[r.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(fe,{className:"text-sm font-medium text-muted-foreground",children:P.title}),r.jsx("div",{className:`p-2 rounded-lg ${P.bgColor}`,children:r.jsx(P.icon,{className:`h-4 w-4 ${P.color}`})})]}),r.jsxs(ne,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"text-2xl font-bold",children:P.value}),r.jsxs("div",{className:"flex items-center gap-1",children:[P.trend==="up"&&r.jsxs(r.Fragment,{children:[r.jsx(an,{className:"h-4 w-4 text-green-600"}),r.jsxs(Se,{variant:"secondary",className:"text-xs bg-green-100 text-green-800",children:["+",Math.floor(Math.random()*20)+5,"%"]})]}),P.trend==="down"&&r.jsxs(r.Fragment,{children:[r.jsx($l,{className:"h-4 w-4 text-red-600"}),r.jsxs(Se,{variant:"secondary",className:"text-xs bg-red-100 text-red-800",children:["-",Math.floor(Math.random()*15)+3,"%"]})]}),P.trend==="neutral"&&r.jsx(Se,{variant:"outline",className:"text-xs",children:"0%"})]})]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:P.description})]})]},A))})}function OPe(){const{accountingEntries:e}=ct(),{settings:t}=xt(),s=(()=>{const a=[],i=new Date;for(let o=5;o>=0;o--){const l=new Date(i.getFullYear(),i.getMonth()-o,1);`${l.getFullYear()}${String(l.getMonth()+1).padStart(2,"0")}`;const c=new Date(l.getFullYear(),l.getMonth(),1).toISOString().split("T")[0],u=new Date(l.getFullYear(),l.getMonth()+1,0).toISOString().split("T")[0],d=e.filter(m=>{const g=new Date(m.date);return g>=new Date(c)&&g<=new Date(u)}),h=d.filter(m=>m.type==="revenue").reduce((m,g)=>m+g.amount,0),f=d.filter(m=>m.type==="expense").reduce((m,g)=>m+g.amount,0);a.push({month:l.toLocaleDateString("fr-FR",{month:"short"}),revenue:Math.round(h),expenses:Math.round(f),profit:Math.round(h-f)})}return a})();return r.jsxs(te,{children:[r.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(fe,{className:"text-base font-medium",children:"Évolution des Revenus"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(fd,{className:"h-4 w-4 text-muted-foreground"}),r.jsx(an,{className:"h-4 w-4 text-green-600"})]})]}),r.jsxs(ne,{children:[r.jsx("div",{className:"h-[300px] w-full",children:r.jsx(Ni,{width:"100%",height:"100%",children:r.jsxs(KC,{data:s,margin:{top:5,right:30,left:20,bottom:5},children:[r.jsx(Ql,{strokeDasharray:"3 3",className:"opacity-30"}),r.jsx(ia,{dataKey:"month",axisLine:!1,tickLine:!1,className:"text-xs"}),r.jsx(oa,{axisLine:!1,tickLine:!1,className:"text-xs",tickFormatter:a=>`${a}${t.currency||"€"}`}),r.jsx(qn,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:(a,i)=>[`${a} ${t.currency||"€"}`,i==="revenue"?"Revenus":i==="expenses"?"Dépenses":"Bénéfice"]}),r.jsx(As,{type:"monotone",dataKey:"revenue",stackId:"1",stroke:"#10b981",fill:"#10b981",fillOpacity:.6,strokeWidth:2}),r.jsx(As,{type:"monotone",dataKey:"expenses",stackId:"2",stroke:"#ef4444",fill:"#ef4444",fillOpacity:.6,strokeWidth:2})]})})}),r.jsxs("div",{className:"flex items-center justify-between mt-4 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),r.jsx("span",{className:"text-muted-foreground",children:"Revenus"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),r.jsx("span",{className:"text-muted-foreground",children:"Dépenses"})]})]})]})]})}function DPe(){const{consultations:e,appointments:t,vaccinations:n,antiparasitics:s}=ct(),i=(()=>{const o=[],l=new Date;for(let c=6;c>=0;c--){const u=new Date(l);u.setDate(u.getDate()-c);const d=u.toISOString().split("T")[0],h=e.filter(p=>p.date===d).length,f=t.filter(p=>p.date===d).length,m=n.filter(p=>p.dateGiven===d).length,g=s.filter(p=>p.dateGiven===d).length;o.push({day:u.toLocaleDateString("fr-FR",{weekday:"short"}),date:d,consultations:h,appointments:f,vaccinations:m,antiparasitics:g,total:h+f+m+g})}return o})();return r.jsxs(te,{children:[r.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(fe,{className:"text-base font-medium",children:"Activité des 7 derniers jours"}),r.jsx(na,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ne,{children:[r.jsx("div",{className:"h-[300px] w-full",children:r.jsx(Ni,{width:"100%",height:"100%",children:r.jsxs(q_e,{data:i,margin:{top:5,right:30,left:20,bottom:5},children:[r.jsx(Ql,{strokeDasharray:"3 3",className:"opacity-30"}),r.jsx(ia,{dataKey:"day",axisLine:!1,tickLine:!1,className:"text-xs"}),r.jsx(oa,{axisLine:!1,tickLine:!1,className:"text-xs"}),r.jsx(qn,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:(o,l)=>[o,l==="consultations"?"Consultations":l==="appointments"?"Rendez-vous":l==="vaccinations"?"Vaccinations":l==="antiparasitics"?"Antiparasitaires":"Total"]}),r.jsx(Pa,{dataKey:"consultations",fill:"#10b981",radius:[2,2,0,0]}),r.jsx(Pa,{dataKey:"appointments",fill:"#3b82f6",radius:[2,2,0,0]}),r.jsx(Pa,{dataKey:"vaccinations",fill:"#8b5cf6",radius:[2,2,0,0]}),r.jsx(Pa,{dataKey:"antiparasitics",fill:"#f59e0b",radius:[2,2,0,0]})]})})}),r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mt-4 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),r.jsx("span",{className:"text-muted-foreground",children:"Consultations"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),r.jsx("span",{className:"text-muted-foreground",children:"Rendez-vous"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),r.jsx("span",{className:"text-muted-foreground",children:"Vaccinations"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-amber-500 rounded-full"}),r.jsx("span",{className:"text-muted-foreground",children:"Antiparasitaires"})]})]})]})]})}function MPe(){const{stockItems:e}=ct(),t=F.useMemo(()=>{const a=e.length,i=e.filter(c=>c.currentStock<=c.minimumStock&&c.currentStock>0).length,o=e.filter(c=>c.currentStock===0).length;return[{name:"Stock Normal",value:a-i-o,color:"#10b981"},{name:"Stock Faible",value:i,color:"#f59e0b"},{name:"Rupture",value:o,color:"#ef4444"}].filter(c=>c.value>0)},[e]),n=e.reduce((a,i)=>a+i.currentStock*i.purchasePrice,0),s=e.sort((a,i)=>i.currentStock*i.purchasePrice-a.currentStock*a.purchasePrice).slice(0,5);return r.jsxs(te,{children:[r.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(fe,{className:"text-base font-medium",children:"État du Stock"}),r.jsx(Ea,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ne,{children:[r.jsx("div",{className:"h-[300px] w-full",children:r.jsx(Ni,{width:"100%",height:"100%",children:r.jsxs(GC,{children:[r.jsx(da,{data:t,cx:"50%",cy:"50%",labelLine:!1,label:({name:a,percent:i})=>`${a} ${(i*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:t.map((a,i)=>r.jsx($d,{fill:a.color},`cell-${i}`))}),r.jsx(qn,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:a=>[a,"Articles"]})]})})}),r.jsxs("div",{className:"mt-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Valeur totale du stock"}),r.jsxs("span",{className:"font-medium",children:[n.toFixed(0)," €"]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"text-sm font-medium",children:"Articles les plus précieux"}),s.map((a,i)=>r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsx("span",{className:"truncate flex-1",children:a.name}),r.jsxs("span",{className:"text-muted-foreground ml-2",children:[(a.currentStock*a.purchasePrice).toFixed(0)," €"]})]},a.id))]})]})]})]})}function IPe(){const{clients:e,pets:t}=ct(),s=(()=>{const a=[],i=new Date;for(let o=5;o>=0;o--){const l=new Date(i.getFullYear(),i.getMonth()-o,1),c=new Date(l.getFullYear(),l.getMonth(),1),u=new Date(l.getFullYear(),l.getMonth()+1,0),d=e.filter(g=>{const p=new Date(g.createdAt);return p>=c&&p<=u}).length,h=t.filter(g=>{const p=new Date(g.createdAt);return p>=c&&p<=u}).length,f=e.filter(g=>new Date(g.createdAt)<=u).length,m=t.filter(g=>new Date(g.createdAt)<=u).length;a.push({month:l.toLocaleDateString("fr-FR",{month:"short"}),newClients:d,newPets:h,totalClients:f,totalPets:m})}return a})();return r.jsxs(te,{children:[r.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(fe,{className:"text-base font-medium",children:"Croissance des Clients"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(La,{className:"h-4 w-4 text-muted-foreground"}),r.jsx(an,{className:"h-4 w-4 text-blue-600"})]})]}),r.jsxs(ne,{children:[r.jsx("div",{className:"h-[300px] w-full",children:r.jsx(Ni,{width:"100%",height:"100%",children:r.jsxs(KC,{data:s,margin:{top:5,right:30,left:20,bottom:5},children:[r.jsx(Ql,{strokeDasharray:"3 3",className:"opacity-30"}),r.jsx(ia,{dataKey:"month",axisLine:!1,tickLine:!1,className:"text-xs"}),r.jsx(oa,{axisLine:!1,tickLine:!1,className:"text-xs"}),r.jsx(qn,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:(a,i)=>[a,i==="newClients"?"Nouveaux Clients":i==="newPets"?"Nouveaux Animaux":i==="totalClients"?"Total Clients":"Total Animaux"]}),r.jsx(As,{type:"monotone",dataKey:"newClients",stackId:"1",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.6,strokeWidth:2}),r.jsx(As,{type:"monotone",dataKey:"newPets",stackId:"2",stroke:"#8b5cf6",fill:"#8b5cf6",fillOpacity:.6,strokeWidth:2})]})})}),r.jsxs("div",{className:"flex items-center justify-between mt-4 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),r.jsx("span",{className:"text-muted-foreground",children:"Nouveaux Clients"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),r.jsx("span",{className:"text-muted-foreground",children:"Nouveaux Animaux"})]})]})]})]})}function $Pe(){const{appointments:e}=ct(),t=F.useMemo(()=>{const c=e.reduce((h,f)=>(h[f.status]=(h[f.status]||0)+1,h),{}),u={scheduled:"Planifié",confirmed:"Confirmé",completed:"Terminé",cancelled:"Annulé","no-show":"Absent"},d={scheduled:"#3b82f6",confirmed:"#10b981",completed:"#6b7280",cancelled:"#ef4444","no-show":"#f59e0b"};return Object.entries(c).map(([h,f])=>({name:u[h]||h,value:f,color:d[h]||"#6b7280"}))},[e]),n=e.length,s=e.filter(c=>c.status==="completed").length,a=e.filter(c=>c.status==="scheduled"||c.status==="confirmed").length,i=e.filter(c=>c.status==="cancelled").length,o=n>0?s/n*100:0,l=n>0?i/n*100:0;return r.jsxs(te,{children:[r.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(fe,{className:"text-base font-medium",children:"Statuts des Rendez-vous"}),r.jsx(Ye,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ne,{children:[r.jsx("div",{className:"h-[300px] w-full",children:r.jsx(Ni,{width:"100%",height:"100%",children:r.jsxs(GC,{children:[r.jsx(da,{data:t,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,dataKey:"value",children:t.map((c,u)=>r.jsx($d,{fill:c.color},`cell-${u}`))}),r.jsx(qn,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:c=>[c,"Rendez-vous"]})]})})}),r.jsxs("div",{className:"mt-4 space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[o.toFixed(1),"%"]}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Taux de réussite"})]}),r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"text-2xl font-bold text-red-600",children:[l.toFixed(1),"%"]}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Taux d'annulation"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Dn,{className:"h-4 w-4 text-green-600"}),r.jsx("span",{children:"Terminés"})]}),r.jsx("span",{className:"font-medium",children:s})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Yt,{className:"h-4 w-4 text-blue-600"}),r.jsx("span",{children:"À venir"})]}),r.jsx("span",{className:"font-medium",children:a})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(cf,{className:"h-4 w-4 text-red-600"}),r.jsx("span",{children:"Annulés"})]}),r.jsx("span",{className:"font-medium",children:i})]})]})]})]})]})}function RPe(){const{consultations:e}=ct(),n=(()=>{const s=[],a=new Date;for(let i=11;i>=0;i--){const o=new Date(a.getFullYear(),a.getMonth()-i,1),l=new Date(o.getFullYear(),o.getMonth(),1),c=new Date(o.getFullYear(),o.getMonth()+1,0),u=e.filter(f=>{const m=new Date(f.date);return m>=l&&m<=c}),d=u.reduce((f,m)=>f+(m.cost||0),0),h=u.length>0?d/u.length:0;s.push({month:o.toLocaleDateString("fr-FR",{month:"short",year:"2-digit"}),consultations:u.length,revenue:Math.round(d),averageRevenue:Math.round(h)})}return s})();return r.jsxs(te,{children:[r.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(fe,{className:"text-base font-medium",children:"Tendances des Consultations"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(bn,{className:"h-4 w-4 text-muted-foreground"}),r.jsx(an,{className:"h-4 w-4 text-blue-600"})]})]}),r.jsxs(ne,{children:[r.jsx("div",{className:"h-[300px] w-full",children:r.jsx(Ni,{width:"100%",height:"100%",children:r.jsxs(KC,{data:n,margin:{top:5,right:30,left:20,bottom:5},children:[r.jsx(Ql,{strokeDasharray:"3 3",className:"opacity-30"}),r.jsx(ia,{dataKey:"month",axisLine:!1,tickLine:!1,className:"text-xs"}),r.jsx(oa,{axisLine:!1,tickLine:!1,className:"text-xs"}),r.jsx(qn,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:(s,a)=>[a==="consultations"?s:`${s} €`,a==="consultations"?"Consultations":a==="revenue"?"Revenus":"Revenu moyen"]}),r.jsx(As,{type:"monotone",dataKey:"consultations",stackId:"1",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.6,strokeWidth:2})]})})}),r.jsx("div",{className:"flex items-center justify-between mt-4 text-sm",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),r.jsx("span",{className:"text-muted-foreground",children:"Nombre de consultations"})]})})]})]})}function FPe(){const{pets:e}=ct(),t=F.useMemo(()=>{const o=e.reduce((c,u)=>{const d=u.species||"Autre";return c[d]=(c[d]||0)+1,c},{}),l=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#84cc16","#f97316"];return Object.entries(o).map(([c,u],d)=>({name:c,value:u,color:l[d%l.length]}))},[e]),n=e.length,s=t.length>0?t[0]:null,a=e.length>0?e.reduce((o,l)=>o+(l.age||0),0)/e.length:0,i=o=>{switch(o.toLowerCase()){case"chien":case"dog":return r.jsx(Tq,{className:"h-4 w-4"});case"chat":case"cat":return r.jsx(Sq,{className:"h-4 w-4"});case"poisson":case"fish":return r.jsx(Eq,{className:"h-4 w-4"});case"oiseau":case"bird":return r.jsx(wq,{className:"h-4 w-4"});default:return r.jsx(lt,{className:"h-4 w-4"})}};return r.jsxs(te,{children:[r.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(fe,{className:"text-base font-medium",children:"Répartition par Espèce"}),r.jsx(lt,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ne,{children:[r.jsx("div",{className:"h-[300px] w-full",children:r.jsx(Ni,{width:"100%",height:"100%",children:r.jsxs(GC,{children:[r.jsx(da,{data:t,cx:"50%",cy:"50%",labelLine:!1,label:({name:o,percent:l})=>`${o} ${(l*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:t.map((o,l)=>r.jsx($d,{fill:o.color},`cell-${l}`))}),r.jsx(qn,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:o=>[o,"Animaux"]})]})})}),r.jsxs("div",{className:"mt-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Total d'animaux"}),r.jsx("span",{className:"font-medium",children:n})]}),s&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Espèce la plus commune"}),r.jsxs("div",{className:"flex items-center gap-2",children:[i(s.name),r.jsx("span",{className:"font-medium",children:s.name})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Âge moyen"}),r.jsxs("span",{className:"font-medium",children:[a.toFixed(1)," ans"]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"text-sm font-medium",children:"Répartition détaillée"}),t.slice(0,5).map((o,l)=>r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[i(o.name),r.jsx("span",{children:o.name})]}),r.jsxs("span",{className:"text-muted-foreground",children:[o.value," (",(o.value/n*100).toFixed(1),"%)"]})]},l))]})]})]})]})}const LPe=()=>r.jsxs("div",{className:"container mx-auto px-2 sm:px-4 lg:px-6 py-4 sm:py-6 lg:py-8 space-y-4 sm:space-y-6 lg:space-y-8",children:[r.jsx(BZ,{}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 sm:mb-6",children:"KPI en Temps Réel"}),r.jsx(EPe,{})]}),r.jsxs("div",{className:"grid gap-4 sm:gap-6 lg:grid-cols-3",children:[r.jsx(kPe,{}),r.jsx(TPe,{}),r.jsx(APe,{})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 sm:mb-6",children:"Vue d'ensemble"}),r.jsx(VZ,{})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 sm:mb-6",children:"Analyses et Tendances"}),r.jsxs("div",{className:"grid gap-4 sm:gap-6 lg:grid-cols-2",children:[r.jsx(cw,{children:r.jsx(OPe,{})}),r.jsx(DPe,{})]})]}),r.jsxs("div",{className:"grid gap-4 sm:gap-6 lg:grid-cols-3",children:[r.jsx(MPe,{}),r.jsx(IPe,{}),r.jsx($Pe,{})]}),r.jsxs("div",{className:"grid gap-4 sm:gap-6 lg:grid-cols-2",children:[r.jsx(RPe,{}),r.jsx(FPe,{})]}),r.jsxs("div",{className:"grid gap-4 sm:gap-6 lg:grid-cols-2",children:[r.jsx(UZ,{}),r.jsx(CPe,{})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 sm:mb-6",children:"Activité Récente"}),r.jsx(PPe,{})]}),r.jsx(cw,{children:r.jsx("section",{children:r.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-4 sm:mb-6",children:"Admin Dashboard"})})})]}),cc=e=>{const{settings:t}=xt();return{currentView:t.displayPreferences[e],isTableView:t.displayPreferences[e]==="table",isCardsView:t.displayPreferences[e]==="cards"}},BPe=(e,t)=>{const n=t.filter(i=>i.client_id===e.id),s=Math.abs(e.id.split("").reduce((i,o)=>(i=(i<<5)-i+o.charCodeAt(0),i&i),0)),a=n.map(i=>({id:Math.abs(i.id.split("").reduce((l,c)=>(l=(l<<5)-l+c.charCodeAt(0),l&l),0)),name:i.name,type:i.species,breed:i.breed||""}));return{id:s,name:`${e.first_name} ${e.last_name}`,firstName:e.first_name,lastName:e.last_name,email:e.email||"",phone:e.phone||e.mobile_phone||"",address:e.address||"",city:e.city,pets:a,lastVisit:new Date(e.updated_at).toLocaleDateString("fr-FR"),totalVisits:0,dbId:e.id}},VPe=()=>{const{data:e=[],isLoading:t}=us(),{data:n=[],isLoading:s}=ds(),a=sZ(),{toast:i}=et(),o=e.map(P=>BPe(P,n)),{currentView:l}=cc("clients"),[c,u]=b.useState(""),[d,h]=b.useState(l),[f,m]=b.useState(!1),[g,p]=b.useState(null),[v,j]=b.useState(!1),[x,y]=b.useState(!1),[N,w]=b.useState({first_name:"",last_name:"",email:"",phone:"",mobile_phone:"",address:"",city:"Rabat",postal_code:"",country:"Maroc",notes:"",client_type:"particulier"}),C=o.filter(P=>P.name.toLowerCase().includes(c.toLowerCase())||P.email.toLowerCase().includes(c.toLowerCase())||P.city&&P.city.toLowerCase().includes(c.toLowerCase())),S=P=>{p(P),j(!0)},_=P=>{p(P),w({first_name:P.firstName,last_name:P.lastName,email:P.email,phone:P.phone,mobile_phone:"",address:P.address,city:P.city,postal_code:"",country:"Maroc",notes:"",client_type:"particulier"}),y(!0)},k=()=>{g&&w({first_name:g.firstName,last_name:g.lastName,email:g.email,phone:g.phone,mobile_phone:"",address:g.address,city:g.city,postal_code:"",country:"Maroc",notes:"",client_type:"particulier"}),j(!1),y(!0)},T=async P=>{if(P.preventDefault(),!g||!N.first_name||!N.last_name){i({title:"Erreur",description:"Le prénom et le nom sont obligatoires",variant:"destructive"});return}try{await a.mutateAsync({id:g.dbId,data:N}),i({title:"Client modifié",description:`${N.first_name} ${N.last_name} a été modifié avec succès`}),y(!1),p(null)}catch(A){i({title:"Erreur",description:A instanceof Error?A.message:"Erreur lors de la modification du client",variant:"destructive"})}};return t||s?r.jsx("div",{className:"container mx-auto px-6 py-8",children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Chargement des clients..."})]})})}):r.jsxs("div",{className:"container mx-auto px-6 py-8 space-y-8",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Gestion des Clients"}),r.jsx("p",{className:"text-muted-foreground mt-2",children:"Gérez tous vos clients et leurs informations"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(R,{size:"sm",variant:d==="cards"?"default":"outline",onClick:()=>h("cards"),className:"gap-2",children:[r.jsx(_o,{className:"h-4 w-4"}),"Cartes"]}),r.jsxs(R,{size:"sm",variant:d==="table"?"default":"outline",onClick:()=>h("table"),className:"gap-2",children:[r.jsx(ji,{className:"h-4 w-4"}),"Tableau"]}),r.jsxs(R,{className:"gap-2 medical-glow",onClick:()=>m(!0),children:[r.jsx(Ue,{className:"h-4 w-4"}),"Nouveau Client"]})]})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsxs(fe,{className:"flex items-center gap-2",children:[r.jsx(Do,{className:"h-5 w-5"}),"Rechercher un client"]})}),r.jsx(ne,{children:r.jsx(K,{placeholder:"Rechercher par nom, email ou ville...",value:c,onChange:P=>u(P.target.value),className:"max-w-md"})})]}),d==="cards"?r.jsx("div",{className:"grid gap-6",children:C.map(P=>r.jsx(te,{className:"card-hover",children:r.jsx(ne,{className:"p-6",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[r.jsx(Hn,{className:"h-16 w-16",children:r.jsx(Gn,{className:"bg-primary text-primary-foreground text-lg",children:P.name.split(" ").map(A=>A[0]).join("")})}),r.jsxs("div",{className:"space-y-3 flex-1",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-semibold",children:P.name}),r.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-muted-foreground",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(md,{className:"h-3 w-3"}),P.email]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Pu,{className:"h-3 w-3"}),P.phone]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(ec,{className:"h-3 w-3"}),P.address]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[r.jsx(lt,{className:"h-4 w-4 text-primary"}),"Animaux (",P.pets.length,")"]}),r.jsx("div",{className:"flex gap-2 flex-wrap",children:P.pets.length>0?P.pets.map((A,B)=>r.jsxs(Se,{variant:"secondary",className:"gap-1",children:[A.name," - ",A.type," ",A.breed&&`(${A.breed})`]},A.id||B)):r.jsx("span",{className:"text-sm text-muted-foreground",children:"Aucun animal enregistré"})})]}),r.jsxs("div",{className:"flex gap-6 text-sm",children:[r.jsxs("span",{children:[r.jsx("strong",{children:"Dernière visite:"})," ",P.lastVisit]}),r.jsxs("span",{children:[r.jsx("strong",{children:"Total visites:"})," ",P.totalVisits]})]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(R,{size:"sm",variant:"outline",className:"gap-2",onClick:()=>S(P),children:[r.jsx(wn,{className:"h-4 w-4"}),"Voir"]}),r.jsxs(R,{size:"sm",variant:"outline",className:"gap-2",onClick:()=>_(P),children:[r.jsx(Ct,{className:"h-4 w-4"}),"Modifier"]})]})]})})},P.id))}):r.jsx(te,{children:r.jsx(ne,{className:"p-0",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"border-b",children:r.jsxs("tr",{className:"text-left",children:[r.jsx("th",{className:"p-4 font-medium",children:"Client"}),r.jsx("th",{className:"p-4 font-medium",children:"Contact"}),r.jsx("th",{className:"p-4 font-medium",children:"Animaux"}),r.jsx("th",{className:"p-4 font-medium",children:"Dernière visite"}),r.jsx("th",{className:"p-4 font-medium",children:"Total visites"}),r.jsx("th",{className:"p-4 font-medium",children:"Actions"})]})}),r.jsx("tbody",{children:C.map(P=>r.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[r.jsx("td",{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Hn,{className:"h-10 w-10",children:r.jsx(Gn,{className:"bg-primary text-primary-foreground text-sm",children:P.name.split(" ").map(A=>A[0]).join("")})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:P.name}),r.jsx("div",{className:"text-sm text-muted-foreground",children:P.address})]})]})}),r.jsx("td",{className:"p-4",children:r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"text-sm",children:P.email}),r.jsx("div",{className:"text-sm text-muted-foreground",children:P.phone})]})}),r.jsx("td",{className:"p-4",children:r.jsx("div",{className:"flex gap-1 flex-wrap",children:P.pets.length>0?P.pets.map((A,B)=>r.jsx(Se,{variant:"secondary",className:"text-xs",children:A.name},A.id||B)):r.jsx("span",{className:"text-xs text-muted-foreground",children:"Aucun"})})}),r.jsx("td",{className:"p-4",children:P.lastVisit}),r.jsx("td",{className:"p-4",children:P.totalVisits}),r.jsx("td",{className:"p-4",children:r.jsxs("div",{className:"flex gap-1",children:[r.jsx(R,{size:"sm",variant:"outline",onClick:()=>S(P),children:r.jsx(wn,{className:"h-4 w-4"})}),r.jsx(R,{size:"sm",variant:"outline",onClick:()=>_(P),children:r.jsx(Ct,{className:"h-4 w-4"})})]})})]},P.id))})]})})})}),r.jsx(wm,{open:f,onOpenChange:m}),g&&v&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:r.jsxs(te,{className:"w-full max-w-2xl mx-4",children:[r.jsx(he,{children:r.jsxs(fe,{className:"flex items-center justify-between",children:["Profil Client - ",g.name,r.jsx(R,{variant:"ghost",size:"sm",onClick:()=>j(!1),children:"✕"})]})}),r.jsxs(ne,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Nom complet"}),r.jsx("p",{children:g.name})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Email"}),r.jsx("p",{children:g.email})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Téléphone"}),r.jsx("p",{children:g.phone})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Ville"}),r.jsx("p",{children:g.city})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Adresse"}),r.jsx("p",{children:g.address})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-medium",children:["Animaux (",g.pets.length,")"]}),r.jsx("div",{className:"flex gap-2 flex-wrap mt-2",children:g.pets.map((P,A)=>r.jsxs(Se,{variant:"secondary",children:[P.name," - ",P.type," ",P.breed&&`(${P.breed})`]},P.id||A))})]}),r.jsxs("div",{className:"flex gap-2 pt-4",children:[r.jsx(R,{onClick:()=>k(),children:"Modifier"}),r.jsx(R,{variant:"outline",onClick:()=>j(!1),children:"Fermer"})]})]})]})}),g&&x&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:r.jsxs(te,{className:"w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[r.jsx(he,{children:r.jsxs(fe,{className:"flex items-center justify-between",children:["Modifier Client - ",g.name,r.jsx(R,{variant:"ghost",size:"sm",onClick:()=>y(!1),children:"✕"})]})}),r.jsx(ne,{children:r.jsxs("form",{onSubmit:T,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"edit_first_name",children:"Prénom *"}),r.jsx(K,{id:"edit_first_name",value:N.first_name,onChange:P=>w(A=>({...A,first_name:P.target.value})),placeholder:"Prénom du client",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"edit_last_name",children:"Nom *"}),r.jsx(K,{id:"edit_last_name",value:N.last_name,onChange:P=>w(A=>({...A,last_name:P.target.value})),placeholder:"Nom du client",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"edit_email",children:"Email"}),r.jsx(K,{id:"edit_email",type:"email",value:N.email||"",onChange:P=>w(A=>({...A,email:P.target.value})),placeholder:"email@exemple.com"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"edit_phone",children:"Téléphone"}),r.jsx(K,{id:"edit_phone",value:N.phone||"",onChange:P=>w(A=>({...A,phone:P.target.value})),placeholder:"06 12 34 56 78"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"edit_mobile_phone",children:"Téléphone mobile"}),r.jsx(K,{id:"edit_mobile_phone",value:N.mobile_phone||"",onChange:P=>w(A=>({...A,mobile_phone:P.target.value})),placeholder:"06 12 34 56 78"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"edit_city",children:"Ville"}),r.jsx(K,{id:"edit_city",value:N.city||"Rabat",onChange:P=>w(A=>({...A,city:P.target.value})),placeholder:"Ville"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"edit_address",children:"Adresse"}),r.jsx(K,{id:"edit_address",value:N.address||"",onChange:P=>w(A=>({...A,address:P.target.value})),placeholder:"Adresse complète"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"edit_postal_code",children:"Code postal"}),r.jsx(K,{id:"edit_postal_code",value:N.postal_code||"",onChange:P=>w(A=>({...A,postal_code:P.target.value})),placeholder:"10000"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"edit_client_type",children:"Type de client"}),r.jsxs(ve,{value:N.client_type||"particulier",onValueChange:P=>w(A=>({...A,client_type:P})),children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Type de client"})}),r.jsxs(ge,{children:[r.jsx(M,{value:"particulier",children:"Particulier"}),r.jsx(M,{value:"eleveur",children:"Éleveur"}),r.jsx(M,{value:"ferme",children:"Ferme"})]})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"edit_notes",children:"Notes"}),r.jsx(Be,{id:"edit_notes",value:N.notes||"",onChange:P=>w(A=>({...A,notes:P.target.value})),placeholder:"Notes supplémentaires...",rows:3})]}),r.jsxs("div",{className:"flex gap-2 pt-4",children:[r.jsx(R,{type:"submit",disabled:a.isPending,className:"flex-1",children:a.isPending?r.jsxs(r.Fragment,{children:[r.jsx(Nr,{className:"h-4 w-4 animate-spin mr-2"}),"Modification..."]}):"Enregistrer"}),r.jsx(R,{type:"button",variant:"outline",onClick:()=>y(!1),disabled:a.isPending,className:"flex-1",children:"Annuler"})]})]})})]})})]})},zPe=()=>r.jsx(VPe,{});function qPe({open:e,onOpenChange:t,pet:n}){const[s,a]=b.useState("overview");if(!n)return null;const i=n.birthDate?ku(n.birthDate):"Non renseigné",o=n.weight?`${n.weight} kg`:"Non renseigné";return r.jsx(He,{open:e,onOpenChange:t,children:r.jsxs(We,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsx(Ge,{children:r.jsxs(Ke,{className:"flex items-center gap-2",children:[r.jsx(xr,{className:"h-5 w-5"}),"Dossier Médical - ",n.name," (Propriétaire: ",n.owner,")"]})}),r.jsxs(Ai,{value:s,onValueChange:a,className:"w-full",children:[r.jsxs(qa,{className:"grid w-full grid-cols-6",children:[r.jsxs(kt,{value:"overview",className:"flex items-center gap-1",children:[r.jsx(na,{className:"h-4 w-4"}),"Vue d'ensemble"]}),r.jsxs(kt,{value:"historique",className:"flex items-center gap-1",children:[r.jsx(Ye,{className:"h-4 w-4"}),"Historique"]}),r.jsxs(kt,{value:"prescriptions",className:"flex items-center gap-1",children:[r.jsx(xr,{className:"h-4 w-4"}),"Prescriptions"]}),r.jsxs(kt,{value:"vaccinations",className:"flex items-center gap-1",children:[r.jsx(Mr,{className:"h-4 w-4"}),"Vaccinations"]}),r.jsxs(kt,{value:"antiparasites",className:"flex items-center gap-1",children:[r.jsx(Tn,{className:"h-4 w-4"}),"Antiparasites"]}),r.jsxs(kt,{value:"pedigree",className:"flex items-center gap-1",children:[r.jsx(_g,{className:"h-4 w-4"}),"Pedigree"]})]}),r.jsxs(Tt,{value:"overview",className:"space-y-6",children:[r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{children:"Informations générales"})}),r.jsx(ne,{children:r.jsxs("div",{className:"flex items-start gap-6",children:[r.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[r.jsx(Hn,{className:"h-32 w-32",children:n.photo?r.jsx(Du,{src:n.photo,alt:n.name}):r.jsx(Gn,{className:"bg-primary-glow text-primary-foreground",children:r.jsx(lt,{className:"h-16 w-16"})})}),r.jsxs(R,{variant:"outline",size:"sm",className:"gap-2",children:[r.jsx(_u,{className:"h-4 w-4"}),"Ajouter photo"]})]}),r.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-lg",children:n.name}),r.jsxs("div",{className:"space-y-2 mt-4",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Type:"})," ",n.type]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Race:"})," ",n.breed||"Non renseignée"]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Sexe:"})," ",n.gender==="male"?"Mâle":n.gender==="female"?"Femelle":"Inconnu"]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Âge:"})," ",i]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Date de naissance:"})," ",n.birthDate||"Non renseignée"]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Couleur:"})," ",n.color||"Non renseignée"]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Poids actuel:"})," ",o]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"N° puce:"})," ",n.microchip||"Non renseigné"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium",children:"Statut de santé:"}),r.jsx(Se,{variant:n.status==="healthy"?"default":n.status==="treatment"?"secondary":"destructive",children:n.status==="healthy"?"En bonne santé":n.status==="treatment"?"En traitement":"Urgent"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Rn,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"font-medium",children:"Propriétaire:"})," ",n.owner]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Dernière visite:"})," ",n.lastVisit||"Aucune"]})]})]})]})})]}),r.jsxs(te,{children:[r.jsxs(he,{className:"flex flex-row items-center justify-between",children:[r.jsx(fe,{children:"Galerie photos"}),r.jsxs(R,{size:"sm",className:"gap-2",children:[r.jsx(Ue,{className:"h-4 w-4"}),"Ajouter une photo"]})]}),r.jsx(ne,{children:r.jsxs("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-8 text-center",children:[r.jsx(_u,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Aucune photo disponible"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Ajoutez des photos de l'animal pour enrichir son dossier"})]})})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsx(te,{children:r.jsx(ne,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ag,{className:"h-5 w-5 text-blue-500"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Poids actuel"}),r.jsx("p",{className:"text-lg font-bold",children:o}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"-28.2kg"})]})]})})}),r.jsx(te,{children:r.jsx(ne,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(uf,{className:"h-5 w-5 text-red-500"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Température"}),r.jsx("p",{className:"text-lg font-bold",children:"38.5°C"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Moy: 38.5°C"})]})]})})}),r.jsx(te,{children:r.jsx(ne,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(bn,{className:"h-5 w-5 text-green-500"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Consultations"}),r.jsx("p",{className:"text-lg font-bold",children:"1"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Dernière: 15/01/2024"})]})]})})}),r.jsx(te,{children:r.jsx(ne,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Tn,{className:"h-5 w-5 text-yellow-500"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Alertes"}),r.jsx("p",{className:"text-lg font-bold",children:"1"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"À traiter"})]})]})})})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsxs(fe,{className:"flex items-center gap-2",children:[r.jsx(Ye,{className:"h-5 w-5"}),"Prochain suivi recommandé"]})}),r.jsx(ne,{children:r.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/20 p-4 rounded-lg",children:[r.jsx("p",{className:"font-medium",children:"Contrôle dans 3 an"}),r.jsxs(R,{size:"sm",className:"mt-2 gap-2",children:[r.jsx(Ue,{className:"h-4 w-4"}),"Planifier"]})]})})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{className:"text-red-600",children:"Alertes importantes"})}),r.jsxs(ne,{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-start gap-3 p-3 bg-red-50 dark:bg-red-950/20 rounded-lg",children:[r.jsx(Tn,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium",children:"Contrôle de routine recommandé"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Dernière consultation il y a 20 mois"})]}),r.jsx(R,{size:"sm",variant:"outline",children:"Planifier consultation"})]}),r.jsxs("div",{className:"flex items-start gap-3 p-3 bg-red-50 dark:bg-red-950/20 rounded-lg",children:[r.jsx(Tn,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium",children:"Vaccination en retard"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"DHPP - 247 jour(s) de retard"})]}),r.jsx(R,{size:"sm",variant:"outline",children:"Planifier vaccination"})]}),r.jsxs("div",{className:"flex items-start gap-3 p-3 bg-red-50 dark:bg-red-950/20 rounded-lg",children:[r.jsx(Tn,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium",children:"Vaccination en retard"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Lyme - 512 jour(s) de retard"})]}),r.jsx(R,{size:"sm",variant:"outline",children:"Planifier vaccination"})]})]})]})]}),r.jsx(Tt,{value:"historique",className:"space-y-4",children:r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{children:"Historique médical"})}),r.jsx(ne,{children:r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Ye,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Pas assez de données pour afficher les tendances"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Ajoutez plus de consultations avec poids et température"})]})})]})}),r.jsx(Tt,{value:"prescriptions",className:"space-y-4",children:r.jsxs(te,{children:[r.jsxs(he,{className:"flex flex-row items-center justify-between",children:[r.jsx(fe,{children:"Prescriptions"}),r.jsxs(R,{size:"sm",className:"gap-2",children:[r.jsx(Ue,{className:"h-4 w-4"}),"Nouvelle prescription"]})]}),r.jsx(ne,{children:r.jsxs("div",{className:"text-center py-8",children:[r.jsx(xr,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Aucune prescription disponible"})]})})]})}),r.jsx(Tt,{value:"vaccinations",className:"space-y-4",children:r.jsxs(te,{children:[r.jsxs(he,{className:"flex flex-row items-center justify-between",children:[r.jsx(fe,{children:"Vaccinations"}),r.jsxs(R,{size:"sm",className:"gap-2",children:[r.jsx(Ue,{className:"h-4 w-4"}),"Nouvelle vaccination"]})]}),r.jsx(ne,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm font-medium",children:[r.jsx("div",{children:"Rage"}),r.jsx("div",{children:"DHPP"}),r.jsx("div",{children:"Lyme"})]}),r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Mr,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Aucune vaccination enregistrée"})]})]})})]})}),r.jsx(Tt,{value:"antiparasites",className:"space-y-4",children:r.jsxs(te,{children:[r.jsxs(he,{className:"flex flex-row items-center justify-between",children:[r.jsx(fe,{children:"Antiparasitaires"}),r.jsxs(R,{size:"sm",className:"gap-2",children:[r.jsx(Ue,{className:"h-4 w-4"}),"Nouveau traitement"]})]}),r.jsx(ne,{children:r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Tn,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Aucun traitement antiparasitaire enregistré"})]})})]})}),r.jsx(Tt,{value:"pedigree",className:"space-y-4",children:r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{children:"Informations de pedigree"})}),r.jsx(ne,{children:r.jsxs("div",{className:"text-center py-8",children:[r.jsx(_g,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Aucune information de pedigree disponible"})]})})]})})]}),r.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[r.jsx("div",{className:"flex gap-2",children:r.jsxs(R,{variant:"outline",size:"sm",children:[r.jsx(xr,{className:"h-4 w-4 mr-2"}),"Voir Dossier Médical"]})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(R,{variant:"outline",onClick:()=>t(!1),children:"Fermer"}),r.jsxs(R,{children:[r.jsx(Ct,{className:"h-4 w-4 mr-2"}),"Modifier"]})]})]}),r.jsxs("div",{className:"mt-4 p-4 bg-muted/50 rounded-lg",children:[r.jsx("p",{className:"text-sm font-medium",children:"Animal modifié"}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Les informations de ",n.name," ont été mises à jour."]})]})]})})}function UPe({pet:e,consultations:t}){var N,w,C;const n=[...t].sort((S,_)=>new Date(_.date).getTime()-new Date(S.date).getTime()),s=n.filter(S=>S.weight).map(S=>({date:S.date,weight:parseFloat(S.weight)})),a=n.filter(S=>S.temperature).map(S=>({date:S.date,temperature:parseFloat(S.temperature)})),i=((N=s[0])==null?void 0:N.weight)||0,o=((w=s[1])==null?void 0:w.weight)||0,l=i-o,c=l>0?"up":l<0?"down":"stable",u=((C=a[0])==null?void 0:C.temperature)||0,d=a.length>0?a.reduce((S,_)=>S+_.temperature,0)/a.length:0,h=a.length>0?Math.min(...a.map(S=>S.temperature)):0,f=a.length>0?Math.max(...a.map(S=>S.temperature)):0,m=t.length,g=new Date().getMonth(),p=new Date().getFullYear(),v=t.filter(S=>{const _=new Date(S.date);return _.getMonth()===g&&_.getFullYear()===p}).length,j=n[0],x=j?Math.floor((new Date().getTime()-new Date(j.date).getTime())/(1e3*60*60*24)):null,y=[];return u>39.5?y.push({type:"danger",message:"Température élevée",icon:vn}):u<37.5&&y.push({type:"warning",message:"Température basse",icon:vn}),l<-2&&y.push({type:"warning",message:"Perte de poids",icon:$l}),x&&x>180&&y.push({type:"info",message:"Contrôle recommandé",icon:Ye}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Statistiques médicales"}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[r.jsxs(te,{children:[r.jsx(he,{className:"pb-2",children:r.jsxs(fe,{className:"text-sm font-medium flex items-center gap-2",children:[r.jsx(Ag,{className:"h-4 w-4"}),"Poids actuel"]})}),r.jsxs(ne,{children:[r.jsxs("div",{className:"text-2xl font-bold",children:[i,"kg"]}),l!==0&&r.jsxs("div",{className:"flex items-center gap-1 text-sm mt-1",children:[c==="up"?r.jsx(an,{className:"h-3 w-3 text-green-600"}):c==="down"?r.jsx($l,{className:"h-3 w-3 text-red-600"}):r.jsx(Dq,{className:"h-3 w-3 text-gray-600"}),r.jsxs("span",{className:c==="up"?"text-green-600":c==="down"?"text-red-600":"text-gray-600",children:[Math.abs(l),"kg"]})]})]})]}),r.jsxs(te,{children:[r.jsx(he,{className:"pb-2",children:r.jsxs(fe,{className:"text-sm font-medium flex items-center gap-2",children:[r.jsx(uf,{className:"h-4 w-4"}),"Température"]})}),r.jsxs(ne,{children:[r.jsxs("div",{className:"text-2xl font-bold",children:[u,"°C"]}),r.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Moy: ",d.toFixed(1),"°C"]}),a.length>1&&r.jsxs("div",{className:"text-xs text-muted-foreground",children:["Min: ",h,"°C | Max: ",f,"°C"]})]})]}),r.jsxs(te,{children:[r.jsx(he,{className:"pb-2",children:r.jsxs(fe,{className:"text-sm font-medium flex items-center gap-2",children:[r.jsx(na,{className:"h-4 w-4"}),"Consultations"]})}),r.jsxs(ne,{children:[r.jsx("div",{className:"text-2xl font-bold",children:m}),r.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Ce mois: ",v]}),j&&r.jsxs("div",{className:"text-xs text-muted-foreground",children:["Dernière: ",new Date(j.date).toLocaleDateString("fr-FR")]})]})]}),r.jsxs(te,{children:[r.jsx(he,{className:"pb-2",children:r.jsxs(fe,{className:"text-sm font-medium flex items-center gap-2",children:[r.jsx(vn,{className:"h-4 w-4"}),"Alertes"]})}),r.jsxs(ne,{children:[r.jsx("div",{className:"text-2xl font-bold",children:y.length}),r.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:y.length>0?"À traiter":"Aucune"}),y.length>0&&r.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:y.slice(0,2).map((S,_)=>r.jsx(Se,{variant:"outline",className:"text-xs",children:S.message},_))})]})]})]}),y.length>0&&r.jsxs(te,{className:"border-destructive/20",children:[r.jsx(he,{children:r.jsx(fe,{className:"text-destructive text-base",children:"Alertes médicales"})}),r.jsx(ne,{children:r.jsx("div",{className:"space-y-2",children:y.map((S,_)=>r.jsxs("div",{className:"flex items-center gap-3 p-2 bg-destructive/5 rounded",children:[r.jsx(S.icon,{className:`h-4 w-4 ${S.type==="danger"?"text-destructive":S.type==="warning"?"text-yellow-600":"text-blue-600"}`}),r.jsx("span",{className:"text-sm font-medium",children:S.message})]},_))})})]}),s.length>1||a.length>1?r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{className:"text-base",children:"Tendances"})}),r.jsx(ne,{children:r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.length>1&&r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-2",children:"Évolution du poids"}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Poids initial:"}),r.jsxs("span",{children:[s[s.length-1].weight,"kg"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Poids actuel:"}),r.jsxs("span",{children:[s[0].weight,"kg"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Évolution totale:"}),r.jsxs("span",{className:s[0].weight>s[s.length-1].weight?"text-green-600":"text-red-600",children:[s[0].weight-s[s.length-1].weight,"kg"]})]})]})]}),a.length>1&&r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium mb-2",children:"Évolution de la température"}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Température moyenne:"}),r.jsxs("span",{children:[d.toFixed(1),"°C"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Variation:"}),r.jsxs("span",{children:[f-h,"°C"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Stabilité:"}),r.jsx("span",{className:f-h<1?"text-green-600":"text-yellow-600",children:f-h<1?"Stable":"Variable"})]})]})]})]})})]}):r.jsx(te,{children:r.jsxs(ne,{className:"p-6 text-center text-muted-foreground",children:[r.jsx(na,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground/50"}),r.jsx("p",{children:"Pas assez de données pour afficher les tendances"}),r.jsx("p",{className:"text-sm",children:"Ajoutez plus de consultations avec poids et température"})]})})]})}const VE={healthy:"bg-secondary text-secondary-foreground",treatment:"bg-accent text-accent-foreground",urgent:"bg-destructive text-destructive-foreground"},WPe=(e,t)=>{const n=t.find(o=>o.id===e.client_id),s=n?`${n.first_name} ${n.last_name}`:"Propriétaire inconnu",a=Math.abs(e.id.split("").reduce((o,l)=>(o=(o<<5)-o+l.charCodeAt(0),o&o),0)),i=Math.abs(e.client_id.split("").reduce((o,l)=>(o=(o<<5)-o+l.charCodeAt(0),o&o),0));return{id:a,name:e.name,type:e.species,breed:e.breed||"",gender:e.sex==="Mâle"?"male":e.sex==="Femelle"?"female":void 0,birthDate:e.birth_date||"",weight:e.weight?e.weight.toString():"",color:e.color||"",microchip:e.microchip_number||"",medicalNotes:e.notes||"",photo:e.photo_url||"",ownerId:i,owner:s,status:e.status==="vivant"?"healthy":e.status==="décédé"?"urgent":"treatment",lastVisit:e.updated_at?new Date(e.updated_at).toLocaleDateString("fr-FR"):"Jamais",nextAppointment:void 0,vaccinations:[],dbId:e.id,dbClientId:e.client_id}},HPe=()=>{var ee;const{data:e=[],isLoading:t}=ds(),{data:n=[],isLoading:s}=us(),{data:a}=bZ(),i=iZ(),o=e.map(G=>WPe(G,n)),{data:l=[]}=v3(),{data:c=[]}=MS(),u=b.useCallback(G=>{var O;const W=typeof G=="string"?G:(O=o.find(le=>le.id===G))==null?void 0:O.dbId;return W?l.filter(le=>le.animal_id===W):[]},[o,l]),d=b.useCallback(G=>{var O;const W=typeof G=="string"?G:(O=o.find(le=>le.id===G))==null?void 0:O.dbId;return W?c.filter(le=>le.animal_id===W):[]},[o,c]),{currentView:h}=cc("pets"),[f,m]=b.useState(""),[g,p]=b.useState("all"),[v,j]=b.useState("all"),[x,y]=b.useState(h),{settings:N}=xt(),w=N.species.split(",").map(G=>G.trim()).filter(G=>G.length>0),[C,S]=b.useState(!1),[_,k]=b.useState(!1),[T,P]=b.useState(null),[A,B]=b.useState(!1),[L,H]=b.useState(!1),[z,$]=b.useState(!1),{toast:I}=et(),[E,q]=b.useState({client_id:"",name:"",species:"Chien",breed:"",color:"",sex:"Inconnu",weight:void 0,height:void 0,birth_date:"",microchip_number:"",tattoo_number:"",sterilized:!1,sterilization_date:"",notes:"",photo_url:"",status:"healthy"}),Y=o.filter(G=>{const W=G.name.toLowerCase().includes(f.toLowerCase())||G.breed&&G.breed.toLowerCase().includes(f.toLowerCase())||G.owner.toLowerCase().includes(f.toLowerCase()),O=g==="all"||G.type.toLowerCase()===g.toLowerCase(),le=v==="all"||G.status===v;return W&&O&&le}),re=G=>{P(G),B(!0)},oe=G=>{P(G),q({client_id:G.dbClientId,name:G.name,species:G.type,breed:G.breed||"",color:G.color||"",sex:G.gender==="male"?"Mâle":G.gender==="female"?"Femelle":"Inconnu",weight:G.weight?parseFloat(G.weight):void 0,height:void 0,birth_date:G.birthDate||"",microchip_number:G.microchip||"",tattoo_number:"",sterilized:!1,sterilization_date:"",notes:G.medicalNotes||"",photo_url:G.photo||"",status:G.status}),H(!0)},ae=()=>{T&&q({client_id:T.dbClientId,name:T.name,species:T.type,breed:T.breed||"",color:T.color||"",sex:T.gender==="male"?"Mâle":T.gender==="female"?"Femelle":"Inconnu",weight:T.weight?parseFloat(T.weight):void 0,height:void 0,birth_date:T.birthDate||"",microchip_number:T.microchip||"",tattoo_number:"",sterilized:!1,sterilization_date:"",notes:T.medicalNotes||"",photo_url:T.photo||"",status:T.status}),B(!1),H(!0)},me=G=>{P(G),$(!0)},we=()=>{B(!1),$(!0)},ue=async()=>{if(T){if(E.microchip_number&&E.microchip_number.trim()&&e.find(W=>W.microchip_number===E.microchip_number.trim()&&W.id!==T.dbId)){I({title:"Erreur",description:"Un animal avec ce numéro de puce existe déjà.",variant:"destructive"});return}try{await i.mutateAsync({id:T.dbId,data:E}),I({title:"Animal modifié",description:`${E.name} a été modifié avec succès.`}),H(!1)}catch{I({title:"Erreur",description:"Une erreur s'est produite lors de la modification de l'animal.",variant:"destructive"})}}},J=b.useMemo(()=>T?u(T.id):[],[T,u]);return r.jsxs("div",{className:"container mx-auto px-6 py-8 space-y-8",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Gestion des Animaux"}),r.jsx("p",{className:"text-muted-foreground mt-2",children:"Suivez tous les animaux et leurs informations médicales"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(R,{size:"sm",variant:x==="cards"?"default":"outline",onClick:()=>y("cards"),className:"gap-2",children:[r.jsx(_o,{className:"h-4 w-4"}),"Cartes"]}),r.jsxs(R,{size:"sm",variant:x==="table"?"default":"outline",onClick:()=>y("table"),className:"gap-2",children:[r.jsx(ji,{className:"h-4 w-4"}),"Tableau"]}),r.jsxs(R,{className:"gap-2 medical-glow",onClick:()=>S(!0),children:[r.jsx(Ue,{className:"h-4 w-4"}),"Nouvel Animal"]})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[r.jsx(te,{children:r.jsx(ne,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(lt,{className:"h-5 w-5 text-primary"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Total animaux"}),r.jsx("p",{className:"text-2xl font-bold",children:(a==null?void 0:a.totalAnimals)||o.length})]})]})})}),r.jsx(te,{children:r.jsx(ne,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Dn,{className:"h-5 w-5 text-green-500"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"En bonne santé"}),r.jsx("p",{className:"text-2xl font-bold",children:((ee=a==null?void 0:a.animalsByStatus)==null?void 0:ee.vivant)||o.filter(G=>G.status==="healthy").length})]})]})})}),r.jsx(te,{children:r.jsx(ne,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(vn,{className:"h-5 w-5 text-yellow-500"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"En traitement"}),r.jsx("p",{className:"text-2xl font-bold",children:o.filter(G=>G.status==="treatment").length})]})]})})}),r.jsx(te,{children:r.jsx(ne,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Rn,{className:"h-5 w-5 text-primary"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Clients actifs"}),r.jsx("p",{className:"text-2xl font-bold",children:(a==null?void 0:a.totalClients)||n.length})]})]})})})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsxs(fe,{className:"flex items-center gap-2",children:[r.jsx(Do,{className:"h-5 w-5"}),"Rechercher et filtrer"]})}),r.jsxs(ne,{className:"space-y-4",children:[r.jsx(K,{placeholder:"Rechercher par nom, race ou propriétaire...",value:f,onChange:G=>m(G.target.value),className:"max-w-md"}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs(ve,{value:g,onValueChange:p,children:[r.jsx(pe,{className:"w-40",children:r.jsx(xe,{placeholder:"Tous types"})}),r.jsxs(ge,{children:[r.jsx(M,{value:"all",children:"Tous types"}),w.map((G,W)=>r.jsx(M,{value:G.toLowerCase(),children:G},W))]})]}),r.jsxs(ve,{value:v,onValueChange:j,children:[r.jsx(pe,{className:"w-40",children:r.jsx(xe,{placeholder:"Statut"})}),r.jsxs(ge,{children:[r.jsx(M,{value:"all",children:"Tous statuts"}),r.jsx(M,{value:"healthy",children:"En bonne santé"}),r.jsx(M,{value:"treatment",children:"En traitement"}),r.jsx(M,{value:"urgent",children:"Urgent"})]})]})]})]})]}),x==="cards"?r.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:Y.map(G=>r.jsx(te,{className:"card-hover",children:r.jsx(ne,{className:"p-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"flex items-start justify-between",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Hn,{className:"h-16 w-16",children:G.photo?r.jsx(Du,{src:G.photo,alt:G.name}):r.jsx(Gn,{className:"bg-primary-glow text-primary-foreground",children:r.jsx(lt,{className:"h-8 w-8"})})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-semibold",children:G.name}),r.jsx("p",{className:"text-muted-foreground",children:G.breed}),r.jsx(Se,{variant:"outline",className:VE[G.status],children:G.status==="healthy"?"En bonne santé":G.status==="treatment"?"En traitement":"Urgent"})]})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Type:"})," ",G.type]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Âge:"})," ",G.birthDate?ku(G.birthDate):"Non renseigné"]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Poids:"})," ",G.weight]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Couleur:"})," ",G.color]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Rn,{className:"h-4 w-4 text-muted-foreground"}),r.jsxs("span",{children:["Propriétaire: ",typeof G.owner=="string"?G.owner:(()=>{const W=n.find(O=>String(O.id)===String(G.ownerId));return W?`${W.first_name} ${W.last_name}`:"Non spécifié"})()]})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Ye,{className:"h-4 w-4 text-muted-foreground"}),r.jsxs("span",{children:["Dernière visite: ",G.lastVisit?new Date(G.lastVisit).toLocaleDateString("fr-FR"):"Aucune"]})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(bn,{className:"h-4 w-4 text-muted-foreground"}),r.jsxs("span",{children:["Consultations: ",u(G.id).length]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"font-medium text-sm",children:"Vaccinations:"}),r.jsx("div",{className:"flex gap-1 flex-wrap",children:(()=>{const W=d(G.id);return W.length>0?W.map(O=>r.jsx(Se,{variant:"outline",className:"text-xs",children:O.vaccin},O.id)):r.jsx("span",{className:"text-xs text-muted-foreground",children:"Aucune vaccination enregistrée"})})()})]}),r.jsxs("div",{className:"flex gap-2 mb-2",children:[r.jsxs(R,{size:"sm",variant:"outline",className:"gap-2",onClick:()=>re(G),children:[r.jsx(wn,{className:"h-4 w-4"}),"Voir"]}),r.jsxs(R,{size:"sm",variant:"outline",className:"gap-2",onClick:()=>oe(G),children:[r.jsx(Ct,{className:"h-4 w-4"}),"Modifier"]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(R,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>me(G),children:"Dossier Médical"}),r.jsxs(R,{size:"sm",className:"flex-1",onClick:()=>{P(G),k(!0)},children:[r.jsx(bn,{className:"h-4 w-4 mr-2"}),"Consultation"]})]})]})})},G.id))}):r.jsx(te,{children:r.jsx(ne,{className:"p-0",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"border-b",children:r.jsxs("tr",{className:"text-left",children:[r.jsx("th",{className:"p-4 font-medium",children:"Animal"}),r.jsx("th",{className:"p-4 font-medium",children:"Type"}),r.jsx("th",{className:"p-4 font-medium",children:"Âge"}),r.jsx("th",{className:"p-4 font-medium",children:"Propriétaire"}),r.jsx("th",{className:"p-4 font-medium",children:"Statut"}),r.jsx("th",{className:"p-4 font-medium",children:"Dernière visite"}),r.jsx("th",{className:"p-4 font-medium",children:"Actions"})]})}),r.jsx("tbody",{children:Y.map(G=>r.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[r.jsx("td",{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Hn,{className:"h-10 w-10",children:G.photo?r.jsx(Du,{src:G.photo,alt:G.name}):r.jsx(Gn,{className:"bg-primary-glow text-primary-foreground",children:r.jsx(lt,{className:"h-5 w-5"})})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:G.name}),r.jsx("div",{className:"text-sm text-muted-foreground",children:G.breed})]})]})}),r.jsx("td",{className:"p-4",children:G.type}),r.jsx("td",{className:"p-4",children:G.birthDate?ku(G.birthDate):"Non renseigné"}),r.jsx("td",{className:"p-4",children:typeof G.owner=="string"?G.owner:(()=>{const W=n.find(O=>String(O.id)===String(G.ownerId));return W?`${W.first_name} ${W.last_name}`:"Non spécifié"})()}),r.jsx("td",{className:"p-4",children:r.jsx(Se,{variant:"outline",className:VE[G.status],children:G.status==="healthy"?"En bonne santé":G.status==="treatment"?"En traitement":"Urgent"})}),r.jsx("td",{className:"p-4",children:G.lastVisit?new Date(G.lastVisit).toLocaleDateString("fr-FR"):"Aucune"}),r.jsx("td",{className:"p-4",children:r.jsxs("div",{className:"flex gap-1",children:[r.jsx(R,{size:"sm",variant:"outline",onClick:()=>re(G),children:r.jsx(wn,{className:"h-4 w-4"})}),r.jsx(R,{size:"sm",variant:"outline",onClick:()=>oe(G),children:r.jsx(Ct,{className:"h-4 w-4"})}),r.jsx(R,{size:"sm",variant:"outline",onClick:()=>me(G),children:"Dossier"})]})})]},G.id))})]})})})}),T&&r.jsxs(te,{children:[r.jsx(he,{children:r.jsxs(fe,{className:"flex items-center gap-2",children:[r.jsx(na,{className:"h-5 w-5"}),"Statistiques médicales - ",T.name]})}),r.jsx(ne,{children:r.jsx(UPe,{pet:T,consultations:J})})]}),r.jsx(Nm,{open:C,onOpenChange:S}),r.jsx(_d,{open:_,onOpenChange:k}),r.jsx(M3,{open:A,onOpenChange:B,pet:T,onEdit:ae,onShowDossier:we}),r.jsx(He,{open:L,onOpenChange:H,children:r.jsxs(We,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto",children:[r.jsxs(Ge,{children:[r.jsx(Ke,{children:"Modifier Animal"}),r.jsx(yt,{children:"Modifiez les informations de l'animal."})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"name",children:"Nom *"}),r.jsx(K,{id:"name",value:E.name,onChange:G=>q(W=>({...W,name:G.target.value})),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"species",children:"Espèce *"}),r.jsxs(ve,{value:E.species,onValueChange:G=>q(W=>({...W,species:G})),children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Sélectionner l'espèce"})}),r.jsxs(ge,{children:[r.jsx(M,{value:"Chien",children:"Chien"}),r.jsx(M,{value:"Chat",children:"Chat"}),r.jsx(M,{value:"Oiseau",children:"Oiseau"}),r.jsx(M,{value:"Lapin",children:"Lapin"}),r.jsx(M,{value:"Furet",children:"Furet"}),r.jsx(M,{value:"Autre",children:"Autre"})]})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"client_id",children:"Propriétaire *"}),r.jsxs(ve,{value:E.client_id,onValueChange:G=>q(W=>({...W,client_id:G})),children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Sélectionner le propriétaire"})}),r.jsx(ge,{children:n.map(G=>r.jsxs(M,{value:G.id,children:[G.first_name," ",G.last_name]},G.id))})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"breed",children:"Race"}),r.jsx(K,{id:"breed",value:E.breed||"",onChange:G=>q(W=>({...W,breed:G.target.value}))})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"sex",children:"Sexe"}),r.jsxs(ve,{value:E.sex,onValueChange:G=>q(W=>({...W,sex:G})),children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Sélectionner le sexe"})}),r.jsxs(ge,{children:[r.jsx(M,{value:"Mâle",children:"Mâle"}),r.jsx(M,{value:"Femelle",children:"Femelle"}),r.jsx(M,{value:"Inconnu",children:"Inconnu"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"birth_date",children:"Date de naissance"}),r.jsx(K,{id:"birth_date",type:"date",value:E.birth_date||"",onChange:G=>q(W=>({...W,birth_date:G.target.value||void 0}))})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"weight",children:"Poids (kg)"}),r.jsx(K,{id:"weight",type:"number",step:"0.1",value:E.weight||"",onChange:G=>q(W=>({...W,weight:G.target.value?parseFloat(G.target.value):void 0}))})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"color",children:"Couleur"}),r.jsx(K,{id:"color",value:E.color||"",onChange:G=>q(W=>({...W,color:G.target.value}))})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"microchip_number",children:"N° puce électronique"}),r.jsx(K,{id:"microchip_number",value:E.microchip_number||"",onChange:G=>q(W=>({...W,microchip_number:G.target.value}))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"notes",children:"Notes médicales"}),r.jsx(Be,{id:"notes",value:E.notes||"",onChange:G=>q(W=>({...W,notes:G.target.value})),placeholder:"Notes additionnelles..."})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(R,{type:"button",variant:"outline",onClick:()=>H(!1),children:"Annuler"}),r.jsxs(R,{onClick:ue,disabled:i.isPending,children:[i.isPending&&r.jsx(Nr,{className:"mr-2 h-4 w-4 animate-spin"}),"Sauvegarder"]})]})]})]})}),r.jsx(qPe,{open:z,onOpenChange:$,pet:T})]})},GPe=()=>r.jsx(HPe,{});function KPe({open:e,onOpenChange:t}){const{data:n=[]}=us(),{data:s=[]}=ds(),a=b3(),{toast:i}=et(),[o,l]=b.useState({clientId:"",animalId:"",date:"",time:"",appointmentType:"consultation",notes:""}),[c,u]=b.useState([]),d=async m=>{if(m.preventDefault(),!o.clientId||!o.animalId||!o.date||!o.time){i({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires",variant:"destructive"});return}try{const g=new Date(`${o.date}T${o.time}:00`);await a.mutateAsync({client_id:o.clientId,animal_id:o.animalId,appointment_date:g.toISOString(),appointment_type:o.appointmentType,notes:o.notes||void 0,duration_minutes:30}),i({title:"Succès",description:"Rendez-vous créé avec succès"}),l({clientId:"",animalId:"",date:"",time:"",appointmentType:"consultation",notes:""}),u([]),t(!1)}catch(g){console.error("Error creating appointment:",g),i({title:"Erreur",description:"Impossible de créer le rendez-vous",variant:"destructive"})}},h=m=>{l(p=>({...p,clientId:m,animalId:""}));const g=s.filter(p=>p.client_id===m);u(g)},f=m=>`${m.first_name} ${m.last_name}`;return r.jsx(He,{open:e,onOpenChange:t,children:r.jsxs(We,{className:"max-w-2xl",children:[r.jsxs(Ge,{children:[r.jsxs(Ke,{className:"flex items-center gap-2",children:[r.jsx(Ye,{className:"h-5 w-5"}),"Nouveau Rendez-vous"]}),r.jsx(yt,{children:"Créer un nouveau rendez-vous pour un client et son animal"})]}),r.jsxs("form",{onSubmit:d,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"client",children:"Client *"}),r.jsxs(ve,{value:o.clientId,onValueChange:h,children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Sélectionner un client"})}),r.jsx(ge,{children:n.map(m=>r.jsx(M,{value:m.id,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Rn,{className:"h-4 w-4"}),f(m)]})},m.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"animal",children:"Animal *"}),r.jsxs(ve,{value:o.animalId,onValueChange:m=>l(g=>({...g,animalId:m})),disabled:!o.clientId,children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:o.clientId?"Sélectionner un animal":"Sélectionner d'abord un client"})}),r.jsx(ge,{children:c.map(m=>r.jsx(M,{value:m.id,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(lt,{className:"h-4 w-4"}),m.name," (",m.species,")"]})},m.id))})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"date",children:"Date *"}),r.jsx(K,{id:"date",type:"date",value:o.date,onChange:m=>l(g=>({...g,date:m.target.value})),min:new Date().toISOString().split("T")[0]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"time",children:"Heure *"}),r.jsx(K,{id:"time",type:"time",value:o.time,onChange:m=>l(g=>({...g,time:m.target.value}))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"type",children:"Type de rendez-vous"}),r.jsxs(ve,{value:o.appointmentType,onValueChange:m=>l(g=>({...g,appointmentType:m})),children:[r.jsx(pe,{children:r.jsx(xe,{})}),r.jsxs(ge,{children:[r.jsx(M,{value:"consultation",children:"Consultation"}),r.jsx(M,{value:"vaccination",children:"Vaccination"}),r.jsx(M,{value:"surgery",children:"Chirurgie"}),r.jsx(M,{value:"follow-up",children:"Contrôle/Suivi"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"notes",children:"Notes (optionnel)"}),r.jsx(Be,{id:"notes",placeholder:"Notes additionnelles sur le rendez-vous...",value:o.notes,onChange:m=>l(g=>({...g,notes:m.target.value})),rows:3})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(R,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),r.jsx(R,{type:"submit",disabled:a.isPending,children:a.isPending?"Création...":"Créer le rendez-vous"})]})]})]})})}const zE=(e,t)=>{switch(e){case"appointment":switch(t){case"confirmed":return"bg-green-100 text-green-800 border-green-200";case"completed":return"bg-gray-100 text-gray-800 border-gray-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-blue-100 text-blue-800 border-blue-200"}case"vaccination":switch(t){case"completed":return"bg-green-100 text-green-800 border-green-200";case"overdue":return"bg-red-100 text-red-800 border-red-200";case"scheduled":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-yellow-100 text-yellow-800 border-yellow-200"}case"antiparasitic":switch(t){case"completed":return"bg-green-100 text-green-800 border-green-200";case"overdue":return"bg-red-100 text-red-800 border-red-200";case"scheduled":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-purple-100 text-purple-800 border-purple-200"}default:return"bg-gray-100 text-gray-800 border-gray-200"}},qE=(e,t)=>{switch(e){case"appointment":return r.jsx(Yt,{className:"h-3 w-3"});case"vaccination":return r.jsx(Dn,{className:"h-3 w-3"});case"antiparasitic":return r.jsx(vn,{className:"h-3 w-3"});default:return r.jsx(Ye,{className:"h-3 w-3"})}},YPe=({events:e,onEventClick:t,onDateClick:n,onTimeSlotClick:s,showTimeSlots:a=!1,title:i="Calendrier",icon:o=r.jsx(Ye,{className:"h-5 w-5"})})=>{var C;const{settings:l}=xt(),[c,u]=b.useState(new Date),[d,h]=b.useState(""),f=new Date(c.getFullYear(),c.getMonth(),1),m=new Date(c.getFullYear(),c.getMonth()+1,0),g=new Date(f);g.setDate(g.getDate()-f.getDay());const p=[],v=new Date(g);for(;v<=m||p.length<42;)p.push(new Date(v)),v.setDate(v.getDate()+1);const j=b.useMemo(()=>{const S={};return e.forEach(_=>{const k=_.date;S[k]||(S[k]=[]),S[k].push(_)}),S},[e]),x=b.useMemo(()=>!d||!a?[]:RS(d,l.scheduleSettings,[]),[d,a,l.scheduleSettings]),y=S=>{const _=new Date(c);_.setMonth(c.getMonth()+(S==="next"?1:-1)),u(_)},N=S=>{const _=Je(S,"yyyy-MM-dd");h(_),n==null||n(_)},w=S=>{s&&d&&s(d,S)};return r.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[r.jsxs(te,{children:[r.jsx(he,{className:"pb-3 sm:pb-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-0",children:[r.jsxs(fe,{className:"flex items-center gap-2 text-base sm:text-lg",children:[o,i]}),r.jsxs("div",{className:"flex items-center justify-between sm:gap-2",children:[r.jsx(R,{variant:"outline",size:"sm",onClick:()=>y("prev"),className:"flex-1 sm:flex-none",children:"←"}),r.jsx("span",{className:"font-medium text-sm sm:text-base px-2 sm:min-w-[140px] text-center",children:Je(c,"MMMM yyyy",{locale:$n})}),r.jsx(R,{variant:"outline",size:"sm",onClick:()=>y("next"),className:"flex-1 sm:flex-none",children:"→"})]})]})}),r.jsxs(ne,{className:"p-2 sm:p-6",children:[r.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2 sm:mb-4",children:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"].map(S=>r.jsx("div",{className:"p-1 sm:p-2 text-center text-xs sm:text-sm font-medium text-gray-500",children:S},S))}),r.jsx("div",{className:"grid grid-cols-7 gap-1",children:p.map((S,_)=>{const k=Je(S,"yyyy-MM-dd"),T=j[k]||[],P=S.getMonth()===c.getMonth(),A=ZZ(S,new Date),B=k===d,L=FZ(k,l.scheduleSettings);return r.jsxs("div",{className:`
                    min-h-[60px] sm:min-h-[80px] p-1 border rounded-lg relative cursor-pointer hover:bg-muted/50
                    ${P?"bg-white":"bg-gray-50"}
                    ${A?"ring-2 ring-blue-500":""}
                    ${B?"bg-blue-100 border-blue-300":""}
                    ${L?"":"opacity-50"}
                  `,onClick:()=>N(S),children:[r.jsx("div",{className:`text-xs sm:text-sm font-medium ${P?"text-gray-900":"text-gray-400"}`,children:S.getDate()}),r.jsxs("div",{className:"space-y-0.5 sm:space-y-1 mt-0.5 sm:mt-1",children:[T.slice(0,2).map((H,z)=>r.jsx("div",{className:`
                          text-xs p-0.5 sm:p-1 rounded text-center truncate border cursor-pointer
                          ${zE(H.type,H.status)}
                        `,title:`${H.title}${H.time?` - ${H.time}`:""}${H.clientName?` (${H.clientName})`:""}`,onClick:$=>{$.stopPropagation(),t==null||t(H)},children:r.jsxs("div",{className:"flex items-center gap-0.5 sm:gap-1 justify-center",children:[qE(H.type,H.status),r.jsx("span",{className:"truncate text-xs",children:H.title})]})},z)),T.length>2&&r.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["+",T.length-2]})]})]},_)})})]})]}),d&&r.jsxs(te,{children:[r.jsx(he,{className:"pb-3",children:r.jsx(fe,{className:"text-base sm:text-lg",children:Je(new Date(d),"EEEE d MMMM yyyy",{locale:$n})})}),r.jsxs(ne,{className:"p-3 sm:p-6",children:[((C=j[d])==null?void 0:C.length)>0?r.jsx("div",{className:"space-y-3",children:j[d].map(S=>r.jsxs("div",{className:`
                      p-3 rounded-lg border cursor-pointer hover:shadow-sm
                      ${zE(S.type,S.status)}
                    `,onClick:()=>t==null?void 0:t(S),children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[qE(S.type,S.status),r.jsx("span",{className:"font-medium",children:S.title})]}),r.jsx(Se,{variant:"outline",className:"text-xs",children:S.status})]}),S.time&&r.jsxs("div",{className:"flex items-center gap-1 text-sm mt-1",children:[r.jsx(Yt,{className:"h-3 w-3"}),r.jsx("span",{children:S.time})]}),S.clientName&&r.jsxs("div",{className:"flex items-center gap-1 text-sm mt-1",children:[r.jsx(Rn,{className:"h-3 w-3"}),r.jsx("span",{children:S.clientName})]}),S.petName&&r.jsxs("div",{className:"flex items-center gap-1 text-sm mt-1",children:[r.jsx(lt,{className:"h-3 w-3"}),r.jsx("span",{children:S.petName})]})]},S.id))}):r.jsx("p",{className:"text-muted-foreground text-center py-4",children:"Aucun événement prévu pour cette date"}),a&&x.length>0&&r.jsxs("div",{className:"mt-4 sm:mt-6",children:[r.jsx("h4",{className:"font-medium mb-2 sm:mb-3 text-sm sm:text-base",children:"Créneaux disponibles"}),r.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-1 sm:gap-2",children:x.map(S=>r.jsxs(R,{variant:S.isAvailable?"outline":"ghost",size:"sm",disabled:!S.isAvailable,onClick:()=>w(S.time),className:"text-xs p-1 sm:p-2",children:[S.time,S.isLunchBreak&&r.jsx(Se,{variant:"secondary",className:"ml-1 text-xs hidden sm:inline",children:"Pause"})]},S.time))})]})]})]})]})},UE={scheduled:"bg-blue-100 text-blue-800",confirmed:"bg-green-100 text-green-800",completed:"bg-gray-100 text-gray-800",cancelled:"bg-red-100 text-red-800","no-show":"bg-orange-100 text-orange-800"},pj={scheduled:"Planifié",confirmed:"Confirmé",completed:"Terminé",cancelled:"Annulé","no-show":"Absent"},WE={consultation:"Consultation générale",vaccination:"Vaccination",chirurgie:"Chirurgie",urgence:"Urgence",controle:"Contrôle post-opératoire",sterilisation:"Stérilisation",dentaire:"Soins dentaires"};function QPe(){const{data:e=[],isLoading:t,error:n}=j3(),s=PZ(),a=AZ(),{toast:i}=et(),{currentView:o}=cc("appointments"),[l,c]=b.useState(!1),[u,d]=b.useState(""),[h,f]=b.useState("all"),[m,g]=b.useState("all"),[p,v]=b.useState("all"),[j,x]=b.useState(new Date().toISOString().split("T")[0]),[y,N]=b.useState("list"),[w,C]=b.useState(o),[S,_]=b.useState(null),[k,T]=b.useState(""),P=ie=>new Date(ie).toLocaleDateString("fr-FR"),A=ie=>new Date(ie).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),B=ie=>new Date(ie.appointment_date).toISOString().split("T")[0],L=ie=>new Date(ie.appointment_date).toTimeString().slice(0,5),[H,z]=b.useState(()=>{const ie=new Date;return new Date(ie.getFullYear(),ie.getMonth(),1)}),$=ie=>ie.client?`${ie.client.first_name} ${ie.client.last_name}`:"Unknown Client",I=ie=>{var Ce;return((Ce=ie.animal)==null?void 0:Ce.name)||"Unknown Animal"},E=()=>{const ie=new Date;return e.filter(Ce=>new Date(Ce.appointment_date)>ie)},q=()=>{const ie=new Date;return e.filter(Ce=>new Date(Ce.appointment_date)<ie&&Ce.status==="scheduled")},Y=E(),re=q(),oe=e.filter(ie=>{const Ce=$(ie),st=I(ie),tt=Ce.toLowerCase().includes(u.toLowerCase())||st.toLowerCase().includes(u.toLowerCase())||ie.notes&&ie.notes.toLowerCase().includes(u.toLowerCase()),wt=h==="all"||ie.status===h,tn=m==="all"||ie.appointment_type===m;let bt=!0;const gt=new Date(ie.appointment_date),Qt=gt.toISOString().split("T")[0];if(p==="today")bt=Qt===new Date().toISOString().split("T")[0];else if(p==="week"){const mn=new Date,ut=new Date(mn.getTime()+7*24*60*60*1e3);bt=gt>=mn&&gt<=ut}else if(p==="month"){const mn=new Date,ut=mn.getMonth(),Xt=mn.getFullYear();bt=gt.getMonth()===ut&&gt.getFullYear()===Xt}else p==="specific"&&(bt=Qt===j);return tt&&wt&&tn&&bt}),ae=async(ie,Ce)=>{try{await s.mutateAsync({id:ie,data:{status:Ce}}),i({title:"Statut mis à jour",description:`Le rendez-vous est maintenant ${pj[Ce].toLowerCase()}.`})}catch{i({title:"Erreur",description:"Impossible de mettre à jour le statut",variant:"destructive"})}},me=async()=>{if(!S)return;const{id:ie,field:Ce}=S;if(e.find(tt=>tt.id===ie))try{await s.mutateAsync({id:ie,data:{[Ce]:k}}),i({title:"Modifié",description:`${Ce} mis à jour`})}catch{i({title:"Erreur",description:"Impossible de mettre à jour",variant:"destructive"})}_(null)},we=async ie=>{const Ce=I(ie);if(confirm(`Êtes-vous sûr de vouloir supprimer le rendez-vous pour ${Ce} ?`))try{await a.mutateAsync(ie.id),i({title:"Rendez-vous supprimé",description:`Le rendez-vous pour ${Ce} a été supprimé.`})}catch{i({title:"Erreur",description:"Impossible de supprimer le rendez-vous",variant:"destructive"})}},ue=ie=>e.filter(Ce=>new Date(Ce.appointment_date).toISOString().split("T")[0]===ie),ee=(()=>{const ie=new Date().toISOString().split("T")[0];return ue(ie)})(),G=H.getFullYear(),W=H.getMonth(),O=new Date(G,W,1).getDay(),le=new Date(G,W+1,0).getDate();let ce=1-O;for(;ce<=le;){const ie=[];for(let Ce=0;Ce<7;Ce++)ce>0&&ce<=le?ie.push(ce):ie.push(0),ce++}return t?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Chargement des rendez-vous..."})]})}):n?r.jsx("div",{className:"p-6",children:r.jsx(te,{className:"border-red-200 bg-red-50",children:r.jsx(ne,{className:"p-6",children:r.jsxs("div",{className:"flex items-center text-red-800",children:[r.jsx(Tn,{className:"w-5 h-5 mr-2"}),r.jsxs("span",{children:["Erreur lors du chargement des rendez-vous: ",n.message]})]})})})}):r.jsxs("div",{className:"container mx-auto px-2 sm:px-4 lg:px-6 py-4 sm:py-6 lg:py-8 space-y-4 sm:space-y-6 lg:space-y-8",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Gestion des Rendez-vous"}),r.jsx("p",{className:"text-muted-foreground text-sm sm:text-base",children:"Planifiez et gérez tous vos rendez-vous vétérinaires"})]}),r.jsxs(R,{onClick:()=>c(!0),className:"gap-2 w-full sm:w-auto",children:[r.jsx(Ue,{className:"h-4 w-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Nouveau Rendez-vous"}),r.jsx("span",{className:"sm:hidden",children:"Nouveau RDV"})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx(R,{variant:y==="list"?"default":"outline",onClick:()=>N("list"),size:"sm",className:"flex-1 sm:flex-none",children:"Liste"}),r.jsx(R,{variant:y==="calendar"?"default":"outline",onClick:()=>N("calendar"),size:"sm",className:"flex-1 sm:flex-none",children:"Calendrier"})]}),y==="list"&&r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(R,{size:"sm",variant:w==="cards"?"default":"outline",onClick:()=>C("cards"),className:"gap-1 sm:gap-2 flex-1 sm:flex-none",children:[r.jsx(_o,{className:"h-3 w-3 sm:h-4 sm:w-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Cartes"})]}),r.jsxs(R,{size:"sm",variant:w==="table"?"default":"outline",onClick:()=>C("table"),className:"gap-1 sm:gap-2 flex-1 sm:flex-none",children:[r.jsx(ji,{className:"h-3 w-3 sm:h-4 sm:w-4"}),r.jsx("span",{className:"hidden sm:inline",children:"Tableau"})]})]})]}),y==="calendar"?r.jsx(YPe,{events:e.map(ie=>({id:parseInt(ie.id),type:"appointment",title:`${$(ie)} - ${I(ie)}`,time:L(ie),date:B(ie),status:ie.status,clientName:$(ie),petName:I(ie)})),onEventClick:ie=>{},onDateClick:ie=>{x(ie)},onTimeSlotClick:(ie,Ce)=>{c(!0)},showTimeSlots:!0,title:"Calendrier des Rendez-vous",icon:r.jsx(Ye,{className:"h-5 w-5"})}):r.jsxs("div",{className:"grid gap-2 sm:gap-4 grid-cols-2 lg:grid-cols-4",children:[r.jsx(te,{children:r.jsx(ne,{className:"p-3 sm:p-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ye,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Aujourd'hui"}),r.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:ee.length})]})]})})}),r.jsx(te,{children:r.jsx(ne,{className:"p-3 sm:p-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Yt,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"À venir"}),r.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:Y.length})]})]})})}),r.jsx(te,{children:r.jsx(ne,{className:"p-3 sm:p-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Tn,{className:"h-4 w-4 sm:h-5 sm:w-5 text-orange-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"En retard"}),r.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:re.length})]})]})})}),r.jsx(te,{children:r.jsx(ne,{className:"p-3 sm:p-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Dn,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Total"}),r.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:e.length})]})]})})})]}),r.jsxs(te,{children:[r.jsx(he,{className:"pb-3",children:r.jsxs(fe,{className:"flex items-center gap-2 text-base sm:text-lg",children:[r.jsx(eI,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Filtres et Recherche"]})}),r.jsx(ne,{className:"space-y-3 sm:space-y-4",children:r.jsxs("div",{className:"grid gap-3 sm:gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(fh,{children:"Recherche"}),r.jsxs("div",{className:"relative",children:[r.jsx(Do,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),r.jsx(K,{placeholder:"Client, animal, motif...",value:u,onChange:ie=>d(ie.target.value),className:"pl-10"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fh,{children:"Statut"}),r.jsxs(ve,{value:h,onValueChange:f,children:[r.jsx(pe,{children:r.jsx(xe,{})}),r.jsxs(ge,{children:[r.jsx(M,{value:"all",children:"Tous les statuts"}),r.jsx(M,{value:"scheduled",children:"Planifié"}),r.jsx(M,{value:"confirmed",children:"Confirmé"}),r.jsx(M,{value:"completed",children:"Terminé"}),r.jsx(M,{value:"cancelled",children:"Annulé"}),r.jsx(M,{value:"no-show",children:"Absent"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fh,{children:"Type"}),r.jsxs(ve,{value:m,onValueChange:g,children:[r.jsx(pe,{children:r.jsx(xe,{})}),r.jsxs(ge,{children:[r.jsx(M,{value:"all",children:"Tous les types"}),r.jsx(M,{value:"consultation",children:"Consultation"}),r.jsx(M,{value:"vaccination",children:"Vaccination"}),r.jsx(M,{value:"chirurgie",children:"Chirurgie"}),r.jsx(M,{value:"urgence",children:"Urgence"}),r.jsx(M,{value:"controle",children:"Contrôle"}),r.jsx(M,{value:"sterilisation",children:"Stérilisation"}),r.jsx(M,{value:"dentaire",children:"Dentaire"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(fh,{children:"Période"}),r.jsxs(ve,{value:p,onValueChange:v,children:[r.jsx(pe,{children:r.jsx(xe,{})}),r.jsxs(ge,{children:[r.jsx(M,{value:"all",children:"Toutes les dates"}),r.jsx(M,{value:"today",children:"Ce jour"}),r.jsx(M,{value:"week",children:"Cette semaine"}),r.jsx(M,{value:"month",children:"Ce mois"}),r.jsx(M,{value:"specific",children:"Date spécifique"})]})]})]}),p==="specific"&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(fh,{children:"Date"}),r.jsx(K,{type:"date",value:j,onChange:ie=>x(ie.target.value)})]})]})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("h2",{className:"text-xl font-semibold",children:["Rendez-vous (",oe.length,")"]})}),oe.length===0?r.jsx(te,{children:r.jsxs(ne,{className:"p-8 text-center text-muted-foreground",children:[r.jsx(Ye,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"Aucun rendez-vous trouvé"}),r.jsx("p",{className:"text-sm",children:"Commencez par créer votre premier rendez-vous"})]})}):w==="cards"?r.jsx("div",{className:"space-y-4",children:oe.sort((ie,Ce)=>new Date(ie.appointment_date).getTime()-new Date(Ce.appointment_date).getTime()).map(ie=>r.jsx(te,{className:"card-hover",children:r.jsx(ne,{className:"p-6",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"space-y-4 flex-1",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Rn,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"font-medium",children:$(ie)})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(lt,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"font-medium",children:I(ie)})]}),r.jsx(Se,{className:UE[ie.status],children:pj[ie.status]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ye,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{children:P(ie.appointment_date)})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Yt,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{children:A(ie.appointment_date)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Type:"}),r.jsx("span",{className:"ml-1",children:WE[ie.appointment_type]||ie.appointment_type})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Durée:"}),r.jsxs("span",{className:"ml-1",children:[ie.duration_minutes||30," min"]})]})]}),ie.notes&&r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Motif:"}),r.jsx("p",{className:"text-sm mt-1",children:ie.notes})]}),ie.notes&&r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Notes:"}),r.jsx("p",{className:"text-sm mt-1 text-muted-foreground",children:ie.notes})]})]}),r.jsxs("div",{className:"flex gap-2 ml-4",children:[ie.status==="scheduled"&&r.jsxs(r.Fragment,{children:[r.jsxs(R,{size:"sm",variant:"outline",onClick:()=>ae(ie.id,"confirmed"),className:"gap-1",children:[r.jsx(Dn,{className:"h-3 w-3"}),"Confirmer"]}),r.jsxs(R,{size:"sm",variant:"outline",onClick:()=>ae(ie.id,"cancelled"),className:"gap-1 text-red-600",children:[r.jsx(cf,{className:"h-3 w-3"}),"Annuler"]})]}),ie.status==="confirmed"&&r.jsxs(R,{size:"sm",variant:"outline",onClick:()=>ae(ie.id,"completed"),className:"gap-1",children:[r.jsx(Dn,{className:"h-3 w-3"}),"Terminer"]}),r.jsxs(R,{size:"sm",variant:"outline",onClick:()=>we(ie),className:"gap-1 text-red-600",children:[r.jsx(rn,{className:"h-3 w-3"}),"Supprimer"]})]})]})})},ie.id))}):r.jsx(te,{children:r.jsx(ne,{className:"p-0",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"border-b",children:r.jsxs("tr",{className:"text-left",children:[r.jsx("th",{className:"p-4 font-medium",children:"Client / Animal"}),r.jsx("th",{className:"p-4 font-medium",children:"Date & Heure"}),r.jsx("th",{className:"p-4 font-medium",children:"Type"}),r.jsx("th",{className:"p-4 font-medium",children:"Statut"}),r.jsx("th",{className:"p-4 font-medium",children:"Motif"}),r.jsx("th",{className:"p-4 font-medium",children:"Actions"})]})}),r.jsx("tbody",{children:oe.sort((ie,Ce)=>new Date(ie.appointment_date).getTime()-new Date(Ce.appointment_date).getTime()).map(ie=>r.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[r.jsx("td",{className:"p-4",children:r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Rn,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"font-medium",children:$(ie)})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(lt,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:I(ie)})]})]})}),r.jsx("td",{className:"p-4",children:r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>{_({id:ie.id,field:"date"}),T(B(ie))},children:[r.jsx(Ye,{className:"h-4 w-4 text-muted-foreground"}),(S==null?void 0:S.id)===ie.id&&S.field==="date"?r.jsx(K,{type:"date",value:k,onChange:Ce=>T(Ce.target.value),onBlur:me,autoFocus:!0,className:"w-32"}):r.jsx("span",{children:P(ie.appointment_date)})]}),r.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>{_({id:ie.id,field:"time"}),T(L(ie))},children:[r.jsx(Yt,{className:"h-4 w-4 text-muted-foreground"}),(S==null?void 0:S.id)===ie.id&&S.field==="time"?r.jsx(K,{type:"time",value:k,onChange:Ce=>T(Ce.target.value),onBlur:me,autoFocus:!0,className:"w-24"}):r.jsx("span",{className:"text-sm text-muted-foreground",children:A(ie.appointment_date)})]})]})}),r.jsx("td",{className:"p-4",children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:WE[ie.appointment_type]||ie.appointment_type}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[ie.duration_minutes||30," min"]})]})}),r.jsx("td",{className:"p-4",children:r.jsx("div",{className:"cursor-pointer",onClick:()=>{_({id:ie.id,field:"status"}),T(ie.status)},children:(S==null?void 0:S.id)===ie.id&&S.field==="status"?r.jsxs(ve,{value:k,onValueChange:Ce=>{T(Ce),ae(ie.id,Ce),_(null)},children:[r.jsx(pe,{className:"w-32",children:r.jsx(xe,{})}),r.jsxs(ge,{children:[r.jsx(M,{value:"scheduled",children:"Planifié"}),r.jsx(M,{value:"confirmed",children:"Confirmé"}),r.jsx(M,{value:"completed",children:"Terminé"}),r.jsx(M,{value:"cancelled",children:"Annulé"}),r.jsx(M,{value:"no-show",children:"Absent"})]})]}):r.jsx(Se,{className:UE[ie.status],children:pj[ie.status]})})}),r.jsx("td",{className:"p-4",children:r.jsx("div",{className:"max-w-xs cursor-pointer",onClick:()=>{_({id:ie.id,field:"reason"}),T(ie.notes||"")},children:(S==null?void 0:S.id)===ie.id&&S.field==="reason"?r.jsx(K,{value:k,onChange:Ce=>T(Ce.target.value),onBlur:me,autoFocus:!0,placeholder:"Motif du rendez-vous"}):r.jsxs(r.Fragment,{children:[ie.notes&&r.jsx("div",{className:"text-sm",children:ie.notes}),ie.notes&&r.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:ie.notes})]})})}),r.jsx("td",{className:"p-4",children:r.jsxs("div",{className:"flex gap-1",children:[ie.status==="scheduled"&&r.jsxs(r.Fragment,{children:[r.jsx(R,{size:"sm",variant:"outline",onClick:()=>ae(ie.id,"confirmed"),children:r.jsx(Dn,{className:"h-3 w-3"})}),r.jsx(R,{size:"sm",variant:"outline",onClick:()=>ae(ie.id,"cancelled"),className:"text-red-600",children:r.jsx(cf,{className:"h-3 w-3"})})]}),ie.status==="confirmed"&&r.jsx(R,{size:"sm",variant:"outline",onClick:()=>ae(ie.id,"completed"),children:r.jsx(Dn,{className:"h-3 w-3"})}),r.jsx(R,{size:"sm",variant:"outline",onClick:()=>we(ie),className:"text-red-600",children:r.jsx(rn,{className:"h-3 w-3"})})]})})]},ie.id))})]})})})})]}),r.jsx(KPe,{open:l,onOpenChange:c})]})}const fh=({children:e,...t})=>r.jsx("label",{className:"text-sm font-medium",...t,children:e});function XPe({open:e,onOpenChange:t,consultation:n}){const{data:s=[]}=us(),{data:a=[]}=ds(),i=y3(),{toast:o}=et(),{settings:l}=xt(),[c,u]=b.useState({client_id:"",animal_id:"",consultation_date:"",consultation_type:"routine",weight:"",temperature:"",symptoms:"",diagnosis:"",treatment:"",notes:"",cost:"",follow_up_date:"",follow_up_notes:"",status:"completed"}),d=a.filter(g=>g.client_id===c.client_id);b.useEffect(()=>{var g,p,v;n&&e&&u({client_id:n.client_id||"",animal_id:n.animal_id||"",consultation_date:n.consultation_date?n.consultation_date.split("T")[0]:"",consultation_type:n.consultation_type||"routine",weight:((g=n.weight)==null?void 0:g.toString())||"",temperature:((p=n.temperature)==null?void 0:p.toString())||"",symptoms:n.symptoms||"",diagnosis:n.diagnosis||"",treatment:n.treatment||"",notes:n.notes||"",cost:((v=n.cost)==null?void 0:v.toString())||"",follow_up_date:n.follow_up_date||"",follow_up_notes:n.follow_up_notes||"",status:n.status||"completed"})},[n,e]);const h=g=>{u(p=>({...p,[g.target.id]:g.target.value}))},f=(g,p)=>{u(v=>({...v,[g]:p})),g==="client_id"&&u(v=>({...v,animal_id:""}))},m=async g=>{if(g.preventDefault(),!!n){if(!c.client_id||!c.animal_id){o({title:"Erreur",description:"Veuillez sélectionner un client et un animal.",variant:"destructive"});return}try{const p={client_id:c.client_id,animal_id:c.animal_id,consultation_date:c.consultation_date+"T00:00:00.000Z",consultation_type:c.consultation_type,symptoms:c.symptoms||void 0,diagnosis:c.diagnosis||void 0,treatment:c.treatment||void 0,notes:c.notes||void 0,weight:c.weight?parseFloat(c.weight):void 0,temperature:c.temperature?parseFloat(c.temperature):void 0,cost:c.cost?parseFloat(c.cost):void 0,follow_up_date:c.follow_up_date||null,follow_up_notes:c.follow_up_notes||void 0,status:c.status};await i.mutateAsync({id:n.id,data:p}),o({title:"Consultation modifiée",description:"La consultation a été modifiée avec succès."}),t(!1)}catch(p){console.error("Error updating consultation:",p),o({title:"Erreur",description:"Une erreur est survenue lors de la modification de la consultation.",variant:"destructive"})}}};return s.find(g=>g.id===c.client_id),a.find(g=>g.id===c.animal_id),r.jsx(He,{open:e,onOpenChange:t,children:r.jsxs(We,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(Ge,{children:[r.jsx(Ke,{children:"Modifier la consultation"}),r.jsx(yt,{children:"Modifiez les informations de la consultation"})]}),r.jsxs("form",{onSubmit:m,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"client_id",children:"Client *"}),r.jsxs(ve,{value:c.client_id,onValueChange:g=>f("client_id",g),children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Sélectionner un client"})}),r.jsx(ge,{children:s.map(g=>r.jsxs(M,{value:g.id,children:[g.first_name," ",g.last_name]},g.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"animal_id",children:"Animal *"}),r.jsxs(ve,{value:c.animal_id,onValueChange:g=>f("animal_id",g),children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Sélectionner un animal"})}),r.jsx(ge,{children:d.map(g=>r.jsxs(M,{value:g.id,children:[g.name," (",g.species,")"]},g.id))})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"consultation_date",children:"Date de consultation *"}),r.jsx(K,{id:"consultation_date",type:"date",value:c.consultation_date,onChange:h,required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"consultation_type",children:"Type de consultation"}),r.jsxs(ve,{value:c.consultation_type,onValueChange:g=>f("consultation_type",g),children:[r.jsx(pe,{children:r.jsx(xe,{})}),r.jsxs(ge,{children:[r.jsx(M,{value:"routine",children:"Routine"}),r.jsx(M,{value:"emergency",children:"Urgence"}),r.jsx(M,{value:"follow-up",children:"Suivi"}),r.jsx(M,{value:"vaccination",children:"Vaccination"}),r.jsx(M,{value:"surgery",children:"Chirurgie"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"weight",children:"Poids (kg)"}),r.jsx(K,{id:"weight",type:"number",step:"0.1",placeholder:"Ex: 5.2",value:c.weight,onChange:h})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"temperature",children:"Température (°C)"}),r.jsx(K,{id:"temperature",type:"number",step:"0.1",placeholder:"Ex: 38.5",value:c.temperature,onChange:h})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"symptoms",children:"Symptômes"}),r.jsx(Be,{id:"symptoms",placeholder:"Décrivez les symptômes observés...",value:c.symptoms,onChange:h,rows:3})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"diagnosis",children:"Diagnostic"}),r.jsx(Be,{id:"diagnosis",placeholder:"Diagnostic posé...",value:c.diagnosis,onChange:h,rows:3})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"treatment",children:"Traitement"}),r.jsx(Be,{id:"treatment",placeholder:"Traitement prescrit...",value:c.treatment,onChange:h,rows:3})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs(D,{htmlFor:"cost",children:["Coût (",l.currency,")"]}),r.jsx(K,{id:"cost",type:"number",step:"0.01",placeholder:"0.00",value:c.cost,onChange:h})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"follow_up_date",children:"Date de suivi"}),r.jsx(K,{id:"follow_up_date",type:"date",value:c.follow_up_date,onChange:h})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"follow_up_notes",children:"Notes de suivi"}),r.jsx(Be,{id:"follow_up_notes",placeholder:"Notes pour le suivi...",value:c.follow_up_notes,onChange:h,rows:2})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"notes",children:"Notes supplémentaires"}),r.jsx(Be,{id:"notes",placeholder:"Notes supplémentaires...",value:c.notes,onChange:h,rows:2})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"status",children:"Statut"}),r.jsxs(ve,{value:c.status,onValueChange:g=>f("status",g),children:[r.jsx(pe,{children:r.jsx(xe,{})}),r.jsxs(ge,{children:[r.jsx(M,{value:"scheduled",children:"Programmé"}),r.jsx(M,{value:"in-progress",children:"En cours"}),r.jsx(M,{value:"completed",children:"Terminé"}),r.jsx(M,{value:"cancelled",children:"Annulé"})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(R,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),r.jsx(R,{type:"submit",disabled:i.isPending,children:i.isPending?"Modification...":"Modifier"})]})]})]})})}function HE({consultation:e}){const{settings:t}=xt(),n=()=>{var s,a,i,o,l,c,u,d,h;try{const f=window.open("",`print_consultation_${e.id}`,"height=800,width=800");if(!f){alert("L'impression a été bloquée par le navigateur. Veuillez autoriser les popups pour ce site.");return}const m=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Consultation - ${((s=e.animal)==null?void 0:s.name)||"Animal"}</title>
          <style>
            body {
              font-family: Arial, sans-serif;
              margin: 20px;
              line-height: 1.6;
            }
            .header {
              text-align: center;
              border-bottom: 2px solid #333;
              padding-bottom: 10px;
              margin-bottom: 20px;
            }
            .clinic-info {
              text-align: center;
              color: #666;
              margin-bottom: 30px;
            }
            .consultation-info {
              display: grid;
              grid-template-columns: 1fr 1fr;
              gap: 20px;
              margin-bottom: 30px;
            }
            .info-section {
              border: 1px solid #ddd;
              padding: 15px;
              border-radius: 5px;
            }
            .info-title {
              font-weight: bold;
              color: #333;
              margin-bottom: 10px;
              font-size: 14px;
              text-transform: uppercase;
            }
            .info-content {
              color: #666;
            }
            .medical-section {
              margin-bottom: 20px;
            }
            .medical-title {
              font-weight: bold;
              color: #333;
              margin-bottom: 8px;
              border-bottom: 1px solid #eee;
              padding-bottom: 4px;
            }
            .medical-content {
              color: #666;
              margin-bottom: 15px;
            }
            .vitals {
              display: grid;
              grid-template-columns: repeat(4, 1fr);
              gap: 15px;
              margin-bottom: 20px;
            }
            .vital-item {
              text-align: center;
              padding: 10px;
              border: 1px solid #ddd;
              border-radius: 5px;
            }
            .vital-label {
              font-size: 12px;
              color: #666;
              margin-bottom: 5px;
            }
            .vital-value {
              font-size: 18px;
              font-weight: bold;
              color: #333;
            }
            .footer {
              margin-top: 40px;
              text-align: center;
              color: #666;
              font-size: 12px;
              border-top: 1px solid #ddd;
              padding-top: 20px;
            }
            @media print {
              body { 
                margin: 0; 
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
              }
              .header { page-break-after: avoid; }
              @page { size: auto; margin: 10mm; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            <h1>${t.clinicName||"Clinique Vétérinaire"}</h1>
            <div class="clinic-info">
              <p>${t.address||""}</p>
              <p>Tél: ${t.phone||""} | Email: ${t.email||""}</p>
            </div>
            <h2>Rapport de Consultation</h2>
          </div>

          <div class="consultation-info">
            <div class="info-section">
              <div class="info-title">Informations Client</div>
              <div class="info-content">
                <strong>Nom:</strong> ${((a=e.client)==null?void 0:a.first_name)||""} ${((i=e.client)==null?void 0:i.last_name)||""}<br>
                <strong>Téléphone:</strong> ${((o=e.client)==null?void 0:o.phone)||"N/A"}<br>
                <strong>Email:</strong> ${((l=e.client)==null?void 0:l.email)||"N/A"}
              </div>
            </div>
            
            <div class="info-section">
              <div class="info-title">Informations Animal</div>
              <div class="info-content">
                <strong>Nom:</strong> ${((c=e.animal)==null?void 0:c.name)||"N/A"}<br>
                <strong>Espèce:</strong> ${((u=e.animal)==null?void 0:u.species)||"N/A"}<br>
                <strong>Race:</strong> ${((d=e.animal)==null?void 0:d.breed)||"N/A"}<br>
                <strong>Âge:</strong> ${(h=e.animal)!=null&&h.birth_date?Math.floor((new Date().getTime()-new Date(e.animal.birth_date).getTime())/(365.25*24*60*60*1e3))+" ans":"N/A"}
              </div>
            </div>
          </div>

          <div class="info-section" style="margin-bottom: 20px;">
            <div class="info-title">Détails de la Consultation</div>
            <div class="info-content">
              <strong>Date:</strong> ${new Date(e.consultation_date).toLocaleDateString("fr-FR")}<br>
              <strong>Type:</strong> ${e.consultation_type||"Routine"}<br>
              <strong>Statut:</strong> ${e.status||"Terminé"}
            </div>
          </div>

          ${e.weight||e.temperature||e.heart_rate||e.respiratory_rate?`
          <div class="vitals">
            ${e.weight?`
            <div class="vital-item">
              <div class="vital-label">Poids</div>
              <div class="vital-value">${e.weight} kg</div>
            </div>
            `:""}
            ${e.temperature?`
            <div class="vital-item">
              <div class="vital-label">Température</div>
              <div class="vital-value">${e.temperature}°C</div>
            </div>
            `:""}
            ${e.heart_rate?`
            <div class="vital-item">
              <div class="vital-label">Fréquence Cardiaque</div>
              <div class="vital-value">${e.heart_rate} bpm</div>
            </div>
            `:""}
            ${e.respiratory_rate?`
            <div class="vital-item">
              <div class="vital-label">Fréquence Respiratoire</div>
              <div class="vital-value">${e.respiratory_rate}/min</div>
            </div>
            `:""}
          </div>
          `:""}

          ${e.symptoms?`
          <div class="medical-section">
            <div class="medical-title">Symptômes</div>
            <div class="medical-content">${e.symptoms}</div>
          </div>
          `:""}

          ${e.diagnosis?`
          <div class="medical-section">
            <div class="medical-title">Diagnostic</div>
            <div class="medical-content">${e.diagnosis}</div>
          </div>
          `:""}

          ${e.treatment?`
          <div class="medical-section">
            <div class="medical-title">Traitement</div>
            <div class="medical-content">${e.treatment}</div>
          </div>
          `:""}

          ${e.notes?`
          <div class="medical-section">
            <div class="medical-title">Notes</div>
            <div class="medical-content">${e.notes}</div>
          </div>
          `:""}

          ${e.follow_up_date?`
          <div class="medical-section">
            <div class="medical-title">Suivi Programmé</div>
            <div class="medical-content">
              <strong>Date:</strong> ${new Date(e.follow_up_date).toLocaleDateString("fr-FR")}<br>
              ${e.follow_up_notes?`<strong>Notes:</strong> ${e.follow_up_notes}`:""}
            </div>
          </div>
          `:""}

          ${e.cost?`
          <div class="medical-section">
            <div class="medical-title">Coût de la Consultation</div>
            <div class="medical-content">
              <strong>${e.cost} ${t.currency||"EUR"}</strong>
            </div>
          </div>
          `:""}

          <div class="footer">
            <p>Rapport généré le ${new Date().toLocaleDateString("fr-FR")} à ${new Date().toLocaleTimeString("fr-FR")}</p>
            <p>Vétérinaire: ${e.veterinarian_id||"N/A"}</p>
          </div>
        </body>
      </html>
    `;f.document.open(),f.document.write(m),f.document.close(),f.onload=function(){try{setTimeout(()=>{f.focus(),f.print(),typeof f.onafterprint=="function"?f.onafterprint=function(){try{f.close()}catch(g){console.error("Error closing print window:",g)}}:setTimeout(()=>{try{f.close()}catch(g){console.error("Error closing print window after timeout:",g)}},2e3)},500)}catch(g){console.error("Error during print process:",g),alert("Une erreur s'est produite lors de l'impression. Veuillez réessayer.")}}}catch(f){console.error("Error in print function:",f),alert("Une erreur s'est produite lors de la préparation de l'impression. Veuillez réessayer.")}};return r.jsxs(R,{size:"sm",variant:"outline",onClick:n,className:"gap-1",children:[r.jsx(Au,{className:"h-3 w-3"}),"Imprimer"]})}const Vd=b.forwardRef(({className:e,...t},n)=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:n,className:Ie("w-full caption-bottom text-sm",e),...t})}));Vd.displayName="Table";const zd=b.forwardRef(({className:e,...t},n)=>r.jsx("thead",{ref:n,className:Ie("[&_tr]:border-b",e),...t}));zd.displayName="TableHeader";const qd=b.forwardRef(({className:e,...t},n)=>r.jsx("tbody",{ref:n,className:Ie("[&_tr:last-child]:border-0",e),...t}));qd.displayName="TableBody";const JPe=b.forwardRef(({className:e,...t},n)=>r.jsx("tfoot",{ref:n,className:Ie("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));JPe.displayName="TableFooter";const la=b.forwardRef(({className:e,...t},n)=>r.jsx("tr",{ref:n,className:Ie("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));la.displayName="TableRow";const it=b.forwardRef(({className:e,...t},n)=>r.jsx("th",{ref:n,className:Ie("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));it.displayName="TableHead";const ot=b.forwardRef(({className:e,...t},n)=>r.jsx("td",{ref:n,className:Ie("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));ot.displayName="TableCell";const ZPe=b.forwardRef(({className:e,...t},n)=>r.jsx("caption",{ref:n,className:Ie("mt-4 text-sm text-muted-foreground",e),...t}));ZPe.displayName="TableCaption";const eAe=()=>{const{data:e=[],isLoading:t}=v3(),{data:n=[]}=wZ();x3(),y3(),oZ();const{settings:s}=xt();et();const{currentView:a}=cc("consultations"),[i,o]=b.useState(""),[l,c]=b.useState("all"),[u,d]=b.useState(a),[h,f]=b.useState(!1),[m,g]=b.useState(!1),[p,v]=b.useState(null),[j,x]=b.useState(null),[y,N]=b.useState(!1),[w,C]=b.useState(null),[S,_]=b.useState(null),[k,T]=b.useState(!1),[P,A]=b.useState([]),[B,L]=b.useState(""),H=Y=>n.filter(re=>re.consultation_id===Y),z=e.filter(Y=>{var J,ee,G;const re=`${((J=Y.client)==null?void 0:J.first_name)||""} ${((ee=Y.client)==null?void 0:ee.last_name)||""}`.trim(),oe=((G=Y.animal)==null?void 0:G.name)||"",ae=re.toLowerCase().includes(i.toLowerCase())||oe.toLowerCase().includes(i.toLowerCase())||Y.symptoms&&Y.symptoms.toLowerCase().includes(i.toLowerCase())||Y.diagnosis&&Y.diagnosis.toLowerCase().includes(i.toLowerCase());if(l==="all")return ae;const me=new Date(Y.consultation_date),ue=(new Date().getTime()-me.getTime())/(1e3*3600*24);switch(l){case"week":return ae&&ue<=7;case"month":return ae&&ue<=30;case"quarter":return ae&&ue<=90;default:return ae}}),$=Y=>{v(Y),g(!0)},I=Y=>{C(Y.animal_id),_(Y.id),N(!0)},E=Y=>{x({clientId:Y.client_id,animalId:Y.animal_id,consultation_date:new Date().toISOString(),consultation_type:"follow-up",symptoms:"",diagnosis:"",treatment:"",notes:`Suivi de la consultation du ${new Date(Y.consultation_date).toLocaleDateString("fr-FR")}`,status:"scheduled"}),f(!0)},q=Y=>{var oe;const re=H(Y.id);A(re),L(((oe=Y.animal)==null?void 0:oe.name)||"Animal inconnu"),T(!0)};return r.jsxs("div",{className:"container mx-auto px-6 py-8 space-y-8",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Consultations"}),r.jsx("p",{className:"text-muted-foreground mt-2",children:"Gérez et consultez tous les dossiers médicaux"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"flex border rounded-lg p-1",children:[r.jsx(R,{variant:u==="cards"?"default":"ghost",size:"sm",onClick:()=>d("cards"),className:"px-3",children:r.jsx(_o,{className:"h-4 w-4"})}),r.jsx(R,{variant:u==="table"?"default":"ghost",size:"sm",onClick:()=>d("table"),className:"px-3",children:r.jsx(ji,{className:"h-4 w-4"})})]}),r.jsxs(R,{className:"gap-2 medical-glow",onClick:()=>f(!0),children:[r.jsx(Ue,{className:"h-4 w-4"}),"Nouvelle Consultation"]})]})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsxs(fe,{className:"flex items-center gap-2",children:[r.jsx(Do,{className:"h-5 w-5"}),"Rechercher et filtrer"]})}),r.jsx(ne,{className:"space-y-4",children:r.jsxs("div",{className:"flex gap-4",children:[r.jsx(K,{placeholder:"Rechercher par client, animal, symptômes ou diagnostic...",value:i,onChange:Y=>o(Y.target.value),className:"max-w-md"}),r.jsxs(ve,{value:l,onValueChange:c,children:[r.jsx(pe,{className:"w-48",children:r.jsx(xe,{placeholder:"Période"})}),r.jsxs(ge,{children:[r.jsx(M,{value:"all",children:"Toutes les périodes"}),r.jsx(M,{value:"week",children:"Cette semaine"}),r.jsx(M,{value:"month",children:"Ce mois"}),r.jsx(M,{value:"quarter",children:"Ce trimestre"})]})]})]})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-lg font-semibold",children:["Consultations récentes (",z.length,")"]}),z.length===0?r.jsx(te,{children:r.jsxs(ne,{className:"p-8 text-center text-muted-foreground",children:[r.jsx(xr,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"Aucune consultation trouvée"}),r.jsx("p",{className:"text-sm",children:"Commencez par créer votre première consultation"})]})}):u==="cards"?z.map(Y=>{var re,oe,ae;return r.jsx(te,{className:"card-hover",children:r.jsx(ne,{className:"p-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("h4",{className:"text-lg font-semibold",children:((re=Y.animal)==null?void 0:re.name)||"Animal inconnu"}),r.jsx(Se,{variant:"secondary",children:"Consultation"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(Y.consultation_date).toLocaleDateString("fr-FR")})]}),r.jsxs("div",{className:"flex items-center gap-6 text-sm text-muted-foreground",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Rn,{className:"h-4 w-4"}),(oe=Y.client)==null?void 0:oe.first_name," ",(ae=Y.client)==null?void 0:ae.last_name]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(xr,{className:"h-3 w-3"}),"Consultation #",Y.id]})]})]}),r.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[Y.temperature&&r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(uf,{className:"h-4 w-4 text-primary"}),Y.temperature,"°C"]}),Y.weight&&r.jsxs("span",{children:[Y.weight," kg"]})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"space-y-2",children:[Y.symptoms&&r.jsxs(r.Fragment,{children:[r.jsx("h5",{className:"font-medium",children:"Symptômes:"}),r.jsx("p",{className:"text-sm",children:Y.symptoms})]}),Y.diagnosis&&r.jsxs(r.Fragment,{children:[r.jsx("h5",{className:"font-medium",children:"Diagnostic:"}),r.jsx("p",{className:"text-sm",children:Y.diagnosis})]})]}),r.jsxs("div",{className:"space-y-2",children:[Y.treatment&&r.jsxs(r.Fragment,{children:[r.jsx("h5",{className:"font-medium",children:"Traitement:"}),r.jsx("p",{className:"text-sm",children:Y.treatment})]}),(()=>{const me=H(Y.id);return me.length>0&&r.jsxs(r.Fragment,{children:[r.jsxs("h5",{className:"font-medium flex items-center gap-1",children:[r.jsx(Ki,{className:"h-4 w-4"}),"Prescriptions (",me.length,"):"]}),r.jsx("div",{className:"space-y-1",children:me.map(we=>r.jsxs("div",{className:"text-sm bg-blue-50 p-2 rounded border-l-2 border-blue-200",children:[r.jsxs("div",{className:"font-medium text-blue-800",children:["Prescription #",we.id.slice(-8)]}),r.jsxs("div",{className:"text-blue-600 text-xs",children:[new Date(we.prescription_date).toLocaleDateString("fr-FR")," - Status: ",we.status]}),we.medications&&we.medications.length>0&&r.jsxs("div",{className:"mt-1",children:[r.jsx("div",{className:"text-xs font-medium text-blue-700",children:"Médicaments:"}),we.medications.map((ue,J)=>r.jsxs("div",{className:"text-xs text-blue-600 ml-2",children:["• ",ue.medication_name," ",ue.dosage&&`- ${ue.dosage}`," ",ue.quantity&&`(${ue.quantity})`]},J))]})]},we.id))})]})})()]})]}),Y.notes&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("h5",{className:"font-medium",children:"Notes:"}),r.jsx("p",{className:"text-sm bg-muted p-3 rounded",children:Y.notes})]}),r.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[r.jsxs("span",{className:"text-sm text-muted-foreground",children:[r.jsx(Ye,{className:"h-3 w-3 inline mr-1"}),Y.followUp?`Suivi: ${Y.followUp}`:"Aucun suivi prévu"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(HE,{consultation:Y}),r.jsxs(R,{size:"sm",variant:"outline",onClick:()=>$(Y),className:"gap-1",children:[r.jsx(Ct,{className:"h-3 w-3"}),"Modifier"]}),r.jsxs(R,{size:"sm",variant:"default",onClick:()=>I(Y),className:"gap-1",children:[r.jsx(Ki,{className:"h-3 w-3"}),"Prescription"]}),r.jsx(R,{size:"sm",onClick:()=>E(Y),children:"Nouveau suivi"})]})]})]})})},Y.id)}):r.jsx(te,{children:r.jsx(ne,{className:"p-0",children:r.jsxs(Vd,{children:[r.jsx(zd,{children:r.jsxs(la,{children:[r.jsx(it,{children:"Animal / Client"}),r.jsx(it,{children:"Date"}),r.jsx(it,{children:"Symptômes"}),r.jsx(it,{children:"Diagnostic"}),r.jsx(it,{children:"Température"}),r.jsx(it,{children:"Prescriptions"}),r.jsx(it,{children:"Coût"}),r.jsx(it,{children:"Actions"})]})}),r.jsx(qd,{children:z.map(Y=>{var re,oe,ae;return r.jsxs(la,{children:[r.jsx(ot,{children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:(re=Y.animal)==null?void 0:re.name}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[(oe=Y.client)==null?void 0:oe.first_name," ",(ae=Y.client)==null?void 0:ae.last_name]})]})}),r.jsx(ot,{children:new Date(Y.consultation_date).toLocaleDateString("fr-FR")}),r.jsx(ot,{children:r.jsx("div",{className:"max-w-xs truncate",children:Y.symptoms||"-"})}),r.jsx(ot,{children:r.jsx("div",{className:"max-w-xs truncate",children:Y.diagnosis||"-"})}),r.jsx(ot,{children:Y.temperature?`${Y.temperature}°C`:"-"}),r.jsx(ot,{children:(()=>{const me=H(Y.id);return me.length>0?r.jsx("div",{className:"space-y-1",children:r.jsxs("div",{className:"flex items-center gap-2 cursor-pointer p-1 rounded transition-colors w-fit",onClick:()=>q(Y),title:"Cliquer pour voir les détails des prescriptions",children:[r.jsxs(Se,{variant:"outline",className:"text-xs",children:[me.length," prescription",me.length>1?"s":""]}),r.jsx(wn,{className:"h-3 w-3 text-blue-600 hover:text-blue-800"})]})}):r.jsx("span",{className:"text-muted-foreground text-xs",children:"Aucune"})})()}),r.jsx(ot,{children:Y.cost?`${Y.cost} ${s.currency}`:"-"}),r.jsx(ot,{children:r.jsxs("div",{className:"flex gap-1 flex-wrap",children:[r.jsx(HE,{consultation:Y}),r.jsx(R,{size:"sm",variant:"outline",onClick:()=>$(Y),title:"Modifier",children:r.jsx(Ct,{className:"h-3 w-3"})}),r.jsx(R,{size:"sm",variant:"default",onClick:()=>I(Y),title:"Nouvelle Prescription",children:r.jsx(Ki,{className:"h-3 w-3"})})]})})]},Y.id)})})]})})})]}),r.jsx(_d,{open:h,onOpenChange:Y=>{f(Y),Y||x(null)},prefillData:j||void 0}),r.jsx(XPe,{open:m,onOpenChange:g,consultation:p}),w&&S&&r.jsx(YC,{open:y,onOpenChange:N,petId:w,consultationId:S}),r.jsx(He,{open:k,onOpenChange:T,children:r.jsxs(We,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[r.jsxs(Ge,{children:[r.jsxs(Ke,{className:"flex items-center gap-2",children:[r.jsx(Ki,{className:"h-5 w-5"}),"Prescriptions pour ",B]}),r.jsxs(yt,{children:["Détails des ",P.length," prescription",P.length>1?"s":""," associée",P.length>1?"s":""," à cette consultation"]})]}),r.jsxs("div",{className:"space-y-6",children:[P.map((Y,re)=>r.jsxs(te,{className:"border-l-4 border-l-primary",children:[r.jsxs(he,{className:"pb-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(fe,{className:"text-lg",children:["Prescription #",Y.id.slice(-8)]}),r.jsx(Se,{variant:Y.status==="active"?"default":Y.status==="completed"?"secondary":"destructive",className:"text-xs",children:Y.status})]}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Date: ",new Date(Y.prescription_date).toLocaleDateString("fr-FR")," à ",new Date(Y.prescription_date).toLocaleTimeString("fr-FR"),Y.valid_until&&r.jsxs("span",{className:"ml-4",children:["Valide jusqu'au: ",new Date(Y.valid_until).toLocaleDateString("fr-FR")]})]})]}),r.jsxs(ne,{className:"space-y-4",children:[Y.diagnosis&&r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-sm mb-1",children:"Diagnostic:"}),r.jsx("p",{className:"text-sm bg-muted p-2 rounded",children:Y.diagnosis})]}),Y.medications&&Y.medications.length>0&&r.jsxs("div",{children:[r.jsxs("h4",{className:"font-medium text-sm mb-2",children:["Médicaments (",Y.medications.length,"):"]}),r.jsx("div",{className:"grid gap-3 md:grid-cols-2",children:Y.medications.map((oe,ae)=>r.jsxs("div",{className:"bg-muted p-3 rounded-lg",children:[r.jsx("div",{className:"font-medium",children:oe.medication_name}),r.jsxs("div",{className:"text-xs space-y-1 mt-1",children:[oe.dosage&&r.jsxs("div",{children:["Dosage: ",oe.dosage]}),oe.frequency&&r.jsxs("div",{children:["Fréquence: ",oe.frequency]}),oe.duration&&r.jsxs("div",{children:["Durée: ",oe.duration]}),oe.quantity&&r.jsxs("div",{children:["Quantité: ",oe.quantity]}),oe.route&&r.jsxs("div",{children:["Voie: ",oe.route]})]}),oe.instructions&&r.jsxs("div",{className:"mt-2 text-xs bg-background p-2 rounded border",children:[r.jsx("span",{className:"font-medium",children:"Instructions: "}),oe.instructions]})]},ae))})]}),Y.notes&&r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-sm mb-1",children:"Notes:"}),r.jsx("p",{className:"text-sm bg-muted p-2 rounded",children:Y.notes})]}),r.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground pt-2 border-t",children:[r.jsxs("span",{children:["Renouvellements: ",Y.refill_count||0]}),r.jsxs("span",{children:["Créée le: ",new Date(Y.created_at).toLocaleDateString("fr-FR")]}),Y.updated_at!==Y.created_at&&r.jsxs("span",{children:["Modifiée le: ",new Date(Y.updated_at).toLocaleDateString("fr-FR")]})]})]})]},Y.id)),P.length===0&&r.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[r.jsx(Ki,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),r.jsx("p",{children:"Aucune prescription trouvée pour cette consultation"})]})]})]})})]})},tAe=({consultation:e,open:t,onOpenChange:n,onEdit:s})=>{if(!e)return null;const{getClientById:a,getPetById:i}=ct(),o=a(e.clientId),l=i(e.petId);return r.jsx(He,{open:t,onOpenChange:n,children:r.jsxs(We,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(Ge,{children:[r.jsxs(Ke,{children:["Consultation #",e.id," - ",Oa(e.date)]}),r.jsx(yt,{children:"Détails de la consultation générale"})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-6",children:[r.jsx(Ye,{className:"h-5 w-5"}),r.jsx("h3",{className:"text-lg font-semibold",children:e.purpose||"Consultation générale"})]}),r.jsxs("div",{className:"flex gap-8 text-sm text-muted-foreground",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(lt,{className:"h-4 w-4"}),l==null?void 0:l.name," (",l==null?void 0:l.type,")"]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Rn,{className:"h-4 w-4"}),o==null?void 0:o.name]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(bn,{className:"h-4 w-4"}),e.veterinarian]})]}),e.symptoms&&r.jsx(te,{children:r.jsx(ne,{children:r.jsxs("p",{children:[r.jsx("strong",{children:"Symptômes:"})," ",e.symptoms]})})}),r.jsxs(Ai,{defaultValue:"overview",className:"space-y-4",children:[r.jsxs(qa,{className:"grid grid-cols-2",children:[r.jsx(kt,{value:"overview",children:"Détails"}),r.jsx(kt,{value:"prescriptions",children:"Prescriptions"})]}),r.jsx(Tt,{value:"overview",children:r.jsx(te,{children:r.jsxs(ne,{className:"space-y-2 text-sm",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Motif:"})," ",e.purpose||"Non spécifié"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Notes:"})," ",e.notes||"Aucune"]}),e.photos&&e.photos.length>0&&r.jsxs("div",{className:"pt-4",children:[r.jsx("h5",{className:"font-medium mb-2",children:"Photos de la consultation"}),r.jsx("div",{className:"flex gap-2 overflow-x-auto",children:e.photos.map((c,u)=>r.jsx("div",{className:"relative",children:r.jsx("img",{src:c,alt:`consult-photo-${u}`,className:"h-32 w-32 object-cover rounded cursor-pointer hover:opacity-80"})},u))})]})]})})}),r.jsx(Tt,{value:"prescriptions",children:r.jsx(q6,{petId:e.petId,consultationId:e.id})})]})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[r.jsxs(R,{variant:"outline",onClick:s,children:[r.jsx(Ct,{className:"h-4 w-4"})," Modifier"]}),r.jsx(W6,{consultation:e})]})]})})};function nAe({prescription:e}){const{settings:t}=xt(),{logo:n,clinicName:s,address:a,phone:i,email:o,website:l,currency:c}=t,d=e.medications.map(f=>f.cost*(f.quantity||1)).reduce((f,m)=>f+m,0),h=()=>{window.print()};return r.jsxs("div",{className:"p-8 max-w-screen-lg mx-auto bg-white text-gray-800",children:[r.jsxs("header",{className:"flex items-center justify-between mb-8",children:[n&&r.jsx("img",{src:n,alt:"Logo clinique",className:"h-16 w-16 object-contain"}),r.jsxs("div",{className:"text-center flex-1",children:[r.jsx("h1",{className:"text-2xl font-bold",children:s}),r.jsx("p",{className:"text-sm",children:a}),r.jsxs("p",{className:"text-sm",children:[i," | ",o]}),l&&r.jsx("p",{className:"text-sm",children:l})]}),r.jsx("div",{children:r.jsx(R,{variant:"outline",onClick:h,className:"uppercase text-sm",children:"Imprimer"})})]}),r.jsxs("section",{className:"mb-12",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Ordonnance"}),r.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-4",children:[r.jsxs("div",{children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Date :"})," ",e.date]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Patient :"})," ",e.petName," (",e.clientName,")"]})]}),r.jsxs("div",{children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Prescrit par :"})," ",e.prescribedBy]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Diagnostic :"})," ",e.diagnosis]})]})]}),r.jsxs("table",{className:"w-full border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"border-b py-2 text-left",children:"Médicament"}),r.jsx("th",{className:"border-b py-2 text-left",children:"Dosage"}),r.jsx("th",{className:"border-b py-2 text-left",children:"Fréquence"}),r.jsx("th",{className:"border-b py-2 text-left",children:"Durée"})]})}),r.jsx("tbody",{children:e.medications.map(f=>r.jsxs("tr",{className:"border-b",children:[r.jsx("td",{className:"py-2",children:f.name}),r.jsx("td",{className:"py-2",children:f.dosage}),r.jsx("td",{className:"py-2",children:f.frequency}),r.jsx("td",{className:"py-2",children:f.duration})]},f.id))})]})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Facture"}),r.jsxs("table",{className:"w-full border-collapse mb-4",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"border-b py-2 text-left",children:"Produit / Service"}),r.jsx("th",{className:"border-b py-2 text-right",children:"Quantité"}),r.jsxs("th",{className:"border-b py-2 text-right",children:["Prix Unitaire (",c,")"]}),r.jsxs("th",{className:"border-b py-2 text-right",children:["Total (",c,")"]})]})}),r.jsx("tbody",{children:e.medications.map(f=>{const m=f.quantity||1,g=(f.cost||0)*m;return r.jsxs("tr",{className:"border-b",children:[r.jsx("td",{className:"py-2",children:f.name}),r.jsx("td",{className:"py-2 text-right",children:m}),r.jsx("td",{className:"py-2 text-right",children:f.cost.toFixed(2)}),r.jsx("td",{className:"py-2 text-right",children:g.toFixed(2)})]},f.id)})}),r.jsx("tfoot",{children:r.jsxs("tr",{children:[r.jsx("td",{colSpan:3,className:"py-2 text-right font-semibold",children:"Montant total :"}),r.jsx("td",{className:"py-2 text-right font-semibold",children:d.toFixed(2)})]})})]})]})]})}const rAe=()=>{var $,I;const{consultations:e,prescriptions:t,getClientById:n,getPetById:s}=ct(),[a,i]=b.useState(""),[o,l]=b.useState("all"),[c,u]=b.useState("all"),[d,h]=b.useState("all"),[f,m]=b.useState(""),[g,p]=b.useState("cards"),[v,j]=b.useState(!1),[x,y]=b.useState(null),[N,w]=b.useState(!1),[C,S]=b.useState(null),[_,k]=b.useState(!1),[T,P]=b.useState(null),A=[...e.map(E=>{var q;return{id:E.id,date:E.date,petName:E.petName,petType:((q=s(E.petId))==null?void 0:q.type)||"",client:E.clientName,type:"consultation",title:E.diagnosis||"Consultation",veterinarian:E.notes||"Non spécifié",details:E.symptoms||"",prescriptions:[],cost:E.cost,status:"completed"}})].sort((E,q)=>new Date(q.date).getTime()-new Date(E.date).getTime()),B=t.map(E=>{var q,Y;return{id:E.id,date:E.date,petName:E.petName,client:E.clientName,medication:E.medications.map(re=>re.name).join(", "),dosage:((q=E.medications[0])==null?void 0:q.dosage)||"",frequency:((Y=E.medications[0])==null?void 0:Y.frequency)||"",duration:E.duration,veterinarian:E.prescribedBy,status:E.status}}),L=A.filter(E=>{const q=E.petName.toLowerCase().includes(a.toLowerCase())||E.client.toLowerCase().includes(a.toLowerCase())||E.title.toLowerCase().includes(a.toLowerCase()),Y=o==="all"||E.petName.toLowerCase().includes(o.toLowerCase()),re=c==="all"||E.type===c;let oe=!0;if(d==="today"){const ae=new Date().toISOString().split("T")[0];oe=E.date===ae}else if(d==="week"){const ae=new Date(E.date),me=new Date,we=me.getDay(),ue=me.getDate()-we+(we===0?-6:1),J=new Date(me.setDate(ue)),ee=new Date(J);ee.setDate(J.getDate()+6),oe=ae>=J&&ae<=ee}else d==="specific"&&(oe=f&&E.date===f);return q&&Y&&re&&oe}),H=B.filter(E=>{const q=E.petName.toLowerCase().includes(a.toLowerCase())||E.client.toLowerCase().includes(a.toLowerCase())||E.medication.toLowerCase().includes(a.toLowerCase()),Y=o==="all"||E.petName.toLowerCase().includes(o.toLowerCase()),re=c==="all"||!0;let oe=!0;if(d==="today"){const ae=new Date().toISOString().split("T")[0];oe=E.date===ae}else if(d==="week"){const ae=new Date(E.date),me=new Date,we=me.getDay(),ue=me.getDate()-we+(we===0?-6:1),J=new Date(me.setDate(ue)),ee=new Date(J);ee.setDate(J.getDate()+6),oe=ae>=J&&ae<=ee}else d==="specific"&&(oe=f&&E.date===f);return q&&Y&&re&&oe}),z={active:"bg-blue-100 text-blue-800 hover:bg-blue-200",completed:"bg-green-100 text-green-800 hover:bg-green-200",discontinued:"bg-red-100 text-red-800 hover:bg-red-200"};return r.jsxs("div",{className:"container mx-auto px-6 py-8 space-y-8",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Historique Médical"}),r.jsx("p",{className:"text-muted-foreground mt-2",children:"Consultez l'historique complet des soins et traitements"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(R,{size:"sm",variant:g==="cards"?"default":"outline",onClick:()=>p("cards"),className:"gap-2",children:[r.jsx(_o,{className:"h-4 w-4"}),"Cartes"]}),r.jsxs(R,{size:"sm",variant:g==="table"?"default":"outline",onClick:()=>p("table"),className:"gap-2",children:[r.jsx(ji,{className:"h-4 w-4"}),"Tableau"]})]})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsxs(fe,{className:"flex items-center gap-2",children:[r.jsx(Do,{className:"h-5 w-5"}),"Rechercher"]})}),r.jsxs(ne,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(K,{placeholder:"Rechercher par nom, animal, diagnostic...",value:a,onChange:E=>i(E.target.value)}),r.jsxs(ve,{value:o,onValueChange:l,children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Filtrer par animal"})}),r.jsxs(ge,{children:[r.jsx(M,{value:"all",children:"Tous les animaux"}),Array.from(new Set(A.map(E=>E.petName))).map(E=>r.jsx(M,{value:E,children:E},E))]})]}),r.jsxs(ve,{value:c,onValueChange:u,children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Filtrer par type"})}),r.jsxs(ge,{children:[r.jsx(M,{value:"all",children:"Tous types"}),r.jsx(M,{value:"consultation",children:"Consultations"}),r.jsx(M,{value:"treatment",children:"Traitements"}),r.jsx(M,{value:"surgery",children:"Chirurgies"})]})]}),r.jsxs(ve,{value:d,onValueChange:h,children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Période"})}),r.jsxs(ge,{children:[r.jsx(M,{value:"all",children:"Toute période"}),r.jsx(M,{value:"today",children:"Aujourd'hui"}),r.jsx(M,{value:"week",children:"Cette semaine"}),r.jsx(M,{value:"specific",children:"Date spécifique"})]})]})]}),d==="specific"&&r.jsx(K,{type:"date",value:f,onChange:E=>m(E.target.value),className:"max-w-xs"})]})]}),r.jsxs(Ai,{defaultValue:"medical",className:"space-y-4",children:[r.jsxs(qa,{className:"grid w-full grid-cols-2",children:[r.jsxs(kt,{value:"medical",className:"gap-2",children:[r.jsx(Ye,{className:"h-4 w-4"}),"Historique Médical"]}),r.jsxs(kt,{value:"prescriptions",className:"gap-2",children:[r.jsx(lt,{className:"h-4 w-4"}),"Prescriptions"]})]}),r.jsxs(Tt,{value:"medical",className:"space-y-4",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("h3",{className:"text-lg font-semibold",children:["Historique des consultations (",L.length," entrées)"]})}),g==="cards"?r.jsx("div",{className:"grid gap-6",children:L.map(E=>r.jsx(te,{className:"card-hover",children:r.jsx(ne,{className:"p-6",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"space-y-3 flex-1",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ye,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"font-medium",children:new Date(E.date).toLocaleDateString("fr-FR")})]}),r.jsx(Se,{variant:"outline",className:"text-xs",children:E.type})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-lg font-semibold",children:E.title}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mt-1",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(lt,{className:"h-3 w-3"}),E.petName]}),r.jsxs("span",{children:["Client: ",E.client]}),r.jsxs("span",{children:["Vétérinaire: ",E.veterinarian]})]})]}),E.details&&r.jsx("p",{className:"text-sm text-muted-foreground",children:E.details}),E.cost&&r.jsx("div",{className:"text-sm",children:r.jsxs("span",{className:"font-medium",children:["Coût: ",E.cost," MAD"]})})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(R,{size:"sm",variant:"outline",onClick:()=>{y(E),j(!0)},children:r.jsx(wn,{className:"h-4 w-4"})}),r.jsx(R,{size:"sm",variant:"outline",children:r.jsx(Ct,{className:"h-4 w-4"})})]})]})})},E.id))}):r.jsx(te,{children:r.jsx(ne,{className:"p-0",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"border-b",children:r.jsxs("tr",{className:"text-left",children:[r.jsx("th",{className:"p-4 font-medium",children:"Date"}),r.jsx("th",{className:"p-4 font-medium",children:"Type"}),r.jsx("th",{className:"p-4 font-medium",children:"Titre"}),r.jsx("th",{className:"p-4 font-medium",children:"Animal"}),r.jsx("th",{className:"p-4 font-medium",children:"Client"}),r.jsx("th",{className:"p-4 font-medium",children:"Vétérinaire"}),r.jsx("th",{className:"p-4 font-medium",children:"Actions"})]})}),r.jsx("tbody",{children:L.map(E=>r.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[r.jsx("td",{className:"p-4",children:new Date(E.date).toLocaleDateString("fr-FR")}),r.jsx("td",{className:"p-4",children:r.jsx(Se,{variant:"outline",className:"text-xs",children:E.type})}),r.jsxs("td",{className:"p-4",children:[r.jsx("div",{className:"font-medium",children:E.title}),E.details&&r.jsx("div",{className:"text-sm text-muted-foreground",children:E.details})]}),r.jsx("td",{className:"p-4",children:E.petName}),r.jsx("td",{className:"p-4",children:E.client}),r.jsx("td",{className:"p-4",children:E.veterinarian}),r.jsx("td",{className:"p-4",children:r.jsxs("div",{className:"flex gap-1",children:[r.jsx(R,{size:"sm",variant:"outline",onClick:()=>{y(E),j(!0)},children:r.jsx(wn,{className:"h-4 w-4"})}),r.jsx(R,{size:"sm",variant:"outline",children:r.jsx(Ct,{className:"h-4 w-4"})})]})})]},E.id))})]})})})})]}),r.jsxs(Tt,{value:"prescriptions",className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("h3",{className:"text-lg font-semibold",children:["Historique des prescriptions (",H.length," entrées)"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(R,{size:"sm",variant:g==="cards"?"default":"outline",onClick:()=>p("cards"),className:"gap-2",children:[r.jsx(_o,{className:"h-4 w-4"}),"Cartes"]}),r.jsxs(R,{size:"sm",variant:g==="table"?"default":"outline",onClick:()=>p("table"),className:"gap-2",children:[r.jsx(ji,{className:"h-4 w-4"}),"Tableau"]})]})]}),g==="cards"?H.map(E=>r.jsx(te,{className:"card-hover",children:r.jsx(ne,{className:"p-6",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"space-y-3 flex-1",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ye,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"font-medium",children:new Date(E.date).toLocaleDateString("fr-FR")})]}),r.jsx(Se,{variant:"outline",className:z[E.status],children:E.status==="active"?"Actif":E.status==="completed"?"Terminé":"Arrêté"})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-lg font-semibold",children:E.medication}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mt-1",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(lt,{className:"h-3 w-3"}),E.petName]}),r.jsxs("span",{children:["Client: ",E.client]}),r.jsxs("span",{children:["Prescrit par: ",E.veterinarian]})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Dosage:"})," ",E.dosage]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Fréquence:"})," ",E.frequency]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Durée:"})," ",E.duration]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(R,{size:"sm",variant:"outline",onClick:()=>{S(E),w(!0)},children:"Renouveler"}),r.jsx(LN,{prescription:t.find(q=>q.id===E.id)}),r.jsx(R,{size:"sm",variant:"outline",onClick:()=>{const q=t.find(Y=>Y.id===E.id);P(q),k(!0)},children:"Facture"})]})]})})},E.id)):r.jsx(te,{children:r.jsx(ne,{className:"p-0",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"border-b",children:r.jsxs("tr",{className:"text-left",children:[r.jsx("th",{className:"p-4 font-medium",children:"Date"}),r.jsx("th",{className:"p-4 font-medium",children:"Statut"}),r.jsx("th",{className:"p-4 font-medium",children:"Médicament"}),r.jsx("th",{className:"p-4 font-medium",children:"Animal"}),r.jsx("th",{className:"p-4 font-medium",children:"Client"}),r.jsx("th",{className:"p-4 font-medium",children:"Dosage"}),r.jsx("th",{className:"p-4 font-medium",children:"Durée"}),r.jsx("th",{className:"p-4 font-medium",children:"Actions"})]})}),r.jsx("tbody",{children:H.map(E=>r.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[r.jsx("td",{className:"p-4",children:new Date(E.date).toLocaleDateString("fr-FR")}),r.jsx("td",{className:"p-4",children:r.jsx(Se,{variant:"outline",className:z[E.status],children:E.status==="active"?"Actif":E.status==="completed"?"Terminé":"Arrêté"})}),r.jsxs("td",{className:"p-4",children:[r.jsx("div",{className:"font-medium",children:E.medication}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Prescrit par: ",E.veterinarian]})]}),r.jsx("td",{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(lt,{className:"h-4 w-4 text-primary"}),E.petName]})}),r.jsx("td",{className:"p-4",children:E.client}),r.jsx("td",{className:"p-4",children:r.jsxs("div",{className:"text-sm",children:[r.jsx("div",{children:E.dosage}),r.jsx("div",{className:"text-muted-foreground",children:E.frequency})]})}),r.jsx("td",{className:"p-4",children:E.duration}),r.jsx("td",{className:"p-4",children:r.jsxs("div",{className:"flex gap-1",children:[r.jsx(R,{size:"sm",variant:"outline",onClick:()=>{S(E),w(!0)},children:"Renouveler"}),r.jsx(LN,{prescription:t.find(q=>q.id===E.id)}),r.jsx(R,{size:"sm",variant:"outline",onClick:()=>{const q=t.find(Y=>Y.id===E.id);P(q),k(!0)},children:"Facture"})]})})]},E.id))})]})})})})]})]}),r.jsx(tAe,{consultation:x,open:v,onOpenChange:j,onEdit:()=>{}}),(C==null?void 0:C.id)&&r.jsx(YC,{open:N,onOpenChange:w,petId:((I=($=t.find(E=>E.id===(C==null?void 0:C.id)))==null?void 0:$.petId)==null?void 0:I.toString())||"",consultationId:C.id.toString()}),r.jsx(He,{open:_,onOpenChange:k,children:r.jsx(We,{children:T&&r.jsx(nAe,{prescription:T})})})]})},H6=({photos:e,onPhotosChange:t,farmName:n})=>{const{toast:s}=et(),a=b.useRef(null),[i,o]=b.useState(!1),[l,c]=b.useState(!1),[u,d]=b.useState(null),[h,f]=b.useState({description:"",category:"general"}),m=N=>{const w=N.target.files;if(!w||w.length===0)return;const C=Array.from(w).map(S=>{const _=new FileReader,k={id:`photo_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,url:"",description:h.description||`Photo de ${n}`,category:h.category,uploadedAt:new Date().toISOString()};return _.onload=T=>{var A;k.url=(A=T.target)==null?void 0:A.result;const P=[...e,k];t(P)},_.readAsDataURL(S),k});f({description:"",category:"general"}),o(!1),s({title:"Photos ajoutées",description:`${C.length} photo(s) ajoutée(s) à l'exploitation ${n}`})},g=N=>{const w=e.filter(C=>C.id!==N);t(w),s({title:"Photo supprimée",description:"La photo a été supprimée avec succès"})},p=N=>{d(N),f({description:N.description,category:N.category}),c(!0)},v=()=>{if(!u)return;const N=e.map(w=>w.id===u.id?{...w,...h}:w);t(N),c(!1),d(null),f({description:"",category:"general"}),s({title:"Photo modifiée",description:"La photo a été modifiée avec succès"})},j=N=>({cheptel:"Cheptel",batiments:"Bâtiments",equipements:"Équipements",general:"Général"})[N],x=N=>({cheptel:"bg-blue-100 text-blue-800",batiments:"bg-green-100 text-green-800",equipements:"bg-orange-100 text-orange-800",general:"bg-gray-100 text-gray-800"})[N],y=e.reduce((N,w)=>(N[w.category]||(N[w.category]=[]),N[w.category].push(w),N),{});return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Photos de l'exploitation"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Gérez les photos de votre exploitation, du cheptel et des équipements"})]}),r.jsxs(He,{open:i,onOpenChange:o,children:[r.jsx(Bx,{asChild:!0,children:r.jsxs(R,{className:"gap-2",children:[r.jsx(Ue,{className:"h-4 w-4"}),"Ajouter des photos"]})}),r.jsxs(We,{className:"max-w-md",children:[r.jsx(Ge,{children:r.jsx(Ke,{children:"Ajouter des photos"})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(D,{htmlFor:"photo-description",children:"Description"}),r.jsx(K,{id:"photo-description",placeholder:"Description des photos",value:h.description,onChange:N=>f({...h,description:N.target.value})})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"photo-category",children:"Catégorie"}),r.jsxs(ve,{value:h.category,onValueChange:N=>f({...h,category:N}),children:[r.jsx(pe,{children:r.jsx(xe,{})}),r.jsxs(ge,{children:[r.jsx(M,{value:"cheptel",children:"Cheptel"}),r.jsx(M,{value:"batiments",children:"Bâtiments"}),r.jsx(M,{value:"equipements",children:"Équipements"}),r.jsx(M,{value:"general",children:"Général"})]})]})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"photo-files",children:"Sélectionner des photos"}),r.jsx(K,{id:"photo-files",type:"file",multiple:!0,accept:"image/*",ref:a,onChange:m,className:"cursor-pointer"})]})]})]})]})]}),e.length===0?r.jsx(te,{children:r.jsxs(ne,{className:"p-8 text-center",children:[r.jsx(_u,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Aucune photo ajoutée"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Commencez par ajouter des photos de votre exploitation"})]})}):r.jsx("div",{className:"space-y-6",children:Object.entries(y).map(([N,w])=>r.jsxs(te,{children:[r.jsx(he,{children:r.jsxs(fe,{className:"flex items-center gap-2",children:[r.jsx(Se,{className:x(N),children:j(N)}),r.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",w.length," photo",w.length>1?"s":"",")"]})]})}),r.jsx(ne,{children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:w.map(C=>r.jsxs("div",{className:"group relative",children:[r.jsxs("div",{className:"aspect-square rounded-lg overflow-hidden border bg-muted",children:[r.jsx("img",{src:C.url,alt:C.description,className:"w-full h-full object-cover"}),r.jsxs("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[r.jsx(R,{size:"sm",variant:"secondary",onClick:()=>d(C),children:r.jsx(wn,{className:"h-4 w-4"})}),r.jsx(R,{size:"sm",variant:"secondary",onClick:()=>p(C),children:r.jsx(Ct,{className:"h-4 w-4"})}),r.jsx(R,{size:"sm",variant:"destructive",onClick:()=>g(C.id),children:r.jsx(rn,{className:"h-4 w-4"})})]})]}),r.jsxs("div",{className:"mt-2",children:[r.jsx("p",{className:"text-sm font-medium truncate",children:C.description}),r.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(C.uploadedAt).toLocaleDateString()})]})]},C.id))})})]},N))}),r.jsx(He,{open:l,onOpenChange:c,children:r.jsxs(We,{className:"max-w-md",children:[r.jsx(Ge,{children:r.jsx(Ke,{children:"Modifier la photo"})}),r.jsxs("div",{className:"space-y-4",children:[u&&r.jsx("div",{className:"aspect-square rounded-lg overflow-hidden border",children:r.jsx("img",{src:u.url,alt:u.description,className:"w-full h-full object-cover"})}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"edit-description",children:"Description"}),r.jsx(K,{id:"edit-description",value:h.description,onChange:N=>f({...h,description:N.target.value})})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"edit-category",children:"Catégorie"}),r.jsxs(ve,{value:h.category,onValueChange:N=>f({...h,category:N}),children:[r.jsx(pe,{children:r.jsx(xe,{})}),r.jsxs(ge,{children:[r.jsx(M,{value:"cheptel",children:"Cheptel"}),r.jsx(M,{value:"batiments",children:"Bâtiments"}),r.jsx(M,{value:"equipements",children:"Équipements"}),r.jsx(M,{value:"general",children:"Général"})]})]})]}),r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsx(R,{variant:"outline",onClick:()=>c(!1),children:"Annuler"}),r.jsx(R,{onClick:v,children:"Enregistrer"})]})]})]})})]})},sAe=({open:e,onOpenChange:t})=>{var j,x,y,N,w,C;const{addFarm:n}=ct(),{settings:s}=xt(),{toast:a}=et(),[i,o]=b.useState({name:"",owner:"",ownerIdNumber:"",address:"",coordinates:{latitude:0,longitude:0},phone:"",email:"",types:[],totalAnimals:0,animalDetails:[],veterinarian:"",notes:"",status:"active",registrationNumber:"",surfaceArea:0,buildingDetails:"",equipmentDetails:"",certifications:[],insuranceDetails:"",emergencyContact:{name:"",phone:"",relation:""},photos:[]}),[l,c]=b.useState({category:"",maleCount:0,femaleCount:0,breeds:[],ageGroups:[]});if(!s.farmManagement)return console.error("farmManagement settings not found, using defaults"),r.jsx(He,{open:e,onOpenChange:t,children:r.jsx(We,{children:r.jsxs(Ge,{children:[r.jsx(Ke,{children:"Erreur de configuration"}),r.jsx(yt,{children:"Les paramètres de gestion des fermes ne sont pas configurés. Veuillez recharger la page ou vérifier les paramètres."})]})})});b.useEffect(()=>{e||(o({name:"",owner:"",ownerIdNumber:"",address:"",coordinates:{latitude:0,longitude:0},phone:"",email:"",types:[],totalAnimals:0,animalDetails:[],veterinarian:"",notes:"",status:"active",registrationNumber:"",surfaceArea:0,buildingDetails:"",equipmentDetails:"",certifications:[],insuranceDetails:"",emergencyContact:{name:"",phone:"",relation:""},photos:[]}),c({category:"",maleCount:0,femaleCount:0,breeds:[],ageGroups:[]}))},[e]);const u=(S,_)=>{if(S.includes(".")){const[k,T]=S.split(".");o(P=>{const A=P[k];return{...P,[k]:{...A,[T]:_}}})}else o(k=>({...k,[S]:_}))},d=S=>{o(_=>{var k;return{..._,types:(k=_.types)!=null&&k.includes(S)?_.types.filter(T=>T!==S):[..._.types||[],S]}})},h=S=>{o(_=>{var k;return{..._,certifications:(k=_.certifications)!=null&&k.includes(S)?_.certifications.filter(T=>T!==S):[..._.certifications||[],S]}})},f=()=>{if(!l.category){a({title:"Erreur",description:"Veuillez sélectionner une catégorie d'animal",variant:"destructive"});return}o(S=>({...S,animalDetails:[...S.animalDetails||[],{...l}]})),c({category:"",maleCount:0,femaleCount:0,breeds:[],ageGroups:[]})},m=S=>{o(_=>{var k;return{..._,animalDetails:((k=_.animalDetails)==null?void 0:k.filter((T,P)=>P!==S))||[]}})},g=S=>{c(_=>({..._,breeds:[..._.breeds,S]}))},p=S=>{c(_=>({..._,breeds:_.breeds.filter(k=>k!==S)}))},v=S=>{var k;if(S.preventDefault(),!i.name||!i.owner||!i.address||!((k=i.types)!=null&&k.length)){a({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires",variant:"destructive"});return}const _={name:i.name,owner:i.owner,ownerIdNumber:i.ownerIdNumber||"",address:i.address,coordinates:i.coordinates||{latitude:0,longitude:0},phone:i.phone||"",email:i.email||"",types:i.types||[],totalAnimals:(i.animalDetails||[]).reduce((T,P)=>T+P.maleCount+P.femaleCount,0),animalDetails:i.animalDetails||[],lastVisit:new Date().toISOString().split("T")[0],status:i.status||"active",veterinarian:i.veterinarian||"",notes:i.notes||"",registrationNumber:i.registrationNumber||"",surfaceArea:i.surfaceArea||0,buildingDetails:i.buildingDetails||"",equipmentDetails:i.equipmentDetails||"",certifications:i.certifications||[],insuranceDetails:i.insuranceDetails||"",emergencyContact:i.emergencyContact||{name:"",phone:"",relation:""}};n(_),a({title:"Succès",description:"Nouvelle exploitation créée avec succès"}),t(!1)};return r.jsx(He,{open:e,onOpenChange:t,children:r.jsxs(We,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(Ge,{children:[r.jsx(Ke,{children:"Nouvelle Exploitation Agricole"}),r.jsx(yt,{children:"Créez une nouvelle exploitation agricole avec toutes les informations détaillées"})]}),r.jsxs("form",{onSubmit:v,className:"space-y-6",children:[r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{children:"Informations générales"})}),r.jsxs(ne,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(D,{htmlFor:"name",children:"Nom de l'exploitation *"}),r.jsx(K,{id:"name",value:i.name||"",onChange:S=>u("name",S.target.value),placeholder:"Nom de l'exploitation"})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"owner",children:"Propriétaire *"}),r.jsx(K,{id:"owner",value:i.owner||"",onChange:S=>u("owner",S.target.value),placeholder:"Nom du propriétaire"})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"ownerIdNumber",children:"N° pièce d'identité du propriétaire"}),r.jsx(K,{id:"ownerIdNumber",value:i.ownerIdNumber||"",onChange:S=>u("ownerIdNumber",S.target.value),placeholder:"Numéro de carte d'identité, passeport, etc."})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx(D,{htmlFor:"address",children:"Adresse *"}),r.jsx(K,{id:"address",value:i.address||"",onChange:S=>u("address",S.target.value),placeholder:"Adresse complète"})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"latitude",children:"Latitude"}),r.jsx(K,{id:"latitude",type:"number",step:"0.0001",value:((j=i.coordinates)==null?void 0:j.latitude)||"",onChange:S=>u("coordinates.latitude",parseFloat(S.target.value)||0),placeholder:"47.9056"})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"longitude",children:"Longitude"}),r.jsx(K,{id:"longitude",type:"number",step:"0.0001",value:((x=i.coordinates)==null?void 0:x.longitude)||"",onChange:S=>u("coordinates.longitude",parseFloat(S.target.value)||0),placeholder:"1.9190"})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"phone",children:"Téléphone"}),r.jsx(K,{id:"phone",value:i.phone||"",onChange:S=>u("phone",S.target.value),placeholder:"Téléphone"})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"email",children:"Email"}),r.jsx(K,{id:"email",type:"email",value:i.email||"",onChange:S=>u("email",S.target.value),placeholder:"Email"})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"veterinarian",children:"Vétérinaire responsable"}),r.jsx(K,{id:"veterinarian",value:i.veterinarian||"",onChange:S=>u("veterinarian",S.target.value),placeholder:"Vétérinaire"})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"status",children:"Statut"}),r.jsxs(ve,{value:i.status,onValueChange:S=>u("status",S),children:[r.jsx(pe,{children:r.jsx(xe,{})}),r.jsxs(ge,{children:[r.jsx(M,{value:"active",children:"Active"}),r.jsx(M,{value:"attention",children:"Attention"}),r.jsx(M,{value:"urgent",children:"Urgent"})]})]})]})]})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{children:"Types d'élevage *"})}),r.jsx(ne,{children:r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:s.farmManagement.farmTypes.map(S=>{var _;return r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ia,{id:`type-${S}`,checked:((_=i.types)==null?void 0:_.includes(S))||!1,onCheckedChange:()=>d(S)}),r.jsx(D,{htmlFor:`type-${S}`,children:S})]},S)})})})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{children:"Détails du cheptel"})}),r.jsxs(ne,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 p-4 border rounded-lg",children:[r.jsxs("div",{children:[r.jsx(D,{children:"Catégorie"}),r.jsxs(ve,{value:l.category,onValueChange:S=>c(_=>({..._,category:S})),children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Sélectionner"})}),r.jsx(ge,{children:s.farmManagement.animalCategories.map(S=>r.jsx(M,{value:S,children:S},S))})]})]}),r.jsxs("div",{children:[r.jsx(D,{children:"Mâles"}),r.jsx(K,{type:"number",value:l.maleCount,onChange:S=>c(_=>({..._,maleCount:parseInt(S.target.value)||0})),placeholder:"0"})]}),r.jsxs("div",{children:[r.jsx(D,{children:"Femelles"}),r.jsx(K,{type:"number",value:l.femaleCount,onChange:S=>c(_=>({..._,femaleCount:parseInt(S.target.value)||0})),placeholder:"0"})]}),r.jsx("div",{className:"flex items-end",children:r.jsx(R,{type:"button",onClick:f,className:"w-full",children:"Ajouter"})})]}),l.category&&r.jsxs("div",{className:"p-4 border rounded-lg",children:[r.jsxs(D,{children:["Races pour ",l.category]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mt-2",children:(y=s.farmManagement.breedsByCategory[l.category])==null?void 0:y.map(S=>r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ia,{id:`breed-${S}`,checked:l.breeds.includes(S),onCheckedChange:()=>{l.breeds.includes(S)?p(S):g(S)}}),r.jsx(D,{htmlFor:`breed-${S}`,children:S})]},S))})]}),i.animalDetails&&i.animalDetails.length>0&&r.jsxs("div",{className:"p-4 border rounded-lg",children:[r.jsx(D,{children:"Cheptel configuré"}),r.jsx("div",{className:"mt-2 space-y-2",children:i.animalDetails.map((S,_)=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[r.jsxs("span",{children:[r.jsx(Se,{variant:"secondary",children:S.category}),r.jsxs("span",{className:"ml-2",children:[S.maleCount," mâles, ",S.femaleCount," femelles"]}),S.breeds.length>0&&r.jsxs("span",{className:"ml-2 text-sm text-gray-600",children:["Races: ",S.breeds.join(", ")]})]}),r.jsx(R,{type:"button",variant:"outline",size:"sm",onClick:()=>m(_),children:"Supprimer"})]},_))})]})]})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{children:"Informations administratives"})}),r.jsxs(ne,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(D,{htmlFor:"registrationNumber",children:"Numéro d'immatriculation"}),r.jsx(K,{id:"registrationNumber",value:i.registrationNumber||"",onChange:S=>u("registrationNumber",S.target.value),placeholder:"Numéro d'immatriculation"})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"surfaceArea",children:"Surface (hectares)"}),r.jsx(K,{id:"surfaceArea",type:"number",step:"0.1",value:i.surfaceArea||"",onChange:S=>u("surfaceArea",parseFloat(S.target.value)||0),placeholder:"Surface en hectares"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx(D,{htmlFor:"buildingDetails",children:"Détails des bâtiments"}),r.jsx(Be,{id:"buildingDetails",value:i.buildingDetails||"",onChange:S=>u("buildingDetails",S.target.value),placeholder:"Description des bâtiments, étables, etc."})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx(D,{htmlFor:"equipmentDetails",children:"Équipements"}),r.jsx(Be,{id:"equipmentDetails",value:i.equipmentDetails||"",onChange:S=>u("equipmentDetails",S.target.value),placeholder:"Liste des équipements disponibles"})]})]})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{children:"Certifications"})}),r.jsx(ne,{children:r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:s.farmManagement.certificationTypes.map(S=>{var _;return r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ia,{id:`cert-${S}`,checked:((_=i.certifications)==null?void 0:_.includes(S))||!1,onCheckedChange:()=>h(S)}),r.jsx(D,{htmlFor:`cert-${S}`,children:S})]},S)})})})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{children:"Assurance et contact d'urgence"})}),r.jsxs(ne,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx(D,{htmlFor:"insuranceDetails",children:"Détails de l'assurance"}),r.jsx(K,{id:"insuranceDetails",value:i.insuranceDetails||"",onChange:S=>u("insuranceDetails",S.target.value),placeholder:"Compagnie d'assurance et numéro de police"})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"emergencyName",children:"Nom du contact d'urgence"}),r.jsx(K,{id:"emergencyName",value:((N=i.emergencyContact)==null?void 0:N.name)||"",onChange:S=>u("emergencyContact.name",S.target.value),placeholder:"Nom du contact"})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"emergencyPhone",children:"Téléphone d'urgence"}),r.jsx(K,{id:"emergencyPhone",value:((w=i.emergencyContact)==null?void 0:w.phone)||"",onChange:S=>u("emergencyContact.phone",S.target.value),placeholder:"Téléphone"})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"emergencyRelation",children:"Relation"}),r.jsx(K,{id:"emergencyRelation",value:((C=i.emergencyContact)==null?void 0:C.relation)||"",onChange:S=>u("emergencyContact.relation",S.target.value),placeholder:"Relation (époux, fils, etc.)"})]})]})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{children:"Photos de l'exploitation"})}),r.jsx(ne,{children:r.jsx(H6,{photos:i.photos||[],onPhotosChange:S=>u("photos",S),farmName:i.name||"Nouvelle exploitation"})})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{children:"Notes complémentaires"})}),r.jsx(ne,{children:r.jsx(Be,{value:i.notes||"",onChange:S=>u("notes",S.target.value),placeholder:"Notes additionnelles sur l'exploitation...",rows:3})})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx(R,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),r.jsx(R,{type:"submit",children:"Créer l'exploitation"})]})]})]})})},aAe=({open:e,onOpenChange:t,farmId:n,farmName:s})=>{const{addFarmIntervention:a,farms:i}=ct(),{toast:o}=et(),[l,c]=b.useState({farmId:"",farmName:"",date:"",type:"",animals:"",veterinarian:"",description:"",status:"scheduled",followUp:"",cost:"",notes:""});b.useEffect(()=>{if(e){const f=new Date().toISOString().split("T")[0];c({farmId:(n==null?void 0:n.toString())||"",farmName:s||"",date:f,type:"",animals:"",veterinarian:"",description:"",status:"scheduled",followUp:"",cost:"",notes:""})}},[e,n,s]);const u=(f,m)=>{c(g=>({...g,[f]:m}))},{settings:d}=xt(),h=f=>{if(f.preventDefault(),!l.farmId||!l.date||!l.type||!l.description){o({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires",variant:"destructive"});return}const m=i.find(p=>p.id===parseInt(l.farmId));if(!m){o({title:"Erreur",description:"Exploitation non trouvée",variant:"destructive"});return}const g={farmId:parseInt(l.farmId),farmName:m.name,date:l.date,type:l.type,animals:l.animals,veterinarian:l.veterinarian,description:l.description,status:l.status,followUp:l.followUp,cost:l.cost?parseFloat(l.cost):void 0,notes:l.notes};a(g),o({title:"Succès",description:"Intervention programmée avec succès"}),t(!1)};return r.jsx(He,{open:e,onOpenChange:t,children:r.jsxs(We,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(Ge,{children:[r.jsx(Ke,{children:"Nouvelle Intervention"}),r.jsx(yt,{children:"Programmez une nouvelle intervention vétérinaire"})]}),r.jsxs("form",{onSubmit:h,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"farmId",children:"Exploitation *"}),r.jsxs(ve,{value:l.farmId,onValueChange:f=>{const m=i.find(g=>g.id===parseInt(f));u("farmId",f),u("farmName",(m==null?void 0:m.name)||"")},children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Sélectionner une exploitation"})}),r.jsx(ge,{children:i.map(f=>r.jsx(M,{value:f.id.toString(),children:f.name},f.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"date",children:"Date *"}),r.jsx(K,{id:"date",type:"date",value:l.date,onChange:f=>u("date",f.target.value),required:!0})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"type",children:"Type d'intervention *"}),r.jsxs(ve,{value:l.type,onValueChange:f=>u("type",f),children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Sélectionner un type"})}),r.jsxs(ge,{children:[r.jsx(M,{value:"vaccination",children:"Vaccination"}),r.jsx(M,{value:"controle",children:"Contrôle sanitaire"}),r.jsx(M,{value:"urgence",children:"Urgence"}),r.jsx(M,{value:"chirurgie",children:"Chirurgie"}),r.jsx(M,{value:"prevention",children:"Prévention"}),r.jsx(M,{value:"consultation",children:"Consultation"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"status",children:"Statut"}),r.jsxs(ve,{value:l.status,onValueChange:f=>u("status",f),children:[r.jsx(pe,{children:r.jsx(xe,{})}),r.jsxs(ge,{children:[r.jsx(M,{value:"scheduled",children:"Programmée"}),r.jsx(M,{value:"ongoing",children:"En cours"}),r.jsx(M,{value:"completed",children:"Terminée"}),r.jsx(M,{value:"cancelled",children:"Annulée"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"animals",children:"Animaux concernés"}),r.jsx(K,{id:"animals",value:l.animals,onChange:f=>u("animals",f.target.value),placeholder:"15 bovins, 50 poules..."})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"veterinarian",children:"Vétérinaire"}),r.jsx(K,{id:"veterinarian",value:l.veterinarian,onChange:f=>u("veterinarian",f.target.value),placeholder:"Dr. Dupont"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"description",children:"Description *"}),r.jsx(Be,{id:"description",value:l.description,onChange:f=>u("description",f.target.value),placeholder:"Détails de l'intervention...",rows:3,required:!0})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs(D,{htmlFor:"cost",children:["Coût (",d.currency,")"]}),r.jsx(K,{id:"cost",type:"number",value:l.cost,onChange:f=>u("cost",f.target.value),placeholder:"0.00",min:"0",step:"0.01"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"followUp",children:"Suivi"}),r.jsx(K,{id:"followUp",value:l.followUp,onChange:f=>u("followUp",f.target.value),placeholder:"Contrôle dans 6 mois"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"notes",children:"Notes"}),r.jsx(Be,{id:"notes",value:l.notes,onChange:f=>u("notes",f.target.value),placeholder:"Informations complémentaires...",rows:2})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(R,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),r.jsx(R,{type:"submit",children:"Programmer Intervention"})]})]})]})})},iAe=({farm:e,open:t,onOpenChange:n,onEdit:s,onNewIntervention:a})=>{var u;const{getFarmInterventionsByFarmId:i}=ct();if(!e)return null;const o=i(e.id),l={active:"bg-green-100 text-green-800",attention:"bg-yellow-100 text-yellow-800",urgent:"bg-red-100 text-red-800"},c=d=>{switch(d){case"active":return r.jsx(Dn,{className:"h-4 w-4"});case"attention":return r.jsx(vn,{className:"h-4 w-4"});case"urgent":return r.jsx(vn,{className:"h-4 w-4 text-red-600"});default:return r.jsx(Yt,{className:"h-4 w-4"})}};return r.jsx(He,{open:t,onOpenChange:n,children:r.jsxs(We,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(Ge,{children:[r.jsxs(Ke,{className:"flex items-center gap-2",children:[c(e.status),e.name,r.jsx(Se,{className:l[e.status],children:e.status==="active"?"Actif":e.status==="attention"?"Attention":"Urgent"})]}),r.jsx(yt,{children:"Détails complets de l'exploitation agricole"})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs(te,{children:[r.jsx(he,{children:r.jsxs(fe,{className:"flex items-center gap-2",children:[r.jsx(Bq,{className:"h-5 w-5"}),"Informations Générales"]})}),r.jsxs(ne,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Propriétaire"}),r.jsx("p",{className:"font-medium",children:e.owner})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Types d'élevage"}),r.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:(u=e.types)==null?void 0:u.map(d=>r.jsx(Se,{variant:"secondary",children:d},d))})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Nombre total d'animaux"}),r.jsx("p",{className:"font-medium",children:e.totalAnimals})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Vétérinaire"}),r.jsx("p",{className:"font-medium",children:e.veterinarian||"Non assigné"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Dernière visite"}),r.jsx("p",{className:"font-medium",children:Oa(e.lastVisit)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Date de création"}),r.jsx("p",{className:"font-medium",children:Oa(e.createdAt)})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[r.jsx(ec,{className:"h-3 w-3"}),"Adresse"]}),r.jsx("p",{className:"font-medium",children:e.address})]}),e.coordinates&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Coordonnées GPS"}),r.jsxs("p",{className:"font-mono text-sm",children:[e.coordinates.latitude.toFixed(4),", ",e.coordinates.longitude.toFixed(4)]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[r.jsx(Pu,{className:"h-3 w-3"}),"Téléphone"]}),r.jsx("p",{className:"font-medium",children:e.phone||"Non renseigné"})]}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[r.jsx(md,{className:"h-3 w-3"}),"Email"]}),r.jsx("p",{className:"font-medium",children:e.email||"Non renseigné"})]})]})]})]}),e.animalDetails&&e.animalDetails.length>0&&r.jsxs(te,{children:[r.jsx(he,{children:r.jsxs(fe,{className:"flex items-center gap-2",children:[r.jsx(Vq,{className:"h-5 w-5"}),"Détails du Cheptel"]})}),r.jsx(ne,{children:r.jsx("div",{className:"space-y-3",children:e.animalDetails.map((d,h)=>r.jsxs("div",{className:"p-3 border rounded-lg bg-muted/30",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(Se,{variant:"secondary",children:d.category}),r.jsxs("span",{className:"text-sm font-medium",children:["Total: ",d.maleCount+d.femaleCount," animaux"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Mâles:"})," ",d.maleCount]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Femelles:"})," ",d.femaleCount]}),d.breeds.length>0&&r.jsxs("div",{className:"md:col-span-3",children:[r.jsx("span",{className:"text-muted-foreground",children:"Races:"})," ",d.breeds.join(", ")]})]})]},h))})})]}),(e.registrationNumber||e.surfaceArea||e.buildingDetails||e.equipmentDetails)&&r.jsxs(te,{children:[r.jsx(he,{children:r.jsxs(fe,{className:"flex items-center gap-2",children:[r.jsx(Nq,{className:"h-5 w-5"}),"Informations Administratives"]})}),r.jsxs(ne,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.registrationNumber&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"N° d'immatriculation"}),r.jsx("p",{className:"font-medium",children:e.registrationNumber})]}),e.surfaceArea&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Surface"}),r.jsxs("p",{className:"font-medium",children:[e.surfaceArea," hectares"]})]})]}),e.buildingDetails&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Bâtiments"}),r.jsx("p",{className:"font-medium",children:e.buildingDetails})]}),e.equipmentDetails&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Équipements"}),r.jsx("p",{className:"font-medium",children:e.equipmentDetails})]})]})]}),e.certifications&&e.certifications.length>0&&r.jsxs(te,{children:[r.jsx(he,{children:r.jsxs(fe,{className:"flex items-center gap-2",children:[r.jsx(ur,{className:"h-5 w-5"}),"Certifications"]})}),r.jsx(ne,{children:r.jsx("div",{className:"flex flex-wrap gap-2",children:e.certifications.map(d=>r.jsx(Se,{variant:"outline",children:d},d))})})]}),(e.insuranceDetails||e.emergencyContact)&&r.jsxs(te,{children:[r.jsx(he,{children:r.jsxs(fe,{className:"flex items-center gap-2",children:[r.jsx(xr,{className:"h-5 w-5"}),"Assurance et Contact d'Urgence"]})}),r.jsxs(ne,{className:"space-y-4",children:[e.insuranceDetails&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Assurance"}),r.jsx("p",{className:"font-medium",children:e.insuranceDetails})]}),e.emergencyContact&&e.emergencyContact.name&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Contact d'urgence"}),r.jsx("p",{className:"font-medium",children:e.emergencyContact.name})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Téléphone"}),r.jsx("p",{className:"font-medium",children:e.emergencyContact.phone})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Relation"}),r.jsx("p",{className:"font-medium",children:e.emergencyContact.relation})]})]})]})]}),e.notes&&r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{children:"Notes"})}),r.jsx(ne,{children:r.jsx("p",{className:"text-sm",children:e.notes})})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{children:"Détails du Cheptel"})}),r.jsx(ne,{children:e.animalDetails&&e.animalDetails.length>0?r.jsx("div",{className:"space-y-4",children:e.animalDetails.map((d,h)=>r.jsxs("div",{className:"border rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h4",{className:"font-semibold text-lg",children:d.category}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(Se,{variant:"secondary",children:[d.maleCount+d.femaleCount," animaux"]}),r.jsxs(Se,{variant:"outline",children:[d.maleCount," mâles"]}),r.jsxs(Se,{variant:"outline",children:[d.femaleCount," femelles"]})]})]}),d.breeds&&d.breeds.length>0&&r.jsxs("div",{className:"mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Races: "}),d.breeds.map((f,m)=>r.jsx(Se,{variant:"outline",className:"mr-1 text-xs",children:f},m))]}),d.ageGroups&&d.ageGroups.length>0&&r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Groupes d'âge: "}),d.ageGroups.map((f,m)=>r.jsx(Se,{variant:"outline",className:"mr-1 text-xs",children:f},m))]})]},h))}):r.jsx("p",{className:"text-muted-foreground",children:"Aucun détail de cheptel configuré pour cette exploitation"})})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{children:"Photos de l'exploitation"})}),r.jsx(ne,{children:e.photos&&e.photos.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.photos.map(d=>r.jsxs("div",{className:"group relative",children:[r.jsxs("div",{className:"aspect-square rounded-lg overflow-hidden border bg-muted",children:[r.jsx("img",{src:d.url,alt:d.description,className:"w-full h-full object-cover"}),r.jsx("div",{className:"absolute top-2 right-2",children:r.jsx(Se,{variant:"secondary",className:"text-xs bg-black/70 text-white border-0",children:d.category==="cheptel"?"Cheptel":d.category==="batiments"?"Bâtiments":d.category==="equipements"?"Équipements":"Général"})})]}),r.jsxs("div",{className:"mt-2",children:[r.jsx("p",{className:"text-sm font-medium truncate",children:d.description}),r.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(d.uploadedAt).toLocaleDateString()})]})]},d.id))}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(_u,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Aucune photo ajoutée"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Les photos peuvent être ajoutées lors de la modification de l'exploitation"})]})})]}),r.jsxs(Ai,{defaultValue:"interventions",className:"w-full",children:[r.jsx(qa,{className:"grid w-full grid-cols-1",children:r.jsxs(kt,{value:"interventions",children:[r.jsx(Ye,{className:"h-4 w-4 mr-2"}),"Interventions (",o.length,")"]})}),r.jsx(Tt,{value:"interventions",className:"space-y-4",children:r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{children:"Interventions vétérinaires"})}),r.jsx(ne,{children:o.length>0?r.jsx("div",{className:"space-y-2",children:o.map(d=>r.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:d.type}),r.jsx("span",{className:"text-sm text-muted-foreground ml-2",children:Oa(d.date)})]}),r.jsx(Se,{variant:"outline",children:d.status})]},d.id))}):r.jsx("p",{className:"text-muted-foreground",children:"Aucune intervention enregistrée pour cette exploitation"})})]})})]})]}),r.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[r.jsx(R,{onClick:a,variant:"outline",children:"Nouvelle Intervention"}),r.jsx(R,{onClick:s,children:"Modifier"})]})]})})},oAe=({open:e,onOpenChange:t,farm:n})=>{var x,y,N,w,C,S;const{updateFarm:s}=ct(),{settings:a}=xt(),{toast:i}=et(),[o,l]=b.useState({name:"",owner:"",ownerIdNumber:"",address:"",coordinates:{latitude:0,longitude:0},phone:"",email:"",types:[],totalAnimals:0,animalDetails:[],veterinarian:"",notes:"",status:"active",registrationNumber:"",surfaceArea:0,buildingDetails:"",equipmentDetails:"",certifications:[],insuranceDetails:"",emergencyContact:{name:"",phone:"",relation:""}}),[c,u]=b.useState({category:"",maleCount:0,femaleCount:0,breeds:[],ageGroups:[]});if(!a.farmManagement)return console.error("farmManagement settings not found, using defaults"),r.jsx(He,{open:e,onOpenChange:t,children:r.jsx(We,{children:r.jsxs(Ge,{children:[r.jsx(Ke,{children:"Erreur de configuration"}),r.jsx(yt,{children:"Les paramètres de gestion des fermes ne sont pas configurés. Veuillez recharger la page ou vérifier les paramètres."})]})})});b.useEffect(()=>{n&&e&&l({...n,coordinates:n.coordinates||{latitude:0,longitude:0},types:n.types||[],animalDetails:n.animalDetails||[],certifications:n.certifications||[],emergencyContact:n.emergencyContact||{name:"",phone:"",relation:""}})},[n,e]),b.useEffect(()=>{e||(l({name:"",owner:"",ownerIdNumber:"",address:"",coordinates:{latitude:0,longitude:0},phone:"",email:"",types:[],totalAnimals:0,animalDetails:[],veterinarian:"",notes:"",status:"active",registrationNumber:"",surfaceArea:0,buildingDetails:"",equipmentDetails:"",certifications:[],insuranceDetails:"",emergencyContact:{name:"",phone:"",relation:""}}),u({category:"",maleCount:0,femaleCount:0,breeds:[],ageGroups:[]}))},[e]);const d=(_,k)=>{if(_.includes(".")){const[T,P]=_.split(".");l(A=>({...A,[T]:{...A[T],[P]:k}}))}else l(T=>({...T,[_]:k}))},h=_=>{l(k=>{var T;return{...k,types:(T=k.types)!=null&&T.includes(_)?k.types.filter(P=>P!==_):[...k.types||[],_]}})},f=_=>{l(k=>{var T;return{...k,certifications:(T=k.certifications)!=null&&T.includes(_)?k.certifications.filter(P=>P!==_):[...k.certifications||[],_]}})},m=()=>{if(!c.category){i({title:"Erreur",description:"Veuillez sélectionner une catégorie d'animal",variant:"destructive"});return}l(_=>({..._,animalDetails:[..._.animalDetails||[],{...c}]})),u({category:"",maleCount:0,femaleCount:0,breeds:[],ageGroups:[]})},g=_=>{l(k=>{var T;return{...k,animalDetails:((T=k.animalDetails)==null?void 0:T.filter((P,A)=>A!==_))||[]}})},p=_=>{u(k=>({...k,breeds:[...k.breeds,_]}))},v=_=>{u(k=>({...k,breeds:k.breeds.filter(T=>T!==_)}))},j=_=>{var T;if(_.preventDefault(),!n)return;if(!o.name||!o.owner||!o.address||!((T=o.types)!=null&&T.length)){i({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires",variant:"destructive"});return}const k={...n,...o,coordinates:o.coordinates||{latitude:0,longitude:0},types:o.types||[],animalDetails:o.animalDetails||[],totalAnimals:(o.animalDetails||[]).reduce((P,A)=>P+A.maleCount+A.femaleCount,0),certifications:o.certifications||[],emergencyContact:o.emergencyContact||{name:"",phone:"",relation:""}};s(n.id,k),i({title:"Succès",description:"Exploitation mise à jour avec succès"}),t(!1)};return n?r.jsx(He,{open:e,onOpenChange:t,children:r.jsxs(We,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(Ge,{children:[r.jsx(Ke,{children:"Modifier l'Exploitation"}),r.jsx(yt,{children:"Modifiez les informations de l'exploitation agricole"})]}),r.jsxs("form",{onSubmit:j,className:"space-y-6",children:[r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{children:"Informations générales"})}),r.jsxs(ne,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(D,{htmlFor:"name",children:"Nom de l'exploitation *"}),r.jsx(K,{id:"name",value:o.name||"",onChange:_=>d("name",_.target.value),placeholder:"Nom de l'exploitation"})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"owner",children:"Propriétaire *"}),r.jsx(K,{id:"owner",value:o.owner||"",onChange:_=>d("owner",_.target.value),placeholder:"Nom du propriétaire"})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"ownerIdNumber",children:"N° pièce d'identité du propriétaire"}),r.jsx(K,{id:"ownerIdNumber",value:o.ownerIdNumber||"",onChange:_=>d("ownerIdNumber",_.target.value),placeholder:"Numéro de carte d'identité, passeport, etc."})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx(D,{htmlFor:"address",children:"Adresse *"}),r.jsx(K,{id:"address",value:o.address||"",onChange:_=>d("address",_.target.value),placeholder:"Adresse complète"})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"latitude",children:"Latitude"}),r.jsx(K,{id:"latitude",type:"number",step:"0.0001",value:((x=o.coordinates)==null?void 0:x.latitude)||"",onChange:_=>d("coordinates.latitude",parseFloat(_.target.value)||0),placeholder:"47.9056"})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"longitude",children:"Longitude"}),r.jsx(K,{id:"longitude",type:"number",step:"0.0001",value:((y=o.coordinates)==null?void 0:y.longitude)||"",onChange:_=>d("coordinates.longitude",parseFloat(_.target.value)||0),placeholder:"1.9190"})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"phone",children:"Téléphone"}),r.jsx(K,{id:"phone",value:o.phone||"",onChange:_=>d("phone",_.target.value),placeholder:"Téléphone"})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"email",children:"Email"}),r.jsx(K,{id:"email",type:"email",value:o.email||"",onChange:_=>d("email",_.target.value),placeholder:"Email"})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"veterinarian",children:"Vétérinaire responsable"}),r.jsx(K,{id:"veterinarian",value:o.veterinarian||"",onChange:_=>d("veterinarian",_.target.value),placeholder:"Vétérinaire"})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"status",children:"Statut"}),r.jsxs(ve,{value:o.status,onValueChange:_=>d("status",_),children:[r.jsx(pe,{children:r.jsx(xe,{})}),r.jsxs(ge,{children:[r.jsx(M,{value:"active",children:"Active"}),r.jsx(M,{value:"attention",children:"Attention"}),r.jsx(M,{value:"urgent",children:"Urgent"})]})]})]})]})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{children:"Types d'élevage *"})}),r.jsx(ne,{children:r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:a.farmManagement.farmTypes.map(_=>{var k;return r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ia,{id:`type-${_}`,checked:((k=o.types)==null?void 0:k.includes(_))||!1,onCheckedChange:()=>h(_)}),r.jsx(D,{htmlFor:`type-${_}`,children:_})]},_)})})})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{children:"Détails du cheptel"})}),r.jsxs(ne,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 p-4 border rounded-lg",children:[r.jsxs("div",{children:[r.jsx(D,{children:"Catégorie"}),r.jsxs(ve,{value:c.category,onValueChange:_=>u(k=>({...k,category:_})),children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Sélectionner"})}),r.jsx(ge,{children:a.farmManagement.animalCategories.map(_=>r.jsx(M,{value:_,children:_},_))})]})]}),r.jsxs("div",{children:[r.jsx(D,{children:"Mâles"}),r.jsx(K,{type:"number",value:c.maleCount,onChange:_=>u(k=>({...k,maleCount:parseInt(_.target.value)||0})),placeholder:"0"})]}),r.jsxs("div",{children:[r.jsx(D,{children:"Femelles"}),r.jsx(K,{type:"number",value:c.femaleCount,onChange:_=>u(k=>({...k,femaleCount:parseInt(_.target.value)||0})),placeholder:"0"})]}),r.jsx("div",{className:"flex items-end",children:r.jsx(R,{type:"button",onClick:m,className:"w-full",children:"Ajouter"})})]}),c.category&&r.jsxs("div",{className:"p-4 border rounded-lg",children:[r.jsxs(D,{children:["Races pour ",c.category]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mt-2",children:(N=a.farmManagement.breedsByCategory[c.category])==null?void 0:N.map(_=>r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ia,{id:`breed-${_}`,checked:c.breeds.includes(_),onCheckedChange:()=>{c.breeds.includes(_)?v(_):p(_)}}),r.jsx(D,{htmlFor:`breed-${_}`,children:_})]},_))})]}),o.animalDetails&&o.animalDetails.length>0&&r.jsxs("div",{className:"p-4 border rounded-lg",children:[r.jsx(D,{children:"Cheptel configuré"}),r.jsx("div",{className:"mt-2 space-y-2",children:o.animalDetails.map((_,k)=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[r.jsxs("span",{children:[r.jsx(Se,{variant:"secondary",children:_.category}),r.jsxs("span",{className:"ml-2",children:[_.maleCount," mâles, ",_.femaleCount," femelles"]}),_.breeds.length>0&&r.jsxs("span",{className:"ml-2 text-sm text-gray-600",children:["Races: ",_.breeds.join(", ")]})]}),r.jsx(R,{type:"button",variant:"outline",size:"sm",onClick:()=>g(k),children:"Supprimer"})]},k))})]})]})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{children:"Informations administratives"})}),r.jsxs(ne,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(D,{htmlFor:"registrationNumber",children:"Numéro d'immatriculation"}),r.jsx(K,{id:"registrationNumber",value:o.registrationNumber||"",onChange:_=>d("registrationNumber",_.target.value),placeholder:"Numéro d'immatriculation"})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"surfaceArea",children:"Surface (hectares)"}),r.jsx(K,{id:"surfaceArea",type:"number",step:"0.1",value:o.surfaceArea||"",onChange:_=>d("surfaceArea",parseFloat(_.target.value)||0),placeholder:"Surface en hectares"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx(D,{htmlFor:"buildingDetails",children:"Détails des bâtiments"}),r.jsx(Be,{id:"buildingDetails",value:o.buildingDetails||"",onChange:_=>d("buildingDetails",_.target.value),placeholder:"Description des bâtiments, étables, etc."})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx(D,{htmlFor:"equipmentDetails",children:"Équipements"}),r.jsx(Be,{id:"equipmentDetails",value:o.equipmentDetails||"",onChange:_=>d("equipmentDetails",_.target.value),placeholder:"Liste des équipements disponibles"})]})]})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{children:"Certifications"})}),r.jsx(ne,{children:r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:a.farmManagement.certificationTypes.map(_=>{var k;return r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ia,{id:`cert-${_}`,checked:((k=o.certifications)==null?void 0:k.includes(_))||!1,onCheckedChange:()=>f(_)}),r.jsx(D,{htmlFor:`cert-${_}`,children:_})]},_)})})})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{children:"Assurance et contact d'urgence"})}),r.jsxs(ne,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx(D,{htmlFor:"insuranceDetails",children:"Détails de l'assurance"}),r.jsx(K,{id:"insuranceDetails",value:o.insuranceDetails||"",onChange:_=>d("insuranceDetails",_.target.value),placeholder:"Compagnie d'assurance et numéro de police"})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"emergencyName",children:"Nom du contact d'urgence"}),r.jsx(K,{id:"emergencyName",value:((w=o.emergencyContact)==null?void 0:w.name)||"",onChange:_=>d("emergencyContact.name",_.target.value),placeholder:"Nom du contact"})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"emergencyPhone",children:"Téléphone d'urgence"}),r.jsx(K,{id:"emergencyPhone",value:((C=o.emergencyContact)==null?void 0:C.phone)||"",onChange:_=>d("emergencyContact.phone",_.target.value),placeholder:"Téléphone"})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"emergencyRelation",children:"Relation"}),r.jsx(K,{id:"emergencyRelation",value:((S=o.emergencyContact)==null?void 0:S.relation)||"",onChange:_=>d("emergencyContact.relation",_.target.value),placeholder:"Relation (époux, fils, etc.)"})]})]})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{children:"Photos de l'exploitation"})}),r.jsx(ne,{children:r.jsx(H6,{photos:o.photos||[],onPhotosChange:_=>d("photos",_),farmName:o.name||"Exploitation"})})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{children:"Notes complémentaires"})}),r.jsx(ne,{children:r.jsx(Be,{value:o.notes||"",onChange:_=>d("notes",_.target.value),placeholder:"Notes additionnelles sur l'exploitation...",rows:3})})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx(R,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),r.jsx(R,{type:"submit",children:"Mettre à jour l'exploitation"})]})]})]})}):null},lAe=({open:e,onOpenChange:t,intervention:n})=>{const{updateFarmIntervention:s,farms:a}=ct(),{toast:i}=et(),[o,l]=b.useState({farmId:"",type:"",date:"",animals:"",description:"",veterinarian:"",status:"scheduled",followUp:"",cost:""});b.useEffect(()=>{n&&e&&l({farmId:n.farmId.toString(),type:n.type,date:n.date,animals:n.animals,description:n.description,veterinarian:n.veterinarian,status:n.status,followUp:n.followUp||"",cost:n.cost||""})},[n,e]);const c=(h,f)=>{l(m=>({...m,[h]:f}))},u=h=>{if(h.preventDefault(),!n)return;if(!o.farmId||!o.type||!o.date||!o.animals||!o.description){i({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires",variant:"destructive"});return}const f={farmId:parseInt(o.farmId),type:o.type,date:o.date,animals:o.animals,description:o.description,veterinarian:o.veterinarian,status:o.status,followUp:o.followUp,cost:o.cost};s(n.id,f),i({title:"Succès",description:"Intervention mise à jour avec succès"}),t(!1)};if(!n)return null;const d=a.find(h=>h.id===parseInt(o.farmId));return r.jsx(He,{open:e,onOpenChange:t,children:r.jsxs(We,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(Ge,{children:[r.jsx(Ke,{children:"Modifier l'Intervention"}),r.jsxs(yt,{children:["Modifiez les informations de l'intervention du ",new Date(n.date).toLocaleDateString("fr-FR")]})]}),r.jsxs("form",{onSubmit:u,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{children:"Exploitation *"}),r.jsxs(ve,{value:o.farmId,onValueChange:h=>c("farmId",h),children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Sélectionner l'exploitation"})}),r.jsx(ge,{children:a.map(h=>r.jsxs(M,{value:h.id.toString(),children:[h.name," - ",h.owner]},h.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{children:"Type d'intervention *"}),r.jsxs(ve,{value:o.type,onValueChange:h=>c("type",h),children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Sélectionner le type"})}),r.jsxs(ge,{children:[r.jsx(M,{value:"vaccination",children:"Vaccination"}),r.jsx(M,{value:"controle",children:"Contrôle sanitaire"}),r.jsx(M,{value:"urgence",children:"Urgence"}),r.jsx(M,{value:"chirurgie",children:"Chirurgie"}),r.jsx(M,{value:"prevention",children:"Prévention"}),r.jsx(M,{value:"consultation",children:"Consultation"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"date",children:"Date *"}),r.jsx(K,{id:"date",type:"date",value:o.date,onChange:h=>c("date",h.target.value),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{children:"Statut"}),r.jsxs(ve,{value:o.status,onValueChange:h=>c("status",h),children:[r.jsx(pe,{children:r.jsx(xe,{})}),r.jsxs(ge,{children:[r.jsx(M,{value:"scheduled",children:"Programmé"}),r.jsx(M,{value:"ongoing",children:"En cours"}),r.jsx(M,{value:"completed",children:"Terminé"}),r.jsx(M,{value:"cancelled",children:"Annulé"})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"animals",children:"Animaux concernés *"}),r.jsx(K,{id:"animals",value:o.animals,onChange:h=>c("animals",h.target.value),placeholder:"ex: 50 vaches, 100 porcs...",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"veterinarian",children:"Vétérinaire *"}),r.jsx(K,{id:"veterinarian",value:o.veterinarian,onChange:h=>c("veterinarian",h.target.value),required:!0})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"description",children:"Description *"}),r.jsx(Be,{id:"description",value:o.description,onChange:h=>c("description",h.target.value),rows:3,placeholder:"Détails de l'intervention, observations, traitements...",required:!0})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"followUp",children:"Suivi recommandé"}),r.jsx(Be,{id:"followUp",value:o.followUp,onChange:h=>c("followUp",h.target.value),rows:2,placeholder:"Recommandations, prochain contrôle..."})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"cost",children:"Coût (€)"}),r.jsx(K,{id:"cost",type:"number",value:o.cost,onChange:h=>c("cost",h.target.value),min:"0",step:"0.01",placeholder:"0.00"})]})]}),d&&r.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[r.jsx("h4",{className:"font-medium mb-2",children:"Informations de l'exploitation"}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Nom:"})," ",d.name]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Propriétaire:"})," ",d.owner]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Type:"})," ",d.type]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Adresse:"})," ",d.address]})]})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(R,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),r.jsx(R,{type:"submit",children:"Mettre à jour"})]})]})]})})},cAe=()=>{const{farms:e,farmInterventions:t,deleteFarm:n,deleteFarmIntervention:s,getFarmsByStatus:a,getUpcomingFarmInterventions:i}=ct(),{toast:o}=et(),{currentView:l}=cc("farms"),[c,u]=b.useState(""),[d,h]=b.useState("all"),[f,m]=b.useState(l),[g,p]=b.useState(!1),[v,j]=b.useState(!1),[x,y]=b.useState(!1),[N,w]=b.useState(!1),[C,S]=b.useState(!1),[_,k]=b.useState(null),[T,P]=b.useState(null),A=e.filter(ae=>{var ue,J;const me=ae.name.toLowerCase().includes(c.toLowerCase())||ae.owner.toLowerCase().includes(c.toLowerCase())||((ue=ae.types)==null?void 0:ue.some(ee=>ee.toLowerCase().includes(c.toLowerCase())))||!1,we=d==="all"||((J=ae.types)==null?void 0:J.includes(d))||!1;return me&&we}),B={active:"bg-green-100 text-green-800",attention:"bg-yellow-100 text-yellow-800",urgent:"bg-red-100 text-red-800"},L={"Bovin laitier":"Élevage bovin laitier","Bovin viande":"Élevage bovin viande",Porcin:"Élevage porcin",Avicole:"Élevage avicole",Ovin:"Élevage ovin",Caprin:"Élevage caprin",Équin:"Élevage équin",Apiculture:"Apiculture",Aquaculture:"Aquaculture",Cuniculture:"Cuniculture",Mixte:"Élevage mixte"},H={vaccination:"Vaccination",controle:"Contrôle sanitaire",urgence:"Urgence",chirurgie:"Chirurgie",prevention:"Prévention",consultation:"Consultation"},z=ae=>{k(ae),y(!0)},$=ae=>{k(ae),w(!0)},I=ae=>{confirm("Êtes-vous sûr de vouloir supprimer cette exploitation ?")&&(n(ae),o({title:"Succès",description:"Exploitation supprimée"}))},E=ae=>{j(!0)},q=ae=>{confirm("Êtes-vous sûr de vouloir supprimer cette intervention ?")&&(s(ae),o({title:"Succès",description:"Intervention supprimée"}))},Y=ae=>{P(ae),S(!0)},re=a("attention").length+a("urgent").length,oe=i();return r.jsxs("div",{className:"container mx-auto px-6 py-8 space-y-8",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Gestion des Exploitations"}),r.jsx("p",{className:"text-muted-foreground mt-2",children:"Gérez les fermes, élevages et interventions vétérinaires"})]}),r.jsxs(R,{className:"gap-2 medical-glow",onClick:()=>p(!0),children:[r.jsx(Ue,{className:"h-4 w-4"}),"Nouvelle Exploitation"]})]}),r.jsxs("div",{className:"grid gap-6 md:grid-cols-4",children:[r.jsx(te,{children:r.jsxs(ne,{className:"p-6 text-center",children:[r.jsx(pb,{className:"h-12 w-12 text-primary mx-auto mb-4"}),r.jsx("div",{className:"text-2xl font-bold",children:e.length}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Exploitations"})]})}),r.jsx(te,{children:r.jsxs(ne,{className:"p-6 text-center",children:[r.jsx(vn,{className:"h-12 w-12 text-accent mx-auto mb-4"}),r.jsx("div",{className:"text-2xl font-bold",children:re}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Alertes actives"})]})}),r.jsx(te,{children:r.jsxs(ne,{className:"p-6 text-center",children:[r.jsx(Ye,{className:"h-12 w-12 text-blue-600 mx-auto mb-4"}),r.jsx("div",{className:"text-2xl font-bold",children:oe.length}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Interventions à venir"})]})})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsxs(fe,{className:"flex items-center gap-2",children:[r.jsx(Do,{className:"h-5 w-5"}),"Rechercher et filtrer"]})}),r.jsx(ne,{className:"space-y-4",children:r.jsxs("div",{className:"flex gap-4",children:[r.jsx(K,{placeholder:"Rechercher par nom, propriétaire ou type...",value:c,onChange:ae=>u(ae.target.value),className:"max-w-md"}),r.jsxs(ve,{value:d,onValueChange:h,children:[r.jsx(pe,{className:"w-48",children:r.jsx(xe,{placeholder:"Type d'élevage"})}),r.jsxs(ge,{children:[r.jsx(M,{value:"all",children:"Tous types"}),r.jsx(M,{value:"Bovin laitier",children:"Élevage bovin laitier"}),r.jsx(M,{value:"Bovin viande",children:"Élevage bovin viande"}),r.jsx(M,{value:"Porcin",children:"Élevage porcin"}),r.jsx(M,{value:"Avicole",children:"Élevage avicole"}),r.jsx(M,{value:"Ovin",children:"Élevage ovin"}),r.jsx(M,{value:"Caprin",children:"Élevage caprin"}),r.jsx(M,{value:"Équin",children:"Élevage équin"}),r.jsx(M,{value:"Apiculture",children:"Apiculture"}),r.jsx(M,{value:"Aquaculture",children:"Aquaculture"}),r.jsx(M,{value:"Cuniculture",children:"Cuniculture"}),r.jsx(M,{value:"Mixte",children:"Élevage mixte"})]})]})]})})]}),r.jsxs(Ai,{defaultValue:"farms",className:"space-y-6",children:[r.jsxs(qa,{className:"grid w-full grid-cols-2",children:[r.jsxs(kt,{value:"farms",className:"gap-2",children:[r.jsx(pb,{className:"h-4 w-4"}),"Exploitations"]}),r.jsxs(kt,{value:"interventions",className:"gap-2",children:[r.jsx(Ye,{className:"h-4 w-4"}),"Interventions"]})]}),r.jsxs(Tt,{value:"farms",className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("h3",{className:"text-lg font-semibold",children:["Exploitations (",A.length,")"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(R,{size:"sm",variant:f==="cards"?"default":"outline",onClick:()=>m("cards"),className:"gap-2",children:[r.jsx(_o,{className:"h-4 w-4"}),"Cartes"]}),r.jsxs(R,{size:"sm",variant:f==="table"?"default":"outline",onClick:()=>m("table"),className:"gap-2",children:[r.jsx(ji,{className:"h-4 w-4"}),"Tableau"]}),r.jsxs(R,{onClick:()=>j(!0),className:"gap-2",children:[r.jsx(bn,{className:"h-4 w-4"}),"Nouvelle Intervention"]})]})]}),A.length===0?r.jsx(te,{children:r.jsx(ne,{className:"p-6 text-center text-muted-foreground",children:"Aucune exploitation trouvée"})}):f==="cards"?A.map(ae=>{var me;return r.jsx(te,{className:"card-hover",children:r.jsx(ne,{className:"p-6",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"space-y-3 flex-1",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("h4",{className:"text-xl font-semibold",children:ae.name}),r.jsx(Se,{variant:"outline",className:B[ae.status],children:ae.status==="active"?"Actif":ae.status==="attention"?"Attention":"Urgent"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Propriétaire:"})," ",ae.owner]}),r.jsxs("p",{className:"flex items-center gap-1",children:[r.jsx(ec,{className:"h-3 w-3"}),ae.address]}),r.jsxs("p",{className:"flex items-center gap-1",children:[r.jsx(Pu,{className:"h-3 w-3"}),ae.phone]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Types:"}),r.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:(me=ae.types)==null?void 0:me.map(we=>r.jsx(Se,{variant:"secondary",className:"text-xs",children:L[we]||we},we))})]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Animaux:"})," ",ae.totalAnimals]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Vétérinaire:"})," ",ae.veterinarian]})]})]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Dernière visite: ",Oa(ae.lastVisit)]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(R,{size:"sm",variant:"outline",onClick:()=>z(ae),children:r.jsx(wn,{className:"h-4 w-4"})}),r.jsx(R,{size:"sm",variant:"outline",onClick:()=>$(ae),children:r.jsx(Ct,{className:"h-4 w-4"})}),r.jsx(R,{size:"sm",onClick:()=>E(),children:r.jsx(bn,{className:"h-4 w-4"})}),r.jsx(R,{size:"sm",variant:"destructive",onClick:()=>I(ae.id),children:r.jsx(rn,{className:"h-4 w-4"})})]})]})})},ae.id)}):r.jsx(te,{children:r.jsx(ne,{className:"p-0",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"border-b",children:r.jsxs("tr",{className:"text-left",children:[r.jsx("th",{className:"p-4 font-medium",children:"Exploitation"}),r.jsx("th",{className:"p-4 font-medium",children:"Propriétaire"}),r.jsx("th",{className:"p-4 font-medium",children:"Type"}),r.jsx("th",{className:"p-4 font-medium",children:"Statut"}),r.jsx("th",{className:"p-4 font-medium",children:"Animaux"}),r.jsx("th",{className:"p-4 font-medium",children:"Contact"}),r.jsx("th",{className:"p-4 font-medium",children:"Actions"})]})}),r.jsx("tbody",{children:A.map(ae=>{var me;return r.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[r.jsx("td",{className:"p-4",children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:ae.name}),r.jsx("div",{className:"text-sm text-muted-foreground",children:ae.address})]})}),r.jsx("td",{className:"p-4",children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:ae.owner}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Vét: ",ae.veterinarian]})]})}),r.jsx("td",{className:"p-4",children:r.jsx("div",{className:"flex flex-wrap gap-1",children:(me=ae.types)==null?void 0:me.map(we=>r.jsx(Se,{variant:"secondary",className:"text-xs",children:L[we]||we},we))})}),r.jsx("td",{className:"p-4",children:r.jsx(Se,{variant:"outline",className:B[ae.status],children:ae.status==="active"?"Actif":ae.status==="attention"?"Attention":"Urgent"})}),r.jsx("td",{className:"p-4",children:ae.totalAnimals}),r.jsx("td",{className:"p-4",children:r.jsxs("div",{className:"text-sm",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Pu,{className:"h-3 w-3"}),ae.phone]}),r.jsxs("div",{className:"text-muted-foreground",children:["Dernière visite: ",Oa(ae.lastVisit)]})]})}),r.jsx("td",{className:"p-4",children:r.jsxs("div",{className:"flex gap-1",children:[r.jsx(R,{size:"sm",variant:"outline",onClick:()=>z(ae),children:r.jsx(wn,{className:"h-4 w-4"})}),r.jsx(R,{size:"sm",variant:"outline",onClick:()=>$(ae),children:r.jsx(Ct,{className:"h-4 w-4"})}),r.jsx(R,{size:"sm",onClick:()=>E(),children:r.jsx(bn,{className:"h-4 w-4"})}),r.jsx(R,{size:"sm",variant:"destructive",onClick:()=>I(ae.id),children:r.jsx(rn,{className:"h-4 w-4"})})]})})]},ae.id)})})]})})})})]}),r.jsxs(Tt,{value:"interventions",className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("h3",{className:"text-lg font-semibold",children:["Interventions récentes (",t.length,")"]}),r.jsxs(R,{onClick:()=>j(!0),className:"gap-2",children:[r.jsx(bn,{className:"h-4 w-4"}),"Nouvelle Intervention"]})]}),t.length===0?r.jsx(te,{children:r.jsx(ne,{className:"p-6 text-center text-muted-foreground",children:"Aucune intervention enregistrée"})}):t.map(ae=>r.jsx(te,{className:"card-hover",children:r.jsx(ne,{className:"p-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"flex items-start justify-between",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("h4",{className:"text-lg font-semibold",children:H[ae.type]}),r.jsx(Se,{variant:"outline",className:ae.status==="completed"?"bg-green-100 text-green-800":ae.status==="ongoing"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800",children:ae.status==="completed"?"Terminé":ae.status==="ongoing"?"En cours":ae.status==="scheduled"?"Programmé":"Annulé"})]}),r.jsxs("div",{className:"flex items-center gap-6 text-sm text-muted-foreground",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Ye,{className:"h-3 w-3"}),Oa(ae.date)]}),r.jsx("span",{children:ae.farmName}),r.jsx("span",{children:ae.veterinarian})]})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Animaux concernés:"})," ",ae.animals]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Suivi:"})," ",ae.followUp||"Aucun"]})]}),r.jsx("p",{className:"text-sm",children:ae.description}),r.jsxs("div",{className:"flex gap-2 pt-2 border-t",children:[r.jsx(R,{size:"sm",variant:"outline",children:r.jsx(wn,{className:"h-4 w-4"})}),r.jsx(R,{size:"sm",variant:"outline",onClick:()=>Y(ae),children:r.jsx(Ct,{className:"h-4 w-4"})}),ae.status==="ongoing"&&r.jsx(R,{size:"sm",children:r.jsx(bn,{className:"h-4 w-4"})}),r.jsx(R,{size:"sm",variant:"destructive",onClick:()=>q(ae.id),children:r.jsx(rn,{className:"h-4 w-4"})})]})]})})},ae.id))]})]}),r.jsx(sAe,{open:g,onOpenChange:p}),r.jsx(aAe,{open:v,onOpenChange:j,farmId:_==null?void 0:_.id,farmName:_==null?void 0:_.name}),r.jsx(iAe,{farm:_,open:x,onOpenChange:y,onEdit:()=>$(_),onNewIntervention:()=>{y(!1),j(!0)}}),r.jsx(oAe,{farm:_,open:N,onOpenChange:w}),r.jsx(lAe,{intervention:T,open:C,onOpenChange:S})]})};function gj({children:e,mode:t,protocol:n,open:s,onOpenChange:a}){var p;const i=hZ(),o=fZ(),{toast:l}=et(),[c,u]=b.useState(!1),d=s!==void 0?s:c,h=a||u,[f,m]=b.useState({species:(n==null?void 0:n.species)||"",vaccineName:(n==null?void 0:n.vaccine_name)||"",vaccineType:(n==null?void 0:n.vaccine_type)||"",ageRecommendation:(n==null?void 0:n.age_recommendation)||"",frequency:(n==null?void 0:n.frequency)||"",durationDays:((p=n==null?void 0:n.duration_days)==null?void 0:p.toString())||"",notes:(n==null?void 0:n.notes)||"",active:(n==null?void 0:n.active)??!0}),g=async v=>{if(v.preventDefault(),!f.species||!f.vaccineName||!f.vaccineType){l({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires",variant:"destructive"});return}try{const j={species:f.species,vaccine_name:f.vaccineName,vaccine_type:f.vaccineType,age_recommendation:f.ageRecommendation||void 0,frequency:f.frequency||void 0,duration_days:f.durationDays?parseInt(f.durationDays):void 0,notes:f.notes||void 0,active:f.active};t==="create"?(await i.mutateAsync(j),l({title:"Protocole créé",description:`Le protocole ${f.vaccineName} a été créé avec succès`})):n&&(await o.mutateAsync({id:n.id,data:j}),l({title:"Protocole modifié",description:`Le protocole ${f.vaccineName} a été modifié avec succès`})),t==="create"&&m({species:"",vaccineName:"",vaccineType:"",ageRecommendation:"",frequency:"",durationDays:"",notes:"",active:!0}),h(!1)}catch{l({title:"Erreur",description:`Impossible de ${t==="create"?"créer":"modifier"} le protocole`,variant:"destructive"})}};return r.jsxs(He,{open:d,onOpenChange:h,children:[r.jsx(Bx,{asChild:!0,children:e||r.jsxs(R,{className:"gap-2",children:[r.jsx(Ue,{className:"h-4 w-4"}),t==="create"?"Nouveau Protocole":"Modifier"]})}),r.jsxs(We,{className:"max-w-2xl",children:[r.jsx(Ge,{children:r.jsxs(Ke,{className:"flex items-center gap-2",children:[r.jsx(ur,{className:"h-5 w-5"}),t==="create"?"Nouveau Protocole Vaccinal":"Modifier le Protocole"]})}),r.jsxs("form",{onSubmit:g,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"species",children:"Espèce *"}),r.jsxs(ve,{value:f.species,onValueChange:v=>m({...f,species:v}),children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Sélectionnez l'espèce"})}),r.jsxs(ge,{children:[r.jsx(M,{value:"Chien",children:"Chien"}),r.jsx(M,{value:"Chat",children:"Chat"}),r.jsx(M,{value:"Oiseau",children:"Oiseau"}),r.jsx(M,{value:"Lapin",children:"Lapin"}),r.jsx(M,{value:"Furet",children:"Furet"}),r.jsx(M,{value:"Autre",children:"Autre"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"vaccineName",children:"Nom du vaccin *"}),r.jsx(K,{id:"vaccineName",value:f.vaccineName,onChange:v=>m({...f,vaccineName:v.target.value}),placeholder:"ex: DHPP, Rage, FVRCP...",required:!0})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"vaccineType",children:"Type de vaccin *"}),r.jsxs(ve,{value:f.vaccineType,onValueChange:v=>m({...f,vaccineType:v}),children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Sélectionnez le type"})}),r.jsxs(ge,{children:[r.jsx(M,{value:"core",children:"Essentiel"}),r.jsx(M,{value:"non-core",children:"Optionnel"}),r.jsx(M,{value:"rabies",children:"Rage"}),r.jsx(M,{value:"custom",children:"Personnalisé"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"ageRecommendation",children:"Âge recommandé"}),r.jsx(K,{id:"ageRecommendation",value:f.ageRecommendation,onChange:v=>m({...f,ageRecommendation:v.target.value}),placeholder:"ex: 8 semaines, 3 mois..."})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"frequency",children:"Fréquence"}),r.jsx(K,{id:"frequency",value:f.frequency,onChange:v=>m({...f,frequency:v.target.value}),placeholder:"ex: Annuelle, Tous les 3 ans..."})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"durationDays",children:"Durée (jours)"}),r.jsx(K,{id:"durationDays",type:"number",value:f.durationDays,onChange:v=>m({...f,durationDays:v.target.value}),placeholder:"ex: 365, 1095...",min:"1"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"notes",children:"Notes"}),r.jsx(Be,{id:"notes",value:f.notes,onChange:v=>m({...f,notes:v.target.value}),placeholder:"Informations complémentaires sur le protocole...",rows:3})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",id:"active",checked:f.active,onChange:v=>m({...f,active:v.target.checked}),className:"rounded"}),r.jsx(D,{htmlFor:"active",children:"Protocole actif"})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(R,{type:"button",variant:"outline",onClick:()=>h(!1),children:"Annuler"}),r.jsx(R,{type:"submit",disabled:i.isPending||o.isPending,children:i.isPending||o.isPending?t==="create"?"Création...":"Modification...":t==="create"?"Créer le protocole":"Modifier le protocole"})]})]})]})]})}const uAe=e=>{if(!e.next_due_date)return"completed";const t=new Date,n=new Date(e.next_due_date);return Gg(n,t)?"overdue":"scheduled"},GE=e=>{switch(e){case"completed":return"bg-green-100 text-green-800 border-green-200";case"overdue":return"bg-red-100 text-red-800 border-red-200";case"scheduled":return"bg-blue-100 text-blue-800 border-blue-200";case"missed":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},KE=e=>{switch(e){case"completed":return r.jsx(Dn,{className:"h-4 w-4"});case"overdue":return r.jsx(vn,{className:"h-4 w-4"});case"scheduled":return r.jsx(Yt,{className:"h-4 w-4"});case"missed":return r.jsx(vn,{className:"h-4 w-4"});default:return r.jsx(Yt,{className:"h-4 w-4"})}};function dAe(){const{data:e=[],isLoading:t}=MS(),{data:n=[],isLoading:s}=ds(),{data:a=[],isLoading:i}=us(),{data:o=[]}=dZ(),l=uZ();cZ();const{toast:c}=et(),{currentView:u}=cc("vaccinations"),[d,h]=b.useState(u),[f,m]=b.useState(""),[g,p]=b.useState("all"),[v,j]=b.useState("overview"),[x,y]=b.useState(null),[N,w]=b.useState(!1),[C,S]=b.useState(!1),[_,k]=b.useState(null),T=b.useMemo(()=>t||s||i?[]:e.map($=>{const I=n.find(q=>q.id===$.animal_id),E=a.find(q=>q.id===(I==null?void 0:I.client_id));return{...$,petName:(I==null?void 0:I.name)||"Animal inconnu",clientName:E?`${E.first_name} ${E.last_name}`:"Client inconnu",status:uAe($),animal:I,client:E}}),[e,n,a,t,s,i]),P=b.useMemo(()=>{const $=T.length,I=T.filter(re=>re.status==="completed").length,E=T.filter(re=>re.status==="overdue").length,q=T.filter(re=>re.status==="scheduled").length,Y=T.filter(re=>{if(!re.next_due_date)return!1;const oe=new Date,ae=new Date(re.next_due_date),me=LS(oe,30);return ete(ae,oe)&&Gg(ae,me)}).length;return{total:$,completed:I,overdue:E,scheduled:q,upcoming:Y}},[T]),A=b.useMemo(()=>T.filter($=>{const I=$.petName.toLowerCase().includes(f.toLowerCase())||$.clientName.toLowerCase().includes(f.toLowerCase())||$.vaccine_name.toLowerCase().includes(f.toLowerCase()),E=g==="all"||$.status===g;return I&&E}),[T,f,g]),B=$=>{k($),S(!0)},L=()=>{_&&(l.mutate(_.id),c({title:"Vaccination supprimée",description:`La vaccination ${_.vaccine_name} a été supprimée avec succès.`}),S(!1),k(null))},H=()=>{const $=JSON.stringify(T,null,2),I=new Blob([$],{type:"application/json"}),E=URL.createObjectURL(I),q=document.createElement("a");q.href=E,q.download=`vaccinations-${Je(new Date,"yyyy-MM-dd")}.json`,q.click(),URL.revokeObjectURL(E)};return t||s||i?r.jsx("div",{className:"space-y-6 max-w-7xl mx-auto p-4 sm:p-6 lg:p-8",children:r.jsx(te,{children:r.jsxs(ne,{className:"p-8 text-center",children:[r.jsx(Nr,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),r.jsx("p",{children:"Chargement des données de vaccination..."})]})})}):r.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto p-4 sm:p-6 lg:p-8",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3 dark:text-white",children:[r.jsx(Mr,{className:"h-8 w-8 text-blue-600"}),"Gestion Vaccinale"]}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Suivi et planification des vaccinations"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(R,{onClick:H,variant:"outline",className:"gap-2",children:[r.jsx(vx,{className:"h-4 w-4"}),"Exporter"]}),r.jsx(BN,{})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[r.jsx(te,{children:r.jsx(ne,{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:r.jsx(Mr,{className:"h-6 w-6 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:P.total})]})]})})}),r.jsx(te,{children:r.jsx(ne,{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:r.jsx(Dn,{className:"h-6 w-6 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Terminées"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:P.completed})]})]})})}),r.jsx(te,{children:r.jsx(ne,{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:r.jsx(vn,{className:"h-6 w-6 text-red-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"En Retard"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:P.overdue})]})]})})}),r.jsx(te,{children:r.jsx(ne,{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-3 bg-orange-100 rounded-full",children:r.jsx(Yt,{className:"h-6 w-6 text-orange-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Prochaines 30j"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:P.upcoming})]})]})})}),r.jsx(te,{children:r.jsx(ne,{className:"p-6",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-3 bg-purple-100 rounded-full",children:r.jsx(Ye,{className:"h-6 w-6 text-purple-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Planifiées"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:P.scheduled})]})]})})})]}),r.jsxs(Ai,{value:v,onValueChange:j,children:[r.jsxs(qa,{className:"grid w-full grid-cols-2",children:[r.jsxs(kt,{value:"overview",className:"flex items-center gap-2",children:[r.jsx(an,{className:"h-4 w-4"}),"Vue d'ensemble"]}),r.jsxs(kt,{value:"protocols",className:"flex items-center gap-2",children:[r.jsx(ur,{className:"h-4 w-4"}),"Protocoles"]})]}),r.jsxs(Tt,{value:"overview",className:"space-y-4",children:[r.jsx(te,{children:r.jsx(ne,{className:"p-4",children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[r.jsxs("div",{className:"relative flex-1 max-w-sm",children:[r.jsx(Do,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),r.jsx(K,{placeholder:"Rechercher animal, client, vaccin...",value:f,onChange:$=>m($.target.value),className:"pl-10"})]}),r.jsxs(ve,{value:g,onValueChange:p,children:[r.jsx(pe,{className:"w-[150px]",children:r.jsx(xe,{})}),r.jsxs(ge,{children:[r.jsx(M,{value:"all",children:"Tous statuts"}),r.jsx(M,{value:"completed",children:"Terminées"}),r.jsx(M,{value:"scheduled",children:"Planifiées"}),r.jsx(M,{value:"overdue",children:"En retard"})]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(R,{variant:d==="cards"?"default":"outline",size:"sm",onClick:()=>h("cards"),children:r.jsx(_o,{className:"h-4 w-4"})}),r.jsx(R,{variant:d==="table"?"default":"outline",size:"sm",onClick:()=>h("table"),children:r.jsx(ji,{className:"h-4 w-4"})})]})]})})}),d==="cards"?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:A.map($=>{var I;return r.jsx(te,{className:"hover:shadow-md transition-shadow",children:r.jsxs(ne,{className:"p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Hn,{className:"h-10 w-10",children:r.jsx(Gn,{children:r.jsx(Pg,{className:"h-5 w-5"})})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-sm",children:$.petName}),r.jsxs("p",{className:"text-xs text-gray-600",children:[(I=$.animal)==null?void 0:I.species," • ",$.clientName]})]})]}),r.jsxs(Se,{className:GE($.status),children:[KE($.status),r.jsx("span",{className:"ml-1 capitalize",children:$.status})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Mr,{className:"h-4 w-4 text-blue-600"}),r.jsx("span",{className:"font-medium text-sm",children:$.vaccine_name}),$.vaccine_type&&r.jsx(Se,{variant:"outline",className:"text-xs",children:$.vaccine_type})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[r.jsx(Ye,{className:"h-4 w-4"}),r.jsxs("span",{children:["Date: ",Je(new Date($.vaccination_date),"dd/MM/yyyy",{locale:$n})]})]}),$.next_due_date&&r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[r.jsx(Yt,{className:"h-4 w-4"}),r.jsxs("span",{children:["Prochain: ",Je(new Date($.next_due_date),"dd/MM/yyyy",{locale:$n})]})]}),$.administered_by&&r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[r.jsx(La,{className:"h-4 w-4"}),r.jsx("span",{children:$.administered_by})]})]}),r.jsxs("div",{className:"flex items-center gap-2 mt-4 pt-3 border-t",children:[r.jsxs(R,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>{y($),w(!0)},children:[r.jsx(wn,{className:"h-4 w-4 mr-1"}),"Détails"]}),r.jsx(R,{size:"sm",variant:"outline",onClick:()=>B($),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:r.jsx(rn,{className:"h-4 w-4"})})]})]})},$.id)})}):r.jsx(te,{children:r.jsx(ne,{className:"p-0",children:r.jsxs(Vd,{children:[r.jsx(zd,{children:r.jsxs(la,{children:[r.jsx(it,{children:"Animal"}),r.jsx(it,{children:"Vaccin"}),r.jsx(it,{children:"Date"}),r.jsx(it,{children:"Prochain"}),r.jsx(it,{children:"Statut"}),r.jsx(it,{children:"Actions"})]})}),r.jsx(qd,{children:A.map($=>r.jsxs(la,{children:[r.jsx(ot,{children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Hn,{className:"h-8 w-8",children:r.jsx(Gn,{children:r.jsx(Pg,{className:"h-4 w-4"})})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-sm",children:$.petName}),r.jsx("div",{className:"text-xs text-gray-600",children:$.clientName})]})]})}),r.jsx(ot,{className:"font-medium",children:$.vaccine_name}),r.jsx(ot,{children:Je(new Date($.vaccination_date),"dd/MM/yyyy")}),r.jsx(ot,{children:$.next_due_date?Je(new Date($.next_due_date),"dd/MM/yyyy"):"N/A"}),r.jsx(ot,{children:r.jsxs(Se,{className:GE($.status),children:[KE($.status),r.jsx("span",{className:"ml-1 capitalize",children:$.status})]})}),r.jsx(ot,{children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(R,{size:"sm",variant:"outline",onClick:()=>{y($),w(!0)},children:r.jsx(wn,{className:"h-4 w-4"})}),r.jsx(R,{size:"sm",variant:"outline",onClick:()=>B($),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:r.jsx(rn,{className:"h-4 w-4"})})]})})]},$.id))})]})})})]}),r.jsx(Tt,{value:"protocols",children:r.jsxs(te,{children:[r.jsx(he,{children:r.jsxs(fe,{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ur,{className:"h-5 w-5"}),"Protocoles Vaccinaux (",o.length,")"]}),r.jsx(gj,{mode:"create"})]})}),r.jsxs(ne,{children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map($=>r.jsx(te,{className:"hover:shadow-md transition-shadow",children:r.jsx(ne,{className:"p-4",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsx("h4",{className:"font-semibold",children:$.vaccine_name}),!$.active&&r.jsx(Se,{variant:"secondary",className:"text-xs",children:"Inactif"})]}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Espèce: ",$.species]}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Type: ",$.vaccine_type]}),$.frequency&&r.jsxs("p",{className:"text-sm text-gray-600",children:["Fréquence: ",$.frequency]}),$.age_recommendation&&r.jsxs("p",{className:"text-sm text-gray-600",children:["Âge: ",$.age_recommendation]}),$.notes&&r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:$.notes}),r.jsx("div",{className:"flex gap-2 mt-3",children:r.jsx(gj,{mode:"edit",protocol:$,children:r.jsxs(R,{size:"sm",variant:"outline",className:"flex-1",children:[r.jsx(Ct,{className:"h-4 w-4 mr-1"}),"Modifier"]})})})]})})},$.id))}),o.length===0&&r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(ur,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),r.jsx("p",{children:"Aucun protocole vaccinal configuré"}),r.jsx(gj,{mode:"create",children:r.jsxs(R,{className:"mt-4",children:[r.jsx(Ue,{className:"h-4 w-4 mr-2"}),"Créer un protocole"]})})]})]})]})})]}),r.jsx(He,{open:N,onOpenChange:w,children:r.jsxs(We,{className:"max-w-2xl",children:[r.jsx(Ge,{children:r.jsx(Ke,{children:"Détails de la Vaccination"})}),x&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Animal:"}),r.jsx("p",{children:x.petName})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Client:"}),r.jsx("p",{children:x.clientName})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Vaccin:"}),r.jsx("p",{children:x.vaccine_name})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Date:"}),r.jsx("p",{children:Je(new Date(x.vaccination_date),"dd/MM/yyyy",{locale:$n})})]}),x.next_due_date&&r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Prochain rappel:"}),r.jsx("p",{children:Je(new Date(x.next_due_date),"dd/MM/yyyy",{locale:$n})})]})]}),x.notes&&r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Notes:"}),r.jsx("p",{className:"text-gray-600",children:x.notes})]}),r.jsx("div",{className:"border-t pt-4 mt-4",children:r.jsx("div",{className:"flex justify-center",children:r.jsx(U6,{animalId:x.animal_id})})})]})]})}),r.jsx(He,{open:C,onOpenChange:S,children:r.jsxs(We,{className:"max-w-md",children:[r.jsx(Ge,{children:r.jsx(Ke,{children:"Confirmer la suppression"})}),_&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("p",{className:"text-gray-600",children:["Êtes-vous sûr de vouloir supprimer la vaccination ",r.jsx("strong",{children:_.vaccine_name})," pour ",r.jsx("strong",{children:_.petName})," ?"]}),r.jsx("p",{className:"text-sm text-red-600",children:"Cette action est irréversible."}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(R,{variant:"outline",onClick:()=>S(!1),children:"Annuler"}),r.jsx(R,{variant:"destructive",onClick:L,children:"Supprimer"})]})]})]})})]})}var Fy="Switch",[hAe,xke]=cs(Fy),[fAe,mAe]=hAe(Fy),G6=b.forwardRef((e,t)=>{const{__scopeSwitch:n,name:s,checked:a,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=e,[f,m]=b.useState(null),g=pt(t,y=>m(y)),p=b.useRef(!1),v=f?d||!!f.closest("form"):!0,[j,x]=yi({prop:a,defaultProp:i??!1,onChange:u,caller:Fy});return r.jsxs(fAe,{scope:n,checked:j,disabled:l,children:[r.jsx(Le.button,{type:"button",role:"switch","aria-checked":j,"aria-required":o,"data-state":X6(j),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:g,onClick:Ae(e.onClick,y=>{x(N=>!N),v&&(p.current=y.isPropagationStopped(),p.current||y.stopPropagation())})}),v&&r.jsx(Q6,{control:f,bubbles:!p.current,name:s,value:c,checked:j,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});G6.displayName=Fy;var K6="SwitchThumb",Y6=b.forwardRef((e,t)=>{const{__scopeSwitch:n,...s}=e,a=mAe(K6,n);return r.jsx(Le.span,{"data-state":X6(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t})});Y6.displayName=K6;var pAe="SwitchBubbleInput",Q6=b.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:s=!0,...a},i)=>{const o=b.useRef(null),l=pt(o,i),c=ES(n),u=X1(t);return b.useEffect(()=>{const d=o.current;if(!d)return;const h=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==n&&m){const g=new Event("click",{bubbles:s});m.call(d,n),d.dispatchEvent(g)}},[c,n,s]),r.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:l,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Q6.displayName=pAe;function X6(e){return e?"checked":"unchecked"}var J6=G6,gAe=Y6;const Xn=b.forwardRef(({className:e,...t},n)=>r.jsx(J6,{className:Ie("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:r.jsx(gAe,{className:Ie("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Xn.displayName=J6.displayName;function vAe({open:e,onOpenChange:t,editingProtocol:n}){const s=yZ(),a=jZ(),{toast:i}=et(),[o,l]=b.useState({species:"",parasiteType:"",productName:"",activeIngredient:"",administrationRoute:"",dosageRecommendation:"",frequencyDays:"",ageRecommendation:"",weightRange:"",seasonRecommendation:"",notes:"",active:!0});b.useEffect(()=>{n&&l({species:n.species,parasiteType:n.parasite_type,productName:n.product_name,activeIngredient:n.active_ingredient||"",administrationRoute:n.administration_route||"",dosageRecommendation:n.dosage_per_kg||"",frequencyDays:"",ageRecommendation:n.age_restriction||"",weightRange:"",seasonRecommendation:"",notes:n.notes||"",active:n.active})},[n]);const c=(f,m)=>{l(g=>({...g,[f]:m}))},u=()=>{l({species:"",parasiteType:"",productName:"",activeIngredient:"",administrationRoute:"",dosageRecommendation:"",frequencyDays:"",ageRecommendation:"",weightRange:"",seasonRecommendation:"",notes:"",active:!0})},d=async f=>{if(f.preventDefault(),!o.species||!o.parasiteType||!o.productName){i({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires.",variant:"destructive"});return}try{const m={species:o.species,parasite_type:o.parasiteType,product_name:o.productName,active_ingredient:o.activeIngredient||void 0,administration_route:o.administrationRoute||void 0,dosage_per_kg:o.dosageRecommendation||void 0,frequency:o.frequencyDays?`${o.frequencyDays} jours`:void 0,age_restriction:o.ageRecommendation||void 0,notes:[o.notes,o.weightRange?`Poids: ${o.weightRange}`:"",o.seasonRecommendation?`Saison: ${o.seasonRecommendation}`:""].filter(Boolean).join(" | ")||void 0,active:o.active};n?(await a.mutateAsync({id:n.id,updates:m}),i({title:"Succès",description:"Le protocole antiparasitaire a été modifié avec succès."})):(await s.mutateAsync(m),i({title:"Succès",description:"Le protocole antiparasitaire a été créé avec succès."})),u(),t(!1)}catch(m){console.error("Erreur lors de la sauvegarde du protocole:",m),i({title:"Erreur",description:"Une erreur s'est produite lors de la sauvegarde.",variant:"destructive"})}},h=s.isPending||a.isPending;return r.jsx(He,{open:e,onOpenChange:t,children:r.jsxs(We,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[r.jsx(Ge,{children:r.jsxs(Ke,{className:"flex items-center gap-2",children:[r.jsx(ur,{className:"h-5 w-5"}),n?"Modifier le protocole":"Nouveau protocole antiparasitaire"]})}),r.jsxs("form",{onSubmit:d,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"species",children:"Espèce *"}),r.jsxs(ve,{value:o.species,onValueChange:f=>c("species",f),children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Sélectionner une espèce"})}),r.jsxs(ge,{children:[r.jsx(M,{value:"Chien",children:"Chien"}),r.jsx(M,{value:"Chat",children:"Chat"}),r.jsx(M,{value:"Oiseau",children:"Oiseau"}),r.jsx(M,{value:"Lapin",children:"Lapin"}),r.jsx(M,{value:"Furet",children:"Furet"}),r.jsx(M,{value:"Autre",children:"Autre"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"parasiteType",children:"Type de parasite *"}),r.jsxs(ve,{value:o.parasiteType,onValueChange:f=>c("parasiteType",f),children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Sélectionner le type"})}),r.jsxs(ge,{children:[r.jsx(M,{value:"puces",children:"Puces"}),r.jsx(M,{value:"tiques",children:"Tiques"}),r.jsx(M,{value:"vers_intestinaux",children:"Vers intestinaux"}),r.jsx(M,{value:"vers_cardiaques",children:"Vers cardiaques"}),r.jsx(M,{value:"acariens",children:"Acariens"}),r.jsx(M,{value:"poux",children:"Poux"}),r.jsx(M,{value:"multi_parasites",children:"Multi-parasites"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"productName",children:"Nom du produit *"}),r.jsx(K,{id:"productName",value:o.productName,onChange:f=>c("productName",f.target.value),placeholder:"Ex: Frontline, Bravecto...",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"activeIngredient",children:"Principe actif"}),r.jsx(K,{id:"activeIngredient",value:o.activeIngredient,onChange:f=>c("activeIngredient",f.target.value),placeholder:"Ex: Fipronil, Fluralaner..."})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"administrationRoute",children:"Voie d'administration"}),r.jsxs(ve,{value:o.administrationRoute,onValueChange:f=>c("administrationRoute",f),children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Sélectionner la voie"})}),r.jsxs(ge,{children:[r.jsx(M,{value:"spot_on",children:"Spot-on (pipette)"}),r.jsx(M,{value:"oral",children:"Orale (comprimé/liquide)"}),r.jsx(M,{value:"injection",children:"Injection"}),r.jsx(M,{value:"spray",children:"Spray"}),r.jsx(M,{value:"collier",children:"Collier"}),r.jsx(M,{value:"shampoing",children:"Shampoing"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"dosageRecommendation",children:"Recommandation de dosage"}),r.jsx(K,{id:"dosageRecommendation",value:o.dosageRecommendation,onChange:f=>c("dosageRecommendation",f.target.value),placeholder:"Ex: 1 pipette par 10-20kg..."})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"frequencyDays",children:"Fréquence (jours)"}),r.jsx(K,{id:"frequencyDays",type:"number",value:o.frequencyDays,onChange:f=>c("frequencyDays",f.target.value),placeholder:"Ex: 30, 90..."})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"ageRecommendation",children:"Recommandation d'âge"}),r.jsx(K,{id:"ageRecommendation",value:o.ageRecommendation,onChange:f=>c("ageRecommendation",f.target.value),placeholder:"Ex: > 8 semaines, adulte..."})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"weightRange",children:"Gamme de poids"}),r.jsx(K,{id:"weightRange",value:o.weightRange,onChange:f=>c("weightRange",f.target.value),placeholder:"Ex: 10-20kg, < 5kg..."})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"seasonRecommendation",children:"Recommandation saisonnière"}),r.jsxs(ve,{value:o.seasonRecommendation,onValueChange:f=>c("seasonRecommendation",f),children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Sélectionner la saison"})}),r.jsxs(ge,{children:[r.jsx(M,{value:"toute_annee",children:"Toute l'année"}),r.jsx(M,{value:"printemps_ete",children:"Printemps-Été"}),r.jsx(M,{value:"automne_hiver",children:"Automne-Hiver"}),r.jsx(M,{value:"printemps",children:"Printemps"}),r.jsx(M,{value:"ete",children:"Été"}),r.jsx(M,{value:"automne",children:"Automne"}),r.jsx(M,{value:"hiver",children:"Hiver"})]})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"notes",children:"Notes"}),r.jsx(Be,{id:"notes",value:o.notes,onChange:f=>c("notes",f.target.value),placeholder:"Informations supplémentaires, contre-indications...",rows:3})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Xn,{id:"active",checked:o.active,onCheckedChange:f=>c("active",f)}),r.jsx(D,{htmlFor:"active",children:"Protocole actif"})]}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx(R,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),r.jsxs(R,{type:"submit",disabled:h,children:[h&&r.jsx(Nr,{className:"h-4 w-4 mr-2 animate-spin"}),n?"Modifier":"Créer"]})]})]})]})})}const xAe=e=>{if(!e.next_treatment_date)return"completed";const t=new Date(e.next_treatment_date),n=new Date,s=LS(n,7);return Gg(t,n)?"overdue":Gg(t,s)?"upcoming":"scheduled"},YE=e=>{switch(e){case"completed":return"bg-green-100 text-green-800 border-green-200";case"overdue":return"bg-red-100 text-red-800 border-red-200";case"scheduled":return"bg-blue-100 text-blue-800 border-blue-200";case"upcoming":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},QE=e=>{switch(e){case"completed":return r.jsx(Dn,{className:"h-4 w-4"});case"overdue":return r.jsx(vn,{className:"h-4 w-4"});case"scheduled":return r.jsx(Yt,{className:"h-4 w-4"});case"upcoming":return r.jsx(Ye,{className:"h-4 w-4"});default:return r.jsx(Yt,{className:"h-4 w-4"})}},XE=e=>{switch(e){case"completed":return"Terminé";case"overdue":return"En retard";case"scheduled":return"Programmé";case"upcoming":return"À venir";default:return"Inconnu"}},yAe=(e,t,n)=>e.map(s=>{const a=t.find(l=>l.id===s.animal_id),i=a?n.find(l=>l.id===a.client_id):null,o=xAe(s);return{...s,petName:(a==null?void 0:a.name)||"Animal inconnu",petSpecies:(a==null?void 0:a.species)||"Espèce inconnue",clientName:i?`${i.first_name} ${i.last_name}`:"Client inconnu",status:o,animal:a,client:i}});function jAe(){const{currentView:e}=cc("antiparasitics"),{data:t=[],isLoading:n}=mZ(),{data:s=[],isLoading:a}=vZ(),{data:i=[]}=ds(),{data:o=[]}=us(),l=gZ(),{toast:c}=et(),[u,d]=b.useState(""),[h,f]=b.useState("all"),[m,g]=b.useState("all"),[p,v]=b.useState(!1),[j,x]=b.useState(!1),[y,N]=b.useState(!1),[w,C]=b.useState(null),[S,_]=b.useState(!1),[k,T]=b.useState(null),[P,A]=b.useState(null),B=b.useMemo(()=>yAe(t,i,o),[t,i,o]),L=b.useMemo(()=>B.filter(q=>{const Y=!u||q.petName.toLowerCase().includes(u.toLowerCase())||q.clientName.toLowerCase().includes(u.toLowerCase())||q.product_name.toLowerCase().includes(u.toLowerCase()),re=h==="all"||q.status===h,oe=m==="all"||q.parasite_type===m;return Y&&re&&oe}),[B,u,h,m]),H=b.useMemo(()=>{const q=B.length,Y=B.filter(me=>me.status==="overdue").length,re=B.filter(me=>me.status==="upcoming").length,oe=B.filter(me=>me.status==="completed").length,ae=B.reduce((me,we)=>{const ue=we.parasite_type||"Non spécifié";return me[ue]=(me[ue]||0)+1,me},{});return{total:q,overdue:Y,upcoming:re,completed:oe,parasiteTypes:ae}},[B]),z=q=>{T(q),_(!0)},$=async()=>{if(k)try{await l.mutateAsync(k.id),c({title:"Succès",description:"Le traitement antiparasitaire a été supprimé."}),_(!1),T(null)}catch{c({title:"Erreur",description:"Impossible de supprimer le traitement.",variant:"destructive"})}},E=(q=>[...new Set(q)])(B.map(q=>q.parasite_type).filter(Boolean));return n?r.jsxs("div",{className:"flex items-center justify-center h-64",children:[r.jsx(Nr,{className:"h-8 w-8 animate-spin"}),r.jsx("span",{className:"ml-2",children:"Chargement des traitements antiparasitaires..."})]}):r.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto p-4 sm:p-6 lg:p-8",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[r.jsx(cl,{className:"h-8 w-8"}),"Traitements Antiparasitaires"]}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Gestion des traitements antiparasitaires et protocoles"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(R,{onClick:()=>x(!0),variant:"outline",className:"gap-2",children:[r.jsx(ur,{className:"h-4 w-4"}),"Protocoles"]}),r.jsxs(R,{onClick:()=>v(!0),className:"gap-2",children:[r.jsx(Ue,{className:"h-4 w-4"}),"Nouveau traitement"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(te,{children:r.jsx(ne,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),r.jsx("p",{className:"text-2xl font-bold",children:H.total})]}),r.jsx(Ea,{className:"h-8 w-8 text-blue-500"})]})})}),r.jsx(te,{children:r.jsx(ne,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"En retard"}),r.jsx("p",{className:"text-2xl font-bold text-red-600",children:H.overdue})]}),r.jsx(vn,{className:"h-8 w-8 text-red-500"})]})})}),r.jsx(te,{children:r.jsx(ne,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"À venir"}),r.jsx("p",{className:"text-2xl font-bold text-orange-600",children:H.upcoming})]}),r.jsx(Ye,{className:"h-8 w-8 text-orange-500"})]})})}),r.jsx(te,{children:r.jsx(ne,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Terminés"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:H.completed})]}),r.jsx(Dn,{className:"h-8 w-8 text-green-500"})]})})})]}),r.jsx(te,{children:r.jsx(ne,{className:"p-4",children:r.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"relative",children:[r.jsx(Do,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx(K,{placeholder:"Rechercher par animal, client ou produit...",value:u,onChange:q=>d(q.target.value),className:"pl-10"})]})}),r.jsxs(ve,{value:h,onValueChange:f,children:[r.jsx(pe,{className:"w-48",children:r.jsx(xe,{placeholder:"Filtrer par statut"})}),r.jsxs(ge,{children:[r.jsx(M,{value:"all",children:"Tous les statuts"}),r.jsx(M,{value:"overdue",children:"En retard"}),r.jsx(M,{value:"upcoming",children:"À venir"}),r.jsx(M,{value:"scheduled",children:"Programmés"}),r.jsx(M,{value:"completed",children:"Terminés"})]})]}),r.jsxs(ve,{value:m,onValueChange:g,children:[r.jsx(pe,{className:"w-48",children:r.jsx(xe,{placeholder:"Filtrer par parasite"})}),r.jsxs(ge,{children:[r.jsx(M,{value:"all",children:"Tous les parasites"}),E.map(q=>r.jsx(M,{value:q,children:q},q))]})]})]})})}),r.jsxs(Ai,{defaultValue:"overview",className:"space-y-4",children:[r.jsxs(qa,{children:[r.jsxs(kt,{value:"overview",className:"flex items-center gap-2",children:[r.jsx(ji,{className:"h-4 w-4"}),"Vue d'ensemble"]}),r.jsxs(kt,{value:"protocols",className:"flex items-center gap-2",children:[r.jsx(ur,{className:"h-4 w-4"}),"Protocoles"]}),r.jsxs(kt,{value:"statistics",className:"flex items-center gap-2",children:[r.jsx(an,{className:"h-4 w-4"}),"Statistiques"]})]}),r.jsx(Tt,{value:"overview",children:r.jsxs(te,{children:[r.jsx(he,{children:r.jsxs(fe,{className:"flex items-center justify-between",children:[r.jsxs("span",{children:["Traitements antiparasitaires (",L.length,")"]}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs(R,{variant:"outline",size:"sm",onClick:()=>{},children:[r.jsx(vx,{className:"h-4 w-4 mr-1"}),"Export"]})})]})}),r.jsxs(ne,{children:[e==="table"?r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Vd,{children:[r.jsx(zd,{children:r.jsxs(la,{children:[r.jsx(it,{children:"Animal"}),r.jsx(it,{children:"Client"}),r.jsx(it,{children:"Produit"}),r.jsx(it,{children:"Parasite"}),r.jsx(it,{children:"Date traitement"}),r.jsx(it,{children:"Prochain traitement"}),r.jsx(it,{children:"Statut"}),r.jsx(it,{children:"Actions"})]})}),r.jsx(qd,{children:L.map(q=>r.jsxs(la,{children:[r.jsx(ot,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Hn,{className:"h-8 w-8",children:r.jsx(Gn,{children:r.jsx(Pg,{className:"h-4 w-4"})})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:q.petName}),r.jsx("div",{className:"text-sm text-gray-500",children:q.petSpecies})]})]})}),r.jsx(ot,{children:q.clientName}),r.jsx(ot,{children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:q.product_name}),q.active_ingredient&&r.jsx("div",{className:"text-sm text-gray-500",children:q.active_ingredient})]})}),r.jsx(ot,{children:q.parasite_type&&r.jsx(Se,{variant:"outline",children:q.parasite_type})}),r.jsx(ot,{children:Je(new Date(q.treatment_date),"dd/MM/yyyy",{locale:$n})}),r.jsx(ot,{children:q.next_treatment_date?Je(new Date(q.next_treatment_date),"dd/MM/yyyy",{locale:$n}):"N/A"}),r.jsx(ot,{children:r.jsx(Se,{className:YE(q.status),children:r.jsxs("div",{className:"flex items-center gap-1",children:[QE(q.status),XE(q.status)]})})}),r.jsx(ot,{children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(R,{variant:"ghost",size:"sm",onClick:()=>{C(q),N(!0)},children:r.jsx(wn,{className:"h-4 w-4"})}),r.jsx(R,{variant:"ghost",size:"sm",onClick:()=>z(q),children:r.jsx(rn,{className:"h-4 w-4"})})]})})]},q.id))})]})}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:L.map(q=>r.jsx(te,{className:"hover:shadow-md transition-shadow",children:r.jsxs(ne,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Hn,{className:"h-8 w-8",children:r.jsx(Gn,{children:r.jsx(Pg,{className:"h-4 w-4"})})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-sm",children:q.petName}),r.jsx("p",{className:"text-xs text-gray-600",children:q.clientName})]})]}),r.jsx(Se,{className:YE(q.status),children:r.jsxs("div",{className:"flex items-center gap-1",children:[QE(q.status),XE(q.status)]})})]}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Produit:"})," ",q.product_name]}),q.parasite_type&&r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Parasite:"})," ",q.parasite_type]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Date:"})," ",Je(new Date(q.treatment_date),"dd/MM/yyyy")]}),q.next_treatment_date&&r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Prochain:"})," ",Je(new Date(q.next_treatment_date),"dd/MM/yyyy")]})]}),r.jsxs("div",{className:"flex justify-between mt-4",children:[r.jsxs(R,{variant:"outline",size:"sm",onClick:()=>{C(q),N(!0)},children:[r.jsx(wn,{className:"h-4 w-4 mr-1"}),"Détails"]}),r.jsx(R,{variant:"ghost",size:"sm",onClick:()=>z(q),children:r.jsx(rn,{className:"h-4 w-4"})})]})]})},q.id))}),L.length===0&&r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(cl,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),r.jsx("p",{children:"Aucun traitement antiparasitaire trouvé"})]})]})]})}),r.jsx(Tt,{value:"protocols",children:r.jsxs(te,{children:[r.jsx(he,{children:r.jsxs(fe,{className:"flex items-center justify-between",children:[r.jsxs("span",{children:["Protocoles antiparasitaires (",s.length,")"]}),r.jsxs(R,{onClick:()=>{A(null),x(!0)},className:"gap-2",children:[r.jsx(Ue,{className:"h-4 w-4"}),"Nouveau protocole"]})]})}),r.jsxs(ne,{children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(q=>r.jsx(te,{className:"hover:shadow-md transition-shadow",children:r.jsxs(ne,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx(Se,{variant:"outline",children:q.species}),r.jsx("div",{className:"flex gap-1",children:r.jsx(R,{variant:"ghost",size:"sm",onClick:()=>{A(q),x(!0)},children:r.jsx(Ct,{className:"h-4 w-4"})})})]}),r.jsx("h4",{className:"font-medium mb-2",children:q.product_name}),r.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Parasite:"})," ",q.parasite_type]}),q.active_ingredient&&r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Principe actif:"})," ",q.active_ingredient]}),q.frequency&&r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Fréquence:"})," ",q.frequency]})]})]})},q.id))}),s.length===0&&r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(ur,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),r.jsx("p",{children:"Aucun protocole configuré"})]})]})]})}),r.jsx(Tt,{value:"statistics",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(te,{children:[r.jsx(he,{children:r.jsxs(fe,{className:"flex items-center gap-2",children:[r.jsx(an,{className:"h-5 w-5"}),"Répartition par type de parasite"]})}),r.jsx(ne,{children:r.jsx("div",{className:"space-y-3",children:Object.entries(H.parasiteTypes).map(([q,Y])=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm",children:q}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"bg-gray-200 rounded-full h-2 w-20",children:r.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${Y/H.total*100}%`}})}),r.jsx("span",{className:"text-sm font-medium",children:Y})]})]},q))})})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{children:"Résumé des traitements"})}),r.jsx(ne,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{children:"Total des traitements"}),r.jsx("span",{className:"font-bold",children:H.total})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{children:"En retard"}),r.jsx("span",{className:"font-bold text-red-600",children:H.overdue})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{children:"À venir (7 jours)"}),r.jsx("span",{className:"font-bold text-orange-600",children:H.upcoming})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{children:"Terminés"}),r.jsx("span",{className:"font-bold text-green-600",children:H.completed})]})]})})]})]})})]}),r.jsx(VN,{open:p,onOpenChange:v}),r.jsx(vAe,{open:j,onOpenChange:x,editingProtocol:P}),r.jsx(He,{open:y,onOpenChange:N,children:r.jsxs(We,{className:"max-w-2xl",children:[r.jsx(Ge,{children:r.jsx(Ke,{children:"Détails du traitement"})}),w&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Animal:"}),r.jsx("p",{children:w.petName})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Client:"}),r.jsx("p",{children:w.clientName})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Produit:"}),r.jsx("p",{children:w.product_name})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Principe actif:"}),r.jsx("p",{children:w.active_ingredient||"N/A"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Type de parasite:"}),r.jsx("p",{children:w.parasite_type||"N/A"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Voie d'administration:"}),r.jsx("p",{children:w.administration_route||"N/A"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Dosage:"}),r.jsx("p",{children:w.dosage||"N/A"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Date du traitement:"}),r.jsx("p",{children:Je(new Date(w.treatment_date),"dd/MM/yyyy",{locale:$n})})]}),w.next_treatment_date&&r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Prochain traitement:"}),r.jsx("p",{children:Je(new Date(w.next_treatment_date),"dd/MM/yyyy",{locale:$n})})]}),w.effectiveness_rating&&r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Efficacité:"}),r.jsxs("p",{children:[w.effectiveness_rating,"/10"]})]})]}),w.notes&&r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Notes:"}),r.jsx("p",{className:"text-gray-600",children:w.notes})]})]})]})}),r.jsx(He,{open:S,onOpenChange:_,children:r.jsxs(We,{className:"max-w-md",children:[r.jsx(Ge,{children:r.jsx(Ke,{children:"Confirmer la suppression"})}),k&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("p",{className:"text-gray-600",children:["Êtes-vous sûr de vouloir supprimer le traitement ",r.jsx("strong",{children:k.product_name})," pour ",r.jsx("strong",{children:k.petName})," ?"]}),r.jsx("p",{className:"text-sm text-red-600",children:"Cette action est irréversible."}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(R,{variant:"outline",onClick:()=>_(!1),children:"Annuler"}),r.jsx(R,{variant:"destructive",onClick:$,children:"Supprimer"})]})]})]})})]})}const bAe=[{value:"medication",label:"Médicaments",icon:"💊"},{value:"vaccine",label:"Vaccins",icon:"💉"},{value:"consumable",label:"Consommables",icon:"🩹"},{value:"equipment",label:"Équipement",icon:"🔧"},{value:"supplement",label:"Suppléments",icon:"🧪"}],wAe=[{value:"unit",label:"Unité"},{value:"box",label:"Boîte"},{value:"vial",label:"Flacon"},{value:"bottle",label:"Bouteille"},{value:"pack",label:"Paquet"},{value:"kg",label:"Kilogramme"},{value:"g",label:"Gramme"},{value:"ml",label:"Millilitre"},{value:"l",label:"Litre"}],NAe={medication:["Antibiotique","Anti-inflammatoire","Antiparasitaire","Anesthésique","Analgésique","Antihistaminique","Corticoïde","Diurétique","Autre"],vaccine:["Vaccin Core","Vaccin Non-Core","Vaccin Obligatoire","Vaccin Recommandé","Autre"],consumable:["Matériel d'injection","Protection","Pansement","Suture","Autre"],equipment:["Diagnostic","Chirurgie","Monitoring","Stérilisation","Autre"],supplement:["Vitamines","Minéraux","Probiotiques","Acides aminés","Autre"]};function JE({open:e,onOpenChange:t,editingItem:n}){var h;const{addStockItem:s,updateStockItem:a}=ct(),{settings:i}=xt(),{toast:o}=et(),[l,c]=b.useState({name:"",category:"medication",subcategory:"",description:"",manufacturer:"",batchNumber:"",dosage:"",unit:"unit",currentStock:0,minimumStock:0,maximumStock:0,purchasePrice:0,sellingPrice:0,expirationDate:"",supplier:"",location:"",notes:"",barcode:"",sku:"",isActive:!0});b.useEffect(()=>{c(n?{name:n.name,category:n.category,subcategory:n.subcategory||"",description:n.description||"",manufacturer:n.manufacturer||"",batchNumber:n.batchNumber||"",dosage:n.dosage||"",unit:n.unit,currentStock:n.currentStock,minimumStock:n.minimumStock,maximumStock:n.maximumStock||0,purchasePrice:n.purchasePrice,sellingPrice:n.sellingPrice,expirationDate:n.expirationDate||"",supplier:n.supplier||"",location:n.location||"",notes:n.notes||"",barcode:n.barcode||"",sku:n.sku||"",isActive:n.isActive}:{name:"",category:"medication",subcategory:"",description:"",manufacturer:"",batchNumber:"",dosage:"",unit:"unit",currentStock:0,minimumStock:0,maximumStock:0,purchasePrice:0,sellingPrice:0,expirationDate:"",supplier:"",location:"",notes:"",barcode:"",sku:"",isActive:!0})},[n,e]);const u=f=>{if(f.preventDefault(),!l.name.trim()){o({title:"Erreur",description:"Le nom de l'élément est requis.",variant:"destructive"});return}if(l.currentStock<0||l.minimumStock<0||l.purchasePrice<0||l.sellingPrice<0){o({title:"Erreur",description:"Les valeurs numériques ne peuvent pas être négatives.",variant:"destructive"});return}const m={...l,currentStock:Number(l.currentStock),minimumStock:Number(l.minimumStock),maximumStock:Number(l.maximumStock)||void 0,purchasePrice:Number(l.purchasePrice),sellingPrice:Number(l.sellingPrice),expirationDate:l.expirationDate||void 0,subcategory:l.subcategory||void 0,description:l.description||void 0,manufacturer:l.manufacturer||void 0,batchNumber:l.batchNumber||void 0,dosage:l.dosage||void 0,supplier:l.supplier||void 0,location:l.location||void 0,notes:l.notes||void 0,barcode:l.barcode||void 0,sku:l.sku||void 0};n?(a(n.id,m),o({title:"Élément modifié",description:`"${l.name}" a été modifié avec succès.`})):(s(m),o({title:"Élément ajouté",description:`"${l.name}" a été ajouté au stock.`})),t(!1)},d=(f,m)=>{c(g=>({...g,[f]:m}))};return r.jsx(He,{open:e,onOpenChange:t,children:r.jsxs(We,{className:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[r.jsxs(Ge,{children:[r.jsx(Ke,{children:n?"Modifier l'élément de stock":"Nouvel élément de stock"}),r.jsx(yt,{children:n?"Modifiez les informations de l'élément de stock.":"Ajoutez un nouvel élément à votre inventaire."})]}),r.jsxs("form",{onSubmit:u,className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Informations de base"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"name",children:"Nom de l'élément *"}),r.jsx(K,{id:"name",value:l.name,onChange:f=>d("name",f.target.value),placeholder:"ex: Amoxicilline 500mg",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"category",children:"Catégorie *"}),r.jsxs(ve,{value:l.category,onValueChange:f=>d("category",f),children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Sélectionner une catégorie"})}),r.jsx(ge,{children:bAe.map(f=>r.jsxs(M,{value:f.value,children:[f.icon," ",f.label]},f.value))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"subcategory",children:"Sous-catégorie"}),r.jsxs(ve,{value:l.subcategory,onValueChange:f=>d("subcategory",f),children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Sélectionner une sous-catégorie"})}),r.jsx(ge,{children:(h=NAe[l.category])==null?void 0:h.map(f=>r.jsx(M,{value:f,children:f},f))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"manufacturer",children:"Fabricant"}),r.jsx(K,{id:"manufacturer",value:l.manufacturer,onChange:f=>d("manufacturer",f.target.value),placeholder:"ex: Boehringer Ingelheim"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"description",children:"Description"}),r.jsx(Be,{id:"description",value:l.description,onChange:f=>d("description",f.target.value),placeholder:"Description détaillée de l'élément...",rows:2})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Informations techniques"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"batchNumber",children:"Numéro de lot"}),r.jsx(K,{id:"batchNumber",value:l.batchNumber,onChange:f=>d("batchNumber",f.target.value),placeholder:"ex: AMX2024001"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"dosage",children:"Dosage"}),r.jsx(K,{id:"dosage",value:l.dosage,onChange:f=>d("dosage",f.target.value),placeholder:"ex: 500mg"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"unit",children:"Unité"}),r.jsxs(ve,{value:l.unit,onValueChange:f=>d("unit",f),children:[r.jsx(pe,{children:r.jsx(xe,{placeholder:"Sélectionner une unité"})}),r.jsx(ge,{children:wAe.map(f=>r.jsx(M,{value:f.value,children:f.label},f.value))})]})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Gestion du stock"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"currentStock",children:"Stock actuel *"}),r.jsx(K,{id:"currentStock",type:"number",min:"0",value:l.currentStock,onChange:f=>d("currentStock",parseInt(f.target.value)||0),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"minimumStock",children:"Stock minimum *"}),r.jsx(K,{id:"minimumStock",type:"number",min:"0",value:l.minimumStock,onChange:f=>d("minimumStock",parseInt(f.target.value)||0),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"maximumStock",children:"Stock maximum"}),r.jsx(K,{id:"maximumStock",type:"number",min:"0",value:l.maximumStock,onChange:f=>d("maximumStock",parseInt(f.target.value)||0)})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs(D,{htmlFor:"purchasePrice",children:["Prix d'achat (",i.currency,") *"]}),r.jsx(K,{id:"purchasePrice",type:"number",step:"0.01",min:"0",value:l.purchasePrice,onChange:f=>d("purchasePrice",parseFloat(f.target.value)||0),required:!0}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Prix d'achat au fournisseur"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(D,{htmlFor:"sellingPrice",children:["Prix de vente (",i.currency,") *"]}),r.jsx(K,{id:"sellingPrice",type:"number",step:"0.01",min:"0",value:l.sellingPrice,onChange:f=>d("sellingPrice",parseFloat(f.target.value)||0),required:!0}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Prix de vente au client"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"La valeur totale sera calculée automatiquement : Prix d'achat × Stock actuel"}),l.purchasePrice>0&&l.currentStock>0&&r.jsxs("div",{className:"text-sm font-medium text-primary",children:["Valeur totale : ",(l.purchasePrice*l.currentStock).toFixed(2)," ",i.currency]}),l.purchasePrice>0&&l.sellingPrice>0&&r.jsxs("div",{className:"text-sm font-medium text-green-600",children:["Marge : ",((l.sellingPrice-l.purchasePrice)*l.currentStock).toFixed(2)," ",i.currency]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Informations supplémentaires"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"expirationDate",children:"Date d'expiration"}),r.jsx(K,{id:"expirationDate",type:"date",value:l.expirationDate,onChange:f=>d("expirationDate",f.target.value)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"supplier",children:"Fournisseur"}),r.jsx(K,{id:"supplier",value:l.supplier,onChange:f=>d("supplier",f.target.value),placeholder:"ex: Pharmacie Vétérinaire Centrale"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"location",children:"Emplacement"}),r.jsx(K,{id:"location",value:l.location,onChange:f=>d("location",f.target.value),placeholder:"ex: Armoire A - Étagère 1"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"barcode",children:"Code-barres"}),r.jsx(K,{id:"barcode",value:l.barcode,onChange:f=>d("barcode",f.target.value),placeholder:"ex: 1234567890123"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"sku",children:"SKU"}),r.jsx(K,{id:"sku",value:l.sku,onChange:f=>d("sku",f.target.value),placeholder:"ex: MED-AMX-500"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"notes",children:"Notes"}),r.jsx(Be,{id:"notes",value:l.notes,onChange:f=>d("notes",f.target.value),placeholder:"Notes supplémentaires...",rows:3})]})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(R,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),r.jsx(R,{type:"submit",children:n?"Modifier":"Ajouter"})]})]})]})})}const SAe=[{value:"in",label:"Entrée",icon:an,description:"Ajout de stock (achat, retour, etc.)"},{value:"out",label:"Sortie",icon:$l,description:"Utilisation, vente, perte, etc."},{value:"adjustment",label:"Ajustement",icon:nI,description:"Correction d'inventaire"},{value:"transfer",label:"Transfert",icon:jq,description:"Déplacement entre emplacements"}],CAe={in:["Achat fournisseur","Retour client","Inventaire initial","Don/échantillon","Transfert entrant","Autre"],out:["Utilisation consultation","Vente client","Périmé/expiré","Cassé/endommagé","Vol/perte","Transfert sortant","Autre"],adjustment:["Correction inventaire","Comptage physique","Erreur saisie","Autre"],transfer:["Changement emplacement","Transfert entre sites","Réorganisation stock","Autre"]};function _Ae({open:e,onOpenChange:t,item:n}){var g;const{updateStockItem:s,addStockMovement:a}=ct(),{settings:i}=xt(),{toast:o}=et(),[l,c]=b.useState({type:"out",quantity:0,reason:"",reference:"",performedBy:"",notes:""}),[u,d]=b.useState("");b.useEffect(()=>{n&&(c({type:"out",quantity:0,reason:"",reference:"",performedBy:"",notes:""}),d(""))},[n,e]);const h=p=>{if(p.preventDefault(),!n)return;if(l.quantity<=0){o({title:"Erreur",description:"La quantité doit être supérieure à 0.",variant:"destructive"});return}if(!l.reason.trim()){o({title:"Erreur",description:"La raison du mouvement est requise.",variant:"destructive"});return}let v=n.currentStock;if(l.type==="in")v+=l.quantity;else if(l.type==="out"){if(l.quantity>n.currentStock){o({title:"Erreur",description:`Stock insuffisant. Stock disponible: ${n.currentStock}`,variant:"destructive"});return}v-=l.quantity}else l.type==="adjustment"&&(v=l.quantity);l.type!=="transfer"&&s(n.id,{currentStock:v,lastRestocked:l.type==="in"?new Date().toISOString().split("T")[0]:void 0});const j=l.performedBy==="Autre"?u:l.performedBy,x={itemId:n.id,itemName:n.name,type:l.type,quantity:l.quantity,reason:l.reason,reference:l.reference||void 0,performedBy:j||void 0,date:new Date().toISOString(),notes:l.notes||void 0};a(x),o({title:"Mouvement enregistré",description:`${{in:"Entrée",out:"Sortie",adjustment:"Ajustement",transfer:"Transfert"}[l.type]} de ${l.quantity} ${n.unit} pour "${n.name}" enregistrée.`}),t(!1)},f=(p,v)=>{c(j=>({...j,[p]:v}))},m=()=>{if(!n)return 0;let p=n.currentStock;return l.type==="in"?p+=l.quantity:l.type==="out"?p-=l.quantity:l.type==="adjustment"&&(p=l.quantity),Math.max(0,p)};return n?r.jsx(He,{open:e,onOpenChange:t,children:r.jsxs(We,{className:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[r.jsxs(Ge,{children:[r.jsxs(Ke,{className:"flex items-center gap-2",children:[r.jsx(an,{className:"h-5 w-5"}),"Mouvement de stock"]}),r.jsxs(yt,{children:['Enregistrer un mouvement pour "',n.name,'"']})]}),r.jsxs("form",{onSubmit:h,className:"space-y-6",children:[r.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-lg border border-blue-200",children:[r.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[r.jsx(Ea,{className:"h-5 w-5 text-blue-600"}),"Élément concerné"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-white p-3 rounded-lg border",children:[r.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Stock actuel"}),r.jsxs("div",{className:"font-semibold text-lg",children:[n.currentStock," ",n.unit]})]}),r.jsxs("div",{className:"bg-white p-3 rounded-lg border",children:[r.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Stock minimum"}),r.jsxs("div",{className:"font-semibold text-lg",children:[n.minimumStock," ",n.unit]})]}),r.jsxs("div",{className:"bg-white p-3 rounded-lg border",children:[r.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Emplacement"}),r.jsxs("div",{className:"font-semibold text-lg flex items-center gap-1",children:[r.jsx(ec,{className:"h-4 w-4"}),n.location||"Non défini"]})]}),r.jsxs("div",{className:"bg-white p-3 rounded-lg border",children:[r.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Prix d'achat"}),r.jsxs("div",{className:"font-semibold text-lg text-blue-600",children:[n.purchasePrice.toFixed(2)," ",i.currency]})]}),r.jsxs("div",{className:"bg-white p-3 rounded-lg border",children:[r.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Prix de vente"}),r.jsxs("div",{className:"font-semibold text-lg text-green-600",children:[n.sellingPrice.toFixed(2)," ",i.currency]})]}),r.jsxs("div",{className:"bg-white p-3 rounded-lg border",children:[r.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Valeur totale"}),r.jsxs("div",{className:"font-semibold text-lg text-purple-600",children:[n.totalValue.toFixed(2)," ",i.currency]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{className:"text-base font-medium",children:"Type de mouvement *"}),r.jsxs(ve,{value:l.type,onValueChange:p=>f("type",p),children:[r.jsx(pe,{className:"h-12",children:r.jsx(xe,{placeholder:"Sélectionner le type de mouvement"})}),r.jsx(ge,{children:SAe.map(p=>{const v=p.icon;return r.jsx(M,{value:p.value,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(v,{className:"h-5 w-5"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:p.label}),r.jsx("div",{className:"text-xs text-muted-foreground",children:p.description})]})]})},p.value)})})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"quantity",className:"text-base font-medium",children:"Quantité *"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(K,{id:"quantity",type:"number",min:"0",step:"0.01",value:l.quantity,onChange:p=>f("quantity",parseFloat(p.target.value)||0),className:"flex-1 h-12 text-lg",required:!0}),r.jsx("div",{className:"bg-muted px-3 py-2 rounded-md text-sm font-medium",children:n.unit})]}),l.quantity>0&&r.jsxs("div",{className:"bg-muted p-3 rounded-lg",children:[r.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Nouveau stock après mouvement:"}),r.jsxs("div",{className:`text-lg font-semibold ${m()<=n.minimumStock?"text-orange-600":"text-green-600"}`,children:[m()," ",n.unit]}),m()<=n.minimumStock&&r.jsxs("div",{className:"text-xs text-orange-600 mt-1 flex items-center gap-1",children:[r.jsx(vn,{className:"h-3 w-3"}),"Stock bas - Seuil minimum atteint"]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"reason",className:"text-base font-medium",children:"Raison *"}),r.jsxs(ve,{value:l.reason,onValueChange:p=>f("reason",p),children:[r.jsx(pe,{className:"h-12",children:r.jsx(xe,{placeholder:"Sélectionner une raison"})}),r.jsx(ge,{children:(g=CAe[l.type])==null?void 0:g.map(p=>r.jsx(M,{value:p,children:p},p))})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"reference",className:"text-base font-medium",children:"Référence"}),r.jsx(K,{id:"reference",value:l.reference,onChange:p=>f("reference",p.target.value),placeholder:"ex: Facture #12345, Consultation #678",className:"h-12"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"performedBy",className:"text-base font-medium",children:"Effectué par"}),r.jsxs(ve,{value:l.performedBy,onValueChange:p=>f("performedBy",p),children:[r.jsx(pe,{className:"h-12",children:r.jsx(xe,{placeholder:"Sélectionner un vétérinaire"})}),r.jsxs(ge,{children:[i.veterinarians.filter(p=>p.isActive).map(p=>r.jsx(M,{value:p.name,children:p.name},p.id)),r.jsx(M,{value:"Autre",children:"Autre (saisie manuelle)"})]})]}),l.performedBy==="Autre"&&r.jsx(K,{placeholder:"Nom du responsable",value:u,onChange:p=>d(p.target.value),className:"h-10 mt-2"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"notes",className:"text-base font-medium",children:"Notes"}),r.jsx(Be,{id:"notes",value:l.notes,onChange:p=>f("notes",p.target.value),placeholder:"Notes supplémentaires...",rows:4,className:"resize-none"})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t",children:[r.jsx(R,{type:"button",variant:"outline",onClick:()=>t(!1),className:"h-12 px-6",children:"Annuler"}),r.jsxs(R,{type:"submit",className:"h-12 px-8 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700",children:[r.jsx(an,{className:"h-4 w-4 mr-2"}),"Enregistrer le mouvement"]})]})]})]})}):null}const mh={medication:{label:"Médicaments",color:"bg-blue-100 text-blue-800",icon:"💊"},vaccine:{label:"Vaccins",color:"bg-green-100 text-green-800",icon:"💉"},consumable:{label:"Consommables",color:"bg-orange-100 text-orange-800",icon:"🩹"},equipment:{label:"Équipement",color:"bg-purple-100 text-purple-800",icon:"🔧"},supplement:{label:"Suppléments",color:"bg-yellow-100 text-yellow-800",icon:"🧪"}},PAe=[{value:"unit",label:"Unité"},{value:"box",label:"Boîte"},{value:"vial",label:"Flacon"},{value:"bottle",label:"Bouteille"},{value:"pack",label:"Paquet"},{value:"kg",label:"Kilogramme"},{value:"g",label:"Gramme"},{value:"ml",label:"Millilitre"},{value:"l",label:"Litre"}];function AAe(){const{stockItems:e,stockAlerts:t,stockMovements:n,addStockItem:s,updateStockItem:a,deleteStockItem:i,addStockMovement:o,getStockAlerts:l}=ct(),{settings:c}=xt(),{toast:u}=et(),[d,h]=b.useState(!1),[f,m]=b.useState(!1),[g,p]=b.useState(!1),[v,j]=b.useState(null),[x,y]=b.useState(null),[N,w]=b.useState(""),[C,S]=b.useState("all"),[_,k]=b.useState("all"),[T,P]=b.useState("name"),[A,B]=b.useState("asc"),[L,H]=b.useState(null),[z,$]=b.useState(""),I=b.useMemo(()=>{const J=e.length,ee=e.reduce((le,ce)=>le+ce.totalValue,0),G=e.filter(le=>le.currentStock<=le.minimumStock).length,W=e.filter(le=>le.expirationDate&&new Date(le.expirationDate)<new Date).length,O=e.filter(le=>le.expirationDate&&new Date(le.expirationDate)<=new Date(Date.now()+30*24*60*60*1e3)&&new Date(le.expirationDate)>new Date).length;return{totalItems:J,totalValue:ee,lowStockItems:G,expiredItems:W,expiringSoonItems:O}},[e]),E=b.useMemo(()=>{let J=e.filter(ee=>{var le,ce;const G=ee.name.toLowerCase().includes(N.toLowerCase())||((le=ee.manufacturer)==null?void 0:le.toLowerCase().includes(N.toLowerCase()))||((ce=ee.batchNumber)==null?void 0:ce.toLowerCase().includes(N.toLowerCase())),W=C==="all"||ee.category===C;let O=!0;return _==="low_stock"?O=ee.currentStock<=ee.minimumStock:_==="expired"?O=ee.expirationDate&&new Date(ee.expirationDate)<new Date:_==="expiring_soon"?O=ee.expirationDate&&new Date(ee.expirationDate)<=new Date(Date.now()+2592e6)&&new Date(ee.expirationDate)>new Date:_==="active"&&(O=ee.isActive),G&&W&&O});return J.sort((ee,G)=>{let W,O;switch(T){case"name":W=ee.name.toLowerCase(),O=G.name.toLowerCase();break;case"currentStock":W=ee.currentStock,O=G.currentStock;break;case"totalValue":W=ee.totalValue,O=G.totalValue;break;case"expirationDate":W=ee.expirationDate||"9999-12-31",O=G.expirationDate||"9999-12-31";break;default:W=ee.name.toLowerCase(),O=G.name.toLowerCase()}return A==="asc"?W<O?-1:W>O?1:0:W>O?-1:W<O?1:0}),J},[e,N,C,_,T,A]),q=(J,ee,G)=>{const W={};switch(ee){case"currentStock":W.currentStock=parseInt(G)||0;break;case"minimumStock":W.minimumStock=parseInt(G)||0;break;case"purchasePrice":W.purchasePrice=parseFloat(G)||0;break;case"sellingPrice":W.sellingPrice=parseFloat(G)||0;break;case"location":W.location=G;break;case"notes":W.notes=G;break}a(J,W),H(null),u({title:"Stock mis à jour",description:"L'élément de stock a été mis à jour avec succès."})},Y=J=>{y(J),p(!0)},re=J=>{p(J),J||y(null)},oe=J=>{confirm(`Êtes-vous sûr de vouloir supprimer "${J.name}" du stock ?`)&&(i(J.id),u({title:"Élément supprimé",description:`"${J.name}" a été supprimé du stock.`}))},ae=J=>{j(J),m(!0)},me=()=>{const J=[["Nom","Catégorie","Sous-catégorie","Fabricant","Numéro de lot","Dosage","Unité","Stock actuel","Stock minimum","Prix d'achat","Prix de vente","Date d'expiration","Fournisseur","Emplacement","Notes","Code-barres","SKU"].join(","),...e.map(O=>[`"${O.name}"`,`"${O.category}"`,`"${O.subcategory||""}"`,`"${O.manufacturer||""}"`,`"${O.batchNumber||""}"`,`"${O.dosage||""}"`,`"${O.unit}"`,O.currentStock,O.minimumStock,O.purchasePrice,O.sellingPrice,`"${O.expirationDate||""}"`,`"${O.supplier||""}"`,`"${O.location||""}"`,`"${O.notes||""}"`,`"${O.barcode||""}"`,`"${O.sku||""}"`].join(","))].join(`
`),ee=new Blob([J],{type:"text/csv;charset=utf-8;"}),G=document.createElement("a"),W=URL.createObjectURL(ee);G.setAttribute("href",W),G.setAttribute("download",`stock_${new Date().toISOString().split("T")[0]}.csv`),G.style.visibility="hidden",document.body.appendChild(G),G.click(),document.body.removeChild(G),u({title:"Export réussi",description:"Le fichier CSV a été téléchargé avec succès."})},we=J=>{var W;const ee=(W=J.target.files)==null?void 0:W[0];if(!ee)return;const G=new FileReader;G.onload=O=>{var le;try{const ie=((le=O.target)==null?void 0:le.result).split(`
`),Ce=ie[0].split(",").map(gt=>gt.replace(/"/g,"").trim()),tt=["Nom","Catégorie","Unité","Stock actuel","Stock minimum","Prix d'achat","Prix de vente"].filter(gt=>!Ce.includes(gt));if(tt.length>0){u({title:"Erreur d'import",description:`En-têtes manquants: ${tt.join(", ")}`,variant:"destructive"});return}const wt=[];let tn=0,bt=0;for(let gt=1;gt<ie.length;gt++){const Qt=ie[gt].trim();if(Qt)try{const mn=Qt.split(",").map(Ur=>Ur.replace(/"/g,"").trim()),ut={};if(Ce.forEach((Ur,Wo)=>{ut[Ur]=mn[Wo]||""}),!ut.Nom||!ut.Catégorie||!ut.Unité){bt++;continue}if(!Object.keys(mh).includes(ut.Catégorie)){bt++;continue}const qr={id:Date.now()+gt,name:ut.Nom,category:ut.Catégorie,subcategory:ut["Sous-catégorie"]||"",manufacturer:ut.Fabricant||"",batchNumber:ut["Numéro de lot"]||"",dosage:ut.Dosage||"",unit:ut.Unité,currentStock:parseInt(ut["Stock actuel"])||0,minimumStock:parseInt(ut["Stock minimum"])||0,purchasePrice:parseFloat(ut["Prix d'achat"])||0,sellingPrice:parseFloat(ut["Prix de vente"])||0,totalValue:(parseInt(ut["Stock actuel"])||0)*(parseFloat(ut["Prix d'achat"])||0),expirationDate:ut["Date d'expiration"]||void 0,supplier:ut.Fournisseur||"",location:ut.Emplacement||"",notes:ut.Notes||"",barcode:ut["Code-barres"]||"",sku:ut.SKU||"",lastUpdated:new Date().toISOString(),isActive:!0};wt.push(qr),tn++}catch(mn){bt++,console.error(`Erreur ligne ${gt+1}:`,mn)}}wt.length>0&&wt.forEach(gt=>{s(gt)}),u({title:"Import terminé",description:`${tn} éléments importés avec succès${bt>0?`, ${bt} erreurs`:""}.`})}catch{u({title:"Erreur d'import",description:"Impossible de lire le fichier CSV.",variant:"destructive"})}},G.readAsText(ee),J.target.value=""},ue=()=>{const J=[["Nom","Catégorie","Sous-catégorie","Fabricant","Numéro de lot","Dosage","Unité","Stock actuel","Stock minimum","Prix d'achat","Prix de vente","Date d'expiration","Fournisseur","Emplacement","Notes","Code-barres","SKU"].join(","),["Amoxicilline 500mg","medication","Antibiotique","Boehringer Ingelheim","AMX2024001","500mg","box","15","5","20.00","25.50","2025-12-31","Pharmacie Vétérinaire Centrale","Armoire A - Étagère 1","Stockage à température ambiante","1234567890123","MED-AMX-500"].join(","),["Vaccin DHPP","vaccine","Vaccin combiné","Merial","VAC2024001","1ml","vial","25","10","45.00","55.00","2025-06-30","VetoPharma","Réfrigérateur - Étagère 1","Conservation entre 2-8°C","9876543210987","VAC-DHPP-001"].join(","),["Seringues 5ml","consumable","Matériel médical","BD","SYR2024001","5ml","unit","100","20","0.50","0.75","","MedSupply","Armoire B - Étagère 2","Usage unique","5556667778889","CON-SYR-5ML"].join(",")].join(`
`),ee=new Blob([J],{type:"text/csv;charset=utf-8;"}),G=document.createElement("a"),W=URL.createObjectURL(ee);G.setAttribute("href",W),G.setAttribute("download","gabarit_import_stock.csv"),G.style.visibility="hidden",document.body.appendChild(G),G.click(),document.body.removeChild(G),u({title:"Gabarit téléchargé",description:"Le fichier gabarit a été téléchargé avec succès."})};return r.jsxs("div",{className:"container mx-auto px-6 py-8 space-y-8",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[r.jsx(Ea,{className:"h-8 w-8 text-primary"}),"Gestion de Stock"]}),r.jsx("p",{className:"text-muted-foreground mt-2",children:"Gérez votre inventaire de médicaments, vaccins et consommables"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(R,{variant:"outline",onClick:me,className:"gap-2",children:[r.jsx(vx,{className:"h-4 w-4"}),"Exporter CSV"]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"file",accept:".csv,.xlsx,.xls",onChange:we,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",id:"import-file"}),r.jsx(R,{variant:"outline",className:"gap-2",asChild:!0,children:r.jsxs("label",{htmlFor:"import-file",className:"cursor-pointer",children:[r.jsx(gb,{className:"h-4 w-4"}),"Importer CSV"]})})]}),r.jsxs(R,{variant:"outline",onClick:ue,className:"gap-2",children:[r.jsx(g_,{className:"h-4 w-4"}),"Gabarit"]}),r.jsxs(R,{className:"gap-2 medical-glow",onClick:()=>h(!0),children:[r.jsx(Ue,{className:"h-4 w-4"}),"Nouvel Élément"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[r.jsx(te,{children:r.jsx(ne,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Éléments"}),r.jsx("p",{className:"text-2xl font-bold",children:I.totalItems})]}),r.jsx(Ea,{className:"h-8 w-8 text-muted-foreground"})]})})}),r.jsx(te,{children:r.jsx(ne,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Valeur Totale"}),r.jsxs("p",{className:"text-2xl font-bold",children:[I.totalValue.toFixed(2)," ",c.currency]})]}),r.jsx(fd,{className:"h-8 w-8 text-green-600"})]})})}),r.jsx(te,{children:r.jsx(ne,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Stock Bas"}),r.jsx("p",{className:"text-2xl font-bold text-orange-600",children:I.lowStockItems})]}),r.jsx(vn,{className:"h-8 w-8 text-orange-600"})]})})}),r.jsx(te,{children:r.jsx(ne,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Expirés"}),r.jsx("p",{className:"text-2xl font-bold text-red-600",children:I.expiredItems})]}),r.jsx(cf,{className:"h-8 w-8 text-red-600"})]})})}),r.jsx(te,{children:r.jsx(ne,{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Expirent Bientôt"}),r.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:I.expiringSoonItems})]}),r.jsx(Yt,{className:"h-8 w-8 text-yellow-600"})]})})})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsxs(fe,{className:"flex items-center gap-2",children:[r.jsx(eI,{className:"h-5 w-5"}),"Rechercher et filtrer"]})}),r.jsx(ne,{className:"space-y-4",children:r.jsxs("div",{className:"flex gap-4 flex-wrap",children:[r.jsx("div",{className:"flex-1 min-w-[300px]",children:r.jsx(K,{placeholder:"Rechercher par nom, fabricant, lot...",value:N,onChange:J=>w(J.target.value),className:"w-full"})}),r.jsxs(ve,{value:C,onValueChange:S,children:[r.jsx(pe,{className:"w-48",children:r.jsx(xe,{placeholder:"Catégorie"})}),r.jsxs(ge,{children:[r.jsx(M,{value:"all",children:"Toutes les catégories"}),Object.entries(mh).map(([J,ee])=>r.jsxs(M,{value:J,children:[ee.icon," ",ee.label]},J))]})]}),r.jsxs(ve,{value:_,onValueChange:k,children:[r.jsx(pe,{className:"w-48",children:r.jsx(xe,{placeholder:"Statut"})}),r.jsxs(ge,{children:[r.jsx(M,{value:"all",children:"Tous les statuts"}),r.jsx(M,{value:"active",children:"Actifs"}),r.jsx(M,{value:"low_stock",children:"Stock bas"}),r.jsx(M,{value:"expired",children:"Expirés"}),r.jsx(M,{value:"expiring_soon",children:"Expirent bientôt"})]})]}),r.jsxs(ve,{value:T,onValueChange:P,children:[r.jsx(pe,{className:"w-48",children:r.jsx(xe,{placeholder:"Trier par"})}),r.jsxs(ge,{children:[r.jsx(M,{value:"name",children:"Nom"}),r.jsx(M,{value:"currentStock",children:"Stock actuel"}),r.jsx(M,{value:"totalValue",children:"Valeur totale"}),r.jsx(M,{value:"expirationDate",children:"Date d'expiration"})]})]}),r.jsx(R,{variant:"outline",onClick:()=>B(A==="asc"?"desc":"asc"),children:A==="asc"?r.jsx(an,{className:"h-4 w-4"}):r.jsx($l,{className:"h-4 w-4"})})]})})]}),r.jsx(te,{className:"bg-blue-50 border-blue-200",children:r.jsx(ne,{className:"pt-6",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(g_,{className:"h-5 w-5 text-blue-600 mt-0.5"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h3",{className:"font-semibold text-blue-900",children:"Import en masse"}),r.jsx("p",{className:"text-sm text-blue-700",children:'Utilisez le bouton "Gabarit" pour télécharger un fichier CSV avec le format correct. Les données importées seront ajoutées au stock existant.'}),r.jsxs("div",{className:"text-xs text-blue-600",children:[r.jsx("strong",{children:"Catégories valides :"})," medication, vaccine, consumable, equipment, supplement"]}),r.jsxs("div",{className:"text-xs text-blue-600",children:[r.jsx("strong",{children:"Unités valides :"})," box, vial, unit, ml, mg, g, kg, l, pack, tube, sachet"]})]})]})})}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsxs(fe,{children:["Inventaire (",E.length," éléments)"]})}),r.jsxs(ne,{children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(Vd,{children:[r.jsx(zd,{children:r.jsxs(la,{children:[r.jsx(it,{children:"Nom"}),r.jsx(it,{children:"Catégorie"}),r.jsx(it,{children:"Fabricant"}),r.jsx(it,{children:"Stock"}),r.jsx(it,{children:"Prix d'achat"}),r.jsx(it,{children:"Prix de vente"}),r.jsx(it,{children:"Valeur totale"}),r.jsx(it,{children:"Expiration"}),r.jsx(it,{children:"Emplacement"}),r.jsx(it,{children:"Actions"})]})}),r.jsx(qd,{children:E.map(J=>{var O;const ee=J.currentStock<=J.minimumStock,G=J.expirationDate&&new Date(J.expirationDate)<new Date,W=J.expirationDate&&new Date(J.expirationDate)<=new Date(Date.now()+30*24*60*60*1e3)&&new Date(J.expirationDate)>new Date;return r.jsxs(la,{className:J.isActive?"":"opacity-50",children:[r.jsx(ot,{children:r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:"font-medium",children:J.name}),J.batchNumber&&r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Lot: ",J.batchNumber]}),J.dosage&&r.jsx("div",{className:"text-sm text-muted-foreground",children:J.dosage})]})}),r.jsxs(ot,{children:[r.jsxs(Se,{className:mh[J.category].color,children:[mh[J.category].icon," ",mh[J.category].label]}),J.subcategory&&r.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:J.subcategory})]}),r.jsx(ot,{children:r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{children:J.manufacturer||"-"}),J.supplier&&r.jsx("div",{className:"text-sm text-muted-foreground",children:J.supplier})]})}),r.jsx(ot,{children:r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:`font-medium ${ee?"text-orange-600":""}`,children:[J.currentStock," ",((O=PAe.find(le=>le.value===J.unit))==null?void 0:O.label)||J.unit]}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Min: ",J.minimumStock]}),r.jsxs("div",{className:"flex items-center gap-2",children:[ee&&r.jsx(Se,{variant:"destructive",className:"text-xs",children:"Stock bas"}),J.lastUpdated&&new Date(J.lastUpdated).getTime()>Date.now()-24*60*60*1e3&&r.jsx(Se,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700",children:"Mis à jour"})]})]})}),r.jsx(ot,{children:(L==null?void 0:L.id)===J.id&&L.field==="purchasePrice"?r.jsx(K,{type:"number",step:"0.01",value:z,onChange:le=>$(le.target.value),onBlur:()=>q(J.id,"purchasePrice",z),onKeyDown:le=>{le.key==="Enter"&&q(J.id,"purchasePrice",z)},autoFocus:!0,className:"w-20"}):r.jsxs("div",{className:"cursor-pointer hover:bg-muted p-1 rounded",onClick:()=>{H({id:J.id,field:"purchasePrice"}),$(J.purchasePrice.toString())},children:[J.purchasePrice.toFixed(2)," ",c.currency]})}),r.jsx(ot,{children:(L==null?void 0:L.id)===J.id&&L.field==="sellingPrice"?r.jsx(K,{type:"number",step:"0.01",value:z,onChange:le=>$(le.target.value),onBlur:()=>q(J.id,"sellingPrice",z),onKeyDown:le=>{le.key==="Enter"&&q(J.id,"sellingPrice",z)},autoFocus:!0,className:"w-20"}):r.jsxs("div",{className:"cursor-pointer hover:bg-muted p-1 rounded",onClick:()=>{H({id:J.id,field:"sellingPrice"}),$(J.sellingPrice.toString())},children:[r.jsxs("div",{className:"font-medium",children:[J.sellingPrice.toFixed(2)," ",c.currency]}),r.jsxs("div",{className:"text-xs text-green-600",children:["Marge: ",((J.sellingPrice-J.purchasePrice)*J.currentStock).toFixed(2)," ",c.currency]})]})}),r.jsx(ot,{children:r.jsxs("div",{className:"font-medium",children:[J.totalValue.toFixed(2)," ",c.currency]})}),r.jsx(ot,{children:J.expirationDate?r.jsxs("div",{className:"space-y-1",children:[r.jsx("div",{className:`text-sm ${G?"text-red-600 font-medium":W?"text-yellow-600 font-medium":""}`,children:Je(new Date(J.expirationDate),"dd/MM/yyyy",{locale:$n})}),G&&r.jsx(Se,{variant:"destructive",className:"text-xs",children:"Expiré"}),W&&!G&&r.jsx(Se,{variant:"secondary",className:"text-xs bg-yellow-100 text-yellow-800",children:"Expire bientôt"})]}):r.jsx("span",{className:"text-muted-foreground",children:"-"})}),r.jsx(ot,{children:(L==null?void 0:L.id)===J.id&&L.field==="location"?r.jsx(K,{value:z,onChange:le=>$(le.target.value),onBlur:()=>q(J.id,"location",z),onKeyDown:le=>{le.key==="Enter"&&q(J.id,"location",z)},autoFocus:!0,className:"w-32"}):r.jsxs("div",{className:"cursor-pointer hover:bg-muted p-1 rounded flex items-center gap-1",onClick:()=>{H({id:J.id,field:"location"}),$(J.location||"")},children:[r.jsx(ec,{className:"h-3 w-3"}),J.location||"Non défini"]})}),r.jsx(ot,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(R,{size:"sm",variant:"outline",onClick:()=>ae(J),children:r.jsx(an,{className:"h-3 w-3"})}),r.jsx(R,{size:"sm",variant:"outline",onClick:()=>Y(J),children:r.jsx(Ct,{className:"h-3 w-3"})}),r.jsx(R,{size:"sm",variant:"outline",onClick:()=>oe(J),children:r.jsx(rn,{className:"h-3 w-3"})})]})})]},J.id)})})]})}),E.length===0&&r.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[r.jsx(Ea,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsx("p",{children:"Aucun élément trouvé"}),r.jsx("p",{className:"text-sm",children:"Ajustez vos filtres ou ajoutez de nouveaux éléments"})]})]})]}),r.jsxs(te,{children:[r.jsxs(he,{children:[r.jsxs(fe,{className:"flex items-center gap-2",children:[r.jsx(Yt,{className:"h-5 w-5"}),"Historique des Mouvements (",n.length,")"]}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"Derniers mouvements de stock (prescriptions, achats, ajustements)"})]}),r.jsx(ne,{children:n.length===0?r.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[r.jsx(Yt,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsx("p",{children:"Aucun mouvement de stock enregistré"})]}):r.jsxs("div",{className:"space-y-4",children:[n.sort((J,ee)=>new Date(ee.date).getTime()-new Date(J.date).getTime()).slice(0,20).map(J=>{const G={in:{label:"Entrée",color:"text-green-600",icon:"↗️"},out:{label:J.reason==="Prescription médicale"?"Prescription":"Sortie",color:J.reason==="Prescription médicale"?"text-orange-600":"text-red-600",icon:J.reason==="Prescription médicale"?"💊":"↘️"},adjustment:{label:"Ajustement",color:"text-blue-600",icon:"⚖️"},transfer:{label:"Transfert",color:"text-purple-600",icon:"↔️"}}[J.type];return r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"text-2xl",children:G.icon}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:J.itemName}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[J.reason," • ",J.performedBy||"Non spécifié"]}),J.reference&&r.jsxs("div",{className:"text-xs text-muted-foreground",children:["Référence: ",J.reference]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:`font-semibold ${G.color}`,children:[J.type==="in"?"+":J.type==="out"?"-":"",J.quantity]}),r.jsx("div",{className:"text-sm text-muted-foreground",children:Je(new Date(J.date),"dd/MM/yyyy HH:mm",{locale:$n})})]})]},J.id)}),n.length>20&&r.jsx("div",{className:"text-center pt-4",children:r.jsxs(R,{variant:"outline",size:"sm",children:["Voir tous les mouvements (",n.length,")"]})})]})})]}),r.jsx(JE,{open:d,onOpenChange:h}),r.jsx(JE,{open:g,onOpenChange:re,editingItem:x}),r.jsx(_Ae,{open:f,onOpenChange:m,item:v})]})}const kAe={monthly:[{description:"Salaire Secrétaire",amount:3e3,type:"expense",frequency:"monthly",source:"salary"},{description:"CNSS Secrétaire",amount:700,type:"expense",frequency:"monthly",source:"insurance"},{description:"CNSS Vétérinaire",amount:1500,type:"expense",frequency:"monthly",source:"insurance"},{description:"Loyer",amount:3e3,type:"expense",frequency:"monthly",source:"rent"},{description:"Eau et Électricité",amount:300,type:"expense",frequency:"monthly",source:"other"}],annual:[{description:"Impôts",amount:3e3,type:"expense",frequency:"annual",source:"tax"},{description:"Cotisation Ordre des Vétérinaires",amount:1200,type:"expense",frequency:"annual",source:"other"}],occasional:[{description:"Maintenance Équipement",amount:500,type:"expense",frequency:"occasional",source:"other"},{description:"Formation Professionnelle",amount:800,type:"expense",frequency:"occasional",source:"other"},{description:"Achat Matériel",amount:1200,type:"expense",frequency:"occasional",source:"other"}]},TAe=()=>{const{accountingEntries:e,addAccountingEntry:t,updateAccountingEntry:n,deleteAccountingEntry:s,generateAccountingSummary:a,consultations:i,vaccinations:o,antiparasitics:l,prescriptions:c,stockMovements:u,stockItems:d}=ct(),{settings:h}=xt();et();const[f,m]=b.useState("month"),[g,p]=b.useState(""),[v,j]=b.useState(""),[x,y]=b.useState(!1),[N,w]=b.useState(null),[C,S]=b.useState(null),[_,k]=b.useState(!1),[T,P]=b.useState(kAe),[A,B]=b.useState(!1),[L,H]=b.useState(null),[z,$]=b.useState({description:"",amount:"",type:"expense",frequency:"monthly",source:"other"}),[I,E]=b.useState({type:"revenue",frequency:"occasional",description:"",amount:"",date:"",source:"other",notes:""});b.useEffect(()=>{const W=new Date,O=new Date(W.getFullYear(),W.getMonth(),1),le=new Date(W.getFullYear(),W.getMonth()+1,0);p(Je(O,"yyyy-MM-dd")),j(Je(le,"yyyy-MM-dd"))},[]),b.useEffect(()=>{if(g&&v){const W=f==="month"?Je(new Date(g),"yyyy-MM",{locale:$n}):f==="year"?Je(new Date(g),"yyyy",{locale:$n}):f==="day"?Je(new Date(g),"dd/MM/yyyy",{locale:$n}):`${Je(new Date(g),"dd/MM/yyyy")} - ${Je(new Date(v),"dd/MM/yyyy")}`,O=a(W,g,v);S(O)}},[g,v,f,e,i,o,l,c,u,a]);const q=W=>{m(W);const O=new Date;switch(W){case"day":const le=Je(O,"yyyy-MM-dd");p(le),j(le);break;case"month":const ce=new Date(O.getFullYear(),O.getMonth(),1),ie=new Date(O.getFullYear(),O.getMonth()+1,0);p(Je(ce,"yyyy-MM-dd")),j(Je(ie,"yyyy-MM-dd"));break;case"quarter":const Ce=Math.floor(O.getMonth()/3),st=new Date(O.getFullYear(),Ce*3,1),tt=new Date(O.getFullYear(),Ce*3+3,0);p(Je(st,"yyyy-MM-dd")),j(Je(tt,"yyyy-MM-dd"));break;case"year":const wt=new Date(O.getFullYear(),0,1),tn=new Date(O.getFullYear(),11,31);p(Je(wt,"yyyy-MM-dd")),j(Je(tn,"yyyy-MM-dd"));break}},Y=()=>{if(!I.description||!I.amount||!I.date)return;const W={type:I.type,category:"manual",frequency:I.frequency,description:I.description,amount:parseFloat(I.amount),date:I.date,source:I.source,notes:I.notes};N?(n(N.id,W),w(null)):t(W),E({type:"revenue",frequency:"occasional",description:"",amount:"",date:"",source:"other",notes:""}),y(!1)},re=W=>{w(W),E({type:W.type,frequency:W.frequency,description:W.description,amount:W.amount.toString(),date:W.date,source:W.source||"other",notes:W.notes||""}),y(!0)},oe=W=>{window.confirm("Êtes-vous sûr de vouloir supprimer cette entrée ?")&&s(W)},ae=W=>{E({...I,type:W.type,frequency:W.frequency||"occasional",description:W.description,amount:W.amount.toString(),source:W.source,date:I.date||Je(new Date,"yyyy-MM-dd")}),k(!1)},me=()=>{if(!z.description||!z.amount)return;const W={description:z.description,amount:parseFloat(z.amount),type:z.type,frequency:z.frequency,source:z.source};if(L){const O={...T},le=L.frequency,ce=O[le].findIndex(ie=>ie===L);ce!==-1&&(O[le][ce]=W),P(O),H(null)}else{const O={...T},le=z.frequency;O[le].push(W),P(O)}$({description:"",amount:"",type:"expense",frequency:"monthly",source:"other"}),B(!1)},we=W=>{H(W),$({description:W.description,amount:W.amount.toString(),type:W.type,frequency:W.frequency,source:W.source}),B(!0)},ue=W=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer cette suggestion ?")){const O={...T},le=W.frequency;O[le]=O[le].filter(ce=>ce!==W),P(O)}},J=e.filter(W=>{const O=new Date(W.date),le=new Date(g),ce=new Date(v);return O>=le&&O<=ce}),ee=W=>`${W.toFixed(2)} ${h.currency}`,G=W=>{switch(W){case"consultation":return"🩺";case"vaccination":return"💉";case"antiparasitic":return"💊";case"prescription":return"📋";case"stock_purchase":return"📦";case"salary":return"👥";case"rent":return"🏢";case"tax":return"📊";case"insurance":return"🛡️";default:return"📄"}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[r.jsx(XM,{className:"h-8 w-8"}),"Gestion Comptable"]}),r.jsx("p",{className:"text-muted-foreground",children:"Suivi des recettes et charges de votre clinique vétérinaire"})]}),r.jsx("div",{className:"flex gap-2",children:r.jsxs(He,{open:x,onOpenChange:y,children:[r.jsx(Bx,{asChild:!0,children:r.jsxs(R,{onClick:()=>{w(null),E({type:"revenue",frequency:"occasional",description:"",amount:"",date:"",source:"other",notes:""})},children:[r.jsx(Ue,{className:"h-4 w-4 mr-2"}),"Ajouter une entrée"]})}),r.jsxs(We,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(Ge,{children:[r.jsx(Ke,{children:N?"Modifier l'entrée comptable":"Ajouter une entrée comptable"}),r.jsx(yt,{children:N?"Modifiez les informations de cette entrée.":"Ajoutez une nouvelle recette ou charge manuelle."})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"border rounded-lg p-4 bg-muted/50",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(y0,{className:"h-4 w-4 text-yellow-600"}),r.jsx(D,{className:"text-sm font-medium",children:"Suggestions prédéfinies"})]}),r.jsx(R,{variant:"ghost",size:"sm",onClick:()=>k(!_),children:_?r.jsx(xx,{className:"h-4 w-4"}):r.jsx(y0,{className:"h-4 w-4"})})]}),_&&r.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Charges mensuelles"}),r.jsx("div",{className:"grid grid-cols-1 gap-2",children:T.monthly.map((W,O)=>r.jsx(R,{variant:"outline",size:"sm",className:"justify-start text-left h-auto p-2",onClick:()=>ae(W),children:r.jsxs("div",{className:"flex justify-between items-center w-full",children:[r.jsx("span",{className:"text-sm",children:W.description}),r.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:[W.amount," ",h.currency]})]})},O))})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Charges annuelles"}),r.jsx("div",{className:"grid grid-cols-1 gap-2",children:T.annual.map((W,O)=>r.jsx(R,{variant:"outline",size:"sm",className:"justify-start text-left h-auto p-2",onClick:()=>ae(W),children:r.jsxs("div",{className:"flex justify-between items-center w-full",children:[r.jsx("span",{className:"text-sm",children:W.description}),r.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:[W.amount," ",h.currency]})]})},O))})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Charges occasionnelles"}),r.jsx("div",{className:"grid grid-cols-1 gap-2",children:T.occasional.map((W,O)=>r.jsx(R,{variant:"outline",size:"sm",className:"justify-start text-left h-auto p-2",onClick:()=>ae(W),children:r.jsxs("div",{className:"flex justify-between items-center w-full",children:[r.jsx("span",{className:"text-sm",children:W.description}),r.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:[W.amount," ",h.currency]})]})},O))})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(D,{htmlFor:"type",children:"Type"}),r.jsxs(ve,{value:I.type,onValueChange:W=>E({...I,type:W}),children:[r.jsx(pe,{children:r.jsx(xe,{})}),r.jsxs(ge,{children:[r.jsx(M,{value:"revenue",children:"Recette"}),r.jsx(M,{value:"expense",children:"Charge"})]})]})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"frequency",children:"Fréquence"}),r.jsxs(ve,{value:I.frequency,onValueChange:W=>E({...I,frequency:W}),children:[r.jsx(pe,{children:r.jsx(xe,{})}),r.jsxs(ge,{children:[r.jsx(M,{value:"monthly",children:"Mensuel"}),r.jsx(M,{value:"annual",children:"Annuel"}),r.jsx(M,{value:"occasional",children:"Occasionnel"})]})]})]})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"description",children:"Description"}),r.jsx(K,{id:"description",value:I.description,onChange:W=>E({...I,description:W.target.value}),placeholder:"Ex: Salaire employé, Loyer, etc."})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs(D,{htmlFor:"amount",children:["Montant (",h.currency,")"]}),r.jsx(K,{id:"amount",type:"number",step:"0.01",value:I.amount,onChange:W=>E({...I,amount:W.target.value}),placeholder:"0.00"})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"date",children:"Date"}),r.jsx(K,{id:"date",type:"date",value:I.date,onChange:W=>E({...I,date:W.target.value})})]})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"source",children:"Source"}),r.jsxs(ve,{value:I.source,onValueChange:W=>E({...I,source:W}),children:[r.jsx(pe,{children:r.jsx(xe,{})}),r.jsxs(ge,{children:[r.jsx(M,{value:"salary",children:"Salaire"}),r.jsx(M,{value:"rent",children:"Loyer"}),r.jsx(M,{value:"tax",children:"Impôts"}),r.jsx(M,{value:"insurance",children:"Assurance"}),r.jsx(M,{value:"other",children:"Autre"})]})]})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"notes",children:"Notes (optionnel)"}),r.jsx(Be,{id:"notes",value:I.notes,onChange:W=>E({...I,notes:W.target.value}),placeholder:"Informations supplémentaires..."})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(R,{variant:"outline",onClick:()=>y(!1),children:"Annuler"}),r.jsx(R,{onClick:Y,children:N?"Modifier":"Ajouter"})]})]})]})]})})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsxs(fe,{className:"flex items-center gap-2",children:[r.jsx(Ye,{className:"h-5 w-5"}),"Période d'analyse"]})}),r.jsx(ne,{children:r.jsxs("div",{className:"flex gap-4 items-end",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx(R,{variant:f==="day"?"default":"outline",onClick:()=>q("day"),size:"sm",children:"Ce jour"}),r.jsx(R,{variant:f==="month"?"default":"outline",onClick:()=>q("month"),size:"sm",children:"Ce mois"}),r.jsx(R,{variant:f==="quarter"?"default":"outline",onClick:()=>q("quarter"),size:"sm",children:"Ce trimestre"}),r.jsx(R,{variant:f==="year"?"default":"outline",onClick:()=>q("year"),size:"sm",children:"Cette année"})]}),r.jsxs("div",{className:"flex gap-2 items-center",children:[r.jsx(D,{htmlFor:"startDate",children:"Du"}),r.jsx(K,{id:"startDate",type:"date",value:g,onChange:W=>p(W.target.value),className:"w-40"}),r.jsx(D,{htmlFor:"endDate",children:"Au"}),r.jsx(K,{id:"endDate",type:"date",value:v,onChange:W=>j(W.target.value),className:"w-40"})]})]})})]}),C&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs(te,{children:[r.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(fe,{className:"text-sm font-medium",children:"Total Recettes"}),r.jsx(an,{className:"h-4 w-4 text-green-600"})]}),r.jsxs(ne,{children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:ee(C.totalRevenue)}),r.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[r.jsxs("div",{children:["Consultations: ",ee(C.revenueBreakdown.consultations)]}),r.jsxs("div",{children:["Vaccinations: ",ee(C.revenueBreakdown.vaccinations)]}),r.jsxs("div",{children:["Antiparasitaires: ",ee(C.revenueBreakdown.antiparasitics)]}),r.jsxs("div",{children:["Prescriptions: ",ee(C.revenueBreakdown.prescriptions)]}),r.jsxs("div",{children:["Manuelles: ",ee(C.revenueBreakdown.manualEntries)]})]})]})]}),r.jsxs(te,{children:[r.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(fe,{className:"text-sm font-medium",children:"Total Charges"}),r.jsx($l,{className:"h-4 w-4 text-red-600"})]}),r.jsxs(ne,{children:[r.jsx("div",{className:"text-2xl font-bold text-red-600",children:ee(C.totalExpenses)}),r.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[r.jsxs("div",{children:["Achats stock: ",ee(C.expenseBreakdown.stockPurchases)]}),r.jsxs("div",{children:["Salaires: ",ee(C.expenseBreakdown.salaries)]}),r.jsxs("div",{children:["Loyer: ",ee(C.expenseBreakdown.rent)]}),r.jsxs("div",{children:["Impôts: ",ee(C.expenseBreakdown.taxes)]}),r.jsxs("div",{children:["Autres: ",ee(C.expenseBreakdown.other)]})]})]})]}),r.jsxs(te,{children:[r.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(fe,{className:"text-sm font-medium",children:"Résultat Net"}),r.jsx(fd,{className:"h-4 w-4"})]}),r.jsxs(ne,{children:[r.jsx("div",{className:`text-2xl font-bold ${C.netIncome>=0?"text-green-600":"text-red-600"}`,children:ee(C.netIncome)}),r.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:C.netIncome>=0?"Bénéfice":"Perte"})]})]})]}),r.jsxs(Ai,{defaultValue:"entries",className:"space-y-4",children:[r.jsxs(qa,{children:[r.jsx(kt,{value:"entries",children:"Entrées Comptables"}),r.jsx(kt,{value:"configuration",children:"Configuration"})]}),r.jsx(Tt,{value:"entries",children:r.jsxs(te,{children:[r.jsxs(he,{children:[r.jsxs(fe,{className:"flex items-center gap-2",children:[r.jsx(xr,{className:"h-5 w-5"}),"Entrées comptables automatiques et manuelles"]}),r.jsx(Iu,{children:"Entrées générées automatiquement (consultations, vaccinations, etc.) et entrées manuelles ajoutées"})]}),r.jsxs(ne,{children:[r.jsxs(Vd,{children:[r.jsx(zd,{children:r.jsxs(la,{children:[r.jsx(it,{children:"Date"}),r.jsx(it,{children:"Type"}),r.jsx(it,{children:"Description"}),r.jsx(it,{children:"Source"}),r.jsx(it,{children:"Fréquence"}),r.jsx(it,{children:"Montant"}),r.jsx(it,{children:"Actions"})]})}),r.jsx(qd,{children:J.map(W=>r.jsxs(la,{children:[r.jsx(ot,{children:Je(new Date(W.date),"dd/MM/yyyy",{locale:$n})}),r.jsx(ot,{children:r.jsx(Se,{variant:W.type==="revenue"?"default":"destructive",children:W.type==="revenue"?"Recette":"Charge"})}),r.jsx(ot,{children:W.description}),r.jsx(ot,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{children:G(W.source||"other")}),r.jsx("span",{className:"text-sm",children:W.category==="automatic"?"Automatique":"Manuel"})]})}),r.jsx(ot,{children:r.jsx(Se,{variant:"outline",children:W.frequency==="monthly"?"Mensuel":W.frequency==="annual"?"Annuel":"Occasionnel"})}),r.jsxs(ot,{className:`font-medium ${W.type==="revenue"?"text-green-600":"text-red-600"}`,children:[W.type==="revenue"?"+":"-",ee(W.amount)]}),r.jsx(ot,{children:W.category==="manual"&&r.jsxs("div",{className:"flex gap-2",children:[r.jsx(R,{variant:"outline",size:"sm",onClick:()=>re(W),children:r.jsx(Ct,{className:"h-4 w-4"})}),r.jsx(R,{variant:"outline",size:"sm",onClick:()=>oe(W.id),children:r.jsx(rn,{className:"h-4 w-4"})})]})})]},W.id))})]}),J.length===0&&r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Aucune entrée comptable pour cette période"})]})]})}),r.jsx(Tt,{value:"configuration",children:r.jsxs(te,{children:[r.jsxs(he,{children:[r.jsxs(fe,{className:"flex items-center gap-2",children:[r.jsx(y0,{className:"h-5 w-5"}),"Configuration des Suggestions"]}),r.jsx(Iu,{children:"Configurez les suggestions prédéfinies pour faciliter la saisie des charges et recettes"})]}),r.jsxs(ne,{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h3",{className:"text-lg font-medium",children:"Suggestions Mensuelles"}),r.jsxs(R,{onClick:()=>{H(null),$({description:"",amount:"",type:"expense",frequency:"monthly",source:"other"}),B(!0)},children:[r.jsx(Ue,{className:"h-4 w-4 mr-2"}),"Ajouter"]})]}),r.jsx("div",{className:"grid gap-3",children:T.monthly.map((W,O)=>r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-sm font-medium",children:W.description}),r.jsxs("span",{className:"text-sm text-muted-foreground",children:[W.amount," ",h.currency]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(R,{variant:"outline",size:"sm",onClick:()=>we(W),children:r.jsx(Ct,{className:"h-4 w-4"})}),r.jsx(R,{variant:"outline",size:"sm",onClick:()=>ue(W),children:r.jsx(rn,{className:"h-4 w-4"})})]})]},O))}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h3",{className:"text-lg font-medium",children:"Suggestions Annuelles"}),r.jsxs(R,{onClick:()=>{H(null),$({description:"",amount:"",type:"expense",frequency:"annual",source:"other"}),B(!0)},children:[r.jsx(Ue,{className:"h-4 w-4 mr-2"}),"Ajouter"]})]}),r.jsx("div",{className:"grid gap-3",children:T.annual.map((W,O)=>r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-sm font-medium",children:W.description}),r.jsxs("span",{className:"text-sm text-muted-foreground",children:[W.amount," ",h.currency]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(R,{variant:"outline",size:"sm",onClick:()=>we(W),children:r.jsx(Ct,{className:"h-4 w-4"})}),r.jsx(R,{variant:"outline",size:"sm",onClick:()=>ue(W),children:r.jsx(rn,{className:"h-4 w-4"})})]})]},O))}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h3",{className:"text-lg font-medium",children:"Suggestions Occasionnelles"}),r.jsxs(R,{onClick:()=>{H(null),$({description:"",amount:"",type:"expense",frequency:"occasional",source:"other"}),B(!0)},children:[r.jsx(Ue,{className:"h-4 w-4 mr-2"}),"Ajouter"]})]}),r.jsx("div",{className:"grid gap-3",children:T.occasional.map((W,O)=>r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-sm font-medium",children:W.description}),r.jsxs("span",{className:"text-sm text-muted-foreground",children:[W.amount," ",h.currency]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(R,{variant:"outline",size:"sm",onClick:()=>we(W),children:r.jsx(Ct,{className:"h-4 w-4"})}),r.jsx(R,{variant:"outline",size:"sm",onClick:()=>ue(W),children:r.jsx(rn,{className:"h-4 w-4"})})]})]},O))})]})]})})]}),r.jsx(He,{open:A,onOpenChange:B,children:r.jsxs(We,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(Ge,{children:[r.jsx(Ke,{children:L?"Modifier la suggestion":"Ajouter une suggestion"}),r.jsx(yt,{children:L?"Modifiez les informations de cette suggestion.":"Ajoutez une nouvelle suggestion prédéfinie."})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(D,{htmlFor:"suggestion-type",children:"Type"}),r.jsxs(ve,{value:z.type,onValueChange:W=>$({...z,type:W}),children:[r.jsx(pe,{children:r.jsx(xe,{})}),r.jsxs(ge,{children:[r.jsx(M,{value:"revenue",children:"Recette"}),r.jsx(M,{value:"expense",children:"Charge"})]})]})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"suggestion-frequency",children:"Fréquence"}),r.jsxs(ve,{value:z.frequency,onValueChange:W=>$({...z,frequency:W}),children:[r.jsx(pe,{children:r.jsx(xe,{})}),r.jsxs(ge,{children:[r.jsx(M,{value:"monthly",children:"Mensuel"}),r.jsx(M,{value:"annual",children:"Annuel"}),r.jsx(M,{value:"occasional",children:"Occasionnel"})]})]})]})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"suggestion-description",children:"Description"}),r.jsx(K,{id:"suggestion-description",value:z.description,onChange:W=>$({...z,description:W.target.value}),placeholder:"Ex: Salaire employé, Loyer, etc."})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs(D,{htmlFor:"suggestion-amount",children:["Montant (",h.currency,")"]}),r.jsx(K,{id:"suggestion-amount",type:"number",step:"0.01",value:z.amount,onChange:W=>$({...z,amount:W.target.value}),placeholder:"0.00"})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"suggestion-source",children:"Source"}),r.jsxs(ve,{value:z.source,onValueChange:W=>$({...z,source:W}),children:[r.jsx(pe,{children:r.jsx(xe,{})}),r.jsxs(ge,{children:[r.jsx(M,{value:"salary",children:"Salaire"}),r.jsx(M,{value:"rent",children:"Loyer"}),r.jsx(M,{value:"tax",children:"Impôts"}),r.jsx(M,{value:"insurance",children:"Assurance"}),r.jsx(M,{value:"other",children:"Autre"})]})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(R,{variant:"outline",onClick:()=>B(!1),children:"Annuler"}),r.jsx(R,{onClick:me,children:L?"Modifier":"Ajouter"})]})]})]})})]})},EAe=()=>{const{clients:e,consultations:t,vaccinations:n,antiparasitics:s,appointments:a,addConsultation:i,addVaccination:o,addAntiparasitic:l,updateClientStats:c}=ct(),u=()=>{if(e.length>0){const m=e[0],g=m.pets[0];g&&i({clientId:m.id,clientName:m.name,petId:g.id,petName:g.name,date:new Date().toISOString().split("T")[0],symptoms:"Test consultation",diagnosis:"Test diagnosis",treatment:"Test treatment",cost:"50",notes:"Test consultation for stats update",photos:[]})}},d=()=>{if(e.length>0){const m=e[0],g=m.pets[0];g&&o({clientId:m.id,clientName:m.name,petId:g.id,petName:g.name,vaccineName:"Test Vaccine",vaccineType:"Test Type",dateGiven:new Date().toISOString().split("T")[0],nextDueDate:new Date(Date.now()+365*24*60*60*1e3).toISOString().split("T")[0],veterinarian:"Dr. Test",cost:"30",notes:"Test vaccination for stats update",status:"completed"})}},h=()=>{if(e.length>0){const m=e[0],g=m.pets[0];g&&l({clientId:m.id,clientName:m.name,petId:g.id,petName:g.name,productName:"Test Product",productType:"Test Type",dateGiven:new Date().toISOString().split("T")[0],nextDueDate:new Date(Date.now()+90*24*60*60*1e3).toISOString().split("T")[0],targetParasites:"Test Parasites",veterinarian:"Dr. Test",cost:"25",notes:"Test antiparasitic for stats update",status:"completed"})}},f=()=>{e.length>0&&e.forEach(m=>{c(m.id)})};return r.jsxs("div",{className:"container mx-auto px-6 py-8 space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Test des Statistiques des Clients"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{className:"text-lg",children:"Actions de Test"})}),r.jsxs(ne,{className:"space-y-3",children:[r.jsxs(R,{onClick:u,className:"w-full",children:[r.jsx(Ue,{className:"h-4 w-4 mr-2"}),"Ajouter Consultation Test"]}),r.jsxs(R,{onClick:d,className:"w-full",children:[r.jsx(Ue,{className:"h-4 w-4 mr-2"}),"Ajouter Vaccination Test"]}),r.jsxs(R,{onClick:h,className:"w-full",children:[r.jsx(Ue,{className:"h-4 w-4 mr-2"}),"Ajouter Antiparasite Test"]}),r.jsx(R,{onClick:f,variant:"outline",className:"w-full",children:"Mettre à jour Stats"})]})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{className:"text-lg",children:"Statistiques Globales"})}),r.jsxs(ne,{className:"space-y-2",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Clients:"})," ",e.length]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Consultations:"})," ",t.length]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Vaccinations:"})," ",n.length]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Antiparasites:"})," ",s.length]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Rendez-vous:"})," ",a.length]})]})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{className:"text-lg",children:"Détails des Clients"})}),r.jsx(ne,{className:"space-y-3",children:e.map(m=>r.jsxs("div",{className:"border-b pb-2",children:[r.jsx("p",{className:"font-medium",children:m.name}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Total visites: ",m.totalVisits," | Dernière visite: ",new Date(m.lastVisit).toLocaleDateString("fr-FR")]})]},m.id))})]})]})]})},OAe=()=>r.jsx(PS,{children:r.jsx(EAe,{})}),DAe=()=>{const{clients:e,consultations:t,vaccinations:n,antiparasitics:s,appointments:a,addConsultation:i,addVaccination:o,addAntiparasitic:l,updateClientStats:c}=ct(),u=()=>{if(e.length>0){const m=e[0],g=m.pets[0];g&&i({clientId:m.id,clientName:m.name,petId:g.id,petName:g.name,date:new Date().toISOString().split("T")[0],symptoms:"Test consultation",diagnosis:"Test diagnosis",treatment:"Test treatment",cost:"50",notes:"Test consultation for stats update",photos:[]})}},d=()=>{if(e.length>0){const m=e[0],g=m.pets[0];g&&o({clientId:m.id,clientName:m.name,petId:g.id,petName:g.name,vaccineName:"Test Vaccine",vaccineType:"Test Type",dateGiven:new Date().toISOString().split("T")[0],nextDueDate:new Date(Date.now()+365*24*60*60*1e3).toISOString().split("T")[0],veterinarian:"Dr. Test",cost:"30",notes:"Test vaccination for stats update",status:"completed"})}},h=()=>{if(e.length>0){const m=e[0],g=m.pets[0];g&&l({clientId:m.id,clientName:m.name,petId:g.id,petName:g.name,productName:"Test Product",productType:"Test Type",dateGiven:new Date().toISOString().split("T")[0],nextDueDate:new Date(Date.now()+90*24*60*60*1e3).toISOString().split("T")[0],targetParasites:"Test Parasites",veterinarian:"Dr. Test",cost:"25",notes:"Test antiparasitic for stats update",status:"completed"})}},f=()=>{e.length>0&&e.forEach(m=>{c(m.id)})};return r.jsxs("div",{className:"container mx-auto px-6 py-8 space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Test Simple des Statistiques"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{className:"text-lg",children:"Actions de Test"})}),r.jsxs(ne,{className:"space-y-3",children:[r.jsxs(R,{onClick:u,className:"w-full",children:[r.jsx(Ue,{className:"h-4 w-4 mr-2"}),"Ajouter Consultation Test"]}),r.jsxs(R,{onClick:d,className:"w-full",children:[r.jsx(Ue,{className:"h-4 w-4 mr-2"}),"Ajouter Vaccination Test"]}),r.jsxs(R,{onClick:h,className:"w-full",children:[r.jsx(Ue,{className:"h-4 w-4 mr-2"}),"Ajouter Antiparasite Test"]}),r.jsx(R,{onClick:f,variant:"outline",className:"w-full",children:"Mettre à jour Stats"})]})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{className:"text-lg",children:"Statistiques Globales"})}),r.jsxs(ne,{className:"space-y-2",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Clients:"})," ",e.length]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Consultations:"})," ",t.length]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Vaccinations:"})," ",n.length]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Antiparasites:"})," ",s.length]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Rendez-vous:"})," ",a.length]})]})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{className:"text-lg",children:"Détails des Clients"})}),r.jsx(ne,{className:"space-y-3",children:e.map(m=>r.jsxs("div",{className:"border-b pb-2",children:[r.jsx("p",{className:"font-medium",children:m.name}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Total visites: ",m.totalVisits," | Dernière visite: ",new Date(m.lastVisit).toLocaleDateString("fr-FR")]})]},m.id))})]})]})]})},MAe=()=>r.jsx(PS,{children:r.jsx(DAe,{})}),IAe=()=>{const e=$o();return b.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),r.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),r.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})};function $Ae(){const{user:e,logout:t}=Fo(),{toast:n}=et();if(!e)return null;const s=l=>l?l.split(" ").map(c=>c.charAt(0)).join("").toUpperCase().slice(0,2):e.profile.username.charAt(0).toUpperCase(),a=l=>{switch(l){case"admin":return"Administrateur";case"assistant":return"Assistant";default:return"Utilisateur"}},i=l=>{switch(l){case"admin":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"assistant":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"}},o=async()=>{await t(),n({title:"Déconnexion réussie",description:"Vous avez été déconnecté avec succès."})};return r.jsxs(te,{children:[r.jsx(he,{children:r.jsxs(fe,{className:"flex items-center gap-2",children:[r.jsx(Rn,{className:"h-5 w-5"}),"Profil Utilisateur"]})}),r.jsxs(ne,{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(Hn,{className:"h-16 w-16",children:r.jsx(Gn,{className:"bg-primary text-primary-foreground text-lg",children:s(e.profile.full_name||e.profile.username)})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg font-semibold",children:e.profile.full_name||e.profile.username}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx(md,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:e.email})]}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx(Rn,{className:"h-4 w-4 text-muted-foreground"}),r.jsxs("span",{className:"text-sm text-muted-foreground",children:["@",e.profile.username]})]}),r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.jsx(ur,{className:"h-4 w-4 text-muted-foreground"}),r.jsx(Se,{className:i(e.profile.role),children:a(e.profile.role)})]})]})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsx("h4",{className:"text-sm font-medium mb-3",children:"Informations de session"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"ID Utilisateur:"}),r.jsx("span",{className:"font-mono text-xs",children:e.id})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Nom d'utilisateur:"}),r.jsxs("span",{children:["@",e.profile.username]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Rôle:"}),r.jsx("span",{children:a(e.profile.role)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Statut:"}),r.jsx(Se,{variant:"secondary",className:"bg-green-100 text-green-800",children:"Connecté"})]})]})]}),r.jsx("div",{className:"border-t pt-4",children:r.jsxs(R,{variant:"outline",onClick:o,className:"w-full gap-2 text-red-600 hover:text-red-700 hover:bg-red-50",children:[r.jsx(tI,{className:"h-4 w-4"}),"Se déconnecter"]})})]})]})}const RAe={clinicName:"Clinique du Soleil",address:"123 Avenue Hassan II, Rabat, Maroc",phone:"+212 5 37 00 00 00",email:"contact@cliniquedusoleil.ma",website:"https://www.cliniquedusoleil.ma",footerText:"Clinique du Soleil - Soins vétérinaires à Rabat",logo:"/placeholder.svg",currency:"MAD",species:"Chien, Chat, Bovins, Porcins, Volailles",showClinicInfo:!0,showVetsInfo:!0,veterinarians:[],displayPreferences:{clients:"table",pets:"cards",consultations:"table",appointments:"table",prescriptions:"table",farms:"cards",vaccinations:"table",antiparasitics:"table"},farmManagement:{farmTypes:["Bovin laitier","Bovin viande","Porcin","Avicole","Ovin","Caprin","Équin","Apiculture","Aquaculture","Cuniculture","Mixte"],animalCategories:["Bovins laitiers","Bovins à viande","Porcs","Poules pondeuses","Poulets de chair","Ovins","Caprins","Chevaux","Lapins","Abeilles","Poissons"],breedsByCategory:{"Bovins laitiers":["Holstein","Prim'Holstein","Montbéliarde","Normande","Simmental"],"Bovins à viande":["Charolaise","Limousine","Blonde d'Aquitaine","Angus","Salers"],Porcs:["Large White","Landrace","Piétrain","Duroc","Hampshire"],"Poules pondeuses":["ISA Brown","Lohmann Brown","Hy-Line","Novogen","Dekalb"],"Poulets de chair":["Cobb 500","Ross 308","Hubbard","Arbor Acres"],Ovins:["Lacaune","Brebis laitière","Ile-de-France","Texel","Suffolk"],Caprins:["Saanen","Alpine","Poitevine","Boer","Angora"],Chevaux:["Pur-sang","Trotteur","Selle français","Arabe","Quarter Horse"],Lapins:["Néo-Zélandais","Californien","Fauve de Bourgogne","Géant des Flandres"],Abeilles:["Abeille noire","Buckfast","Carnica","Caucasienne"],Poissons:["Truite arc-en-ciel","Saumon","Carpe","Bar","Daurade"]},certificationTypes:["Agriculture Biologique","Label Rouge","AOC/AOP","IGP","Haute Valeur Environnementale","Bien-être animal","Global GAP","IFS Food","BRC Food","Œufs de France"],equipmentTypes:["Tracteur","Moissonneuse","Épandeur","Charrue","Système de traite","Tank à lait","Système d'alimentation automatique","Ventilation","Générateur","Système d'irrigation","Matériel de récolte"],defaultSurfaceUnit:"hectares",defaultCoordinateFormat:"decimal"},defaultConsultationPrice:150,scheduleSettings:{openingTime:"08:00",closingTime:"18:00",slotDuration:30,lunchBreakStart:"12:00",lunchBreakEnd:"13:00",workingDays:["monday","tuesday","wednesday","thursday","friday","saturday"]}};function FAe(){const{toast:e}=et(),{settings:t,updateSettings:n}=xt(),{theme:s,setTheme:a}=d$(),i=[{id:1,name:"Dr. Jean Dupont",title:"Dr.",specialty:"Médecine générale",phone:"+212 5 37 00 00 01",email:"j.dupont@cliniquedusoleil.ma"},{id:2,name:"Dr. Marie Martin",title:"Dr.",specialty:"Chirurgie",phone:"+212 5 37 00 00 02",email:"m.martin@cliniquedusoleil.ma"},{id:3,name:"Pr. Ahmed El Alaoui",title:"Pr.",specialty:"Dermatologie",phone:"+212 5 37 00 00 03",email:"a.alaoui@cliniquedusoleil.ma"}],o=t.veterinarians.map(O=>({id:O.id,name:O.name,title:O.name.startsWith("Dr.")?"Dr.":O.name.startsWith("Pr.")?"Pr.":"Dr.",specialty:"Médecine générale",phone:"",email:""})),[l,c]=b.useState(!1),[u,d]=b.useState(null),[h,f]=b.useState({name:"",title:"",specialty:"",phone:"",email:""}),[m,g]=b.useState(!1),[p,v]=b.useState(""),[j,x]=b.useState(!1),[y,N]=b.useState(""),[w,C]=b.useState(""),[S,_]=b.useState(!1),[k,T]=b.useState(""),[P,A]=b.useState(!1),[B,L]=b.useState("");b.useEffect(()=>{if(t.veterinarians.length===0){const O=i.map(le=>({id:le.id,name:le.name,isActive:!0}));n({...t,veterinarians:O})}},[t.veterinarians.length]);const{pets:H}=ct();b.useEffect(()=>{const O=Array.from(new Set([...H.map(ce=>ce.type)])),le=Array.from(new Set([...t.species.split(",").map(ce=>ce.trim()),...O]));n({...t,species:le.join(", ")})},[H]);const z=(O,le)=>{n({...t,[O]:le})},$=()=>{e({title:"Paramètres sauvegardés",description:"Informations de la clinique mises à jour."})},I=O=>{var ce;const le=(ce=O.target.files)==null?void 0:ce[0];if(le){const ie=new FileReader;ie.onload=()=>z("logo",ie.result),ie.readAsDataURL(le)}},E=(O,le)=>{const ce={...t.displayPreferences,[O]:le},ie={...t,displayPreferences:ce};n(ie),e({title:"Préférence d'affichage mise à jour",description:`${O} s'affichera maintenant en ${le==="table"?"tableau":"cartes"}`})},q=()=>{d(null),f({name:"",title:"",specialty:"",phone:"",email:""}),c(!0)},Y=O=>{d(O),f({name:O.name,title:O.title,specialty:O.specialty||"",phone:O.phone||"",email:O.email||""}),c(!0)},re=()=>{if(!h.name||!h.title){e({title:"Erreur",description:"Nom et titre requis",variant:"destructive"});return}const O=`${h.title} ${h.name}`;let le;if(u)le=t.veterinarians.map(ce=>ce.id===u.id?{...ce,name:O,isActive:!0}:ce);else{const ce={id:Math.max(0,...t.veterinarians.map(ie=>ie.id))+1,name:O,isActive:!0};le=[...t.veterinarians,ce]}n({...t,veterinarians:le}),e({title:"Vétérinaire enregistré"}),c(!1)},oe=O=>{if(!confirm("Supprimer ce vétérinaire ?"))return;const le=t.veterinarians.filter(ce=>ce.id!==O);n({...t,veterinarians:le}),e({title:"Vétérinaire supprimé"})},ae=()=>{if(!p.trim())return;const O={...t,farmManagement:{...t.farmManagement,farmTypes:[...t.farmManagement.farmTypes,p.trim()]}};n(O),v(""),g(!1),e({title:"Type d'élevage ajouté"})},me=O=>{if(!confirm(`Supprimer le type "${O}" ?`))return;const le={...t,farmManagement:{...t.farmManagement,farmTypes:t.farmManagement.farmTypes.filter(ce=>ce!==O)}};n(le),e({title:"Type d'élevage supprimé"})},we=()=>{if(!y.trim())return;const O={...t,farmManagement:{...t.farmManagement,animalCategories:[...t.farmManagement.animalCategories,y.trim()],breedsByCategory:{...t.farmManagement.breedsByCategory,[y.trim()]:[]}}};n(O),N(""),x(!1),e({title:"Catégorie d'animal ajoutée"})},ue=O=>{if(!confirm(`Supprimer la catégorie "${O}" ?`))return;const le={...t.farmManagement.breedsByCategory};delete le[O];const ce={...t,farmManagement:{...t.farmManagement,animalCategories:t.farmManagement.animalCategories.filter(ie=>ie!==O),breedsByCategory:le}};n(ce),e({title:"Catégorie d'animal supprimée"})},J=()=>{if(!k.trim()||!w)return;const O=t.farmManagement.breedsByCategory[w]||[],le={...t,farmManagement:{...t.farmManagement,breedsByCategory:{...t.farmManagement.breedsByCategory,[w]:[...O,k.trim()]}}};n(le),T(""),_(!1),e({title:"Race ajoutée"})},ee=(O,le)=>{if(!confirm(`Supprimer la race "${le}" ?`))return;const ce=t.farmManagement.breedsByCategory[O]||[],ie={...t,farmManagement:{...t.farmManagement,breedsByCategory:{...t.farmManagement.breedsByCategory,[O]:ce.filter(Ce=>Ce!==le)}}};n(ie),e({title:"Race supprimée"})},G=()=>{if(!B.trim())return;const O={...t,farmManagement:{...t.farmManagement,certificationTypes:[...t.farmManagement.certificationTypes,B.trim()]}};n(O),L(""),A(!1),e({title:"Certification ajoutée"})},W=O=>{if(!confirm(`Supprimer la certification "${O}" ?`))return;const le={...t,farmManagement:{...t.farmManagement,certificationTypes:t.farmManagement.certificationTypes.filter(ce=>ce!==O)}};n(le),e({title:"Certification supprimée"})};return r.jsx("div",{className:"container mx-auto px-6 py-8 space-y-8",children:r.jsxs("div",{className:"grid gap-8 lg:grid-cols-3",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{children:"Paramètres de la Clinique"})}),r.jsxs(ne,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(D,{htmlFor:"logo",children:"Logo de la clinique"}),r.jsx(K,{id:"logo",type:"file",accept:"image/*",onChange:I}),t.logo&&r.jsx("img",{src:t.logo,alt:"Logo",className:"h-24 mt-2"})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"clinicName",children:"Nom de la clinique"}),r.jsx(K,{id:"clinicName",value:t.clinicName,onChange:O=>z("clinicName",O.target.value)})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"address",children:"Adresse"}),r.jsx(K,{id:"address",value:t.address,onChange:O=>z("address",O.target.value)})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"phone",children:"Téléphone"}),r.jsx(K,{id:"phone",value:t.phone,onChange:O=>z("phone",O.target.value)})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"email",children:"Email"}),r.jsx(K,{id:"email",type:"email",value:t.email,onChange:O=>z("email",O.target.value)})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"website",children:"Site web"}),r.jsx(K,{id:"website",value:t.website,onChange:O=>z("website",O.target.value)})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"currency",children:"Devise"}),r.jsx(K,{id:"currency",value:t.currency,onChange:O=>z("currency",O.target.value)})]}),r.jsxs("div",{children:[r.jsxs(D,{htmlFor:"defaultConsultationPrice",children:["Prix de consultation par défaut (",t.currency,")"]}),r.jsx(K,{id:"defaultConsultationPrice",type:"number",step:"0.01",min:"0",value:t.defaultConsultationPrice,onChange:O=>z("defaultConsultationPrice",parseFloat(O.target.value)||0)})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"species",children:"Liste des espèces (virgule séparées)"}),r.jsx(K,{id:"species",value:t.species,onChange:O=>z("species",O.target.value)})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"footerText",children:"Texte de pied de page"}),r.jsx(K,{id:"footerText",value:t.footerText,onChange:O=>z("footerText",O.target.value)})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Xn,{id:"showClinicInfo",checked:t.showClinicInfo,onCheckedChange:O=>z("showClinicInfo",O)}),r.jsx(D,{htmlFor:"showClinicInfo",children:"Afficher coordonnées de la clinique sur le certificat"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Xn,{id:"showVetsInfo",checked:t.showVetsInfo,onCheckedChange:O=>z("showVetsInfo",O)}),r.jsx(D,{htmlFor:"showVetsInfo",children:"Afficher liste des vétérinaires sur le certificat"})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(R,{onClick:$,children:"Enregistrer"}),r.jsx(R,{variant:"outline",onClick:()=>{const O=i.map(ce=>({id:ce.id,name:ce.name,isActive:!0})),le={...RAe,veterinarians:O};n(le),e({title:"Paramètres réinitialisés",description:"Valeurs par défaut restaurées."})},children:"Restaurer valeurs par défaut"}),r.jsx(R,{variant:"outline",onClick:()=>{const le={...t,farmManagement:{farmTypes:["Bovin laitier","Bovin viande","Porcin","Avicole","Ovin","Caprin","Équin","Apiculture","Aquaculture","Cuniculture","Mixte"],animalCategories:["Bovins laitiers","Bovins à viande","Porcs","Poules pondeuses","Poulets de chair","Ovins","Caprins","Chevaux","Lapins","Abeilles","Poissons"],breedsByCategory:{"Bovins laitiers":["Holstein","Prim'Holstein","Montbéliarde","Normande","Simmental"],"Bovins à viande":["Charolaise","Limousine","Blonde d'Aquitaine","Angus","Salers"],Porcs:["Large White","Landrace","Piétrain","Duroc","Hampshire"],"Poules pondeuses":["ISA Brown","Lohmann Brown","Hy-Line","Novogen","Dekalb"],"Poulets de chair":["Cobb 500","Ross 308","Hubbard","Arbor Acres"],Ovins:["Lacaune","Brebis laitière","Ile-de-France","Texel","Suffolk"],Caprins:["Saanen","Alpine","Poitevine","Boer","Angora"],Chevaux:["Pur-sang","Trotteur","Selle français","Arabe","Quarter Horse"],Lapins:["Néo-Zélandais","Californien","Fauve de Bourgogne","Géant des Flandres"],Abeilles:["Abeille noire","Buckfast","Carnica","Caucasienne"],Poissons:["Truite arc-en-ciel","Saumon","Carpe","Bar","Daurade"]},certificationTypes:["Agriculture Biologique","Label Rouge","AOC/AOP","IGP","Haute Valeur Environnementale","Bien-être animal","Global GAP","IFS Food","BRC Food","Œufs de France"],equipmentTypes:["Tracteur","Moissonneuse","Épandeur","Charrue","Système de traite","Tank à lait","Système d'alimentation automatique","Ventilation","Générateur","Système d'irrigation","Matériel de récolte"],defaultSurfaceUnit:"hectares",defaultCoordinateFormat:"decimal"}};n(le),e({title:"Paramètres ferme réinitialisés",description:"Configuration des fermes restaurée aux valeurs par défaut."})},children:"Restaurer paramètres ferme"})]})]})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{children:"Thème de l'application"})}),r.jsx(ne,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Choisissez le thème de l'application pour votre confort visuel."}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx(D,{htmlFor:"theme-select",children:"Thème"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:s==="light"?"Mode clair":"Mode sombre"})]}),r.jsxs(ve,{value:s,onValueChange:O=>{a(O),e({title:"Thème mis à jour",description:`Thème changé en mode ${O==="light"?"clair":"sombre"}`})},children:[r.jsx(pe,{className:"w-32",children:r.jsx(xe,{})}),r.jsxs(ge,{children:[r.jsx(M,{value:"light",children:"Mode clair"}),r.jsx(M,{value:"dark",children:"Mode sombre"})]})]})]})]})})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{children:"Préférences d'affichage"})}),r.jsx(ne,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Choisissez comment vous souhaitez afficher les différentes sections par défaut."}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"clients-display",children:"Clients"}),r.jsxs(ve,{value:t.displayPreferences.clients,onValueChange:O=>E("clients",O),children:[r.jsx(pe,{children:r.jsx(xe,{})}),r.jsxs(ge,{children:[r.jsx(M,{value:"table",children:"Tableau"}),r.jsx(M,{value:"cards",children:"Cartes"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"pets-display",children:"Animaux"}),r.jsxs(ve,{value:t.displayPreferences.pets,onValueChange:O=>E("pets",O),children:[r.jsx(pe,{children:r.jsx(xe,{})}),r.jsxs(ge,{children:[r.jsx(M,{value:"table",children:"Tableau"}),r.jsx(M,{value:"cards",children:"Cartes"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"consultations-display",children:"Consultations"}),r.jsxs(ve,{value:t.displayPreferences.consultations,onValueChange:O=>E("consultations",O),children:[r.jsx(pe,{children:r.jsx(xe,{})}),r.jsxs(ge,{children:[r.jsx(M,{value:"table",children:"Tableau"}),r.jsx(M,{value:"cards",children:"Cartes"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"appointments-display",children:"Rendez-vous"}),r.jsxs(ve,{value:t.displayPreferences.appointments,onValueChange:O=>E("appointments",O),children:[r.jsx(pe,{children:r.jsx(xe,{})}),r.jsxs(ge,{children:[r.jsx(M,{value:"table",children:"Tableau"}),r.jsx(M,{value:"cards",children:"Cartes"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"prescriptions-display",children:"Prescriptions"}),r.jsxs(ve,{value:t.displayPreferences.prescriptions,onValueChange:O=>E("prescriptions",O),children:[r.jsx(pe,{children:r.jsx(xe,{})}),r.jsxs(ge,{children:[r.jsx(M,{value:"table",children:"Tableau"}),r.jsx(M,{value:"cards",children:"Cartes"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"farms-display",children:"Fermes"}),r.jsxs(ve,{value:t.displayPreferences.farms,onValueChange:O=>E("farms",O),children:[r.jsx(pe,{children:r.jsx(xe,{})}),r.jsxs(ge,{children:[r.jsx(M,{value:"table",children:"Tableau"}),r.jsx(M,{value:"cards",children:"Cartes"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"vaccinations-display",children:"Vaccinations"}),r.jsxs(ve,{value:t.displayPreferences.vaccinations,onValueChange:O=>E("vaccinations",O),children:[r.jsx(pe,{children:r.jsx(xe,{})}),r.jsxs(ge,{children:[r.jsx(M,{value:"table",children:"Tableau"}),r.jsx(M,{value:"cards",children:"Cartes"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"antiparasitics-display",children:"Antiparasitaires"}),r.jsxs(ve,{value:t.displayPreferences.antiparasitics,onValueChange:O=>E("antiparasitics",O),children:[r.jsx(pe,{children:r.jsx(xe,{})}),r.jsxs(ge,{children:[r.jsx(M,{value:"table",children:"Tableau"}),r.jsx(M,{value:"cards",children:"Cartes"})]})]})]})]})]})})]}),r.jsxs(te,{children:[r.jsxs(he,{className:"flex justify-between items-center",children:[r.jsx(fe,{children:"Vétérinaires"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(R,{variant:"outline",onClick:()=>{},children:"Debug"}),r.jsxs(R,{onClick:q,className:"gap-2",children:[r.jsx(Ue,{className:"h-4 w-4"})," Ajouter"]})]})]}),r.jsx(ne,{className:"space-y-2",children:o.length===0?r.jsx("p",{className:"text-muted-foreground",children:"Aucun vétérinaire configuré"}):o.map(O=>r.jsxs("div",{className:"flex justify-between items-center p-2 border rounded",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium",children:[O.title," ",O.name]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:O.specialty}),r.jsxs("p",{className:"text-xs",children:[O.phone," | ",O.email]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(R,{size:"sm",variant:"outline",onClick:()=>Y(O),children:r.jsx(Ct,{className:"h-4 w-4"})}),r.jsx(R,{size:"sm",variant:"destructive",onClick:()=>oe(O.id),children:r.jsx(rn,{className:"h-4 w-4"})})]})]},O.id))})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{children:"Configuration des Horaires"})}),r.jsxs(ne,{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(D,{htmlFor:"openingTime",children:"Heure d'ouverture"}),r.jsx(K,{id:"openingTime",type:"time",value:t.scheduleSettings.openingTime,onChange:O=>z("scheduleSettings",{...t.scheduleSettings,openingTime:O.target.value})})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"closingTime",children:"Heure de fermeture"}),r.jsx(K,{id:"closingTime",type:"time",value:t.scheduleSettings.closingTime,onChange:O=>z("scheduleSettings",{...t.scheduleSettings,closingTime:O.target.value})})]})]}),r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{children:[r.jsx(D,{htmlFor:"slotDuration",children:"Durée des créneaux (minutes)"}),r.jsxs(ve,{value:t.scheduleSettings.slotDuration.toString(),onValueChange:O=>z("scheduleSettings",{...t.scheduleSettings,slotDuration:parseInt(O)}),children:[r.jsx(pe,{children:r.jsx(xe,{})}),r.jsxs(ge,{children:[r.jsx(M,{value:"15",children:"15 minutes"}),r.jsx(M,{value:"30",children:"30 minutes"}),r.jsx(M,{value:"45",children:"45 minutes"}),r.jsx(M,{value:"60",children:"1 heure"})]})]})]})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h4",{className:"font-medium",children:"Pause déjeuner"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(D,{htmlFor:"lunchBreakStart",children:"Début de pause"}),r.jsx(K,{id:"lunchBreakStart",type:"time",value:t.scheduleSettings.lunchBreakStart||"",onChange:O=>z("scheduleSettings",{...t.scheduleSettings,lunchBreakStart:O.target.value})})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"lunchBreakEnd",children:"Fin de pause"}),r.jsx(K,{id:"lunchBreakEnd",type:"time",value:t.scheduleSettings.lunchBreakEnd||"",onChange:O=>z("scheduleSettings",{...t.scheduleSettings,lunchBreakEnd:O.target.value})})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h4",{className:"font-medium",children:"Jours de travail"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{key:"monday",label:"Lundi"},{key:"tuesday",label:"Mardi"},{key:"wednesday",label:"Mercredi"},{key:"thursday",label:"Jeudi"},{key:"friday",label:"Vendredi"},{key:"saturday",label:"Samedi"},{key:"sunday",label:"Dimanche"}].map(O=>r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Xn,{id:O.key,checked:t.scheduleSettings.workingDays.includes(O.key),onCheckedChange:le=>{const ce=le?[...t.scheduleSettings.workingDays,O.key]:t.scheduleSettings.workingDays.filter(ie=>ie!==O.key);z("scheduleSettings",{...t.scheduleSettings,workingDays:ce})}}),r.jsx(D,{htmlFor:O.key,className:"text-sm",children:O.label})]},O.key))})]})]})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{children:"Gestion des Exploitations"})}),r.jsxs(ne,{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-3",children:[r.jsx("h4",{className:"font-medium",children:"Types d'élevage"}),r.jsxs(R,{size:"sm",onClick:()=>g(!0),className:"gap-2",children:[r.jsx(Ue,{className:"h-4 w-4"})," Ajouter"]})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:t.farmManagement.farmTypes.map(O=>r.jsxs(Se,{variant:"secondary",className:"gap-2",children:[O,r.jsx("button",{onClick:()=>me(O),className:"hover:text-red-500",children:r.jsx(rn,{className:"h-3 w-3"})})]},O))})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-3",children:[r.jsx("h4",{className:"font-medium",children:"Catégories d'animaux"}),r.jsxs(R,{size:"sm",onClick:()=>x(!0),className:"gap-2",children:[r.jsx(Ue,{className:"h-4 w-4"})," Ajouter"]})]}),r.jsx("div",{className:"space-y-3",children:t.farmManagement.animalCategories.map(O=>r.jsxs("div",{className:"border rounded p-3",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("h5",{className:"font-medium",children:O}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(R,{size:"sm",variant:"outline",onClick:()=>{C(O),_(!0)},children:[r.jsx(Ue,{className:"h-3 w-3"})," Race"]}),r.jsx("button",{onClick:()=>ue(O),className:"text-red-500 hover:text-red-700",children:r.jsx(rn,{className:"h-4 w-4"})})]})]}),r.jsx("div",{className:"flex flex-wrap gap-1",children:(t.farmManagement.breedsByCategory[O]||[]).map(le=>r.jsxs(Se,{variant:"outline",className:"text-xs gap-1",children:[le,r.jsx("button",{onClick:()=>ee(O,le),className:"hover:text-red-500",children:r.jsx(rn,{className:"h-2 w-2"})})]},le))})]},O))})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-3",children:[r.jsx("h4",{className:"font-medium",children:"Types de certifications"}),r.jsxs(R,{size:"sm",onClick:()=>A(!0),className:"gap-2",children:[r.jsx(Ue,{className:"h-4 w-4"})," Ajouter"]})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:t.farmManagement.certificationTypes.map(O=>r.jsxs(Se,{variant:"outline",className:"gap-2",children:[O,r.jsx("button",{onClick:()=>W(O),className:"hover:text-red-500",children:r.jsx(rn,{className:"h-3 w-3"})})]},O))})]})]})]}),r.jsx(He,{open:l,onOpenChange:c,children:r.jsxs(We,{children:[r.jsxs(Ge,{children:[r.jsx(Ke,{children:u?"Modifier vétérinaire":"Nouveau vétérinaire"}),r.jsx(yt,{children:"Nom, titre, spécialité, contact"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(D,{htmlFor:"vetName",children:"Nom complet *"}),r.jsx(K,{id:"vetName",value:h.name,onChange:O=>f(le=>({...le,name:O.target.value}))})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"vetTitle",children:"Titre *"}),r.jsx(K,{id:"vetTitle",value:h.title,onChange:O=>f(le=>({...le,title:O.target.value}))})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"vetSpec",children:"Spécialité"}),r.jsx(K,{id:"vetSpec",value:h.specialty,onChange:O=>f(le=>({...le,specialty:O.target.value}))})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"vetPhone",children:"Téléphone"}),r.jsx(K,{id:"vetPhone",value:h.phone,onChange:O=>f(le=>({...le,phone:O.target.value}))})]}),r.jsxs("div",{children:[r.jsx(D,{htmlFor:"vetEmail",children:"Email"}),r.jsx(K,{id:"vetEmail",type:"email",value:h.email,onChange:O=>f(le=>({...le,email:O.target.value}))})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(R,{variant:"outline",onClick:()=>c(!1),children:"Annuler"}),r.jsx(R,{onClick:re,children:u?"Mettre à jour":"Créer"})]})]})]})}),r.jsx(He,{open:m,onOpenChange:g,children:r.jsxs(We,{children:[r.jsxs(Ge,{children:[r.jsx(Ke,{children:"Nouveau type d'élevage"}),r.jsx(yt,{children:"Ajouter un nouveau type d'exploitation agricole"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(K,{placeholder:"Ex: Apiculture, Aquaculture...",value:p,onChange:O=>v(O.target.value),onKeyPress:O=>O.key==="Enter"&&ae()}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(R,{variant:"outline",onClick:()=>g(!1),children:"Annuler"}),r.jsx(R,{onClick:ae,children:"Ajouter"})]})]})]})}),r.jsx(He,{open:j,onOpenChange:x,children:r.jsxs(We,{children:[r.jsxs(Ge,{children:[r.jsx(Ke,{children:"Nouvelle catégorie d'animal"}),r.jsx(yt,{children:"Ajouter une nouvelle catégorie d'animaux d'élevage"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(K,{placeholder:"Ex: Cochons d'Inde, Autruches...",value:y,onChange:O=>N(O.target.value),onKeyPress:O=>O.key==="Enter"&&we()}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(R,{variant:"outline",onClick:()=>x(!1),children:"Annuler"}),r.jsx(R,{onClick:we,children:"Ajouter"})]})]})]})}),r.jsx(He,{open:S,onOpenChange:_,children:r.jsxs(We,{children:[r.jsxs(Ge,{children:[r.jsxs(Ke,{children:["Nouvelle race - ",w]}),r.jsxs(yt,{children:["Ajouter une nouvelle race pour la catégorie ",w]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(K,{placeholder:"Nom de la race...",value:k,onChange:O=>T(O.target.value),onKeyPress:O=>O.key==="Enter"&&J()}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(R,{variant:"outline",onClick:()=>_(!1),children:"Annuler"}),r.jsx(R,{onClick:J,children:"Ajouter"})]})]})]})}),r.jsx(He,{open:P,onOpenChange:A,children:r.jsxs(We,{children:[r.jsxs(Ge,{children:[r.jsx(Ke,{children:"Nouvelle certification"}),r.jsx(yt,{children:"Ajouter un nouveau type de certification"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(K,{placeholder:"Ex: Commerce équitable, Demeter...",value:B,onChange:O=>L(O.target.value),onKeyPress:O=>O.key==="Enter"&&G()}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(R,{variant:"outline",onClick:()=>A(!1),children:"Annuler"}),r.jsx(R,{onClick:G,children:"Ajouter"})]})]})]})})]}),r.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[r.jsx($Ae,{}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsx(fe,{className:"text-base",children:"Liens Rapides"})}),r.jsxs(ne,{className:"space-y-3",children:[r.jsxs(R,{variant:"outline",className:"w-full justify-start gap-2",onClick:()=>window.location.href="/profile",children:[r.jsx(Rn,{className:"h-4 w-4"}),"Mon Profil"]}),r.jsxs(R,{variant:"outline",className:"w-full justify-start gap-2",onClick:()=>window.location.href="/auth-settings",children:[r.jsx(ur,{className:"h-4 w-4"}),"Paramètres de Connexion"]})]})]})]})]})})}var LAe="Separator",ZE="horizontal",BAe=["horizontal","vertical"],Z6=b.forwardRef((e,t)=>{const{decorative:n,orientation:s=ZE,...a}=e,i=VAe(s)?s:ZE,l=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return r.jsx(Le.div,{"data-orientation":i,...l,...a,ref:t})});Z6.displayName=LAe;function VAe(e){return BAe.includes(e)}var e8=Z6;const Qv=b.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...s},a)=>r.jsx(e8,{ref:a,decorative:n,orientation:t,className:Ie("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...s}));Qv.displayName=e8.displayName;function zAe(){const{user:e,logout:t,refreshProfile:n}=Fo(),{toast:s}=et(),{data:a,isLoading:i,refetch:o}=CZ(),l=_Z(),[c,u]=b.useState(!1);b.useState(!1);const[d,h]=b.useState({full_name:"",username:"",email:"",phone:"",address:"",specialty:"",experience:"",bio:"",languages:["Français","Arabe","Anglais"]});b.useEffect(()=>{a&&e&&h(v=>({...v,full_name:a.full_name||"",username:a.username||"",email:e.email||"",phone:a.phone||"",address:a.address||"",specialty:a.specialty||"",experience:a.experience||"",bio:a.bio||""}))},[a,e]),b.useState({currentPassword:"",newPassword:"",confirmPassword:""}),b.useState({notifications:{email:!0,sms:!1,push:!0},privacy:{showEmail:!1,showPhone:!0,showAddress:!1},language:"fr",timezone:"Africa/Casablanca"});const f=async()=>{try{await l.mutateAsync({full_name:d.full_name,username:d.username,phone:d.phone,address:d.address,specialty:d.specialty,experience:d.experience,bio:d.bio}),await Promise.all([o(),n()]),s({title:"Profil mis à jour",description:"Vos informations personnelles ont été sauvegardées avec succès."}),u(!1)}catch(v){s({title:"Erreur",description:v instanceof Error?v.message:"Impossible de sauvegarder le profil.",variant:"destructive"})}},m=v=>v.split(" ").map(j=>j.charAt(0)).join("").toUpperCase().slice(0,2),g=v=>{switch(v){case"admin":return"Administrateur";case"assistant":return"Assistant";default:return"Utilisateur"}},p=v=>{switch(v){case"admin":return"bg-red-100 text-red-800";case"assistant":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return e?i?r.jsx("div",{className:"container mx-auto px-2 sm:px-4 lg:px-6 py-4 sm:py-6 lg:py-8",children:r.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:r.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[r.jsx(Nr,{className:"h-8 w-8 animate-spin"}),r.jsx("p",{className:"text-muted-foreground",children:"Chargement du profil..."})]})})}):r.jsxs("div",{className:"container mx-auto px-2 sm:px-4 lg:px-6 py-4 sm:py-6 lg:py-8 space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Mon Profil"}),r.jsx("p",{className:"text-muted-foreground text-sm sm:text-base",children:"Gérez vos informations personnelles et préférences"})]}),r.jsx("div",{className:"flex gap-2",children:c?r.jsxs(r.Fragment,{children:[r.jsx(R,{variant:"outline",onClick:()=>u(!1),children:"Annuler"}),r.jsxs(R,{onClick:f,className:"gap-2",disabled:l.isPending,children:[l.isPending?r.jsx(Nr,{className:"h-4 w-4 animate-spin"}):r.jsx(Mh,{className:"h-4 w-4"}),l.isPending?"Sauvegarde...":"Sauvegarder"]})]}):r.jsxs(R,{onClick:()=>u(!0),className:"gap-2",children:[r.jsx(Ct,{className:"h-4 w-4"}),"Modifier"]})})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsxs(fe,{className:"flex items-center gap-2",children:[r.jsx(Rn,{className:"h-5 w-5"}),"Informations Personnelles"]})}),r.jsxs(ne,{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Hn,{className:"h-20 w-20",children:r.jsx(Gn,{className:"bg-primary text-primary-foreground text-xl",children:m(e.profile.full_name)})}),c&&r.jsx(R,{size:"sm",className:"absolute -bottom-2 -right-2 h-8 w-8 rounded-full",variant:"secondary",children:r.jsx(_u,{className:"h-4 w-4"})})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-xl font-semibold",children:e.profile.full_name||e.profile.username}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx(md,{className:"h-4 w-4 text-muted-foreground"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:e.email})]}),r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.jsx(ur,{className:"h-4 w-4 text-muted-foreground"}),r.jsx(Se,{className:p(e.profile.role),children:g(e.profile.role)})]})]})]}),r.jsx(Qv,{}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"full_name",children:"Nom complet"}),r.jsx(K,{id:"full_name",value:d.full_name,onChange:v=>h(j=>({...j,full_name:v.target.value})),disabled:!c})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"username",children:"Nom d'utilisateur"}),r.jsx(K,{id:"username",value:d.username,onChange:v=>h(j=>({...j,username:v.target.value})),disabled:!c})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"email",children:"Email"}),r.jsx(K,{id:"email",type:"email",value:d.email,disabled:!0,className:"bg-muted"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"phone",children:"Téléphone"}),r.jsx(K,{id:"phone",value:d.phone,onChange:v=>h(j=>({...j,phone:v.target.value})),disabled:!c})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"address",children:"Adresse"}),r.jsx(K,{id:"address",value:d.address,onChange:v=>h(j=>({...j,address:v.target.value})),disabled:!c})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"specialty",children:"Spécialité"}),r.jsx(K,{id:"specialty",value:d.specialty,onChange:v=>h(j=>({...j,specialty:v.target.value})),disabled:!c})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"experience",children:"Expérience"}),r.jsx(K,{id:"experience",value:d.experience,onChange:v=>h(j=>({...j,experience:v.target.value})),disabled:!c})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"bio",children:"Biographie"}),r.jsx("textarea",{id:"bio",className:"w-full min-h-[100px] px-3 py-2 border border-input bg-background rounded-md text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:d.bio,onChange:v=>h(j=>({...j,bio:v.target.value})),disabled:!c})]})]})]})]}):null}function qAe(){const{user:e}=Fo(),{toast:t}=et(),[n,s]=b.useState({twoFactorAuth:!1,sessionTimeout:30,passwordExpiry:90,loginNotifications:!0,deviceTracking:!0,autoLogout:!0}),[a,i]=b.useState({rememberMe:!0,autoLogin:!1,sessionDuration:8,maxConcurrentSessions:3}),[o,l]=b.useState({loginAlerts:!0,securityAlerts:!0,deviceAlerts:!0,emailNotifications:!0,smsNotifications:!1,pushNotifications:!0});b.useState({dataSharing:!1,analytics:!0,crashReports:!0,marketingEmails:!1,profileVisibility:"private"}),b.useState({language:"fr",timezone:"Africa/Casablanca",dateFormat:"DD/MM/YYYY",timeFormat:"24h",theme:"system"});const[c]=b.useState([{id:1,device:"MacBook Pro",browser:"Chrome",location:"Rabat, Maroc",lastActive:"Maintenant",current:!0,ip:"192.168.1.100"},{id:2,device:"iPhone 14",browser:"Safari",location:"Rabat, Maroc",lastActive:"Il y a 2 heures",current:!1,ip:"192.168.1.101"}]),u=()=>{t({title:"Paramètres de sécurité sauvegardés",description:"Vos paramètres de sécurité ont été mis à jour."})},d=()=>{t({title:"Paramètres de session sauvegardés",description:"Vos paramètres de session ont été mis à jour."})},h=()=>{t({title:"Paramètres de notification sauvegardés",description:"Vos paramètres de notification ont été mis à jour."})},f=p=>{t({title:"Session terminée",description:"La session a été fermée avec succès."})},m=()=>{t({title:"Toutes les sessions terminées",description:"Toutes les autres sessions ont été fermées."})},g=p=>p.includes("iPhone")||p.includes("Android")?r.jsx($q,{className:"h-4 w-4"}):p.includes("iPad")||p.includes("Tablet")?r.jsx(Lq,{className:"h-4 w-4"}):r.jsx(x_,{className:"h-4 w-4"});return e?r.jsxs("div",{className:"container mx-auto px-2 sm:px-4 lg:px-6 py-4 sm:py-6 lg:py-8 space-y-6",children:[r.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Paramètres de Connexion"}),r.jsx("p",{className:"text-muted-foreground text-sm sm:text-base",children:"Gérez vos paramètres de sécurité et de session"})]})}),r.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[r.jsxs(te,{children:[r.jsx(he,{children:r.jsxs(fe,{className:"flex items-center gap-2",children:[r.jsx(ur,{className:"h-5 w-5"}),"Sécurité"]})}),r.jsxs(ne,{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx(D,{children:"Authentification à deux facteurs"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Ajoutez une couche de sécurité supplémentaire"})]}),r.jsx(Xn,{checked:n.twoFactorAuth,onCheckedChange:p=>s(v=>({...v,twoFactorAuth:p}))})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{children:"Délai d'expiration de session (minutes)"}),r.jsxs(ve,{value:n.sessionTimeout.toString(),onValueChange:p=>s(v=>({...v,sessionTimeout:parseInt(p)})),children:[r.jsx(pe,{children:r.jsx(xe,{})}),r.jsxs(ge,{children:[r.jsx(M,{value:"15",children:"15 minutes"}),r.jsx(M,{value:"30",children:"30 minutes"}),r.jsx(M,{value:"60",children:"1 heure"}),r.jsx(M,{value:"120",children:"2 heures"}),r.jsx(M,{value:"480",children:"8 heures"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{children:"Expiration du mot de passe (jours)"}),r.jsxs(ve,{value:n.passwordExpiry.toString(),onValueChange:p=>s(v=>({...v,passwordExpiry:parseInt(p)})),children:[r.jsx(pe,{children:r.jsx(xe,{})}),r.jsxs(ge,{children:[r.jsx(M,{value:"30",children:"30 jours"}),r.jsx(M,{value:"60",children:"60 jours"}),r.jsx(M,{value:"90",children:"90 jours"}),r.jsx(M,{value:"180",children:"6 mois"}),r.jsx(M,{value:"365",children:"1 an"})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx(D,{children:"Notifications de connexion"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevez des alertes pour les nouvelles connexions"})]}),r.jsx(Xn,{checked:n.loginNotifications,onCheckedChange:p=>s(v=>({...v,loginNotifications:p}))})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx(D,{children:"Suivi des appareils"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Surveillez les appareils connectés"})]}),r.jsx(Xn,{checked:n.deviceTracking,onCheckedChange:p=>s(v=>({...v,deviceTracking:p}))})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx(D,{children:"Déconnexion automatique"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Déconnexion après inactivité"})]}),r.jsx(Xn,{checked:n.autoLogout,onCheckedChange:p=>s(v=>({...v,autoLogout:p}))})]})]}),r.jsxs(R,{onClick:u,className:"w-full gap-2",children:[r.jsx(Mh,{className:"h-4 w-4"}),"Sauvegarder les paramètres de sécurité"]})]})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsxs(fe,{className:"flex items-center gap-2",children:[r.jsx(x_,{className:"h-5 w-5"}),"Sessions Actives"]})}),r.jsxs(ne,{className:"space-y-4",children:[r.jsx("div",{className:"space-y-3",children:c.map(p=>r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[g(p.device),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium",children:p.device}),p.current&&r.jsx(Se,{variant:"secondary",className:"text-xs",children:"Actuel"})]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[p.browser," • ",p.location]}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Dernière activité: ",p.lastActive]})]})]}),!p.current&&r.jsx(R,{variant:"outline",size:"sm",onClick:()=>f(p.id),children:"Terminer"})]},p.id))}),r.jsx(Qv,{}),r.jsx(R,{variant:"destructive",onClick:m,className:"w-full",children:"Terminer toutes les autres sessions"})]})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsxs(fe,{className:"flex items-center gap-2",children:[r.jsx(Yt,{className:"h-5 w-5"}),"Gestion des Sessions"]})}),r.jsxs(ne,{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx(D,{children:"Se souvenir de moi"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Restez connecté entre les sessions"})]}),r.jsx(Xn,{checked:a.rememberMe,onCheckedChange:p=>i(v=>({...v,rememberMe:p}))})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx(D,{children:"Connexion automatique"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Connexion automatique au démarrage"})]}),r.jsx(Xn,{checked:a.autoLogin,onCheckedChange:p=>i(v=>({...v,autoLogin:p}))})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{children:"Durée de session (heures)"}),r.jsxs(ve,{value:a.sessionDuration.toString(),onValueChange:p=>i(v=>({...v,sessionDuration:parseInt(p)})),children:[r.jsx(pe,{children:r.jsx(xe,{})}),r.jsxs(ge,{children:[r.jsx(M,{value:"1",children:"1 heure"}),r.jsx(M,{value:"4",children:"4 heures"}),r.jsx(M,{value:"8",children:"8 heures"}),r.jsx(M,{value:"12",children:"12 heures"}),r.jsx(M,{value:"24",children:"24 heures"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{children:"Sessions simultanées maximum"}),r.jsxs(ve,{value:a.maxConcurrentSessions.toString(),onValueChange:p=>i(v=>({...v,maxConcurrentSessions:parseInt(p)})),children:[r.jsx(pe,{children:r.jsx(xe,{})}),r.jsxs(ge,{children:[r.jsx(M,{value:"1",children:"1 session"}),r.jsx(M,{value:"2",children:"2 sessions"}),r.jsx(M,{value:"3",children:"3 sessions"}),r.jsx(M,{value:"5",children:"5 sessions"}),r.jsx(M,{value:"10",children:"10 sessions"})]})]})]})]}),r.jsxs(R,{onClick:d,className:"w-full gap-2",children:[r.jsx(Mh,{className:"h-4 w-4"}),"Sauvegarder les paramètres de session"]})]})]}),r.jsxs(te,{children:[r.jsx(he,{children:r.jsxs(fe,{className:"flex items-center gap-2",children:[r.jsx(bq,{className:"h-5 w-5"}),"Notifications de Sécurité"]})}),r.jsxs(ne,{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx(D,{children:"Alertes de connexion"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications pour les nouvelles connexions"})]}),r.jsx(Xn,{checked:o.loginAlerts,onCheckedChange:p=>l(v=>({...v,loginAlerts:p}))})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx(D,{children:"Alertes de sécurité"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications pour les événements de sécurité"})]}),r.jsx(Xn,{checked:o.securityAlerts,onCheckedChange:p=>l(v=>({...v,securityAlerts:p}))})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx(D,{children:"Alertes d'appareil"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications pour les nouveaux appareils"})]}),r.jsx(Xn,{checked:o.deviceAlerts,onCheckedChange:p=>l(v=>({...v,deviceAlerts:p}))})]}),r.jsx(Qv,{}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx(D,{children:"Notifications par email"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevez les alertes par email"})]}),r.jsx(Xn,{checked:o.emailNotifications,onCheckedChange:p=>l(v=>({...v,emailNotifications:p}))})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx(D,{children:"Notifications SMS"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevez les alertes par SMS"})]}),r.jsx(Xn,{checked:o.smsNotifications,onCheckedChange:p=>l(v=>({...v,smsNotifications:p}))})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx(D,{children:"Notifications push"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevez les alertes push"})]}),r.jsx(Xn,{checked:o.pushNotifications,onCheckedChange:p=>l(v=>({...v,pushNotifications:p}))})]})]}),r.jsxs(R,{onClick:h,className:"w-full gap-2",children:[r.jsx(Mh,{className:"h-4 w-4"}),"Sauvegarder les paramètres de notification"]})]})]})]})]}):null}function UAe(){const[e,t]=b.useState(""),[n,s]=b.useState(""),[a,i]=b.useState(!1),[o,l]=b.useState(!1),[c,u]=b.useState(""),[d,h]=b.useState(!1),[f,m]=b.useState(!1),g=wd(),{toast:p}=et();wH(),b.useEffect(()=>{(async()=>{try{const{data:{session:y},error:N}=await Me.auth.getSession();if(N){u("Lien de réinitialisation invalide ou expiré");return}y?m(!0):u("Lien de réinitialisation invalide ou expiré")}catch{u("Erreur lors de la vérification du lien de réinitialisation")}})()},[]);const v=x=>x.length<8?"Le mot de passe doit contenir au moins 8 caractères":/[A-Z]/.test(x)?/[a-z]/.test(x)?/\d/.test(x)?/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>?]/.test(x)?null:"Le mot de passe doit contenir au moins un caractère spécial":"Le mot de passe doit contenir au moins un chiffre":"Le mot de passe doit contenir au moins une lettre minuscule":"Le mot de passe doit contenir au moins une lettre majuscule",j=async x=>{if(x.preventDefault(),u(""),!e||!n){p({title:"Champs requis",description:"Veuillez remplir tous les champs",variant:"destructive"});return}if(e!==n){p({title:"Erreur",description:"Les mots de passe ne correspondent pas",variant:"destructive"});return}const y=v(e);if(y){p({title:"Mot de passe invalide",description:y,variant:"destructive"});return}h(!0);try{const{error:N}=await Me.auth.updateUser({password:e});if(N)throw N;p({title:"Mot de passe mis à jour",description:"Votre mot de passe a été réinitialisé avec succès."}),g("/login")}catch(N){u(N instanceof Error?N.message:"Une erreur est survenue lors de la mise à jour du mot de passe")}finally{h(!1)}};return!f&&!c?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-green-50 dark:from-gray-900 dark:to-gray-800 px-4",children:r.jsx(te,{className:"w-full max-w-md",children:r.jsxs(ne,{className:"pt-6",children:[r.jsx("div",{className:"flex justify-center",children:r.jsx(Nr,{className:"h-8 w-8 animate-spin"})}),r.jsx("p",{className:"text-center mt-4 text-sm text-muted-foreground",children:"Vérification du lien de réinitialisation..."})]})})}):c?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-green-50 dark:from-gray-900 dark:to-gray-800 px-4",children:r.jsxs(te,{className:"w-full max-w-md",children:[r.jsxs(he,{className:"text-center",children:[r.jsx("div",{className:"flex justify-center mb-4",children:r.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:r.jsx(lt,{className:"h-8 w-8 text-red-600"})})}),r.jsx(fe,{className:"text-2xl font-bold text-red-600",children:"Lien invalide"})]}),r.jsxs(ne,{children:[r.jsx(Vg,{className:"mb-4",children:r.jsx(zg,{children:c})}),r.jsx(R,{onClick:()=>g("/login"),className:"w-full",children:"Retour à la connexion"})]})]})}):r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-green-50 dark:from-gray-900 dark:to-gray-800 px-4",children:r.jsxs(te,{className:"w-full max-w-md",children:[r.jsxs(he,{className:"text-center",children:[r.jsx("div",{className:"flex justify-center mb-4",children:r.jsx("div",{className:"p-3 bg-primary/10 rounded-full",children:r.jsx(lt,{className:"h-8 w-8 text-primary"})})}),r.jsx(fe,{className:"text-2xl font-bold",children:"VetPro CRM3"}),r.jsx(Iu,{children:"Définir un nouveau mot de passe"})]}),r.jsx(ne,{children:r.jsxs("form",{onSubmit:j,className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"password",children:"Nouveau mot de passe"}),r.jsxs("div",{className:"relative",children:[r.jsx(K,{id:"password",type:a?"text":"password",value:e,onChange:x=>t(x.target.value),placeholder:"Votre nouveau mot de passe",required:!0}),r.jsx(R,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>i(!a),children:a?r.jsx(mb,{className:"h-4 w-4"}):r.jsx(wn,{className:"h-4 w-4"})})]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Le mot de passe doit contenir au moins 8 caractères, une majuscule, une minuscule, un chiffre et un caractère spécial."})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(D,{htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),r.jsxs("div",{className:"relative",children:[r.jsx(K,{id:"confirmPassword",type:o?"text":"password",value:n,onChange:x=>s(x.target.value),placeholder:"Confirmer votre nouveau mot de passe",required:!0}),r.jsx(R,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>l(!o),children:o?r.jsx(mb,{className:"h-4 w-4"}):r.jsx(wn,{className:"h-4 w-4"})})]})]}),r.jsx(R,{type:"submit",className:"w-full",disabled:d,children:d?r.jsxs(r.Fragment,{children:[r.jsx(Nr,{className:"mr-2 h-4 w-4 animate-spin"}),"Mise à jour..."]}):"Mettre à jour le mot de passe"})]})})]})})}const WAe=new cW({defaultOptions:{queries:{retry:(e,t)=>(t==null?void 0:t.status)>=400&&(t==null?void 0:t.status)<500?!1:e<2,staleTime:3*60*1e3,gcTime:8*60*1e3,refetchOnWindowFocus:!1,refetchOnReconnect:"always",refetchOnMount:!0,networkMode:"offlineFirst"},mutations:{retry:1,networkMode:"offlineFirst"}}}),HAe=()=>r.jsx(DX,{children:r.jsx(uW,{client:WAe,children:r.jsxs(L9,{children:[r.jsx(NU,{}),r.jsx(t7,{}),r.jsx(EX,{children:r.jsx(PS,{children:r.jsx(TZ,{children:r.jsx(SH,{children:r.jsx(xH,{children:r.jsx("div",{className:"min-h-screen bg-background",children:r.jsxs(uH,{children:[r.jsx(un,{path:"/",element:r.jsx(VX,{})}),r.jsx(un,{path:"/login",element:r.jsx(BX,{children:r.jsx(LX,{})})}),r.jsx(un,{path:"/register",element:r.jsx(zX,{})}),r.jsx(un,{path:"/dashboard",element:r.jsxs(sr,{children:[r.jsx(rr,{}),r.jsx(LPe,{})]})}),r.jsx(un,{path:"/clients",element:r.jsxs(sr,{children:[r.jsx(rr,{}),r.jsx(zPe,{})]})}),r.jsx(un,{path:"/pets",element:r.jsxs(sr,{children:[r.jsx(rr,{}),r.jsx(GPe,{})]})}),r.jsx(un,{path:"/appointments",element:r.jsxs(sr,{children:[r.jsx(rr,{}),r.jsx(QPe,{})]})}),r.jsx(un,{path:"/consultations",element:r.jsxs(sr,{children:[r.jsx(rr,{}),r.jsx(eAe,{})]})}),r.jsx(un,{path:"/history",element:r.jsxs(sr,{children:[r.jsx(rr,{}),r.jsx(rAe,{})]})}),r.jsx(un,{path:"/farm",element:r.jsxs(sr,{children:[r.jsx(rr,{}),r.jsx(cAe,{})]})}),r.jsx(un,{path:"/vaccinations",element:r.jsxs(sr,{children:[r.jsx(rr,{}),r.jsx(dAe,{})]})}),r.jsx(un,{path:"/antiparasites",element:r.jsxs(sr,{children:[r.jsx(rr,{}),r.jsx(jAe,{})]})}),r.jsx(un,{path:"/stock",element:r.jsxs(sr,{children:[r.jsx(rr,{}),r.jsx(AAe,{})]})}),r.jsx(un,{path:"/accounting",element:r.jsxs(sr,{children:[r.jsx(rr,{}),r.jsx(TAe,{})]})}),r.jsx(un,{path:"/test-stats",element:r.jsxs(sr,{children:[r.jsx(rr,{}),r.jsx(OAe,{})]})}),r.jsx(un,{path:"/simple-test",element:r.jsxs(sr,{children:[r.jsx(rr,{}),r.jsx(MAe,{})]})}),r.jsx(un,{path:"/settings",element:r.jsxs(sr,{children:[r.jsx(rr,{}),r.jsx(FAe,{})]})}),r.jsx(un,{path:"/profile",element:r.jsxs(sr,{children:[r.jsx(rr,{}),r.jsx(zAe,{})]})}),r.jsx(un,{path:"/auth-settings",element:r.jsxs(sr,{children:[r.jsx(rr,{}),r.jsx(qAe,{})]})}),r.jsx(un,{path:"/reset-password",element:r.jsx(UAe,{})}),r.jsx(un,{path:"*",element:r.jsx(IAe,{})})]})})})})})})})]})})});SM(document.getElementById("root")).render(r.jsx(HAe,{}));
