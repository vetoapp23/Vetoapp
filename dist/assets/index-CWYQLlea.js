var C2=e=>{throw TypeError(e)};var o0=(e,t,n)=>t.has(e)||C2("Cannot "+n);var X=(e,t,n)=>(o0(e,t,"read from private field"),n?n.call(e):t.get(e)),Be=(e,t,n)=>t.has(e)?C2("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),De=(e,t,n,r)=>(o0(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),lt=(e,t,n)=>(o0(e,t,"access private method"),n);var qm=(e,t,n,r)=>({set _(a){De(e,t,a,n)},get _(){return X(e,t,r)}});function Yz(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var ur=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Et(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Qz(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var a=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return e[r]}})}),n}var GO={exports:{}},tx={},YO={exports:{}},mt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mm=Symbol.for("react.element"),Xz=Symbol.for("react.portal"),Jz=Symbol.for("react.fragment"),Zz=Symbol.for("react.strict_mode"),eB=Symbol.for("react.profiler"),tB=Symbol.for("react.provider"),nB=Symbol.for("react.context"),rB=Symbol.for("react.forward_ref"),sB=Symbol.for("react.suspense"),aB=Symbol.for("react.memo"),iB=Symbol.for("react.lazy"),A2=Symbol.iterator;function oB(e){return e===null||typeof e!="object"?null:(e=A2&&e[A2]||e["@@iterator"],typeof e=="function"?e:null)}var QO={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},XO=Object.assign,JO={};function md(e,t,n){this.props=e,this.context=t,this.refs=JO,this.updater=n||QO}md.prototype.isReactComponent={};md.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};md.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ZO(){}ZO.prototype=md.prototype;function iN(e,t,n){this.props=e,this.context=t,this.refs=JO,this.updater=n||QO}var oN=iN.prototype=new ZO;oN.constructor=iN;XO(oN,md.prototype);oN.isPureReactComponent=!0;var P2=Array.isArray,eD=Object.prototype.hasOwnProperty,lN={current:null},tD={key:!0,ref:!0,__self:!0,__source:!0};function nD(e,t,n){var r,a={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)eD.call(t,r)&&!tD.hasOwnProperty(r)&&(a[r]=t[r]);var l=arguments.length-2;if(l===1)a.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)a[r]===void 0&&(a[r]=l[r]);return{$$typeof:mm,type:e,key:i,ref:o,props:a,_owner:lN.current}}function lB(e,t){return{$$typeof:mm,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function cN(e){return typeof e=="object"&&e!==null&&e.$$typeof===mm}function cB(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var E2=/\/+/g;function l0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?cB(""+e.key):t.toString(36)}function qp(e,t,n,r,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case mm:case Xz:o=!0}}if(o)return o=e,a=a(o),e=r===""?"."+l0(o,0):r,P2(a)?(n="",e!=null&&(n=e.replace(E2,"$&/")+"/"),qp(a,t,n,"",function(u){return u})):a!=null&&(cN(a)&&(a=lB(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(E2,"$&/")+"/")+e)),t.push(a)),1;if(o=0,r=r===""?".":r+":",P2(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+l0(i,l);o+=qp(i,t,n,c,a)}else if(c=oB(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+l0(i,l++),o+=qp(i,t,n,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Vm(e,t,n){if(e==null)return e;var r=[],a=0;return qp(e,r,"","",function(i){return t.call(n,i,a++)}),r}function uB(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Sr={current:null},Vp={transition:null},dB={ReactCurrentDispatcher:Sr,ReactCurrentBatchConfig:Vp,ReactCurrentOwner:lN};function rD(){throw Error("act(...) is not supported in production builds of React.")}mt.Children={map:Vm,forEach:function(e,t,n){Vm(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Vm(e,function(){t++}),t},toArray:function(e){return Vm(e,function(t){return t})||[]},only:function(e){if(!cN(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};mt.Component=md;mt.Fragment=Jz;mt.Profiler=eB;mt.PureComponent=iN;mt.StrictMode=Zz;mt.Suspense=sB;mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dB;mt.act=rD;mt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=XO({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=lN.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)eD.call(t,c)&&!tD.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:mm,type:e.type,key:a,ref:i,props:r,_owner:o}};mt.createContext=function(e){return e={$$typeof:nB,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:tB,_context:e},e.Consumer=e};mt.createElement=nD;mt.createFactory=function(e){var t=nD.bind(null,e);return t.type=e,t};mt.createRef=function(){return{current:null}};mt.forwardRef=function(e){return{$$typeof:rB,render:e}};mt.isValidElement=cN;mt.lazy=function(e){return{$$typeof:iB,_payload:{_status:-1,_result:e},_init:uB}};mt.memo=function(e,t){return{$$typeof:aB,type:e,compare:t===void 0?null:t}};mt.startTransition=function(e){var t=Vp.transition;Vp.transition={};try{e()}finally{Vp.transition=t}};mt.unstable_act=rD;mt.useCallback=function(e,t){return Sr.current.useCallback(e,t)};mt.useContext=function(e){return Sr.current.useContext(e)};mt.useDebugValue=function(){};mt.useDeferredValue=function(e){return Sr.current.useDeferredValue(e)};mt.useEffect=function(e,t){return Sr.current.useEffect(e,t)};mt.useId=function(){return Sr.current.useId()};mt.useImperativeHandle=function(e,t,n){return Sr.current.useImperativeHandle(e,t,n)};mt.useInsertionEffect=function(e,t){return Sr.current.useInsertionEffect(e,t)};mt.useLayoutEffect=function(e,t){return Sr.current.useLayoutEffect(e,t)};mt.useMemo=function(e,t){return Sr.current.useMemo(e,t)};mt.useReducer=function(e,t,n){return Sr.current.useReducer(e,t,n)};mt.useRef=function(e){return Sr.current.useRef(e)};mt.useState=function(e){return Sr.current.useState(e)};mt.useSyncExternalStore=function(e,t,n){return Sr.current.useSyncExternalStore(e,t,n)};mt.useTransition=function(){return Sr.current.useTransition()};mt.version="18.3.1";YO.exports=mt;var b=YO.exports;const L=Et(b),uN=Yz({__proto__:null,default:L},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hB=b,fB=Symbol.for("react.element"),mB=Symbol.for("react.fragment"),pB=Object.prototype.hasOwnProperty,gB=hB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vB={key:!0,ref:!0,__self:!0,__source:!0};function sD(e,t,n){var r,a={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)pB.call(t,r)&&!vB.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:fB,type:e,key:i,ref:o,props:a,_owner:gB.current}}tx.Fragment=mB;tx.jsx=sD;tx.jsxs=sD;GO.exports=tx;var s=GO.exports,aD={exports:{}},is={},iD={exports:{}},oD={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(k,D){var J=k.length;k.push(D);e:for(;0<J;){var W=J-1>>>1,Y=k[W];if(0<a(Y,D))k[W]=D,k[J]=Y,J=W;else break e}}function n(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var D=k[0],J=k.pop();if(J!==D){k[0]=J;e:for(var W=0,Y=k.length,V=Y>>>1;W<V;){var O=2*(W+1)-1,le=k[O],te=O+1,ce=k[te];if(0>a(le,J))te<Y&&0>a(ce,le)?(k[W]=ce,k[te]=J,W=te):(k[W]=le,k[O]=J,W=O);else if(te<Y&&0>a(ce,J))k[W]=ce,k[te]=J,W=te;else break e}}return D}function a(k,D){var J=k.sortIndex-D.sortIndex;return J!==0?J:k.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,m=3,f=!1,x=!1,g=!1,p=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(k){for(var D=n(u);D!==null;){if(D.callback===null)r(u);else if(D.startTime<=k)r(u),D.sortIndex=D.expirationTime,t(c,D);else break;D=n(u)}}function S(k){if(g=!1,w(k),!x)if(n(c)!==null)x=!0,U(j);else{var D=n(u);D!==null&&K(S,D.startTime-k)}}function j(k,D){x=!1,g&&(g=!1,v(_),_=-1),f=!0;var J=m;try{for(w(D),h=n(c);h!==null&&(!(h.expirationTime>D)||k&&!T());){var W=h.callback;if(typeof W=="function"){h.callback=null,m=h.priorityLevel;var Y=W(h.expirationTime<=D);D=e.unstable_now(),typeof Y=="function"?h.callback=Y:h===n(c)&&r(c),w(D)}else r(c);h=n(c)}if(h!==null)var V=!0;else{var O=n(u);O!==null&&K(S,O.startTime-D),V=!1}return V}finally{h=null,m=J,f=!1}}var N=!1,C=null,_=-1,A=5,P=-1;function T(){return!(e.unstable_now()-P<A)}function E(){if(C!==null){var k=e.unstable_now();P=k;var D=!0;try{D=C(!0,k)}finally{D?I():(N=!1,C=null)}}else N=!1}var I;if(typeof y=="function")I=function(){y(E)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,z=R.port2;R.port1.onmessage=E,I=function(){z.postMessage(null)}}else I=function(){p(E,0)};function U(k){C=k,N||(N=!0,I())}function K(k,D){_=p(function(){k(e.unstable_now())},D)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(k){k.callback=null},e.unstable_continueExecution=function(){x||f||(x=!0,U(j))},e.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<k?Math.floor(1e3/k):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(k){switch(m){case 1:case 2:case 3:var D=3;break;default:D=m}var J=m;m=D;try{return k()}finally{m=J}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(k,D){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var J=m;m=k;try{return D()}finally{m=J}},e.unstable_scheduleCallback=function(k,D,J){var W=e.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?W+J:W):J=W,k){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=J+Y,k={id:d++,callback:D,priorityLevel:k,startTime:J,expirationTime:Y,sortIndex:-1},J>W?(k.sortIndex=J,t(u,k),n(c)===null&&k===n(u)&&(g?(v(_),_=-1):g=!0,K(S,J-W))):(k.sortIndex=Y,t(c,k),x||f||(x=!0,U(j))),k},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(k){var D=m;return function(){var J=m;m=D;try{return k.apply(this,arguments)}finally{m=J}}}})(oD);iD.exports=oD;var xB=iD.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yB=b,as=xB;function be(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var lD=new Set,Qh={};function Yl(e,t){Cu(e,t),Cu(e+"Capture",t)}function Cu(e,t){for(Qh[e]=t,e=0;e<t.length;e++)lD.add(t[e])}var hi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rw=Object.prototype.hasOwnProperty,wB=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,k2={},T2={};function bB(e){return Rw.call(T2,e)?!0:Rw.call(k2,e)?!1:wB.test(e)?T2[e]=!0:(k2[e]=!0,!1)}function jB(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function NB(e,t,n,r){if(t===null||typeof t>"u"||jB(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function _r(e,t,n,r,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Zn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Zn[e]=new _r(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Zn[t]=new _r(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Zn[e]=new _r(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Zn[e]=new _r(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Zn[e]=new _r(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Zn[e]=new _r(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Zn[e]=new _r(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Zn[e]=new _r(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Zn[e]=new _r(e,5,!1,e.toLowerCase(),null,!1,!1)});var dN=/[\-:]([a-z])/g;function hN(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(dN,hN);Zn[t]=new _r(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(dN,hN);Zn[t]=new _r(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(dN,hN);Zn[t]=new _r(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Zn[e]=new _r(e,1,!1,e.toLowerCase(),null,!1,!1)});Zn.xlinkHref=new _r("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Zn[e]=new _r(e,1,!1,e.toLowerCase(),null,!0,!0)});function fN(e,t,n,r){var a=Zn.hasOwnProperty(t)?Zn[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(NB(t,n,a,r)&&(n=null),r||a===null?bB(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Ni=yB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Um=Symbol.for("react.element"),Oc=Symbol.for("react.portal"),Dc=Symbol.for("react.fragment"),mN=Symbol.for("react.strict_mode"),Lw=Symbol.for("react.profiler"),cD=Symbol.for("react.provider"),uD=Symbol.for("react.context"),pN=Symbol.for("react.forward_ref"),Fw=Symbol.for("react.suspense"),zw=Symbol.for("react.suspense_list"),gN=Symbol.for("react.memo"),Bi=Symbol.for("react.lazy"),dD=Symbol.for("react.offscreen"),O2=Symbol.iterator;function Jd(e){return e===null||typeof e!="object"?null:(e=O2&&e[O2]||e["@@iterator"],typeof e=="function"?e:null)}var ln=Object.assign,c0;function jh(e){if(c0===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);c0=t&&t[1]||""}return`
`+c0+e}var u0=!1;function d0(e,t){if(!e||u0)return"";u0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=r.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{u0=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?jh(e):""}function SB(e){switch(e.tag){case 5:return jh(e.type);case 16:return jh("Lazy");case 13:return jh("Suspense");case 19:return jh("SuspenseList");case 0:case 2:case 15:return e=d0(e.type,!1),e;case 11:return e=d0(e.type.render,!1),e;case 1:return e=d0(e.type,!0),e;default:return""}}function Bw(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Dc:return"Fragment";case Oc:return"Portal";case Lw:return"Profiler";case mN:return"StrictMode";case Fw:return"Suspense";case zw:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case uD:return(e.displayName||"Context")+".Consumer";case cD:return(e._context.displayName||"Context")+".Provider";case pN:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case gN:return t=e.displayName||null,t!==null?t:Bw(e.type)||"Memo";case Bi:t=e._payload,e=e._init;try{return Bw(e(t))}catch{}}return null}function _B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bw(t);case 8:return t===mN?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function No(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function hD(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function CB(e){var t=hD(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Wm(e){e._valueTracker||(e._valueTracker=CB(e))}function fD(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=hD(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function og(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function qw(e,t){var n=t.checked;return ln({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function D2(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=No(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function mD(e,t){t=t.checked,t!=null&&fN(e,"checked",t,!1)}function Vw(e,t){mD(e,t);var n=No(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Uw(e,t.type,n):t.hasOwnProperty("defaultValue")&&Uw(e,t.type,No(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function M2(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Uw(e,t,n){(t!=="number"||og(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Nh=Array.isArray;function Qc(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+No(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Ww(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(be(91));return ln({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function I2(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(be(92));if(Nh(n)){if(1<n.length)throw Error(be(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:No(n)}}function pD(e,t){var n=No(t.value),r=No(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function $2(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function gD(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hw(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?gD(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Hm,vD=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Hm=Hm||document.createElement("div"),Hm.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Hm.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Xh(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Th={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AB=["Webkit","ms","Moz","O"];Object.keys(Th).forEach(function(e){AB.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Th[t]=Th[e]})});function xD(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Th.hasOwnProperty(e)&&Th[e]?(""+t).trim():t+"px"}function yD(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=xD(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var PB=ln({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kw(e,t){if(t){if(PB[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(be(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(be(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(be(61))}if(t.style!=null&&typeof t.style!="object")throw Error(be(62))}}function Gw(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yw=null;function vN(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Qw=null,Xc=null,Jc=null;function R2(e){if(e=vm(e)){if(typeof Qw!="function")throw Error(be(280));var t=e.stateNode;t&&(t=ix(t),Qw(e.stateNode,e.type,t))}}function wD(e){Xc?Jc?Jc.push(e):Jc=[e]:Xc=e}function bD(){if(Xc){var e=Xc,t=Jc;if(Jc=Xc=null,R2(e),t)for(e=0;e<t.length;e++)R2(t[e])}}function jD(e,t){return e(t)}function ND(){}var h0=!1;function SD(e,t,n){if(h0)return e(t,n);h0=!0;try{return jD(e,t,n)}finally{h0=!1,(Xc!==null||Jc!==null)&&(ND(),bD())}}function Jh(e,t){var n=e.stateNode;if(n===null)return null;var r=ix(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(be(231,t,typeof n));return n}var Xw=!1;if(hi)try{var Zd={};Object.defineProperty(Zd,"passive",{get:function(){Xw=!0}}),window.addEventListener("test",Zd,Zd),window.removeEventListener("test",Zd,Zd)}catch{Xw=!1}function EB(e,t,n,r,a,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var Oh=!1,lg=null,cg=!1,Jw=null,kB={onError:function(e){Oh=!0,lg=e}};function TB(e,t,n,r,a,i,o,l,c){Oh=!1,lg=null,EB.apply(kB,arguments)}function OB(e,t,n,r,a,i,o,l,c){if(TB.apply(this,arguments),Oh){if(Oh){var u=lg;Oh=!1,lg=null}else throw Error(be(198));cg||(cg=!0,Jw=u)}}function Ql(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function _D(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function L2(e){if(Ql(e)!==e)throw Error(be(188))}function DB(e){var t=e.alternate;if(!t){if(t=Ql(e),t===null)throw Error(be(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return L2(a),e;if(i===r)return L2(a),t;i=i.sibling}throw Error(be(188))}if(n.return!==r.return)n=a,r=i;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o)throw Error(be(189))}}if(n.alternate!==r)throw Error(be(190))}if(n.tag!==3)throw Error(be(188));return n.stateNode.current===n?e:t}function CD(e){return e=DB(e),e!==null?AD(e):null}function AD(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=AD(e);if(t!==null)return t;e=e.sibling}return null}var PD=as.unstable_scheduleCallback,F2=as.unstable_cancelCallback,MB=as.unstable_shouldYield,IB=as.unstable_requestPaint,mn=as.unstable_now,$B=as.unstable_getCurrentPriorityLevel,xN=as.unstable_ImmediatePriority,ED=as.unstable_UserBlockingPriority,ug=as.unstable_NormalPriority,RB=as.unstable_LowPriority,kD=as.unstable_IdlePriority,nx=null,_a=null;function LB(e){if(_a&&typeof _a.onCommitFiberRoot=="function")try{_a.onCommitFiberRoot(nx,e,void 0,(e.current.flags&128)===128)}catch{}}var Ks=Math.clz32?Math.clz32:BB,FB=Math.log,zB=Math.LN2;function BB(e){return e>>>=0,e===0?32:31-(FB(e)/zB|0)|0}var Km=64,Gm=4194304;function Sh(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dg(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~a;l!==0?r=Sh(l):(i&=o,i!==0&&(r=Sh(i)))}else o=n&~a,o!==0?r=Sh(o):i!==0&&(r=Sh(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ks(t),a=1<<n,r|=e[n],t&=~a;return r}function qB(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function VB(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Ks(i),l=1<<o,c=a[o];c===-1?(!(l&n)||l&r)&&(a[o]=qB(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Zw(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function TD(){var e=Km;return Km<<=1,!(Km&4194240)&&(Km=64),e}function f0(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function pm(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ks(t),e[t]=n}function UB(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Ks(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}function yN(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ks(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var Tt=0;function OD(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var DD,wN,MD,ID,$D,eb=!1,Ym=[],co=null,uo=null,ho=null,Zh=new Map,ef=new Map,Ui=[],WB="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function z2(e,t){switch(e){case"focusin":case"focusout":co=null;break;case"dragenter":case"dragleave":uo=null;break;case"mouseover":case"mouseout":ho=null;break;case"pointerover":case"pointerout":Zh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ef.delete(t.pointerId)}}function eh(e,t,n,r,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},t!==null&&(t=vm(t),t!==null&&wN(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function HB(e,t,n,r,a){switch(t){case"focusin":return co=eh(co,e,t,n,r,a),!0;case"dragenter":return uo=eh(uo,e,t,n,r,a),!0;case"mouseover":return ho=eh(ho,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return Zh.set(i,eh(Zh.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,ef.set(i,eh(ef.get(i)||null,e,t,n,r,a)),!0}return!1}function RD(e){var t=il(e.target);if(t!==null){var n=Ql(t);if(n!==null){if(t=n.tag,t===13){if(t=_D(n),t!==null){e.blockedOn=t,$D(e.priority,function(){MD(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Up(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=tb(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Yw=r,n.target.dispatchEvent(r),Yw=null}else return t=vm(n),t!==null&&wN(t),e.blockedOn=n,!1;t.shift()}return!0}function B2(e,t,n){Up(e)&&n.delete(t)}function KB(){eb=!1,co!==null&&Up(co)&&(co=null),uo!==null&&Up(uo)&&(uo=null),ho!==null&&Up(ho)&&(ho=null),Zh.forEach(B2),ef.forEach(B2)}function th(e,t){e.blockedOn===t&&(e.blockedOn=null,eb||(eb=!0,as.unstable_scheduleCallback(as.unstable_NormalPriority,KB)))}function tf(e){function t(a){return th(a,e)}if(0<Ym.length){th(Ym[0],e);for(var n=1;n<Ym.length;n++){var r=Ym[n];r.blockedOn===e&&(r.blockedOn=null)}}for(co!==null&&th(co,e),uo!==null&&th(uo,e),ho!==null&&th(ho,e),Zh.forEach(t),ef.forEach(t),n=0;n<Ui.length;n++)r=Ui[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ui.length&&(n=Ui[0],n.blockedOn===null);)RD(n),n.blockedOn===null&&Ui.shift()}var Zc=Ni.ReactCurrentBatchConfig,hg=!0;function GB(e,t,n,r){var a=Tt,i=Zc.transition;Zc.transition=null;try{Tt=1,bN(e,t,n,r)}finally{Tt=a,Zc.transition=i}}function YB(e,t,n,r){var a=Tt,i=Zc.transition;Zc.transition=null;try{Tt=4,bN(e,t,n,r)}finally{Tt=a,Zc.transition=i}}function bN(e,t,n,r){if(hg){var a=tb(e,t,n,r);if(a===null)N0(e,t,r,fg,n),z2(e,r);else if(HB(a,e,t,n,r))r.stopPropagation();else if(z2(e,r),t&4&&-1<WB.indexOf(e)){for(;a!==null;){var i=vm(a);if(i!==null&&DD(i),i=tb(e,t,n,r),i===null&&N0(e,t,r,fg,n),i===a)break;a=i}a!==null&&r.stopPropagation()}else N0(e,t,r,null,n)}}var fg=null;function tb(e,t,n,r){if(fg=null,e=vN(r),e=il(e),e!==null)if(t=Ql(e),t===null)e=null;else if(n=t.tag,n===13){if(e=_D(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return fg=e,null}function LD(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($B()){case xN:return 1;case ED:return 4;case ug:case RB:return 16;case kD:return 536870912;default:return 16}default:return 16}}var so=null,jN=null,Wp=null;function FD(){if(Wp)return Wp;var e,t=jN,n=t.length,r,a="value"in so?so.value:so.textContent,i=a.length;for(e=0;e<n&&t[e]===a[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===a[i-r];r++);return Wp=a.slice(e,1<r?1-r:void 0)}function Hp(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Qm(){return!0}function q2(){return!1}function os(e){function t(n,r,a,i,o){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Qm:q2,this.isPropagationStopped=q2,this}return ln(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Qm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Qm)},persist:function(){},isPersistent:Qm}),t}var pd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},NN=os(pd),gm=ln({},pd,{view:0,detail:0}),QB=os(gm),m0,p0,nh,rx=ln({},gm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:SN,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==nh&&(nh&&e.type==="mousemove"?(m0=e.screenX-nh.screenX,p0=e.screenY-nh.screenY):p0=m0=0,nh=e),m0)},movementY:function(e){return"movementY"in e?e.movementY:p0}}),V2=os(rx),XB=ln({},rx,{dataTransfer:0}),JB=os(XB),ZB=ln({},gm,{relatedTarget:0}),g0=os(ZB),eq=ln({},pd,{animationName:0,elapsedTime:0,pseudoElement:0}),tq=os(eq),nq=ln({},pd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),rq=os(nq),sq=ln({},pd,{data:0}),U2=os(sq),aq={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iq={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oq={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lq(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=oq[e])?!!t[e]:!1}function SN(){return lq}var cq=ln({},gm,{key:function(e){if(e.key){var t=aq[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Hp(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?iq[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:SN,charCode:function(e){return e.type==="keypress"?Hp(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Hp(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),uq=os(cq),dq=ln({},rx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),W2=os(dq),hq=ln({},gm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:SN}),fq=os(hq),mq=ln({},pd,{propertyName:0,elapsedTime:0,pseudoElement:0}),pq=os(mq),gq=ln({},rx,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),vq=os(gq),xq=[9,13,27,32],_N=hi&&"CompositionEvent"in window,Dh=null;hi&&"documentMode"in document&&(Dh=document.documentMode);var yq=hi&&"TextEvent"in window&&!Dh,zD=hi&&(!_N||Dh&&8<Dh&&11>=Dh),H2=" ",K2=!1;function BD(e,t){switch(e){case"keyup":return xq.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qD(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Mc=!1;function wq(e,t){switch(e){case"compositionend":return qD(t);case"keypress":return t.which!==32?null:(K2=!0,H2);case"textInput":return e=t.data,e===H2&&K2?null:e;default:return null}}function bq(e,t){if(Mc)return e==="compositionend"||!_N&&BD(e,t)?(e=FD(),Wp=jN=so=null,Mc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zD&&t.locale!=="ko"?null:t.data;default:return null}}var jq={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function G2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!jq[e.type]:t==="textarea"}function VD(e,t,n,r){wD(r),t=mg(t,"onChange"),0<t.length&&(n=new NN("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Mh=null,nf=null;function Nq(e){eM(e,0)}function sx(e){var t=Rc(e);if(fD(t))return e}function Sq(e,t){if(e==="change")return t}var UD=!1;if(hi){var v0;if(hi){var x0="oninput"in document;if(!x0){var Y2=document.createElement("div");Y2.setAttribute("oninput","return;"),x0=typeof Y2.oninput=="function"}v0=x0}else v0=!1;UD=v0&&(!document.documentMode||9<document.documentMode)}function Q2(){Mh&&(Mh.detachEvent("onpropertychange",WD),nf=Mh=null)}function WD(e){if(e.propertyName==="value"&&sx(nf)){var t=[];VD(t,nf,e,vN(e)),SD(Nq,t)}}function _q(e,t,n){e==="focusin"?(Q2(),Mh=t,nf=n,Mh.attachEvent("onpropertychange",WD)):e==="focusout"&&Q2()}function Cq(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return sx(nf)}function Aq(e,t){if(e==="click")return sx(t)}function Pq(e,t){if(e==="input"||e==="change")return sx(t)}function Eq(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Qs=typeof Object.is=="function"?Object.is:Eq;function rf(e,t){if(Qs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Rw.call(t,a)||!Qs(e[a],t[a]))return!1}return!0}function X2(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function J2(e,t){var n=X2(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=X2(n)}}function HD(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?HD(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function KD(){for(var e=window,t=og();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=og(e.document)}return t}function CN(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function kq(e){var t=KD(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&HD(n.ownerDocument.documentElement,n)){if(r!==null&&CN(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=r.end===void 0?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=J2(n,i);var o=J2(n,r);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Tq=hi&&"documentMode"in document&&11>=document.documentMode,Ic=null,nb=null,Ih=null,rb=!1;function Z2(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;rb||Ic==null||Ic!==og(r)||(r=Ic,"selectionStart"in r&&CN(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ih&&rf(Ih,r)||(Ih=r,r=mg(nb,"onSelect"),0<r.length&&(t=new NN("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ic)))}function Xm(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var $c={animationend:Xm("Animation","AnimationEnd"),animationiteration:Xm("Animation","AnimationIteration"),animationstart:Xm("Animation","AnimationStart"),transitionend:Xm("Transition","TransitionEnd")},y0={},GD={};hi&&(GD=document.createElement("div").style,"AnimationEvent"in window||(delete $c.animationend.animation,delete $c.animationiteration.animation,delete $c.animationstart.animation),"TransitionEvent"in window||delete $c.transitionend.transition);function ax(e){if(y0[e])return y0[e];if(!$c[e])return e;var t=$c[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in GD)return y0[e]=t[n];return e}var YD=ax("animationend"),QD=ax("animationiteration"),XD=ax("animationstart"),JD=ax("transitionend"),ZD=new Map,eC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Eo(e,t){ZD.set(e,t),Yl(t,[e])}for(var w0=0;w0<eC.length;w0++){var b0=eC[w0],Oq=b0.toLowerCase(),Dq=b0[0].toUpperCase()+b0.slice(1);Eo(Oq,"on"+Dq)}Eo(YD,"onAnimationEnd");Eo(QD,"onAnimationIteration");Eo(XD,"onAnimationStart");Eo("dblclick","onDoubleClick");Eo("focusin","onFocus");Eo("focusout","onBlur");Eo(JD,"onTransitionEnd");Cu("onMouseEnter",["mouseout","mouseover"]);Cu("onMouseLeave",["mouseout","mouseover"]);Cu("onPointerEnter",["pointerout","pointerover"]);Cu("onPointerLeave",["pointerout","pointerover"]);Yl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Yl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Yl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Yl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Yl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Yl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _h="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mq=new Set("cancel close invalid load scroll toggle".split(" ").concat(_h));function tC(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,OB(r,t,void 0,e),e.currentTarget=null}function eM(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;tC(a,l,u),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;tC(a,l,u),i=c}}}if(cg)throw e=Jw,cg=!1,Jw=null,e}function Gt(e,t){var n=t[lb];n===void 0&&(n=t[lb]=new Set);var r=e+"__bubble";n.has(r)||(tM(t,e,2,!1),n.add(r))}function j0(e,t,n){var r=0;t&&(r|=4),tM(n,e,r,t)}var Jm="_reactListening"+Math.random().toString(36).slice(2);function sf(e){if(!e[Jm]){e[Jm]=!0,lD.forEach(function(n){n!=="selectionchange"&&(Mq.has(n)||j0(n,!1,e),j0(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Jm]||(t[Jm]=!0,j0("selectionchange",!1,t))}}function tM(e,t,n,r){switch(LD(t)){case 1:var a=GB;break;case 4:a=YB;break;default:a=bN}n=a.bind(null,t,n,e),a=void 0,!Xw||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function N0(e,t,n,r,a){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=il(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}SD(function(){var u=i,d=vN(n),h=[];e:{var m=ZD.get(e);if(m!==void 0){var f=NN,x=e;switch(e){case"keypress":if(Hp(n)===0)break e;case"keydown":case"keyup":f=uq;break;case"focusin":x="focus",f=g0;break;case"focusout":x="blur",f=g0;break;case"beforeblur":case"afterblur":f=g0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=V2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=JB;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=fq;break;case YD:case QD:case XD:f=tq;break;case JD:f=pq;break;case"scroll":f=QB;break;case"wheel":f=vq;break;case"copy":case"cut":case"paste":f=rq;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=W2}var g=(t&4)!==0,p=!g&&e==="scroll",v=g?m!==null?m+"Capture":null:m;g=[];for(var y=u,w;y!==null;){w=y;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,v!==null&&(S=Jh(y,v),S!=null&&g.push(af(y,S,w)))),p)break;y=y.return}0<g.length&&(m=new f(m,x,null,n,d),h.push({event:m,listeners:g}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",m&&n!==Yw&&(x=n.relatedTarget||n.fromElement)&&(il(x)||x[fi]))break e;if((f||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,f?(x=n.relatedTarget||n.toElement,f=u,x=x?il(x):null,x!==null&&(p=Ql(x),x!==p||x.tag!==5&&x.tag!==6)&&(x=null)):(f=null,x=u),f!==x)){if(g=V2,S="onMouseLeave",v="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(g=W2,S="onPointerLeave",v="onPointerEnter",y="pointer"),p=f==null?m:Rc(f),w=x==null?m:Rc(x),m=new g(S,y+"leave",f,n,d),m.target=p,m.relatedTarget=w,S=null,il(d)===u&&(g=new g(v,y+"enter",x,n,d),g.target=w,g.relatedTarget=p,S=g),p=S,f&&x)t:{for(g=f,v=x,y=0,w=g;w;w=fc(w))y++;for(w=0,S=v;S;S=fc(S))w++;for(;0<y-w;)g=fc(g),y--;for(;0<w-y;)v=fc(v),w--;for(;y--;){if(g===v||v!==null&&g===v.alternate)break t;g=fc(g),v=fc(v)}g=null}else g=null;f!==null&&nC(h,m,f,g,!1),x!==null&&p!==null&&nC(h,p,x,g,!0)}}e:{if(m=u?Rc(u):window,f=m.nodeName&&m.nodeName.toLowerCase(),f==="select"||f==="input"&&m.type==="file")var j=Sq;else if(G2(m))if(UD)j=Pq;else{j=Cq;var N=_q}else(f=m.nodeName)&&f.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(j=Aq);if(j&&(j=j(e,u))){VD(h,j,n,d);break e}N&&N(e,m,u),e==="focusout"&&(N=m._wrapperState)&&N.controlled&&m.type==="number"&&Uw(m,"number",m.value)}switch(N=u?Rc(u):window,e){case"focusin":(G2(N)||N.contentEditable==="true")&&(Ic=N,nb=u,Ih=null);break;case"focusout":Ih=nb=Ic=null;break;case"mousedown":rb=!0;break;case"contextmenu":case"mouseup":case"dragend":rb=!1,Z2(h,n,d);break;case"selectionchange":if(Tq)break;case"keydown":case"keyup":Z2(h,n,d)}var C;if(_N)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Mc?BD(e,n)&&(_="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(zD&&n.locale!=="ko"&&(Mc||_!=="onCompositionStart"?_==="onCompositionEnd"&&Mc&&(C=FD()):(so=d,jN="value"in so?so.value:so.textContent,Mc=!0)),N=mg(u,_),0<N.length&&(_=new U2(_,e,null,n,d),h.push({event:_,listeners:N}),C?_.data=C:(C=qD(n),C!==null&&(_.data=C)))),(C=yq?wq(e,n):bq(e,n))&&(u=mg(u,"onBeforeInput"),0<u.length&&(d=new U2("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=C))}eM(h,t)})}function af(e,t,n){return{instance:e,listener:t,currentTarget:n}}function mg(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Jh(e,n),i!=null&&r.unshift(af(e,i,a)),i=Jh(e,t),i!=null&&r.push(af(e,i,a))),e=e.return}return r}function fc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function nC(e,t,n,r,a){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,a?(c=Jh(n,i),c!=null&&o.unshift(af(n,c,l))):a||(c=Jh(n,i),c!=null&&o.push(af(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Iq=/\r\n?/g,$q=/\u0000|\uFFFD/g;function rC(e){return(typeof e=="string"?e:""+e).replace(Iq,`
`).replace($q,"")}function Zm(e,t,n){if(t=rC(t),rC(e)!==t&&n)throw Error(be(425))}function pg(){}var sb=null,ab=null;function ib(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ob=typeof setTimeout=="function"?setTimeout:void 0,Rq=typeof clearTimeout=="function"?clearTimeout:void 0,sC=typeof Promise=="function"?Promise:void 0,Lq=typeof queueMicrotask=="function"?queueMicrotask:typeof sC<"u"?function(e){return sC.resolve(null).then(e).catch(Fq)}:ob;function Fq(e){setTimeout(function(){throw e})}function S0(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),tf(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);tf(t)}function fo(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function aC(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var gd=Math.random().toString(36).slice(2),ga="__reactFiber$"+gd,of="__reactProps$"+gd,fi="__reactContainer$"+gd,lb="__reactEvents$"+gd,zq="__reactListeners$"+gd,Bq="__reactHandles$"+gd;function il(e){var t=e[ga];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[ga]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=aC(e);e!==null;){if(n=e[ga])return n;e=aC(e)}return t}e=n,n=e.parentNode}return null}function vm(e){return e=e[ga]||e[fi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Rc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(be(33))}function ix(e){return e[of]||null}var cb=[],Lc=-1;function ko(e){return{current:e}}function Jt(e){0>Lc||(e.current=cb[Lc],cb[Lc]=null,Lc--)}function Ut(e,t){Lc++,cb[Lc]=e.current,e.current=t}var So={},hr=ko(So),Lr=ko(!1),kl=So;function Au(e,t){var n=e.type.contextTypes;if(!n)return So;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in n)a[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Fr(e){return e=e.childContextTypes,e!=null}function gg(){Jt(Lr),Jt(hr)}function iC(e,t,n){if(hr.current!==So)throw Error(be(168));Ut(hr,t),Ut(Lr,n)}function nM(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(be(108,_B(e)||"Unknown",a));return ln({},n,r)}function vg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||So,kl=hr.current,Ut(hr,e),Ut(Lr,Lr.current),!0}function oC(e,t,n){var r=e.stateNode;if(!r)throw Error(be(169));n?(e=nM(e,t,kl),r.__reactInternalMemoizedMergedChildContext=e,Jt(Lr),Jt(hr),Ut(hr,e)):Jt(Lr),Ut(Lr,n)}var Xa=null,ox=!1,_0=!1;function rM(e){Xa===null?Xa=[e]:Xa.push(e)}function qq(e){ox=!0,rM(e)}function To(){if(!_0&&Xa!==null){_0=!0;var e=0,t=Tt;try{var n=Xa;for(Tt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Xa=null,ox=!1}catch(a){throw Xa!==null&&(Xa=Xa.slice(e+1)),PD(xN,To),a}finally{Tt=t,_0=!1}}return null}var Fc=[],zc=0,xg=null,yg=0,fs=[],ms=0,Tl=null,ni=1,ri="";function Qo(e,t){Fc[zc++]=yg,Fc[zc++]=xg,xg=e,yg=t}function sM(e,t,n){fs[ms++]=ni,fs[ms++]=ri,fs[ms++]=Tl,Tl=e;var r=ni;e=ri;var a=32-Ks(r)-1;r&=~(1<<a),n+=1;var i=32-Ks(t)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,ni=1<<32-Ks(t)+a|n<<a|r,ri=i+e}else ni=1<<i|n<<a|r,ri=e}function AN(e){e.return!==null&&(Qo(e,1),sM(e,1,0))}function PN(e){for(;e===xg;)xg=Fc[--zc],Fc[zc]=null,yg=Fc[--zc],Fc[zc]=null;for(;e===Tl;)Tl=fs[--ms],fs[ms]=null,ri=fs[--ms],fs[ms]=null,ni=fs[--ms],fs[ms]=null}var ns=null,es=null,nn=!1,Vs=null;function aM(e,t){var n=xs(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function lC(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ns=e,es=fo(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ns=e,es=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Tl!==null?{id:ni,overflow:ri}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=xs(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ns=e,es=null,!0):!1;default:return!1}}function ub(e){return(e.mode&1)!==0&&(e.flags&128)===0}function db(e){if(nn){var t=es;if(t){var n=t;if(!lC(e,t)){if(ub(e))throw Error(be(418));t=fo(n.nextSibling);var r=ns;t&&lC(e,t)?aM(r,n):(e.flags=e.flags&-4097|2,nn=!1,ns=e)}}else{if(ub(e))throw Error(be(418));e.flags=e.flags&-4097|2,nn=!1,ns=e}}}function cC(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ns=e}function ep(e){if(e!==ns)return!1;if(!nn)return cC(e),nn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ib(e.type,e.memoizedProps)),t&&(t=es)){if(ub(e))throw iM(),Error(be(418));for(;t;)aM(e,t),t=fo(t.nextSibling)}if(cC(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(be(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){es=fo(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}es=null}}else es=ns?fo(e.stateNode.nextSibling):null;return!0}function iM(){for(var e=es;e;)e=fo(e.nextSibling)}function Pu(){es=ns=null,nn=!1}function EN(e){Vs===null?Vs=[e]:Vs.push(e)}var Vq=Ni.ReactCurrentBatchConfig;function rh(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(be(309));var r=n.stateNode}if(!r)throw Error(be(147,e));var a=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(be(284));if(!n._owner)throw Error(be(290,e))}return e}function tp(e,t){throw e=Object.prototype.toString.call(t),Error(be(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function uC(e){var t=e._init;return t(e._payload)}function oM(e){function t(v,y){if(e){var w=v.deletions;w===null?(v.deletions=[y],v.flags|=16):w.push(y)}}function n(v,y){if(!e)return null;for(;y!==null;)t(v,y),y=y.sibling;return null}function r(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function a(v,y){return v=vo(v,y),v.index=0,v.sibling=null,v}function i(v,y,w){return v.index=w,e?(w=v.alternate,w!==null?(w=w.index,w<y?(v.flags|=2,y):w):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,y,w,S){return y===null||y.tag!==6?(y=O0(w,v.mode,S),y.return=v,y):(y=a(y,w),y.return=v,y)}function c(v,y,w,S){var j=w.type;return j===Dc?d(v,y,w.props.children,S,w.key):y!==null&&(y.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Bi&&uC(j)===y.type)?(S=a(y,w.props),S.ref=rh(v,y,w),S.return=v,S):(S=Zp(w.type,w.key,w.props,null,v.mode,S),S.ref=rh(v,y,w),S.return=v,S)}function u(v,y,w,S){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=D0(w,v.mode,S),y.return=v,y):(y=a(y,w.children||[]),y.return=v,y)}function d(v,y,w,S,j){return y===null||y.tag!==7?(y=Cl(w,v.mode,S,j),y.return=v,y):(y=a(y,w),y.return=v,y)}function h(v,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=O0(""+y,v.mode,w),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Um:return w=Zp(y.type,y.key,y.props,null,v.mode,w),w.ref=rh(v,null,y),w.return=v,w;case Oc:return y=D0(y,v.mode,w),y.return=v,y;case Bi:var S=y._init;return h(v,S(y._payload),w)}if(Nh(y)||Jd(y))return y=Cl(y,v.mode,w,null),y.return=v,y;tp(v,y)}return null}function m(v,y,w,S){var j=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return j!==null?null:l(v,y,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Um:return w.key===j?c(v,y,w,S):null;case Oc:return w.key===j?u(v,y,w,S):null;case Bi:return j=w._init,m(v,y,j(w._payload),S)}if(Nh(w)||Jd(w))return j!==null?null:d(v,y,w,S,null);tp(v,w)}return null}function f(v,y,w,S,j){if(typeof S=="string"&&S!==""||typeof S=="number")return v=v.get(w)||null,l(y,v,""+S,j);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Um:return v=v.get(S.key===null?w:S.key)||null,c(y,v,S,j);case Oc:return v=v.get(S.key===null?w:S.key)||null,u(y,v,S,j);case Bi:var N=S._init;return f(v,y,w,N(S._payload),j)}if(Nh(S)||Jd(S))return v=v.get(w)||null,d(y,v,S,j,null);tp(y,S)}return null}function x(v,y,w,S){for(var j=null,N=null,C=y,_=y=0,A=null;C!==null&&_<w.length;_++){C.index>_?(A=C,C=null):A=C.sibling;var P=m(v,C,w[_],S);if(P===null){C===null&&(C=A);break}e&&C&&P.alternate===null&&t(v,C),y=i(P,y,_),N===null?j=P:N.sibling=P,N=P,C=A}if(_===w.length)return n(v,C),nn&&Qo(v,_),j;if(C===null){for(;_<w.length;_++)C=h(v,w[_],S),C!==null&&(y=i(C,y,_),N===null?j=C:N.sibling=C,N=C);return nn&&Qo(v,_),j}for(C=r(v,C);_<w.length;_++)A=f(C,v,_,w[_],S),A!==null&&(e&&A.alternate!==null&&C.delete(A.key===null?_:A.key),y=i(A,y,_),N===null?j=A:N.sibling=A,N=A);return e&&C.forEach(function(T){return t(v,T)}),nn&&Qo(v,_),j}function g(v,y,w,S){var j=Jd(w);if(typeof j!="function")throw Error(be(150));if(w=j.call(w),w==null)throw Error(be(151));for(var N=j=null,C=y,_=y=0,A=null,P=w.next();C!==null&&!P.done;_++,P=w.next()){C.index>_?(A=C,C=null):A=C.sibling;var T=m(v,C,P.value,S);if(T===null){C===null&&(C=A);break}e&&C&&T.alternate===null&&t(v,C),y=i(T,y,_),N===null?j=T:N.sibling=T,N=T,C=A}if(P.done)return n(v,C),nn&&Qo(v,_),j;if(C===null){for(;!P.done;_++,P=w.next())P=h(v,P.value,S),P!==null&&(y=i(P,y,_),N===null?j=P:N.sibling=P,N=P);return nn&&Qo(v,_),j}for(C=r(v,C);!P.done;_++,P=w.next())P=f(C,v,_,P.value,S),P!==null&&(e&&P.alternate!==null&&C.delete(P.key===null?_:P.key),y=i(P,y,_),N===null?j=P:N.sibling=P,N=P);return e&&C.forEach(function(E){return t(v,E)}),nn&&Qo(v,_),j}function p(v,y,w,S){if(typeof w=="object"&&w!==null&&w.type===Dc&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Um:e:{for(var j=w.key,N=y;N!==null;){if(N.key===j){if(j=w.type,j===Dc){if(N.tag===7){n(v,N.sibling),y=a(N,w.props.children),y.return=v,v=y;break e}}else if(N.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Bi&&uC(j)===N.type){n(v,N.sibling),y=a(N,w.props),y.ref=rh(v,N,w),y.return=v,v=y;break e}n(v,N);break}else t(v,N);N=N.sibling}w.type===Dc?(y=Cl(w.props.children,v.mode,S,w.key),y.return=v,v=y):(S=Zp(w.type,w.key,w.props,null,v.mode,S),S.ref=rh(v,y,w),S.return=v,v=S)}return o(v);case Oc:e:{for(N=w.key;y!==null;){if(y.key===N)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(v,y.sibling),y=a(y,w.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else t(v,y);y=y.sibling}y=D0(w,v.mode,S),y.return=v,v=y}return o(v);case Bi:return N=w._init,p(v,y,N(w._payload),S)}if(Nh(w))return x(v,y,w,S);if(Jd(w))return g(v,y,w,S);tp(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(v,y.sibling),y=a(y,w),y.return=v,v=y):(n(v,y),y=O0(w,v.mode,S),y.return=v,v=y),o(v)):n(v,y)}return p}var Eu=oM(!0),lM=oM(!1),wg=ko(null),bg=null,Bc=null,kN=null;function TN(){kN=Bc=bg=null}function ON(e){var t=wg.current;Jt(wg),e._currentValue=t}function hb(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function eu(e,t){bg=e,kN=Bc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&($r=!0),e.firstContext=null)}function Ns(e){var t=e._currentValue;if(kN!==e)if(e={context:e,memoizedValue:t,next:null},Bc===null){if(bg===null)throw Error(be(308));Bc=e,bg.dependencies={lanes:0,firstContext:e}}else Bc=Bc.next=e;return t}var ol=null;function DN(e){ol===null?ol=[e]:ol.push(e)}function cM(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,DN(t)):(n.next=a.next,a.next=n),t.interleaved=n,mi(e,r)}function mi(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var qi=!1;function MN(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uM(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function oi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function mo(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,bt&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,mi(e,n)}return a=r.interleaved,a===null?(t.next=t,DN(r)):(t.next=a.next,a.next=t),r.interleaved=t,mi(e,n)}function Kp(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,yN(e,n)}}function dC(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?a=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?a=i=t:i=i.next=t}else a=i=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function jg(e,t,n,r){var a=e.updateQueue;qi=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=a.baseState;o=0,d=u=c=null,l=i;do{var m=l.lane,f=l.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=e,g=l;switch(m=t,f=n,g.tag){case 1:if(x=g.payload,typeof x=="function"){h=x.call(f,h,m);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=g.payload,m=typeof x=="function"?x.call(f,h,m):x,m==null)break e;h=ln({},h,m);break e;case 2:qi=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=a.effects,m===null?a.effects=[l]:m.push(l))}else f={eventTime:f,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=f,c=h):d=d.next=f,o|=m;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;m=l,l=m.next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}while(!0);if(d===null&&(c=h),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Dl|=o,e.lanes=o,e.memoizedState=h}}function hC(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(be(191,a));a.call(r)}}}var xm={},Ca=ko(xm),lf=ko(xm),cf=ko(xm);function ll(e){if(e===xm)throw Error(be(174));return e}function IN(e,t){switch(Ut(cf,t),Ut(lf,e),Ut(Ca,xm),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Hw(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Hw(t,e)}Jt(Ca),Ut(Ca,t)}function ku(){Jt(Ca),Jt(lf),Jt(cf)}function dM(e){ll(cf.current);var t=ll(Ca.current),n=Hw(t,e.type);t!==n&&(Ut(lf,e),Ut(Ca,n))}function $N(e){lf.current===e&&(Jt(Ca),Jt(lf))}var sn=ko(0);function Ng(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var C0=[];function RN(){for(var e=0;e<C0.length;e++)C0[e]._workInProgressVersionPrimary=null;C0.length=0}var Gp=Ni.ReactCurrentDispatcher,A0=Ni.ReactCurrentBatchConfig,Ol=0,an=null,kn=null,Vn=null,Sg=!1,$h=!1,uf=0,Uq=0;function nr(){throw Error(be(321))}function LN(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Qs(e[n],t[n]))return!1;return!0}function FN(e,t,n,r,a,i){if(Ol=i,an=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Gp.current=e===null||e.memoizedState===null?Gq:Yq,e=n(r,a),$h){i=0;do{if($h=!1,uf=0,25<=i)throw Error(be(301));i+=1,Vn=kn=null,t.updateQueue=null,Gp.current=Qq,e=n(r,a)}while($h)}if(Gp.current=_g,t=kn!==null&&kn.next!==null,Ol=0,Vn=kn=an=null,Sg=!1,t)throw Error(be(300));return e}function zN(){var e=uf!==0;return uf=0,e}function da(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vn===null?an.memoizedState=Vn=e:Vn=Vn.next=e,Vn}function Ss(){if(kn===null){var e=an.alternate;e=e!==null?e.memoizedState:null}else e=kn.next;var t=Vn===null?an.memoizedState:Vn.next;if(t!==null)Vn=t,kn=e;else{if(e===null)throw Error(be(310));kn=e,e={memoizedState:kn.memoizedState,baseState:kn.baseState,baseQueue:kn.baseQueue,queue:kn.queue,next:null},Vn===null?an.memoizedState=Vn=e:Vn=Vn.next=e}return Vn}function df(e,t){return typeof t=="function"?t(e):t}function P0(e){var t=Ss(),n=t.queue;if(n===null)throw Error(be(311));n.lastRenderedReducer=e;var r=kn,a=r.baseQueue,i=n.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}r.baseQueue=a=i,n.pending=null}if(a!==null){i=a.next,r=r.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((Ol&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=r):c=c.next=h,an.lanes|=d,Dl|=d}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=l,Qs(r,t.memoizedState)||($r=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do i=a.lane,an.lanes|=i,Dl|=i,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function E0(e){var t=Ss(),n=t.queue;if(n===null)throw Error(be(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Qs(i,t.memoizedState)||($r=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function hM(){}function fM(e,t){var n=an,r=Ss(),a=t(),i=!Qs(r.memoizedState,a);if(i&&(r.memoizedState=a,$r=!0),r=r.queue,BN(gM.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Vn!==null&&Vn.memoizedState.tag&1){if(n.flags|=2048,hf(9,pM.bind(null,n,r,a,t),void 0,null),Hn===null)throw Error(be(349));Ol&30||mM(n,t,a)}return a}function mM(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=an.updateQueue,t===null?(t={lastEffect:null,stores:null},an.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function pM(e,t,n,r){t.value=n,t.getSnapshot=r,vM(t)&&xM(e)}function gM(e,t,n){return n(function(){vM(t)&&xM(e)})}function vM(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Qs(e,n)}catch{return!0}}function xM(e){var t=mi(e,1);t!==null&&Gs(t,e,1,-1)}function fC(e){var t=da();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:df,lastRenderedState:e},t.queue=e,e=e.dispatch=Kq.bind(null,an,e),[t.memoizedState,e]}function hf(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=an.updateQueue,t===null?(t={lastEffect:null,stores:null},an.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function yM(){return Ss().memoizedState}function Yp(e,t,n,r){var a=da();an.flags|=e,a.memoizedState=hf(1|t,n,void 0,r===void 0?null:r)}function lx(e,t,n,r){var a=Ss();r=r===void 0?null:r;var i=void 0;if(kn!==null){var o=kn.memoizedState;if(i=o.destroy,r!==null&&LN(r,o.deps)){a.memoizedState=hf(t,n,i,r);return}}an.flags|=e,a.memoizedState=hf(1|t,n,i,r)}function mC(e,t){return Yp(8390656,8,e,t)}function BN(e,t){return lx(2048,8,e,t)}function wM(e,t){return lx(4,2,e,t)}function bM(e,t){return lx(4,4,e,t)}function jM(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function NM(e,t,n){return n=n!=null?n.concat([e]):null,lx(4,4,jM.bind(null,t,e),n)}function qN(){}function SM(e,t){var n=Ss();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&LN(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function _M(e,t){var n=Ss();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&LN(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function CM(e,t,n){return Ol&21?(Qs(n,t)||(n=TD(),an.lanes|=n,Dl|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,$r=!0),e.memoizedState=n)}function Wq(e,t){var n=Tt;Tt=n!==0&&4>n?n:4,e(!0);var r=A0.transition;A0.transition={};try{e(!1),t()}finally{Tt=n,A0.transition=r}}function AM(){return Ss().memoizedState}function Hq(e,t,n){var r=go(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},PM(e))EM(t,n);else if(n=cM(e,t,n,r),n!==null){var a=jr();Gs(n,e,r,a),kM(n,t,r)}}function Kq(e,t,n){var r=go(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(PM(e))EM(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(a.hasEagerState=!0,a.eagerState=l,Qs(l,o)){var c=t.interleaved;c===null?(a.next=a,DN(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}n=cM(e,t,a,r),n!==null&&(a=jr(),Gs(n,e,r,a),kM(n,t,r))}}function PM(e){var t=e.alternate;return e===an||t!==null&&t===an}function EM(e,t){$h=Sg=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function kM(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,yN(e,n)}}var _g={readContext:Ns,useCallback:nr,useContext:nr,useEffect:nr,useImperativeHandle:nr,useInsertionEffect:nr,useLayoutEffect:nr,useMemo:nr,useReducer:nr,useRef:nr,useState:nr,useDebugValue:nr,useDeferredValue:nr,useTransition:nr,useMutableSource:nr,useSyncExternalStore:nr,useId:nr,unstable_isNewReconciler:!1},Gq={readContext:Ns,useCallback:function(e,t){return da().memoizedState=[e,t===void 0?null:t],e},useContext:Ns,useEffect:mC,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Yp(4194308,4,jM.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Yp(4194308,4,e,t)},useInsertionEffect:function(e,t){return Yp(4,2,e,t)},useMemo:function(e,t){var n=da();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=da();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Hq.bind(null,an,e),[r.memoizedState,e]},useRef:function(e){var t=da();return e={current:e},t.memoizedState=e},useState:fC,useDebugValue:qN,useDeferredValue:function(e){return da().memoizedState=e},useTransition:function(){var e=fC(!1),t=e[0];return e=Wq.bind(null,e[1]),da().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=an,a=da();if(nn){if(n===void 0)throw Error(be(407));n=n()}else{if(n=t(),Hn===null)throw Error(be(349));Ol&30||mM(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,mC(gM.bind(null,r,i,e),[e]),r.flags|=2048,hf(9,pM.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=da(),t=Hn.identifierPrefix;if(nn){var n=ri,r=ni;n=(r&~(1<<32-Ks(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=uf++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Uq++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Yq={readContext:Ns,useCallback:SM,useContext:Ns,useEffect:BN,useImperativeHandle:NM,useInsertionEffect:wM,useLayoutEffect:bM,useMemo:_M,useReducer:P0,useRef:yM,useState:function(){return P0(df)},useDebugValue:qN,useDeferredValue:function(e){var t=Ss();return CM(t,kn.memoizedState,e)},useTransition:function(){var e=P0(df)[0],t=Ss().memoizedState;return[e,t]},useMutableSource:hM,useSyncExternalStore:fM,useId:AM,unstable_isNewReconciler:!1},Qq={readContext:Ns,useCallback:SM,useContext:Ns,useEffect:BN,useImperativeHandle:NM,useInsertionEffect:wM,useLayoutEffect:bM,useMemo:_M,useReducer:E0,useRef:yM,useState:function(){return E0(df)},useDebugValue:qN,useDeferredValue:function(e){var t=Ss();return kn===null?t.memoizedState=e:CM(t,kn.memoizedState,e)},useTransition:function(){var e=E0(df)[0],t=Ss().memoizedState;return[e,t]},useMutableSource:hM,useSyncExternalStore:fM,useId:AM,unstable_isNewReconciler:!1};function Rs(e,t){if(e&&e.defaultProps){t=ln({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function fb(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ln({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var cx={isMounted:function(e){return(e=e._reactInternals)?Ql(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=jr(),a=go(e),i=oi(r,a);i.payload=t,n!=null&&(i.callback=n),t=mo(e,i,a),t!==null&&(Gs(t,e,a,r),Kp(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=jr(),a=go(e),i=oi(r,a);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=mo(e,i,a),t!==null&&(Gs(t,e,a,r),Kp(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=jr(),r=go(e),a=oi(n,r);a.tag=2,t!=null&&(a.callback=t),t=mo(e,a,r),t!==null&&(Gs(t,e,r,n),Kp(t,e,r))}};function pC(e,t,n,r,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!rf(n,r)||!rf(a,i):!0}function TM(e,t,n){var r=!1,a=So,i=t.contextType;return typeof i=="object"&&i!==null?i=Ns(i):(a=Fr(t)?kl:hr.current,r=t.contextTypes,i=(r=r!=null)?Au(e,a):So),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=cx,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function gC(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&cx.enqueueReplaceState(t,t.state,null)}function mb(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},MN(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Ns(i):(i=Fr(t)?kl:hr.current,a.context=Au(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(fb(e,t,i,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&cx.enqueueReplaceState(a,a.state,null),jg(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Tu(e,t){try{var n="",r=t;do n+=SB(r),r=r.return;while(r);var a=n}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function k0(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function pb(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Xq=typeof WeakMap=="function"?WeakMap:Map;function OM(e,t,n){n=oi(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ag||(Ag=!0,_b=r),pb(e,t)},n}function DM(e,t,n){n=oi(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){pb(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){pb(e,t),typeof r!="function"&&(po===null?po=new Set([this]):po.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function vC(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Xq;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=dV.bind(null,e,t,n),t.then(e,e))}function xC(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function yC(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=oi(-1,1),t.tag=2,mo(n,t,1))),n.lanes|=1),e)}var Jq=Ni.ReactCurrentOwner,$r=!1;function vr(e,t,n,r){t.child=e===null?lM(t,null,n,r):Eu(t,e.child,n,r)}function wC(e,t,n,r,a){n=n.render;var i=t.ref;return eu(t,a),r=FN(e,t,n,r,i,a),n=zN(),e!==null&&!$r?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,pi(e,t,a)):(nn&&n&&AN(t),t.flags|=1,vr(e,t,r,a),t.child)}function bC(e,t,n,r,a){if(e===null){var i=n.type;return typeof i=="function"&&!QN(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,MM(e,t,i,r,a)):(e=Zp(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:rf,n(o,r)&&e.ref===t.ref)return pi(e,t,a)}return t.flags|=1,e=vo(i,r),e.ref=t.ref,e.return=t,t.child=e}function MM(e,t,n,r,a){if(e!==null){var i=e.memoizedProps;if(rf(i,r)&&e.ref===t.ref)if($r=!1,t.pendingProps=r=i,(e.lanes&a)!==0)e.flags&131072&&($r=!0);else return t.lanes=e.lanes,pi(e,t,a)}return gb(e,t,n,r,a)}function IM(e,t,n){var r=t.pendingProps,a=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ut(Vc,Yr),Yr|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ut(Vc,Yr),Yr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ut(Vc,Yr),Yr|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ut(Vc,Yr),Yr|=r;return vr(e,t,a,n),t.child}function $M(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function gb(e,t,n,r,a){var i=Fr(n)?kl:hr.current;return i=Au(t,i),eu(t,a),n=FN(e,t,n,r,i,a),r=zN(),e!==null&&!$r?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,pi(e,t,a)):(nn&&r&&AN(t),t.flags|=1,vr(e,t,n,a),t.child)}function jC(e,t,n,r,a){if(Fr(n)){var i=!0;vg(t)}else i=!1;if(eu(t,a),t.stateNode===null)Qp(e,t),TM(t,n,r),mb(t,n,r,a),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ns(u):(u=Fr(n)?kl:hr.current,u=Au(t,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&gC(t,o,r,u),qi=!1;var m=t.memoizedState;o.state=m,jg(t,r,o,a),c=t.memoizedState,l!==r||m!==c||Lr.current||qi?(typeof d=="function"&&(fb(t,n,d,r),c=t.memoizedState),(l=qi||pC(t,n,l,r,m,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,uM(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Rs(t.type,l),o.props=u,h=t.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ns(c):(c=Fr(n)?kl:hr.current,c=Au(t,c));var f=n.getDerivedStateFromProps;(d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||m!==c)&&gC(t,o,r,c),qi=!1,m=t.memoizedState,o.state=m,jg(t,r,o,a);var x=t.memoizedState;l!==h||m!==x||Lr.current||qi?(typeof f=="function"&&(fb(t,n,f,r),x=t.memoizedState),(u=qi||pC(t,n,u,r,m,x,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=x),o.props=r,o.state=x,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return vb(e,t,n,r,i,a)}function vb(e,t,n,r,a,i){$M(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return a&&oC(t,n,!1),pi(e,t,i);r=t.stateNode,Jq.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Eu(t,e.child,null,i),t.child=Eu(t,null,l,i)):vr(e,t,l,i),t.memoizedState=r.state,a&&oC(t,n,!0),t.child}function RM(e){var t=e.stateNode;t.pendingContext?iC(e,t.pendingContext,t.pendingContext!==t.context):t.context&&iC(e,t.context,!1),IN(e,t.containerInfo)}function NC(e,t,n,r,a){return Pu(),EN(a),t.flags|=256,vr(e,t,n,r),t.child}var xb={dehydrated:null,treeContext:null,retryLane:0};function yb(e){return{baseLanes:e,cachePool:null,transitions:null}}function LM(e,t,n){var r=t.pendingProps,a=sn.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Ut(sn,a&1),e===null)return db(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=hx(o,r,0,null),e=Cl(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=yb(n),t.memoizedState=xb,e):VN(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return Zq(e,t,o,r,l,a,n);if(i){i=r.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=vo(a,c),r.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=vo(l,i):(i=Cl(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?yb(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=xb,r}return i=e.child,e=i.sibling,r=vo(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function VN(e,t){return t=hx({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function np(e,t,n,r){return r!==null&&EN(r),Eu(t,e.child,null,n),e=VN(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Zq(e,t,n,r,a,i,o){if(n)return t.flags&256?(t.flags&=-257,r=k0(Error(be(422))),np(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=hx({mode:"visible",children:r.children},a,0,null),i=Cl(i,a,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Eu(t,e.child,null,o),t.child.memoizedState=yb(o),t.memoizedState=xb,i);if(!(t.mode&1))return np(e,t,o,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(be(419)),r=k0(i,r,void 0),np(e,t,o,r)}if(l=(o&e.childLanes)!==0,$r||l){if(r=Hn,r!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,mi(e,a),Gs(r,e,a,-1))}return YN(),r=k0(Error(be(421))),np(e,t,o,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=hV.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,es=fo(a.nextSibling),ns=t,nn=!0,Vs=null,e!==null&&(fs[ms++]=ni,fs[ms++]=ri,fs[ms++]=Tl,ni=e.id,ri=e.overflow,Tl=t),t=VN(t,r.children),t.flags|=4096,t)}function SC(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),hb(e.return,t,n)}function T0(e,t,n,r,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function FM(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(vr(e,t,r.children,n),r=sn.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&SC(e,n,t);else if(e.tag===19)SC(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ut(sn,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Ng(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),T0(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Ng(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}T0(t,!0,n,null,i);break;case"together":T0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qp(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function pi(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Dl|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(be(153));if(t.child!==null){for(e=t.child,n=vo(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=vo(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function eV(e,t,n){switch(t.tag){case 3:RM(t),Pu();break;case 5:dM(t);break;case 1:Fr(t.type)&&vg(t);break;case 4:IN(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Ut(wg,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ut(sn,sn.current&1),t.flags|=128,null):n&t.child.childLanes?LM(e,t,n):(Ut(sn,sn.current&1),e=pi(e,t,n),e!==null?e.sibling:null);Ut(sn,sn.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return FM(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ut(sn,sn.current),r)break;return null;case 22:case 23:return t.lanes=0,IM(e,t,n)}return pi(e,t,n)}var zM,wb,BM,qM;zM=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};wb=function(){};BM=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,ll(Ca.current);var i=null;switch(n){case"input":a=qw(e,a),r=qw(e,r),i=[];break;case"select":a=ln({},a,{value:void 0}),r=ln({},r,{value:void 0}),i=[];break;case"textarea":a=Ww(e,a),r=Ww(e,r),i=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=pg)}Kw(n,r);var o;n=null;for(u in a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Qh.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=a!=null?a[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Qh.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Gt("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};qM=function(e,t,n,r){n!==r&&(t.flags|=4)};function sh(e,t){if(!nn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function rr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function tV(e,t,n){var r=t.pendingProps;switch(PN(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rr(t),null;case 1:return Fr(t.type)&&gg(),rr(t),null;case 3:return r=t.stateNode,ku(),Jt(Lr),Jt(hr),RN(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ep(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Vs!==null&&(Pb(Vs),Vs=null))),wb(e,t),rr(t),null;case 5:$N(t);var a=ll(cf.current);if(n=t.type,e!==null&&t.stateNode!=null)BM(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(be(166));return rr(t),null}if(e=ll(Ca.current),ep(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[ga]=t,r[of]=i,e=(t.mode&1)!==0,n){case"dialog":Gt("cancel",r),Gt("close",r);break;case"iframe":case"object":case"embed":Gt("load",r);break;case"video":case"audio":for(a=0;a<_h.length;a++)Gt(_h[a],r);break;case"source":Gt("error",r);break;case"img":case"image":case"link":Gt("error",r),Gt("load",r);break;case"details":Gt("toggle",r);break;case"input":D2(r,i),Gt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Gt("invalid",r);break;case"textarea":I2(r,i),Gt("invalid",r)}Kw(n,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Zm(r.textContent,l,e),a=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Zm(r.textContent,l,e),a=["children",""+l]):Qh.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Gt("scroll",r)}switch(n){case"input":Wm(r),M2(r,i,!0);break;case"textarea":Wm(r),$2(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=pg)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=gD(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[ga]=t,e[of]=r,zM(e,t,!1,!1),t.stateNode=e;e:{switch(o=Gw(n,r),n){case"dialog":Gt("cancel",e),Gt("close",e),a=r;break;case"iframe":case"object":case"embed":Gt("load",e),a=r;break;case"video":case"audio":for(a=0;a<_h.length;a++)Gt(_h[a],e);a=r;break;case"source":Gt("error",e),a=r;break;case"img":case"image":case"link":Gt("error",e),Gt("load",e),a=r;break;case"details":Gt("toggle",e),a=r;break;case"input":D2(e,r),a=qw(e,r),Gt("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=ln({},r,{value:void 0}),Gt("invalid",e);break;case"textarea":I2(e,r),a=Ww(e,r),Gt("invalid",e);break;default:a=r}Kw(n,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?yD(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&vD(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Xh(e,c):typeof c=="number"&&Xh(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Qh.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Gt("scroll",e):c!=null&&fN(e,i,c,o))}switch(n){case"input":Wm(e),M2(e,r,!1);break;case"textarea":Wm(e),$2(e);break;case"option":r.value!=null&&e.setAttribute("value",""+No(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Qc(e,!!r.multiple,i,!1):r.defaultValue!=null&&Qc(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=pg)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return rr(t),null;case 6:if(e&&t.stateNode!=null)qM(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(be(166));if(n=ll(cf.current),ll(Ca.current),ep(t)){if(r=t.stateNode,n=t.memoizedProps,r[ga]=t,(i=r.nodeValue!==n)&&(e=ns,e!==null))switch(e.tag){case 3:Zm(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Zm(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ga]=t,t.stateNode=r}return rr(t),null;case 13:if(Jt(sn),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(nn&&es!==null&&t.mode&1&&!(t.flags&128))iM(),Pu(),t.flags|=98560,i=!1;else if(i=ep(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(be(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(be(317));i[ga]=t}else Pu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;rr(t),i=!1}else Vs!==null&&(Pb(Vs),Vs=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||sn.current&1?Mn===0&&(Mn=3):YN())),t.updateQueue!==null&&(t.flags|=4),rr(t),null);case 4:return ku(),wb(e,t),e===null&&sf(t.stateNode.containerInfo),rr(t),null;case 10:return ON(t.type._context),rr(t),null;case 17:return Fr(t.type)&&gg(),rr(t),null;case 19:if(Jt(sn),i=t.memoizedState,i===null)return rr(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)sh(i,!1);else{if(Mn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ng(e),o!==null){for(t.flags|=128,sh(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ut(sn,sn.current&1|2),t.child}e=e.sibling}i.tail!==null&&mn()>Ou&&(t.flags|=128,r=!0,sh(i,!1),t.lanes=4194304)}else{if(!r)if(e=Ng(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),sh(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!nn)return rr(t),null}else 2*mn()-i.renderingStartTime>Ou&&n!==1073741824&&(t.flags|=128,r=!0,sh(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=mn(),t.sibling=null,n=sn.current,Ut(sn,r?n&1|2:n&1),t):(rr(t),null);case 22:case 23:return GN(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Yr&1073741824&&(rr(t),t.subtreeFlags&6&&(t.flags|=8192)):rr(t),null;case 24:return null;case 25:return null}throw Error(be(156,t.tag))}function nV(e,t){switch(PN(t),t.tag){case 1:return Fr(t.type)&&gg(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ku(),Jt(Lr),Jt(hr),RN(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return $N(t),null;case 13:if(Jt(sn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(be(340));Pu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Jt(sn),null;case 4:return ku(),null;case 10:return ON(t.type._context),null;case 22:case 23:return GN(),null;case 24:return null;default:return null}}var rp=!1,ir=!1,rV=typeof WeakSet=="function"?WeakSet:Set,Re=null;function qc(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){dn(e,t,r)}else n.current=null}function bb(e,t,n){try{n()}catch(r){dn(e,t,r)}}var _C=!1;function sV(e,t){if(sb=hg,e=KD(),CN(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,m=null;t:for(;;){for(var f;h!==n||a!==0&&h.nodeType!==3||(l=o+a),h!==i||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)m=h,h=f;for(;;){if(h===e)break t;if(m===n&&++u===a&&(l=o),m===i&&++d===r&&(c=o),(f=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=f}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ab={focusedElem:e,selectionRange:n},hg=!1,Re=t;Re!==null;)if(t=Re,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Re=e;else for(;Re!==null;){t=Re;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var g=x.memoizedProps,p=x.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:Rs(t.type,g),p);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(be(163))}}catch(S){dn(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,Re=e;break}Re=t.return}return x=_C,_C=!1,x}function Rh(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&bb(t,n,i)}a=a.next}while(a!==r)}}function ux(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function jb(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function VM(e){var t=e.alternate;t!==null&&(e.alternate=null,VM(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ga],delete t[of],delete t[lb],delete t[zq],delete t[Bq])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function UM(e){return e.tag===5||e.tag===3||e.tag===4}function CC(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||UM(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Nb(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=pg));else if(r!==4&&(e=e.child,e!==null))for(Nb(e,t,n),e=e.sibling;e!==null;)Nb(e,t,n),e=e.sibling}function Sb(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Sb(e,t,n),e=e.sibling;e!==null;)Sb(e,t,n),e=e.sibling}var Qn=null,zs=!1;function Oi(e,t,n){for(n=n.child;n!==null;)WM(e,t,n),n=n.sibling}function WM(e,t,n){if(_a&&typeof _a.onCommitFiberUnmount=="function")try{_a.onCommitFiberUnmount(nx,n)}catch{}switch(n.tag){case 5:ir||qc(n,t);case 6:var r=Qn,a=zs;Qn=null,Oi(e,t,n),Qn=r,zs=a,Qn!==null&&(zs?(e=Qn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Qn.removeChild(n.stateNode));break;case 18:Qn!==null&&(zs?(e=Qn,n=n.stateNode,e.nodeType===8?S0(e.parentNode,n):e.nodeType===1&&S0(e,n),tf(e)):S0(Qn,n.stateNode));break;case 4:r=Qn,a=zs,Qn=n.stateNode.containerInfo,zs=!0,Oi(e,t,n),Qn=r,zs=a;break;case 0:case 11:case 14:case 15:if(!ir&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&bb(n,t,o),a=a.next}while(a!==r)}Oi(e,t,n);break;case 1:if(!ir&&(qc(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){dn(n,t,l)}Oi(e,t,n);break;case 21:Oi(e,t,n);break;case 22:n.mode&1?(ir=(r=ir)||n.memoizedState!==null,Oi(e,t,n),ir=r):Oi(e,t,n);break;default:Oi(e,t,n)}}function AC(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new rV),t.forEach(function(r){var a=fV.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function Os(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Qn=l.stateNode,zs=!1;break e;case 3:Qn=l.stateNode.containerInfo,zs=!0;break e;case 4:Qn=l.stateNode.containerInfo,zs=!0;break e}l=l.return}if(Qn===null)throw Error(be(160));WM(i,o,a),Qn=null,zs=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){dn(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)HM(t,e),t=t.sibling}function HM(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Os(t,e),ca(e),r&4){try{Rh(3,e,e.return),ux(3,e)}catch(g){dn(e,e.return,g)}try{Rh(5,e,e.return)}catch(g){dn(e,e.return,g)}}break;case 1:Os(t,e),ca(e),r&512&&n!==null&&qc(n,n.return);break;case 5:if(Os(t,e),ca(e),r&512&&n!==null&&qc(n,n.return),e.flags&32){var a=e.stateNode;try{Xh(a,"")}catch(g){dn(e,e.return,g)}}if(r&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&mD(a,i),Gw(l,o);var u=Gw(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?yD(a,h):d==="dangerouslySetInnerHTML"?vD(a,h):d==="children"?Xh(a,h):fN(a,d,h,u)}switch(l){case"input":Vw(a,i);break;case"textarea":pD(a,i);break;case"select":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Qc(a,!!i.multiple,f,!1):m!==!!i.multiple&&(i.defaultValue!=null?Qc(a,!!i.multiple,i.defaultValue,!0):Qc(a,!!i.multiple,i.multiple?[]:"",!1))}a[of]=i}catch(g){dn(e,e.return,g)}}break;case 6:if(Os(t,e),ca(e),r&4){if(e.stateNode===null)throw Error(be(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){dn(e,e.return,g)}}break;case 3:if(Os(t,e),ca(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{tf(t.containerInfo)}catch(g){dn(e,e.return,g)}break;case 4:Os(t,e),ca(e);break;case 13:Os(t,e),ca(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(HN=mn())),r&4&&AC(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(ir=(u=ir)||d,Os(t,e),ir=u):Os(t,e),ca(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Re=e,d=e.child;d!==null;){for(h=Re=d;Re!==null;){switch(m=Re,f=m.child,m.tag){case 0:case 11:case 14:case 15:Rh(4,m,m.return);break;case 1:qc(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(g){dn(r,n,g)}}break;case 5:qc(m,m.return);break;case 22:if(m.memoizedState!==null){EC(h);continue}}f!==null?(f.return=m,Re=f):EC(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{a=h.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=xD("display",o))}catch(g){dn(e,e.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){dn(e,e.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Os(t,e),ca(e),r&4&&AC(e);break;case 21:break;default:Os(t,e),ca(e)}}function ca(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(UM(n)){var r=n;break e}n=n.return}throw Error(be(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Xh(a,""),r.flags&=-33);var i=CC(e);Sb(e,i,a);break;case 3:case 4:var o=r.stateNode.containerInfo,l=CC(e);Nb(e,l,o);break;default:throw Error(be(161))}}catch(c){dn(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function aV(e,t,n){Re=e,KM(e)}function KM(e,t,n){for(var r=(e.mode&1)!==0;Re!==null;){var a=Re,i=a.child;if(a.tag===22&&r){var o=a.memoizedState!==null||rp;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||ir;l=rp;var u=ir;if(rp=o,(ir=c)&&!u)for(Re=a;Re!==null;)o=Re,c=o.child,o.tag===22&&o.memoizedState!==null?kC(a):c!==null?(c.return=o,Re=c):kC(a);for(;i!==null;)Re=i,KM(i),i=i.sibling;Re=a,rp=l,ir=u}PC(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Re=i):PC(e)}}function PC(e){for(;Re!==null;){var t=Re;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ir||ux(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ir)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Rs(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&hC(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}hC(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&tf(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(be(163))}ir||t.flags&512&&jb(t)}catch(m){dn(t,t.return,m)}}if(t===e){Re=null;break}if(n=t.sibling,n!==null){n.return=t.return,Re=n;break}Re=t.return}}function EC(e){for(;Re!==null;){var t=Re;if(t===e){Re=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Re=n;break}Re=t.return}}function kC(e){for(;Re!==null;){var t=Re;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ux(4,t)}catch(c){dn(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(c){dn(t,a,c)}}var i=t.return;try{jb(t)}catch(c){dn(t,i,c)}break;case 5:var o=t.return;try{jb(t)}catch(c){dn(t,o,c)}}}catch(c){dn(t,t.return,c)}if(t===e){Re=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Re=l;break}Re=t.return}}var iV=Math.ceil,Cg=Ni.ReactCurrentDispatcher,UN=Ni.ReactCurrentOwner,ws=Ni.ReactCurrentBatchConfig,bt=0,Hn=null,bn=null,Xn=0,Yr=0,Vc=ko(0),Mn=0,ff=null,Dl=0,dx=0,WN=0,Lh=null,Dr=null,HN=0,Ou=1/0,Ga=null,Ag=!1,_b=null,po=null,sp=!1,ao=null,Pg=0,Fh=0,Cb=null,Xp=-1,Jp=0;function jr(){return bt&6?mn():Xp!==-1?Xp:Xp=mn()}function go(e){return e.mode&1?bt&2&&Xn!==0?Xn&-Xn:Vq.transition!==null?(Jp===0&&(Jp=TD()),Jp):(e=Tt,e!==0||(e=window.event,e=e===void 0?16:LD(e.type)),e):1}function Gs(e,t,n,r){if(50<Fh)throw Fh=0,Cb=null,Error(be(185));pm(e,n,r),(!(bt&2)||e!==Hn)&&(e===Hn&&(!(bt&2)&&(dx|=n),Mn===4&&Wi(e,Xn)),zr(e,r),n===1&&bt===0&&!(t.mode&1)&&(Ou=mn()+500,ox&&To()))}function zr(e,t){var n=e.callbackNode;VB(e,t);var r=dg(e,e===Hn?Xn:0);if(r===0)n!==null&&F2(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&F2(n),t===1)e.tag===0?qq(TC.bind(null,e)):rM(TC.bind(null,e)),Lq(function(){!(bt&6)&&To()}),n=null;else{switch(OD(r)){case 1:n=xN;break;case 4:n=ED;break;case 16:n=ug;break;case 536870912:n=kD;break;default:n=ug}n=tI(n,GM.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function GM(e,t){if(Xp=-1,Jp=0,bt&6)throw Error(be(327));var n=e.callbackNode;if(tu()&&e.callbackNode!==n)return null;var r=dg(e,e===Hn?Xn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Eg(e,r);else{t=r;var a=bt;bt|=2;var i=QM();(Hn!==e||Xn!==t)&&(Ga=null,Ou=mn()+500,_l(e,t));do try{cV();break}catch(l){YM(e,l)}while(!0);TN(),Cg.current=i,bt=a,bn!==null?t=0:(Hn=null,Xn=0,t=Mn)}if(t!==0){if(t===2&&(a=Zw(e),a!==0&&(r=a,t=Ab(e,a))),t===1)throw n=ff,_l(e,0),Wi(e,r),zr(e,mn()),n;if(t===6)Wi(e,r);else{if(a=e.current.alternate,!(r&30)&&!oV(a)&&(t=Eg(e,r),t===2&&(i=Zw(e),i!==0&&(r=i,t=Ab(e,i))),t===1))throw n=ff,_l(e,0),Wi(e,r),zr(e,mn()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(be(345));case 2:Xo(e,Dr,Ga);break;case 3:if(Wi(e,r),(r&130023424)===r&&(t=HN+500-mn(),10<t)){if(dg(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){jr(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ob(Xo.bind(null,e,Dr,Ga),t);break}Xo(e,Dr,Ga);break;case 4:if(Wi(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-Ks(r);i=1<<o,o=t[o],o>a&&(a=o),r&=~i}if(r=a,r=mn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*iV(r/1960))-r,10<r){e.timeoutHandle=ob(Xo.bind(null,e,Dr,Ga),r);break}Xo(e,Dr,Ga);break;case 5:Xo(e,Dr,Ga);break;default:throw Error(be(329))}}}return zr(e,mn()),e.callbackNode===n?GM.bind(null,e):null}function Ab(e,t){var n=Lh;return e.current.memoizedState.isDehydrated&&(_l(e,t).flags|=256),e=Eg(e,t),e!==2&&(t=Dr,Dr=n,t!==null&&Pb(t)),e}function Pb(e){Dr===null?Dr=e:Dr.push.apply(Dr,e)}function oV(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!Qs(i(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Wi(e,t){for(t&=~WN,t&=~dx,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ks(t),r=1<<n;e[n]=-1,t&=~r}}function TC(e){if(bt&6)throw Error(be(327));tu();var t=dg(e,0);if(!(t&1))return zr(e,mn()),null;var n=Eg(e,t);if(e.tag!==0&&n===2){var r=Zw(e);r!==0&&(t=r,n=Ab(e,r))}if(n===1)throw n=ff,_l(e,0),Wi(e,t),zr(e,mn()),n;if(n===6)throw Error(be(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Xo(e,Dr,Ga),zr(e,mn()),null}function KN(e,t){var n=bt;bt|=1;try{return e(t)}finally{bt=n,bt===0&&(Ou=mn()+500,ox&&To())}}function Ml(e){ao!==null&&ao.tag===0&&!(bt&6)&&tu();var t=bt;bt|=1;var n=ws.transition,r=Tt;try{if(ws.transition=null,Tt=1,e)return e()}finally{Tt=r,ws.transition=n,bt=t,!(bt&6)&&To()}}function GN(){Yr=Vc.current,Jt(Vc)}function _l(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Rq(n)),bn!==null)for(n=bn.return;n!==null;){var r=n;switch(PN(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&gg();break;case 3:ku(),Jt(Lr),Jt(hr),RN();break;case 5:$N(r);break;case 4:ku();break;case 13:Jt(sn);break;case 19:Jt(sn);break;case 10:ON(r.type._context);break;case 22:case 23:GN()}n=n.return}if(Hn=e,bn=e=vo(e.current,null),Xn=Yr=t,Mn=0,ff=null,WN=dx=Dl=0,Dr=Lh=null,ol!==null){for(t=0;t<ol.length;t++)if(n=ol[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=a,r.next=o}n.pending=r}ol=null}return e}function YM(e,t){do{var n=bn;try{if(TN(),Gp.current=_g,Sg){for(var r=an.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Sg=!1}if(Ol=0,Vn=kn=an=null,$h=!1,uf=0,UN.current=null,n===null||n.return===null){Mn=1,ff=t,bn=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=Xn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=xC(o);if(f!==null){f.flags&=-257,yC(f,o,l,i,t),f.mode&1&&vC(i,u,t),t=f,c=u;var x=t.updateQueue;if(x===null){var g=new Set;g.add(c),t.updateQueue=g}else x.add(c);break e}else{if(!(t&1)){vC(i,u,t),YN();break e}c=Error(be(426))}}else if(nn&&l.mode&1){var p=xC(o);if(p!==null){!(p.flags&65536)&&(p.flags|=256),yC(p,o,l,i,t),EN(Tu(c,l));break e}}i=c=Tu(c,l),Mn!==4&&(Mn=2),Lh===null?Lh=[i]:Lh.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=OM(i,c,t);dC(i,v);break e;case 1:l=c;var y=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(po===null||!po.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var S=DM(i,l,t);dC(i,S);break e}}i=i.return}while(i!==null)}JM(n)}catch(j){t=j,bn===n&&n!==null&&(bn=n=n.return);continue}break}while(!0)}function QM(){var e=Cg.current;return Cg.current=_g,e===null?_g:e}function YN(){(Mn===0||Mn===3||Mn===2)&&(Mn=4),Hn===null||!(Dl&268435455)&&!(dx&268435455)||Wi(Hn,Xn)}function Eg(e,t){var n=bt;bt|=2;var r=QM();(Hn!==e||Xn!==t)&&(Ga=null,_l(e,t));do try{lV();break}catch(a){YM(e,a)}while(!0);if(TN(),bt=n,Cg.current=r,bn!==null)throw Error(be(261));return Hn=null,Xn=0,Mn}function lV(){for(;bn!==null;)XM(bn)}function cV(){for(;bn!==null&&!MB();)XM(bn)}function XM(e){var t=eI(e.alternate,e,Yr);e.memoizedProps=e.pendingProps,t===null?JM(e):bn=t,UN.current=null}function JM(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=nV(n,t),n!==null){n.flags&=32767,bn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Mn=6,bn=null;return}}else if(n=tV(n,t,Yr),n!==null){bn=n;return}if(t=t.sibling,t!==null){bn=t;return}bn=t=e}while(t!==null);Mn===0&&(Mn=5)}function Xo(e,t,n){var r=Tt,a=ws.transition;try{ws.transition=null,Tt=1,uV(e,t,n,r)}finally{ws.transition=a,Tt=r}return null}function uV(e,t,n,r){do tu();while(ao!==null);if(bt&6)throw Error(be(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(be(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(UB(e,i),e===Hn&&(bn=Hn=null,Xn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||sp||(sp=!0,tI(ug,function(){return tu(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ws.transition,ws.transition=null;var o=Tt;Tt=1;var l=bt;bt|=4,UN.current=null,sV(e,n),HM(n,e),kq(ab),hg=!!sb,ab=sb=null,e.current=n,aV(n),IB(),bt=l,Tt=o,ws.transition=i}else e.current=n;if(sp&&(sp=!1,ao=e,Pg=a),i=e.pendingLanes,i===0&&(po=null),LB(n.stateNode),zr(e,mn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Ag)throw Ag=!1,e=_b,_b=null,e;return Pg&1&&e.tag!==0&&tu(),i=e.pendingLanes,i&1?e===Cb?Fh++:(Fh=0,Cb=e):Fh=0,To(),null}function tu(){if(ao!==null){var e=OD(Pg),t=ws.transition,n=Tt;try{if(ws.transition=null,Tt=16>e?16:e,ao===null)var r=!1;else{if(e=ao,ao=null,Pg=0,bt&6)throw Error(be(331));var a=bt;for(bt|=4,Re=e.current;Re!==null;){var i=Re,o=i.child;if(Re.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Re=u;Re!==null;){var d=Re;switch(d.tag){case 0:case 11:case 15:Rh(8,d,i)}var h=d.child;if(h!==null)h.return=d,Re=h;else for(;Re!==null;){d=Re;var m=d.sibling,f=d.return;if(VM(d),d===u){Re=null;break}if(m!==null){m.return=f,Re=m;break}Re=f}}}var x=i.alternate;if(x!==null){var g=x.child;if(g!==null){x.child=null;do{var p=g.sibling;g.sibling=null,g=p}while(g!==null)}}Re=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Re=o;else e:for(;Re!==null;){if(i=Re,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Rh(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,Re=v;break e}Re=i.return}}var y=e.current;for(Re=y;Re!==null;){o=Re;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Re=w;else e:for(o=y;Re!==null;){if(l=Re,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ux(9,l)}}catch(j){dn(l,l.return,j)}if(l===o){Re=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,Re=S;break e}Re=l.return}}if(bt=a,To(),_a&&typeof _a.onPostCommitFiberRoot=="function")try{_a.onPostCommitFiberRoot(nx,e)}catch{}r=!0}return r}finally{Tt=n,ws.transition=t}}return!1}function OC(e,t,n){t=Tu(n,t),t=OM(e,t,1),e=mo(e,t,1),t=jr(),e!==null&&(pm(e,1,t),zr(e,t))}function dn(e,t,n){if(e.tag===3)OC(e,e,n);else for(;t!==null;){if(t.tag===3){OC(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(po===null||!po.has(r))){e=Tu(n,e),e=DM(t,e,1),t=mo(t,e,1),e=jr(),t!==null&&(pm(t,1,e),zr(t,e));break}}t=t.return}}function dV(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=jr(),e.pingedLanes|=e.suspendedLanes&n,Hn===e&&(Xn&n)===n&&(Mn===4||Mn===3&&(Xn&130023424)===Xn&&500>mn()-HN?_l(e,0):WN|=n),zr(e,t)}function ZM(e,t){t===0&&(e.mode&1?(t=Gm,Gm<<=1,!(Gm&130023424)&&(Gm=4194304)):t=1);var n=jr();e=mi(e,t),e!==null&&(pm(e,t,n),zr(e,n))}function hV(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),ZM(e,n)}function fV(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(be(314))}r!==null&&r.delete(t),ZM(e,n)}var eI;eI=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Lr.current)$r=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return $r=!1,eV(e,t,n);$r=!!(e.flags&131072)}else $r=!1,nn&&t.flags&1048576&&sM(t,yg,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Qp(e,t),e=t.pendingProps;var a=Au(t,hr.current);eu(t,n),a=FN(null,t,r,e,a,n);var i=zN();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Fr(r)?(i=!0,vg(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,MN(t),a.updater=cx,t.stateNode=a,a._reactInternals=t,mb(t,r,e,n),t=vb(null,t,r,!0,i,n)):(t.tag=0,nn&&i&&AN(t),vr(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Qp(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=pV(r),e=Rs(r,e),a){case 0:t=gb(null,t,r,e,n);break e;case 1:t=jC(null,t,r,e,n);break e;case 11:t=wC(null,t,r,e,n);break e;case 14:t=bC(null,t,r,Rs(r.type,e),n);break e}throw Error(be(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Rs(r,a),gb(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Rs(r,a),jC(e,t,r,a,n);case 3:e:{if(RM(t),e===null)throw Error(be(387));r=t.pendingProps,i=t.memoizedState,a=i.element,uM(e,t),jg(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Tu(Error(be(423)),t),t=NC(e,t,r,n,a);break e}else if(r!==a){a=Tu(Error(be(424)),t),t=NC(e,t,r,n,a);break e}else for(es=fo(t.stateNode.containerInfo.firstChild),ns=t,nn=!0,Vs=null,n=lM(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Pu(),r===a){t=pi(e,t,n);break e}vr(e,t,r,n)}t=t.child}return t;case 5:return dM(t),e===null&&db(t),r=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,ib(r,a)?o=null:i!==null&&ib(r,i)&&(t.flags|=32),$M(e,t),vr(e,t,o,n),t.child;case 6:return e===null&&db(t),null;case 13:return LM(e,t,n);case 4:return IN(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Eu(t,null,r,n):vr(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Rs(r,a),wC(e,t,r,a,n);case 7:return vr(e,t,t.pendingProps,n),t.child;case 8:return vr(e,t,t.pendingProps.children,n),t.child;case 12:return vr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Ut(wg,r._currentValue),r._currentValue=o,i!==null)if(Qs(i.value,o)){if(i.children===a.children&&!Lr.current){t=pi(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=oi(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),hb(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(be(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),hb(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}vr(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,eu(t,n),a=Ns(a),r=r(a),t.flags|=1,vr(e,t,r,n),t.child;case 14:return r=t.type,a=Rs(r,t.pendingProps),a=Rs(r.type,a),bC(e,t,r,a,n);case 15:return MM(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Rs(r,a),Qp(e,t),t.tag=1,Fr(r)?(e=!0,vg(t)):e=!1,eu(t,n),TM(t,r,a),mb(t,r,a,n),vb(null,t,r,!0,e,n);case 19:return FM(e,t,n);case 22:return IM(e,t,n)}throw Error(be(156,t.tag))};function tI(e,t){return PD(e,t)}function mV(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xs(e,t,n,r){return new mV(e,t,n,r)}function QN(e){return e=e.prototype,!(!e||!e.isReactComponent)}function pV(e){if(typeof e=="function")return QN(e)?1:0;if(e!=null){if(e=e.$$typeof,e===pN)return 11;if(e===gN)return 14}return 2}function vo(e,t){var n=e.alternate;return n===null?(n=xs(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Zp(e,t,n,r,a,i){var o=2;if(r=e,typeof e=="function")QN(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Dc:return Cl(n.children,a,i,t);case mN:o=8,a|=8;break;case Lw:return e=xs(12,n,t,a|2),e.elementType=Lw,e.lanes=i,e;case Fw:return e=xs(13,n,t,a),e.elementType=Fw,e.lanes=i,e;case zw:return e=xs(19,n,t,a),e.elementType=zw,e.lanes=i,e;case dD:return hx(n,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case cD:o=10;break e;case uD:o=9;break e;case pN:o=11;break e;case gN:o=14;break e;case Bi:o=16,r=null;break e}throw Error(be(130,e==null?e:typeof e,""))}return t=xs(o,n,t,a),t.elementType=e,t.type=r,t.lanes=i,t}function Cl(e,t,n,r){return e=xs(7,e,r,t),e.lanes=n,e}function hx(e,t,n,r){return e=xs(22,e,r,t),e.elementType=dD,e.lanes=n,e.stateNode={isHidden:!1},e}function O0(e,t,n){return e=xs(6,e,null,t),e.lanes=n,e}function D0(e,t,n){return t=xs(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function gV(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=f0(0),this.expirationTimes=f0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=f0(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function XN(e,t,n,r,a,i,o,l,c){return e=new gV(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=xs(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},MN(i),e}function vV(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Oc,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function nI(e){if(!e)return So;e=e._reactInternals;e:{if(Ql(e)!==e||e.tag!==1)throw Error(be(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Fr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(be(171))}if(e.tag===1){var n=e.type;if(Fr(n))return nM(e,n,t)}return t}function rI(e,t,n,r,a,i,o,l,c){return e=XN(n,r,!0,e,a,i,o,l,c),e.context=nI(null),n=e.current,r=jr(),a=go(n),i=oi(r,a),i.callback=t??null,mo(n,i,a),e.current.lanes=a,pm(e,a,r),zr(e,r),e}function fx(e,t,n,r){var a=t.current,i=jr(),o=go(a);return n=nI(n),t.context===null?t.context=n:t.pendingContext=n,t=oi(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=mo(a,t,o),e!==null&&(Gs(e,a,o,i),Kp(e,a,o)),o}function kg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function DC(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function JN(e,t){DC(e,t),(e=e.alternate)&&DC(e,t)}function xV(){return null}var sI=typeof reportError=="function"?reportError:function(e){console.error(e)};function ZN(e){this._internalRoot=e}mx.prototype.render=ZN.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(be(409));fx(e,t,null,null)};mx.prototype.unmount=ZN.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ml(function(){fx(null,e,null,null)}),t[fi]=null}};function mx(e){this._internalRoot=e}mx.prototype.unstable_scheduleHydration=function(e){if(e){var t=ID();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ui.length&&t!==0&&t<Ui[n].priority;n++);Ui.splice(n,0,e),n===0&&RD(e)}};function eS(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function px(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function MC(){}function yV(e,t,n,r,a){if(a){if(typeof r=="function"){var i=r;r=function(){var u=kg(o);i.call(u)}}var o=rI(t,r,e,0,null,!1,!1,"",MC);return e._reactRootContainer=o,e[fi]=o.current,sf(e.nodeType===8?e.parentNode:e),Ml(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var l=r;r=function(){var u=kg(c);l.call(u)}}var c=XN(e,0,!1,null,null,!1,!1,"",MC);return e._reactRootContainer=c,e[fi]=c.current,sf(e.nodeType===8?e.parentNode:e),Ml(function(){fx(t,c,n,r)}),c}function gx(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=kg(o);l.call(c)}}fx(t,o,e,a)}else o=yV(n,t,e,a,r);return kg(o)}DD=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Sh(t.pendingLanes);n!==0&&(yN(t,n|1),zr(t,mn()),!(bt&6)&&(Ou=mn()+500,To()))}break;case 13:Ml(function(){var r=mi(e,1);if(r!==null){var a=jr();Gs(r,e,1,a)}}),JN(e,1)}};wN=function(e){if(e.tag===13){var t=mi(e,134217728);if(t!==null){var n=jr();Gs(t,e,134217728,n)}JN(e,134217728)}};MD=function(e){if(e.tag===13){var t=go(e),n=mi(e,t);if(n!==null){var r=jr();Gs(n,e,t,r)}JN(e,t)}};ID=function(){return Tt};$D=function(e,t){var n=Tt;try{return Tt=e,t()}finally{Tt=n}};Qw=function(e,t,n){switch(t){case"input":if(Vw(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=ix(r);if(!a)throw Error(be(90));fD(r),Vw(r,a)}}}break;case"textarea":pD(e,n);break;case"select":t=n.value,t!=null&&Qc(e,!!n.multiple,t,!1)}};jD=KN;ND=Ml;var wV={usingClientEntryPoint:!1,Events:[vm,Rc,ix,wD,bD,KN]},ah={findFiberByHostInstance:il,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bV={bundleType:ah.bundleType,version:ah.version,rendererPackageName:ah.rendererPackageName,rendererConfig:ah.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ni.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=CD(e),e===null?null:e.stateNode},findFiberByHostInstance:ah.findFiberByHostInstance||xV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ap=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ap.isDisabled&&ap.supportsFiber)try{nx=ap.inject(bV),_a=ap}catch{}}is.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wV;is.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!eS(t))throw Error(be(200));return vV(e,t,null,n)};is.createRoot=function(e,t){if(!eS(e))throw Error(be(299));var n=!1,r="",a=sI;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=XN(e,1,!1,null,null,n,!1,r,a),e[fi]=t.current,sf(e.nodeType===8?e.parentNode:e),new ZN(t)};is.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(be(188)):(e=Object.keys(e).join(","),Error(be(268,e)));return e=CD(t),e=e===null?null:e.stateNode,e};is.flushSync=function(e){return Ml(e)};is.hydrate=function(e,t,n){if(!px(t))throw Error(be(200));return gx(null,e,t,!0,n)};is.hydrateRoot=function(e,t,n){if(!eS(e))throw Error(be(405));var r=n!=null&&n.hydratedSources||null,a=!1,i="",o=sI;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=rI(t,null,e,1,n??null,a,!1,i,o),e[fi]=t.current,sf(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new mx(t)};is.render=function(e,t,n){if(!px(t))throw Error(be(200));return gx(null,e,t,!1,n)};is.unmountComponentAtNode=function(e){if(!px(e))throw Error(be(40));return e._reactRootContainer?(Ml(function(){gx(null,null,e,!1,function(){e._reactRootContainer=null,e[fi]=null})}),!0):!1};is.unstable_batchedUpdates=KN;is.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!px(n))throw Error(be(200));if(e==null||e._reactInternals===void 0)throw Error(be(38));return gx(e,t,n,!1,r)};is.version="18.3.1-next-f1338f8080-20240426";function aI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(aI)}catch(e){console.error(e)}}aI(),aD.exports=is;var Xl=aD.exports;const iI=Et(Xl);var oI,IC=Xl;oI=IC.createRoot,IC.hydrateRoot;const jV=1,NV=1e6;let M0=0;function SV(){return M0=(M0+1)%Number.MAX_SAFE_INTEGER,M0.toString()}const I0=new Map,$C=e=>{if(I0.has(e))return;const t=setTimeout(()=>{I0.delete(e),zh({type:"REMOVE_TOAST",toastId:e})},NV);I0.set(e,t)},_V=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,jV)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?$C(n):e.toasts.forEach(r=>{$C(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},eg=[];let tg={toasts:[]};function zh(e){tg=_V(tg,e),eg.forEach(t=>{t(tg)})}function ua({...e}){const t=SV(),n=a=>zh({type:"UPDATE_TOAST",toast:{...a,id:t}}),r=()=>zh({type:"DISMISS_TOAST",toastId:t});return zh({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||r()}}}),{id:t,dismiss:r,update:n}}function it(){const[e,t]=b.useState(tg);return b.useEffect(()=>(eg.push(t),()=>{const n=eg.indexOf(t);n>-1&&eg.splice(n,1)}),[e]),{...e,toast:ua,dismiss:n=>zh({type:"DISMISS_TOAST",toastId:n})}}function Te(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function RC(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function vx(...e){return t=>{let n=!1;const r=e.map(a=>{const i=RC(a,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let a=0;a<r.length;a++){const i=r[a];typeof i=="function"?i():RC(e[a],null)}}}}function ft(...e){return b.useCallback(vx(...e),e)}function CV(e,t){const n=b.createContext(t),r=i=>{const{children:o,...l}=i,c=b.useMemo(()=>l,Object.values(l));return s.jsx(n.Provider,{value:c,children:o})};r.displayName=e+"Provider";function a(i){const o=b.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,a]}function Br(e,t=[]){let n=[];function r(i,o){const l=b.createContext(o),c=n.length;n=[...n,o];const u=h=>{var v;const{scope:m,children:f,...x}=h,g=((v=m==null?void 0:m[e])==null?void 0:v[c])||l,p=b.useMemo(()=>x,Object.values(x));return s.jsx(g.Provider,{value:p,children:f})};u.displayName=i+"Provider";function d(h,m){var g;const f=((g=m==null?void 0:m[e])==null?void 0:g[c])||l,x=b.useContext(f);if(x)return x;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const a=()=>{const i=n.map(o=>b.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return b.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[r,AV(a,...t)]}function AV(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const h=c(i)[`__scope${u}`];return{...l,...h}},{});return b.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function Il(e){const t=EV(e),n=b.forwardRef((r,a)=>{const{children:i,...o}=r,l=b.Children.toArray(i),c=l.find(kV);if(c){const u=c.props.children,d=l.map(h=>h===c?b.Children.count(u)>1?b.Children.only(null):b.isValidElement(u)?u.props.children:null:h);return s.jsx(t,{...o,ref:a,children:b.isValidElement(u)?b.cloneElement(u,void 0,d):null})}return s.jsx(t,{...o,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}var PV=Il("Slot");function EV(e){const t=b.forwardRef((n,r)=>{const{children:a,...i}=n;if(b.isValidElement(a)){const o=OV(a),l=TV(i,a.props);return a.type!==b.Fragment&&(l.ref=r?vx(r,o):o),b.cloneElement(a,l)}return b.Children.count(a)>1?b.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var lI=Symbol("radix.slottable");function cI(e){const t=({children:n})=>s.jsx(s.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=lI,t}function kV(e){return b.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===lI}function TV(e,t){const n={...t};for(const r in t){const a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(n[r]=a):r==="style"?n[r]={...a,...i}:r==="className"&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function OV(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function xx(e){const t=e+"CollectionProvider",[n,r]=Br(t),[a,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:p,children:v}=g,y=L.useRef(null),w=L.useRef(new Map).current;return s.jsx(a,{scope:p,itemMap:w,collectionRef:y,children:v})};o.displayName=t;const l=e+"CollectionSlot",c=Il(l),u=L.forwardRef((g,p)=>{const{scope:v,children:y}=g,w=i(l,v),S=ft(p,w.collectionRef);return s.jsx(c,{ref:S,children:y})});u.displayName=l;const d=e+"CollectionItemSlot",h="data-radix-collection-item",m=Il(d),f=L.forwardRef((g,p)=>{const{scope:v,children:y,...w}=g,S=L.useRef(null),j=ft(p,S),N=i(d,v);return L.useEffect(()=>(N.itemMap.set(S,{ref:S,...w}),()=>void N.itemMap.delete(S))),s.jsx(m,{[h]:"",ref:j,children:y})});f.displayName=d;function x(g){const p=i(e+"CollectionConsumer",g);return L.useCallback(()=>{const y=p.collectionRef.current;if(!y)return[];const w=Array.from(y.querySelectorAll(`[${h}]`));return Array.from(p.itemMap.values()).sort((N,C)=>w.indexOf(N.ref.current)-w.indexOf(C.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:o,Slot:u,ItemSlot:f},x,r]}var DV=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],qe=DV.reduce((e,t)=>{const n=Il(`Primitive.${t}`),r=b.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function tS(e,t){e&&Xl.flushSync(()=>e.dispatchEvent(t))}function Nr(e){const t=b.useRef(e);return b.useEffect(()=>{t.current=e}),b.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function MV(e,t=globalThis==null?void 0:globalThis.document){const n=Nr(e);b.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var IV="DismissableLayer",Eb="dismissableLayer.update",$V="dismissableLayer.pointerDownOutside",RV="dismissableLayer.focusOutside",LC,uI=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),vd=b.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,u=b.useContext(uI),[d,h]=b.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=b.useState({}),x=ft(t,C=>h(C)),g=Array.from(u.layers),[p]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(p),y=d?g.indexOf(d):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,S=y>=v,j=FV(C=>{const _=C.target,A=[...u.branches].some(P=>P.contains(_));!S||A||(a==null||a(C),o==null||o(C),C.defaultPrevented||l==null||l())},m),N=zV(C=>{const _=C.target;[...u.branches].some(P=>P.contains(_))||(i==null||i(C),o==null||o(C),C.defaultPrevented||l==null||l())},m);return MV(C=>{y===u.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&l&&(C.preventDefault(),l()))},m),b.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(LC=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),FC(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=LC)}},[d,m,n,u]),b.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),FC())},[d,u]),b.useEffect(()=>{const C=()=>f({});return document.addEventListener(Eb,C),()=>document.removeEventListener(Eb,C)},[]),s.jsx(qe.div,{...c,ref:x,style:{pointerEvents:w?S?"auto":"none":void 0,...e.style},onFocusCapture:Te(e.onFocusCapture,N.onFocusCapture),onBlurCapture:Te(e.onBlurCapture,N.onBlurCapture),onPointerDownCapture:Te(e.onPointerDownCapture,j.onPointerDownCapture)})});vd.displayName=IV;var LV="DismissableLayerBranch",dI=b.forwardRef((e,t)=>{const n=b.useContext(uI),r=b.useRef(null),a=ft(t,r);return b.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),s.jsx(qe.div,{...e,ref:a})});dI.displayName=LV;function FV(e,t=globalThis==null?void 0:globalThis.document){const n=Nr(e),r=b.useRef(!1),a=b.useRef(()=>{});return b.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){hI($V,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function zV(e,t=globalThis==null?void 0:globalThis.document){const n=Nr(e),r=b.useRef(!1);return b.useEffect(()=>{const a=i=>{i.target&&!r.current&&hI(RV,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function FC(){const e=new CustomEvent(Eb);document.dispatchEvent(e)}function hI(e,t,n,{discrete:r}){const a=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?tS(a,i):a.dispatchEvent(i)}var BV=vd,qV=dI,Nn=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},VV="Portal",ym=b.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[a,i]=b.useState(!1);Nn(()=>i(!0),[]);const o=n||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?iI.createPortal(s.jsx(qe.div,{...r,ref:t}),o):null});ym.displayName=VV;function UV(e,t){return b.useReducer((n,r)=>t[n][r]??n,e)}var As=e=>{const{present:t,children:n}=e,r=WV(t),a=typeof n=="function"?n({present:r.isPresent}):b.Children.only(n),i=ft(r.ref,HV(a));return typeof n=="function"||r.isPresent?b.cloneElement(a,{ref:i}):null};As.displayName="Presence";function WV(e){const[t,n]=b.useState(),r=b.useRef(null),a=b.useRef(e),i=b.useRef("none"),o=e?"mounted":"unmounted",[l,c]=UV(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const u=ip(r.current);i.current=l==="mounted"?u:"none"},[l]),Nn(()=>{const u=r.current,d=a.current;if(d!==e){const m=i.current,f=ip(u);e?c("MOUNT"):f==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&m!==f?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),Nn(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,h=f=>{const g=ip(r.current).includes(f.animationName);if(f.target===t&&g&&(c("ANIMATION_END"),!a.current)){const p=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=p)})}},m=f=>{f.target===t&&(i.current=ip(r.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:b.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function ip(e){return(e==null?void 0:e.animationName)||"none"}function HV(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var KV=uN[" useInsertionEffect ".trim().toString()]||Nn;function gi({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[a,i,o]=GV({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:a;{const d=b.useRef(e!==void 0);b.useEffect(()=>{const h=d.current;h!==l&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,r])}const u=b.useCallback(d=>{var h;if(l){const m=YV(d)?d(e):d;m!==e&&((h=o.current)==null||h.call(o,m))}else i(d)},[l,e,i,o]);return[c,u]}function GV({defaultProp:e,onChange:t}){const[n,r]=b.useState(e),a=b.useRef(n),i=b.useRef(t);return KV(()=>{i.current=t},[t]),b.useEffect(()=>{var o;a.current!==n&&((o=i.current)==null||o.call(i,n),a.current=n)},[n,a]),[n,r,i]}function YV(e){return typeof e=="function"}var fI=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),QV="VisuallyHidden",yx=b.forwardRef((e,t)=>s.jsx(qe.span,{...e,ref:t,style:{...fI,...e.style}}));yx.displayName=QV;var XV=yx,nS="ToastProvider",[rS,JV,ZV]=xx("Toast"),[mI,Ake]=Br("Toast",[ZV]),[eU,wx]=mI(nS),pI=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=e,[l,c]=b.useState(null),[u,d]=b.useState(0),h=b.useRef(!1),m=b.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${nS}\`. Expected non-empty \`string\`.`),s.jsx(rS.Provider,{scope:t,children:s.jsx(eU,{scope:t,label:n,duration:r,swipeDirection:a,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:b.useCallback(()=>d(f=>f+1),[]),onToastRemove:b.useCallback(()=>d(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:m,children:o})})};pI.displayName=nS;var gI="ToastViewport",tU=["F8"],kb="toast.viewportPause",Tb="toast.viewportResume",vI=b.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=tU,label:a="Notifications ({hotkey})",...i}=e,o=wx(gI,n),l=JV(n),c=b.useRef(null),u=b.useRef(null),d=b.useRef(null),h=b.useRef(null),m=ft(t,h,o.onViewportChange),f=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),x=o.toastCount>0;b.useEffect(()=>{const p=v=>{var w;r.length!==0&&r.every(S=>v[S]||v.code===S)&&((w=h.current)==null||w.focus())};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[r]),b.useEffect(()=>{const p=c.current,v=h.current;if(x&&p&&v){const y=()=>{if(!o.isClosePausedRef.current){const N=new CustomEvent(kb);v.dispatchEvent(N),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const N=new CustomEvent(Tb);v.dispatchEvent(N),o.isClosePausedRef.current=!1}},S=N=>{!p.contains(N.relatedTarget)&&w()},j=()=>{p.contains(document.activeElement)||w()};return p.addEventListener("focusin",y),p.addEventListener("focusout",S),p.addEventListener("pointermove",y),p.addEventListener("pointerleave",j),window.addEventListener("blur",y),window.addEventListener("focus",w),()=>{p.removeEventListener("focusin",y),p.removeEventListener("focusout",S),p.removeEventListener("pointermove",y),p.removeEventListener("pointerleave",j),window.removeEventListener("blur",y),window.removeEventListener("focus",w)}}},[x,o.isClosePausedRef]);const g=b.useCallback(({tabbingDirection:p})=>{const y=l().map(w=>{const S=w.ref.current,j=[S,...mU(S)];return p==="forwards"?j:j.reverse()});return(p==="forwards"?y.reverse():y).flat()},[l]);return b.useEffect(()=>{const p=h.current;if(p){const v=y=>{var j,N,C;const w=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!w){const _=document.activeElement,A=y.shiftKey;if(y.target===p&&A){(j=u.current)==null||j.focus();return}const E=g({tabbingDirection:A?"backwards":"forwards"}),I=E.findIndex(R=>R===_);$0(E.slice(I+1))?y.preventDefault():A?(N=u.current)==null||N.focus():(C=d.current)==null||C.focus()}};return p.addEventListener("keydown",v),()=>p.removeEventListener("keydown",v)}},[l,g]),s.jsxs(qV,{ref:c,role:"region","aria-label":a.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:x?void 0:"none"},children:[x&&s.jsx(Ob,{ref:u,onFocusFromOutsideViewport:()=>{const p=g({tabbingDirection:"forwards"});$0(p)}}),s.jsx(rS.Slot,{scope:n,children:s.jsx(qe.ol,{tabIndex:-1,...i,ref:m})}),x&&s.jsx(Ob,{ref:d,onFocusFromOutsideViewport:()=>{const p=g({tabbingDirection:"backwards"});$0(p)}})]})});vI.displayName=gI;var xI="ToastFocusProxy",Ob=b.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...a}=e,i=wx(xI,n);return s.jsx(yx,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&r()}})});Ob.displayName=xI;var wm="Toast",nU="toast.swipeStart",rU="toast.swipeMove",sU="toast.swipeCancel",aU="toast.swipeEnd",yI=b.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:a,onOpenChange:i,...o}=e,[l,c]=gi({prop:r,defaultProp:a??!0,onChange:i,caller:wm});return s.jsx(As,{present:n||l,children:s.jsx(lU,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:Nr(e.onPause),onResume:Nr(e.onResume),onSwipeStart:Te(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Te(e.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Te(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Te(e.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});yI.displayName=wm;var[iU,oU]=mI(wm,{onClose(){}}),lU=b.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:m,onSwipeEnd:f,...x}=e,g=wx(wm,n),[p,v]=b.useState(null),y=ft(t,R=>v(R)),w=b.useRef(null),S=b.useRef(null),j=a||g.duration,N=b.useRef(0),C=b.useRef(j),_=b.useRef(0),{onToastAdd:A,onToastRemove:P}=g,T=Nr(()=>{var z;(p==null?void 0:p.contains(document.activeElement))&&((z=g.viewport)==null||z.focus()),o()}),E=b.useCallback(R=>{!R||R===1/0||(window.clearTimeout(_.current),N.current=new Date().getTime(),_.current=window.setTimeout(T,R))},[T]);b.useEffect(()=>{const R=g.viewport;if(R){const z=()=>{E(C.current),u==null||u()},U=()=>{const K=new Date().getTime()-N.current;C.current=C.current-K,window.clearTimeout(_.current),c==null||c()};return R.addEventListener(kb,U),R.addEventListener(Tb,z),()=>{R.removeEventListener(kb,U),R.removeEventListener(Tb,z)}}},[g.viewport,j,c,u,E]),b.useEffect(()=>{i&&!g.isClosePausedRef.current&&E(j)},[i,j,g.isClosePausedRef,E]),b.useEffect(()=>(A(),()=>P()),[A,P]);const I=b.useMemo(()=>p?CI(p):null,[p]);return g.viewport?s.jsxs(s.Fragment,{children:[I&&s.jsx(cU,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:I}),s.jsx(iU,{scope:n,onClose:T,children:Xl.createPortal(s.jsx(rS.ItemSlot,{scope:n,children:s.jsx(BV,{asChild:!0,onEscapeKeyDown:Te(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||T(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(qe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...x,ref:y,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Te(e.onKeyDown,R=>{R.key==="Escape"&&(l==null||l(R.nativeEvent),R.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,T()))}),onPointerDown:Te(e.onPointerDown,R=>{R.button===0&&(w.current={x:R.clientX,y:R.clientY})}),onPointerMove:Te(e.onPointerMove,R=>{if(!w.current)return;const z=R.clientX-w.current.x,U=R.clientY-w.current.y,K=!!S.current,k=["left","right"].includes(g.swipeDirection),D=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,J=k?D(0,z):0,W=k?0:D(0,U),Y=R.pointerType==="touch"?10:2,V={x:J,y:W},O={originalEvent:R,delta:V};K?(S.current=V,op(rU,h,O,{discrete:!1})):zC(V,g.swipeDirection,Y)?(S.current=V,op(nU,d,O,{discrete:!1}),R.target.setPointerCapture(R.pointerId)):(Math.abs(z)>Y||Math.abs(U)>Y)&&(w.current=null)}),onPointerUp:Te(e.onPointerUp,R=>{const z=S.current,U=R.target;if(U.hasPointerCapture(R.pointerId)&&U.releasePointerCapture(R.pointerId),S.current=null,w.current=null,z){const K=R.currentTarget,k={originalEvent:R,delta:z};zC(z,g.swipeDirection,g.swipeThreshold)?op(aU,f,k,{discrete:!0}):op(sU,m,k,{discrete:!0}),K.addEventListener("click",D=>D.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),cU=e=>{const{__scopeToast:t,children:n,...r}=e,a=wx(wm,t),[i,o]=b.useState(!1),[l,c]=b.useState(!1);return hU(()=>o(!0)),b.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:s.jsx(ym,{asChild:!0,children:s.jsx(yx,{...r,children:i&&s.jsxs(s.Fragment,{children:[a.label," ",n]})})})},uU="ToastTitle",wI=b.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return s.jsx(qe.div,{...r,ref:t})});wI.displayName=uU;var dU="ToastDescription",bI=b.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return s.jsx(qe.div,{...r,ref:t})});bI.displayName=dU;var jI="ToastAction",NI=b.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?s.jsx(_I,{altText:n,asChild:!0,children:s.jsx(sS,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${jI}\`. Expected non-empty \`string\`.`),null)});NI.displayName=jI;var SI="ToastClose",sS=b.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,a=oU(SI,n);return s.jsx(_I,{asChild:!0,children:s.jsx(qe.button,{type:"button",...r,ref:t,onClick:Te(e.onClick,a.onClose)})})});sS.displayName=SI;var _I=b.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...a}=e;return s.jsx(qe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...a,ref:t})});function CI(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),fU(r)){const a=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...CI(r))}}),t}function op(e,t,n,{discrete:r}){const a=n.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?tS(a,i):a.dispatchEvent(i)}var zC=(e,t,n=0)=>{const r=Math.abs(e.x),a=Math.abs(e.y),i=r>a;return t==="left"||t==="right"?i&&r>n:!i&&a>n};function hU(e=()=>{}){const t=Nr(e);Nn(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function fU(e){return e.nodeType===e.ELEMENT_NODE}function mU(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function $0(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var pU=pI,AI=vI,PI=yI,EI=wI,kI=bI,TI=NI,OI=sS;function DI(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=DI(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function st(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=DI(e))&&(r&&(r+=" "),r+=t);return r}const BC=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,qC=st,bm=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return qC(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(u=>{const d=n==null?void 0:n[u],h=i==null?void 0:i[u];if(d===null)return null;const m=BC(d)||BC(h);return a[u][m]}),l=n&&Object.entries(n).reduce((u,d)=>{let[h,m]=d;return m===void 0||(u[h]=m),u},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:m,...f}=d;return Object.entries(f).every(x=>{let[g,p]=x;return Array.isArray(p)?p.includes({...i,...l}[g]):{...i,...l}[g]===p})?[...u,h,m]:u},[]);return qC(e,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gU=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),MI=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var vU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xU=b.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:o,...l},c)=>b.createElement("svg",{ref:c,...vU,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:MI("lucide",a),...l},[...o.map(([u,d])=>b.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=(e,t)=>{const n=b.forwardRef(({className:r,...a},i)=>b.createElement(xU,{ref:i,iconNode:t,className:MI(`lucide-${gU(e)}`,r),...a}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=Ae("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VC=Ae("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Db=Ae("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=Ae("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yU=Ae("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wU=Ae("Bird",[["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M3.4 18H12a8 8 0 0 0 8-8V7a4 4 0 0 0-7.28-2.3L2 20",key:"oj1oa8"}],["path",{d:"m20 7 2 .5-2 .5",key:"12nv4d"}],["path",{d:"M10 18v3",key:"1yea0a"}],["path",{d:"M14 17.75V21",key:"1pymcb"}],["path",{d:"M7 18a6 6 0 0 0 3.84-10.61",key:"1npnn0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mb=Ae("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const II=Ae("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bU=Ae("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=Ae("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tg=Ae("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jU=Ae("Cat",[["path",{d:"M12 5c.67 0 1.35.09 2 .26 1.78-2 5.03-2.84 6.42-2.26 1.4.58-.42 7-.42 7 .57 1.07 1 2.24 1 3.44C21 17.9 16.97 21 12 21s-9-3-9-7.56c0-1.25.5-2.4 1-3.44 0 0-1.89-6.42-.5-7 1.39-.58 4.72.23 6.5 2.23A9.04 9.04 0 0 1 12 5Z",key:"x6xyqk"}],["path",{d:"M8 14v.5",key:"1nzgdb"}],["path",{d:"M16 14v.5",key:"1lajdz"}],["path",{d:"M11.25 16.25h1.5L12 17l-.75-.75Z",key:"12kq1m"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=Ae("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NU=Ae("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=Ae("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=Ae("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SU=Ae("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _U=Ae("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=Ae("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=Ae("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $l=Ae("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CU=Ae("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=Ae("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AU=Ae("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PU=Ae("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EU=Ae("Dog",[["path",{d:"M11.25 16.25h1.5L12 17z",key:"w7jh35"}],["path",{d:"M16 14v.5",key:"1lajdz"}],["path",{d:"M4.42 11.247A13.152 13.152 0 0 0 4 14.556C4 18.728 7.582 21 12 21s8-2.272 8-6.444a11.702 11.702 0 0 0-.493-3.309",key:"u7s9ue"}],["path",{d:"M8 14v.5",key:"1nzgdb"}],["path",{d:"M8.5 8.5c-.384 1.05-1.083 2.028-2.344 2.5-1.931.722-3.576-.297-3.656-1-.113-.994 1.177-6.53 4-7 1.923-.321 3.651.845 3.651 2.235A7.497 7.497 0 0 1 14 5.277c0-1.39 1.844-2.598 3.767-2.277 2.823.47 4.113 6.006 4 7-.08.703-1.725 1.722-3.656 1-1.261-.472-1.855-1.45-2.239-2.5",key:"v8hric"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xd=Ae("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bx=Ae("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kU=Ae("Euro",[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ib=Ae("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=Ae("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TU=Ae("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=Ae("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Og=Ae("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OU=Ae("Fish",[["path",{d:"M6.5 12c.94-3.46 4.94-6 8.5-6 3.56 0 6.06 2.54 7 6-.94 3.47-3.44 6-7 6s-7.56-2.53-8.5-6Z",key:"15baut"}],["path",{d:"M18 12v.5",key:"18hhni"}],["path",{d:"M16 17.93a9.77 9.77 0 0 1 0-11.86",key:"16dt7o"}],["path",{d:"M7 10.67C7 8 5.58 5.97 2.73 5.5c-1 1.5-1 5 .23 6.5-1.24 1.5-1.24 5-.23 6.5C5.58 18.03 7 16 7 13.33",key:"l9di03"}],["path",{d:"M10.46 7.26C10.2 5.88 9.17 4.24 8 3h5.8a2 2 0 0 1 1.98 1.67l.23 1.4",key:"1kjonw"}],["path",{d:"m16.01 17.93-.23 1.4A2 2 0 0 1 13.8 21H9.5a5.96 5.96 0 0 0 1.49-3.98",key:"1zlm23"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=Ae("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=Ae("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DU=Ae("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MU=Ae("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=Ae("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=Ae("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=Ae("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=Ae("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yd=Ae("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Du=Ae("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=Ae("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IU=Ae("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=Ae("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $U=Ae("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=Ae("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dg=Ae("PawPrint",[["circle",{cx:"11",cy:"4",r:"2",key:"vol9p0"}],["circle",{cx:"18",cy:"8",r:"2",key:"17gozi"}],["circle",{cx:"20",cy:"16",r:"2",key:"1v9bxh"}],["path",{d:"M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z",key:"1ydw1z"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mf=Ae("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=Ae("Pill",[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=Ae("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pf=Ae("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RU=Ae("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nu=Ae("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Si=Ae("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LU=Ae("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lS=Ae("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=Ae("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FU=Ae("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=Ae("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=Ae("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zU=Ae("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=Ae("Syringe",[["path",{d:"m18 2 4 4",key:"22kx64"}],["path",{d:"m17 7 3-3",key:"1w1zoj"}],["path",{d:"M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5",key:"1exhtz"}],["path",{d:"m9 11 4 4",key:"rovt3i"}],["path",{d:"m5 19-3 3",key:"59f2uf"}],["path",{d:"m14 4 6 6",key:"yqp9t2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BU=Ae("Tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cS=Ae("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L0=Ae("Tractor",[["path",{d:"m10 11 11 .9a1 1 0 0 1 .8 1.1l-.665 4.158a1 1 0 0 1-.988.842H20",key:"she1j9"}],["path",{d:"M16 18h-5",key:"bq60fd"}],["path",{d:"M18 5a1 1 0 0 0-1 1v5.573",key:"1kv8ia"}],["path",{d:"M3 4h8.129a1 1 0 0 1 .99.863L13 11.246",key:"1q1ert"}],["path",{d:"M4 11V4",key:"9ft8pt"}],["path",{d:"M7 15h.01",key:"k5ht0j"}],["path",{d:"M8 10.1V4",key:"1jgyzo"}],["circle",{cx:"18",cy:"18",r:"2",key:"1emm8v"}],["circle",{cx:"7",cy:"15",r:"5",key:"ddtuc"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=Ae("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gf=Ae("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=Ae("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=Ae("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $b=Ae("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uS=Ae("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rb=Ae("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=Ae("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RI=Ae("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=Ae("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LI=Ae("Weight",[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=Ae("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),dS="-",qU=e=>{const t=UU(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const l=o.split(dS);return l[0]===""&&l.length!==1&&l.shift(),FI(l,t)||VU(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},FI=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),a=r?FI(e.slice(1),r):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(dS);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},KC=/^\[(.+)\]$/,VU=e=>{if(KC.test(e)){const t=KC.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},UU=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return HU(Object.entries(e.classGroups),n).forEach(([i,o])=>{Lb(o,r,i,t)}),r},Lb=(e,t,n,r)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:GC(t,a);i.classGroupId=n;return}if(typeof a=="function"){if(WU(a)){Lb(a(r),t,n,r);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([i,o])=>{Lb(o,GC(t,i),n,r)})})},GC=(e,t)=>{let n=e;return t.split(dS).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},WU=e=>e.isThemeGetter,HU=(e,t)=>t?e.map(([n,r])=>{const a=r.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[n,a]}):e,KU=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(i,o)=>{n.set(i,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return a(i,o),o},set(i,o){n.has(i)?n.set(i,o):a(i,o)}}},zI="!",GU=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,a=t[0],i=t.length,o=l=>{const c=[];let u=0,d=0,h;for(let p=0;p<l.length;p++){let v=l[p];if(u===0){if(v===a&&(r||l.slice(p,p+i)===t)){c.push(l.slice(d,p)),d=p+i;continue}if(v==="/"){h=p;continue}}v==="["?u++:v==="]"&&u--}const m=c.length===0?l:l.substring(d),f=m.startsWith(zI),x=f?m.substring(1):m,g=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:f,baseClassName:x,maybePostfixModifierPosition:g}};return n?l=>n({className:l,parseClassName:o}):o},YU=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},QU=e=>({cache:KU(e.cacheSize),parseClassName:GU(e),...qU(e)}),XU=/\s+/,JU=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(XU);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:f}=n(u);let x=!!f,g=r(x?m.substring(0,f):m);if(!g){if(!x){l=u+(l.length>0?" "+l:l);continue}if(g=r(m),!g){l=u+(l.length>0?" "+l:l);continue}x=!1}const p=YU(d).join(":"),v=h?p+zI:p,y=v+g;if(i.includes(y))continue;i.push(y);const w=a(g,x);for(let S=0;S<w.length;++S){const j=w[S];i.push(v+j)}l=u+(l.length>0?" "+l:l)}return l};function ZU(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=BI(t))&&(r&&(r+=" "),r+=n);return r}const BI=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=BI(e[r]))&&(n&&(n+=" "),n+=t);return n};function e9(e,...t){let n,r,a,i=o;function o(c){const u=t.reduce((d,h)=>h(d),e());return n=QU(u),r=n.cache.get,a=n.cache.set,i=l,l(c)}function l(c){const u=r(c);if(u)return u;const d=JU(c,n);return a(c,d),d}return function(){return i(ZU.apply(null,arguments))}}const Kt=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},qI=/^\[(?:([a-z-]+):)?(.+)\]$/i,t9=/^\d+\/\d+$/,n9=new Set(["px","full","screen"]),r9=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,s9=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,a9=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,i9=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,o9=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ua=e=>ru(e)||n9.has(e)||t9.test(e),Di=e=>wd(e,"length",p9),ru=e=>!!e&&!Number.isNaN(Number(e)),F0=e=>wd(e,"number",ru),ih=e=>!!e&&Number.isInteger(Number(e)),l9=e=>e.endsWith("%")&&ru(e.slice(0,-1)),ot=e=>qI.test(e),Mi=e=>r9.test(e),c9=new Set(["length","size","percentage"]),u9=e=>wd(e,c9,VI),d9=e=>wd(e,"position",VI),h9=new Set(["image","url"]),f9=e=>wd(e,h9,v9),m9=e=>wd(e,"",g9),oh=()=>!0,wd=(e,t,n)=>{const r=qI.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},p9=e=>s9.test(e)&&!a9.test(e),VI=()=>!1,g9=e=>i9.test(e),v9=e=>o9.test(e),x9=()=>{const e=Kt("colors"),t=Kt("spacing"),n=Kt("blur"),r=Kt("brightness"),a=Kt("borderColor"),i=Kt("borderRadius"),o=Kt("borderSpacing"),l=Kt("borderWidth"),c=Kt("contrast"),u=Kt("grayscale"),d=Kt("hueRotate"),h=Kt("invert"),m=Kt("gap"),f=Kt("gradientColorStops"),x=Kt("gradientColorStopPositions"),g=Kt("inset"),p=Kt("margin"),v=Kt("opacity"),y=Kt("padding"),w=Kt("saturate"),S=Kt("scale"),j=Kt("sepia"),N=Kt("skew"),C=Kt("space"),_=Kt("translate"),A=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],T=()=>["auto",ot,t],E=()=>[ot,t],I=()=>["",Ua,Di],R=()=>["auto",ru,ot],z=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],U=()=>["solid","dashed","dotted","double","none"],K=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],k=()=>["start","end","center","between","around","evenly","stretch"],D=()=>["","0",ot],J=()=>["auto","avoid","all","avoid-page","page","left","right","column"],W=()=>[ru,ot];return{cacheSize:500,separator:":",theme:{colors:[oh],spacing:[Ua,Di],blur:["none","",Mi,ot],brightness:W(),borderColor:[e],borderRadius:["none","","full",Mi,ot],borderSpacing:E(),borderWidth:I(),contrast:W(),grayscale:D(),hueRotate:W(),invert:D(),gap:E(),gradientColorStops:[e],gradientColorStopPositions:[l9,Di],inset:T(),margin:T(),opacity:W(),padding:E(),saturate:W(),scale:W(),sepia:D(),skew:W(),space:E(),translate:E()},classGroups:{aspect:[{aspect:["auto","square","video",ot]}],container:["container"],columns:[{columns:[Mi]}],"break-after":[{"break-after":J()}],"break-before":[{"break-before":J()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...z(),ot]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ih,ot]}],basis:[{basis:T()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ot]}],grow:[{grow:D()}],shrink:[{shrink:D()}],order:[{order:["first","last","none",ih,ot]}],"grid-cols":[{"grid-cols":[oh]}],"col-start-end":[{col:["auto",{span:["full",ih,ot]},ot]}],"col-start":[{"col-start":R()}],"col-end":[{"col-end":R()}],"grid-rows":[{"grid-rows":[oh]}],"row-start-end":[{row:["auto",{span:[ih,ot]},ot]}],"row-start":[{"row-start":R()}],"row-end":[{"row-end":R()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ot]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ot]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...k()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...k(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...k(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[p]}],mx:[{mx:[p]}],my:[{my:[p]}],ms:[{ms:[p]}],me:[{me:[p]}],mt:[{mt:[p]}],mr:[{mr:[p]}],mb:[{mb:[p]}],ml:[{ml:[p]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ot,t]}],"min-w":[{"min-w":[ot,t,"min","max","fit"]}],"max-w":[{"max-w":[ot,t,"none","full","min","max","fit","prose",{screen:[Mi]},Mi]}],h:[{h:[ot,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ot,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ot,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ot,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Mi,Di]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",F0]}],"font-family":[{font:[oh]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ot]}],"line-clamp":[{"line-clamp":["none",ru,F0]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ua,ot]}],"list-image":[{"list-image":["none",ot]}],"list-style-type":[{list:["none","disc","decimal",ot]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...U(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ua,Di]}],"underline-offset":[{"underline-offset":["auto",Ua,ot]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ot]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ot]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...z(),d9]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",u9]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},f9]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...U(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:U()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...U()]}],"outline-offset":[{"outline-offset":[Ua,ot]}],"outline-w":[{outline:[Ua,Di]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:I()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[Ua,Di]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Mi,m9]}],"shadow-color":[{shadow:[oh]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...K(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":K()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Mi,ot]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[w]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ot]}],duration:[{duration:W()}],ease:[{ease:["linear","in","out","in-out",ot]}],delay:[{delay:W()}],animate:[{animate:["none","spin","ping","pulse","bounce",ot]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[ih,ot]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ot]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ot]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ot]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Ua,Di,F0]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},y9=e9(x9);function Me(...e){return y9(st(e))}function vf(e){if(!e)return"ge inconnu";const t=new Date(e),n=new Date;if(isNaN(t.getTime()))return"Date invalide";let r=n.getFullYear()-t.getFullYear(),a=n.getMonth()-t.getMonth();if((a<0||a===0&&n.getDate()<t.getDate())&&(r--,a+=12),r===0){if(a===0){const i=Math.floor((n.getTime()-t.getTime())/864e5);return`${i} jour${i>1?"s":""}`}return`${a} mois`}else return a===0?`${r} an${r>1?"s":""}`:`${r} an${r>1?"s":""} et ${a} mois`}function Al(e){if(!e)return"Non renseign";const t=new Date(e);return isNaN(t.getTime())?"Date invalide":t.toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})}const w9=pU,UI=b.forwardRef(({className:e,...t},n)=>s.jsx(AI,{ref:n,className:Me("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));UI.displayName=AI.displayName;const b9=bm("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),WI=b.forwardRef(({className:e,variant:t,...n},r)=>s.jsx(PI,{ref:r,className:Me(b9({variant:t}),e),...n}));WI.displayName=PI.displayName;const j9=b.forwardRef(({className:e,...t},n)=>s.jsx(TI,{ref:n,className:Me("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));j9.displayName=TI.displayName;const HI=b.forwardRef(({className:e,...t},n)=>s.jsx(OI,{ref:n,className:Me("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(Ws,{className:"h-4 w-4"})}));HI.displayName=OI.displayName;const KI=b.forwardRef(({className:e,...t},n)=>s.jsx(EI,{ref:n,className:Me("text-sm font-semibold",e),...t}));KI.displayName=EI.displayName;const GI=b.forwardRef(({className:e,...t},n)=>s.jsx(kI,{ref:n,className:Me("text-sm opacity-90",e),...t}));GI.displayName=kI.displayName;function N9(){const{toasts:e}=it();return s.jsxs(w9,{children:[e.map(function({id:t,title:n,description:r,action:a,...i}){return s.jsxs(WI,{...i,children:[s.jsxs("div",{className:"grid gap-1",children:[n&&s.jsx(KI,{children:n}),r&&s.jsx(GI,{children:r})]}),a,s.jsx(HI,{})]},t)}),s.jsx(UI,{})]})}var YC=["light","dark"],S9="(prefers-color-scheme: dark)",_9=b.createContext(void 0),C9={setTheme:e=>{},themes:[]},A9=()=>{var e;return(e=b.useContext(_9))!=null?e:C9};b.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:a,defaultTheme:i,value:o,attrs:l,nonce:c})=>{let u=i==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(x=>`'${x}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=a?YC.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(x,g=!1,p=!0)=>{let v=o?o[x]:x,y=g?x+"|| ''":`'${v}'`,w="";return a&&p&&!g&&YC.includes(x)&&(w+=`d.style.colorScheme = '${x}';`),n==="class"?g||v?w+=`c.add(${y})`:w+="null":v&&(w+=`d[s](n,${y})`),w},f=e?`!function(){${d}${m(e)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${S9}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}${u?"":"else{"+m(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}else{${m(i,!1,!1)};}${h}}catch(t){}}();`;return b.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:f}})});var P9=e=>{switch(e){case"success":return T9;case"info":return D9;case"warning":return O9;case"error":return M9;default:return null}},E9=Array(12).fill(0),k9=({visible:e,className:t})=>L.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},L.createElement("div",{className:"sonner-spinner"},E9.map((n,r)=>L.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),T9=L.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},L.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),O9=L.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},L.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),D9=L.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},L.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),M9=L.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},L.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),I9=L.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},L.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),L.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),$9=()=>{let[e,t]=L.useState(document.hidden);return L.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},Fb=1,R9=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Fb++,i=this.toasts.find(l=>l.id===a),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),i?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...e,id:a,title:n}),{...l,...e,id:a,dismissible:o,title:n}):l):this.addToast({title:n,...r,dismissible:o,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),a=n!==void 0,i,o=r.then(async c=>{if(i=["resolve",c],L.isValidElement(c))a=!1,this.create({id:n,type:"default",message:c});else if(F9(c)&&!c.ok){a=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,d=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:n,type:"error",message:u,description:d})}else if(t.success!==void 0){a=!1;let u=typeof t.success=="function"?await t.success(c):t.success,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"success",message:u,description:d})}}).catch(async c=>{if(i=["reject",c],t.error!==void 0){a=!1;let u=typeof t.error=="function"?await t.error(c):t.error,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"error",message:u,description:d})}}).finally(()=>{var c;a&&(this.dismiss(n),n=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,u)=>o.then(()=>i[0]==="reject"?u(i[1]):c(i[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||Fb++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Or=new R9,L9=(e,t)=>{let n=(t==null?void 0:t.id)||Fb++;return Or.addToast({title:e,...t,id:n}),n},F9=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",z9=L9,B9=()=>Or.toasts,q9=()=>Or.getActiveToasts();Object.assign(z9,{success:Or.success,info:Or.info,warning:Or.warning,error:Or.error,custom:Or.custom,message:Or.message,promise:Or.promise,dismiss:Or.dismiss,loading:Or.loading},{getHistory:B9,getToasts:q9});function V9(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}V9(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function lp(e){return e.label!==void 0}var U9=3,W9="32px",H9="16px",QC=4e3,K9=356,G9=14,Y9=20,Q9=200;function Ds(...e){return e.filter(Boolean).join(" ")}function X9(e){let[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}var J9=e=>{var t,n,r,a,i,o,l,c,u,d,h;let{invert:m,toast:f,unstyled:x,interacting:g,setHeights:p,visibleToasts:v,heights:y,index:w,toasts:S,expanded:j,removeToast:N,defaultRichColors:C,closeButton:_,style:A,cancelButtonStyle:P,actionButtonStyle:T,className:E="",descriptionClassName:I="",duration:R,position:z,gap:U,loadingIcon:K,expandByDefault:k,classNames:D,icons:J,closeButtonAriaLabel:W="Close toast",pauseWhenPageIsHidden:Y}=e,[V,O]=L.useState(null),[le,te]=L.useState(null),[ce,ge]=L.useState(!1),[H,G]=L.useState(!1),[ue,re]=L.useState(!1),[ve,pe]=L.useState(!1),[ee,Pe]=L.useState(!1),[Ee,dt]=L.useState(0),[Dt,en]=L.useState(0),ae=L.useRef(f.duration||R||QC),B=L.useRef(null),he=L.useRef(null),Oe=w===0,St=w+1<=v,Qe=f.type,de=f.dismissible!==!1,Fe=f.className||"",Fn=f.descriptionClassName||"",Vr=L.useMemo(()=>y.findIndex(Xe=>Xe.toastId===f.id)||0,[y,f.id]),Qd=L.useMemo(()=>{var Xe;return(Xe=f.closeButton)!=null?Xe:_},[f.closeButton,_]),uc=L.useMemo(()=>f.duration||R||QC,[f.duration,R]),Uo=L.useRef(0),Ar=L.useRef(0),sa=L.useRef(0),Ts=L.useRef(null),[aa,Ei]=z.split("-"),dc=L.useMemo(()=>y.reduce((Xe,_t,zt)=>zt>=Vr?Xe:Xe+_t.height,0),[y,Vr]),Lm=$9(),n0=f.invert||m,Xd=Qe==="loading";Ar.current=L.useMemo(()=>Vr*U+dc,[Vr,dc]),L.useEffect(()=>{ae.current=uc},[uc]),L.useEffect(()=>{ge(!0)},[]),L.useEffect(()=>{let Xe=he.current;if(Xe){let _t=Xe.getBoundingClientRect().height;return en(_t),p(zt=>[{toastId:f.id,height:_t,position:f.position},...zt]),()=>p(zt=>zt.filter(Ur=>Ur.toastId!==f.id))}},[p,f.id]),L.useLayoutEffect(()=>{if(!ce)return;let Xe=he.current,_t=Xe.style.height;Xe.style.height="auto";let zt=Xe.getBoundingClientRect().height;Xe.style.height=_t,en(zt),p(Ur=>Ur.find(Wr=>Wr.toastId===f.id)?Ur.map(Wr=>Wr.toastId===f.id?{...Wr,height:zt}:Wr):[{toastId:f.id,height:zt,position:f.position},...Ur])},[ce,f.title,f.description,p,f.id]);let ia=L.useCallback(()=>{G(!0),dt(Ar.current),p(Xe=>Xe.filter(_t=>_t.toastId!==f.id)),setTimeout(()=>{N(f)},Q9)},[f,N,p,Ar]);L.useEffect(()=>{if(f.promise&&Qe==="loading"||f.duration===1/0||f.type==="loading")return;let Xe;return j||g||Y&&Lm?(()=>{if(sa.current<Uo.current){let _t=new Date().getTime()-Uo.current;ae.current=ae.current-_t}sa.current=new Date().getTime()})():ae.current!==1/0&&(Uo.current=new Date().getTime(),Xe=setTimeout(()=>{var _t;(_t=f.onAutoClose)==null||_t.call(f,f),ia()},ae.current)),()=>clearTimeout(Xe)},[j,g,f,Qe,Y,Lm,ia]),L.useEffect(()=>{f.delete&&ia()},[ia,f.delete]);function r0(){var Xe,_t,zt;return J!=null&&J.loading?L.createElement("div",{className:Ds(D==null?void 0:D.loader,(Xe=f==null?void 0:f.classNames)==null?void 0:Xe.loader,"sonner-loader"),"data-visible":Qe==="loading"},J.loading):K?L.createElement("div",{className:Ds(D==null?void 0:D.loader,(_t=f==null?void 0:f.classNames)==null?void 0:_t.loader,"sonner-loader"),"data-visible":Qe==="loading"},K):L.createElement(k9,{className:Ds(D==null?void 0:D.loader,(zt=f==null?void 0:f.classNames)==null?void 0:zt.loader),visible:Qe==="loading"})}return L.createElement("li",{tabIndex:0,ref:he,className:Ds(E,Fe,D==null?void 0:D.toast,(t=f==null?void 0:f.classNames)==null?void 0:t.toast,D==null?void 0:D.default,D==null?void 0:D[Qe],(n=f==null?void 0:f.classNames)==null?void 0:n[Qe]),"data-sonner-toast":"","data-rich-colors":(r=f.richColors)!=null?r:C,"data-styled":!(f.jsx||f.unstyled||x),"data-mounted":ce,"data-promise":!!f.promise,"data-swiped":ee,"data-removed":H,"data-visible":St,"data-y-position":aa,"data-x-position":Ei,"data-index":w,"data-front":Oe,"data-swiping":ue,"data-dismissible":de,"data-type":Qe,"data-invert":n0,"data-swipe-out":ve,"data-swipe-direction":le,"data-expanded":!!(j||k&&ce),style:{"--index":w,"--toasts-before":w,"--z-index":S.length-w,"--offset":`${H?Ee:Ar.current}px`,"--initial-height":k?"auto":`${Dt}px`,...A,...f.style},onDragEnd:()=>{re(!1),O(null),Ts.current=null},onPointerDown:Xe=>{Xd||!de||(B.current=new Date,dt(Ar.current),Xe.target.setPointerCapture(Xe.pointerId),Xe.target.tagName!=="BUTTON"&&(re(!0),Ts.current={x:Xe.clientX,y:Xe.clientY}))},onPointerUp:()=>{var Xe,_t,zt,Ur;if(ve||!de)return;Ts.current=null;let Wr=Number(((Xe=he.current)==null?void 0:Xe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),oa=Number(((_t=he.current)==null?void 0:_t.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Va=new Date().getTime()-((zt=B.current)==null?void 0:zt.getTime()),Hr=V==="x"?Wr:oa,la=Math.abs(Hr)/Va;if(Math.abs(Hr)>=Y9||la>.11){dt(Ar.current),(Ur=f.onDismiss)==null||Ur.call(f,f),te(V==="x"?Wr>0?"right":"left":oa>0?"down":"up"),ia(),pe(!0),Pe(!1);return}re(!1),O(null)},onPointerMove:Xe=>{var _t,zt,Ur,Wr;if(!Ts.current||!de||((_t=window.getSelection())==null?void 0:_t.toString().length)>0)return;let oa=Xe.clientY-Ts.current.y,Va=Xe.clientX-Ts.current.x,Hr=(zt=e.swipeDirections)!=null?zt:X9(z);!V&&(Math.abs(Va)>1||Math.abs(oa)>1)&&O(Math.abs(Va)>Math.abs(oa)?"x":"y");let la={x:0,y:0};V==="y"?(Hr.includes("top")||Hr.includes("bottom"))&&(Hr.includes("top")&&oa<0||Hr.includes("bottom")&&oa>0)&&(la.y=oa):V==="x"&&(Hr.includes("left")||Hr.includes("right"))&&(Hr.includes("left")&&Va<0||Hr.includes("right")&&Va>0)&&(la.x=Va),(Math.abs(la.x)>0||Math.abs(la.y)>0)&&Pe(!0),(Ur=he.current)==null||Ur.style.setProperty("--swipe-amount-x",`${la.x}px`),(Wr=he.current)==null||Wr.style.setProperty("--swipe-amount-y",`${la.y}px`)}},Qd&&!f.jsx?L.createElement("button",{"aria-label":W,"data-disabled":Xd,"data-close-button":!0,onClick:Xd||!de?()=>{}:()=>{var Xe;ia(),(Xe=f.onDismiss)==null||Xe.call(f,f)},className:Ds(D==null?void 0:D.closeButton,(a=f==null?void 0:f.classNames)==null?void 0:a.closeButton)},(i=J==null?void 0:J.close)!=null?i:I9):null,f.jsx||b.isValidElement(f.title)?f.jsx?f.jsx:typeof f.title=="function"?f.title():f.title:L.createElement(L.Fragment,null,Qe||f.icon||f.promise?L.createElement("div",{"data-icon":"",className:Ds(D==null?void 0:D.icon,(o=f==null?void 0:f.classNames)==null?void 0:o.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||r0():null,f.type!=="loading"?f.icon||(J==null?void 0:J[Qe])||P9(Qe):null):null,L.createElement("div",{"data-content":"",className:Ds(D==null?void 0:D.content,(l=f==null?void 0:f.classNames)==null?void 0:l.content)},L.createElement("div",{"data-title":"",className:Ds(D==null?void 0:D.title,(c=f==null?void 0:f.classNames)==null?void 0:c.title)},typeof f.title=="function"?f.title():f.title),f.description?L.createElement("div",{"data-description":"",className:Ds(I,Fn,D==null?void 0:D.description,(u=f==null?void 0:f.classNames)==null?void 0:u.description)},typeof f.description=="function"?f.description():f.description):null),b.isValidElement(f.cancel)?f.cancel:f.cancel&&lp(f.cancel)?L.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||P,onClick:Xe=>{var _t,zt;lp(f.cancel)&&de&&((zt=(_t=f.cancel).onClick)==null||zt.call(_t,Xe),ia())},className:Ds(D==null?void 0:D.cancelButton,(d=f==null?void 0:f.classNames)==null?void 0:d.cancelButton)},f.cancel.label):null,b.isValidElement(f.action)?f.action:f.action&&lp(f.action)?L.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||T,onClick:Xe=>{var _t,zt;lp(f.action)&&((zt=(_t=f.action).onClick)==null||zt.call(_t,Xe),!Xe.defaultPrevented&&ia())},className:Ds(D==null?void 0:D.actionButton,(h=f==null?void 0:f.classNames)==null?void 0:h.actionButton)},f.action.label):null))};function XC(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function Z9(e,t){let n={};return[e,t].forEach((r,a)=>{let i=a===1,o=i?"--mobile-offset":"--offset",l=i?H9:W9;function c(u){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${o}-${u}`]=l:n[`${o}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):c(l)}),n}var e7=b.forwardRef(function(e,t){let{invert:n,position:r="bottom-right",hotkey:a=["altKey","KeyT"],expand:i,closeButton:o,className:l,offset:c,mobileOffset:u,theme:d="light",richColors:h,duration:m,style:f,visibleToasts:x=U9,toastOptions:g,dir:p=XC(),gap:v=G9,loadingIcon:y,icons:w,containerAriaLabel:S="Notifications",pauseWhenPageIsHidden:j}=e,[N,C]=L.useState([]),_=L.useMemo(()=>Array.from(new Set([r].concat(N.filter(Y=>Y.position).map(Y=>Y.position)))),[N,r]),[A,P]=L.useState([]),[T,E]=L.useState(!1),[I,R]=L.useState(!1),[z,U]=L.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),K=L.useRef(null),k=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),D=L.useRef(null),J=L.useRef(!1),W=L.useCallback(Y=>{C(V=>{var O;return(O=V.find(le=>le.id===Y.id))!=null&&O.delete||Or.dismiss(Y.id),V.filter(({id:le})=>le!==Y.id)})},[]);return L.useEffect(()=>Or.subscribe(Y=>{if(Y.dismiss){C(V=>V.map(O=>O.id===Y.id?{...O,delete:!0}:O));return}setTimeout(()=>{iI.flushSync(()=>{C(V=>{let O=V.findIndex(le=>le.id===Y.id);return O!==-1?[...V.slice(0,O),{...V[O],...Y},...V.slice(O+1)]:[Y,...V]})})})}),[]),L.useEffect(()=>{if(d!=="system"){U(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?U("dark"):U("light")),typeof window>"u")return;let Y=window.matchMedia("(prefers-color-scheme: dark)");try{Y.addEventListener("change",({matches:V})=>{U(V?"dark":"light")})}catch{Y.addListener(({matches:O})=>{try{U(O?"dark":"light")}catch(le){console.error(le)}})}},[d]),L.useEffect(()=>{N.length<=1&&E(!1)},[N]),L.useEffect(()=>{let Y=V=>{var O,le;a.every(te=>V[te]||V.code===te)&&(E(!0),(O=K.current)==null||O.focus()),V.code==="Escape"&&(document.activeElement===K.current||(le=K.current)!=null&&le.contains(document.activeElement))&&E(!1)};return document.addEventListener("keydown",Y),()=>document.removeEventListener("keydown",Y)},[a]),L.useEffect(()=>{if(K.current)return()=>{D.current&&(D.current.focus({preventScroll:!0}),D.current=null,J.current=!1)}},[K.current]),L.createElement("section",{ref:t,"aria-label":`${S} ${k}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},_.map((Y,V)=>{var O;let[le,te]=Y.split("-");return N.length?L.createElement("ol",{key:Y,dir:p==="auto"?XC():p,tabIndex:-1,ref:K,className:l,"data-sonner-toaster":!0,"data-theme":z,"data-y-position":le,"data-lifted":T&&N.length>1&&!i,"data-x-position":te,style:{"--front-toast-height":`${((O=A[0])==null?void 0:O.height)||0}px`,"--width":`${K9}px`,"--gap":`${v}px`,...f,...Z9(c,u)},onBlur:ce=>{J.current&&!ce.currentTarget.contains(ce.relatedTarget)&&(J.current=!1,D.current&&(D.current.focus({preventScroll:!0}),D.current=null))},onFocus:ce=>{ce.target instanceof HTMLElement&&ce.target.dataset.dismissible==="false"||J.current||(J.current=!0,D.current=ce.relatedTarget)},onMouseEnter:()=>E(!0),onMouseMove:()=>E(!0),onMouseLeave:()=>{I||E(!1)},onDragEnd:()=>E(!1),onPointerDown:ce=>{ce.target instanceof HTMLElement&&ce.target.dataset.dismissible==="false"||R(!0)},onPointerUp:()=>R(!1)},N.filter(ce=>!ce.position&&V===0||ce.position===Y).map((ce,ge)=>{var H,G;return L.createElement(J9,{key:ce.id,icons:w,index:ge,toast:ce,defaultRichColors:h,duration:(H=g==null?void 0:g.duration)!=null?H:m,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:n,visibleToasts:x,closeButton:(G=g==null?void 0:g.closeButton)!=null?G:o,interacting:I,position:Y,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:W,toasts:N.filter(ue=>ue.position==ce.position),heights:A.filter(ue=>ue.position==ce.position),setHeights:P,expandByDefault:i,gap:v,loadingIcon:y,expanded:T,pauseWhenPageIsHidden:j,swipeDirections:e.swipeDirections})})):null}))});const t7=({...e})=>{const{theme:t="system"}=A9();return s.jsx(e7,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var n7=uN[" useId ".trim().toString()]||(()=>{}),r7=0;function Aa(e){const[t,n]=b.useState(n7());return Nn(()=>{n(r=>r??String(r7++))},[e]),t?`radix-${t}`:""}const s7=["top","right","bottom","left"],Co=Math.min,Xr=Math.max,Mg=Math.round,cp=Math.floor,Pa=e=>({x:e,y:e}),a7={left:"right",right:"left",bottom:"top",top:"bottom"},i7={start:"end",end:"start"};function zb(e,t,n){return Xr(e,Co(t,n))}function xi(e,t){return typeof e=="function"?e(t):e}function yi(e){return e.split("-")[0]}function bd(e){return e.split("-")[1]}function hS(e){return e==="x"?"y":"x"}function fS(e){return e==="y"?"height":"width"}const o7=new Set(["top","bottom"]);function ba(e){return o7.has(yi(e))?"y":"x"}function mS(e){return hS(ba(e))}function l7(e,t,n){n===void 0&&(n=!1);const r=bd(e),a=mS(e),i=fS(a);let o=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=Ig(o)),[o,Ig(o)]}function c7(e){const t=Ig(e);return[Bb(e),t,Bb(t)]}function Bb(e){return e.replace(/start|end/g,t=>i7[t])}const JC=["left","right"],ZC=["right","left"],u7=["top","bottom"],d7=["bottom","top"];function h7(e,t,n){switch(e){case"top":case"bottom":return n?t?ZC:JC:t?JC:ZC;case"left":case"right":return t?u7:d7;default:return[]}}function f7(e,t,n,r){const a=bd(e);let i=h7(yi(e),n==="start",r);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(Bb)))),i}function Ig(e){return e.replace(/left|right|bottom|top/g,t=>a7[t])}function m7(e){return{top:0,right:0,bottom:0,left:0,...e}}function YI(e){return typeof e!="number"?m7(e):{top:e,right:e,bottom:e,left:e}}function $g(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function eA(e,t,n){let{reference:r,floating:a}=e;const i=ba(t),o=mS(t),l=fS(o),c=yi(t),u=i==="y",d=r.x+r.width/2-a.width/2,h=r.y+r.height/2-a.height/2,m=r[l]/2-a[l]/2;let f;switch(c){case"top":f={x:d,y:r.y-a.height};break;case"bottom":f={x:d,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:h};break;case"left":f={x:r.x-a.width,y:h};break;default:f={x:r.x,y:r.y}}switch(bd(t)){case"start":f[o]-=m*(n&&u?-1:1);break;case"end":f[o]+=m*(n&&u?-1:1);break}return f}const p7=async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:i=[],platform:o}=n,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:h}=eA(u,r,c),m=r,f={},x=0;for(let g=0;g<l.length;g++){const{name:p,fn:v}=l[g],{x:y,y:w,data:S,reset:j}=await v({x:d,y:h,initialPlacement:r,placement:m,strategy:a,middlewareData:f,rects:u,platform:o,elements:{reference:e,floating:t}});d=y??d,h=w??h,f={...f,[p]:{...f[p],...S}},j&&x<=50&&(x++,typeof j=="object"&&(j.placement&&(m=j.placement),j.rects&&(u=j.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):j.rects),{x:d,y:h}=eA(u,m,c)),g=-1)}return{x:d,y:h,placement:m,strategy:a,middlewareData:f}};async function xf(e,t){var n;t===void 0&&(t={});const{x:r,y:a,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:m=!1,padding:f=0}=xi(t,e),x=YI(f),p=l[m?h==="floating"?"reference":"floating":h],v=$g(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(p)))==null||n?p:p.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),y=h==="floating"?{x:r,y:a,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),S=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},j=$g(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:w,strategy:c}):y);return{top:(v.top-j.top+x.top)/S.y,bottom:(j.bottom-v.bottom+x.bottom)/S.y,left:(v.left-j.left+x.left)/S.x,right:(j.right-v.right+x.right)/S.x}}const g7=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=xi(e,t)||{};if(u==null)return{};const h=YI(d),m={x:n,y:r},f=mS(a),x=fS(f),g=await o.getDimensions(u),p=f==="y",v=p?"top":"left",y=p?"bottom":"right",w=p?"clientHeight":"clientWidth",S=i.reference[x]+i.reference[f]-m[f]-i.floating[x],j=m[f]-i.reference[f],N=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let C=N?N[w]:0;(!C||!await(o.isElement==null?void 0:o.isElement(N)))&&(C=l.floating[w]||i.floating[x]);const _=S/2-j/2,A=C/2-g[x]/2-1,P=Co(h[v],A),T=Co(h[y],A),E=P,I=C-g[x]-T,R=C/2-g[x]/2+_,z=zb(E,R,I),U=!c.arrow&&bd(a)!=null&&R!==z&&i.reference[x]/2-(R<E?P:T)-g[x]/2<0,K=U?R<E?R-E:R-I:0;return{[f]:m[f]+K,data:{[f]:z,centerOffset:R-z-K,...U&&{alignmentOffset:K}},reset:U}}}),v7=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:g=!0,...p}=xi(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const v=yi(a),y=ba(l),w=yi(l)===l,S=await(c.isRTL==null?void 0:c.isRTL(u.floating)),j=m||(w||!g?[Ig(l)]:c7(l)),N=x!=="none";!m&&N&&j.push(...f7(l,g,x,S));const C=[l,...j],_=await xf(t,p),A=[];let P=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&A.push(_[v]),h){const R=l7(a,o,S);A.push(_[R[0]],_[R[1]])}if(P=[...P,{placement:a,overflows:A}],!A.every(R=>R<=0)){var T,E;const R=(((T=i.flip)==null?void 0:T.index)||0)+1,z=C[R];if(z&&(!(h==="alignment"?y!==ba(z):!1)||P.every(k=>k.overflows[0]>0&&ba(k.placement)===y)))return{data:{index:R,overflows:P},reset:{placement:z}};let U=(E=P.filter(K=>K.overflows[0]<=0).sort((K,k)=>K.overflows[1]-k.overflows[1])[0])==null?void 0:E.placement;if(!U)switch(f){case"bestFit":{var I;const K=(I=P.filter(k=>{if(N){const D=ba(k.placement);return D===y||D==="y"}return!0}).map(k=>[k.placement,k.overflows.filter(D=>D>0).reduce((D,J)=>D+J,0)]).sort((k,D)=>k[1]-D[1])[0])==null?void 0:I[0];K&&(U=K);break}case"initialPlacement":U=l;break}if(a!==U)return{reset:{placement:U}}}return{}}}};function tA(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function nA(e){return s7.some(t=>e[t]>=0)}const x7=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...a}=xi(e,t);switch(r){case"referenceHidden":{const i=await xf(t,{...a,elementContext:"reference"}),o=tA(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:nA(o)}}}case"escaped":{const i=await xf(t,{...a,altBoundary:!0}),o=tA(i,n.floating);return{data:{escapedOffsets:o,escaped:nA(o)}}}default:return{}}}}},QI=new Set(["left","top"]);async function y7(e,t){const{placement:n,platform:r,elements:a}=e,i=await(r.isRTL==null?void 0:r.isRTL(a.floating)),o=yi(n),l=bd(n),c=ba(n)==="y",u=QI.has(o)?-1:1,d=i&&c?-1:1,h=xi(t,e);let{mainAxis:m,crossAxis:f,alignmentAxis:x}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof x=="number"&&(f=l==="end"?x*-1:x),c?{x:f*d,y:m*u}:{x:m*u,y:f*d}}const w7=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:i,placement:o,middlewareData:l}=t,c=await y7(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},b7=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:p=>{let{x:v,y}=p;return{x:v,y}}},...c}=xi(e,t),u={x:n,y:r},d=await xf(t,c),h=ba(yi(a)),m=hS(h);let f=u[m],x=u[h];if(i){const p=m==="y"?"top":"left",v=m==="y"?"bottom":"right",y=f+d[p],w=f-d[v];f=zb(y,f,w)}if(o){const p=h==="y"?"top":"left",v=h==="y"?"bottom":"right",y=x+d[p],w=x-d[v];x=zb(y,x,w)}const g=l.fn({...t,[m]:f,[h]:x});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[m]:i,[h]:o}}}}}},j7=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:a,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=xi(e,t),d={x:n,y:r},h=ba(a),m=hS(h);let f=d[m],x=d[h];const g=xi(l,t),p=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const w=m==="y"?"height":"width",S=i.reference[m]-i.floating[w]+p.mainAxis,j=i.reference[m]+i.reference[w]-p.mainAxis;f<S?f=S:f>j&&(f=j)}if(u){var v,y;const w=m==="y"?"width":"height",S=QI.has(yi(a)),j=i.reference[h]-i.floating[w]+(S&&((v=o.offset)==null?void 0:v[h])||0)+(S?0:p.crossAxis),N=i.reference[h]+i.reference[w]+(S?0:((y=o.offset)==null?void 0:y[h])||0)-(S?p.crossAxis:0);x<j?x=j:x>N&&(x=N)}return{[m]:f,[h]:x}}}},N7=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...u}=xi(e,t),d=await xf(t,u),h=yi(a),m=bd(a),f=ba(a)==="y",{width:x,height:g}=i.floating;let p,v;h==="top"||h==="bottom"?(p=h,v=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(v=h,p=m==="end"?"top":"bottom");const y=g-d.top-d.bottom,w=x-d.left-d.right,S=Co(g-d[p],y),j=Co(x-d[v],w),N=!t.middlewareData.shift;let C=S,_=j;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(_=w),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(C=y),N&&!m){const P=Xr(d.left,0),T=Xr(d.right,0),E=Xr(d.top,0),I=Xr(d.bottom,0);f?_=x-2*(P!==0||T!==0?P+T:Xr(d.left,d.right)):C=g-2*(E!==0||I!==0?E+I:Xr(d.top,d.bottom))}await c({...t,availableWidth:_,availableHeight:C});const A=await o.getDimensions(l.floating);return x!==A.width||g!==A.height?{reset:{rects:!0}}:{}}}};function jx(){return typeof window<"u"}function jd(e){return XI(e)?(e.nodeName||"").toLowerCase():"#document"}function rs(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function La(e){var t;return(t=(XI(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function XI(e){return jx()?e instanceof Node||e instanceof rs(e).Node:!1}function Xs(e){return jx()?e instanceof Element||e instanceof rs(e).Element:!1}function Da(e){return jx()?e instanceof HTMLElement||e instanceof rs(e).HTMLElement:!1}function rA(e){return!jx()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof rs(e).ShadowRoot}const S7=new Set(["inline","contents"]);function jm(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=Js(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!S7.has(a)}const _7=new Set(["table","td","th"]);function C7(e){return _7.has(jd(e))}const A7=[":popover-open",":modal"];function Nx(e){return A7.some(t=>{try{return e.matches(t)}catch{return!1}})}const P7=["transform","translate","scale","rotate","perspective"],E7=["transform","translate","scale","rotate","perspective","filter"],k7=["paint","layout","strict","content"];function pS(e){const t=gS(),n=Xs(e)?Js(e):e;return P7.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||E7.some(r=>(n.willChange||"").includes(r))||k7.some(r=>(n.contain||"").includes(r))}function T7(e){let t=Ao(e);for(;Da(t)&&!Mu(t);){if(pS(t))return t;if(Nx(t))return null;t=Ao(t)}return null}function gS(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const O7=new Set(["html","body","#document"]);function Mu(e){return O7.has(jd(e))}function Js(e){return rs(e).getComputedStyle(e)}function Sx(e){return Xs(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ao(e){if(jd(e)==="html")return e;const t=e.assignedSlot||e.parentNode||rA(e)&&e.host||La(e);return rA(t)?t.host:t}function JI(e){const t=Ao(e);return Mu(t)?e.ownerDocument?e.ownerDocument.body:e.body:Da(t)&&jm(t)?t:JI(t)}function yf(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=JI(e),i=a===((r=e.ownerDocument)==null?void 0:r.body),o=rs(a);if(i){const l=qb(o);return t.concat(o,o.visualViewport||[],jm(a)?a:[],l&&n?yf(l):[])}return t.concat(a,yf(a,[],n))}function qb(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function ZI(e){const t=Js(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=Da(e),i=a?e.offsetWidth:n,o=a?e.offsetHeight:r,l=Mg(n)!==i||Mg(r)!==o;return l&&(n=i,r=o),{width:n,height:r,$:l}}function vS(e){return Xs(e)?e:e.contextElement}function su(e){const t=vS(e);if(!Da(t))return Pa(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:i}=ZI(t);let o=(i?Mg(n.width):n.width)/r,l=(i?Mg(n.height):n.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const D7=Pa(0);function e$(e){const t=rs(e);return!gS()||!t.visualViewport?D7:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function M7(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==rs(e)?!1:t}function Rl(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),i=vS(e);let o=Pa(1);t&&(r?Xs(r)&&(o=su(r)):o=su(e));const l=M7(i,n,r)?e$(i):Pa(0);let c=(a.left+l.x)/o.x,u=(a.top+l.y)/o.y,d=a.width/o.x,h=a.height/o.y;if(i){const m=rs(i),f=r&&Xs(r)?rs(r):r;let x=m,g=qb(x);for(;g&&r&&f!==x;){const p=su(g),v=g.getBoundingClientRect(),y=Js(g),w=v.left+(g.clientLeft+parseFloat(y.paddingLeft))*p.x,S=v.top+(g.clientTop+parseFloat(y.paddingTop))*p.y;c*=p.x,u*=p.y,d*=p.x,h*=p.y,c+=w,u+=S,x=rs(g),g=qb(x)}}return $g({width:d,height:h,x:c,y:u})}function xS(e,t){const n=Sx(e).scrollLeft;return t?t.left+n:Rl(La(e)).left+n}function t$(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),a=r.left+t.scrollLeft-(n?0:xS(e,r)),i=r.top+t.scrollTop;return{x:a,y:i}}function I7(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const i=a==="fixed",o=La(r),l=t?Nx(t.floating):!1;if(r===o||l&&i)return n;let c={scrollLeft:0,scrollTop:0},u=Pa(1);const d=Pa(0),h=Da(r);if((h||!h&&!i)&&((jd(r)!=="body"||jm(o))&&(c=Sx(r)),Da(r))){const f=Rl(r);u=su(r),d.x=f.x+r.clientLeft,d.y=f.y+r.clientTop}const m=o&&!h&&!i?t$(o,c,!0):Pa(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+m.x,y:n.y*u.y-c.scrollTop*u.y+d.y+m.y}}function $7(e){return Array.from(e.getClientRects())}function R7(e){const t=La(e),n=Sx(e),r=e.ownerDocument.body,a=Xr(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=Xr(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+xS(e);const l=-n.scrollTop;return Js(r).direction==="rtl"&&(o+=Xr(t.clientWidth,r.clientWidth)-a),{width:a,height:i,x:o,y:l}}function L7(e,t){const n=rs(e),r=La(e),a=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const u=gS();(!u||u&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:l,y:c}}const F7=new Set(["absolute","fixed"]);function z7(e,t){const n=Rl(e,!0,t==="fixed"),r=n.top+e.clientTop,a=n.left+e.clientLeft,i=Da(e)?su(e):Pa(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,u=r*i.y;return{width:o,height:l,x:c,y:u}}function sA(e,t,n){let r;if(t==="viewport")r=L7(e,n);else if(t==="document")r=R7(La(e));else if(Xs(t))r=z7(t,n);else{const a=e$(e);r={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return $g(r)}function n$(e,t){const n=Ao(e);return n===t||!Xs(n)||Mu(n)?!1:Js(n).position==="fixed"||n$(n,t)}function B7(e,t){const n=t.get(e);if(n)return n;let r=yf(e,[],!1).filter(l=>Xs(l)&&jd(l)!=="body"),a=null;const i=Js(e).position==="fixed";let o=i?Ao(e):e;for(;Xs(o)&&!Mu(o);){const l=Js(o),c=pS(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&F7.has(a.position)||jm(o)&&!c&&n$(e,o))?r=r.filter(d=>d!==o):a=l,o=Ao(o)}return t.set(e,r),r}function q7(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const o=[...n==="clippingAncestors"?Nx(t)?[]:B7(t,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,d)=>{const h=sA(t,d,a);return u.top=Xr(h.top,u.top),u.right=Co(h.right,u.right),u.bottom=Co(h.bottom,u.bottom),u.left=Xr(h.left,u.left),u},sA(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function V7(e){const{width:t,height:n}=ZI(e);return{width:t,height:n}}function U7(e,t,n){const r=Da(t),a=La(t),i=n==="fixed",o=Rl(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=Pa(0);function u(){c.x=xS(a)}if(r||!r&&!i)if((jd(t)!=="body"||jm(a))&&(l=Sx(t)),r){const f=Rl(t,!0,i,t);c.x=f.x+t.clientLeft,c.y=f.y+t.clientTop}else a&&u();i&&!r&&a&&u();const d=a&&!r&&!i?t$(a,l):Pa(0),h=o.left+l.scrollLeft-c.x-d.x,m=o.top+l.scrollTop-c.y-d.y;return{x:h,y:m,width:o.width,height:o.height}}function z0(e){return Js(e).position==="static"}function aA(e,t){if(!Da(e)||Js(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return La(e)===n&&(n=n.ownerDocument.body),n}function r$(e,t){const n=rs(e);if(Nx(e))return n;if(!Da(e)){let a=Ao(e);for(;a&&!Mu(a);){if(Xs(a)&&!z0(a))return a;a=Ao(a)}return n}let r=aA(e,t);for(;r&&C7(r)&&z0(r);)r=aA(r,t);return r&&Mu(r)&&z0(r)&&!pS(r)?n:r||T7(e)||n}const W7=async function(e){const t=this.getOffsetParent||r$,n=this.getDimensions,r=await n(e.floating);return{reference:U7(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function H7(e){return Js(e).direction==="rtl"}const K7={convertOffsetParentRelativeRectToViewportRelativeRect:I7,getDocumentElement:La,getClippingRect:q7,getOffsetParent:r$,getElementRects:W7,getClientRects:$7,getDimensions:V7,getScale:su,isElement:Xs,isRTL:H7};function s$(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function G7(e,t){let n=null,r;const a=La(e);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=e.getBoundingClientRect(),{left:d,top:h,width:m,height:f}=u;if(l||t(),!m||!f)return;const x=cp(h),g=cp(a.clientWidth-(d+m)),p=cp(a.clientHeight-(h+f)),v=cp(d),w={rootMargin:-x+"px "+-g+"px "+-p+"px "+-v+"px",threshold:Xr(0,Co(1,c))||1};let S=!0;function j(N){const C=N[0].intersectionRatio;if(C!==c){if(!S)return o();C?o(!1,C):r=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!s$(u,e.getBoundingClientRect())&&o(),S=!1}try{n=new IntersectionObserver(j,{...w,root:a.ownerDocument})}catch{n=new IntersectionObserver(j,w)}n.observe(e)}return o(!0),i}function Y7(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=vS(e),d=a||i?[...u?yf(u):[],...yf(t)]:[];d.forEach(v=>{a&&v.addEventListener("scroll",n,{passive:!0}),i&&v.addEventListener("resize",n)});const h=u&&l?G7(u,n):null;let m=-1,f=null;o&&(f=new ResizeObserver(v=>{let[y]=v;y&&y.target===u&&f&&(f.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var w;(w=f)==null||w.observe(t)})),n()}),u&&!c&&f.observe(u),f.observe(t));let x,g=c?Rl(e):null;c&&p();function p(){const v=Rl(e);g&&!s$(g,v)&&n(),g=v,x=requestAnimationFrame(p)}return n(),()=>{var v;d.forEach(y=>{a&&y.removeEventListener("scroll",n),i&&y.removeEventListener("resize",n)}),h==null||h(),(v=f)==null||v.disconnect(),f=null,c&&cancelAnimationFrame(x)}}const Q7=w7,X7=b7,J7=v7,Z7=N7,eW=x7,iA=g7,tW=j7,nW=(e,t,n)=>{const r=new Map,a={platform:K7,...n},i={...a.platform,_c:r};return p7(e,t,{...a,platform:i})};var rW=typeof document<"u",sW=function(){},ng=rW?b.useLayoutEffect:sW;function Rg(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Rg(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;r--!==0;){const i=a[r];if(!(i==="_owner"&&e.$$typeof)&&!Rg(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function a$(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function oA(e,t){const n=a$(e);return Math.round(t*n)/n}function B0(e){const t=b.useRef(e);return ng(()=>{t.current=e}),t}function aW(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,h]=b.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,f]=b.useState(r);Rg(m,r)||f(r);const[x,g]=b.useState(null),[p,v]=b.useState(null),y=b.useCallback(k=>{k!==N.current&&(N.current=k,g(k))},[]),w=b.useCallback(k=>{k!==C.current&&(C.current=k,v(k))},[]),S=i||x,j=o||p,N=b.useRef(null),C=b.useRef(null),_=b.useRef(d),A=c!=null,P=B0(c),T=B0(a),E=B0(u),I=b.useCallback(()=>{if(!N.current||!C.current)return;const k={placement:t,strategy:n,middleware:m};T.current&&(k.platform=T.current),nW(N.current,C.current,k).then(D=>{const J={...D,isPositioned:E.current!==!1};R.current&&!Rg(_.current,J)&&(_.current=J,Xl.flushSync(()=>{h(J)}))})},[m,t,n,T,E]);ng(()=>{u===!1&&_.current.isPositioned&&(_.current.isPositioned=!1,h(k=>({...k,isPositioned:!1})))},[u]);const R=b.useRef(!1);ng(()=>(R.current=!0,()=>{R.current=!1}),[]),ng(()=>{if(S&&(N.current=S),j&&(C.current=j),S&&j){if(P.current)return P.current(S,j,I);I()}},[S,j,I,P,A]);const z=b.useMemo(()=>({reference:N,floating:C,setReference:y,setFloating:w}),[y,w]),U=b.useMemo(()=>({reference:S,floating:j}),[S,j]),K=b.useMemo(()=>{const k={position:n,left:0,top:0};if(!U.floating)return k;const D=oA(U.floating,d.x),J=oA(U.floating,d.y);return l?{...k,transform:"translate("+D+"px, "+J+"px)",...a$(U.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:D,top:J}},[n,l,U.floating,d.x,d.y]);return b.useMemo(()=>({...d,update:I,refs:z,elements:U,floatingStyles:K}),[d,I,z,U,K])}const iW=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:a}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?iA({element:r.current,padding:a}).fn(n):{}:r?iA({element:r,padding:a}).fn(n):{}}}},oW=(e,t)=>({...Q7(e),options:[e,t]}),lW=(e,t)=>({...X7(e),options:[e,t]}),cW=(e,t)=>({...tW(e),options:[e,t]}),uW=(e,t)=>({...J7(e),options:[e,t]}),dW=(e,t)=>({...Z7(e),options:[e,t]}),hW=(e,t)=>({...eW(e),options:[e,t]}),fW=(e,t)=>({...iW(e),options:[e,t]});var mW="Arrow",i$=b.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5,...i}=e;return s.jsx(qe.svg,{...i,ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});i$.displayName=mW;var pW=i$;function yS(e){const[t,n]=b.useState(void 0);return Nn(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;n({width:o,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var wS="Popper",[o$,Nd]=Br(wS),[gW,l$]=o$(wS),c$=e=>{const{__scopePopper:t,children:n}=e,[r,a]=b.useState(null);return s.jsx(gW,{scope:t,anchor:r,onAnchorChange:a,children:n})};c$.displayName=wS;var u$="PopperAnchor",d$=b.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...a}=e,i=l$(u$,n),o=b.useRef(null),l=ft(t,o);return b.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:s.jsx(qe.div,{...a,ref:l})});d$.displayName=u$;var bS="PopperContent",[vW,xW]=o$(bS),h$=b.forwardRef((e,t)=>{var ce,ge,H,G,ue,re;const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:f="optimized",onPlaced:x,...g}=e,p=l$(bS,n),[v,y]=b.useState(null),w=ft(t,ve=>y(ve)),[S,j]=b.useState(null),N=yS(S),C=(N==null?void 0:N.width)??0,_=(N==null?void 0:N.height)??0,A=r+(i!=="center"?"-"+i:""),P=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},T=Array.isArray(u)?u:[u],E=T.length>0,I={padding:P,boundary:T.filter(wW),altBoundary:E},{refs:R,floatingStyles:z,placement:U,isPositioned:K,middlewareData:k}=aW({strategy:"fixed",placement:A,whileElementsMounted:(...ve)=>Y7(...ve,{animationFrame:f==="always"}),elements:{reference:p.anchor},middleware:[oW({mainAxis:a+_,alignmentAxis:o}),c&&lW({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?cW():void 0,...I}),c&&uW({...I}),dW({...I,apply:({elements:ve,rects:pe,availableWidth:ee,availableHeight:Pe})=>{const{width:Ee,height:dt}=pe.reference,Dt=ve.floating.style;Dt.setProperty("--radix-popper-available-width",`${ee}px`),Dt.setProperty("--radix-popper-available-height",`${Pe}px`),Dt.setProperty("--radix-popper-anchor-width",`${Ee}px`),Dt.setProperty("--radix-popper-anchor-height",`${dt}px`)}}),S&&fW({element:S,padding:l}),bW({arrowWidth:C,arrowHeight:_}),m&&hW({strategy:"referenceHidden",...I})]}),[D,J]=p$(U),W=Nr(x);Nn(()=>{K&&(W==null||W())},[K,W]);const Y=(ce=k.arrow)==null?void 0:ce.x,V=(ge=k.arrow)==null?void 0:ge.y,O=((H=k.arrow)==null?void 0:H.centerOffset)!==0,[le,te]=b.useState();return Nn(()=>{v&&te(window.getComputedStyle(v).zIndex)},[v]),s.jsx("div",{ref:R.setFloating,"data-radix-popper-content-wrapper":"",style:{...z,transform:K?z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:le,"--radix-popper-transform-origin":[(G=k.transformOrigin)==null?void 0:G.x,(ue=k.transformOrigin)==null?void 0:ue.y].join(" "),...((re=k.hide)==null?void 0:re.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(vW,{scope:n,placedSide:D,onArrowChange:j,arrowX:Y,arrowY:V,shouldHideArrow:O,children:s.jsx(qe.div,{"data-side":D,"data-align":J,...g,ref:w,style:{...g.style,animation:K?void 0:"none"}})})})});h$.displayName=bS;var f$="PopperArrow",yW={top:"bottom",right:"left",bottom:"top",left:"right"},m$=b.forwardRef(function(t,n){const{__scopePopper:r,...a}=t,i=xW(f$,r),o=yW[i.placedSide];return s.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:s.jsx(pW,{...a,ref:n,style:{...a.style,display:"block"}})})});m$.displayName=f$;function wW(e){return e!==null}var bW=e=>({name:"transformOrigin",options:e,fn(t){var p,v,y;const{placement:n,rects:r,middlewareData:a}=t,o=((p=a.arrow)==null?void 0:p.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[u,d]=p$(n),h={start:"0%",center:"50%",end:"100%"}[d],m=(((v=a.arrow)==null?void 0:v.x)??0)+l/2,f=(((y=a.arrow)==null?void 0:y.y)??0)+c/2;let x="",g="";return u==="bottom"?(x=o?h:`${m}px`,g=`${-c}px`):u==="top"?(x=o?h:`${m}px`,g=`${r.floating.height+c}px`):u==="right"?(x=`${-c}px`,g=o?h:`${f}px`):u==="left"&&(x=`${r.floating.width+c}px`,g=o?h:`${f}px`),{data:{x,y:g}}}});function p$(e){const[t,n="center"]=e.split("-");return[t,n]}var g$=c$,jS=d$,NS=h$,SS=m$,[_x,Pke]=Br("Tooltip",[Nd]),_S=Nd(),v$="TooltipProvider",jW=700,lA="tooltip.open",[NW,x$]=_x(v$),y$=e=>{const{__scopeTooltip:t,delayDuration:n=jW,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:i}=e,o=b.useRef(!0),l=b.useRef(!1),c=b.useRef(0);return b.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),s.jsx(NW,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:b.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:b.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:b.useCallback(u=>{l.current=u},[]),disableHoverableContent:a,children:i})};y$.displayName=v$;var w$="Tooltip",[Eke,Cx]=_x(w$),Vb="TooltipTrigger",SW=b.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=Cx(Vb,n),i=x$(Vb,n),o=_S(n),l=b.useRef(null),c=ft(t,l,a.onTriggerChange),u=b.useRef(!1),d=b.useRef(!1),h=b.useCallback(()=>u.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),s.jsx(jS,{asChild:!0,...o,children:s.jsx(qe.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:c,onPointerMove:Te(e.onPointerMove,m=>{m.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),d.current=!0)}),onPointerLeave:Te(e.onPointerLeave,()=>{a.onTriggerLeave(),d.current=!1}),onPointerDown:Te(e.onPointerDown,()=>{a.open&&a.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Te(e.onFocus,()=>{u.current||a.onOpen()}),onBlur:Te(e.onBlur,a.onClose),onClick:Te(e.onClick,a.onClose)})})});SW.displayName=Vb;var _W="TooltipPortal",[kke,CW]=_x(_W,{forceMount:void 0}),Iu="TooltipContent",b$=b.forwardRef((e,t)=>{const n=CW(Iu,e.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...i}=e,o=Cx(Iu,e.__scopeTooltip);return s.jsx(As,{present:r||o.open,children:o.disableHoverableContent?s.jsx(j$,{side:a,...i,ref:t}):s.jsx(AW,{side:a,...i,ref:t})})}),AW=b.forwardRef((e,t)=>{const n=Cx(Iu,e.__scopeTooltip),r=x$(Iu,e.__scopeTooltip),a=b.useRef(null),i=ft(t,a),[o,l]=b.useState(null),{trigger:c,onClose:u}=n,d=a.current,{onPointerInTransitChange:h}=r,m=b.useCallback(()=>{l(null),h(!1)},[h]),f=b.useCallback((x,g)=>{const p=x.currentTarget,v={x:x.clientX,y:x.clientY},y=OW(v,p.getBoundingClientRect()),w=DW(v,y),S=MW(g.getBoundingClientRect()),j=$W([...w,...S]);l(j),h(!0)},[h]);return b.useEffect(()=>()=>m(),[m]),b.useEffect(()=>{if(c&&d){const x=p=>f(p,d),g=p=>f(p,c);return c.addEventListener("pointerleave",x),d.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",x),d.removeEventListener("pointerleave",g)}}},[c,d,f,m]),b.useEffect(()=>{if(o){const x=g=>{const p=g.target,v={x:g.clientX,y:g.clientY},y=(c==null?void 0:c.contains(p))||(d==null?void 0:d.contains(p)),w=!IW(v,o);y?m():w&&(m(),u())};return document.addEventListener("pointermove",x),()=>document.removeEventListener("pointermove",x)}},[c,d,o,u,m]),s.jsx(j$,{...e,ref:i})}),[PW,EW]=_x(w$,{isInside:!1}),kW=cI("TooltipContent"),j$=b.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,c=Cx(Iu,n),u=_S(n),{onClose:d}=c;return b.useEffect(()=>(document.addEventListener(lA,d),()=>document.removeEventListener(lA,d)),[d]),b.useEffect(()=>{if(c.trigger){const h=m=>{const f=m.target;f!=null&&f.contains(c.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,d]),s.jsx(vd,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:s.jsxs(NS,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(kW,{children:r}),s.jsx(PW,{scope:n,isInside:!0,children:s.jsx(XV,{id:c.contentId,role:"tooltip",children:a||r})})]})})});b$.displayName=Iu;var N$="TooltipArrow",TW=b.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=_S(n);return EW(N$,n).isInside?null:s.jsx(SS,{...a,...r,ref:t})});TW.displayName=N$;function OW(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,a,i)){case i:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function DW(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function MW(e){const{top:t,right:n,bottom:r,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:r},{x:a,y:r}]}function IW(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],u=l.x,d=l.y,h=c.x,m=c.y;d>r!=m>r&&n<(h-u)*(r-d)/(m-d)+u&&(a=!a)}return a}function $W(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),RW(t)}function RW(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const a=e[r];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const a=e[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var LW=y$,S$=b$;const FW=LW,zW=b.forwardRef(({className:e,sideOffset:t=4,...n},r)=>s.jsx(S$,{ref:r,sideOffset:t,className:Me("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));zW.displayName=S$.displayName;var Sd=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},BW={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Yi,aN,RO,qW=(RO=class{constructor(){Be(this,Yi,BW);Be(this,aN,!1)}setTimeoutProvider(e){De(this,Yi,e)}setTimeout(e,t){return X(this,Yi).setTimeout(e,t)}clearTimeout(e){X(this,Yi).clearTimeout(e)}setInterval(e,t){return X(this,Yi).setInterval(e,t)}clearInterval(e){X(this,Yi).clearInterval(e)}},Yi=new WeakMap,aN=new WeakMap,RO),cl=new qW;function VW(e){setTimeout(e,0)}var Ll=typeof window>"u"||"Deno"in globalThis;function xr(){}function UW(e,t){return typeof e=="function"?e(t):e}function Ub(e){return typeof e=="number"&&e>=0&&e!==1/0}function _$(e,t){return Math.max(e+(t||0)-Date.now(),0)}function yo(e,t){return typeof e=="function"?e(t):e}function hs(e,t){return typeof e=="function"?e(t):e}function cA(e,t){const{type:n="all",exact:r,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==CS(o,t.options))return!1}else if(!wf(t.queryKey,o))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function uA(e,t){const{exact:n,status:r,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(Fl(t.options.mutationKey)!==Fl(i))return!1}else if(!wf(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||a&&!a(t))}function CS(e,t){return((t==null?void 0:t.queryKeyHashFn)||Fl)(e)}function Fl(e){return JSON.stringify(e,(t,n)=>Wb(n)?Object.keys(n).sort().reduce((r,a)=>(r[a]=n[a],r),{}):n)}function wf(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>wf(e[n],t[n])):!1}var WW=Object.prototype.hasOwnProperty;function C$(e,t){if(e===t)return e;const n=dA(e)&&dA(t);if(!n&&!(Wb(e)&&Wb(t)))return t;const a=(n?e:Object.keys(e)).length,i=n?t:Object.keys(t),o=i.length,l=n?new Array(o):{};let c=0;for(let u=0;u<o;u++){const d=n?u:i[u],h=e[d],m=t[d];if(h===m){l[d]=h,(n?u<a:WW.call(e,d))&&c++;continue}if(h===null||m===null||typeof h!="object"||typeof m!="object"){l[d]=m;continue}const f=C$(h,m);l[d]=f,f===h&&c++}return a===o&&c===a?e:l}function Lg(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function dA(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Wb(e){if(!hA(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!hA(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function hA(e){return Object.prototype.toString.call(e)==="[object Object]"}function HW(e){return new Promise(t=>{cl.setTimeout(t,e)})}function Hb(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?C$(e,t):t}function KW(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function GW(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var AS=Symbol();function A$(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===AS?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function P$(e,t){return typeof e=="function"?e(...t):!!e}var gl,Qi,mu,LO,YW=(LO=class extends Sd{constructor(){super();Be(this,gl);Be(this,Qi);Be(this,mu);De(this,mu,t=>{if(!Ll&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){X(this,Qi)||this.setEventListener(X(this,mu))}onUnsubscribe(){var t;this.hasListeners()||((t=X(this,Qi))==null||t.call(this),De(this,Qi,void 0))}setEventListener(t){var n;De(this,mu,t),(n=X(this,Qi))==null||n.call(this),De(this,Qi,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){X(this,gl)!==t&&(De(this,gl,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof X(this,gl)=="boolean"?X(this,gl):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},gl=new WeakMap,Qi=new WeakMap,mu=new WeakMap,LO),PS=new YW;function Kb(){let e,t;const n=new Promise((a,i)=>{e=a,t=i});n.status="pending",n.catch(()=>{});function r(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{r({status:"fulfilled",value:a}),e(a)},n.reject=a=>{r({status:"rejected",reason:a}),t(a)},n}var QW=VW;function XW(){let e=[],t=0,n=l=>{l()},r=l=>{l()},a=QW;const i=l=>{t?e.push(l):a(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{a=l}}}var Tn=XW(),pu,Xi,gu,FO,JW=(FO=class extends Sd{constructor(){super();Be(this,pu,!0);Be(this,Xi);Be(this,gu);De(this,gu,t=>{if(!Ll&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){X(this,Xi)||this.setEventListener(X(this,gu))}onUnsubscribe(){var t;this.hasListeners()||((t=X(this,Xi))==null||t.call(this),De(this,Xi,void 0))}setEventListener(t){var n;De(this,gu,t),(n=X(this,Xi))==null||n.call(this),De(this,Xi,t(this.setOnline.bind(this)))}setOnline(t){X(this,pu)!==t&&(De(this,pu,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return X(this,pu)}},pu=new WeakMap,Xi=new WeakMap,gu=new WeakMap,FO),Fg=new JW;function ZW(e){return Math.min(1e3*2**e,3e4)}function E$(e){return(e??"online")==="online"?Fg.isOnline():!0}var Gb=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function k$(e){let t=!1,n=0,r;const a=Kb(),i=()=>a.status!=="pending",o=g=>{var p;if(!i()){const v=new Gb(g);m(v),(p=e.onCancel)==null||p.call(e,v)}},l=()=>{t=!0},c=()=>{t=!1},u=()=>PS.isFocused()&&(e.networkMode==="always"||Fg.isOnline())&&e.canRun(),d=()=>E$(e.networkMode)&&e.canRun(),h=g=>{i()||(r==null||r(),a.resolve(g))},m=g=>{i()||(r==null||r(),a.reject(g))},f=()=>new Promise(g=>{var p;r=v=>{(i()||u())&&g(v)},(p=e.onPause)==null||p.call(e)}).then(()=>{var g;r=void 0,i()||(g=e.onContinue)==null||g.call(e)}),x=()=>{if(i())return;let g;const p=n===0?e.initialPromise:void 0;try{g=p??e.fn()}catch(v){g=Promise.reject(v)}Promise.resolve(g).then(h).catch(v=>{var N;if(i())return;const y=e.retry??(Ll?0:3),w=e.retryDelay??ZW,S=typeof w=="function"?w(n,v):w,j=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,v);if(t||!j){m(v);return}n++,(N=e.onFail)==null||N.call(e,n,v),HW(S).then(()=>u()?void 0:f()).then(()=>{t?m(v):x()})})};return{promise:a,status:()=>a.status,cancel:o,continue:()=>(r==null||r(),a),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?x():f().then(x),a)}}var vl,zO,T$=(zO=class{constructor(){Be(this,vl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ub(this.gcTime)&&De(this,vl,cl.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Ll?1/0:5*60*1e3))}clearGcTimeout(){X(this,vl)&&(cl.clearTimeout(X(this,vl)),De(this,vl,void 0))}},vl=new WeakMap,zO),xl,vu,ds,yl,Bn,cm,wl,Ls,Ka,BO,eH=(BO=class extends T${constructor(t){super();Be(this,Ls);Be(this,xl);Be(this,vu);Be(this,ds);Be(this,yl);Be(this,Bn);Be(this,cm);Be(this,wl);De(this,wl,!1),De(this,cm,t.defaultOptions),this.setOptions(t.options),this.observers=[],De(this,yl,t.client),De(this,ds,X(this,yl).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,De(this,xl,fA(this.options)),this.state=t.state??X(this,xl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=X(this,Bn))==null?void 0:t.promise}setOptions(t){if(this.options={...X(this,cm),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=fA(this.options);n.data!==void 0&&(this.setData(n.data,{updatedAt:n.dataUpdatedAt,manual:!0}),De(this,xl,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&X(this,ds).remove(this)}setData(t,n){const r=Hb(this.state.data,t,this.options);return lt(this,Ls,Ka).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){lt(this,Ls,Ka).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,a;const n=(r=X(this,Bn))==null?void 0:r.promise;return(a=X(this,Bn))==null||a.cancel(t),n?n.then(xr).catch(xr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(X(this,xl))}isActive(){return this.observers.some(t=>hs(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===AS||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>yo(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!_$(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=X(this,Bn))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=X(this,Bn))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),X(this,ds).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(X(this,Bn)&&(X(this,wl)?X(this,Bn).cancel({revert:!0}):X(this,Bn).cancelRetry()),this.scheduleGc()),X(this,ds).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||lt(this,Ls,Ka).call(this,{type:"invalidate"})}async fetch(t,n){var c,u,d,h,m,f,x,g,p,v,y,w;if(this.state.fetchStatus!=="idle"&&((c=X(this,Bn))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(X(this,Bn))return X(this,Bn).continueRetry(),X(this,Bn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const S=this.observers.find(j=>j.options.queryFn);S&&this.setOptions(S.options)}const r=new AbortController,a=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(De(this,wl,!0),r.signal)})},i=()=>{const S=A$(this.options,n),N=(()=>{const C={client:X(this,yl),queryKey:this.queryKey,meta:this.meta};return a(C),C})();return De(this,wl,!1),this.options.persister?this.options.persister(S,N,this):S(N)},l=(()=>{const S={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:X(this,yl),state:this.state,fetchFn:i};return a(S),S})();(u=this.options.behavior)==null||u.onFetch(l,this),De(this,vu,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&lt(this,Ls,Ka).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta}),De(this,Bn,k$({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,onCancel:S=>{S instanceof Gb&&S.revert&&this.setState({...X(this,vu),fetchStatus:"idle"}),r.abort()},onFail:(S,j)=>{lt(this,Ls,Ka).call(this,{type:"failed",failureCount:S,error:j})},onPause:()=>{lt(this,Ls,Ka).call(this,{type:"pause"})},onContinue:()=>{lt(this,Ls,Ka).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const S=await X(this,Bn).start();if(S===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(S),(f=(m=X(this,ds).config).onSuccess)==null||f.call(m,S,this),(g=(x=X(this,ds).config).onSettled)==null||g.call(x,S,this.state.error,this),S}catch(S){if(S instanceof Gb){if(S.silent)return X(this,Bn).promise;if(S.revert){if(this.state.data===void 0)throw S;return this.state.data}}throw lt(this,Ls,Ka).call(this,{type:"error",error:S}),(v=(p=X(this,ds).config).onError)==null||v.call(p,S,this),(w=(y=X(this,ds).config).onSettled)==null||w.call(y,this.state.data,S,this),S}finally{this.scheduleGc()}}},xl=new WeakMap,vu=new WeakMap,ds=new WeakMap,yl=new WeakMap,Bn=new WeakMap,cm=new WeakMap,wl=new WeakMap,Ls=new WeakSet,Ka=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...O$(r.data,this.options),fetchMeta:t.meta??null};case"success":const a={...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return De(this,vu,t.manual?a:void 0),a;case"error":const i=t.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),Tn.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),X(this,ds).notify({query:this,type:"updated",action:t})})},BO);function O$(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:E$(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function fA(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var kr,pt,um,pr,bl,xu,Ja,Ji,dm,yu,wu,jl,Nl,Zi,bu,Pt,Ch,Yb,Qb,Xb,Jb,Zb,ej,tj,D$,qO,tH=(qO=class extends Sd{constructor(t,n){super();Be(this,Pt);Be(this,kr);Be(this,pt);Be(this,um);Be(this,pr);Be(this,bl);Be(this,xu);Be(this,Ja);Be(this,Ji);Be(this,dm);Be(this,yu);Be(this,wu);Be(this,jl);Be(this,Nl);Be(this,Zi);Be(this,bu,new Set);this.options=n,De(this,kr,t),De(this,Ji,null),De(this,Ja,Kb()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(X(this,pt).addObserver(this),mA(X(this,pt),this.options)?lt(this,Pt,Ch).call(this):this.updateResult(),lt(this,Pt,Jb).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return nj(X(this,pt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return nj(X(this,pt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,lt(this,Pt,Zb).call(this),lt(this,Pt,ej).call(this),X(this,pt).removeObserver(this)}setOptions(t){const n=this.options,r=X(this,pt);if(this.options=X(this,kr).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof hs(this.options.enabled,X(this,pt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");lt(this,Pt,tj).call(this),X(this,pt).setOptions(this.options),n._defaulted&&!Lg(this.options,n)&&X(this,kr).getQueryCache().notify({type:"observerOptionsUpdated",query:X(this,pt),observer:this});const a=this.hasListeners();a&&pA(X(this,pt),r,this.options,n)&&lt(this,Pt,Ch).call(this),this.updateResult(),a&&(X(this,pt)!==r||hs(this.options.enabled,X(this,pt))!==hs(n.enabled,X(this,pt))||yo(this.options.staleTime,X(this,pt))!==yo(n.staleTime,X(this,pt)))&&lt(this,Pt,Yb).call(this);const i=lt(this,Pt,Qb).call(this);a&&(X(this,pt)!==r||hs(this.options.enabled,X(this,pt))!==hs(n.enabled,X(this,pt))||i!==X(this,Zi))&&lt(this,Pt,Xb).call(this,i)}getOptimisticResult(t){const n=X(this,kr).getQueryCache().build(X(this,kr),t),r=this.createResult(n,t);return rH(this,r)&&(De(this,pr,r),De(this,xu,this.options),De(this,bl,X(this,pt).state)),r}getCurrentResult(){return X(this,pr)}trackResult(t,n){return new Proxy(t,{get:(r,a)=>(this.trackProp(a),n==null||n(a),a==="promise"&&!this.options.experimental_prefetchInRender&&X(this,Ja).status==="pending"&&X(this,Ja).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(r,a))})}trackProp(t){X(this,bu).add(t)}getCurrentQuery(){return X(this,pt)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=X(this,kr).defaultQueryOptions(t),r=X(this,kr).getQueryCache().build(X(this,kr),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return lt(this,Pt,Ch).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),X(this,pr)))}createResult(t,n){var A;const r=X(this,pt),a=this.options,i=X(this,pr),o=X(this,bl),l=X(this,xu),u=t!==r?t.state:X(this,um),{state:d}=t;let h={...d},m=!1,f;if(n._optimisticResults){const P=this.hasListeners(),T=!P&&mA(t,n),E=P&&pA(t,r,n,a);(T||E)&&(h={...h,...O$(d.data,t.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:x,errorUpdatedAt:g,status:p}=h;f=h.data;let v=!1;if(n.placeholderData!==void 0&&f===void 0&&p==="pending"){let P;i!=null&&i.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(P=i.data,v=!0):P=typeof n.placeholderData=="function"?n.placeholderData((A=X(this,wu))==null?void 0:A.state.data,X(this,wu)):n.placeholderData,P!==void 0&&(p="success",f=Hb(i==null?void 0:i.data,P,n),m=!0)}if(n.select&&f!==void 0&&!v)if(i&&f===(o==null?void 0:o.data)&&n.select===X(this,dm))f=X(this,yu);else try{De(this,dm,n.select),f=n.select(f),f=Hb(i==null?void 0:i.data,f,n),De(this,yu,f),De(this,Ji,null)}catch(P){De(this,Ji,P)}X(this,Ji)&&(x=X(this,Ji),f=X(this,yu),g=Date.now(),p="error");const y=h.fetchStatus==="fetching",w=p==="pending",S=p==="error",j=w&&y,N=f!==void 0,_={status:p,fetchStatus:h.fetchStatus,isPending:w,isSuccess:p==="success",isError:S,isInitialLoading:j,isLoading:j,data:f,dataUpdatedAt:h.dataUpdatedAt,error:x,errorUpdatedAt:g,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:y,isRefetching:y&&!w,isLoadingError:S&&!N,isPaused:h.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:S&&N,isStale:ES(t,n),refetch:this.refetch,promise:X(this,Ja),isEnabled:hs(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const P=I=>{_.status==="error"?I.reject(_.error):_.data!==void 0&&I.resolve(_.data)},T=()=>{const I=De(this,Ja,_.promise=Kb());P(I)},E=X(this,Ja);switch(E.status){case"pending":t.queryHash===r.queryHash&&P(E);break;case"fulfilled":(_.status==="error"||_.data!==E.value)&&T();break;case"rejected":(_.status!=="error"||_.error!==E.reason)&&T();break}}return _}updateResult(){const t=X(this,pr),n=this.createResult(X(this,pt),this.options);if(De(this,bl,X(this,pt).state),De(this,xu,this.options),X(this,bl).data!==void 0&&De(this,wu,X(this,pt)),Lg(n,t))return;De(this,pr,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!X(this,bu).size)return!0;const o=new Set(i??X(this,bu));return this.options.throwOnError&&o.add("error"),Object.keys(X(this,pr)).some(l=>{const c=l;return X(this,pr)[c]!==t[c]&&o.has(c)})};lt(this,Pt,D$).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&lt(this,Pt,Jb).call(this)}},kr=new WeakMap,pt=new WeakMap,um=new WeakMap,pr=new WeakMap,bl=new WeakMap,xu=new WeakMap,Ja=new WeakMap,Ji=new WeakMap,dm=new WeakMap,yu=new WeakMap,wu=new WeakMap,jl=new WeakMap,Nl=new WeakMap,Zi=new WeakMap,bu=new WeakMap,Pt=new WeakSet,Ch=function(t){lt(this,Pt,tj).call(this);let n=X(this,pt).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(xr)),n},Yb=function(){lt(this,Pt,Zb).call(this);const t=yo(this.options.staleTime,X(this,pt));if(Ll||X(this,pr).isStale||!Ub(t))return;const r=_$(X(this,pr).dataUpdatedAt,t)+1;De(this,jl,cl.setTimeout(()=>{X(this,pr).isStale||this.updateResult()},r))},Qb=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(X(this,pt)):this.options.refetchInterval)??!1},Xb=function(t){lt(this,Pt,ej).call(this),De(this,Zi,t),!(Ll||hs(this.options.enabled,X(this,pt))===!1||!Ub(X(this,Zi))||X(this,Zi)===0)&&De(this,Nl,cl.setInterval(()=>{(this.options.refetchIntervalInBackground||PS.isFocused())&&lt(this,Pt,Ch).call(this)},X(this,Zi)))},Jb=function(){lt(this,Pt,Yb).call(this),lt(this,Pt,Xb).call(this,lt(this,Pt,Qb).call(this))},Zb=function(){X(this,jl)&&(cl.clearTimeout(X(this,jl)),De(this,jl,void 0))},ej=function(){X(this,Nl)&&(cl.clearInterval(X(this,Nl)),De(this,Nl,void 0))},tj=function(){const t=X(this,kr).getQueryCache().build(X(this,kr),this.options);if(t===X(this,pt))return;const n=X(this,pt);De(this,pt,t),De(this,um,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},D$=function(t){Tn.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(X(this,pr))}),X(this,kr).getQueryCache().notify({query:X(this,pt),type:"observerResultsUpdated"})})},qO);function nH(e,t){return hs(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function mA(e,t){return nH(e,t)||e.state.data!==void 0&&nj(e,t,t.refetchOnMount)}function nj(e,t,n){if(hs(t.enabled,e)!==!1&&yo(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&ES(e,t)}return!1}function pA(e,t,n,r){return(e!==t||hs(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&ES(e,n)}function ES(e,t){return hs(t.enabled,e)!==!1&&e.isStaleByTime(yo(t.staleTime,e))}function rH(e,t){return!Lg(e.getCurrentResult(),t)}function gA(e){return{onFetch:(t,n)=>{var d,h,m,f,x;const r=t.options,a=(m=(h=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:m.direction,i=((f=t.state.data)==null?void 0:f.pages)||[],o=((x=t.state.data)==null?void 0:x.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let g=!1;const p=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},v=A$(t.options,t.fetchOptions),y=async(w,S,j)=>{if(g)return Promise.reject();if(S==null&&w.pages.length)return Promise.resolve(w);const C=(()=>{const T={client:t.client,queryKey:t.queryKey,pageParam:S,direction:j?"backward":"forward",meta:t.options.meta};return p(T),T})(),_=await v(C),{maxPages:A}=t.options,P=j?GW:KW;return{pages:P(w.pages,_,A),pageParams:P(w.pageParams,S,A)}};if(a&&i.length){const w=a==="backward",S=w?sH:vA,j={pages:i,pageParams:o},N=S(r,j);l=await y(j,N,w)}else{const w=e??i.length;do{const S=c===0?o[0]??r.initialPageParam:vA(r,l);if(c>0&&S==null)break;l=await y(l,S),c++}while(c<w)}return l};t.options.persister?t.fetchFn=()=>{var g,p;return(p=(g=t.options).persister)==null?void 0:p.call(g,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function vA(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function sH(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var hm,fa,gr,Sl,ma,Ri,VO,aH=(VO=class extends T${constructor(t){super();Be(this,ma);Be(this,hm);Be(this,fa);Be(this,gr);Be(this,Sl);De(this,hm,t.client),this.mutationId=t.mutationId,De(this,gr,t.mutationCache),De(this,fa,[]),this.state=t.state||M$(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){X(this,fa).includes(t)||(X(this,fa).push(t),this.clearGcTimeout(),X(this,gr).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){De(this,fa,X(this,fa).filter(n=>n!==t)),this.scheduleGc(),X(this,gr).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){X(this,fa).length||(this.state.status==="pending"?this.scheduleGc():X(this,gr).remove(this))}continue(){var t;return((t=X(this,Sl))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,c,u,d,h,m,f,x,g,p,v,y,w,S,j,N,C,_,A;const n=()=>{lt(this,ma,Ri).call(this,{type:"continue"})},r={client:X(this,hm),meta:this.options.meta,mutationKey:this.options.mutationKey};De(this,Sl,k$({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(P,T)=>{lt(this,ma,Ri).call(this,{type:"failed",failureCount:P,error:T})},onPause:()=>{lt(this,ma,Ri).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>X(this,gr).canRun(this)}));const a=this.state.status==="pending",i=!X(this,Sl).canStart();try{if(a)n();else{lt(this,ma,Ri).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(o=X(this,gr).config).onMutate)==null?void 0:l.call(o,t,this,r));const T=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,t,r));T!==this.state.context&&lt(this,ma,Ri).call(this,{type:"pending",context:T,variables:t,isPaused:i})}const P=await X(this,Sl).start();return await((h=(d=X(this,gr).config).onSuccess)==null?void 0:h.call(d,P,t,this.state.context,this,r)),await((f=(m=this.options).onSuccess)==null?void 0:f.call(m,P,t,this.state.context,r)),await((g=(x=X(this,gr).config).onSettled)==null?void 0:g.call(x,P,null,this.state.variables,this.state.context,this,r)),await((v=(p=this.options).onSettled)==null?void 0:v.call(p,P,null,t,this.state.context,r)),lt(this,ma,Ri).call(this,{type:"success",data:P}),P}catch(P){try{throw await((w=(y=X(this,gr).config).onError)==null?void 0:w.call(y,P,t,this.state.context,this,r)),await((j=(S=this.options).onError)==null?void 0:j.call(S,P,t,this.state.context,r)),await((C=(N=X(this,gr).config).onSettled)==null?void 0:C.call(N,void 0,P,this.state.variables,this.state.context,this,r)),await((A=(_=this.options).onSettled)==null?void 0:A.call(_,void 0,P,t,this.state.context,r)),P}finally{lt(this,ma,Ri).call(this,{type:"error",error:P})}}finally{X(this,gr).runNext(this)}}},hm=new WeakMap,fa=new WeakMap,gr=new WeakMap,Sl=new WeakMap,ma=new WeakSet,Ri=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Tn.batch(()=>{X(this,fa).forEach(r=>{r.onMutationUpdate(t)}),X(this,gr).notify({mutation:this,type:"updated",action:t})})},VO);function M$(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Za,Fs,fm,UO,iH=(UO=class extends Sd{constructor(t={}){super();Be(this,Za);Be(this,Fs);Be(this,fm);this.config=t,De(this,Za,new Set),De(this,Fs,new Map),De(this,fm,0)}build(t,n,r){const a=new aH({client:t,mutationCache:this,mutationId:++qm(this,fm)._,options:t.defaultMutationOptions(n),state:r});return this.add(a),a}add(t){X(this,Za).add(t);const n=up(t);if(typeof n=="string"){const r=X(this,Fs).get(n);r?r.push(t):X(this,Fs).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(X(this,Za).delete(t)){const n=up(t);if(typeof n=="string"){const r=X(this,Fs).get(n);if(r)if(r.length>1){const a=r.indexOf(t);a!==-1&&r.splice(a,1)}else r[0]===t&&X(this,Fs).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=up(t);if(typeof n=="string"){const r=X(this,Fs).get(n),a=r==null?void 0:r.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var r;const n=up(t);if(typeof n=="string"){const a=(r=X(this,Fs).get(n))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Tn.batch(()=>{X(this,Za).forEach(t=>{this.notify({type:"removed",mutation:t})}),X(this,Za).clear(),X(this,Fs).clear()})}getAll(){return Array.from(X(this,Za))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>uA(n,r))}findAll(t={}){return this.getAll().filter(n=>uA(t,n))}notify(t){Tn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return Tn.batch(()=>Promise.all(t.map(n=>n.continue().catch(xr))))}},Za=new WeakMap,Fs=new WeakMap,fm=new WeakMap,UO);function up(e){var t;return(t=e.options.scope)==null?void 0:t.id}var ei,eo,Tr,ti,di,rg,rj,WO,oH=(WO=class extends Sd{constructor(n,r){super();Be(this,di);Be(this,ei);Be(this,eo);Be(this,Tr);Be(this,ti);De(this,ei,n),this.setOptions(r),this.bindMethods(),lt(this,di,rg).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var a;const r=this.options;this.options=X(this,ei).defaultMutationOptions(n),Lg(this.options,r)||X(this,ei).getMutationCache().notify({type:"observerOptionsUpdated",mutation:X(this,Tr),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Fl(r.mutationKey)!==Fl(this.options.mutationKey)?this.reset():((a=X(this,Tr))==null?void 0:a.state.status)==="pending"&&X(this,Tr).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=X(this,Tr))==null||n.removeObserver(this)}onMutationUpdate(n){lt(this,di,rg).call(this),lt(this,di,rj).call(this,n)}getCurrentResult(){return X(this,eo)}reset(){var n;(n=X(this,Tr))==null||n.removeObserver(this),De(this,Tr,void 0),lt(this,di,rg).call(this),lt(this,di,rj).call(this)}mutate(n,r){var a;return De(this,ti,r),(a=X(this,Tr))==null||a.removeObserver(this),De(this,Tr,X(this,ei).getMutationCache().build(X(this,ei),this.options)),X(this,Tr).addObserver(this),X(this,Tr).execute(n)}},ei=new WeakMap,eo=new WeakMap,Tr=new WeakMap,ti=new WeakMap,di=new WeakSet,rg=function(){var r;const n=((r=X(this,Tr))==null?void 0:r.state)??M$();De(this,eo,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},rj=function(n){Tn.batch(()=>{var r,a,i,o,l,c,u,d;if(X(this,ti)&&this.hasListeners()){const h=X(this,eo).variables,m=X(this,eo).context,f={client:X(this,ei),meta:this.options.meta,mutationKey:this.options.mutationKey};(n==null?void 0:n.type)==="success"?((a=(r=X(this,ti)).onSuccess)==null||a.call(r,n.data,h,m,f),(o=(i=X(this,ti)).onSettled)==null||o.call(i,n.data,null,h,m,f)):(n==null?void 0:n.type)==="error"&&((c=(l=X(this,ti)).onError)==null||c.call(l,n.error,h,m,f),(d=(u=X(this,ti)).onSettled)==null||d.call(u,void 0,n.error,h,m,f))}this.listeners.forEach(h=>{h(X(this,eo))})})},WO),pa,HO,lH=(HO=class extends Sd{constructor(t={}){super();Be(this,pa);this.config=t,De(this,pa,new Map)}build(t,n,r){const a=n.queryKey,i=n.queryHash??CS(a,n);let o=this.get(i);return o||(o=new eH({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){X(this,pa).has(t.queryHash)||(X(this,pa).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=X(this,pa).get(t.queryHash);n&&(t.destroy(),n===t&&X(this,pa).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Tn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return X(this,pa).get(t)}getAll(){return[...X(this,pa).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>cA(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>cA(t,r)):n}notify(t){Tn.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){Tn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Tn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},pa=new WeakMap,HO),un,to,no,ju,Nu,ro,Su,_u,KO,cH=(KO=class{constructor(e={}){Be(this,un);Be(this,to);Be(this,no);Be(this,ju);Be(this,Nu);Be(this,ro);Be(this,Su);Be(this,_u);De(this,un,e.queryCache||new lH),De(this,to,e.mutationCache||new iH),De(this,no,e.defaultOptions||{}),De(this,ju,new Map),De(this,Nu,new Map),De(this,ro,0)}mount(){qm(this,ro)._++,X(this,ro)===1&&(De(this,Su,PS.subscribe(async e=>{e&&(await this.resumePausedMutations(),X(this,un).onFocus())})),De(this,_u,Fg.subscribe(async e=>{e&&(await this.resumePausedMutations(),X(this,un).onOnline())})))}unmount(){var e,t;qm(this,ro)._--,X(this,ro)===0&&((e=X(this,Su))==null||e.call(this),De(this,Su,void 0),(t=X(this,_u))==null||t.call(this),De(this,_u,void 0))}isFetching(e){return X(this,un).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return X(this,to).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=X(this,un).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=X(this,un).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(yo(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return X(this,un).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),a=X(this,un).get(r.queryHash),i=a==null?void 0:a.state.data,o=UW(t,i);if(o!==void 0)return X(this,un).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return Tn.batch(()=>X(this,un).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=X(this,un).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=X(this,un);Tn.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=X(this,un);return Tn.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=Tn.batch(()=>X(this,un).findAll(e).map(a=>a.cancel(n)));return Promise.all(r).then(xr).catch(xr)}invalidateQueries(e,t={}){return Tn.batch(()=>(X(this,un).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=Tn.batch(()=>X(this,un).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,n);return n.throwOnError||(i=i.catch(xr)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(xr)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=X(this,un).build(this,t);return n.isStaleByTime(yo(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(xr).catch(xr)}fetchInfiniteQuery(e){return e.behavior=gA(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(xr).catch(xr)}ensureInfiniteQueryData(e){return e.behavior=gA(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Fg.isOnline()?X(this,to).resumePausedMutations():Promise.resolve()}getQueryCache(){return X(this,un)}getMutationCache(){return X(this,to)}getDefaultOptions(){return X(this,no)}setDefaultOptions(e){De(this,no,e)}setQueryDefaults(e,t){X(this,ju).set(Fl(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...X(this,ju).values()],n={};return t.forEach(r=>{wf(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){X(this,Nu).set(Fl(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...X(this,Nu).values()],n={};return t.forEach(r=>{wf(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...X(this,no).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=CS(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===AS&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...X(this,no).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){X(this,un).clear(),X(this,to).clear()}},un=new WeakMap,to=new WeakMap,no=new WeakMap,ju=new WeakMap,Nu=new WeakMap,ro=new WeakMap,Su=new WeakMap,_u=new WeakMap,KO),I$=b.createContext(void 0),xt=e=>{const t=b.useContext(I$);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},uH=({client:e,children:t})=>(b.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(I$.Provider,{value:e,children:t})),$$=b.createContext(!1),dH=()=>b.useContext($$);$$.Provider;function hH(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var fH=b.createContext(hH()),mH=()=>b.useContext(fH),pH=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},gH=e=>{b.useEffect(()=>{e.clearReset()},[e])},vH=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(a&&e.data===void 0||P$(n,[e.error,r])),xH=e=>{if(e.suspense){const n=a=>a==="static"?a:Math.max(a??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...a)=>n(r(...a)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},yH=(e,t)=>e.isLoading&&e.isFetching&&!t,wH=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,xA=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function bH(e,t,n){var h,m,f,x,g;const r=dH(),a=mH(),i=xt(),o=i.defaultQueryOptions(e);(m=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||m.call(h,o),o._optimisticResults=r?"isRestoring":"optimistic",xH(o),pH(o,a),gH(a);const l=!i.getQueryCache().get(o.queryHash),[c]=b.useState(()=>new t(i,o)),u=c.getOptimisticResult(o),d=!r&&e.subscribed!==!1;if(b.useSyncExternalStore(b.useCallback(p=>{const v=d?c.subscribe(Tn.batchCalls(p)):xr;return c.updateResult(),v},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),b.useEffect(()=>{c.setOptions(o)},[o,c]),wH(o,u))throw xA(o,c,a);if(vH({result:u,errorResetBoundary:a,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;if((x=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||x.call(f,o,u),o.experimental_prefetchInRender&&!Ll&&yH(u,r)){const p=l?xA(o,c,a):(g=i.getQueryCache().get(o.queryHash))==null?void 0:g.promise;p==null||p.catch(xr).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?u:c.trackResult(u)}function Ft(e,t){return bH(e,tH)}function jt(e,t){const n=xt(),[r]=b.useState(()=>new oH(n,e));b.useEffect(()=>{r.setOptions(e)},[r,e]);const a=b.useSyncExternalStore(b.useCallback(o=>r.subscribe(Tn.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=b.useCallback((o,l)=>{r.mutate(o,l).catch(xr)},[r]);if(a.error&&P$(r.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bf(){return bf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bf.apply(this,arguments)}var io;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(io||(io={}));const yA="popstate";function jH(e){e===void 0&&(e={});function t(r,a){let{pathname:i,search:o,hash:l}=r.location;return sj("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:zg(a)}return SH(t,n,null,e)}function gn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function R$(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function NH(){return Math.random().toString(36).substr(2,8)}function wA(e,t){return{usr:e.state,key:e.key,idx:t}}function sj(e,t,n,r){return n===void 0&&(n=null),bf({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?_d(t):t,{state:n,key:t&&t.key||r||NH()})}function zg(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function _d(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function SH(e,t,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:i=!1}=r,o=a.history,l=io.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(bf({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=io.Pop;let p=d(),v=p==null?null:p-u;u=p,c&&c({action:l,location:g.location,delta:v})}function m(p,v){l=io.Push;let y=sj(g.location,p,v);u=d()+1;let w=wA(y,u),S=g.createHref(y);try{o.pushState(w,"",S)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;a.location.assign(S)}i&&c&&c({action:l,location:g.location,delta:1})}function f(p,v){l=io.Replace;let y=sj(g.location,p,v);u=d();let w=wA(y,u),S=g.createHref(y);o.replaceState(w,"",S),i&&c&&c({action:l,location:g.location,delta:0})}function x(p){let v=a.location.origin!=="null"?a.location.origin:a.location.href,y=typeof p=="string"?p:zg(p);return y=y.replace(/ $/,"%20"),gn(v,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,v)}let g={get action(){return l},get location(){return e(a,o)},listen(p){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(yA,h),c=p,()=>{a.removeEventListener(yA,h),c=null}},createHref(p){return t(a,p)},createURL:x,encodeLocation(p){let v=x(p);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:m,replace:f,go(p){return o.go(p)}};return g}var bA;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(bA||(bA={}));function _H(e,t,n){return n===void 0&&(n="/"),CH(e,t,n,!1)}function CH(e,t,n,r){let a=typeof t=="string"?_d(t):t,i=kS(a.pathname||"/",n);if(i==null)return null;let o=L$(e);AH(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=LH(i);l=$H(o[c],u,r)}return l}function L$(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(gn(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=wo([r,c.relativePath]),d=n.concat(c);i.children&&i.children.length>0&&(gn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),L$(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:MH(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of F$(i.path))a(i,o,c)}),t}function F$(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return a?[i,""]:[i];let o=F$(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function AH(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:IH(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const PH=/^:[\w-]+$/,EH=3,kH=2,TH=1,OH=10,DH=-2,jA=e=>e==="*";function MH(e,t){let n=e.split("/"),r=n.length;return n.some(jA)&&(r+=DH),t&&(r+=kH),n.filter(a=>!jA(a)).reduce((a,i)=>a+(PH.test(i)?EH:i===""?TH:OH),r)}function IH(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function $H(e,t,n){let{routesMeta:r}=e,a={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=NA({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=NA({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(a,h.params),o.push({params:a,pathname:wo([i,h.pathname]),pathnameBase:qH(wo([i,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(i=wo([i,h.pathnameBase]))}return o}function NA(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=RH(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:m,isOptional:f}=d;if(m==="*"){let g=l[h]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const x=l[h];return f&&!x?u[m]=void 0:u[m]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function RH(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),R$(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function LH(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return R$(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function kS(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function FH(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?_d(e):e;return{pathname:n?n.startsWith("/")?n:zH(n,t):t,search:VH(r),hash:UH(a)}}function zH(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function q0(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function BH(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function TS(e,t){let n=BH(e);return t?n.map((r,a)=>a===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function OS(e,t,n,r){r===void 0&&(r=!1);let a;typeof e=="string"?a=_d(e):(a=bf({},e),gn(!a.pathname||!a.pathname.includes("?"),q0("?","pathname","search",a)),gn(!a.pathname||!a.pathname.includes("#"),q0("#","pathname","hash",a)),gn(!a.search||!a.search.includes("#"),q0("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=n;else{let h=t.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;a.pathname=m.join("/")}l=h>=0?t[h]:"/"}let c=FH(a,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const wo=e=>e.join("/").replace(/\/\/+/g,"/"),qH=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),VH=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,UH=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function WH(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const z$=["post","put","patch","delete"];new Set(z$);const HH=["get",...z$];new Set(HH);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jf(){return jf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jf.apply(this,arguments)}const DS=b.createContext(null),KH=b.createContext(null),Oo=b.createContext(null),Ax=b.createContext(null),Do=b.createContext({outlet:null,matches:[],isDataRoute:!1}),B$=b.createContext(null);function GH(e,t){let{relative:n}=t===void 0?{}:t;Cd()||gn(!1);let{basename:r,navigator:a}=b.useContext(Oo),{hash:i,pathname:o,search:l}=V$(e,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:wo([r,o])),a.createHref({pathname:c,search:l,hash:i})}function Cd(){return b.useContext(Ax)!=null}function Mo(){return Cd()||gn(!1),b.useContext(Ax).location}function q$(e){b.useContext(Oo).static||b.useLayoutEffect(e)}function Ad(){let{isDataRoute:e}=b.useContext(Do);return e?oK():YH()}function YH(){Cd()||gn(!1);let e=b.useContext(DS),{basename:t,future:n,navigator:r}=b.useContext(Oo),{matches:a}=b.useContext(Do),{pathname:i}=Mo(),o=JSON.stringify(TS(a,n.v7_relativeSplatPath)),l=b.useRef(!1);return q$(()=>{l.current=!0}),b.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let h=OS(u,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:wo([t,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[t,r,o,i,e])}function V$(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=b.useContext(Oo),{matches:a}=b.useContext(Do),{pathname:i}=Mo(),o=JSON.stringify(TS(a,r.v7_relativeSplatPath));return b.useMemo(()=>OS(e,JSON.parse(o),i,n==="path"),[e,o,i,n])}function QH(e,t){return XH(e,t)}function XH(e,t,n,r){Cd()||gn(!1);let{navigator:a}=b.useContext(Oo),{matches:i}=b.useContext(Do),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Mo(),d;if(t){var h;let p=typeof t=="string"?_d(t):t;c==="/"||(h=p.pathname)!=null&&h.startsWith(c)||gn(!1),d=p}else d=u;let m=d.pathname||"/",f=m;if(c!=="/"){let p=c.replace(/^\//,"").split("/");f="/"+m.replace(/^\//,"").split("/").slice(p.length).join("/")}let x=_H(e,{pathname:f}),g=nK(x&&x.map(p=>Object.assign({},p,{params:Object.assign({},l,p.params),pathname:wo([c,a.encodeLocation?a.encodeLocation(p.pathname).pathname:p.pathname]),pathnameBase:p.pathnameBase==="/"?c:wo([c,a.encodeLocation?a.encodeLocation(p.pathnameBase).pathname:p.pathnameBase])})),i,n,r);return t&&g?b.createElement(Ax.Provider,{value:{location:jf({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:io.Pop}},g):g}function JH(){let e=iK(),t=WH(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},t),n?b.createElement("pre",{style:a},n):null,null)}const ZH=b.createElement(JH,null);class eK extends b.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?b.createElement(Do.Provider,{value:this.props.routeContext},b.createElement(B$.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function tK(e){let{routeContext:t,match:n,children:r}=e,a=b.useContext(DS);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(Do.Provider,{value:t},r)}function nK(e,t,n,r){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(a=n)==null?void 0:a.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||gn(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:m,errors:f}=n,x=h.route.loader&&m[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||x){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,m)=>{let f,x=!1,g=null,p=null;n&&(f=l&&h.route.id?l[h.route.id]:void 0,g=h.route.errorElement||ZH,c&&(u<0&&m===0?(x=!0,p=null):u===m&&(x=!0,p=h.route.hydrateFallbackElement||null)));let v=t.concat(o.slice(0,m+1)),y=()=>{let w;return f?w=g:x?w=p:h.route.Component?w=b.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=d,b.createElement(tK,{match:h,routeContext:{outlet:d,matches:v,isDataRoute:n!=null},children:w})};return n&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?b.createElement(eK,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:y(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):y()},null)}var U$=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(U$||{}),Bg=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Bg||{});function rK(e){let t=b.useContext(DS);return t||gn(!1),t}function sK(e){let t=b.useContext(KH);return t||gn(!1),t}function aK(e){let t=b.useContext(Do);return t||gn(!1),t}function W$(e){let t=aK(),n=t.matches[t.matches.length-1];return n.route.id||gn(!1),n.route.id}function iK(){var e;let t=b.useContext(B$),n=sK(Bg.UseRouteError),r=W$(Bg.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function oK(){let{router:e}=rK(U$.UseNavigateStable),t=W$(Bg.UseNavigateStable),n=b.useRef(!1);return q$(()=>{n.current=!0}),b.useCallback(function(a,i){i===void 0&&(i={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,jf({fromRouteId:t},i)))},[e,t])}function lK(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Uc(e){let{to:t,replace:n,state:r,relative:a}=e;Cd()||gn(!1);let{future:i,static:o}=b.useContext(Oo),{matches:l}=b.useContext(Do),{pathname:c}=Mo(),u=Ad(),d=OS(t,TS(l,i.v7_relativeSplatPath),c,a==="path"),h=JSON.stringify(d);return b.useEffect(()=>u(JSON.parse(h),{replace:n,state:r,relative:a}),[u,h,a,n,r]),null}function Yt(e){gn(!1)}function cK(e){let{basename:t="/",children:n=null,location:r,navigationType:a=io.Pop,navigator:i,static:o=!1,future:l}=e;Cd()&&gn(!1);let c=t.replace(/^\/*/,"/"),u=b.useMemo(()=>({basename:c,navigator:i,static:o,future:jf({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof r=="string"&&(r=_d(r));let{pathname:d="/",search:h="",hash:m="",state:f=null,key:x="default"}=r,g=b.useMemo(()=>{let p=kS(d,c);return p==null?null:{location:{pathname:p,search:h,hash:m,state:f,key:x},navigationType:a}},[c,d,h,m,f,x,a]);return g==null?null:b.createElement(Oo.Provider,{value:u},b.createElement(Ax.Provider,{children:n,value:g}))}function uK(e){let{children:t,location:n}=e;return QH(aj(t),n)}new Promise(()=>{});function aj(e,t){t===void 0&&(t=[]);let n=[];return b.Children.forEach(e,(r,a)=>{if(!b.isValidElement(r))return;let i=[...t,a];if(r.type===b.Fragment){n.push.apply(n,aj(r.props.children,i));return}r.type!==Yt&&gn(!1),!r.props.index||!r.props.children||gn(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=aj(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ij(){return ij=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ij.apply(this,arguments)}function dK(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function hK(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function fK(e,t){return e.button===0&&(!t||t==="_self")&&!hK(e)}function oj(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(a=>[n,a]):[[n,r]])},[]))}function mK(e,t){let n=oj(e);return t&&t.forEach((r,a)=>{n.has(a)||t.getAll(a).forEach(i=>{n.append(a,i)})}),n}const pK=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],gK="6";try{window.__reactRouterVersion=gK}catch{}const vK="startTransition",SA=uN[vK];function xK(e){let{basename:t,children:n,future:r,window:a}=e,i=b.useRef();i.current==null&&(i.current=jH({window:a,v5Compat:!0}));let o=i.current,[l,c]=b.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=b.useCallback(h=>{u&&SA?SA(()=>c(h)):c(h)},[c,u]);return b.useLayoutEffect(()=>o.listen(d),[o,d]),b.useEffect(()=>lK(r),[r]),b.createElement(cK,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const yK=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wK=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gs=b.forwardRef(function(t,n){let{onClick:r,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,m=dK(t,pK),{basename:f}=b.useContext(Oo),x,g=!1;if(typeof u=="string"&&wK.test(u)&&(x=u,yK))try{let w=new URL(window.location.href),S=u.startsWith("//")?new URL(w.protocol+u):new URL(u),j=kS(S.pathname,f);S.origin===w.origin&&j!=null?u=j+S.search+S.hash:g=!0}catch{}let p=GH(u,{relative:a}),v=bK(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:h});function y(w){r&&r(w),w.defaultPrevented||v(w)}return b.createElement("a",ij({},m,{href:x||p,onClick:g||i?r:y,ref:n,target:c}))});var _A;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(_A||(_A={}));var CA;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(CA||(CA={}));function bK(e,t){let{target:n,replace:r,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=Ad(),u=Mo(),d=V$(e,{relative:o});return b.useCallback(h=>{if(fK(h,n)){h.preventDefault();let m=r!==void 0?r:zg(u)===zg(d);c(e,{replace:m,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,r,a,n,e,i,o,l])}function jK(e){let t=b.useRef(oj(e)),n=b.useRef(!1),r=Mo(),a=b.useMemo(()=>mK(r.search,n.current?null:t.current),[r.search]),i=Ad(),o=b.useCallback((l,c)=>{const u=oj(typeof l=="function"?l(a):l);n.current=!0,i("?"+u,c)},[i,a]);return[a,o]}const MS=bm("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),$=b.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...a},i)=>{const o=r?PV:"button";return s.jsx(o,{className:Me(MS({variant:t,size:n,className:e})),ref:i,...a})});$.displayName="Button";const H$=b.createContext(void 0);function NK({children:e}){const[t,n]=b.useState(()=>{const a=localStorage.getItem("theme");return a||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});b.useEffect(()=>{localStorage.setItem("theme",t);const a=document.documentElement;t==="dark"?a.classList.add("dark"):a.classList.remove("dark")},[t]);const r=()=>{n(a=>a==="light"?"dark":"light")};return s.jsx(H$.Provider,{value:{theme:t,setTheme:n,toggleTheme:r},children:e})}function K$(){const e=b.useContext(H$);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e}function AA(){const{theme:e,toggleTheme:t}=K$();return s.jsxs($,{variant:"outline",size:"sm",onClick:t,className:"h-9 w-9 p-0",title:e==="light"?"Activer le mode sombre":"Activer le mode clair",children:[e==="light"?s.jsx($U,{className:"h-4 w-4"}):s.jsx(zU,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:e==="light"?"Activer le mode sombre":"Activer le mode clair"})]})}var SK=b.createContext(void 0);function Px(e){const t=b.useContext(SK);return e||t||"ltr"}var V0=0;function IS(){b.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??PA()),document.body.insertAdjacentElement("beforeend",e[1]??PA()),V0++,()=>{V0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),V0--}},[])}function PA(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var U0="focusScope.autoFocusOnMount",W0="focusScope.autoFocusOnUnmount",EA={bubbles:!1,cancelable:!0},_K="FocusScope",Ex=b.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=b.useState(null),u=Nr(a),d=Nr(i),h=b.useRef(null),m=ft(t,g=>c(g)),f=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(r){let g=function(w){if(f.paused||!l)return;const S=w.target;l.contains(S)?h.current=S:Li(h.current,{select:!0})},p=function(w){if(f.paused||!l)return;const S=w.relatedTarget;S!==null&&(l.contains(S)||Li(h.current,{select:!0}))},v=function(w){if(document.activeElement===document.body)for(const j of w)j.removedNodes.length>0&&Li(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",p);const y=new MutationObserver(v);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",p),y.disconnect()}}},[r,l,f.paused]),b.useEffect(()=>{if(l){TA.add(f);const g=document.activeElement;if(!l.contains(g)){const v=new CustomEvent(U0,EA);l.addEventListener(U0,u),l.dispatchEvent(v),v.defaultPrevented||(CK(TK(G$(l)),{select:!0}),document.activeElement===g&&Li(l))}return()=>{l.removeEventListener(U0,u),setTimeout(()=>{const v=new CustomEvent(W0,EA);l.addEventListener(W0,d),l.dispatchEvent(v),v.defaultPrevented||Li(g??document.body,{select:!0}),l.removeEventListener(W0,d),TA.remove(f)},0)}}},[l,u,d,f]);const x=b.useCallback(g=>{if(!n&&!r||f.paused)return;const p=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,v=document.activeElement;if(p&&v){const y=g.currentTarget,[w,S]=AK(y);w&&S?!g.shiftKey&&v===S?(g.preventDefault(),n&&Li(w,{select:!0})):g.shiftKey&&v===w&&(g.preventDefault(),n&&Li(S,{select:!0})):v===y&&g.preventDefault()}},[n,r,f.paused]);return s.jsx(qe.div,{tabIndex:-1,...o,ref:m,onKeyDown:x})});Ex.displayName=_K;function CK(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Li(r,{select:t}),document.activeElement!==n)return}function AK(e){const t=G$(e),n=kA(t,e),r=kA(t.reverse(),e);return[n,r]}function G$(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function kA(e,t){for(const n of e)if(!PK(n,{upTo:t}))return n}function PK(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function EK(e){return e instanceof HTMLInputElement&&"select"in e}function Li(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&EK(e)&&t&&e.select()}}var TA=kK();function kK(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=OA(e,t),e.unshift(t)},remove(t){var n;e=OA(e,t),(n=e[0])==null||n.resume()}}}function OA(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function TK(e){return e.filter(t=>t.tagName!=="A")}var H0="rovingFocusGroup.onEntryFocus",OK={bubbles:!1,cancelable:!0},Nm="RovingFocusGroup",[lj,Y$,DK]=xx(Nm),[MK,kx]=Br(Nm,[DK]),[IK,$K]=MK(Nm),Q$=b.forwardRef((e,t)=>s.jsx(lj.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(lj.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(RK,{...e,ref:t})})}));Q$.displayName=Nm;var RK=b.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=e,m=b.useRef(null),f=ft(t,m),x=Px(i),[g,p]=gi({prop:o,defaultProp:l??null,onChange:c,caller:Nm}),[v,y]=b.useState(!1),w=Nr(u),S=Y$(n),j=b.useRef(!1),[N,C]=b.useState(0);return b.useEffect(()=>{const _=m.current;if(_)return _.addEventListener(H0,w),()=>_.removeEventListener(H0,w)},[w]),s.jsx(IK,{scope:n,orientation:r,dir:x,loop:a,currentTabStopId:g,onItemFocus:b.useCallback(_=>p(_),[p]),onItemShiftTab:b.useCallback(()=>y(!0),[]),onFocusableItemAdd:b.useCallback(()=>C(_=>_+1),[]),onFocusableItemRemove:b.useCallback(()=>C(_=>_-1),[]),children:s.jsx(qe.div,{tabIndex:v||N===0?-1:0,"data-orientation":r,...h,ref:f,style:{outline:"none",...e.style},onMouseDown:Te(e.onMouseDown,()=>{j.current=!0}),onFocus:Te(e.onFocus,_=>{const A=!j.current;if(_.target===_.currentTarget&&A&&!v){const P=new CustomEvent(H0,OK);if(_.currentTarget.dispatchEvent(P),!P.defaultPrevented){const T=S().filter(U=>U.focusable),E=T.find(U=>U.active),I=T.find(U=>U.id===g),z=[E,I,...T].filter(Boolean).map(U=>U.ref.current);Z$(z,d)}}j.current=!1}),onBlur:Te(e.onBlur,()=>y(!1))})})}),X$="RovingFocusGroupItem",J$=b.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:i,children:o,...l}=e,c=Aa(),u=i||c,d=$K(X$,n),h=d.currentTabStopId===u,m=Y$(n),{onFocusableItemAdd:f,onFocusableItemRemove:x,currentTabStopId:g}=d;return b.useEffect(()=>{if(r)return f(),()=>x()},[r,f,x]),s.jsx(lj.ItemSlot,{scope:n,id:u,focusable:r,active:a,children:s.jsx(qe.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:Te(e.onMouseDown,p=>{r?d.onItemFocus(u):p.preventDefault()}),onFocus:Te(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:Te(e.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){d.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const v=zK(p,d.orientation,d.dir);if(v!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let w=m().filter(S=>S.focusable).map(S=>S.ref.current);if(v==="last")w.reverse();else if(v==="prev"||v==="next"){v==="prev"&&w.reverse();const S=w.indexOf(p.currentTarget);w=d.loop?BK(w,S+1):w.slice(S+1)}setTimeout(()=>Z$(w))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:g!=null}):o})})});J$.displayName=X$;var LK={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function FK(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function zK(e,t,n){const r=FK(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return LK[r]}function Z$(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function BK(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var e4=Q$,t4=J$,qK=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},mc=new WeakMap,dp=new WeakMap,hp={},K0=0,n4=function(e){return e&&(e.host||n4(e.parentNode))},VK=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=n4(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},UK=function(e,t,n,r){var a=VK(t,Array.isArray(e)?e:[e]);hp[n]||(hp[n]=new WeakMap);var i=hp[n],o=[],l=new Set,c=new Set(a),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};a.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(m){if(l.has(m))d(m);else try{var f=m.getAttribute(r),x=f!==null&&f!=="false",g=(mc.get(m)||0)+1,p=(i.get(m)||0)+1;mc.set(m,g),i.set(m,p),o.push(m),g===1&&x&&dp.set(m,!0),p===1&&m.setAttribute(n,"true"),x||m.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",m,v)}})};return d(t),l.clear(),K0++,function(){o.forEach(function(h){var m=mc.get(h)-1,f=i.get(h)-1;mc.set(h,m),i.set(h,f),m||(dp.has(h)||h.removeAttribute(r),dp.delete(h)),f||h.removeAttribute(n)}),K0--,K0||(mc=new WeakMap,mc=new WeakMap,dp=new WeakMap,hp={})}},$S=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=qK(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),UK(r,a,n,"aria-hidden")):function(){return null}},va=function(){return va=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},va.apply(this,arguments)};function r4(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function WK(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var sg="right-scroll-bar-position",ag="width-before-scroll-bar",HK="with-scroll-bars-hidden",KK="--removed-body-scroll-bar-size";function G0(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function GK(e,t){var n=b.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=t,n.facade}var YK=typeof window<"u"?b.useLayoutEffect:b.useEffect,DA=new WeakMap;function QK(e,t){var n=GK(null,function(r){return e.forEach(function(a){return G0(a,r)})});return YK(function(){var r=DA.get(n);if(r){var a=new Set(r),i=new Set(e),o=n.current;a.forEach(function(l){i.has(l)||G0(l,null)}),i.forEach(function(l){a.has(l)||G0(l,o)})}DA.set(n,e)},[e]),n}function XK(e){return e}function JK(e,t){t===void 0&&(t=XK);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var o=t(i,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(i),o=n}var c=function(){var d=o;o=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),n}}}};return a}function ZK(e){e===void 0&&(e={});var t=JK(null);return t.options=va({async:!0,ssr:!1},e),t}var s4=function(e){var t=e.sideCar,n=r4(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return b.createElement(r,va({},n))};s4.isSideCarExport=!0;function eG(e,t){return e.useMedium(t),s4}var a4=ZK(),Y0=function(){},Tx=b.forwardRef(function(e,t){var n=b.useRef(null),r=b.useState({onScrollCapture:Y0,onWheelCapture:Y0,onTouchMoveCapture:Y0}),a=r[0],i=r[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,h=e.shards,m=e.sideCar,f=e.noRelative,x=e.noIsolation,g=e.inert,p=e.allowPinchZoom,v=e.as,y=v===void 0?"div":v,w=e.gapMode,S=r4(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=m,N=QK([n,t]),C=va(va({},S),a);return b.createElement(b.Fragment,null,d&&b.createElement(j,{sideCar:a4,removeScrollBar:u,shards:h,noRelative:f,noIsolation:x,inert:g,setCallbacks:i,allowPinchZoom:!!p,lockRef:n,gapMode:w}),o?b.cloneElement(b.Children.only(l),va(va({},C),{ref:N})):b.createElement(y,va({},C,{className:c,ref:N}),l))});Tx.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Tx.classNames={fullWidth:ag,zeroRight:sg};var tG=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function nG(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=tG();return t&&e.setAttribute("nonce",t),e}function rG(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function sG(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var aG=function(){var e=0,t=null;return{add:function(n){e==0&&(t=nG())&&(rG(t,n),sG(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},iG=function(){var e=aG();return function(t,n){b.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},i4=function(){var e=iG(),t=function(n){var r=n.styles,a=n.dynamic;return e(r,a),null};return t},oG={left:0,top:0,right:0,gap:0},Q0=function(e){return parseInt(e||"",10)||0},lG=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[Q0(n),Q0(r),Q0(a)]},cG=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return oG;var t=lG(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},uG=i4(),au="data-scroll-locked",dG=function(e,t,n,r){var a=e.left,i=e.top,o=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(HK,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(au,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(sg,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(ag,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(sg," .").concat(sg,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(ag," .").concat(ag,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(au,`] {
    `).concat(KK,": ").concat(l,`px;
  }
`)},MA=function(){var e=parseInt(document.body.getAttribute(au)||"0",10);return isFinite(e)?e:0},hG=function(){b.useEffect(function(){return document.body.setAttribute(au,(MA()+1).toString()),function(){var e=MA()-1;e<=0?document.body.removeAttribute(au):document.body.setAttribute(au,e.toString())}},[])},fG=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,a=r===void 0?"margin":r;hG();var i=b.useMemo(function(){return cG(a)},[a]);return b.createElement(uG,{styles:dG(i,!t,a,n?"":"!important")})},cj=!1;if(typeof window<"u")try{var fp=Object.defineProperty({},"passive",{get:function(){return cj=!0,!0}});window.addEventListener("test",fp,fp),window.removeEventListener("test",fp,fp)}catch{cj=!1}var pc=cj?{passive:!1}:!1,mG=function(e){return e.tagName==="TEXTAREA"},o4=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!mG(e)&&n[t]==="visible")},pG=function(e){return o4(e,"overflowY")},gG=function(e){return o4(e,"overflowX")},IA=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=l4(e,r);if(a){var i=c4(e,r),o=i[1],l=i[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},vG=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},xG=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},l4=function(e,t){return e==="v"?pG(t):gG(t)},c4=function(e,t){return e==="v"?vG(t):xG(t)},yG=function(e,t){return e==="h"&&t==="rtl"?-1:1},wG=function(e,t,n,r,a){var i=yG(e,window.getComputedStyle(t).direction),o=i*r,l=n.target,c=t.contains(l),u=!1,d=o>0,h=0,m=0;do{if(!l)break;var f=c4(e,l),x=f[0],g=f[1],p=f[2],v=g-p-i*x;(x||v)&&l4(e,l)&&(h+=v,m+=x);var y=l.parentNode;l=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&(Math.abs(h)<1||!a)||!d&&(Math.abs(m)<1||!a))&&(u=!0),u},mp=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},$A=function(e){return[e.deltaX,e.deltaY]},RA=function(e){return e&&"current"in e?e.current:e},bG=function(e,t){return e[0]===t[0]&&e[1]===t[1]},jG=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},NG=0,gc=[];function SG(e){var t=b.useRef([]),n=b.useRef([0,0]),r=b.useRef(),a=b.useState(NG++)[0],i=b.useState(i4)[0],o=b.useRef(e);b.useEffect(function(){o.current=e},[e]),b.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var g=WK([e.lockRef.current],(e.shards||[]).map(RA),!0).filter(Boolean);return g.forEach(function(p){return p.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),g.forEach(function(p){return p.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=b.useCallback(function(g,p){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var v=mp(g),y=n.current,w="deltaX"in g?g.deltaX:y[0]-v[0],S="deltaY"in g?g.deltaY:y[1]-v[1],j,N=g.target,C=Math.abs(w)>Math.abs(S)?"h":"v";if("touches"in g&&C==="h"&&N.type==="range")return!1;var _=IA(C,N);if(!_)return!0;if(_?j=C:(j=C==="v"?"h":"v",_=IA(C,N)),!_)return!1;if(!r.current&&"changedTouches"in g&&(w||S)&&(r.current=j),!j)return!0;var A=r.current||j;return wG(A,p,g,A==="h"?w:S,!0)},[]),c=b.useCallback(function(g){var p=g;if(!(!gc.length||gc[gc.length-1]!==i)){var v="deltaY"in p?$A(p):mp(p),y=t.current.filter(function(j){return j.name===p.type&&(j.target===p.target||p.target===j.shadowParent)&&bG(j.delta,v)})[0];if(y&&y.should){p.cancelable&&p.preventDefault();return}if(!y){var w=(o.current.shards||[]).map(RA).filter(Boolean).filter(function(j){return j.contains(p.target)}),S=w.length>0?l(p,w[0]):!o.current.noIsolation;S&&p.cancelable&&p.preventDefault()}}},[]),u=b.useCallback(function(g,p,v,y){var w={name:g,delta:p,target:v,should:y,shadowParent:_G(v)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(S){return S!==w})},1)},[]),d=b.useCallback(function(g){n.current=mp(g),r.current=void 0},[]),h=b.useCallback(function(g){u(g.type,$A(g),g.target,l(g,e.lockRef.current))},[]),m=b.useCallback(function(g){u(g.type,mp(g),g.target,l(g,e.lockRef.current))},[]);b.useEffect(function(){return gc.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",c,pc),document.addEventListener("touchmove",c,pc),document.addEventListener("touchstart",d,pc),function(){gc=gc.filter(function(g){return g!==i}),document.removeEventListener("wheel",c,pc),document.removeEventListener("touchmove",c,pc),document.removeEventListener("touchstart",d,pc)}},[]);var f=e.removeScrollBar,x=e.inert;return b.createElement(b.Fragment,null,x?b.createElement(i,{styles:jG(a)}):null,f?b.createElement(fG,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function _G(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const CG=eG(a4,SG);var Ox=b.forwardRef(function(e,t){return b.createElement(Tx,va({},e,{ref:t,sideCar:CG}))});Ox.classNames=Tx.classNames;var uj=["Enter"," "],AG=["ArrowDown","PageUp","Home"],u4=["ArrowUp","PageDown","End"],PG=[...AG,...u4],EG={ltr:[...uj,"ArrowRight"],rtl:[...uj,"ArrowLeft"]},kG={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Sm="Menu",[Nf,TG,OG]=xx(Sm),[Jl,d4]=Br(Sm,[OG,Nd,kx]),Dx=Nd(),h4=kx(),[DG,Zl]=Jl(Sm),[MG,_m]=Jl(Sm),f4=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:a,onOpenChange:i,modal:o=!0}=e,l=Dx(t),[c,u]=b.useState(null),d=b.useRef(!1),h=Nr(i),m=Px(a);return b.useEffect(()=>{const f=()=>{d.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>d.current=!1;return document.addEventListener("keydown",f,{capture:!0}),()=>{document.removeEventListener("keydown",f,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),s.jsx(g$,{...l,children:s.jsx(DG,{scope:t,open:n,onOpenChange:h,content:c,onContentChange:u,children:s.jsx(MG,{scope:t,onClose:b.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:m,modal:o,children:r})})})};f4.displayName=Sm;var IG="MenuAnchor",RS=b.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=Dx(n);return s.jsx(jS,{...a,...r,ref:t})});RS.displayName=IG;var LS="MenuPortal",[$G,m4]=Jl(LS,{forceMount:void 0}),p4=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:a}=e,i=Zl(LS,t);return s.jsx($G,{scope:t,forceMount:n,children:s.jsx(As,{present:n||i.open,children:s.jsx(ym,{asChild:!0,container:a,children:r})})})};p4.displayName=LS;var bs="MenuContent",[RG,FS]=Jl(bs),g4=b.forwardRef((e,t)=>{const n=m4(bs,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=Zl(bs,e.__scopeMenu),o=_m(bs,e.__scopeMenu);return s.jsx(Nf.Provider,{scope:e.__scopeMenu,children:s.jsx(As,{present:r||i.open,children:s.jsx(Nf.Slot,{scope:e.__scopeMenu,children:o.modal?s.jsx(LG,{...a,ref:t}):s.jsx(FG,{...a,ref:t})})})})}),LG=b.forwardRef((e,t)=>{const n=Zl(bs,e.__scopeMenu),r=b.useRef(null),a=ft(t,r);return b.useEffect(()=>{const i=r.current;if(i)return $S(i)},[]),s.jsx(zS,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Te(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),FG=b.forwardRef((e,t)=>{const n=Zl(bs,e.__scopeMenu);return s.jsx(zS,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),zG=Il("MenuContent.ScrollLock"),zS=b.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:f,disableOutsideScroll:x,...g}=e,p=Zl(bs,n),v=_m(bs,n),y=Dx(n),w=h4(n),S=TG(n),[j,N]=b.useState(null),C=b.useRef(null),_=ft(t,C,p.onContentChange),A=b.useRef(0),P=b.useRef(""),T=b.useRef(0),E=b.useRef(null),I=b.useRef("right"),R=b.useRef(0),z=x?Ox:b.Fragment,U=x?{as:zG,allowPinchZoom:!0}:void 0,K=D=>{var ce,ge;const J=P.current+D,W=S().filter(H=>!H.disabled),Y=document.activeElement,V=(ce=W.find(H=>H.ref.current===Y))==null?void 0:ce.textValue,O=W.map(H=>H.textValue),le=JG(O,J,V),te=(ge=W.find(H=>H.textValue===le))==null?void 0:ge.ref.current;(function H(G){P.current=G,window.clearTimeout(A.current),G!==""&&(A.current=window.setTimeout(()=>H(""),1e3))})(J),te&&setTimeout(()=>te.focus())};b.useEffect(()=>()=>window.clearTimeout(A.current),[]),IS();const k=b.useCallback(D=>{var W,Y;return I.current===((W=E.current)==null?void 0:W.side)&&eY(D,(Y=E.current)==null?void 0:Y.area)},[]);return s.jsx(RG,{scope:n,searchRef:P,onItemEnter:b.useCallback(D=>{k(D)&&D.preventDefault()},[k]),onItemLeave:b.useCallback(D=>{var J;k(D)||((J=C.current)==null||J.focus(),N(null))},[k]),onTriggerLeave:b.useCallback(D=>{k(D)&&D.preventDefault()},[k]),pointerGraceTimerRef:T,onPointerGraceIntentChange:b.useCallback(D=>{E.current=D},[]),children:s.jsx(z,{...U,children:s.jsx(Ex,{asChild:!0,trapped:a,onMountAutoFocus:Te(i,D=>{var J;D.preventDefault(),(J=C.current)==null||J.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:s.jsx(vd,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:f,children:s.jsx(e4,{asChild:!0,...w,dir:v.dir,orientation:"vertical",loop:r,currentTabStopId:j,onCurrentTabStopIdChange:N,onEntryFocus:Te(c,D=>{v.isUsingKeyboardRef.current||D.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(NS,{role:"menu","aria-orientation":"vertical","data-state":O4(p.open),"data-radix-menu-content":"",dir:v.dir,...y,...g,ref:_,style:{outline:"none",...g.style},onKeyDown:Te(g.onKeyDown,D=>{const W=D.target.closest("[data-radix-menu-content]")===D.currentTarget,Y=D.ctrlKey||D.altKey||D.metaKey,V=D.key.length===1;W&&(D.key==="Tab"&&D.preventDefault(),!Y&&V&&K(D.key));const O=C.current;if(D.target!==O||!PG.includes(D.key))return;D.preventDefault();const te=S().filter(ce=>!ce.disabled).map(ce=>ce.ref.current);u4.includes(D.key)&&te.reverse(),QG(te)}),onBlur:Te(e.onBlur,D=>{D.currentTarget.contains(D.target)||(window.clearTimeout(A.current),P.current="")}),onPointerMove:Te(e.onPointerMove,Sf(D=>{const J=D.target,W=R.current!==D.clientX;if(D.currentTarget.contains(J)&&W){const Y=D.clientX>R.current?"right":"left";I.current=Y,R.current=D.clientX}}))})})})})})})});g4.displayName=bs;var BG="MenuGroup",BS=b.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(qe.div,{role:"group",...r,ref:t})});BS.displayName=BG;var qG="MenuLabel",v4=b.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(qe.div,{...r,ref:t})});v4.displayName=qG;var qg="MenuItem",LA="menu.itemSelect",Mx=b.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...a}=e,i=b.useRef(null),o=_m(qg,e.__scopeMenu),l=FS(qg,e.__scopeMenu),c=ft(t,i),u=b.useRef(!1),d=()=>{const h=i.current;if(!n&&h){const m=new CustomEvent(LA,{bubbles:!0,cancelable:!0});h.addEventListener(LA,f=>r==null?void 0:r(f),{once:!0}),tS(h,m),m.defaultPrevented?u.current=!1:o.onClose()}};return s.jsx(x4,{...a,ref:c,disabled:n,onClick:Te(e.onClick,d),onPointerDown:h=>{var m;(m=e.onPointerDown)==null||m.call(e,h),u.current=!0},onPointerUp:Te(e.onPointerUp,h=>{var m;u.current||(m=h.currentTarget)==null||m.click()}),onKeyDown:Te(e.onKeyDown,h=>{const m=l.searchRef.current!=="";n||m&&h.key===" "||uj.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});Mx.displayName=qg;var x4=b.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...i}=e,o=FS(qg,n),l=h4(n),c=b.useRef(null),u=ft(t,c),[d,h]=b.useState(!1),[m,f]=b.useState("");return b.useEffect(()=>{const x=c.current;x&&f((x.textContent??"").trim())},[i.children]),s.jsx(Nf.ItemSlot,{scope:n,disabled:r,textValue:a??m,children:s.jsx(t4,{asChild:!0,...l,focusable:!r,children:s.jsx(qe.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:u,onPointerMove:Te(e.onPointerMove,Sf(x=>{r?o.onItemLeave(x):(o.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Te(e.onPointerLeave,Sf(x=>o.onItemLeave(x))),onFocus:Te(e.onFocus,()=>h(!0)),onBlur:Te(e.onBlur,()=>h(!1))})})})}),VG="MenuCheckboxItem",y4=b.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...a}=e;return s.jsx(S4,{scope:e.__scopeMenu,checked:n,children:s.jsx(Mx,{role:"menuitemcheckbox","aria-checked":Vg(n)?"mixed":n,...a,ref:t,"data-state":VS(n),onSelect:Te(a.onSelect,()=>r==null?void 0:r(Vg(n)?!0:!n),{checkForDefaultPrevented:!1})})})});y4.displayName=VG;var w4="MenuRadioGroup",[UG,WG]=Jl(w4,{value:void 0,onValueChange:()=>{}}),b4=b.forwardRef((e,t)=>{const{value:n,onValueChange:r,...a}=e,i=Nr(r);return s.jsx(UG,{scope:e.__scopeMenu,value:n,onValueChange:i,children:s.jsx(BS,{...a,ref:t})})});b4.displayName=w4;var j4="MenuRadioItem",N4=b.forwardRef((e,t)=>{const{value:n,...r}=e,a=WG(j4,e.__scopeMenu),i=n===a.value;return s.jsx(S4,{scope:e.__scopeMenu,checked:i,children:s.jsx(Mx,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":VS(i),onSelect:Te(r.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,n)},{checkForDefaultPrevented:!1})})})});N4.displayName=j4;var qS="MenuItemIndicator",[S4,HG]=Jl(qS,{checked:!1}),_4=b.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...a}=e,i=HG(qS,n);return s.jsx(As,{present:r||Vg(i.checked)||i.checked===!0,children:s.jsx(qe.span,{...a,ref:t,"data-state":VS(i.checked)})})});_4.displayName=qS;var KG="MenuSeparator",C4=b.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(qe.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});C4.displayName=KG;var GG="MenuArrow",A4=b.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=Dx(n);return s.jsx(SS,{...a,...r,ref:t})});A4.displayName=GG;var YG="MenuSub",[Oke,P4]=Jl(YG),Ah="MenuSubTrigger",E4=b.forwardRef((e,t)=>{const n=Zl(Ah,e.__scopeMenu),r=_m(Ah,e.__scopeMenu),a=P4(Ah,e.__scopeMenu),i=FS(Ah,e.__scopeMenu),o=b.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,u={__scopeMenu:e.__scopeMenu},d=b.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return b.useEffect(()=>d,[d]),b.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),s.jsx(RS,{asChild:!0,...u,children:s.jsx(x4,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":O4(n.open),...e,ref:vx(t,a.onTriggerChange),onClick:h=>{var m;(m=e.onClick)==null||m.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Te(e.onPointerMove,Sf(h=>{i.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:Te(e.onPointerLeave,Sf(h=>{var f,x;d();const m=(f=n.content)==null?void 0:f.getBoundingClientRect();if(m){const g=(x=n.content)==null?void 0:x.dataset.side,p=g==="right",v=p?-5:5,y=m[p?"left":"right"],w=m[p?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+v,y:h.clientY},{x:y,y:m.top},{x:w,y:m.top},{x:w,y:m.bottom},{x:y,y:m.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Te(e.onKeyDown,h=>{var f;const m=i.searchRef.current!=="";e.disabled||m&&h.key===" "||EG[r.dir].includes(h.key)&&(n.onOpenChange(!0),(f=n.content)==null||f.focus(),h.preventDefault())})})})});E4.displayName=Ah;var k4="MenuSubContent",T4=b.forwardRef((e,t)=>{const n=m4(bs,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=Zl(bs,e.__scopeMenu),o=_m(bs,e.__scopeMenu),l=P4(k4,e.__scopeMenu),c=b.useRef(null),u=ft(t,c);return s.jsx(Nf.Provider,{scope:e.__scopeMenu,children:s.jsx(As,{present:r||i.open,children:s.jsx(Nf.Slot,{scope:e.__scopeMenu,children:s.jsx(zS,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:Te(e.onFocusOutside,d=>{d.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Te(e.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:Te(e.onKeyDown,d=>{var f;const h=d.currentTarget.contains(d.target),m=kG[o.dir].includes(d.key);h&&m&&(i.onOpenChange(!1),(f=l.trigger)==null||f.focus(),d.preventDefault())})})})})})});T4.displayName=k4;function O4(e){return e?"open":"closed"}function Vg(e){return e==="indeterminate"}function VS(e){return Vg(e)?"indeterminate":e?"checked":"unchecked"}function QG(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function XG(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function JG(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=XG(e,Math.max(i,0));a.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function ZG(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],u=l.x,d=l.y,h=c.x,m=c.y;d>r!=m>r&&n<(h-u)*(r-d)/(m-d)+u&&(a=!a)}return a}function eY(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return ZG(n,t)}function Sf(e){return t=>t.pointerType==="mouse"?e(t):void 0}var tY=f4,nY=RS,rY=p4,sY=g4,aY=BS,iY=v4,oY=Mx,lY=y4,cY=b4,uY=N4,dY=_4,hY=C4,fY=A4,mY=E4,pY=T4,Ix="DropdownMenu",[gY,Dke]=Br(Ix,[d4]),Cr=d4(),[vY,D4]=gY(Ix),M4=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:a,defaultOpen:i,onOpenChange:o,modal:l=!0}=e,c=Cr(t),u=b.useRef(null),[d,h]=gi({prop:a,defaultProp:i??!1,onChange:o,caller:Ix});return s.jsx(vY,{scope:t,triggerId:Aa(),triggerRef:u,contentId:Aa(),open:d,onOpenChange:h,onOpenToggle:b.useCallback(()=>h(m=>!m),[h]),modal:l,children:s.jsx(tY,{...c,open:d,onOpenChange:h,dir:r,modal:l,children:n})})};M4.displayName=Ix;var I4="DropdownMenuTrigger",$4=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...a}=e,i=D4(I4,n),o=Cr(n);return s.jsx(nY,{asChild:!0,...o,children:s.jsx(qe.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:vx(t,i.triggerRef),onPointerDown:Te(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:Te(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});$4.displayName=I4;var xY="DropdownMenuPortal",R4=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Cr(t);return s.jsx(rY,{...r,...n})};R4.displayName=xY;var L4="DropdownMenuContent",F4=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=D4(L4,n),i=Cr(n),o=b.useRef(!1);return s.jsx(sY,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...r,ref:t,onCloseAutoFocus:Te(e.onCloseAutoFocus,l=>{var c;o.current||(c=a.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:Te(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!a.modal||d)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});F4.displayName=L4;var yY="DropdownMenuGroup",wY=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Cr(n);return s.jsx(aY,{...a,...r,ref:t})});wY.displayName=yY;var bY="DropdownMenuLabel",z4=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Cr(n);return s.jsx(iY,{...a,...r,ref:t})});z4.displayName=bY;var jY="DropdownMenuItem",B4=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Cr(n);return s.jsx(oY,{...a,...r,ref:t})});B4.displayName=jY;var NY="DropdownMenuCheckboxItem",q4=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Cr(n);return s.jsx(lY,{...a,...r,ref:t})});q4.displayName=NY;var SY="DropdownMenuRadioGroup",_Y=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Cr(n);return s.jsx(cY,{...a,...r,ref:t})});_Y.displayName=SY;var CY="DropdownMenuRadioItem",V4=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Cr(n);return s.jsx(uY,{...a,...r,ref:t})});V4.displayName=CY;var AY="DropdownMenuItemIndicator",U4=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Cr(n);return s.jsx(dY,{...a,...r,ref:t})});U4.displayName=AY;var PY="DropdownMenuSeparator",W4=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Cr(n);return s.jsx(hY,{...a,...r,ref:t})});W4.displayName=PY;var EY="DropdownMenuArrow",kY=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Cr(n);return s.jsx(fY,{...a,...r,ref:t})});kY.displayName=EY;var TY="DropdownMenuSubTrigger",H4=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Cr(n);return s.jsx(mY,{...a,...r,ref:t})});H4.displayName=TY;var OY="DropdownMenuSubContent",K4=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Cr(n);return s.jsx(pY,{...a,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});K4.displayName=OY;var DY=M4,MY=$4,IY=R4,G4=F4,Y4=z4,Q4=B4,X4=q4,J4=V4,Z4=U4,eR=W4,tR=H4,nR=K4;const $Y=DY,RY=MY,LY=b.forwardRef(({className:e,inset:t,children:n,...r},a)=>s.jsxs(tR,{ref:a,className:Me("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[n,s.jsx(SU,{className:"ml-auto h-4 w-4"})]}));LY.displayName=tR.displayName;const FY=b.forwardRef(({className:e,...t},n)=>s.jsx(nR,{ref:n,className:Me("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));FY.displayName=nR.displayName;const rR=b.forwardRef(({className:e,sideOffset:t=4,...n},r)=>s.jsx(IY,{children:s.jsx(G4,{ref:r,sideOffset:t,className:Me("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));rR.displayName=G4.displayName;const dj=b.forwardRef(({className:e,inset:t,...n},r)=>s.jsx(Q4,{ref:r,className:Me("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));dj.displayName=Q4.displayName;const zY=b.forwardRef(({className:e,children:t,checked:n,...r},a)=>s.jsxs(X4,{ref:a,className:Me("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(Z4,{children:s.jsx(iS,{className:"h-4 w-4"})})}),t]}));zY.displayName=X4.displayName;const BY=b.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(J4,{ref:r,className:Me("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(Z4,{children:s.jsx(CU,{className:"h-2 w-2 fill-current"})})}),t]}));BY.displayName=J4.displayName;const sR=b.forwardRef(({className:e,inset:t,...n},r)=>s.jsx(Y4,{ref:r,className:Me("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));sR.displayName=Y4.displayName;const hj=b.forwardRef(({className:e,...t},n)=>s.jsx(eR,{ref:n,className:Me("-mx-1 my-1 h-px bg-muted",e),...t}));hj.displayName=eR.displayName;var aR={exports:{}},iR={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $u=b;function qY(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var VY=typeof Object.is=="function"?Object.is:qY,UY=$u.useState,WY=$u.useEffect,HY=$u.useLayoutEffect,KY=$u.useDebugValue;function GY(e,t){var n=t(),r=UY({inst:{value:n,getSnapshot:t}}),a=r[0].inst,i=r[1];return HY(function(){a.value=n,a.getSnapshot=t,X0(a)&&i({inst:a})},[e,n,t]),WY(function(){return X0(a)&&i({inst:a}),e(function(){X0(a)&&i({inst:a})})},[e]),KY(n),n}function X0(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!VY(e,n)}catch{return!0}}function YY(e,t){return t()}var QY=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?YY:GY;iR.useSyncExternalStore=$u.useSyncExternalStore!==void 0?$u.useSyncExternalStore:QY;aR.exports=iR;var XY=aR.exports;function JY(){return XY.useSyncExternalStore(ZY,()=>!0,()=>!1)}function ZY(){return()=>{}}var US="Avatar",[eQ,Mke]=Br(US),[tQ,oR]=eQ(US),lR=b.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[a,i]=b.useState("idle");return s.jsx(tQ,{scope:n,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:s.jsx(qe.span,{...r,ref:t})})});lR.displayName=US;var cR="AvatarImage",uR=b.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:a=()=>{},...i}=e,o=oR(cR,n),l=nQ(r,i),c=Nr(u=>{a(u),o.onImageLoadingStatusChange(u)});return Nn(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?s.jsx(qe.img,{...i,ref:t,src:r}):null});uR.displayName=cR;var dR="AvatarFallback",hR=b.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...a}=e,i=oR(dR,n),[o,l]=b.useState(r===void 0);return b.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&i.imageLoadingStatus!=="loaded"?s.jsx(qe.span,{...a,ref:t}):null});hR.displayName=dR;function FA(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function nQ(e,{referrerPolicy:t,crossOrigin:n}){const r=JY(),a=b.useRef(null),i=r?(a.current||(a.current=new window.Image),a.current):null,[o,l]=b.useState(()=>FA(i,e));return Nn(()=>{l(FA(i,e))},[i,e]),Nn(()=>{const c=h=>()=>{l(h)};if(!i)return;const u=c("loaded"),d=c("error");return i.addEventListener("load",u),i.addEventListener("error",d),t&&(i.referrerPolicy=t),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",u),i.removeEventListener("error",d)}},[i,n,t]),o}var fR=lR,mR=uR,pR=hR;const er=b.forwardRef(({className:e,...t},n)=>s.jsx(fR,{ref:n,className:Me("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));er.displayName=fR.displayName;const Ru=b.forwardRef(({className:e,...t},n)=>s.jsx(mR,{ref:n,className:Me("aspect-square h-full w-full",e),...t}));Ru.displayName=mR.displayName;const tr=b.forwardRef(({className:e,...t},n)=>s.jsx(pR,{ref:n,className:Me("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));tr.displayName=pR.displayName;const rQ="modulepreload",sQ=function(e){return"/"+e},zA={},Cm=function(t,n,r){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(n.map(c=>{if(c=sQ(c),c in zA)return;zA[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":rQ,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((m,f)=>{h.addEventListener("load",m),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},aQ=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Cm(async()=>{const{default:r}=await Promise.resolve().then(()=>Pd);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class WS extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class BA extends WS{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class qA extends WS{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class VA extends WS{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var fj;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(fj||(fj={}));var iQ=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class oQ{constructor(t,{headers:n={},customFetch:r,region:a=fj.Any}={}){this.url=t,this.headers=n,this.region=a,this.fetch=aQ(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return iQ(this,arguments,void 0,function*(n,r={}){var a;try{const{headers:i,method:o,body:l,signal:c}=r;let u={},{region:d}=r;d||(d=this.region);const h=new URL(`${this.url}/${n}`);d&&d!=="any"&&(u["x-region"]=d,h.searchParams.set("forceFunctionRegion",d));let m;l&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",m=l):typeof l=="string"?(u["Content-Type"]="text/plain",m=l):typeof FormData<"u"&&l instanceof FormData?m=l:(u["Content-Type"]="application/json",m=JSON.stringify(l)));const f=yield this.fetch(h.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),i),body:m,signal:c}).catch(v=>{throw v.name==="AbortError"?v:new BA(v)}),x=f.headers.get("x-relay-error");if(x&&x==="true")throw new qA(f);if(!f.ok)throw new VA(f);let g=((a=f.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),p;return g==="application/json"?p=yield f.json():g==="application/octet-stream"?p=yield f.blob():g==="text/event-stream"?p=f:g==="multipart/form-data"?p=yield f.formData():p=yield f.text(),{data:p,error:null,response:f}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new BA(i)}:{data:null,error:i,response:i instanceof VA||i instanceof qA?i.context:void 0}}})}}var Mr={},HS={},$x={},Am={},Rx={},Lx={},lQ=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Lu=lQ();const cQ=Lu.fetch,gR=Lu.fetch.bind(Lu),vR=Lu.Headers,uQ=Lu.Request,dQ=Lu.Response,Pd=Object.freeze(Object.defineProperty({__proto__:null,Headers:vR,Request:uQ,Response:dQ,default:gR,fetch:cQ},Symbol.toStringTag,{value:"Module"})),hQ=Qz(Pd);var Fx={};Object.defineProperty(Fx,"__esModule",{value:!0});let fQ=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Fx.default=fQ;var xR=ur&&ur.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Lx,"__esModule",{value:!0});const mQ=xR(hQ),pQ=xR(Fx);let gQ=class{constructor(t){var n,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(n=t.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=mQ.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=new Headers(this.headers),this.headers.set(t,n),this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let a=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c,u;let d=null,h=null,m=null,f=i.status,x=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=y:h=JSON.parse(y))}const p=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),v=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");p&&v&&v.length>1&&(m=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,m=null,f=406,x="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const p=await i.text();try{d=JSON.parse(p),Array.isArray(d)&&i.status===404&&(h=[],d=null,f=200,x="OK")}catch{i.status===404&&p===""?(f=204,x="No Content"):d={message:p}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,f=200,x="OK"),d&&this.shouldThrowOnError)throw new pQ.default(d)}return{error:d,data:h,count:m,status:f,statusText:x}});return this.shouldThrowOnError||(a=a.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,n)}returns(){return this}overrideTypes(){return this}};Lx.default=gQ;var vQ=ur&&ur.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Rx,"__esModule",{value:!0});const xQ=vQ(Lx);let yQ=class extends xQ.default{select(t){let n=!1;const r=(t??"*").split("").map(a=>/\s/.test(a)&&!n?"":(a==='"'&&(n=!n),a)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:a,referencedTable:i=a}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:a=r}={}){const i=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:a=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Rx.default=yQ;var wQ=ur&&ur.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Am,"__esModule",{value:!0});const bQ=wQ(Rx);let jQ=class extends bQ.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${o}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const a=r?`${r}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};Am.default=jQ;var NQ=ur&&ur.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($x,"__esModule",{value:!0});const lh=NQ(Am);let SQ=class{constructor(t,{headers:n={},schema:r,fetch:a}){this.url=t,this.headers=new Headers(n),this.schema=r,this.fetch=a}select(t,n){const{head:r=!1,count:a}=n??{},i=r?"HEAD":"GET";let o=!1;const l=(t??"*").split("").map(c=>/\s/.test(c)&&!o?"":(c==='"'&&(o=!o),c)).join("");return this.url.searchParams.set("select",l),a&&this.headers.append("Prefer",`count=${a}`),new lh.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:n,defaultToNull:r=!0}={}){var a;const i="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new lh.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:a,defaultToNull:i=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),a&&this.headers.append("Prefer",`count=${a}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new lh.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:n}={}){var r;const a="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new lh.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var n;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new lh.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};$x.default=SQ;var yR=ur&&ur.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(HS,"__esModule",{value:!0});const _Q=yR($x),CQ=yR(Am);let AQ=class wR{constructor(t,{headers:n={},schema:r,fetch:a}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=a}from(t){const n=new URL(`${this.url}/${t}`);return new _Q.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new wR(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:a=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;r||a?(l=r?"HEAD":"GET",Object.entries(n).filter(([h,m])=>m!==void 0).map(([h,m])=>[h,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([h,m])=>{c.searchParams.append(h,m)})):(l="POST",u=n);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new CQ.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};HS.default=AQ;var Ed=ur&&ur.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Mr,"__esModule",{value:!0});Mr.PostgrestError=Mr.PostgrestBuilder=Mr.PostgrestTransformBuilder=Mr.PostgrestFilterBuilder=Mr.PostgrestQueryBuilder=Mr.PostgrestClient=void 0;const bR=Ed(HS);Mr.PostgrestClient=bR.default;const jR=Ed($x);Mr.PostgrestQueryBuilder=jR.default;const NR=Ed(Am);Mr.PostgrestFilterBuilder=NR.default;const SR=Ed(Rx);Mr.PostgrestTransformBuilder=SR.default;const _R=Ed(Lx);Mr.PostgrestBuilder=_R.default;const CR=Ed(Fx);Mr.PostgrestError=CR.default;var PQ=Mr.default={PostgrestClient:bR.default,PostgrestQueryBuilder:jR.default,PostgrestFilterBuilder:NR.default,PostgrestTransformBuilder:SR.default,PostgrestBuilder:_R.default,PostgrestError:CR.default};const{PostgrestClient:EQ,PostgrestQueryBuilder:zke,PostgrestFilterBuilder:Bke,PostgrestTransformBuilder:qke,PostgrestBuilder:Vke,PostgrestError:Uke}=PQ;class kQ{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,a=parseInt(r.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const TQ="2.75.0",OQ=`realtime-js/${TQ}`,DQ="1.0.0",mj=1e4,MQ=1e3,IQ=100;var Bh;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Bh||(Bh={}));var Pn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Pn||(Pn={}));var Bs;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Bs||(Bs={}));var pj;(function(e){e.websocket="websocket"})(pj||(pj={}));var rl;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(rl||(rl={}));class $Q{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const a=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(t.slice(o,o+a));o=o+a;const c=r.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class AR{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Bt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Bt||(Bt={}));const UA=(e,t,n={})=>{var r;const a=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=RQ(o,e,t,a),i),{}):{}},RQ=(e,t,n,r)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,o=n[e];return i&&!r.includes(i)?PR(i,o):gj(o)},PR=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return BQ(t,n)}switch(e){case Bt.bool:return LQ(t);case Bt.float4:case Bt.float8:case Bt.int2:case Bt.int4:case Bt.int8:case Bt.numeric:case Bt.oid:return FQ(t);case Bt.json:case Bt.jsonb:return zQ(t);case Bt.timestamp:return qQ(t);case Bt.abstime:case Bt.date:case Bt.daterange:case Bt.int4range:case Bt.int8range:case Bt.money:case Bt.reltime:case Bt.text:case Bt.time:case Bt.timestamptz:case Bt.timetz:case Bt.tsrange:case Bt.tstzrange:return gj(t);default:return gj(t)}},gj=e=>e,LQ=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},FQ=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},zQ=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},BQ=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const o=e.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>PR(t,l))}return e},qQ=e=>typeof e=="string"?e.replace(" ","T"):e,ER=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class J0{constructor(t,n,r={},a=mj){this.channel=t,this.event=n,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var WA;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(WA||(WA={}));class qh{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=qh.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=qh.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=qh.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,a){const i=this.cloneDeep(t),o=this.transformState(n),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const m=d.map(p=>p.presence_ref),f=h.map(p=>p.presence_ref),x=d.filter(p=>f.indexOf(p.presence_ref)<0),g=h.filter(p=>m.indexOf(p.presence_ref)<0);x.length>0&&(l[u]=x),g.length>0&&(c[u]=g)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},r,a)}static syncDiff(t,n,r,a){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(f=>f.presence_ref),m=d.filter(f=>h.indexOf(f.presence_ref)<0);t[l].unshift(...m)}r(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,a(l,u,c),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const a=t[r];return"metas"in a?n[r]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=a,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var HA;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(HA||(HA={}));var Vh;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Vh||(Vh={}));var Ya;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ya||(Ya={}));class KS{constructor(t,n={config:{}},r){var a,i;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Pn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new J0(this,Bs.join,this.params,this.timeout),this.rejoinTimer=new AR(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Pn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Pn.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Pn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Pn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Pn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Bs.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new qh(this),this.broadcastEndpointURL=ER(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Pn.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&a!==void 0?a:[],d=!!this.bindings[Vh.PRESENCE]&&this.bindings[Vh.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},m={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(f=>t==null?void 0:t(Ya.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(Ya.CLOSED)),this.updateJoinPayload(Object.assign({config:m},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:f})=>{var x;if(this.socket.setAuth(),f===void 0){t==null||t(Ya.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,p=(x=g==null?void 0:g.length)!==null&&x!==void 0?x:0,v=[];for(let y=0;y<p;y++){const w=g[y],{filter:{event:S,schema:j,table:N,filter:C}}=w,_=f&&f[y];if(_&&_.event===S&&_.schema===j&&_.table===N&&_.filter===C)v.push(Object.assign(Object.assign({},w),{id:_.id}));else{this.unsubscribe(),this.state=Pn.errored,t==null||t(Ya.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(Ya.SUBSCRIBED);return}}).receive("error",f=>{this.state=Pn.errored,t==null||t(Ya.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Ya.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Pn.joined&&t===Vh.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,a;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Pn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Bs.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(a=>{r=new J0(this,Bs.leave,{},t),r.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Pn.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const a=new AbortController,i=setTimeout(()=>a.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(i),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new J0(this,t,n,r);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>IQ){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Bs;if(r&&[l,c,u,d].indexOf(o)>=0&&r!==this._joinRef())return;let m=this._onMessage(o,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(f=>{var x,g,p;return((x=f.filter)===null||x===void 0?void 0:x.event)==="*"||((p=(g=f.filter)===null||g===void 0?void 0:g.event)===null||p===void 0?void 0:p.toLocaleLowerCase())===o}).map(f=>f.callback(m,r)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var x,g,p,v,y,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const S=f.id,j=(x=f.filter)===null||x===void 0?void 0:x.event;return S&&((g=n.ids)===null||g===void 0?void 0:g.includes(S))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((p=n.data)===null||p===void 0?void 0:p.type.toLocaleLowerCase()))}else{const S=(y=(v=f==null?void 0:f.filter)===null||v===void 0?void 0:v.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return S==="*"||S===((w=n==null?void 0:n.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof m=="object"&&"ids"in m){const x=m.data,{schema:g,table:p,commit_timestamp:v,type:y,errors:w}=x;m=Object.assign(Object.assign({},{schema:g,table:p,commit_timestamp:v,eventType:y,new:{},old:{},errors:w}),this._getPayloadRecords(x))}f.callback(m,r)})}_isClosed(){return this.state===Pn.closed}_isJoined(){return this.state===Pn.joined}_isJoining(){return this.state===Pn.joining}_isLeaving(){return this.state===Pn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const a=t.toLocaleLowerCase(),i={type:a,filter:n,callback:r};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&KS.isEqual(a.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Bs.close,{},t)}_onError(t){this._on(Bs.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Pn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=UA(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=UA(t.columns,t.old_record)),n}}const Z0=()=>{},pp={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},VQ=[1e3,2e3,5e3,1e4],UQ=1e4,WQ=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class HQ{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=mj,this.transport=null,this.heartbeatIntervalMs=pp.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Z0,this.ref=0,this.reconnectTimer=null,this.logger=Z0,this.conn=null,this.sendBuffer=[],this.serializer=new $Q,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let i;return a?i=a:typeof fetch>"u"?i=(...o)=>Cm(async()=>{const{default:l}=await Promise.resolve().then(()=>Pd);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${pj.websocket}`,this.httpEndpoint=ER(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=kQ.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:DQ}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Bh.connecting:return rl.Connecting;case Bh.open:return rl.Open;case Bh.closing:return rl.Closing;default:return rl.Closed}}isConnected(){return this.connectionState()===rl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===r);if(a)return a;{const i=new KS(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(MQ,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},pp.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:a,payload:i,ref:o}=n,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${a} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(a,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Bs.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${t}${r}${a}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([WQ],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const a={access_token:n,version:OQ};n&&r.updateJoinPayload(a),r.joinedOnce&&r._isJoined()&&r._push(Bs.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new AR(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},pp.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,a,i,o,l,c,u,d;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:mj,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:pp.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Z0,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:h=>VQ[h-1]||UQ,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(h,m)=>m(JSON.stringify(h)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class GS extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function wn(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class KQ extends GS{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class vj extends GS{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var GQ=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const kR=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Cm(async()=>{const{default:r}=await Promise.resolve().then(()=>Pd);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},YQ=()=>GQ(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Cm(()=>Promise.resolve().then(()=>Pd),void 0)).Response:Response}),xj=e=>{if(Array.isArray(e))return e.map(n=>xj(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const a=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=xj(r)}),t},QQ=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var ec=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const ew=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),XQ=(e,t,n)=>ec(void 0,void 0,void 0,function*(){const r=yield YQ();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(a=>{const i=e.status||500,o=(a==null?void 0:a.statusCode)||i+"";t(new KQ(ew(a),i,o))}).catch(a=>{t(new vj(ew(a),a))}):t(new vj(ew(e),e))}),JQ=(e,t,n,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?a:(QQ(r)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(r)):a.body=r,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),n))};function Pm(e,t,n,r,a,i){return ec(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(n,JQ(t,r,a,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>XQ(c,l,r))})})}function Ug(e,t,n,r){return ec(this,void 0,void 0,function*(){return Pm(e,"GET",t,n,r)})}function ha(e,t,n,r,a){return ec(this,void 0,void 0,function*(){return Pm(e,"POST",t,r,a,n)})}function yj(e,t,n,r,a){return ec(this,void 0,void 0,function*(){return Pm(e,"PUT",t,r,a,n)})}function ZQ(e,t,n,r){return ec(this,void 0,void 0,function*(){return Pm(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function TR(e,t,n,r,a){return ec(this,void 0,void 0,function*(){return Pm(e,"DELETE",t,r,a,n)})}var eX=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class tX{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}execute(){return eX(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(wn(t))return{data:null,error:t};throw t}})}}var nX=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class rX{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}asStream(){return new tX(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.execute().then(t,n)}execute(){return nX(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(wn(t))return{data:null,error:t};throw t}})}}var Er=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const sX={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},KA={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class aX{constructor(t,n={},r,a){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=kR(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,a){return Er(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},KA),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),h=yield(t=="PUT"?yj:ha)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(wn(i))return{data:null,error:i};throw i}})}upload(t,n,r){return Er(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,a){return Er(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:KA.upsert},a),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield yj(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(wn(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return Er(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const a=Object.assign({},this.headers);n!=null&&n.upsert&&(a["x-upsert"]="true");const i=yield ha(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new GS("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wn(r))return{data:null,error:r};throw r}})}update(t,n,r){return Er(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Er(this,void 0,void 0,function*(){try{return{data:yield ha(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(wn(a))return{data:null,error:a};throw a}})}copy(t,n,r){return Er(this,void 0,void 0,function*(){try{return{data:{path:(yield ha(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(wn(a))return{data:null,error:a};throw a}})}createSignedUrl(t,n,r){return Er(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield ha(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(wn(a))return{data:null,error:a};throw a}})}createSignedUrls(t,n,r){return Er(this,void 0,void 0,function*(){try{const a=yield ha(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(wn(a))return{data:null,error:a};throw a}})}download(t,n){const a=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"",l=this._getFinalPath(t),c=()=>Ug(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new rX(c,this.shouldThrowOnError)}info(t){return Er(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Ug(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:xj(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wn(r))return{data:null,error:r};throw r}})}exists(t){return Er(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield ZQ(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wn(r)&&r instanceof vj){const a=r.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),a=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&a.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&a.push(c);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(t){return Er(this,void 0,void 0,function*(){try{return{data:yield TR(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wn(n))return{data:null,error:n};throw n}})}list(t,n,r){return Er(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},sX),n),{prefix:t||""});return{data:yield ha(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(wn(a))return{data:null,error:a};throw a}})}listV2(t,n){return Er(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield ha(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wn(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const iX="2.75.0",oX={"X-Client-Info":`storage-js/${iX}`};var vc=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class lX{constructor(t,n={},r,a){this.shouldThrowOnError=!1;const i=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},oX),n),this.fetch=kR(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return vc(this,void 0,void 0,function*(){try{return{data:yield Ug(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(wn(t))return{data:null,error:t};throw t}})}getBucket(t){return vc(this,void 0,void 0,function*(){try{return{data:yield Ug(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wn(n))return{data:null,error:n};throw n}})}createBucket(t){return vc(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield ha(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(wn(a))return{data:null,error:a};throw a}})}updateBucket(t,n){return vc(this,void 0,void 0,function*(){try{return{data:yield yj(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wn(r))return{data:null,error:r};throw r}})}emptyBucket(t){return vc(this,void 0,void 0,function*(){try{return{data:yield ha(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wn(n))return{data:null,error:n};throw n}})}deleteBucket(t){return vc(this,void 0,void 0,function*(){try{return{data:yield TR(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wn(n))return{data:null,error:n};throw n}})}}class cX extends lX{constructor(t,n={},r,a){super(t,n,r,a)}from(t){return new aX(this.url,this.headers,t,this.fetch)}}const uX="2.75.0";let Ph="";typeof Deno<"u"?Ph="deno":typeof document<"u"?Ph="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ph="react-native":Ph="node";const dX={"X-Client-Info":`supabase-js-${Ph}/${uX}`},hX={headers:dX},fX={schema:"public"},mX={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},pX={};var gX=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const vX=e=>{let t;return e?t=e:typeof fetch>"u"?t=gR:t=fetch,(...n)=>t(...n)},xX=()=>typeof Headers>"u"?vR:Headers,yX=(e,t,n)=>{const r=vX(n),a=xX();return(i,o)=>gX(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new a(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},o),{headers:u}))})};var wX=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};function bX(e){return e.endsWith("/")?e:e+"/"}function jX(e,t){var n,r;const{db:a,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,m={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>wX(this,void 0,void 0,function*(){return""})};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}function NX(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(bX(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const OR="2.75.0",Ec=30*1e3,wj=3,tw=wj*Ec,SX="http://localhost:9999",_X="supabase.auth.token",CX={"X-Client-Info":`gotrue-js/${OR}`},bj="X-Supabase-Api-Version",DR={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},AX=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,PX=10*60*1e3;class _f extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function We(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class EX extends _f{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function kX(e){return We(e)&&e.name==="AuthApiError"}class sl extends _f{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Io extends _f{constructor(t,n,r,a){super(t,r,a),this.name=n,this.status=r}}class Fi extends Io{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function TX(e){return We(e)&&e.name==="AuthSessionMissingError"}class xc extends Io{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class gp extends Io{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class vp extends Io{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function OX(e){return We(e)&&e.name==="AuthImplicitGrantRedirectError"}class GA extends Io{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class jj extends Io{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function nw(e){return We(e)&&e.name==="AuthRetryableFetchError"}class YA extends Io{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Nj extends Io{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Wg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),QA=` 	
\r=`.split(""),DX=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<QA.length;t+=1)e[QA[t].charCodeAt(0)]=-2;for(let t=0;t<Wg.length;t+=1)e[Wg[t].charCodeAt(0)]=t;return e})();function XA(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Wg[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Wg[r]),t.queuedBits-=6}}function MR(e,t,n){const r=DX[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function JA(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{$X(o,r,n)};for(let o=0;o<e.length;o+=1)MR(e.charCodeAt(o),a,i);return t.join("")}function MX(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function IX(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const a=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}MX(r,t)}}function $X(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function iu(e){const t=[],n={queue:0,queuedBits:0},r=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)MR(e.charCodeAt(a),n,r);return new Uint8Array(t)}function RX(e){const t=[];return IX(e,n=>t.push(n)),new Uint8Array(t)}function ul(e){const t=[],n={queue:0,queuedBits:0},r=a=>{t.push(a)};return e.forEach(a=>XA(a,n,r)),XA(null,n,r),t.join("")}function LX(e){return Math.round(Date.now()/1e3)+e}function FX(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Kr=()=>typeof window<"u"&&typeof document<"u",Wo={tested:!1,writable:!1},IR=()=>{if(!Kr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Wo.tested)return Wo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Wo.tested=!0,Wo.writable=!0}catch{Wo.tested=!0,Wo.writable=!1}return Wo.writable};function zX(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return n.searchParams.forEach((r,a)=>{t[a]=r}),t}const $R=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Cm(async()=>{const{default:r}=await Promise.resolve().then(()=>Pd);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},BX=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",kc=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Ho=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ii=async(e,t)=>{await e.removeItem(t)};class zx{constructor(){this.promise=new zx.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}zx.promiseConstructor=Promise;function rw(e){const t=e.split(".");if(t.length!==3)throw new Nj("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!AX.test(t[r]))throw new Nj("JWT not in base64url format");return{header:JSON.parse(JA(t[0])),payload:JSON.parse(JA(t[1])),signature:iu(t[2]),raw:{header:t[0],payload:t[1]}}}async function qX(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function VX(e,t){return new Promise((r,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){r(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function UX(e){return("0"+e.toString(16)).substr(-2)}function WX(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let a="";for(let i=0;i<56;i++)a+=n.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(t),Array.from(t,UX).join("")}async function HX(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(r);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function KX(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await HX(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function yc(e,t,n=!1){const r=WX();let a=r;n&&(a+="/PASSWORD_RECOVERY"),await kc(e,`${t}-code-verifier`,a);const i=await KX(r);return[i,r===i?"plain":"s256"]}const GX=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function YX(e){const t=e.headers.get(bj);if(!t||!t.match(GX))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function QX(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function XX(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const JX=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function wc(e){if(!JX.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function sw(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ZA(e){return JSON.parse(JSON.stringify(e))}var ZX=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};const Jo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),eJ=[502,503,504];async function eP(e){var t;if(!BX(e))throw new jj(Jo(e),0);if(eJ.includes(e.status))throw new jj(Jo(e),e.status);let n;try{n=await e.json()}catch(i){throw new sl(Jo(i),i)}let r;const a=YX(e);if(a&&a.getTime()>=DR["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new YA(Jo(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Fi}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new YA(Jo(n),e.status,n.weak_password.reasons);throw new EX(Jo(n),e.status||500,r)}const tJ=(e,t,n,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),n))};async function Je(e,t,n,r){var a;const i=Object.assign({},r==null?void 0:r.headers);i[bj]||(i[bj]=DR["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(a=r==null?void 0:r.query)!==null&&a!==void 0?a:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await nJ(e,t,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function nJ(e,t,n,r,a,i){const o=tJ(t,r,a,i);let l;try{l=await e(n,Object.assign({},o))}catch(c){throw console.error(c),new jj(Jo(c),0)}if(l.ok||await eP(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await eP(c)}}function Is(e){var t;let n=null;aJ(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=LX(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function tP(e){const t=Is(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ki(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function rJ(e){return{data:e,error:null}}function sJ(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:i}=e,o=ZX(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function nP(e){return e}function aJ(e){return e.access_token&&e.refresh_token&&e.expires_in}const aw=["global","local","others"];var iJ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};class oJ{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=$R(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=aw[0]){if(aw.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${aw.join(", ")}`);try{return await Je(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(We(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await Je(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ki})}catch(r){if(We(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=iJ(t,["options"]),a=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(a.new_email=r==null?void 0:r.newEmail,delete a.newEmail),await Je(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:sJ,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(We(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Je(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ki})}catch(n){if(We(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,a,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Je(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:nP});if(d.error)throw d.error;const h=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(x=>{const g=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(x.split(";")[1].split("=")[1]);u[`${p}Page`]=g}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(We(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){wc(t);try{return await Je(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ki})}catch(n){if(We(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){wc(t);try{return await Je(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Ki})}catch(r){if(We(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){wc(t);try{return await Je(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ki})}catch(r){if(We(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){wc(t.userId);try{const{data:n,error:r}=await Je(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:r}}catch(n){if(We(n))return{data:null,error:n};throw n}}async _deleteFactor(t){wc(t.userId),wc(t.id);try{return{data:await Je(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,a,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Je(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:nP});if(d.error)throw d.error;const h=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(x=>{const g=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(x.split(";")[1].split("=")[1]);u[`${p}Page`]=g}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(We(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await Je(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(We(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await Je(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(We(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Je(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(We(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await Je(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(We(n))return{data:null,error:n};throw n}}}function rP(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const bc={debug:!!(globalThis&&IR()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class RR extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class lJ extends RR{}async function cJ(e,t,n){bc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),bc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){bc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await n()}finally{bc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw bc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new lJ(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(bc.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function uJ(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function LR(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function dJ(e){return parseInt(e,16)}function hJ(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function fJ(e){var t;const{chainId:n,domain:r,expirationTime:a,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:u,scheme:d,uri:h,version:m}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(m!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${m}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const f=LR(e.address),x=d?`${d}://${r}`:r,g=e.statement?`${e.statement}
`:"",p=`${x} wants you to sign in with your Ethereum account:
${f}

${g}`;let v=`URI: ${h}
Version: ${m}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(a&&(v+=`
Expiration Time: ${a.toISOString()}`),l&&(v+=`
Not Before: ${l.toISOString()}`),c&&(v+=`
Request ID: ${c}`),u){let y=`
Resources:`;for(const w of u){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);y+=`
- ${w}`}v+=y}return`${p}
${v}`}class yn extends Error{constructor({message:t,code:n,cause:r,name:a}){var i;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(i=a??(r instanceof Error?r.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=n}}class Hg extends yn{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}}function mJ({error:e,options:t}){var n,r,a;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new yn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new yn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=i.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new yn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new yn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new yn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new yn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new yn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new yn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(zR(o)){if(i.rp.id!==o)return new yn({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new yn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new yn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new yn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new yn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function pJ({error:e,options:t}){const{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new yn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new yn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const r=window.location.hostname;if(zR(r)){if(n.rpId!==r)return new yn({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new yn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new yn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new yn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var FR=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};class gJ{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const vJ=new gJ;function xJ(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:n,excludeCredentials:r}=e,a=FR(e,["challenge","user","excludeCredentials"]),i=iu(t).buffer,o=Object.assign(Object.assign({},n),{id:iu(n.id).buffer}),l=Object.assign(Object.assign({},a),{challenge:i,user:o});if(r&&r.length>0){l.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){const u=r[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:iu(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function yJ(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:n}=e,r=FR(e,["challenge","allowCredentials"]),a=iu(t).buffer,i=Object.assign(Object.assign({},r),{challenge:a});if(n&&n.length>0){i.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const l=n[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:iu(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function wJ(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e;return{id:e.id,rawId:e.id,response:{attestationObject:ul(new Uint8Array(e.response.attestationObject)),clientDataJSON:ul(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function bJ(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const n=e,r=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:ul(new Uint8Array(a.authenticatorData)),clientDataJSON:ul(new Uint8Array(a.clientDataJSON)),signature:ul(new Uint8Array(a.signature)),userHandle:a.userHandle?ul(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function zR(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function sP(){var e,t;return!!(Kr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function jJ(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Hg("Browser returned unexpected credential type",t)}:{data:null,error:new Hg("Empty credential response",t)}}catch(t){return{data:null,error:mJ({error:t,options:e})}}}async function NJ(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Hg("Browser returned unexpected credential type",t)}:{data:null,error:new Hg("Empty credential response",t)}}catch(t){return{data:null,error:pJ({error:t,options:e})}}}const SJ={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},_J={userVerification:"preferred",hints:["security-key"]};function Kg(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),n=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),r={};for(const a of e)if(a)for(const i in a){const o=a[i];if(o!==void 0)if(Array.isArray(o))r[i]=o;else if(n(o))r[i]=o;else if(t(o)){const l=r[i];t(l)?r[i]=Kg(l,o):r[i]=Kg(o)}else r[i]=o}return r}function CJ(e,t){return Kg(SJ,e,t||{})}function AJ(e,t){return Kg(_J,e,t||{})}class PJ{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:a},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!o)return{data:null,error:l};const c=a??vJ.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=CJ(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:h}=await jJ({publicKey:u,signal:c});return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const u=AJ(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:h}=await NJ(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(o){return We(o)?{data:null,error:o}:{data:null,error:new sl("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:a}},i){if(!n)return{data:null,error:new _f("rpId is required for WebAuthn authentication")};try{if(!sP())return{data:null,error:new sl("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:a},{request:i});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(o){return We(o)?{data:null,error:o}:{data:null,error:new sl("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:a},i){if(!n)return{data:null,error:new _f("rpId is required for WebAuthn registration")};try{if(!sP())return{data:null,error:new sl("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(m=>m.factor_type==="webauthn"&&m.friendly_name===t&&m.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:a},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(o){return We(o)?{data:null,error:o}:{data:null,error:new sl("Unexpected error in register",o)}}}}uJ();const EJ={url:SX,storageKey:_X,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:CX,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function aP(e,t,n){return await n()}const jc={};class Cf{get jwks(){var t,n;return(n=(t=jc[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){jc[this.storageKey]=Object.assign(Object.assign({},jc[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=jc[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){jc[this.storageKey]=Object.assign(Object.assign({},jc[this.storageKey]),{cachedAt:t})}constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Cf.nextInstanceID,Cf.nextInstanceID+=1,this.instanceID>0&&Kr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},EJ),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new oJ({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=$R(a.fetch),this.lock=a.lock||aP,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Kr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=cJ:this.lock=aP,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new PJ(this)},this.persistSession?(a.storage?this.storage=a.storage:IR()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=rP(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=rP(this.memoryStorage)),Kr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${OR}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=zX(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Kr()&&this.detectSessionInUrl&&r!=="none"){const{data:a,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),OX(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return We(n)?{error:n}:{error:new sl("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,a;try{const i=await Je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Is}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(We(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,a;try{let i;if("email"in t){const{email:d,password:h,options:m}=t;let f=null,x=null;this.flowType==="pkce"&&([f,x]=await yc(this.storage,this.storageKey)),i=await Je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:f,code_challenge_method:x},xform:Is})}else if("phone"in t){const{phone:d,password:h,options:m}=t;i=await Je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(a=m==null?void 0:m.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Is})}else throw new gp("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(We(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:o,options:l}=t;n=await Je(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:tP})}else if("phone"in t){const{phone:i,password:o,options:l}=t;n=await Je(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:tP})}else throw new gp("You must provide either an email or phone number and a password");const{data:r,error:a}=n;return a?{data:{user:null,session:null},error:a}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new xc}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(n){if(We(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;switch(n){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(t){var n,r,a,i,o,l,c,u,d,h,m;let f,x;if("message"in t)f=t.message,x=t.signature;else{const{chain:g,wallet:p,statement:v,options:y}=t;let w;if(Kr())if(typeof p=="object")w=p;else{const A=window;if("ethereum"in A&&typeof A.ethereum=="object"&&"request"in A.ethereum&&typeof A.ethereum.request=="function")w=A.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=p}const S=new URL((n=y==null?void 0:y.url)!==null&&n!==void 0?n:window.location.href),j=await w.request({method:"eth_requestAccounts"}).then(A=>A).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!j||j.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const N=LR(j[0]);let C=(r=y==null?void 0:y.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!C){const A=await w.request({method:"eth_chainId"});C=dJ(A)}const _={domain:S.host,address:N,statement:v,uri:S.href,version:"1",chainId:C,nonce:(a=y==null?void 0:y.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(o=(i=y==null?void 0:y.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=y==null?void 0:y.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=y==null?void 0:y.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=y==null?void 0:y.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=y==null?void 0:y.signInWithEthereum)===null||d===void 0?void 0:d.resources};f=fJ(_),x=await w.request({method:"personal_sign",params:[hJ(f),N]})}try{const{data:g,error:p}=await Je(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:f,signature:x},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Is});if(p)throw p;return!g||!g.session||!g.user?{data:{user:null,session:null},error:new xc}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:Object.assign({},g),error:p})}catch(g){if(We(g))return{data:{user:null,session:null},error:g};throw g}}async signInWithSolana(t){var n,r,a,i,o,l,c,u,d,h,m,f;let x,g;if("message"in t)x=t.message,g=t.signature;else{const{chain:p,wallet:v,statement:y,options:w}=t;let S;if(Kr())if(typeof v=="object")S=v;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))S=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=v}const j=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in S&&S.signIn){const N=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),y?{statement:y}:null));let C;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")C=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)C=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)x=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),g=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${j.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(a=(r=w==null?void 0:w.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((h=(d=w==null?void 0:w.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...w.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const N=await S.signMessage(new TextEncoder().encode(x),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=N}}try{const{data:p,error:v}=await Je(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:ul(g)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Is});if(v)throw v;return!p||!p.session||!p.user?{data:{user:null,session:null},error:new xc}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:Object.assign({},p),error:v})}catch(p){if(We(p))return{data:{user:null,session:null},error:p};throw p}}async _exchangeCodeForSession(t){const n=await Ho(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(n??"").split("/");try{const{data:i,error:o}=await Je(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Is});if(await Ii(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new xc}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(We(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:a,access_token:i,nonce:o}=t,l=await Je(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Is}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new xc}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(We(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,a,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await yc(this.storage,this.storageKey));const{error:h}=await Je(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await Je(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new gp("You must provide either an email or phone number.")}catch(l){if(We(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let a,i;"options"in t&&(a=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await Je(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Is});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(We(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var n,r,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await yc(this.storage,this.storageKey)),await Je(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:rJ})}catch(i){if(We(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Fi;const{error:a}=await Je(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(We(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:a,options:i}=t,{error:o}=await Je(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:a,options:i}=t,{data:o,error:l}=await Je(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new gp("You must provide either an email or phone number and a type")}catch(n){if(We(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Ho(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<tw:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await Ho(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=sw()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Je(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ki}):await this._useSession(async n=>{var r,a,i;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Fi}:await Je(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Ki})})}catch(n){if(We(n))return TX(n)&&(await this._removeSession(),await Ii(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:a,error:i}=r;if(i)throw i;if(!a.session)throw new Fi;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await yc(this.storage,this.storageKey));const{data:u,error:d}=await Je(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Ki});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(We(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Fi;const n=Date.now()/1e3;let r=n,a=!0,i=null;const{payload:o}=rw(t.access_token);if(o.exp&&(r=o.exp,a=r<=n),a){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(We(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:l}=n;if(l)throw l;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Fi;const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(We(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Kr())throw new vp("No browser detected.");if(t.error||t.error_description||t.error_code)throw new vp(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new GA("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new vp("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new GA("No code detected.");const{data:y,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new vp("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let m=d+h;c&&(m=parseInt(c));const f=m-d;f*1e3<=Ec&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const x=m-h;d-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,m,d):d-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,m,d);const{data:g,error:p}=await this._getUser(i);if(p)throw p;const v={provider_token:r,provider_refresh_token:a,access_token:i,expires_in:h,expires_at:m,refresh_token:o,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:t.type},error:null}}catch(r){if(We(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Ho(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:a,error:i}=n;if(i)return{error:i};const o=(r=a.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(kX(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Ii(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=FX(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,a;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await yc(this.storage,this.storageKey,!0));try{return await Je(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(We(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(We(n))return{data:null,error:n};throw n}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var n;try{const{data:r,error:a}=await this._useSession(async i=>{var o,l,c,u,d;const{data:h,error:m}=i;if(m)throw m;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Je(this.fetch,"GET",f,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return Kr()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(We(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async linkIdentityIdToken(t){return await this._useSession(async n=>{var r;try{const{error:a,data:{session:i}}=n;if(a)throw a;const{options:o,provider:l,token:c,access_token:u,nonce:d}=t,h=await Je(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=i==null?void 0:i.access_token)!==null&&r!==void 0?r:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Is}),{data:m,error:f}=h;return f?{data:{user:null,session:null},error:f}:!m||!m.session||!m.user?{data:{user:null,session:null},error:new xc}:(m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("USER_UPDATED",m.session)),{data:m,error:f})}catch(a){if(We(a))return{data:{user:null,session:null},error:a};throw a}})}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,a;const{data:i,error:o}=n;if(o)throw o;return await Je(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(We(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await VX(async a=>(a>0&&await qX(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await Je(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Is})),(a,i)=>{const o=200*Math.pow(2,a);return i&&nw(i)&&Date.now()+o-r<Ec})}catch(r){if(this._debug(n,"error",r),We(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Kr()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await Ho(this.storage,this.storageKey);if(a&&this.userStorage){let o=await Ho(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await kc(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:sw()}else if(a&&!a.user&&!a.user){const o=await Ho(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await Ii(this.storage,this.storageKey+"-user"),await kc(this.storage,this.storageKey,a)):a.user=sw()}if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const i=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<tw;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${tw}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),nw(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Fi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new zx;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Fi;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),We(i)){const o={data:null,error:i};return nw(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,n,r=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await kc(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const i=ZA(a);await kc(this.storage,this.storageKey,i)}else{const a=ZA(n);await kc(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Ii(this.storage,this.storageKey),await Ii(this.storage,this.storageKey+"-code-verifier"),await Ii(this.storage,this.storageKey+"-user"),this.userStorage&&await Ii(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Kr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ec);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-t)/Ec);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Ec}ms, refresh threshold is ${wj} ticks`),a<=wj&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof RR)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Kr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const a=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await yc(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);a.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:a,error:i}=n;return i?{data:null,error:i}:await Je(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(We(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,a;const{data:i,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await Je(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&c.type==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(We(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:i}=n;if(i)return{data:null,error:i};const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?wJ(t.webauthn.credential_response):bJ(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await Je(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:c})})}catch(n){if(We(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:i}=n;if(i)return{data:null,error:i};const o=await Je(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:xJ(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:yJ(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(We(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){var t;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=n==null?void 0:n.factors)!==null&&t!==void 0?t:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:a},error:i}=t;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=rw(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((r=(n=a.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const a=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+PX>a)return r;const{data:i,error:o}=await Je(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,r=i.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:f,error:x}=await this.getSession();if(x||!f.session)return{data:null,error:x};r=f.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=rw(r);n!=null&&n.allowExpired||QX(i.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:i,header:a,signature:o},error:null}}const d=XX(a.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,RX(`${l}.${c}`)))throw new Nj("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(r){if(We(r))return{data:null,error:r};throw r}}}Cf.nextInstanceID=0;const kJ=Cf;class TJ extends kJ{constructor(t){super(t)}}var OJ=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class DJ{constructor(t,n,r){var a,i,o;this.supabaseUrl=t,this.supabaseKey=n;const l=NX(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:fX,realtime:pX,auth:Object.assign(Object.assign({},mX),{storageKey:c}),global:hX},d=jX(r??{},u);this.storageKey=(a=d.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=yX(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new EQ(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new cX(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new oQ(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return OJ(this,void 0,void 0,function*(){var t,n;if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:a,userStorage:i,storageKey:o,flowType:l,lock:c,debug:u},d,h){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new TJ({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),d),storageKey:o,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:a,userStorage:i,flowType:l,lock:c,debug:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>f.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new HQ(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const MJ=(e,t,n)=>new DJ(e,t,n);function IJ(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}IJ()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const BR="https://fqmeqckchbppabetefuk.supabase.co",$J="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZxbWVxY2tjaGJwcGFiZXRlZnVrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY2NzUzODYsImV4cCI6MjA3MjI1MTM4Nn0.MkyVvQVmqUXShrHXHTpHib0Dyq39ZB47KhGZZgBlF-o",fe=MJ(BR,$J,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),qR=async()=>{const{data:{user:e},error:t}=await fe.auth.getUser();if(t)throw t;return e},Bx=async()=>{const e=await qR();if(!e)return null;const{data:t,error:n}=await fe.from("user_profiles").select("*").eq("id",e.id).single();if(n)throw n;return t},RJ=async(e,t,n,r,a="assistant")=>{const{data:i,error:o}=await fe.auth.signUp({email:e,password:t,options:{data:{username:n,full_name:r,role:a}}});if(o)throw o;return i},LJ=async()=>{const{error:e}=await fe.auth.signOut();if(e)throw e;try{localStorage.removeItem("supabase.auth.token"),localStorage.removeItem("sb-"+BR.split("//")[1].split(".")[0]+"-auth-token"),document.cookie.split(";").forEach(t=>{document.cookie=t.replace(/^ +/,"").replace(/=.*/,"=;expires="+new Date().toUTCString()+";path=/")})}catch(t){console.warn("Error clearing auth storage:",t)}},FJ=async e=>{const t=await qR();if(!t)throw new Error("No authenticated user");const{data:n,error:r}=await fe.from("user_profiles").select("*").eq("id",t.id).single();n||await VR(t);const a=Object.entries({...e,updated_at:new Date().toISOString()}).reduce((l,[c,u])=>(u!=null&&u!==""&&(l[c]=u),l),{}),{data:i,error:o}=await fe.from("user_profiles").update(a).eq("id",t.id).select().single();if(o){const l=t.user_metadata||{},c=l.full_name||l.name||"",u=(n==null?void 0:n.username)||l.username||t.email.split("@")[0],d=(n==null?void 0:n.role)||l.role||"assistant",h={id:t.id,email:t.email,username:u,full_name:c,role:d,...a},{data:m,error:f}=await fe.from("user_profiles").upsert(h).select().single();if(f)throw new Error(`Profile update failed: ${f.message}`);return m}return i},VR=async e=>{const t=await Bx();if(t)return t;const n=e.user_metadata||{},r=n.full_name||n.name||"",a=n.username||e.email.split("@")[0],i=n.role||"assistant",{data:o,error:l}=await fe.from("user_profiles").insert({id:e.id,email:e.email,username:a,full_name:r,role:i}).select().single();if(l)throw l;return o},zJ=async e=>{const{data:t,error:n}=await fe.auth.resetPasswordForEmail(e,{redirectTo:"https://vetoapp-six.vercel.app//reset-password"});if(n)throw n;return t},Hs={all:["auth"],session:()=>[...Hs.all,"session"]},BJ=async()=>{try{const{data:{session:e},error:t}=await fe.auth.getSession();if(t||!(e!=null&&e.user))return null;let n=null;try{n=await Bx(),console.log(" Profile loaded from database:",n)}catch(r){console.error(" Error loading profile:",r);try{n=await VR(e.user),console.log(" Profile created:",n)}catch(a){throw console.error(" Failed to create user profile:",a),new Error("Failed to load or create user profile. Please contact support.")}}return n?{id:e.user.id,email:e.user.email,profile:n}:null}catch{return null}},qJ=()=>Ft({queryKey:Hs.session(),queryFn:BJ,staleTime:5*60*1e3,gcTime:10*60*1e3,retry:!1,refetchOnWindowFocus:!1,refetchOnMount:"always",refetchOnReconnect:!1,networkMode:"offlineFirst"}),UR=()=>{const e=xt();return jt({mutationFn:async({email:t,password:n})=>{const{data:r,error:a}=await fe.auth.signInWithPassword({email:t,password:n});if(a){const o={"Invalid login credentials":"Email ou mot de passe incorrect","Email not confirmed":"Veuillez confirmer votre email avant de vous connecter","Too many requests":"Trop de tentatives de connexion. Veuillez ressayer plus tard"}[a.message]||a.message;throw new Error(o)}if(!r.user||!r.session)throw new Error("chec de connexion - session invalide");return r.user},onSuccess:async()=>{await new Promise(t=>setTimeout(t,100)),e.refetchQueries({queryKey:Hs.session()})},onError:()=>{e.setQueryData(Hs.session(),null)}})},VJ=()=>{const e=xt();return jt({mutationFn:async()=>{await LJ()},onSuccess:()=>{e.setQueryData(Hs.session(),null),e.removeQueries({queryKey:Hs.session()})}})},UJ=()=>{const e=xt();return jt({mutationFn:async()=>{const t=await Bx();if(!t)throw new Error("Could not refresh profile");return t},onSuccess:()=>{e.invalidateQueries({queryKey:Hs.session()})}})},WJ=()=>jt({mutationFn:async()=>{const{data:e,error:t}=await fe.auth.signInWithOAuth({provider:"google",options:{redirectTo:"https://vetoapp-six.vercel.app//dashboard"}});if(t)throw t;return e}}),HJ=()=>jt({mutationFn:async e=>{await zJ(e)}}),WR=b.createContext(void 0);function KJ({children:e}){const{data:t,isLoading:n,error:r}=qJ(),a=UR(),i=VJ(),o=UJ(),l=xt(),[c,u]=b.useState(!1),d=b.useRef(!1);b.useEffect(()=>{if(d.current)return;d.current=!0;const{data:{subscription:v}}=fe.auth.onAuthStateChange((w,S)=>{w==="SIGNED_OUT"?(l.setQueryData(Hs.session(),null),l.removeQueries({queryKey:Hs.session()})):w==="TOKEN_REFRESHED"&&S&&l.invalidateQueries({queryKey:Hs.session()}),c||u(!0)}),y=setTimeout(()=>{c||u(!0)},2e3);return()=>{v.unsubscribe(),clearTimeout(y),d.current=!1}},[l,c]);const h=async(v,y)=>{try{return await a.mutateAsync({email:v,password:y}),!0}catch(w){return console.error("Login error:",w),!1}},m=async()=>{try{await i.mutateAsync()}catch(v){console.error("Logout error:",v),l.setQueryData(Hs.session(),null)}},f=async()=>{await o.mutateAsync()},x=!c||n&&!r&&t===void 0,g=a.isPending||i.isPending,p={user:t||null,isAuthenticated:!!t&&c,isLoading:x||g,login:h,logout:m,refreshProfile:f};return s.jsx(WR.Provider,{value:p,children:e})}function Sn(){const e=b.useContext(WR);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}function iP(){const{user:e,logout:t}=Sn(),{toast:n}=it(),r=Ad(),[a,i]=b.useState(!1),o=async()=>{i(!0),await new Promise(d=>setTimeout(d,500)),t(),n({title:"Dconnexion russie",description:"Vous avez t dconnect avec succs."}),i(!1)};if(!e)return null;const l=d=>d?d.split(" ").map(h=>h.charAt(0)).join("").toUpperCase().slice(0,2):e.profile.username.charAt(0).toUpperCase(),c=d=>{switch(d){case"admin":return"Administrateur";case"assistant":return"Assistant";default:return"Utilisateur"}},u=d=>{switch(d){case"admin":return s.jsx(Jn,{className:"h-3 w-3"});case"assistant":return s.jsx(Kn,{className:"h-3 w-3"});default:return s.jsx(Kn,{className:"h-3 w-3"})}};return s.jsxs($Y,{children:[s.jsx(RY,{asChild:!0,children:s.jsx($,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:s.jsx(er,{className:"h-8 w-8",children:s.jsx(tr,{className:"bg-primary text-primary-foreground text-sm",children:l(e.profile.full_name)})})})}),s.jsxs(rR,{className:"w-56",align:"end",forceMount:!0,children:[s.jsx(sR,{className:"font-normal",children:s.jsxs("div",{className:"flex flex-col space-y-1",children:[s.jsx("p",{className:"text-sm font-medium leading-none",children:e.profile.full_name||e.profile.username}),s.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:e.email}),s.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[u(e.profile.role),s.jsx("span",{className:"text-xs text-muted-foreground",children:c(e.profile.role)})]})]})}),s.jsx(hj,{}),s.jsxs(dj,{className:"cursor-pointer",onClick:()=>r("/profile"),children:[s.jsx(Kn,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Profil"})]}),s.jsx(hj,{}),s.jsxs(dj,{className:"cursor-pointer text-red-600 focus:text-red-600",onClick:o,disabled:a,children:[s.jsx(oS,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:a?"Dconnexion...":"Se dconnecter"})]})]})]})}const GJ=[{icon:DU,label:"Dashboard",path:"/dashboard",permission:null},{icon:Ra,label:"Clients",path:"/clients",permission:"can_manage_clients"},{icon:gt,label:"Animaux",path:"/pets",permission:"can_manage_animals"},{icon:Ze,label:"RDV",path:"/appointments",permission:"can_create_consultations"},{icon:ts,label:"Consultations",path:"/consultations",permission:"can_create_consultations"},{icon:xo,label:"Vaccinations",path:"/vaccinations",permission:"can_create_consultations"},{icon:Mb,label:"Antiparasites",path:"/antiparasites",permission:"can_create_consultations"},{icon:aS,label:"Historiques",path:"/history",permission:"can_view_reports"}],YJ=[{icon:II,label:"Fermes",path:"/farms",permission:"can_manage_farms"},{icon:wa,label:"Stock",path:"/stock",permission:"can_manage_stock"},{icon:kU,label:"Comptabilit",path:"/accounting",permission:"can_manage_accounting"},{icon:Jn,label:"Administration",path:"/admin",permission:null,adminOnly:!0},{icon:AU,label:"Paramtres",path:"/settings",permission:null}],oP=(e,t)=>{var n,r,a,i;return((n=e==null?void 0:e.profile)==null?void 0:n.role)==="admin"?!0:t.adminOnly&&((r=e==null?void 0:e.profile)==null?void 0:r.role)!=="admin"?!1:t.permission?(a=e==null?void 0:e.profile)!=null&&a.permissions?((i=e==null?void 0:e.profile)==null?void 0:i.permissions[t.permission])===!0:!1:!0};function zn(){var l,c,u;const e=Mo(),[t,n]=b.useState(!1),{user:r}=Sn();console.log(" Navigation Debug - Full User Object:",r),console.log(" Navigation Debug - Profile:",r==null?void 0:r.profile),console.log(" Navigation Debug:",{role:(l=r==null?void 0:r.profile)==null?void 0:l.role,permissions:(c=r==null?void 0:r.profile)==null?void 0:c.permissions,hasPermissionsObject:!!((u=r==null?void 0:r.profile)!=null&&u.permissions),userExists:!!r,profileExists:!!(r!=null&&r.profile)});const a=GJ.filter(d=>{const h=oP(r,d);return console.log(`  PRIMARY - ${d.label}: ${h?"":""} (permission: ${d.permission||"none"})`),h}),i=YJ.filter(d=>{const h=oP(r,d);return console.log(`  SECONDARY - ${d.label}: ${h?"":""} (permission: ${d.permission||"none"}, adminOnly: ${d.adminOnly||!1})`),h}),o=[...a,...i];return console.log(` Filtered Navigation: ${a.length} primary, ${i.length} secondary, ${o.length} total`),s.jsx("nav",{className:"bg-card border-b shadow-card",children:s.jsxs("div",{className:"container mx-auto px-2 sm:px-4 py-2 sm:py-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-shrink-0",children:[s.jsxs(gs,{to:"/dashboard",className:"flex items-center gap-1 sm:gap-2",children:[s.jsx(gt,{className:"h-6 w-6 sm:h-7 sm:w-7 text-primary"}),s.jsx("h1",{className:"text-lg sm:text-xl font-bold gradient-primary bg-clip-text text-transparent hidden sm:block",children:"VetPro CRM"}),s.jsx("h1",{className:"text-base sm:text-lg font-bold gradient-primary bg-clip-text text-transparent sm:hidden",children:"VetPro"})]}),s.jsx("div",{className:"hidden sm:block",children:s.jsx(AA,{})})]}),s.jsxs("div",{className:"hidden lg:flex items-center gap-1",children:[a.map(d=>s.jsx($,{variant:e.pathname===d.path?"default":"ghost",size:"sm",className:"gap-1 px-3 transition-all hover:medical-glow",asChild:!0,children:s.jsxs(gs,{to:d.path,children:[s.jsx(d.icon,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden xl:inline",children:d.label})]})},d.path)),i.length>0&&s.jsxs("div",{className:"relative group",children:[s.jsxs($,{variant:"ghost",size:"sm",className:"gap-1 px-3 transition-all hover:medical-glow",children:[s.jsx(WC,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden xl:inline",children:"Plus"})]}),s.jsx("div",{className:"absolute right-0 top-full mt-1 w-40 bg-card border rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:s.jsx("div",{className:"py-1",children:i.map(d=>s.jsxs(gs,{to:d.path,className:`flex items-center gap-2 px-4 py-2 text-sm transition-colors hover:bg-muted ${e.pathname===d.path?"bg-primary text-primary-foreground":""}`,children:[s.jsx(d.icon,{className:"h-4 w-4"}),d.label]},d.path))})})]})]}),s.jsx("div",{className:"hidden lg:flex items-center gap-2",children:s.jsx(iP,{})}),s.jsxs("div",{className:"lg:hidden flex items-center gap-2",children:[s.jsx("div",{className:"sm:hidden",children:s.jsx(AA,{})}),s.jsx(iP,{}),s.jsx($,{variant:"ghost",size:"sm",onClick:()=>n(!t),className:"gap-1 p-2",children:t?s.jsx(Ws,{className:"h-4 w-4"}):s.jsx(WC,{className:"h-4 w-4"})})]})]}),t&&s.jsx("div",{className:"lg:hidden mt-2 pt-2 border-t",children:s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1",children:o.map(d=>s.jsx($,{variant:e.pathname===d.path?"default":"ghost",size:"sm",className:"gap-2 justify-start text-xs sm:text-sm",asChild:!0,onClick:()=>n(!1),children:s.jsxs(gs,{to:d.path,children:[s.jsx(d.icon,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{className:"truncate",children:d.label})]})},d.path))})})]})})}class QJ extends b.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){console.error("ErrorBoundary caught an error:",t,n),this.setState({error:t,errorInfo:n})}render(){var t,n;return this.state.hasError?s.jsx("div",{className:"min-h-screen bg-red-50 flex items-center justify-center p-8",children:s.jsxs("div",{className:"max-w-2xl bg-white p-8 rounded-lg shadow-lg border border-red-200",children:[s.jsx("h1",{className:"text-2xl font-bold text-red-800 mb-4",children:" Erreur dans l'application"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-red-700 mb-2",children:"Erreur :"}),s.jsx("pre",{className:"bg-red-100 p-4 rounded text-sm text-red-800 overflow-auto",children:(t=this.state.error)==null?void 0:t.toString()})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-red-700 mb-2",children:"Stack Trace :"}),s.jsx("pre",{className:"bg-gray-100 p-4 rounded text-sm text-gray-800 overflow-auto max-h-64",children:(n=this.state.errorInfo)==null?void 0:n.componentStack})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Recharger la page"}),s.jsx("button",{onClick:()=>window.history.back(),className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"Retour"})]})]})]})}):this.props.children}}const HR=b.createContext(void 0),lP=[{id:1,name:"Marie Dubois",firstName:"Marie",lastName:"Dubois",email:"marie.dubois@email.com",phone:"06 12 34 56 78",address:"123 Rue de la Paix",city:"Paris",postalCode:"75001",idNumber:"1234567890123",pets:[{id:1,name:"Bella",type:"Chien",breed:"Golden Retriever",gender:"female",birthDate:"2021-03-15",weight:"28 kg",color:"Dor",ownerId:1,owner:"Marie Dubois",status:"healthy",lastVisit:"2024-01-15",nextAppointment:"2024-01-25",microchip:"982000123456789",vaccinations:["Rage","DHPP","Lyme"]},{id:4,name:"Luna",type:"Chat",breed:"Siamois",gender:"female",birthDate:"2022-05-12",weight:"3.8 kg",color:"Crme et marron",ownerId:1,owner:"Marie Dubois",status:"healthy",lastVisit:"2024-01-08",nextAppointment:"2024-02-08",microchip:"982000111222333",vaccinations:["Rage","FVRCP","FeLV"]}],lastVisit:"2024-01-15",totalVisits:12},{id:2,name:"Jean Martin",firstName:"Jean",lastName:"Martin",email:"jean.martin@email.com",phone:"06 98 76 54 32",address:"45 Avenue des Roses",city:"Lyon",postalCode:"69000",idNumber:"9876543210987",pets:[{id:2,name:"Whiskers",type:"Chat",breed:"Persan",gender:"male",birthDate:"2019-08-22",weight:"4.5 kg",color:"Blanc",ownerId:2,owner:"Jean Martin",status:"treatment",lastVisit:"2024-01-10",nextAppointment:"2024-01-22",microchip:"982000987654321",vaccinations:["Rage","FVRCP"]}],lastVisit:"2024-01-10",totalVisits:8},{id:3,name:"Sophie Leroux",firstName:"Sophie",lastName:"Leroux",email:"sophie.leroux@email.com",phone:"06 45 67 89 12",address:"78 Boulevard Maritime",city:"Marseille",postalCode:"13000",idNumber:"4567891234567",pets:[{id:3,name:"Rex",type:"Chien",breed:"Berger Allemand",gender:"male",birthDate:"2017-11-10",weight:"32 kg",color:"Noir et feu",ownerId:3,owner:"Sophie Leroux",status:"healthy",lastVisit:"2024-01-18",nextAppointment:"2024-02-01",microchip:"982000555444333",vaccinations:["Rage","DHPP","Bordetella"]},{id:5,name:"Max",type:"Chien",breed:"Labrador",gender:"male",birthDate:"2020-09-03",weight:"30 kg",color:"Noir",ownerId:3,owner:"Sophie Leroux",status:"healthy",lastVisit:"2024-01-22",nextAppointment:"2024-02-22",microchip:"982000444555666",vaccinations:["Rage","DHPP","Lyme","Bordetella"]}],lastVisit:"2024-01-18",totalVisits:15}],ch=[{id:1,name:"Bella",type:"Chien",breed:"Golden Retriever",birthDate:"2021-03-15",weight:"28 kg",color:"Dor",ownerId:1,owner:"Marie Dubois",status:"healthy",lastVisit:"2024-01-15",nextAppointment:"2024-01-25",microchip:"982000123456789",vaccinations:["Rage","DHPP","Lyme"]},{id:2,name:"Whiskers",type:"Chat",breed:"Persan",birthDate:"2019-08-22",weight:"4.5 kg",color:"Blanc",ownerId:2,owner:"Jean Martin",status:"treatment",lastVisit:"2024-01-10",nextAppointment:"2024-01-22",microchip:"982000987654321",vaccinations:["Rage","FVRCP"]},{id:3,name:"Rex",type:"Chien",breed:"Berger Allemand",birthDate:"2017-11-10",weight:"32 kg",color:"Noir et feu",ownerId:3,owner:"Sophie Leroux",status:"healthy",lastVisit:"2024-01-18",nextAppointment:"2024-02-01",microchip:"982000555444333",vaccinations:["Rage","DHPP","Bordetella"]}],xp=[{id:1,clientId:1,clientName:"Marie Dubois",petId:1,petName:"Bella",date:"2024-01-15",weight:"28.2 kg",temperature:"38.5",symptoms:"Contrle annuel, bonne sant gnrale",diagnosis:"Aucun problme dtect",treatment:"Vaccination annuelle",medications:"Rappel vaccin DHPP",followUp:"Contrle dans 1 an",cost:"85.00",notes:"Animal en excellente sant",photos:[],createdAt:"2024-01-15T10:30:00Z"},{id:2,clientId:2,clientName:"Jean Martin",petId:2,petName:"Whiskers",date:"2024-01-10",weight:"4.3 kg",temperature:"39.2",symptoms:"Perte d'apptit, lthargie",diagnosis:"Infection urinaire",treatment:"Antibiotiques",medications:"Amoxicilline 50mg 2x/jour pendant 7 jours",followUp:"Contrle dans 1 semaine",cost:"120.00",notes:"Surveiller la consommation d'eau",photos:[],createdAt:"2024-01-10T14:15:00Z"}],yp=[{id:1,clientId:1,clientName:"Marie Dubois",petId:1,petName:"Bella",date:"2024-01-25",time:"14:30",type:"vaccination",duration:30,reason:"Vaccination annuelle",notes:"Rappel vaccinal complet",status:"scheduled",reminderSent:!1,createdAt:"2024-01-20T09:00:00Z"},{id:2,clientId:2,clientName:"Jean Martin",petId:2,petName:"Whiskers",date:"2024-01-22",time:"10:00",type:"controle",duration:45,reason:"Contrle post-traitement",notes:"Vrifier l'amlioration de l'apptit",status:"confirmed",reminderSent:!0,createdAt:"2024-01-18T16:30:00Z"},{id:3,clientId:3,clientName:"Sophie Leroux",petId:3,petName:"Rex",date:"2024-01-26",time:"16:00",type:"sterilisation",duration:60,reason:"Strilisation",notes:"Jene 12h avant l'intervention",status:"scheduled",reminderSent:!1,createdAt:"2024-01-19T11:15:00Z"}],wp=[{id:1,consultationId:1,clientId:1,clientName:"Marie Dubois",petId:1,petName:"Bella",date:"2024-01-15",prescribedBy:"Dr. Martin",diagnosis:"Trachobronchite",medications:[{id:1,name:"Doxycycline",dosage:"100mg",frequency:"2x/jour",duration:"7 jours",instructions:"Donner avec de la nourriture",quantity:14,unit:"comprims",refills:0,cost:25.5},{id:2,name:"Sirop antitussif",dosage:"5ml",frequency:"3x/jour",duration:"5 jours",instructions:"Donner 30 minutes avant les repas",quantity:75,unit:"ml",refills:1,cost:15}],instructions:"Surveiller la temprature et l'apptit. Retour en cas d'aggravation.",duration:"7 jours",followUpDate:"2024-01-22",status:"active",notes:"Patient calme, bon apptit maintenu",createdAt:"2024-01-15T10:30:00Z"},{id:2,consultationId:2,clientId:2,clientName:"Jean Martin",petId:2,petName:"Whiskers",date:"2024-01-10",prescribedBy:"Dr. Martin",diagnosis:"Infection urinaire",medications:[{id:3,name:"Amoxicilline",dosage:"50mg",frequency:"2x/jour",duration:"7 jours",instructions:"Donner avec de la nourriture",quantity:14,unit:"comprims",refills:0,cost:18}],instructions:"Augmenter la consommation d'eau. Surveiller les urines.",duration:"7 jours",followUpDate:"2024-01-17",status:"completed",notes:"Amlioration progressive",createdAt:"2024-01-10T14:15:00Z"}],bp=[{id:1,name:"Ferme des Prairies",owner:"Pierre Durand",address:"123 Route de la Campagne, 45000 Orlans",coordinates:{latitude:47.9056,longitude:1.919},phone:"02 38 45 67 89",email:"p.durand@fermedespra.fr",types:["Bovin laitier"],totalAnimals:85,animalDetails:[{category:"Bovins laitiers",maleCount:3,femaleCount:82,breeds:["Holstein","Prim'Holstein"],ageGroups:["Veaux (0-6 mois)","Gnisses (6-24 mois)","Vaches adultes"]}],lastVisit:"2024-01-15",status:"active",veterinarian:"Dr. Dupont",notes:"Exploitation bien gre, animaux en bonne sant",registrationNumber:"FR45123456789",surfaceArea:45.5,buildingDetails:"table moderne 850m, stabulation libre, salle de traite 2x8",equipmentDetails:"Tracteur John Deere, Tank  lait 2000L, Systme de ventilation automatique",certifications:["Agriculture Biologique","Haute Valeur Environnementale"],insuranceDetails:"Groupama - Police n123456789",emergencyContact:{name:"Marie Durand",phone:"06 12 34 56 78",relation:"pouse"},photos:[{id:"photo_1",url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgdmlld0JveD0iMCAwIDQwMCA0MDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iNDAwIiBmaWxsPSIjRjNGNEY2Ii8+Cjx0ZXh0IHg9IjIwMCIgeT0iMjAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IiM2QjcyODAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5QaG90byBDaGVwdGVsPC90ZXh0Pgo8L3N2Zz4K",description:"Vaches Holstein dans le pr",category:"cheptel",uploadedAt:"2024-01-15T10:00:00Z"},{id:"photo_2",url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgdmlld0JveD0iMCAwIDQwMCA0MDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iNDAwIiBmaWxsPSIjRjNGNEY2Ii8+Cjx0ZXh0IHg9IjIwMCIgeT0iMjAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IiM2QjcyODAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5QaG90byBCw6J0aW1lbnRzPC90ZXh0Pgo8L3N2Zz4K",description:"table moderne avec salle de traite",category:"batiments",uploadedAt:"2024-01-15T10:00:00Z"}],createdAt:"2024-01-01T09:00:00Z"},{id:2,name:"levage Martin",owner:"Jean-Luc Martin",address:"456 Chemin des Champs, 41000 Blois",coordinates:{latitude:47.5886,longitude:1.334},phone:"02 54 78 90 12",email:"jl.martin@elevagemartin.fr",types:["Porcin"],totalAnimals:150,animalDetails:[{category:"Porcs",maleCount:75,femaleCount:75,breeds:["Large White","Landrace"],ageGroups:["Porcelets (0-2 mois)","Porcs en croissance (2-6 mois)"]}],lastVisit:"2024-01-10",status:"active",veterinarian:"Dr. Martin",notes:"Nouveau systme de ventilation install",registrationNumber:"FR41987654321",surfaceArea:28.3,buildingDetails:"Porcherie 600m, nurserie 200m, systme de ventilation automatique",equipmentDetails:"Systme d'alimentation automatique, Pompe  lisier, Gnrateur de secours",certifications:["Label Rouge"],insuranceDetails:"Crdit Agricole Assurances - Police n987654321",emergencyContact:{name:"Sophie Martin",phone:"06 98 76 54 32",relation:"Sur"},createdAt:"2024-01-02T10:30:00Z"},{id:3,name:"Ferme Avicole Leroux",owner:"Marie Leroux",address:"789 Avenue des Volailles, 37000 Tours",coordinates:{latitude:47.3936,longitude:.6848},phone:"02 47 12 34 56",email:"m.leroux@avicole-leroux.fr",types:["Avicole"],totalAnimals:2500,animalDetails:[{category:"Poules pondeuses",maleCount:50,femaleCount:2e3,breeds:["ISA Brown","Lohmann Brown"],ageGroups:["Poussins (0-18 semaines)","Pondeuses (18+ semaines)"]},{category:"Poulets de chair",maleCount:225,femaleCount:225,breeds:["Cobb 500","Ross 308"],ageGroups:["0-6 semaines"]}],lastVisit:"2024-01-18",status:"attention",veterinarian:"Dr. Dupont",notes:"Problme de ventilation dtect, surveillance renforce",registrationNumber:"FR37555666777",surfaceArea:12.8,buildingDetails:"Poulailler automatis 1200m, aire de parcours 5000m",equipmentDetails:"Systme de ramassage automatique des ufs, Ventilation programmable, clairage LED",certifications:["ufs de France","Bien-tre animal"],insuranceDetails:"MMA - Police n555666777",emergencyContact:{name:"Paul Leroux",phone:"06 47 12 34 56",relation:"Fils"},createdAt:"2024-01-03T14:15:00Z"},{id:4,name:"Ferme quine du Val",owner:"Sophie Moreau",address:"12 Chemin des curies, 78000 Versailles",coordinates:{latitude:48.8044,longitude:2.1232},phone:"01 39 50 12 34",email:"s.moreau@fermeequine.fr",types:["quin"],totalAnimals:25,animalDetails:[{category:"Chevaux",maleCount:8,femaleCount:17,breeds:["Pur-sang","Selle franais","Arabe"],ageGroups:["Poulains (0-3 ans)","Jeunes chevaux (3-7 ans)","Chevaux adultes (7+ ans)"]}],lastVisit:"2024-01-20",status:"active",veterinarian:"Dr. Martin",notes:"curie de prestige, chevaux de comptition",registrationNumber:"FR78123456789",surfaceArea:15.2,buildingDetails:"curies 800m, mange couvert 1200m, carrire extrieure 2000m",equipmentDetails:"Tracteur, Systme d'arrosage automatique, clairage LED, Systme de scurit",certifications:["Bien-tre animal","quitation de tradition franaise"],insuranceDetails:"Allianz - Police n781234567",emergencyContact:{name:"Marc Moreau",phone:"06 12 34 56 78",relation:"poux"},createdAt:"2024-01-04T08:30:00Z"},{id:5,name:"Rucher des Fleurs",owner:"Jean Dupuis",address:"45 Route des Champs, 13000 Marseille",coordinates:{latitude:43.2965,longitude:5.3698},phone:"04 91 23 45 67",email:"j.dupuis@rucherdesfleurs.fr",types:["Apiculture"],totalAnimals:120,animalDetails:[{category:"Abeilles",maleCount:0,femaleCount:120,breeds:["Abeille noire","Buckfast"],ageGroups:["Reines (1-3 ans)","Ouvrires (6 semaines)","Faux-bourdons (3 mois)"]}],lastVisit:"2024-01-12",status:"active",veterinarian:"Dr. Dupont",notes:"Production de miel de qualit, apiculture biologique",registrationNumber:"FR13123456789",surfaceArea:8.5,buildingDetails:"Miellerie 200m, entrept 150m, zone de conditionnement 100m",equipmentDetails:"Extracteur de miel, Centrifugeuse, Filtres, Matriel de conditionnement",certifications:["Agriculture Biologique","Miel de France"],insuranceDetails:"MAIF - Police n131234567",emergencyContact:{name:"Marie Dupuis",phone:"06 91 23 45 67",relation:"pouse"},createdAt:"2024-01-05T11:15:00Z"}],jp=[{id:1,date:"2024-01-20",farmId:1,farmName:"Ferme des Prairies",type:"vaccination",animals:"15 bovins",veterinarian:"Dr. Dupont",description:"Vaccination contre la fivre aphteuse",status:"completed",followUp:"Contrle dans 6 mois",cost:450,notes:"Intervention russie, aucun effet secondaire",createdAt:"2024-01-20T08:00:00Z"},{id:2,date:"2024-01-18",farmId:3,farmName:"Ferme Avicole Leroux",type:"urgence",animals:"50 poules",veterinarian:"Dr. Dupont",description:"Traitement infection respiratoire",status:"ongoing",followUp:"Suivi hebdomadaire",cost:320,notes:"Traitement antibiotique en cours",createdAt:"2024-01-18T14:30:00Z"},{id:3,date:"2024-01-15",farmId:2,farmName:"levage Martin",type:"controle",animals:"Tous les porcins",veterinarian:"Dr. Martin",description:"Contrle sanitaire trimestriel",status:"completed",followUp:"Prochain contrle en avril",cost:280,notes:"Tous les paramtres dans les normes",createdAt:"2024-01-15T10:00:00Z"}],Np=[{id:1,petId:1,petName:"Bella",clientId:1,clientName:"Marie Dubois",vaccineName:"DHPP",vaccineType:"core",vaccinationCategory:"new",dateGiven:"2024-01-15",nextDueDate:"2025-01-15",batchNumber:"VAC2024-001",veterinarian:"Dr. Martin",notes:"Premire vaccination annuelle",status:"completed",cost:"45.00",location:"left_shoulder",manufacturer:"Zoetis",expirationDate:"2025-12-31",createdAt:"2024-01-15T10:30:00Z",isInStock:!1,stockQuantity:0,stockDeducted:!1},{id:2,petId:1,petName:"Bella",clientId:1,clientName:"Marie Dubois",vaccineName:"Rage",vaccineType:"rabies",vaccinationCategory:"new",dateGiven:"2024-01-15",nextDueDate:"2027-01-15",batchNumber:"RAB2024-005",veterinarian:"Dr. Martin",notes:"Vaccination antirabique obligatoire",status:"completed",cost:"35.00",location:"right_shoulder",manufacturer:"Merial",expirationDate:"2026-08-15",createdAt:"2024-01-15T10:45:00Z",isInStock:!1,stockQuantity:0,stockDeducted:!1},{id:3,petId:2,petName:"Whiskers",clientId:2,clientName:"Jean Martin",vaccineName:"FVRCP",vaccineType:"core",vaccinationCategory:"new",dateGiven:"2023-08-22",nextDueDate:"2024-08-22",batchNumber:"CAT2023-012",veterinarian:"Dr. Dupont",notes:"Vaccination de base pour chat",status:"overdue",cost:"40.00",location:"subcutaneous",manufacturer:"Virbac",expirationDate:"2025-06-30",createdAt:"2023-08-22T14:20:00Z",isInStock:!1,stockQuantity:0,stockDeducted:!1},{id:4,petId:3,petName:"Rex",clientId:3,clientName:"Sophie Leroux",vaccineName:"Bordetella",vaccineType:"non-core",vaccinationCategory:"new",dateGiven:"2024-01-18",nextDueDate:"2025-01-18",batchNumber:"BOR2024-008",veterinarian:"Dr. Martin",notes:"Vaccination contre la toux de chenil",status:"completed",cost:"30.00",location:"left_shoulder",manufacturer:"Zoetis",expirationDate:"2025-09-30",createdAt:"2024-01-18T16:15:00Z",isInStock:!1,stockQuantity:0,stockDeducted:!1},{id:5,petId:1,petName:"Bella",clientId:1,clientName:"Marie Dubois",vaccineName:"Lyme",vaccineType:"non-core",vaccinationCategory:"new",dateGiven:"2024-01-25",nextDueDate:"2024-04-25",batchNumber:"LYM2024-003",veterinarian:"Dr. Martin",notes:"Vaccination contre la maladie de Lyme",status:"scheduled",cost:"50.00",location:"left_hip",manufacturer:"Boehringer Ingelheim",expirationDate:"2025-11-20",createdAt:"2024-01-25T09:00:00Z",isInStock:!1,stockQuantity:0,stockDeducted:!1}],Nc=[{id:1,petId:1,petName:"Bella",clientId:1,clientName:"Marie Dubois",productName:"Frontline Combo Spot-On",productType:"flea_tick",targetParasites:"Puces, Tiques, Poux broyeurs",dateGiven:"2024-01-10",nextDueDate:"2024-02-10",dosage:"1 pipette",administrationRoute:"topical",veterinarian:"Dr. Martin",notes:"Application entre les omoplates",batchNumber:"FRC2024-001",manufacturer:"Boehringer Ingelheim",weight:"28kg",status:"completed",cost:"25.50",sideEffects:"",createdAt:new Date().toISOString(),isInStock:!1,stockQuantity:0,stockDeducted:!1},{id:2,petId:2,petName:"Whiskers",clientId:2,clientName:"Jean Martin",productName:"Milbemax Chat",productType:"worming",targetParasites:"Vers ronds, Vers plats, Vers du cur",dateGiven:"2024-01-05",nextDueDate:"2024-04-05",dosage:"1/2 comprim",administrationRoute:"oral",veterinarian:"Dr. Dupont",notes:"Donn avec la nourriture",batchNumber:"MLX2024-008",manufacturer:"Novartis",weight:"4.5kg",status:"completed",cost:"18.00",sideEffects:"",createdAt:new Date().toISOString(),isInStock:!1,stockQuantity:0,stockDeducted:!1}],uh=[{id:1,name:"Frontline Combo Spot-On",species:"Chien",productType:"flea_tick",targetParasites:"Puces, Tiques, Poux broyeurs",description:"Protection complte contre puces et tiques pendant 8 semaines",manufacturer:"Boehringer Ingelheim",intervals:[{offsetDays:0,label:"Application initiale"},{offsetDays:28,label:"Rappel mensuel"}],weightRange:"2-60kg",ageRequirement:"Ds 8 semaines",seasonalTreatment:!0,notes:"viter le bain 48h avant et aprs application",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:2,name:"NexGard Spectra",species:"Chien",productType:"combined",targetParasites:"Puces, Tiques, Vers du cur, Vers ronds, Vers plats",description:"Protection combine externe et interne mensuelle",manufacturer:"Boehringer Ingelheim",intervals:[{offsetDays:0,label:"Premire dose"},{offsetDays:30,label:"Dose mensuelle"}],weightRange:"2-60kg",ageRequirement:"Ds 8 semaines",seasonalTreatment:!1,notes:"Donner avec la nourriture pour une meilleure absorption",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:3,name:"Drontal Plus",species:"Chien",productType:"worming",targetParasites:"Vers ronds, Vers plats, Ankylostomes, Trichures",description:"Vermifugation large spectre",manufacturer:"Bayer",intervals:[{offsetDays:0,label:"Premire vermifugation"},{offsetDays:90,label:"Rappel trimestriel"},{offsetDays:180,label:"Rappel semestriel"}],weightRange:"2-35kg",ageRequirement:"Ds 2 semaines",seasonalTreatment:!1,notes:"Administrer le matin  jeun, rpter selon exposition aux parasites",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:4,name:"Advocate Spot-On",species:"Chien",productType:"combined",targetParasites:"Puces, Vers du cur, Vers ronds, Ankylostomes, Gale sarcoptique",description:"Protection topique combine mensuelle",manufacturer:"Bayer",intervals:[{offsetDays:0,label:"Application initiale"},{offsetDays:30,label:"Application mensuelle"}],weightRange:"1-40kg",ageRequirement:"Ds 7 semaines",seasonalTreatment:!1,notes:"Appliquer sur peau sche entre les omoplates",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:5,name:"Frontline Combo Chat",species:"Chat",productType:"flea_tick",targetParasites:"Puces, Tiques",description:"Protection mensuelle contre puces et tiques chez le chat",manufacturer:"Boehringer Ingelheim",intervals:[{offsetDays:0,label:"Application initiale"},{offsetDays:28,label:"Rappel mensuel"}],weightRange:"1-8kg",ageRequirement:"Ds 8 semaines",seasonalTreatment:!0,notes:"Attention aux ractions cutanes, surveiller 24h aprs application",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:6,name:"Stronghold Plus",species:"Chat",productType:"combined",targetParasites:"Puces, Vers du cur, Vers ronds, Ankylostomes, Gale des oreilles",description:"Protection combine mensuelle pour chats",manufacturer:"Zoetis",intervals:[{offsetDays:0,label:"Application initiale"},{offsetDays:30,label:"Application mensuelle"}],weightRange:"0.5-8kg",ageRequirement:"Ds 6 semaines",seasonalTreatment:!1,notes:"Efficace contre gale des oreilles en 1 application",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:7,name:"Milbemax Chat",species:"Chat",productType:"worming",targetParasites:"Vers ronds, Vers plats, Vers du cur",description:"Vermifugation complte pour chats",manufacturer:"Novartis",intervals:[{offsetDays:0,label:"Premire vermifugation"},{offsetDays:90,label:"Rappel trimestriel"}],weightRange:"0.5-8kg",ageRequirement:"Ds 6 semaines",seasonalTreatment:!1,notes:"Comprims apptents, peut tre donn avec ou sans nourriture",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:8,name:"Eprinex Pour-On",species:"Bovins",productType:"external",targetParasites:"Mouches, Poux, Gales, Vers gastro-intestinaux",description:"Traitement pour-on systmique pour bovins",manufacturer:"Boehringer Ingelheim",intervals:[{offsetDays:0,label:"Application unique"},{offsetDays:84,label:"Rappel saisonnier"}],weightRange:"50-800kg",ageRequirement:"Tous ges",seasonalTreatment:!0,notes:"Temps d'attente viande: 15 jours, lait: 0 jour",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:9,name:"Panacur 100",species:"Bovins",productType:"worming",targetParasites:"Vers gastro-intestinaux, Vers pulmonaires",description:"Vermifuge oral pour bovins",manufacturer:"MSD",intervals:[{offsetDays:0,label:"Traitement initial"},{offsetDays:120,label:"Rappel saisonnier"}],weightRange:"50-800kg",ageRequirement:"Ds 2 semaines",seasonalTreatment:!1,notes:"Temps d'attente viande: 14 jours, lait: 3 jours",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:10,name:"Cydectin 0.1%",species:"Ovins",productType:"combined",targetParasites:"Vers gastro-intestinaux, Vers pulmonaires, Gales",description:"Traitement injectable pour ovins et caprins",manufacturer:"Boehringer Ingelheim",intervals:[{offsetDays:0,label:"Injection unique"},{offsetDays:90,label:"Rappel saisonnier"}],weightRange:"10-100kg",ageRequirement:"Ds 4 semaines",seasonalTreatment:!0,notes:"Temps d'attente viande: 35 jours",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}],cP=[{id:1,name:"Amoxicilline 500mg",category:"medication",subcategory:"Antibiotique",description:"Antibiotique  large spectre",manufacturer:"Boehringer Ingelheim",batchNumber:"AMX2024001",dosage:"500mg",unit:"box",currentStock:15,minimumStock:5,maximumStock:50,purchasePrice:20,sellingPrice:25.5,totalValue:300,expirationDate:"2025-12-31",supplier:"Pharmacie Vtrinaire Centrale",location:"Armoire A - tagre 1",notes:"Stockage  temprature ambiante",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-15",isActive:!0,barcode:"1234567890123",sku:"MED-AMX-500"},{id:2,name:"Frontline Combo Spot-On",category:"medication",subcategory:"Antiparasitaire",description:"Traitement contre puces et tiques",manufacturer:"Boehringer Ingelheim",batchNumber:"FRC2024001",dosage:"1 pipette",unit:"pack",currentStock:8,minimumStock:10,maximumStock:100,purchasePrice:15,sellingPrice:18.75,totalValue:120,expirationDate:"2026-06-30",supplier:"VetoSupply Maroc",location:"Armoire B - tagre 2",notes:"Pour chiens 20-40kg",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-10",isActive:!0,barcode:"2345678901234",sku:"ANT-FRONT-20-40"},{id:3,name:"DHPP Canine",category:"vaccine",subcategory:"Vaccin Core",description:"Vaccin contre Distemper, Hpatite, Parvovirus, Parainfluenza",manufacturer:"Merial",batchNumber:"DHPP2024001",dosage:"1 dose",unit:"vial",currentStock:25,minimumStock:10,maximumStock:100,purchasePrice:9.5,sellingPrice:12,totalValue:237.5,expirationDate:"2025-08-15",supplier:"Vaccins Vtrinaires SA",location:"Rfrigrateur - tagre 1",notes:"Conservation 2-8C",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-20",isActive:!0,barcode:"3456789012345",sku:"VAC-DHPP-001"},{id:4,name:"Rage Canine",category:"vaccine",subcategory:"Vaccin Obligatoire",description:"Vaccin antirabique obligatoire",manufacturer:"Merial",batchNumber:"RAB2024001",dosage:"1 dose",unit:"vial",currentStock:12,minimumStock:5,maximumStock:50,purchasePrice:12,sellingPrice:15,totalValue:144,expirationDate:"2025-10-20",supplier:"Vaccins Vtrinaires SA",location:"Rfrigrateur - tagre 2",notes:"Conservation 2-8C - Obligatoire",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-18",isActive:!0,barcode:"4567890123456",sku:"VAC-RAB-001"},{id:5,name:"Seringues 5ml",category:"consumable",subcategory:"Matriel d'injection",description:"Seringues striles 5ml avec aiguilles",manufacturer:"BD Medical",batchNumber:"SYR2024001",dosage:"5ml",unit:"box",currentStock:50,minimumStock:20,maximumStock:200,purchasePrice:.35,sellingPrice:.45,totalValue:17.5,expirationDate:"2027-03-15",supplier:"Matriel Mdical Pro",location:"Armoire C - tagre 1",notes:"Striles, usage unique",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-12",isActive:!0,barcode:"5678901234567",sku:"CON-SYR-5ML"},{id:6,name:"Masques chirurgicaux",category:"consumable",subcategory:"Protection",description:"Masques chirurgicaux jetables",manufacturer:"3M",batchNumber:"MSK2024001",dosage:"1 unit",unit:"box",currentStock:200,minimumStock:50,maximumStock:500,purchasePrice:.12,sellingPrice:.15,totalValue:24,expirationDate:"2026-12-31",supplier:"Protection Mdicale",location:"Armoire D - tagre 1",notes:"Type IIR, bote de 50",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-08",isActive:!0,barcode:"6789012345678",sku:"CON-MSK-50"},{id:7,name:"Gants nitrile",category:"consumable",subcategory:"Protection",description:"Gants nitrile non poudrs",manufacturer:"Ansell",batchNumber:"GNT2024001",dosage:"1 paire",unit:"box",currentStock:30,minimumStock:10,maximumStock:100,purchasePrice:.2,sellingPrice:.25,totalValue:6,expirationDate:"2026-08-20",supplier:"Protection Mdicale",location:"Armoire D - tagre 2",notes:"Taille M, bote de 100",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-05",isActive:!0,barcode:"7890123456789",sku:"CON-GNT-M-100"},{id:8,name:"Thermomtre digital",category:"equipment",subcategory:"Diagnostic",description:"Thermomtre digital vtrinaire",manufacturer:"Gima",batchNumber:"THM2024001",dosage:"1 unit",unit:"unit",currentStock:3,minimumStock:2,maximumStock:10,purchasePrice:35,sellingPrice:45,totalValue:105,expirationDate:void 0,supplier:"quipement Vtrinaire",location:"Bureau - Tiroir 1",notes:"Rsistant  l'eau, cran LCD",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-03",isActive:!0,barcode:"8901234567890",sku:"EQP-THM-DIG"},{id:9,name:"Vitamines B Complex",category:"supplement",subcategory:"Vitamines",description:"Complexe vitaminique B pour animaux",manufacturer:"Virbac",batchNumber:"VIT2024001",dosage:"1ml",unit:"bottle",currentStock:5,minimumStock:3,maximumStock:20,purchasePrice:6.5,sellingPrice:8.5,totalValue:32.5,expirationDate:"2025-11-30",supplier:"Supplments Vtrinaires",location:"Armoire A - tagre 3",notes:"Flacon 50ml",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-14",isActive:!0,barcode:"9012345678901",sku:"SUP-VIT-B-50"}],Sp=[{id:1,name:"DAPP (DHPP)",species:"Chien",vaccineType:"core",description:"Distemper, Adnovirus, Parvovirus, Parainfluenza - Vaccination essentielle",manufacturer:"Zoetis",intervals:[{offsetDays:0,label:"J0 (premire injection)"},{offsetDays:21,label:"21 jours (2e injection)"},{offsetDays:42,label:"42 jours (3e injection)"},{offsetDays:365,label:"1 an (rappel)"}],ageRequirement:"6-8 semaines (renforcer jusqu' 16 semaines)",notes:"Protocole d'initiation  6-8-12-16 semaines puis rappel  1 an, puis triennal",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"},{id:2,name:"Rage (Rabies)",species:"Chien",vaccineType:"rabies",description:"Vaccination antirabique obligatoire selon la lgislation locale",manufacturer:"Merial",intervals:[{offsetDays:0,label:" l'ge de 12 semaines minimum"},{offsetDays:365,label:"1 an (rappel)"}],ageRequirement:"12 semaines minimum",notes:"Rappel annuel ou biennal selon rglementation",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"},{id:3,name:"Bordetella bronchiseptica",species:"Chien",vaccineType:"non-core",description:"Protection contre la toux de chenil",manufacturer:"Zoetis",intervals:[{offsetDays:8,label:"8 semaines"}],ageRequirement:"8 semaines",notes:"Vaccination intracellulaire recommande pour chiens en collectivit",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"},{id:4,name:"Leptospirose",species:"Chien",vaccineType:"non-core",description:"Protection contre les srovars pathognes de Leptospira",manufacturer:"Virbac",intervals:[{offsetDays:12,label:"12 semaines"}],ageRequirement:"12 semaines",notes:"Double srovariels recommand",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"},{id:5,name:"RCP (FVRCP)",species:"Chat",vaccineType:"core",description:"Calicivirose, Panleucopnie, Rhinotrachite virale fline",manufacturer:"Virbac",intervals:[{offsetDays:0,label:"6 semaines"},{offsetDays:21,label:"12 semaines"},{offsetDays:28,label:"1 an"}],ageRequirement:"6-8-12 semaines",notes:"Renforcement  1 an puis rappel triennal ou annuel selon protocole",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"},{id:6,name:"Rage (Rabies)",species:"Chat",vaccineType:"rabies",description:"Vaccination antirabique selon rglementation voyage",manufacturer:"Merial",intervals:[{offsetDays:365,label:"1 an"},{offsetDays:730,label:"2 ans"}],ageRequirement:"12 semaines",notes:"Rappel annuel ou biennal selon rglementation",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"},{id:7,name:"Distemper furet (Maladie de Carr)",species:"Furet",vaccineType:"core",description:"Protection contre le morbillivirus (Carr)",manufacturer:"Merial",intervals:[{offsetDays:6,label:"6 semaines"},{offsetDays:12,label:"8 semaines"}],ageRequirement:"6-8 semaines",notes:"Protocole similaire  celui des chiens",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"},{id:8,name:"Myxomatose",species:"Lapin",vaccineType:"core",description:"Protection contre la myxomatose",manufacturer:"Virbac",intervals:[{offsetDays:180,label:"180 jours"}],ageRequirement:"5-6 semaines",notes:"Vaccination semestrielle",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"},{id:9,name:"VHD (Maladie hmorragique virale)",species:"Lapin",vaccineType:"core",description:"Protection contre VHD de type 1 et 2",manufacturer:"Virbac",intervals:[{offsetDays:6,label:"6 semaines"}],ageRequirement:"6 semaines",notes:"Rappel annuel",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"}];function YS({children:e}){const t=()=>{try{const F=localStorage.getItem("vetpro-clients"),Z=localStorage.getItem("vetpro-pets"),ne=localStorage.getItem("vetpro-consultations"),ke=localStorage.getItem("vetpro-appointments"),$e=localStorage.getItem("vetpro-prescriptions"),je=localStorage.getItem("vetpro-farms"),ze=localStorage.getItem("vetpro-farmInterventions"),tn=localStorage.getItem("vetpro-vaccinations"),Rt=localStorage.getItem("vetpro-vaccinationProtocols"),Ue=localStorage.getItem("vetpro-antiparasitics"),cn=localStorage.getItem("vetpro-antiparasiticProtocols"),Pr=localStorage.getItem("vetpro-stockItems"),ki=localStorage.getItem("vetpro-stockAlerts"),Ti=localStorage.getItem("vetpro-stockMovements"),Bm=localStorage.getItem("vetpro-accountingEntries");if(F&&Z){const Mz=JSON.parse(F),S2=JSON.parse(Z),Iz=ne?JSON.parse(ne):xp,$z=ke?JSON.parse(ke):yp,Rz=$e?JSON.parse($e):wp,Lz=je?JSON.parse(je):bp,Fz=ze?JSON.parse(ze):jp,zz=tn?JSON.parse(tn):Np,Bz=Rt?JSON.parse(Rt):Sp,qz=Ue?JSON.parse(Ue):Nc,Vz=cn?JSON.parse(cn):uh,Uz=Pr?JSON.parse(Pr):cP,Wz=ki?JSON.parse(ki):[],Hz=Ti?JSON.parse(Ti):[],Kz=Bm?JSON.parse(Bm):[];return{clients:Mz.map(_2=>({..._2,pets:S2.filter(Gz=>Gz.ownerId===_2.id)})),pets:S2,consultations:Iz,appointments:$z,prescriptions:Rz,farms:Lz,farmInterventions:Fz,vaccinations:zz,vaccinationProtocols:Bz,antiparasitics:qz,antiparasiticProtocols:Vz,stockItems:Uz,stockAlerts:Wz,stockMovements:Hz,accountingEntries:Kz}}}catch(F){console.error("Erreur lors du chargement des donnes:",F)}return{clients:lP.map(F=>({...F,pets:ch.filter(Z=>Z.ownerId===F.id)})),pets:ch,consultations:xp,appointments:yp,prescriptions:wp,farms:bp,farmInterventions:jp,vaccinations:Np,vaccinationProtocols:Sp,antiparasitics:Nc,antiparasiticProtocols:uh,stockItems:cP,stockAlerts:[],stockMovements:[],accountingEntries:[]}},n=(q,F,Z,ne=d,ke=m,$e=x,je=p,ze=y,tn=S,Rt=N,Ue=_,cn=P,Pr=E,ki=R,Ti=U)=>{try{localStorage.setItem("vetpro-clients",JSON.stringify(q)),localStorage.setItem("vetpro-pets",JSON.stringify(F)),localStorage.setItem("vetpro-consultations",JSON.stringify(Z)),localStorage.setItem("vetpro-appointments",JSON.stringify(ne)),localStorage.setItem("vetpro-prescriptions",JSON.stringify(ke)),localStorage.setItem("vetpro-farms",JSON.stringify($e)),localStorage.setItem("vetpro-farmInterventions",JSON.stringify(je)),localStorage.setItem("vetpro-vaccinations",JSON.stringify(ze)),localStorage.setItem("vetpro-vaccinationProtocols",JSON.stringify(tn)),localStorage.setItem("vetpro-antiparasitics",JSON.stringify(Rt)),localStorage.setItem("vetpro-antiparasiticProtocols",JSON.stringify(Ue)),localStorage.setItem("vetpro-stockItems",JSON.stringify(cn)),localStorage.setItem("vetpro-stockAlerts",JSON.stringify(Pr)),localStorage.setItem("vetpro-stockMovements",JSON.stringify(ki)),localStorage.setItem("vetpro-accountingEntries",JSON.stringify(Ti))}catch(Bm){console.error("Erreur lors de la sauvegarde des donnes:",Bm)}},r=t(),[a,i]=b.useState(r.clients),[o,l]=b.useState(r.pets),[c,u]=b.useState(r.consultations),[d,h]=b.useState(r.appointments),[m,f]=b.useState(r.prescriptions),[x,g]=b.useState(r.farms),[p,v]=b.useState(r.farmInterventions),[y,w]=b.useState(r.vaccinations),[S,j]=b.useState(r.vaccinationProtocols),[N,C]=b.useState(r.antiparasitics),[_,A]=b.useState(r.antiparasiticProtocols),[P,T]=b.useState(r.stockItems||[]),[E,I]=b.useState(r.stockAlerts||[]),[R,z]=b.useState(r.stockMovements||[]),[U,K]=b.useState(r.accountingEntries||[]);b.useEffect(()=>{localStorage.getItem("vetpro-antiparasiticProtocols")||localStorage.setItem("vetpro-antiparasiticProtocols",JSON.stringify(uh)),localStorage.getItem("vetpro-antiparasitics")||(localStorage.setItem("vetpro-antiparasitics",JSON.stringify(Nc)),C(Nc))},[]),b.useEffect(()=>{const q=new Date;new Date(q.getFullYear(),q.getMonth(),1),new Date(q.getFullYear(),q.getMonth()+1,0)},[]),b.useEffect(()=>{const q=new Date,F=new Date(q.getFullYear(),q.getMonth(),1),Z=new Date(q.getFullYear(),q.getMonth()+1,0);a0(F.toISOString().split("T")[0],Z.toISOString().split("T")[0]),i0(F.toISOString().split("T")[0],Z.toISOString().split("T")[0])},[c,y,N,m,R]),b.useEffect(()=>{},[N]),b.useEffect(()=>{a.length>0&&c.length>=0&&y.length>=0&&N.length>=0&&d.length>=0&&a.forEach(q=>{Y(q.id)})},[a.length,c.length,y.length,N.length,d.length]);const k=q=>{const F={...q,name:`${q.firstName} ${q.lastName}`,id:Math.max(...a.map(ne=>ne.id),0)+1,pets:[],lastVisit:new Date().toISOString().split("T")[0],totalVisits:0},Z=[...a,F];i(Z),n(Z,o,c,d,m,x,p,y)},D=q=>{const F={...q,id:Math.max(...o.map(ke=>ke.id),0)+1,status:q.status||"healthy",lastVisit:new Date().toISOString().split("T")[0]},Z=[...o,F];l(Z);const ne=a.map(ke=>ke.id===q.ownerId?{...ke,pets:[...ke.pets,{id:F.id,name:F.name,type:F.type,breed:F.breed,birthDate:F.birthDate,weight:F.weight,color:F.color,microchip:F.microchip,medicalNotes:F.medicalNotes,photo:F.photo,ownerId:F.ownerId,owner:F.owner,status:F.status,lastVisit:F.lastVisit,nextAppointment:F.nextAppointment,vaccinations:F.vaccinations}]}:ke);i(ne),n(ne,Z,c,d,m,x,p,y)},J=(q,F)=>{const Z=a.map(ne=>ne.id===q?{...ne,...F,name:F.firstName&&F.lastName?`${F.firstName} ${F.lastName}`:ne.name}:ne);i(Z),n(Z,o,c,d,m,x,p,y)},W=(q,F)=>{({...o.find(ke=>ke.id===q),...F});const Z=o.map(ke=>ke.id===q?{...ke,...F}:ke);l(Z);const ne=a.map(ke=>({...ke,pets:ke.pets.map($e=>$e.id===q?{...$e,...F}:$e)}));i(ne),n(ne,Z,c)},Y=q=>{const F=a.find(Ue=>Ue.id===q);if(!F)return;const Z=c.filter(Ue=>Ue.clientId===q),ne=y.filter(Ue=>Ue.clientId===q),ke=N.filter(Ue=>Ue.clientId===q),$e=d.filter(Ue=>Ue.clientId===q&&Ue.status==="completed"),je=Z.length+ne.length+ke.length+$e.length,ze=[...Z.map(Ue=>({date:Ue.date,type:"consultation"})),...ne.map(Ue=>({date:Ue.dateGiven,type:"vaccination"})),...ke.map(Ue=>({date:Ue.dateGiven,type:"antiparasitic"})),...$e.map(Ue=>({date:Ue.date,type:"appointment"}))],tn=ze.length>0?ze.reduce((Ue,cn)=>new Date(cn.date)>new Date(Ue.date)?cn:Ue).date:F.lastVisit,Rt=a.map(Ue=>Ue.id===q?{...Ue,totalVisits:je,lastVisit:tn}:Ue);return i(Rt),{totalVisits:je,lastVisit:tn}},V=q=>{const F={...q,id:Math.max(...P.map(ne=>ne.id),0)+1,lastUpdated:new Date().toISOString(),totalValue:q.currentStock*q.purchasePrice},Z=[...P,F];return T(Z),n(a,o,c,d,m,x,p,y,S,N,_,Z,E,R),F},O=(q,F)=>{const Z=P.map(ne=>{if(ne.id===q){const ke={...ne,...F};return(F.currentStock!==void 0||F.purchasePrice!==void 0)&&(ke.totalValue=ke.currentStock*ke.purchasePrice),ke.lastUpdated=new Date().toISOString(),ke}return ne});return T(Z),n(a,o,c,d,m,x,p,y,S,N,_,Z,E,R),Z.find(ne=>ne.id===q)},le=q=>{const F=P.filter(Z=>Z.id!==q);T(F),n(a,o,c,d,m,x,p,y,S,N,_,F,E,R)},te=q=>{const F={...q,id:Math.max(...R.map(ne=>ne.id),0)+1},Z=[...R,F];return z(Z),n(a,o,c,d,m,x,p,y,S,N,_,P,E,Z),F},ce=()=>{const q=[],F=new Date().toISOString().split("T")[0],Z=new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0];return P.forEach(ne=>{ne.currentStock<=ne.minimumStock&&q.push({id:q.length+1,itemId:ne.id,itemName:ne.name,type:"low_stock",message:`Stock bas: ${ne.currentStock} ${ne.unit} restant(s)`,severity:ne.currentStock===0?"critical":"high",createdAt:new Date().toISOString(),isRead:!1}),ne.expirationDate&&(ne.expirationDate<F?q.push({id:q.length+1,itemId:ne.id,itemName:ne.name,type:"expired",message:`Expir le ${ne.expirationDate}`,severity:"critical",createdAt:new Date().toISOString(),isRead:!1}):ne.expirationDate<=Z&&q.push({id:q.length+1,itemId:ne.id,itemName:ne.name,type:"expiring_soon",message:`Expire le ${ne.expirationDate}`,severity:"medium",createdAt:new Date().toISOString(),isRead:!1}))}),q},ge=q=>{const F={...q,id:Math.max(...c.map($e=>$e.id),0)+1,createdAt:new Date().toISOString(),photos:q.photos||[]},Z=[...c,F];u(Z);const ne=o.map($e=>$e.id===q.petId?{...$e,lastVisit:q.date}:$e);l(ne);const ke=a.map($e=>({...$e,pets:$e.pets.map(je=>je.id===q.petId?{...je,lastVisit:q.date}:je)}));i(ke),Y(q.clientId),n(ke,ne,Z)},H=q=>{if(!o.find(ke=>ke.id===q))return;const Z=o.filter(ke=>ke.id!==q);l(Z);const ne=a.map(ke=>({...ke,pets:ke.pets.filter($e=>$e.id!==q)}));i(ne),n(ne,Z,c)},G=()=>{localStorage.removeItem("vetpro-clients"),localStorage.removeItem("vetpro-pets"),localStorage.removeItem("vetpro-consultations"),localStorage.removeItem("vetpro-appointments"),localStorage.removeItem("vetpro-prescriptions"),localStorage.removeItem("vetpro-farms"),localStorage.removeItem("vetpro-farmInterventions"),localStorage.removeItem("vetpro-vaccinations"),localStorage.removeItem("vetpro-vaccinationProtocols"),localStorage.removeItem("vetpro-antiparasitics"),localStorage.removeItem("vetpro-antiparasiticProtocols");const q=lP.map(F=>({...F,pets:ch.filter(Z=>Z.ownerId===F.id)}));i(q),l(ch),u(xp),h(yp),f(wp),g(bp),v(jp),w(Np),j(Sp),C(Nc),A(uh),n(q,ch,xp,yp,wp,bp,jp,Np,Sp,Nc,uh)},ue=()=>{const q={clients:a,pets:o,consultations:c,appointments:d,prescriptions:m,farms:x,farmInterventions:p,vaccinations:y,vaccinationProtocols:S,antiparasitics:N,antiparasiticProtocols:_},F=new Blob([JSON.stringify(q,null,2)],{type:"application/json"}),Z=URL.createObjectURL(F),ne=document.createElement("a");ne.href=Z,ne.download=`vetpro-data-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(ne),ne.click(),document.body.removeChild(ne),URL.revokeObjectURL(Z)},re=q=>{const F=q.clients.map(Z=>({...Z,pets:q.pets.filter(ne=>ne.ownerId===Z.id)}));i(F),l(q.pets),u(q.consultations||[]),h(q.appointments||[]),f(q.prescriptions||[]),g(q.farms||[]),v(q.farmInterventions||[]),w(q.vaccinations||[]),j(q.vaccinationProtocols||[]),C(q.antiparasitics||[]),A(q.antiparasiticProtocols||[]),n(F,q.pets,q.consultations||[],q.appointments||[],q.prescriptions||[],q.farms||[],q.farmInterventions||[],q.vaccinations||[],q.vaccinationProtocols||[],q.antiparasitics||[],q.antiparasiticProtocols||[])},ve=(q,F)=>{const Z=c.map(ne=>ne.id===q?{...ne,...F}:ne);u(Z),n(a,o,Z)},pe=q=>{const F=c.filter(Z=>Z.id!==q);u(F),n(a,o,F)},ee=q=>{const F=P.find(Z=>Z.name.toLowerCase()===q.productName.toLowerCase()&&Z.category==="medication"&&Z.isActive);return F&&F.currentStock>=1?{...q,stockItemId:F.id,isInStock:!0,stockQuantity:F.currentStock,stockDeducted:!0}:F&&F.currentStock>0?{...q,stockItemId:F.id,isInStock:!0,stockQuantity:F.currentStock,stockDeducted:!1}:{...q,isInStock:!1,stockQuantity:0,stockDeducted:!1}},Pe=q=>{const F=ee(q);let Z=[...P];if(F.stockDeducted&&F.stockItemId){const $e=Z.findIndex(je=>je.id===F.stockItemId);if($e!==-1){const je=Z[$e];Z[$e]={...je,currentStock:je.currentStock-1,lastUpdated:new Date().toISOString()},te({itemId:F.stockItemId,itemName:F.productName,type:"out",quantity:1,reason:"Traitement antiparasitaire",reference:`Antiparasitaire #${Math.max(0,...N.map(ze=>ze.id))+1}`,performedBy:F.veterinarian,date:new Date().toISOString(),notes:`Traitement antiparasitaire de ${F.petName} - ${F.productName}`})}}const ne={...F,id:Math.max(0,...N.map($e=>$e.id))+1,createdAt:new Date().toISOString()},ke=[...N,ne];C(ke),T(Z),Y(q.clientId),n(a,o,c,d,m,x,p,y,S,ke,_,Z,E,R),localStorage.getItem("vetpro-antiparasitics")},Ee=(q,F)=>{const Z=N.map(ne=>ne.id===q?{...ne,...F}:ne);C(Z),n(a,o,c,d,m,x,p,y,S,Z,_)},dt=q=>{const F=N.filter(Z=>Z.id!==q);C(F),n(a,o,c,d,m,x,p,y,S,F,_)},Dt=q=>{const F={...q,id:Math.max(0,..._.map(ne=>ne.id))+1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},Z=[..._,F];A(Z),localStorage.setItem("vetpro-antiparasiticProtocols",JSON.stringify(Z))},en=(q,F)=>{const Z=_.map(ne=>ne.id===q?{...ne,...F,updatedAt:new Date().toISOString()}:ne);A(Z),localStorage.setItem("vetpro-antiparasiticProtocols",JSON.stringify(Z))},ae=q=>{const F=_.filter(Z=>Z.id!==q);A(F),localStorage.setItem("vetpro-antiparasiticProtocols",JSON.stringify(F))},B=q=>N.find(F=>F.id===q),he=q=>N.filter(Z=>Z.petId===q),Oe=q=>N.filter(F=>F.clientId===q),St=()=>{const q=new Date().toISOString().split("T")[0];return N.filter(F=>F.nextDueDate&&F.nextDueDate<q&&F.status!=="completed")},Qe=(q=7)=>{const F=new Date,Z=new Date(F.getTime()+q*24*60*60*1e3);return N.filter(ne=>{if(!ne.nextDueDate)return!1;const ke=new Date(ne.nextDueDate);return ke>=F&&ke<=Z})},de=q=>N.filter(F=>F.status===q),Fe=q=>_.find(F=>F.id===q),Fn=q=>_.filter(F=>F.species===q&&F.isActive),Vr=()=>_.filter(q=>q.isActive),Qd=q=>a.find(F=>F.id===q),uc=q=>o.find(F=>F.id===q),Uo=q=>c.find(F=>F.id===q),Ar=q=>o.filter(F=>F.ownerId===q),sa=q=>c.filter(F=>F.petId===q),Ts=q=>c.filter(F=>F.clientId===q),aa=q=>{const F={...q,id:Math.max(...d.map(ne=>ne.id),0)+1,createdAt:new Date().toISOString()},Z=[...d,F];h(Z),Y(q.clientId),n(a,o,c,Z,m)},Ei=(q,F)=>{const Z=d.map(ne=>ne.id===q?{...ne,...F}:ne);h(Z),n(a,o,c,Z,m)},dc=q=>{const F=d.filter(Z=>Z.id!==q);h(F),n(a,o,c,F,m)},Lm=q=>d.find(F=>F.id===q),n0=q=>d.filter(F=>F.clientId===q),Xd=q=>d.filter(F=>F.petId===q),ia=q=>d.filter(F=>F.date===q),r0=()=>{const q=new Date().toISOString().split("T")[0];return d.filter(F=>F.date>=q&&F.status!=="cancelled"&&F.status!=="completed").sort((F,Z)=>new Date(F.date+"T"+F.time).getTime()-new Date(Z.date+"T"+Z.time).getTime())},Xe=()=>{const q=new Date().toISOString().split("T")[0];return d.filter(F=>F.date<q&&F.status==="scheduled").sort((F,Z)=>new Date(F.date+"T"+F.time).getTime()-new Date(Z.date+"T"+Z.time).getTime())},_t=q=>q.map(F=>{const Z=P.find(ne=>ne.name.toLowerCase()===F.name.toLowerCase()&&ne.category==="medication"&&ne.isActive);return Z&&Z.currentStock>=F.quantity?{...F,stockItemId:Z.id,isInStock:!0,stockQuantity:Z.currentStock,stockDeducted:!0}:Z&&Z.currentStock>0?{...F,stockItemId:Z.id,isInStock:!0,stockQuantity:Z.currentStock,stockDeducted:!1}:{...F,isInStock:!1,stockQuantity:0,stockDeducted:!1}}),zt=q=>{const F=_t(q.medications);let Z=[...P];F.forEach($e=>{if($e.stockDeducted&&$e.stockItemId){const je=Z.findIndex(ze=>ze.id===$e.stockItemId);if(je!==-1){const ze=Z[je];Z[je]={...ze,currentStock:ze.currentStock-$e.quantity,lastUpdated:new Date().toISOString()},te({itemId:$e.stockItemId,itemName:$e.name,type:"out",quantity:$e.quantity,reason:"Prescription mdicale",reference:`Prescription #${Math.max(...m.map(tn=>tn.id),0)+1}`,performedBy:q.prescribedBy,date:new Date().toISOString(),notes:`Prescription pour ${q.petName} - ${q.diagnosis}`})}}});const ne={...q,medications:F,id:Math.max(...m.map($e=>$e.id),0)+1,createdAt:new Date().toISOString()},ke=[...m,ne];f(ke),T(Z),n(a,o,c,d,ke,x,p,y,S,N,_,Z,E,R,U)},Ur=(q,F)=>{const Z=m.map(ne=>ne.id===q?{...ne,...F}:ne);f(Z),n(a,o,c,d,Z,x,p,y,S,N,_,P,E,R,U)},Wr=q=>{const F=m.filter(Z=>Z.id!==q);f(F),n(a,o,c,d,F,x,p,y,S,N,_,P,E,R,U)},oa=q=>m.find(F=>F.id===q),Va=q=>m.filter(F=>F.petId===q),Hr=q=>m.filter(F=>F.consultationId===q),la=()=>m.filter(q=>q.status==="active").sort((q,F)=>new Date(F.date).getTime()-new Date(q.date).getTime()),nz=q=>{const F={...q,id:Math.max(...x.map(ne=>ne.id),0)+1,createdAt:new Date().toISOString()},Z=[...x,F];g(Z),n(a,o,c,d,m,Z,p)},rz=(q,F)=>{const Z=x.map(ne=>ne.id===q?{...ne,...F}:ne);g(Z),n(a,o,c,d,m,Z,p)},sz=q=>{const F=x.filter(Z=>Z.id!==q);g(F),n(a,o,c,d,m,F,p)},az=q=>{const F={...q,id:Math.max(...p.map(ne=>ne.id),0)+1,createdAt:new Date().toISOString()},Z=[...p,F];v(Z),n(a,o,c,d,m,x,Z)},iz=(q,F)=>{const Z=p.map(ne=>ne.id===q?{...ne,...F}:ne);v(Z),n(a,o,c,d,m,x,Z)},oz=q=>{const F=p.filter(Z=>Z.id!==q);v(F),n(a,o,c,d,m,x,F)},lz=q=>x.find(F=>F.id===q),cz=q=>p.find(F=>F.id===q),uz=q=>p.filter(F=>F.farmId===q),dz=()=>{const q=new Date().toISOString().split("T")[0];return p.filter(F=>F.date>=q&&F.status!=="cancelled").sort((F,Z)=>new Date(F.date).getTime()-new Date(Z.date).getTime())},hz=q=>x.filter(F=>F.status===q),fz=q=>{const F=P.find(Z=>Z.name.toLowerCase()===q.vaccineName.toLowerCase()&&Z.category==="vaccine"&&Z.isActive);return F&&F.currentStock>=1?{...q,stockItemId:F.id,isInStock:!0,stockQuantity:F.currentStock,stockDeducted:!0}:F&&F.currentStock>0?{...q,stockItemId:F.id,isInStock:!0,stockQuantity:F.currentStock,stockDeducted:!1}:{...q,isInStock:!1,stockQuantity:0,stockDeducted:!1}},s0=q=>{const F=fz(q);let Z=[...P];if(F.stockDeducted&&F.stockItemId){const ke=Z.findIndex($e=>$e.id===F.stockItemId);if(ke!==-1){const $e=Z[ke];Z[ke]={...$e,currentStock:$e.currentStock-1,lastUpdated:new Date().toISOString()},te({itemId:F.stockItemId,itemName:F.vaccineName,type:"out",quantity:1,reason:"Vaccination",reference:`Vaccination #${Math.max(...y.map(je=>je.id),0)+1}`,performedBy:F.veterinarian,date:new Date().toISOString(),notes:`Vaccination de ${F.petName} - ${F.vaccineName}`})}}const ne={...F,id:Math.max(...y.map(ke=>ke.id),0)+1,createdAt:new Date().toISOString()};return w(ke=>{const $e=[...ke,ne];return Y(q.clientId),n(a,o,c,d,m,x,p,$e,S,N,_,Z,E,R),$e}),T(Z),ne.id},Fm=(q,F)=>{const Z=y.map(ne=>ne.id===q?{...ne,...F}:ne);w(Z),n(a,o,c,d,m,x,p,Z)},mz=q=>{const F=y.find(ne=>ne.id===q);if(!F)return;let Z=[...y];F.vaccinationCategory==="new"?(y.filter(ne=>ne.originalVaccinationId===q),Z=y.filter(ne=>ne.id!==q&&ne.originalVaccinationId!==q)):Z=y.filter(ne=>ne.id!==q),w(Z),n(a,o,c,d,m,x,p,Z)},zm=q=>y.find(F=>F.id===q),pz=q=>y.filter(F=>F.petId===q),gz=q=>y.filter(F=>F.clientId===q),vz=()=>{const q=new Date().toISOString().split("T")[0];return y.filter(F=>F.nextDueDate<q&&F.status!=="completed").sort((F,Z)=>new Date(F.nextDueDate).getTime()-new Date(Z.nextDueDate).getTime())},xz=()=>{const q=new Date,F=new Date(q.getTime()+30*24*60*60*1e3).toISOString().split("T")[0],Z=q.toISOString().split("T")[0];return y.filter(ne=>ne.nextDueDate>=Z&&ne.nextDueDate<=F&&ne.status!=="completed").sort((ne,ke)=>new Date(ne.nextDueDate).getTime()-new Date(ke.nextDueDate).getTime())},yz=q=>y.filter(F=>F.status===q),wz=()=>{const q=new Date().toISOString().split("T")[0];let F=!1;const Z=y.map(ne=>ne.status==="completed"?ne:ne.nextDueDate<q&&ne.status!=="overdue"?(F=!0,{...ne,status:"overdue"}):ne.nextDueDate>=q&&ne.status!=="scheduled"?(F=!0,{...ne,status:"scheduled"}):ne);return F&&(w(Z),n(a,o,c,d,m,x,p,Z)),Z},bz=q=>{const F={...q,id:Math.max(...S.map(ne=>ne.id),0)+1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},Z=[...S,F];j(Z),n(a,o,c,d,m,x,p,y,Z)},jz=(q,F)=>{const Z=S.map(ne=>ne.id===q?{...ne,...F,updatedAt:new Date().toISOString()}:ne);j(Z),n(a,o,c,d,m,x,p,y,Z)},Nz=q=>{const F=S.filter(Z=>Z.id!==q);j(F),n(a,o,c,d,m,x,p,y,F)},Sz=q=>S.find(F=>F.id===q),_z=q=>S.filter(F=>F.species===q&&F.isActive),Cz=()=>S.filter(q=>q.isActive),Az=(q,F,Z)=>{const ne=S.find(je=>je.name===q&&je.species===F&&je.isActive);if(!ne||!ne.intervals.length)return null;const ke=ne.intervals[ne.intervals.length-1],$e=new Date(Z);return $e.setDate($e.getDate()+ke.offsetDays),$e.toISOString().split("T")[0]},Pz=(q,F,Z)=>{var Rt;const ne=zm(q);if(!ne)return;const ke={clientId:ne.clientId,clientName:ne.clientName,petId:ne.petId,petName:ne.petName,date:F,time:Z,type:"vaccination",duration:30,reason:`Rappel vaccinal - ${ne.vaccineName}`,notes:`Rappel pour ${ne.vaccineName} (vaccination originale ID: ${q})`,status:"scheduled",reminderSent:!1};aa(ke);const $e=Math.max(...d.map(Ue=>Ue.id),0)+1,je={petId:ne.petId,petName:ne.petName,clientId:ne.clientId,clientName:ne.clientName,vaccineName:ne.vaccineName,vaccineType:ne.vaccineType,vaccinationCategory:"reminder",dateGiven:F,nextDueDate:ne.nextDueDate,batchNumber:ne.batchNumber,veterinarian:ne.veterinarian,notes:`Rappel de ${ne.vaccineName} (original: ${q})`,status:"scheduled",cost:ne.cost,location:ne.location,manufacturer:ne.manufacturer,originalVaccinationId:q,reminderAppointmentId:$e,isReminder:!0};s0(je);const ze={id:Math.max(...((Rt=ne.reminderHistory)==null?void 0:Rt.map(Ue=>Ue.id))||[0],0)+1,vaccinationId:q,appointmentId:$e,scheduledDate:F,status:"scheduled",notes:`Rappel programm pour ${ne.vaccineName}`,createdAt:new Date().toISOString()},tn=[...ne.reminderHistory||[],ze];return Fm(q,{reminderHistory:tn}),{appointment:ke,reminderVaccination:je,reminder:ze}},Ez=(q,F,Z)=>{var je;const ne=zm(q);if(!ne)return;const $e={status:"completed",reminderHistory:((je=ne.reminderHistory)==null?void 0:je.map(ze=>ze.appointmentId===F?{...ze,status:"completed"}:ze))||[],reminderAppointmentId:void 0};return Z&&($e.nextDueDate=Z),Fm(q,$e),Ei(F,{status:"completed"}),ne},kz=(q,F)=>{const Z=zm(q);if(!Z)return null;const ne={petId:Z.petId,petName:Z.petName,clientId:Z.clientId,clientName:Z.clientName,vaccineName:Z.vaccineName,vaccineType:Z.vaccineType,vaccinationCategory:"reminder",dateGiven:F.datePerformed,nextDueDate:F.newNextDueDate||Z.nextDueDate,calculatedDueDate:Z.calculatedDueDate,batchNumber:F.batchNumber||Z.batchNumber,veterinarian:F.veterinarian,notes:F.notes||`Rappel effectu - ${Z.vaccineName}`,status:"completed",cost:Z.cost,location:Z.location,manufacturer:Z.manufacturer,expirationDate:Z.expirationDate,adverseReactions:Z.adverseReactions,originalVaccinationId:q,isReminder:!0};s0(ne);const ke={status:"completed",reminderAppointmentId:void 0};return F.newNextDueDate&&(ke.nextDueDate=F.newNextDueDate),Fm(q,ke),ne},hc=q=>{const F={...q,id:Math.max(...U.map(ne=>ne.id),0)+1,createdAt:new Date().toISOString()},Z=[...U,F];return K(Z),n(a,o,c,d,m,x,p,y,S,N,_,P,E,R,Z),F},Tz=(q,F)=>{const Z=U.map(ne=>ne.id===q?{...ne,...F}:ne);K(Z),n(a,o,c,d,m,x,p,y,S,N,_,P,E,R,Z)},Oz=q=>{const F=U.filter(Z=>Z.id!==q);K(F),n(a,o,c,d,m,x,p,y,S,N,_,P,E,R,F)},a0=(q,F)=>{const Z=new Date(q),ne=new Date(F);let ke=0;const $e={consultations:0,vaccinations:0,antiparasitics:0,prescriptions:0,stockSales:0,manualEntries:0,recurringCharges:0};return c.filter(je=>{const ze=new Date(je.date);return ze>=Z&&ze<=ne}).forEach(je=>{var Rt;const ze=parseFloat(((Rt=je.cost)==null?void 0:Rt.toString())||"0");ke+=ze,$e.consultations+=ze,U.find(Ue=>Ue.source==="consultation"&&Ue.sourceId===je.id)||hc({type:"revenue",category:"automatic",frequency:"occasional",description:`Consultation - ${je.petName}`,amount:ze,date:je.date,reference:`Consultation #${je.id}`,source:"consultation",sourceId:je.id,notes:`Consultation automatique pour ${je.petName}`})}),y.filter(je=>{const ze=new Date(je.dateGiven);return ze>=Z&&ze<=ne}).forEach(je=>{var Rt;const ze=parseFloat(((Rt=je.cost)==null?void 0:Rt.toString())||"0");ke+=ze,$e.vaccinations+=ze,U.find(Ue=>Ue.source==="vaccination"&&Ue.sourceId===je.id)||hc({type:"revenue",category:"automatic",frequency:"occasional",description:`Vaccination - ${je.vaccineName}`,amount:ze,date:je.dateGiven,reference:`Vaccination #${je.id}`,source:"vaccination",sourceId:je.id,notes:`Vaccination automatique pour ${je.petName}`})}),N.filter(je=>{const ze=new Date(je.dateGiven);return ze>=Z&&ze<=ne}).forEach(je=>{var Rt;const ze=parseFloat(((Rt=je.cost)==null?void 0:Rt.toString())||"0");ke+=ze,$e.antiparasitics+=ze,U.find(Ue=>Ue.source==="antiparasitic"&&Ue.sourceId===je.id)||hc({type:"revenue",category:"automatic",frequency:"occasional",description:`Antiparasitaire - ${je.productName}`,amount:ze,date:je.dateGiven,reference:`Antiparasitaire #${je.id}`,source:"antiparasitic",sourceId:je.id,notes:`Antiparasitaire automatique pour ${je.petName}`})}),m.filter(je=>{const ze=new Date(je.createdAt);return ze>=Z&&ze<=ne}).forEach(je=>{const ze=je.medications.reduce((Rt,Ue)=>{var cn;return Rt+parseFloat(((cn=Ue.cost)==null?void 0:cn.toString())||"0")*Ue.quantity},0);ke+=ze,$e.prescriptions+=ze,!U.find(Rt=>Rt.source==="prescription"&&Rt.sourceId===je.id)&&ze>0&&hc({type:"revenue",category:"automatic",frequency:"occasional",description:`Prescription - ${je.petName}`,amount:ze,date:je.createdAt,reference:`Prescription #${je.id}`,source:"prescription",sourceId:je.id,notes:`Prescription automatique pour ${je.petName}`})}),{totalRevenue:ke,revenueBreakdown:$e}},i0=(q,F)=>{const Z=new Date(q),ne=new Date(F);let ke=0;const $e={stockPurchases:0,salaries:0,rent:0,taxes:0,insurance:0,other:0,manualEntries:0,recurringCharges:0};return R.filter(je=>{const ze=new Date(je.date);return ze>=Z&&ze<=ne&&je.type==="in"&&je.reason==="Achat fournisseur"}).forEach(je=>{const ze=P.find(tn=>tn.id===je.itemId);if(ze){const tn=ze.purchasePrice*je.quantity;ke+=tn,$e.stockPurchases+=tn,U.find(Ue=>Ue.source==="stock_purchase"&&Ue.reference===je.reference)||hc({type:"expense",category:"automatic",frequency:"occasional",description:`Achat stock - ${je.itemName}`,amount:tn,date:je.date,reference:je.reference,source:"stock_purchase",notes:`Achat automatique de ${je.quantity} ${je.itemName}`})}}),{totalExpenses:ke,expenseBreakdown:$e}},Dz=(q,F,Z)=>{const{totalRevenue:ne,revenueBreakdown:ke}=a0(F,Z),{totalExpenses:$e,expenseBreakdown:je}=i0(F,Z),ze=U.filter(cn=>{const Pr=new Date(cn.date),ki=new Date(F),Ti=new Date(Z);return Pr>=ki&&Pr<=Ti&&cn.category==="manual"&&cn.type==="revenue"}).reduce((cn,Pr)=>cn+Pr.amount,0),tn=U.filter(cn=>{const Pr=new Date(cn.date),ki=new Date(F),Ti=new Date(Z);return Pr>=ki&&Pr<=Ti&&cn.category==="manual"&&cn.type==="expense"}).reduce((cn,Pr)=>cn+Pr.amount,0);ke.manualEntries=ze,je.manualEntries=tn;const Rt=ne+ze,Ue=$e+tn;return{period:q,totalRevenue:Rt,totalExpenses:Ue,netIncome:Rt-Ue,revenueBreakdown:ke,expenseBreakdown:je}};return s.jsx(HR.Provider,{value:{clients:a,pets:o,consultations:c,appointments:d,prescriptions:m,farms:x,farmInterventions:p,vaccinations:y,vaccinationProtocols:S,antiparasitics:N,antiparasiticProtocols:_,stockItems:P,stockAlerts:E,stockMovements:R,accountingEntries:U,addClient:k,addPet:D,addConsultation:ge,addAppointment:aa,addPrescription:zt,addFarm:nz,addFarmIntervention:az,addVaccination:s0,addVaccinationProtocol:bz,addAntiparasitic:Pe,addAntiparasiticProtocol:Dt,addStockItem:V,addStockMovement:te,addAccountingEntry:hc,updateAccountingEntry:Tz,deleteAccountingEntry:Oz,calculateAutomaticRevenue:a0,calculateAutomaticExpenses:i0,generateAccountingSummary:Dz,updateClient:J,updatePet:W,updateConsultation:ve,updateAppointment:Ei,updatePrescription:Ur,updateFarm:rz,updateFarmIntervention:iz,updateVaccination:Fm,updateVaccinationProtocol:jz,updateAntiparasitic:Ee,updateAntiparasiticProtocol:en,updateStockItem:O,deletePet:H,deleteConsultation:pe,deleteAppointment:dc,deletePrescription:Wr,deleteFarm:sz,deleteFarmIntervention:oz,deleteVaccination:mz,deleteVaccinationProtocol:Nz,deleteAntiparasitic:dt,deleteAntiparasiticProtocol:ae,deleteStockItem:le,resetData:G,exportData:ue,importData:re,getClientById:Qd,getPetById:uc,getConsultationById:Uo,getAppointmentById:Lm,getPrescriptionById:oa,getFarmById:lz,getFarmInterventionById:cz,getVaccinationById:zm,getVaccinationProtocolById:Sz,getVaccinationProtocolsBySpecies:_z,getActiveVaccinationProtocols:Cz,getAntiparasiticById:B,getAntiparasiticsByPetId:he,getAntiparasiticsByClientId:Oe,getOverdueAntiparasitics:St,getUpcomingAntiparasitics:Qe,getAntiparasiticsByStatus:de,getAntiparasiticProtocolById:Fe,getAntiparasiticProtocolsBySpecies:Fn,getActiveAntiparasiticProtocols:Vr,getPetsByOwnerId:Ar,getConsultationsByPetId:sa,getConsultationsByClientId:Ts,getAppointmentsByClientId:n0,getAppointmentsByPetId:Xd,getAppointmentsByDate:ia,getUpcomingAppointments:r0,getOverdueAppointments:Xe,getPrescriptionsByPetId:Va,getPrescriptionsByConsultationId:Hr,getActivePrescriptions:la,getFarmInterventionsByFarmId:uz,getUpcomingFarmInterventions:dz,getFarmsByStatus:hz,getVaccinationsByPetId:pz,getVaccinationsByClientId:gz,getOverdueVaccinations:vz,getUpcomingVaccinations:xz,getVaccinationsByStatus:yz,createVaccinationReminder:Pz,completeVaccinationReminder:Ez,confirmVaccinationReminder:kz,updateVaccinationStatuses:wz,calculateDueDateFromProtocol:Az,updateClientStats:Y,getStockAlerts:ce},children:e})}const Fa=()=>{const e=b.useContext(HR);if(e===void 0)throw new Error("useClients must be used within a ClientProvider");return e},se=b.forwardRef(({className:e,type:t,...n},r)=>s.jsx("input",{type:t,className:Me("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));se.displayName="Input";var XJ="Label",KR=b.forwardRef((e,t)=>s.jsx(qe.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));KR.displayName=XJ;var GR=KR;const JJ=bm("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),M=b.forwardRef(({className:e,...t},n)=>s.jsx(GR,{ref:n,className:Me(JJ(),e),...t}));M.displayName=GR.displayName;const ie=b.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:Me("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));ie.displayName="Card";const xe=b.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:Me("flex flex-col space-y-1.5 p-6",e),...t}));xe.displayName="CardHeader";const ye=b.forwardRef(({className:e,...t},n)=>s.jsx("h3",{ref:n,className:Me("text-2xl font-semibold leading-none tracking-tight",e),...t}));ye.displayName="CardTitle";const Fu=b.forwardRef(({className:e,...t},n)=>s.jsx("p",{ref:n,className:Me("text-sm text-muted-foreground",e),...t}));Fu.displayName="CardDescription";const oe=b.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:Me("p-6 pt-0",e),...t}));oe.displayName="CardContent";const ZJ=b.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:Me("flex items-center p-6 pt-0",e),...t}));ZJ.displayName="CardFooter";const eZ=bm("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),zu=b.forwardRef(({className:e,variant:t,...n},r)=>s.jsx("div",{ref:r,role:"alert",className:Me(eZ({variant:t}),e),...n}));zu.displayName="Alert";const tZ=b.forwardRef(({className:e,...t},n)=>s.jsx("h5",{ref:n,className:Me("mb-1 font-medium leading-none tracking-tight",e),...t}));tZ.displayName="AlertTitle";const Bu=b.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:Me("text-sm [&_p]:leading-relaxed",e),...t}));Bu.displayName="AlertDescription";function nZ(){const[e,t]=b.useState(""),[n,r]=b.useState(""),[a,i]=b.useState(!1),[o,l]=b.useState(""),[c,u]=b.useState(!1),[d,h]=b.useState(!1);Sn();const m=UR(),f=WJ(),x=HJ(),g=async w=>{if(w.preventDefault(),l(""),!e||!n){l("Veuillez remplir tous les champs");return}try{await m.mutateAsync({email:e,password:n})}catch(S){l(S instanceof Error?S.message:"Une erreur inattendue est survenue")}},p=async()=>{l("");try{await f.mutateAsync()}catch{l("Erreur lors de la connexion avec Google")}},v=async w=>{if(w.preventDefault(),l(""),!e){l("Veuillez saisir votre email");return}try{await x.mutateAsync(e),h(!0)}catch(S){l(S instanceof Error?S.message:"Une erreur est survenue")}},y=()=>{u(!1),h(!1),l(""),r("")};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-green-50 dark:from-gray-900 dark:to-gray-800 px-4",children:s.jsxs(ie,{className:"w-full max-w-md",children:[s.jsxs(xe,{className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"p-3 bg-primary/10 rounded-full",children:s.jsx(gt,{className:"h-8 w-8 text-primary"})})}),s.jsx(ye,{className:"text-2xl font-bold",children:"VetPro CRM3"}),s.jsx(Fu,{children:c?d?"Vrifiez votre email":"Rinitialiser votre mot de passe":"Connectez-vous  votre espace vtrinaire"})]}),s.jsx(oe,{children:d?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Nous avons envoy un lien de rinitialisation  ",s.jsx("strong",{children:e})]}),s.jsx("p",{className:"text-xs text-muted-foreground mb-6",children:"Cliquez sur le lien dans l'email pour rinitialiser votre mot de passe. Si vous ne voyez pas l'email, vrifiez votre dossier spam."})]}),s.jsxs($,{onClick:y,className:"w-full",children:[s.jsx(VC,{className:"mr-2 h-4 w-4"}),"Retour  la connexion"]})]}):c?s.jsxs("form",{onSubmit:v,className:"space-y-4",children:[o&&s.jsx(zu,{variant:"destructive",children:s.jsx(Bu,{children:o})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"reset-email",children:"Email"}),s.jsx(se,{id:"reset-email",type:"email",placeholder:"votre.email@example.com",value:e,onChange:w=>t(w.target.value),disabled:x.isPending,required:!0}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Entrez l'adresse email associe  votre compte"})]}),s.jsx($,{type:"submit",className:"w-full",disabled:x.isPending,children:x.isPending?s.jsxs(s.Fragment,{children:[s.jsx(on,{className:"mr-2 h-4 w-4 animate-spin"}),"Envoi en cours..."]}):"Envoyer le lien de rinitialisation"}),s.jsx("div",{className:"text-center",children:s.jsxs($,{type:"button",variant:"link",onClick:y,className:"text-sm",children:[s.jsx(VC,{className:"mr-1 h-4 w-4"}),"Retour  la connexion"]})})]}):s.jsxs(s.Fragment,{children:[s.jsxs("form",{onSubmit:g,className:"space-y-4",children:[o&&s.jsx(zu,{variant:"destructive",children:s.jsx(Bu,{children:o})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"email",children:"Email"}),s.jsx(se,{id:"email",type:"email",placeholder:"vet@vetpro.com",value:e,onChange:w=>t(w.target.value),disabled:m.isPending,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"password",children:"Mot de passe"}),s.jsxs("div",{className:"relative",children:[s.jsx(se,{id:"password",type:a?"text":"password",placeholder:"",value:n,onChange:w=>r(w.target.value),disabled:m.isPending,required:!0}),s.jsx($,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>i(!a),disabled:m.isPending,children:a?s.jsx(Ib,{className:"h-4 w-4"}):s.jsx($n,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx($,{type:"button",variant:"link",className:"text-xs p-0 h-auto",onClick:()=>u(!0),children:"Mot de passe oubli ?"})})]}),s.jsx($,{type:"submit",className:"w-full",disabled:m.isPending,children:m.isPending?s.jsxs(s.Fragment,{children:[s.jsx(on,{className:"mr-2 h-4 w-4 animate-spin"}),"Connexion..."]}):"Se connecter"})]}),s.jsxs("div",{className:"relative my-6",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("span",{className:"w-full border-t"})}),s.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:s.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Ou continuer avec"})})]}),s.jsx($,{type:"button",variant:"outline",className:"w-full",onClick:p,disabled:m.isPending||f.isPending,children:f.isPending?s.jsxs(s.Fragment,{children:[s.jsx(on,{className:"mr-2 h-4 w-4 animate-spin"}),"Connexion avec Google..."]}):s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"mr-2 h-4 w-4",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuer avec Google"]})}),s.jsx("div",{className:"mt-6 text-center",children:s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Pas encore de compte ?"," ",s.jsx("a",{href:"/register",className:"text-primary hover:underline",children:"S'inscrire"})]})})]})})]})})}function Cn({children:e}){var o,l;const{isAuthenticated:t,isLoading:n,user:r}=Sn(),[a,i]=b.useState(!1);return b.useEffect(()=>{if(n){const c=setTimeout(()=>{i(!0)},3e3);return()=>clearTimeout(c)}else i(!1)},[n]),a?s.jsx(Uc,{to:"/login",replace:!0}):n&&!a?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Vrification de l'authentification..."})]})}):!t||!r?s.jsx(Uc,{to:"/login",replace:!0}):((o=r==null?void 0:r.profile)==null?void 0:o.status)==="pending"&&window.location.pathname!=="/pending-approval"?s.jsx(Uc,{to:"/pending-approval",replace:!0}):((l=r==null?void 0:r.profile)==null?void 0:l.status)==="rejected"?s.jsx(Uc,{to:"/login",replace:!0}):s.jsx(s.Fragment,{children:e})}function rZ({children:e}){var n,r;const{user:t}=Sn();return s.jsx(Cn,{children:((n=t==null?void 0:t.profile)==null?void 0:n.role)==="admin"&&((r=t==null?void 0:t.profile)==null?void 0:r.status)==="approved"?s.jsx(s.Fragment,{children:e}):s.jsx(Uc,{to:"/dashboard",replace:!0})})}function sZ({children:e,redirectTo:t="/dashboard"}){const{isAuthenticated:n,isLoading:r,user:a}=Sn(),[i,o]=b.useState(!1);return b.useEffect(()=>{if(r){const l=setTimeout(()=>{o(!0)},2e3);return()=>clearTimeout(l)}else o(!1)},[r]),i?s.jsx(s.Fragment,{children:e}):r&&!i?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Chargement..."})]})}):n&&a?s.jsx(Uc,{to:t,replace:!0}):s.jsx(s.Fragment,{children:e})}const YR="/assets/vet-hero-UFBVcjRL.jpg";function aZ(){return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("header",{className:"border-b",children:s.jsxs("div",{className:"container mx-auto px-6 py-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(gt,{className:"h-8 w-8 text-primary"}),s.jsx("span",{className:"text-xl font-bold",children:"VetPro"})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx($,{variant:"ghost",asChild:!0,children:s.jsx(gs,{to:"/login",children:"Se connecter"})}),s.jsx($,{asChild:!0,children:s.jsx(gs,{to:"/register",children:"Commencer"})})]})]})}),s.jsx("section",{className:"py-20",children:s.jsx("div",{className:"container mx-auto px-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1 space-y-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(gt,{className:"h-8 w-8 text-primary"}),s.jsx("span",{className:"text-sm font-medium text-primary",children:"Solution CRM Vtrinaire Complte"})]}),s.jsxs("h1",{className:"text-5xl font-bold leading-tight",children:["Grez votre pratique",s.jsx("span",{className:"gradient-primary bg-clip-text text-transparent block",children:"vtrinaire efficacement"})]}),s.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl",children:"VetPro vous aide  grer vos clients, leurs animaux, les rendez-vous, consultations et l'historique mdical. Optimisez votre pratique avec notre solution tout-en-un."})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx($,{size:"lg",className:"gap-2 medical-glow",asChild:!0,children:s.jsxs(gs,{to:"/register",children:["Commencer gratuitement",s.jsx(Db,{className:"h-4 w-4"})]})}),s.jsx($,{variant:"outline",size:"lg",className:"gap-2",asChild:!0,children:s.jsx(gs,{to:"/login",children:"Voir la dmo"})})]})]}),s.jsx("div",{className:"hidden lg:block",children:s.jsx("img",{src:YR,alt:"Vtrinaire professionnel",className:"w-96 h-64 object-cover rounded-xl shadow-medical"})})]})})}),s.jsx("section",{className:"py-20 bg-muted/30",children:s.jsxs("div",{className:"container mx-auto px-6",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Tout ce dont vous avez besoin pour votre clinique"}),s.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Une solution complte pour moderniser et optimiser votre pratique vtrinaire"})]}),s.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"bg-card p-6 rounded-xl border shadow-sm",children:[s.jsx(Ra,{className:"h-12 w-12 text-primary mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Gestion des Clients"}),s.jsx("p",{className:"text-muted-foreground",children:"Grez facilement vos clients et leurs animaux avec un systme intuitif et complet."})]}),s.jsxs("div",{className:"bg-card p-6 rounded-xl border shadow-sm",children:[s.jsx(Ze,{className:"h-12 w-12 text-primary mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Rendez-vous"}),s.jsx("p",{className:"text-muted-foreground",children:"Planifiez et grez vos rendez-vous avec un calendrier intelligent et flexible."})]}),s.jsxs("div",{className:"bg-card p-6 rounded-xl border shadow-sm",children:[s.jsx(ts,{className:"h-12 w-12 text-primary mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Consultations"}),s.jsx("p",{className:"text-muted-foreground",children:"Documentez vos consultations et maintenez un historique mdical dtaill."})]}),s.jsxs("div",{className:"bg-card p-6 rounded-xl border shadow-sm",children:[s.jsx(aS,{className:"h-12 w-12 text-primary mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Statistiques"}),s.jsx("p",{className:"text-muted-foreground",children:"Analysez votre activit avec des rapports dtaills et des tableaux de bord."})]}),s.jsxs("div",{className:"bg-card p-6 rounded-xl border shadow-sm",children:[s.jsx(Jn,{className:"h-12 w-12 text-primary mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Scuris"}),s.jsx("p",{className:"text-muted-foreground",children:"Vos donnes sont protges avec les plus hauts standards de scurit."})]}),s.jsxs("div",{className:"bg-card p-6 rounded-xl border shadow-sm",children:[s.jsx(gt,{className:"h-12 w-12 text-primary mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Farm Management"}),s.jsx("p",{className:"text-muted-foreground",children:"Grez les exploitations agricoles et suivez la sant des troupeaux."})]})]})]})}),s.jsx("section",{className:"py-20",children:s.jsx("div",{className:"container mx-auto px-6 text-center",children:s.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[s.jsx("h2",{className:"text-3xl font-bold",children:"Prt  moderniser votre pratique ?"}),s.jsx("p",{className:"text-lg text-muted-foreground",children:"Rejoignez des centaines de vtrinaires qui font confiance  VetPro pour grer leur clinique efficacement."}),s.jsx("div",{className:"flex gap-4 justify-center",children:s.jsx($,{size:"lg",className:"gap-2 medical-glow",asChild:!0,children:s.jsxs(gs,{to:"/register",children:["Commencer maintenant",s.jsx(Db,{className:"h-4 w-4"})]})})})]})})}),s.jsx("footer",{className:"border-t py-8",children:s.jsx("div",{className:"container mx-auto px-6 text-center text-muted-foreground",children:s.jsxs("p",{children:[" ",new Date().getFullYear()," VetPro. Tous droits rservs."]})})})]})}const iZ=()=>{const e=Ad(),{toast:t}=it(),[n,r]=b.useState(!1),[a,i]=b.useState({username:"",fullName:"",email:"",password:"",confirmPassword:""}),o=u=>u.length<8?"Le mot de passe doit contenir au moins 8 caractres":/[A-Z]/.test(u)?/[a-z]/.test(u)?/\d/.test(u)?/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>?]/.test(u)?null:"Le mot de passe doit contenir au moins un caractre spcial":"Le mot de passe doit contenir au moins un chiffre":"Le mot de passe doit contenir au moins une lettre minuscule":"Le mot de passe doit contenir au moins une lettre majuscule",l=u=>{i(d=>({...d,[u.target.id]:u.target.value}))},c=async u=>{if(u.preventDefault(),r(!0),a.password!==a.confirmPassword){t({title:"Erreur",description:"Les mots de passe ne correspondent pas",variant:"destructive"}),r(!1);return}const d=o(a.password);if(d){t({title:"Erreur",description:d,variant:"destructive"}),r(!1);return}try{await RJ(a.email,a.password,a.username,a.fullName,"assistant"),t({title:"Inscription russie",description:"Votre compte a t cr avec succs. Veuillez vrifier votre email et cliquer sur le lien de confirmation pour pouvoir vous connecter."}),e("/login")}catch(h){const m=h instanceof Error?h.message:"Une erreur est survenue lors de l'inscription";t({title:"Erreur d'inscription",description:m,variant:"destructive"})}finally{r(!1)}};return s.jsx("div",{className:"min-h-screen bg-gradient-hero flex items-center justify-center p-6",children:s.jsxs(ie,{className:"w-full max-w-md",children:[s.jsxs(xe,{className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx(gt,{className:"h-12 w-12 text-primary"})}),s.jsx(ye,{className:"text-2xl gradient-primary bg-clip-text text-transparent",children:"VetPro CRM"}),s.jsx(Fu,{children:"Crez votre compte vtrinaire"})]}),s.jsxs(oe,{children:[s.jsxs("form",{onSubmit:c,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"username",children:"Nom d'utilisateur"}),s.jsx(se,{id:"username",placeholder:"martin.dubois",value:a.username,onChange:l,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"fullName",children:"Nom complet"}),s.jsx(se,{id:"fullName",placeholder:"Dr. Martin Dubois",value:a.fullName,onChange:l,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"email",children:"Email"}),s.jsx(se,{id:"email",type:"email",placeholder:"votre.email@example.com",value:a.email,onChange:l,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"password",children:"Mot de passe"}),s.jsx(se,{id:"password",type:"password",placeholder:"Votre mot de passe scuris",value:a.password,onChange:l,required:!0,minLength:8}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Le mot de passe doit contenir au moins 8 caractres, une majuscule, une minuscule, un chiffre et un caractre spcial."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),s.jsx(se,{id:"confirmPassword",type:"password",placeholder:"Confirmer votre mot de passe",value:a.confirmPassword,onChange:l,required:!0,minLength:8})]}),s.jsx($,{type:"submit",className:"w-full",disabled:n,children:n?s.jsxs(s.Fragment,{children:[s.jsx(on,{className:"mr-2 h-4 w-4 animate-spin"}),"Cration en cours..."]}):"Crer le compte"})]}),s.jsxs("div",{className:"mt-6 text-center",children:[s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Dj un compte ?"," ",s.jsx(gs,{to:"/login",className:"text-primary hover:underline",children:"Se connecter"})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:s.jsx(gs,{to:"/",className:"hover:underline",children:"Retour  l'accueil"})})]})]})]})})},oZ=()=>{const{user:e,logout:t}=Sn(),n=()=>{t()};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:s.jsxs(ie,{className:"w-full max-w-md shadow-xl dark:bg-gray-800/50 dark:border-gray-700",children:[s.jsxs(xe,{className:"text-center",children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-yellow-100 dark:bg-yellow-900/30 rounded-full flex items-center justify-center mb-4",children:s.jsx($t,{className:"w-8 h-8 text-yellow-600 dark:text-yellow-400"})}),s.jsx(ye,{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"En attente d'approbation"})]}),s.jsxs(oe,{className:"space-y-6",children:[s.jsxs("div",{className:"text-center space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-600 dark:text-gray-400",children:[s.jsx(yd,{className:"w-5 h-5"}),s.jsx("span",{className:"text-sm",children:e==null?void 0:e.email})]}),s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-100 dark:border-blue-800/30",children:[s.jsxs("div",{className:"flex items-center space-x-2 text-blue-700 dark:text-blue-400 mb-2",children:[s.jsx(uS,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:"Compte en cours de validation"})]}),s.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-300",children:"Votre demande d'inscription a t reue avec succs. Un administrateur doit approuver votre compte avant que vous puissiez accder  l'application."})]}),s.jsxs("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-400",children:[s.jsx("p",{children:s.jsx("strong",{className:"dark:text-gray-200",children:"Que se passe-t-il maintenant ?"})}),s.jsxs("ul",{className:"text-left space-y-1 ml-4",children:[s.jsx("li",{children:" Un administrateur examinera votre demande"}),s.jsx("li",{children:" Vous recevrez un email de confirmation"}),s.jsx("li",{children:" L'accs sera activ dans les 24-48h"})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"text-center",children:s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:"En cas de questions, contactez votre administrateur"})}),s.jsxs($,{onClick:n,variant:"outline",className:"w-full dark:border-gray-600 dark:hover:bg-gray-700",children:[s.jsx(oS,{className:"w-4 h-4 mr-2"}),"Se dconnecter"]})]})]})]})})};var qx="Dialog",[QR,XR]=Br(qx),[lZ,ta]=QR(qx),JR=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=b.useRef(null),c=b.useRef(null),[u,d]=gi({prop:r,defaultProp:a??!1,onChange:i,caller:qx});return s.jsx(lZ,{scope:t,triggerRef:l,contentRef:c,contentId:Aa(),titleId:Aa(),descriptionId:Aa(),open:u,onOpenChange:d,onOpenToggle:b.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};JR.displayName=qx;var ZR="DialogTrigger",e3=b.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=ta(ZR,n),i=ft(t,a.triggerRef);return s.jsx(qe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":JS(a.open),...r,ref:i,onClick:Te(e.onClick,a.onOpenToggle)})});e3.displayName=ZR;var QS="DialogPortal",[cZ,t3]=QR(QS,{forceMount:void 0}),n3=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:a}=e,i=ta(QS,t);return s.jsx(cZ,{scope:t,forceMount:n,children:b.Children.map(r,o=>s.jsx(As,{present:n||i.open,children:s.jsx(ym,{asChild:!0,container:a,children:o})}))})};n3.displayName=QS;var Gg="DialogOverlay",r3=b.forwardRef((e,t)=>{const n=t3(Gg,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=ta(Gg,e.__scopeDialog);return i.modal?s.jsx(As,{present:r||i.open,children:s.jsx(dZ,{...a,ref:t})}):null});r3.displayName=Gg;var uZ=Il("DialogOverlay.RemoveScroll"),dZ=b.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=ta(Gg,n);return s.jsx(Ox,{as:uZ,allowPinchZoom:!0,shards:[a.contentRef],children:s.jsx(qe.div,{"data-state":JS(a.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),zl="DialogContent",s3=b.forwardRef((e,t)=>{const n=t3(zl,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=ta(zl,e.__scopeDialog);return s.jsx(As,{present:r||i.open,children:i.modal?s.jsx(hZ,{...a,ref:t}):s.jsx(fZ,{...a,ref:t})})});s3.displayName=zl;var hZ=b.forwardRef((e,t)=>{const n=ta(zl,e.__scopeDialog),r=b.useRef(null),a=ft(t,n.contentRef,r);return b.useEffect(()=>{const i=r.current;if(i)return $S(i)},[]),s.jsx(a3,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Te(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Te(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:Te(e.onFocusOutside,i=>i.preventDefault())})}),fZ=b.forwardRef((e,t)=>{const n=ta(zl,e.__scopeDialog),r=b.useRef(!1),a=b.useRef(!1);return s.jsx(a3,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),a3=b.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,l=ta(zl,n),c=b.useRef(null),u=ft(t,c);return IS(),s.jsxs(s.Fragment,{children:[s.jsx(Ex,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(vd,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":JS(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(pZ,{titleId:l.titleId}),s.jsx(vZ,{contentRef:c,descriptionId:l.descriptionId})]})]})}),XS="DialogTitle",i3=b.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=ta(XS,n);return s.jsx(qe.h2,{id:a.titleId,...r,ref:t})});i3.displayName=XS;var o3="DialogDescription",l3=b.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=ta(o3,n);return s.jsx(qe.p,{id:a.descriptionId,...r,ref:t})});l3.displayName=o3;var c3="DialogClose",u3=b.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=ta(c3,n);return s.jsx(qe.button,{type:"button",...r,ref:t,onClick:Te(e.onClick,()=>a.onOpenChange(!1))})});u3.displayName=c3;function JS(e){return e?"open":"closed"}var d3="DialogTitleWarning",[mZ,h3]=CV(d3,{contentName:zl,titleName:XS,docsSlug:"dialog"}),pZ=({titleId:e})=>{const t=h3(d3),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return b.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},gZ="DialogDescriptionWarning",vZ=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${h3(gZ).contentName}}.`;return b.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},f3=JR,m3=e3,p3=n3,ZS=r3,e_=s3,t_=i3,n_=l3,r_=u3;const tt=f3,Vx=m3,xZ=p3,g3=b.forwardRef(({className:e,...t},n)=>s.jsx(ZS,{ref:n,className:Me("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));g3.displayName=ZS.displayName;const et=b.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(xZ,{children:[s.jsx(g3,{}),s.jsxs(e_,{ref:r,className:Me("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,s.jsxs(r_,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(Ws,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));et.displayName=e_.displayName;const nt=({className:e,...t})=>s.jsx("div",{className:Me("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});nt.displayName="DialogHeader";const v3=({className:e,...t})=>s.jsx("div",{className:Me("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});v3.displayName="DialogFooter";const rt=b.forwardRef(({className:e,...t},n)=>s.jsx(t_,{ref:n,className:Me("text-lg font-semibold leading-none tracking-tight",e),...t}));rt.displayName=t_.displayName;const At=b.forwardRef(({className:e,...t},n)=>s.jsx(n_,{ref:n,className:Me("text-sm text-muted-foreground",e),...t}));At.displayName=n_.displayName;const Ke=b.forwardRef(({className:e,...t},n)=>s.jsx("textarea",{className:Me("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));Ke.displayName="Textarea";function uP(e,[t,n]){return Math.min(n,Math.max(t,e))}function s_(e){const t=b.useRef({value:e,previous:e});return b.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var yZ=[" ","Enter","ArrowUp","ArrowDown"],wZ=[" ","Enter"],Bl="Select",[Ux,Wx,bZ]=xx(Bl),[kd,Wke]=Br(Bl,[bZ,Nd]),Hx=Nd(),[jZ,$o]=kd(Bl),[NZ,SZ]=kd(Bl),x3=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:m,required:f,form:x}=e,g=Hx(t),[p,v]=b.useState(null),[y,w]=b.useState(null),[S,j]=b.useState(!1),N=Px(u),[C,_]=gi({prop:r,defaultProp:a??!1,onChange:i,caller:Bl}),[A,P]=gi({prop:o,defaultProp:l,onChange:c,caller:Bl}),T=b.useRef(null),E=p?x||!!p.closest("form"):!0,[I,R]=b.useState(new Set),z=Array.from(I).map(U=>U.props.value).join(";");return s.jsx(g$,{...g,children:s.jsxs(jZ,{required:f,scope:t,trigger:p,onTriggerChange:v,valueNode:y,onValueNodeChange:w,valueNodeHasChildren:S,onValueNodeHasChildrenChange:j,contentId:Aa(),value:A,onValueChange:P,open:C,onOpenChange:_,dir:N,triggerPointerDownPosRef:T,disabled:m,children:[s.jsx(Ux.Provider,{scope:t,children:s.jsx(NZ,{scope:e.__scopeSelect,onNativeOptionAdd:b.useCallback(U=>{R(K=>new Set(K).add(U))},[]),onNativeOptionRemove:b.useCallback(U=>{R(K=>{const k=new Set(K);return k.delete(U),k})},[]),children:n})}),E?s.jsxs(q3,{"aria-hidden":!0,required:f,tabIndex:-1,name:d,autoComplete:h,value:A,onChange:U=>P(U.target.value),disabled:m,form:x,children:[A===void 0?s.jsx("option",{value:""}):null,Array.from(I)]},z):null]})})};x3.displayName=Bl;var y3="SelectTrigger",w3=b.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...a}=e,i=Hx(n),o=$o(y3,n),l=o.disabled||r,c=ft(t,o.onTriggerChange),u=Wx(n),d=b.useRef("touch"),[h,m,f]=U3(g=>{const p=u().filter(w=>!w.disabled),v=p.find(w=>w.value===o.value),y=W3(p,g,v);y!==void 0&&o.onValueChange(y.value)}),x=g=>{l||(o.onOpenChange(!0),f()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return s.jsx(jS,{asChild:!0,...i,children:s.jsx(qe.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":V3(o.value)?"":void 0,...a,ref:c,onClick:Te(a.onClick,g=>{g.currentTarget.focus(),d.current!=="mouse"&&x(g)}),onPointerDown:Te(a.onPointerDown,g=>{d.current=g.pointerType;const p=g.target;p.hasPointerCapture(g.pointerId)&&p.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(x(g),g.preventDefault())}),onKeyDown:Te(a.onKeyDown,g=>{const p=h.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&m(g.key),!(p&&g.key===" ")&&yZ.includes(g.key)&&(x(),g.preventDefault())})})})});w3.displayName=y3;var b3="SelectValue",j3=b.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:i,placeholder:o="",...l}=e,c=$o(b3,n),{onValueNodeHasChildrenChange:u}=c,d=i!==void 0,h=ft(t,c.onValueNodeChange);return Nn(()=>{u(d)},[u,d]),s.jsx(qe.span,{...l,ref:h,style:{pointerEvents:"none"},children:V3(c.value)?s.jsx(s.Fragment,{children:o}):i})});j3.displayName=b3;var _Z="SelectIcon",N3=b.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...a}=e;return s.jsx(qe.span,{"aria-hidden":!0,...a,ref:t,children:r||""})});N3.displayName=_Z;var CZ="SelectPortal",S3=e=>s.jsx(ym,{asChild:!0,...e});S3.displayName=CZ;var ql="SelectContent",_3=b.forwardRef((e,t)=>{const n=$o(ql,e.__scopeSelect),[r,a]=b.useState();if(Nn(()=>{a(new DocumentFragment)},[]),!n.open){const i=r;return i?Xl.createPortal(s.jsx(C3,{scope:e.__scopeSelect,children:s.jsx(Ux.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),i):null}return s.jsx(A3,{...e,ref:t})});_3.displayName=ql;var $s=10,[C3,Ro]=kd(ql),AZ="SelectContentImpl",PZ=Il("SelectContent.RemoveScroll"),A3=b.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:f,sticky:x,hideWhenDetached:g,avoidCollisions:p,...v}=e,y=$o(ql,n),[w,S]=b.useState(null),[j,N]=b.useState(null),C=ft(t,ce=>S(ce)),[_,A]=b.useState(null),[P,T]=b.useState(null),E=Wx(n),[I,R]=b.useState(!1),z=b.useRef(!1);b.useEffect(()=>{if(w)return $S(w)},[w]),IS();const U=b.useCallback(ce=>{const[ge,...H]=E().map(re=>re.ref.current),[G]=H.slice(-1),ue=document.activeElement;for(const re of ce)if(re===ue||(re==null||re.scrollIntoView({block:"nearest"}),re===ge&&j&&(j.scrollTop=0),re===G&&j&&(j.scrollTop=j.scrollHeight),re==null||re.focus(),document.activeElement!==ue))return},[E,j]),K=b.useCallback(()=>U([_,w]),[U,_,w]);b.useEffect(()=>{I&&K()},[I,K]);const{onOpenChange:k,triggerPointerDownPosRef:D}=y;b.useEffect(()=>{if(w){let ce={x:0,y:0};const ge=G=>{var ue,re;ce={x:Math.abs(Math.round(G.pageX)-(((ue=D.current)==null?void 0:ue.x)??0)),y:Math.abs(Math.round(G.pageY)-(((re=D.current)==null?void 0:re.y)??0))}},H=G=>{ce.x<=10&&ce.y<=10?G.preventDefault():w.contains(G.target)||k(!1),document.removeEventListener("pointermove",ge),D.current=null};return D.current!==null&&(document.addEventListener("pointermove",ge),document.addEventListener("pointerup",H,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ge),document.removeEventListener("pointerup",H,{capture:!0})}}},[w,k,D]),b.useEffect(()=>{const ce=()=>k(!1);return window.addEventListener("blur",ce),window.addEventListener("resize",ce),()=>{window.removeEventListener("blur",ce),window.removeEventListener("resize",ce)}},[k]);const[J,W]=U3(ce=>{const ge=E().filter(ue=>!ue.disabled),H=ge.find(ue=>ue.ref.current===document.activeElement),G=W3(ge,ce,H);G&&setTimeout(()=>G.ref.current.focus())}),Y=b.useCallback((ce,ge,H)=>{const G=!z.current&&!H;(y.value!==void 0&&y.value===ge||G)&&(A(ce),G&&(z.current=!0))},[y.value]),V=b.useCallback(()=>w==null?void 0:w.focus(),[w]),O=b.useCallback((ce,ge,H)=>{const G=!z.current&&!H;(y.value!==void 0&&y.value===ge||G)&&T(ce)},[y.value]),le=r==="popper"?Sj:P3,te=le===Sj?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:f,sticky:x,hideWhenDetached:g,avoidCollisions:p}:{};return s.jsx(C3,{scope:n,content:w,viewport:j,onViewportChange:N,itemRefCallback:Y,selectedItem:_,onItemLeave:V,itemTextRefCallback:O,focusSelectedItem:K,selectedItemText:P,position:r,isPositioned:I,searchRef:J,children:s.jsx(Ox,{as:PZ,allowPinchZoom:!0,children:s.jsx(Ex,{asChild:!0,trapped:y.open,onMountAutoFocus:ce=>{ce.preventDefault()},onUnmountAutoFocus:Te(a,ce=>{var ge;(ge=y.trigger)==null||ge.focus({preventScroll:!0}),ce.preventDefault()}),children:s.jsx(vd,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:ce=>ce.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:s.jsx(le,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:ce=>ce.preventDefault(),...v,...te,onPlaced:()=>R(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:Te(v.onKeyDown,ce=>{const ge=ce.ctrlKey||ce.altKey||ce.metaKey;if(ce.key==="Tab"&&ce.preventDefault(),!ge&&ce.key.length===1&&W(ce.key),["ArrowUp","ArrowDown","Home","End"].includes(ce.key)){let G=E().filter(ue=>!ue.disabled).map(ue=>ue.ref.current);if(["ArrowUp","End"].includes(ce.key)&&(G=G.slice().reverse()),["ArrowUp","ArrowDown"].includes(ce.key)){const ue=ce.target,re=G.indexOf(ue);G=G.slice(re+1)}setTimeout(()=>U(G)),ce.preventDefault()}})})})})})})});A3.displayName=AZ;var EZ="SelectItemAlignedPosition",P3=b.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...a}=e,i=$o(ql,n),o=Ro(ql,n),[l,c]=b.useState(null),[u,d]=b.useState(null),h=ft(t,C=>d(C)),m=Wx(n),f=b.useRef(!1),x=b.useRef(!0),{viewport:g,selectedItem:p,selectedItemText:v,focusSelectedItem:y}=o,w=b.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&g&&p&&v){const C=i.trigger.getBoundingClientRect(),_=u.getBoundingClientRect(),A=i.valueNode.getBoundingClientRect(),P=v.getBoundingClientRect();if(i.dir!=="rtl"){const ue=P.left-_.left,re=A.left-ue,ve=C.left-re,pe=C.width+ve,ee=Math.max(pe,_.width),Pe=window.innerWidth-$s,Ee=uP(re,[$s,Math.max($s,Pe-ee)]);l.style.minWidth=pe+"px",l.style.left=Ee+"px"}else{const ue=_.right-P.right,re=window.innerWidth-A.right-ue,ve=window.innerWidth-C.right-re,pe=C.width+ve,ee=Math.max(pe,_.width),Pe=window.innerWidth-$s,Ee=uP(re,[$s,Math.max($s,Pe-ee)]);l.style.minWidth=pe+"px",l.style.right=Ee+"px"}const T=m(),E=window.innerHeight-$s*2,I=g.scrollHeight,R=window.getComputedStyle(u),z=parseInt(R.borderTopWidth,10),U=parseInt(R.paddingTop,10),K=parseInt(R.borderBottomWidth,10),k=parseInt(R.paddingBottom,10),D=z+U+I+k+K,J=Math.min(p.offsetHeight*5,D),W=window.getComputedStyle(g),Y=parseInt(W.paddingTop,10),V=parseInt(W.paddingBottom,10),O=C.top+C.height/2-$s,le=E-O,te=p.offsetHeight/2,ce=p.offsetTop+te,ge=z+U+ce,H=D-ge;if(ge<=O){const ue=T.length>0&&p===T[T.length-1].ref.current;l.style.bottom="0px";const re=u.clientHeight-g.offsetTop-g.offsetHeight,ve=Math.max(le,te+(ue?V:0)+re+K),pe=ge+ve;l.style.height=pe+"px"}else{const ue=T.length>0&&p===T[0].ref.current;l.style.top="0px";const ve=Math.max(O,z+g.offsetTop+(ue?Y:0)+te)+H;l.style.height=ve+"px",g.scrollTop=ge-O+g.offsetTop}l.style.margin=`${$s}px 0`,l.style.minHeight=J+"px",l.style.maxHeight=E+"px",r==null||r(),requestAnimationFrame(()=>f.current=!0)}},[m,i.trigger,i.valueNode,l,u,g,p,v,i.dir,r]);Nn(()=>w(),[w]);const[S,j]=b.useState();Nn(()=>{u&&j(window.getComputedStyle(u).zIndex)},[u]);const N=b.useCallback(C=>{C&&x.current===!0&&(w(),y==null||y(),x.current=!1)},[w,y]);return s.jsx(TZ,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:f,onScrollButtonChange:N,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:s.jsx(qe.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});P3.displayName=EZ;var kZ="SelectPopperPosition",Sj=b.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=$s,...i}=e,o=Hx(n);return s.jsx(NS,{...o,...i,ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Sj.displayName=kZ;var[TZ,a_]=kd(ql,{}),_j="SelectViewport",E3=b.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...a}=e,i=Ro(_j,n),o=a_(_j,n),l=ft(t,i.onViewportChange),c=b.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),s.jsx(Ux.Slot,{scope:n,children:s.jsx(qe.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Te(a.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&h){const f=Math.abs(c.current-d.scrollTop);if(f>0){const x=window.innerHeight-$s*2,g=parseFloat(h.style.minHeight),p=parseFloat(h.style.height),v=Math.max(g,p);if(v<x){const y=v+f,w=Math.min(x,y),S=y-w;h.style.height=w+"px",h.style.bottom==="0px"&&(d.scrollTop=S>0?S:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});E3.displayName=_j;var k3="SelectGroup",[OZ,DZ]=kd(k3),MZ=b.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Aa();return s.jsx(OZ,{scope:n,id:a,children:s.jsx(qe.div,{role:"group","aria-labelledby":a,...r,ref:t})})});MZ.displayName=k3;var T3="SelectLabel",O3=b.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=DZ(T3,n);return s.jsx(qe.div,{id:a.id,...r,ref:t})});O3.displayName=T3;var Yg="SelectItem",[IZ,D3]=kd(Yg),M3=b.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:i,...o}=e,l=$o(Yg,n),c=Ro(Yg,n),u=l.value===r,[d,h]=b.useState(i??""),[m,f]=b.useState(!1),x=ft(t,y=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,y,r,a)}),g=Aa(),p=b.useRef("touch"),v=()=>{a||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(IZ,{scope:n,value:r,disabled:a,textId:g,isSelected:u,onItemTextChange:b.useCallback(y=>{h(w=>w||((y==null?void 0:y.textContent)??"").trim())},[]),children:s.jsx(Ux.ItemSlot,{scope:n,value:r,disabled:a,textValue:d,children:s.jsx(qe.div,{role:"option","aria-labelledby":g,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:x,onFocus:Te(o.onFocus,()=>f(!0)),onBlur:Te(o.onBlur,()=>f(!1)),onClick:Te(o.onClick,()=>{p.current!=="mouse"&&v()}),onPointerUp:Te(o.onPointerUp,()=>{p.current==="mouse"&&v()}),onPointerDown:Te(o.onPointerDown,y=>{p.current=y.pointerType}),onPointerMove:Te(o.onPointerMove,y=>{var w;p.current=y.pointerType,a?(w=c.onItemLeave)==null||w.call(c):p.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Te(o.onPointerLeave,y=>{var w;y.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:Te(o.onKeyDown,y=>{var S;((S=c.searchRef)==null?void 0:S.current)!==""&&y.key===" "||(wZ.includes(y.key)&&v(),y.key===" "&&y.preventDefault())})})})})});M3.displayName=Yg;var Eh="SelectItemText",I3=b.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,...i}=e,o=$o(Eh,n),l=Ro(Eh,n),c=D3(Eh,n),u=SZ(Eh,n),[d,h]=b.useState(null),m=ft(t,v=>h(v),c.onItemTextChange,v=>{var y;return(y=l.itemTextRefCallback)==null?void 0:y.call(l,v,c.value,c.disabled)}),f=d==null?void 0:d.textContent,x=b.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:f},c.value),[c.disabled,c.value,f]),{onNativeOptionAdd:g,onNativeOptionRemove:p}=u;return Nn(()=>(g(x),()=>p(x)),[g,p,x]),s.jsxs(s.Fragment,{children:[s.jsx(qe.span,{id:c.textId,...i,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Xl.createPortal(i.children,o.valueNode):null]})});I3.displayName=Eh;var $3="SelectItemIndicator",R3=b.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return D3($3,n).isSelected?s.jsx(qe.span,{"aria-hidden":!0,...r,ref:t}):null});R3.displayName=$3;var Cj="SelectScrollUpButton",L3=b.forwardRef((e,t)=>{const n=Ro(Cj,e.__scopeSelect),r=a_(Cj,e.__scopeSelect),[a,i]=b.useState(!1),o=ft(t,r.onScrollButtonChange);return Nn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?s.jsx(z3,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});L3.displayName=Cj;var Aj="SelectScrollDownButton",F3=b.forwardRef((e,t)=>{const n=Ro(Aj,e.__scopeSelect),r=a_(Aj,e.__scopeSelect),[a,i]=b.useState(!1),o=ft(t,r.onScrollButtonChange);return Nn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;i(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?s.jsx(z3,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});F3.displayName=Aj;var z3=b.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=e,i=Ro("SelectScrollButton",n),o=b.useRef(null),l=Wx(n),c=b.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return b.useEffect(()=>()=>c(),[c]),Nn(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),s.jsx(qe.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Te(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Te(a.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Te(a.onPointerLeave,()=>{c()})})}),$Z="SelectSeparator",B3=b.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return s.jsx(qe.div,{"aria-hidden":!0,...r,ref:t})});B3.displayName=$Z;var Pj="SelectArrow",RZ=b.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Hx(n),i=$o(Pj,n),o=Ro(Pj,n);return i.open&&o.position==="popper"?s.jsx(SS,{...a,...r,ref:t}):null});RZ.displayName=Pj;var LZ="SelectBubbleInput",q3=b.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const a=b.useRef(null),i=ft(r,a),o=s_(t);return b.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&d){const h=new Event("change",{bubbles:!0});d.call(l,t),l.dispatchEvent(h)}},[o,t]),s.jsx(qe.select,{...n,style:{...fI,...n.style},ref:i,defaultValue:t})});q3.displayName=LZ;function V3(e){return e===""||e===void 0}function U3(e){const t=Nr(e),n=b.useRef(""),r=b.useRef(0),a=b.useCallback(o=>{const l=n.current+o;t(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=b.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return b.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,i]}function W3(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=FZ(e,Math.max(i,0));a.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function FZ(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var zZ=x3,H3=w3,BZ=j3,qZ=N3,VZ=S3,K3=_3,UZ=E3,G3=O3,Y3=M3,WZ=I3,HZ=R3,Q3=L3,X3=F3,J3=B3;const _e=zZ,Ce=BZ,Ne=b.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(H3,{ref:r,className:Me("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,s.jsx(qZ,{asChild:!0,children:s.jsx($I,{className:"h-4 w-4 opacity-50"})})]}));Ne.displayName=H3.displayName;const Z3=b.forwardRef(({className:e,...t},n)=>s.jsx(Q3,{ref:n,className:Me("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(_U,{className:"h-4 w-4"})}));Z3.displayName=Q3.displayName;const eL=b.forwardRef(({className:e,...t},n)=>s.jsx(X3,{ref:n,className:Me("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx($I,{className:"h-4 w-4"})}));eL.displayName=X3.displayName;const Se=b.forwardRef(({className:e,children:t,position:n="popper",...r},a)=>s.jsx(VZ,{children:s.jsxs(K3,{ref:a,className:Me("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[s.jsx(Z3,{}),s.jsx(UZ,{className:Me("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(eL,{})]})}));Se.displayName=K3.displayName;const KZ=b.forwardRef(({className:e,...t},n)=>s.jsx(G3,{ref:n,className:Me("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));KZ.displayName=G3.displayName;const Q=b.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(Y3,{ref:r,className:Me("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(HZ,{children:s.jsx(iS,{className:"h-4 w-4"})})}),s.jsx(WZ,{children:t})]}));Q.displayName=Y3.displayName;const GZ=b.forwardRef(({className:e,...t},n)=>s.jsx(J3,{ref:n,className:Me("-mx-1 my-1 h-px bg-muted",e),...t}));GZ.displayName=J3.displayName;const YZ=async()=>{const{data:{user:e}}=await fe.auth.getUser();if(!e)throw new Error("User must be authenticated to fetch clients");const{data:t,error:n}=await fe.from("clients").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(n)throw new Error(`Error fetching clients: ${n.message}`);return t||[]},QZ=async e=>{const{data:{user:t}}=await fe.auth.getUser();if(!t)throw new Error("User not authenticated");const{data:n,error:r}=await fe.from("clients").insert({...e,user_id:t.id,city:e.city||"Rabat",country:e.country||"Maroc",client_type:e.client_type||"particulier"}).select().single();if(r)throw new Error(`Error creating client: ${r.message}`);return n},XZ=async(e,t)=>{const{data:n,error:r}=await fe.from("clients").update(t).eq("id",e).select().single();if(r)throw new Error(`Error updating client: ${r.message}`);return n},JZ=async e=>{const{error:t}=await fe.from("clients").delete().eq("id",e);if(t)throw new Error(`Error deleting client: ${t.message}`)},ZZ=async()=>{const{data:{user:e}}=await fe.auth.getUser();if(!e)throw new Error("User must be authenticated to fetch animals");const{data:t,error:n}=await fe.from("animals").select(`
      *,
      client:clients(*)
    `).eq("user_id",e.id).order("created_at",{ascending:!1});if(n)throw new Error(`Error fetching animals: ${n.message}`);return t||[]},eee=async e=>{var o,l,c;const{data:{user:t}}=await fe.auth.getUser();if(!t)throw new Error("User not authenticated");const n={...e};"microchip_number"in n&&!((o=n.microchip_number)!=null&&o.trim())&&delete n.microchip_number,"birth_date"in n&&!((l=n.birth_date)!=null&&l.trim())&&delete n.birth_date,"sterilization_date"in n&&!((c=n.sterilization_date)!=null&&c.trim())&&delete n.sterilization_date;const r=u=>{switch(u){case"healthy":return"vivant";case"urgent":return"dcd";case"treatment":return"perdu";default:return"vivant"}},{data:a,error:i}=await fe.from("animals").insert({...n,user_id:t.id,sterilized:n.sterilized||!1,status:r(n.status)}).select(`
      *,
      client:clients(*)
    `).single();if(i)throw new Error(`Error creating animal: ${i.message}`);return a},tee=async(e,t)=>{var i,o,l;const n={...t};"microchip_number"in n&&!((i=n.microchip_number)!=null&&i.trim())&&(n.microchip_number=null),"birth_date"in n&&!((o=n.birth_date)!=null&&o.trim())&&(n.birth_date=null),"sterilization_date"in n&&!((l=n.sterilization_date)!=null&&l.trim())&&(n.sterilization_date=null);const{data:r,error:a}=await fe.from("animals").update(n).eq("id",e).select(`
      *,
      client:clients(*)
    `).single();if(a)throw new Error(`Error updating animal: ${a.message}`);return r},nee=async e=>{const{error:t}=await fe.from("animals").delete().eq("id",e);if(t)throw new Error(`Error deleting animal: ${t.message}`)},ree=async()=>{const{data:{user:e}}=await fe.auth.getUser();if(!e)throw new Error("User must be authenticated to fetch vaccinations");const{data:t,error:n}=await fe.from("animals").select("id").eq("user_id",e.id);if(n)throw new Error(`Error fetching user animals: ${n.message}`);const r=(t==null?void 0:t.map(o=>o.id))||[];if(r.length===0)return[];const{data:a,error:i}=await fe.from("vaccinations").select(`
      *,
      animal:animals(*)
    `).in("animal_id",r).order("vaccination_date",{ascending:!1});if(i)throw new Error(`Error fetching vaccinations: ${i.message}`);return a||[]},see=async e=>{const{data:{user:t}}=await fe.auth.getUser();if(!t)throw new Error("User not authenticated");let n=e.administered_by;if(!n||n.trim()===""){const{data:i}=await fe.from("user_profiles").select("id").eq("id",t.id).single();n=i?t.id:null}const{data:r,error:a}=await fe.from("vaccinations").insert({...e,administered_by:n}).select(`
      *,
      animal:animals(*)
    `).single();if(a)throw new Error(`Error creating vaccination: ${a.message}`);return r},aee=async(e,t)=>{const{data:n,error:r}=await fe.from("vaccinations").update(t).eq("id",e).select(`
      *,
      animal:animals(*)
    `).single();if(r)throw new Error(`Error updating vaccination: ${r.message}`);return n},iee=async e=>{const{error:t}=await fe.from("vaccinations").delete().eq("id",e);if(t)throw new Error(`Error deleting vaccination: ${t.message}`)},oee=async()=>{const{data:e,error:t}=await fe.from("vaccination_protocols").select("*").order("species",{ascending:!0}).order("vaccine_name",{ascending:!0});if(t)throw new Error(`Error fetching vaccination protocols: ${t.message}`);return e||[]},lee=async e=>{const{data:t,error:n}=await fe.from("vaccination_protocols").insert(e).select().single();if(n)throw new Error(`Error creating vaccination protocol: ${n.message}`);return t},cee=async(e,t)=>{const{data:n,error:r}=await fe.from("vaccination_protocols").update(t).eq("id",e).select().single();if(r)throw new Error(`Error updating vaccination protocol: ${r.message}`);return n},uee=async()=>{const{data:e,error:t}=await fe.from("antiparasitics").select(`
      *,
      animal:animals(*)
    `).order("treatment_date",{ascending:!1});if(t)throw new Error(`Error fetching antiparasitics: ${t.message}`);return e||[]},dee=async e=>{const{data:{user:t}}=await fe.auth.getUser();if(!t)throw new Error("User must be authenticated to create antiparasitic");const n={...e};if(n.effectiveness_rating!==void 0){const i=n.effectiveness_rating;(typeof i!="number"||i<1||i>5||isNaN(i))&&(console.warn("Invalid effectiveness_rating detected, removing from data:",i),delete n.effectiveness_rating)}if(console.log("Final antiparasitic data being sent to database:",n),n.administered_by){const{data:i}=await fe.from("user_profiles").select("id").eq("id",n.administered_by).single();i||(console.warn("administered_by user not found, removing field"),delete n.administered_by)}const{data:r,error:a}=await fe.from("antiparasitics").insert([n]).select(`
      *,
      animal:animals(*)
    `).single();if(a)throw console.error("Database error details:",{code:a.code,message:a.message,details:a.details,hint:a.hint,data:n}),new Error(`Error creating antiparasitic: ${a.message} (Code: ${a.code})`);return r},hee=async e=>{const{error:t}=await fe.from("antiparasitics").delete().eq("id",e);if(t)throw new Error(`Error deleting antiparasitic: ${t.message}`)},fee=async()=>{const{data:{user:e}}=await fe.auth.getUser();if(!e)throw new Error("User must be authenticated to fetch antiparasitic protocols");const{data:t,error:n}=await fe.from("antiparasitic_protocols").select("*").eq("user_id",e.id).order("species",{ascending:!0});if(n)throw new Error(`Error fetching antiparasitic protocols: ${n.message}`);return t||[]},mee=async e=>{const{data:{user:t}}=await fe.auth.getUser();if(!t)throw new Error("User must be authenticated to fetch antiparasitic protocols");const{data:n,error:r}=await fe.from("antiparasitic_protocols").select("*").eq("user_id",t.id).eq("species",e).eq("active",!0).order("parasite_type",{ascending:!0});if(r)throw new Error(`Error fetching antiparasitic protocols for species: ${r.message}`);return n||[]},pee=async e=>{const{data:{user:t}}=await fe.auth.getUser();if(!t)throw new Error("User must be authenticated to create antiparasitic protocol");const n={...e,user_id:t.id},{data:r,error:a}=await fe.from("antiparasitic_protocols").insert([n]).select("*").single();if(a)throw new Error(`Error creating antiparasitic protocol: ${a.message}`);return r},gee=async(e,t)=>{const{data:{user:n}}=await fe.auth.getUser();if(!n)throw new Error("User must be authenticated to update antiparasitic protocol");const{data:r,error:a}=await fe.from("antiparasitic_protocols").update(t).eq("id",e).select("*").single();if(a)throw new Error(`Error updating antiparasitic protocol: ${a.message}`);return r},vee=async()=>{const{data:{user:e}}=await fe.auth.getUser();if(!e)throw new Error("User must be authenticated to fetch appointments");const{data:t,error:n}=await fe.from("clients").select("id").eq("user_id",e.id);if(n)throw new Error(`Error fetching user clients: ${n.message}`);const r=(t==null?void 0:t.map(o=>o.id))||[];if(r.length===0)return[];const{data:a,error:i}=await fe.from("appointments").select(`
      *,
      client:clients(*),
      animal:animals(*)
    `).in("client_id",r).order("appointment_date",{ascending:!0});if(i)throw new Error(`Error fetching appointments: ${i.message}`);return a||[]},xee=async e=>{const{data:{user:t}}=await fe.auth.getUser();if(!t)throw new Error("User not authenticated");const{data:n,error:r}=await fe.from("appointments").insert({...e,veterinarian_id:e.veterinarian_id||t.id,duration_minutes:e.duration_minutes||30}).select(`
      *,
      client:clients(*),
      animal:animals(*)
    `).single();if(r)throw new Error(`Error creating appointment: ${r.message}`);return n},yee=async(e,t)=>{const{data:n,error:r}=await fe.from("appointments").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select(`
      *,
      client:clients(*),
      animal:animals(*)
    `).single();if(r)throw new Error(`Error updating appointment: ${r.message}`);return n},wee=async e=>{const{error:t}=await fe.from("appointments").delete().eq("id",e);if(t)throw new Error(`Error deleting appointment: ${t.message}`)},bee=async()=>{const{data:{user:e}}=await fe.auth.getUser();if(!e)throw new Error("User must be authenticated to fetch farms");const{data:t,error:n}=await fe.from("farms").select(`
      *,
      clients!inner(
        id,
        first_name,
        last_name,
        user_id
      )
    `).eq("clients.user_id",e.id).order("farm_name",{ascending:!0});if(n)throw new Error(`Error fetching farms: ${n.message}`);return t||[]},jee=async e=>{const{data:{user:t}}=await fe.auth.getUser();if(!t)throw new Error("User must be authenticated to fetch app settings");const{data:n,error:r}=await fe.from("app_settings").select("*").eq("user_id",t.id).eq("setting_category",e).eq("is_active",!0).order("setting_key",{ascending:!0});if(r)throw new Error(`Error fetching app settings for category: ${r.message}`);return n||[]},za=async(e,t)=>{const{data:{user:n}}=await fe.auth.getUser();if(!n)throw new Error("User must be authenticated to fetch app setting");const{data:r,error:a}=await fe.from("app_settings").select("*").eq("user_id",n.id).eq("setting_category",e).eq("setting_key",t).eq("is_active",!0).single();if(a){if(a.code==="PGRST116")return null;throw new Error(`Error fetching app setting: ${a.message}`)}return r},Kx=async(e,t,n,r)=>{const{data:{user:a}}=await fe.auth.getUser();if(!a)throw new Error("User must be authenticated to create/update app setting");const{data:i,error:o}=await fe.from("app_settings").update({setting_value:n,description:r,updated_at:new Date().toISOString()}).eq("user_id",a.id).eq("setting_category",e).eq("setting_key",t).select().single();if(!o&&i)return i;const{data:l,error:c}=await fe.from("app_settings").insert([{user_id:a.id,setting_category:e,setting_key:t,setting_value:n,description:r,is_active:!0}]).select().single();if(c)throw new Error(`Error creating app setting: ${c.message}`);return l},Nee=async(e,t)=>{const{data:{user:n}}=await fe.auth.getUser();if(!n)throw new Error("User must be authenticated to delete app setting");const{error:r}=await fe.from("app_settings").update({is_active:!1}).eq("user_id",n.id).eq("setting_category",e).eq("setting_key",t);if(r)throw new Error(`Error deleting app setting: ${r.message}`)},See=async()=>{const e=await za("clinic","veterinarians");return(e==null?void 0:e.setting_value)||[]},_ee=async e=>{await Kx("clinic","veterinarians",e,"List of veterinarians")},Cee=async()=>{const e=await za("farm","management_settings");return(e==null?void 0:e.setting_value)||null},Aee=async e=>{await Kx("farm","management_settings",e,"Farm management configuration")},Pee=async()=>{const e=await za("clinic","schedule_settings");return(e==null?void 0:e.setting_value)||null},Eee=async e=>{await Kx("clinic","schedule_settings",e,"Clinic schedule configuration")},Jr={all:["clients"],lists:()=>[...Jr.all,"list"],list:e=>[...Jr.lists(),{filters:e}],details:()=>[...Jr.all,"detail"],detail:e=>[...Jr.details(),e],search:e=>[...Jr.all,"search",e]},or={all:["animals"],lists:()=>[...or.all,"list"],list:e=>[...or.lists(),{filters:e}],details:()=>[...or.all,"detail"],detail:e=>[...or.details(),e],byClient:e=>[...or.all,"client",e],search:e=>[...or.all,"search",e]},lr={all:["appointments"],lists:()=>[...lr.all,"list"],list:e=>[...lr.lists(),{filters:e}],details:()=>[...lr.all,"detail"],detail:e=>[...lr.details(),e],byAnimal:e=>[...lr.all,"animal",e],byClient:e=>[...lr.all,"client",e]},Tc={all:["farms"],lists:()=>[...Tc.all,"list"],list:e=>[...Tc.lists(),{filters:e}],details:()=>[...Tc.all,"detail"],detail:e=>[...Tc.details(),e],byClient:e=>[...Tc.all,"client",e]},tc={all:["stats"],clients:()=>[...tc.all,"clients"]},i_={all:["userProfile"],profile:()=>[...i_.all,"profile"]},vn=()=>Ft({queryKey:Jr.lists(),queryFn:YZ,staleTime:5*60*1e3}),kee=()=>{const e=xt();return jt({mutationFn:QZ,onSuccess:t=>{e.invalidateQueries({queryKey:Jr.lists()}),e.setQueryData(Jr.detail(t.id),t),e.invalidateQueries({queryKey:tc.clients()})}})},Tee=()=>{const e=xt();return jt({mutationFn:({id:t,data:n})=>XZ(t,n),onSuccess:t=>{e.setQueryData(Jr.detail(t.id),t),e.invalidateQueries({queryKey:Jr.lists()})}})},Oee=()=>{const e=xt();return jt({mutationFn:JZ,onSuccess:(t,n)=>{e.removeQueries({queryKey:Jr.detail(n)}),e.invalidateQueries({queryKey:Jr.lists()}),e.invalidateQueries({queryKey:or.byClient(n)}),e.invalidateQueries({queryKey:tc.clients()})}})},fn=()=>Ft({queryKey:or.lists(),queryFn:ZZ,staleTime:5*60*1e3}),Dee=()=>{const e=xt();return jt({mutationFn:eee,onSuccess:t=>{e.invalidateQueries({queryKey:or.lists()}),e.setQueryData(or.detail(t.id),t),e.invalidateQueries({queryKey:or.byClient(t.client_id)}),e.invalidateQueries({queryKey:tc.clients()})}})},Mee=()=>{const e=xt();return jt({mutationFn:({id:t,data:n})=>tee(t,n),onSuccess:t=>{e.setQueryData(or.detail(t.id),t),e.invalidateQueries({queryKey:or.lists()}),e.invalidateQueries({queryKey:or.byClient(t.client_id)})}})},Iee=()=>{const e=xt();return jt({mutationFn:nee,onSuccess:(t,n)=>{e.removeQueries({queryKey:or.detail(n)}),e.invalidateQueries({queryKey:or.lists()}),e.invalidateQueries({queryKey:tc.clients()})}})},Ps=()=>Ft({queryKey:["consultations"],queryFn:async()=>{try{const{data:e,error:t}=await fe.from("consultations").select(`
            id,
            animal_id,
            client_id,
            veterinarian_id,
            consultation_date,
            consultation_type,
            symptoms,
            diagnosis,
            treatment,
            notes,
            weight,
            temperature,
            heart_rate,
            respiratory_rate,
            photos,
            follow_up_date,
            follow_up_notes,
            status,
            created_at,
            updated_at,
            animal:animals(
              id,
              name,
              species,
              breed,
              color,
              sex,
              weight,
              birth_date,
              microchip_number,
              status
            ),
            client:clients(
              id,
              first_name,
              last_name,
              email,
              phone,
              mobile_phone,
              address,
              city,
              client_type
            )
          `).order("consultation_date",{ascending:!1});if(t)throw console.error("Error fetching consultations:",t),t;return(e||[]).map(n=>({...n,followUp:n.follow_up_notes||null,cost:null,animal:Array.isArray(n.animal)?n.animal[0]:n.animal,client:Array.isArray(n.client)?n.client[0]:n.client}))}catch(e){throw console.error("Failed to fetch consultations:",e),e}},staleTime:5*60*1e3,retry:3,retryDelay:e=>Math.min(1e3*2**e,3e4)}),tL=()=>{const e=xt();return jt({mutationFn:async t=>{try{const{data:{user:n}}=await fe.auth.getUser();if(!n)throw new Error("User not authenticated");const r={animal_id:t.animal_id,client_id:t.client_id,veterinarian_id:n.id,consultation_date:t.consultation_date||new Date().toISOString(),consultation_type:t.consultation_type,symptoms:t.symptoms||null,diagnosis:t.diagnosis||null,treatment:t.treatment||null,notes:t.notes||null,weight:t.weight||null,temperature:t.temperature||null,heart_rate:t.heart_rate||null,respiratory_rate:t.respiratory_rate||null,photos:t.photos||null,follow_up_date:t.follow_up_date||null,follow_up_notes:t.follow_up_notes||null,status:t.status||"completed"},{data:a,error:i}=await fe.from("consultations").insert(r).select(`
            id,
            animal_id,
            client_id,
            veterinarian_id,
            consultation_date,
            consultation_type,
            symptoms,
            diagnosis,
            treatment,
            notes,
            weight,
            temperature,
            heart_rate,
            respiratory_rate,
            photos,
            follow_up_date,
            follow_up_notes,
            status,
            created_at,
            updated_at,
            animal:animals(
              id,
              name,
              species,
              breed,
              color,
              sex,
              weight,
              birth_date,
              microchip_number,
              status
            ),
            client:clients(
              id,
              first_name,
              last_name,
              email,
              phone,
              mobile_phone,
              address,
              city,
              client_type
            )
          `).single();if(i)throw console.error("Error creating consultation:",i),i;return{...a,followUp:a.follow_up_notes||null,cost:null}}catch(n){throw console.error("Failed to create consultation:",n),n}},onSuccess:()=>{e.invalidateQueries({queryKey:["consultations"]}),e.invalidateQueries({queryKey:["dashboard-stats"]})}})},nL=()=>{const e=xt();return jt({mutationFn:async({id:t,data:n})=>{const{data:r,error:a}=await fe.from("consultations").update(n).eq("id",t).select(`
          *,
          animal:animals(*),
          client:clients(*)
        `).single();if(a)throw a;return r},onSuccess:()=>{e.invalidateQueries({queryKey:["consultations"]}),e.invalidateQueries({queryKey:["dashboard-stats"]})}})},$ee=()=>{const e=xt();return jt({mutationFn:async t=>{try{const n=[{table:"prescriptions",field:"consultation_id"},{table:"vaccinations",field:"consultation_id"},{table:"lab_results",field:"consultation_id"},{table:"antiparasitics",field:"consultation_id"}];for(const a of n)try{const{data:i,error:o}=await fe.from(a.table).select("id").eq(a.field,t);if(o){console.warn(`Could not check ${a.table}: ${o.message}`);continue}if(i&&i.length>0){if(a.table==="prescriptions")for(const c of i){const{error:u}=await fe.from("prescription_medications").delete().eq("prescription_id",c.id);u&&console.warn(`Could not delete prescription medications: ${u.message}`)}const{error:l}=await fe.from(a.table).delete().eq(a.field,t);l&&console.warn(`Could not delete from ${a.table}: ${l.message}`)}}catch(i){console.warn(`Error handling ${a.table}:`,i)}const{error:r}=await fe.from("consultations").delete().eq("id",t);if(r)throw console.error(`Database error during consultation deletion: ${r.message}`),new Error(`Failed to delete consultation: ${r.message}`);return{success:!0,id:t}}catch(n){throw console.error("Dynamic deletion failed:",n),new Error(`Deletion failed: ${n.message||"Unknown error"}`)}},onSuccess:()=>{e.invalidateQueries({queryKey:["consultations"]}),e.invalidateQueries({queryKey:["prescriptions"]}),e.invalidateQueries({queryKey:["dashboard-stats"]}),e.invalidateQueries({queryKey:["vaccinations"]}),e.invalidateQueries({queryKey:["lab-results"]})},retry:1})},nc=()=>Ft({queryKey:["vaccinations"],queryFn:()=>ree()}),Ree=()=>{const e=xt();return jt({mutationFn:see,onSuccess:()=>{e.invalidateQueries({queryKey:["vaccinations"]}),e.invalidateQueries({queryKey:["animals"]})}})},Lee=()=>{const e=xt();return jt({mutationFn:({id:t,data:n})=>aee(t,n),onSuccess:()=>{e.invalidateQueries({queryKey:["vaccinations"]}),e.invalidateQueries({queryKey:["animals"]})}})},Fee=()=>{const e=xt();return jt({mutationFn:iee,onSuccess:()=>{e.invalidateQueries({queryKey:["vaccinations"]}),e.invalidateQueries({queryKey:["animals"]})}})},zee=()=>Ft({queryKey:["vaccination-protocols"],queryFn:()=>oee()}),Bee=()=>{const e=xt();return jt({mutationFn:lee,onSuccess:()=>{e.invalidateQueries({queryKey:["vaccination-protocols"]})}})},qee=()=>{const e=xt();return jt({mutationFn:({id:t,data:n})=>cee(t,n),onSuccess:()=>{e.invalidateQueries({queryKey:["vaccination-protocols"]})}})},Em=()=>Ft({queryKey:["antiparasitics"],queryFn:uee}),Vee=()=>{const e=xt();return jt({mutationFn:dee,onSuccess:()=>{e.invalidateQueries({queryKey:["antiparasitics"]})}})},Uee=()=>{const e=xt();return jt({mutationFn:hee,onSuccess:()=>{e.invalidateQueries({queryKey:["antiparasitics"]})}})},Wee=()=>Ft({queryKey:["antiparasitic-protocols"],queryFn:fee}),Hee=e=>Ft({queryKey:["antiparasitic-protocols","by-species",e],queryFn:()=>e?mee(e):Promise.resolve([]),enabled:!!e}),Kee=()=>{const e=xt();return jt({mutationFn:pee,onSuccess:()=>{e.invalidateQueries({queryKey:["antiparasitic-protocols"]})}})},Gee=()=>{const e=xt();return jt({mutationFn:({id:t,updates:n})=>gee(t,n),onSuccess:()=>{e.invalidateQueries({queryKey:["antiparasitic-protocols"]})}})},Yee=()=>Ft({queryKey:["client-stats"],queryFn:async()=>{var i,o,l,c;const[e,t]=await Promise.all([fe.from("clients").select("id, status"),fe.from("animals").select("id, status")]);if(e.error||t.error)throw new Error("Failed to fetch client stats");const n=((i=e.data)==null?void 0:i.filter(u=>u.status==="actif").length)||0;(o=e.data)!=null&&o.length;const r=((l=t.data)==null?void 0:l.length)||0,a=((c=t.data)==null?void 0:c.reduce((u,d)=>(u[d.status]=(u[d.status]||0)+1,u),{}))||{};return{totalClients:n,totalAnimals:r,animalsByStatus:a}},staleTime:5*60*1e3}),Gx=()=>Ft({queryKey:["prescriptions"],queryFn:async()=>{try{const{data:e,error:t}=await fe.from("prescriptions").select(`
            id,
            consultation_id,
            animal_id,
            client_id,
            veterinarian_id,
            prescription_date,
            diagnosis,
            notes,
            status,
            refill_count,
            valid_until,
            created_at,
            updated_at,
            animal:animals(
              id,
              name,
              species,
              breed,
              color,
              sex,
              weight,
              birth_date,
              microchip_number,
              status
            ),
            client:clients(
              id,
              first_name,
              last_name,
              email,
              phone,
              mobile_phone,
              address,
              city,
              client_type
            ),
            medications:prescription_medications(
              id,
              prescription_id,
              stock_item_id,
              medication_name,
              dosage,
              frequency,
              duration,
              quantity,
              instructions,
              route,
              created_at
            )
          `).order("prescription_date",{ascending:!1});if(t)throw console.error("Error fetching prescriptions:",t),t;return(e||[]).map(n=>({...n,animal:Array.isArray(n.animal)?n.animal[0]:n.animal,client:Array.isArray(n.client)?n.client[0]:n.client}))}catch(e){throw console.error("Dynamic prescription fetch failed:",e),e}},staleTime:5*60*1e3,retry:3,retryDelay:e=>Math.min(1e3*2**e,3e4)}),Qee=e=>Ft({queryKey:["prescriptions","animal",e],queryFn:async()=>{try{const{data:t,error:n}=await fe.from("prescriptions").select(`
            id,
            consultation_id,
            animal_id,
            client_id,
            veterinarian_id,
            prescription_date,
            diagnosis,
            notes,
            status,
            refill_count,
            valid_until,
            created_at,
            updated_at,
            animal:animals(
              id,
              name,
              species,
              breed,
              color,
              sex,
              weight,
              birth_date,
              microchip_number,
              status
            ),
            client:clients(
              id,
              first_name,
              last_name,
              email,
              phone,
              mobile_phone,
              address,
              city,
              client_type
            ),
            medications:prescription_medications(
              id,
              prescription_id,
              stock_item_id,
              medication_name,
              dosage,
              frequency,
              duration,
              quantity,
              instructions,
              route,
              created_at
            )
          `).eq("animal_id",e).order("prescription_date",{ascending:!1});if(n)throw console.error("Error fetching prescriptions by animal:",n),n;return t||[]}catch(t){throw console.error("Dynamic prescription fetch by animal failed:",t),t}},enabled:!!e,staleTime:5*60*1e3,retry:2}),Xee=()=>{const e=xt();return jt({mutationFn:async t=>{try{const{data:{user:n}}=await fe.auth.getUser();if(!n)throw new Error("User not authenticated");const{medications:r,...a}=t,i={consultation_id:a.consultation_id,animal_id:a.animal_id,client_id:a.client_id,veterinarian_id:a.veterinarian_id||n.id,prescription_date:a.prescription_date||new Date().toISOString(),diagnosis:a.diagnosis||null,notes:a.notes||null,status:a.status||"active",refill_count:a.refill_count||0,valid_until:a.valid_until||null},{data:o,error:l}=await fe.from("prescriptions").insert(i).select(`
            id,
            consultation_id,
            animal_id,
            client_id,
            veterinarian_id,
            prescription_date,
            diagnosis,
            notes,
            status,
            refill_count,
            valid_until,
            created_at,
            updated_at,
            animal:animals(
              id,
              name,
              species,
              breed,
              color,
              sex,
              weight,
              birth_date,
              microchip_number,
              status
            ),
            client:clients(
              id,
              first_name,
              last_name,
              email,
              phone,
              mobile_phone,
              address,
              city,
              client_type
            )
          `).single();if(l)throw console.error("Error creating prescription:",l),new Error(`Error creating prescription: ${l.message}`);if(r&&r.length>0){const c=r.map(h=>({prescription_id:o.id,stock_item_id:h.stock_item_id||null,medication_name:h.medication_name,dosage:h.dosage||null,frequency:h.frequency||null,duration:h.duration||null,quantity:h.quantity||1,instructions:h.instructions||null,route:h.route||null})),{data:u,error:d}=await fe.from("prescription_medications").insert(c).select();if(d)throw console.error("Error creating prescription medications:",d),await fe.from("prescriptions").delete().eq("id",o.id),new Error(`Error creating prescription medications: ${d.message}`)}return{...o,medications:r||[]}}catch(n){throw console.error("Dynamic prescription creation failed:",n),n}},onSuccess:()=>{e.invalidateQueries({queryKey:["prescriptions"]}),e.invalidateQueries({queryKey:["consultations"]}),e.invalidateQueries({queryKey:["dashboard-stats"]}),e.invalidateQueries({queryKey:["stock-items"]})},retry:1})},Yx=()=>Ft({queryKey:["stock-items"],queryFn:async()=>{try{const{data:e,error:t}=await fe.from("stock_items").select(`
            id,
            name,
            description,
            category,
            unit,
            current_quantity,
            minimum_quantity,
            maximum_quantity,
            unit_cost,
            selling_price,
            supplier,
            batch_number,
            expiration_date,
            location,
            requires_prescription,
            active,
            created_at,
            updated_at
          `).eq("active",!0).order("name");if(t)throw console.error("Error fetching stock items:",t),t;return e||[]}catch(e){throw console.error("Dynamic stock items fetch failed:",e),e}},staleTime:5*60*1e3,retry:3,retryDelay:e=>Math.min(1e3*2**e,3e4)}),Jee=()=>Ft({queryKey:i_.profile(),queryFn:Bx,staleTime:5*60*1e3}),Zee=()=>{const e=xt();return jt({mutationFn:t=>FJ(t),onSuccess:t=>{e.setQueryData(i_.profile(),t),e.invalidateQueries({queryKey:["auth","session"]})}})},rc=()=>Ft({queryKey:lr.lists(),queryFn:vee,staleTime:2*60*1e3}),rL=()=>{const e=xt();return jt({mutationFn:xee,onSuccess:t=>{e.invalidateQueries({queryKey:lr.lists()}),t.animal_id&&e.invalidateQueries({queryKey:lr.byAnimal(t.animal_id)}),t.client_id&&(e.invalidateQueries({queryKey:lr.byClient(t.client_id)}),e.invalidateQueries({queryKey:Jr.detail(t.client_id)})),e.invalidateQueries({queryKey:tc.clients()})}})},ete=()=>{const e=xt();return jt({mutationFn:({id:t,data:n})=>yee(t,n),onSuccess:t=>{e.invalidateQueries({queryKey:lr.lists()}),e.setQueryData(lr.lists(),n=>n?n.map(r=>r.id===t.id?t:r):[]),t.animal_id&&e.invalidateQueries({queryKey:lr.byAnimal(t.animal_id)}),t.client_id&&e.invalidateQueries({queryKey:lr.byClient(t.client_id)})}})},tte=()=>{const e=xt();return jt({mutationFn:wee,onSuccess:(t,n)=>{e.setQueryData(lr.lists(),r=>r?r.filter(a=>a.id!==n):[]),e.invalidateQueries({queryKey:lr.lists()}),e.invalidateQueries({queryKey:tc.clients()})}})},sL=()=>Ft({queryKey:Tc.lists(),queryFn:bee,staleTime:5*60*1e3}),En={animal_species:["Chien","Chat","Oiseau","Lapin","Furet","Bovin","Ovin","Caprin","Porc","Cheval","ne","Autre"],animal_breeds:{Chien:["Labrador","Golden Retriever","Berger Allemand","Bulldog","Yorkshire Terrier","Chihuahua","Rottweiler","Poodle","Boxer","Husky"],Chat:["Persan","Siamois","Maine Coon","British Shorthair","Ragdoll","Bengal","Abyssin","Sphinx","Scottish Fold","Chartreux"],Oiseau:["Canari","Perruche","Cockatiel","Insparable","Perroquet","Cacatos","Conure","Calopsitte"],Lapin:["Nain","Blier","Angora","Rex","Gant des Flandres","Hollandais"],Bovin:["Holstein","Montbliarde","Charolaise","Limousine","Blonde d'Aquitaine","Normande"],Ovin:["Lacaune","le-de-France","Texel","Suffolk","Mrinos","Dorper"],Caprin:["Saanen","Alpine","Poitevine","Boer","Angora","Nubienne"],Cheval:["Pur-sang","Arabe","Quarter Horse","Frison","Andalou","Trotteur"]},animal_colors:["Noir","Blanc","Marron","Gris","Roux","Crme","Tachet","Tricolore","Bring","Fauve"],client_types:["Particulier","leveur","Ferme"],consultation_types:["Consultation gnrale","Vaccination","Chirurgie","Urgence","Contrle post-opratoire","Examen de sant","Strilisation","Dentaire","Dermatologie","Cardiologie","Ophtalmologie","Orthopdie"],appointment_types:["Consultation","Vaccination","Chirurgie","Urgence","Contrle","Toilettage","Radiographie","chographie","Analyses"],medication_categories:["Antibiotiques","Anti-inflammatoires","Antiparasitaires","Vaccins","Anesthsiques","Vitamines","Complments","Dermatologie","Cardiologie","Neurologie"],vaccination_types:["CHPPI-L (Chien)","Rage","Toux du chenil","TCL (Chat)","Leucose fline","FIV","Myxomatose (Lapin)","VHD (Lapin)"],parasite_types:["Puces","Tiques","Vers ronds","Vers plats","Giardia","Coccidies","Acariens","Poux"],farm_types:["Bovin laitier","Bovin viande","Porcin","Avicole","Ovin","Caprin","quin","Apiculture","Aquaculture","Cuniculture","Mixte"],payment_methods:["Espces","Carte bancaire","Chque","Virement","Autre"],currencies:["MAD","EUR","USD"],countries:["Maroc","France","Espagne","Algrie","Tunisie"],cities_morocco:["Rabat","Casablanca","Fs","Marrakech","Agadir","Tanger","Mekns","Oujda","Kenitra","Ttouan"]},nte=e=>Ft({queryKey:["app-settings",e],queryFn:()=>jee(e),enabled:!!e}),sc=()=>Ft({queryKey:["app-setting","animals","species"],queryFn:()=>za("animals","species"),select:e=>(e==null?void 0:e.setting_value)||En.animal_species}),rte=e=>Ft({queryKey:["app-setting","animals","breeds"],queryFn:()=>za("animals","breeds"),select:t=>(t==null?void 0:t.setting_value)||En.animal_breeds}),aL=()=>Ft({queryKey:["app-setting","animals","colors"],queryFn:()=>za("animals","colors"),select:e=>(e==null?void 0:e.setting_value)||En.animal_colors}),iL=()=>Ft({queryKey:["app-setting","clients","types"],queryFn:()=>za("clients","types"),select:e=>(e==null?void 0:e.setting_value)||En.client_types}),o_=()=>Ft({queryKey:["app-setting","appointments","types"],queryFn:()=>za("appointments","types"),select:e=>(e==null?void 0:e.setting_value)||En.appointment_types}),oL=()=>Ft({queryKey:["app-setting","vaccinations","types"],queryFn:()=>za("vaccinations","types"),select:e=>(e==null?void 0:e.setting_value)||En.vaccination_types}),lL=()=>Ft({queryKey:["app-setting","parasites","types"],queryFn:()=>za("parasites","types"),select:e=>(e==null?void 0:e.setting_value)||En.parasite_types}),l_=()=>Ft({queryKey:["veterinarian-settings"],queryFn:See}),ste={enabled:!0,farm_types:["Laitire","Viande","Mixte","Avicole","Ovine","Caprine"],animal_categories:["Bovin","Ovin","Caprin","Volaille","quin"],breeds_by_category:{Bovin:["Holstein","Montbliarde","Prim Holstein","Charolaise","Limousine"],Ovin:["Timahdit","Beni Guil","Sardi","D'man"],Caprin:["Dra","Noire de Marrakech","Alpine","Saanen"],Volaille:["Pondeuse","Chair","Locale","Pintade"],quin:["Arabe","Barbe","Trait","Pur-sang"]},certification_types:["Bio","Label Rouge","Standard","AOC","IGP"],equipment_types:["Traite","Alimentation","Vtrinaire","Stockage"],default_surface_unit:"hectare",default_coordinate_format:"GPS"},ate={opening_time:"08:00",closing_time:"18:00",slot_duration:30,lunch_break_start:"12:00",lunch_break_end:"14:00",working_days:["monday","tuesday","wednesday","thursday","friday","saturday"],appointment_duration:30,buffer_time:10,max_appointments_per_day:20},km=()=>Ft({queryKey:["farm-management-settings"],queryFn:Cee,select:e=>e||ste}),ite=()=>Ft({queryKey:["schedule-settings"],queryFn:Pee,select:e=>e||ate}),cL=()=>{const e=xt();return jt({mutationFn:async({category:t,key:n,value:r,description:a})=>Kx(t,n,r,a),onSuccess:(t,n)=>{e.invalidateQueries({queryKey:["app-setting",n.category,n.key]}),e.invalidateQueries({queryKey:["app-settings",n.category]}),e.invalidateQueries({queryKey:["app-settings"]})}})},ote=()=>{const e=xt();return jt({mutationFn:({category:t,key:n})=>Nee(t,n),onSuccess:()=>{e.invalidateQueries({queryKey:["app-settings"]})}})},lte=()=>{const e=xt();return jt({mutationFn:_ee,onSuccess:()=>{e.invalidateQueries({queryKey:["veterinarian-settings"]})}})},cte=()=>{const e=xt();return jt({mutationFn:Aee,onSuccess:()=>{e.invalidateQueries({queryKey:["farm-management-settings"]})}})},ute=()=>{const e=xt();return jt({mutationFn:Eee,onSuccess:()=>{e.invalidateQueries({queryKey:["schedule-settings"]})}})},dte=()=>{const e=cL();return{initializeDefaults:async()=>{const n=[{category:"animals",key:"species",value:En.animal_species,description:"Types d'espces animales"},{category:"animals",key:"breeds",value:En.animal_breeds,description:"Races par espce"},{category:"animals",key:"colors",value:En.animal_colors,description:"Couleurs des animaux"},{category:"clients",key:"types",value:En.client_types,description:"Types de clients"},{category:"consultations",key:"types",value:En.consultation_types,description:"Types de consultations"},{category:"appointments",key:"types",value:En.appointment_types,description:"Types de rendez-vous"},{category:"medications",key:"categories",value:En.medication_categories,description:"Catgories de mdicaments"},{category:"vaccinations",key:"types",value:En.vaccination_types,description:"Types de vaccinations"},{category:"parasites",key:"types",value:En.parasite_types,description:"Types de parasites"},{category:"farms",key:"types",value:En.farm_types,description:"Types de fermes"},{category:"payments",key:"methods",value:En.payment_methods,description:"Mthodes de paiement"}];for(const r of n)try{await e.mutateAsync(r)}catch(a){console.error(`Failed to initialize setting ${r.category}.${r.key}:`,a)}},isLoading:e.isPending}};function Qx({open:e,onOpenChange:t}){const n=kee(),{toast:r}=it(),{data:a=[],isLoading:i}=iL(),[o,l]=b.useState({first_name:"",last_name:"",email:"",phone:"",mobile_phone:"",address:"",city:"",postal_code:"",country:"Maroc",notes:"",client_type:"particulier"}),c=h=>{const{id:m,value:f}=h.target;l(x=>({...x,[m]:f}))},u=(h,m)=>{let f=m;f={particulier:"particulier",leveur:"eleveur",eleveur:"eleveur",ferme:"ferme",refuge:"particulier",clinique:"particulier",zoo:"particulier"}[m.toLowerCase()]||"particulier",l(x=>({...x,[h]:f}))},d=async h=>{var f,x,g,p,v,y,w,S,j,N;if(h.preventDefault(),!((f=o.first_name)!=null&&f.trim())||!((x=o.last_name)!=null&&x.trim())){r({title:"Champs requis manquants",description:"Veuillez renseigner le prnom et le nom du client.",variant:"destructive"});return}if(!((g=o.phone)!=null&&g.trim())){r({title:"Tlphone requis",description:"Veuillez renseigner un numro de tlphone pour contacter le client.",variant:"destructive"});return}if(o.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)){r({title:"Email invalide",description:"Veuillez saisir une adresse email valide (ex: exemple@email.com).",variant:"destructive"});return}if(o.phone&&!/^[\d\s\-\+\(\)]+$/.test(o.phone)){r({title:"Tlphone invalide",description:"Le numro de tlphone ne doit contenir que des chiffres et symboles (+, -, espaces).",variant:"destructive"});return}if(!["particulier","eleveur","ferme"].includes(o.client_type)){r({title:"Type de client invalide",description:"Le type de client slectionn n'est pas valide. Veuillez slectionner Particulier, leveur ou Ferme.",variant:"destructive"});return}try{await n.mutateAsync(o),r({title:" Client ajout avec succs",description:`${o.first_name} ${o.last_name} a t enregistr dans votre base de donnes.`}),l({first_name:"",last_name:"",email:"",phone:"",mobile_phone:"",address:"",city:"",postal_code:"",country:"Maroc",notes:"",client_type:a.length>0?a[0].toLowerCase():"particulier"}),t(!1)}catch(C){console.error("Client creation error:",C);let _="Une erreur inattendue s'est produite. Veuillez ressayer.";(C==null?void 0:C.code)==="23514"||(p=C==null?void 0:C.message)!=null&&p.includes("client_type_check")?_="Type de client invalide. Seuls Particulier, leveur et Ferme sont accepts. Veuillez contacter le support si le problme persiste.":(v=C==null?void 0:C.message)!=null&&v.includes("duplicate")||(y=C==null?void 0:C.message)!=null&&y.includes("unique")?_="Ce client existe dj dans votre base de donnes. Vrifiez le nom et le tlphone.":(w=C==null?void 0:C.message)!=null&&w.includes("network")||(S=C==null?void 0:C.message)!=null&&S.includes("fetch")?_="Problme de connexion. Vrifiez votre connexion internet et ressayez.":(j=C==null?void 0:C.message)!=null&&j.includes("permission")||(N=C==null?void 0:C.message)!=null&&N.includes("authorized")?_="Vous n'avez pas les permissions ncessaires pour ajouter un client.":C!=null&&C.message&&(_=`Erreur: ${C.message}`),r({title:" Impossible d'ajouter le client",description:_,variant:"destructive"})}};return s.jsx(tt,{open:e,onOpenChange:t,children:s.jsxs(et,{className:"sm:max-w-[500px]",children:[s.jsxs(nt,{children:[s.jsx(rt,{children:"Nouveau Client"}),s.jsx(At,{children:"Ajoutez un nouveau client  votre base de donnes."})]}),s.jsxs("form",{onSubmit:d,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"first_name",children:"Prnom *"}),s.jsx(se,{id:"first_name",value:o.first_name,onChange:c,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"last_name",children:"Nom *"}),s.jsx(se,{id:"last_name",value:o.last_name,onChange:c,required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"email",children:"Email"}),s.jsx(se,{id:"email",type:"email",value:o.email||"",onChange:c})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"phone",children:"Tlphone *"}),s.jsx(se,{id:"phone",value:o.phone||"",onChange:c,required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"address",children:"Adresse"}),s.jsx(se,{id:"address",value:o.address||"",onChange:c})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"city",children:"Ville"}),s.jsx(se,{id:"city",value:o.city||"",onChange:c})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"postal_code",children:"Code postal"}),s.jsx(se,{id:"postal_code",value:o.postal_code||"",onChange:c})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"mobile_phone",children:"Tlphone portable"}),s.jsx(se,{id:"mobile_phone",value:o.mobile_phone||"",onChange:c,placeholder:"Numro de tlphone portable"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"client_type",children:"Type de client *"}),i?s.jsxs("div",{className:"flex items-center gap-2 p-2 text-sm text-muted-foreground",children:[s.jsx(on,{className:"h-4 w-4 animate-spin"}),"Chargement des types..."]}):a.length===0?s.jsx("div",{className:"space-y-2",children:s.jsxs("div",{className:"p-3 border border-orange-200 bg-orange-50 rounded-md",children:[s.jsx("p",{className:"text-sm text-orange-800 font-medium",children:" Aucun type de client configur"}),s.jsx("p",{className:"text-xs text-orange-700 mt-1",children:"Veuillez d'abord crer des types de clients dans les paramtres."}),s.jsx(gs,{to:"/settings",className:"inline-flex items-center gap-1 text-xs text-orange-600 hover:text-orange-800 mt-2 font-medium",onClick:()=>t(!1),children:" Aller aux Paramtres"})]})}):s.jsxs(_e,{value:o.client_type,onValueChange:h=>u("client_type",h),children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Slectionner le type"})}),s.jsx(Se,{children:a.map(h=>{const m=h.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"");return s.jsx(Q,{value:m,children:h},h)})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"notes",children:"Notes"}),s.jsx(Ke,{id:"notes",value:o.notes||"",onChange:c,placeholder:"Notes additionnelles..."})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx($,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsxs($,{type:"submit",disabled:n.isPending,children:[n.isPending&&s.jsx(on,{className:"mr-2 h-4 w-4 animate-spin"}),"Ajouter Client"]})]})]})]})})}function hte({open:e,onOpenChange:t,prefillClientId:n,prefillPetId:r,prefillType:a,prefillReason:i}){const{data:o=[]}=vn(),{data:l=[]}=fn(),c=rL(),{toast:u}=it(),{data:d=[],isLoading:h}=o_(),[m,f]=b.useState({clientId:n||"",animalId:r||"",date:"",time:"",appointmentType:a||"consultation",notes:i||""}),[x,g]=b.useState([]);b.useEffect(()=>{if(n&&e){const N=l.filter(C=>C.client_id===n);g(N)}},[n,e,l]);const p=async N=>{if(N.preventDefault(),!m.clientId){u({title:"Client manquant",description:"Veuillez slectionner le propritaire de l'animal.",variant:"destructive"});return}if(!m.animalId){u({title:"Animal manquant",description:"Veuillez slectionner l'animal pour ce rendez-vous.",variant:"destructive"});return}if(!m.date){u({title:"Date manquante",description:"Veuillez choisir une date pour le rendez-vous.",variant:"destructive"});return}if(!m.time){u({title:"Heure manquante",description:"Veuillez choisir une heure pour le rendez-vous.",variant:"destructive"});return}const C=new Date(`${m.date}T${m.time}:00`);if(C<new Date){u({title:"Date invalide",description:"Vous ne pouvez pas crer un rendez-vous dans le pass. Veuillez choisir une date future.",variant:"destructive"});return}try{await c.mutateAsync({client_id:m.clientId,animal_id:m.animalId,appointment_date:C.toISOString(),appointment_type:m.appointmentType,notes:m.notes||void 0,duration_minutes:30}),u({title:" Rendez-vous cr",description:`Le rendez-vous a t enregistr pour le ${new Date(C).toLocaleDateString("fr-FR")}  ${m.time}.`}),f({clientId:"",animalId:"",date:"",time:"",appointmentType:"consultation",notes:""}),g([]),t(!1)}catch(A){console.error("Error creating appointment:",A);let P="Une erreur inattendue s'est produite. Veuillez ressayer.";if(A!=null&&A.message){const T=A.message.toLowerCase();T.includes("duplicate")||T.includes("conflict")?P="Un rendez-vous existe dj  cette date et heure. Veuillez choisir un autre crneau.":T.includes("client")||T.includes("animal")?P="Le client ou l'animal slectionn n'est pas valide. Veuillez rafrachir la page.":T.includes("network")||T.includes("fetch")?P="Problme de connexion. Vrifiez votre connexion internet et ressayez.":T.includes("permission")||T.includes("authorized")?P="Vous n'avez pas les permissions ncessaires pour crer un rendez-vous.":A.message.length<100&&(P=A.message)}u({title:" Impossible de crer le rendez-vous",description:P,variant:"destructive"})}},v=N=>{f(_=>({..._,clientId:N,animalId:""}));const C=l.filter(_=>_.client_id===N);g(C)},y=N=>`${N.first_name} ${N.last_name}`,w=N=>`${N.name} (${N.species})`,S=()=>new Date().toISOString().split("T")[0],j=()=>{const N=new Date;return N.setHours(N.getHours()+1,0,0,0),N.toTimeString().slice(0,5)};return s.jsx(tt,{open:e,onOpenChange:t,children:s.jsxs(et,{className:"sm:max-w-[500px] max-h-[90vh] overflow-y-auto",children:[s.jsxs(nt,{children:[s.jsxs(rt,{className:"flex items-center gap-2",children:[s.jsx(Ze,{className:"h-5 w-5"}),"Nouveau Rendez-vous"]}),s.jsx(At,{children:"Planifiez un nouveau rendez-vous pour un animal"})]}),s.jsxs("form",{onSubmit:p,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(M,{htmlFor:"client",className:"flex items-center gap-2",children:[s.jsx(Kn,{className:"h-4 w-4"}),"Client *"]}),s.jsxs(_e,{value:m.clientId,onValueChange:v,required:!0,children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Slectionner un client"})}),s.jsx(Se,{children:o.map(N=>s.jsx(Q,{value:N.id,children:y(N)},N.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(M,{htmlFor:"animal",className:"flex items-center gap-2",children:[s.jsx(gt,{className:"h-4 w-4"}),"Animal *"]}),s.jsxs(_e,{value:m.animalId,onValueChange:N=>f(C=>({...C,animalId:N})),disabled:!m.clientId,required:!0,children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Slectionner un animal"})}),s.jsx(Se,{children:x.map(N=>s.jsx(Q,{value:N.id,children:w(N)},N.id))})]}),!m.clientId&&s.jsx("p",{className:"text-sm text-muted-foreground",children:"Slectionnez d'abord un client"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(M,{htmlFor:"date",className:"flex items-center gap-2",children:[s.jsx(Ze,{className:"h-4 w-4"}),"Date *"]}),s.jsx(se,{id:"date",type:"date",value:m.date||S(),onChange:N=>f(C=>({...C,date:N.target.value})),min:new Date().toISOString().split("T")[0],required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(M,{htmlFor:"time",className:"flex items-center gap-2",children:[s.jsx($t,{className:"h-4 w-4"}),"Heure *"]}),s.jsx(se,{id:"time",type:"time",value:m.time||j(),onChange:N=>f(C=>({...C,time:N.target.value})),required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"appointmentType",children:"Type de rendez-vous"}),s.jsxs(_e,{value:m.appointmentType,onValueChange:N=>f(C=>({...C,appointmentType:N})),children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Type de rendez-vous"})}),s.jsx(Se,{children:d.map(N=>s.jsx(Q,{value:N.toLowerCase().replace(/\s+/g,"-"),children:N},N))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"notes",children:"Notes (optionnel)"}),s.jsx(Ke,{id:"notes",placeholder:"Notes additionnelles sur le rendez-vous...",value:m.notes,onChange:N=>f(C=>({...C,notes:N.target.value})),rows:3})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[s.jsx($,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:c.isPending,children:"Annuler"}),s.jsx($,{type:"submit",disabled:c.isPending,className:"gap-2",children:c.isPending?s.jsxs(s.Fragment,{children:[s.jsx(on,{className:"h-4 w-4 animate-spin"}),"Cration..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ze,{className:"h-4 w-4"}),"Crer le rendez-vous"]})})]})]})]})})}function Xx({open:e,onOpenChange:t}){const{data:n=[]}=vn(),{data:r=[]}=fn(),a=Dee(),{toast:i}=it(),{data:o=[]}=sc(),{data:l={}}=rte(),{data:c=[]}=aL(),[u,d]=b.useState({}),[h,m]=b.useState(!1),[f,x]=b.useState({name:"",type:"",breed:"",gender:"",birthDate:"",weight:"",color:"",ownerId:"",microchip:"",medicalNotes:"",photo:"",status:"vivant",hasPedigree:!1,officialName:"",pedigreeNumber:"",breeder:"",fatherName:"",fatherPedigree:"",fatherBreed:"",fatherTitles:"",motherName:"",motherPedigree:"",motherBreed:"",motherTitles:"",pedigreePhoto:""}),g=f.type&&l[f.type]?l[f.type]:[],p=()=>{const S={};if(f.name.trim()?f.name.trim().length<2?S.name="Le nom doit contenir au moins 2 caractres":f.name.trim().length>50&&(S.name="Le nom ne peut pas dpasser 50 caractres"):S.name="Le nom de l'animal est obligatoire",f.type||(S.type="Le type d'animal est obligatoire"),f.ownerId||(S.ownerId="Le propritaire est obligatoire"),f.weight&&(isNaN(Number(f.weight))||Number(f.weight)<=0)&&(S.weight="Le poids doit tre un nombre positif"),f.weight&&Number(f.weight)>1e3&&(S.weight="Le poids semble anormalement lev (max: 1000kg)"),f.microchip&&f.microchip.trim()){const j=f.microchip.trim();j.length<10?S.microchip="Le numro de puce doit contenir au moins 10 caractres":j.length>15&&(S.microchip="Le numro de puce ne doit pas dpasser 15 caractres"),/^[0-9A-Fa-f]+$/.test(j)||(S.microchip="Le numro de puce ne doit contenir que des chiffres et lettres (A-F)");const N=r.find(C=>C.microchip_number===j);N&&(S.microchip=`Ce numro de puce est dj utilis par ${N.name}`)}if(f.birthDate){const j=new Date(f.birthDate);j>new Date&&(S.birthDate="La date de naissance ne peut pas tre dans le futur");const C=new Date;C.setFullYear(C.getFullYear()-30),j<C&&(S.birthDate="La date de naissance semble trop ancienne")}return S},v=S=>{const{id:j,value:N}=S.target;let C=N;j==="microchip"&&(C=N.replace(/[^0-9A-Fa-f]/g,"").toUpperCase().slice(0,15)),x(_=>({..._,[j]:C})),u[j]&&d(_=>{const A={..._};return delete A[j],A})},y=(S,j)=>{x(N=>({...N,[S]:j})),u[S]&&d(N=>{const C={...N};return delete C[S],C})},w=async S=>{var N,C,_,A;S.preventDefault();const j=p();if(d(j),Object.keys(j).length>0){const P=Object.values(j)[0];i({title:" Formulaire incomplet",description:P||"Veuillez corriger les erreurs dans le formulaire",variant:"destructive"});return}m(!0);try{const P={client_id:f.ownerId,name:f.name.trim(),species:f.type,breed:((N=f.breed)==null?void 0:N.trim())||void 0,color:((C=f.color)==null?void 0:C.trim())||void 0,sex:f.gender==="male"?"Mle":f.gender==="female"?"Femelle":"Inconnu",weight:f.weight?Number(f.weight):void 0,birth_date:f.birthDate||void 0,...f.microchip&&f.microchip.trim()?{microchip_number:f.microchip.trim()}:{},notes:((_=f.medicalNotes)==null?void 0:_.trim())||void 0,photo_url:((A=f.photo)==null?void 0:A.trim())||void 0,status:f.status==="healthy"?"vivant":f.status==="urgent"?"dcd":"perdu"};await a.mutateAsync(P),i({title:" Animal ajout avec succs",description:`${f.name} a t enregistr dans votre base de donnes.`}),x({name:"",type:"",breed:"",gender:"",birthDate:"",weight:"",color:"",ownerId:"",microchip:"",medicalNotes:"",photo:"",status:"vivant",hasPedigree:!1,officialName:"",pedigreeNumber:"",breeder:"",fatherName:"",fatherPedigree:"",fatherBreed:"",fatherTitles:"",motherName:"",motherPedigree:"",motherBreed:"",motherTitles:"",pedigreePhoto:""}),d({}),t(!1)}catch(P){console.error("Error creating animal:",P);let T="Une erreur inattendue s'est produite. Veuillez ressayer.";if(P instanceof Error){const E=P.message.toLowerCase();E.includes("microchip")||E.includes("unique")?(T="Ce numro de puce lectronique est dj utilis par un autre animal. Vrifiez le numro.",d({microchip:T})):E.includes("client")||E.includes("foreign key")?(T="Le propritaire slectionn n'existe pas. Veuillez crer le client d'abord.",d({ownerId:T})):E.includes("name")||E.includes("not null")?T="Le nom de l'animal et son propritaire sont obligatoires.":E.includes("authentication")||E.includes("not authenticated")?T="Votre session a expir. Veuillez vous reconnecter  l'application.":E.includes("network")||E.includes("connection")||E.includes("fetch")?T="Problme de connexion. Vrifiez votre connexion internet et ressayez.":E.includes("permission")||E.includes("access")||E.includes("authorized")?T="Vous n'avez pas les permissions ncessaires pour ajouter un animal.":P.message.includes("Error creating animal:")?T=P.message.replace("Error creating animal:","").trim():P.message.length<100&&(T=P.message)}i({title:" Impossible d'ajouter l'animal",description:T,variant:"destructive"})}finally{m(!1)}};return s.jsx(tt,{open:e,onOpenChange:S=>{t(S),S||(d({}),m(!1))},children:s.jsxs(et,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto",children:[s.jsxs(nt,{children:[s.jsx(rt,{children:"Nouvel Animal"}),s.jsx(At,{children:"Ajoutez un nouvel animal  votre base de donnes."})]}),s.jsxs("form",{onSubmit:w,className:"space-y-4",children:[Object.keys(u).length>0&&s.jsxs(zu,{variant:"destructive",children:[s.jsx(pn,{className:"h-4 w-4"}),s.jsxs(Bu,{children:["Veuillez corriger les erreurs suivantes :",s.jsx("ul",{className:"mt-2 ml-4 list-disc",children:Object.values(u).map((S,j)=>s.jsx("li",{className:"text-sm",children:S},j))})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"name",className:u.name?"text-destructive":"",children:"Nom de l'animal *"}),s.jsx(se,{id:"name",value:f.name,onChange:v,required:!0,className:u.name?"border-destructive focus:border-destructive":""}),u.name&&s.jsx("p",{className:"text-sm text-destructive",children:u.name})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{className:u.type?"text-destructive":"",children:"Type d'animal *"}),s.jsxs(_e,{value:f.type,onValueChange:S=>y("type",S),children:[s.jsx(Ne,{className:u.type?"border-destructive focus:border-destructive":"",children:s.jsx(Ce,{placeholder:"Slectionner le type"})}),s.jsx(Se,{children:o.map(S=>s.jsx(Q,{value:S,children:S},S))})]}),u.type&&s.jsx("p",{className:"text-sm text-destructive",children:u.type})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"breed",children:"Race"}),s.jsxs(_e,{value:f.breed,onValueChange:S=>y("breed",S),children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Slectionner la race"})}),s.jsx(Se,{children:g.length>0?g.map(S=>s.jsx(Q,{value:S,children:S},S)):s.jsx(Q,{value:"not-available",disabled:!0,children:f.type?"Aucune race disponible":"Slectionnez d'abord un type"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Sexe"}),s.jsxs(_e,{value:f.gender,onValueChange:S=>y("gender",S),children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Slectionner le sexe"})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"male",children:"Mle"}),s.jsx(Q,{value:"female",children:"Femelle"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"birthDate",className:u.birthDate?"text-destructive":"",children:"Date de naissance"}),s.jsx(se,{id:"birthDate",type:"date",value:f.birthDate,onChange:v,max:new Date().toISOString().split("T")[0],className:u.birthDate?"border-destructive focus:border-destructive":""}),u.birthDate&&s.jsx("p",{className:"text-sm text-destructive",children:u.birthDate})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"weight",className:u.weight?"text-destructive":"",children:"Poids (kg)"}),s.jsx(se,{id:"weight",value:f.weight,onChange:v,type:"number",step:"0.1",min:"0",max:"1000",placeholder:"Ex: 5.2",className:u.weight?"border-destructive focus:border-destructive":""}),u.weight&&s.jsx("p",{className:"text-sm text-destructive",children:u.weight})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"color",children:"Couleur"}),s.jsxs(_e,{value:f.color,onValueChange:S=>y("color",S),children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Slectionner la couleur"})}),s.jsx(Se,{children:c.map(S=>s.jsx(Q,{value:S,children:S},S))})]})]}),s.jsx("div",{className:"space-y-2"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{className:u.ownerId?"text-destructive":"",children:"Propritaire *"}),n.length===0?s.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:s.jsx("p",{className:"text-yellow-800 text-sm",children:"Aucun client disponible. Veuillez d'abord ajouter un client."})}):s.jsxs(_e,{value:f.ownerId.toString(),onValueChange:S=>y("ownerId",S),children:[s.jsx(Ne,{className:u.ownerId?"border-destructive focus:border-destructive":"",children:s.jsx(Ce,{placeholder:"Slectionner le propritaire"})}),s.jsx(Se,{children:n.map(S=>s.jsxs(Q,{value:S.id.toString(),children:[S.first_name," ",S.last_name," - ",S.email]},S.id))})]}),u.ownerId&&s.jsx("p",{className:"text-sm text-destructive",children:u.ownerId})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"microchip",className:u.microchip?"text-destructive":"",children:"Numro de puce lectronique (optionnel)"}),s.jsxs("div",{className:"relative",children:[s.jsx(se,{id:"microchip",value:f.microchip,onChange:v,className:u.microchip?"border-destructive focus:border-destructive":"",placeholder:"Ex: 250268500123456 (10-15 caractres)"}),f.microchip&&s.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:f.microchip.length>=10&&f.microchip.length<=15?s.jsxs("span",{className:"text-green-600 text-xs font-medium",children:[" ",f.microchip.length,"/15"]}):s.jsxs("span",{className:"text-orange-600 text-xs font-medium",children:[f.microchip.length,"/15"]})})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:f.microchip?`${f.microchip.length<10?`Encore ${10-f.microchip.length} caractres minimum`:f.microchip.length>15?"Trop de caractres":"Format valide "}`:"Format: 10  15 caractres alphanumriques (chiffres et lettres A-F)"}),u.microchip&&s.jsx("p",{className:"text-sm text-destructive",children:u.microchip})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"medicalNotes",children:"Notes mdicales"}),s.jsx(Ke,{id:"medicalNotes",value:f.medicalNotes,onChange:v,placeholder:"Allergies, conditions mdicales, notes importantes..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"tat de sant"}),s.jsxs(_e,{value:f.status,onValueChange:S=>y("status",S),children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Slectionner l'tat de sant"})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"healthy",children:"En bonne sant"}),s.jsx(Q,{value:"treatment",children:"En traitement"}),s.jsx(Q,{value:"urgent",children:"Urgent"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Photo de l'animal"}),s.jsx("input",{type:"file",accept:"image/*",onChange:async S=>{var C;const j=(C=S.target.files)==null?void 0:C[0];if(!j)return;const N=new FileReader;N.onload=()=>x(_=>({..._,photo:N.result})),N.readAsDataURL(j)}}),f.photo&&s.jsx("img",{src:f.photo,alt:"preview",className:"h-24 w-24 object-cover rounded"})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx($,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:h,children:"Annuler"}),s.jsxs($,{type:"submit",disabled:h||Object.keys(u).length>0,children:[h&&s.jsx(on,{className:"h-4 w-4 animate-spin mr-2"}),h?"Ajout en cours...":"Ajouter Animal"]})]})]})]})})}const _p="vetpro-clinicSettings",uL={farmTypes:["Bovin laitier","Bovin viande","Porcin","Avicole","Ovin","Caprin","quin","Apiculture","Aquaculture","Cuniculture","Mixte"],animalCategories:["Bovins laitiers","Bovins  viande","Porcs","Poules pondeuses","Poulets de chair","Ovins","Caprins","Chevaux","Lapins","Abeilles","Poissons"],breedsByCategory:{"Bovins laitiers":["Holstein","Prim'Holstein","Montbliarde","Normande","Simmental"],"Bovins  viande":["Charolaise","Limousine","Blonde d'Aquitaine","Angus","Salers"],Porcs:["Large White","Landrace","Pitrain","Duroc","Hampshire"],"Poules pondeuses":["ISA Brown","Lohmann Brown","Hy-Line","Novogen","Dekalb"],"Poulets de chair":["Cobb 500","Ross 308","Hubbard","Arbor Acres"],Ovins:["Lacaune","Brebis laitire","Ile-de-France","Texel","Suffolk"],Caprins:["Saanen","Alpine","Poitevine","Boer","Angora"],Chevaux:["Pur-sang","Trotteur","Selle franais","Arabe","Quarter Horse"],Lapins:["No-Zlandais","Californien","Fauve de Bourgogne","Gant des Flandres"],Abeilles:["Abeille noire","Buckfast","Carnica","Caucasienne"],Poissons:["Truite arc-en-ciel","Saumon","Carpe","Bar","Daurade"]},certificationTypes:["Agriculture Biologique","Label Rouge","AOC/AOP","IGP","Haute Valeur Environnementale","Bien-tre animal","Global GAP","IFS Food","BRC Food","ufs de France"],equipmentTypes:["Tracteur","Moissonneuse","pandeur","Charrue","Systme de traite","Tank  lait","Systme d'alimentation automatique","Ventilation","Gnrateur","Systme d'irrigation","Matriel de rcolte"],defaultSurfaceUnit:"hectares",defaultCoordinateFormat:"decimal"},dL={clients:"table",pets:"cards",consultations:"table",appointments:"table",prescriptions:"table",farms:"cards",vaccinations:"table",antiparasitics:"table"},hL={openingTime:"08:00",closingTime:"18:00",slotDuration:30,lunchBreakStart:"12:00",lunchBreakEnd:"13:00",workingDays:["monday","tuesday","wednesday","thursday","friday","saturday"]},Ej=[{id:1,name:"Dr. Jean Dupont",isActive:!0},{id:2,name:"Dr. Marie Martin",isActive:!0},{id:3,name:"Pr. Ahmed El Alaoui",isActive:!0}],Cp={clinicName:"",address:"",phone:"",email:"",website:"",footerText:"",logo:"/placeholder.svg",currency:"MAD",species:"",showClinicInfo:!0,showVetsInfo:!0,veterinarians:Ej,farmManagement:uL,displayPreferences:dL,defaultConsultationPrice:150,scheduleSettings:hL},fL=b.createContext(void 0),fte=({children:e})=>{const[t,n]=b.useState(Cp);b.useEffect(()=>{const a=localStorage.getItem(_p);if(a)try{const i=JSON.parse(a),o={...Cp,...i,veterinarians:i.veterinarians&&i.veterinarians.some(l=>l.name==="Dr. Martin"||l.name==="Dr. Dupont")?Ej:i.veterinarians||Ej,farmManagement:{...uL,...i.farmManagement},displayPreferences:{...dL,...i.displayPreferences},scheduleSettings:{...hL,...i.scheduleSettings}};n(o),localStorage.setItem(_p,JSON.stringify(o))}catch(i){console.error("Erreur lors du chargement des paramtres:",i),n(Cp)}else localStorage.setItem(_p,JSON.stringify(Cp))},[]);const r=a=>{n(a),localStorage.setItem(_p,JSON.stringify(a))};return s.jsx(fL.Provider,{value:{settings:t,updateSettings:r},children:e})};//!/ note: AD - not important
const Zt=()=>{const e=b.useContext(fL);if(!e)throw new Error("useSettings must be used within SettingsProvider");return e};function Jx({open:e,onOpenChange:t,prefillData:n}){var S,j;const{data:r=[],isLoading:a}=vn(),{data:i=[],isLoading:o}=fn(),l=tL(),{toast:c}=it();Zt();const[u,d]=b.useState(!1),[h,m]=b.useState(!1),[f,x]=b.useState({clientId:(n==null?void 0:n.clientId)||"",clientName:"",animalId:(n==null?void 0:n.animalId)||"",animalName:"",date:n!=null&&n.consultation_date?new Date(n.consultation_date).toISOString().split("T")[0]:"",weight:((S=n==null?void 0:n.weight)==null?void 0:S.toString())||"",temperature:((j=n==null?void 0:n.temperature)==null?void 0:j.toString())||"",symptoms:(n==null?void 0:n.symptoms)||"",diagnosis:(n==null?void 0:n.diagnosis)||"",treatment:(n==null?void 0:n.treatment)||"",followUp:(n==null?void 0:n.follow_up_notes)||"",notes:(n==null?void 0:n.notes)||"",photos:(n==null?void 0:n.photos)||[]}),g=i.filter(N=>N.client_id===f.clientId),p=new Date().toISOString().split("T")[0],v=N=>{x(C=>({...C,[N.target.id]:N.target.value}))},y=(N,C)=>{if(N==="clientId"){const _=r.find(A=>A.id===C);x(A=>({...A,clientId:C,clientName:_?`${_.first_name} ${_.last_name}`:"",animalId:"",animalName:""}))}else if(N==="animalId"){const _=i.find(A=>A.id===C);x(A=>({...A,animalId:C,animalName:(_==null?void 0:_.name)||""}))}else x(_=>({..._,[N]:C}))},w=async N=>{N.preventDefault();const C=[];if(f.clientId||C.push("Veuillez slectionner un client"),f.animalId||C.push("Veuillez slectionner un animal"),!f.date)C.push("Veuillez slectionner une date de consultation");else{const _=new Date(f.date),A=new Date;A.setFullYear(A.getFullYear()+1),_>A&&C.push("La date de consultation ne peut pas tre plus d'un an dans le futur")}if(f.weight){const _=parseFloat(f.weight);(isNaN(_)||_<=0||_>999.9)&&C.push("Le poids doit tre un nombre valide entre 0.1 et 999.9 kg")}if(f.temperature){const _=parseFloat(f.temperature);(isNaN(_)||_<30||_>50)&&C.push("La temprature doit tre un nombre valide entre 30C et 50C")}if(f.symptoms&&f.symptoms.length>1e3&&C.push("Les symptmes ne peuvent pas dpasser 1000 caractres"),f.diagnosis&&f.diagnosis.length>1e3&&C.push("Le diagnostic ne peut pas dpasser 1000 caractres"),f.treatment&&f.treatment.length>1e3&&C.push("Le traitement ne peut pas dpasser 1000 caractres"),f.notes&&f.notes.length>2e3&&C.push("Les notes ne peuvent pas dpasser 2000 caractres"),f.followUp&&f.followUp.length>500&&C.push("Les notes de suivi ne peuvent pas dpasser 500 caractres"),C.length>0){c({title:" Formulaire incomplet",description:C[0],variant:"destructive"});return}try{const _={client_id:f.clientId,animal_id:f.animalId,consultation_type:"routine",consultation_date:f.date||p,weight:f.weight?Math.min(parseFloat(f.weight),999.9):void 0,temperature:f.temperature?Math.min(parseFloat(f.temperature),99.9):void 0,symptoms:f.symptoms.trim()||void 0,diagnosis:f.diagnosis.trim()||void 0,treatment:f.treatment.trim()||void 0,follow_up_notes:f.followUp.trim()||void 0,notes:f.notes.trim()||void 0};await l.mutateAsync(_),c({title:" Consultation enregistre",description:`La consultation pour ${f.animalName} a t sauvegarde avec succs.`}),x({clientId:"",clientName:"",animalId:"",animalName:"",date:p,weight:"",temperature:"",symptoms:"",diagnosis:"",treatment:"",followUp:"",notes:"",photos:[]}),t(!1)}catch(_){console.error("Error creating consultation:",_);let A="Une erreur inattendue s'est produite. Veuillez ressayer.";if(_!=null&&_.message){const P=_.message.toLowerCase();P.includes("foreign key")||P.includes("constraint")?A="Le client ou l'animal slectionn n'existe plus. Veuillez actualiser la page.":P.includes("network")||P.includes("fetch")||P.includes("connection")?A="Problme de connexion. Vrifiez votre connexion internet et ressayez.":P.includes("permission")||P.includes("unauthorized")||P.includes("authorized")?A="Vous n'avez pas les permissions ncessaires pour crer une consultation.":P.includes("duplicate")||P.includes("already exists")?A="Une consultation similaire existe dj pour cette date et cet animal.":P.includes("authentication")?A="Votre session a expir. Veuillez vous reconnecter.":_.message.length<100&&(A=_.message)}c({title:" Impossible d'enregistrer la consultation",description:A,variant:"destructive"})}};return b.useEffect(()=>{e&&x({clientId:"",clientName:"",animalId:"",animalName:"",date:p,weight:"",temperature:"",symptoms:"",diagnosis:"",treatment:"",followUp:"",notes:"",photos:[]})},[e,p]),s.jsxs(s.Fragment,{children:[s.jsx(tt,{open:e,onOpenChange:t,children:s.jsxs(et,{className:"sm:max-w-[700px] max-h-[80vh] overflow-y-auto",children:[s.jsxs(nt,{children:[s.jsx(rt,{children:"Nouvelle Consultation"}),s.jsx(At,{children:"Enregistrez une nouvelle consultation vtrinaire."})]}),s.jsxs("form",{onSubmit:w,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Client *"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(_e,{value:f.clientId.toString(),onValueChange:N=>y("clientId",N),disabled:a,children:[s.jsx(Ne,{className:"flex-1",children:s.jsx(Ce,{placeholder:a?"Chargement des clients...":"Slectionner le client"})}),s.jsx(Se,{children:r.length===0&&!a?s.jsx(Q,{value:"",disabled:!0,children:"Aucun client disponible"}):r.map(N=>s.jsxs(Q,{value:N.id,children:[N.first_name," ",N.last_name]},N.id))})]}),s.jsx($,{type:"button",size:"sm",variant:"outline",onClick:()=>d(!0),className:"px-2",disabled:a,children:s.jsx(Ye,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Animal *"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(_e,{value:f.animalId,onValueChange:N=>y("animalId",N),disabled:!f.clientId||o,children:[s.jsx(Ne,{className:"flex-1",children:s.jsx(Ce,{placeholder:f.clientId?o?"Chargement des animaux...":g.length===0?"Aucun animal pour ce client":"Slectionner l'animal":"Slectionnez d'abord un client"})}),s.jsx(Se,{children:g.length===0&&f.clientId&&!o?s.jsx(Q,{value:"",disabled:!0,children:"Aucun animal pour ce client"}):g.map(N=>s.jsxs(Q,{value:N.id,children:[N.name," (",N.species,")"]},N.id))})]}),s.jsx($,{type:"button",size:"sm",variant:"outline",onClick:()=>m(!0),className:"px-2",disabled:!f.clientId||o,children:s.jsx(Ye,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"date",children:"Date *"}),s.jsx(se,{id:"date",type:"date",value:f.date||p,onChange:v,required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"weight",children:"Poids (kg)"}),s.jsx(se,{id:"weight",type:"number",step:"0.1",min:"0.1",max:"999.9",value:f.weight,onChange:v,placeholder:"ex: 25.5",title:"Poids en kilogrammes (0.1  999.9 kg)"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"temperature",children:"Temprature (C)"}),s.jsx(se,{id:"temperature",type:"number",step:"0.1",min:"30",max:"50",value:f.temperature,onChange:v,placeholder:"ex: 38.5",title:"Temprature corporelle (30C  50C)"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"symptoms",children:"Symptmes observs"}),s.jsx(Ke,{id:"symptoms",value:f.symptoms,onChange:v,placeholder:"Symptmes observs, comportement anormal...",rows:3,maxLength:1e3,title:"Maximum 1000 caractres"}),s.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[f.symptoms.length,"/1000 caractres"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"diagnosis",children:"Diagnostic"}),s.jsx(Ke,{id:"diagnosis",value:f.diagnosis,onChange:v,placeholder:"Diagnostic tabli...",rows:3,maxLength:1e3,title:"Maximum 1000 caractres"}),s.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[f.diagnosis.length,"/1000 caractres"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"treatment",children:"Traitement administr"}),s.jsx(Ke,{id:"treatment",value:f.treatment,onChange:v,placeholder:"Traitements, injections, interventions...",rows:3,maxLength:1e3,title:"Maximum 1000 caractres"}),s.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[f.treatment.length,"/1000 caractres"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"followUp",children:"Suivi recommand"}),s.jsx(se,{id:"followUp",value:f.followUp,onChange:v,placeholder:"ex: Contrle dans 1 semaine",maxLength:500,title:"Maximum 500 caractres"}),s.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[f.followUp.length,"/500 caractres"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"notes",children:"Notes additionnelles"}),s.jsx(Ke,{id:"notes",value:f.notes,onChange:v,placeholder:"Notes diverses, recommandations...",rows:3,maxLength:2e3,title:"Maximum 2000 caractres"}),s.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[f.notes.length,"/2000 caractres"]})]}),s.jsxs("div",{className:"space-y-2 col-span-2",children:[s.jsx(M,{children:"Photos de la consultation"}),s.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:async N=>{const C=Array.from(N.target.files||[]),_=await Promise.all(C.map(A=>new Promise((P,T)=>{const E=new FileReader;E.onload=()=>P(E.result),E.onerror=()=>T(),E.readAsDataURL(A)})));x(A=>({...A,photos:[...A.photos,..._]}))},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary file:text-primary-foreground hover:file:bg-primary/90"}),f.photos.length>0&&s.jsx("div",{className:"flex gap-2 overflow-x-auto pt-2",children:f.photos.map((N,C)=>s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:N,alt:`photo-${C}`,className:"h-24 w-24 object-cover rounded"}),s.jsx("button",{type:"button",onClick:()=>x(_=>({..._,photos:_.photos.filter((A,P)=>P!==C)})),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600",children:""})]},C))})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx($,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:l.isPending,children:"Annuler"}),s.jsx($,{type:"submit",disabled:!f.clientId||!f.animalId||l.isPending||a||o,children:l.isPending?"Enregistrement...":"Enregistrer Consultation"})]})]})]})}),s.jsx(Qx,{open:u,onOpenChange:d}),s.jsx(Xx,{open:h,onOpenChange:m})]})}const mte=({children:e,allowedRoles:t,fallback:n=null})=>{const{user:r}=Sn();return!r||!t.includes(r.profile.role)?s.jsx(s.Fragment,{children:n}):s.jsx(s.Fragment,{children:e})},kj=({children:e,fallback:t=null})=>s.jsx(mte,{allowedRoles:["admin"],fallback:t,children:e});function pte(){const{data:e=[]}=vn(),{data:t=[]}=fn(),{data:n=[]}=Ps(),{data:r=[]}=nc(),{data:a=[]}=Em(),{settings:i}=Zt(),o=JSON.parse(localStorage.getItem("vetpro-veterinarians")||"[]"),l=o.length===1?`Bienvenue ${o[0].title} ${o[0].name}`:`Bienvenue  ${i.clinicName}`,[c,u]=b.useState(!1),[d,h]=b.useState(!1),[m,f]=b.useState(!1),[x,g]=b.useState(!1),p=e.length,v=t.length,y=r.length,w=a.length,S=new Date().toISOString().split("T")[0],j=n.filter(C=>C.consultation_date.split("T")[0]===S).length,N={totalRevenue:0,totalExpenses:0,netIncome:0,revenueBreakdown:{consultations:0,vaccinations:0,antiparasitics:0,prescriptions:0,manualEntries:0},expenseBreakdown:{stockPurchases:0,salaries:0,rent:0,taxes:0,other:0}};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"relative overflow-hidden gradient-hero rounded-2xl p-4 md:p-8 mb-8",children:s.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center gap-6 md:gap-8",children:[s.jsxs("div",{className:"flex-1 space-y-4 md:space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(gt,{className:"h-6 w-6 md:h-8 md:w-8 text-primary"}),s.jsx("span",{className:"text-xs md:text-sm font-medium text-primary",children:"Gestion Vtrinaire Complte"})]}),s.jsxs("h1",{className:"text-2xl md:text-4xl font-bold leading-tight max-w-3xl",children:[l,", ",s.jsx("span",{className:"gradient-primary bg-clip-text text-transparent block",children:"Dashboard VetPro"})]}),s.jsx("p",{className:"text-base md:text-lg text-muted-foreground max-w-3xl",children:"Grez efficacement vos clients, leurs animaux, les rendez-vous et consultations. Votre pratique vtrinaire optimise en un seul endroit."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 md:gap-4 pt-4",children:[s.jsxs($,{size:"lg",className:"gap-2 medical-glow w-full sm:w-auto",onClick:()=>u(!0),children:[s.jsx(Ra,{className:"h-5 w-5"}),"Nouveau Client",s.jsx(Db,{className:"h-4 w-4"})]}),s.jsxs($,{variant:"outline",size:"lg",className:"gap-2 w-full sm:w-auto",onClick:()=>f(!0),children:[s.jsx(gt,{className:"h-5 w-5"}),"Nouvel Animal"]}),s.jsxs($,{variant:"outline",size:"lg",className:"gap-2 w-full sm:w-auto",onClick:()=>h(!0),children:[s.jsx(Ze,{className:"h-5 w-5"}),"Planifier RDV"]}),s.jsxs($,{variant:"outline",size:"lg",className:"gap-2 w-full sm:w-auto",onClick:()=>g(!0),children:[s.jsx(Wn,{className:"h-5 w-5"}),"Nouvelle Consultation"]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 md:gap-6 pt-6 md:pt-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl md:text-2xl font-bold text-primary",children:p}),s.jsx("div",{className:"text-xs md:text-sm text-muted-foreground",children:"Clients actifs"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl md:text-2xl font-bold text-secondary",children:v}),s.jsx("div",{className:"text-xs md:text-sm text-muted-foreground",children:"Animaux suivis"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl md:text-2xl font-bold text-accent",children:j}),s.jsx("div",{className:"text-xs md:text-sm text-muted-foreground",children:"Consultations aujourd'hui"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl md:text-2xl font-bold text-blue-600",children:y}),s.jsx("div",{className:"text-xs md:text-sm text-muted-foreground",children:"Vaccinations"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl md:text-2xl font-bold text-purple-600",children:w}),s.jsx("div",{className:"text-xs md:text-sm text-muted-foreground",children:"Antiparasitaires"})]}),s.jsx(kj,{children:s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-xl md:text-2xl font-bold text-emerald-600",children:[N.totalRevenue.toFixed(2)," ",i.currency||""]}),s.jsx("div",{className:"text-xs md:text-sm text-muted-foreground",children:"Revenus ce mois"})]})})]})]}),s.jsx("div",{className:"hidden lg:block",children:s.jsx("img",{src:YR,alt:"Vtrinaire professionnel examinant un chien",className:"w-96 h-64 object-cover rounded-xl shadow-medical"})})]})}),s.jsx(Qx,{open:c,onOpenChange:u}),s.jsx(hte,{open:d,onOpenChange:h}),s.jsx(Xx,{open:m,onOpenChange:f}),s.jsx(Jx,{open:x,onOpenChange:g})]})}function gte(){const{data:e=[]}=vn(),{data:t=[]}=fn(),{data:n=[]}=Ps(),{data:r=[]}=rc(),{data:a=[]}=Gx(),{data:i=[]}=nc(),{data:o=[]}=Em(),{data:l=[]}=Yx(),{data:c=[]}=sL(),{settings:u}=Zt(),d=e.length,h=t.length;n.length,r.length,a.length;const m=c.length,f=i.length,x=o.length,g=l.length,p=new Date().getMonth(),v=new Date().getFullYear(),y=n.filter(V=>{const O=new Date(V.consultation_date);return O.getMonth()===p&&O.getFullYear()===v}).length,w=i.filter(V=>{const O=new Date(V.vaccination_date);return O.getMonth()===p&&O.getFullYear()===v}).length,S=o.filter(V=>{const O=new Date(V.treatment_date);return O.getMonth()===p&&O.getFullYear()===v}).length,j=new Date().toISOString().split("T")[0],N=n.filter(V=>V.consultation_date.split("T")[0]===j).length,C=r.filter(V=>V.appointment_date.split("T")[0]===j&&V.status!=="cancelled"&&V.status!=="completed").length,_=[],A=l.filter(V=>V.current_quantity<=V.minimum_quantity).length,P=l.filter(V=>V.current_quantity===0).length;l.reduce((V,O)=>V+O.current_quantity*(O.unit_cost||0),0),new Date(v,p,1).toISOString().split("T")[0],new Date(v,p+1,0).toISOString().split("T")[0];const T={totalRevenue:0,totalExpenses:0,netIncome:0,revenueBreakdown:{consultations:0,vaccinations:0,antiparasitics:0,prescriptions:0,manualEntries:0},expenseBreakdown:{stockPurchases:0,salaries:0,rent:0,taxes:0,other:0}},E=T.totalRevenue,I=T.netIncome,R=(V,O)=>{if(O===0)return V>0?"+100%":"0%";const le=(V-O)/O*100;return le>=0?`+${Math.round(le)}%`:`${Math.round(le)}%`},z=p===0?11:p-1,U=p===0?v-1:v,K=n.filter(V=>{const O=new Date(V.consultation_date);return O.getMonth()===z&&O.getFullYear()===U}).length,k=e.filter(V=>{const O=new Date(V.created_at);return O.getMonth()===z&&O.getFullYear()===U}).length,D=t.filter(V=>{const O=new Date(V.created_at);return O.getMonth()===z&&O.getFullYear()===U}).length,J=e.filter(V=>{const O=new Date(V.created_at);return O.getMonth()===p&&O.getFullYear()===v}).length,W=t.filter(V=>{const O=new Date(V.created_at);return O.getMonth()===p&&O.getFullYear()===v}).length;r.filter(V=>{const O=new Date(V.appointment_date);return O.getMonth()===z&&O.getFullYear()===U}).length;const Y=[{title:"Clients Total",value:d.toString(),change:R(d,k),icon:Ra,color:"text-blue-600",bgColor:"bg-blue-50",description:`${J} nouveaux ce mois`},{title:"Animaux Suivis",value:h.toString(),change:R(h,D),icon:gt,color:"text-red-600",bgColor:"bg-red-50",description:`${W} nouveaux ce mois`},{title:"RDV Aujourd'hui",value:C.toString(),change:C>0?"+"+Math.min(20,Math.floor(C*.3))+"%":"0%",icon:Ze,color:"text-purple-600",bgColor:"bg-purple-50",description:`${_.length}  venir cette semaine`},{title:"Consultations",value:y.toString(),change:R(y,K),icon:Wn,color:"text-green-600",bgColor:"bg-green-50",description:`${N} aujourd'hui`},{title:"Revenus Rels",value:`${E.toFixed(0)} ${u.currency||""}`,change:"0%",icon:xd,color:"text-emerald-600",bgColor:"bg-emerald-50",description:`Bnfice: ${I.toFixed(0)} ${u.currency||""}`},{title:"Activit Ferme",value:m.toString(),change:m>0?"+"+Math.min(15,Math.floor(m*.2))+"%":"0%",icon:Oa,color:"text-orange-600",bgColor:"bg-orange-50",description:`${m} exploitations actives`},{title:"Vaccinations",value:w.toString(),change:w>0?"+"+Math.min(25,Math.floor(w*.3))+"%":"0%",icon:xo,color:"text-blue-600",bgColor:"bg-blue-50",description:`${f} total ce mois`},{title:"Antiparasitaires",value:S.toString(),change:S>0?"+"+Math.min(20,Math.floor(S*.25))+"%":"0%",icon:Jn,color:"text-purple-600",bgColor:"bg-purple-50",description:`${x} total ce mois`},{title:"Stock",value:g.toString(),change:A>0?"-"+Math.min(15,Math.floor(A*.2))+"%":"0%",icon:A>0?pn:wa,color:A>0?"text-red-600":"text-green-600",bgColor:A>0?"bg-red-50":"bg-green-50",description:`${A} en rupture, ${P} puiss`}];return s.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:Y.map(V=>s.jsxs(ie,{className:"card-hover",children:[s.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ye,{className:"text-sm font-medium text-muted-foreground",children:V.title}),s.jsx("div",{className:`p-2 rounded-lg ${V.bgColor}`,children:s.jsx(V.icon,{className:`h-4 w-4 ${V.color}`})})]}),s.jsxs(oe,{children:[s.jsx("div",{className:"text-2xl font-bold",children:V.value}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[s.jsx("span",{className:"text-secondary font-medium",children:V.change})," vs mois dernier"]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:V.description})]})]},V.title))})}const vte=bm("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ie({className:e,variant:t,...n}){return s.jsx("div",{className:Me(vte({variant:t}),e),...n})}function dP(){const{data:e=[]}=vn(),{data:t=[]}=fn(),{data:n=[]}=Ps();rc(),Zt();const[r,a]=b.useState(!1),[i,o]=b.useState(!1),[l,c]=b.useState(!1),[u,d]=b.useState(null),h=e.map(N=>{const C=n.filter(A=>A.client_id===N.id),_=C.length>0?Math.max(...C.map(A=>new Date(A.consultation_date).getTime())):0;return{...N,lastVisit:_>0?new Date(_).toISOString():N.created_at}}),f=[...h].sort((N,C)=>new Date(C.lastVisit).getTime()-new Date(N.lastVisit).getTime()).slice(0,5),x=e.length,g=h.filter(N=>{const C=new Date(N.lastVisit),_=new Date;return _.setDate(_.getDate()-30),C>=_}).length,p=new Date().getMonth(),v=new Date().getFullYear(),y=e.filter(N=>{const C=new Date(N.created_at);return C.getMonth()===p&&C.getFullYear()===v}).length,w=x>0?(t.length/x).toFixed(1):"0",S=N=>{d(N),o(!0)},j=N=>{d(N),c(!0)};return s.jsxs(ie,{className:"h-fit",children:[s.jsx(xe,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(ye,{className:"text-lg flex items-center gap-2",children:[s.jsx(Ra,{className:"h-5 w-5"}),"Clients Rcents"]}),s.jsxs($,{size:"sm",onClick:()=>a(!0),className:"gap-2",children:[s.jsx(Ye,{className:"h-4 w-4"}),"Nouveau"]})]})}),s.jsxs(oe,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-primary",children:x}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Total"})]}),s.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:g}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Actifs"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Rn,{className:"h-4 w-4 text-blue-600"}),s.jsxs("span",{children:["+",y," ce mois"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Oa,{className:"h-4 w-4 text-purple-600"}),s.jsxs("span",{children:[w," animaux/client"]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-medium text-sm text-muted-foreground",children:"Derniers clients"}),f.length===0?s.jsx("p",{className:"text-sm text-muted-foreground py-4 text-center",children:"Aucun client trouv"}):f.map(N=>{const C=t.filter(T=>T.client_id===N.id),_=n.filter(T=>T.client_id===N.id),A=`${N.first_name} ${N.last_name}`,P=`${N.first_name[0]||""}${N.last_name[0]||""}`;return s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx(er,{className:"h-9 w-9 flex-shrink-0",children:s.jsx(tr,{className:"text-sm",children:P})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("h4",{className:"font-medium truncate",children:A}),s.jsx(Ie,{variant:"outline",className:"text-xs flex-shrink-0",children:N.client_type})]}),s.jsxs("div",{className:"flex items-center gap-4 mt-1 text-xs text-muted-foreground flex-wrap",children:[N.phone&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(mf,{className:"h-3 w-3 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:N.phone})]}),N.city&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Du,{className:"h-3 w-3 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:N.city})]})]}),s.jsxs("div",{className:"flex items-center gap-4 mt-1 text-xs text-muted-foreground flex-wrap",children:[s.jsxs("span",{children:[C.length," animaux"]}),s.jsxs("span",{children:["Dernire visite: ",new Date(N.lastVisit).toLocaleDateString()]}),s.jsxs("span",{children:["Total consultations: ",_.length]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 ml-2",children:[s.jsx($,{variant:"ghost",size:"sm",onClick:()=>S(N),className:"h-8 w-8 p-0",children:s.jsx($n,{className:"h-4 w-4"})}),s.jsx($,{variant:"ghost",size:"sm",onClick:()=>j(N),className:"h-8 w-8 p-0",children:s.jsx(It,{className:"h-4 w-4"})})]})]},N.id)})]})]}),s.jsx(Qx,{open:r,onOpenChange:a})]})}function hP(){const{data:e=[]}=vn(),{data:t=[]}=fn(),{data:n=[]}=Ps();rc(),Zt();const[r,a]=b.useState(!1),i=t.length,o=t.filter(x=>x.status==="vivant").length,l=t.filter(x=>n.filter(p=>p.animal_id===x.id&&new Date(p.consultation_date)>new Date(Date.now()-2592e6)).length>0).length,d=[...t.map(x=>{const g=n.filter(v=>v.animal_id===x.id),p=g.length>0?Math.max(...g.map(v=>new Date(v.consultation_date).getTime())):0;return{...x,lastActivity:p>0?new Date(p).toISOString():x.created_at,consultationsCount:g.length}})].sort((x,g)=>new Date(g.lastActivity).getTime()-new Date(x.lastActivity).getTime()).slice(0,5),h=new Date().getMonth(),m=new Date().getFullYear(),f=t.filter(x=>{const g=new Date(x.created_at);return g.getMonth()===h&&g.getFullYear()===m}).length;return s.jsxs(ie,{className:"h-fit",children:[s.jsx(xe,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(ye,{className:"text-lg flex items-center gap-2",children:[s.jsx(gt,{className:"h-5 w-5"}),"Animaux Rcents"]}),s.jsxs($,{size:"sm",onClick:()=>a(!0),className:"gap-2",children:[s.jsx(Ye,{className:"h-4 w-4"}),"Nouveau"]})]})}),s.jsxs(oe,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-primary",children:i}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Total"})]}),s.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:o}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"En bonne sant"})]}),s.jsxs("div",{className:"text-center p-3 bg-orange-50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:l}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"En traitement"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Rn,{className:"h-4 w-4 text-blue-600"}),s.jsxs("span",{children:["+",f," ce mois"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Oa,{className:"h-4 w-4 text-purple-600"}),s.jsxs("span",{children:[i," suivis actifs"]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-medium text-sm text-muted-foreground",children:"Derniers animaux"}),d.length===0?s.jsx("p",{className:"text-sm text-muted-foreground py-4 text-center",children:"Aucun animal trouv"}):d.map(x=>{const g=e.find(w=>w.id===x.client_id),p=g?`${g.first_name} ${g.last_name}`:"Propritaire inconnu",v=w=>{switch(w){case"vivant":return"bg-green-100 text-green-800";case"dcd":return"bg-red-100 text-red-800";case"perdu":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},y=w=>"";return s.jsx("div",{className:"flex items-center justify-between p-3 rounded-lg border hover:bg-muted/50 transition-colors",children:s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx(er,{className:"h-9 w-9 flex-shrink-0",children:x.photo_url?s.jsx(Ru,{src:x.photo_url,alt:x.name}):s.jsx(tr,{className:"text-sm",children:y(x.species)})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("h4",{className:"font-medium truncate",children:x.name}),s.jsx(Ie,{variant:"outline",className:"text-xs flex-shrink-0",children:x.species}),s.jsx(Ie,{className:`text-xs flex-shrink-0 ${v(x.status)}`,children:x.status})]}),s.jsxs("div",{className:"flex items-center gap-4 mt-1 text-xs text-muted-foreground flex-wrap",children:[s.jsxs("span",{children:["Propritaire: ",p]}),x.breed&&s.jsxs("span",{children:["Race: ",x.breed]}),x.birth_date&&s.jsxs("span",{children:["ge: ",vf(x.birth_date)]})]}),s.jsxs("div",{className:"flex items-center gap-4 mt-1 text-xs text-muted-foreground flex-wrap",children:[s.jsxs("span",{children:["Consultations: ",x.consultationsCount]}),s.jsxs("span",{children:["Dernire activit: ",new Date(x.lastActivity).toLocaleDateString()]}),x.weight&&s.jsxs("span",{children:["Poids: ",x.weight,"kg"]})]})]})]})},x.id)})]})]}),s.jsx(Xx,{open:r,onOpenChange:a})]})}function xte({open:e,onOpenChange:t,consultation:n}){const{clients:r,pets:a,updateConsultation:i}=Fa(),{toast:o}=it(),{settings:l}=Zt(),[c,u]=b.useState({clientId:0,clientName:"",petId:0,petName:"",date:"",weight:"",temperature:"",symptoms:"",diagnosis:"",treatment:"",medications:"",followUp:"",cost:"",notes:""}),d=a.filter(g=>g.ownerId===c.clientId),h=new Date().toISOString().split("T")[0],m=g=>{u(p=>({...p,[g.target.id]:g.target.value}))},f=(g,p)=>{if(g==="clientId"){const v=parseInt(p),y=r.find(w=>w.id===v);u(w=>({...w,clientId:v,clientName:(y==null?void 0:y.name)||"",petId:0,petName:""}))}else if(g==="petId"){const v=parseInt(p),y=a.find(w=>w.id===v);u(w=>({...w,petId:v,petName:(y==null?void 0:y.name)||""}))}else u(v=>({...v,[g]:p}))},x=g=>{if(g.preventDefault(),!!n){if(!c.clientId||!c.petId){o({title:"Erreur",description:"Veuillez slectionner un client et un animal.",variant:"destructive"});return}i(n.id,{clientId:c.clientId,clientName:c.clientName,petId:c.petId,petName:c.petName,date:c.date||h,weight:c.weight,temperature:c.temperature,symptoms:c.symptoms,diagnosis:c.diagnosis,treatment:c.treatment,medications:c.medications,followUp:c.followUp,cost:c.cost,notes:c.notes}),o({title:"Consultation modifie",description:`Consultation pour ${c.petName} (${c.clientName}) a t modifie et sauvegarde.`}),t(!1)}};return b.useEffect(()=>{e&&n&&u({clientId:n.clientId,clientName:n.clientName,petId:n.petId,petName:n.petName,date:n.date,weight:n.weight||"",temperature:n.temperature||"",symptoms:n.symptoms||"",diagnosis:n.diagnosis||"",treatment:n.treatment||"",medications:n.medications||"",followUp:n.followUp||"",cost:n.cost||"",notes:n.notes||""})},[e,n]),n?s.jsx(tt,{open:e,onOpenChange:t,children:s.jsxs(et,{className:"sm:max-w-[700px] max-h-[80vh] overflow-y-auto",children:[s.jsxs(nt,{children:[s.jsx(rt,{children:"Modifier la Consultation"}),s.jsxs(At,{children:["Modifiez les dtails de la consultation pour ",n.petName,"."]})]}),s.jsxs("form",{onSubmit:x,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Client *"}),s.jsxs(_e,{value:c.clientId.toString(),onValueChange:g=>f("clientId",g),children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Slectionner le client"})}),s.jsx(Se,{children:r.map(g=>s.jsx(Q,{value:g.id.toString(),children:g.name},g.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Animal *"}),s.jsxs(_e,{value:c.petId.toString(),onValueChange:g=>f("petId",g),disabled:!c.clientId,children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:c.clientId?"Slectionner l'animal":"Slectionnez d'abord un client"})}),s.jsx(Se,{children:d.map(g=>s.jsxs(Q,{value:g.id.toString(),children:[g.name," (",g.type,")"]},g.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"date",children:"Date *"}),s.jsx(se,{id:"date",type:"date",value:c.date||h,onChange:m,required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"weight",children:"Poids (kg)"}),s.jsx(se,{id:"weight",type:"number",step:"0.1",value:c.weight,onChange:m,placeholder:"ex: 25.5"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"temperature",children:"Temprature (C)"}),s.jsx(se,{id:"temperature",type:"number",step:"0.1",value:c.temperature,onChange:m,placeholder:"ex: 38.5"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"symptoms",children:"Symptmes observs"}),s.jsx(Ke,{id:"symptoms",value:c.symptoms,onChange:m,placeholder:"Dcrivez les symptmes et observations...",rows:3})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"diagnosis",children:"Diagnostic"}),s.jsx(Ke,{id:"diagnosis",value:c.diagnosis,onChange:m,placeholder:"Diagnostic pos...",rows:3})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"treatment",children:"Traitement administr"}),s.jsx(Ke,{id:"treatment",value:c.treatment,onChange:m,placeholder:"Traitements, injections, interventions...",rows:3})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"medications",children:"Mdicaments prescrits"}),s.jsx(Ke,{id:"medications",value:c.medications,onChange:m,placeholder:"Liste des mdicaments avec posologie...",rows:3})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"followUp",children:"Suivi recommand"}),s.jsx(se,{id:"followUp",value:c.followUp,onChange:m,placeholder:"ex: Contrle dans 1 semaine"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(M,{htmlFor:"cost",children:["Cot (",l.currency,")"]}),s.jsx(se,{id:"cost",type:"number",step:"0.01",value:c.cost,onChange:m,placeholder:"ex: 85.50"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"notes",children:"Notes additionnelles"}),s.jsx(Ke,{id:"notes",value:c.notes,onChange:m,placeholder:"Notes diverses, recommandations...",rows:3})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx($,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsx($,{type:"submit",children:"Modifier Consultation"})]})]})]})}):null}function mL({consultation:e}){const{settings:t}=Zt(),r=(i=>{var o;return i.petName&&i.clientName?i:{...i,petName:((o=i.animal)==null?void 0:o.name)||"Non spcifi",clientName:i.client?`${i.client.first_name||""} ${i.client.last_name||""}`.trim():"Non spcifi",date:i.consultation_date||i.date,symptoms:i.symptoms||"",diagnosis:i.diagnosis||"",treatment:i.treatment||"",notes:i.notes||"",weight:i.weight||null,temperature:i.temperature||null,medications:i.medications||"",followUp:i.follow_up_notes||i.followUp||null,cost:i.cost||null}})(e),a=()=>{if(!r||!r.petName||!r.clientName)return;const i=window.open("","_blank");if(!i)return;const o=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Consultation - ${r.petName}</title>
          <style>
            body {
              font-family: Arial, sans-serif;
              margin: 20px;
              line-height: 1.6;
            }
            .header {
              text-align: center;
              border-bottom: 2px solid #333;
              padding-bottom: 20px;
              margin-bottom: 30px;
            }
            .clinic-name {
              font-size: 24px;
              font-weight: bold;
              color: #2563eb;
            }
            .consultation-title {
              font-size: 20px;
              margin: 10px 0;
            }
            .info-grid {
              display: grid;
              grid-template-columns: 1fr 1fr;
              gap: 20px;
              margin-bottom: 30px;
            }
            .info-section {
              border: 1px solid #ddd;
              padding: 15px;
              border-radius: 5px;
            }
            .info-section h3 {
              margin: 0 0 10px 0;
              color: #333;
              border-bottom: 1px solid #eee;
              padding-bottom: 5px;
            }
            .info-item {
              margin: 5px 0;
            }
            .info-label {
              font-weight: bold;
              color: #666;
            }
            .medical-section {
              margin: 20px 0;
            }
            .medical-section h3 {
              color: #333;
              border-bottom: 1px solid #eee;
              padding-bottom: 5px;
            }
            .footer {
              margin-top: 40px;
              text-align: center;
              font-size: 12px;
              color: #666;
            }
            @media print {
              body { margin: 0; }
              .no-print { display: none; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            <div class="clinic-name">${t.clinicName||"VetPro CRM"}</div>
            <div class="consultation-title">Rapport de Consultation</div>
            <div>Date: ${new Date(r.date).toLocaleDateString("fr-FR")}</div>
          </div>

          <div class="info-grid">
            <div class="info-section">
              <h3>Informations Client</h3>
              <div class="info-item">
                <span class="info-label">Nom:</span> ${r.clientName}
              </div>
            </div>
            <div class="info-section">
              <h3>Informations Animal</h3>
              <div class="info-item">
                <span class="info-label">Nom:</span> ${r.petName}
              </div>
              <div class="info-item">
                <span class="info-label">Poids:</span> ${r.weight||"Non renseign"}
              </div>
              <div class="info-item">
                <span class="info-label">Temprature:</span> ${r.temperature||"Non renseign"}
              </div>
            </div>
          </div>

          ${r.symptoms?`
            <div class="medical-section">
              <h3>Symptmes Observs</h3>
              <p>${r.symptoms}</p>
            </div>
          `:""}

          ${r.diagnosis?`
            <div class="medical-section">
              <h3>Diagnostic</h3>
              <p>${r.diagnosis}</p>
            </div>
          `:""}

          ${r.treatment?`
            <div class="medical-section">
              <h3>Traitement Administr</h3>
              <p>${r.treatment}</p>
            </div>
          `:""}

          ${r.medications?`
            <div class="medical-section">
              <h3>Mdicaments Prescrits</h3>
              <p>${r.medications}</p>
            </div>
          `:""}

          ${r.notes?`
            <div class="medical-section">
              <h3>Notes Additionnelles</h3>
              <p>${r.notes}</p>
            </div>
          `:""}

          <div class="info-grid">
            <div class="info-section">
              <h3>Suivi Recommand</h3>
              <p>${r.followUp||"Aucun suivi prvu"}</p>
            </div>
            <div class="info-section">
              <h3>Cot</h3>
              <p>${r.cost?r.cost+" "+(t.currency||"MAD"):"Non renseign"}</p>
            </div>
          </div>

          <div class="footer">
            <p>Consultation gnre le ${new Date().toLocaleDateString("fr-FR")}  ${new Date().toLocaleTimeString("fr-FR")}</p>
            <p>VetPro CRM - Gestion Vtrinaire Complte</p>
          </div>
        </body>
      </html>
    `;i.document.write(o),i.document.close(),setTimeout(()=>{i.focus(),i.print(),i.close()},500)};return s.jsxs($,{size:"sm",variant:"outline",onClick:a,className:"gap-2",children:[s.jsx(pf,{className:"h-4 w-4"}),"Imprimer"]})}function fP(){const{data:e=[]}=Ps(),{data:t=[]}=vn(),{data:n=[]}=fn();Zt();const[r,a]=b.useState(!1),[i,o]=b.useState(!1),[l,c]=b.useState(null),d=[...e].sort((_,A)=>new Date(A.consultation_date).getTime()-new Date(_.consultation_date).getTime()).slice(0,5),h=e.length,m=new Date().toISOString().split("T")[0],f=e.filter(_=>new Date(_.consultation_date).toISOString().split("T")[0]===m).length,x=new Date().getMonth(),g=new Date().getFullYear(),p=e.filter(_=>{const A=new Date(_.consultation_date);return A.getMonth()===x&&A.getFullYear()===g}).length,v=e.filter(_=>{const A=new Date(_.consultation_date),P=x===0?11:x-1,T=x===0?g-1:g;return A.getMonth()===P&&A.getFullYear()===T}).length,y=v>0?Math.round((p-v)/v*100):p>0?100:0,w=p*50,S=_=>{c(_),o(!0)},j=_=>{const A=new Date(_.consultation_date).toISOString().split("T")[0];return A===m?"bg-accent text-accent-foreground":A<m?"bg-secondary text-secondary-foreground":"bg-primary text-primary-foreground"},N=_=>{const A=new Date(_.consultation_date).toISOString().split("T")[0];return A===m?"Aujourd'hui":A<m?"Termine":" venir"},C=_=>{const A=_.animal||n.find(T=>T.id===_.animal_id),P=_.client||t.find(T=>T.id===_.client_id);return{animalName:(A==null?void 0:A.name)||"Animal inconnu",animalSpecies:(A==null?void 0:A.species)||"Inconnu",animalBreed:(A==null?void 0:A.breed)||"Non spcifie",clientName:P?`${P.first_name} ${P.last_name}`:"Client inconnu",clientPhone:(P==null?void 0:P.phone)||"Non spcifi",clientCity:(P==null?void 0:P.address)||"Non spcifie"}};return s.jsxs(s.Fragment,{children:[s.jsxs(ie,{className:"card-hover",children:[s.jsx(xe,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(ye,{className:"text-lg flex items-center gap-2",children:[s.jsx(Wn,{className:"h-5 w-5"}),"Consultations Rcentes"]}),s.jsxs($,{size:"sm",className:"gap-2",onClick:()=>a(!0),children:[s.jsx(Ye,{className:"h-4 w-4"}),"Nouveau"]})]})}),s.jsxs(oe,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-primary",children:h}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Total"})]}),s.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:f}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Aujourd'hui"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Rn,{className:"h-4 w-4 text-blue-600"}),s.jsxs("span",{children:["+",p," ce mois"]}),y!==0&&s.jsxs(Ie,{variant:y>0?"default":"destructive",className:"text-xs",children:[y>0?"+":"",y,"%"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xd,{className:"h-4 w-4 text-green-600"}),s.jsxs("span",{children:["~",w," ce mois"]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-medium text-sm text-muted-foreground",children:"Dernires consultations"}),d.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Wn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"Aucune consultation enregistre"}),s.jsx("p",{className:"text-sm",children:"Commencez par crer votre premire consultation"})]}):d.map(_=>{const A=C(_);return s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx(er,{className:"h-9 w-9 flex-shrink-0",children:s.jsx(tr,{className:"bg-primary text-primary-foreground",children:s.jsx(Wn,{className:"h-4 w-4"})})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs("h4",{className:"font-medium truncate",children:["#",_.id.slice(0,8)]}),s.jsx(Ie,{variant:"outline",className:`text-xs ${j(_)}`,children:N(_)})]}),s.jsxs("div",{className:"flex items-center gap-4 mt-1 text-xs text-muted-foreground flex-wrap",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(gt,{className:"h-3 w-3 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:A.animalName})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Kn,{className:"h-3 w-3 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:A.clientName})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ze,{className:"h-3 w-3 flex-shrink-0"}),s.jsx("span",{children:new Date(_.consultation_date).toLocaleDateString("fr-FR")})]})]})]})]}),s.jsxs("div",{className:"flex gap-1 flex-shrink-0 ml-2",children:[s.jsx($,{size:"sm",variant:"ghost",onClick:()=>S(_),className:"h-8 w-8 p-0",children:s.jsx(It,{className:"h-4 w-4"})}),s.jsx(mL,{consultation:_})]})]},_.id)})]})]})]}),s.jsx(Jx,{open:r,onOpenChange:a}),s.jsx(xte,{open:i,onOpenChange:o,consultation:l})]})}function yte(){const{appointments:e,stockItems:t,getUpcomingAppointments:n,getOverdueAppointments:r}=Fa();Zt();const a=new Date().toISOString().split("T")[0];n();const i=r(),o=e.filter(d=>d.date===a&&d.status!=="cancelled"&&d.status!=="completed"),l=t.filter(d=>d.currentStock<=d.minimumStock),c=t.filter(d=>d.currentStock===0),u=[];return c.length>0&&u.push({type:"critical",icon:pn,title:"Stock puis",message:`${c.length} produit(s) en rupture de stock`,count:c.length,color:"text-red-600",bgColor:"bg-red-50",borderColor:"border-red-200"}),l.length>0&&u.push({type:"warning",icon:wa,title:"Stock faible",message:`${l.length} produit(s) en stock faible`,count:l.length,color:"text-orange-600",bgColor:"bg-orange-50",borderColor:"border-orange-200"}),i.length>0&&u.push({type:"warning",icon:$t,title:"Rendez-vous en retard",message:`${i.length} rendez-vous en retard`,count:i.length,color:"text-orange-600",bgColor:"bg-orange-50",borderColor:"border-orange-200"}),o.length>0&&u.push({type:"info",icon:Ze,title:"Rendez-vous aujourd'hui",message:`${o.length} rendez-vous prvus aujourd'hui`,count:o.length,color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200"}),u.length===0?s.jsxs(ie,{className:"card-hover",children:[s.jsx(xe,{children:s.jsxs(ye,{className:"flex items-center gap-2",children:[s.jsx(Rn,{className:"h-5 w-5 text-green-600"}),"Aucune alerte"]})}),s.jsx(oe,{children:s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{className:"text-green-600 text-4xl mb-2",children:""}),s.jsx("p",{className:"text-muted-foreground",children:"Tout va bien ! Aucune alerte  signaler."})]})})]}):s.jsxs(ie,{className:"card-hover",children:[s.jsx(xe,{children:s.jsxs(ye,{className:"flex items-center gap-2",children:[s.jsx(pn,{className:"h-5 w-5 text-orange-600"}),"Alertes & Notifications",s.jsx(Ie,{variant:"destructive",className:"ml-2",children:u.length})]})}),s.jsx(oe,{className:"space-y-3",children:u.map((d,h)=>s.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${d.borderColor} ${d.bgColor}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`p-2 rounded-full ${d.bgColor}`,children:s.jsx(d.icon,{className:`h-4 w-4 ${d.color}`})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-sm",children:d.title}),s.jsx("p",{className:"text-xs text-muted-foreground",children:d.message})]})]}),s.jsx(Ie,{variant:d.type==="critical"?"destructive":d.type==="warning"?"secondary":"default",className:"text-xs",children:d.count})]},h))})]})}function wte(){const{clients:e,pets:t,consultations:n,appointments:r,prescriptions:a,farms:i,farmInterventions:o}=Fa();Zt();const l=e.reduce((v,y)=>v+y.pets.length,0),c=l===t.length,u=e.length+t.length+n.length+r.length+a.length+i.length+o.length,d=c?100:Math.round((u-Math.abs(l-t.length))/u*100),h=new Date().toISOString().split("T")[0],m=n.filter(v=>v.date===h).length,f=r.filter(v=>v.date===h&&v.status!=="cancelled"&&v.status!=="completed").length,x=new Date().getMonth(),g=new Date().getFullYear(),p=n.filter(v=>{const y=new Date(v.date);return y.getMonth()===x&&y.getFullYear()===g}).length;return s.jsxs(ie,{className:"mb-6",children:[s.jsx(xe,{children:s.jsxs(ye,{className:"flex items-center gap-2",children:[c?s.jsx(On,{className:"h-5 w-5 text-green-600"}):s.jsx(ps,{className:"h-5 w-5 text-yellow-600"}),"Statut de Synchronisation"]})}),s.jsxs(oe,{children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ra,{className:"h-4 w-4 text-blue-600"}),s.jsxs("span",{className:"text-sm",children:["Clients: ",e.length]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(gt,{className:"h-4 w-4 text-red-600"}),s.jsxs("span",{className:"text-sm",children:["Animaux: ",t.length]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ts,{className:"h-4 w-4 text-green-600"}),s.jsxs("span",{className:"text-sm",children:["Consultations: ",n.length]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ze,{className:"h-4 w-4 text-purple-600"}),s.jsxs("span",{className:"text-sm",children:["RDV: ",r.length]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Rn,{className:"h-4 w-4 text-blue-600"}),s.jsxs("span",{className:"text-sm",children:["Aujourd'hui: ",m+f]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx($t,{className:"h-4 w-4 text-green-600"}),s.jsxs("span",{className:"text-sm",children:["Ce mois: ",p]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(On,{className:"h-4 w-4 text-orange-600"}),s.jsxs("span",{className:"text-sm",children:["Prescriptions: ",a.length]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ts,{className:"h-4 w-4 text-indigo-600"}),s.jsxs("span",{className:"text-sm",children:["Fermes: ",i.length]})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"Intgrit des donnes:"}),s.jsxs(Ie,{variant:d>=95?"default":d>=80?"secondary":"destructive",children:[d,"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full ${d>=95?"bg-green-600":d>=80?"bg-yellow-600":"bg-red-600"}`,style:{width:`${d}%`}})}),s.jsx("div",{className:"flex items-center gap-2 text-sm",children:c?s.jsxs(s.Fragment,{children:[s.jsx(On,{className:"h-4 w-4 text-green-600"}),s.jsx("span",{className:"text-green-700",children:"Synchronisation OK"})]}):s.jsxs(s.Fragment,{children:[s.jsx(ps,{className:"h-4 w-4 text-yellow-600"}),s.jsx("span",{className:"text-yellow-700",children:"Dsynchronisation dtecte"})]})}),!c&&s.jsxs("div",{className:"text-xs text-muted-foreground bg-yellow-50 p-2 rounded",children:[s.jsx("strong",{children:"Attention:"})," ",Math.abs(l-t.length)," animal(s) non synchronis(s) entre clients et animaux"]})]})]})]})}function bte(){const{clients:e,pets:t,consultations:n,appointments:r,prescriptions:a,farms:i,farmInterventions:o,resetData:l,exportData:c,importData:u}=Fa(),{settings:d}=Zt(),{toast:h}=it(),[m,f]=b.useState(!1),[x,g]=b.useState(!1),p=e.length+t.length+n.length+r.length+a.length+i.length+o.length,v=Math.round(p*.5),y=[...e.map(E=>E.lastVisit),...t.map(E=>E.lastVisit).filter(Boolean),...n.map(E=>E.date),...r.map(E=>E.date),...a.map(E=>E.date),...i.map(E=>E.lastVisit)].filter(Boolean),w=y.length>0?new Date(Math.max(...y.map(E=>new Date(E).getTime()))):new Date,S=new Date().toISOString().split("T")[0],j=new Date().getMonth(),N=new Date().getFullYear(),C=[...e.filter(E=>E.lastVisit===S),...t.filter(E=>E.lastVisit===S),...n.filter(E=>E.date===S),...r.filter(E=>E.date===S)].length,_=[...e.filter(E=>{const I=new Date(E.lastVisit);return I.getMonth()===j&&I.getFullYear()===N}),...t.filter(E=>{if(!E.lastVisit)return!1;const I=new Date(E.lastVisit);return I.getMonth()===j&&I.getFullYear()===N}),...n.filter(E=>{const I=new Date(E.date);return I.getMonth()===j&&I.getFullYear()===N}),...r.filter(E=>{const I=new Date(E.date);return I.getMonth()===j&&I.getFullYear()===N})].length,A=()=>{try{c(),h({title:"Donnes exportes",description:`Export de ${p} enregistrements russi.`})}catch{h({title:"Erreur d'export",description:"Impossible d'exporter les donnes.",variant:"destructive"})}},P=E=>{var z;const I=(z=E.target.files)==null?void 0:z[0];if(!I)return;const R=new FileReader;R.onload=U=>{var K,k;try{const D=JSON.parse((K=U.target)==null?void 0:K.result);if(D.clients&&D.pets)u(D),h({title:"Donnes importes",description:`${D.clients.length} clients, ${D.pets.length} animaux et ${((k=D.consultations)==null?void 0:k.length)||0} consultations imports avec succs.`});else throw new Error("Format de fichier invalide")}catch{h({title:"Erreur d'import",description:"Le fichier slectionn n'est pas valide.",variant:"destructive"})}},R.readAsText(I),g(!1)},T=()=>{try{l(),h({title:"Donnes rinitialises",description:"Toutes les donnes ont t remises aux valeurs par dfaut."}),f(!1)}catch{h({title:"Erreur de rinitialisation",description:"Impossible de rinitialiser les donnes.",variant:"destructive"})}};return s.jsxs(s.Fragment,{children:[s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsxs(ye,{className:"flex items-center gap-2",children:[s.jsx(PU,{className:"h-5 w-5"}),"Gestion des Donnes"]})}),s.jsxs(oe,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Total:"}),s.jsxs("span",{className:"text-muted-foreground",children:[p," enregistrements"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Taille:"}),s.jsxs("span",{className:"text-muted-foreground",children:["~",v," KB"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Dernire modif:"}),s.jsx("span",{className:"text-muted-foreground",children:w.toLocaleDateString("fr-FR")})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Rn,{className:"h-4 w-4 text-green-600"}),s.jsx("span",{className:"font-medium",children:"Aujourd'hui:"}),s.jsx("span",{className:"text-muted-foreground",children:C})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx($t,{className:"h-4 w-4 text-blue-600"}),s.jsx("span",{className:"font-medium",children:"Ce mois:"}),s.jsx("span",{className:"text-muted-foreground",children:_})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(On,{className:"h-4 w-4 text-green-600"}),s.jsx("span",{className:"font-medium",children:"Clinique:"}),s.jsx("span",{className:"text-muted-foreground",children:d.clinicName||"Non configure"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-xs",children:[s.jsxs("div",{className:"text-center p-2 bg-blue-50 rounded",children:[s.jsx("div",{className:"font-medium text-blue-700",children:e.length}),s.jsx("div",{className:"text-blue-600",children:"Clients"})]}),s.jsxs("div",{className:"text-center p-2 bg-red-50 rounded",children:[s.jsx("div",{className:"font-medium text-red-700",children:t.length}),s.jsx("div",{className:"text-red-600",children:"Animaux"})]}),s.jsxs("div",{className:"text-center p-2 bg-green-50 rounded",children:[s.jsx("div",{className:"font-medium text-green-700",children:n.length}),s.jsx("div",{className:"text-green-600",children:"Consultations"})]}),s.jsxs("div",{className:"text-center p-2 bg-purple-50 rounded",children:[s.jsx("div",{className:"font-medium text-purple-700",children:r.length}),s.jsx("div",{className:"text-purple-600",children:"RDV"})]}),s.jsxs("div",{className:"text-center p-2 bg-orange-50 rounded",children:[s.jsx("div",{className:"font-medium text-orange-700",children:a.length}),s.jsx("div",{className:"text-orange-600",children:"Prescriptions"})]}),s.jsxs("div",{className:"text-center p-2 bg-indigo-50 rounded",children:[s.jsx("div",{className:"font-medium text-indigo-700",children:i.length}),s.jsx("div",{className:"text-indigo-600",children:"Fermes"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs($,{size:"sm",variant:"outline",onClick:A,className:"gap-2",children:[s.jsx(bx,{className:"h-4 w-4"}),"Exporter"]}),s.jsxs($,{size:"sm",variant:"outline",onClick:()=>g(!0),className:"gap-2",children:[s.jsx($b,{className:"h-4 w-4"}),"Importer"]}),s.jsxs($,{size:"sm",variant:"destructive",onClick:()=>f(!0),className:"gap-2",children:[s.jsx(RU,{className:"h-4 w-4"}),"Rinitialiser"]})]})]})]}),s.jsx(tt,{open:m,onOpenChange:f,children:s.jsxs(et,{children:[s.jsxs(nt,{children:[s.jsxs(rt,{className:"flex items-center gap-2",children:[s.jsx(pn,{className:"h-5 w-5 text-red-600"}),"Rinitialiser toutes les donnes"]}),s.jsx(At,{children:"Cette action supprimera dfinitivement toutes les donnes (clients, animaux, consultations, etc.) et les remettra aux valeurs par dfaut. Cette action ne peut pas tre annule."})]}),s.jsxs("div",{className:"flex gap-2 justify-end",children:[s.jsx($,{variant:"outline",onClick:()=>f(!1),children:"Annuler"}),s.jsx($,{variant:"destructive",onClick:T,children:"Rinitialiser"})]})]})}),s.jsx(tt,{open:x,onOpenChange:g,children:s.jsxs(et,{children:[s.jsxs(nt,{children:[s.jsxs(rt,{className:"flex items-center gap-2",children:[s.jsx($b,{className:"h-5 w-5"}),"Importer des donnes"]}),s.jsx(At,{children:"Slectionnez un fichier JSON export prcdemment pour restaurer vos donnes."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("input",{type:"file",accept:".json",onChange:P,className:"w-full"}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx("strong",{children:"Note:"})," L'import remplacera toutes les donnes existantes."]})]}),s.jsx("div",{className:"flex gap-2 justify-end",children:s.jsx($,{variant:"outline",onClick:()=>g(!1),children:"Annuler"})})]})})]})}function jte(){const{data:e=[]}=vn(),{data:t=[]}=fn(),{data:n=[]}=Ps(),{data:r=[]}=rc();nc(),Em();const{data:a=[]}=Yx();sL();const{settings:i}=Zt(),o=new Date().toISOString().split("T")[0],l=new Date().getMonth(),c=new Date().getFullYear(),u=n.filter(w=>w.consultation_date.split("T")[0]===o).length,d=r.filter(w=>w.appointment_date.split("T")[0]===o&&w.status!=="cancelled").length,h=0,m=[],f=a.filter(w=>w.current_quantity<=w.minimum_quantity).length,x=a.filter(w=>w.current_quantity===0).length,g={totalRevenue:0,totalExpenses:0,netIncome:0,revenueBreakdown:{consultations:0,vaccinations:0,antiparasitics:0,prescriptions:0,manualEntries:0},expenseBreakdown:{stockPurchases:0,salaries:0,rent:0,taxes:0,other:0}},p=e.filter(w=>{const S=new Date(w.created_at);return S.getMonth()===l&&S.getFullYear()===c}).length,v=t.filter(w=>{const S=new Date(w.created_at);return S.getMonth()===l&&S.getFullYear()===c}).length,y=[{title:"Consultations Aujourd'hui",value:u,icon:Wn,color:"text-green-600",bgColor:"bg-green-50",trend:u>0?"up":"neutral",description:"Consultations ralises"},{title:"RDV Aujourd'hui",value:d,icon:Ze,color:"text-blue-600",bgColor:"bg-blue-50",trend:d>0?"up":"neutral",description:"Rendez-vous programms"},{title:"RDV Cette Semaine",value:h,icon:$t,color:"text-purple-600",bgColor:"bg-purple-50",trend:"neutral",description:"Rendez-vous  venir"},{title:"RDV En Retard",value:m.length,icon:pn,color:m.length>0?"text-red-600":"text-gray-600",bgColor:m.length>0?"bg-red-50":"bg-gray-50",trend:m.length>0?"down":"neutral",description:"Rendez-vous en retard"},{title:"Nouveaux Clients",value:p,icon:Ra,color:"text-emerald-600",bgColor:"bg-emerald-50",trend:p>0?"up":"neutral",description:"Ce mois"},{title:"Nouveaux Animaux",value:v,icon:gt,color:"text-pink-600",bgColor:"bg-pink-50",trend:v>0?"up":"neutral",description:"Ce mois"},{title:"Revenus du Mois",value:`${g.totalRevenue.toFixed(0)} ${i.currency||""}`,icon:xd,color:"text-green-600",bgColor:"bg-green-50",trend:"neutral",description:`Bnfice: ${g.netIncome.toFixed(0)} ${i.currency||""}`},{title:"Stock Critique",value:f,icon:Oa,color:f>0?"text-orange-600":"text-green-600",bgColor:f>0?"bg-orange-50":"bg-green-50",trend:f>0?"down":"neutral",description:`${x} en rupture`}];return s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:y.map((w,S)=>s.jsxs(ie,{className:"card-hover",children:[s.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ye,{className:"text-sm font-medium text-muted-foreground",children:w.title}),s.jsx("div",{className:`p-2 rounded-lg ${w.bgColor}`,children:s.jsx(w.icon,{className:`h-4 w-4 ${w.color}`})})]}),s.jsxs(oe,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"text-2xl font-bold",children:w.value}),s.jsxs("div",{className:"flex items-center gap-1",children:[w.trend==="up"&&s.jsxs(s.Fragment,{children:[s.jsx(Rn,{className:"h-4 w-4 text-green-600"}),s.jsxs(Ie,{variant:"secondary",className:"text-xs bg-green-100 text-green-800",children:["+",Math.floor(Math.random()*20)+5,"%"]})]}),w.trend==="down"&&s.jsxs(s.Fragment,{children:[s.jsx(gf,{className:"h-4 w-4 text-red-600"}),s.jsxs(Ie,{variant:"secondary",className:"text-xs bg-red-100 text-red-800",children:["-",Math.floor(Math.random()*15)+3,"%"]})]}),w.trend==="neutral"&&s.jsx(Ie,{variant:"outline",className:"text-xs",children:"0%"})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:w.description})]})]},S))})}var Nte=Array.isArray,qr=Nte,Ste=typeof ur=="object"&&ur&&ur.Object===Object&&ur,pL=Ste,_te=pL,Cte=typeof self=="object"&&self&&self.Object===Object&&self,Ate=_te||Cte||Function("return this")(),Ba=Ate,Pte=Ba,Ete=Pte.Symbol,Tm=Ete,mP=Tm,gL=Object.prototype,kte=gL.hasOwnProperty,Tte=gL.toString,dh=mP?mP.toStringTag:void 0;function Ote(e){var t=kte.call(e,dh),n=e[dh];try{e[dh]=void 0;var r=!0}catch{}var a=Tte.call(e);return r&&(t?e[dh]=n:delete e[dh]),a}var Dte=Ote,Mte=Object.prototype,Ite=Mte.toString;function $te(e){return Ite.call(e)}var Rte=$te,pP=Tm,Lte=Dte,Fte=Rte,zte="[object Null]",Bte="[object Undefined]",gP=pP?pP.toStringTag:void 0;function qte(e){return e==null?e===void 0?Bte:zte:gP&&gP in Object(e)?Lte(e):Fte(e)}var _i=qte;function Vte(e){return e!=null&&typeof e=="object"}var Ci=Vte,Ute=_i,Wte=Ci,Hte="[object Symbol]";function Kte(e){return typeof e=="symbol"||Wte(e)&&Ute(e)==Hte}var Td=Kte,Gte=qr,Yte=Td,Qte=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Xte=/^\w*$/;function Jte(e,t){if(Gte(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||Yte(e)?!0:Xte.test(e)||!Qte.test(e)||t!=null&&e in Object(t)}var c_=Jte;function Zte(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Lo=Zte;const Od=Et(Lo);var ene=_i,tne=Lo,nne="[object AsyncFunction]",rne="[object Function]",sne="[object GeneratorFunction]",ane="[object Proxy]";function ine(e){if(!tne(e))return!1;var t=ene(e);return t==rne||t==sne||t==nne||t==ane}var u_=ine;const Ge=Et(u_);var one=Ba,lne=one["__core-js_shared__"],cne=lne,iw=cne,vP=function(){var e=/[^.]+$/.exec(iw&&iw.keys&&iw.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function une(e){return!!vP&&vP in e}var dne=une,hne=Function.prototype,fne=hne.toString;function mne(e){if(e!=null){try{return fne.call(e)}catch{}try{return e+""}catch{}}return""}var vL=mne,pne=u_,gne=dne,vne=Lo,xne=vL,yne=/[\\^$.*+?()[\]{}|]/g,wne=/^\[object .+?Constructor\]$/,bne=Function.prototype,jne=Object.prototype,Nne=bne.toString,Sne=jne.hasOwnProperty,_ne=RegExp("^"+Nne.call(Sne).replace(yne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Cne(e){if(!vne(e)||gne(e))return!1;var t=pne(e)?_ne:wne;return t.test(xne(e))}var Ane=Cne;function Pne(e,t){return e==null?void 0:e[t]}var Ene=Pne,kne=Ane,Tne=Ene;function One(e,t){var n=Tne(e,t);return kne(n)?n:void 0}var ac=One,Dne=ac,Mne=Dne(Object,"create"),Zx=Mne,xP=Zx;function Ine(){this.__data__=xP?xP(null):{},this.size=0}var $ne=Ine;function Rne(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Lne=Rne,Fne=Zx,zne="__lodash_hash_undefined__",Bne=Object.prototype,qne=Bne.hasOwnProperty;function Vne(e){var t=this.__data__;if(Fne){var n=t[e];return n===zne?void 0:n}return qne.call(t,e)?t[e]:void 0}var Une=Vne,Wne=Zx,Hne=Object.prototype,Kne=Hne.hasOwnProperty;function Gne(e){var t=this.__data__;return Wne?t[e]!==void 0:Kne.call(t,e)}var Yne=Gne,Qne=Zx,Xne="__lodash_hash_undefined__";function Jne(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Qne&&t===void 0?Xne:t,this}var Zne=Jne,ere=$ne,tre=Lne,nre=Une,rre=Yne,sre=Zne;function Dd(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Dd.prototype.clear=ere;Dd.prototype.delete=tre;Dd.prototype.get=nre;Dd.prototype.has=rre;Dd.prototype.set=sre;var are=Dd;function ire(){this.__data__=[],this.size=0}var ore=ire;function lre(e,t){return e===t||e!==e&&t!==t}var d_=lre,cre=d_;function ure(e,t){for(var n=e.length;n--;)if(cre(e[n][0],t))return n;return-1}var ey=ure,dre=ey,hre=Array.prototype,fre=hre.splice;function mre(e){var t=this.__data__,n=dre(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():fre.call(t,n,1),--this.size,!0}var pre=mre,gre=ey;function vre(e){var t=this.__data__,n=gre(t,e);return n<0?void 0:t[n][1]}var xre=vre,yre=ey;function wre(e){return yre(this.__data__,e)>-1}var bre=wre,jre=ey;function Nre(e,t){var n=this.__data__,r=jre(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var Sre=Nre,_re=ore,Cre=pre,Are=xre,Pre=bre,Ere=Sre;function Md(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Md.prototype.clear=_re;Md.prototype.delete=Cre;Md.prototype.get=Are;Md.prototype.has=Pre;Md.prototype.set=Ere;var ty=Md,kre=ac,Tre=Ba,Ore=kre(Tre,"Map"),h_=Ore,yP=are,Dre=ty,Mre=h_;function Ire(){this.size=0,this.__data__={hash:new yP,map:new(Mre||Dre),string:new yP}}var $re=Ire;function Rre(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Lre=Rre,Fre=Lre;function zre(e,t){var n=e.__data__;return Fre(t)?n[typeof t=="string"?"string":"hash"]:n.map}var ny=zre,Bre=ny;function qre(e){var t=Bre(this,e).delete(e);return this.size-=t?1:0,t}var Vre=qre,Ure=ny;function Wre(e){return Ure(this,e).get(e)}var Hre=Wre,Kre=ny;function Gre(e){return Kre(this,e).has(e)}var Yre=Gre,Qre=ny;function Xre(e,t){var n=Qre(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var Jre=Xre,Zre=$re,ese=Vre,tse=Hre,nse=Yre,rse=Jre;function Id(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Id.prototype.clear=Zre;Id.prototype.delete=ese;Id.prototype.get=tse;Id.prototype.has=nse;Id.prototype.set=rse;var f_=Id,xL=f_,sse="Expected a function";function m_(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(sse);var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],i=n.cache;if(i.has(a))return i.get(a);var o=e.apply(this,r);return n.cache=i.set(a,o)||i,o};return n.cache=new(m_.Cache||xL),n}m_.Cache=xL;var yL=m_;const ase=Et(yL);var ise=yL,ose=500;function lse(e){var t=ise(e,function(r){return n.size===ose&&n.clear(),r}),n=t.cache;return t}var cse=lse,use=cse,dse=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,hse=/\\(\\)?/g,fse=use(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(dse,function(n,r,a,i){t.push(a?i.replace(hse,"$1"):r||n)}),t}),mse=fse;function pse(e,t){for(var n=-1,r=e==null?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}var p_=pse,wP=Tm,gse=p_,vse=qr,xse=Td,yse=1/0,bP=wP?wP.prototype:void 0,jP=bP?bP.toString:void 0;function wL(e){if(typeof e=="string")return e;if(vse(e))return gse(e,wL)+"";if(xse(e))return jP?jP.call(e):"";var t=e+"";return t=="0"&&1/e==-yse?"-0":t}var wse=wL,bse=wse;function jse(e){return e==null?"":bse(e)}var bL=jse,Nse=qr,Sse=c_,_se=mse,Cse=bL;function Ase(e,t){return Nse(e)?e:Sse(e,t)?[e]:_se(Cse(e))}var jL=Ase,Pse=Td,Ese=1/0;function kse(e){if(typeof e=="string"||Pse(e))return e;var t=e+"";return t=="0"&&1/e==-Ese?"-0":t}var ry=kse,Tse=jL,Ose=ry;function Dse(e,t){t=Tse(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[Ose(t[n++])];return n&&n==r?e:void 0}var g_=Dse,Mse=g_;function Ise(e,t,n){var r=e==null?void 0:Mse(e,t);return r===void 0?n:r}var NL=Ise;const ss=Et(NL);function $se(e){return e==null}var Rse=$se;const at=Et(Rse);var Lse=_i,Fse=qr,zse=Ci,Bse="[object String]";function qse(e){return typeof e=="string"||!Fse(e)&&zse(e)&&Lse(e)==Bse}var Vse=qse;const Vl=Et(Vse);var SL={exports:{}},Ot={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v_=Symbol.for("react.element"),x_=Symbol.for("react.portal"),sy=Symbol.for("react.fragment"),ay=Symbol.for("react.strict_mode"),iy=Symbol.for("react.profiler"),oy=Symbol.for("react.provider"),ly=Symbol.for("react.context"),Use=Symbol.for("react.server_context"),cy=Symbol.for("react.forward_ref"),uy=Symbol.for("react.suspense"),dy=Symbol.for("react.suspense_list"),hy=Symbol.for("react.memo"),fy=Symbol.for("react.lazy"),Wse=Symbol.for("react.offscreen"),_L;_L=Symbol.for("react.module.reference");function Es(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case v_:switch(e=e.type,e){case sy:case iy:case ay:case uy:case dy:return e;default:switch(e=e&&e.$$typeof,e){case Use:case ly:case cy:case fy:case hy:case oy:return e;default:return t}}case x_:return t}}}Ot.ContextConsumer=ly;Ot.ContextProvider=oy;Ot.Element=v_;Ot.ForwardRef=cy;Ot.Fragment=sy;Ot.Lazy=fy;Ot.Memo=hy;Ot.Portal=x_;Ot.Profiler=iy;Ot.StrictMode=ay;Ot.Suspense=uy;Ot.SuspenseList=dy;Ot.isAsyncMode=function(){return!1};Ot.isConcurrentMode=function(){return!1};Ot.isContextConsumer=function(e){return Es(e)===ly};Ot.isContextProvider=function(e){return Es(e)===oy};Ot.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===v_};Ot.isForwardRef=function(e){return Es(e)===cy};Ot.isFragment=function(e){return Es(e)===sy};Ot.isLazy=function(e){return Es(e)===fy};Ot.isMemo=function(e){return Es(e)===hy};Ot.isPortal=function(e){return Es(e)===x_};Ot.isProfiler=function(e){return Es(e)===iy};Ot.isStrictMode=function(e){return Es(e)===ay};Ot.isSuspense=function(e){return Es(e)===uy};Ot.isSuspenseList=function(e){return Es(e)===dy};Ot.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===sy||e===iy||e===ay||e===uy||e===dy||e===Wse||typeof e=="object"&&e!==null&&(e.$$typeof===fy||e.$$typeof===hy||e.$$typeof===oy||e.$$typeof===ly||e.$$typeof===cy||e.$$typeof===_L||e.getModuleId!==void 0)};Ot.typeOf=Es;SL.exports=Ot;var Hse=SL.exports,Kse=_i,Gse=Ci,Yse="[object Number]";function Qse(e){return typeof e=="number"||Gse(e)&&Kse(e)==Yse}var CL=Qse;const Xse=Et(CL);var Jse=CL;function Zse(e){return Jse(e)&&e!=+e}var eae=Zse;const $d=Et(eae);var yr=function(t){return t===0?0:t>0?1:-1},dl=function(t){return Vl(t)&&t.indexOf("%")===t.length-1},we=function(t){return Xse(t)&&!$d(t)},tae=function(t){return at(t)},In=function(t){return we(t)||Vl(t)},nae=0,Rd=function(t){var n=++nae;return"".concat(t||"").concat(n)},wr=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!we(t)&&!Vl(t))return r;var i;if(dl(t)){var o=t.indexOf("%");i=n*parseFloat(t.slice(0,o))/100}else i=+t;return $d(i)&&(i=r),a&&i>n&&(i=n),i},Gi=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},rae=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,r={},a=0;a<n;a++)if(!r[t[a]])r[t[a]]=!0;else return!0;return!1},Ir=function(t,n){return we(t)&&we(n)?function(r){return t+r*(n-t)}:function(){return n}};function Qg(e,t,n){return!e||!e.length?null:e.find(function(r){return r&&(typeof t=="function"?t(r):ss(r,t))===n})}var sae=function(t,n){return we(t)&&we(n)?t-n:Vl(t)&&Vl(n)?t.localeCompare(n):t instanceof Date&&n instanceof Date?t.getTime()-n.getTime():String(t).localeCompare(String(n))};function ou(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function Tj(e){"@babel/helpers - typeof";return Tj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tj(e)}var aae=["viewBox","children"],iae=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],NP=["points","pathLength"],ow={svg:aae,polygon:NP,polyline:NP},y_=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Xg=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(b.isValidElement(t)&&(r=t.props),!Od(r))return null;var a={};return Object.keys(r).forEach(function(i){y_.includes(i)&&(a[i]=n||function(o){return r[i](r,o)})}),a},oae=function(t,n,r){return function(a){return t(n,r,a),null}},Ul=function(t,n,r){if(!Od(t)||Tj(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var o=t[i];y_.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=oae(o,n,r))}),a},lae=["children"],cae=["children"];function SP(e,t){if(e==null)return{};var n=uae(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function uae(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Oj(e){"@babel/helpers - typeof";return Oj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oj(e)}var _P={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},li=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},CP=null,lw=null,w_=function e(t){if(t===CP&&Array.isArray(lw))return lw;var n=[];return b.Children.forEach(t,function(r){at(r)||(Hse.isFragment(r)?n=n.concat(e(r.props.children)):n.push(r))}),lw=n,CP=t,n};function js(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(function(a){return li(a)}):r=[li(t)],w_(e).forEach(function(a){var i=ss(a,"type.displayName")||ss(a,"type.name");r.indexOf(i)!==-1&&n.push(a)}),n}function Qr(e,t){var n=js(e,t);return n&&n[0]}var AP=function(t){if(!t||!t.props)return!1;var n=t.props,r=n.width,a=n.height;return!(!we(r)||r<=0||!we(a)||a<=0)},dae=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],hae=function(t){return t&&t.type&&Vl(t.type)&&dae.indexOf(t.type)>=0},fae=function(t){return t&&Oj(t)==="object"&&"clipDot"in t},mae=function(t,n,r,a){var i,o=(i=ow==null?void 0:ow[a])!==null&&i!==void 0?i:[];return n.startsWith("data-")||!Ge(t)&&(a&&o.includes(n)||iae.includes(n))||r&&y_.includes(n)},Ve=function(t,n,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(b.isValidElement(t)&&(a=t.props),!Od(a))return null;var i={};return Object.keys(a).forEach(function(o){var l;mae((l=a)===null||l===void 0?void 0:l[o],o,n,r)&&(i[o]=a[o])}),i},Dj=function e(t,n){if(t===n)return!0;var r=b.Children.count(t);if(r!==b.Children.count(n))return!1;if(r===0)return!0;if(r===1)return PP(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var a=0;a<r;a++){var i=t[a],o=n[a];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!PP(i,o))return!1}return!0},PP=function(t,n){if(at(t)&&at(n))return!0;if(!at(t)&&!at(n)){var r=t.props||{},a=r.children,i=SP(r,lae),o=n.props||{},l=o.children,c=SP(o,cae);return a&&l?ou(i,c)&&Dj(a,l):!a&&!l?ou(i,c):!1}return!1},EP=function(t,n){var r=[],a={};return w_(t).forEach(function(i,o){if(hae(i))r.push(i);else if(i){var l=li(i.type),c=n[l]||{},u=c.handler,d=c.once;if(u&&(!d||!a[l])){var h=u(i,l,o);r.push(h),a[l]=!0}}}),r},pae=function(t){var n=t&&t.type;return n&&_P[n]?_P[n]:null},gae=function(t,n){return w_(n).indexOf(t)},vae=["children","width","height","viewBox","className","style","title","desc"];function Mj(){return Mj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mj.apply(this,arguments)}function xae(e,t){if(e==null)return{};var n=yae(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function yae(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Ij(e){var t=e.children,n=e.width,r=e.height,a=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,u=xae(e,vae),d=a||{width:n,height:r,x:0,y:0},h=st("recharts-surface",i);return L.createElement("svg",Mj({},Ve(u,!0,"svg"),{className:h,width:n,height:r,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),L.createElement("title",null,l),L.createElement("desc",null,c),t)}var wae=["children","className"];function $j(){return $j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$j.apply(this,arguments)}function bae(e,t){if(e==null)return{};var n=jae(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function jae(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var vt=L.forwardRef(function(e,t){var n=e.children,r=e.className,a=bae(e,wae),i=st("recharts-layer",r);return L.createElement("g",$j({className:i},Ve(a,!0),{ref:t}),n)}),Ys=function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i]};function Nae(e,t,n){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),n=n>a?a:n,n<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(a);++r<a;)i[r]=e[r+t];return i}var Sae=Nae,_ae=Sae;function Cae(e,t,n){var r=e.length;return n=n===void 0?r:n,!t&&n>=r?e:_ae(e,t,n)}var Aae=Cae,Pae="\\ud800-\\udfff",Eae="\\u0300-\\u036f",kae="\\ufe20-\\ufe2f",Tae="\\u20d0-\\u20ff",Oae=Eae+kae+Tae,Dae="\\ufe0e\\ufe0f",Mae="\\u200d",Iae=RegExp("["+Mae+Pae+Oae+Dae+"]");function $ae(e){return Iae.test(e)}var AL=$ae;function Rae(e){return e.split("")}var Lae=Rae,PL="\\ud800-\\udfff",Fae="\\u0300-\\u036f",zae="\\ufe20-\\ufe2f",Bae="\\u20d0-\\u20ff",qae=Fae+zae+Bae,Vae="\\ufe0e\\ufe0f",Uae="["+PL+"]",Rj="["+qae+"]",Lj="\\ud83c[\\udffb-\\udfff]",Wae="(?:"+Rj+"|"+Lj+")",EL="[^"+PL+"]",kL="(?:\\ud83c[\\udde6-\\uddff]){2}",TL="[\\ud800-\\udbff][\\udc00-\\udfff]",Hae="\\u200d",OL=Wae+"?",DL="["+Vae+"]?",Kae="(?:"+Hae+"(?:"+[EL,kL,TL].join("|")+")"+DL+OL+")*",Gae=DL+OL+Kae,Yae="(?:"+[EL+Rj+"?",Rj,kL,TL,Uae].join("|")+")",Qae=RegExp(Lj+"(?="+Lj+")|"+Yae+Gae,"g");function Xae(e){return e.match(Qae)||[]}var Jae=Xae,Zae=Lae,eie=AL,tie=Jae;function nie(e){return eie(e)?tie(e):Zae(e)}var rie=nie,sie=Aae,aie=AL,iie=rie,oie=bL;function lie(e){return function(t){t=oie(t);var n=aie(t)?iie(t):void 0,r=n?n[0]:t.charAt(0),a=n?sie(n,1).join(""):t.slice(1);return r[e]()+a}}var cie=lie,uie=cie,die=uie("toUpperCase"),hie=die;const my=Et(hie);function Vt(e){return function(){return e}}const ML=Math.cos,Jg=Math.sin,na=Math.sqrt,Zg=Math.PI,py=2*Zg,Fj=Math.PI,zj=2*Fj,Zo=1e-6,fie=zj-Zo;function IL(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function mie(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return IL;const n=10**t;return function(r){this._+=r[0];for(let a=1,i=r.length;a<i;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}class pie{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?IL:mie(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,a){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+a}`}bezierCurveTo(t,n,r,a,i,o){this._append`C${+t},${+n},${+r},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,n,r,a,i){if(t=+t,n=+n,r=+r,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=r-t,u=a-n,d=o-t,h=l-n,m=d*d+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(m>Zo)if(!(Math.abs(h*c-u*d)>Zo)||!i)this._append`L${this._x1=t},${this._y1=n}`;else{let f=r-o,x=a-l,g=c*c+u*u,p=f*f+x*x,v=Math.sqrt(g),y=Math.sqrt(m),w=i*Math.tan((Fj-Math.acos((g+m-p)/(2*v*y)))/2),S=w/y,j=w/v;Math.abs(S-1)>Zo&&this._append`L${t+S*d},${n+S*h}`,this._append`A${i},${i},0,0,${+(h*f>d*x)},${this._x1=t+j*c},${this._y1=n+j*u}`}}arc(t,n,r,a,i,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(a),c=r*Math.sin(a),u=t+l,d=n+c,h=1^o,m=o?a-i:i-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Zo||Math.abs(this._y1-d)>Zo)&&this._append`L${u},${d}`,r&&(m<0&&(m=m%zj+zj),m>fie?this._append`A${r},${r},0,1,${h},${t-l},${n-c}A${r},${r},0,1,${h},${this._x1=u},${this._y1=d}`:m>Zo&&this._append`A${r},${r},0,${+(m>=Fj)},${h},${this._x1=t+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(t,n,r,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+a}h${-r}Z`}toString(){return this._}}function b_(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new pie(t)}function j_(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function $L(e){this._context=e}$L.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function gy(e){return new $L(e)}function RL(e){return e[0]}function LL(e){return e[1]}function FL(e,t){var n=Vt(!0),r=null,a=gy,i=null,o=b_(l);e=typeof e=="function"?e:e===void 0?RL:Vt(e),t=typeof t=="function"?t:t===void 0?LL:Vt(t);function l(c){var u,d=(c=j_(c)).length,h,m=!1,f;for(r==null&&(i=a(f=o())),u=0;u<=d;++u)!(u<d&&n(h=c[u],u,c))===m&&((m=!m)?i.lineStart():i.lineEnd()),m&&i.point(+e(h,u,c),+t(h,u,c));if(f)return i=null,f+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Vt(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Vt(+c),l):t},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Vt(!!c),l):n},l.curve=function(c){return arguments.length?(a=c,r!=null&&(i=a(r)),l):a},l.context=function(c){return arguments.length?(c==null?r=i=null:i=a(r=c),l):r},l}function Ap(e,t,n){var r=null,a=Vt(!0),i=null,o=gy,l=null,c=b_(u);e=typeof e=="function"?e:e===void 0?RL:Vt(+e),t=typeof t=="function"?t:Vt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?LL:Vt(+n);function u(h){var m,f,x,g=(h=j_(h)).length,p,v=!1,y,w=new Array(g),S=new Array(g);for(i==null&&(l=o(y=c())),m=0;m<=g;++m){if(!(m<g&&a(p=h[m],m,h))===v)if(v=!v)f=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),x=m-1;x>=f;--x)l.point(w[x],S[x]);l.lineEnd(),l.areaEnd()}v&&(w[m]=+e(p,m,h),S[m]=+t(p,m,h),l.point(r?+r(p,m,h):w[m],n?+n(p,m,h):S[m]))}if(y)return l=null,y+""||null}function d(){return FL().defined(a).curve(o).context(i)}return u.x=function(h){return arguments.length?(e=typeof h=="function"?h:Vt(+h),r=null,u):e},u.x0=function(h){return arguments.length?(e=typeof h=="function"?h:Vt(+h),u):e},u.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:Vt(+h),u):r},u.y=function(h){return arguments.length?(t=typeof h=="function"?h:Vt(+h),n=null,u):t},u.y0=function(h){return arguments.length?(t=typeof h=="function"?h:Vt(+h),u):t},u.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Vt(+h),u):n},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(n)},u.lineX1=function(){return d().x(r).y(t)},u.defined=function(h){return arguments.length?(a=typeof h=="function"?h:Vt(!!h),u):a},u.curve=function(h){return arguments.length?(o=h,i!=null&&(l=o(i)),u):o},u.context=function(h){return arguments.length?(h==null?i=l=null:l=o(i=h),u):i},u}class zL{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function gie(e){return new zL(e,!0)}function vie(e){return new zL(e,!1)}const N_={draw(e,t){const n=na(t/Zg);e.moveTo(n,0),e.arc(0,0,n,0,py)}},xie={draw(e,t){const n=na(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},BL=na(1/3),yie=BL*2,wie={draw(e,t){const n=na(t/yie),r=n*BL;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},bie={draw(e,t){const n=na(t),r=-n/2;e.rect(r,r,n,n)}},jie=.8908130915292852,qL=Jg(Zg/10)/Jg(7*Zg/10),Nie=Jg(py/10)*qL,Sie=-ML(py/10)*qL,_ie={draw(e,t){const n=na(t*jie),r=Nie*n,a=Sie*n;e.moveTo(0,-n),e.lineTo(r,a);for(let i=1;i<5;++i){const o=py*i/5,l=ML(o),c=Jg(o);e.lineTo(c*n,-l*n),e.lineTo(l*r-c*a,c*r+l*a)}e.closePath()}},cw=na(3),Cie={draw(e,t){const n=-na(t/(cw*3));e.moveTo(0,n*2),e.lineTo(-cw*n,-n),e.lineTo(cw*n,-n),e.closePath()}},ls=-.5,cs=na(3)/2,Bj=1/na(12),Aie=(Bj/2+1)*3,Pie={draw(e,t){const n=na(t/Aie),r=n/2,a=n*Bj,i=r,o=n*Bj+n,l=-i,c=o;e.moveTo(r,a),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(ls*r-cs*a,cs*r+ls*a),e.lineTo(ls*i-cs*o,cs*i+ls*o),e.lineTo(ls*l-cs*c,cs*l+ls*c),e.lineTo(ls*r+cs*a,ls*a-cs*r),e.lineTo(ls*i+cs*o,ls*o-cs*i),e.lineTo(ls*l+cs*c,ls*c-cs*l),e.closePath()}};function Eie(e,t){let n=null,r=b_(a);e=typeof e=="function"?e:Vt(e||N_),t=typeof t=="function"?t:Vt(t===void 0?64:+t);function a(){let i;if(n||(n=i=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:Vt(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:Vt(+i),a):t},a.context=function(i){return arguments.length?(n=i??null,a):n},a}function ev(){}function tv(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function VL(e){this._context=e}VL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:tv(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:tv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function kie(e){return new VL(e)}function UL(e){this._context=e}UL.prototype={areaStart:ev,areaEnd:ev,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:tv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Tie(e){return new UL(e)}function WL(e){this._context=e}WL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:tv(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Oie(e){return new WL(e)}function HL(e){this._context=e}HL.prototype={areaStart:ev,areaEnd:ev,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Die(e){return new HL(e)}function kP(e){return e<0?-1:1}function TP(e,t,n){var r=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(r||a<0&&-0),o=(n-e._y1)/(a||r<0&&-0),l=(i*a+o*r)/(r+a);return(kP(i)+kP(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function OP(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function uw(e,t,n){var r=e._x0,a=e._y0,i=e._x1,o=e._y1,l=(i-r)/3;e._context.bezierCurveTo(r+l,a+l*t,i-l,o-l*n,i,o)}function nv(e){this._context=e}nv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:uw(this,this._t0,OP(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,uw(this,OP(this,n=TP(this,e,t)),n);break;default:uw(this,this._t0,n=TP(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function KL(e){this._context=new GL(e)}(KL.prototype=Object.create(nv.prototype)).point=function(e,t){nv.prototype.point.call(this,t,e)};function GL(e){this._context=e}GL.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,a,i){this._context.bezierCurveTo(t,e,r,n,i,a)}};function Mie(e){return new nv(e)}function Iie(e){return new KL(e)}function YL(e){this._context=e}YL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=DP(e),a=DP(t),i=0,o=1;o<n;++i,++o)this._context.bezierCurveTo(r[0][i],a[0][i],r[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function DP(e){var t,n=e.length-1,r,a=new Array(n),i=new Array(n),o=new Array(n);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[n-1]=2,i[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=a[t]/i[t-1],i[t]-=r,o[t]-=r*o[t-1];for(a[n-1]=o[n-1]/i[n-1],t=n-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[n-1]=(e[n]+a[n-1])/2,t=0;t<n-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function $ie(e){return new YL(e)}function vy(e,t){this._context=e,this._t=t}vy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Rie(e){return new vy(e,.5)}function Lie(e){return new vy(e,0)}function Fie(e){return new vy(e,1)}function qu(e,t){if((o=e.length)>1)for(var n=1,r,a,i=e[t[0]],o,l=i.length;n<o;++n)for(a=i,i=e[t[n]],r=0;r<l;++r)i[r][1]+=i[r][0]=isNaN(a[r][1])?a[r][0]:a[r][1]}function qj(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function zie(e,t){return e[t]}function Bie(e){const t=[];return t.key=e,t}function qie(){var e=Vt([]),t=qj,n=qu,r=zie;function a(i){var o=Array.from(e.apply(this,arguments),Bie),l,c=o.length,u=-1,d;for(const h of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+r(h,o[l].key,u,i)]).data=h;for(l=0,d=j_(t(o));l<c;++l)o[d[l]].index=l;return n(o,d),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Vt(Array.from(i)),a):e},a.value=function(i){return arguments.length?(r=typeof i=="function"?i:Vt(+i),a):r},a.order=function(i){return arguments.length?(t=i==null?qj:typeof i=="function"?i:Vt(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(n=i??qu,a):n},a}function Vie(e,t){if((r=e.length)>0){for(var n,r,a=0,i=e[0].length,o;a<i;++a){for(o=n=0;n<r;++n)o+=e[n][a][1]||0;if(o)for(n=0;n<r;++n)e[n][a][1]/=o}qu(e,t)}}function Uie(e,t){if((a=e.length)>0){for(var n=0,r=e[t[0]],a,i=r.length;n<i;++n){for(var o=0,l=0;o<a;++o)l+=e[o][n][1]||0;r[n][1]+=r[n][0]=-l/2}qu(e,t)}}function Wie(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var n=0,r=1,a,i,o;r<i;++r){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],h=d[r][1]||0,m=d[r-1][1]||0,f=(h-m)/2,x=0;x<l;++x){var g=e[t[x]],p=g[r][1]||0,v=g[r-1][1]||0;f+=p-v}c+=h,u+=f*h}a[r-1][1]+=a[r-1][0]=n,c&&(n-=u/c)}a[r-1][1]+=a[r-1][0]=n,qu(e,t)}}function Af(e){"@babel/helpers - typeof";return Af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Af(e)}var Hie=["type","size","sizeType"];function Vj(){return Vj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vj.apply(this,arguments)}function MP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function IP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?MP(Object(n),!0).forEach(function(r){Kie(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Kie(e,t,n){return t=Gie(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gie(e){var t=Yie(e,"string");return Af(t)=="symbol"?t:t+""}function Yie(e,t){if(Af(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Af(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qie(e,t){if(e==null)return{};var n=Xie(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Xie(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var QL={symbolCircle:N_,symbolCross:xie,symbolDiamond:wie,symbolSquare:bie,symbolStar:_ie,symbolTriangle:Cie,symbolWye:Pie},Jie=Math.PI/180,Zie=function(t){var n="symbol".concat(my(t));return QL[n]||N_},eoe=function(t,n,r){if(n==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*Jie;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},toe=function(t,n){QL["symbol".concat(my(t))]=n},S_=function(t){var n=t.type,r=n===void 0?"circle":n,a=t.size,i=a===void 0?64:a,o=t.sizeType,l=o===void 0?"area":o,c=Qie(t,Hie),u=IP(IP({},c),{},{type:r,size:i,sizeType:l}),d=function(){var p=Zie(r),v=Eie().type(p).size(eoe(i,l,r));return v()},h=u.className,m=u.cx,f=u.cy,x=Ve(u,!0);return m===+m&&f===+f&&i===+i?L.createElement("path",Vj({},x,{className:st("recharts-symbols",h),transform:"translate(".concat(m,", ").concat(f,")"),d:d()})):null};S_.registerSymbol=toe;function Vu(e){"@babel/helpers - typeof";return Vu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vu(e)}function Uj(){return Uj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Uj.apply(this,arguments)}function $P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function noe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$P(Object(n),!0).forEach(function(r){Pf(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$P(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function roe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function soe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,JL(r.key),r)}}function aoe(e,t,n){return t&&soe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ioe(e,t,n){return t=rv(t),ooe(e,XL()?Reflect.construct(t,n||[],rv(e).constructor):t.apply(e,n))}function ooe(e,t){if(t&&(Vu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return loe(e)}function loe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XL=function(){return!!e})()}function rv(e){return rv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},rv(e)}function coe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wj(e,t)}function Wj(e,t){return Wj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Wj(e,t)}function Pf(e,t,n){return t=JL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JL(e){var t=uoe(e,"string");return Vu(t)=="symbol"?t:t+""}function uoe(e,t){if(Vu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Vu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var us=32,__=function(e){function t(){return roe(this,t),ioe(this,t,arguments)}return coe(t,e),aoe(t,[{key:"renderIcon",value:function(r){var a=this.props.inactiveColor,i=us/2,o=us/6,l=us/3,c=r.inactive?a:r.color;if(r.type==="plainline")return L.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:i,x2:us,y2:i,className:"recharts-legend-icon"});if(r.type==="line")return L.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(us,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(r.type==="rect")return L.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(us/8,"h").concat(us,"v").concat(us*3/4,"h").concat(-us,"z"),className:"recharts-legend-icon"});if(L.isValidElement(r.legendIcon)){var u=noe({},r);return delete u.legendIcon,L.cloneElement(r.legendIcon,u)}return L.createElement(S_,{fill:c,cx:i,cy:i,size:us,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,a=this.props,i=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,u=a.inactiveColor,d={x:0,y:0,width:us,height:us},h={display:l==="horizontal"?"inline-block":"block",marginRight:10},m={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(f,x){var g=f.formatter||c,p=st(Pf(Pf({"recharts-legend-item":!0},"legend-item-".concat(x),!0),"inactive",f.inactive));if(f.type==="none")return null;var v=Ge(f.value)?null:f.value;Ys(!Ge(f.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var y=f.inactive?u:f.color;return L.createElement("li",Uj({className:p,style:h,key:"legend-item-".concat(x)},Ul(r.props,f,x)),L.createElement(Ij,{width:o,height:o,viewBox:d,style:m},r.renderIcon(f)),L.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},g?g(v,f,x):v))})}},{key:"render",value:function(){var r=this.props,a=r.payload,i=r.layout,o=r.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return L.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(b.PureComponent);Pf(__,"displayName","Legend");Pf(__,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var doe=ty;function hoe(){this.__data__=new doe,this.size=0}var foe=hoe;function moe(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var poe=moe;function goe(e){return this.__data__.get(e)}var voe=goe;function xoe(e){return this.__data__.has(e)}var yoe=xoe,woe=ty,boe=h_,joe=f_,Noe=200;function Soe(e,t){var n=this.__data__;if(n instanceof woe){var r=n.__data__;if(!boe||r.length<Noe-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new joe(r)}return n.set(e,t),this.size=n.size,this}var _oe=Soe,Coe=ty,Aoe=foe,Poe=poe,Eoe=voe,koe=yoe,Toe=_oe;function Ld(e){var t=this.__data__=new Coe(e);this.size=t.size}Ld.prototype.clear=Aoe;Ld.prototype.delete=Poe;Ld.prototype.get=Eoe;Ld.prototype.has=koe;Ld.prototype.set=Toe;var ZL=Ld,Ooe="__lodash_hash_undefined__";function Doe(e){return this.__data__.set(e,Ooe),this}var Moe=Doe;function Ioe(e){return this.__data__.has(e)}var $oe=Ioe,Roe=f_,Loe=Moe,Foe=$oe;function sv(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Roe;++t<n;)this.add(e[t])}sv.prototype.add=sv.prototype.push=Loe;sv.prototype.has=Foe;var eF=sv;function zoe(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var tF=zoe;function Boe(e,t){return e.has(t)}var nF=Boe,qoe=eF,Voe=tF,Uoe=nF,Woe=1,Hoe=2;function Koe(e,t,n,r,a,i){var o=n&Woe,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var u=i.get(e),d=i.get(t);if(u&&d)return u==t&&d==e;var h=-1,m=!0,f=n&Hoe?new qoe:void 0;for(i.set(e,t),i.set(t,e);++h<l;){var x=e[h],g=t[h];if(r)var p=o?r(g,x,h,t,e,i):r(x,g,h,e,t,i);if(p!==void 0){if(p)continue;m=!1;break}if(f){if(!Voe(t,function(v,y){if(!Uoe(f,y)&&(x===v||a(x,v,n,r,i)))return f.push(y)})){m=!1;break}}else if(!(x===g||a(x,g,n,r,i))){m=!1;break}}return i.delete(e),i.delete(t),m}var rF=Koe,Goe=Ba,Yoe=Goe.Uint8Array,Qoe=Yoe;function Xoe(e){var t=-1,n=Array(e.size);return e.forEach(function(r,a){n[++t]=[a,r]}),n}var Joe=Xoe;function Zoe(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var C_=Zoe,RP=Tm,LP=Qoe,ele=d_,tle=rF,nle=Joe,rle=C_,sle=1,ale=2,ile="[object Boolean]",ole="[object Date]",lle="[object Error]",cle="[object Map]",ule="[object Number]",dle="[object RegExp]",hle="[object Set]",fle="[object String]",mle="[object Symbol]",ple="[object ArrayBuffer]",gle="[object DataView]",FP=RP?RP.prototype:void 0,dw=FP?FP.valueOf:void 0;function vle(e,t,n,r,a,i,o){switch(n){case gle:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ple:return!(e.byteLength!=t.byteLength||!i(new LP(e),new LP(t)));case ile:case ole:case ule:return ele(+e,+t);case lle:return e.name==t.name&&e.message==t.message;case dle:case fle:return e==t+"";case cle:var l=nle;case hle:var c=r&sle;if(l||(l=rle),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;r|=ale,o.set(e,t);var d=tle(l(e),l(t),r,a,i,o);return o.delete(e),d;case mle:if(dw)return dw.call(e)==dw.call(t)}return!1}var xle=vle;function yle(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}var sF=yle,wle=sF,ble=qr;function jle(e,t,n){var r=t(e);return ble(e)?r:wle(r,n(e))}var Nle=jle;function Sle(e,t){for(var n=-1,r=e==null?0:e.length,a=0,i=[];++n<r;){var o=e[n];t(o,n,e)&&(i[a++]=o)}return i}var _le=Sle;function Cle(){return[]}var Ale=Cle,Ple=_le,Ele=Ale,kle=Object.prototype,Tle=kle.propertyIsEnumerable,zP=Object.getOwnPropertySymbols,Ole=zP?function(e){return e==null?[]:(e=Object(e),Ple(zP(e),function(t){return Tle.call(e,t)}))}:Ele,Dle=Ole;function Mle(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Ile=Mle,$le=_i,Rle=Ci,Lle="[object Arguments]";function Fle(e){return Rle(e)&&$le(e)==Lle}var zle=Fle,BP=zle,Ble=Ci,aF=Object.prototype,qle=aF.hasOwnProperty,Vle=aF.propertyIsEnumerable,Ule=BP(function(){return arguments}())?BP:function(e){return Ble(e)&&qle.call(e,"callee")&&!Vle.call(e,"callee")},A_=Ule,av={exports:{}};function Wle(){return!1}var Hle=Wle;av.exports;(function(e,t){var n=Ba,r=Hle,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||r;e.exports=u})(av,av.exports);var iF=av.exports,Kle=9007199254740991,Gle=/^(?:0|[1-9]\d*)$/;function Yle(e,t){var n=typeof e;return t=t??Kle,!!t&&(n=="number"||n!="symbol"&&Gle.test(e))&&e>-1&&e%1==0&&e<t}var P_=Yle,Qle=9007199254740991;function Xle(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Qle}var E_=Xle,Jle=_i,Zle=E_,ece=Ci,tce="[object Arguments]",nce="[object Array]",rce="[object Boolean]",sce="[object Date]",ace="[object Error]",ice="[object Function]",oce="[object Map]",lce="[object Number]",cce="[object Object]",uce="[object RegExp]",dce="[object Set]",hce="[object String]",fce="[object WeakMap]",mce="[object ArrayBuffer]",pce="[object DataView]",gce="[object Float32Array]",vce="[object Float64Array]",xce="[object Int8Array]",yce="[object Int16Array]",wce="[object Int32Array]",bce="[object Uint8Array]",jce="[object Uint8ClampedArray]",Nce="[object Uint16Array]",Sce="[object Uint32Array]",Qt={};Qt[gce]=Qt[vce]=Qt[xce]=Qt[yce]=Qt[wce]=Qt[bce]=Qt[jce]=Qt[Nce]=Qt[Sce]=!0;Qt[tce]=Qt[nce]=Qt[mce]=Qt[rce]=Qt[pce]=Qt[sce]=Qt[ace]=Qt[ice]=Qt[oce]=Qt[lce]=Qt[cce]=Qt[uce]=Qt[dce]=Qt[hce]=Qt[fce]=!1;function _ce(e){return ece(e)&&Zle(e.length)&&!!Qt[Jle(e)]}var Cce=_ce;function Ace(e){return function(t){return e(t)}}var oF=Ace,iv={exports:{}};iv.exports;(function(e,t){var n=pL,r=t&&!t.nodeType&&t,a=r&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===r,o=i&&n.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(iv,iv.exports);var Pce=iv.exports,Ece=Cce,kce=oF,qP=Pce,VP=qP&&qP.isTypedArray,Tce=VP?kce(VP):Ece,lF=Tce,Oce=Ile,Dce=A_,Mce=qr,Ice=iF,$ce=P_,Rce=lF,Lce=Object.prototype,Fce=Lce.hasOwnProperty;function zce(e,t){var n=Mce(e),r=!n&&Dce(e),a=!n&&!r&&Ice(e),i=!n&&!r&&!a&&Rce(e),o=n||r||a||i,l=o?Oce(e.length,String):[],c=l.length;for(var u in e)(t||Fce.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||$ce(u,c)))&&l.push(u);return l}var Bce=zce,qce=Object.prototype;function Vce(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||qce;return e===n}var Uce=Vce;function Wce(e,t){return function(n){return e(t(n))}}var cF=Wce,Hce=cF,Kce=Hce(Object.keys,Object),Gce=Kce,Yce=Uce,Qce=Gce,Xce=Object.prototype,Jce=Xce.hasOwnProperty;function Zce(e){if(!Yce(e))return Qce(e);var t=[];for(var n in Object(e))Jce.call(e,n)&&n!="constructor"&&t.push(n);return t}var eue=Zce,tue=u_,nue=E_;function rue(e){return e!=null&&nue(e.length)&&!tue(e)}var Om=rue,sue=Bce,aue=eue,iue=Om;function oue(e){return iue(e)?sue(e):aue(e)}var xy=oue,lue=Nle,cue=Dle,uue=xy;function due(e){return lue(e,uue,cue)}var hue=due,UP=hue,fue=1,mue=Object.prototype,pue=mue.hasOwnProperty;function gue(e,t,n,r,a,i){var o=n&fue,l=UP(e),c=l.length,u=UP(t),d=u.length;if(c!=d&&!o)return!1;for(var h=c;h--;){var m=l[h];if(!(o?m in t:pue.call(t,m)))return!1}var f=i.get(e),x=i.get(t);if(f&&x)return f==t&&x==e;var g=!0;i.set(e,t),i.set(t,e);for(var p=o;++h<c;){m=l[h];var v=e[m],y=t[m];if(r)var w=o?r(y,v,m,t,e,i):r(v,y,m,e,t,i);if(!(w===void 0?v===y||a(v,y,n,r,i):w)){g=!1;break}p||(p=m=="constructor")}if(g&&!p){var S=e.constructor,j=t.constructor;S!=j&&"constructor"in e&&"constructor"in t&&!(typeof S=="function"&&S instanceof S&&typeof j=="function"&&j instanceof j)&&(g=!1)}return i.delete(e),i.delete(t),g}var vue=gue,xue=ac,yue=Ba,wue=xue(yue,"DataView"),bue=wue,jue=ac,Nue=Ba,Sue=jue(Nue,"Promise"),_ue=Sue,Cue=ac,Aue=Ba,Pue=Cue(Aue,"Set"),uF=Pue,Eue=ac,kue=Ba,Tue=Eue(kue,"WeakMap"),Oue=Tue,Hj=bue,Kj=h_,Gj=_ue,Yj=uF,Qj=Oue,dF=_i,Fd=vL,WP="[object Map]",Due="[object Object]",HP="[object Promise]",KP="[object Set]",GP="[object WeakMap]",YP="[object DataView]",Mue=Fd(Hj),Iue=Fd(Kj),$ue=Fd(Gj),Rue=Fd(Yj),Lue=Fd(Qj),el=dF;(Hj&&el(new Hj(new ArrayBuffer(1)))!=YP||Kj&&el(new Kj)!=WP||Gj&&el(Gj.resolve())!=HP||Yj&&el(new Yj)!=KP||Qj&&el(new Qj)!=GP)&&(el=function(e){var t=dF(e),n=t==Due?e.constructor:void 0,r=n?Fd(n):"";if(r)switch(r){case Mue:return YP;case Iue:return WP;case $ue:return HP;case Rue:return KP;case Lue:return GP}return t});var Fue=el,hw=ZL,zue=rF,Bue=xle,que=vue,QP=Fue,XP=qr,JP=iF,Vue=lF,Uue=1,ZP="[object Arguments]",eE="[object Array]",Pp="[object Object]",Wue=Object.prototype,tE=Wue.hasOwnProperty;function Hue(e,t,n,r,a,i){var o=XP(e),l=XP(t),c=o?eE:QP(e),u=l?eE:QP(t);c=c==ZP?Pp:c,u=u==ZP?Pp:u;var d=c==Pp,h=u==Pp,m=c==u;if(m&&JP(e)){if(!JP(t))return!1;o=!0,d=!1}if(m&&!d)return i||(i=new hw),o||Vue(e)?zue(e,t,n,r,a,i):Bue(e,t,c,n,r,a,i);if(!(n&Uue)){var f=d&&tE.call(e,"__wrapped__"),x=h&&tE.call(t,"__wrapped__");if(f||x){var g=f?e.value():e,p=x?t.value():t;return i||(i=new hw),a(g,p,n,r,i)}}return m?(i||(i=new hw),que(e,t,n,r,a,i)):!1}var Kue=Hue,Gue=Kue,nE=Ci;function hF(e,t,n,r,a){return e===t?!0:e==null||t==null||!nE(e)&&!nE(t)?e!==e&&t!==t:Gue(e,t,n,r,hF,a)}var k_=hF,Yue=ZL,Que=k_,Xue=1,Jue=2;function Zue(e,t,n,r){var a=n.length,i=a,o=!r;if(e==null)return!i;for(e=Object(e);a--;){var l=n[a];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<i;){l=n[a];var c=l[0],u=e[c],d=l[1];if(o&&l[2]){if(u===void 0&&!(c in e))return!1}else{var h=new Yue;if(r)var m=r(u,d,c,e,t,h);if(!(m===void 0?Que(d,u,Xue|Jue,r,h):m))return!1}}return!0}var ede=Zue,tde=Lo;function nde(e){return e===e&&!tde(e)}var fF=nde,rde=fF,sde=xy;function ade(e){for(var t=sde(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,rde(a)]}return t}var ide=ade;function ode(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var mF=ode,lde=ede,cde=ide,ude=mF;function dde(e){var t=cde(e);return t.length==1&&t[0][2]?ude(t[0][0],t[0][1]):function(n){return n===e||lde(n,e,t)}}var hde=dde;function fde(e,t){return e!=null&&t in Object(e)}var mde=fde,pde=jL,gde=A_,vde=qr,xde=P_,yde=E_,wde=ry;function bde(e,t,n){t=pde(t,e);for(var r=-1,a=t.length,i=!1;++r<a;){var o=wde(t[r]);if(!(i=e!=null&&n(e,o)))break;e=e[o]}return i||++r!=a?i:(a=e==null?0:e.length,!!a&&yde(a)&&xde(o,a)&&(vde(e)||gde(e)))}var jde=bde,Nde=mde,Sde=jde;function _de(e,t){return e!=null&&Sde(e,t,Nde)}var Cde=_de,Ade=k_,Pde=NL,Ede=Cde,kde=c_,Tde=fF,Ode=mF,Dde=ry,Mde=1,Ide=2;function $de(e,t){return kde(e)&&Tde(t)?Ode(Dde(e),t):function(n){var r=Pde(n,e);return r===void 0&&r===t?Ede(n,e):Ade(t,r,Mde|Ide)}}var Rde=$de;function Lde(e){return e}var zd=Lde;function Fde(e){return function(t){return t==null?void 0:t[e]}}var zde=Fde,Bde=g_;function qde(e){return function(t){return Bde(t,e)}}var Vde=qde,Ude=zde,Wde=Vde,Hde=c_,Kde=ry;function Gde(e){return Hde(e)?Ude(Kde(e)):Wde(e)}var Yde=Gde,Qde=hde,Xde=Rde,Jde=zd,Zde=qr,ehe=Yde;function the(e){return typeof e=="function"?e:e==null?Jde:typeof e=="object"?Zde(e)?Xde(e[0],e[1]):Qde(e):ehe(e)}var qa=the;function nhe(e,t,n,r){for(var a=e.length,i=n+(r?1:-1);r?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var pF=nhe;function rhe(e){return e!==e}var she=rhe;function ahe(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}var ihe=ahe,ohe=pF,lhe=she,che=ihe;function uhe(e,t,n){return t===t?che(e,t,n):ohe(e,lhe,n)}var dhe=uhe,hhe=dhe;function fhe(e,t){var n=e==null?0:e.length;return!!n&&hhe(e,t,0)>-1}var mhe=fhe;function phe(e,t,n){for(var r=-1,a=e==null?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}var ghe=phe;function vhe(){}var xhe=vhe,fw=uF,yhe=xhe,whe=C_,bhe=1/0,jhe=fw&&1/whe(new fw([,-0]))[1]==bhe?function(e){return new fw(e)}:yhe,Nhe=jhe,She=eF,_he=mhe,Che=ghe,Ahe=nF,Phe=Nhe,Ehe=C_,khe=200;function The(e,t,n){var r=-1,a=_he,i=e.length,o=!0,l=[],c=l;if(n)o=!1,a=Che;else if(i>=khe){var u=t?null:Phe(e);if(u)return Ehe(u);o=!1,a=Ahe,c=new She}else c=t?[]:l;e:for(;++r<i;){var d=e[r],h=t?t(d):d;if(d=n||d!==0?d:0,o&&h===h){for(var m=c.length;m--;)if(c[m]===h)continue e;t&&c.push(h),l.push(d)}else a(c,h,n)||(c!==l&&c.push(h),l.push(d))}return l}var Ohe=The,Dhe=qa,Mhe=Ohe;function Ihe(e,t){return e&&e.length?Mhe(e,Dhe(t)):[]}var $he=Ihe;const rE=Et($he);function gF(e,t,n){return t===!0?rE(e,n):Ge(t)?rE(e,t):e}function Uu(e){"@babel/helpers - typeof";return Uu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uu(e)}var Rhe=["ref"];function sE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Wa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sE(Object(n),!0).forEach(function(r){yy(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Lhe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,xF(r.key),r)}}function Fhe(e,t,n){return t&&aE(e.prototype,t),n&&aE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function zhe(e,t,n){return t=ov(t),Bhe(e,vF()?Reflect.construct(t,n||[],ov(e).constructor):t.apply(e,n))}function Bhe(e,t){if(t&&(Uu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qhe(e)}function qhe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vF=function(){return!!e})()}function ov(e){return ov=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ov(e)}function Vhe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xj(e,t)}function Xj(e,t){return Xj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Xj(e,t)}function yy(e,t,n){return t=xF(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xF(e){var t=Uhe(e,"string");return Uu(t)=="symbol"?t:t+""}function Uhe(e,t){if(Uu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Uu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Whe(e,t){if(e==null)return{};var n=Hhe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Hhe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Khe(e){return e.value}function Ghe(e,t){if(L.isValidElement(e))return L.cloneElement(e,t);if(typeof e=="function")return L.createElement(e,t);t.ref;var n=Whe(t,Rhe);return L.createElement(__,n)}var iE=1,lu=function(e){function t(){var n;Lhe(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=zhe(this,t,[].concat(a)),yy(n,"lastBoundingBox",{width:-1,height:-1}),n}return Vhe(t,e),Fhe(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>iE||Math.abs(a.height-this.lastBoundingBox.height)>iE)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,r&&r(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Wa({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var a=this.props,i=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,u=a.chartWidth,d=a.chartHeight,h,m;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&i==="vertical"){var f=this.getBBoxSnapshot();h={left:((u||0)-f.width)/2}}else h=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(l==="middle"){var x=this.getBBoxSnapshot();m={top:((d||0)-x.height)/2}}else m=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Wa(Wa({},h),m)}},{key:"render",value:function(){var r=this,a=this.props,i=a.content,o=a.width,l=a.height,c=a.wrapperStyle,u=a.payloadUniqBy,d=a.payload,h=Wa(Wa({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return L.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(f){r.wrapperNode=f}},Ghe(i,Wa(Wa({},this.props),{},{payload:gF(d,u,Khe)})))}}],[{key:"getWithHeight",value:function(r,a){var i=Wa(Wa({},this.defaultProps),r.props),o=i.layout;return o==="vertical"&&we(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||a}:null}}])}(b.PureComponent);yy(lu,"displayName","Legend");yy(lu,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var oE=Tm,Yhe=A_,Qhe=qr,lE=oE?oE.isConcatSpreadable:void 0;function Xhe(e){return Qhe(e)||Yhe(e)||!!(lE&&e&&e[lE])}var Jhe=Xhe,Zhe=sF,efe=Jhe;function yF(e,t,n,r,a){var i=-1,o=e.length;for(n||(n=efe),a||(a=[]);++i<o;){var l=e[i];t>0&&n(l)?t>1?yF(l,t-1,n,r,a):Zhe(a,l):r||(a[a.length]=l)}return a}var wF=yF;function tfe(e){return function(t,n,r){for(var a=-1,i=Object(t),o=r(t),l=o.length;l--;){var c=o[e?l:++a];if(n(i[c],c,i)===!1)break}return t}}var nfe=tfe,rfe=nfe,sfe=rfe(),afe=sfe,ife=afe,ofe=xy;function lfe(e,t){return e&&ife(e,t,ofe)}var bF=lfe,cfe=Om;function ufe(e,t){return function(n,r){if(n==null)return n;if(!cfe(n))return e(n,r);for(var a=n.length,i=t?a:-1,o=Object(n);(t?i--:++i<a)&&r(o[i],i,o)!==!1;);return n}}var dfe=ufe,hfe=bF,ffe=dfe,mfe=ffe(hfe),T_=mfe,pfe=T_,gfe=Om;function vfe(e,t){var n=-1,r=gfe(e)?Array(e.length):[];return pfe(e,function(a,i,o){r[++n]=t(a,i,o)}),r}var jF=vfe;function xfe(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}var yfe=xfe,cE=Td;function wfe(e,t){if(e!==t){var n=e!==void 0,r=e===null,a=e===e,i=cE(e),o=t!==void 0,l=t===null,c=t===t,u=cE(t);if(!l&&!u&&!i&&e>t||i&&o&&c&&!l&&!u||r&&o&&c||!n&&c||!a)return 1;if(!r&&!i&&!u&&e<t||u&&n&&a&&!r&&!i||l&&n&&a||!o&&a||!c)return-1}return 0}var bfe=wfe,jfe=bfe;function Nfe(e,t,n){for(var r=-1,a=e.criteria,i=t.criteria,o=a.length,l=n.length;++r<o;){var c=jfe(a[r],i[r]);if(c){if(r>=l)return c;var u=n[r];return c*(u=="desc"?-1:1)}}return e.index-t.index}var Sfe=Nfe,mw=p_,_fe=g_,Cfe=qa,Afe=jF,Pfe=yfe,Efe=oF,kfe=Sfe,Tfe=zd,Ofe=qr;function Dfe(e,t,n){t.length?t=mw(t,function(i){return Ofe(i)?function(o){return _fe(o,i.length===1?i[0]:i)}:i}):t=[Tfe];var r=-1;t=mw(t,Efe(Cfe));var a=Afe(e,function(i,o,l){var c=mw(t,function(u){return u(i)});return{criteria:c,index:++r,value:i}});return Pfe(a,function(i,o){return kfe(i,o,n)})}var Mfe=Dfe;function Ife(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var $fe=Ife,Rfe=$fe,uE=Math.max;function Lfe(e,t,n){return t=uE(t===void 0?e.length-1:t,0),function(){for(var r=arguments,a=-1,i=uE(r.length-t,0),o=Array(i);++a<i;)o[a]=r[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=r[a];return l[t]=n(o),Rfe(e,this,l)}}var Ffe=Lfe;function zfe(e){return function(){return e}}var Bfe=zfe,qfe=ac,Vfe=function(){try{var e=qfe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),NF=Vfe,Ufe=Bfe,dE=NF,Wfe=zd,Hfe=dE?function(e,t){return dE(e,"toString",{configurable:!0,enumerable:!1,value:Ufe(t),writable:!0})}:Wfe,Kfe=Hfe,Gfe=800,Yfe=16,Qfe=Date.now;function Xfe(e){var t=0,n=0;return function(){var r=Qfe(),a=Yfe-(r-n);if(n=r,a>0){if(++t>=Gfe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Jfe=Xfe,Zfe=Kfe,eme=Jfe,tme=eme(Zfe),nme=tme,rme=zd,sme=Ffe,ame=nme;function ime(e,t){return ame(sme(e,t,rme),e+"")}var ome=ime,lme=d_,cme=Om,ume=P_,dme=Lo;function hme(e,t,n){if(!dme(n))return!1;var r=typeof t;return(r=="number"?cme(n)&&ume(t,n.length):r=="string"&&t in n)?lme(n[t],e):!1}var wy=hme,fme=wF,mme=Mfe,pme=ome,hE=wy,gme=pme(function(e,t){if(e==null)return[];var n=t.length;return n>1&&hE(e,t[0],t[1])?t=[]:n>2&&hE(t[0],t[1],t[2])&&(t=[t[0]]),mme(e,fme(t,1),[])}),vme=gme;const O_=Et(vme);function Ef(e){"@babel/helpers - typeof";return Ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ef(e)}function Jj(){return Jj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jj.apply(this,arguments)}function xme(e,t){return jme(e)||bme(e,t)||wme(e,t)||yme()}function yme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wme(e,t){if(e){if(typeof e=="string")return fE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fE(e,t)}}function fE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bme(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function jme(e){if(Array.isArray(e))return e}function mE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function pw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mE(Object(n),!0).forEach(function(r){Nme(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Nme(e,t,n){return t=Sme(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sme(e){var t=_me(e,"string");return Ef(t)=="symbol"?t:t+""}function _me(e,t){if(Ef(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ef(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cme(e){return Array.isArray(e)&&In(e[0])&&In(e[1])?e.join(" ~ "):e}var Ame=function(t){var n=t.separator,r=n===void 0?" : ":n,a=t.contentStyle,i=a===void 0?{}:a,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,d=t.payload,h=t.formatter,m=t.itemSorter,f=t.wrapperClassName,x=t.labelClassName,g=t.label,p=t.labelFormatter,v=t.accessibilityLayer,y=v===void 0?!1:v,w=function(){if(d&&d.length){var E={padding:0,margin:0},I=(m?O_(d,m):d).map(function(R,z){if(R.type==="none")return null;var U=pw({display:"block",paddingTop:4,paddingBottom:4,color:R.color||"#000"},l),K=R.formatter||h||Cme,k=R.value,D=R.name,J=k,W=D;if(K&&J!=null&&W!=null){var Y=K(k,D,R,z,d);if(Array.isArray(Y)){var V=xme(Y,2);J=V[0],W=V[1]}else J=Y}return L.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(z),style:U},In(W)?L.createElement("span",{className:"recharts-tooltip-item-name"},W):null,In(W)?L.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,L.createElement("span",{className:"recharts-tooltip-item-value"},J),L.createElement("span",{className:"recharts-tooltip-item-unit"},R.unit||""))});return L.createElement("ul",{className:"recharts-tooltip-item-list",style:E},I)}return null},S=pw({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),j=pw({margin:0},u),N=!at(g),C=N?g:"",_=st("recharts-default-tooltip",f),A=st("recharts-tooltip-label",x);N&&p&&d!==void 0&&d!==null&&(C=p(g,d));var P=y?{role:"status","aria-live":"assertive"}:{};return L.createElement("div",Jj({className:_,style:S},P),L.createElement("p",{className:A,style:j},L.isValidElement(C)?C:"".concat(C)),w())};function kf(e){"@babel/helpers - typeof";return kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kf(e)}function Ep(e,t,n){return t=Pme(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pme(e){var t=Eme(e,"string");return kf(t)=="symbol"?t:t+""}function Eme(e,t){if(kf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(kf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hh="recharts-tooltip-wrapper",kme={visibility:"hidden"};function Tme(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return st(hh,Ep(Ep(Ep(Ep({},"".concat(hh,"-right"),we(n)&&t&&we(t.x)&&n>=t.x),"".concat(hh,"-left"),we(n)&&t&&we(t.x)&&n<t.x),"".concat(hh,"-bottom"),we(r)&&t&&we(t.y)&&r>=t.y),"".concat(hh,"-top"),we(r)&&t&&we(t.y)&&r<t.y))}function pE(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,a=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(i&&we(i[r]))return i[r];var d=n[r]-l-a,h=n[r]+a;if(t[r])return o[r]?d:h;if(o[r]){var m=d,f=c[r];return m<f?Math.max(h,c[r]):Math.max(d,c[r])}var x=h+l,g=c[r]+u;return x>g?Math.max(d,c[r]):Math.max(h,c[r])}function Ome(e){var t=e.translateX,n=e.translateY,r=e.useTranslate3d;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function Dme(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.offsetTopLeft,a=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,d,h;return o.height>0&&o.width>0&&n?(d=pE({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=pE({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=Ome({translateX:d,translateY:h,useTranslate3d:l})):u=kme,{cssProperties:u,cssClasses:Tme({translateX:d,translateY:h,coordinate:n})}}function Wu(e){"@babel/helpers - typeof";return Wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wu(e)}function gE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function vE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gE(Object(n),!0).forEach(function(r){e1(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Mme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ime(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_F(r.key),r)}}function $me(e,t,n){return t&&Ime(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rme(e,t,n){return t=lv(t),Lme(e,SF()?Reflect.construct(t,n||[],lv(e).constructor):t.apply(e,n))}function Lme(e,t){if(t&&(Wu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fme(e)}function Fme(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(SF=function(){return!!e})()}function lv(e){return lv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},lv(e)}function zme(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zj(e,t)}function Zj(e,t){return Zj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Zj(e,t)}function e1(e,t,n){return t=_F(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _F(e){var t=Bme(e,"string");return Wu(t)=="symbol"?t:t+""}function Bme(e,t){if(Wu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Wu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xE=1,qme=function(e){function t(){var n;Mme(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=Rme(this,t,[].concat(a)),e1(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),e1(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,d;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=n.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),n}return zme(t,e),$me(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>xE||Math.abs(r.height-this.state.lastBoundingBox.height)>xE)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.children,d=a.coordinate,h=a.hasPayload,m=a.isAnimationActive,f=a.offset,x=a.position,g=a.reverseDirection,p=a.useTranslate3d,v=a.viewBox,y=a.wrapperStyle,w=Dme({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:f,position:x,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:p,viewBox:v}),S=w.cssClasses,j=w.cssProperties,N=vE(vE({transition:m&&i?"transform ".concat(l,"ms ").concat(c):void 0},j),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&h?"visible":"hidden",position:"absolute",top:0,left:0},y);return L.createElement("div",{tabIndex:-1,className:S,style:N,ref:function(_){r.wrapperNode=_}},u)}}])}(b.PureComponent),Vme=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Ea={isSsr:Vme(),get:function(t){return Ea[t]},set:function(t,n){if(typeof t=="string")Ea[t]=n;else{var r=Object.keys(t);r&&r.length&&r.forEach(function(a){Ea[a]=t[a]})}}};function Hu(e){"@babel/helpers - typeof";return Hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hu(e)}function yE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function wE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yE(Object(n),!0).forEach(function(r){D_(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ume(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wme(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,AF(r.key),r)}}function Hme(e,t,n){return t&&Wme(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Kme(e,t,n){return t=cv(t),Gme(e,CF()?Reflect.construct(t,n||[],cv(e).constructor):t.apply(e,n))}function Gme(e,t){if(t&&(Hu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yme(e)}function Yme(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CF=function(){return!!e})()}function cv(e){return cv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},cv(e)}function Qme(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&t1(e,t)}function t1(e,t){return t1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},t1(e,t)}function D_(e,t,n){return t=AF(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function AF(e){var t=Xme(e,"string");return Hu(t)=="symbol"?t:t+""}function Xme(e,t){if(Hu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Hu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jme(e){return e.dataKey}function Zme(e,t){return L.isValidElement(e)?L.cloneElement(e,t):typeof e=="function"?L.createElement(e,t):L.createElement(Ame,t)}var ar=function(e){function t(){return Ume(this,t),Kme(this,t,arguments)}return Qme(t,e),Hme(t,[{key:"render",value:function(){var r=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.content,d=a.coordinate,h=a.filterNull,m=a.isAnimationActive,f=a.offset,x=a.payload,g=a.payloadUniqBy,p=a.position,v=a.reverseDirection,y=a.useTranslate3d,w=a.viewBox,S=a.wrapperStyle,j=x??[];h&&j.length&&(j=gF(x.filter(function(C){return C.value!=null&&(C.hide!==!0||r.props.includeHidden)}),g,Jme));var N=j.length>0;return L.createElement(qme,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:m,active:i,coordinate:d,hasPayload:N,offset:f,position:p,reverseDirection:v,useTranslate3d:y,viewBox:w,wrapperStyle:S},Zme(u,wE(wE({},this.props),{},{payload:j})))}}])}(b.PureComponent);D_(ar,"displayName","Tooltip");D_(ar,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Ea.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var epe=Ba,tpe=function(){return epe.Date.now()},npe=tpe,rpe=/\s/;function spe(e){for(var t=e.length;t--&&rpe.test(e.charAt(t)););return t}var ape=spe,ipe=ape,ope=/^\s+/;function lpe(e){return e&&e.slice(0,ipe(e)+1).replace(ope,"")}var cpe=lpe,upe=cpe,bE=Lo,dpe=Td,jE=NaN,hpe=/^[-+]0x[0-9a-f]+$/i,fpe=/^0b[01]+$/i,mpe=/^0o[0-7]+$/i,ppe=parseInt;function gpe(e){if(typeof e=="number")return e;if(dpe(e))return jE;if(bE(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=bE(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=upe(e);var n=fpe.test(e);return n||mpe.test(e)?ppe(e.slice(2),n?2:8):hpe.test(e)?jE:+e}var PF=gpe,vpe=Lo,gw=npe,NE=PF,xpe="Expected a function",ype=Math.max,wpe=Math.min;function bpe(e,t,n){var r,a,i,o,l,c,u=0,d=!1,h=!1,m=!0;if(typeof e!="function")throw new TypeError(xpe);t=NE(t)||0,vpe(n)&&(d=!!n.leading,h="maxWait"in n,i=h?ype(NE(n.maxWait)||0,t):i,m="trailing"in n?!!n.trailing:m);function f(N){var C=r,_=a;return r=a=void 0,u=N,o=e.apply(_,C),o}function x(N){return u=N,l=setTimeout(v,t),d?f(N):o}function g(N){var C=N-c,_=N-u,A=t-C;return h?wpe(A,i-_):A}function p(N){var C=N-c,_=N-u;return c===void 0||C>=t||C<0||h&&_>=i}function v(){var N=gw();if(p(N))return y(N);l=setTimeout(v,g(N))}function y(N){return l=void 0,m&&r?f(N):(r=a=void 0,o)}function w(){l!==void 0&&clearTimeout(l),u=0,r=c=a=l=void 0}function S(){return l===void 0?o:y(gw())}function j(){var N=gw(),C=p(N);if(r=arguments,a=this,c=N,C){if(l===void 0)return x(c);if(h)return clearTimeout(l),l=setTimeout(v,t),f(c)}return l===void 0&&(l=setTimeout(v,t)),o}return j.cancel=w,j.flush=S,j}var jpe=bpe,Npe=jpe,Spe=Lo,_pe="Expected a function";function Cpe(e,t,n){var r=!0,a=!0;if(typeof e!="function")throw new TypeError(_pe);return Spe(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),Npe(e,t,{leading:r,maxWait:t,trailing:a})}var Ape=Cpe;const EF=Et(Ape);function Tf(e){"@babel/helpers - typeof";return Tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tf(e)}function SE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function kp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SE(Object(n),!0).forEach(function(r){Ppe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ppe(e,t,n){return t=Epe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Epe(e){var t=kpe(e,"string");return Tf(t)=="symbol"?t:t+""}function kpe(e,t){if(Tf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Tf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tpe(e,t){return Ipe(e)||Mpe(e,t)||Dpe(e,t)||Ope()}function Ope(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dpe(e,t){if(e){if(typeof e=="string")return _E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _E(e,t)}}function _E(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mpe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Ipe(e){if(Array.isArray(e))return e}var ic=b.forwardRef(function(e,t){var n=e.aspect,r=e.initialDimension,a=r===void 0?{width:-1,height:-1}:r,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,d=u===void 0?0:u,h=e.minHeight,m=e.maxHeight,f=e.children,x=e.debounce,g=x===void 0?0:x,p=e.id,v=e.className,y=e.onResize,w=e.style,S=w===void 0?{}:w,j=b.useRef(null),N=b.useRef();N.current=y,b.useImperativeHandle(t,function(){return Object.defineProperty(j.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),j.current},configurable:!0})});var C=b.useState({containerWidth:a.width,containerHeight:a.height}),_=Tpe(C,2),A=_[0],P=_[1],T=b.useCallback(function(I,R){P(function(z){var U=Math.round(I),K=Math.round(R);return z.containerWidth===U&&z.containerHeight===K?z:{containerWidth:U,containerHeight:K}})},[]);b.useEffect(function(){var I=function(D){var J,W=D[0].contentRect,Y=W.width,V=W.height;T(Y,V),(J=N.current)===null||J===void 0||J.call(N,Y,V)};g>0&&(I=EF(I,g,{trailing:!0,leading:!1}));var R=new ResizeObserver(I),z=j.current.getBoundingClientRect(),U=z.width,K=z.height;return T(U,K),R.observe(j.current),function(){R.disconnect()}},[T,g]);var E=b.useMemo(function(){var I=A.containerWidth,R=A.containerHeight;if(I<0||R<0)return null;Ys(dl(o)||dl(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Ys(!n||n>0,"The aspect(%s) must be greater than zero.",n);var z=dl(o)?I:o,U=dl(c)?R:c;n&&n>0&&(z?U=z/n:U&&(z=U*n),m&&U>m&&(U=m)),Ys(z>0||U>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,z,U,o,c,d,h,n);var K=!Array.isArray(f)&&li(f.type).endsWith("Chart");return L.Children.map(f,function(k){return L.isValidElement(k)?b.cloneElement(k,kp({width:z,height:U},K?{style:kp({height:"100%",width:"100%",maxHeight:U,maxWidth:z},k.props.style)}:{})):k})},[n,f,c,m,h,d,A,o]);return L.createElement("div",{id:p?"".concat(p):void 0,className:st("recharts-responsive-container",v),style:kp(kp({},S),{},{width:o,height:c,minWidth:d,minHeight:h,maxHeight:m}),ref:j},E)}),Bd=function(t){return null};Bd.displayName="Cell";function Of(e){"@babel/helpers - typeof";return Of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Of(e)}function CE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function n1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CE(Object(n),!0).forEach(function(r){$pe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $pe(e,t,n){return t=Rpe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rpe(e){var t=Lpe(e,"string");return Of(t)=="symbol"?t:t+""}function Lpe(e,t){if(Of(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Of(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Sc={widthCache:{},cacheCount:0},Fpe=2e3,zpe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},AE="recharts_measurement_span";function Bpe(e){var t=n1({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var Uh=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Ea.isSsr)return{width:0,height:0};var r=Bpe(n),a=JSON.stringify({text:t,copyStyle:r});if(Sc.widthCache[a])return Sc.widthCache[a];try{var i=document.getElementById(AE);i||(i=document.createElement("span"),i.setAttribute("id",AE),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=n1(n1({},zpe),r);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return Sc.widthCache[a]=c,++Sc.cacheCount>Fpe&&(Sc.cacheCount=0,Sc.widthCache={}),c}catch{return{width:0,height:0}}},qpe=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Df(e){"@babel/helpers - typeof";return Df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Df(e)}function uv(e,t){return Hpe(e)||Wpe(e,t)||Upe(e,t)||Vpe()}function Vpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Upe(e,t){if(e){if(typeof e=="string")return PE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PE(e,t)}}function PE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wpe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Hpe(e){if(Array.isArray(e))return e}function Kpe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ype(r.key),r)}}function Gpe(e,t,n){return t&&EE(e.prototype,t),n&&EE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ype(e){var t=Qpe(e,"string");return Df(t)=="symbol"?t:t+""}function Qpe(e,t){if(Df(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Df(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var kE=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,TE=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Xpe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Jpe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,kF={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Zpe=Object.keys(kF),Wc="NaN";function ege(e,t){return e*kF[t]}var Tp=function(){function e(t,n){Kpe(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!Xpe.test(n)&&(this.num=NaN,this.unit=""),Zpe.includes(n)&&(this.num=ege(t,n),this.unit="px")}return Gpe(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,a=(r=Jpe.exec(n))!==null&&r!==void 0?r:[],i=uv(a,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])}();function TF(e){if(e.includes(Wc))return Wc;for(var t=e;t.includes("*")||t.includes("/");){var n,r=(n=kE.exec(t))!==null&&n!==void 0?n:[],a=uv(r,4),i=a[1],o=a[2],l=a[3],c=Tp.parse(i??""),u=Tp.parse(l??""),d=o==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return Wc;t=t.replace(kE,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,m=(h=TE.exec(t))!==null&&h!==void 0?h:[],f=uv(m,4),x=f[1],g=f[2],p=f[3],v=Tp.parse(x??""),y=Tp.parse(p??""),w=g==="+"?v.add(y):v.subtract(y);if(w.isNaN())return Wc;t=t.replace(TE,w.toString())}return t}var OE=/\(([^()]*)\)/;function tge(e){for(var t=e;t.includes("(");){var n=OE.exec(t),r=uv(n,2),a=r[1];t=t.replace(OE,TF(a))}return t}function nge(e){var t=e.replace(/\s+/g,"");return t=tge(t),t=TF(t),t}function rge(e){try{return nge(e)}catch{return Wc}}function vw(e){var t=rge(e.slice(5,-1));return t===Wc?"":t}var sge=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],age=["dx","dy","angle","className","breakAll"];function r1(){return r1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r1.apply(this,arguments)}function DE(e,t){if(e==null)return{};var n=ige(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ige(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function ME(e,t){return uge(e)||cge(e,t)||lge(e,t)||oge()}function oge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lge(e,t){if(e){if(typeof e=="string")return IE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IE(e,t)}}function IE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cge(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function uge(e){if(Array.isArray(e))return e}var OF=/[ \f\n\r\t\v\u2028\u2029]+/,DF=function(t){var n=t.children,r=t.breakAll,a=t.style;try{var i=[];at(n)||(r?i=n.toString().split(""):i=n.toString().split(OF));var o=i.map(function(c){return{word:c,width:Uh(c,a).width}}),l=r?0:Uh("",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},dge=function(t,n,r,a,i){var o=t.maxLines,l=t.children,c=t.style,u=t.breakAll,d=we(o),h=l,m=function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return z.reduce(function(U,K){var k=K.word,D=K.width,J=U[U.length-1];if(J&&(a==null||i||J.width+D+r<Number(a)))J.words.push(k),J.width+=D+r;else{var W={words:[k],width:D};U.push(W)}return U},[])},f=m(n),x=function(z){return z.reduce(function(U,K){return U.width>K.width?U:K})};if(!d)return f;for(var g="",p=function(z){var U=h.slice(0,z),K=DF({breakAll:u,style:c,children:U+g}).wordsWithComputedWidth,k=m(K),D=k.length>o||x(k).width>Number(a);return[D,k]},v=0,y=h.length-1,w=0,S;v<=y&&w<=h.length-1;){var j=Math.floor((v+y)/2),N=j-1,C=p(N),_=ME(C,2),A=_[0],P=_[1],T=p(j),E=ME(T,1),I=E[0];if(!A&&!I&&(v=j+1),A&&I&&(y=j-1),!A&&I){S=P;break}w++}return S||f},$E=function(t){var n=at(t)?[]:t.toString().split(OF);return[{words:n}]},hge=function(t){var n=t.width,r=t.scaleToFit,a=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((n||r)&&!Ea.isSsr){var c,u,d=DF({breakAll:o,children:a,style:i});if(d){var h=d.wordsWithComputedWidth,m=d.spaceWidth;c=h,u=m}else return $E(a);return dge({breakAll:o,children:a,maxLines:l,style:i},c,u,n,r)}return $E(a)},RE="#808080",Wl=function(t){var n=t.x,r=n===void 0?0:n,a=t.y,i=a===void 0?0:a,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,d=t.scaleToFit,h=d===void 0?!1:d,m=t.textAnchor,f=m===void 0?"start":m,x=t.verticalAnchor,g=x===void 0?"end":x,p=t.fill,v=p===void 0?RE:p,y=DE(t,sge),w=b.useMemo(function(){return hge({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:h,style:y.style,width:y.width})},[y.breakAll,y.children,y.maxLines,h,y.style,y.width]),S=y.dx,j=y.dy,N=y.angle,C=y.className,_=y.breakAll,A=DE(y,age);if(!In(r)||!In(i))return null;var P=r+(we(S)?S:0),T=i+(we(j)?j:0),E;switch(g){case"start":E=vw("calc(".concat(u,")"));break;case"middle":E=vw("calc(".concat((w.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:E=vw("calc(".concat(w.length-1," * -").concat(l,")"));break}var I=[];if(h){var R=w[0].width,z=y.width;I.push("scale(".concat((we(z)?z/R:1)/R,")"))}return N&&I.push("rotate(".concat(N,", ").concat(P,", ").concat(T,")")),I.length&&(A.transform=I.join(" ")),L.createElement("text",r1({},Ve(A,!0),{x:P,y:T,className:st("recharts-text",C),textAnchor:f,fill:v.includes("url")?RE:v}),w.map(function(U,K){var k=U.words.join(_?"":" ");return L.createElement("tspan",{x:P,dy:K===0?E:l,key:"".concat(k,"-").concat(K)},k)}))};function bo(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function fge(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function M_(e){let t,n,r;e.length!==2?(t=bo,n=(l,c)=>bo(e(l),c),r=(l,c)=>e(l)-c):(t=e===bo||e===fge?e:mge,n=e,r=e);function a(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const h=u+d>>>1;n(l[h],c)<0?u=h+1:d=h}while(u<d)}return u}function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const h=u+d>>>1;n(l[h],c)<=0?u=h+1:d=h}while(u<d)}return u}function o(l,c,u=0,d=l.length){const h=a(l,c,u,d-1);return h>u&&r(l[h-1],c)>-r(l[h],c)?h-1:h}return{left:a,center:o,right:i}}function mge(){return 0}function MF(e){return e===null?NaN:+e}function*pge(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const gge=M_(bo),Dm=gge.right;M_(MF).center;class LE extends Map{constructor(t,n=yge){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,a]of t)this.set(r,a)}get(t){return super.get(FE(this,t))}has(t){return super.has(FE(this,t))}set(t,n){return super.set(vge(this,t),n)}delete(t){return super.delete(xge(this,t))}}function FE({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function vge({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function xge({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function yge(e){return e!==null&&typeof e=="object"?e.valueOf():e}function wge(e=bo){if(e===bo)return IF;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function IF(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const bge=Math.sqrt(50),jge=Math.sqrt(10),Nge=Math.sqrt(2);function dv(e,t,n){const r=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(r)),i=r/Math.pow(10,a),o=i>=bge?10:i>=jge?5:i>=Nge?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=n&&n<2?dv(e,t,n*2):[l,c,u]}function s1(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[a,i,o]=r?dv(t,e,n):dv(e,t,n);if(!(i>=a))return[];const l=i-a+1,c=new Array(l);if(r)if(o<0)for(let u=0;u<l;++u)c[u]=(i-u)/-o;else for(let u=0;u<l;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function a1(e,t,n){return t=+t,e=+e,n=+n,dv(e,t,n)[2]}function i1(e,t,n){t=+t,e=+e,n=+n;const r=t<e,a=r?a1(t,e,n):a1(e,t,n);return(r?-1:1)*(a<0?1/-a:a)}function zE(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function BE(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function $F(e,t,n=0,r=1/0,a){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(a=a===void 0?IF:wge(a);r>n;){if(r-n>600){const c=r-n+1,u=t-n+1,d=Math.log(c),h=.5*Math.exp(2*d/3),m=.5*Math.sqrt(d*h*(c-h)/c)*(u-c/2<0?-1:1),f=Math.max(n,Math.floor(t-u*h/c+m)),x=Math.min(r,Math.floor(t+(c-u)*h/c+m));$F(e,t,f,x,a)}const i=e[t];let o=n,l=r;for(fh(e,n,t),a(e[r],i)>0&&fh(e,n,r);o<l;){for(fh(e,o,l),++o,--l;a(e[o],i)<0;)++o;for(;a(e[l],i)>0;)--l}a(e[n],i)===0?fh(e,n,l):(++l,fh(e,l,r)),l<=t&&(n=l+1),t<=l&&(r=l-1)}return e}function fh(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Sge(e,t,n){if(e=Float64Array.from(pge(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return BE(e);if(t>=1)return zE(e);var r,a=(r-1)*t,i=Math.floor(a),o=zE($F(e,i).subarray(0,i+1)),l=BE(e.subarray(i+1));return o+(l-o)*(a-i)}}function _ge(e,t,n=MF){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,a=(r-1)*t,i=Math.floor(a),o=+n(e[i],i,e),l=+n(e[i+1],i+1,e);return o+(l-o)*(a-i)}}function Cge(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=Math.max(0,Math.ceil((t-e)/n))|0,i=new Array(a);++r<a;)i[r]=e+r*n;return i}function ks(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ai(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const o1=Symbol("implicit");function I_(){var e=new LE,t=[],n=[],r=o1;function a(i){let o=e.get(i);if(o===void 0){if(r!==o1)return r;e.set(i,o=t.push(i)-1)}return n[o%n.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new LE;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(n=Array.from(i),a):n.slice()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return I_(t,n).unknown(r)},ks.apply(a,arguments),a}function Mf(){var e=I_().unknown(void 0),t=e.domain,n=e.range,r=0,a=1,i,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function h(){var m=t().length,f=a<r,x=f?a:r,g=f?r:a;i=(g-x)/Math.max(1,m-c+u*2),l&&(i=Math.floor(i)),x+=(g-x-i*(m-c))*d,o=i*(1-c),l&&(x=Math.round(x),o=Math.round(o));var p=Cge(m).map(function(v){return x+i*v});return n(f?p.reverse():p)}return e.domain=function(m){return arguments.length?(t(m),h()):t()},e.range=function(m){return arguments.length?([r,a]=m,r=+r,a=+a,h()):[r,a]},e.rangeRound=function(m){return[r,a]=m,r=+r,a=+a,l=!0,h()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(m){return arguments.length?(l=!!m,h()):l},e.padding=function(m){return arguments.length?(c=Math.min(1,u=+m),h()):c},e.paddingInner=function(m){return arguments.length?(c=Math.min(1,m),h()):c},e.paddingOuter=function(m){return arguments.length?(u=+m,h()):u},e.align=function(m){return arguments.length?(d=Math.max(0,Math.min(1,m)),h()):d},e.copy=function(){return Mf(t(),[r,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},ks.apply(h(),arguments)}function RF(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return RF(t())},e}function Wh(){return RF(Mf.apply(null,arguments).paddingInner(1))}function $_(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function LF(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Mm(){}var If=.7,hv=1/If,cu="\\s*([+-]?\\d+)\\s*",$f="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ka="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Age=/^#([0-9a-f]{3,8})$/,Pge=new RegExp(`^rgb\\(${cu},${cu},${cu}\\)$`),Ege=new RegExp(`^rgb\\(${ka},${ka},${ka}\\)$`),kge=new RegExp(`^rgba\\(${cu},${cu},${cu},${$f}\\)$`),Tge=new RegExp(`^rgba\\(${ka},${ka},${ka},${$f}\\)$`),Oge=new RegExp(`^hsl\\(${$f},${ka},${ka}\\)$`),Dge=new RegExp(`^hsla\\(${$f},${ka},${ka},${$f}\\)$`),qE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};$_(Mm,Rf,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:VE,formatHex:VE,formatHex8:Mge,formatHsl:Ige,formatRgb:UE,toString:UE});function VE(){return this.rgb().formatHex()}function Mge(){return this.rgb().formatHex8()}function Ige(){return FF(this).formatHsl()}function UE(){return this.rgb().formatRgb()}function Rf(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Age.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?WE(t):n===3?new Rr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Op(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Op(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Pge.exec(e))?new Rr(t[1],t[2],t[3],1):(t=Ege.exec(e))?new Rr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=kge.exec(e))?Op(t[1],t[2],t[3],t[4]):(t=Tge.exec(e))?Op(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Oge.exec(e))?GE(t[1],t[2]/100,t[3]/100,1):(t=Dge.exec(e))?GE(t[1],t[2]/100,t[3]/100,t[4]):qE.hasOwnProperty(e)?WE(qE[e]):e==="transparent"?new Rr(NaN,NaN,NaN,0):null}function WE(e){return new Rr(e>>16&255,e>>8&255,e&255,1)}function Op(e,t,n,r){return r<=0&&(e=t=n=NaN),new Rr(e,t,n,r)}function $ge(e){return e instanceof Mm||(e=Rf(e)),e?(e=e.rgb(),new Rr(e.r,e.g,e.b,e.opacity)):new Rr}function l1(e,t,n,r){return arguments.length===1?$ge(e):new Rr(e,t,n,r??1)}function Rr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}$_(Rr,l1,LF(Mm,{brighter(e){return e=e==null?hv:Math.pow(hv,e),new Rr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?If:Math.pow(If,e),new Rr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Rr(Pl(this.r),Pl(this.g),Pl(this.b),fv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:HE,formatHex:HE,formatHex8:Rge,formatRgb:KE,toString:KE}));function HE(){return`#${hl(this.r)}${hl(this.g)}${hl(this.b)}`}function Rge(){return`#${hl(this.r)}${hl(this.g)}${hl(this.b)}${hl((isNaN(this.opacity)?1:this.opacity)*255)}`}function KE(){const e=fv(this.opacity);return`${e===1?"rgb(":"rgba("}${Pl(this.r)}, ${Pl(this.g)}, ${Pl(this.b)}${e===1?")":`, ${e})`}`}function fv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Pl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function hl(e){return e=Pl(e),(e<16?"0":"")+e.toString(16)}function GE(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Us(e,t,n,r)}function FF(e){if(e instanceof Us)return new Us(e.h,e.s,e.l,e.opacity);if(e instanceof Mm||(e=Rf(e)),!e)return new Us;if(e instanceof Us)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,l=i-a,c=(i+a)/2;return l?(t===i?o=(n-r)/l+(n<r)*6:n===i?o=(r-t)/l+2:o=(t-n)/l+4,l/=c<.5?i+a:2-i-a,o*=60):l=c>0&&c<1?0:o,new Us(o,l,c,e.opacity)}function Lge(e,t,n,r){return arguments.length===1?FF(e):new Us(e,t,n,r??1)}function Us(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}$_(Us,Lge,LF(Mm,{brighter(e){return e=e==null?hv:Math.pow(hv,e),new Us(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?If:Math.pow(If,e),new Us(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new Rr(xw(e>=240?e-240:e+120,a,r),xw(e,a,r),xw(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new Us(YE(this.h),Dp(this.s),Dp(this.l),fv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=fv(this.opacity);return`${e===1?"hsl(":"hsla("}${YE(this.h)}, ${Dp(this.s)*100}%, ${Dp(this.l)*100}%${e===1?")":`, ${e})`}`}}));function YE(e){return e=(e||0)%360,e<0?e+360:e}function Dp(e){return Math.max(0,Math.min(1,e||0))}function xw(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const R_=e=>()=>e;function Fge(e,t){return function(n){return e+n*t}}function zge(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Bge(e){return(e=+e)==1?zF:function(t,n){return n-t?zge(t,n,e):R_(isNaN(t)?n:t)}}function zF(e,t){var n=t-e;return n?Fge(e,n):R_(isNaN(e)?t:e)}const QE=function e(t){var n=Bge(t);function r(a,i){var o=n((a=l1(a)).r,(i=l1(i)).r),l=n(a.g,i.g),c=n(a.b,i.b),u=zF(a.opacity,i.opacity);return function(d){return a.r=o(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return r.gamma=e,r}(1);function qge(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),a;return function(i){for(a=0;a<n;++a)r[a]=e[a]*(1-i)+t[a]*i;return r}}function Vge(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Uge(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,a=new Array(r),i=new Array(n),o;for(o=0;o<r;++o)a[o]=qd(e[o],t[o]);for(;o<n;++o)i[o]=t[o];return function(l){for(o=0;o<r;++o)i[o]=a[o](l);return i}}function Wge(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function mv(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Hge(e,t){var n={},r={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=qd(e[a],t[a]):r[a]=t[a];return function(i){for(a in n)r[a]=n[a](i);return r}}var c1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yw=new RegExp(c1.source,"g");function Kge(e){return function(){return e}}function Gge(e){return function(t){return e(t)+""}}function Yge(e,t){var n=c1.lastIndex=yw.lastIndex=0,r,a,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(r=c1.exec(e))&&(a=yw.exec(t));)(i=a.index)>n&&(i=t.slice(n,i),l[o]?l[o]+=i:l[++o]=i),(r=r[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:mv(r,a)})),n=yw.lastIndex;return n<t.length&&(i=t.slice(n),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?Gge(c[0].x):Kge(t):(t=c.length,function(u){for(var d=0,h;d<t;++d)l[(h=c[d]).i]=h.x(u);return l.join("")})}function qd(e,t){var n=typeof t,r;return t==null||n==="boolean"?R_(t):(n==="number"?mv:n==="string"?(r=Rf(t))?(t=r,QE):Yge:t instanceof Rf?QE:t instanceof Date?Wge:Vge(t)?qge:Array.isArray(t)?Uge:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Hge:mv)(e,t)}function L_(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Qge(e,t){t===void 0&&(t=e,e=qd);for(var n=0,r=t.length-1,a=t[0],i=new Array(r<0?0:r);n<r;)i[n]=e(a,a=t[++n]);return function(o){var l=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return i[l](o-l)}}function Xge(e){return function(){return e}}function pv(e){return+e}var XE=[0,1];function br(e){return e}function u1(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Xge(isNaN(t)?NaN:.5)}function Jge(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Zge(e,t,n){var r=e[0],a=e[1],i=t[0],o=t[1];return a<r?(r=u1(a,r),i=n(o,i)):(r=u1(r,a),i=n(i,o)),function(l){return i(r(l))}}function eve(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),i=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)a[o]=u1(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(l){var c=Dm(e,l,1,r)-1;return i[c](a[c](l))}}function Im(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function by(){var e=XE,t=XE,n=qd,r,a,i,o=br,l,c,u;function d(){var m=Math.min(e.length,t.length);return o!==br&&(o=Jge(e[0],e[m-1])),l=m>2?eve:Zge,c=u=null,h}function h(m){return m==null||isNaN(m=+m)?i:(c||(c=l(e.map(r),t,n)))(r(o(m)))}return h.invert=function(m){return o(a((u||(u=l(t,e.map(r),mv)))(m)))},h.domain=function(m){return arguments.length?(e=Array.from(m,pv),d()):e.slice()},h.range=function(m){return arguments.length?(t=Array.from(m),d()):t.slice()},h.rangeRound=function(m){return t=Array.from(m),n=L_,d()},h.clamp=function(m){return arguments.length?(o=m?!0:br,d()):o!==br},h.interpolate=function(m){return arguments.length?(n=m,d()):n},h.unknown=function(m){return arguments.length?(i=m,h):i},function(m,f){return r=m,a=f,d()}}function F_(){return by()(br,br)}function tve(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function gv(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Ku(e){return e=gv(Math.abs(e)),e?e[1]:NaN}function nve(e,t){return function(n,r){for(var a=n.length,i=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),i.push(n.substring(a-=l,a+l)),!((c+=l+1)>r));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function rve(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var sve=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Lf(e){if(!(t=sve.exec(e)))throw new Error("invalid format: "+e);var t;return new z_({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Lf.prototype=z_.prototype;function z_(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}z_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ave(e){e:for(var t=e.length,n=1,r=-1,a;n<t;++n)switch(e[n]){case".":r=a=n;break;case"0":r===0&&(r=n),a=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(a+1):e}var BF;function ive(e,t){var n=gv(e,t);if(!n)return e+"";var r=n[0],a=n[1],i=a-(BF=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+gv(e,Math.max(0,t+i-1))[0]}function JE(e,t){var n=gv(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const ZE={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:tve,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>JE(e*100,t),r:JE,s:ive,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ek(e){return e}var tk=Array.prototype.map,nk=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function ove(e){var t=e.grouping===void 0||e.thousands===void 0?ek:nve(tk.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?ek:rve(tk.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(h){h=Lf(h);var m=h.fill,f=h.align,x=h.sign,g=h.symbol,p=h.zero,v=h.width,y=h.comma,w=h.precision,S=h.trim,j=h.type;j==="n"?(y=!0,j="g"):ZE[j]||(w===void 0&&(w=12),S=!0,j="g"),(p||m==="0"&&f==="=")&&(p=!0,m="0",f="=");var N=g==="$"?n:g==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",C=g==="$"?r:/[%p]/.test(j)?o:"",_=ZE[j],A=/[defgprs%]/.test(j);w=w===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function P(T){var E=N,I=C,R,z,U;if(j==="c")I=_(T)+I,T="";else{T=+T;var K=T<0||1/T<0;if(T=isNaN(T)?c:_(Math.abs(T),w),S&&(T=ave(T)),K&&+T==0&&x!=="+"&&(K=!1),E=(K?x==="("?x:l:x==="-"||x==="("?"":x)+E,I=(j==="s"?nk[8+BF/3]:"")+I+(K&&x==="("?")":""),A){for(R=-1,z=T.length;++R<z;)if(U=T.charCodeAt(R),48>U||U>57){I=(U===46?a+T.slice(R+1):T.slice(R))+I,T=T.slice(0,R);break}}}y&&!p&&(T=t(T,1/0));var k=E.length+T.length+I.length,D=k<v?new Array(v-k+1).join(m):"";switch(y&&p&&(T=t(D+T,D.length?v-I.length:1/0),D=""),f){case"<":T=E+T+I+D;break;case"=":T=E+D+T+I;break;case"^":T=D.slice(0,k=D.length>>1)+E+T+I+D.slice(k);break;default:T=D+E+T+I;break}return i(T)}return P.toString=function(){return h+""},P}function d(h,m){var f=u((h=Lf(h),h.type="f",h)),x=Math.max(-8,Math.min(8,Math.floor(Ku(m)/3)))*3,g=Math.pow(10,-x),p=nk[8+x/3];return function(v){return f(g*v)+p}}return{format:u,formatPrefix:d}}var Mp,B_,qF;lve({thousands:",",grouping:[3],currency:["$",""]});function lve(e){return Mp=ove(e),B_=Mp.format,qF=Mp.formatPrefix,Mp}function cve(e){return Math.max(0,-Ku(Math.abs(e)))}function uve(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ku(t)/3)))*3-Ku(Math.abs(e)))}function dve(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ku(t)-Ku(e))+1}function VF(e,t,n,r){var a=i1(e,t,n),i;switch(r=Lf(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(i=uve(a,o))&&(r.precision=i),qF(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=dve(a,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=cve(a))&&(r.precision=i-(r.type==="%")*2);break}}return B_(r)}function Fo(e){var t=e.domain;return e.ticks=function(n){var r=t();return s1(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var a=t();return VF(a[0],a[a.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),a=0,i=r.length-1,o=r[a],l=r[i],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=a,a=i,i=u);d-- >0;){if(u=a1(o,l,n),u===c)return r[a]=o,r[i]=l,t(r);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function vv(){var e=F_();return e.copy=function(){return Im(e,vv())},ks.apply(e,arguments),Fo(e)}function UF(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,pv),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return UF(e).unknown(t)},e=arguments.length?Array.from(e,pv):[0,1],Fo(n)}function WF(e,t){e=e.slice();var n=0,r=e.length-1,a=e[n],i=e[r],o;return i<a&&(o=n,n=r,r=o,o=a,a=i,i=o),e[n]=t.floor(a),e[r]=t.ceil(i),e}function rk(e){return Math.log(e)}function sk(e){return Math.exp(e)}function hve(e){return-Math.log(-e)}function fve(e){return-Math.exp(-e)}function mve(e){return isFinite(e)?+("1e"+e):e<0?0:e}function pve(e){return e===10?mve:e===Math.E?Math.exp:t=>Math.pow(e,t)}function gve(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function ak(e){return(t,n)=>-e(-t,n)}function q_(e){const t=e(rk,sk),n=t.domain;let r=10,a,i;function o(){return a=gve(r),i=pve(r),n()[0]<0?(a=ak(a),i=ak(i),e(hve,fve)):e(rk,sk),t}return t.base=function(l){return arguments.length?(r=+l,o()):r},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const c=n();let u=c[0],d=c[c.length-1];const h=d<u;h&&([u,d]=[d,u]);let m=a(u),f=a(d),x,g;const p=l==null?10:+l;let v=[];if(!(r%1)&&f-m<p){if(m=Math.floor(m),f=Math.ceil(f),u>0){for(;m<=f;++m)for(x=1;x<r;++x)if(g=m<0?x/i(-m):x*i(m),!(g<u)){if(g>d)break;v.push(g)}}else for(;m<=f;++m)for(x=r-1;x>=1;--x)if(g=m>0?x/i(-m):x*i(m),!(g<u)){if(g>d)break;v.push(g)}v.length*2<p&&(v=s1(u,d,p))}else v=s1(m,f,Math.min(f-m,p)).map(i);return h?v.reverse():v},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=Lf(c)).precision==null&&(c.trim=!0),c=B_(c)),l===1/0)return c;const u=Math.max(1,r*l/t.ticks().length);return d=>{let h=d/i(Math.round(a(d)));return h*r<r-.5&&(h*=r),h<=u?c(d):""}},t.nice=()=>n(WF(n(),{floor:l=>i(Math.floor(a(l))),ceil:l=>i(Math.ceil(a(l)))})),t}function HF(){const e=q_(by()).domain([1,10]);return e.copy=()=>Im(e,HF()).base(e.base()),ks.apply(e,arguments),e}function ik(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function ok(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function V_(e){var t=1,n=e(ik(t),ok(t));return n.constant=function(r){return arguments.length?e(ik(t=+r),ok(t)):t},Fo(n)}function KF(){var e=V_(by());return e.copy=function(){return Im(e,KF()).constant(e.constant())},ks.apply(e,arguments)}function lk(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function vve(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function xve(e){return e<0?-e*e:e*e}function U_(e){var t=e(br,br),n=1;function r(){return n===1?e(br,br):n===.5?e(vve,xve):e(lk(n),lk(1/n))}return t.exponent=function(a){return arguments.length?(n=+a,r()):n},Fo(t)}function W_(){var e=U_(by());return e.copy=function(){return Im(e,W_()).exponent(e.exponent())},ks.apply(e,arguments),e}function yve(){return W_.apply(null,arguments).exponent(.5)}function ck(e){return Math.sign(e)*e*e}function wve(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function GF(){var e=F_(),t=[0,1],n=!1,r;function a(i){var o=wve(e(i));return isNaN(o)?r:n?Math.round(o):o}return a.invert=function(i){return e.invert(ck(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,pv)).map(ck)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(n=!!i,a):n},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return GF(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},ks.apply(a,arguments),Fo(a)}function YF(){var e=[],t=[],n=[],r;function a(){var o=0,l=Math.max(1,t.length);for(n=new Array(l-1);++o<l;)n[o-1]=_ge(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?r:t[Dm(n,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(bo),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.quantiles=function(){return n.slice()},i.copy=function(){return YF().domain(e).range(t).unknown(r)},ks.apply(i,arguments)}function QF(){var e=0,t=1,n=1,r=[.5],a=[0,1],i;function o(c){return c!=null&&c<=c?a[Dm(r,c,0,n)]:i}function l(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*t-(c-n)*e)/(n+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(n=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return r.slice()},o.copy=function(){return QF().domain([e,t]).range(a).unknown(i)},ks.apply(Fo(o),arguments)}function XF(){var e=[.5],t=[0,1],n,r=1;function a(i){return i!=null&&i<=i?t[Dm(e,i,0,r)]:n}return a.domain=function(i){return arguments.length?(e=Array.from(i),r=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),r=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return XF().domain(e).range(t).unknown(n)},ks.apply(a,arguments)}const ww=new Date,bw=new Date;function Ln(e,t,n,r){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),l=a.ceil(i);return i-o<l-i?o:l},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,l)=>{const c=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return c},a.filter=i=>Ln(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),n&&(a.count=(i,o)=>(ww.setTime(+i),bw.setTime(+o),e(ww),e(bw),Math.floor(n(ww,bw))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(r?o=>r(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const xv=Ln(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);xv.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ln(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):xv);xv.range;const si=1e3,ys=si*60,ai=ys*60,wi=ai*24,H_=wi*7,uk=wi*30,jw=wi*365,fl=Ln(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*si)},(e,t)=>(t-e)/si,e=>e.getUTCSeconds());fl.range;const K_=Ln(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*si)},(e,t)=>{e.setTime(+e+t*ys)},(e,t)=>(t-e)/ys,e=>e.getMinutes());K_.range;const G_=Ln(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ys)},(e,t)=>(t-e)/ys,e=>e.getUTCMinutes());G_.range;const Y_=Ln(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*si-e.getMinutes()*ys)},(e,t)=>{e.setTime(+e+t*ai)},(e,t)=>(t-e)/ai,e=>e.getHours());Y_.range;const Q_=Ln(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ai)},(e,t)=>(t-e)/ai,e=>e.getUTCHours());Q_.range;const $m=Ln(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ys)/wi,e=>e.getDate()-1);$m.range;const jy=Ln(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/wi,e=>e.getUTCDate()-1);jy.range;const JF=Ln(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/wi,e=>Math.floor(e/wi));JF.range;function oc(e){return Ln(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ys)/H_)}const Ny=oc(0),yv=oc(1),bve=oc(2),jve=oc(3),Gu=oc(4),Nve=oc(5),Sve=oc(6);Ny.range;yv.range;bve.range;jve.range;Gu.range;Nve.range;Sve.range;function lc(e){return Ln(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/H_)}const Sy=lc(0),wv=lc(1),_ve=lc(2),Cve=lc(3),Yu=lc(4),Ave=lc(5),Pve=lc(6);Sy.range;wv.range;_ve.range;Cve.range;Yu.range;Ave.range;Pve.range;const X_=Ln(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());X_.range;const J_=Ln(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());J_.range;const bi=Ln(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());bi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ln(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});bi.range;const ji=Ln(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ji.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ln(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});ji.range;function ZF(e,t,n,r,a,i){const o=[[fl,1,si],[fl,5,5*si],[fl,15,15*si],[fl,30,30*si],[i,1,ys],[i,5,5*ys],[i,15,15*ys],[i,30,30*ys],[a,1,ai],[a,3,3*ai],[a,6,6*ai],[a,12,12*ai],[r,1,wi],[r,2,2*wi],[n,1,H_],[t,1,uk],[t,3,3*uk],[e,1,jw]];function l(u,d,h){const m=d<u;m&&([u,d]=[d,u]);const f=h&&typeof h.range=="function"?h:c(u,d,h),x=f?f.range(u,+d+1):[];return m?x.reverse():x}function c(u,d,h){const m=Math.abs(d-u)/h,f=M_(([,,p])=>p).right(o,m);if(f===o.length)return e.every(i1(u/jw,d/jw,h));if(f===0)return xv.every(Math.max(i1(u,d,h),1));const[x,g]=o[m/o[f-1][2]<o[f][2]/m?f-1:f];return x.every(g)}return[l,c]}const[Eve,kve]=ZF(ji,J_,Sy,JF,Q_,G_),[Tve,Ove]=ZF(bi,X_,Ny,$m,Y_,K_);function Nw(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Sw(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function mh(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Dve(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=ph(a),d=gh(a),h=ph(i),m=gh(i),f=ph(o),x=gh(o),g=ph(l),p=gh(l),v=ph(c),y=gh(c),w={a:K,A:k,b:D,B:J,c:null,d:gk,e:gk,f:nxe,g:hxe,G:mxe,H:Zve,I:exe,j:txe,L:e5,m:rxe,M:sxe,p:W,q:Y,Q:yk,s:wk,S:axe,u:ixe,U:oxe,V:lxe,w:cxe,W:uxe,x:null,X:null,y:dxe,Y:fxe,Z:pxe,"%":xk},S={a:V,A:O,b:le,B:te,c:null,d:vk,e:vk,f:yxe,g:Exe,G:Txe,H:gxe,I:vxe,j:xxe,L:n5,m:wxe,M:bxe,p:ce,q:ge,Q:yk,s:wk,S:jxe,u:Nxe,U:Sxe,V:_xe,w:Cxe,W:Axe,x:null,X:null,y:Pxe,Y:kxe,Z:Oxe,"%":xk},j={a:P,A:T,b:E,B:I,c:R,d:mk,e:mk,f:Yve,g:fk,G:hk,H:pk,I:pk,j:Wve,L:Gve,m:Uve,M:Hve,p:A,q:Vve,Q:Xve,s:Jve,S:Kve,u:Lve,U:Fve,V:zve,w:Rve,W:Bve,x:z,X:U,y:fk,Y:hk,Z:qve,"%":Qve};w.x=N(n,w),w.X=N(r,w),w.c=N(t,w),S.x=N(n,S),S.X=N(r,S),S.c=N(t,S);function N(H,G){return function(ue){var re=[],ve=-1,pe=0,ee=H.length,Pe,Ee,dt;for(ue instanceof Date||(ue=new Date(+ue));++ve<ee;)H.charCodeAt(ve)===37&&(re.push(H.slice(pe,ve)),(Ee=dk[Pe=H.charAt(++ve)])!=null?Pe=H.charAt(++ve):Ee=Pe==="e"?" ":"0",(dt=G[Pe])&&(Pe=dt(ue,Ee)),re.push(Pe),pe=ve+1);return re.push(H.slice(pe,ve)),re.join("")}}function C(H,G){return function(ue){var re=mh(1900,void 0,1),ve=_(re,H,ue+="",0),pe,ee;if(ve!=ue.length)return null;if("Q"in re)return new Date(re.Q);if("s"in re)return new Date(re.s*1e3+("L"in re?re.L:0));if(G&&!("Z"in re)&&(re.Z=0),"p"in re&&(re.H=re.H%12+re.p*12),re.m===void 0&&(re.m="q"in re?re.q:0),"V"in re){if(re.V<1||re.V>53)return null;"w"in re||(re.w=1),"Z"in re?(pe=Sw(mh(re.y,0,1)),ee=pe.getUTCDay(),pe=ee>4||ee===0?wv.ceil(pe):wv(pe),pe=jy.offset(pe,(re.V-1)*7),re.y=pe.getUTCFullYear(),re.m=pe.getUTCMonth(),re.d=pe.getUTCDate()+(re.w+6)%7):(pe=Nw(mh(re.y,0,1)),ee=pe.getDay(),pe=ee>4||ee===0?yv.ceil(pe):yv(pe),pe=$m.offset(pe,(re.V-1)*7),re.y=pe.getFullYear(),re.m=pe.getMonth(),re.d=pe.getDate()+(re.w+6)%7)}else("W"in re||"U"in re)&&("w"in re||(re.w="u"in re?re.u%7:"W"in re?1:0),ee="Z"in re?Sw(mh(re.y,0,1)).getUTCDay():Nw(mh(re.y,0,1)).getDay(),re.m=0,re.d="W"in re?(re.w+6)%7+re.W*7-(ee+5)%7:re.w+re.U*7-(ee+6)%7);return"Z"in re?(re.H+=re.Z/100|0,re.M+=re.Z%100,Sw(re)):Nw(re)}}function _(H,G,ue,re){for(var ve=0,pe=G.length,ee=ue.length,Pe,Ee;ve<pe;){if(re>=ee)return-1;if(Pe=G.charCodeAt(ve++),Pe===37){if(Pe=G.charAt(ve++),Ee=j[Pe in dk?G.charAt(ve++):Pe],!Ee||(re=Ee(H,ue,re))<0)return-1}else if(Pe!=ue.charCodeAt(re++))return-1}return re}function A(H,G,ue){var re=u.exec(G.slice(ue));return re?(H.p=d.get(re[0].toLowerCase()),ue+re[0].length):-1}function P(H,G,ue){var re=f.exec(G.slice(ue));return re?(H.w=x.get(re[0].toLowerCase()),ue+re[0].length):-1}function T(H,G,ue){var re=h.exec(G.slice(ue));return re?(H.w=m.get(re[0].toLowerCase()),ue+re[0].length):-1}function E(H,G,ue){var re=v.exec(G.slice(ue));return re?(H.m=y.get(re[0].toLowerCase()),ue+re[0].length):-1}function I(H,G,ue){var re=g.exec(G.slice(ue));return re?(H.m=p.get(re[0].toLowerCase()),ue+re[0].length):-1}function R(H,G,ue){return _(H,t,G,ue)}function z(H,G,ue){return _(H,n,G,ue)}function U(H,G,ue){return _(H,r,G,ue)}function K(H){return o[H.getDay()]}function k(H){return i[H.getDay()]}function D(H){return c[H.getMonth()]}function J(H){return l[H.getMonth()]}function W(H){return a[+(H.getHours()>=12)]}function Y(H){return 1+~~(H.getMonth()/3)}function V(H){return o[H.getUTCDay()]}function O(H){return i[H.getUTCDay()]}function le(H){return c[H.getUTCMonth()]}function te(H){return l[H.getUTCMonth()]}function ce(H){return a[+(H.getUTCHours()>=12)]}function ge(H){return 1+~~(H.getUTCMonth()/3)}return{format:function(H){var G=N(H+="",w);return G.toString=function(){return H},G},parse:function(H){var G=C(H+="",!1);return G.toString=function(){return H},G},utcFormat:function(H){var G=N(H+="",S);return G.toString=function(){return H},G},utcParse:function(H){var G=C(H+="",!0);return G.toString=function(){return H},G}}}var dk={"-":"",_:" ",0:"0"},Gn=/^\s*\d+/,Mve=/^%/,Ive=/[\\^$*+?|[\]().{}]/g;function Nt(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",i=a.length;return r+(i<n?new Array(n-i+1).join(t)+a:a)}function $ve(e){return e.replace(Ive,"\\$&")}function ph(e){return new RegExp("^(?:"+e.map($ve).join("|")+")","i")}function gh(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Rve(e,t,n){var r=Gn.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Lve(e,t,n){var r=Gn.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Fve(e,t,n){var r=Gn.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function zve(e,t,n){var r=Gn.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Bve(e,t,n){var r=Gn.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function hk(e,t,n){var r=Gn.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function fk(e,t,n){var r=Gn.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function qve(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Vve(e,t,n){var r=Gn.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Uve(e,t,n){var r=Gn.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function mk(e,t,n){var r=Gn.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Wve(e,t,n){var r=Gn.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function pk(e,t,n){var r=Gn.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Hve(e,t,n){var r=Gn.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Kve(e,t,n){var r=Gn.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Gve(e,t,n){var r=Gn.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Yve(e,t,n){var r=Gn.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Qve(e,t,n){var r=Mve.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Xve(e,t,n){var r=Gn.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Jve(e,t,n){var r=Gn.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function gk(e,t){return Nt(e.getDate(),t,2)}function Zve(e,t){return Nt(e.getHours(),t,2)}function exe(e,t){return Nt(e.getHours()%12||12,t,2)}function txe(e,t){return Nt(1+$m.count(bi(e),e),t,3)}function e5(e,t){return Nt(e.getMilliseconds(),t,3)}function nxe(e,t){return e5(e,t)+"000"}function rxe(e,t){return Nt(e.getMonth()+1,t,2)}function sxe(e,t){return Nt(e.getMinutes(),t,2)}function axe(e,t){return Nt(e.getSeconds(),t,2)}function ixe(e){var t=e.getDay();return t===0?7:t}function oxe(e,t){return Nt(Ny.count(bi(e)-1,e),t,2)}function t5(e){var t=e.getDay();return t>=4||t===0?Gu(e):Gu.ceil(e)}function lxe(e,t){return e=t5(e),Nt(Gu.count(bi(e),e)+(bi(e).getDay()===4),t,2)}function cxe(e){return e.getDay()}function uxe(e,t){return Nt(yv.count(bi(e)-1,e),t,2)}function dxe(e,t){return Nt(e.getFullYear()%100,t,2)}function hxe(e,t){return e=t5(e),Nt(e.getFullYear()%100,t,2)}function fxe(e,t){return Nt(e.getFullYear()%1e4,t,4)}function mxe(e,t){var n=e.getDay();return e=n>=4||n===0?Gu(e):Gu.ceil(e),Nt(e.getFullYear()%1e4,t,4)}function pxe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Nt(t/60|0,"0",2)+Nt(t%60,"0",2)}function vk(e,t){return Nt(e.getUTCDate(),t,2)}function gxe(e,t){return Nt(e.getUTCHours(),t,2)}function vxe(e,t){return Nt(e.getUTCHours()%12||12,t,2)}function xxe(e,t){return Nt(1+jy.count(ji(e),e),t,3)}function n5(e,t){return Nt(e.getUTCMilliseconds(),t,3)}function yxe(e,t){return n5(e,t)+"000"}function wxe(e,t){return Nt(e.getUTCMonth()+1,t,2)}function bxe(e,t){return Nt(e.getUTCMinutes(),t,2)}function jxe(e,t){return Nt(e.getUTCSeconds(),t,2)}function Nxe(e){var t=e.getUTCDay();return t===0?7:t}function Sxe(e,t){return Nt(Sy.count(ji(e)-1,e),t,2)}function r5(e){var t=e.getUTCDay();return t>=4||t===0?Yu(e):Yu.ceil(e)}function _xe(e,t){return e=r5(e),Nt(Yu.count(ji(e),e)+(ji(e).getUTCDay()===4),t,2)}function Cxe(e){return e.getUTCDay()}function Axe(e,t){return Nt(wv.count(ji(e)-1,e),t,2)}function Pxe(e,t){return Nt(e.getUTCFullYear()%100,t,2)}function Exe(e,t){return e=r5(e),Nt(e.getUTCFullYear()%100,t,2)}function kxe(e,t){return Nt(e.getUTCFullYear()%1e4,t,4)}function Txe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Yu(e):Yu.ceil(e),Nt(e.getUTCFullYear()%1e4,t,4)}function Oxe(){return"+0000"}function xk(){return"%"}function yk(e){return+e}function wk(e){return Math.floor(+e/1e3)}var _c,s5,a5;Dxe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Dxe(e){return _c=Dve(e),s5=_c.format,_c.parse,a5=_c.utcFormat,_c.utcParse,_c}function Mxe(e){return new Date(e)}function Ixe(e){return e instanceof Date?+e:+new Date(+e)}function Z_(e,t,n,r,a,i,o,l,c,u){var d=F_(),h=d.invert,m=d.domain,f=u(".%L"),x=u(":%S"),g=u("%I:%M"),p=u("%I %p"),v=u("%a %d"),y=u("%b %d"),w=u("%B"),S=u("%Y");function j(N){return(c(N)<N?f:l(N)<N?x:o(N)<N?g:i(N)<N?p:r(N)<N?a(N)<N?v:y:n(N)<N?w:S)(N)}return d.invert=function(N){return new Date(h(N))},d.domain=function(N){return arguments.length?m(Array.from(N,Ixe)):m().map(Mxe)},d.ticks=function(N){var C=m();return e(C[0],C[C.length-1],N??10)},d.tickFormat=function(N,C){return C==null?j:u(C)},d.nice=function(N){var C=m();return(!N||typeof N.range!="function")&&(N=t(C[0],C[C.length-1],N??10)),N?m(WF(C,N)):d},d.copy=function(){return Im(d,Z_(e,t,n,r,a,i,o,l,c,u))},d}function $xe(){return ks.apply(Z_(Tve,Ove,bi,X_,Ny,$m,Y_,K_,fl,s5).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Rxe(){return ks.apply(Z_(Eve,kve,ji,J_,Sy,jy,Q_,G_,fl,a5).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function _y(){var e=0,t=1,n,r,a,i,o=br,l=!1,c;function u(h){return h==null||isNaN(h=+h)?c:o(a===0?.5:(h=(i(h)-n)*a,l?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([e,t]=h,n=i(e=+e),r=i(t=+t),a=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(h){return arguments.length?(l=!!h,u):l},u.interpolator=function(h){return arguments.length?(o=h,u):o};function d(h){return function(m){var f,x;return arguments.length?([f,x]=m,o=h(f,x),u):[o(0),o(1)]}}return u.range=d(qd),u.rangeRound=d(L_),u.unknown=function(h){return arguments.length?(c=h,u):c},function(h){return i=h,n=h(e),r=h(t),a=n===r?0:1/(r-n),u}}function zo(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function i5(){var e=Fo(_y()(br));return e.copy=function(){return zo(e,i5())},Ai.apply(e,arguments)}function o5(){var e=q_(_y()).domain([1,10]);return e.copy=function(){return zo(e,o5()).base(e.base())},Ai.apply(e,arguments)}function l5(){var e=V_(_y());return e.copy=function(){return zo(e,l5()).constant(e.constant())},Ai.apply(e,arguments)}function e2(){var e=U_(_y());return e.copy=function(){return zo(e,e2()).exponent(e.exponent())},Ai.apply(e,arguments)}function Lxe(){return e2.apply(null,arguments).exponent(.5)}function c5(){var e=[],t=br;function n(r){if(r!=null&&!isNaN(r=+r))return t((Dm(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let a of r)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(bo),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,a)=>t(a/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(a,i)=>Sge(e,i/r))},n.copy=function(){return c5(t).domain(e)},Ai.apply(n,arguments)}function Cy(){var e=0,t=.5,n=1,r=1,a,i,o,l,c,u=br,d,h=!1,m;function f(g){return isNaN(g=+g)?m:(g=.5+((g=+d(g))-i)*(r*g<r*i?l:c),u(h?Math.max(0,Math.min(1,g)):g))}f.domain=function(g){return arguments.length?([e,t,n]=g,a=d(e=+e),i=d(t=+t),o=d(n=+n),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),r=i<a?-1:1,f):[e,t,n]},f.clamp=function(g){return arguments.length?(h=!!g,f):h},f.interpolator=function(g){return arguments.length?(u=g,f):u};function x(g){return function(p){var v,y,w;return arguments.length?([v,y,w]=p,u=Qge(g,[v,y,w]),f):[u(0),u(.5),u(1)]}}return f.range=x(qd),f.rangeRound=x(L_),f.unknown=function(g){return arguments.length?(m=g,f):m},function(g){return d=g,a=g(e),i=g(t),o=g(n),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),r=i<a?-1:1,f}}function u5(){var e=Fo(Cy()(br));return e.copy=function(){return zo(e,u5())},Ai.apply(e,arguments)}function d5(){var e=q_(Cy()).domain([.1,1,10]);return e.copy=function(){return zo(e,d5()).base(e.base())},Ai.apply(e,arguments)}function h5(){var e=V_(Cy());return e.copy=function(){return zo(e,h5()).constant(e.constant())},Ai.apply(e,arguments)}function t2(){var e=U_(Cy());return e.copy=function(){return zo(e,t2()).exponent(e.exponent())},Ai.apply(e,arguments)}function Fxe(){return t2.apply(null,arguments).exponent(.5)}const bk=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Mf,scaleDiverging:u5,scaleDivergingLog:d5,scaleDivergingPow:t2,scaleDivergingSqrt:Fxe,scaleDivergingSymlog:h5,scaleIdentity:UF,scaleImplicit:o1,scaleLinear:vv,scaleLog:HF,scaleOrdinal:I_,scalePoint:Wh,scalePow:W_,scaleQuantile:YF,scaleQuantize:QF,scaleRadial:GF,scaleSequential:i5,scaleSequentialLog:o5,scaleSequentialPow:e2,scaleSequentialQuantile:c5,scaleSequentialSqrt:Lxe,scaleSequentialSymlog:l5,scaleSqrt:yve,scaleSymlog:KF,scaleThreshold:XF,scaleTime:$xe,scaleUtc:Rxe,tickFormat:VF},Symbol.toStringTag,{value:"Module"}));var zxe=Td;function Bxe(e,t,n){for(var r=-1,a=e.length;++r<a;){var i=e[r],o=t(i);if(o!=null&&(l===void 0?o===o&&!zxe(o):n(o,l)))var l=o,c=i}return c}var Ay=Bxe;function qxe(e,t){return e>t}var f5=qxe,Vxe=Ay,Uxe=f5,Wxe=zd;function Hxe(e){return e&&e.length?Vxe(e,Wxe,Uxe):void 0}var Kxe=Hxe;const oo=Et(Kxe);function Gxe(e,t){return e<t}var m5=Gxe,Yxe=Ay,Qxe=m5,Xxe=zd;function Jxe(e){return e&&e.length?Yxe(e,Xxe,Qxe):void 0}var Zxe=Jxe;const Py=Et(Zxe);var eye=p_,tye=qa,nye=jF,rye=qr;function sye(e,t){var n=rye(e)?eye:nye;return n(e,tye(t))}var aye=sye,iye=wF,oye=aye;function lye(e,t){return iye(oye(e,t),1)}var cye=lye;const uye=Et(cye);var dye=k_;function hye(e,t){return dye(e,t)}var fye=hye;const Qu=Et(fye);var Vd=1e9,mye={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},r2,rn=!0,_s="[DecimalError] ",El=_s+"Invalid argument: ",n2=_s+"Exponent out of range: ",Ud=Math.floor,tl=Math.pow,pye=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Zr,qn=1e7,Xt=7,p5=9007199254740991,bv=Ud(p5/Xt),Le={};Le.absoluteValue=Le.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Le.comparedTo=Le.cmp=function(e){var t,n,r,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(r=i.d.length,a=e.d.length,t=0,n=r<a?r:a;t<n;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return r===a?0:r>a^i.s<0?1:-1};Le.decimalPlaces=Le.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Xt;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};Le.dividedBy=Le.div=function(e){return ci(this,new this.constructor(e))};Le.dividedToIntegerBy=Le.idiv=function(e){var t=this,n=t.constructor;return Lt(ci(t,new n(e),0,1),n.precision)};Le.equals=Le.eq=function(e){return!this.cmp(e)};Le.exponent=function(){return jn(this)};Le.greaterThan=Le.gt=function(e){return this.cmp(e)>0};Le.greaterThanOrEqualTo=Le.gte=function(e){return this.cmp(e)>=0};Le.isInteger=Le.isint=function(){return this.e>this.d.length-2};Le.isNegative=Le.isneg=function(){return this.s<0};Le.isPositive=Le.ispos=function(){return this.s>0};Le.isZero=function(){return this.s===0};Le.lessThan=Le.lt=function(e){return this.cmp(e)<0};Le.lessThanOrEqualTo=Le.lte=function(e){return this.cmp(e)<1};Le.logarithm=Le.log=function(e){var t,n=this,r=n.constructor,a=r.precision,i=a+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(Zr))throw Error(_s+"NaN");if(n.s<1)throw Error(_s+(n.s?"NaN":"-Infinity"));return n.eq(Zr)?new r(0):(rn=!1,t=ci(Ff(n,i),Ff(e,i),i),rn=!0,Lt(t,a))};Le.minus=Le.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?x5(t,e):g5(t,(e.s=-e.s,e))};Le.modulo=Le.mod=function(e){var t,n=this,r=n.constructor,a=r.precision;if(e=new r(e),!e.s)throw Error(_s+"NaN");return n.s?(rn=!1,t=ci(n,e,0,1).times(e),rn=!0,n.minus(t)):Lt(new r(n),a)};Le.naturalExponential=Le.exp=function(){return v5(this)};Le.naturalLogarithm=Le.ln=function(){return Ff(this)};Le.negated=Le.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Le.plus=Le.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?g5(t,e):x5(t,(e.s=-e.s,e))};Le.precision=Le.sd=function(e){var t,n,r,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(El+e);if(t=jn(a)+1,r=a.d.length-1,n=r*Xt+1,r=a.d[r],r){for(;r%10==0;r/=10)n--;for(r=a.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};Le.squareRoot=Le.sqrt=function(){var e,t,n,r,a,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(_s+"NaN")}for(e=jn(l),rn=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=ja(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Ud((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new c(t)):r=new c(a.toString()),n=c.precision,a=o=n+3;;)if(i=r,r=i.plus(ci(l,i,o+2)).times(.5),ja(i.d).slice(0,o)===(t=ja(r.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(Lt(i,n+1,0),i.times(i).eq(l)){r=i;break}}else if(t!="9999")break;o+=4}return rn=!0,Lt(r,n)};Le.times=Le.mul=function(e){var t,n,r,a,i,o,l,c,u,d=this,h=d.constructor,m=d.d,f=(e=new h(e)).d;if(!d.s||!e.s)return new h(0);for(e.s*=d.s,n=d.e+e.e,c=m.length,u=f.length,c<u&&(i=m,m=f,f=i,o=c,c=u,u=o),i=[],o=c+u,r=o;r--;)i.push(0);for(r=u;--r>=0;){for(t=0,a=c+r;a>r;)l=i[a]+f[r]*m[a-r-1]+t,i[a--]=l%qn|0,t=l/qn|0;i[a]=(i[a]+t)%qn|0}for(;!i[--o];)i.pop();return t?++n:i.shift(),e.d=i,e.e=n,rn?Lt(e,h.precision):e};Le.toDecimalPlaces=Le.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(Ma(e,0,Vd),t===void 0?t=r.rounding:Ma(t,0,8),Lt(n,e+jn(n)+1,t))};Le.toExponential=function(e,t){var n,r=this,a=r.constructor;return e===void 0?n=Hl(r,!0):(Ma(e,0,Vd),t===void 0?t=a.rounding:Ma(t,0,8),r=Lt(new a(r),e+1,t),n=Hl(r,!0,e+1)),n};Le.toFixed=function(e,t){var n,r,a=this,i=a.constructor;return e===void 0?Hl(a):(Ma(e,0,Vd),t===void 0?t=i.rounding:Ma(t,0,8),r=Lt(new i(a),e+jn(a)+1,t),n=Hl(r.abs(),!1,e+jn(r)+1),a.isneg()&&!a.isZero()?"-"+n:n)};Le.toInteger=Le.toint=function(){var e=this,t=e.constructor;return Lt(new t(e),jn(e)+1,t.rounding)};Le.toNumber=function(){return+this};Le.toPower=Le.pow=function(e){var t,n,r,a,i,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Zr);if(l=new c(l),!l.s){if(e.s<1)throw Error(_s+"Infinity");return l}if(l.eq(Zr))return l;if(r=c.precision,e.eq(Zr))return Lt(l,r);if(t=e.e,n=e.d.length-1,o=t>=n,i=l.s,o){if((n=d<0?-d:d)<=p5){for(a=new c(Zr),t=Math.ceil(r/Xt+4),rn=!1;n%2&&(a=a.times(l),Nk(a.d,t)),n=Ud(n/2),n!==0;)l=l.times(l),Nk(l.d,t);return rn=!0,e.s<0?new c(Zr).div(a):Lt(a,r)}}else if(i<0)throw Error(_s+"NaN");return i=i<0&&e.d[Math.max(t,n)]&1?-1:1,l.s=1,rn=!1,a=e.times(Ff(l,r+u)),rn=!0,a=v5(a),a.s=i,a};Le.toPrecision=function(e,t){var n,r,a=this,i=a.constructor;return e===void 0?(n=jn(a),r=Hl(a,n<=i.toExpNeg||n>=i.toExpPos)):(Ma(e,1,Vd),t===void 0?t=i.rounding:Ma(t,0,8),a=Lt(new i(a),e,t),n=jn(a),r=Hl(a,e<=n||n<=i.toExpNeg,e)),r};Le.toSignificantDigits=Le.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(Ma(e,1,Vd),t===void 0?t=r.rounding:Ma(t,0,8)),Lt(new r(n),e,t)};Le.toString=Le.valueOf=Le.val=Le.toJSON=Le[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=jn(e),n=e.constructor;return Hl(e,t<=n.toExpNeg||t>=n.toExpPos)};function g5(e,t){var n,r,a,i,o,l,c,u,d=e.constructor,h=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),rn?Lt(t,h):t;if(c=e.d,u=t.d,o=e.e,a=t.e,c=c.slice(),i=o-a,i){for(i<0?(r=c,i=-i,l=u.length):(r=u,a=o,l=c.length),o=Math.ceil(h/Xt),l=o>l?o+1:l+1,i>l&&(i=l,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,r=u,u=c,c=r),n=0;i;)n=(c[--i]=c[i]+u[i]+n)/qn|0,c[i]%=qn;for(n&&(c.unshift(n),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,rn?Lt(t,h):t}function Ma(e,t,n){if(e!==~~e||e<t||e>n)throw Error(El+e)}function ja(e){var t,n,r,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)r=e[t]+"",n=Xt-r.length,n&&(i+=Vi(n)),i+=r;o=e[t],r=o+"",n=Xt-r.length,n&&(i+=Vi(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var ci=function(){function e(r,a){var i,o=0,l=r.length;for(r=r.slice();l--;)i=r[l]*a+o,r[l]=i%qn|0,o=i/qn|0;return o&&r.unshift(o),r}function t(r,a,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(r[l]!=a[l]){c=r[l]>a[l]?1:-1;break}return c}function n(r,a,i){for(var o=0;i--;)r[i]-=o,o=r[i]<a[i]?1:0,r[i]=o*qn+r[i]-a[i];for(;!r[0]&&r.length>1;)r.shift()}return function(r,a,i,o){var l,c,u,d,h,m,f,x,g,p,v,y,w,S,j,N,C,_,A=r.constructor,P=r.s==a.s?1:-1,T=r.d,E=a.d;if(!r.s)return new A(r);if(!a.s)throw Error(_s+"Division by zero");for(c=r.e-a.e,C=E.length,j=T.length,f=new A(P),x=f.d=[],u=0;E[u]==(T[u]||0);)++u;if(E[u]>(T[u]||0)&&--c,i==null?y=i=A.precision:o?y=i+(jn(r)-jn(a))+1:y=i,y<0)return new A(0);if(y=y/Xt+2|0,u=0,C==1)for(d=0,E=E[0],y++;(u<j||d)&&y--;u++)w=d*qn+(T[u]||0),x[u]=w/E|0,d=w%E|0;else{for(d=qn/(E[0]+1)|0,d>1&&(E=e(E,d),T=e(T,d),C=E.length,j=T.length),S=C,g=T.slice(0,C),p=g.length;p<C;)g[p++]=0;_=E.slice(),_.unshift(0),N=E[0],E[1]>=qn/2&&++N;do d=0,l=t(E,g,C,p),l<0?(v=g[0],C!=p&&(v=v*qn+(g[1]||0)),d=v/N|0,d>1?(d>=qn&&(d=qn-1),h=e(E,d),m=h.length,p=g.length,l=t(h,g,m,p),l==1&&(d--,n(h,C<m?_:E,m))):(d==0&&(l=d=1),h=E.slice()),m=h.length,m<p&&h.unshift(0),n(g,h,p),l==-1&&(p=g.length,l=t(E,g,C,p),l<1&&(d++,n(g,C<p?_:E,p))),p=g.length):l===0&&(d++,g=[0]),x[u++]=d,l&&g[0]?g[p++]=T[S]||0:(g=[T[S]],p=1);while((S++<j||g[0]!==void 0)&&y--)}return x[0]||x.shift(),f.e=c,Lt(f,o?i+jn(f)+1:i)}}();function v5(e,t){var n,r,a,i,o,l,c=0,u=0,d=e.constructor,h=d.precision;if(jn(e)>16)throw Error(n2+jn(e));if(!e.s)return new d(Zr);for(t==null?(rn=!1,l=h):l=t,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(r=Math.log(tl(2,u))/Math.LN10*2+5|0,l+=r,n=a=i=new d(Zr),d.precision=l;;){if(a=Lt(a.times(e),l),n=n.times(++c),o=i.plus(ci(a,n,l)),ja(o.d).slice(0,l)===ja(i.d).slice(0,l)){for(;u--;)i=Lt(i.times(i),l);return d.precision=h,t==null?(rn=!0,Lt(i,h)):i}i=o}}function jn(e){for(var t=e.e*Xt,n=e.d[0];n>=10;n/=10)t++;return t}function _w(e,t,n){if(t>e.LN10.sd())throw rn=!0,n&&(e.precision=n),Error(_s+"LN10 precision limit exceeded");return Lt(new e(e.LN10),t)}function Vi(e){for(var t="";e--;)t+="0";return t}function Ff(e,t){var n,r,a,i,o,l,c,u,d,h=1,m=10,f=e,x=f.d,g=f.constructor,p=g.precision;if(f.s<1)throw Error(_s+(f.s?"NaN":"-Infinity"));if(f.eq(Zr))return new g(0);if(t==null?(rn=!1,u=p):u=t,f.eq(10))return t==null&&(rn=!0),_w(g,u);if(u+=m,g.precision=u,n=ja(x),r=n.charAt(0),i=jn(f),Math.abs(i)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)f=f.times(e),n=ja(f.d),r=n.charAt(0),h++;i=jn(f),r>1?(f=new g("0."+n),i++):f=new g(r+"."+n.slice(1))}else return c=_w(g,u+2,p).times(i+""),f=Ff(new g(r+"."+n.slice(1)),u-m).plus(c),g.precision=p,t==null?(rn=!0,Lt(f,p)):f;for(l=o=f=ci(f.minus(Zr),f.plus(Zr),u),d=Lt(f.times(f),u),a=3;;){if(o=Lt(o.times(d),u),c=l.plus(ci(o,new g(a),u)),ja(c.d).slice(0,u)===ja(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(_w(g,u+2,p).times(i+""))),l=ci(l,new g(h),u),g.precision=p,t==null?(rn=!0,Lt(l,p)):l;l=c,a+=2}}function jk(e,t){var n,r,a;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(r,a),t){if(a-=r,n=n-r-1,e.e=Ud(n/Xt),e.d=[],r=(n+1)%Xt,n<0&&(r+=Xt),r<a){for(r&&e.d.push(+t.slice(0,r)),a-=Xt;r<a;)e.d.push(+t.slice(r,r+=Xt));t=t.slice(r),r=Xt-t.length}else r-=a;for(;r--;)t+="0";if(e.d.push(+t),rn&&(e.e>bv||e.e<-bv))throw Error(n2+n)}else e.s=0,e.e=0,e.d=[0];return e}function Lt(e,t,n){var r,a,i,o,l,c,u,d,h=e.d;for(o=1,i=h[0];i>=10;i/=10)o++;if(r=t-o,r<0)r+=Xt,a=t,u=h[d=0];else{if(d=Math.ceil((r+1)/Xt),i=h.length,d>=i)return e;for(u=i=h[d],o=1;i>=10;i/=10)o++;r%=Xt,a=r-Xt+o}if(n!==void 0&&(i=tl(10,o-a-1),l=u/i%10|0,c=t<0||h[d+1]!==void 0||u%i,c=n<4?(l||c)&&(n==0||n==(e.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(r>0?a>0?u/tl(10,o-a):0:h[d-1])%10&1||n==(e.s<0?8:7))),t<1||!h[0])return c?(i=jn(e),h.length=1,t=t-i-1,h[0]=tl(10,(Xt-t%Xt)%Xt),e.e=Ud(-t/Xt)||0):(h.length=1,h[0]=e.e=e.s=0),e;if(r==0?(h.length=d,i=1,d--):(h.length=d+1,i=tl(10,Xt-r),h[d]=a>0?(u/tl(10,o-a)%tl(10,a)|0)*i:0),c)for(;;)if(d==0){(h[0]+=i)==qn&&(h[0]=1,++e.e);break}else{if(h[d]+=i,h[d]!=qn)break;h[d--]=0,i=1}for(r=h.length;h[--r]===0;)h.pop();if(rn&&(e.e>bv||e.e<-bv))throw Error(n2+jn(e));return e}function x5(e,t){var n,r,a,i,o,l,c,u,d,h,m=e.constructor,f=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),rn?Lt(t,f):t;if(c=e.d,h=t.d,r=t.e,u=e.e,c=c.slice(),o=u-r,o){for(d=o<0,d?(n=c,o=-o,l=h.length):(n=h,r=u,l=c.length),a=Math.max(Math.ceil(f/Xt),l)+2,o>a&&(o=a,n.length=1),n.reverse(),a=o;a--;)n.push(0);n.reverse()}else{for(a=c.length,l=h.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=h[a]){d=c[a]<h[a];break}o=0}for(d&&(n=c,c=h,h=n,t.s=-t.s),l=c.length,a=h.length-l;a>0;--a)c[l++]=0;for(a=h.length;a>o;){if(c[--a]<h[a]){for(i=a;i&&c[--i]===0;)c[i]=qn-1;--c[i],c[a]+=qn}c[a]-=h[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(t.d=c,t.e=r,rn?Lt(t,f):t):new m(0)}function Hl(e,t,n){var r,a=jn(e),i=ja(e.d),o=i.length;return t?(n&&(r=n-o)>0?i=i.charAt(0)+"."+i.slice(1)+Vi(r):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Vi(-a-1)+i,n&&(r=n-o)>0&&(i+=Vi(r))):a>=o?(i+=Vi(a+1-o),n&&(r=n-a-1)>0&&(i=i+"."+Vi(r))):((r=a+1)<o&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-o)>0&&(a+1===o&&(i+="."),i+=Vi(r))),e.s<0?"-"+i:i}function Nk(e,t){if(e.length>t)return e.length=t,!0}function y5(e){var t,n,r;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(El+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return jk(o,i.toString())}else if(typeof i!="string")throw Error(El+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,pye.test(i))jk(o,i);else throw Error(El+i)}if(a.prototype=Le,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=y5,a.config=a.set=gye,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return a.config(e),a}function gye(e){if(!e||typeof e!="object")throw Error(_s+"Object expected");var t,n,r,a=["precision",1,Vd,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((r=e[n=a[t]])!==void 0)if(Ud(r)===r&&r>=a[t+1]&&r<=a[t+2])this[n]=r;else throw Error(El+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(El+n+": "+r);return this}var r2=y5(mye);Zr=new r2(1);const Mt=r2;function vye(e){return bye(e)||wye(e)||yye(e)||xye()}function xye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yye(e,t){if(e){if(typeof e=="string")return d1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d1(e,t)}}function wye(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function bye(e){if(Array.isArray(e))return d1(e)}function d1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var jye=function(t){return t},w5={"@@functional/placeholder":!0},b5=function(t){return t===w5},Sk=function(t){return function n(){return arguments.length===0||arguments.length===1&&b5(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},Nye=function e(t,n){return t===1?n:Sk(function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];var o=a.filter(function(l){return l!==w5}).length;return o>=t?n.apply(void 0,a):e(t-o,Sk(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=a.map(function(h){return b5(h)?c.shift():h});return n.apply(void 0,vye(d).concat(c))}))})},Ey=function(t){return Nye(t.length,t)},h1=function(t,n){for(var r=[],a=t;a<n;++a)r[a-t]=a;return r},Sye=Ey(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),_ye=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return jye;var a=n.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},f1=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},j5=function(t){var n=null,r=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n&&i.every(function(l,c){return l===n[c]})||(n=i,r=t.apply(void 0,i)),r}};function Cye(e){var t;return e===0?t=1:t=Math.floor(new Mt(e).abs().log(10).toNumber())+1,t}function Aye(e,t,n){for(var r=new Mt(e),a=0,i=[];r.lt(t)&&a<1e5;)i.push(r.toNumber()),r=r.add(n),a++;return i}var Pye=Ey(function(e,t,n){var r=+e,a=+t;return r+n*(a-r)}),Eye=Ey(function(e,t,n){var r=t-+e;return r=r||1/0,(n-e)/r}),kye=Ey(function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});const ky={rangeStep:Aye,getDigitCount:Cye,interpolateNumber:Pye,uninterpolateNumber:Eye,uninterpolateTruncation:kye};function m1(e){return Dye(e)||Oye(e)||N5(e)||Tye()}function Tye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Oye(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Dye(e){if(Array.isArray(e))return p1(e)}function zf(e,t){return $ye(e)||Iye(e,t)||N5(e,t)||Mye()}function Mye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N5(e,t){if(e){if(typeof e=="string")return p1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p1(e,t)}}function p1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Iye(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,a=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(r=(l=o.next()).done)&&(n.push(l.value),!(t&&n.length===t));r=!0);}catch(c){a=!0,i=c}finally{try{!r&&o.return!=null&&o.return()}finally{if(a)throw i}}return n}}function $ye(e){if(Array.isArray(e))return e}function S5(e){var t=zf(e,2),n=t[0],r=t[1],a=n,i=r;return n>r&&(a=r,i=n),[a,i]}function _5(e,t,n){if(e.lte(0))return new Mt(0);var r=ky.getDigitCount(e.toNumber()),a=new Mt(10).pow(r),i=e.div(a),o=r!==1?.05:.1,l=new Mt(Math.ceil(i.div(o).toNumber())).add(n).mul(o),c=l.mul(a);return t?c:new Mt(Math.ceil(c))}function Rye(e,t,n){var r=1,a=new Mt(e);if(!a.isint()&&n){var i=Math.abs(e);i<1?(r=new Mt(10).pow(ky.getDigitCount(e)-1),a=new Mt(Math.floor(a.div(r).toNumber())).mul(r)):i>1&&(a=new Mt(Math.floor(e)))}else e===0?a=new Mt(Math.floor((t-1)/2)):n||(a=new Mt(Math.floor(e)));var o=Math.floor((t-1)/2),l=_ye(Sye(function(c){return a.add(new Mt(c-o).mul(r)).toNumber()}),h1);return l(0,t)}function C5(e,t,n,r){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new Mt(0),tickMin:new Mt(0),tickMax:new Mt(0)};var i=_5(new Mt(t).sub(e).div(n-1),r,a),o;e<=0&&t>=0?o=new Mt(0):(o=new Mt(e).add(t).div(2),o=o.sub(new Mt(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new Mt(t).sub(o).div(i).toNumber()),u=l+c+1;return u>n?C5(e,t,n,r,a+1):(u<n&&(c=t>0?c+(n-u):c,l=t>0?l:l+(n-u)),{step:i,tickMin:o.sub(new Mt(l).mul(i)),tickMax:o.add(new Mt(c).mul(i))})}function Lye(e){var t=zf(e,2),n=t[0],r=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=S5([n,r]),c=zf(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var h=d===1/0?[u].concat(m1(h1(0,a-1).map(function(){return 1/0}))):[].concat(m1(h1(0,a-1).map(function(){return-1/0})),[d]);return n>r?f1(h):h}if(u===d)return Rye(u,a,i);var m=C5(u,d,o,i),f=m.step,x=m.tickMin,g=m.tickMax,p=ky.rangeStep(x,g.add(new Mt(.1).mul(f)),f);return n>r?f1(p):p}function Fye(e,t){var n=zf(e,2),r=n[0],a=n[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=S5([r,a]),l=zf(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[r,a];if(c===u)return[c];var d=Math.max(t,2),h=_5(new Mt(u).sub(c).div(d-1),i,0),m=[].concat(m1(ky.rangeStep(new Mt(c),new Mt(u).sub(new Mt(.99).mul(h)),h)),[u]);return r>a?f1(m):m}var zye=j5(Lye),Bye=j5(Fye),qye="Invariant failed";function Kl(e,t){throw new Error(qye)}var Vye=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Xu(e){"@babel/helpers - typeof";return Xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xu(e)}function jv(){return jv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jv.apply(this,arguments)}function Uye(e,t){return Gye(e)||Kye(e,t)||Hye(e,t)||Wye()}function Wye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hye(e,t){if(e){if(typeof e=="string")return _k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _k(e,t)}}function _k(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kye(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Gye(e){if(Array.isArray(e))return e}function Yye(e,t){if(e==null)return{};var n=Qye(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Qye(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Xye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,E5(r.key),r)}}function Zye(e,t,n){return t&&Jye(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function e0e(e,t,n){return t=Nv(t),t0e(e,A5()?Reflect.construct(t,n||[],Nv(e).constructor):t.apply(e,n))}function t0e(e,t){if(t&&(Xu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n0e(e)}function n0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(A5=function(){return!!e})()}function Nv(e){return Nv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Nv(e)}function r0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g1(e,t)}function g1(e,t){return g1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},g1(e,t)}function P5(e,t,n){return t=E5(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E5(e){var t=s0e(e,"string");return Xu(t)=="symbol"?t:t+""}function s0e(e,t){if(Xu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Xu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ty=function(e){function t(){return Xye(this,t),e0e(this,t,arguments)}return r0e(t,e),Zye(t,[{key:"render",value:function(){var r=this.props,a=r.offset,i=r.layout,o=r.width,l=r.dataKey,c=r.data,u=r.dataPointFormatter,d=r.xAxis,h=r.yAxis,m=Yye(r,Vye),f=Ve(m,!1);this.props.direction==="x"&&d.type!=="number"&&Kl();var x=c.map(function(g){var p=u(g,l),v=p.x,y=p.y,w=p.value,S=p.errorVal;if(!S)return null;var j=[],N,C;if(Array.isArray(S)){var _=Uye(S,2);N=_[0],C=_[1]}else N=C=S;if(i==="vertical"){var A=d.scale,P=y+a,T=P+o,E=P-o,I=A(w-N),R=A(w+C);j.push({x1:R,y1:T,x2:R,y2:E}),j.push({x1:I,y1:P,x2:R,y2:P}),j.push({x1:I,y1:T,x2:I,y2:E})}else if(i==="horizontal"){var z=h.scale,U=v+a,K=U-o,k=U+o,D=z(w-N),J=z(w+C);j.push({x1:K,y1:J,x2:k,y2:J}),j.push({x1:U,y1:D,x2:U,y2:J}),j.push({x1:K,y1:D,x2:k,y2:D})}return L.createElement(vt,jv({className:"recharts-errorBar",key:"bar-".concat(j.map(function(W){return"".concat(W.x1,"-").concat(W.x2,"-").concat(W.y1,"-").concat(W.y2)}))},f),j.map(function(W){return L.createElement("line",jv({},W,{key:"line-".concat(W.x1,"-").concat(W.x2,"-").concat(W.y1,"-").concat(W.y2)}))}))});return L.createElement(vt,{className:"recharts-errorBars"},x)}}])}(L.Component);P5(Ty,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});P5(Ty,"displayName","ErrorBar");function Bf(e){"@babel/helpers - typeof";return Bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bf(e)}function Ck(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ko(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ck(Object(n),!0).forEach(function(r){a0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ck(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function a0e(e,t,n){return t=i0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i0e(e){var t=o0e(e,"string");return Bf(t)=="symbol"?t:t+""}function o0e(e,t){if(Bf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Bf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var k5=function(t){var n=t.children,r=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,o=Qr(n,lu);if(!o)return null;var l=lu.defaultProps,c=l!==void 0?Ko(Ko({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(r||[]).reduce(function(d,h){var m=h.item,f=h.props,x=f.sectors||f.data||[];return d.concat(x.map(function(g){return{type:o.props.iconType||m.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):u=(r||[]).map(function(d){var h=d.item,m=h.type.defaultProps,f=m!==void 0?Ko(Ko({},m),h.props):{},x=f.dataKey,g=f.name,p=f.legendType,v=f.hide;return{inactive:v,dataKey:x,type:c.iconType||p||"square",color:s2(h),value:g||x,payload:f}}),Ko(Ko(Ko({},c),lu.getWithHeight(o,a)),{},{payload:u,item:o})};function qf(e){"@babel/helpers - typeof";return qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qf(e)}function Ak(e){return d0e(e)||u0e(e)||c0e(e)||l0e()}function l0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c0e(e,t){if(e){if(typeof e=="string")return v1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v1(e,t)}}function u0e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function d0e(e){if(Array.isArray(e))return v1(e)}function v1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function hn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Pk(Object(n),!0).forEach(function(r){uu(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pk(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uu(e,t,n){return t=h0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h0e(e){var t=f0e(e,"string");return qf(t)=="symbol"?t:t+""}function f0e(e,t){if(qf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(qf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dn(e,t,n){return at(e)||at(t)?n:In(t)?ss(e,t,n):Ge(t)?t(e):n}function Hh(e,t,n,r){var a=uye(e,function(l){return Dn(l,t)});if(n==="number"){var i=a.filter(function(l){return we(l)||parseFloat(l)});return i.length?[Py(i),oo(i)]:[1/0,-1/0]}var o=r?a.filter(function(l){return!at(l)}):a;return o.map(function(l){return In(l)||l instanceof Date?l:""})}var m0e=function(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,u=0;u<l;u++){var d=u>0?a[u-1].coordinate:a[l-1].coordinate,h=a[u].coordinate,m=u>=l-1?a[0].coordinate:a[u+1].coordinate,f=void 0;if(yr(h-d)!==yr(m-h)){var x=[];if(yr(m-h)===yr(c[1]-c[0])){f=m;var g=h+c[1]-c[0];x[0]=Math.min(g,(g+d)/2),x[1]=Math.max(g,(g+d)/2)}else{f=d;var p=m+c[1]-c[0];x[0]=Math.min(h,(p+h)/2),x[1]=Math.max(h,(p+h)/2)}var v=[Math.min(h,(f+h)/2),Math.max(h,(f+h)/2)];if(t>v[0]&&t<=v[1]||t>=x[0]&&t<=x[1]){o=a[u].index;break}}else{var y=Math.min(d,m),w=Math.max(d,m);if(t>(y+h)/2&&t<=(w+h)/2){o=a[u].index;break}}}else for(var S=0;S<l;S++)if(S===0&&t<=(r[S].coordinate+r[S+1].coordinate)/2||S>0&&S<l-1&&t>(r[S].coordinate+r[S-1].coordinate)/2&&t<=(r[S].coordinate+r[S+1].coordinate)/2||S===l-1&&t>(r[S].coordinate+r[S-1].coordinate)/2){o=r[S].index;break}return o},s2=function(t){var n,r=t,a=r.type.displayName,i=(n=t.type)!==null&&n!==void 0&&n.defaultProps?hn(hn({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},p0e=function(t){var n=t.barSize,r=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},l=Object.keys(i),c=0,u=l.length;c<u;c++)for(var d=i[l[c]].stackGroups,h=Object.keys(d),m=0,f=h.length;m<f;m++){var x=d[h[m]],g=x.items,p=x.cateAxisId,v=g.filter(function(C){return li(C.type).indexOf("Bar")>=0});if(v&&v.length){var y=v[0].type.defaultProps,w=y!==void 0?hn(hn({},y),v[0].props):v[0].props,S=w.barSize,j=w[p];o[j]||(o[j]=[]);var N=at(S)?n:S;o[j].push({item:v[0],stackList:v.slice(1),barSize:at(N)?void 0:wr(N,r,0)})}}return o},g0e=function(t){var n=t.barGap,r=t.barCategoryGap,a=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var u=wr(n,a,0,!0),d,h=[];if(o[0].barSize===+o[0].barSize){var m=!1,f=a/c,x=o.reduce(function(S,j){return S+j.barSize||0},0);x+=(c-1)*u,x>=a&&(x-=(c-1)*u,u=0),x>=a&&f>0&&(m=!0,f*=.9,x=c*f);var g=(a-x)/2>>0,p={offset:g-u,size:0};d=o.reduce(function(S,j){var N={item:j.item,position:{offset:p.offset+p.size+u,size:m?f:j.barSize}},C=[].concat(Ak(S),[N]);return p=C[C.length-1].position,j.stackList&&j.stackList.length&&j.stackList.forEach(function(_){C.push({item:_,position:p})}),C},h)}else{var v=wr(r,a,0,!0);a-2*v-(c-1)*u<=0&&(u=0);var y=(a-2*v-(c-1)*u)/c;y>1&&(y>>=0);var w=l===+l?Math.min(y,l):y;d=o.reduce(function(S,j,N){var C=[].concat(Ak(S),[{item:j.item,position:{offset:v+(y+u)*N+(y-w)/2,size:w}}]);return j.stackList&&j.stackList.length&&j.stackList.forEach(function(_){C.push({item:_,position:C[C.length-1].position})}),C},h)}return d},v0e=function(t,n,r,a){var i=r.children,o=r.width,l=r.margin,c=o-(l.left||0)-(l.right||0),u=k5({children:i,legendWidth:c});if(u){var d=a||{},h=d.width,m=d.height,f=u.align,x=u.verticalAlign,g=u.layout;if((g==="vertical"||g==="horizontal"&&x==="middle")&&f!=="center"&&we(t[f]))return hn(hn({},t),{},uu({},f,t[f]+(h||0)));if((g==="horizontal"||g==="vertical"&&f==="center")&&x!=="middle"&&we(t[x]))return hn(hn({},t),{},uu({},x,t[x]+(m||0)))}return t},x0e=function(t,n,r){return at(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},T5=function(t,n,r,a,i){var o=n.props.children,l=js(o,Ty).filter(function(u){return x0e(a,i,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var h=Dn(d,r);if(at(h))return u;var m=Array.isArray(h)?[Py(h),oo(h)]:[h,h],f=c.reduce(function(x,g){var p=Dn(d,g,0),v=m[0]-Math.abs(Array.isArray(p)?p[0]:p),y=m[1]+Math.abs(Array.isArray(p)?p[1]:p);return[Math.min(v,x[0]),Math.max(y,x[1])]},[1/0,-1/0]);return[Math.min(f[0],u[0]),Math.max(f[1],u[1])]},[1/0,-1/0])}return null},y0e=function(t,n,r,a,i){var o=n.map(function(l){return T5(t,l,r,i,a)}).filter(function(l){return!at(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},O5=function(t,n,r,a,i){var o=n.map(function(c){var u=c.props.dataKey;return r==="number"&&u&&T5(t,c,u,a)||Hh(t,u,r,i)});if(r==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var d=0,h=u.length;d<h;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},D5=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},M5=function(t,n,r,a){if(a)return t.map(function(c){return c.coordinate});var i,o,l=t.map(function(c){return c.coordinate===n&&(i=!0),c.coordinate===r&&(o=!0),c.coordinate});return i||l.push(n),o||l.push(r),l},ii=function(t,n,r){if(!t)return null;var a=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(n||r)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?yr(l[0]-l[1])*2*u:u,n&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(h){var m=i?i.indexOf(h):h;return{coordinate:a(m)+u,value:h,offset:u}});return d.filter(function(h){return!$d(h.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(h,m){return{coordinate:a(h)+u,value:h,index:m,offset:u}}):a.ticks&&!r?a.ticks(t.tickCount).map(function(h){return{coordinate:a(h)+u,value:h,offset:u}}):a.domain().map(function(h,m){return{coordinate:a(h)+u,value:i?i[h]:h,index:m,offset:u}})},Cw=new WeakMap,Ip=function(t,n){if(typeof n!="function")return t;Cw.has(t)||Cw.set(t,new WeakMap);var r=Cw.get(t);if(r.has(n))return r.get(n);var a=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,a),a},I5=function(t,n,r){var a=t.scale,i=t.type,o=t.layout,l=t.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Mf(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:vv(),realScaleType:"linear"}:i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Wh(),realScaleType:"point"}:i==="category"?{scale:Mf(),realScaleType:"band"}:{scale:vv(),realScaleType:"linear"};if(Vl(a)){var c="scale".concat(my(a));return{scale:(bk[c]||Wh)(),realScaleType:bk[c]?c:"point"}}return Ge(a)?{scale:a}:{scale:Wh(),realScaleType:"point"}},Ek=1e-4,$5=function(t){var n=t.domain();if(!(!n||n.length<=2)){var r=n.length,a=t.range(),i=Math.min(a[0],a[1])-Ek,o=Math.max(a[0],a[1])+Ek,l=t(n[0]),c=t(n[r-1]);(l<i||l>o||c<i||c>o)&&t.domain([n[0],n[r-1]])}},w0e=function(t,n){if(!t)return null;for(var r=0,a=t.length;r<a;r++)if(t[r].item===n)return t[r].position;return null},b0e=function(t,n){if(!n||n.length!==2||!we(n[0])||!we(n[1]))return t;var r=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]),i=[t[0],t[1]];return(!we(t[0])||t[0]<r)&&(i[0]=r),(!we(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<r&&(i[1]=r),i},j0e=function(t){var n=t.length;if(!(n<=0))for(var r=0,a=t[0].length;r<a;++r)for(var i=0,o=0,l=0;l<n;++l){var c=$d(t[l][r][1])?t[l][r][0]:t[l][r][1];c>=0?(t[l][r][0]=i,t[l][r][1]=i+c,i=t[l][r][1]):(t[l][r][0]=o,t[l][r][1]=o+c,o=t[l][r][1])}},N0e=function(t){var n=t.length;if(!(n<=0))for(var r=0,a=t[0].length;r<a;++r)for(var i=0,o=0;o<n;++o){var l=$d(t[o][r][1])?t[o][r][0]:t[o][r][1];l>=0?(t[o][r][0]=i,t[o][r][1]=i+l,i=t[o][r][1]):(t[o][r][0]=0,t[o][r][1]=0)}},S0e={sign:j0e,expand:Vie,none:qu,silhouette:Uie,wiggle:Wie,positive:N0e},_0e=function(t,n,r){var a=n.map(function(l){return l.props.dataKey}),i=S0e[r],o=qie().keys(a).value(function(l,c){return+Dn(l,c,0)}).order(qj).offset(i);return o(t)},C0e=function(t,n,r,a,i,o){if(!t)return null;var l=o?n.reverse():n,c={},u=l.reduce(function(h,m){var f,x=(f=m.type)!==null&&f!==void 0&&f.defaultProps?hn(hn({},m.type.defaultProps),m.props):m.props,g=x.stackId,p=x.hide;if(p)return h;var v=x[r],y=h[v]||{hasStack:!1,stackGroups:{}};if(In(g)){var w=y.stackGroups[g]||{numericAxisId:r,cateAxisId:a,items:[]};w.items.push(m),y.hasStack=!0,y.stackGroups[g]=w}else y.stackGroups[Rd("_stackId_")]={numericAxisId:r,cateAxisId:a,items:[m]};return hn(hn({},h),{},uu({},v,y))},c),d={};return Object.keys(u).reduce(function(h,m){var f=u[m];if(f.hasStack){var x={};f.stackGroups=Object.keys(f.stackGroups).reduce(function(g,p){var v=f.stackGroups[p];return hn(hn({},g),{},uu({},p,{numericAxisId:r,cateAxisId:a,items:v.items,stackedData:_0e(t,v.items,i)}))},x)}return hn(hn({},h),{},uu({},m,f))},d)},R5=function(t,n){var r=n.realScaleType,a=n.type,i=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=r||n.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=zye(u,i,l);return t.domain([Py(d),oo(d)]),{niceTicks:d}}if(i&&a==="number"){var h=t.domain(),m=Bye(h,i,l);return{niceTicks:m}}return null};function kk(e){var t=e.axis,n=e.ticks,r=e.bandSize,a=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!at(a[t.dataKey])){var l=Qg(n,"value",a[t.dataKey]);if(l)return l.coordinate+r/2}return n[i]?n[i].coordinate+r/2:null}var c=Dn(a,at(o)?t.dataKey:o);return at(c)?null:t.scale(c)}var Tk=function(t){var n=t.axis,r=t.ticks,a=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(n.type==="category")return r[l]?r[l].coordinate+a:null;var c=Dn(o,n.dataKey,n.domain[l]);return at(c)?null:n.scale(c)-i/2+a},A0e=function(t){var n=t.numericAxis,r=n.scale.domain();if(n.type==="number"){var a=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return a<=0&&i>=0?0:i<0?i:a}return r[0]},P0e=function(t,n){var r,a=(r=t.type)!==null&&r!==void 0&&r.defaultProps?hn(hn({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(In(i)){var o=n[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},E0e=function(t){return t.reduce(function(n,r){return[Py(r.concat([n[0]]).filter(we)),oo(r.concat([n[1]]).filter(we))]},[1/0,-1/0])},L5=function(t,n,r){return Object.keys(t).reduce(function(a,i){var o=t[i],l=o.stackedData,c=l.reduce(function(u,d){var h=E0e(d.slice(n,r+1));return[Math.min(u[0],h[0]),Math.max(u[1],h[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},Ok=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Dk=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,x1=function(t,n,r){if(Ge(t))return t(n,r);if(!Array.isArray(t))return n;var a=[];if(we(t[0]))a[0]=r?t[0]:Math.min(t[0],n[0]);else if(Ok.test(t[0])){var i=+Ok.exec(t[0])[1];a[0]=n[0]-i}else Ge(t[0])?a[0]=t[0](n[0]):a[0]=n[0];if(we(t[1]))a[1]=r?t[1]:Math.max(t[1],n[1]);else if(Dk.test(t[1])){var o=+Dk.exec(t[1])[1];a[1]=n[1]+o}else Ge(t[1])?a[1]=t[1](n[1]):a[1]=n[1];return a},Sv=function(t,n,r){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!r||a>0)return a}if(t&&n&&n.length>=2){for(var i=O_(n,function(h){return h.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var u=i[l],d=i[l-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},Mk=function(t,n,r){return!t||!t.length||Qu(t,ss(r,"type.defaultProps.domain"))?n:t},F5=function(t,n){var r=t.type.defaultProps?hn(hn({},t.type.defaultProps),t.props):t.props,a=r.dataKey,i=r.name,o=r.unit,l=r.formatter,c=r.tooltipType,u=r.chartType,d=r.hide;return hn(hn({},Ve(t,!1)),{},{dataKey:a,unit:o,formatter:l,name:i||a,color:s2(t),value:Dn(n,a),type:c,payload:n,chartType:u,hide:d})};function Vf(e){"@babel/helpers - typeof";return Vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vf(e)}function Ik(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Qa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ik(Object(n),!0).forEach(function(r){z5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ik(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function z5(e,t,n){return t=k0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k0e(e){var t=T0e(e,"string");return Vf(t)=="symbol"?t:t+""}function T0e(e,t){if(Vf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Vf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function O0e(e,t){return $0e(e)||I0e(e,t)||M0e(e,t)||D0e()}function D0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function M0e(e,t){if(e){if(typeof e=="string")return $k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $k(e,t)}}function $k(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function I0e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function $0e(e){if(Array.isArray(e))return e}var _v=Math.PI/180,R0e=function(t){return t*180/Math.PI},Ht=function(t,n,r,a){return{x:t+Math.cos(-_v*a)*r,y:n+Math.sin(-_v*a)*r}},B5=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},L0e=function(t,n,r,a,i){var o=t.width,l=t.height,c=t.startAngle,u=t.endAngle,d=wr(t.cx,o,o/2),h=wr(t.cy,l,l/2),m=B5(o,l,r),f=wr(t.innerRadius,m,0),x=wr(t.outerRadius,m,m*.8),g=Object.keys(n);return g.reduce(function(p,v){var y=n[v],w=y.domain,S=y.reversed,j;if(at(y.range))a==="angleAxis"?j=[c,u]:a==="radiusAxis"&&(j=[f,x]),S&&(j=[j[1],j[0]]);else{j=y.range;var N=j,C=O0e(N,2);c=C[0],u=C[1]}var _=I5(y,i),A=_.realScaleType,P=_.scale;P.domain(w).range(j),$5(P);var T=R5(P,Qa(Qa({},y),{},{realScaleType:A})),E=Qa(Qa(Qa({},y),T),{},{range:j,radius:x,realScaleType:A,scale:P,cx:d,cy:h,innerRadius:f,outerRadius:x,startAngle:c,endAngle:u});return Qa(Qa({},p),{},z5({},v,E))},{})},F0e=function(t,n){var r=t.x,a=t.y,i=n.x,o=n.y;return Math.sqrt(Math.pow(r-i,2)+Math.pow(a-o,2))},z0e=function(t,n){var r=t.x,a=t.y,i=n.cx,o=n.cy,l=F0e({x:r,y:a},{x:i,y:o});if(l<=0)return{radius:l};var c=(r-i)/l,u=Math.acos(c);return a>o&&(u=2*Math.PI-u),{radius:l,angle:R0e(u),angleInRadian:u}},B0e=function(t){var n=t.startAngle,r=t.endAngle,a=Math.floor(n/360),i=Math.floor(r/360),o=Math.min(a,i);return{startAngle:n-o*360,endAngle:r-o*360}},q0e=function(t,n){var r=n.startAngle,a=n.endAngle,i=Math.floor(r/360),o=Math.floor(a/360),l=Math.min(i,o);return t+l*360},Rk=function(t,n){var r=t.x,a=t.y,i=z0e({x:r,y:a},n),o=i.radius,l=i.angle,c=n.innerRadius,u=n.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var d=B0e(n),h=d.startAngle,m=d.endAngle,f=l,x;if(h<=m){for(;f>m;)f-=360;for(;f<h;)f+=360;x=f>=h&&f<=m}else{for(;f>h;)f-=360;for(;f<m;)f+=360;x=f>=m&&f<=h}return x?Qa(Qa({},n),{},{radius:o,angle:q0e(f,n)}):null},q5=function(t){return!b.isValidElement(t)&&!Ge(t)&&typeof t!="boolean"?t.className:""};function Uf(e){"@babel/helpers - typeof";return Uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uf(e)}var V0e=["offset"];function U0e(e){return G0e(e)||K0e(e)||H0e(e)||W0e()}function W0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function H0e(e,t){if(e){if(typeof e=="string")return y1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y1(e,t)}}function K0e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function G0e(e){if(Array.isArray(e))return y1(e)}function y1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Y0e(e,t){if(e==null)return{};var n=Q0e(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Q0e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Lk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function An(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Lk(Object(n),!0).forEach(function(r){X0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lk(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function X0e(e,t,n){return t=J0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J0e(e){var t=Z0e(e,"string");return Uf(t)=="symbol"?t:t+""}function Z0e(e,t){if(Uf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Uf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wf(){return Wf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wf.apply(this,arguments)}var ewe=function(t){var n=t.value,r=t.formatter,a=at(t.children)?n:t.children;return Ge(r)?r(a):a},twe=function(t,n){var r=yr(n-t),a=Math.min(Math.abs(n-t),360);return r*a},nwe=function(t,n,r){var a=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,u=c.cx,d=c.cy,h=c.innerRadius,m=c.outerRadius,f=c.startAngle,x=c.endAngle,g=c.clockWise,p=(h+m)/2,v=twe(f,x),y=v>=0?1:-1,w,S;a==="insideStart"?(w=f+y*o,S=g):a==="insideEnd"?(w=x-y*o,S=!g):a==="end"&&(w=x+y*o,S=g),S=v<=0?S:!S;var j=Ht(u,d,p,w),N=Ht(u,d,p,w+(S?1:-1)*359),C="M".concat(j.x,",").concat(j.y,`
    A`).concat(p,",").concat(p,",0,1,").concat(S?0:1,`,
    `).concat(N.x,",").concat(N.y),_=at(t.id)?Rd("recharts-radial-line-"):t.id;return L.createElement("text",Wf({},r,{dominantBaseline:"central",className:st("recharts-radial-bar-label",l)}),L.createElement("defs",null,L.createElement("path",{id:_,d:C})),L.createElement("textPath",{xlinkHref:"#".concat(_)},n))},rwe=function(t){var n=t.viewBox,r=t.offset,a=t.position,i=n,o=i.cx,l=i.cy,c=i.innerRadius,u=i.outerRadius,d=i.startAngle,h=i.endAngle,m=(d+h)/2;if(a==="outside"){var f=Ht(o,l,u+r,m),x=f.x,g=f.y;return{x,y:g,textAnchor:x>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var p=(c+u)/2,v=Ht(o,l,p,m),y=v.x,w=v.y;return{x:y,y:w,textAnchor:"middle",verticalAnchor:"middle"}},swe=function(t){var n=t.viewBox,r=t.parentViewBox,a=t.offset,i=t.position,o=n,l=o.x,c=o.y,u=o.width,d=o.height,h=d>=0?1:-1,m=h*a,f=h>0?"end":"start",x=h>0?"start":"end",g=u>=0?1:-1,p=g*a,v=g>0?"end":"start",y=g>0?"start":"end";if(i==="top"){var w={x:l+u/2,y:c-h*a,textAnchor:"middle",verticalAnchor:f};return An(An({},w),r?{height:Math.max(c-r.y,0),width:u}:{})}if(i==="bottom"){var S={x:l+u/2,y:c+d+m,textAnchor:"middle",verticalAnchor:x};return An(An({},S),r?{height:Math.max(r.y+r.height-(c+d),0),width:u}:{})}if(i==="left"){var j={x:l-p,y:c+d/2,textAnchor:v,verticalAnchor:"middle"};return An(An({},j),r?{width:Math.max(j.x-r.x,0),height:d}:{})}if(i==="right"){var N={x:l+u+p,y:c+d/2,textAnchor:y,verticalAnchor:"middle"};return An(An({},N),r?{width:Math.max(r.x+r.width-N.x,0),height:d}:{})}var C=r?{width:u,height:d}:{};return i==="insideLeft"?An({x:l+p,y:c+d/2,textAnchor:y,verticalAnchor:"middle"},C):i==="insideRight"?An({x:l+u-p,y:c+d/2,textAnchor:v,verticalAnchor:"middle"},C):i==="insideTop"?An({x:l+u/2,y:c+m,textAnchor:"middle",verticalAnchor:x},C):i==="insideBottom"?An({x:l+u/2,y:c+d-m,textAnchor:"middle",verticalAnchor:f},C):i==="insideTopLeft"?An({x:l+p,y:c+m,textAnchor:y,verticalAnchor:x},C):i==="insideTopRight"?An({x:l+u-p,y:c+m,textAnchor:v,verticalAnchor:x},C):i==="insideBottomLeft"?An({x:l+p,y:c+d-m,textAnchor:y,verticalAnchor:f},C):i==="insideBottomRight"?An({x:l+u-p,y:c+d-m,textAnchor:v,verticalAnchor:f},C):Od(i)&&(we(i.x)||dl(i.x))&&(we(i.y)||dl(i.y))?An({x:l+wr(i.x,u),y:c+wr(i.y,d),textAnchor:"end",verticalAnchor:"end"},C):An({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},C)},awe=function(t){return"cx"in t&&we(t.cx)};function Un(e){var t=e.offset,n=t===void 0?5:t,r=Y0e(e,V0e),a=An({offset:n},r),i=a.viewBox,o=a.position,l=a.value,c=a.children,u=a.content,d=a.className,h=d===void 0?"":d,m=a.textBreakAll;if(!i||at(l)&&at(c)&&!b.isValidElement(u)&&!Ge(u))return null;if(b.isValidElement(u))return b.cloneElement(u,a);var f;if(Ge(u)){if(f=b.createElement(u,a),b.isValidElement(f))return f}else f=ewe(a);var x=awe(i),g=Ve(a,!0);if(x&&(o==="insideStart"||o==="insideEnd"||o==="end"))return nwe(a,f,g);var p=x?rwe(a):swe(a);return L.createElement(Wl,Wf({className:st("recharts-label",h)},g,p,{breakAll:m}),f)}Un.displayName="Label";var V5=function(t){var n=t.cx,r=t.cy,a=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,d=t.outerRadius,h=t.x,m=t.y,f=t.top,x=t.left,g=t.width,p=t.height,v=t.clockWise,y=t.labelViewBox;if(y)return y;if(we(g)&&we(p)){if(we(h)&&we(m))return{x:h,y:m,width:g,height:p};if(we(f)&&we(x))return{x:f,y:x,width:g,height:p}}return we(h)&&we(m)?{x:h,y:m,width:0,height:0}:we(n)&&we(r)?{cx:n,cy:r,startAngle:i||a||0,endAngle:o||a||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:v}:t.viewBox?t.viewBox:{}},iwe=function(t,n){return t?t===!0?L.createElement(Un,{key:"label-implicit",viewBox:n}):In(t)?L.createElement(Un,{key:"label-implicit",viewBox:n,value:t}):b.isValidElement(t)?t.type===Un?b.cloneElement(t,{key:"label-implicit",viewBox:n}):L.createElement(Un,{key:"label-implicit",content:t,viewBox:n}):Ge(t)?L.createElement(Un,{key:"label-implicit",content:t,viewBox:n}):Od(t)?L.createElement(Un,Wf({viewBox:n},t,{key:"label-implicit"})):null:null},owe=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var a=t.children,i=V5(t),o=js(a,Un).map(function(c,u){return b.cloneElement(c,{viewBox:n||i,key:"label-".concat(u)})});if(!r)return o;var l=iwe(t.label,n||i);return[l].concat(U0e(o))};Un.parseViewBox=V5;Un.renderCallByParent=owe;function lwe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var cwe=lwe;const uwe=Et(cwe);function Hf(e){"@babel/helpers - typeof";return Hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hf(e)}var dwe=["valueAccessor"],hwe=["data","dataKey","clockWise","id","textBreakAll"];function fwe(e){return vwe(e)||gwe(e)||pwe(e)||mwe()}function mwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pwe(e,t){if(e){if(typeof e=="string")return w1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w1(e,t)}}function gwe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function vwe(e){if(Array.isArray(e))return w1(e)}function w1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Cv(){return Cv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cv.apply(this,arguments)}function Fk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function zk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Fk(Object(n),!0).forEach(function(r){xwe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fk(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function xwe(e,t,n){return t=ywe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ywe(e){var t=wwe(e,"string");return Hf(t)=="symbol"?t:t+""}function wwe(e,t){if(Hf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Hf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bk(e,t){if(e==null)return{};var n=bwe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function bwe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var jwe=function(t){return Array.isArray(t.value)?uwe(t.value):t.value};function ui(e){var t=e.valueAccessor,n=t===void 0?jwe:t,r=Bk(e,dwe),a=r.data,i=r.dataKey,o=r.clockWise,l=r.id,c=r.textBreakAll,u=Bk(r,hwe);return!a||!a.length?null:L.createElement(vt,{className:"recharts-label-list"},a.map(function(d,h){var m=at(i)?n(d,h):Dn(d&&d.payload,i),f=at(l)?{}:{id:"".concat(l,"-").concat(h)};return L.createElement(Un,Cv({},Ve(d,!0),u,f,{parentViewBox:d.parentViewBox,value:m,textBreakAll:c,viewBox:Un.parseViewBox(at(o)?d:zk(zk({},d),{},{clockWise:o})),key:"label-".concat(h),index:h}))}))}ui.displayName="LabelList";function Nwe(e,t){return e?e===!0?L.createElement(ui,{key:"labelList-implicit",data:t}):L.isValidElement(e)||Ge(e)?L.createElement(ui,{key:"labelList-implicit",data:t,content:e}):Od(e)?L.createElement(ui,Cv({data:t},e,{key:"labelList-implicit"})):null:null}function Swe(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var r=e.children,a=js(r,ui).map(function(o,l){return b.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!n)return a;var i=Nwe(e.label,t);return[i].concat(fwe(a))}ui.renderCallByParent=Swe;function Kf(e){"@babel/helpers - typeof";return Kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kf(e)}function b1(){return b1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b1.apply(this,arguments)}function qk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Vk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qk(Object(n),!0).forEach(function(r){_we(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qk(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _we(e,t,n){return t=Cwe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cwe(e){var t=Awe(e,"string");return Kf(t)=="symbol"?t:t+""}function Awe(e,t){if(Kf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Kf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pwe=function(t,n){var r=yr(n-t),a=Math.min(Math.abs(n-t),359.999);return r*a},$p=function(t){var n=t.cx,r=t.cy,a=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,d=c*(l?1:-1)+a,h=Math.asin(c/d)/_v,m=u?i:i+o*h,f=Ht(n,r,d,m),x=Ht(n,r,a,m),g=u?i-o*h:i,p=Ht(n,r,d*Math.cos(h*_v),g);return{center:f,circleTangency:x,lineTangency:p,theta:h}},U5=function(t){var n=t.cx,r=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=Pwe(o,l),u=o+c,d=Ht(n,r,i,o),h=Ht(n,r,i,u),m="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(a>0){var f=Ht(n,r,a,o),x=Ht(n,r,a,u);m+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(f.x,",").concat(f.y," Z")}else m+="L ".concat(n,",").concat(r," Z");return m},Ewe=function(t){var n=t.cx,r=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,h=yr(d-u),m=$p({cx:n,cy:r,radius:i,angle:u,sign:h,cornerRadius:o,cornerIsExternal:c}),f=m.circleTangency,x=m.lineTangency,g=m.theta,p=$p({cx:n,cy:r,radius:i,angle:d,sign:-h,cornerRadius:o,cornerIsExternal:c}),v=p.circleTangency,y=p.lineTangency,w=p.theta,S=c?Math.abs(u-d):Math.abs(u-d)-g-w;if(S<0)return l?"M ".concat(x.x,",").concat(x.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):U5({cx:n,cy:r,innerRadius:a,outerRadius:i,startAngle:u,endAngle:d});var j="M ".concat(x.x,",").concat(x.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(S>180),",").concat(+(h<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(y.x,",").concat(y.y,`
  `);if(a>0){var N=$p({cx:n,cy:r,radius:a,angle:u,sign:h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),C=N.circleTangency,_=N.lineTangency,A=N.theta,P=$p({cx:n,cy:r,radius:a,angle:d,sign:-h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),T=P.circleTangency,E=P.lineTangency,I=P.theta,R=c?Math.abs(u-d):Math.abs(u-d)-A-I;if(R<0&&o===0)return"".concat(j,"L").concat(n,",").concat(r,"Z");j+="L".concat(E.x,",").concat(E.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(T.x,",").concat(T.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(R>180),",").concat(+(h>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(_.x,",").concat(_.y,"Z")}else j+="L".concat(n,",").concat(r,"Z");return j},kwe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},W5=function(t){var n=Vk(Vk({},kwe),t),r=n.cx,a=n.cy,i=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,u=n.cornerIsExternal,d=n.startAngle,h=n.endAngle,m=n.className;if(o<i||d===h)return null;var f=st("recharts-sector",m),x=o-i,g=wr(l,x,0,!0),p;return g>0&&Math.abs(d-h)<360?p=Ewe({cx:r,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(g,x/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:h}):p=U5({cx:r,cy:a,innerRadius:i,outerRadius:o,startAngle:d,endAngle:h}),L.createElement("path",b1({},Ve(n,!0),{className:f,d:p,role:"img"}))};function Gf(e){"@babel/helpers - typeof";return Gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gf(e)}function j1(){return j1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j1.apply(this,arguments)}function Uk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Wk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Uk(Object(n),!0).forEach(function(r){Twe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uk(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Twe(e,t,n){return t=Owe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Owe(e){var t=Dwe(e,"string");return Gf(t)=="symbol"?t:t+""}function Dwe(e,t){if(Gf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Gf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Hk={curveBasisClosed:Tie,curveBasisOpen:Oie,curveBasis:kie,curveBumpX:gie,curveBumpY:vie,curveLinearClosed:Die,curveLinear:gy,curveMonotoneX:Mie,curveMonotoneY:Iie,curveNatural:$ie,curveStep:Rie,curveStepAfter:Fie,curveStepBefore:Lie},Rp=function(t){return t.x===+t.x&&t.y===+t.y},vh=function(t){return t.x},xh=function(t){return t.y},Mwe=function(t,n){if(Ge(t))return t;var r="curve".concat(my(t));return(r==="curveMonotone"||r==="curveBump")&&n?Hk["".concat(r).concat(n==="vertical"?"Y":"X")]:Hk[r]||gy},Iwe=function(t){var n=t.type,r=n===void 0?"linear":n,a=t.points,i=a===void 0?[]:a,o=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,d=Mwe(r,l),h=u?i.filter(function(g){return Rp(g)}):i,m;if(Array.isArray(o)){var f=u?o.filter(function(g){return Rp(g)}):o,x=h.map(function(g,p){return Wk(Wk({},g),{},{base:f[p]})});return l==="vertical"?m=Ap().y(xh).x1(vh).x0(function(g){return g.base.x}):m=Ap().x(vh).y1(xh).y0(function(g){return g.base.y}),m.defined(Rp).curve(d),m(x)}return l==="vertical"&&we(o)?m=Ap().y(xh).x1(vh).x0(o):we(o)?m=Ap().x(vh).y1(xh).y0(o):m=FL().x(vh).y(xh),m.defined(Rp).curve(d),m(h)},du=function(t){var n=t.className,r=t.points,a=t.path,i=t.pathRef;if((!r||!r.length)&&!a)return null;var o=r&&r.length?Iwe(t):a;return b.createElement("path",j1({},Ve(t,!1),Xg(t),{className:st("recharts-curve",n),d:o,ref:i}))},H5={exports:{}},$we="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Rwe=$we,Lwe=Rwe;function K5(){}function G5(){}G5.resetWarningCache=K5;var Fwe=function(){function e(r,a,i,o,l,c){if(c!==Lwe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:G5,resetWarningCache:K5};return n.PropTypes=n,n};H5.exports=Fwe();var zwe=H5.exports;const Ct=Et(zwe);var Bwe=Object.getOwnPropertyNames,qwe=Object.getOwnPropertySymbols,Vwe=Object.prototype.hasOwnProperty;function Kk(e,t){return function(r,a,i){return e(r,a,i)&&t(r,a,i)}}function Lp(e){return function(n,r,a){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,a);var i=a.cache,o=i.get(n),l=i.get(r);if(o&&l)return o===r&&l===n;i.set(n,r),i.set(r,n);var c=e(n,r,a);return i.delete(n),i.delete(r),c}}function Gk(e){return Bwe(e).concat(qwe(e))}var Uwe=Object.hasOwn||function(e,t){return Vwe.call(e,t)};function cc(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var Wwe="__v",Hwe="__o",Kwe="_owner",Yk=Object.getOwnPropertyDescriptor,Qk=Object.keys;function Gwe(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function Ywe(e,t){return cc(e.getTime(),t.getTime())}function Qwe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function Xwe(e,t){return e===t}function Xk(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var a=new Array(r),i=e.entries(),o,l,c=0;(o=i.next())&&!o.done;){for(var u=t.entries(),d=!1,h=0;(l=u.next())&&!l.done;){if(a[h]){h++;continue}var m=o.value,f=l.value;if(n.equals(m[0],f[0],c,h,e,t,n)&&n.equals(m[1],f[1],m[0],f[0],e,t,n)){d=a[h]=!0;break}h++}if(!d)return!1;c++}return!0}var Jwe=cc;function Zwe(e,t,n){var r=Qk(e),a=r.length;if(Qk(t).length!==a)return!1;for(;a-- >0;)if(!Y5(e,t,n,r[a]))return!1;return!0}function yh(e,t,n){var r=Gk(e),a=r.length;if(Gk(t).length!==a)return!1;for(var i,o,l;a-- >0;)if(i=r[a],!Y5(e,t,n,i)||(o=Yk(e,i),l=Yk(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function ebe(e,t){return cc(e.valueOf(),t.valueOf())}function tbe(e,t){return e.source===t.source&&e.flags===t.flags}function Jk(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var a=new Array(r),i=e.values(),o,l;(o=i.next())&&!o.done;){for(var c=t.values(),u=!1,d=0;(l=c.next())&&!l.done;){if(!a[d]&&n.equals(o.value,l.value,o.value,l.value,e,t,n)){u=a[d]=!0;break}d++}if(!u)return!1}return!0}function nbe(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function rbe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function Y5(e,t,n,r){return(r===Kwe||r===Hwe||r===Wwe)&&(e.$$typeof||t.$$typeof)?!0:Uwe(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}var sbe="[object Arguments]",abe="[object Boolean]",ibe="[object Date]",obe="[object Error]",lbe="[object Map]",cbe="[object Number]",ube="[object Object]",dbe="[object RegExp]",hbe="[object Set]",fbe="[object String]",mbe="[object URL]",pbe=Array.isArray,Zk=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,eT=Object.assign,gbe=Object.prototype.toString.call.bind(Object.prototype.toString);function vbe(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areErrorsEqual,a=e.areFunctionsEqual,i=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,d=e.areSetsEqual,h=e.areTypedArraysEqual,m=e.areUrlsEqual;return function(x,g,p){if(x===g)return!0;if(x==null||g==null)return!1;var v=typeof x;if(v!==typeof g)return!1;if(v!=="object")return v==="number"?o(x,g,p):v==="function"?a(x,g,p):!1;var y=x.constructor;if(y!==g.constructor)return!1;if(y===Object)return l(x,g,p);if(pbe(x))return t(x,g,p);if(Zk!=null&&Zk(x))return h(x,g,p);if(y===Date)return n(x,g,p);if(y===RegExp)return u(x,g,p);if(y===Map)return i(x,g,p);if(y===Set)return d(x,g,p);var w=gbe(x);return w===ibe?n(x,g,p):w===dbe?u(x,g,p):w===lbe?i(x,g,p):w===hbe?d(x,g,p):w===ube?typeof x.then!="function"&&typeof g.then!="function"&&l(x,g,p):w===mbe?m(x,g,p):w===obe?r(x,g,p):w===sbe?l(x,g,p):w===abe||w===cbe||w===fbe?c(x,g,p):!1}}function xbe(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,a={areArraysEqual:r?yh:Gwe,areDatesEqual:Ywe,areErrorsEqual:Qwe,areFunctionsEqual:Xwe,areMapsEqual:r?Kk(Xk,yh):Xk,areNumbersEqual:Jwe,areObjectsEqual:r?yh:Zwe,arePrimitiveWrappersEqual:ebe,areRegExpsEqual:tbe,areSetsEqual:r?Kk(Jk,yh):Jk,areTypedArraysEqual:r?yh:nbe,areUrlsEqual:rbe};if(n&&(a=eT({},a,n(a))),t){var i=Lp(a.areArraysEqual),o=Lp(a.areMapsEqual),l=Lp(a.areObjectsEqual),c=Lp(a.areSetsEqual);a=eT({},a,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return a}function ybe(e){return function(t,n,r,a,i,o,l){return e(t,n,l)}}function wbe(e){var t=e.circular,n=e.comparator,r=e.createState,a=e.equals,i=e.strict;if(r)return function(c,u){var d=r(),h=d.cache,m=h===void 0?t?new WeakMap:void 0:h,f=d.meta;return n(c,u,{cache:m,equals:a,meta:f,strict:i})};if(t)return function(c,u){return n(c,u,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var o={cache:void 0,equals:a,meta:void 0,strict:i};return function(c,u){return n(c,u,o)}}var bbe=Bo();Bo({strict:!0});Bo({circular:!0});Bo({circular:!0,strict:!0});Bo({createInternalComparator:function(){return cc}});Bo({strict:!0,createInternalComparator:function(){return cc}});Bo({circular:!0,createInternalComparator:function(){return cc}});Bo({circular:!0,createInternalComparator:function(){return cc},strict:!0});function Bo(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,r=e.createInternalComparator,a=e.createState,i=e.strict,o=i===void 0?!1:i,l=xbe(e),c=vbe(l),u=r?r(c):ybe(c);return wbe({circular:n,comparator:c,createState:a,equals:u,strict:o})}function jbe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function tT(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function a(i){n<0&&(n=i),i-n>t?(e(i),n=-1):jbe(a)};requestAnimationFrame(r)}function N1(e){"@babel/helpers - typeof";return N1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N1(e)}function Nbe(e){return Abe(e)||Cbe(e)||_be(e)||Sbe()}function Sbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _be(e,t){if(e){if(typeof e=="string")return nT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nT(e,t)}}function nT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Cbe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Abe(e){if(Array.isArray(e))return e}function Pbe(){var e={},t=function(){return null},n=!1,r=function a(i){if(!n){if(Array.isArray(i)){if(!i.length)return;var o=i,l=Nbe(o),c=l[0],u=l.slice(1);if(typeof c=="number"){tT(a.bind(null,u),c);return}a(c),tT(a.bind(null,u));return}N1(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){n=!0},start:function(i){n=!1,r(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function Yf(e){"@babel/helpers - typeof";return Yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yf(e)}function rT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function sT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rT(Object(n),!0).forEach(function(r){Q5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Q5(e,t,n){return t=Ebe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ebe(e){var t=kbe(e,"string");return Yf(t)==="symbol"?t:String(t)}function kbe(e,t){if(Yf(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Yf(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Tbe=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(r,a){return r.filter(function(i){return a.includes(i)})})},Obe=function(t){return t},Dbe=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Kh=function(t,n){return Object.keys(n).reduce(function(r,a){return sT(sT({},r),{},Q5({},a,t(a,n[a])))},{})},aT=function(t,n,r){return t.map(function(a){return"".concat(Dbe(a)," ").concat(n,"ms ").concat(r)}).join(",")};function Mbe(e,t){return Rbe(e)||$be(e,t)||X5(e,t)||Ibe()}function Ibe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $be(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Rbe(e){if(Array.isArray(e))return e}function Lbe(e){return Bbe(e)||zbe(e)||X5(e)||Fbe()}function Fbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X5(e,t){if(e){if(typeof e=="string")return S1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S1(e,t)}}function zbe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Bbe(e){if(Array.isArray(e))return S1(e)}function S1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Av=1e-4,J5=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},Z5=function(t,n){return t.map(function(r,a){return r*Math.pow(n,a)}).reduce(function(r,a){return r+a})},iT=function(t,n){return function(r){var a=J5(t,n);return Z5(a,r)}},qbe=function(t,n){return function(r){var a=J5(t,n),i=[].concat(Lbe(a.map(function(o,l){return o*l}).slice(1)),[0]);return Z5(i,r)}},oT=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":a=0,i=0,o=1,l=1;break;case"ease":a=.25,i=.1,o=.25,l=1;break;case"ease-in":a=.42,i=0,o=1,l=1;break;case"ease-out":a=.42,i=0,o=.58,l=1;break;case"ease-in-out":a=0,i=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(p){return parseFloat(p)}),d=Mbe(u,4);a=d[0],i=d[1],o=d[2],l=d[3]}}}var h=iT(a,o),m=iT(i,l),f=qbe(a,o),x=function(v){return v>1?1:v<0?0:v},g=function(v){for(var y=v>1?1:v,w=y,S=0;S<8;++S){var j=h(w)-y,N=f(w);if(Math.abs(j-y)<Av||N<Av)return m(w);w=x(w-j/N)}return m(w)};return g.isStepper=!1,g},Vbe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,r=n===void 0?100:n,a=t.damping,i=a===void 0?8:a,o=t.dt,l=o===void 0?17:o,c=function(d,h,m){var f=-(d-h)*r,x=m*i,g=m+(f-x)*l/1e3,p=m*l/1e3+d;return Math.abs(p-h)<Av&&Math.abs(g)<Av?[h,0]:[p,g]};return c.isStepper=!0,c.dt=l,c},Ube=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return oT(a);case"spring":return Vbe();default:if(a.split("(")[0]==="cubic-bezier")return oT(a)}return typeof a=="function"?a:null};function Qf(e){"@babel/helpers - typeof";return Qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qf(e)}function lT(e){return Kbe(e)||Hbe(e)||e6(e)||Wbe()}function Wbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hbe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Kbe(e){if(Array.isArray(e))return C1(e)}function cT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Yn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cT(Object(n),!0).forEach(function(r){_1(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _1(e,t,n){return t=Gbe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gbe(e){var t=Ybe(e,"string");return Qf(t)==="symbol"?t:String(t)}function Ybe(e,t){if(Qf(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Qf(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qbe(e,t){return Zbe(e)||Jbe(e,t)||e6(e,t)||Xbe()}function Xbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e6(e,t){if(e){if(typeof e=="string")return C1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C1(e,t)}}function C1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jbe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Zbe(e){if(Array.isArray(e))return e}var Pv=function(t,n,r){return t+(n-t)*r},A1=function(t){var n=t.from,r=t.to;return n!==r},eje=function e(t,n,r){var a=Kh(function(i,o){if(A1(o)){var l=t(o.from,o.to,o.velocity),c=Qbe(l,2),u=c[0],d=c[1];return Yn(Yn({},o),{},{from:u,velocity:d})}return o},n);return r<1?Kh(function(i,o){return A1(o)?Yn(Yn({},o),{},{velocity:Pv(o.velocity,a[i].velocity,r),from:Pv(o.from,a[i].from,r)}):o},n):e(t,a,r-1)};const tje=function(e,t,n,r,a){var i=Tbe(e,t),o=i.reduce(function(p,v){return Yn(Yn({},p),{},_1({},v,[e[v],t[v]]))},{}),l=i.reduce(function(p,v){return Yn(Yn({},p),{},_1({},v,{from:e[v],velocity:0,to:t[v]}))},{}),c=-1,u,d,h=function(){return null},m=function(){return Kh(function(v,y){return y.from},l)},f=function(){return!Object.values(l).filter(A1).length},x=function(v){u||(u=v);var y=v-u,w=y/n.dt;l=eje(n,l,w),a(Yn(Yn(Yn({},e),t),m())),u=v,f()||(c=requestAnimationFrame(h))},g=function(v){d||(d=v);var y=(v-d)/r,w=Kh(function(j,N){return Pv.apply(void 0,lT(N).concat([n(y)]))},o);if(a(Yn(Yn(Yn({},e),t),w)),y<1)c=requestAnimationFrame(h);else{var S=Kh(function(j,N){return Pv.apply(void 0,lT(N).concat([n(1)]))},o);a(Yn(Yn(Yn({},e),t),S))}};return h=n.isStepper?x:g,function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(c)}}};function Ju(e){"@babel/helpers - typeof";return Ju=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ju(e)}var nje=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function rje(e,t){if(e==null)return{};var n=sje(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function sje(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function Aw(e){return lje(e)||oje(e)||ije(e)||aje()}function aje(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ije(e,t){if(e){if(typeof e=="string")return P1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P1(e,t)}}function oje(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function lje(e){if(Array.isArray(e))return P1(e)}function P1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function uT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ms(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uT(Object(n),!0).forEach(function(r){kh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kh(e,t,n){return t=t6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cje(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uje(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,t6(r.key),r)}}function dje(e,t,n){return t&&uje(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function t6(e){var t=hje(e,"string");return Ju(t)==="symbol"?t:String(t)}function hje(e,t){if(Ju(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ju(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fje(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E1(e,t)}function E1(e,t){return E1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},E1(e,t)}function mje(e){var t=pje();return function(){var r=Ev(e),a;if(t){var i=Ev(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return k1(this,a)}}function k1(e,t){if(t&&(Ju(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return T1(e)}function T1(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pje(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ev(e){return Ev=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ev(e)}var Ia=function(e){fje(n,e);var t=mje(n);function n(r,a){var i;cje(this,n),i=t.call(this,r,a);var o=i.props,l=o.isActive,c=o.attributeName,u=o.from,d=o.to,h=o.steps,m=o.children,f=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(T1(i)),i.changeStyle=i.changeStyle.bind(T1(i)),!l||f<=0)return i.state={style:{}},typeof m=="function"&&(i.state={style:d}),k1(i);if(h&&h.length)i.state={style:h[0].style};else if(u){if(typeof m=="function")return i.state={style:u},k1(i);i.state={style:c?kh({},c,u):u}}else i.state={style:{}};return i}return dje(n,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,u=i.shouldReAnimate,d=i.to,h=i.from,m=this.state.style;if(l){if(!o){var f={style:c?kh({},c,d):d};this.state&&m&&(c&&m[c]!==d||!c&&m!==d)&&this.setState(f);return}if(!(bbe(a.to,d)&&a.canBegin&&a.isActive)){var x=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=x||u?h:a.to;if(this.state&&m){var p={style:c?kh({},c,g):g};(c&&m[c]!==g||!c&&m!==g)&&this.setState(p)}this.runAnimation(Ms(Ms({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,l=a.to,c=a.duration,u=a.easing,d=a.begin,h=a.onAnimationEnd,m=a.onAnimationStart,f=tje(o,l,Ube(u),c,this.changeStyle),x=function(){i.stopJSAnimation=f()};this.manager.start([m,d,x,c,h])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,l=a.begin,c=a.onAnimationStart,u=o[0],d=u.style,h=u.duration,m=h===void 0?0:h,f=function(g,p,v){if(v===0)return g;var y=p.duration,w=p.easing,S=w===void 0?"ease":w,j=p.style,N=p.properties,C=p.onAnimationEnd,_=v>0?o[v-1]:p,A=N||Object.keys(j);if(typeof S=="function"||S==="spring")return[].concat(Aw(g),[i.runJSAnimation.bind(i,{from:_.style,to:j,duration:y,easing:S}),y]);var P=aT(A,y,S),T=Ms(Ms(Ms({},_.style),j),{},{transition:P});return[].concat(Aw(g),[T,y,C]).filter(Obe)};return this.manager.start([c].concat(Aw(o.reduce(f,[d,Math.max(m,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=Pbe());var i=a.begin,o=a.duration,l=a.attributeName,c=a.to,u=a.easing,d=a.onAnimationStart,h=a.onAnimationEnd,m=a.steps,f=a.children,x=this.manager;if(this.unSubscribe=x.subscribe(this.handleStyleChange),typeof u=="function"||typeof f=="function"||u==="spring"){this.runJSAnimation(a);return}if(m.length>1){this.runStepAnimation(a);return}var g=l?kh({},l,c):c,p=aT(Object.keys(g),o,u);x.start([d,i,Ms(Ms({},g),{},{transition:p}),o,h])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=rje(a,nje),u=b.Children.count(i),d=this.state.style;if(typeof i=="function")return i(d);if(!l||u===0||o<=0)return i;var h=function(f){var x=f.props,g=x.style,p=g===void 0?{}:g,v=x.className,y=b.cloneElement(f,Ms(Ms({},c),{},{style:Ms(Ms({},p),d),className:v}));return y};return u===1?h(b.Children.only(i)):L.createElement("div",null,b.Children.map(i,function(m){return h(m)}))}}]),n}(b.PureComponent);Ia.displayName="Animate";Ia.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Ia.propTypes={from:Ct.oneOfType([Ct.object,Ct.string]),to:Ct.oneOfType([Ct.object,Ct.string]),attributeName:Ct.string,duration:Ct.number,begin:Ct.number,easing:Ct.oneOfType([Ct.string,Ct.func]),steps:Ct.arrayOf(Ct.shape({duration:Ct.number.isRequired,style:Ct.object.isRequired,easing:Ct.oneOfType([Ct.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Ct.func]),properties:Ct.arrayOf("string"),onAnimationEnd:Ct.func})),children:Ct.oneOfType([Ct.node,Ct.func]),isActive:Ct.bool,canBegin:Ct.bool,onAnimationEnd:Ct.func,shouldReAnimate:Ct.bool,onAnimationStart:Ct.func,onAnimationReStart:Ct.func};function Xf(e){"@babel/helpers - typeof";return Xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xf(e)}function kv(){return kv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kv.apply(this,arguments)}function gje(e,t){return wje(e)||yje(e,t)||xje(e,t)||vje()}function vje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xje(e,t){if(e){if(typeof e=="string")return dT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dT(e,t)}}function dT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yje(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function wje(e){if(Array.isArray(e))return e}function hT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function fT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hT(Object(n),!0).forEach(function(r){bje(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bje(e,t,n){return t=jje(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jje(e){var t=Nje(e,"string");return Xf(t)=="symbol"?t:t+""}function Nje(e,t){if(Xf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Xf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mT=function(t,n,r,a,i){var o=Math.min(Math.abs(r)/2,Math.abs(a)/2),l=a>=0?1:-1,c=r>=0?1:-1,u=a>=0&&r>=0||a<0&&r<0?1:0,d;if(o>0&&i instanceof Array){for(var h=[0,0,0,0],m=0,f=4;m<f;m++)h[m]=i[m]>o?o:i[m];d="M".concat(t,",").concat(n+l*h[0]),h[0]>0&&(d+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(u,",").concat(t+c*h[0],",").concat(n)),d+="L ".concat(t+r-c*h[1],",").concat(n),h[1]>0&&(d+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(u,`,
        `).concat(t+r,",").concat(n+l*h[1])),d+="L ".concat(t+r,",").concat(n+a-l*h[2]),h[2]>0&&(d+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(u,`,
        `).concat(t+r-c*h[2],",").concat(n+a)),d+="L ".concat(t+c*h[3],",").concat(n+a),h[3]>0&&(d+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(n+a-l*h[3])),d+="Z"}else if(o>0&&i===+i&&i>0){var x=Math.min(o,i);d="M ".concat(t,",").concat(n+l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(t+c*x,",").concat(n,`
            L `).concat(t+r-c*x,",").concat(n,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(t+r,",").concat(n+l*x,`
            L `).concat(t+r,",").concat(n+a-l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(t+r-c*x,",").concat(n+a,`
            L `).concat(t+c*x,",").concat(n+a,`
            A `).concat(x,",").concat(x,",0,0,").concat(u,",").concat(t,",").concat(n+a-l*x," Z")}else d="M ".concat(t,",").concat(n," h ").concat(r," v ").concat(a," h ").concat(-r," Z");return d},Sje=function(t,n){if(!t||!n)return!1;var r=t.x,a=t.y,i=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(i,i+l),d=Math.max(i,i+l),h=Math.min(o,o+c),m=Math.max(o,o+c);return r>=u&&r<=d&&a>=h&&a<=m}return!1},_je={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},a2=function(t){var n=fT(fT({},_je),t),r=b.useRef(),a=b.useState(-1),i=gje(a,2),o=i[0],l=i[1];b.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var S=r.current.getTotalLength();S&&l(S)}catch{}},[]);var c=n.x,u=n.y,d=n.width,h=n.height,m=n.radius,f=n.className,x=n.animationEasing,g=n.animationDuration,p=n.animationBegin,v=n.isAnimationActive,y=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||h!==+h||d===0||h===0)return null;var w=st("recharts-rectangle",f);return y?L.createElement(Ia,{canBegin:o>0,from:{width:d,height:h,x:c,y:u},to:{width:d,height:h,x:c,y:u},duration:g,animationEasing:x,isActive:y},function(S){var j=S.width,N=S.height,C=S.x,_=S.y;return L.createElement(Ia,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:g,isActive:v,easing:x},L.createElement("path",kv({},Ve(n,!0),{className:w,d:mT(C,_,j,N,m),ref:r})))}):L.createElement("path",kv({},Ve(n,!0),{className:w,d:mT(c,u,d,h,m)}))},Cje=["points","className","baseLinePoints","connectNulls"];function Hc(){return Hc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hc.apply(this,arguments)}function Aje(e,t){if(e==null)return{};var n=Pje(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Pje(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function pT(e){return Oje(e)||Tje(e)||kje(e)||Eje()}function Eje(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kje(e,t){if(e){if(typeof e=="string")return O1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O1(e,t)}}function Tje(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Oje(e){if(Array.isArray(e))return O1(e)}function O1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var gT=function(t){return t&&t.x===+t.x&&t.y===+t.y},Dje=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return t.forEach(function(r){gT(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),gT(t[0])&&n[n.length-1].push(t[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},Gh=function(t,n){var r=Dje(t);n&&(r=[r.reduce(function(i,o){return[].concat(pT(i),pT(o))},[])]);var a=r.map(function(i){return i.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return r.length===1?"".concat(a,"Z"):a},Mje=function(t,n,r){var a=Gh(t,r);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(Gh(n.reverse(),r).slice(1))},Ije=function(t){var n=t.points,r=t.className,a=t.baseLinePoints,i=t.connectNulls,o=Aje(t,Cje);if(!n||!n.length)return null;var l=st("recharts-polygon",r);if(a&&a.length){var c=o.stroke&&o.stroke!=="none",u=Mje(n,a,i);return L.createElement("g",{className:l},L.createElement("path",Hc({},Ve(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),c?L.createElement("path",Hc({},Ve(o,!0),{fill:"none",d:Gh(n,i)})):null,c?L.createElement("path",Hc({},Ve(o,!0),{fill:"none",d:Gh(a,i)})):null)}var d=Gh(n,i);return L.createElement("path",Hc({},Ve(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",className:l,d}))};function D1(){return D1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D1.apply(this,arguments)}var Oy=function(t){var n=t.cx,r=t.cy,a=t.r,i=t.className,o=st("recharts-dot",i);return n===+n&&r===+r&&a===+a?b.createElement("circle",D1({},Ve(t,!1),Xg(t),{className:o,cx:n,cy:r,r:a})):null};function Jf(e){"@babel/helpers - typeof";return Jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jf(e)}var $je=["x","y","top","left","width","height","className"];function M1(){return M1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M1.apply(this,arguments)}function vT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Rje(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vT(Object(n),!0).forEach(function(r){Lje(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Lje(e,t,n){return t=Fje(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fje(e){var t=zje(e,"string");return Jf(t)=="symbol"?t:t+""}function zje(e,t){if(Jf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Jf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bje(e,t){if(e==null)return{};var n=qje(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function qje(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Vje=function(t,n,r,a,i,o){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(o,",").concat(n,"h").concat(r)},Uje=function(t){var n=t.x,r=n===void 0?0:n,a=t.y,i=a===void 0?0:a,o=t.top,l=o===void 0?0:o,c=t.left,u=c===void 0?0:c,d=t.width,h=d===void 0?0:d,m=t.height,f=m===void 0?0:m,x=t.className,g=Bje(t,$je),p=Rje({x:r,y:i,top:l,left:u,width:h,height:f},g);return!we(r)||!we(i)||!we(h)||!we(f)||!we(l)||!we(u)?null:L.createElement("path",M1({},Ve(p,!0),{className:st("recharts-cross",x),d:Vje(r,i,h,f,l,u)}))},Wje=Ay,Hje=f5,Kje=qa;function Gje(e,t){return e&&e.length?Wje(e,Kje(t),Hje):void 0}var Yje=Gje;const Qje=Et(Yje);var Xje=Ay,Jje=qa,Zje=m5;function e1e(e,t){return e&&e.length?Xje(e,Jje(t),Zje):void 0}var t1e=e1e;const n1e=Et(t1e);var r1e=["cx","cy","angle","ticks","axisLine"],s1e=["ticks","tick","angle","tickFormatter","stroke"];function Zu(e){"@babel/helpers - typeof";return Zu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zu(e)}function Yh(){return Yh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yh.apply(this,arguments)}function xT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Go(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xT(Object(n),!0).forEach(function(r){Dy(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yT(e,t){if(e==null)return{};var n=a1e(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function a1e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function i1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r6(r.key),r)}}function o1e(e,t,n){return t&&wT(e.prototype,t),n&&wT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l1e(e,t,n){return t=Tv(t),c1e(e,n6()?Reflect.construct(t,n||[],Tv(e).constructor):t.apply(e,n))}function c1e(e,t){if(t&&(Zu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return u1e(e)}function u1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function n6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(n6=function(){return!!e})()}function Tv(e){return Tv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Tv(e)}function d1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I1(e,t)}function I1(e,t){return I1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},I1(e,t)}function Dy(e,t,n){return t=r6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r6(e){var t=h1e(e,"string");return Zu(t)=="symbol"?t:t+""}function h1e(e,t){if(Zu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Zu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var My=function(e){function t(){return i1e(this,t),l1e(this,t,arguments)}return d1e(t,e),o1e(t,[{key:"getTickValueCoord",value:function(r){var a=r.coordinate,i=this.props,o=i.angle,l=i.cx,c=i.cy;return Ht(l,c,a,o)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,a;switch(r){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var r=this.props,a=r.cx,i=r.cy,o=r.angle,l=r.ticks,c=Qje(l,function(d){return d.coordinate||0}),u=n1e(l,function(d){return d.coordinate||0});return{cx:a,cy:i,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,a=r.cx,i=r.cy,o=r.angle,l=r.ticks,c=r.axisLine,u=yT(r,r1e),d=l.reduce(function(x,g){return[Math.min(x[0],g.coordinate),Math.max(x[1],g.coordinate)]},[1/0,-1/0]),h=Ht(a,i,d[0],o),m=Ht(a,i,d[1],o),f=Go(Go(Go({},Ve(u,!1)),{},{fill:"none"},Ve(c,!1)),{},{x1:h.x,y1:h.y,x2:m.x,y2:m.y});return L.createElement("line",Yh({className:"recharts-polar-radius-axis-line"},f))}},{key:"renderTicks",value:function(){var r=this,a=this.props,i=a.ticks,o=a.tick,l=a.angle,c=a.tickFormatter,u=a.stroke,d=yT(a,s1e),h=this.getTickTextAnchor(),m=Ve(d,!1),f=Ve(o,!1),x=i.map(function(g,p){var v=r.getTickValueCoord(g),y=Go(Go(Go(Go({textAnchor:h,transform:"rotate(".concat(90-l,", ").concat(v.x,", ").concat(v.y,")")},m),{},{stroke:"none",fill:u},f),{},{index:p},v),{},{payload:g});return L.createElement(vt,Yh({className:st("recharts-polar-radius-axis-tick",q5(o)),key:"tick-".concat(g.coordinate)},Ul(r.props,g,p)),t.renderTickItem(o,y,c?c(g.value,p):g.value))});return L.createElement(vt,{className:"recharts-polar-radius-axis-ticks"},x)}},{key:"render",value:function(){var r=this.props,a=r.ticks,i=r.axisLine,o=r.tick;return!a||!a.length?null:L.createElement(vt,{className:st("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),Un.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,a,i){var o;return L.isValidElement(r)?o=L.cloneElement(r,a):Ge(r)?o=r(a):o=L.createElement(Wl,Yh({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])}(b.PureComponent);Dy(My,"displayName","PolarRadiusAxis");Dy(My,"axisType","radiusAxis");Dy(My,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function ed(e){"@babel/helpers - typeof";return ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ed(e)}function al(){return al=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},al.apply(this,arguments)}function bT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Yo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bT(Object(n),!0).forEach(function(r){Iy(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function f1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a6(r.key),r)}}function m1e(e,t,n){return t&&jT(e.prototype,t),n&&jT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function p1e(e,t,n){return t=Ov(t),g1e(e,s6()?Reflect.construct(t,n||[],Ov(e).constructor):t.apply(e,n))}function g1e(e,t){if(t&&(ed(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return v1e(e)}function v1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(s6=function(){return!!e})()}function Ov(e){return Ov=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ov(e)}function x1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$1(e,t)}function $1(e,t){return $1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},$1(e,t)}function Iy(e,t,n){return t=a6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a6(e){var t=y1e(e,"string");return ed(t)=="symbol"?t:t+""}function y1e(e,t){if(ed(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ed(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var w1e=Math.PI/180,NT=1e-5,$y=function(e){function t(){return f1e(this,t),p1e(this,t,arguments)}return x1e(t,e),m1e(t,[{key:"getTickLineCoord",value:function(r){var a=this.props,i=a.cx,o=a.cy,l=a.radius,c=a.orientation,u=a.tickSize,d=u||8,h=Ht(i,o,l,r.coordinate),m=Ht(i,o,l+(c==="inner"?-1:1)*d,r.coordinate);return{x1:h.x,y1:h.y,x2:m.x,y2:m.y}}},{key:"getTickTextAnchor",value:function(r){var a=this.props.orientation,i=Math.cos(-r.coordinate*w1e),o;return i>NT?o=a==="outer"?"start":"end":i<-NT?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var r=this.props,a=r.cx,i=r.cy,o=r.radius,l=r.axisLine,c=r.axisLineType,u=Yo(Yo({},Ve(this.props,!1)),{},{fill:"none"},Ve(l,!1));if(c==="circle")return L.createElement(Oy,al({className:"recharts-polar-angle-axis-line"},u,{cx:a,cy:i,r:o}));var d=this.props.ticks,h=d.map(function(m){return Ht(a,i,o,m.coordinate)});return L.createElement(Ije,al({className:"recharts-polar-angle-axis-line"},u,{points:h}))}},{key:"renderTicks",value:function(){var r=this,a=this.props,i=a.ticks,o=a.tick,l=a.tickLine,c=a.tickFormatter,u=a.stroke,d=Ve(this.props,!1),h=Ve(o,!1),m=Yo(Yo({},d),{},{fill:"none"},Ve(l,!1)),f=i.map(function(x,g){var p=r.getTickLineCoord(x),v=r.getTickTextAnchor(x),y=Yo(Yo(Yo({textAnchor:v},d),{},{stroke:"none",fill:u},h),{},{index:g,payload:x,x:p.x2,y:p.y2});return L.createElement(vt,al({className:st("recharts-polar-angle-axis-tick",q5(o)),key:"tick-".concat(x.coordinate)},Ul(r.props,x,g)),l&&L.createElement("line",al({className:"recharts-polar-angle-axis-tick-line"},m,p)),o&&t.renderTickItem(o,y,c?c(x.value,g):x.value))});return L.createElement(vt,{className:"recharts-polar-angle-axis-ticks"},f)}},{key:"render",value:function(){var r=this.props,a=r.ticks,i=r.radius,o=r.axisLine;return i<=0||!a||!a.length?null:L.createElement(vt,{className:st("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,a,i){var o;return L.isValidElement(r)?o=L.cloneElement(r,a):Ge(r)?o=r(a):o=L.createElement(Wl,al({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])}(b.PureComponent);Iy($y,"displayName","PolarAngleAxis");Iy($y,"axisType","angleAxis");Iy($y,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var b1e=cF,j1e=b1e(Object.getPrototypeOf,Object),N1e=j1e,S1e=_i,_1e=N1e,C1e=Ci,A1e="[object Object]",P1e=Function.prototype,E1e=Object.prototype,i6=P1e.toString,k1e=E1e.hasOwnProperty,T1e=i6.call(Object);function O1e(e){if(!C1e(e)||S1e(e)!=A1e)return!1;var t=_1e(e);if(t===null)return!0;var n=k1e.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&i6.call(n)==T1e}var D1e=O1e;const M1e=Et(D1e);var I1e=_i,$1e=Ci,R1e="[object Boolean]";function L1e(e){return e===!0||e===!1||$1e(e)&&I1e(e)==R1e}var F1e=L1e;const z1e=Et(F1e);function Zf(e){"@babel/helpers - typeof";return Zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zf(e)}function Dv(){return Dv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dv.apply(this,arguments)}function B1e(e,t){return W1e(e)||U1e(e,t)||V1e(e,t)||q1e()}function q1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V1e(e,t){if(e){if(typeof e=="string")return ST(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ST(e,t)}}function ST(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U1e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function W1e(e){if(Array.isArray(e))return e}function _T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function CT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_T(Object(n),!0).forEach(function(r){H1e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_T(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function H1e(e,t,n){return t=K1e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K1e(e){var t=G1e(e,"string");return Zf(t)=="symbol"?t:t+""}function G1e(e,t){if(Zf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Zf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var AT=function(t,n,r,a,i){var o=r-a,l;return l="M ".concat(t,",").concat(n),l+="L ".concat(t+r,",").concat(n),l+="L ".concat(t+r-o/2,",").concat(n+i),l+="L ".concat(t+r-o/2-a,",").concat(n+i),l+="L ".concat(t,",").concat(n," Z"),l},Y1e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Q1e=function(t){var n=CT(CT({},Y1e),t),r=b.useRef(),a=b.useState(-1),i=B1e(a,2),o=i[0],l=i[1];b.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var w=r.current.getTotalLength();w&&l(w)}catch{}},[]);var c=n.x,u=n.y,d=n.upperWidth,h=n.lowerWidth,m=n.height,f=n.className,x=n.animationEasing,g=n.animationDuration,p=n.animationBegin,v=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||h!==+h||m!==+m||d===0&&h===0||m===0)return null;var y=st("recharts-trapezoid",f);return v?L.createElement(Ia,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:m,x:c,y:u},to:{upperWidth:d,lowerWidth:h,height:m,x:c,y:u},duration:g,animationEasing:x,isActive:v},function(w){var S=w.upperWidth,j=w.lowerWidth,N=w.height,C=w.x,_=w.y;return L.createElement(Ia,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:g,easing:x},L.createElement("path",Dv({},Ve(n,!0),{className:y,d:AT(C,_,S,j,N),ref:r})))}):L.createElement("g",null,L.createElement("path",Dv({},Ve(n,!0),{className:y,d:AT(c,u,d,h,m)})))},X1e=["option","shapeType","propTransformer","activeClassName","isActive"];function em(e){"@babel/helpers - typeof";return em=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},em(e)}function J1e(e,t){if(e==null)return{};var n=Z1e(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Z1e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function PT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Mv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?PT(Object(n),!0).forEach(function(r){eNe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function eNe(e,t,n){return t=tNe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tNe(e){var t=nNe(e,"string");return em(t)=="symbol"?t:t+""}function nNe(e,t){if(em(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(em(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rNe(e,t){return Mv(Mv({},t),e)}function sNe(e,t){return e==="symbols"}function ET(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return L.createElement(a2,n);case"trapezoid":return L.createElement(Q1e,n);case"sector":return L.createElement(W5,n);case"symbols":if(sNe(t))return L.createElement(S_,n);break;default:return null}}function aNe(e){return b.isValidElement(e)?e.props:e}function o6(e){var t=e.option,n=e.shapeType,r=e.propTransformer,a=r===void 0?rNe:r,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=J1e(e,X1e),u;if(b.isValidElement(t))u=b.cloneElement(t,Mv(Mv({},c),aNe(t)));else if(Ge(t))u=t(c);else if(M1e(t)&&!z1e(t)){var d=a(t,c);u=L.createElement(ET,{shapeType:n,elementProps:d})}else{var h=c;u=L.createElement(ET,{shapeType:n,elementProps:h})}return l?L.createElement(vt,{className:o},u):u}function Ry(e,t){return t!=null&&"trapezoids"in e.props}function Ly(e,t){return t!=null&&"sectors"in e.props}function tm(e,t){return t!=null&&"points"in e.props}function iNe(e,t){var n,r,a=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,i=e.y===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.y)||e.y===t.y;return a&&i}function oNe(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function lNe(e,t){var n=e.x===t.x,r=e.y===t.y,a=e.z===t.z;return n&&r&&a}function cNe(e,t){var n;return Ry(e,t)?n=iNe:Ly(e,t)?n=oNe:tm(e,t)&&(n=lNe),n}function uNe(e,t){var n;return Ry(e,t)?n="trapezoids":Ly(e,t)?n="sectors":tm(e,t)&&(n="points"),n}function dNe(e,t){if(Ry(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(Ly(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return tm(e,t)?t.payload:{}}function hNe(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,a=uNe(n,t),i=dNe(n,t),o=r.filter(function(c,u){var d=Qu(i,c),h=n.props[a].filter(function(x){var g=cNe(n,t);return g(x,t)}),m=n.props[a].indexOf(h[h.length-1]),f=u===m;return d&&f}),l=r.indexOf(o[o.length-1]);return l}var ig;function td(e){"@babel/helpers - typeof";return td=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},td(e)}function Kc(){return Kc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kc.apply(this,arguments)}function kT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function qt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kT(Object(n),!0).forEach(function(r){vs(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function fNe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c6(r.key),r)}}function mNe(e,t,n){return t&&TT(e.prototype,t),n&&TT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function pNe(e,t,n){return t=Iv(t),gNe(e,l6()?Reflect.construct(t,n||[],Iv(e).constructor):t.apply(e,n))}function gNe(e,t){if(t&&(td(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vNe(e)}function vNe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(l6=function(){return!!e})()}function Iv(e){return Iv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Iv(e)}function xNe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R1(e,t)}function R1(e,t){return R1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},R1(e,t)}function vs(e,t,n){return t=c6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c6(e){var t=yNe(e,"string");return td(t)=="symbol"?t:t+""}function yNe(e,t){if(td(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(td(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ra=function(e){function t(n){var r;return fNe(this,t),r=pNe(this,t,[n]),vs(r,"pieRef",null),vs(r,"sectorRefs",[]),vs(r,"id",Rd("recharts-pie-")),vs(r,"handleAnimationEnd",function(){var a=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Ge(a)&&a()}),vs(r,"handleAnimationStart",function(){var a=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Ge(a)&&a()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return xNe(t,e),mNe(t,[{key:"isActiveIndex",value:function(r){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(r)!==-1:r===a}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,l=i.labelLine,c=i.dataKey,u=i.valueKey,d=Ve(this.props,!1),h=Ve(o,!1),m=Ve(l,!1),f=o&&o.offsetRadius||20,x=r.map(function(g,p){var v=(g.startAngle+g.endAngle)/2,y=Ht(g.cx,g.cy,g.outerRadius+f,v),w=qt(qt(qt(qt({},d),g),{},{stroke:"none"},h),{},{index:p,textAnchor:t.getTextAnchor(y.x,g.cx)},y),S=qt(qt(qt(qt({},d),g),{},{fill:"none",stroke:g.fill},m),{},{index:p,points:[Ht(g.cx,g.cy,g.outerRadius,v),y]}),j=c;return at(c)&&at(u)?j="value":at(c)&&(j=u),L.createElement(vt,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(p)},l&&t.renderLabelLineItem(l,S,"line"),t.renderLabelItem(o,w,Dn(g,j)))});return L.createElement(vt,{className:"recharts-pie-labels"},x)}},{key:"renderSectorsStatically",value:function(r){var a=this,i=this.props,o=i.activeShape,l=i.blendStroke,c=i.inactiveShape;return r.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&r.length!==1)return null;var h=a.isActiveIndex(d),m=c&&a.hasActiveIndex()?c:null,f=h?o:m,x=qt(qt({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return L.createElement(vt,Kc({ref:function(p){p&&!a.sectorRefs.includes(p)&&a.sectorRefs.push(p)},tabIndex:-1,className:"recharts-pie-sector"},Ul(a.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),L.createElement(o6,Kc({option:f,isActive:h,shapeType:"sector"},x)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,a=this.props,i=a.sectors,o=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,u=a.animationEasing,d=a.animationId,h=this.state,m=h.prevSectors,f=h.prevIsAnimationActive;return L.createElement(Ia,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(f),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(x){var g=x.t,p=[],v=i&&i[0],y=v.startAngle;return i.forEach(function(w,S){var j=m&&m[S],N=S>0?ss(w,"paddingAngle",0):0;if(j){var C=Ir(j.endAngle-j.startAngle,w.endAngle-w.startAngle),_=qt(qt({},w),{},{startAngle:y+N,endAngle:y+C(g)+N});p.push(_),y=_.endAngle}else{var A=w.endAngle,P=w.startAngle,T=Ir(0,A-P),E=T(g),I=qt(qt({},w),{},{startAngle:y+N,endAngle:y+E+N});p.push(I),y=I.endAngle}}),L.createElement(vt,null,r.renderSectorsStatically(p))})}},{key:"attachKeyboardHandlers",value:function(r){var a=this;r.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,a=r.sectors,i=r.isAnimationActive,o=this.state.prevSectors;return i&&a&&a.length&&(!o||!Qu(o,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,a=this.props,i=a.hide,o=a.sectors,l=a.className,c=a.label,u=a.cx,d=a.cy,h=a.innerRadius,m=a.outerRadius,f=a.isAnimationActive,x=this.state.isAnimationFinished;if(i||!o||!o.length||!we(u)||!we(d)||!we(h)||!we(m))return null;var g=st("recharts-pie",l);return L.createElement(vt,{tabIndex:this.props.rootTabIndex,className:g,ref:function(v){r.pieRef=v}},this.renderSectors(),c&&this.renderLabels(o),Un.renderCallByParent(this.props,null,!1),(!f||x)&&ui.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,a){return a.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==a.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:r.sectors!==a.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,a){return r>a?"start":r<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,a,i){if(L.isValidElement(r))return L.cloneElement(r,a);if(Ge(r))return r(a);var o=st("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return L.createElement(du,Kc({},a,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(r,a,i){if(L.isValidElement(r))return L.cloneElement(r,a);var o=i;if(Ge(r)&&(o=r(a),L.isValidElement(o)))return o;var l=st("recharts-pie-label-text",typeof r!="boolean"&&!Ge(r)?r.className:"");return L.createElement(Wl,Kc({},a,{alignmentBaseline:"middle",className:l}),o)}}])}(b.PureComponent);ig=ra;vs(ra,"displayName","Pie");vs(ra,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Ea.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});vs(ra,"parseDeltaAngle",function(e,t){var n=yr(t-e),r=Math.min(Math.abs(t-e),360);return n*r});vs(ra,"getRealPieData",function(e){var t=e.data,n=e.children,r=Ve(e,!1),a=js(n,Bd);return t&&t.length?t.map(function(i,o){return qt(qt(qt({payload:i},r),i),a&&a[o]&&a[o].props)}):a&&a.length?a.map(function(i){return qt(qt({},r),i.props)}):[]});vs(ra,"parseCoordinateOfPie",function(e,t){var n=t.top,r=t.left,a=t.width,i=t.height,o=B5(a,i),l=r+wr(e.cx,a,a/2),c=n+wr(e.cy,i,i/2),u=wr(e.innerRadius,o,0),d=wr(e.outerRadius,o,o*.8),h=e.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:h}});vs(ra,"getComposedData",function(e){var t=e.item,n=e.offset,r=t.type.defaultProps!==void 0?qt(qt({},t.type.defaultProps),t.props):t.props,a=ig.getRealPieData(r);if(!a||!a.length)return null;var i=r.cornerRadius,o=r.startAngle,l=r.endAngle,c=r.paddingAngle,u=r.dataKey,d=r.nameKey,h=r.valueKey,m=r.tooltipType,f=Math.abs(r.minAngle),x=ig.parseCoordinateOfPie(r,n),g=ig.parseDeltaAngle(o,l),p=Math.abs(g),v=u;at(u)&&at(h)?(Ys(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),v="value"):at(u)&&(Ys(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),v=h);var y=a.filter(function(_){return Dn(_,v,0)!==0}).length,w=(p>=360?y:y-1)*c,S=p-y*f-w,j=a.reduce(function(_,A){var P=Dn(A,v,0);return _+(we(P)?P:0)},0),N;if(j>0){var C;N=a.map(function(_,A){var P=Dn(_,v,0),T=Dn(_,d,A),E=(we(P)?P:0)/j,I;A?I=C.endAngle+yr(g)*c*(P!==0?1:0):I=o;var R=I+yr(g)*((P!==0?f:0)+E*S),z=(I+R)/2,U=(x.innerRadius+x.outerRadius)/2,K=[{name:T,value:P,payload:_,dataKey:v,type:m}],k=Ht(x.cx,x.cy,U,z);return C=qt(qt(qt({percent:E,cornerRadius:i,name:T,tooltipPayload:K,midAngle:z,middleRadius:U,tooltipPosition:k},_),x),{},{value:Dn(_,v),startAngle:I,endAngle:R,payload:_,paddingAngle:yr(g)*c}),C})}return qt(qt({},x),{},{sectors:N,data:a})});var wNe=Math.ceil,bNe=Math.max;function jNe(e,t,n,r){for(var a=-1,i=bNe(wNe((t-e)/(n||1)),0),o=Array(i);i--;)o[r?i:++a]=e,e+=n;return o}var NNe=jNe,SNe=PF,OT=1/0,_Ne=17976931348623157e292;function CNe(e){if(!e)return e===0?e:0;if(e=SNe(e),e===OT||e===-OT){var t=e<0?-1:1;return t*_Ne}return e===e?e:0}var u6=CNe,ANe=NNe,PNe=wy,Pw=u6;function ENe(e){return function(t,n,r){return r&&typeof r!="number"&&PNe(t,n,r)&&(n=r=void 0),t=Pw(t),n===void 0?(n=t,t=0):n=Pw(n),r=r===void 0?t<n?1:-1:Pw(r),ANe(t,n,r,e)}}var kNe=ENe,TNe=kNe,ONe=TNe(),DNe=ONe;const $v=Et(DNe);function nm(e){"@babel/helpers - typeof";return nm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nm(e)}function DT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function MT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DT(Object(n),!0).forEach(function(r){d6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function d6(e,t,n){return t=MNe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MNe(e){var t=INe(e,"string");return nm(t)=="symbol"?t:t+""}function INe(e,t){if(nm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(nm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $Ne=["Webkit","Moz","O","ms"],RNe=function(t,n){var r=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=$Ne.reduce(function(i,o){return MT(MT({},i),{},d6({},o+r,n))},{});return a[t]=n,a};function nd(e){"@babel/helpers - typeof";return nd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nd(e)}function Rv(){return Rv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rv.apply(this,arguments)}function IT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ew(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IT(Object(n),!0).forEach(function(r){Gr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function LNe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f6(r.key),r)}}function FNe(e,t,n){return t&&$T(e.prototype,t),n&&$T(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function zNe(e,t,n){return t=Lv(t),BNe(e,h6()?Reflect.construct(t,n||[],Lv(e).constructor):t.apply(e,n))}function BNe(e,t){if(t&&(nd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qNe(e)}function qNe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(h6=function(){return!!e})()}function Lv(e){return Lv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Lv(e)}function VNe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L1(e,t)}function L1(e,t){return L1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},L1(e,t)}function Gr(e,t,n){return t=f6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f6(e){var t=UNe(e,"string");return nd(t)=="symbol"?t:t+""}function UNe(e,t){if(nd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(nd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var WNe=function(t){var n=t.data,r=t.startIndex,a=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!n||!n.length)return{};var c=n.length,u=Wh().domain($v(0,c)).range([i,i+o-l]),d=u.domain().map(function(h){return u(h)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(a),scale:u,scaleValues:d}},RT=function(t){return t.changedTouches&&!!t.changedTouches.length},rd=function(e){function t(n){var r;return LNe(this,t),r=zNe(this,t,[n]),Gr(r,"handleDrag",function(a){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(a):r.state.isSlideMoving&&r.handleSlideDrag(a)}),Gr(r,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&r.handleDrag(a.changedTouches[0])}),Gr(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=r.props,i=a.endIndex,o=a.onDragEnd,l=a.startIndex;o==null||o({endIndex:i,startIndex:l})}),r.detachDragEndListener()}),Gr(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Gr(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Gr(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Gr(r,"handleSlideDragStart",function(a){var i=RT(a)?a.changedTouches[0]:a;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return VNe(t,e),FNe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var a=r.startX,i=r.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,h=Math.min(a,i),m=Math.max(a,i),f=t.getIndexInRange(o,h),x=t.getIndexInRange(o,m);return{startIndex:f-f%c,endIndex:x===d?d:x-x%c}}},{key:"getTextOfTick",value:function(r){var a=this.props,i=a.data,o=a.tickFormatter,l=a.dataKey,c=Dn(i[r],l,r);return Ge(o)?o(c,r):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var a=this.state,i=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,u=c.x,d=c.width,h=c.travellerWidth,m=c.startIndex,f=c.endIndex,x=c.onChange,g=r.pageX-i;g>0?g=Math.min(g,u+d-h-l,u+d-h-o):g<0&&(g=Math.max(g,u-o,u-l));var p=this.getIndex({startX:o+g,endX:l+g});(p.startIndex!==m||p.endIndex!==f)&&x&&x(p),this.setState({startX:o+g,endX:l+g,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,a){var i=RT(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,u=this.state[o],d=this.props,h=d.x,m=d.width,f=d.travellerWidth,x=d.onChange,g=d.gap,p=d.data,v={startX:this.state.startX,endX:this.state.endX},y=r.pageX-i;y>0?y=Math.min(y,h+m-f-u):y<0&&(y=Math.max(y,h-u)),v[o]=u+y;var w=this.getIndex(v),S=w.startIndex,j=w.endIndex,N=function(){var _=p.length-1;return o==="startX"&&(l>c?S%g===0:j%g===0)||l<c&&j===_||o==="endX"&&(l>c?j%g===0:S%g===0)||l>c&&j===_};this.setState(Gr(Gr({},o,u+y),"brushMoveStartX",r.pageX),function(){x&&N()&&x(w)})}},{key:"handleTravellerMoveKeyboard",value:function(r,a){var i=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,d=this.state[a],h=l.indexOf(d);if(h!==-1){var m=h+r;if(!(m===-1||m>=l.length)){var f=l[m];a==="startX"&&f>=u||a==="endX"&&f<=c||this.setState(Gr({},a,f),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,a=r.x,i=r.y,o=r.width,l=r.height,c=r.fill,u=r.stroke;return L.createElement("rect",{stroke:u,fill:c,x:a,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var r=this.props,a=r.x,i=r.y,o=r.width,l=r.height,c=r.data,u=r.children,d=r.padding,h=b.Children.only(u);return h?L.cloneElement(h,{x:a,y:i,width:o,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(r,a){var i,o,l=this,c=this.props,u=c.y,d=c.travellerWidth,h=c.height,m=c.traveller,f=c.ariaLabel,x=c.data,g=c.startIndex,p=c.endIndex,v=Math.max(r,this.props.x),y=Ew(Ew({},Ve(this.props,!1)),{},{x:v,y:u,width:d,height:h}),w=f||"Min value: ".concat((i=x[g])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=x[p])===null||o===void 0?void 0:o.name);return L.createElement(vt,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(j){["ArrowLeft","ArrowRight"].includes(j.key)&&(j.preventDefault(),j.stopPropagation(),l.handleTravellerMoveKeyboard(j.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(m,y))}},{key:"renderSlide",value:function(r,a){var i=this.props,o=i.y,l=i.height,c=i.stroke,u=i.travellerWidth,d=Math.min(r,a)+u,h=Math.max(Math.abs(a-r)-u,0);return L.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:o,width:h,height:l})}},{key:"renderText",value:function(){var r=this.props,a=r.startIndex,i=r.endIndex,o=r.y,l=r.height,c=r.travellerWidth,u=r.stroke,d=this.state,h=d.startX,m=d.endX,f=5,x={pointerEvents:"none",fill:u};return L.createElement(vt,{className:"recharts-brush-texts"},L.createElement(Wl,Rv({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,m)-f,y:o+l/2},x),this.getTextOfTick(a)),L.createElement(Wl,Rv({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,m)+c+f,y:o+l/2},x),this.getTextOfTick(i)))}},{key:"render",value:function(){var r=this.props,a=r.data,i=r.className,o=r.children,l=r.x,c=r.y,u=r.width,d=r.height,h=r.alwaysShowText,m=this.state,f=m.startX,x=m.endX,g=m.isTextActive,p=m.isSlideMoving,v=m.isTravellerMoving,y=m.isTravellerFocused;if(!a||!a.length||!we(l)||!we(c)||!we(u)||!we(d)||u<=0||d<=0)return null;var w=st("recharts-brush",i),S=L.Children.count(o)===1,j=RNe("userSelect","none");return L.createElement(vt,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:j},this.renderBackground(),S&&this.renderPanorama(),this.renderSlide(f,x),this.renderTravellerLayer(f,"startX"),this.renderTravellerLayer(x,"endX"),(g||p||v||y||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var a=r.x,i=r.y,o=r.width,l=r.height,c=r.stroke,u=Math.floor(i+l/2)-1;return L.createElement(L.Fragment,null,L.createElement("rect",{x:a,y:i,width:o,height:l,fill:c,stroke:"none"}),L.createElement("line",{x1:a+1,y1:u,x2:a+o-1,y2:u,fill:"none",stroke:"#fff"}),L.createElement("line",{x1:a+1,y1:u+2,x2:a+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,a){var i;return L.isValidElement(r)?i=L.cloneElement(r,a):Ge(r)?i=r(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(r,a){var i=r.data,o=r.width,l=r.x,c=r.travellerWidth,u=r.updateId,d=r.startIndex,h=r.endIndex;if(i!==a.prevData||u!==a.prevUpdateId)return Ew({prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},i&&i.length?WNe({data:i,width:o,x:l,travellerWidth:c,startIndex:d,endIndex:h}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var m=a.scale.domain().map(function(f){return a.scale(f)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:a.scale(r.startIndex),endX:a.scale(r.endIndex),scaleValues:m}}return null}},{key:"getIndexInRange",value:function(r,a){for(var i=r.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);r[c]>a?l=c:o=c}return a>=r[l]?l:o}}])}(b.PureComponent);Gr(rd,"displayName","Brush");Gr(rd,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var HNe=T_;function KNe(e,t){var n;return HNe(e,function(r,a,i){return n=t(r,a,i),!n}),!!n}var GNe=KNe,YNe=tF,QNe=qa,XNe=GNe,JNe=qr,ZNe=wy;function eSe(e,t,n){var r=JNe(e)?YNe:XNe;return n&&ZNe(e,t,n)&&(t=void 0),r(e,QNe(t))}var tSe=eSe;const nSe=Et(tSe);var Ta=function(t,n){var r=t.alwaysShow,a=t.ifOverflow;return r&&(a="extendDomain"),a===n},LT=NF;function rSe(e,t,n){t=="__proto__"&&LT?LT(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var sSe=rSe,aSe=sSe,iSe=bF,oSe=qa;function lSe(e,t){var n={};return t=oSe(t),iSe(e,function(r,a,i){aSe(n,a,t(r,a,i))}),n}var cSe=lSe;const uSe=Et(cSe);function dSe(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}var hSe=dSe,fSe=T_;function mSe(e,t){var n=!0;return fSe(e,function(r,a,i){return n=!!t(r,a,i),n}),n}var pSe=mSe,gSe=hSe,vSe=pSe,xSe=qa,ySe=qr,wSe=wy;function bSe(e,t,n){var r=ySe(e)?gSe:vSe;return n&&wSe(e,t,n)&&(t=void 0),r(e,xSe(t))}var jSe=bSe;const m6=Et(jSe);var NSe=["x","y"];function rm(e){"@babel/helpers - typeof";return rm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rm(e)}function F1(){return F1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F1.apply(this,arguments)}function FT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function wh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FT(Object(n),!0).forEach(function(r){SSe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function SSe(e,t,n){return t=_Se(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _Se(e){var t=CSe(e,"string");return rm(t)=="symbol"?t:t+""}function CSe(e,t){if(rm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(rm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ASe(e,t){if(e==null)return{};var n=PSe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function PSe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function ESe(e,t){var n=e.x,r=e.y,a=ASe(e,NSe),i="".concat(n),o=parseInt(i,10),l="".concat(r),c=parseInt(l,10),u="".concat(t.height||a.height),d=parseInt(u,10),h="".concat(t.width||a.width),m=parseInt(h,10);return wh(wh(wh(wh(wh({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:m,name:t.name,radius:t.radius})}function zT(e){return L.createElement(o6,F1({shapeType:"rectangle",propTransformer:ESe,activeClassName:"recharts-active-bar"},e))}var kSe=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,a){if(typeof t=="number")return t;var i=we(r)||tae(r);return i?t(r,a):(i||Kl(),n)}},TSe=["value","background"],p6;function sd(e){"@babel/helpers - typeof";return sd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sd(e)}function OSe(e,t){if(e==null)return{};var n=DSe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function DSe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Fv(){return Fv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fv.apply(this,arguments)}function BT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function xn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BT(Object(n),!0).forEach(function(r){lo(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function MSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v6(r.key),r)}}function ISe(e,t,n){return t&&qT(e.prototype,t),n&&qT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function $Se(e,t,n){return t=zv(t),RSe(e,g6()?Reflect.construct(t,n||[],zv(e).constructor):t.apply(e,n))}function RSe(e,t){if(t&&(sd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LSe(e)}function LSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g6=function(){return!!e})()}function zv(e){return zv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},zv(e)}function FSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z1(e,t)}function z1(e,t){return z1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},z1(e,t)}function lo(e,t,n){return t=v6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v6(e){var t=zSe(e,"string");return sd(t)=="symbol"?t:t+""}function zSe(e,t){if(sd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(sd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Na=function(e){function t(){var n;MSe(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=$Se(this,t,[].concat(a)),lo(n,"state",{isAnimationFinished:!1}),lo(n,"id",Rd("recharts-bar-")),lo(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),lo(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return FSe(t,e),ISe(t,[{key:"renderRectanglesStatically",value:function(r){var a=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,u=i.activeBar,d=Ve(this.props,!1);return r&&r.map(function(h,m){var f=m===c,x=f?u:o,g=xn(xn(xn({},d),h),{},{isActive:f,option:x,index:m,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return L.createElement(vt,Fv({className:"recharts-bar-rectangle"},Ul(a.props,h,m),{key:"rectangle-".concat(h==null?void 0:h.x,"-").concat(h==null?void 0:h.y,"-").concat(h==null?void 0:h.value,"-").concat(m)}),L.createElement(zT,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,a=this.props,i=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,u=a.animationDuration,d=a.animationEasing,h=a.animationId,m=this.state.prevData;return L.createElement(Ia,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(f){var x=f.t,g=i.map(function(p,v){var y=m&&m[v];if(y){var w=Ir(y.x,p.x),S=Ir(y.y,p.y),j=Ir(y.width,p.width),N=Ir(y.height,p.height);return xn(xn({},p),{},{x:w(x),y:S(x),width:j(x),height:N(x)})}if(o==="horizontal"){var C=Ir(0,p.height),_=C(x);return xn(xn({},p),{},{y:p.y+p.height-_,height:_})}var A=Ir(0,p.width),P=A(x);return xn(xn({},p),{},{width:P})});return L.createElement(vt,null,r.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var r=this.props,a=r.data,i=r.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!Qu(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var r=this,a=this.props,i=a.data,o=a.dataKey,l=a.activeIndex,c=Ve(this.props.background,!1);return i.map(function(u,d){u.value;var h=u.background,m=OSe(u,TSe);if(!h)return null;var f=xn(xn(xn(xn(xn({},m),{},{fill:"#eee"},h),c),Ul(r.props,u,d)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return L.createElement(zT,Fv({key:"background-bar-".concat(d),option:r.props.background,isActive:d===l},f))})}},{key:"renderErrorBar",value:function(r,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,h=js(d,Ty);if(!h)return null;var m=u==="vertical"?o[0].height/2:o[0].width/2,f=function(p,v){var y=Array.isArray(p.value)?p.value[1]:p.value;return{x:p.x,y:p.y,value:y,errorVal:Dn(p,v)}},x={clipPath:r?"url(#clipPath-".concat(a,")"):null};return L.createElement(vt,x,h.map(function(g){return L.cloneElement(g,{key:"error-bar-".concat(a,"-").concat(g.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:m,dataPointFormatter:f})}))}},{key:"render",value:function(){var r=this.props,a=r.hide,i=r.data,o=r.className,l=r.xAxis,c=r.yAxis,u=r.left,d=r.top,h=r.width,m=r.height,f=r.isAnimationActive,x=r.background,g=r.id;if(a||!i||!i.length)return null;var p=this.state.isAnimationFinished,v=st("recharts-bar",o),y=l&&l.allowDataOverflow,w=c&&c.allowDataOverflow,S=y||w,j=at(g)?this.id:g;return L.createElement(vt,{className:v},y||w?L.createElement("defs",null,L.createElement("clipPath",{id:"clipPath-".concat(j)},L.createElement("rect",{x:y?u:u-h/2,y:w?d:d-m/2,width:y?h:h*2,height:w?m:m*2}))):null,L.createElement(vt,{className:"recharts-bar-rectangles",clipPath:S?"url(#clipPath-".concat(j,")"):null},x?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(S,j),(!f||p)&&ui.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(r,a){return r.animationId!==a.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:a.curData}:r.data!==a.curData?{curData:r.data}:null}}])}(b.PureComponent);p6=Na;lo(Na,"displayName","Bar");lo(Na,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Ea.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});lo(Na,"getComposedData",function(e){var t=e.props,n=e.item,r=e.barPosition,a=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,h=e.displayedData,m=e.offset,f=w0e(r,n);if(!f)return null;var x=t.layout,g=n.type.defaultProps,p=g!==void 0?xn(xn({},g),n.props):n.props,v=p.dataKey,y=p.children,w=p.minPointSize,S=x==="horizontal"?o:i,j=u?S.scale.domain():null,N=A0e({numericAxis:S}),C=js(y,Bd),_=h.map(function(A,P){var T,E,I,R,z,U;u?T=b0e(u[d+P],j):(T=Dn(A,v),Array.isArray(T)||(T=[N,T]));var K=kSe(w,p6.defaultProps.minPointSize)(T[1],P);if(x==="horizontal"){var k,D=[o.scale(T[0]),o.scale(T[1])],J=D[0],W=D[1];E=Tk({axis:i,ticks:l,bandSize:a,offset:f.offset,entry:A,index:P}),I=(k=W??J)!==null&&k!==void 0?k:void 0,R=f.size;var Y=J-W;if(z=Number.isNaN(Y)?0:Y,U={x:E,y:o.y,width:R,height:o.height},Math.abs(K)>0&&Math.abs(z)<Math.abs(K)){var V=yr(z||K)*(Math.abs(K)-Math.abs(z));I-=V,z+=V}}else{var O=[i.scale(T[0]),i.scale(T[1])],le=O[0],te=O[1];if(E=le,I=Tk({axis:o,ticks:c,bandSize:a,offset:f.offset,entry:A,index:P}),R=te-le,z=f.size,U={x:i.x,y:I,width:i.width,height:z},Math.abs(K)>0&&Math.abs(R)<Math.abs(K)){var ce=yr(R||K)*(Math.abs(K)-Math.abs(R));R+=ce}}return xn(xn(xn({},A),{},{x:E,y:I,width:R,height:z,value:u?T:T[1],payload:A,background:U},C&&C[P]&&C[P].props),{},{tooltipPayload:[F5(n,A)],tooltipPosition:{x:E+R/2,y:I+z/2}})});return xn({data:_,layout:x},m)});function sm(e){"@babel/helpers - typeof";return sm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sm(e)}function BSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,x6(r.key),r)}}function qSe(e,t,n){return t&&VT(e.prototype,t),n&&VT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function UT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function qs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?UT(Object(n),!0).forEach(function(r){Fy(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Fy(e,t,n){return t=x6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x6(e){var t=VSe(e,"string");return sm(t)=="symbol"?t:t+""}function VSe(e,t){if(sm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(sm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var y6=function(t,n,r,a,i){var o=t.width,l=t.height,c=t.layout,u=t.children,d=Object.keys(n),h={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:l-r.bottom,bottomMirror:l-r.bottom},m=!!Qr(u,Na);return d.reduce(function(f,x){var g=n[x],p=g.orientation,v=g.domain,y=g.padding,w=y===void 0?{}:y,S=g.mirror,j=g.reversed,N="".concat(p).concat(S?"Mirror":""),C,_,A,P,T;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var E=v[1]-v[0],I=1/0,R=g.categoricalDomain.sort(sae);if(R.forEach(function(O,le){le>0&&(I=Math.min((O||0)-(R[le-1]||0),I))}),Number.isFinite(I)){var z=I/E,U=g.layout==="vertical"?r.height:r.width;if(g.padding==="gap"&&(C=z*U/2),g.padding==="no-gap"){var K=wr(t.barCategoryGap,z*U),k=z*U/2;C=k-K-(k-K)/U*K}}}a==="xAxis"?_=[r.left+(w.left||0)+(C||0),r.left+r.width-(w.right||0)-(C||0)]:a==="yAxis"?_=c==="horizontal"?[r.top+r.height-(w.bottom||0),r.top+(w.top||0)]:[r.top+(w.top||0)+(C||0),r.top+r.height-(w.bottom||0)-(C||0)]:_=g.range,j&&(_=[_[1],_[0]]);var D=I5(g,i,m),J=D.scale,W=D.realScaleType;J.domain(v).range(_),$5(J);var Y=R5(J,qs(qs({},g),{},{realScaleType:W}));a==="xAxis"?(T=p==="top"&&!S||p==="bottom"&&S,A=r.left,P=h[N]-T*g.height):a==="yAxis"&&(T=p==="left"&&!S||p==="right"&&S,A=h[N]-T*g.width,P=r.top);var V=qs(qs(qs({},g),Y),{},{realScaleType:W,x:A,y:P,scale:J,width:a==="xAxis"?r.width:g.width,height:a==="yAxis"?r.height:g.height});return V.bandSize=Sv(V,Y),!g.hide&&a==="xAxis"?h[N]+=(T?-1:1)*V.height:g.hide||(h[N]+=(T?-1:1)*V.width),qs(qs({},f),{},Fy({},x,V))},{})},w6=function(t,n){var r=t.x,a=t.y,i=n.x,o=n.y;return{x:Math.min(r,i),y:Math.min(a,o),width:Math.abs(i-r),height:Math.abs(o-a)}},USe=function(t){var n=t.x1,r=t.y1,a=t.x2,i=t.y2;return w6({x:n,y:r},{x:a,y:i})},b6=function(){function e(t){BSe(this,e),this.scale=t}return qSe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=r.bandAware,i=r.position;if(n!==void 0){if(i)switch(i){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),a=r[0],i=r[r.length-1];return a<=i?n>=a&&n<=i:n>=i&&n<=a}}],[{key:"create",value:function(n){return new e(n)}}])}();Fy(b6,"EPS",1e-4);var i2=function(t){var n=Object.keys(t).reduce(function(r,a){return qs(qs({},r),{},Fy({},a,b6.create(t[a])))},{});return qs(qs({},n),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return uSe(a,function(c,u){return n[u].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return m6(a,function(i,o){return n[o].isInRange(i)})}})};function WSe(e){return(e%180+180)%180}var HSe=function(t){var n=t.width,r=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=WSe(a),o=i*Math.PI/180,l=Math.atan(r/n),c=o>l&&o<Math.PI-l?r/Math.sin(o):n/Math.cos(o);return Math.abs(c)},KSe=qa,GSe=Om,YSe=xy;function QSe(e){return function(t,n,r){var a=Object(t);if(!GSe(t)){var i=KSe(n);t=YSe(t),n=function(l){return i(a[l],l,a)}}var o=e(t,n,r);return o>-1?a[i?t[o]:o]:void 0}}var XSe=QSe,JSe=u6;function ZSe(e){var t=JSe(e),n=t%1;return t===t?n?t-n:t:0}var e_e=ZSe,t_e=pF,n_e=qa,r_e=e_e,s_e=Math.max;function a_e(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var a=n==null?0:r_e(n);return a<0&&(a=s_e(r+a,0)),t_e(e,n_e(t),a)}var i_e=a_e,o_e=XSe,l_e=i_e,c_e=o_e(l_e),u_e=c_e;const d_e=Et(u_e);var h_e=ase(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),o2=b.createContext(void 0),l2=b.createContext(void 0),j6=b.createContext(void 0),N6=b.createContext({}),S6=b.createContext(void 0),_6=b.createContext(0),C6=b.createContext(0),WT=function(t){var n=t.state,r=n.xAxisMap,a=n.yAxisMap,i=n.offset,o=t.clipPathId,l=t.children,c=t.width,u=t.height,d=h_e(i);return L.createElement(o2.Provider,{value:r},L.createElement(l2.Provider,{value:a},L.createElement(N6.Provider,{value:i},L.createElement(j6.Provider,{value:d},L.createElement(S6.Provider,{value:o},L.createElement(_6.Provider,{value:u},L.createElement(C6.Provider,{value:c},l)))))))},f_e=function(){return b.useContext(S6)},A6=function(t){var n=b.useContext(o2);n==null&&Kl();var r=n[t];return r==null&&Kl(),r},m_e=function(){var t=b.useContext(o2);return Gi(t)},p_e=function(){var t=b.useContext(l2),n=d_e(t,function(r){return m6(r.domain,Number.isFinite)});return n||Gi(t)},P6=function(t){var n=b.useContext(l2);n==null&&Kl();var r=n[t];return r==null&&Kl(),r},g_e=function(){var t=b.useContext(j6);return t},v_e=function(){return b.useContext(N6)},c2=function(){return b.useContext(C6)},u2=function(){return b.useContext(_6)};function ad(e){"@babel/helpers - typeof";return ad=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ad(e)}function x_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y_e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,k6(r.key),r)}}function w_e(e,t,n){return t&&y_e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function b_e(e,t,n){return t=Bv(t),j_e(e,E6()?Reflect.construct(t,n||[],Bv(e).constructor):t.apply(e,n))}function j_e(e,t){if(t&&(ad(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return N_e(e)}function N_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(E6=function(){return!!e})()}function Bv(e){return Bv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Bv(e)}function S_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B1(e,t)}function B1(e,t){return B1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},B1(e,t)}function HT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function KT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?HT(Object(n),!0).forEach(function(r){d2(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function d2(e,t,n){return t=k6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k6(e){var t=__e(e,"string");return ad(t)=="symbol"?t:t+""}function __e(e,t){if(ad(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ad(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function C_e(e,t){return k_e(e)||E_e(e,t)||P_e(e,t)||A_e()}function A_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P_e(e,t){if(e){if(typeof e=="string")return GT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GT(e,t)}}function GT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E_e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function k_e(e){if(Array.isArray(e))return e}function q1(){return q1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q1.apply(this,arguments)}var T_e=function(t,n){var r;return L.isValidElement(t)?r=L.cloneElement(t,n):Ge(t)?r=t(n):r=L.createElement("line",q1({},n,{className:"recharts-reference-line-line"})),r},O_e=function(t,n,r,a,i,o,l,c,u){var d=i.x,h=i.y,m=i.width,f=i.height;if(r){var x=u.y,g=t.y.apply(x,{position:o});if(Ta(u,"discard")&&!t.y.isInRange(g))return null;var p=[{x:d+m,y:g},{x:d,y:g}];return c==="left"?p.reverse():p}if(n){var v=u.x,y=t.x.apply(v,{position:o});if(Ta(u,"discard")&&!t.x.isInRange(y))return null;var w=[{x:y,y:h+f},{x:y,y:h}];return l==="top"?w.reverse():w}if(a){var S=u.segment,j=S.map(function(N){return t.apply(N,{position:o})});return Ta(u,"discard")&&nSe(j,function(N){return!t.isInRange(N)})?null:j}return null};function D_e(e){var t=e.x,n=e.y,r=e.segment,a=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=f_e(),d=A6(a),h=P6(i),m=g_e();if(!u||!m)return null;Ys(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=i2({x:d.scale,y:h.scale}),x=In(t),g=In(n),p=r&&r.length===2,v=O_e(f,x,g,p,m,e.position,d.orientation,h.orientation,e);if(!v)return null;var y=C_e(v,2),w=y[0],S=w.x,j=w.y,N=y[1],C=N.x,_=N.y,A=Ta(e,"hidden")?"url(#".concat(u,")"):void 0,P=KT(KT({clipPath:A},Ve(e,!0)),{},{x1:S,y1:j,x2:C,y2:_});return L.createElement(vt,{className:st("recharts-reference-line",l)},T_e(o,P),Un.renderCallByParent(e,USe({x1:S,y1:j,x2:C,y2:_})))}var h2=function(e){function t(){return x_e(this,t),b_e(this,t,arguments)}return S_e(t,e),w_e(t,[{key:"render",value:function(){return L.createElement(D_e,this.props)}}])}(L.Component);d2(h2,"displayName","ReferenceLine");d2(h2,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function V1(){return V1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},V1.apply(this,arguments)}function id(e){"@babel/helpers - typeof";return id=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},id(e)}function YT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function QT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YT(Object(n),!0).forEach(function(r){zy(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function M_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I_e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,O6(r.key),r)}}function $_e(e,t,n){return t&&I_e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function R_e(e,t,n){return t=qv(t),L_e(e,T6()?Reflect.construct(t,n||[],qv(e).constructor):t.apply(e,n))}function L_e(e,t){if(t&&(id(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return F_e(e)}function F_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(T6=function(){return!!e})()}function qv(e){return qv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qv(e)}function z_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U1(e,t)}function U1(e,t){return U1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},U1(e,t)}function zy(e,t,n){return t=O6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O6(e){var t=B_e(e,"string");return id(t)=="symbol"?t:t+""}function B_e(e,t){if(id(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(id(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var q_e=function(t){var n=t.x,r=t.y,a=t.xAxis,i=t.yAxis,o=i2({x:a.scale,y:i.scale}),l=o.apply({x:n,y:r},{bandAware:!0});return Ta(t,"discard")&&!o.isInRange(l)?null:l},By=function(e){function t(){return M_e(this,t),R_e(this,t,arguments)}return z_e(t,e),$_e(t,[{key:"render",value:function(){var r=this.props,a=r.x,i=r.y,o=r.r,l=r.alwaysShow,c=r.clipPathId,u=In(a),d=In(i);if(Ys(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var h=q_e(this.props);if(!h)return null;var m=h.x,f=h.y,x=this.props,g=x.shape,p=x.className,v=Ta(this.props,"hidden")?"url(#".concat(c,")"):void 0,y=QT(QT({clipPath:v},Ve(this.props,!0)),{},{cx:m,cy:f});return L.createElement(vt,{className:st("recharts-reference-dot",p)},t.renderDot(g,y),Un.renderCallByParent(this.props,{x:m-o,y:f-o,width:2*o,height:2*o}))}}])}(L.Component);zy(By,"displayName","ReferenceDot");zy(By,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});zy(By,"renderDot",function(e,t){var n;return L.isValidElement(e)?n=L.cloneElement(e,t):Ge(e)?n=e(t):n=L.createElement(Oy,V1({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function W1(){return W1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W1.apply(this,arguments)}function od(e){"@babel/helpers - typeof";return od=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},od(e)}function XT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function JT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XT(Object(n),!0).forEach(function(r){qy(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function V_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U_e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,M6(r.key),r)}}function W_e(e,t,n){return t&&U_e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function H_e(e,t,n){return t=Vv(t),K_e(e,D6()?Reflect.construct(t,n||[],Vv(e).constructor):t.apply(e,n))}function K_e(e,t){if(t&&(od(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return G_e(e)}function G_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(D6=function(){return!!e})()}function Vv(e){return Vv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Vv(e)}function Y_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H1(e,t)}function H1(e,t){return H1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},H1(e,t)}function qy(e,t,n){return t=M6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M6(e){var t=Q_e(e,"string");return od(t)=="symbol"?t:t+""}function Q_e(e,t){if(od(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(od(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var X_e=function(t,n,r,a,i){var o=i.x1,l=i.x2,c=i.y1,u=i.y2,d=i.xAxis,h=i.yAxis;if(!d||!h)return null;var m=i2({x:d.scale,y:h.scale}),f={x:t?m.x.apply(o,{position:"start"}):m.x.rangeMin,y:r?m.y.apply(c,{position:"start"}):m.y.rangeMin},x={x:n?m.x.apply(l,{position:"end"}):m.x.rangeMax,y:a?m.y.apply(u,{position:"end"}):m.y.rangeMax};return Ta(i,"discard")&&(!m.isInRange(f)||!m.isInRange(x))?null:w6(f,x)},Vy=function(e){function t(){return V_e(this,t),H_e(this,t,arguments)}return Y_e(t,e),W_e(t,[{key:"render",value:function(){var r=this.props,a=r.x1,i=r.x2,o=r.y1,l=r.y2,c=r.className,u=r.alwaysShow,d=r.clipPathId;Ys(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=In(a),m=In(i),f=In(o),x=In(l),g=this.props.shape;if(!h&&!m&&!f&&!x&&!g)return null;var p=X_e(h,m,f,x,this.props);if(!p&&!g)return null;var v=Ta(this.props,"hidden")?"url(#".concat(d,")"):void 0;return L.createElement(vt,{className:st("recharts-reference-area",c)},t.renderRect(g,JT(JT({clipPath:v},Ve(this.props,!0)),p)),Un.renderCallByParent(this.props,p))}}])}(L.Component);qy(Vy,"displayName","ReferenceArea");qy(Vy,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});qy(Vy,"renderRect",function(e,t){var n;return L.isValidElement(e)?n=L.cloneElement(e,t):Ge(e)?n=e(t):n=L.createElement(a2,W1({},t,{className:"recharts-reference-area-rect"})),n});function I6(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],a=0;a<e.length;a+=t)r.push(e[a]);return r}function J_e(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return HSe(r,n)}function Z_e(e,t,n){var r=n==="width",a=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:r?a:i,end:r?a+o:i+l}:{start:r?a+o:i+l,end:r?a:i}}function Uv(e,t,n,r,a){if(e*t<e*r||e*t>e*a)return!1;var i=n();return e*(t-e*i/2-r)>=0&&e*(t+e*i/2-a)<=0}function e2e(e,t){return I6(e,t+1)}function t2e(e,t,n,r,a){for(var i=(r||[]).slice(),o=t.start,l=t.end,c=0,u=1,d=o,h=function(){var x=r==null?void 0:r[c];if(x===void 0)return{v:I6(r,u)};var g=c,p,v=function(){return p===void 0&&(p=n(x,g)),p},y=x.coordinate,w=c===0||Uv(e,y,v,d,l);w||(c=0,d=o,u+=1),w&&(d=y+e*(v()/2+a),c+=u)},m;u<=i.length;)if(m=h(),m)return m.v;return[]}function am(e){"@babel/helpers - typeof";return am=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},am(e)}function ZT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function sr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZT(Object(n),!0).forEach(function(r){n2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function n2e(e,t,n){return t=r2e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r2e(e){var t=s2e(e,"string");return am(t)=="symbol"?t:t+""}function s2e(e,t){if(am(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(am(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function a2e(e,t,n,r,a){for(var i=(r||[]).slice(),o=i.length,l=t.start,c=t.end,u=function(m){var f=i[m],x,g=function(){return x===void 0&&(x=n(f,m)),x};if(m===o-1){var p=e*(f.coordinate+e*g()/2-c);i[m]=f=sr(sr({},f),{},{tickCoord:p>0?f.coordinate-p*e:f.coordinate})}else i[m]=f=sr(sr({},f),{},{tickCoord:f.coordinate});var v=Uv(e,f.tickCoord,g,l,c);v&&(c=f.tickCoord-e*(g()/2+a),i[m]=sr(sr({},f),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return i}function i2e(e,t,n,r,a,i){var o=(r||[]).slice(),l=o.length,c=t.start,u=t.end;if(i){var d=r[l-1],h=n(d,l-1),m=e*(d.coordinate+e*h/2-u);o[l-1]=d=sr(sr({},d),{},{tickCoord:m>0?d.coordinate-m*e:d.coordinate});var f=Uv(e,d.tickCoord,function(){return h},c,u);f&&(u=d.tickCoord-e*(h/2+a),o[l-1]=sr(sr({},d),{},{isShow:!0}))}for(var x=i?l-1:l,g=function(y){var w=o[y],S,j=function(){return S===void 0&&(S=n(w,y)),S};if(y===0){var N=e*(w.coordinate-e*j()/2-c);o[y]=w=sr(sr({},w),{},{tickCoord:N<0?w.coordinate-N*e:w.coordinate})}else o[y]=w=sr(sr({},w),{},{tickCoord:w.coordinate});var C=Uv(e,w.tickCoord,j,c,u);C&&(c=w.tickCoord+e*(j()/2+a),o[y]=sr(sr({},w),{},{isShow:!0}))},p=0;p<x;p++)g(p);return o}function f2(e,t,n){var r=e.tick,a=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,d=e.unit,h=e.angle;if(!a||!a.length||!r)return[];if(we(c)||Ea.isSsr)return e2e(a,typeof c=="number"&&we(c)?c:0);var m=[],f=l==="top"||l==="bottom"?"width":"height",x=d&&f==="width"?Uh(d,{fontSize:t,letterSpacing:n}):{width:0,height:0},g=function(w,S){var j=Ge(u)?u(w.value,S):w.value;return f==="width"?J_e(Uh(j,{fontSize:t,letterSpacing:n}),x,h):Uh(j,{fontSize:t,letterSpacing:n})[f]},p=a.length>=2?yr(a[1].coordinate-a[0].coordinate):1,v=Z_e(i,p,f);return c==="equidistantPreserveStart"?t2e(p,v,g,a,o):(c==="preserveStart"||c==="preserveStartEnd"?m=i2e(p,v,g,a,o,c==="preserveStartEnd"):m=a2e(p,v,g,a,o),m.filter(function(y){return y.isShow}))}var o2e=["viewBox"],l2e=["viewBox"],c2e=["ticks"];function ld(e){"@babel/helpers - typeof";return ld=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ld(e)}function Gc(){return Gc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gc.apply(this,arguments)}function eO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function _n(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eO(Object(n),!0).forEach(function(r){m2(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kw(e,t){if(e==null)return{};var n=u2e(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function u2e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function d2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,R6(r.key),r)}}function h2e(e,t,n){return t&&tO(e.prototype,t),n&&tO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function f2e(e,t,n){return t=Wv(t),m2e(e,$6()?Reflect.construct(t,n||[],Wv(e).constructor):t.apply(e,n))}function m2e(e,t){if(t&&(ld(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p2e(e)}function p2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($6=function(){return!!e})()}function Wv(e){return Wv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Wv(e)}function g2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K1(e,t)}function K1(e,t){return K1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},K1(e,t)}function m2(e,t,n){return t=R6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R6(e){var t=v2e(e,"string");return ld(t)=="symbol"?t:t+""}function v2e(e,t){if(ld(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ld(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wd=function(e){function t(n){var r;return d2e(this,t),r=f2e(this,t,[n]),r.state={fontSize:"",letterSpacing:""},r}return g2e(t,e),h2e(t,[{key:"shouldComponentUpdate",value:function(r,a){var i=r.viewBox,o=kw(r,o2e),l=this.props,c=l.viewBox,u=kw(l,l2e);return!ou(i,c)||!ou(o,u)||!ou(a,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var a=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var a=this.props,i=a.x,o=a.y,l=a.width,c=a.height,u=a.orientation,d=a.tickSize,h=a.mirror,m=a.tickMargin,f,x,g,p,v,y,w=h?-1:1,S=r.tickSize||d,j=we(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":f=x=r.coordinate,p=o+ +!h*c,g=p-w*S,y=g-w*m,v=j;break;case"left":g=p=r.coordinate,x=i+ +!h*l,f=x-w*S,v=f-w*m,y=j;break;case"right":g=p=r.coordinate,x=i+ +h*l,f=x+w*S,v=f+w*m,y=j;break;default:f=x=r.coordinate,p=o+ +h*c,g=p+w*S,y=g+w*m,v=j;break}return{line:{x1:f,y1:g,x2:x,y2:p},tick:{x:v,y}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,a=r.orientation,i=r.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,a=r.orientation,i=r.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,a=r.x,i=r.y,o=r.width,l=r.height,c=r.orientation,u=r.mirror,d=r.axisLine,h=_n(_n(_n({},Ve(this.props,!1)),Ve(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var m=+(c==="top"&&!u||c==="bottom"&&u);h=_n(_n({},h),{},{x1:a,y1:i+m*l,x2:a+o,y2:i+m*l})}else{var f=+(c==="left"&&!u||c==="right"&&u);h=_n(_n({},h),{},{x1:a+f*o,y1:i,x2:a+f*o,y2:i+l})}return L.createElement("line",Gc({},h,{className:st("recharts-cartesian-axis-line",ss(d,"className"))}))}},{key:"renderTicks",value:function(r,a,i){var o=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,h=l.tickFormatter,m=l.unit,f=f2(_n(_n({},this.props),{},{ticks:r}),a,i),x=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),p=Ve(this.props,!1),v=Ve(d,!1),y=_n(_n({},p),{},{fill:"none"},Ve(c,!1)),w=f.map(function(S,j){var N=o.getTickLineCoord(S),C=N.line,_=N.tick,A=_n(_n(_n(_n({textAnchor:x,verticalAnchor:g},p),{},{stroke:"none",fill:u},v),_),{},{index:j,payload:S,visibleTicksCount:f.length,tickFormatter:h});return L.createElement(vt,Gc({className:"recharts-cartesian-axis-tick",key:"tick-".concat(S.value,"-").concat(S.coordinate,"-").concat(S.tickCoord)},Ul(o.props,S,j)),c&&L.createElement("line",Gc({},y,C,{className:st("recharts-cartesian-axis-tick-line",ss(c,"className"))})),d&&t.renderTickItem(d,A,"".concat(Ge(h)?h(S.value,j):S.value).concat(m||"")))});return L.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var r=this,a=this.props,i=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,u=a.className,d=a.hide;if(d)return null;var h=this.props,m=h.ticks,f=kw(h,c2e),x=m;return Ge(c)&&(x=m&&m.length>0?c(this.props):c(f)),o<=0||l<=0||!x||!x.length?null:L.createElement(vt,{className:st("recharts-cartesian-axis",u),ref:function(p){r.layerReference=p}},i&&this.renderAxisLine(),this.renderTicks(x,this.state.fontSize,this.state.letterSpacing),Un.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,a,i){var o,l=st(a.className,"recharts-cartesian-axis-tick-value");return L.isValidElement(r)?o=L.cloneElement(r,_n(_n({},a),{},{className:l})):Ge(r)?o=r(_n(_n({},a),{},{className:l})):o=L.createElement(Wl,Gc({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(b.Component);m2(Wd,"displayName","CartesianAxis");m2(Wd,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var x2e=["x1","y1","x2","y2","key"],y2e=["offset"];function Gl(e){"@babel/helpers - typeof";return Gl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gl(e)}function nO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function cr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nO(Object(n),!0).forEach(function(r){w2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function w2e(e,t,n){return t=b2e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b2e(e){var t=j2e(e,"string");return Gl(t)=="symbol"?t:t+""}function j2e(e,t){if(Gl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Gl(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ml(){return ml=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ml.apply(this,arguments)}function rO(e,t){if(e==null)return{};var n=N2e(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function N2e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var S2e=function(t){var n=t.fill;if(!n||n==="none")return null;var r=t.fillOpacity,a=t.x,i=t.y,o=t.width,l=t.height,c=t.ry;return L.createElement("rect",{x:a,y:i,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function L6(e,t){var n;if(L.isValidElement(e))n=L.cloneElement(e,t);else if(Ge(e))n=e(t);else{var r=t.x1,a=t.y1,i=t.x2,o=t.y2,l=t.key,c=rO(t,x2e),u=Ve(c,!1);u.offset;var d=rO(u,y2e);n=L.createElement("line",ml({},d,{x1:r,y1:a,x2:i,y2:o,fill:"none",key:l}))}return n}function _2e(e){var t=e.x,n=e.width,r=e.horizontal,a=r===void 0?!0:r,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var u=cr(cr({},e),{},{x1:t,y1:l,x2:t+n,y2:l,key:"line-".concat(c),index:c});return L6(a,u)});return L.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function C2e(e){var t=e.y,n=e.height,r=e.vertical,a=r===void 0?!0:r,i=e.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var u=cr(cr({},e),{},{x1:l,y1:t,x2:l,y2:t+n,key:"line-".concat(c),index:c});return L6(a,u)});return L.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function A2e(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,a=e.y,i=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var d=l.map(function(m){return Math.round(m+a-a)}).sort(function(m,f){return m-f});a!==d[0]&&d.unshift(0);var h=d.map(function(m,f){var x=!d[f+1],g=x?a+o-m:d[f+1]-m;if(g<=0)return null;var p=f%t.length;return L.createElement("rect",{key:"react-".concat(f),y:m,x:r,height:g,width:i,stroke:"none",fill:t[p],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return L.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function P2e(e){var t=e.vertical,n=t===void 0?!0:t,r=e.verticalFill,a=e.fillOpacity,i=e.x,o=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!n||!r||!r.length)return null;var d=u.map(function(m){return Math.round(m+i-i)}).sort(function(m,f){return m-f});i!==d[0]&&d.unshift(0);var h=d.map(function(m,f){var x=!d[f+1],g=x?i+l-m:d[f+1]-m;if(g<=0)return null;var p=f%r.length;return L.createElement("rect",{key:"react-".concat(f),x:m,y:o,width:g,height:c,stroke:"none",fill:r[p],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return L.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var E2e=function(t,n){var r=t.xAxis,a=t.width,i=t.height,o=t.offset;return M5(f2(cr(cr(cr({},Wd.defaultProps),r),{},{ticks:ii(r,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,n)},k2e=function(t,n){var r=t.yAxis,a=t.width,i=t.height,o=t.offset;return M5(f2(cr(cr(cr({},Wd.defaultProps),r),{},{ticks:ii(r,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,n)},Cc={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Rm(e){var t,n,r,a,i,o,l=c2(),c=u2(),u=v_e(),d=cr(cr({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Cc.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:Cc.fill,horizontal:(r=e.horizontal)!==null&&r!==void 0?r:Cc.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:Cc.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:Cc.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:Cc.verticalFill,x:we(e.x)?e.x:u.left,y:we(e.y)?e.y:u.top,width:we(e.width)?e.width:u.width,height:we(e.height)?e.height:u.height}),h=d.x,m=d.y,f=d.width,x=d.height,g=d.syncWithTicks,p=d.horizontalValues,v=d.verticalValues,y=m_e(),w=p_e();if(!we(f)||f<=0||!we(x)||x<=0||!we(h)||h!==+h||!we(m)||m!==+m)return null;var S=d.verticalCoordinatesGenerator||E2e,j=d.horizontalCoordinatesGenerator||k2e,N=d.horizontalPoints,C=d.verticalPoints;if((!N||!N.length)&&Ge(j)){var _=p&&p.length,A=j({yAxis:w?cr(cr({},w),{},{ticks:_?p:w.ticks}):void 0,width:l,height:c,offset:u},_?!0:g);Ys(Array.isArray(A),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Gl(A),"]")),Array.isArray(A)&&(N=A)}if((!C||!C.length)&&Ge(S)){var P=v&&v.length,T=S({xAxis:y?cr(cr({},y),{},{ticks:P?v:y.ticks}):void 0,width:l,height:c,offset:u},P?!0:g);Ys(Array.isArray(T),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Gl(T),"]")),Array.isArray(T)&&(C=T)}return L.createElement("g",{className:"recharts-cartesian-grid"},L.createElement(S2e,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),L.createElement(_2e,ml({},d,{offset:u,horizontalPoints:N,xAxis:y,yAxis:w})),L.createElement(C2e,ml({},d,{offset:u,verticalPoints:C,xAxis:y,yAxis:w})),L.createElement(A2e,ml({},d,{horizontalPoints:N})),L.createElement(P2e,ml({},d,{verticalPoints:C})))}Rm.displayName="CartesianGrid";var T2e=["layout","type","stroke","connectNulls","isRange","ref"],O2e=["key"],F6;function cd(e){"@babel/helpers - typeof";return cd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cd(e)}function z6(e,t){if(e==null)return{};var n=D2e(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function D2e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function pl(){return pl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pl.apply(this,arguments)}function sO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function zi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sO(Object(n),!0).forEach(function(r){Sa(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function M2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,q6(r.key),r)}}function I2e(e,t,n){return t&&aO(e.prototype,t),n&&aO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function $2e(e,t,n){return t=Hv(t),R2e(e,B6()?Reflect.construct(t,n||[],Hv(e).constructor):t.apply(e,n))}function R2e(e,t){if(t&&(cd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return L2e(e)}function L2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(B6=function(){return!!e})()}function Hv(e){return Hv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Hv(e)}function F2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G1(e,t)}function G1(e,t){return G1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},G1(e,t)}function Sa(e,t,n){return t=q6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q6(e){var t=z2e(e,"string");return cd(t)=="symbol"?t:t+""}function z2e(e,t){if(cd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(cd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Cs=function(e){function t(){var n;M2e(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=$2e(this,t,[].concat(a)),Sa(n,"state",{isAnimationFinished:!0}),Sa(n,"id",Rd("recharts-area-")),Sa(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Ge(o)&&o()}),Sa(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Ge(o)&&o()}),n}return F2e(t,e),I2e(t,[{key:"renderDots",value:function(r,a,i){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,u=c.dot,d=c.points,h=c.dataKey,m=Ve(this.props,!1),f=Ve(u,!0),x=d.map(function(p,v){var y=zi(zi(zi({key:"dot-".concat(v),r:3},m),f),{},{index:v,cx:p.x,cy:p.y,dataKey:h,value:p.value,payload:p.payload,points:d});return t.renderDotItem(u,y)}),g={clipPath:r?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return L.createElement(vt,pl({className:"recharts-area-dots"},g),x)}},{key:"renderHorizontalRect",value:function(r){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].x,u=o[o.length-1].x,d=r*Math.abs(c-u),h=oo(o.map(function(m){return m.y||0}));return we(i)&&typeof i=="number"?h=Math.max(i,h):i&&Array.isArray(i)&&i.length&&(h=Math.max(oo(i.map(function(m){return m.y||0})),h)),we(h)?L.createElement("rect",{x:c<u?c:c-d,y:0,width:d,height:Math.floor(h+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].y,u=o[o.length-1].y,d=r*Math.abs(c-u),h=oo(o.map(function(m){return m.x||0}));return we(i)&&typeof i=="number"?h=Math.max(i,h):i&&Array.isArray(i)&&i.length&&(h=Math.max(oo(i.map(function(m){return m.x||0})),h)),we(h)?L.createElement("rect",{x:0,y:c<u?c:c-d,width:h+(l?parseInt("".concat(l),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(r){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,a,i,o){var l=this.props,c=l.layout,u=l.type,d=l.stroke,h=l.connectNulls,m=l.isRange;l.ref;var f=z6(l,T2e);return L.createElement(vt,{clipPath:i?"url(#clipPath-".concat(o,")"):null},L.createElement(du,pl({},Ve(f,!0),{points:r,connectNulls:h,type:u,baseLine:a,layout:c,stroke:"none",className:"recharts-area-area"})),d!=="none"&&L.createElement(du,pl({},Ve(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:h,fill:"none",points:r})),d!=="none"&&m&&L.createElement(du,pl({},Ve(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:h,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(r,a){var i=this,o=this.props,l=o.points,c=o.baseLine,u=o.isAnimationActive,d=o.animationBegin,h=o.animationDuration,m=o.animationEasing,f=o.animationId,x=this.state,g=x.prevPoints,p=x.prevBaseLine;return L.createElement(Ia,{begin:d,duration:h,isActive:u,easing:m,from:{t:0},to:{t:1},key:"area-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(v){var y=v.t;if(g){var w=g.length/l.length,S=l.map(function(_,A){var P=Math.floor(A*w);if(g[P]){var T=g[P],E=Ir(T.x,_.x),I=Ir(T.y,_.y);return zi(zi({},_),{},{x:E(y),y:I(y)})}return _}),j;if(we(c)&&typeof c=="number"){var N=Ir(p,c);j=N(y)}else if(at(c)||$d(c)){var C=Ir(p,0);j=C(y)}else j=c.map(function(_,A){var P=Math.floor(A*w);if(p[P]){var T=p[P],E=Ir(T.x,_.x),I=Ir(T.y,_.y);return zi(zi({},_),{},{x:E(y),y:I(y)})}return _});return i.renderAreaStatically(S,j,r,a)}return L.createElement(vt,null,L.createElement("defs",null,L.createElement("clipPath",{id:"animationClipPath-".concat(a)},i.renderClipRect(y))),L.createElement(vt,{clipPath:"url(#animationClipPath-".concat(a,")")},i.renderAreaStatically(l,c,r,a)))})}},{key:"renderArea",value:function(r,a){var i=this.props,o=i.points,l=i.baseLine,c=i.isAnimationActive,u=this.state,d=u.prevPoints,h=u.prevBaseLine,m=u.totalLength;return c&&o&&o.length&&(!d&&m>0||!Qu(d,o)||!Qu(h,l))?this.renderAreaWithAnimation(r,a):this.renderAreaStatically(o,l,r,a)}},{key:"render",value:function(){var r,a=this.props,i=a.hide,o=a.dot,l=a.points,c=a.className,u=a.top,d=a.left,h=a.xAxis,m=a.yAxis,f=a.width,x=a.height,g=a.isAnimationActive,p=a.id;if(i||!l||!l.length)return null;var v=this.state.isAnimationFinished,y=l.length===1,w=st("recharts-area",c),S=h&&h.allowDataOverflow,j=m&&m.allowDataOverflow,N=S||j,C=at(p)?this.id:p,_=(r=Ve(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},A=_.r,P=A===void 0?3:A,T=_.strokeWidth,E=T===void 0?2:T,I=fae(o)?o:{},R=I.clipDot,z=R===void 0?!0:R,U=P*2+E;return L.createElement(vt,{className:w},S||j?L.createElement("defs",null,L.createElement("clipPath",{id:"clipPath-".concat(C)},L.createElement("rect",{x:S?d:d-f/2,y:j?u:u-x/2,width:S?f:f*2,height:j?x:x*2})),!z&&L.createElement("clipPath",{id:"clipPath-dots-".concat(C)},L.createElement("rect",{x:d-U/2,y:u-U/2,width:f+U,height:x+U}))):null,y?null:this.renderArea(N,C),(o||y)&&this.renderDots(N,z,C),(!g||v)&&ui.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,a){return r.animationId!==a.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:r.points!==a.curPoints||r.baseLine!==a.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(b.PureComponent);F6=Cs;Sa(Cs,"displayName","Area");Sa(Cs,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Ea.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Sa(Cs,"getBaseValue",function(e,t,n,r){var a=e.layout,i=e.baseValue,o=t.props.baseValue,l=o??i;if(we(l)&&typeof l=="number")return l;var c=a==="horizontal"?r:n,u=c.scale.domain();if(c.type==="number"){var d=Math.max(u[0],u[1]),h=Math.min(u[0],u[1]);return l==="dataMin"?h:l==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});Sa(Cs,"getComposedData",function(e){var t=e.props,n=e.item,r=e.xAxis,a=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,u=e.stackedData,d=e.dataStartIndex,h=e.displayedData,m=e.offset,f=t.layout,x=u&&u.length,g=F6.getBaseValue(t,n,r,a),p=f==="horizontal",v=!1,y=h.map(function(S,j){var N;x?N=u[d+j]:(N=Dn(S,c),Array.isArray(N)?v=!0:N=[g,N]);var C=N[1]==null||x&&Dn(S,c)==null;return p?{x:kk({axis:r,ticks:i,bandSize:l,entry:S,index:j}),y:C?null:a.scale(N[1]),value:N,payload:S}:{x:C?null:r.scale(N[1]),y:kk({axis:a,ticks:o,bandSize:l,entry:S,index:j}),value:N,payload:S}}),w;return x||v?w=y.map(function(S){var j=Array.isArray(S.value)?S.value[0]:null;return p?{x:S.x,y:j!=null&&S.y!=null?a.scale(j):null}:{x:j!=null?r.scale(j):null,y:S.y}}):w=p?a.scale(g):r.scale(g),zi({points:y,baseLine:w,layout:f,isRange:v},m)});Sa(Cs,"renderDotItem",function(e,t){var n;if(L.isValidElement(e))n=L.cloneElement(e,t);else if(Ge(e))n=e(t);else{var r=st("recharts-area-dot",typeof e!="boolean"?e.className:""),a=t.key,i=z6(t,O2e);n=L.createElement(Oy,pl({},i,{key:a,className:r}))}return n});function ud(e){"@babel/helpers - typeof";return ud=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ud(e)}function B2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q2e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,W6(r.key),r)}}function V2e(e,t,n){return t&&q2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function U2e(e,t,n){return t=Kv(t),W2e(e,V6()?Reflect.construct(t,n||[],Kv(e).constructor):t.apply(e,n))}function W2e(e,t){if(t&&(ud(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return H2e(e)}function H2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(V6=function(){return!!e})()}function Kv(e){return Kv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Kv(e)}function K2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y1(e,t)}function Y1(e,t){return Y1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Y1(e,t)}function U6(e,t,n){return t=W6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W6(e){var t=G2e(e,"string");return ud(t)=="symbol"?t:t+""}function G2e(e,t){if(ud(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ud(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Q1(){return Q1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Q1.apply(this,arguments)}function Y2e(e){var t=e.xAxisId,n=c2(),r=u2(),a=A6(t);return a==null?null:b.createElement(Wd,Q1({},a,{className:st("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(o){return ii(o,!0)}}))}var qo=function(e){function t(){return B2e(this,t),U2e(this,t,arguments)}return K2e(t,e),V2e(t,[{key:"render",value:function(){return b.createElement(Y2e,this.props)}}])}(b.Component);U6(qo,"displayName","XAxis");U6(qo,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function dd(e){"@babel/helpers - typeof";return dd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dd(e)}function Q2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function X2e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,G6(r.key),r)}}function J2e(e,t,n){return t&&X2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Z2e(e,t,n){return t=Gv(t),eCe(e,H6()?Reflect.construct(t,n||[],Gv(e).constructor):t.apply(e,n))}function eCe(e,t){if(t&&(dd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tCe(e)}function tCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(H6=function(){return!!e})()}function Gv(e){return Gv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Gv(e)}function nCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&X1(e,t)}function X1(e,t){return X1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},X1(e,t)}function K6(e,t,n){return t=G6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G6(e){var t=rCe(e,"string");return dd(t)=="symbol"?t:t+""}function rCe(e,t){if(dd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(dd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function J1(){return J1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},J1.apply(this,arguments)}var sCe=function(t){var n=t.yAxisId,r=c2(),a=u2(),i=P6(n);return i==null?null:b.createElement(Wd,J1({},i,{className:st("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:a},ticksGenerator:function(l){return ii(l,!0)}}))},Vo=function(e){function t(){return Q2e(this,t),Z2e(this,t,arguments)}return nCe(t,e),J2e(t,[{key:"render",value:function(){return b.createElement(sCe,this.props)}}])}(b.Component);K6(Vo,"displayName","YAxis");K6(Vo,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function iO(e){return lCe(e)||oCe(e)||iCe(e)||aCe()}function aCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iCe(e,t){if(e){if(typeof e=="string")return Z1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z1(e,t)}}function oCe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function lCe(e){if(Array.isArray(e))return Z1(e)}function Z1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var eN=function(t,n,r,a,i){var o=js(t,h2),l=js(t,By),c=[].concat(iO(o),iO(l)),u=js(t,Vy),d="".concat(a,"Id"),h=a[0],m=n;if(c.length&&(m=c.reduce(function(g,p){if(p.props[d]===r&&Ta(p.props,"extendDomain")&&we(p.props[h])){var v=p.props[h];return[Math.min(g[0],v),Math.max(g[1],v)]}return g},m)),u.length){var f="".concat(h,"1"),x="".concat(h,"2");m=u.reduce(function(g,p){if(p.props[d]===r&&Ta(p.props,"extendDomain")&&we(p.props[f])&&we(p.props[x])){var v=p.props[f],y=p.props[x];return[Math.min(g[0],v,y),Math.max(g[1],v,y)]}return g},m)}return i&&i.length&&(m=i.reduce(function(g,p){return we(p)?[Math.min(g[0],p),Math.max(g[1],p)]:g},m)),m},Y6={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,h,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var f=new a(d,h||c,m),x=n?n+u:u;return c._events[x]?c._events[x].fn?c._events[x]=[c._events[x],f]:c._events[x].push(f):(c._events[x]=f,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)t.call(d,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=n?n+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var m=0,f=h.length,x=new Array(f);m<f;m++)x[m]=h[m].fn;return x},l.prototype.listenerCount=function(u){var d=n?n+u:u,h=this._events[d];return h?h.fn?1:h.length:0},l.prototype.emit=function(u,d,h,m,f,x){var g=n?n+u:u;if(!this._events[g])return!1;var p=this._events[g],v=arguments.length,y,w;if(p.fn){switch(p.once&&this.removeListener(u,p.fn,void 0,!0),v){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,d),!0;case 3:return p.fn.call(p.context,d,h),!0;case 4:return p.fn.call(p.context,d,h,m),!0;case 5:return p.fn.call(p.context,d,h,m,f),!0;case 6:return p.fn.call(p.context,d,h,m,f,x),!0}for(w=1,y=new Array(v-1);w<v;w++)y[w-1]=arguments[w];p.fn.apply(p.context,y)}else{var S=p.length,j;for(w=0;w<S;w++)switch(p[w].once&&this.removeListener(u,p[w].fn,void 0,!0),v){case 1:p[w].fn.call(p[w].context);break;case 2:p[w].fn.call(p[w].context,d);break;case 3:p[w].fn.call(p[w].context,d,h);break;case 4:p[w].fn.call(p[w].context,d,h,m);break;default:if(!y)for(j=1,y=new Array(v-1);j<v;j++)y[j-1]=arguments[j];p[w].fn.apply(p[w].context,y)}}return!0},l.prototype.on=function(u,d,h){return i(this,u,d,h,!1)},l.prototype.once=function(u,d,h){return i(this,u,d,h,!0)},l.prototype.removeListener=function(u,d,h,m){var f=n?n+u:u;if(!this._events[f])return this;if(!d)return o(this,f),this;var x=this._events[f];if(x.fn)x.fn===d&&(!m||x.once)&&(!h||x.context===h)&&o(this,f);else{for(var g=0,p=[],v=x.length;g<v;g++)(x[g].fn!==d||m&&!x[g].once||h&&x[g].context!==h)&&p.push(x[g]);p.length?this._events[f]=p.length===1?p[0]:p:o(this,f)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&o(this,d)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l})(Y6);var cCe=Y6.exports;const uCe=Et(cCe);var Tw=new uCe,Ow="recharts.syncMouseEvents";function im(e){"@babel/helpers - typeof";return im=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},im(e)}function dCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hCe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Q6(r.key),r)}}function fCe(e,t,n){return t&&hCe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Dw(e,t,n){return t=Q6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q6(e){var t=mCe(e,"string");return im(t)=="symbol"?t:t+""}function mCe(e,t){if(im(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(im(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var pCe=function(){function e(){dCe(this,e),Dw(this,"activeIndex",0),Dw(this,"coordinateList",[]),Dw(this,"layout","horizontal")}return fCe(e,[{key:"setDetails",value:function(n){var r,a=n.coordinateList,i=a===void 0?null:a,o=n.container,l=o===void 0?null:o,c=n.layout,u=c===void 0?null:c,d=n.offset,h=d===void 0?null:d,m=n.mouseHandlerCallback,f=m===void 0?null:m;this.coordinateList=(r=i??this.coordinateList)!==null&&r!==void 0?r:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=h??this.offset,this.mouseHandlerCallback=f??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,d=((r=window)===null||r===void 0?void 0:r.scrollY)||0,h=i+c+u,m=o+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:h,pageY:m})}}}])}();function gCe(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var r=e==null?void 0:e[0],a=e==null?void 0:e[1];if(r&&a&&we(r)&&we(a))return!0}return!1}function vCe(e,t,n,r){var a=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-a,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function X6(e){var t=e.cx,n=e.cy,r=e.radius,a=e.startAngle,i=e.endAngle,o=Ht(t,n,r,a),l=Ht(t,n,r,i);return{points:[o,l],cx:t,cy:n,radius:r,startAngle:a,endAngle:i}}function xCe(e,t,n){var r,a,i,o;if(e==="horizontal")r=t.x,i=r,a=n.top,o=n.top+n.height;else if(e==="vertical")a=t.y,o=a,r=n.left,i=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,d=t.outerRadius,h=t.angle,m=Ht(l,c,u,h),f=Ht(l,c,d,h);r=m.x,a=m.y,i=f.x,o=f.y}else return X6(t);return[{x:r,y:a},{x:i,y:o}]}function om(e){"@babel/helpers - typeof";return om=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},om(e)}function oO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Fp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oO(Object(n),!0).forEach(function(r){yCe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yCe(e,t,n){return t=wCe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wCe(e){var t=bCe(e,"string");return om(t)=="symbol"?t:t+""}function bCe(e,t){if(om(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(om(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jCe(e){var t,n,r=e.element,a=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,h=e.layout,m=e.chartName,f=(t=r.props.cursor)!==null&&t!==void 0?t:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!f||!i||!o||m!=="ScatterChart"&&a!=="axis")return null;var x,g=du;if(m==="ScatterChart")x=o,g=Uje;else if(m==="BarChart")x=vCe(h,o,c,d),g=a2;else if(h==="radial"){var p=X6(o),v=p.cx,y=p.cy,w=p.radius,S=p.startAngle,j=p.endAngle;x={cx:v,cy:y,startAngle:S,endAngle:j,innerRadius:w,outerRadius:w},g=W5}else x={points:xCe(h,o,c)},g=du;var N=Fp(Fp(Fp(Fp({stroke:"#ccc",pointerEvents:"none"},c),x),Ve(f,!1)),{},{payload:l,payloadIndex:u,className:st("recharts-tooltip-cursor",f.className)});return b.isValidElement(f)?b.cloneElement(f,N):b.createElement(g,N)}var NCe=["item"],SCe=["children","className","width","height","style","compact","title","desc"];function hd(e){"@babel/helpers - typeof";return hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hd(e)}function Yc(){return Yc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yc.apply(this,arguments)}function lO(e,t){return ACe(e)||CCe(e,t)||Z6(e,t)||_Ce()}function _Ce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CCe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function ACe(e){if(Array.isArray(e))return e}function cO(e,t){if(e==null)return{};var n=PCe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function PCe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function ECe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kCe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,e8(r.key),r)}}function TCe(e,t,n){return t&&kCe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function OCe(e,t,n){return t=Yv(t),DCe(e,J6()?Reflect.construct(t,n||[],Yv(e).constructor):t.apply(e,n))}function DCe(e,t){if(t&&(hd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MCe(e)}function MCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(J6=function(){return!!e})()}function Yv(e){return Yv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Yv(e)}function ICe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tN(e,t)}function tN(e,t){return tN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},tN(e,t)}function fd(e){return LCe(e)||RCe(e)||Z6(e)||$Ce()}function $Ce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z6(e,t){if(e){if(typeof e=="string")return nN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nN(e,t)}}function RCe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function LCe(e){if(Array.isArray(e))return nN(e)}function nN(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function uO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uO(Object(n),!0).forEach(function(r){He(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function He(e,t,n){return t=e8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function e8(e){var t=FCe(e,"string");return hd(t)=="symbol"?t:t+""}function FCe(e,t){if(hd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(hd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zCe={xAxis:["bottom","top"],yAxis:["left","right"]},BCe={width:"100%",height:"100%"},t8={x:0,y:0};function zp(e){return e}var qCe=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},VCe=function(t,n,r,a){var i=n.find(function(d){return d&&d.index===r});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=a.radius;return me(me(me({},a),Ht(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,u=a.angle;return me(me(me({},a),Ht(a.cx,a.cy,c,u)),{},{angle:u,radius:c})}return t8},Uy=function(t,n){var r=n.graphicalItems,a=n.dataStartIndex,i=n.dataEndIndex,o=(r??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(fd(l),fd(u)):l},[]);return o.length>0?o:t&&t.length&&we(a)&&we(i)?t.slice(a,i+1):[]};function n8(e){return e==="number"?[0,"auto"]:void 0}var rN=function(t,n,r,a){var i=t.graphicalItems,o=t.tooltipAxis,l=Uy(n,t);return r<0||!i||!i.length||r>=l.length?null:i.reduce(function(c,u){var d,h=(d=u.props.data)!==null&&d!==void 0?d:n;h&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=r&&(h=h.slice(t.dataStartIndex,t.dataEndIndex+1));var m;if(o.dataKey&&!o.allowDuplicatedCategory){var f=h===void 0?l:h;m=Qg(f,o.dataKey,a)}else m=h&&h[r]||l[r];return m?[].concat(fd(c),[F5(u,m)]):c},[])},dO=function(t,n,r,a){var i=a||{x:t.chartX,y:t.chartY},o=qCe(i,r),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,d=m0e(o,l,u,c);if(d>=0&&u){var h=u[d]&&u[d].value,m=rN(t,n,d,h),f=VCe(r,l,d,i);return{activeTooltipIndex:d,activeLabel:h,activePayload:m,activeCoordinate:f}}return null},UCe=function(t,n){var r=n.axes,a=n.graphicalItems,i=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=t.layout,h=t.children,m=t.stackOffset,f=D5(d,i);return r.reduce(function(x,g){var p,v=g.type.defaultProps!==void 0?me(me({},g.type.defaultProps),g.props):g.props,y=v.type,w=v.dataKey,S=v.allowDataOverflow,j=v.allowDuplicatedCategory,N=v.scale,C=v.ticks,_=v.includeHidden,A=v[o];if(x[A])return x;var P=Uy(t.data,{graphicalItems:a.filter(function(Y){var V,O=o in Y.props?Y.props[o]:(V=Y.type.defaultProps)===null||V===void 0?void 0:V[o];return O===A}),dataStartIndex:c,dataEndIndex:u}),T=P.length,E,I,R;gCe(v.domain,S,y)&&(E=x1(v.domain,null,S),f&&(y==="number"||N!=="auto")&&(R=Hh(P,w,"category")));var z=n8(y);if(!E||E.length===0){var U,K=(U=v.domain)!==null&&U!==void 0?U:z;if(w){if(E=Hh(P,w,y),y==="category"&&f){var k=rae(E);j&&k?(I=E,E=$v(0,T)):j||(E=Mk(K,E,g).reduce(function(Y,V){return Y.indexOf(V)>=0?Y:[].concat(fd(Y),[V])},[]))}else if(y==="category")j?E=E.filter(function(Y){return Y!==""&&!at(Y)}):E=Mk(K,E,g).reduce(function(Y,V){return Y.indexOf(V)>=0||V===""||at(V)?Y:[].concat(fd(Y),[V])},[]);else if(y==="number"){var D=y0e(P,a.filter(function(Y){var V,O,le=o in Y.props?Y.props[o]:(V=Y.type.defaultProps)===null||V===void 0?void 0:V[o],te="hide"in Y.props?Y.props.hide:(O=Y.type.defaultProps)===null||O===void 0?void 0:O.hide;return le===A&&(_||!te)}),w,i,d);D&&(E=D)}f&&(y==="number"||N!=="auto")&&(R=Hh(P,w,"category"))}else f?E=$v(0,T):l&&l[A]&&l[A].hasStack&&y==="number"?E=m==="expand"?[0,1]:L5(l[A].stackGroups,c,u):E=O5(P,a.filter(function(Y){var V=o in Y.props?Y.props[o]:Y.type.defaultProps[o],O="hide"in Y.props?Y.props.hide:Y.type.defaultProps.hide;return V===A&&(_||!O)}),y,d,!0);if(y==="number")E=eN(h,E,A,i,C),K&&(E=x1(K,E,S));else if(y==="category"&&K){var J=K,W=E.every(function(Y){return J.indexOf(Y)>=0});W&&(E=J)}}return me(me({},x),{},He({},A,me(me({},v),{},{axisType:i,domain:E,categoricalDomain:R,duplicateDomain:I,originalDomain:(p=v.domain)!==null&&p!==void 0?p:z,isCategorical:f,layout:d})))},{})},WCe=function(t,n){var r=n.graphicalItems,a=n.Axis,i=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=t.layout,h=t.children,m=Uy(t.data,{graphicalItems:r,dataStartIndex:c,dataEndIndex:u}),f=m.length,x=D5(d,i),g=-1;return r.reduce(function(p,v){var y=v.type.defaultProps!==void 0?me(me({},v.type.defaultProps),v.props):v.props,w=y[o],S=n8("number");if(!p[w]){g++;var j;return x?j=$v(0,f):l&&l[w]&&l[w].hasStack?(j=L5(l[w].stackGroups,c,u),j=eN(h,j,w,i)):(j=x1(S,O5(m,r.filter(function(N){var C,_,A=o in N.props?N.props[o]:(C=N.type.defaultProps)===null||C===void 0?void 0:C[o],P="hide"in N.props?N.props.hide:(_=N.type.defaultProps)===null||_===void 0?void 0:_.hide;return A===w&&!P}),"number",d),a.defaultProps.allowDataOverflow),j=eN(h,j,w,i)),me(me({},p),{},He({},w,me(me({axisType:i},a.defaultProps),{},{hide:!0,orientation:ss(zCe,"".concat(i,".").concat(g%2),null),domain:j,originalDomain:S,isCategorical:x,layout:d})))}return p},{})},HCe=function(t,n){var r=n.axisType,a=r===void 0?"xAxis":r,i=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=t.children,h="".concat(a,"Id"),m=js(d,i),f={};return m&&m.length?f=UCe(t,{axes:m,graphicalItems:o,axisType:a,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(f=WCe(t,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),f},KCe=function(t){var n=Gi(t),r=ii(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:O_(r,function(a){return a.coordinate}),tooltipAxis:n,tooltipAxisBandSize:Sv(n,r)}},hO=function(t){var n=t.children,r=t.defaultShowTooltip,a=Qr(n,rd),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},GCe=function(t){return!t||!t.length?!1:t.some(function(n){var r=li(n&&n.type);return r&&r.indexOf("Bar")>=0})},fO=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},YCe=function(t,n){var r=t.props,a=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,u=r.width,d=r.height,h=r.children,m=r.margin||{},f=Qr(h,rd),x=Qr(h,lu),g=Object.keys(c).reduce(function(j,N){var C=c[N],_=C.orientation;return!C.mirror&&!C.hide?me(me({},j),{},He({},_,j[_]+C.width)):j},{left:m.left||0,right:m.right||0}),p=Object.keys(o).reduce(function(j,N){var C=o[N],_=C.orientation;return!C.mirror&&!C.hide?me(me({},j),{},He({},_,ss(j,"".concat(_))+C.height)):j},{top:m.top||0,bottom:m.bottom||0}),v=me(me({},p),g),y=v.bottom;f&&(v.bottom+=f.props.height||rd.defaultProps.height),x&&n&&(v=v0e(v,a,r,n));var w=u-v.left-v.right,S=d-v.top-v.bottom;return me(me({brushBottom:y},v),{},{width:Math.max(w,0),height:Math.max(S,0)})},QCe=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},p2=function(t){var n=t.chartName,r=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,h=t.defaultProps,m=function(v,y){var w=y.graphicalItems,S=y.stackGroups,j=y.offset,N=y.updateId,C=y.dataStartIndex,_=y.dataEndIndex,A=v.barSize,P=v.layout,T=v.barGap,E=v.barCategoryGap,I=v.maxBarSize,R=fO(P),z=R.numericAxisName,U=R.cateAxisName,K=GCe(w),k=[];return w.forEach(function(D,J){var W=Uy(v.data,{graphicalItems:[D],dataStartIndex:C,dataEndIndex:_}),Y=D.type.defaultProps!==void 0?me(me({},D.type.defaultProps),D.props):D.props,V=Y.dataKey,O=Y.maxBarSize,le=Y["".concat(z,"Id")],te=Y["".concat(U,"Id")],ce={},ge=c.reduce(function(ae,B){var he=y["".concat(B.axisType,"Map")],Oe=Y["".concat(B.axisType,"Id")];he&&he[Oe]||B.axisType==="zAxis"||Kl();var St=he[Oe];return me(me({},ae),{},He(He({},B.axisType,St),"".concat(B.axisType,"Ticks"),ii(St)))},ce),H=ge[U],G=ge["".concat(U,"Ticks")],ue=S&&S[le]&&S[le].hasStack&&P0e(D,S[le].stackGroups),re=li(D.type).indexOf("Bar")>=0,ve=Sv(H,G),pe=[],ee=K&&p0e({barSize:A,stackGroups:S,totalSize:QCe(ge,U)});if(re){var Pe,Ee,dt=at(O)?I:O,Dt=(Pe=(Ee=Sv(H,G,!0))!==null&&Ee!==void 0?Ee:dt)!==null&&Pe!==void 0?Pe:0;pe=g0e({barGap:T,barCategoryGap:E,bandSize:Dt!==ve?Dt:ve,sizeList:ee[te],maxBarSize:dt}),Dt!==ve&&(pe=pe.map(function(ae){return me(me({},ae),{},{position:me(me({},ae.position),{},{offset:ae.position.offset-Dt/2})})}))}var en=D&&D.type&&D.type.getComposedData;en&&k.push({props:me(me({},en(me(me({},ge),{},{displayedData:W,props:v,dataKey:V,item:D,bandSize:ve,barPosition:pe,offset:j,stackedData:ue,layout:P,dataStartIndex:C,dataEndIndex:_}))),{},He(He(He({key:D.key||"item-".concat(J)},z,ge[z]),U,ge[U]),"animationId",N)),childIndex:gae(D,v.children),item:D})}),k},f=function(v,y){var w=v.props,S=v.dataStartIndex,j=v.dataEndIndex,N=v.updateId;if(!AP({props:w}))return null;var C=w.children,_=w.layout,A=w.stackOffset,P=w.data,T=w.reverseStackOrder,E=fO(_),I=E.numericAxisName,R=E.cateAxisName,z=js(C,r),U=C0e(P,z,"".concat(I,"Id"),"".concat(R,"Id"),A,T),K=c.reduce(function(Y,V){var O="".concat(V.axisType,"Map");return me(me({},Y),{},He({},O,HCe(w,me(me({},V),{},{graphicalItems:z,stackGroups:V.axisType===I&&U,dataStartIndex:S,dataEndIndex:j}))))},{}),k=YCe(me(me({},K),{},{props:w,graphicalItems:z}),y==null?void 0:y.legendBBox);Object.keys(K).forEach(function(Y){K[Y]=d(w,K[Y],k,Y.replace("Map",""),n)});var D=K["".concat(R,"Map")],J=KCe(D),W=m(w,me(me({},K),{},{dataStartIndex:S,dataEndIndex:j,updateId:N,graphicalItems:z,stackGroups:U,offset:k}));return me(me({formattedGraphicalItems:W,graphicalItems:z,offset:k,stackGroups:U},J),K)},x=function(p){function v(y){var w,S,j;return ECe(this,v),j=OCe(this,v,[y]),He(j,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),He(j,"accessibilityManager",new pCe),He(j,"handleLegendBBoxUpdate",function(N){if(N){var C=j.state,_=C.dataStartIndex,A=C.dataEndIndex,P=C.updateId;j.setState(me({legendBBox:N},f({props:j.props,dataStartIndex:_,dataEndIndex:A,updateId:P},me(me({},j.state),{},{legendBBox:N}))))}}),He(j,"handleReceiveSyncEvent",function(N,C,_){if(j.props.syncId===N){if(_===j.eventEmitterSymbol&&typeof j.props.syncMethod!="function")return;j.applySyncEvent(C)}}),He(j,"handleBrushChange",function(N){var C=N.startIndex,_=N.endIndex;if(C!==j.state.dataStartIndex||_!==j.state.dataEndIndex){var A=j.state.updateId;j.setState(function(){return me({dataStartIndex:C,dataEndIndex:_},f({props:j.props,dataStartIndex:C,dataEndIndex:_,updateId:A},j.state))}),j.triggerSyncEvent({dataStartIndex:C,dataEndIndex:_})}}),He(j,"handleMouseEnter",function(N){var C=j.getMouseInfo(N);if(C){var _=me(me({},C),{},{isTooltipActive:!0});j.setState(_),j.triggerSyncEvent(_);var A=j.props.onMouseEnter;Ge(A)&&A(_,N)}}),He(j,"triggeredAfterMouseMove",function(N){var C=j.getMouseInfo(N),_=C?me(me({},C),{},{isTooltipActive:!0}):{isTooltipActive:!1};j.setState(_),j.triggerSyncEvent(_);var A=j.props.onMouseMove;Ge(A)&&A(_,N)}),He(j,"handleItemMouseEnter",function(N){j.setState(function(){return{isTooltipActive:!0,activeItem:N,activePayload:N.tooltipPayload,activeCoordinate:N.tooltipPosition||{x:N.cx,y:N.cy}}})}),He(j,"handleItemMouseLeave",function(){j.setState(function(){return{isTooltipActive:!1}})}),He(j,"handleMouseMove",function(N){N.persist(),j.throttleTriggeredAfterMouseMove(N)}),He(j,"handleMouseLeave",function(N){j.throttleTriggeredAfterMouseMove.cancel();var C={isTooltipActive:!1};j.setState(C),j.triggerSyncEvent(C);var _=j.props.onMouseLeave;Ge(_)&&_(C,N)}),He(j,"handleOuterEvent",function(N){var C=pae(N),_=ss(j.props,"".concat(C));if(C&&Ge(_)){var A,P;/.*touch.*/i.test(C)?P=j.getMouseInfo(N.changedTouches[0]):P=j.getMouseInfo(N),_((A=P)!==null&&A!==void 0?A:{},N)}}),He(j,"handleClick",function(N){var C=j.getMouseInfo(N);if(C){var _=me(me({},C),{},{isTooltipActive:!0});j.setState(_),j.triggerSyncEvent(_);var A=j.props.onClick;Ge(A)&&A(_,N)}}),He(j,"handleMouseDown",function(N){var C=j.props.onMouseDown;if(Ge(C)){var _=j.getMouseInfo(N);C(_,N)}}),He(j,"handleMouseUp",function(N){var C=j.props.onMouseUp;if(Ge(C)){var _=j.getMouseInfo(N);C(_,N)}}),He(j,"handleTouchMove",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&j.throttleTriggeredAfterMouseMove(N.changedTouches[0])}),He(j,"handleTouchStart",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&j.handleMouseDown(N.changedTouches[0])}),He(j,"handleTouchEnd",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&j.handleMouseUp(N.changedTouches[0])}),He(j,"handleDoubleClick",function(N){var C=j.props.onDoubleClick;if(Ge(C)){var _=j.getMouseInfo(N);C(_,N)}}),He(j,"handleContextMenu",function(N){var C=j.props.onContextMenu;if(Ge(C)){var _=j.getMouseInfo(N);C(_,N)}}),He(j,"triggerSyncEvent",function(N){j.props.syncId!==void 0&&Tw.emit(Ow,j.props.syncId,N,j.eventEmitterSymbol)}),He(j,"applySyncEvent",function(N){var C=j.props,_=C.layout,A=C.syncMethod,P=j.state.updateId,T=N.dataStartIndex,E=N.dataEndIndex;if(N.dataStartIndex!==void 0||N.dataEndIndex!==void 0)j.setState(me({dataStartIndex:T,dataEndIndex:E},f({props:j.props,dataStartIndex:T,dataEndIndex:E,updateId:P},j.state)));else if(N.activeTooltipIndex!==void 0){var I=N.chartX,R=N.chartY,z=N.activeTooltipIndex,U=j.state,K=U.offset,k=U.tooltipTicks;if(!K)return;if(typeof A=="function")z=A(k,N);else if(A==="value"){z=-1;for(var D=0;D<k.length;D++)if(k[D].value===N.activeLabel){z=D;break}}var J=me(me({},K),{},{x:K.left,y:K.top}),W=Math.min(I,J.x+J.width),Y=Math.min(R,J.y+J.height),V=k[z]&&k[z].value,O=rN(j.state,j.props.data,z),le=k[z]?{x:_==="horizontal"?k[z].coordinate:W,y:_==="horizontal"?Y:k[z].coordinate}:t8;j.setState(me(me({},N),{},{activeLabel:V,activeCoordinate:le,activePayload:O,activeTooltipIndex:z}))}else j.setState(N)}),He(j,"renderCursor",function(N){var C,_=j.state,A=_.isTooltipActive,P=_.activeCoordinate,T=_.activePayload,E=_.offset,I=_.activeTooltipIndex,R=_.tooltipAxisBandSize,z=j.getTooltipEventType(),U=(C=N.props.active)!==null&&C!==void 0?C:A,K=j.props.layout,k=N.key||"_recharts-cursor";return L.createElement(jCe,{key:k,activeCoordinate:P,activePayload:T,activeTooltipIndex:I,chartName:n,element:N,isActive:U,layout:K,offset:E,tooltipAxisBandSize:R,tooltipEventType:z})}),He(j,"renderPolarAxis",function(N,C,_){var A=ss(N,"type.axisType"),P=ss(j.state,"".concat(A,"Map")),T=N.type.defaultProps,E=T!==void 0?me(me({},T),N.props):N.props,I=P&&P[E["".concat(A,"Id")]];return b.cloneElement(N,me(me({},I),{},{className:st(A,I.className),key:N.key||"".concat(C,"-").concat(_),ticks:ii(I,!0)}))}),He(j,"renderPolarGrid",function(N){var C=N.props,_=C.radialLines,A=C.polarAngles,P=C.polarRadius,T=j.state,E=T.radiusAxisMap,I=T.angleAxisMap,R=Gi(E),z=Gi(I),U=z.cx,K=z.cy,k=z.innerRadius,D=z.outerRadius;return b.cloneElement(N,{polarAngles:Array.isArray(A)?A:ii(z,!0).map(function(J){return J.coordinate}),polarRadius:Array.isArray(P)?P:ii(R,!0).map(function(J){return J.coordinate}),cx:U,cy:K,innerRadius:k,outerRadius:D,key:N.key||"polar-grid",radialLines:_})}),He(j,"renderLegend",function(){var N=j.state.formattedGraphicalItems,C=j.props,_=C.children,A=C.width,P=C.height,T=j.props.margin||{},E=A-(T.left||0)-(T.right||0),I=k5({children:_,formattedGraphicalItems:N,legendWidth:E,legendContent:u});if(!I)return null;var R=I.item,z=cO(I,NCe);return b.cloneElement(R,me(me({},z),{},{chartWidth:A,chartHeight:P,margin:T,onBBoxUpdate:j.handleLegendBBoxUpdate}))}),He(j,"renderTooltip",function(){var N,C=j.props,_=C.children,A=C.accessibilityLayer,P=Qr(_,ar);if(!P)return null;var T=j.state,E=T.isTooltipActive,I=T.activeCoordinate,R=T.activePayload,z=T.activeLabel,U=T.offset,K=(N=P.props.active)!==null&&N!==void 0?N:E;return b.cloneElement(P,{viewBox:me(me({},U),{},{x:U.left,y:U.top}),active:K,label:z,payload:K?R:[],coordinate:I,accessibilityLayer:A})}),He(j,"renderBrush",function(N){var C=j.props,_=C.margin,A=C.data,P=j.state,T=P.offset,E=P.dataStartIndex,I=P.dataEndIndex,R=P.updateId;return b.cloneElement(N,{key:N.key||"_recharts-brush",onChange:Ip(j.handleBrushChange,N.props.onChange),data:A,x:we(N.props.x)?N.props.x:T.left,y:we(N.props.y)?N.props.y:T.top+T.height+T.brushBottom-(_.bottom||0),width:we(N.props.width)?N.props.width:T.width,startIndex:E,endIndex:I,updateId:"brush-".concat(R)})}),He(j,"renderReferenceElement",function(N,C,_){if(!N)return null;var A=j,P=A.clipPathId,T=j.state,E=T.xAxisMap,I=T.yAxisMap,R=T.offset,z=N.type.defaultProps||{},U=N.props,K=U.xAxisId,k=K===void 0?z.xAxisId:K,D=U.yAxisId,J=D===void 0?z.yAxisId:D;return b.cloneElement(N,{key:N.key||"".concat(C,"-").concat(_),xAxis:E[k],yAxis:I[J],viewBox:{x:R.left,y:R.top,width:R.width,height:R.height},clipPathId:P})}),He(j,"renderActivePoints",function(N){var C=N.item,_=N.activePoint,A=N.basePoint,P=N.childIndex,T=N.isRange,E=[],I=C.props.key,R=C.item.type.defaultProps!==void 0?me(me({},C.item.type.defaultProps),C.item.props):C.item.props,z=R.activeDot,U=R.dataKey,K=me(me({index:P,dataKey:U,cx:_.x,cy:_.y,r:4,fill:s2(C.item),strokeWidth:2,stroke:"#fff",payload:_.payload,value:_.value},Ve(z,!1)),Xg(z));return E.push(v.renderActiveDot(z,K,"".concat(I,"-activePoint-").concat(P))),A?E.push(v.renderActiveDot(z,me(me({},K),{},{cx:A.x,cy:A.y}),"".concat(I,"-basePoint-").concat(P))):T&&E.push(null),E}),He(j,"renderGraphicChild",function(N,C,_){var A=j.filterFormatItem(N,C,_);if(!A)return null;var P=j.getTooltipEventType(),T=j.state,E=T.isTooltipActive,I=T.tooltipAxis,R=T.activeTooltipIndex,z=T.activeLabel,U=j.props.children,K=Qr(U,ar),k=A.props,D=k.points,J=k.isRange,W=k.baseLine,Y=A.item.type.defaultProps!==void 0?me(me({},A.item.type.defaultProps),A.item.props):A.item.props,V=Y.activeDot,O=Y.hide,le=Y.activeBar,te=Y.activeShape,ce=!!(!O&&E&&K&&(V||le||te)),ge={};P!=="axis"&&K&&K.props.trigger==="click"?ge={onClick:Ip(j.handleItemMouseEnter,N.props.onClick)}:P!=="axis"&&(ge={onMouseLeave:Ip(j.handleItemMouseLeave,N.props.onMouseLeave),onMouseEnter:Ip(j.handleItemMouseEnter,N.props.onMouseEnter)});var H=b.cloneElement(N,me(me({},A.props),ge));function G(B){return typeof I.dataKey=="function"?I.dataKey(B.payload):null}if(ce)if(R>=0){var ue,re;if(I.dataKey&&!I.allowDuplicatedCategory){var ve=typeof I.dataKey=="function"?G:"payload.".concat(I.dataKey.toString());ue=Qg(D,ve,z),re=J&&W&&Qg(W,ve,z)}else ue=D==null?void 0:D[R],re=J&&W&&W[R];if(te||le){var pe=N.props.activeIndex!==void 0?N.props.activeIndex:R;return[b.cloneElement(N,me(me(me({},A.props),ge),{},{activeIndex:pe})),null,null]}if(!at(ue))return[H].concat(fd(j.renderActivePoints({item:A,activePoint:ue,basePoint:re,childIndex:R,isRange:J})))}else{var ee,Pe=(ee=j.getItemByXY(j.state.activeCoordinate))!==null&&ee!==void 0?ee:{graphicalItem:H},Ee=Pe.graphicalItem,dt=Ee.item,Dt=dt===void 0?N:dt,en=Ee.childIndex,ae=me(me(me({},A.props),ge),{},{activeIndex:en});return[b.cloneElement(Dt,ae),null,null]}return J?[H,null,null]:[H,null]}),He(j,"renderCustomized",function(N,C,_){return b.cloneElement(N,me(me({key:"recharts-customized-".concat(_)},j.props),j.state))}),He(j,"renderMap",{CartesianGrid:{handler:zp,once:!0},ReferenceArea:{handler:j.renderReferenceElement},ReferenceLine:{handler:zp},ReferenceDot:{handler:j.renderReferenceElement},XAxis:{handler:zp},YAxis:{handler:zp},Brush:{handler:j.renderBrush,once:!0},Bar:{handler:j.renderGraphicChild},Line:{handler:j.renderGraphicChild},Area:{handler:j.renderGraphicChild},Radar:{handler:j.renderGraphicChild},RadialBar:{handler:j.renderGraphicChild},Scatter:{handler:j.renderGraphicChild},Pie:{handler:j.renderGraphicChild},Funnel:{handler:j.renderGraphicChild},Tooltip:{handler:j.renderCursor,once:!0},PolarGrid:{handler:j.renderPolarGrid,once:!0},PolarAngleAxis:{handler:j.renderPolarAxis},PolarRadiusAxis:{handler:j.renderPolarAxis},Customized:{handler:j.renderCustomized}}),j.clipPathId="".concat((w=y.id)!==null&&w!==void 0?w:Rd("recharts"),"-clip"),j.throttleTriggeredAfterMouseMove=EF(j.triggeredAfterMouseMove,(S=y.throttleDelay)!==null&&S!==void 0?S:1e3/60),j.state={},j}return ICe(v,p),TCe(v,[{key:"componentDidMount",value:function(){var w,S;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,S=w.children,j=w.data,N=w.height,C=w.layout,_=Qr(S,ar);if(_){var A=_.props.defaultIndex;if(!(typeof A!="number"||A<0||A>this.state.tooltipTicks.length-1)){var P=this.state.tooltipTicks[A]&&this.state.tooltipTicks[A].value,T=rN(this.state,j,A,P),E=this.state.tooltipTicks[A].coordinate,I=(this.state.offset.top+N)/2,R=C==="horizontal",z=R?{x:E,y:I}:{y:E,x:I},U=this.state.formattedGraphicalItems.find(function(k){var D=k.item;return D.type.name==="Scatter"});U&&(z=me(me({},z),U.props.points[A].tooltipPosition),T=U.props.points[A].tooltipPayload);var K={activeTooltipIndex:A,isTooltipActive:!0,activeLabel:P,activePayload:T,activeCoordinate:z};this.setState(K),this.renderCursor(_),this.accessibilityManager.setIndex(A)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,S){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==S.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var j,N;this.accessibilityManager.setDetails({offset:{left:(j=this.props.margin.left)!==null&&j!==void 0?j:0,top:(N=this.props.margin.top)!==null&&N!==void 0?N:0}})}return null}},{key:"componentDidUpdate",value:function(w){Dj([Qr(w.children,ar)],[Qr(this.props.children,ar)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=Qr(this.props.children,ar);if(w&&typeof w.props.shared=="boolean"){var S=w.props.shared?"axis":"item";return l.indexOf(S)>=0?S:i}return i}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var S=this.container,j=S.getBoundingClientRect(),N=qpe(j),C={chartX:Math.round(w.pageX-N.left),chartY:Math.round(w.pageY-N.top)},_=j.width/S.offsetWidth||1,A=this.inRange(C.chartX,C.chartY,_);if(!A)return null;var P=this.state,T=P.xAxisMap,E=P.yAxisMap,I=this.getTooltipEventType(),R=dO(this.state,this.props.data,this.props.layout,A);if(I!=="axis"&&T&&E){var z=Gi(T).scale,U=Gi(E).scale,K=z&&z.invert?z.invert(C.chartX):null,k=U&&U.invert?U.invert(C.chartY):null;return me(me({},C),{},{xValue:K,yValue:k},R)}return R?me(me({},C),R):null}},{key:"inRange",value:function(w,S){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,N=this.props.layout,C=w/j,_=S/j;if(N==="horizontal"||N==="vertical"){var A=this.state.offset,P=C>=A.left&&C<=A.left+A.width&&_>=A.top&&_<=A.top+A.height;return P?{x:C,y:_}:null}var T=this.state,E=T.angleAxisMap,I=T.radiusAxisMap;if(E&&I){var R=Gi(E);return Rk({x:C,y:_},R)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,S=this.getTooltipEventType(),j=Qr(w,ar),N={};j&&S==="axis"&&(j.props.trigger==="click"?N={onClick:this.handleClick}:N={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var C=Xg(this.props,this.handleOuterEvent);return me(me({},C),N)}},{key:"addListener",value:function(){Tw.on(Ow,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Tw.removeListener(Ow,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,S,j){for(var N=this.state.formattedGraphicalItems,C=0,_=N.length;C<_;C++){var A=N[C];if(A.item===w||A.props.key===w.key||S===li(A.item.type)&&j===A.childIndex)return A}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,S=this.state.offset,j=S.left,N=S.top,C=S.height,_=S.width;return L.createElement("defs",null,L.createElement("clipPath",{id:w},L.createElement("rect",{x:j,y:N,height:C,width:_})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(S,j){var N=lO(j,2),C=N[0],_=N[1];return me(me({},S),{},He({},C,_.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(S,j){var N=lO(j,2),C=N[0],_=N[1];return me(me({},S),{},He({},C,_.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var S;return(S=this.state.xAxisMap)===null||S===void 0||(S=S[w])===null||S===void 0?void 0:S.scale}},{key:"getYScaleByAxisId",value:function(w){var S;return(S=this.state.yAxisMap)===null||S===void 0||(S=S[w])===null||S===void 0?void 0:S.scale}},{key:"getItemByXY",value:function(w){var S=this.state,j=S.formattedGraphicalItems,N=S.activeItem;if(j&&j.length)for(var C=0,_=j.length;C<_;C++){var A=j[C],P=A.props,T=A.item,E=T.type.defaultProps!==void 0?me(me({},T.type.defaultProps),T.props):T.props,I=li(T.type);if(I==="Bar"){var R=(P.data||[]).find(function(k){return Sje(w,k)});if(R)return{graphicalItem:A,payload:R}}else if(I==="RadialBar"){var z=(P.data||[]).find(function(k){return Rk(w,k)});if(z)return{graphicalItem:A,payload:z}}else if(Ry(A,N)||Ly(A,N)||tm(A,N)){var U=hNe({graphicalItem:A,activeTooltipItem:N,itemData:E.data}),K=E.activeIndex===void 0?U:E.activeIndex;return{graphicalItem:me(me({},A),{},{childIndex:K}),payload:tm(A,N)?E.data[U]:A.props.data[U]}}}return null}},{key:"render",value:function(){var w=this;if(!AP(this))return null;var S=this.props,j=S.children,N=S.className,C=S.width,_=S.height,A=S.style,P=S.compact,T=S.title,E=S.desc,I=cO(S,SCe),R=Ve(I,!1);if(P)return L.createElement(WT,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},L.createElement(Ij,Yc({},R,{width:C,height:_,title:T,desc:E}),this.renderClipPath(),EP(j,this.renderMap)));if(this.props.accessibilityLayer){var z,U;R.tabIndex=(z=this.props.tabIndex)!==null&&z!==void 0?z:0,R.role=(U=this.props.role)!==null&&U!==void 0?U:"application",R.onKeyDown=function(k){w.accessibilityManager.keyboardEvent(k)},R.onFocus=function(){w.accessibilityManager.focus()}}var K=this.parseEventsOfWrapper();return L.createElement(WT,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},L.createElement("div",Yc({className:st("recharts-wrapper",N),style:me({position:"relative",cursor:"default",width:C,height:_},A)},K,{ref:function(D){w.container=D}}),L.createElement(Ij,Yc({},R,{width:C,height:_,title:T,desc:E,style:BCe}),this.renderClipPath(),EP(j,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(b.Component);He(x,"displayName",n),He(x,"defaultProps",me({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),He(x,"getDerivedStateFromProps",function(p,v){var y=p.dataKey,w=p.data,S=p.children,j=p.width,N=p.height,C=p.layout,_=p.stackOffset,A=p.margin,P=v.dataStartIndex,T=v.dataEndIndex;if(v.updateId===void 0){var E=hO(p);return me(me(me({},E),{},{updateId:0},f(me(me({props:p},E),{},{updateId:0}),v)),{},{prevDataKey:y,prevData:w,prevWidth:j,prevHeight:N,prevLayout:C,prevStackOffset:_,prevMargin:A,prevChildren:S})}if(y!==v.prevDataKey||w!==v.prevData||j!==v.prevWidth||N!==v.prevHeight||C!==v.prevLayout||_!==v.prevStackOffset||!ou(A,v.prevMargin)){var I=hO(p),R={chartX:v.chartX,chartY:v.chartY,isTooltipActive:v.isTooltipActive},z=me(me({},dO(v,w,C)),{},{updateId:v.updateId+1}),U=me(me(me({},I),R),z);return me(me(me({},U),f(me({props:p},U),v)),{},{prevDataKey:y,prevData:w,prevWidth:j,prevHeight:N,prevLayout:C,prevStackOffset:_,prevMargin:A,prevChildren:S})}if(!Dj(S,v.prevChildren)){var K,k,D,J,W=Qr(S,rd),Y=W&&(K=(k=W.props)===null||k===void 0?void 0:k.startIndex)!==null&&K!==void 0?K:P,V=W&&(D=(J=W.props)===null||J===void 0?void 0:J.endIndex)!==null&&D!==void 0?D:T,O=Y!==P||V!==T,le=!at(w),te=le&&!O?v.updateId:v.updateId+1;return me(me({updateId:te},f(me(me({props:p},v),{},{updateId:te,dataStartIndex:Y,dataEndIndex:V}),v)),{},{prevChildren:S,dataStartIndex:Y,dataEndIndex:V})}return null}),He(x,"renderActiveDot",function(p,v,y){var w;return b.isValidElement(p)?w=b.cloneElement(p,v):Ge(p)?w=p(v):w=L.createElement(Oy,v),L.createElement(vt,{className:"recharts-active-dot",key:y},w)});var g=b.forwardRef(function(v,y){return L.createElement(x,Yc({},v,{ref:y}))});return g.displayName=x.displayName,g},XCe=p2({chartName:"BarChart",GraphicalChild:Na,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:qo},{axisType:"yAxis",AxisComp:Vo}],formatAxisMap:y6}),g2=p2({chartName:"PieChart",GraphicalChild:ra,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:$y},{axisType:"radiusAxis",AxisComp:My}],formatAxisMap:L0e,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),v2=p2({chartName:"AreaChart",GraphicalChild:Cs,axisComponents:[{axisType:"xAxis",AxisComp:qo},{axisType:"yAxis",AxisComp:Vo}],formatAxisMap:y6});function mO(){const{data:e=[]}=Ps(),{settings:t}=Zt(),r=(()=>{const a=[],i=new Date;for(let o=5;o>=0;o--){const l=new Date(i.getFullYear(),i.getMonth()-o,1);`${l.getFullYear()}${String(l.getMonth()+1).padStart(2,"0")}`;const c=new Date(l.getFullYear(),l.getMonth(),1).toISOString().split("T")[0],u=new Date(l.getFullYear(),l.getMonth()+1,0).toISOString().split("T")[0],h=e.filter(f=>{const x=new Date(f.consultation_date);return x>=new Date(c)&&x<=new Date(u)}).length*50,m=Math.round(h*.3);a.push({month:l.toLocaleDateString("fr-FR",{month:"short"}),revenue:Math.round(h),expenses:Math.round(m),profit:Math.round(h-m)})}return a})();return s.jsxs(ie,{children:[s.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ye,{className:"text-base font-medium",children:"volution des Revenus"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xd,{className:"h-4 w-4 text-muted-foreground"}),s.jsx(Rn,{className:"h-4 w-4 text-green-600"})]})]}),s.jsxs(oe,{children:[s.jsx("div",{className:"h-[300px] w-full",children:s.jsx(ic,{width:"100%",height:"100%",children:s.jsxs(v2,{data:r,margin:{top:5,right:30,left:20,bottom:5},children:[s.jsx(Rm,{strokeDasharray:"3 3",className:"opacity-30"}),s.jsx(qo,{dataKey:"month",axisLine:!1,tickLine:!1,className:"text-xs"}),s.jsx(Vo,{axisLine:!1,tickLine:!1,className:"text-xs",tickFormatter:a=>`${a}${t.currency||""}`}),s.jsx(ar,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:(a,i)=>[`${a} ${t.currency||""}`,i==="revenue"?"Revenus":i==="expenses"?"Dpenses":"Bnfice"]}),s.jsx(Cs,{type:"monotone",dataKey:"revenue",stackId:"1",stroke:"#10b981",fill:"#10b981",fillOpacity:.6,strokeWidth:2}),s.jsx(Cs,{type:"monotone",dataKey:"expenses",stackId:"2",stroke:"#ef4444",fill:"#ef4444",fillOpacity:.6,strokeWidth:2})]})})}),s.jsxs("div",{className:"flex items-center justify-between mt-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-muted-foreground",children:"Revenus"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),s.jsx("span",{className:"text-muted-foreground",children:"Dpenses"})]})]})]})]})}function JCe(){const{data:e=[]}=Ps(),{data:t=[]}=rc(),{data:n=[]}=nc(),{data:r=[]}=Em(),i=(()=>{const o=[],l=new Date;for(let c=6;c>=0;c--){const u=new Date(l);u.setDate(u.getDate()-c);const d=u.toISOString().split("T")[0],h=e.filter(g=>new Date(g.consultation_date).toISOString().split("T")[0]===d).length,m=t.filter(g=>new Date(g.appointment_date).toISOString().split("T")[0]===d).length,f=n.filter(g=>new Date(g.vaccination_date).toISOString().split("T")[0]===d).length,x=r.filter(g=>new Date(g.treatment_date).toISOString().split("T")[0]===d).length;o.push({day:u.toLocaleDateString("fr-FR",{weekday:"short"}),date:d,consultations:h,appointments:m,vaccinations:f,antiparasitics:x,total:h+m+f+x})}return o})();return s.jsxs(ie,{children:[s.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ye,{className:"text-base font-medium",children:"Activit des 7 derniers jours"}),s.jsx(Oa,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(oe,{children:[s.jsx("div",{className:"h-[300px] w-full",children:s.jsx(ic,{width:"100%",height:"100%",children:s.jsxs(XCe,{data:i,margin:{top:5,right:30,left:20,bottom:5},children:[s.jsx(Rm,{strokeDasharray:"3 3",className:"opacity-30"}),s.jsx(qo,{dataKey:"day",axisLine:!1,tickLine:!1,className:"text-xs"}),s.jsx(Vo,{axisLine:!1,tickLine:!1,className:"text-xs"}),s.jsx(ar,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:(o,l)=>[o,l==="consultations"?"Consultations":l==="appointments"?"Rendez-vous":l==="vaccinations"?"Vaccinations":l==="antiparasitics"?"Antiparasitaires":"Total"]}),s.jsx(Na,{dataKey:"consultations",fill:"#10b981",radius:[2,2,0,0]}),s.jsx(Na,{dataKey:"appointments",fill:"#3b82f6",radius:[2,2,0,0]}),s.jsx(Na,{dataKey:"vaccinations",fill:"#8b5cf6",radius:[2,2,0,0]}),s.jsx(Na,{dataKey:"antiparasitics",fill:"#f59e0b",radius:[2,2,0,0]})]})})}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mt-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-muted-foreground",children:"Consultations"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),s.jsx("span",{className:"text-muted-foreground",children:"Rendez-vous"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),s.jsx("span",{className:"text-muted-foreground",children:"Vaccinations"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-amber-500 rounded-full"}),s.jsx("span",{className:"text-muted-foreground",children:"Antiparasitaires"})]})]})]})]})}function ZCe(){const{data:e=[]}=Yx(),t=L.useMemo(()=>{const a=e.length,i=e.filter(c=>c.current_quantity<=c.minimum_quantity&&c.current_quantity>0).length,o=e.filter(c=>c.current_quantity===0).length;return[{name:"Stock Normal",value:a-i-o,color:"#10b981"},{name:"Stock Faible",value:i,color:"#f59e0b"},{name:"Rupture",value:o,color:"#ef4444"}].filter(c=>c.value>0)},[e]),n=e.reduce((a,i)=>a+i.current_quantity*(i.unit_cost||0),0),r=e.sort((a,i)=>i.current_quantity*(i.unit_cost||0)-a.current_quantity*(a.unit_cost||0)).slice(0,5);return s.jsxs(ie,{children:[s.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ye,{className:"text-base font-medium",children:"tat du Stock"}),s.jsx(wa,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(oe,{children:[s.jsx("div",{className:"h-[300px] w-full",children:s.jsx(ic,{width:"100%",height:"100%",children:s.jsxs(g2,{children:[s.jsx(ra,{data:t,cx:"50%",cy:"50%",labelLine:!1,label:({name:a,percent:i})=>`${a} ${(i*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:t.map((a,i)=>s.jsx(Bd,{fill:a.color},`cell-${i}`))}),s.jsx(ar,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:a=>[a,"Articles"]})]})})}),s.jsxs("div",{className:"mt-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Valeur totale du stock"}),s.jsxs("span",{className:"font-medium",children:[n.toFixed(0)," "]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-sm font-medium",children:"Articles les plus prcieux"}),r.map((a,i)=>s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsx("span",{className:"truncate flex-1",children:a.name}),s.jsxs("span",{className:"text-muted-foreground ml-2",children:[(a.current_quantity*(a.unit_cost||0)).toFixed(0)," "]})]},a.id))]})]})]})]})}function eAe(){const{data:e=[]}=vn(),{data:t=[]}=fn(),r=(()=>{const a=[],i=new Date;for(let o=5;o>=0;o--){const l=new Date(i.getFullYear(),i.getMonth()-o,1),c=new Date(l.getFullYear(),l.getMonth(),1),u=new Date(l.getFullYear(),l.getMonth()+1,0),d=e.filter(x=>{const g=new Date(x.created_at);return g>=c&&g<=u}).length,h=t.filter(x=>{const g=new Date(x.created_at);return g>=c&&g<=u}).length,m=e.filter(x=>new Date(x.created_at)<=u).length,f=t.filter(x=>new Date(x.created_at)<=u).length;a.push({month:l.toLocaleDateString("fr-FR",{month:"short"}),newClients:d,newPets:h,totalClients:m,totalPets:f})}return a})();return s.jsxs(ie,{children:[s.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ye,{className:"text-base font-medium",children:"Croissance des Clients"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ra,{className:"h-4 w-4 text-muted-foreground"}),s.jsx(Rn,{className:"h-4 w-4 text-blue-600"})]})]}),s.jsxs(oe,{children:[s.jsx("div",{className:"h-[300px] w-full",children:s.jsx(ic,{width:"100%",height:"100%",children:s.jsxs(v2,{data:r,margin:{top:5,right:30,left:20,bottom:5},children:[s.jsx(Rm,{strokeDasharray:"3 3",className:"opacity-30"}),s.jsx(qo,{dataKey:"month",axisLine:!1,tickLine:!1,className:"text-xs"}),s.jsx(Vo,{axisLine:!1,tickLine:!1,className:"text-xs"}),s.jsx(ar,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:(a,i)=>[a,i==="newClients"?"Nouveaux Clients":i==="newPets"?"Nouveaux Animaux":i==="totalClients"?"Total Clients":"Total Animaux"]}),s.jsx(Cs,{type:"monotone",dataKey:"newClients",stackId:"1",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.6,strokeWidth:2}),s.jsx(Cs,{type:"monotone",dataKey:"newPets",stackId:"2",stroke:"#8b5cf6",fill:"#8b5cf6",fillOpacity:.6,strokeWidth:2})]})})}),s.jsxs("div",{className:"flex items-center justify-between mt-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),s.jsx("span",{className:"text-muted-foreground",children:"Nouveaux Clients"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),s.jsx("span",{className:"text-muted-foreground",children:"Nouveaux Animaux"})]})]})]})]})}function pO(){const{data:e=[]}=rc(),t=L.useMemo(()=>{const c=e.reduce((h,m)=>(h[m.status]=(h[m.status]||0)+1,h),{}),u={scheduled:"Planifi",confirmed:"Confirm",completed:"Termin",cancelled:"Annul","no-show":"Absent"},d={scheduled:"#3b82f6",confirmed:"#10b981",completed:"#6b7280",cancelled:"#ef4444","no-show":"#f59e0b"};return Object.entries(c).map(([h,m])=>({name:u[h]||h,value:m,color:d[h]||"#6b7280"}))},[e]),n=e.length,r=e.filter(c=>c.status==="completed").length,a=e.filter(c=>c.status==="scheduled"||c.status==="confirmed").length,i=e.filter(c=>c.status==="cancelled").length,o=n>0?r/n*100:0,l=n>0?i/n*100:0;return s.jsxs(ie,{children:[s.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ye,{className:"text-base font-medium",children:"Statuts des Rendez-vous"}),s.jsx(Ze,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(oe,{children:[s.jsx("div",{className:"h-[300px] w-full",children:s.jsx(ic,{width:"100%",height:"100%",children:s.jsxs(g2,{children:[s.jsx(ra,{data:t,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,dataKey:"value",children:t.map((c,u)=>s.jsx(Bd,{fill:c.color},`cell-${u}`))}),s.jsx(ar,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:c=>[c,"Rendez-vous"]})]})})}),s.jsxs("div",{className:"mt-4 space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[o.toFixed(1),"%"]}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Taux de russite"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-red-600",children:[l.toFixed(1),"%"]}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Taux d'annulation"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(On,{className:"h-4 w-4 text-green-600"}),s.jsx("span",{children:"Termins"})]}),s.jsx("span",{className:"font-medium",children:r})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx($t,{className:"h-4 w-4 text-blue-600"}),s.jsx("span",{children:" venir"})]}),s.jsx("span",{className:"font-medium",children:a})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx($l,{className:"h-4 w-4 text-red-600"}),s.jsx("span",{children:"Annuls"})]}),s.jsx("span",{className:"font-medium",children:i})]})]})]})]})]})}function tAe(){const{data:e=[]}=Ps(),n=(()=>{const r=[],a=new Date;for(let i=11;i>=0;i--){const o=new Date(a.getFullYear(),a.getMonth()-i,1),l=new Date(o.getFullYear(),o.getMonth(),1),c=new Date(o.getFullYear(),o.getMonth()+1,0),u=e.filter(m=>{const f=new Date(m.consultation_date);return f>=l&&f<=c}),d=u.reduce((m,f)=>m+(f.cost||0),0),h=u.length>0?d/u.length:0;r.push({month:o.toLocaleDateString("fr-FR",{month:"short",year:"2-digit"}),consultations:u.length,revenue:Math.round(d),averageRevenue:Math.round(h)})}return r})();return s.jsxs(ie,{children:[s.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ye,{className:"text-base font-medium",children:"Tendances des Consultations"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Wn,{className:"h-4 w-4 text-muted-foreground"}),s.jsx(Rn,{className:"h-4 w-4 text-blue-600"})]})]}),s.jsxs(oe,{children:[s.jsx("div",{className:"h-[300px] w-full",children:s.jsx(ic,{width:"100%",height:"100%",children:s.jsxs(v2,{data:n,margin:{top:5,right:30,left:20,bottom:5},children:[s.jsx(Rm,{strokeDasharray:"3 3",className:"opacity-30"}),s.jsx(qo,{dataKey:"month",axisLine:!1,tickLine:!1,className:"text-xs"}),s.jsx(Vo,{axisLine:!1,tickLine:!1,className:"text-xs"}),s.jsx(ar,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:(r,a)=>[a==="consultations"?r:`${r} `,a==="consultations"?"Consultations":a==="revenue"?"Revenus":"Revenu moyen"]}),s.jsx(Cs,{type:"monotone",dataKey:"consultations",stackId:"1",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.6,strokeWidth:2})]})})}),s.jsx("div",{className:"flex items-center justify-between mt-4 text-sm",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),s.jsx("span",{className:"text-muted-foreground",children:"Nombre de consultations"})]})})]})]})}function gO(){const{data:e=[]}=fn(),t=L.useMemo(()=>{const o=e.reduce((c,u)=>{const d=u.species||"Autre";return c[d]=(c[d]||0)+1,c},{}),l=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#84cc16","#f97316"];return Object.entries(o).map(([c,u],d)=>({name:c,value:u,color:l[d%l.length]}))},[e]),n=e.length,r=t.length>0?t[0]:null,a=e.length>0?e.reduce((o,l)=>{if(l.birth_date){const c=new Date(l.birth_date),d=(new Date().getTime()-c.getTime())/(365.25*24*60*60*1e3);return o+d}return o},0)/e.length:0,i=o=>{switch(o.toLowerCase()){case"chien":case"dog":return s.jsx(EU,{className:"h-4 w-4"});case"chat":case"cat":return s.jsx(jU,{className:"h-4 w-4"});case"poisson":case"fish":return s.jsx(OU,{className:"h-4 w-4"});case"oiseau":case"bird":return s.jsx(wU,{className:"h-4 w-4"});default:return s.jsx(gt,{className:"h-4 w-4"})}};return s.jsxs(ie,{children:[s.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ye,{className:"text-base font-medium",children:"Rpartition par Espce"}),s.jsx(gt,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(oe,{children:[s.jsx("div",{className:"h-[300px] w-full",children:s.jsx(ic,{width:"100%",height:"100%",children:s.jsxs(g2,{children:[s.jsx(ra,{data:t,cx:"50%",cy:"50%",labelLine:!1,label:({name:o,percent:l})=>`${o} ${(l*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:t.map((o,l)=>s.jsx(Bd,{fill:o.color},`cell-${l}`))}),s.jsx(ar,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:o=>[o,"Animaux"]})]})})}),s.jsxs("div",{className:"mt-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Total d'animaux"}),s.jsx("span",{className:"font-medium",children:n})]}),r&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Espce la plus commune"}),s.jsxs("div",{className:"flex items-center gap-2",children:[i(r.name),s.jsx("span",{className:"font-medium",children:r.name})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"ge moyen"}),s.jsxs("span",{className:"font-medium",children:[a.toFixed(1)," ans"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-sm font-medium",children:"Rpartition dtaille"}),t.slice(0,5).map((o,l)=>s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[i(o.name),s.jsx("span",{children:o.name})]}),s.jsxs("span",{className:"text-muted-foreground",children:[o.value," (",(o.value/n*100).toFixed(1),"%)"]})]},l))]})]})]})]})}var Wy="Tabs",[nAe,Hke]=Br(Wy,[kx]),r8=kx(),[rAe,x2]=nAe(Wy),s8=b.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=Px(l),[h,m]=gi({prop:r,onChange:a,defaultProp:i??"",caller:Wy});return s.jsx(rAe,{scope:n,baseId:Aa(),value:h,onValueChange:m,orientation:o,dir:d,activationMode:c,children:s.jsx(qe.div,{dir:d,"data-orientation":o,...u,ref:t})})});s8.displayName=Wy;var a8="TabsList",i8=b.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...a}=e,i=x2(a8,n),o=r8(n);return s.jsx(e4,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:s.jsx(qe.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});i8.displayName=a8;var o8="TabsTrigger",l8=b.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...i}=e,o=x2(o8,n),l=r8(n),c=d8(o.baseId,r),u=h8(o.baseId,r),d=r===o.value;return s.jsx(t4,{asChild:!0,...l,focusable:!a,active:d,children:s.jsx(qe.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:Te(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:Te(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:Te(e.onFocus,()=>{const h=o.activationMode!=="manual";!d&&!a&&h&&o.onValueChange(r)})})})});l8.displayName=o8;var c8="TabsContent",u8=b.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:a,children:i,...o}=e,l=x2(c8,n),c=d8(l.baseId,r),u=h8(l.baseId,r),d=r===l.value,h=b.useRef(d);return b.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),s.jsx(As,{present:a||d,children:({present:m})=>s.jsx(qe.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:m&&i})})});u8.displayName=c8;function d8(e,t){return`${e}-trigger-${t}`}function h8(e,t){return`${e}-content-${t}`}var sAe=s8,f8=i8,m8=l8,p8=u8;const $a=sAe,Zs=b.forwardRef(({className:e,...t},n)=>s.jsx(f8,{ref:n,className:Me("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Zs.displayName=f8.displayName;const yt=b.forwardRef(({className:e,...t},n)=>s.jsx(m8,{ref:n,className:Me("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));yt.displayName=m8.displayName;const wt=b.forwardRef(({className:e,...t},n)=>s.jsx(p8,{ref:n,className:Me("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));wt.displayName=p8.displayName;const aAe=()=>s.jsxs("div",{className:"container mx-auto px-3 sm:px-4 lg:px-6 py-3 sm:py-4 lg:py-6 max-w-7xl",children:[s.jsx(pte,{}),s.jsx("div",{className:"mt-6 sm:mt-8",children:s.jsxs($a,{defaultValue:"overview",className:"w-full",children:[s.jsxs(Zs,{className:"grid w-full grid-cols-3 sm:grid-cols-6 lg:grid-cols-6 h-auto p-1",children:[s.jsxs(yt,{value:"overview",className:"flex flex-col sm:flex-row items-center gap-1 sm:gap-2 py-2 px-1 sm:px-3 text-xs sm:text-sm",children:[s.jsx(MU,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{className:"text-[10px] sm:text-xs lg:text-sm",children:"Vue d'ensemble"})]}),s.jsxs(yt,{value:"analytics",className:"flex flex-col sm:flex-row items-center gap-1 sm:gap-2 py-2 px-1 sm:px-3 text-xs sm:text-sm",children:[s.jsx(Rn,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{className:"text-[10px] sm:text-xs lg:text-sm",children:"Analyses"})]}),s.jsxs(yt,{value:"clients",className:"flex flex-col sm:flex-row items-center gap-1 sm:gap-2 py-2 px-1 sm:px-3 text-xs sm:text-sm",children:[s.jsx(Ra,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{className:"text-[10px] sm:text-xs lg:text-sm",children:"Clients"})]}),s.jsxs(yt,{value:"animals",className:"flex flex-col sm:flex-row items-center gap-1 sm:gap-2 py-2 px-1 sm:px-3 text-xs sm:text-sm",children:[s.jsx(gt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{className:"text-[10px] sm:text-xs lg:text-sm",children:"Animaux"})]}),s.jsxs(yt,{value:"consultations",className:"flex flex-col sm:flex-row items-center gap-1 sm:gap-2 py-2 px-1 sm:px-3 text-xs sm:text-sm",children:[s.jsx(Wn,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{className:"text-[10px] sm:text-xs lg:text-sm",children:"Consultations"})]}),s.jsxs(yt,{value:"charts",className:"flex flex-col sm:flex-row items-center gap-1 sm:gap-2 py-2 px-1 sm:px-3 text-xs sm:text-sm",children:[s.jsx(aS,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{className:"text-[10px] sm:text-xs lg:text-sm",children:"Graphiques"})]})]}),s.jsx(wt,{value:"overview",className:"space-y-4 sm:space-y-6 mt-4 sm:mt-6",children:s.jsxs($a,{defaultValue:"kpis",className:"w-full",children:[s.jsxs(Zs,{className:"grid w-full grid-cols-2 sm:grid-cols-4 lg:grid-cols-4 h-auto p-1",children:[s.jsxs(yt,{value:"kpis",className:"flex items-center gap-1 sm:gap-2 py-2 px-2 sm:px-3 text-xs sm:text-sm",children:[s.jsx(Rn,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{children:"KPIs"})]}),s.jsxs(yt,{value:"activities",className:"flex items-center gap-1 sm:gap-2 py-2 px-2 sm:px-3 text-xs sm:text-sm",children:[s.jsx(Oa,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{children:"Activits"})]}),s.jsxs(yt,{value:"statistics",className:"flex items-center gap-1 sm:gap-2 py-2 px-2 sm:px-3 text-xs sm:text-sm",children:[s.jsx(NU,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{children:"Statistiques"})]}),s.jsxs(yt,{value:"system",className:"flex items-center gap-1 sm:gap-2 py-2 px-2 sm:px-3 text-xs sm:text-sm",children:[s.jsx(lS,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{children:"Systme"})]})]}),s.jsx(wt,{value:"kpis",className:"space-y-4 sm:space-y-6 mt-4 sm:mt-6",children:s.jsxs("section",{children:[s.jsx("h2",{className:"text-base sm:text-lg lg:text-xl font-bold mb-3 sm:mb-4 px-1",children:"Indicateurs Cls de Performance"}),s.jsx(jte,{})]})}),s.jsx(wt,{value:"activities",className:"space-y-4 sm:space-y-6 mt-4 sm:mt-6",children:s.jsxs("section",{children:[s.jsx("h2",{className:"text-base sm:text-lg lg:text-xl font-bold mb-3 sm:mb-4 px-1",children:"Activits Rcentes"}),s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-4 lg:gap-6",children:[s.jsx("div",{className:"w-full",children:s.jsx(dP,{})}),s.jsx("div",{className:"w-full",children:s.jsx(hP,{})}),s.jsx("div",{className:"w-full",children:s.jsx(fP,{})})]})]})}),s.jsx(wt,{value:"statistics",className:"space-y-4 sm:space-y-6 mt-4 sm:mt-6",children:s.jsxs("section",{children:[s.jsx("h2",{className:"text-base sm:text-lg lg:text-xl font-bold mb-3 sm:mb-4 px-1",children:"Statistiques Dtailles"}),s.jsx(gte,{})]})}),s.jsx(wt,{value:"system",className:"space-y-4 sm:space-y-6 mt-4 sm:mt-6",children:s.jsxs("section",{children:[s.jsx("h2",{className:"text-base sm:text-lg lg:text-xl font-bold mb-3 sm:mb-4 px-1",children:"tat du Systme"}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-3 sm:gap-4",children:[s.jsx(wte,{}),s.jsx(bte,{}),s.jsx(yte,{})]})]})})]})}),s.jsx(wt,{value:"analytics",className:"space-y-4 sm:space-y-6 mt-4 sm:mt-6",children:s.jsxs("section",{children:[s.jsx("h2",{className:"text-base sm:text-lg lg:text-xl font-bold mb-3 sm:mb-4 px-1",children:"Analyses et Tendances"}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[s.jsx(kj,{children:s.jsx(mO,{})}),s.jsx(JCe,{})]})]})}),s.jsx(wt,{value:"clients",className:"space-y-4 sm:space-y-6 mt-4 sm:mt-6",children:s.jsxs("section",{children:[s.jsx("h2",{className:"text-base sm:text-lg lg:text-xl font-bold mb-3 sm:mb-4 px-1",children:"Gestion des Clients"}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[s.jsx(dP,{}),s.jsx(eAe,{})]})]})}),s.jsx(wt,{value:"animals",className:"space-y-4 sm:space-y-6 mt-4 sm:mt-6",children:s.jsxs("section",{children:[s.jsx("h2",{className:"text-base sm:text-lg lg:text-xl font-bold mb-3 sm:mb-4 px-1",children:"Gestion des Animaux"}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[s.jsx(hP,{}),s.jsx(gO,{})]})]})}),s.jsxs(wt,{value:"consultations",className:"space-y-4 sm:space-y-6 mt-4 sm:mt-6",children:[s.jsxs("section",{children:[s.jsx("h2",{className:"text-base sm:text-lg lg:text-xl font-bold mb-3 sm:mb-4 px-1",children:"Activit Rcente"}),s.jsx(fP,{})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-base sm:text-lg lg:text-xl font-bold mb-3 sm:mb-4 px-1",children:"Rendez-vous"}),s.jsx(pO,{})]})]}),s.jsx(wt,{value:"charts",className:"space-y-4 sm:space-y-6 mt-4 sm:mt-6",children:s.jsxs("section",{children:[s.jsx("h2",{className:"text-base sm:text-lg lg:text-xl font-bold mb-3 sm:mb-4 px-1",children:"Graphiques Dtaills"}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[s.jsx(tAe,{}),s.jsx(pO,{})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 mt-4 sm:mt-6",children:[s.jsx(gO,{}),s.jsx(ZCe,{})]})]})})]})}),s.jsx(kj,{children:s.jsxs("div",{className:"mt-6 sm:mt-8 p-4 sm:p-6 border rounded-lg bg-muted/50",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3 sm:mb-4",children:[s.jsx(Jn,{className:"h-4 w-4 sm:h-5 sm:w-5"}),s.jsx("h2",{className:"text-base sm:text-lg lg:text-xl font-bold",children:"Administration"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[s.jsx(mO,{}),s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"Fonctionnalits Admin"}),s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Section rserve aux administrateurs pour la gestion avance du systme."})]})]})]})})]});var g8="AlertDialog",[iAe,Kke]=Br(g8,[XR]),Pi=XR(),v8=e=>{const{__scopeAlertDialog:t,...n}=e,r=Pi(t);return s.jsx(f3,{...r,...n,modal:!0})};v8.displayName=g8;var oAe="AlertDialogTrigger",lAe=b.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=Pi(n);return s.jsx(m3,{...a,...r,ref:t})});lAe.displayName=oAe;var cAe="AlertDialogPortal",x8=e=>{const{__scopeAlertDialog:t,...n}=e,r=Pi(t);return s.jsx(p3,{...r,...n})};x8.displayName=cAe;var uAe="AlertDialogOverlay",y8=b.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=Pi(n);return s.jsx(ZS,{...a,...r,ref:t})});y8.displayName=uAe;var hu="AlertDialogContent",[dAe,hAe]=iAe(hu),fAe=cI("AlertDialogContent"),w8=b.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...a}=e,i=Pi(n),o=b.useRef(null),l=ft(t,o),c=b.useRef(null);return s.jsx(mZ,{contentName:hu,titleName:b8,docsSlug:"alert-dialog",children:s.jsx(dAe,{scope:n,cancelRef:c,children:s.jsxs(e_,{role:"alertdialog",...i,...a,ref:l,onOpenAutoFocus:Te(a.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[s.jsx(fAe,{children:r}),s.jsx(pAe,{contentRef:o})]})})})});w8.displayName=hu;var b8="AlertDialogTitle",j8=b.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=Pi(n);return s.jsx(t_,{...a,...r,ref:t})});j8.displayName=b8;var N8="AlertDialogDescription",S8=b.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=Pi(n);return s.jsx(n_,{...a,...r,ref:t})});S8.displayName=N8;var mAe="AlertDialogAction",_8=b.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=Pi(n);return s.jsx(r_,{...a,...r,ref:t})});_8.displayName=mAe;var C8="AlertDialogCancel",A8=b.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:a}=hAe(C8,n),i=Pi(n),o=ft(t,a);return s.jsx(r_,{...i,...r,ref:o})});A8.displayName=C8;var pAe=({contentRef:e})=>{const t=`\`${hu}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${hu}\` by passing a \`${N8}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${hu}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return b.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},gAe=v8,vAe=x8,P8=y8,E8=w8,k8=_8,T8=A8,O8=j8,D8=S8;const y2=gAe,xAe=vAe,M8=b.forwardRef(({className:e,...t},n)=>s.jsx(P8,{className:Me("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));M8.displayName=P8.displayName;const Hy=b.forwardRef(({className:e,...t},n)=>s.jsxs(xAe,{children:[s.jsx(M8,{}),s.jsx(E8,{ref:n,className:Me("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Hy.displayName=E8.displayName;const Ky=({className:e,...t})=>s.jsx("div",{className:Me("flex flex-col space-y-2 text-center sm:text-left",e),...t});Ky.displayName="AlertDialogHeader";const Gy=({className:e,...t})=>s.jsx("div",{className:Me("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Gy.displayName="AlertDialogFooter";const Yy=b.forwardRef(({className:e,...t},n)=>s.jsx(O8,{ref:n,className:Me("text-lg font-semibold",e),...t}));Yy.displayName=O8.displayName;const Qy=b.forwardRef(({className:e,...t},n)=>s.jsx(D8,{ref:n,className:Me("text-sm text-muted-foreground",e),...t}));Qy.displayName=D8.displayName;const Xy=b.forwardRef(({className:e,...t},n)=>s.jsx(k8,{ref:n,className:Me(MS(),e),...t}));Xy.displayName=k8.displayName;const Jy=b.forwardRef(({className:e,...t},n)=>s.jsx(T8,{ref:n,className:Me(MS({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Jy.displayName=T8.displayName;const Hd=e=>{const{settings:t}=Zt();return{currentView:t.displayPreferences[e],isTableView:t.displayPreferences[e]==="table",isCardsView:t.displayPreferences[e]==="cards"}},yAe=(e,t)=>{const n=t.filter(i=>i.client_id===e.id),r=Math.abs(e.id.split("").reduce((i,o)=>(i=(i<<5)-i+o.charCodeAt(0),i&i),0)),a=n.map(i=>({id:Math.abs(i.id.split("").reduce((l,c)=>(l=(l<<5)-l+c.charCodeAt(0),l&l),0)),name:i.name,type:i.species,breed:i.breed||""}));return{id:r,name:`${e.first_name} ${e.last_name}`,firstName:e.first_name,lastName:e.last_name,email:e.email||"",phone:e.phone||e.mobile_phone||"",address:e.address||"",city:e.city,pets:a,lastVisit:new Date(e.updated_at).toLocaleDateString("fr-FR"),totalVisits:0,dbId:e.id}},wAe=()=>{const{data:e=[],isLoading:t}=vn(),{data:n=[],isLoading:r}=fn(),a=Tee(),i=Oee(),{toast:o}=it(),{data:l=[],isLoading:c}=sc(),{data:u=[],isLoading:d}=iL(),h=e.map(O=>yAe(O,n)),{currentView:m}=Hd("clients"),[f,x]=b.useState(""),[g,p]=b.useState("all"),[v,y]=b.useState(m),[w,S]=b.useState(!1),[j,N]=b.useState(null),[C,_]=b.useState(!1),[A,P]=b.useState(!1),[T,E]=b.useState(!1),[I,R]=b.useState(null),[z,U]=b.useState({first_name:"",last_name:"",email:"",phone:"",mobile_phone:"",address:"",city:"Rabat",postal_code:"",country:"Maroc",notes:"",client_type:"particulier"}),K=h.filter(O=>{const le=O.name.toLowerCase().includes(f.toLowerCase())||O.email.toLowerCase().includes(f.toLowerCase())||O.city&&O.city.toLowerCase().includes(f.toLowerCase()),te=g==="all"||O.pets.some(ce=>ce.type===g);return le&&te}),k=O=>{N(O),_(!0)},D=O=>{N(O),U({first_name:O.firstName,last_name:O.lastName,email:O.email,phone:O.phone,mobile_phone:"",address:O.address,city:O.city,postal_code:"",country:"Maroc",notes:"",client_type:"particulier"}),P(!0)},J=O=>{R(O),E(!0)},W=async()=>{if(I)try{await i.mutateAsync(I.dbId),o({title:"Client supprim",description:`${I.name} a t supprim avec succs`}),E(!1),R(null)}catch(O){o({title:"Erreur",description:O instanceof Error?O.message:"Erreur lors de la suppression du client",variant:"destructive"})}},Y=()=>{j&&U({first_name:j.firstName,last_name:j.lastName,email:j.email,phone:j.phone,mobile_phone:"",address:j.address,city:j.city,postal_code:"",country:"Maroc",notes:"",client_type:"particulier"}),_(!1),P(!0)},V=async O=>{if(O.preventDefault(),!j||!z.first_name||!z.last_name){o({title:"Erreur",description:"Le prnom et le nom sont obligatoires",variant:"destructive"});return}try{await a.mutateAsync({id:j.dbId,data:z}),o({title:"Client modifi",description:`${z.first_name} ${z.last_name} a t modifi avec succs`}),P(!1),N(null)}catch(le){o({title:"Erreur",description:le instanceof Error?le.message:"Erreur lors de la modification du client",variant:"destructive"})}};return t||r?s.jsx("div",{className:"container mx-auto px-6 py-8",children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Chargement des clients..."})]})})}):s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-8 space-y-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Gestion des Clients"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Grez tous vos clients et leurs informations"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[s.jsxs($,{size:"sm",variant:v==="cards"?"default":"outline",onClick:()=>y("cards"),className:"gap-2 w-full sm:w-auto",children:[s.jsx(_o,{className:"h-4 w-4"}),"Cartes"]}),s.jsxs($,{size:"sm",variant:v==="table"?"default":"outline",onClick:()=>y("table"),className:"gap-2 w-full sm:w-auto",children:[s.jsx(vi,{className:"h-4 w-4"}),"Tableau"]}),s.jsxs($,{className:"gap-2 medical-glow w-full sm:w-auto",onClick:()=>S(!0),children:[s.jsx(Ye,{className:"h-4 w-4"}),"Nouveau Client"]})]})]}),s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsxs(ye,{className:"flex items-center gap-2",children:[s.jsx(Si,{className:"h-5 w-5"}),"Rechercher un client"]})}),s.jsx(oe,{children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsx(se,{placeholder:"Rechercher par nom, email ou ville...",value:f,onChange:O=>x(O.target.value),className:"flex-1"}),s.jsxs(_e,{value:g,onValueChange:p,children:[s.jsx(Ne,{className:"w-full sm:w-[200px]",children:s.jsx(Ce,{placeholder:"Filtrer par espce"})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"all",children:"Toutes espces"}),l.map(O=>s.jsx(Q,{value:O,children:O},O))]})]})]})})]}),v==="cards"?s.jsx("div",{className:"grid gap-6",children:K.map(O=>s.jsx(ie,{className:"card-hover",children:s.jsx(oe,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-4 flex-1",children:[s.jsx(er,{className:"h-12 w-12 sm:h-16 sm:w-16 mx-auto sm:mx-0",children:s.jsx(tr,{className:"bg-primary text-primary-foreground text-sm sm:text-lg",children:O.name.split(" ").map(le=>le[0]).join("")})}),s.jsxs("div",{className:"space-y-3 flex-1 text-center sm:text-left",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg sm:text-xl font-semibold",children:O.name}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 mt-2 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-1",children:[s.jsx(yd,{className:"h-3 w-3"}),O.email]}),s.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-1",children:[s.jsx(mf,{className:"h-3 w-3"}),O.phone]}),s.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-1",children:[s.jsx(Du,{className:"h-3 w-3"}),O.address]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"font-medium flex items-center justify-center sm:justify-start gap-2",children:[s.jsx(gt,{className:"h-4 w-4 text-primary"}),"Animaux (",O.pets.length,")"]}),s.jsx("div",{className:"flex gap-2 flex-wrap justify-center sm:justify-start",children:O.pets.length>0?O.pets.map((le,te)=>s.jsxs(Ie,{variant:"secondary",className:"gap-1",children:[le.name," - ",le.type," ",le.breed&&`(${le.breed})`]},le.id||te)):s.jsx("span",{className:"text-sm text-muted-foreground",children:"Aucun animal enregistr"})})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-6 text-sm justify-center sm:justify-start",children:[s.jsxs("span",{children:[s.jsx("strong",{children:"Dernire visite:"})," ",O.lastVisit]}),s.jsxs("span",{children:[s.jsx("strong",{children:"Total visites:"})," ",O.totalVisits]})]})]})]}),s.jsxs("div",{className:"flex gap-2 justify-center sm:justify-end",children:[s.jsxs($,{size:"sm",variant:"outline",className:"gap-2",onClick:()=>k(O),children:[s.jsx($n,{className:"h-4 w-4"}),"Voir"]}),s.jsxs($,{size:"sm",variant:"outline",className:"gap-2",onClick:()=>D(O),children:[s.jsx(It,{className:"h-4 w-4"}),"Modifier"]}),s.jsxs($,{size:"sm",variant:"outline",className:"gap-2 text-destructive hover:text-destructive-foreground hover:bg-destructive",onClick:()=>J(O),children:[s.jsx(Wt,{className:"h-4 w-4"}),"Supprimer"]})]})]})})},O.id))}):s.jsx(ie,{children:s.jsx(oe,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"border-b",children:s.jsxs("tr",{className:"text-left",children:[s.jsx("th",{className:"p-2 sm:p-4 font-medium",children:"Client"}),s.jsx("th",{className:"p-2 sm:p-4 font-medium hidden sm:table-cell",children:"Contact"}),s.jsx("th",{className:"p-2 sm:p-4 font-medium hidden md:table-cell",children:"Animaux"}),s.jsx("th",{className:"p-2 sm:p-4 font-medium hidden lg:table-cell",children:"Dernire visite"}),s.jsx("th",{className:"p-2 sm:p-4 font-medium hidden lg:table-cell",children:"Total visites"}),s.jsx("th",{className:"p-2 sm:p-4 font-medium",children:"Actions"})]})}),s.jsx("tbody",{children:K.map(O=>s.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[s.jsx("td",{className:"p-2 sm:p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(er,{className:"h-8 w-8 sm:h-10 sm:w-10",children:s.jsx(tr,{className:"bg-primary text-primary-foreground text-xs sm:text-sm",children:O.name.split(" ").map(le=>le[0]).join("")})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-sm sm:text-base",children:O.name}),s.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:O.address})]})]})}),s.jsx("td",{className:"p-2 sm:p-4 hidden sm:table-cell",children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-xs sm:text-sm",children:O.email}),s.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:O.phone})]})}),s.jsx("td",{className:"p-2 sm:p-4 hidden md:table-cell",children:s.jsx("div",{className:"flex gap-1 flex-wrap",children:O.pets.length>0?O.pets.map((le,te)=>s.jsx(Ie,{variant:"secondary",className:"text-xs",children:le.name},le.id||te)):s.jsx("span",{className:"text-xs text-muted-foreground",children:"Aucun"})})}),s.jsx("td",{className:"p-2 sm:p-4 hidden lg:table-cell text-sm",children:O.lastVisit}),s.jsx("td",{className:"p-2 sm:p-4 hidden lg:table-cell text-sm",children:O.totalVisits}),s.jsx("td",{className:"p-2 sm:p-4",children:s.jsxs("div",{className:"flex gap-1",children:[s.jsx($,{size:"sm",variant:"outline",onClick:()=>k(O),children:s.jsx($n,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),s.jsx($,{size:"sm",variant:"outline",onClick:()=>D(O),children:s.jsx(It,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),s.jsx($,{size:"sm",variant:"outline",className:"text-destructive hover:text-destructive-foreground hover:bg-destructive",onClick:()=>J(O),children:s.jsx(Wt,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]})})]},O.id))})]})})})}),s.jsx(Qx,{open:w,onOpenChange:S}),j&&C&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(ie,{className:"w-full max-w-2xl mx-auto max-h-[90vh] overflow-y-auto",children:[s.jsx(xe,{children:s.jsxs(ye,{className:"flex items-center justify-between",children:["Profil Client - ",j.name,s.jsx($,{variant:"ghost",size:"sm",onClick:()=>_(!1),children:""})]})}),s.jsxs(oe,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Nom complet"}),s.jsx("p",{children:j.name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Email"}),s.jsx("p",{children:j.email})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Tlphone"}),s.jsx("p",{children:j.phone})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Ville"}),s.jsx("p",{children:j.city})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Adresse"}),s.jsx("p",{children:j.address})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-sm font-medium",children:["Animaux (",j.pets.length,")"]}),s.jsx("div",{className:"flex gap-2 flex-wrap mt-2",children:j.pets.map((O,le)=>s.jsxs(Ie,{variant:"secondary",children:[O.name," - ",O.type," ",O.breed&&`(${O.breed})`]},O.id||le))})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-4",children:[s.jsx($,{onClick:()=>Y(),className:"w-full sm:w-auto",children:"Modifier"}),s.jsx($,{variant:"outline",onClick:()=>{_(!1),j&&J(j)},className:"w-full sm:w-auto text-destructive hover:text-destructive-foreground hover:bg-destructive",children:"Supprimer"}),s.jsx($,{variant:"outline",onClick:()=>_(!1),className:"w-full sm:w-auto",children:"Fermer"})]})]})]})}),j&&A&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(ie,{className:"w-full max-w-2xl mx-auto max-h-[90vh] overflow-y-auto",children:[s.jsx(xe,{children:s.jsxs(ye,{className:"flex items-center justify-between",children:["Modifier Client - ",j.name,s.jsx($,{variant:"ghost",size:"sm",onClick:()=>P(!1),children:""})]})}),s.jsx(oe,{children:s.jsxs("form",{onSubmit:V,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"edit_first_name",children:"Prnom *"}),s.jsx(se,{id:"edit_first_name",value:z.first_name,onChange:O=>U(le=>({...le,first_name:O.target.value})),placeholder:"Prnom du client",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"edit_last_name",children:"Nom *"}),s.jsx(se,{id:"edit_last_name",value:z.last_name,onChange:O=>U(le=>({...le,last_name:O.target.value})),placeholder:"Nom du client",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"edit_email",children:"Email"}),s.jsx(se,{id:"edit_email",type:"email",value:z.email||"",onChange:O=>U(le=>({...le,email:O.target.value})),placeholder:"email@exemple.com"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"edit_phone",children:"Tlphone"}),s.jsx(se,{id:"edit_phone",value:z.phone||"",onChange:O=>U(le=>({...le,phone:O.target.value})),placeholder:"06 12 34 56 78"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"edit_mobile_phone",children:"Tlphone mobile"}),s.jsx(se,{id:"edit_mobile_phone",value:z.mobile_phone||"",onChange:O=>U(le=>({...le,mobile_phone:O.target.value})),placeholder:"06 12 34 56 78"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"edit_city",children:"Ville"}),s.jsx(se,{id:"edit_city",value:z.city||"Rabat",onChange:O=>U(le=>({...le,city:O.target.value})),placeholder:"Ville"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"edit_address",children:"Adresse"}),s.jsx(se,{id:"edit_address",value:z.address||"",onChange:O=>U(le=>({...le,address:O.target.value})),placeholder:"Adresse complte"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"edit_postal_code",children:"Code postal"}),s.jsx(se,{id:"edit_postal_code",value:z.postal_code||"",onChange:O=>U(le=>({...le,postal_code:O.target.value})),placeholder:"10000"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"edit_client_type",children:"Type de client"}),s.jsxs(_e,{value:z.client_type||"particulier",onValueChange:O=>U(le=>({...le,client_type:O})),children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Type de client"})}),s.jsx(Se,{children:u.map(O=>s.jsx(Q,{value:O.toLowerCase(),children:O},O))})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"edit_notes",children:"Notes"}),s.jsx(Ke,{id:"edit_notes",value:z.notes||"",onChange:O=>U(le=>({...le,notes:O.target.value})),placeholder:"Notes supplmentaires...",rows:3})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-4",children:[s.jsx($,{type:"submit",disabled:a.isPending,className:"w-full sm:flex-1",children:a.isPending?s.jsxs(s.Fragment,{children:[s.jsx(on,{className:"h-4 w-4 animate-spin mr-2"}),"Modification..."]}):"Enregistrer"}),s.jsx($,{type:"button",variant:"outline",onClick:()=>P(!1),disabled:a.isPending,className:"w-full sm:flex-1",children:"Annuler"})]})]})})]})}),s.jsx(y2,{open:T,onOpenChange:E,children:s.jsxs(Hy,{children:[s.jsxs(Ky,{children:[s.jsx(Yy,{children:"Confirmer la suppression"}),s.jsxs(Qy,{children:["tes-vous sr de vouloir supprimer le client ",s.jsx("strong",{children:I==null?void 0:I.name})," ? Cette action est irrversible et supprimera dfinitivement toutes les donnes associes  ce client."]})]}),s.jsxs(Gy,{children:[s.jsx(Jy,{children:"Annuler"}),s.jsx(Xy,{onClick:W,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",disabled:i.isPending,children:i.isPending?s.jsxs(s.Fragment,{children:[s.jsx(on,{className:"h-4 w-4 animate-spin mr-2"}),"Suppression..."]}):"Supprimer"})]})]})})]})},bAe=()=>s.jsx(wAe,{});function jAe({open:e,onOpenChange:t,pet:n,onEdit:r,onShowDossier:a,onDelete:i}){const{updatePet:o}=Fa(),[l,c]=b.useState(null);b.useEffect(()=>{e&&c((n==null?void 0:n.photo)||null)},[e,n]);const u=b.useRef(null),d=h=>{var f;const m=(f=h.target.files)==null?void 0:f[0];if(m){const x=new FileReader;x.onload=g=>{var v;const p=(v=g.target)==null?void 0:v.result;c(p),o(n.id,{photo:p})},x.readAsDataURL(m)}};return n?s.jsx(tt,{open:e,onOpenChange:t,children:s.jsxs(et,{className:"sm:max-w-[700px] max-h-[80vh] overflow-y-auto",children:[s.jsx(nt,{children:s.jsx(rt,{children:"Profil Animal"})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-start gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx(er,{className:"h-24 w-24",children:l?s.jsx(Ru,{src:l,alt:n.name,className:"h-full w-full object-cover rounded-full"}):s.jsx(tr,{className:"bg-primary-glow text-primary-foreground",children:s.jsx(gt,{className:"h-12 w-12"})})}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs($,{size:"sm",variant:"outline",className:"gap-2 w-full flex items-center justify-center",onClick:()=>{var h;return(h=u.current)==null?void 0:h.click()},children:[s.jsx(Tg,{className:"h-4 w-4"}),l?"Changer photo":"Ajouter photo"]}),l&&s.jsx($,{size:"sm",variant:"destructive",className:"gap-2 w-full",onClick:()=>{c(null),o(n.id,{photo:void 0})},children:"Supprimer photo"}),s.jsx("input",{ref:u,type:"file",accept:"image/*",onChange:d,className:"hidden"})]})]}),s.jsxs("div",{className:"flex-1 space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("h2",{className:"text-2xl font-semibold",children:n.name}),s.jsx(Ie,{variant:"outline",className:n.status==="healthy"?"bg-secondary text-secondary-foreground":n.status==="treatment"?"bg-accent text-accent-foreground":"bg-destructive text-destructive-foreground",children:n.status==="healthy"?"En bonne sant":n.status==="treatment"?"En traitement":"Urgent"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Type:"}),s.jsx("p",{className:"text-muted-foreground",children:n.type})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Race:"}),s.jsx("p",{className:"text-muted-foreground",children:n.breed||"Non spcifie"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"ge:"}),s.jsx("p",{className:"text-muted-foreground",children:n.birthDate?s.jsxs(s.Fragment,{children:[vf(n.birthDate),s.jsx("br",{}),s.jsxs("span",{className:"text-xs",children:["N(e) le ",Al(n.birthDate)]})]}):"Non spcifi"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Poids:"}),s.jsx("p",{className:"text-muted-foreground",children:n.weight||"Non spcifi"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Couleur:"}),s.jsx("p",{className:"text-muted-foreground",children:n.color||"Non spcifie"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Kn,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Propritaire:"}),s.jsx("p",{className:"text-muted-foreground",children:n.owner})]})]}),n.microchip&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Puce lectronique:"}),s.jsx("p",{className:"text-muted-foreground font-mono",children:n.microchip})]})]}),s.jsxs("div",{className:"space-y-4",children:[n.lastVisit&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ze,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Dernire visite:"}),s.jsx("p",{className:"text-muted-foreground",children:new Date(n.lastVisit).toLocaleDateString("fr-FR")})]})]}),n.nextAppointment&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ze,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Prochain RDV:"}),s.jsx("p",{className:"text-muted-foreground",children:new Date(n.nextAppointment).toLocaleDateString("fr-FR")})]})]})]})]}),n.vaccinations&&n.vaccinations.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"font-semibold",children:"Vaccinations"}),s.jsx("div",{className:"flex gap-2 flex-wrap",children:n.vaccinations.map((h,m)=>s.jsx(Ie,{variant:"outline",children:h},m))})]}),n.medicalNotes&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"font-semibold",children:"Notes mdicales"}),s.jsx("p",{className:"text-muted-foreground p-3 bg-muted/30 rounded-lg",children:n.medicalNotes})]}),s.jsxs("div",{className:"flex justify-between gap-2 pt-4 border-t",children:[s.jsxs($,{variant:"outline",onClick:a,className:"gap-2",children:[s.jsx(ts,{className:"h-4 w-4"}),"Voir Dossier Mdical"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx($,{variant:"outline",onClick:()=>t(!1),children:"Fermer"}),i&&s.jsxs($,{variant:"outline",onClick:()=>{t(!1),i()},className:"text-destructive hover:text-destructive-foreground hover:bg-destructive",children:[s.jsx(Wt,{className:"h-4 w-4 mr-2"}),"Supprimer"]}),s.jsxs($,{onClick:r,className:"gap-2",children:[s.jsx(It,{className:"h-4 w-4"}),"Modifier"]})]})]})]})]})}):null}function NAe({open:e,onOpenChange:t,pet:n}){const[r,a]=b.useState("overview");if(!n)return null;const i=n.birthDate?vf(n.birthDate):"Non renseign",o=n.weight?`${n.weight} kg`:"Non renseign";return s.jsx(tt,{open:e,onOpenChange:t,children:s.jsxs(et,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsx(nt,{children:s.jsxs(rt,{className:"flex items-center gap-2",children:[s.jsx(ts,{className:"h-5 w-5"}),"Dossier Mdical - ",n.name," (Propritaire: ",n.owner,")"]})}),s.jsxs($a,{value:r,onValueChange:a,className:"w-full",children:[s.jsxs(Zs,{className:"grid w-full grid-cols-6",children:[s.jsxs(yt,{value:"overview",className:"flex items-center gap-1",children:[s.jsx(Oa,{className:"h-4 w-4"}),"Vue d'ensemble"]}),s.jsxs(yt,{value:"historique",className:"flex items-center gap-1",children:[s.jsx(Ze,{className:"h-4 w-4"}),"Historique"]}),s.jsxs(yt,{value:"prescriptions",className:"flex items-center gap-1",children:[s.jsx(ts,{className:"h-4 w-4"}),"Prescriptions"]}),s.jsxs(yt,{value:"vaccinations",className:"flex items-center gap-1",children:[s.jsx(xo,{className:"h-4 w-4"}),"Vaccinations"]}),s.jsxs(yt,{value:"antiparasites",className:"flex items-center gap-1",children:[s.jsx(ps,{className:"h-4 w-4"}),"Antiparasites"]}),s.jsxs(yt,{value:"pedigree",className:"flex items-center gap-1",children:[s.jsx(UC,{className:"h-4 w-4"}),"Pedigree"]})]}),s.jsxs(wt,{value:"overview",className:"space-y-6",children:[s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsx(ye,{children:"Informations gnrales"})}),s.jsx(oe,{children:s.jsxs("div",{className:"flex items-start gap-6",children:[s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx(er,{className:"h-32 w-32",children:n.photo?s.jsx(Ru,{src:n.photo,alt:n.name}):s.jsx(tr,{className:"bg-primary-glow text-primary-foreground",children:s.jsx(gt,{className:"h-16 w-16"})})}),s.jsxs($,{variant:"outline",size:"sm",className:"gap-2",children:[s.jsx(Tg,{className:"h-4 w-4"}),"Ajouter photo"]})]}),s.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg",children:n.name}),s.jsxs("div",{className:"space-y-2 mt-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Type:"})," ",n.type]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Race:"})," ",n.breed||"Non renseigne"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Sexe:"})," ",n.gender==="male"?"Mle":n.gender==="female"?"Femelle":"Inconnu"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"ge:"})," ",i]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Date de naissance:"})," ",n.birthDate||"Non renseigne"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Couleur:"})," ",n.color||"Non renseigne"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Poids actuel:"})," ",o]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"N puce:"})," ",n.microchip||"Non renseign"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Statut de sant:"}),s.jsx(Ie,{variant:n.status==="healthy"?"default":n.status==="treatment"?"secondary":"destructive",children:n.status==="healthy"?"En bonne sant":n.status==="treatment"?"En traitement":"Urgent"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Kn,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:"Propritaire:"})," ",n.owner]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Dernire visite:"})," ",n.lastVisit||"Aucune"]})]})]})]})})]}),s.jsxs(ie,{children:[s.jsxs(xe,{className:"flex flex-row items-center justify-between",children:[s.jsx(ye,{children:"Galerie photos"}),s.jsxs($,{size:"sm",className:"gap-2",children:[s.jsx(Ye,{className:"h-4 w-4"}),"Ajouter une photo"]})]}),s.jsx(oe,{children:s.jsxs("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-8 text-center",children:[s.jsx(Tg,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucune photo disponible"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Ajoutez des photos de l'animal pour enrichir son dossier"})]})})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsx(ie,{children:s.jsx(oe,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(LI,{className:"h-5 w-5 text-blue-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Poids actuel"}),s.jsx("p",{className:"text-lg font-bold",children:o}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"-28.2kg"})]})]})})}),s.jsx(ie,{children:s.jsx(oe,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(cS,{className:"h-5 w-5 text-red-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Temprature"}),s.jsx("p",{className:"text-lg font-bold",children:"38.5C"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Moy: 38.5C"})]})]})})}),s.jsx(ie,{children:s.jsx(oe,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Wn,{className:"h-5 w-5 text-green-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Consultations"}),s.jsx("p",{className:"text-lg font-bold",children:"1"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Dernire: 15/01/2024"})]})]})})}),s.jsx(ie,{children:s.jsx(oe,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ps,{className:"h-5 w-5 text-yellow-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Alertes"}),s.jsx("p",{className:"text-lg font-bold",children:"1"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:" traiter"})]})]})})})]}),s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsxs(ye,{className:"flex items-center gap-2",children:[s.jsx(Ze,{className:"h-5 w-5"}),"Prochain suivi recommand"]})}),s.jsx(oe,{children:s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/20 p-4 rounded-lg",children:[s.jsx("p",{className:"font-medium",children:"Contrle dans 3 an"}),s.jsxs($,{size:"sm",className:"mt-2 gap-2",children:[s.jsx(Ye,{className:"h-4 w-4"}),"Planifier"]})]})})]}),s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsx(ye,{className:"text-red-600",children:"Alertes importantes"})}),s.jsxs(oe,{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-red-50 dark:bg-red-950/20 rounded-lg",children:[s.jsx(ps,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:"Contrle de routine recommand"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Dernire consultation il y a 20 mois"})]}),s.jsx($,{size:"sm",variant:"outline",children:"Planifier consultation"})]}),s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-red-50 dark:bg-red-950/20 rounded-lg",children:[s.jsx(ps,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:"Vaccination en retard"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"DHPP - 247 jour(s) de retard"})]}),s.jsx($,{size:"sm",variant:"outline",children:"Planifier vaccination"})]}),s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-red-50 dark:bg-red-950/20 rounded-lg",children:[s.jsx(ps,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:"Vaccination en retard"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Lyme - 512 jour(s) de retard"})]}),s.jsx($,{size:"sm",variant:"outline",children:"Planifier vaccination"})]})]})]})]}),s.jsx(wt,{value:"historique",className:"space-y-4",children:s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsx(ye,{children:"Historique mdical"})}),s.jsx(oe,{children:s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Ze,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Pas assez de donnes pour afficher les tendances"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Ajoutez plus de consultations avec poids et temprature"})]})})]})}),s.jsx(wt,{value:"prescriptions",className:"space-y-4",children:s.jsxs(ie,{children:[s.jsxs(xe,{className:"flex flex-row items-center justify-between",children:[s.jsx(ye,{children:"Prescriptions"}),s.jsxs($,{size:"sm",className:"gap-2",children:[s.jsx(Ye,{className:"h-4 w-4"}),"Nouvelle prescription"]})]}),s.jsx(oe,{children:s.jsxs("div",{className:"text-center py-8",children:[s.jsx(ts,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucune prescription disponible"})]})})]})}),s.jsx(wt,{value:"vaccinations",className:"space-y-4",children:s.jsxs(ie,{children:[s.jsxs(xe,{className:"flex flex-row items-center justify-between",children:[s.jsx(ye,{children:"Vaccinations"}),s.jsxs($,{size:"sm",className:"gap-2",children:[s.jsx(Ye,{className:"h-4 w-4"}),"Nouvelle vaccination"]})]}),s.jsx(oe,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm font-medium",children:[s.jsx("div",{children:"Rage"}),s.jsx("div",{children:"DHPP"}),s.jsx("div",{children:"Lyme"})]}),s.jsxs("div",{className:"text-center py-8",children:[s.jsx(xo,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucune vaccination enregistre"})]})]})})]})}),s.jsx(wt,{value:"antiparasites",className:"space-y-4",children:s.jsxs(ie,{children:[s.jsxs(xe,{className:"flex flex-row items-center justify-between",children:[s.jsx(ye,{children:"Antiparasitaires"}),s.jsxs($,{size:"sm",className:"gap-2",children:[s.jsx(Ye,{className:"h-4 w-4"}),"Nouveau traitement"]})]}),s.jsx(oe,{children:s.jsxs("div",{className:"text-center py-8",children:[s.jsx(ps,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucun traitement antiparasitaire enregistr"})]})})]})}),s.jsx(wt,{value:"pedigree",className:"space-y-4",children:s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsx(ye,{children:"Informations de pedigree"})}),s.jsx(oe,{children:s.jsxs("div",{className:"text-center py-8",children:[s.jsx(UC,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucune information de pedigree disponible"})]})})]})})]}),s.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[s.jsx("div",{className:"flex gap-2",children:s.jsxs($,{variant:"outline",size:"sm",children:[s.jsx(ts,{className:"h-4 w-4 mr-2"}),"Voir Dossier Mdical"]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx($,{variant:"outline",onClick:()=>t(!1),children:"Fermer"}),s.jsxs($,{children:[s.jsx(It,{className:"h-4 w-4 mr-2"}),"Modifier"]})]})]}),s.jsxs("div",{className:"mt-4 p-4 bg-muted/50 rounded-lg",children:[s.jsx("p",{className:"text-sm font-medium",children:"Animal modifi"}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Les informations de ",n.name," ont t mises  jour."]})]})]})})}function SAe({pet:e,consultations:t}){var S,j,N;const n=[...t].sort((C,_)=>new Date(_.date).getTime()-new Date(C.date).getTime()),r=n.filter(C=>C.weight).map(C=>({date:C.date,weight:parseFloat(C.weight)})),a=n.filter(C=>C.temperature).map(C=>({date:C.date,temperature:parseFloat(C.temperature)})),i=((S=r[0])==null?void 0:S.weight)||0,o=((j=r[1])==null?void 0:j.weight)||0,l=i-o,c=l>0?"up":l<0?"down":"stable",u=((N=a[0])==null?void 0:N.temperature)||0,d=a.length>0?a.reduce((C,_)=>C+_.temperature,0)/a.length:0,h=a.length>0?Math.min(...a.map(C=>C.temperature)):0,m=a.length>0?Math.max(...a.map(C=>C.temperature)):0,f=t.length,x=new Date().getMonth(),g=new Date().getFullYear(),p=t.filter(C=>{const _=new Date(C.date);return _.getMonth()===x&&_.getFullYear()===g}).length,v=n[0],y=v?Math.floor((new Date().getTime()-new Date(v.date).getTime())/(1e3*60*60*24)):null,w=[];return u>39.5?w.push({type:"danger",message:"Temprature leve",icon:pn}):u<37.5&&w.push({type:"warning",message:"Temprature basse",icon:pn}),l<-2&&w.push({type:"warning",message:"Perte de poids",icon:gf}),y&&y>180&&w.push({type:"info",message:"Contrle recommand",icon:Ze}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Statistiques mdicales"}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[s.jsxs(ie,{children:[s.jsx(xe,{className:"pb-2",children:s.jsxs(ye,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(LI,{className:"h-4 w-4"}),"Poids actuel"]})}),s.jsxs(oe,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[i,"kg"]}),l!==0&&s.jsxs("div",{className:"flex items-center gap-1 text-sm mt-1",children:[c==="up"?s.jsx(Rn,{className:"h-3 w-3 text-green-600"}):c==="down"?s.jsx(gf,{className:"h-3 w-3 text-red-600"}):s.jsx(IU,{className:"h-3 w-3 text-gray-600"}),s.jsxs("span",{className:c==="up"?"text-green-600":c==="down"?"text-red-600":"text-gray-600",children:[Math.abs(l),"kg"]})]})]})]}),s.jsxs(ie,{children:[s.jsx(xe,{className:"pb-2",children:s.jsxs(ye,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(cS,{className:"h-4 w-4"}),"Temprature"]})}),s.jsxs(oe,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[u,"C"]}),s.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Moy: ",d.toFixed(1),"C"]}),a.length>1&&s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Min: ",h,"C | Max: ",m,"C"]})]})]}),s.jsxs(ie,{children:[s.jsx(xe,{className:"pb-2",children:s.jsxs(ye,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(Oa,{className:"h-4 w-4"}),"Consultations"]})}),s.jsxs(oe,{children:[s.jsx("div",{className:"text-2xl font-bold",children:f}),s.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Ce mois: ",p]}),v&&s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Dernire: ",new Date(v.date).toLocaleDateString("fr-FR")]})]})]}),s.jsxs(ie,{children:[s.jsx(xe,{className:"pb-2",children:s.jsxs(ye,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(pn,{className:"h-4 w-4"}),"Alertes"]})}),s.jsxs(oe,{children:[s.jsx("div",{className:"text-2xl font-bold",children:w.length}),s.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:w.length>0?" traiter":"Aucune"}),w.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:w.slice(0,2).map((C,_)=>s.jsx(Ie,{variant:"outline",className:"text-xs",children:C.message},_))})]})]})]}),w.length>0&&s.jsxs(ie,{className:"border-destructive/20",children:[s.jsx(xe,{children:s.jsx(ye,{className:"text-destructive text-base",children:"Alertes mdicales"})}),s.jsx(oe,{children:s.jsx("div",{className:"space-y-2",children:w.map((C,_)=>s.jsxs("div",{className:"flex items-center gap-3 p-2 bg-destructive/5 rounded",children:[s.jsx(C.icon,{className:`h-4 w-4 ${C.type==="danger"?"text-destructive":C.type==="warning"?"text-yellow-600":"text-blue-600"}`}),s.jsx("span",{className:"text-sm font-medium",children:C.message})]},_))})})]}),r.length>1||a.length>1?s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsx(ye,{className:"text-base",children:"Tendances"})}),s.jsx(oe,{children:s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.length>1&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-2",children:"volution du poids"}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Poids initial:"}),s.jsxs("span",{children:[r[r.length-1].weight,"kg"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Poids actuel:"}),s.jsxs("span",{children:[r[0].weight,"kg"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"volution totale:"}),s.jsxs("span",{className:r[0].weight>r[r.length-1].weight?"text-green-600":"text-red-600",children:[r[0].weight-r[r.length-1].weight,"kg"]})]})]})]}),a.length>1&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-2",children:"volution de la temprature"}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Temprature moyenne:"}),s.jsxs("span",{children:[d.toFixed(1),"C"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Variation:"}),s.jsxs("span",{children:[m-h,"C"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Stabilit:"}),s.jsx("span",{className:m-h<1?"text-green-600":"text-yellow-600",children:m-h<1?"Stable":"Variable"})]})]})]})]})})]}):s.jsx(ie,{children:s.jsxs(oe,{className:"p-6 text-center text-muted-foreground",children:[s.jsx(Oa,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground/50"}),s.jsx("p",{children:"Pas assez de donnes pour afficher les tendances"}),s.jsx("p",{className:"text-sm",children:"Ajoutez plus de consultations avec poids et temprature"})]})})]})}const vO={healthy:"bg-secondary text-secondary-foreground",treatment:"bg-accent text-accent-foreground",urgent:"bg-destructive text-destructive-foreground"},_Ae=(e,t)=>{const n=t.find(o=>o.id===e.client_id),r=n?`${n.first_name} ${n.last_name}`:"Propritaire inconnu",a=Math.abs(e.id.split("").reduce((o,l)=>(o=(o<<5)-o+l.charCodeAt(0),o&o),0)),i=Math.abs(e.client_id.split("").reduce((o,l)=>(o=(o<<5)-o+l.charCodeAt(0),o&o),0));return{id:a,name:e.name,type:e.species,breed:e.breed||"",gender:e.sex==="Mle"?"male":e.sex==="Femelle"?"female":void 0,birthDate:e.birth_date||"",weight:e.weight?e.weight.toString():"",color:e.color||"",microchip:e.microchip_number||"",medicalNotes:e.notes||"",photo:e.photo_url||"",ownerId:i,owner:r,status:e.status==="vivant"?"healthy":e.status==="dcd"?"urgent":"treatment",lastVisit:e.updated_at?new Date(e.updated_at).toLocaleDateString("fr-FR"):"Jamais",nextAppointment:void 0,vaccinations:[],dbId:e.id,dbClientId:e.client_id}},CAe=()=>{var en;const{data:e=[],isLoading:t}=fn(),{data:n=[],isLoading:r}=vn(),{data:a}=Yee(),i=Mee(),o=Iee(),{data:l}=km(),{data:c=En.animal_colors}=aL(),u=(l==null?void 0:l.animal_categories)||["Chien","Chat","Bovin","Ovin","Caprin"],d=(l==null?void 0:l.breeds_by_category)||{},h=e.map(ae=>_Ae(ae,n)),{data:m=[]}=Ps(),{data:f=[]}=nc(),x=b.useCallback(ae=>{var he;const B=typeof ae=="string"?ae:(he=h.find(Oe=>Oe.id===ae))==null?void 0:he.dbId;return B?m.filter(Oe=>Oe.animal_id===B):[]},[h,m]),g=b.useCallback(ae=>{var he;const B=typeof ae=="string"?ae:(he=h.find(Oe=>Oe.id===ae))==null?void 0:he.dbId;return B?f.filter(Oe=>Oe.animal_id===B):[]},[h,f]),p=b.useCallback(ae=>{var B,he,Oe,St,Qe,de;return{id:Math.abs(ae.id.split("").reduce((Fe,Fn)=>(Fe=(Fe<<5)-Fe+Fn.charCodeAt(0),Fe&Fe),0)),clientId:Math.abs(ae.client_id.split("").reduce((Fe,Fn)=>(Fe=(Fe<<5)-Fe+Fn.charCodeAt(0),Fe&Fe),0)),clientName:(B=ae.client)!=null&&B.first_name&&((he=ae.client)!=null&&he.last_name)?`${ae.client.first_name} ${ae.client.last_name}`:"Client inconnu",petId:Math.abs(ae.animal_id.split("").reduce((Fe,Fn)=>(Fe=(Fe<<5)-Fe+Fn.charCodeAt(0),Fe&Fe),0)),petName:((Oe=ae.animal)==null?void 0:Oe.name)||"Animal inconnu",date:ae.consultation_date||ae.created_at,weight:(St=ae.weight)==null?void 0:St.toString(),temperature:(Qe=ae.temperature)==null?void 0:Qe.toString(),symptoms:ae.symptoms,diagnosis:ae.diagnosis,treatment:ae.treatment,medications:ae.medications,followUp:ae.follow_up,cost:(de=ae.cost)==null?void 0:de.toString(),notes:ae.notes,photos:ae.photos||[],createdAt:ae.created_at,purpose:ae.consultation_type||"consultation",veterinarian:ae.veterinarian_name||"Vtrinaire"}},[]),{currentView:v}=Hd("pets"),[y,w]=b.useState(""),[S,j]=b.useState("all"),[N,C]=b.useState("all"),[_,A]=b.useState(v);Zt();const P=u,[T,E]=b.useState(!1),[I,R]=b.useState(!1),[z,U]=b.useState(null),[K,k]=b.useState(!1),[D,J]=b.useState(!1),[W,Y]=b.useState(!1),[V,O]=b.useState(!1),[le,te]=b.useState(null),{toast:ce}=it(),[ge,H]=b.useState({client_id:"",name:"",species:"Chien",breed:"",color:"",sex:"Inconnu",weight:void 0,height:void 0,birth_date:"",microchip_number:"",tattoo_number:"",sterilized:!1,sterilization_date:"",notes:"",photo_url:"",status:"vivant"}),G=h.filter(ae=>{const B=ae.name.toLowerCase().includes(y.toLowerCase())||ae.breed&&ae.breed.toLowerCase().includes(y.toLowerCase())||ae.owner.toLowerCase().includes(y.toLowerCase()),he=S==="all"||ae.type.toLowerCase()===S.toLowerCase(),Oe=N==="all"||ae.status===N;return B&&he&&Oe}),ue=ae=>{U(ae),k(!0)},re=ae=>{U(ae),H({client_id:ae.dbClientId,name:ae.name,species:ae.type,breed:ae.breed||"",color:ae.color||"",sex:ae.gender==="male"?"Mle":ae.gender==="female"?"Femelle":"Inconnu",weight:ae.weight?parseFloat(ae.weight):void 0,height:void 0,birth_date:ae.birthDate||"",microchip_number:ae.microchip||"",tattoo_number:"",sterilized:!1,sterilization_date:"",notes:ae.medicalNotes||"",photo_url:ae.photo||"",status:ae.status==="healthy"?"vivant":ae.status==="urgent"?"dcd":"perdu"}),J(!0)},ve=()=>{z&&H({client_id:z.dbClientId,name:z.name,species:z.type,breed:z.breed||"",color:z.color||"",sex:z.gender==="male"?"Mle":z.gender==="female"?"Femelle":"Inconnu",weight:z.weight?parseFloat(z.weight):void 0,height:void 0,birth_date:z.birthDate||"",microchip_number:z.microchip||"",tattoo_number:"",sterilized:!1,sterilization_date:"",notes:z.medicalNotes||"",photo_url:z.photo||"",status:z.status==="healthy"?"vivant":z.status==="urgent"?"dcd":"perdu"}),k(!1),J(!0)},pe=ae=>{te(ae),O(!0)},ee=async()=>{if(le)try{await o.mutateAsync(le.dbId),ce({title:"Suppression russie",description:`${le.name} a t supprim avec succs de la base de donnes`}),O(!1),te(null)}catch(ae){console.error("Error deleting animal:",ae);let B="Erreur lors de la suppression de l'animal";if(ae instanceof Error){const he=ae.message.toLowerCase();he.includes("foreign key")||he.includes("constraint")?B="Impossible de supprimer cet animal car il a des donnes associes (consultations, vaccinations, etc.). Supprimez d'abord ces donnes.":he.includes("permission")||he.includes("access")?B="Vous n'avez pas les permissions ncessaires pour supprimer cet animal.":he.includes("network")||he.includes("connection")?B="Problme de connexion. Vrifiez votre connexion internet.":he.includes("authentication")?B="Votre session a expir. Veuillez vous reconnecter.":B=ae.message}ce({title:"Erreur de suppression",description:B,variant:"destructive"})}},Pe=ae=>{U(ae),Y(!0)},Ee=()=>{k(!1),Y(!0)},dt=async()=>{var ae;if(z){if(!((ae=ge.name)!=null&&ae.trim())){ce({title:"Erreur de validation",description:"Le nom de l'animal est obligatoire.",variant:"destructive"});return}if(!ge.client_id){ce({title:"Erreur de validation",description:"Le propritaire est obligatoire.",variant:"destructive"});return}if(ge.microchip_number&&ge.microchip_number.trim()&&e.find(he=>he.microchip_number===ge.microchip_number.trim()&&he.id!==z.dbId)){ce({title:"Erreur de validation",description:"Un animal avec ce numro de puce existe dj.",variant:"destructive"});return}try{await i.mutateAsync({id:z.dbId,data:ge}),ce({title:"Modification russie",description:`${ge.name} a t modifi avec succs.`}),J(!1)}catch(B){console.error("Error updating animal:",B);let he="Une erreur inattendue s'est produite";if(B instanceof Error){const Oe=B.message.toLowerCase();Oe.includes("microchip")||Oe.includes("unique")?he="Ce numro de puce lectronique est dj utilis par un autre animal":Oe.includes("client")||Oe.includes("foreign key")?he="Le propritaire slectionn n'est plus valide":Oe.includes("name")||Oe.includes("not null")?he="Tous les champs obligatoires doivent tre remplis":Oe.includes("authentication")||Oe.includes("not authenticated")?he="Votre session a expir. Veuillez vous reconnecter.":Oe.includes("network")||Oe.includes("connection")?he="Problme de connexion. Vrifiez votre connexion internet.":Oe.includes("permission")||Oe.includes("access")?he="Vous n'avez pas les permissions ncessaires.":he=B.message}ce({title:"Erreur lors de la modification",description:he,variant:"destructive"})}}},Dt=b.useMemo(()=>z?x(z.id).map(p):[],[z,x,p]);return s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8 sm:px-6",children:[s.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold sm:text-3xl",children:"Gestion des Animaux"}),s.jsx("p",{className:"text-muted-foreground mt-2 text-sm sm:text-base",children:"Suivez tous les animaux et leurs informations mdicales"})]}),s.jsxs("div",{className:"flex gap-2 flex-wrap",children:[s.jsxs($,{size:"sm",variant:_==="cards"?"default":"outline",onClick:()=>A("cards"),className:"gap-2 flex-1 sm:flex-none",children:[s.jsx(_o,{className:"h-4 w-4"}),"Cartes"]}),s.jsxs($,{size:"sm",variant:_==="table"?"default":"outline",onClick:()=>A("table"),className:"gap-2 flex-1 sm:flex-none",children:[s.jsx(vi,{className:"h-4 w-4"}),"Tableau"]}),s.jsxs($,{className:"gap-2 medical-glow flex-1 sm:flex-none",onClick:()=>E(!0),children:[s.jsx(Ye,{className:"h-4 w-4"}),"Nouvel Animal"]})]})]}),s.jsxs("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4",children:[s.jsx(ie,{children:s.jsx(oe,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(gt,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total animaux"}),s.jsx("p",{className:"text-2xl font-bold",children:(a==null?void 0:a.totalAnimals)||h.length})]})]})})}),s.jsx(ie,{children:s.jsx(oe,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(On,{className:"h-5 w-5 text-green-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"En bonne sant"}),s.jsx("p",{className:"text-2xl font-bold",children:((en=a==null?void 0:a.animalsByStatus)==null?void 0:en.vivant)||h.filter(ae=>ae.status==="healthy").length})]})]})})}),s.jsx(ie,{children:s.jsx(oe,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pn,{className:"h-5 w-5 text-yellow-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"En traitement"}),s.jsx("p",{className:"text-2xl font-bold",children:h.filter(ae=>ae.status==="treatment").length})]})]})})}),s.jsx(ie,{children:s.jsx(oe,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Kn,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Clients actifs"}),s.jsx("p",{className:"text-2xl font-bold",children:(a==null?void 0:a.totalClients)||n.length})]})]})})})]}),s.jsx(ie,{className:"border-dashed",children:s.jsx(oe,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(lS,{className:"h-5 w-5 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:"Configuration dynamique active"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Les types d'animaux sont configurables dans les paramtres"})]})]}),s.jsxs("div",{className:"flex gap-4 text-xs text-muted-foreground",children:[s.jsxs("span",{children:[u.length," espces"]}),s.jsxs("span",{children:[Object.keys(d).length," groupes de races"]}),s.jsxs("span",{children:[c.length," couleurs"]})]})]})})}),s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsxs(ye,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[s.jsx(Si,{className:"h-5 w-5"}),"Rechercher et filtrer"]})}),s.jsxs(oe,{className:"space-y-4",children:[s.jsx(se,{placeholder:"Rechercher par nom, race ou propritaire...",value:y,onChange:ae=>w(ae.target.value),className:"w-full max-w-md"}),s.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:gap-4",children:[s.jsxs(_e,{value:S,onValueChange:j,children:[s.jsx(Ne,{className:"w-full sm:w-40",children:s.jsx(Ce,{placeholder:"Tous types"})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"all",children:"Tous types"}),P.map((ae,B)=>s.jsx(Q,{value:ae.toLowerCase(),children:ae},B))]})]}),s.jsxs(_e,{value:N,onValueChange:C,children:[s.jsx(Ne,{className:"w-full sm:w-40",children:s.jsx(Ce,{placeholder:"Statut"})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"all",children:"Tous statuts"}),s.jsx(Q,{value:"healthy",children:"En bonne sant"}),s.jsx(Q,{value:"treatment",children:"En traitement"}),s.jsx(Q,{value:"urgent",children:"Urgent"})]})]})]})]})]}),_==="cards"?s.jsx("div",{className:"grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:G.map(ae=>s.jsx(ie,{className:"card-hover",children:s.jsx(oe,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(er,{className:"h-12 w-12 sm:h-16 sm:w-16",children:ae.photo?s.jsx(Ru,{src:ae.photo,alt:ae.name}):s.jsx(tr,{className:"bg-primary-glow text-primary-foreground",children:s.jsx(gt,{className:"h-6 w-6 sm:h-8 sm:w-8"})})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("h3",{className:"text-lg sm:text-xl font-semibold truncate",children:ae.name}),s.jsx("p",{className:"text-muted-foreground text-sm truncate",children:ae.breed}),s.jsx(Ie,{variant:"outline",className:`${vO[ae.status]} text-xs`,children:ae.status==="healthy"?"En bonne sant":ae.status==="treatment"?"En traitement":"Urgent"})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Type:"})," ",ae.type]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"ge:"})," ",ae.birthDate?vf(ae.birthDate):"Non renseign"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Poids:"})," ",ae.weight]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Couleur:"})," ",ae.color]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Kn,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),s.jsxs("span",{className:"truncate",children:["Propritaire: ",typeof ae.owner=="string"?ae.owner:(()=>{const B=n.find(he=>String(he.id)===String(ae.ownerId));return B?`${B.first_name} ${B.last_name}`:"Non spcifi"})()]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Ze,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),s.jsxs("span",{children:["Dernire visite: ",ae.lastVisit?new Date(ae.lastVisit).toLocaleDateString("fr-FR"):"Aucune"]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Wn,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),s.jsxs("span",{children:["Consultations: ",x(ae.id).length]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-sm",children:"Vaccinations:"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:(()=>{const B=g(ae.id);return B.length>0?`${B.length} vaccination${B.length>1?"s":""} enregistre${B.length>1?"s":""}`:"Aucune vaccination enregistre"})()})]}),s.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row",children:[s.jsxs($,{size:"sm",variant:"outline",className:"gap-2 flex-1",onClick:()=>ue(ae),children:[s.jsx($n,{className:"h-4 w-4"}),"Voir"]}),s.jsxs($,{size:"sm",variant:"outline",className:"gap-2 flex-1",onClick:()=>re(ae),children:[s.jsx(It,{className:"h-4 w-4"}),"Modifier"]}),s.jsxs($,{size:"sm",variant:"outline",className:"gap-2 flex-1 text-destructive hover:text-destructive-foreground hover:bg-destructive",onClick:()=>pe(ae),children:[s.jsx(Wt,{className:"h-4 w-4"}),"Supprimer"]})]}),s.jsx("div",{className:"flex gap-2",children:s.jsxs($,{size:"sm",className:"flex-1",onClick:()=>{U(ae),R(!0)},children:[s.jsx(Wn,{className:"h-4 w-4 mr-2"}),"Consultation"]})})]})})},ae.id))}):s.jsx(ie,{children:s.jsx(oe,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full min-w-[600px]",children:[s.jsx("thead",{className:"border-b",children:s.jsxs("tr",{className:"text-left",children:[s.jsx("th",{className:"p-4 font-medium",children:"Animal"}),s.jsx("th",{className:"p-4 font-medium",children:"Type"}),s.jsx("th",{className:"p-4 font-medium",children:"ge"}),s.jsx("th",{className:"p-4 font-medium",children:"Propritaire"}),s.jsx("th",{className:"p-4 font-medium",children:"Statut"}),s.jsx("th",{className:"p-4 font-medium",children:"Dernire visite"}),s.jsx("th",{className:"p-4 font-medium",children:"Actions"})]})}),s.jsx("tbody",{children:G.map(ae=>s.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(er,{className:"h-10 w-10",children:ae.photo?s.jsx(Ru,{src:ae.photo,alt:ae.name}):s.jsx(tr,{className:"bg-primary-glow text-primary-foreground",children:s.jsx(gt,{className:"h-5 w-5"})})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:ae.name}),s.jsx("div",{className:"text-sm text-muted-foreground",children:ae.breed})]})]})}),s.jsx("td",{className:"p-4",children:ae.type}),s.jsx("td",{className:"p-4",children:ae.birthDate?vf(ae.birthDate):"Non renseign"}),s.jsx("td",{className:"p-4",children:typeof ae.owner=="string"?ae.owner:(()=>{const B=n.find(he=>String(he.id)===String(ae.ownerId));return B?`${B.first_name} ${B.last_name}`:"Non spcifi"})()}),s.jsx("td",{className:"p-4",children:s.jsx(Ie,{variant:"outline",className:vO[ae.status],children:ae.status==="healthy"?"En bonne sant":ae.status==="treatment"?"En traitement":"Urgent"})}),s.jsx("td",{className:"p-4",children:ae.lastVisit?new Date(ae.lastVisit).toLocaleDateString("fr-FR"):"Aucune"}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex gap-1 flex-wrap",children:[s.jsx($,{size:"sm",variant:"outline",onClick:()=>ue(ae),children:s.jsx($n,{className:"h-4 w-4"})}),s.jsx($,{size:"sm",variant:"outline",onClick:()=>re(ae),children:s.jsx(It,{className:"h-4 w-4"})}),s.jsx($,{size:"sm",variant:"outline",className:"text-destructive hover:text-destructive-foreground hover:bg-destructive",onClick:()=>pe(ae),children:s.jsx(Wt,{className:"h-4 w-4"})}),s.jsx($,{size:"sm",variant:"outline",onClick:()=>Pe(ae),children:"Dossier"})]})})]},ae.id))})]})})})}),z&&s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsxs(ye,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[s.jsx(Oa,{className:"h-5 w-5"}),"Statistiques mdicales - ",z.name]})}),s.jsx(oe,{children:s.jsx(SAe,{pet:z,consultations:Dt})})]}),s.jsx(Xx,{open:T,onOpenChange:E}),s.jsx(Jx,{open:I,onOpenChange:R}),s.jsx(jAe,{open:K,onOpenChange:k,pet:z,onEdit:ve,onShowDossier:Ee,onDelete:z?()=>pe(z):void 0}),s.jsx(tt,{open:D,onOpenChange:J,children:s.jsxs(et,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto mx-4",children:[s.jsxs(nt,{children:[s.jsx(rt,{children:"Modifier Animal"}),s.jsx(At,{children:"Modifiez les informations de l'animal."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"name",children:"Nom *"}),s.jsx(se,{id:"name",value:ge.name,onChange:ae=>H(B=>({...B,name:ae.target.value})),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"species",children:"Espce *"}),s.jsxs(_e,{value:ge.species,onValueChange:ae=>H(B=>({...B,species:ae})),children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Slectionner l'espce"})}),s.jsx(Se,{children:u.map(ae=>s.jsx(Q,{value:ae,children:ae},ae))})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"client_id",children:"Propritaire *"}),s.jsxs(_e,{value:ge.client_id,onValueChange:ae=>H(B=>({...B,client_id:ae})),children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Slectionner le propritaire"})}),s.jsx(Se,{children:n.map(ae=>s.jsxs(Q,{value:ae.id,children:[ae.first_name," ",ae.last_name]},ae.id))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"breed",children:"Race"}),s.jsx(se,{id:"breed",value:ge.breed||"",onChange:ae=>H(B=>({...B,breed:ae.target.value}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"sex",children:"Sexe"}),s.jsxs(_e,{value:ge.sex,onValueChange:ae=>H(B=>({...B,sex:ae})),children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Slectionner le sexe"})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"Mle",children:"Mle"}),s.jsx(Q,{value:"Femelle",children:"Femelle"}),s.jsx(Q,{value:"Inconnu",children:"Inconnu"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"birth_date",children:"Date de naissance"}),s.jsx(se,{id:"birth_date",type:"date",value:ge.birth_date||"",onChange:ae=>H(B=>({...B,birth_date:ae.target.value||void 0}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"weight",children:"Poids (kg)"}),s.jsx(se,{id:"weight",type:"number",step:"0.1",value:ge.weight||"",onChange:ae=>H(B=>({...B,weight:ae.target.value?parseFloat(ae.target.value):void 0}))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"color",children:"Couleur"}),s.jsx(se,{id:"color",value:ge.color||"",onChange:ae=>H(B=>({...B,color:ae.target.value}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"microchip_number",children:"N puce lectronique"}),s.jsx(se,{id:"microchip_number",value:ge.microchip_number||"",onChange:ae=>H(B=>({...B,microchip_number:ae.target.value}))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"notes",children:"Notes mdicales"}),s.jsx(Ke,{id:"notes",value:ge.notes||"",onChange:ae=>H(B=>({...B,notes:ae.target.value})),placeholder:"Notes additionnelles..."})]}),s.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:justify-end pt-4",children:[s.jsx($,{type:"button",variant:"outline",onClick:()=>J(!1),className:"w-full sm:w-auto",children:"Annuler"}),s.jsxs($,{onClick:dt,disabled:i.isPending,className:"w-full sm:w-auto",children:[i.isPending&&s.jsx(on,{className:"mr-2 h-4 w-4 animate-spin"}),"Sauvegarder"]})]})]})]})}),s.jsx(NAe,{open:W,onOpenChange:Y,pet:z}),s.jsx(y2,{open:V,onOpenChange:O,children:s.jsxs(Hy,{children:[s.jsxs(Ky,{children:[s.jsx(Yy,{children:"Confirmer la suppression"}),s.jsxs(Qy,{children:["tes-vous sr de vouloir supprimer l'animal ",s.jsx("strong",{children:le==null?void 0:le.name})," ? Cette action est irrversible et supprimera dfinitivement toutes les donnes associes  cet animal, y compris ses consultations, vaccinations et historique mdical."]})]}),s.jsxs(Gy,{children:[s.jsx(Jy,{children:"Annuler"}),s.jsx(Xy,{onClick:ee,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",disabled:o.isPending,children:o.isPending?s.jsxs(s.Fragment,{children:[s.jsx(on,{className:"h-4 w-4 animate-spin mr-2"}),"Suppression..."]}):"Supprimer"})]})]})})]})},AAe=()=>s.jsx(CAe,{});function PAe({open:e,onOpenChange:t}){const{data:n=[]}=vn(),{data:r=[]}=fn(),a=rL(),{toast:i}=it(),{data:o=[],isLoading:l}=o_(),[c,u]=b.useState({clientId:"",animalId:"",date:"",time:"",appointmentType:"consultation",notes:""}),[d,h]=b.useState([]),m=async g=>{if(g.preventDefault(),!c.clientId||!c.animalId||!c.date||!c.time){i({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires",variant:"destructive"});return}try{const p=new Date(`${c.date}T${c.time}:00`);await a.mutateAsync({client_id:c.clientId,animal_id:c.animalId,appointment_date:p.toISOString(),appointment_type:c.appointmentType,notes:c.notes||void 0,duration_minutes:30}),i({title:"Succs",description:"Rendez-vous cr avec succs"}),u({clientId:"",animalId:"",date:"",time:"",appointmentType:"consultation",notes:""}),h([]),t(!1)}catch(p){console.error("Error creating appointment:",p),i({title:"Erreur",description:"Impossible de crer le rendez-vous",variant:"destructive"})}},f=g=>{u(v=>({...v,clientId:g,animalId:""}));const p=r.filter(v=>v.client_id===g);h(p)},x=g=>`${g.first_name} ${g.last_name}`;return s.jsx(tt,{open:e,onOpenChange:t,children:s.jsxs(et,{className:"max-w-2xl",children:[s.jsxs(nt,{children:[s.jsxs(rt,{className:"flex items-center gap-2",children:[s.jsx(Ze,{className:"h-5 w-5"}),"Nouveau Rendez-vous"]}),s.jsx(At,{children:"Crer un nouveau rendez-vous pour un client et son animal"})]}),s.jsxs("form",{onSubmit:m,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"client",children:"Client *"}),s.jsxs(_e,{value:c.clientId,onValueChange:f,children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Slectionner un client"})}),s.jsx(Se,{children:n.map(g=>s.jsx(Q,{value:g.id,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Kn,{className:"h-4 w-4"}),x(g)]})},g.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"animal",children:"Animal *"}),s.jsxs(_e,{value:c.animalId,onValueChange:g=>u(p=>({...p,animalId:g})),disabled:!c.clientId,children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:c.clientId?"Slectionner un animal":"Slectionner d'abord un client"})}),s.jsx(Se,{children:d.map(g=>s.jsx(Q,{value:g.id,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(gt,{className:"h-4 w-4"}),g.name," (",g.species,")"]})},g.id))})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"date",children:"Date *"}),s.jsx(se,{id:"date",type:"date",value:c.date,onChange:g=>u(p=>({...p,date:g.target.value})),min:new Date().toISOString().split("T")[0]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"time",children:"Heure *"}),s.jsx(se,{id:"time",type:"time",value:c.time,onChange:g=>u(p=>({...p,time:g.target.value}))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"type",children:"Type de rendez-vous"}),s.jsxs(_e,{value:c.appointmentType,onValueChange:g=>u(p=>({...p,appointmentType:g})),children:[s.jsx(Ne,{children:s.jsx(Ce,{})}),s.jsx(Se,{children:o.map(g=>s.jsx(Q,{value:g.toLowerCase().replace(/\s+/g,"-"),children:g},g))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"notes",children:"Notes (optionnel)"}),s.jsx(Ke,{id:"notes",placeholder:"Notes additionnelles sur le rendez-vous...",value:c.notes,onChange:g=>u(p=>({...p,notes:g.target.value})),rows:3})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx($,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsx($,{type:"submit",disabled:a.isPending,children:a.isPending?"Cration...":"Crer le rendez-vous"})]})]})]})})}function fr(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Po(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function w2(e,t){const n=fr(e);return isNaN(t)?Po(e,NaN):(t&&n.setDate(n.getDate()+t),n)}const I8=6048e5,EAe=864e5;let kAe={};function Zy(){return kAe}function lm(e,t){var l,c,u,d;const n=Zy(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=fr(e),i=a.getDay(),o=(i<r?7:0)+i-r;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function Qv(e){return lm(e,{weekStartsOn:1})}function $8(e){const t=fr(e),n=t.getFullYear(),r=Po(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const a=Qv(r),i=Po(e,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const o=Qv(i);return t.getTime()>=a.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function Xv(e){const t=fr(e);return t.setHours(0,0,0,0),t}function xO(e){const t=fr(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function TAe(e,t){const n=Xv(e),r=Xv(t),a=+n-xO(n),i=+r-xO(r);return Math.round((a-i)/EAe)}function OAe(e){const t=$8(e),n=Po(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Qv(n)}function DAe(e,t){const n=Xv(e),r=Xv(t);return+n==+r}function MAe(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function IAe(e){if(!MAe(e)&&typeof e!="number")return!1;const t=fr(e);return!isNaN(Number(t))}function $Ae(e){const t=fr(e),n=Po(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}const RAe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},LAe=(e,t,n)=>{let r;const a=RAe[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function fu(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const FAe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},zAe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},BAe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},qAe={date:fu({formats:FAe,defaultWidth:"full"}),time:fu({formats:zAe,defaultWidth:"full"}),dateTime:fu({formats:BAe,defaultWidth:"full"})},VAe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},UAe=(e,t,n,r)=>VAe[e];function xa(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const WAe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},HAe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},KAe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},GAe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},YAe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},QAe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},XAe=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},JAe={ordinalNumber:XAe,era:xa({values:WAe,defaultWidth:"wide"}),quarter:xa({values:HAe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:xa({values:KAe,defaultWidth:"wide"}),day:xa({values:GAe,defaultWidth:"wide"}),dayPeriod:xa({values:YAe,defaultWidth:"wide",formattingValues:QAe,defaultFormattingWidth:"wide"})};function ya(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?ePe(l,h=>h.test(o)):ZAe(l,h=>h.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=t.slice(o.length);return{value:u,rest:d}}}function ZAe(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function ePe(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function R8(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const a=r[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const tPe=/^(\d+)(th|st|nd|rd)?/i,nPe=/\d+/i,rPe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},sPe={any:[/^b/i,/^(a|c)/i]},aPe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},iPe={any:[/1/i,/2/i,/3/i,/4/i]},oPe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},lPe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},cPe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},uPe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},dPe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},hPe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},fPe={ordinalNumber:R8({matchPattern:tPe,parsePattern:nPe,valueCallback:e=>parseInt(e,10)}),era:ya({matchPatterns:rPe,defaultMatchWidth:"wide",parsePatterns:sPe,defaultParseWidth:"any"}),quarter:ya({matchPatterns:aPe,defaultMatchWidth:"wide",parsePatterns:iPe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ya({matchPatterns:oPe,defaultMatchWidth:"wide",parsePatterns:lPe,defaultParseWidth:"any"}),day:ya({matchPatterns:cPe,defaultMatchWidth:"wide",parsePatterns:uPe,defaultParseWidth:"any"}),dayPeriod:ya({matchPatterns:dPe,defaultMatchWidth:"any",parsePatterns:hPe,defaultParseWidth:"any"})},mPe={code:"en-US",formatDistance:LAe,formatLong:qAe,formatRelative:UAe,localize:JAe,match:fPe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function pPe(e){const t=fr(e);return TAe(t,$Ae(t))+1}function gPe(e){const t=fr(e),n=+Qv(t)-+OAe(t);return Math.round(n/I8)+1}function L8(e,t){var d,h,m,f;const n=fr(e),r=n.getFullYear(),a=Zy(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??a.firstWeekContainsDate??((f=(m=a.locale)==null?void 0:m.options)==null?void 0:f.firstWeekContainsDate)??1,o=Po(e,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const l=lm(o,t),c=Po(e,0);c.setFullYear(r,0,i),c.setHours(0,0,0,0);const u=lm(c,t);return n.getTime()>=l.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function vPe(e,t){var l,c,u,d;const n=Zy(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=L8(e,t),i=Po(e,0);return i.setFullYear(a,0,r),i.setHours(0,0,0,0),lm(i,t)}function xPe(e,t){const n=fr(e),r=+lm(n,t)-+vPe(n,t);return Math.round(r/I8)+1}function kt(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const $i={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return kt(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):kt(n+1,2)},d(e,t){return kt(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return kt(e.getHours()%12||12,t.length)},H(e,t){return kt(e.getHours(),t.length)},m(e,t){return kt(e.getMinutes(),t.length)},s(e,t){return kt(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return kt(a,t.length)}},Ac={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},yO={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return $i.y(e,t)},Y:function(e,t,n,r){const a=L8(e,r),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return kt(o,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):kt(i,t.length)},R:function(e,t){const n=$8(e);return kt(n,t.length)},u:function(e,t){const n=e.getFullYear();return kt(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return kt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return kt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return $i.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return kt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=xPe(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):kt(a,t.length)},I:function(e,t,n){const r=gPe(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):kt(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):$i.d(e,t)},D:function(e,t,n){const r=pPe(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):kt(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return kt(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return kt(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return kt(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(r===12?a=Ac.noon:r===0?a=Ac.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(r>=17?a=Ac.evening:r>=12?a=Ac.afternoon:r>=4?a=Ac.morning:a=Ac.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return $i.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):$i.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):kt(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):kt(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):$i.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):$i.s(e,t)},S:function(e,t){return $i.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return bO(r);case"XXXX":case"XX":return nl(r);case"XXXXX":case"XXX":default:return nl(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return bO(r);case"xxxx":case"xx":return nl(r);case"xxxxx":case"xxx":default:return nl(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+wO(r,":");case"OOOO":default:return"GMT"+nl(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+wO(r,":");case"zzzz":default:return"GMT"+nl(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return kt(r,t.length)},T:function(e,t,n){const r=e.getTime();return kt(r,t.length)}};function wO(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),i=r%60;return i===0?n+String(a):n+String(a)+t+kt(i,2)}function bO(e,t){return e%60===0?(e>0?"-":"+")+kt(Math.abs(e)/60,2):nl(e,t)}function nl(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=kt(Math.trunc(r/60),2),i=kt(r%60,2);return n+a+t+i}const jO=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},F8=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},yPe=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return jO(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",jO(r,t)).replace("{{time}}",F8(a,t))},wPe={p:F8,P:yPe},bPe=/^D+$/,jPe=/^Y+$/,NPe=["D","DD","YY","YYYY"];function SPe(e){return bPe.test(e)}function _Pe(e){return jPe.test(e)}function CPe(e,t,n){const r=APe(e,t,n);if(console.warn(r),NPe.includes(e))throw new RangeError(r)}function APe(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const PPe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,EPe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,kPe=/^'([^]*?)'?$/,TPe=/''/g,OPe=/[a-zA-Z]/;function ht(e,t,n){var d,h,m,f,x,g,p,v;const r=Zy(),a=(n==null?void 0:n.locale)??r.locale??mPe,i=(n==null?void 0:n.firstWeekContainsDate)??((h=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??r.firstWeekContainsDate??((f=(m=r.locale)==null?void 0:m.options)==null?void 0:f.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((g=(x=n==null?void 0:n.locale)==null?void 0:x.options)==null?void 0:g.weekStartsOn)??r.weekStartsOn??((v=(p=r.locale)==null?void 0:p.options)==null?void 0:v.weekStartsOn)??0,l=fr(e);if(!IAe(l))throw new RangeError("Invalid time value");let c=t.match(EPe).map(y=>{const w=y[0];if(w==="p"||w==="P"){const S=wPe[w];return S(y,a.formatLong)}return y}).join("").match(PPe).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const w=y[0];if(w==="'")return{isToken:!1,value:DPe(y)};if(yO[w])return{isToken:!0,value:y};if(w.match(OPe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:y}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return c.map(y=>{if(!y.isToken)return y.value;const w=y.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&_Pe(w)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&SPe(w))&&CPe(w,t,String(e));const S=yO[w[0]];return S(l,w,a.localize,u)}).join("")}function DPe(e){const t=e.match(kPe);return t?t[1].replace(TPe,"'"):e}function MPe(e,t){const n=fr(e),r=fr(t);return n.getTime()>r.getTime()}function Jv(e,t){const n=fr(e),r=fr(t);return+n<+r}const IPe={lessThanXSeconds:{one:"moins dune seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins dune minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus dun an",other:"plus de {{count}} ans"},almostXYears:{one:"presquun an",other:"presque {{count}} ans"}},$Pe=(e,t,n)=>{let r;const a=IPe[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",String(t)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"dans "+r:"il y a "+r:r},RPe={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},LPe={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},FPe={full:"{{date}} '' {{time}}",long:"{{date}} '' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},zPe={date:fu({formats:RPe,defaultWidth:"full"}),time:fu({formats:LPe,defaultWidth:"full"}),dateTime:fu({formats:FPe,defaultWidth:"full"})},BPe={lastWeek:"eeee 'dernier ' p",yesterday:"'hier ' p",today:"'aujourdhui ' p",tomorrow:"'demain ' p'",nextWeek:"eeee 'prochain ' p",other:"P"},qPe=(e,t,n,r)=>BPe[e],VPe={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jsus-Christ","aprs Jsus-Christ"]},UPe={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2me trim.","3me trim.","4me trim."],wide:["1er trimestre","2me trimestre","3me trimestre","4me trimestre"]},WPe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","fvr.","mars","avr.","mai","juin","juil.","aot","sept.","oct.","nov.","dc."],wide:["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"]},HPe={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},KPe={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"aprs-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de laprs-midi",evening:"du soir",night:"du matin"}},GPe=(e,t)=>{const n=Number(e),r=t==null?void 0:t.unit;if(n===0)return"0";const a=["year","week","hour","minute","second"];let i;return n===1?i=r&&a.includes(r)?"re":"er":i="me",n+i},YPe=["MMM","MMMM"],QPe={preprocessor:(e,t)=>e.getDate()===1||!t.some(r=>r.isToken&&YPe.includes(r.value))?t:t.map(r=>r.isToken&&r.value==="do"?{isToken:!0,value:"d"}:r),ordinalNumber:GPe,era:xa({values:VPe,defaultWidth:"wide"}),quarter:xa({values:UPe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:xa({values:WPe,defaultWidth:"wide"}),day:xa({values:HPe,defaultWidth:"wide"}),dayPeriod:xa({values:KPe,defaultWidth:"wide"})},XPe=/^(\d+)(ime|re|me|er|e)?/i,JPe=/\d+/i,ZPe={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jsus-Christ|aprs Jsus-Christ)/i},eEe={any:[/^av/i,/^ap/i]},tEe={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|me|e)? trim\.?/i,wide:/^[1234](er|me|e)? trimestre/i},nEe={any:[/1/i,/2/i,/3/i,/4/i]},rEe={narrow:/^[jfmasond]/i,abbreviated:/^(janv|fvr|mars|avr|mai|juin|juill|juil|aot|sept|oct|nov|dc)\.?/i,wide:/^(janvier|fvrier|mars|avril|mai|juin|juillet|aot|septembre|octobre|novembre|dcembre)/i},sEe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},aEe={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},iEe={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},oEe={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'aprs[-\s]midi|du soir|de la nuit)/i},lEe={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},cEe={ordinalNumber:R8({matchPattern:XPe,parsePattern:JPe,valueCallback:e=>parseInt(e)}),era:ya({matchPatterns:ZPe,defaultMatchWidth:"wide",parsePatterns:eEe,defaultParseWidth:"any"}),quarter:ya({matchPatterns:tEe,defaultMatchWidth:"wide",parsePatterns:nEe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ya({matchPatterns:rEe,defaultMatchWidth:"wide",parsePatterns:sEe,defaultParseWidth:"any"}),day:ya({matchPatterns:aEe,defaultMatchWidth:"wide",parsePatterns:iEe,defaultParseWidth:"any"}),dayPeriod:ya({matchPatterns:oEe,defaultMatchWidth:"any",parsePatterns:lEe,defaultParseWidth:"any"})},dr={code:"fr",formatDistance:$Pe,formatLong:zPe,formatRelative:qPe,localize:QPe,match:cEe,options:{weekStartsOn:1,firstWeekContainsDate:4}};function uEe(e,t,n){const r=[],{openingTime:a,closingTime:i,slotDuration:o,lunchBreakStart:l,lunchBreakEnd:c}=t,u=Bp(a),d=Bp(i),h=l?Bp(l):null,m=c?Bp(c):null;for(let f=u;f<d;f+=o){const x=dEe(f),g=h&&m&&f>=h&&f<m,p=n.some(v=>v.date===e&&v.time===x);r.push({time:x,isAvailable:!p&&!g,isLunchBreak:!!g})}return r}function Bp(e){const[t,n]=e.split(":").map(Number);return t*60+n}function dEe(e){const t=Math.floor(e/60),n=e%60;return`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}function hEe(e){return new Date(e).toLocaleDateString("fr-FR",{weekday:"long"})}function fEe(e,t){const n=hEe(e).toLowerCase();return t.workingDays.includes(n)}const NO=(e,t)=>{switch(e){case"appointment":switch(t){case"confirmed":return"bg-green-100 text-green-800 border-green-200";case"completed":return"bg-gray-100 text-gray-800 border-gray-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-blue-100 text-blue-800 border-blue-200"}case"vaccination":switch(t){case"completed":return"bg-green-100 text-green-800 border-green-200";case"overdue":return"bg-red-100 text-red-800 border-red-200";case"scheduled":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-yellow-100 text-yellow-800 border-yellow-200"}case"antiparasitic":switch(t){case"completed":return"bg-green-100 text-green-800 border-green-200";case"overdue":return"bg-red-100 text-red-800 border-red-200";case"scheduled":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-purple-100 text-purple-800 border-purple-200"}default:return"bg-gray-100 text-gray-800 border-gray-200"}},SO=(e,t)=>{switch(e){case"appointment":return s.jsx($t,{className:"h-3 w-3"});case"vaccination":return s.jsx(On,{className:"h-3 w-3"});case"antiparasitic":return s.jsx(pn,{className:"h-3 w-3"});default:return s.jsx(Ze,{className:"h-3 w-3"})}},mEe=({events:e,onEventClick:t,onDateClick:n,onTimeSlotClick:r,showTimeSlots:a=!1,title:i="Calendrier",icon:o=s.jsx(Ze,{className:"h-5 w-5"})})=>{var N;const{settings:l}=Zt(),[c,u]=b.useState(new Date),[d,h]=b.useState(""),m=new Date(c.getFullYear(),c.getMonth(),1),f=new Date(c.getFullYear(),c.getMonth()+1,0),x=new Date(m);x.setDate(x.getDate()-m.getDay());const g=[],p=new Date(x);for(;p<=f||g.length<42;)g.push(new Date(p)),p.setDate(p.getDate()+1);const v=b.useMemo(()=>{const C={};return e.forEach(_=>{const A=_.date;C[A]||(C[A]=[]),C[A].push(_)}),C},[e]),y=b.useMemo(()=>!d||!a?[]:uEe(d,l.scheduleSettings,[]),[d,a,l.scheduleSettings]),w=C=>{const _=new Date(c);_.setMonth(c.getMonth()+(C==="next"?1:-1)),u(_)},S=C=>{const _=ht(C,"yyyy-MM-dd");h(_),n==null||n(_)},j=C=>{r&&d&&r(d,C)};return s.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[s.jsxs(ie,{children:[s.jsx(xe,{className:"pb-3 sm:pb-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-0",children:[s.jsxs(ye,{className:"flex items-center gap-2 text-base sm:text-lg",children:[o,i]}),s.jsxs("div",{className:"flex items-center justify-between sm:gap-2",children:[s.jsx($,{variant:"outline",size:"sm",onClick:()=>w("prev"),className:"flex-1 sm:flex-none",children:""}),s.jsx("span",{className:"font-medium text-sm sm:text-base px-2 sm:min-w-[140px] text-center",children:ht(c,"MMMM yyyy",{locale:dr})}),s.jsx($,{variant:"outline",size:"sm",onClick:()=>w("next"),className:"flex-1 sm:flex-none",children:""})]})]})}),s.jsxs(oe,{className:"p-2 sm:p-6",children:[s.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2 sm:mb-4",children:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"].map(C=>s.jsx("div",{className:"p-1 sm:p-2 text-center text-xs sm:text-sm font-medium text-gray-500",children:C},C))}),s.jsx("div",{className:"grid grid-cols-7 gap-1",children:g.map((C,_)=>{const A=ht(C,"yyyy-MM-dd"),P=v[A]||[],T=C.getMonth()===c.getMonth(),E=DAe(C,new Date),I=A===d,R=fEe(A,l.scheduleSettings);return s.jsxs("div",{className:`
                    min-h-[60px] sm:min-h-[80px] p-1 border rounded-lg relative cursor-pointer hover:bg-muted/50
                    ${T?"bg-white":"bg-gray-50"}
                    ${E?"ring-2 ring-blue-500":""}
                    ${I?"bg-blue-100 border-blue-300":""}
                    ${R?"":"opacity-50"}
                  `,onClick:()=>S(C),children:[s.jsx("div",{className:`text-xs sm:text-sm font-medium ${T?"text-gray-900":"text-gray-400"}`,children:C.getDate()}),s.jsxs("div",{className:"space-y-0.5 sm:space-y-1 mt-0.5 sm:mt-1",children:[P.slice(0,2).map((z,U)=>s.jsx("div",{className:`
                          text-xs p-0.5 sm:p-1 rounded text-center truncate border cursor-pointer
                          ${NO(z.type,z.status)}
                        `,title:`${z.title}${z.time?` - ${z.time}`:""}${z.clientName?` (${z.clientName})`:""}`,onClick:K=>{K.stopPropagation(),t==null||t(z)},children:s.jsxs("div",{className:"flex items-center gap-0.5 sm:gap-1 justify-center",children:[SO(z.type,z.status),s.jsx("span",{className:"truncate text-xs",children:z.title})]})},U)),P.length>2&&s.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["+",P.length-2]})]})]},_)})})]})]}),d&&s.jsxs(ie,{children:[s.jsx(xe,{className:"pb-3",children:s.jsx(ye,{className:"text-base sm:text-lg",children:ht(new Date(d),"EEEE d MMMM yyyy",{locale:dr})})}),s.jsxs(oe,{className:"p-3 sm:p-6",children:[((N=v[d])==null?void 0:N.length)>0?s.jsx("div",{className:"space-y-3",children:v[d].map(C=>s.jsxs("div",{className:`
                      p-3 rounded-lg border cursor-pointer hover:shadow-sm
                      ${NO(C.type,C.status)}
                    `,onClick:()=>t==null?void 0:t(C),children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[SO(C.type,C.status),s.jsx("span",{className:"font-medium",children:C.title})]}),s.jsx(Ie,{variant:"outline",className:"text-xs",children:C.status})]}),C.time&&s.jsxs("div",{className:"flex items-center gap-1 text-sm mt-1",children:[s.jsx($t,{className:"h-3 w-3"}),s.jsx("span",{children:C.time})]}),C.clientName&&s.jsxs("div",{className:"flex items-center gap-1 text-sm mt-1",children:[s.jsx(Kn,{className:"h-3 w-3"}),s.jsx("span",{children:C.clientName})]}),C.petName&&s.jsxs("div",{className:"flex items-center gap-1 text-sm mt-1",children:[s.jsx(gt,{className:"h-3 w-3"}),s.jsx("span",{children:C.petName})]})]},C.id))}):s.jsx("p",{className:"text-muted-foreground text-center py-4",children:"Aucun vnement prvu pour cette date"}),a&&y.length>0&&s.jsxs("div",{className:"mt-4 sm:mt-6",children:[s.jsx("h4",{className:"font-medium mb-2 sm:mb-3 text-sm sm:text-base",children:"Crneaux disponibles"}),s.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-1 sm:gap-2",children:y.map(C=>s.jsxs($,{variant:C.isAvailable?"outline":"ghost",size:"sm",disabled:!C.isAvailable,onClick:()=>j(C.time),className:"text-xs p-1 sm:p-2",children:[C.time,C.isLunchBreak&&s.jsx(Ie,{variant:"secondary",className:"ml-1 text-xs hidden sm:inline",children:"Pause"})]},C.time))})]})]})]})]})},_O={scheduled:"bg-blue-100 text-blue-800",confirmed:"bg-green-100 text-green-800",completed:"bg-gray-100 text-gray-800",cancelled:"bg-red-100 text-red-800","no-show":"bg-orange-100 text-orange-800"},Mw={scheduled:"Planifi",confirmed:"Confirm",completed:"Termin",cancelled:"Annul","no-show":"Absent"},CO={consultation:"Consultation gnrale",vaccination:"Vaccination",chirurgie:"Chirurgie",urgence:"Urgence",controle:"Contrle post-opratoire",sterilisation:"Strilisation",dentaire:"Soins dentaires"};function pEe(){const{data:e=[],isLoading:t,error:n}=rc(),r=ete(),a=tte(),{toast:i}=it(),{currentView:o}=Hd("appointments"),{data:l=[],isLoading:c}=sc(),{data:u=[],isLoading:d}=o_(),[h,m]=b.useState(!1),[f,x]=b.useState(""),[g,p]=b.useState("all"),[v,y]=b.useState("all"),[w,S]=b.useState("all"),[j,N]=b.useState("all"),[C,_]=b.useState(new Date().toISOString().split("T")[0]),[A,P]=b.useState("list"),[T,E]=b.useState(o),[I,R]=b.useState(!1),[z,U]=b.useState(null),[K,k]=b.useState(null),[D,J]=b.useState(""),W=de=>new Date(de).toLocaleDateString("fr-FR"),Y=de=>new Date(de).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),V=de=>new Date(de.appointment_date).toISOString().split("T")[0],O=de=>new Date(de.appointment_date).toTimeString().slice(0,5),[le,te]=b.useState(()=>{const de=new Date;return new Date(de.getFullYear(),de.getMonth(),1)}),ce=de=>de.client?`${de.client.first_name} ${de.client.last_name}`:"Unknown Client",ge=de=>{var Fe;return((Fe=de.animal)==null?void 0:Fe.name)||"Unknown Animal"},H=de=>{var Fe;return((Fe=de.animal)==null?void 0:Fe.species)||"Unknown Species"},G=()=>{const de=new Date;return e.filter(Fe=>new Date(Fe.appointment_date)>de)},ue=()=>{const de=new Date;return e.filter(Fe=>new Date(Fe.appointment_date)<de&&Fe.status==="scheduled")},re=G(),ve=ue(),pe=e.filter(de=>{const Fe=ce(de),Fn=ge(de),Vr=Fe.toLowerCase().includes(f.toLowerCase())||Fn.toLowerCase().includes(f.toLowerCase())||de.notes&&de.notes.toLowerCase().includes(f.toLowerCase()),Qd=g==="all"||de.status===g,uc=v==="all"||de.appointment_type===v,Uo=w==="all"||H(de)===w;let Ar=!0;const sa=new Date(de.appointment_date),Ts=sa.toISOString().split("T")[0];if(j==="today")Ar=Ts===new Date().toISOString().split("T")[0];else if(j==="week"){const aa=new Date,Ei=new Date(aa.getTime()+7*24*60*60*1e3);Ar=sa>=aa&&sa<=Ei}else if(j==="month"){const aa=new Date,Ei=aa.getMonth(),dc=aa.getFullYear();Ar=sa.getMonth()===Ei&&sa.getFullYear()===dc}else j==="specific"&&(Ar=Ts===C);return Vr&&Qd&&uc&&Uo&&Ar}),ee=async(de,Fe)=>{try{await r.mutateAsync({id:de,data:{status:Fe}}),i({title:"Statut mis  jour",description:`Le rendez-vous est maintenant ${Mw[Fe].toLowerCase()}.`})}catch{i({title:"Erreur",description:"Impossible de mettre  jour le statut",variant:"destructive"})}},Pe=async()=>{if(!K)return;const{id:de,field:Fe}=K;if(e.find(Vr=>Vr.id===de))try{await r.mutateAsync({id:de,data:{[Fe]:D}}),i({title:"Modifi",description:`${Fe} mis  jour`})}catch{i({title:"Erreur",description:"Impossible de mettre  jour",variant:"destructive"})}k(null)},Ee=async de=>{U(de),R(!0)},dt=async()=>{if(!z)return;const de=ge(z);try{await a.mutateAsync(z.id),i({title:"Rendez-vous supprim",description:`Le rendez-vous pour ${de} a t supprim.`}),R(!1),U(null)}catch{i({title:"Erreur",description:"Impossible de supprimer le rendez-vous",variant:"destructive"})}},Dt=de=>e.filter(Fe=>new Date(Fe.appointment_date).toISOString().split("T")[0]===de),ae=(()=>{const de=new Date().toISOString().split("T")[0];return Dt(de)})(),B=le.getFullYear(),he=le.getMonth(),Oe=new Date(B,he,1).getDay(),St=new Date(B,he+1,0).getDate();let Qe=1-Oe;for(;Qe<=St;){const de=[];for(let Fe=0;Fe<7;Fe++)Qe>0&&Qe<=St?de.push(Qe):de.push(0),Qe++}return t?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Chargement des rendez-vous..."})]})}):n?s.jsx("div",{className:"p-6",children:s.jsx(ie,{className:"border-red-200 bg-red-50",children:s.jsx(oe,{className:"p-6",children:s.jsxs("div",{className:"flex items-center text-red-800",children:[s.jsx(ps,{className:"w-5 h-5 mr-2"}),s.jsxs("span",{children:["Erreur lors du chargement des rendez-vous: ",n.message]})]})})})}):s.jsxs("div",{className:"container mx-auto px-2 sm:px-4 lg:px-6 py-4 sm:py-6 lg:py-8 space-y-4 sm:space-y-6 lg:space-y-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Gestion des Rendez-vous"}),s.jsx("p",{className:"text-muted-foreground text-sm sm:text-base",children:"Planifiez et grez tous vos rendez-vous vtrinaires"})]}),s.jsxs($,{onClick:()=>m(!0),className:"gap-2 w-full sm:w-auto",children:[s.jsx(Ye,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Nouveau Rendez-vous"}),s.jsx("span",{className:"sm:hidden",children:"Nouveau RDV"})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx($,{variant:A==="list"?"default":"outline",onClick:()=>P("list"),size:"sm",className:"flex-1 sm:flex-none",children:"Liste"}),s.jsx($,{variant:A==="calendar"?"default":"outline",onClick:()=>P("calendar"),size:"sm",className:"flex-1 sm:flex-none",children:"Calendrier"})]}),A==="list"&&s.jsxs("div",{className:"flex gap-2",children:[s.jsxs($,{size:"sm",variant:T==="cards"?"default":"outline",onClick:()=>E("cards"),className:"gap-1 sm:gap-2 flex-1 sm:flex-none",children:[s.jsx(_o,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Cartes"})]}),s.jsxs($,{size:"sm",variant:T==="table"?"default":"outline",onClick:()=>E("table"),className:"gap-1 sm:gap-2 flex-1 sm:flex-none",children:[s.jsx(vi,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Tableau"})]})]})]}),A==="calendar"?s.jsx(mEe,{events:e.map(de=>({id:parseInt(de.id),type:"appointment",title:`${ce(de)} - ${ge(de)}`,time:O(de),date:V(de),status:de.status,clientName:ce(de),petName:ge(de)})),onEventClick:de=>{},onDateClick:de=>{_(de)},onTimeSlotClick:(de,Fe)=>{m(!0)},showTimeSlots:!0,title:"Calendrier des Rendez-vous",icon:s.jsx(Ze,{className:"h-5 w-5"})}):s.jsxs("div",{className:"grid gap-2 sm:gap-4 grid-cols-2 lg:grid-cols-4",children:[s.jsx(ie,{children:s.jsx(oe,{className:"p-3 sm:p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ze,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Aujourd'hui"}),s.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:ae.length})]})]})})}),s.jsx(ie,{children:s.jsx(oe,{className:"p-3 sm:p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx($t,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:" venir"}),s.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:re.length})]})]})})}),s.jsx(ie,{children:s.jsx(oe,{className:"p-3 sm:p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ps,{className:"h-4 w-4 sm:h-5 sm:w-5 text-orange-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"En retard"}),s.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:ve.length})]})]})})}),s.jsx(ie,{children:s.jsx(oe,{className:"p-3 sm:p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(On,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Total"}),s.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:e.length})]})]})})})]}),s.jsxs(ie,{children:[s.jsx(xe,{className:"pb-3",children:s.jsxs(ye,{className:"flex items-center gap-2 text-base sm:text-lg",children:[s.jsx(Og,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Filtres et Recherche"]})}),s.jsx(oe,{className:"space-y-3 sm:space-y-4",children:s.jsxs("div",{className:"grid gap-3 sm:gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pc,{children:"Recherche"}),s.jsxs("div",{className:"relative",children:[s.jsx(Si,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(se,{placeholder:"Client, animal, motif...",value:f,onChange:de=>x(de.target.value),className:"pl-10"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pc,{children:"Statut"}),s.jsxs(_e,{value:g,onValueChange:p,children:[s.jsx(Ne,{children:s.jsx(Ce,{})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"all",children:"Tous les statuts"}),s.jsx(Q,{value:"scheduled",children:"Planifi"}),s.jsx(Q,{value:"confirmed",children:"Confirm"}),s.jsx(Q,{value:"completed",children:"Termin"}),s.jsx(Q,{value:"cancelled",children:"Annul"}),s.jsx(Q,{value:"no-show",children:"Absent"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pc,{children:"Type"}),s.jsxs(_e,{value:v,onValueChange:y,children:[s.jsx(Ne,{children:s.jsx(Ce,{})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"all",children:"Tous les types"}),u.map(de=>s.jsx(Q,{value:de.toLowerCase().replace(/\s+/g,"-"),children:de},de))]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pc,{children:"Espce"}),s.jsxs(_e,{value:w,onValueChange:S,children:[s.jsx(Ne,{children:s.jsx(Ce,{})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"all",children:"Toutes espces"}),l.map(de=>s.jsx(Q,{value:de,children:de},de))]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pc,{children:"Priode"}),s.jsxs(_e,{value:j,onValueChange:N,children:[s.jsx(Ne,{children:s.jsx(Ce,{})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"all",children:"Toutes les dates"}),s.jsx(Q,{value:"today",children:"Ce jour"}),s.jsx(Q,{value:"week",children:"Cette semaine"}),s.jsx(Q,{value:"month",children:"Ce mois"}),s.jsx(Q,{value:"specific",children:"Date spcifique"})]})]})]}),j==="specific"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(Pc,{children:"Date"}),s.jsx(se,{type:"date",value:C,onChange:de=>_(de.target.value)})]})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("h2",{className:"text-xl font-semibold",children:["Rendez-vous (",pe.length,")"]})}),pe.length===0?s.jsx(ie,{children:s.jsxs(oe,{className:"p-8 text-center text-muted-foreground",children:[s.jsx(Ze,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"Aucun rendez-vous trouv"}),s.jsx("p",{className:"text-sm",children:"Commencez par crer votre premier rendez-vous"})]})}):T==="cards"?s.jsx("div",{className:"space-y-4",children:pe.sort((de,Fe)=>new Date(de.appointment_date).getTime()-new Date(Fe.appointment_date).getTime()).map(de=>s.jsx(ie,{className:"card-hover",children:s.jsx(oe,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[s.jsxs("div",{className:"space-y-4 flex-1",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Kn,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:ce(de)})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(gt,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:ge(de)})]}),s.jsx(Ie,{className:_O[de.status],children:Mw[de.status]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ze,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{children:W(de.appointment_date)})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx($t,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{children:Y(de.appointment_date)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Type:"}),s.jsx("span",{className:"ml-1",children:CO[de.appointment_type]||de.appointment_type})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Dure:"}),s.jsxs("span",{className:"ml-1",children:[de.duration_minutes||30," min"]})]})]}),de.notes&&s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Motif:"}),s.jsx("p",{className:"text-sm mt-1",children:de.notes})]}),de.notes&&s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Notes:"}),s.jsx("p",{className:"text-sm mt-1 text-muted-foreground",children:de.notes})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:ml-4",children:[de.status==="scheduled"&&s.jsxs(s.Fragment,{children:[s.jsxs($,{size:"sm",variant:"outline",onClick:()=>ee(de.id,"confirmed"),className:"gap-1 w-full sm:w-auto",children:[s.jsx(On,{className:"h-3 w-3"}),"Confirmer"]}),s.jsxs($,{size:"sm",variant:"outline",onClick:()=>ee(de.id,"cancelled"),className:"gap-1 text-red-600 w-full sm:w-auto",children:[s.jsx($l,{className:"h-3 w-3"}),"Annuler"]})]}),de.status==="confirmed"&&s.jsxs($,{size:"sm",variant:"outline",onClick:()=>ee(de.id,"completed"),className:"gap-1 w-full sm:w-auto",children:[s.jsx(On,{className:"h-3 w-3"}),"Terminer"]}),s.jsxs($,{size:"sm",variant:"outline",onClick:()=>Ee(de),className:"gap-1 text-red-600 w-full sm:w-auto",children:[s.jsx(Wt,{className:"h-3 w-3"}),"Supprimer"]})]})]})})},de.id))}):s.jsx(ie,{children:s.jsx(oe,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"border-b",children:s.jsxs("tr",{className:"text-left",children:[s.jsx("th",{className:"p-2 sm:p-4 font-medium",children:"Client / Animal"}),s.jsx("th",{className:"p-2 sm:p-4 font-medium",children:"Date & Heure"}),s.jsx("th",{className:"p-2 sm:p-4 font-medium",children:"Type"}),s.jsx("th",{className:"p-2 sm:p-4 font-medium",children:"Statut"}),s.jsx("th",{className:"p-2 sm:p-4 font-medium",children:"Motif"}),s.jsx("th",{className:"p-2 sm:p-4 font-medium",children:"Actions"})]})}),s.jsx("tbody",{children:pe.sort((de,Fe)=>new Date(de.appointment_date).getTime()-new Date(Fe.appointment_date).getTime()).map(de=>s.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[s.jsx("td",{className:"p-2 sm:p-4",children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Kn,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:ce(de)})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(gt,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:ge(de)})]})]})}),s.jsx("td",{className:"p-2 sm:p-4",children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>{k({id:de.id,field:"date"}),J(V(de))},children:[s.jsx(Ze,{className:"h-4 w-4 text-muted-foreground"}),(K==null?void 0:K.id)===de.id&&K.field==="date"?s.jsx(se,{type:"date",value:D,onChange:Fe=>J(Fe.target.value),onBlur:Pe,autoFocus:!0,className:"w-32"}):s.jsx("span",{children:W(de.appointment_date)})]}),s.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>{k({id:de.id,field:"time"}),J(O(de))},children:[s.jsx($t,{className:"h-4 w-4 text-muted-foreground"}),(K==null?void 0:K.id)===de.id&&K.field==="time"?s.jsx(se,{type:"time",value:D,onChange:Fe=>J(Fe.target.value),onBlur:Pe,autoFocus:!0,className:"w-24"}):s.jsx("span",{className:"text-sm text-muted-foreground",children:Y(de.appointment_date)})]})]})}),s.jsx("td",{className:"p-2 sm:p-4",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:CO[de.appointment_type]||de.appointment_type}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[de.duration_minutes||30," min"]})]})}),s.jsx("td",{className:"p-2 sm:p-4",children:s.jsx("div",{className:"cursor-pointer",onClick:()=>{k({id:de.id,field:"status"}),J(de.status)},children:(K==null?void 0:K.id)===de.id&&K.field==="status"?s.jsxs(_e,{value:D,onValueChange:Fe=>{J(Fe),ee(de.id,Fe),k(null)},children:[s.jsx(Ne,{className:"w-32",children:s.jsx(Ce,{})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"scheduled",children:"Planifi"}),s.jsx(Q,{value:"confirmed",children:"Confirm"}),s.jsx(Q,{value:"completed",children:"Termin"}),s.jsx(Q,{value:"cancelled",children:"Annul"}),s.jsx(Q,{value:"no-show",children:"Absent"})]})]}):s.jsx(Ie,{className:_O[de.status],children:Mw[de.status]})})}),s.jsx("td",{className:"p-2 sm:p-4",children:s.jsx("div",{className:"max-w-xs cursor-pointer",onClick:()=>{k({id:de.id,field:"reason"}),J(de.notes||"")},children:(K==null?void 0:K.id)===de.id&&K.field==="reason"?s.jsx(se,{value:D,onChange:Fe=>J(Fe.target.value),onBlur:Pe,autoFocus:!0,placeholder:"Motif du rendez-vous"}):s.jsxs(s.Fragment,{children:[de.notes&&s.jsx("div",{className:"text-sm",children:de.notes}),de.notes&&s.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:de.notes})]})})}),s.jsx("td",{className:"p-2 sm:p-4",children:s.jsxs("div",{className:"flex gap-1",children:[de.status==="scheduled"&&s.jsxs(s.Fragment,{children:[s.jsx($,{size:"sm",variant:"outline",onClick:()=>ee(de.id,"confirmed"),children:s.jsx(On,{className:"h-3 w-3"})}),s.jsx($,{size:"sm",variant:"outline",onClick:()=>ee(de.id,"cancelled"),className:"text-red-600",children:s.jsx($l,{className:"h-3 w-3"})})]}),de.status==="confirmed"&&s.jsx($,{size:"sm",variant:"outline",onClick:()=>ee(de.id,"completed"),children:s.jsx(On,{className:"h-3 w-3"})}),s.jsx($,{size:"sm",variant:"outline",onClick:()=>Ee(de),className:"text-red-600",children:s.jsx(Wt,{className:"h-3 w-3"})})]})})]},de.id))})]})})})})]}),s.jsx(PAe,{open:h,onOpenChange:m}),s.jsx(tt,{open:I,onOpenChange:R,children:s.jsxs(et,{className:"max-w-md",children:[s.jsx(nt,{children:s.jsx(rt,{children:"Confirmer la suppression"})}),z&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("p",{className:"text-gray-600",children:["tes-vous sr de vouloir supprimer le rendez-vous pour ",s.jsx("strong",{children:ge(z)})," ?"]}),s.jsx("p",{className:"text-sm text-red-600",children:"Cette action est irrversible."}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx($,{variant:"outline",onClick:()=>R(!1),children:"Annuler"}),s.jsx($,{variant:"destructive",onClick:dt,children:"Supprimer"})]})]})]})})]})}const Pc=({children:e,...t})=>s.jsx("label",{className:"text-sm font-medium",...t,children:e});function gEe({open:e,onOpenChange:t,consultation:n}){var f,x,g,p;const{data:r=[]}=vn(),{data:a=[]}=fn(),i=nL(),{toast:o}=it();Zt();const[l,c]=b.useState({client_id:"",animal_id:"",consultation_date:"",consultation_type:"routine",weight:"",temperature:"",symptoms:"",diagnosis:"",treatment:"",notes:"",follow_up_date:"",follow_up_notes:"",status:"completed"}),u=a.filter(v=>v.client_id===l.client_id);b.useEffect(()=>{var v,y;n&&e&&c({client_id:n.client_id||"",animal_id:n.animal_id||"",consultation_date:n.consultation_date?n.consultation_date.split("T")[0]:"",consultation_type:n.consultation_type||"routine",weight:((v=n.weight)==null?void 0:v.toString())||"",temperature:((y=n.temperature)==null?void 0:y.toString())||"",symptoms:n.symptoms||"",diagnosis:n.diagnosis||"",treatment:n.treatment||"",notes:n.notes||"",follow_up_date:n.follow_up_date||"",follow_up_notes:n.follow_up_notes||"",status:n.status||"completed"})},[n,e]);const d=v=>{c(y=>({...y,[v.target.id]:v.target.value}))},h=(v,y)=>{c(w=>({...w,[v]:y})),v==="client_id"&&c(w=>({...w,animal_id:""}))},m=async v=>{var S,j,N,C,_;if(v.preventDefault(),!n){o({title:"Erreur",description:"Aucune consultation slectionne pour modification.",variant:"destructive"});return}const y=[];if(l.weight){const A=parseFloat(l.weight);(isNaN(A)||A<=0||A>999.9)&&y.push("Le poids doit tre un nombre valide entre 0.1 et 999.9 kg")}if(l.temperature){const A=parseFloat(l.temperature);(isNaN(A)||A<30||A>50)&&y.push("La temprature doit tre un nombre valide entre 30C et 50C")}if(l.symptoms&&l.symptoms.length>1e3&&y.push("Les symptmes ne peuvent pas dpasser 1000 caractres"),l.diagnosis&&l.diagnosis.length>1e3&&y.push("Le diagnostic ne peut pas dpasser 1000 caractres"),l.treatment&&l.treatment.length>1e3&&y.push("Le traitement ne peut pas dpasser 1000 caractres"),l.notes&&l.notes.length>2e3&&y.push("Les notes ne peuvent pas dpasser 2000 caractres"),l.follow_up_notes&&l.follow_up_notes.length>500&&y.push("Les notes de suivi ne peuvent pas dpasser 500 caractres"),l.follow_up_date){const A=new Date(l.follow_up_date),P=new Date;P.setFullYear(P.getFullYear()+1),A>P&&y.push("La date de suivi ne peut pas tre plus d'un an dans le futur");const T=new Date(n.consultation_date);A<T&&y.push("La date de suivi ne peut pas tre antrieure  la date de consultation")}const w=["scheduled","in-progress","completed","cancelled"];if(l.status&&!w.includes(l.status)&&y.push("Le statut slectionn n'est pas valide"),y.length>0){o({title:"Erreurs de validation",description:y.join(". "),variant:"destructive"});return}try{const A={consultation_type:l.consultation_type,symptoms:((S=l.symptoms)==null?void 0:S.trim())||void 0,diagnosis:((j=l.diagnosis)==null?void 0:j.trim())||void 0,treatment:((N=l.treatment)==null?void 0:N.trim())||void 0,notes:((C=l.notes)==null?void 0:C.trim())||void 0,weight:l.weight?parseFloat(l.weight):void 0,temperature:l.temperature?parseFloat(l.temperature):void 0,follow_up_date:l.follow_up_date||null,follow_up_notes:((_=l.follow_up_notes)==null?void 0:_.trim())||void 0,status:l.status};await i.mutateAsync({id:n.id,data:A}),o({title:"Consultation modifie",description:"La consultation a t modifie avec succs."}),t(!1)}catch(A){console.error("Error updating consultation:",A);let P="Une erreur est survenue lors de la modification de la consultation.";A!=null&&A.message&&(A.message.includes("not found")||A.message.includes("does not exist")?P="Cette consultation n'existe plus. Elle a peut-tre t supprime.":A.message.includes("foreign key constraint")?P="Erreur: Le client ou l'animal associ n'existe plus. Veuillez actualiser la page.":A.message.includes("network")?P="Erreur de connexion. Vrifiez votre connexion internet et ressayez.":A.message.includes("permission")||A.message.includes("unauthorized")?P="Vous n'avez pas les permissions ncessaires pour modifier cette consultation.":(A.message.includes("version")||A.message.includes("conflict"))&&(P="Cette consultation a t modifie par un autre utilisateur. Veuillez actualiser et ressayer.")),o({title:"Erreur lors de la modification",description:P,variant:"destructive"})}};return r.find(v=>v.id===l.client_id),a.find(v=>v.id===l.animal_id),s.jsx(tt,{open:e,onOpenChange:t,children:s.jsxs(et,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(nt,{children:[s.jsx(rt,{children:"Modifier la consultation"}),s.jsx(At,{children:"Modifiez les informations de la consultation"})]}),n?s.jsxs("form",{onSubmit:m,className:"space-y-6",children:[s.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg",children:[s.jsx("h4",{className:"font-medium mb-2",children:"Consultation pour:"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Client:"})," ",s.jsxs("span",{className:"font-medium",children:[(f=r.find(v=>v.id===l.client_id))==null?void 0:f.first_name," ",(x=r.find(v=>v.id===l.client_id))==null?void 0:x.last_name]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Animal:"})," ",s.jsxs("span",{className:"font-medium",children:[(g=u.find(v=>v.id===l.animal_id))==null?void 0:g.name," (",(p=u.find(v=>v.id===l.animal_id))==null?void 0:p.species,")"]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"consultation_date",children:"Date de consultation"}),s.jsx(se,{id:"consultation_date",type:"date",value:l.consultation_date,onChange:d,className:"bg-muted/50",readOnly:!0,title:"La date ne peut pas tre modifie"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"consultation_type",children:"Type de consultation"}),s.jsxs(_e,{value:l.consultation_type,onValueChange:v=>h("consultation_type",v),children:[s.jsx(Ne,{children:s.jsx(Ce,{})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"routine",children:"Routine"}),s.jsx(Q,{value:"emergency",children:"Urgence"}),s.jsx(Q,{value:"follow-up",children:"Suivi"}),s.jsx(Q,{value:"vaccination",children:"Vaccination"}),s.jsx(Q,{value:"surgery",children:"Chirurgie"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"weight",children:"Poids (kg)"}),s.jsx(se,{id:"weight",type:"number",step:"0.1",min:"0.1",max:"999.9",placeholder:"Ex: 25.5",value:l.weight,onChange:d,title:"Poids en kilogrammes (0.1  999.9 kg)"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"temperature",children:"Temprature (C)"}),s.jsx(se,{id:"temperature",type:"number",step:"0.1",min:"30",max:"50",placeholder:"Ex: 38.5",value:l.temperature,onChange:d,title:"Temprature corporelle (30C  50C)"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"symptoms",children:"Symptmes"}),s.jsx(Ke,{id:"symptoms",placeholder:"Dcrivez les symptmes observs...",value:l.symptoms,onChange:d,rows:3,maxLength:1e3,title:"Maximum 1000 caractres"}),s.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[(l.symptoms||"").length,"/1000 caractres"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"diagnosis",children:"Diagnostic"}),s.jsx(Ke,{id:"diagnosis",placeholder:"Diagnostic pos...",value:l.diagnosis,onChange:d,rows:3,maxLength:1e3,title:"Maximum 1000 caractres"}),s.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[(l.diagnosis||"").length,"/1000 caractres"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"treatment",children:"Traitement"}),s.jsx(Ke,{id:"treatment",placeholder:"Traitement prescrit...",value:l.treatment,onChange:d,rows:3,maxLength:1e3,title:"Maximum 1000 caractres"}),s.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[(l.treatment||"").length,"/1000 caractres"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"follow_up_date",children:"Date de suivi"}),s.jsx(se,{id:"follow_up_date",type:"date",value:l.follow_up_date,onChange:d,title:"Date recommande pour le prochain suivi"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"follow_up_notes",children:"Notes de suivi"}),s.jsx(Ke,{id:"follow_up_notes",placeholder:"Notes pour le suivi...",value:l.follow_up_notes,onChange:d,rows:2,maxLength:500,title:"Maximum 500 caractres"}),s.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[(l.follow_up_notes||"").length,"/500 caractres"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"notes",children:"Notes supplmentaires"}),s.jsx(Ke,{id:"notes",placeholder:"Notes supplmentaires...",value:l.notes,onChange:d,rows:2,maxLength:2e3,title:"Maximum 2000 caractres"}),s.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[(l.notes||"").length,"/2000 caractres"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"status",children:"Statut"}),s.jsxs(_e,{value:l.status,onValueChange:v=>h("status",v),children:[s.jsx(Ne,{children:s.jsx(Ce,{})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"scheduled",children:"Programm"}),s.jsx(Q,{value:"in-progress",children:"En cours"}),s.jsx(Q,{value:"completed",children:"Termin"}),s.jsx(Q,{value:"cancelled",children:"Annul"})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx($,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:i.isPending,children:"Annuler"}),s.jsx($,{type:"submit",disabled:i.isPending||!n,children:i.isPending?"Modification...":"Modifier"})]})]}):s.jsx("div",{className:"flex items-center justify-center py-8 text-muted-foreground",children:s.jsx("p",{children:"Aucune consultation slectionne"})})]})})}function AO({consultation:e}){const{settings:t}=Zt(),n=()=>{var r,a,i,o,l,c,u,d,h;try{const m=window.open("",`print_consultation_${e.id}`,"height=800,width=800");if(!m){alert("L'impression a t bloque par le navigateur. Veuillez autoriser les popups pour ce site.");return}const f=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Consultation - ${((r=e.animal)==null?void 0:r.name)||"Animal"}</title>
          <style>
            body {
              font-family: Arial, sans-serif;
              margin: 20px;
              line-height: 1.6;
            }
            .header {
              text-align: center;
              border-bottom: 2px solid #333;
              padding-bottom: 10px;
              margin-bottom: 20px;
            }
            .clinic-info {
              text-align: center;
              color: #666;
              margin-bottom: 30px;
            }
            .consultation-info {
              display: grid;
              grid-template-columns: 1fr 1fr;
              gap: 20px;
              margin-bottom: 30px;
            }
            .info-section {
              border: 1px solid #ddd;
              padding: 15px;
              border-radius: 5px;
            }
            .info-title {
              font-weight: bold;
              color: #333;
              margin-bottom: 10px;
              font-size: 14px;
              text-transform: uppercase;
            }
            .info-content {
              color: #666;
            }
            .medical-section {
              margin-bottom: 20px;
            }
            .medical-title {
              font-weight: bold;
              color: #333;
              margin-bottom: 8px;
              border-bottom: 1px solid #eee;
              padding-bottom: 4px;
            }
            .medical-content {
              color: #666;
              margin-bottom: 15px;
            }
            .vitals {
              display: grid;
              grid-template-columns: repeat(4, 1fr);
              gap: 15px;
              margin-bottom: 20px;
            }
            .vital-item {
              text-align: center;
              padding: 10px;
              border: 1px solid #ddd;
              border-radius: 5px;
            }
            .vital-label {
              font-size: 12px;
              color: #666;
              margin-bottom: 5px;
            }
            .vital-value {
              font-size: 18px;
              font-weight: bold;
              color: #333;
            }
            .footer {
              margin-top: 40px;
              text-align: center;
              color: #666;
              font-size: 12px;
              border-top: 1px solid #ddd;
              padding-top: 20px;
            }
            @media print {
              body { 
                margin: 0; 
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
              }
              .header { page-break-after: avoid; }
              @page { size: auto; margin: 10mm; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            <h1>${t.clinicName||"Clinique Vtrinaire"}</h1>
            <div class="clinic-info">
              <p>${t.address||""}</p>
              <p>Tl: ${t.phone||""} | Email: ${t.email||""}</p>
            </div>
            <h2>Rapport de Consultation</h2>
          </div>

          <div class="consultation-info">
            <div class="info-section">
              <div class="info-title">Informations Client</div>
              <div class="info-content">
                <strong>Nom:</strong> ${((a=e.client)==null?void 0:a.first_name)||""} ${((i=e.client)==null?void 0:i.last_name)||""}<br>
                <strong>Tlphone:</strong> ${((o=e.client)==null?void 0:o.phone)||"N/A"}<br>
                <strong>Email:</strong> ${((l=e.client)==null?void 0:l.email)||"N/A"}
              </div>
            </div>
            
            <div class="info-section">
              <div class="info-title">Informations Animal</div>
              <div class="info-content">
                <strong>Nom:</strong> ${((c=e.animal)==null?void 0:c.name)||"N/A"}<br>
                <strong>Espce:</strong> ${((u=e.animal)==null?void 0:u.species)||"N/A"}<br>
                <strong>Race:</strong> ${((d=e.animal)==null?void 0:d.breed)||"N/A"}<br>
                <strong>ge:</strong> ${(h=e.animal)!=null&&h.birth_date?Math.floor((new Date().getTime()-new Date(e.animal.birth_date).getTime())/(365.25*24*60*60*1e3))+" ans":"N/A"}
              </div>
            </div>
          </div>

          <div class="info-section" style="margin-bottom: 20px;">
            <div class="info-title">Dtails de la Consultation</div>
            <div class="info-content">
              <strong>Date:</strong> ${new Date(e.consultation_date).toLocaleDateString("fr-FR")}<br>
              <strong>Type:</strong> ${e.consultation_type||"Routine"}<br>
              <strong>Statut:</strong> ${e.status||"Termin"}
            </div>
          </div>

          ${e.weight||e.temperature||e.heart_rate||e.respiratory_rate?`
          <div class="vitals">
            ${e.weight?`
            <div class="vital-item">
              <div class="vital-label">Poids</div>
              <div class="vital-value">${e.weight} kg</div>
            </div>
            `:""}
            ${e.temperature?`
            <div class="vital-item">
              <div class="vital-label">Temprature</div>
              <div class="vital-value">${e.temperature}C</div>
            </div>
            `:""}
            ${e.heart_rate?`
            <div class="vital-item">
              <div class="vital-label">Frquence Cardiaque</div>
              <div class="vital-value">${e.heart_rate} bpm</div>
            </div>
            `:""}
            ${e.respiratory_rate?`
            <div class="vital-item">
              <div class="vital-label">Frquence Respiratoire</div>
              <div class="vital-value">${e.respiratory_rate}/min</div>
            </div>
            `:""}
          </div>
          `:""}

          ${e.symptoms?`
          <div class="medical-section">
            <div class="medical-title">Symptmes</div>
            <div class="medical-content">${e.symptoms}</div>
          </div>
          `:""}

          ${e.diagnosis?`
          <div class="medical-section">
            <div class="medical-title">Diagnostic</div>
            <div class="medical-content">${e.diagnosis}</div>
          </div>
          `:""}

          ${e.treatment?`
          <div class="medical-section">
            <div class="medical-title">Traitement</div>
            <div class="medical-content">${e.treatment}</div>
          </div>
          `:""}

          ${e.notes?`
          <div class="medical-section">
            <div class="medical-title">Notes</div>
            <div class="medical-content">${e.notes}</div>
          </div>
          `:""}

          ${e.follow_up_date?`
          <div class="medical-section">
            <div class="medical-title">Suivi Programm</div>
            <div class="medical-content">
              <strong>Date:</strong> ${new Date(e.follow_up_date).toLocaleDateString("fr-FR")}<br>
              ${e.follow_up_notes?`<strong>Notes:</strong> ${e.follow_up_notes}`:""}
            </div>
          </div>
          `:""}

          ${e.cost?`
          <div class="medical-section">
            <div class="medical-title">Cot de la Consultation</div>
            <div class="medical-content">
              <strong>${e.cost} ${t.currency||"EUR"}</strong>
            </div>
          </div>
          `:""}

          <div class="footer">
            <p>Rapport gnr le ${new Date().toLocaleDateString("fr-FR")}  ${new Date().toLocaleTimeString("fr-FR")}</p>
            <p>Vtrinaire: ${e.veterinarian_id||"N/A"}</p>
          </div>
        </body>
      </html>
    `;m.document.open(),m.document.write(f),m.document.close(),m.onload=function(){try{setTimeout(()=>{m.focus(),m.print(),typeof m.onafterprint=="function"?m.onafterprint=function(){try{m.close()}catch(x){console.error("Error closing print window:",x)}}:setTimeout(()=>{try{m.close()}catch(x){console.error("Error closing print window after timeout:",x)}},2e3)},500)}catch(x){console.error("Error during print process:",x),alert("Une erreur s'est produite lors de l'impression. Veuillez ressayer.")}}}catch(m){console.error("Error in print function:",m),alert("Une erreur s'est produite lors de la prparation de l'impression. Veuillez ressayer.")}};return s.jsxs($,{size:"sm",variant:"outline",onClick:n,className:"gap-1",children:[s.jsx(pf,{className:"h-3 w-3"}),"Imprimer"]})}function b2({open:e,onOpenChange:t,petId:n,consultationId:r}){const{data:a=[]}=vn(),{data:i=[]}=fn(),{data:o=[]}=Yx(),l=Xee(),{toast:c}=it(),[u,d]=b.useState({diagnosis:"",notes:"",validUntil:""}),[h,m]=b.useState([{medication_name:"",dosage:"",frequency:"",duration:"",instructions:"",quantity:1,route:"oral"}]),f=i.find(j=>j.id===n),x=f?a.find(j=>j.id===f.client_id):null,g=o.filter(j=>(j.category==="medication"||j.category==="supplement")&&j.current_quantity>0&&j.active),p=j=>{const{name:N,value:C}=j.target;d(_=>({..._,[N]:C}))},v=(j,N,C)=>{m(_=>_.map((A,P)=>P===j?{...A,[N]:C}:A))},y=()=>{m(j=>[...j,{medication_name:"",dosage:"",frequency:"",duration:"",instructions:"",quantity:1,route:"oral"}])},w=j=>{h.length>1&&m(N=>N.filter((C,_)=>_!==j))},S=async j=>{if(j.preventDefault(),!f||!x){c({title:"Erreur",description:"Impossible de trouver l'animal ou le client associ.",variant:"destructive"});return}const N=h.filter(_=>_.medication_name.trim()!=="");if(N.length===0){c({title:"Erreur",description:"Veuillez ajouter au moins un mdicament  la prescription.",variant:"destructive"});return}const C={consultation_id:r,animal_id:f.id,client_id:x.id,diagnosis:u.diagnosis,notes:u.notes,valid_until:u.validUntil||void 0,medications:N};try{await l.mutateAsync(C),c({title:"Prescription cre",description:`Prescription cre avec succs pour ${f.name}.`}),t(!1),d({diagnosis:"",notes:"",validUntil:""}),m([{medication_name:"",dosage:"",frequency:"",duration:"",instructions:"",quantity:1,route:"oral"}])}catch(_){console.error("Error creating prescription:",_),c({title:"Erreur",description:"Une erreur est survenue lors de la cration de la prescription.",variant:"destructive"})}};return!f||!x?s.jsx(tt,{open:e,onOpenChange:t,children:s.jsx(et,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:s.jsxs(nt,{children:[s.jsx(rt,{children:"Erreur"}),s.jsx(At,{children:"Impossible de trouver l'animal ou le client associ."})]})})}):s.jsx(tt,{open:e,onOpenChange:t,children:s.jsxs(et,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(nt,{children:[s.jsx(rt,{children:"Nouvelle Prescription"}),s.jsxs(At,{children:["Crer une nouvelle prescription pour ",f.name," (",x.first_name," ",x.last_name,")"]})]}),s.jsxs("form",{onSubmit:S,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(M,{htmlFor:"diagnosis",children:"Diagnostic"}),s.jsx(Ke,{id:"diagnosis",name:"diagnosis",value:u.diagnosis,onChange:p,placeholder:"Entrez le diagnostic...",className:"h-20"})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"validUntil",children:"Valide jusqu'au (optionnel)"}),s.jsx(se,{id:"validUntil",name:"validUntil",type:"date",value:u.validUntil,onChange:p})]})]}),s.jsxs("div",{className:"space-y-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(M,{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Mdicaments"}),s.jsxs($,{type:"button",onClick:y,size:"sm",variant:"outline",children:[s.jsx(Ye,{className:"h-4 w-4 mr-2"}),"Ajouter un mdicament"]})]}),h.map((j,N)=>s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-6 space-y-4 bg-gray-50 dark:bg-gray-800",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h4",{className:"font-medium text-base text-gray-900 dark:text-gray-100",children:["Mdicament ",N+1]}),h.length>1&&s.jsx($,{type:"button",variant:"outline",size:"sm",onClick:()=>w(N),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",children:s.jsx(Wt,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"md:col-span-2 lg:col-span-1",children:[s.jsx(M,{className:"text-gray-700 dark:text-gray-300",children:"Mdicament *"}),s.jsxs(_e,{value:j.medication_name,onValueChange:C=>v(N,"medication_name",C),children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Slectionner ou taper..."})}),s.jsx(Se,{children:g.map(C=>s.jsxs(Q,{value:C.name,children:[C.name," (",C.current_quantity," ",C.unit,")"]},C.id))})]}),!g.find(C=>C.name===j.medication_name)&&s.jsx(se,{className:"mt-2",value:j.medication_name,onChange:C=>v(N,"medication_name",C.target.value),placeholder:"Nom du mdicament personnalis"})]}),s.jsxs("div",{children:[s.jsx(M,{className:"text-gray-700 dark:text-gray-300",children:"Dosage"}),s.jsx(se,{value:j.dosage||"",onChange:C=>v(N,"dosage",C.target.value),placeholder:"ex: 5mg"})]}),s.jsxs("div",{children:[s.jsx(M,{className:"text-gray-700 dark:text-gray-300",children:"Frquence"}),s.jsxs(_e,{value:j.frequency||"",onValueChange:C=>v(N,"frequency",C),children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Slectionner..."})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"1x/jour",children:"1 fois par jour"}),s.jsx(Q,{value:"2x/jour",children:"2 fois par jour"}),s.jsx(Q,{value:"3x/jour",children:"3 fois par jour"}),s.jsx(Q,{value:"1x/semaine",children:"1 fois par semaine"}),s.jsx(Q,{value:"selon besoin",children:"Selon besoin"})]})]})]}),s.jsxs("div",{children:[s.jsx(M,{className:"text-gray-700 dark:text-gray-300",children:"Dure"}),s.jsx(se,{value:j.duration||"",onChange:C=>v(N,"duration",C.target.value),placeholder:"ex: 7 jours"})]}),s.jsxs("div",{children:[s.jsx(M,{className:"text-gray-700 dark:text-gray-300",children:"Quantit *"}),s.jsx(se,{type:"number",min:"1",value:j.quantity,onChange:C=>v(N,"quantity",parseInt(C.target.value)||1)})]}),s.jsxs("div",{children:[s.jsx(M,{className:"text-gray-700 dark:text-gray-300",children:"Voie d'administration"}),s.jsxs(_e,{value:j.route||"oral",onValueChange:C=>v(N,"route",C),children:[s.jsx(Ne,{children:s.jsx(Ce,{})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"oral",children:"Orale"}),s.jsx(Q,{value:"injectable",children:"Injectable"}),s.jsx(Q,{value:"topique",children:"Topique"}),s.jsx(Q,{value:"intraveineuse",children:"Intraveineuse"}),s.jsx(Q,{value:"intramusculaire",children:"Intramusculaire"}),s.jsx(Q,{value:"sous-cutane",children:"Sous-cutane"})]})]})]})]}),s.jsxs("div",{children:[s.jsx(M,{className:"text-gray-700 dark:text-gray-300",children:"Instructions spciales"}),s.jsx(Ke,{value:j.instructions||"",onChange:C=>v(N,"instructions",C.target.value),placeholder:"Instructions particulires pour ce mdicament...",className:"h-16"})]})]},N)),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"notes",className:"text-gray-700 dark:text-gray-300",children:"Notes gnrales"}),s.jsx(Ke,{id:"notes",name:"notes",value:u.notes,onChange:p,placeholder:"Notes gnrales sur la prescription...",className:"h-20"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx($,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:l.isPending,children:"Annuler"}),s.jsx($,{type:"submit",disabled:l.isPending,children:l.isPending?"Cration...":"Crer la prescription"})]})]})]})})}const vEe=async e=>{try{const{data:{user:t},error:n}=await fe.auth.getUser();if(n||!t)return console.error("Authentication error:",n),{success:!1,message:"User not authenticated"};const{data:r,error:a}=await fe.from("consultations").select("id, animal_id, client_id, veterinarian_id").eq("id",e).single();if(a)return console.error(`Consultation not found: ${a.message}`),{success:!1,message:`Consultation not found: ${a.message}`};const{data:i,error:o}=await fe.from("prescriptions").select("id").eq("consultation_id",e);if(o)console.warn(`Could not fetch prescriptions: ${o.message}`);else if(i&&i.length>0)for(const d of i){const{error:h}=await fe.from("prescription_medications").delete().eq("prescription_id",d.id);h&&console.warn(`Could not delete medications for prescription ${d.id}: ${h.message}`)}const{error:l}=await fe.from("prescriptions").delete().eq("consultation_id",e);l&&console.warn(`Could not delete prescriptions: ${l.message}`);const c=["vaccinations","lab_results","antiparasitics"];for(const d of c)try{const{error:h}=await fe.from(d).delete().eq("consultation_id",e);h&&console.warn(`Could not delete from ${d}: ${h.message}`)}catch(h){console.warn(`Error with ${d}:`,h)}const{error:u}=await fe.from("consultations").delete().eq("id",e);return u?(console.error(`FAILED to delete consultation: ${u.message}`),{success:!1,message:`Failed to delete consultation: ${u.message}`}):{success:!0}}catch(t){return console.error(" CRITICAL ERROR during deletion:",t),{success:!1,message:`Critical error: ${(t==null?void 0:t.message)||"Unknown error"}`}}},Kd=b.forwardRef(({className:e,...t},n)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:n,className:Me("w-full caption-bottom text-sm",e),...t})}));Kd.displayName="Table";const Gd=b.forwardRef(({className:e,...t},n)=>s.jsx("thead",{ref:n,className:Me("[&_tr]:border-b",e),...t}));Gd.displayName="TableHeader";const Yd=b.forwardRef(({className:e,...t},n)=>s.jsx("tbody",{ref:n,className:Me("[&_tr:last-child]:border-0",e),...t}));Yd.displayName="TableBody";const xEe=b.forwardRef(({className:e,...t},n)=>s.jsx("tfoot",{ref:n,className:Me("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));xEe.displayName="TableFooter";const ea=b.forwardRef(({className:e,...t},n)=>s.jsx("tr",{ref:n,className:Me("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));ea.displayName="TableRow";const ct=b.forwardRef(({className:e,...t},n)=>s.jsx("th",{ref:n,className:Me("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));ct.displayName="TableHead";const ut=b.forwardRef(({className:e,...t},n)=>s.jsx("td",{ref:n,className:Me("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));ut.displayName="TableCell";const yEe=b.forwardRef(({className:e,...t},n)=>s.jsx("caption",{ref:n,className:Me("mt-4 text-sm text-muted-foreground",e),...t}));yEe.displayName="TableCaption";const wEe=()=>{var ge;const{data:e=[],isLoading:t}=Ps(),{data:n=[]}=Gx();tL(),nL();const r=$ee();Zt();const{toast:a}=it(),{currentView:i}=Hd("consultations"),[o,l]=b.useState(""),[c,u]=b.useState("all"),[d,h]=b.useState(i),[m,f]=b.useState(!1),[x,g]=b.useState(!1),[p,v]=b.useState(null),[y,w]=b.useState(null),[S,j]=b.useState(!1),[N,C]=b.useState(null),[_,A]=b.useState(null),[P,T]=b.useState(!1),[E,I]=b.useState([]),[R,z]=b.useState(""),[U,K]=b.useState(!1),[k,D]=b.useState(null),J=H=>n.filter(G=>G.consultation_id===H),W=e.filter(H=>{var Pe,Ee,dt;const G=`${((Pe=H.client)==null?void 0:Pe.first_name)||""} ${((Ee=H.client)==null?void 0:Ee.last_name)||""}`.trim(),ue=((dt=H.animal)==null?void 0:dt.name)||"",re=G.toLowerCase().includes(o.toLowerCase())||ue.toLowerCase().includes(o.toLowerCase())||H.symptoms&&H.symptoms.toLowerCase().includes(o.toLowerCase())||H.diagnosis&&H.diagnosis.toLowerCase().includes(o.toLowerCase());if(c==="all")return re;const ve=new Date(H.consultation_date),ee=(new Date().getTime()-ve.getTime())/(1e3*3600*24);switch(c){case"week":return re&&ee<=7;case"month":return re&&ee<=30;case"quarter":return re&&ee<=90;default:return re}}),Y=H=>{v(H),g(!0)},V=H=>{C(H.animal_id),A(H.id),j(!0)},O=H=>{D(H),K(!0)},le=async()=>{if(k)try{if((await vEe(k.id)).success){a({title:"Succs",description:"La consultation a t supprime avec succs."}),window.location.reload(),K(!1),D(null);return}r.mutate(k.id,{onSuccess:()=>{a({title:"Succs",description:"La consultation a t supprime avec succs."}),K(!1),D(null)},onError:G=>{a({title:"Erreur",description:`Impossible de supprimer la consultation: ${G.message}`,variant:"destructive"}),K(!1),D(null)}})}catch(H){a({title:"Erreur",description:`Erreur inattendue: ${H.message||"Erreur inconnue"}`,variant:"destructive"}),K(!1),D(null)}},te=H=>{w({clientId:H.client_id,animalId:H.animal_id,consultation_date:new Date().toISOString(),consultation_type:"follow-up",symptoms:"",diagnosis:"",treatment:"",notes:`Suivi de la consultation du ${new Date(H.consultation_date).toLocaleDateString("fr-FR")}`,status:"scheduled"}),f(!0)},ce=H=>{var ue;const G=J(H.id);I(G),z(((ue=H.animal)==null?void 0:ue.name)||"Animal inconnu"),T(!0)};return s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-4 sm:py-8 space-y-4 sm:space-y-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Consultations"}),s.jsx("p",{className:"text-muted-foreground mt-1 sm:mt-2 text-sm sm:text-base",children:"Grez et consultez tous les dossiers mdicaux"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex border rounded-lg p-1",children:[s.jsx($,{variant:d==="cards"?"default":"ghost",size:"sm",onClick:()=>h("cards"),className:"px-3",children:s.jsx(_o,{className:"h-4 w-4"})}),s.jsx($,{variant:d==="table"?"default":"ghost",size:"sm",onClick:()=>h("table"),className:"px-3",children:s.jsx(vi,{className:"h-4 w-4"})})]}),s.jsxs($,{className:"gap-2 medical-glow text-sm sm:text-base",onClick:()=>f(!0),children:[s.jsx(Ye,{className:"h-4 w-4"}),"Nouvelle Consultation"]})]})]}),s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsxs(ye,{className:"flex items-center gap-2 text-base sm:text-lg",children:[s.jsx(Si,{className:"h-4 sm:h-5 w-4 sm:w-5"}),"Rechercher et filtrer"]})}),s.jsx(oe,{className:"space-y-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsx(se,{placeholder:"Rechercher par client, animal, symptmes ou diagnostic...",value:o,onChange:H=>l(H.target.value),className:"max-w-full sm:max-w-md"}),s.jsxs(_e,{value:c,onValueChange:u,children:[s.jsx(Ne,{className:"w-full sm:w-48",children:s.jsx(Ce,{placeholder:"Priode"})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"all",children:"Toutes les priodes"}),s.jsx(Q,{value:"week",children:"Cette semaine"}),s.jsx(Q,{value:"month",children:"Ce mois"}),s.jsx(Q,{value:"quarter",children:"Ce trimestre"})]})]})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-base sm:text-lg font-semibold",children:["Consultations rcentes (",W.length,")"]}),W.length===0?s.jsx(ie,{children:s.jsxs(oe,{className:"p-6 sm:p-8 text-center text-muted-foreground",children:[s.jsx(ts,{className:"h-10 sm:h-12 w-10 sm:w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{className:"text-sm sm:text-base",children:"Aucune consultation trouve"}),s.jsx("p",{className:"text-xs sm:text-sm",children:"Commencez par crer votre premire consultation"})]})}):d==="cards"?W.map(H=>{var G,ue,re;return s.jsx(ie,{className:"card-hover",children:s.jsx(oe,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[s.jsx("h4",{className:"text-base sm:text-lg font-semibold",children:((G=H.animal)==null?void 0:G.name)||"Animal inconnu"}),s.jsx(Ie,{variant:"secondary",className:"w-fit",children:"Consultation"}),s.jsx("span",{className:"text-xs sm:text-sm text-muted-foreground",children:new Date(H.consultation_date).toLocaleDateString("fr-FR")})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-6 text-xs sm:text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Kn,{className:"h-3 sm:h-4 w-3 sm:w-4"}),(ue=H.client)==null?void 0:ue.first_name," ",(re=H.client)==null?void 0:re.last_name]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ts,{className:"h-3 w-3"}),"Consultation #",H.id]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 text-xs sm:text-sm",children:[H.temperature&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(cS,{className:"h-3 sm:h-4 w-3 sm:w-4 text-primary"}),H.temperature,"C"]}),H.weight&&s.jsxs("span",{children:[H.weight," kg"]})]})]}),s.jsxs("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[H.symptoms&&s.jsxs(s.Fragment,{children:[s.jsx("h5",{className:"font-medium text-sm sm:text-base",children:"Symptmes:"}),s.jsx("p",{className:"text-xs sm:text-sm",children:H.symptoms})]}),H.diagnosis&&s.jsxs(s.Fragment,{children:[s.jsx("h5",{className:"font-medium text-sm sm:text-base",children:"Diagnostic:"}),s.jsx("p",{className:"text-xs sm:text-sm",children:H.diagnosis})]})]}),s.jsxs("div",{className:"space-y-2",children:[H.treatment&&s.jsxs(s.Fragment,{children:[s.jsx("h5",{className:"font-medium text-sm sm:text-base",children:"Traitement:"}),s.jsx("p",{className:"text-xs sm:text-sm",children:H.treatment})]}),(()=>{const ve=J(H.id);return ve.length>0&&s.jsxs(s.Fragment,{children:[s.jsxs("h5",{className:"font-medium flex items-center gap-1 text-sm sm:text-base",children:[s.jsx(Hi,{className:"h-3 sm:h-4 w-3 sm:w-4"}),"Prescriptions (",ve.length,"):"]}),s.jsx("div",{className:"space-y-1",children:ve.map(pe=>s.jsxs("div",{className:"text-xs sm:text-sm bg-blue-50 p-2 rounded border-l-2 border-blue-200",children:[s.jsxs("div",{className:"font-medium text-blue-800",children:["Prescription #",pe.id.slice(-8)]}),s.jsxs("div",{className:"text-blue-600 text-xs",children:[new Date(pe.prescription_date).toLocaleDateString("fr-FR")," - Status: ",pe.status]}),pe.medications&&pe.medications.length>0&&s.jsxs("div",{className:"mt-1",children:[s.jsx("div",{className:"text-xs font-medium text-blue-700",children:"Mdicaments:"}),pe.medications.map((ee,Pe)=>s.jsxs("div",{className:"text-xs text-blue-600 ml-2",children:[" ",ee.medication_name," ",ee.dosage&&`- ${ee.dosage}`," ",ee.quantity&&`(${ee.quantity})`]},Pe))]})]},pe.id))})]})})()]})]}),H.notes&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h5",{className:"font-medium text-sm sm:text-base",children:"Notes:"}),s.jsx("p",{className:"text-xs sm:text-sm bg-muted p-2 sm:p-3 rounded",children:H.notes})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between pt-2 border-t gap-2",children:[s.jsxs("span",{className:"text-xs sm:text-sm text-muted-foreground",children:[s.jsx(Ze,{className:"h-3 w-3 inline mr-1"}),H.followUp?`Suivi: ${H.followUp}`:"Aucun suivi prvu"]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(AO,{consultation:H}),s.jsxs($,{size:"sm",variant:"outline",onClick:()=>Y(H),className:"gap-1 text-xs sm:text-sm",children:[s.jsx(It,{className:"h-3 w-3"}),"Modifier"]}),s.jsxs($,{size:"sm",variant:"default",onClick:()=>V(H),className:"gap-1 text-xs sm:text-sm",children:[s.jsx(Hi,{className:"h-3 w-3"}),"Prescription"]}),s.jsxs($,{size:"sm",variant:"outline",onClick:()=>O(H),className:"gap-1 text-red-600 hover:text-red-700 hover:bg-red-50",children:[s.jsx(Wt,{className:"h-3 w-3"}),"Supprimer"]}),s.jsx($,{size:"sm",onClick:()=>te(H),className:"text-xs sm:text-sm",children:"Nouveau suivi"})]})]})]})})},H.id)}):s.jsx(ie,{children:s.jsx(oe,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Kd,{children:[s.jsx(Gd,{children:s.jsxs(ea,{children:[s.jsx(ct,{className:"text-xs sm:text-sm",children:"Animal / Client"}),s.jsx(ct,{className:"text-xs sm:text-sm",children:"Date"}),s.jsx(ct,{className:"text-xs sm:text-sm",children:"Symptmes"}),s.jsx(ct,{className:"text-xs sm:text-sm",children:"Diagnostic"}),s.jsx(ct,{className:"text-xs sm:text-sm",children:"Temprature"}),s.jsx(ct,{className:"text-xs sm:text-sm",children:"Prescriptions"}),s.jsx(ct,{className:"text-xs sm:text-sm",children:"Actions"})]})}),s.jsx(Yd,{children:W.map(H=>{var G,ue,re;return s.jsxs(ea,{children:[s.jsx(ut,{className:"text-xs sm:text-sm",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:(G=H.animal)==null?void 0:G.name}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[(ue=H.client)==null?void 0:ue.first_name," ",(re=H.client)==null?void 0:re.last_name]})]})}),s.jsx(ut,{className:"text-xs sm:text-sm",children:new Date(H.consultation_date).toLocaleDateString("fr-FR")}),s.jsx(ut,{className:"text-xs sm:text-sm",children:s.jsx("div",{className:"max-w-xs truncate",children:H.symptoms||"-"})}),s.jsx(ut,{className:"text-xs sm:text-sm",children:s.jsx("div",{className:"max-w-xs truncate",children:H.diagnosis||"-"})}),s.jsx(ut,{className:"text-xs sm:text-sm",children:H.temperature?`${H.temperature}C`:"-"}),s.jsx(ut,{className:"text-xs sm:text-sm",children:(()=>{const ve=J(H.id);return ve.length>0?s.jsx("div",{className:"space-y-1",children:s.jsxs("div",{className:"flex items-center gap-2 cursor-pointer p-1 rounded transition-colors w-fit",onClick:()=>ce(H),title:"Cliquer pour voir les dtails des prescriptions",children:[s.jsxs(Ie,{variant:"outline",className:"text-xs",children:[ve.length," prescription",ve.length>1?"s":""]}),s.jsx($n,{className:"h-3 w-3 text-blue-600 hover:text-blue-800"})]})}):s.jsx("span",{className:"text-muted-foreground text-xs",children:"Aucune"})})()}),s.jsx(ut,{className:"text-xs sm:text-sm",children:s.jsxs("div",{className:"flex gap-1 flex-wrap",children:[s.jsx(AO,{consultation:H}),s.jsx($,{size:"sm",variant:"outline",onClick:()=>Y(H),title:"Modifier",children:s.jsx(It,{className:"h-3 w-3"})}),s.jsx($,{size:"sm",variant:"default",onClick:()=>V(H),title:"Nouvelle Prescription",children:s.jsx(Hi,{className:"h-3 w-3"})}),s.jsx($,{size:"sm",variant:"outline",onClick:()=>O(H),className:"text-red-600 hover:text-red-700 hover:bg-red-50",title:"Supprimer",children:s.jsx(Wt,{className:"h-3 w-3"})})]})})]},H.id)})})]})})})})]}),s.jsx(Jx,{open:m,onOpenChange:H=>{f(H),H||w(null)},prefillData:y||void 0}),s.jsx(gEe,{open:x,onOpenChange:g,consultation:p}),N&&_&&s.jsx(b2,{open:S,onOpenChange:j,petId:N,consultationId:_}),s.jsx(tt,{open:P,onOpenChange:T,children:s.jsxs(et,{className:"max-w-full sm:max-w-4xl max-h-[80vh] overflow-y-auto mx-4",children:[s.jsxs(nt,{children:[s.jsxs(rt,{className:"flex items-center gap-2 text-base sm:text-lg",children:[s.jsx(Hi,{className:"h-4 sm:h-5 w-4 sm:w-5"}),"Prescriptions pour ",R]}),s.jsxs(At,{className:"text-sm",children:["Dtails des ",E.length," prescription",E.length>1?"s":""," associe",E.length>1?"s":"","  cette consultation"]})]}),s.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[E.map((H,G)=>s.jsxs(ie,{className:"border-l-4 border-l-primary",children:[s.jsxs(xe,{className:"pb-3",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[s.jsxs(ye,{className:"text-base sm:text-lg",children:["Prescription #",H.id.slice(-8)]}),s.jsx(Ie,{variant:H.status==="active"?"default":H.status==="completed"?"secondary":"destructive",className:"text-xs w-fit",children:H.status})]}),s.jsxs("div",{className:"text-xs sm:text-sm text-muted-foreground",children:["Date: ",new Date(H.prescription_date).toLocaleDateString("fr-FR"),"  ",new Date(H.prescription_date).toLocaleTimeString("fr-FR"),H.valid_until&&s.jsxs("span",{className:"ml-0 sm:ml-4 block sm:inline",children:["Valide jusqu'au: ",new Date(H.valid_until).toLocaleDateString("fr-FR")]})]})]}),s.jsxs(oe,{className:"space-y-4",children:[H.diagnosis&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-sm mb-1",children:"Diagnostic:"}),s.jsx("p",{className:"text-sm bg-muted p-2 rounded",children:H.diagnosis})]}),H.medications&&H.medications.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium text-sm mb-2",children:["Mdicaments (",H.medications.length,"):"]}),s.jsx("div",{className:"grid gap-3 grid-cols-1 sm:grid-cols-2",children:H.medications.map((ue,re)=>s.jsxs("div",{className:"bg-muted p-3 rounded-lg",children:[s.jsx("div",{className:"font-medium text-sm",children:ue.medication_name}),s.jsxs("div",{className:"text-xs space-y-1 mt-1",children:[ue.dosage&&s.jsxs("div",{children:["Dosage: ",ue.dosage]}),ue.frequency&&s.jsxs("div",{children:["Frquence: ",ue.frequency]}),ue.duration&&s.jsxs("div",{children:["Dure: ",ue.duration]}),ue.quantity&&s.jsxs("div",{children:["Quantit: ",ue.quantity]}),ue.route&&s.jsxs("div",{children:["Voie: ",ue.route]})]}),ue.instructions&&s.jsxs("div",{className:"mt-2 text-xs bg-background p-2 rounded border",children:[s.jsx("span",{className:"font-medium",children:"Instructions: "}),ue.instructions]})]},re))})]}),H.notes&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-sm mb-1",children:"Notes:"}),s.jsx("p",{className:"text-sm bg-muted p-2 rounded",children:H.notes})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 text-xs text-muted-foreground pt-2 border-t",children:[s.jsxs("span",{children:["Renouvellements: ",H.refill_count||0]}),s.jsxs("span",{children:["Cre le: ",new Date(H.created_at).toLocaleDateString("fr-FR")]}),H.updated_at!==H.created_at&&s.jsxs("span",{children:["Modifie le: ",new Date(H.updated_at).toLocaleDateString("fr-FR")]})]})]})]},H.id)),E.length===0&&s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Hi,{className:"h-10 sm:h-12 w-10 sm:w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{className:"text-sm",children:"Aucune prescription trouve pour cette consultation"})]})]})]})}),s.jsx(y2,{open:U,onOpenChange:K,children:s.jsxs(Hy,{children:[s.jsxs(Ky,{children:[s.jsx(Yy,{children:"Confirmer la suppression"}),s.jsxs(Qy,{children:["tes-vous sr de vouloir supprimer cette consultation pour"," ",s.jsx("strong",{children:((ge=k==null?void 0:k.animal)==null?void 0:ge.name)||"cet animal"})," ?",s.jsx("br",{}),s.jsxs("span",{className:"text-sm text-muted-foreground mt-2 block",children:["Date: ",k&&new Date(k.consultation_date).toLocaleDateString("fr-FR")]}),s.jsx("br",{}),"Cette action est irrversible et supprimera galement toutes les prescriptions associes."]})]}),s.jsxs(Gy,{children:[s.jsx(Jy,{onClick:()=>D(null),children:"Annuler"}),s.jsx(Xy,{onClick:le,className:"bg-red-600 hover:bg-red-700",children:"Supprimer"})]})]})})]})};function bEe({open:e,onOpenChange:t,prescription:n}){const{updatePrescription:r}=Fa(),{toast:a}=it(),[i,o]=b.useState({date:"",prescribedBy:"",diagnosis:"",instructions:"",duration:"",followUpDate:"",status:"",notes:""}),[l,c]=b.useState([]);b.useEffect(()=>{e&&n&&(o({date:n.date,prescribedBy:n.prescribedBy,diagnosis:n.diagnosis,instructions:n.instructions,duration:n.duration,followUpDate:n.followUpDate||"",status:n.status,notes:n.notes||""}),c([...n.medications]))},[e,n]);const u=p=>{o(v=>({...v,[p.target.id]:p.target.value}))},d=(p,v)=>{o(y=>({...y,[p]:v}))},h=(p,v,y)=>{const w=[...l];w[p]={...w[p],[v]:v==="quantity"||v==="refills"||v==="cost"?Number(y):y},c(w)},m=()=>{const p=Math.max(...l.map(v=>v.id),0)+1;c([...l,{id:p,name:"",dosage:"",frequency:"",duration:"",instructions:"",quantity:1,unit:"comprims",refills:0,cost:0}])},f=p=>{l.length>1&&c(l.filter((v,y)=>y!==p))},x=p=>{if(p.preventDefault(),!n)return;const v=l.filter(y=>y.name.trim()!=="");if(v.length===0){a({title:"Erreur",description:"Au moins un mdicament doit tre spcifi.",variant:"destructive"});return}r(n.id,{date:i.date,prescribedBy:i.prescribedBy,diagnosis:i.diagnosis,medications:v,instructions:i.instructions,duration:i.duration,followUpDate:i.followUpDate||void 0,status:i.status,notes:i.notes}),a({title:"Prescription mise  jour",description:"La prescription a t modifie avec succs."}),t(!1)},g=()=>l.reduce((p,v)=>p+(v.cost||0),0);return n?s.jsx(tt,{open:e,onOpenChange:t,children:s.jsxs(et,{className:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[s.jsxs(nt,{children:[s.jsxs(rt,{className:"flex items-center gap-2",children:[s.jsx(Hi,{className:"h-5 w-5"}),"Modifier la Prescription"]}),s.jsxs(At,{children:["Modifiez la prescription pour ",n.petName," (",n.clientName,")."]})]}),s.jsxs("form",{onSubmit:x,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"date",children:"Date de prescription *"}),s.jsx(se,{id:"date",type:"date",value:i.date,onChange:u,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"prescribedBy",children:"Prescrit par *"}),s.jsx(se,{id:"prescribedBy",value:i.prescribedBy,onChange:u,required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"diagnosis",children:"Diagnostic *"}),s.jsx(se,{id:"diagnosis",value:i.diagnosis,onChange:u,required:!0})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"duration",children:"Dure du traitement"}),s.jsx(se,{id:"duration",value:i.duration,onChange:u})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"followUpDate",children:"Date de suivi"}),s.jsx(se,{id:"followUpDate",type:"date",value:i.followUpDate,onChange:u,min:i.date})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Statut"}),s.jsxs(_e,{value:i.status,onValueChange:p=>d("status",p),children:[s.jsx(Ne,{children:s.jsx(Ce,{})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"active",children:"Active"}),s.jsx(Q,{value:"completed",children:"Termine"}),s.jsx(Q,{value:"discontinued",children:"Arrte"})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(M,{className:"text-base font-medium",children:"Mdicaments prescrits"}),s.jsxs($,{type:"button",variant:"outline",size:"sm",onClick:m,className:"gap-2",children:[s.jsx(Ye,{className:"h-4 w-4"}),"Ajouter mdicament"]})]}),s.jsx("div",{className:"space-y-4",children:l.map((p,v)=>s.jsxs("div",{className:"p-4 border rounded-lg space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h4",{className:"font-medium",children:["Mdicament ",v+1]}),l.length>1&&s.jsx($,{type:"button",variant:"outline",size:"sm",onClick:()=>f(v),className:"text-red-600 hover:text-red-700",children:s.jsx(Wt,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Nom du mdicament *"}),s.jsx(se,{value:p.name,onChange:y=>h(v,"name",y.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Dosage *"}),s.jsx(se,{value:p.dosage,onChange:y=>h(v,"dosage",y.target.value),required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Frquence *"}),s.jsx(se,{value:p.frequency,onChange:y=>h(v,"frequency",y.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Dure"}),s.jsx(se,{value:p.duration,onChange:y=>h(v,"duration",y.target.value)})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Quantit"}),s.jsx(se,{type:"number",value:p.quantity,onChange:y=>h(v,"quantity",parseInt(y.target.value)),min:"1"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Unit"}),s.jsxs(_e,{value:p.unit,onValueChange:y=>h(v,"unit",y),children:[s.jsx(Ne,{children:s.jsx(Ce,{})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"comprims",children:"Comprims"}),s.jsx(Q,{value:"ml",children:"ml"}),s.jsx(Q,{value:"g",children:"g"}),s.jsx(Q,{value:"mg",children:"mg"}),s.jsx(Q,{value:"ampoules",children:"Ampoules"}),s.jsx(Q,{value:"flacons",children:"Flacons"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Cot ()"}),s.jsx(se,{type:"number",step:"0.01",value:p.cost,onChange:y=>h(v,"cost",parseFloat(y.target.value)),min:"0"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Instructions spcifiques"}),s.jsx(se,{value:p.instructions,onChange:y=>h(v,"instructions",y.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Renouvellements"}),s.jsx(se,{type:"number",value:p.refills,onChange:y=>h(v,"refills",parseInt(y.target.value)),min:"0"})]})]})]},p.id))}),s.jsx("div",{className:"flex justify-end",children:s.jsxs(Ie,{variant:"outline",className:"text-lg px-4 py-2",children:["Cot total: ",g().toFixed(2),""]})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"instructions",children:"Instructions gnrales"}),s.jsx(Ke,{id:"instructions",value:i.instructions,onChange:u,rows:3})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"notes",children:"Notes"}),s.jsx(Ke,{id:"notes",value:i.notes,onChange:u,rows:2})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx($,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsxs($,{type:"submit",className:"gap-2",children:[s.jsx(nu,{className:"h-4 w-4"}),"Sauvegarder"]})]})]})]})}):null}const jEe="vetpro-veterinarians";function sN({prescription:e}){const{settings:t}=Zt();JSON.parse(localStorage.getItem(jEe)||"[]");const n=e.prescribedBy,r=()=>{if(!e||!e.petName||!e.clientName)return;const a=window.open("","_blank");if(!a)return;const i=`
      <html>
        <head>
          <title>Prescription - ${e.petName}</title>
          <style>
            body {
              font-family: Arial, sans-serif;
              margin: 20px;
              line-height: 1.6;
            }
            .header {
              text-align: center;
              border-bottom: 2px solid #333;
              padding-bottom: 20px;
              margin-bottom: 30px;
            }
            .clinic-info {
              margin-bottom: 30px;
            }
            .patient-info {
              margin-bottom: 30px;
            }
            .prescription-details {
              margin-bottom: 30px;
            }
            .medications {
              margin-bottom: 30px;
            }
            .medication-item {
              border: 1px solid #ccc;
              padding: 15px;
              margin-bottom: 15px;
              border-radius: 5px;
            }
            .instructions {
              margin-bottom: 30px;
            }
            .footer {
              margin-top: 50px;
              text-align: center;
            }
            .signature-line {
              border-top: 1px solid #333;
              width: 200px;
              margin: 20px auto;
            }
            table {
              width: 100%;
              border-collapse: collapse;
              margin-bottom: 20px;
            }
            th, td {
              border: 1px solid #ddd;
              padding: 8px;
              text-align: left;
            }
            th {
              background-color: #f2f2f2;
            }
            .total-cost {
              font-weight: bold;
              text-align: right;
              margin-top: 20px;
            }
          </style>
        </head>
        <body>
          <div class="header">
            ${t.logo?`<img src="${t.logo}" alt="Logo clinique" style="height:60px;margin-bottom:10px;"/>`:""}
            <h1>PRESCRIPTION MDICALE</h1>
            <h2>${t.clinicName}</h2>
            <p>${t.address}<br>
            Tl: ${t.phone} | Email: ${t.email}</p>
          </div>

          <div class="clinic-info">
            <strong>Date de prescription:</strong> ${new Date(e.date).toLocaleDateString("fr-FR")}<br>
            <strong>Prescrit par:</strong> ${n}
          </div>

          <div class="patient-info">
            <h3>Informations du patient</h3>
            <table>
              <tr>
                <th>Propritaire</th>
                <td>${e.clientName}</td>
              </tr>
              <tr>
                <th>Animal</th>
                <td>${e.petName}</td>
              </tr>
              <tr>
                <th>Diagnostic</th>
                <td>${e.diagnosis}</td>
              </tr>
              <tr>
                <th>Dure du traitement</th>
                <td>${e.duration}</td>
              </tr>
            </table>
          </div>

          <div class="medications">
            <h3>Mdicaments prescrits</h3>
            ${e.medications.map(o=>`
              <div class="medication-item">
                <h4>${o.name}</h4>
                <table>
                  <tr>
                    <th>Posologie</th>
                    <td>${o.dosage} - ${o.frequency}</td>
                  </tr>
                  <tr>
                    <th>Dure</th>
                    <td>${o.duration}</td>
                  </tr>
                  <tr>
                    <th>Quantit</th>
                    <td>${o.quantity} ${o.unit}</td>
                  </tr>
                  ${o.refills&&o.refills>0?`
                    <tr>
                      <th>Renouvellements</th>
                      <td>${o.refills}</td>
                    </tr>
                  `:""}
                  ${o.instructions?`
                    <tr>
                      <th>Instructions</th>
                      <td>${o.instructions}</td>
                    </tr>
                  `:""}
                  ${o.cost?`
                    <tr>
                      <th>Cot</th>
                      <td>${o.cost.toFixed(2)}</td>
                    </tr>
                  `:""}
                </table>
              </div>
            `).join("")}
            
            <div class="total-cost">
              Cot total: ${e.medications.reduce((o,l)=>o+(l.cost||0),0).toFixed(2)}
            </div>
          </div>

          ${e.instructions?`
            <div class="instructions">
              <h3>Instructions gnrales</h3>
              <p>${e.instructions}</p>
            </div>
          `:""}

          ${e.followUpDate?`
            <div class="instructions">
              <h3>Suivi</h3>
              <p><strong>Date de suivi prvue:</strong> ${new Date(e.followUpDate).toLocaleDateString("fr-FR")}</p>
            </div>
          `:""}

          ${e.notes?`
            <div class="instructions">
              <h3>Notes</h3>
              <p>${e.notes}</p>
            </div>
          `:""}

          <div class="footer">
            <div class="signature-line"></div>
            <p>Signature du vtrinaire</p>
            <p><small>Cette prescription est valable pour la dure du traitement prescrit.</small></p>
          </div>
        </body>
      </html>
    `;a.document.write(i),a.document.close(),setTimeout(()=>{a.print(),a.close()},500)};return s.jsxs($,{size:"sm",variant:"outline",onClick:r,className:"gap-2",children:[s.jsx(pf,{className:"h-4 w-4"}),"Gnrer Ordonnance"]})}const NEe={active:"bg-green-100 text-green-800",completed:"bg-gray-100 text-gray-800",discontinued:"bg-red-100 text-red-800"},SEe={active:"Active",completed:"Termine",discontinued:"Arrte"};function _Ee({petId:e,consultationId:t}){const{data:n=[]}=Gx(),{data:r=[]}=Qee(e),{toast:a}=it(),[i,o]=b.useState(!1),[l,c]=b.useState(!1),[u,d]=b.useState(null),h=t?n.filter(v=>v.consultation_id===t):r,m=v=>{d(v),c(!0)},f=v=>{var y;confirm(`tes-vous sr de vouloir supprimer la prescription pour ${((y=v.medications)==null?void 0:y.map(w=>w.medication_name).join(", "))||"mdicaments"} ?`)&&a({title:"Fonctionnalit  implmenter",description:"La suppression de prescription n'est pas encore implmente."})},x=v=>{switch(v){case"active":return s.jsx(ps,{className:"h-4 w-4 text-green-600"});case"completed":return s.jsx(On,{className:"h-4 w-4 text-gray-600"});case"discontinued":return s.jsx($l,{className:"h-4 w-4 text-red-600"});default:return s.jsx($t,{className:"h-4 w-4 text-gray-600"})}},g=v=>{var y,w,S,j;return{id:v.id,consultationId:v.consultation_id,clientId:v.client_id,clientName:`${((y=v.client)==null?void 0:y.first_name)||""} ${((w=v.client)==null?void 0:w.last_name)||""}`.trim(),petId:v.animal_id,petName:((S=v.animal)==null?void 0:S.name)||"",date:v.prescription_date,prescribedBy:"Non spcifi",diagnosis:v.diagnosis||"",medications:((j=v.medications)==null?void 0:j.map(N=>({id:N.id,name:N.medication_name,dosage:N.dosage||"",frequency:N.frequency||"",duration:N.duration||"",instructions:N.instructions||"",quantity:N.quantity||1,unit:"unit",cost:0})))||[],instructions:v.notes||"",duration:v.valid_until||"",followUpDate:void 0,status:v.status||"active",notes:v.notes||"",createdAt:v.created_at}},p=v=>(v==null?void 0:v.reduce((y,w)=>y+(w.cost||0),0))||0;return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[s.jsx(Hi,{className:"h-5 w-5"}),"Prescriptions (",h.length,")"]}),s.jsxs($,{size:"sm",onClick:()=>o(!0),disabled:!t,className:"gap-2",children:[s.jsx(Ye,{className:"h-4 w-4"}),"Nouvelle Prescription"]})]}),h.length===0?s.jsx(ie,{children:s.jsxs(oe,{className:"p-6 text-center text-muted-foreground",children:[s.jsx(Hi,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"Aucune prescription trouve"}),s.jsx("p",{className:"text-sm",children:"Commencez par crer une nouvelle prescription"})]})}):s.jsx("div",{className:"space-y-4",children:h.sort((v,y)=>new Date(y.prescription_date||y.date).getTime()-new Date(v.prescription_date||v.date).getTime()).map(v=>{var y;return s.jsxs(ie,{className:"card-hover",children:[s.jsx(xe,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[x(v.status),s.jsx(Ie,{className:NEe[v.status],children:SEe[v.status]})]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx(Ze,{className:"h-4 w-4 inline mr-1"}),new Date(v.prescription_date||v.date).toLocaleDateString("fr-FR")]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(sN,{prescription:g(v)}),s.jsx($,{size:"sm",variant:"outline",onClick:()=>m(v),className:"h-8 w-8 p-0",title:"Modifier",children:s.jsx(It,{className:"h-3 w-3"})}),s.jsx($,{size:"sm",variant:"outline",onClick:()=>f(v),className:"h-8 w-8 p-0 text-red-600",title:"Supprimer",children:s.jsx(Wt,{className:"h-3 w-3"})})]})]})}),s.jsxs(oe,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Prescrit par:"}),s.jsx("p",{className:"text-muted-foreground",children:"Non spcifi"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Diagnostic:"}),s.jsx("p",{className:"text-muted-foreground",children:v.diagnosis})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Dure:"}),s.jsx("p",{className:"text-muted-foreground",children:v.valid_until?new Date(v.valid_until).toLocaleDateString("fr-FR"):"N/A"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Cot total:"}),s.jsxs("p",{className:"text-muted-foreground",children:[p(v.medications).toFixed(2),""]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-3",children:"Mdicaments prescrits:"}),s.jsx("div",{className:"space-y-3",children:(y=v.medications)==null?void 0:y.map(w=>s.jsx("div",{className:"p-3 border rounded-lg bg-muted/30",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"font-medium",children:w.medication_name}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx("span",{className:"font-medium",children:"Posologie:"})," ",w.dosage," - ",w.frequency]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx("span",{className:"font-medium",children:"Dure:"})," ",w.duration]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx("span",{className:"font-medium",children:"Quantit:"})," ",w.quantity]}),w.instructions&&s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx("span",{className:"font-medium",children:"Instructions:"})," ",w.instructions]})]}),w.cost&&s.jsx("div",{className:"text-right",children:s.jsxs("div",{className:"font-medium",children:[w.cost.toFixed(2),""]})})]})},w.id))})]}),v.instructions&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Instructions gnrales:"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:v.instructions})]}),v.followUpDate&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx($t,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:"Suivi prvu:"}),s.jsx("span",{className:"text-muted-foreground",children:new Date(v.followUpDate).toLocaleDateString("fr-FR")})]}),v.notes&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Notes:"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:v.notes})]})]})]},v.id)})})]}),t&&s.jsx(b2,{open:i,onOpenChange:o,petId:e.toString(),consultationId:t.toString()}),s.jsx(bEe,{open:l,onOpenChange:c,prescription:u})]})}const CEe=({consultation:e,open:t,onOpenChange:n,onEdit:r})=>{if(!e)return null;const{getClientById:a,getPetById:i}=Fa(),o=a(e.clientId),l=i(e.petId);return s.jsx(tt,{open:t,onOpenChange:n,children:s.jsxs(et,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(nt,{children:[s.jsxs(rt,{children:["Consultation #",e.id," - ",Al(e.date)]}),s.jsx(At,{children:"Dtails de la consultation gnrale"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsx(Ze,{className:"h-5 w-5"}),s.jsx("h3",{className:"text-lg font-semibold",children:e.purpose||"Consultation gnrale"})]}),s.jsxs("div",{className:"flex gap-8 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(gt,{className:"h-4 w-4"}),l==null?void 0:l.name," (",l==null?void 0:l.type,")"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Kn,{className:"h-4 w-4"}),o==null?void 0:o.name]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Wn,{className:"h-4 w-4"}),e.veterinarian]})]}),e.symptoms&&s.jsx(ie,{children:s.jsx(oe,{children:s.jsxs("p",{children:[s.jsx("strong",{children:"Symptmes:"})," ",e.symptoms]})})}),s.jsxs($a,{defaultValue:"overview",className:"space-y-4",children:[s.jsxs(Zs,{className:"grid grid-cols-2",children:[s.jsx(yt,{value:"overview",children:"Dtails"}),s.jsx(yt,{value:"prescriptions",children:"Prescriptions"})]}),s.jsx(wt,{value:"overview",children:s.jsx(ie,{children:s.jsxs(oe,{className:"space-y-2 text-sm",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Motif:"})," ",e.purpose||"Non spcifi"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Notes:"})," ",e.notes||"Aucune"]}),e.photos&&e.photos.length>0&&s.jsxs("div",{className:"pt-4",children:[s.jsx("h5",{className:"font-medium mb-2",children:"Photos de la consultation"}),s.jsx("div",{className:"flex gap-2 overflow-x-auto",children:e.photos.map((c,u)=>s.jsx("div",{className:"relative",children:s.jsx("img",{src:c,alt:`consult-photo-${u}`,className:"h-32 w-32 object-cover rounded cursor-pointer hover:opacity-80"})},u))})]})]})})}),s.jsx(wt,{value:"prescriptions",children:s.jsx(_Ee,{petId:e.petId,consultationId:e.id})})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[s.jsxs($,{variant:"outline",onClick:r,children:[s.jsx(It,{className:"h-4 w-4"})," Modifier"]}),s.jsx(mL,{consultation:e})]})]})})};function AEe({prescription:e}){const{settings:t}=Zt(),{logo:n,clinicName:r,address:a,phone:i,email:o,website:l,currency:c}=t,d=e.medications.map(f=>f.cost*(f.quantity||1)).reduce((f,x)=>f+x,0),h=()=>{if(!e||!e.petName||!e.clientName)return;const f=window.open("","_blank");if(!f)return;const x=m();f.document.write(x),f.document.close(),setTimeout(()=>{f.print(),f.close()},500)},m=()=>`
      <html>
        <head>
          <title>Facture Prescription - ${e.petName}</title>
          <style>
            body {
              font-family: Arial, sans-serif;
              margin: 20px;
              line-height: 1.6;
            }
            .header {
              display: flex;
              align-items: center;
              justify-content: space-between;
              margin-bottom: 30px;
              border-bottom: 2px solid #333;
              padding-bottom: 20px;
            }
            .clinic-info {
              text-align: center;
              flex: 1;
            }
            .clinic-info h1 {
              font-size: 24px;
              font-weight: bold;
              margin-bottom: 10px;
            }
            .clinic-info p {
              font-size: 14px;
              margin: 5px 0;
            }
            .invoice-section {
              margin-bottom: 30px;
            }
            .invoice-section h2 {
              font-size: 20px;
              font-weight: 600;
              margin-bottom: 15px;
            }
            .grid {
              display: grid;
              grid-template-columns: 1fr 1fr;
              gap: 30px;
              margin-bottom: 15px;
            }
            table {
              width: 100%;
              border-collapse: collapse;
              margin-bottom: 20px;
            }
            th, td {
              border: 1px solid #ddd;
              padding: 12px;
              text-align: left;
            }
            th {
              background-color: #f2f2f2;
              font-weight: bold;
            }
            .total-row {
              font-weight: bold;
              background-color: #f8f9fa;
            }
            .print-hidden {
              display: none;
            }
            @media print {
              body { margin: 0; }
              .print-hidden { display: none !important; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            ${n?`<img src="${n}" alt="Logo clinique" style="height:60px;width:60px;object-fit:contain;"/>`:'<div style="width:60px;"></div>'}
            <div class="clinic-info">
              <h1>${r}</h1>
              <p>${a}</p>
              <p>${i} | ${o}</p>
              ${l?`<p>${l}</p>`:""}
            </div>
            <div style="width:60px;"></div>
          </div>

          <div class="invoice-section">
            <h2>Ordonnance</h2>
            <div class="grid">
              <div>
                <p><strong>Date :</strong> ${e.date}</p>
                <p><strong>Patient :</strong> ${e.petName} (${e.clientName})</p>
              </div>
              <div>
                <p><strong>Prescrit par :</strong> ${e.prescribedBy}</p>
                <p><strong>Diagnostic :</strong> ${e.diagnosis}</p>
              </div>
            </div>
          </div>

          <div class="invoice-section">
            <h2>Dtail des mdicaments</h2>
            <table>
              <thead>
                <tr>
                  <th>Mdicament</th>
                  <th>Quantit</th>
                  <th>Prix unitaire</th>
                  <th>Total</th>
                </tr>
              </thead>
              <tbody>
                ${e.medications.map(f=>{const x=f.cost*(f.quantity||1);return`
                    <tr>
                      <td>
                        <strong>${f.name}</strong><br>
                        <small>${f.dosage} - ${f.frequency}</small>
                      </td>
                      <td>${f.quantity||1}</td>
                      <td>${f.cost.toFixed(2)} ${c}</td>
                      <td>${x.toFixed(2)} ${c}</td>
                    </tr>
                  `}).join("")}
                <tr class="total-row">
                  <td colspan="3"><strong>Total</strong></td>
                  <td><strong>${d.toFixed(2)} ${c}</strong></td>
                </tr>
              </tbody>
            </table>
          </div>

          ${e.instructions?`
            <div class="invoice-section">
              <h2>Instructions</h2>
              <p>${e.instructions}</p>
            </div>
          `:""}

          <div style="margin-top: 50px; text-align: center;">
            <div style="border-top: 1px solid #333; width: 200px; margin: 20px auto;"></div>
            <p>Signature du vtrinaire</p>
          </div>
        </body>
      </html>
    `;return s.jsxs("div",{className:"p-8 max-w-screen-lg mx-auto bg-white text-gray-800",children:[s.jsxs("header",{className:"flex items-center justify-between mb-8",children:[n&&s.jsx("img",{src:n,alt:"Logo clinique",className:"h-16 w-16 object-contain"}),s.jsxs("div",{className:"text-center flex-1",children:[s.jsx("h1",{className:"text-2xl font-bold",children:r}),s.jsx("p",{className:"text-sm",children:a}),s.jsxs("p",{className:"text-sm",children:[i," | ",o]}),l&&s.jsx("p",{className:"text-sm",children:l})]}),s.jsx("div",{children:s.jsx($,{variant:"outline",onClick:h,className:"uppercase text-sm",children:"Imprimer"})})]}),s.jsxs("section",{className:"mb-12",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Ordonnance"}),s.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-4",children:[s.jsxs("div",{children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Date :"})," ",e.date]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Patient :"})," ",e.petName," (",e.clientName,")"]})]}),s.jsxs("div",{children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Prescrit par :"})," ",e.prescribedBy]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Diagnostic :"})," ",e.diagnosis]})]})]}),s.jsxs("table",{className:"w-full border-collapse",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"border-b py-2 text-left",children:"Mdicament"}),s.jsx("th",{className:"border-b py-2 text-left",children:"Dosage"}),s.jsx("th",{className:"border-b py-2 text-left",children:"Frquence"}),s.jsx("th",{className:"border-b py-2 text-left",children:"Dure"})]})}),s.jsx("tbody",{children:e.medications.map(f=>s.jsxs("tr",{className:"border-b",children:[s.jsx("td",{className:"py-2",children:f.name}),s.jsx("td",{className:"py-2",children:f.dosage}),s.jsx("td",{className:"py-2",children:f.frequency}),s.jsx("td",{className:"py-2",children:f.duration})]},f.id))})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Facture"}),s.jsxs("table",{className:"w-full border-collapse mb-4",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"border-b py-2 text-left",children:"Produit / Service"}),s.jsx("th",{className:"border-b py-2 text-right",children:"Quantit"}),s.jsxs("th",{className:"border-b py-2 text-right",children:["Prix Unitaire (",c,")"]}),s.jsxs("th",{className:"border-b py-2 text-right",children:["Total (",c,")"]})]})}),s.jsx("tbody",{children:e.medications.map(f=>{const x=f.quantity||1,g=(f.cost||0)*x;return s.jsxs("tr",{className:"border-b",children:[s.jsx("td",{className:"py-2",children:f.name}),s.jsx("td",{className:"py-2 text-right",children:x}),s.jsx("td",{className:"py-2 text-right",children:f.cost.toFixed(2)}),s.jsx("td",{className:"py-2 text-right",children:g.toFixed(2)})]},f.id)})}),s.jsx("tfoot",{children:s.jsxs("tr",{children:[s.jsx("td",{colSpan:3,className:"py-2 text-right font-semibold",children:"Montant total :"}),s.jsx("td",{className:"py-2 text-right font-semibold",children:d.toFixed(2)})]})})]})]})]})}const PEe=()=>{var U,K;const{data:e=[]}=Ps(),{data:t=[]}=Gx();vn(),fn();const n=k=>{var D,J,W,Y;return{id:k.id,consultationId:k.consultation_id,clientId:k.client_id,clientName:`${((D=k.client)==null?void 0:D.first_name)||""} ${((J=k.client)==null?void 0:J.last_name)||""}`.trim(),petId:k.animal_id,petName:((W=k.animal)==null?void 0:W.name)||"",date:k.prescription_date,prescribedBy:"Non spcifi",diagnosis:k.diagnosis||"",medications:((Y=k.medications)==null?void 0:Y.map(V=>({id:V.id,name:V.medication_name,dosage:V.dosage||"",frequency:V.frequency||"",duration:V.duration||"",instructions:V.instructions||"",quantity:V.quantity||1,unit:"unit",cost:0})))||[],instructions:k.notes||"",duration:k.valid_until||"",followUpDate:void 0,status:k.status||"active",notes:k.notes||"",createdAt:k.created_at}},[r,a]=b.useState(""),[i,o]=b.useState("all"),[l,c]=b.useState("all"),[u,d]=b.useState("all"),[h,m]=b.useState(""),[f,x]=b.useState("cards"),[g,p]=b.useState(!1),[v,y]=b.useState(null),[w,S]=b.useState(!1),[j,N]=b.useState(null),[C,_]=b.useState(!1),[A,P]=b.useState(null),T=[...e.map(k=>{var D,J,W,Y,V;return{id:k.id,date:((D=k.consultation_date)==null?void 0:D.split("T")[0])||"",petName:((J=k.animal)==null?void 0:J.name)||"",petType:((W=k.animal)==null?void 0:W.species)||"",client:`${((Y=k.client)==null?void 0:Y.first_name)||""} ${((V=k.client)==null?void 0:V.last_name)||""}`.trim(),type:"consultation",title:k.diagnosis||"Consultation",veterinarian:k.notes||"Non spcifi",details:k.symptoms||"",prescriptions:[],cost:k.cost||0,status:"completed"}})].sort((k,D)=>new Date(D.date).getTime()-new Date(k.date).getTime()),E=t.map(k=>{var D,J,W,Y,V,O,le,te,ce,ge,H;return{id:k.id,date:((D=k.prescription_date)==null?void 0:D.split("T")[0])||"",petName:((J=k.animal)==null?void 0:J.name)||"",client:`${((W=k.client)==null?void 0:W.first_name)||""} ${((Y=k.client)==null?void 0:Y.last_name)||""}`.trim(),medication:((V=k.medications)==null?void 0:V.map(G=>G.medication_name).join(", "))||"",dosage:((le=(O=k.medications)==null?void 0:O[0])==null?void 0:le.dosage)||"",frequency:((ce=(te=k.medications)==null?void 0:te[0])==null?void 0:ce.frequency)||"",duration:((H=(ge=k.medications)==null?void 0:ge[0])==null?void 0:H.duration)||"",veterinarian:"Non spcifi",status:k.status}}),I=T.filter(k=>{const D=k.petName.toLowerCase().includes(r.toLowerCase())||k.client.toLowerCase().includes(r.toLowerCase())||k.title.toLowerCase().includes(r.toLowerCase()),J=i==="all"||k.petName.toLowerCase().includes(i.toLowerCase()),W=l==="all"||k.type===l;let Y=!0;if(u==="today"){const V=new Date().toISOString().split("T")[0];Y=k.date===V}else if(u==="week"){const V=new Date(k.date),O=new Date,le=O.getDay(),te=O.getDate()-le+(le===0?-6:1),ce=new Date(O.setDate(te)),ge=new Date(ce);ge.setDate(ce.getDate()+6),Y=V>=ce&&V<=ge}else u==="specific"&&(Y=h&&k.date===h);return D&&J&&W&&Y}),R=E.filter(k=>{const D=k.petName.toLowerCase().includes(r.toLowerCase())||k.client.toLowerCase().includes(r.toLowerCase())||k.medication.toLowerCase().includes(r.toLowerCase()),J=i==="all"||k.petName.toLowerCase().includes(i.toLowerCase()),W=l==="all"||!0;let Y=!0;if(u==="today"){const V=new Date().toISOString().split("T")[0];Y=k.date===V}else if(u==="week"){const V=new Date(k.date),O=new Date,le=O.getDay(),te=O.getDate()-le+(le===0?-6:1),ce=new Date(O.setDate(te)),ge=new Date(ce);ge.setDate(ce.getDate()+6),Y=V>=ce&&V<=ge}else u==="specific"&&(Y=h&&k.date===h);return D&&J&&W&&Y}),z={active:"bg-blue-100 text-blue-800 hover:bg-blue-200",completed:"bg-green-100 text-green-800 hover:bg-green-200",discontinued:"bg-red-100 text-red-800 hover:bg-red-200"};return s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-8 space-y-8 max-w-7xl",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Historique Mdical"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Consultez l'historique complet des soins et traitements"})]}),s.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[s.jsxs($,{size:"sm",variant:f==="cards"?"default":"outline",onClick:()=>x("cards"),className:"gap-2 flex-1 sm:flex-none",children:[s.jsx(_o,{className:"h-4 w-4"}),"Cartes"]}),s.jsxs($,{size:"sm",variant:f==="table"?"default":"outline",onClick:()=>x("table"),className:"gap-2 flex-1 sm:flex-none",children:[s.jsx(vi,{className:"h-4 w-4"}),"Tableau"]})]})]}),s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsxs(ye,{className:"flex items-center gap-2",children:[s.jsx(Si,{className:"h-5 w-5"}),"Rechercher"]})}),s.jsxs(oe,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(se,{placeholder:"Rechercher par nom, animal, diagnostic...",value:r,onChange:k=>a(k.target.value)}),s.jsxs(_e,{value:i,onValueChange:o,children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Filtrer par animal"})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"all",children:"Tous les animaux"}),Array.from(new Set(T.map(k=>k.petName))).map(k=>s.jsx(Q,{value:k,children:k},k))]})]}),s.jsxs(_e,{value:l,onValueChange:c,children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Filtrer par type"})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"all",children:"Tous types"}),s.jsx(Q,{value:"consultation",children:"Consultations"}),s.jsx(Q,{value:"treatment",children:"Traitements"}),s.jsx(Q,{value:"surgery",children:"Chirurgies"})]})]}),s.jsxs(_e,{value:u,onValueChange:d,children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Priode"})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"all",children:"Toute priode"}),s.jsx(Q,{value:"today",children:"Aujourd'hui"}),s.jsx(Q,{value:"week",children:"Cette semaine"}),s.jsx(Q,{value:"specific",children:"Date spcifique"})]})]})]}),u==="specific"&&s.jsx(se,{type:"date",value:h,onChange:k=>m(k.target.value),className:"max-w-xs"})]})]}),s.jsxs($a,{defaultValue:"medical",className:"space-y-4",children:[s.jsxs(Zs,{className:"grid w-full grid-cols-2",children:[s.jsxs(yt,{value:"medical",className:"gap-2",children:[s.jsx(Ze,{className:"h-4 w-4"}),"Historique Mdical"]}),s.jsxs(yt,{value:"prescriptions",className:"gap-2",children:[s.jsx(gt,{className:"h-4 w-4"}),"Prescriptions"]})]}),s.jsxs(wt,{value:"medical",className:"space-y-4",children:[s.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:s.jsxs("h3",{className:"text-lg font-semibold",children:["Historique des consultations (",I.length," entres)"]})}),f==="cards"?s.jsx("div",{className:"grid gap-6",children:I.map(k=>s.jsx(ie,{className:"card-hover",children:s.jsx(oe,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row items-start justify-between gap-4",children:[s.jsxs("div",{className:"space-y-3 flex-1",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ze,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium text-sm sm:text-base",children:new Date(k.date).toLocaleDateString("fr-FR")})]}),s.jsx(Ie,{variant:"outline",className:"text-xs",children:k.type})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-semibold",children:k.title}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 text-sm text-muted-foreground mt-1",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(gt,{className:"h-3 w-3"}),k.petName]}),s.jsxs("span",{children:["Client: ",k.client]}),s.jsxs("span",{children:["Vtrinaire: ",k.veterinarian]})]})]}),k.details&&s.jsx("p",{className:"text-sm text-muted-foreground",children:k.details}),k.cost&&s.jsx("div",{className:"text-sm",children:s.jsxs("span",{className:"font-medium",children:["Cot: ",k.cost," MAD"]})})]}),s.jsx("div",{className:"flex gap-2 w-full sm:w-auto justify-end",children:s.jsx($,{size:"sm",variant:"outline",className:"flex-1 sm:flex-none",onClick:()=>{const D=e.find(J=>J.id===k.id);D&&y({...D,petId:D.animal_id,clientId:D.client_id}),p(!0)},children:s.jsx($n,{className:"h-4 w-4"})})})]})})},k.id))}):s.jsx(ie,{children:s.jsx(oe,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full min-w-[600px]",children:[s.jsx("thead",{className:"border-b",children:s.jsxs("tr",{className:"text-left",children:[s.jsx("th",{className:"p-4 font-medium",children:"Date"}),s.jsx("th",{className:"p-4 font-medium",children:"Type"}),s.jsx("th",{className:"p-4 font-medium",children:"Titre"}),s.jsx("th",{className:"p-4 font-medium",children:"Animal"}),s.jsx("th",{className:"p-4 font-medium",children:"Client"}),s.jsx("th",{className:"p-4 font-medium",children:"Vtrinaire"}),s.jsx("th",{className:"p-4 font-medium",children:"Actions"})]})}),s.jsx("tbody",{children:I.map(k=>s.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[s.jsx("td",{className:"p-4",children:new Date(k.date).toLocaleDateString("fr-FR")}),s.jsx("td",{className:"p-4",children:s.jsx(Ie,{variant:"outline",className:"text-xs",children:k.type})}),s.jsxs("td",{className:"p-4",children:[s.jsx("div",{className:"font-medium",children:k.title}),k.details&&s.jsx("div",{className:"text-sm text-muted-foreground",children:k.details})]}),s.jsx("td",{className:"p-4",children:k.petName}),s.jsx("td",{className:"p-4",children:k.client}),s.jsx("td",{className:"p-4",children:k.veterinarian}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.jsx($,{size:"sm",variant:"outline",onClick:()=>{const D=e.find(J=>J.id===k.id);D&&y({...D,petId:D.animal_id,clientId:D.client_id}),p(!0)},children:s.jsx($n,{className:"h-4 w-4"})}),s.jsx($,{size:"sm",variant:"outline",children:s.jsx(It,{className:"h-4 w-4"})})]})})]},k.id))})]})})})})]}),s.jsxs(wt,{value:"prescriptions",className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("h3",{className:"text-lg font-semibold",children:["Historique des prescriptions (",R.length," entres)"]}),s.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[s.jsxs($,{size:"sm",variant:f==="cards"?"default":"outline",onClick:()=>x("cards"),className:"gap-2 flex-1 sm:flex-none",children:[s.jsx(_o,{className:"h-4 w-4"}),"Cartes"]}),s.jsxs($,{size:"sm",variant:f==="table"?"default":"outline",onClick:()=>x("table"),className:"gap-2 flex-1 sm:flex-none",children:[s.jsx(vi,{className:"h-4 w-4"}),"Tableau"]})]})]}),f==="cards"?s.jsx("div",{className:"grid gap-6",children:R.map(k=>s.jsx(ie,{className:"card-hover",children:s.jsx(oe,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row items-start justify-between gap-4",children:[s.jsxs("div",{className:"space-y-3 flex-1",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ze,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium text-sm sm:text-base",children:new Date(k.date).toLocaleDateString("fr-FR")})]}),s.jsx(Ie,{variant:"outline",className:z[k.status],children:k.status==="active"?"Actif":k.status==="completed"?"Termin":"Arrt"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-semibold",children:k.medication}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 text-sm text-muted-foreground mt-1",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(gt,{className:"h-3 w-3"}),k.petName]}),s.jsxs("span",{children:["Client: ",k.client]}),s.jsxs("span",{children:["Prescrit par: ",k.veterinarian]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Dosage:"})," ",k.dosage]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Frquence:"})," ",k.frequency]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Dure:"})," ",k.duration]})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 w-full sm:w-auto justify-end",children:[s.jsx($,{size:"sm",variant:"outline",className:"flex-1 sm:flex-none",onClick:()=>{N(k),S(!0)},children:"Renouveler"}),(()=>{const D=t.find(J=>J.id===k.id);return D?s.jsx(sN,{prescription:n(D)}):s.jsx($,{size:"sm",variant:"outline",disabled:!0,className:"flex-1 sm:flex-none",children:"Prescription indisponible"})})(),s.jsx($,{size:"sm",variant:"outline",className:"flex-1 sm:flex-none",onClick:()=>{const D=t.find(J=>J.id===k.id);D&&(P(n(D)),_(!0))},children:"Facture"})]})]})})},k.id))}):s.jsx(ie,{children:s.jsx(oe,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full min-w-[600px]",children:[s.jsx("thead",{className:"border-b",children:s.jsxs("tr",{className:"text-left",children:[s.jsx("th",{className:"p-4 font-medium",children:"Date"}),s.jsx("th",{className:"p-4 font-medium",children:"Statut"}),s.jsx("th",{className:"p-4 font-medium",children:"Mdicament"}),s.jsx("th",{className:"p-4 font-medium",children:"Animal"}),s.jsx("th",{className:"p-4 font-medium",children:"Client"}),s.jsx("th",{className:"p-4 font-medium",children:"Dosage"}),s.jsx("th",{className:"p-4 font-medium",children:"Dure"}),s.jsx("th",{className:"p-4 font-medium",children:"Actions"})]})}),s.jsx("tbody",{children:R.map(k=>s.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[s.jsx("td",{className:"p-4",children:new Date(k.date).toLocaleDateString("fr-FR")}),s.jsx("td",{className:"p-4",children:s.jsx(Ie,{variant:"outline",className:z[k.status],children:k.status==="active"?"Actif":k.status==="completed"?"Termin":"Arrt"})}),s.jsxs("td",{className:"p-4",children:[s.jsx("div",{className:"font-medium",children:k.medication}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Prescrit par: ",k.veterinarian]})]}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(gt,{className:"h-4 w-4 text-primary"}),k.petName]})}),s.jsx("td",{className:"p-4",children:k.client}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{children:k.dosage}),s.jsx("div",{className:"text-muted-foreground",children:k.frequency})]})}),s.jsx("td",{className:"p-4",children:k.duration}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.jsx($,{size:"sm",variant:"outline",onClick:()=>{N(k),S(!0)},children:"Renouveler"}),s.jsx(sN,{prescription:n(t.find(D=>D.id===k.id))}),s.jsx($,{size:"sm",variant:"outline",onClick:()=>{const D=t.find(J=>J.id===k.id);P(n(D)),_(!0)},children:"Facture"})]})})]},k.id))})]})})})})]})]}),s.jsx(CEe,{consultation:v,open:g,onOpenChange:p,onEdit:()=>{}}),(j==null?void 0:j.id)&&s.jsx(b2,{open:w,onOpenChange:S,petId:((K=(U=t.find(k=>k.id===(j==null?void 0:j.id)))==null?void 0:U.animal_id)==null?void 0:K.toString())||"",consultationId:j.id.toString()}),s.jsx(tt,{open:C,onOpenChange:_,children:s.jsx(et,{children:A&&s.jsx(AEe,{prescription:A})})})]})};var e0="Checkbox",[EEe,Gke]=Br(e0),[kEe,j2]=EEe(e0);function TEe(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:a,disabled:i,form:o,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:h}=e,[m,f]=gi({prop:n,defaultProp:a??!1,onChange:c,caller:e0}),[x,g]=b.useState(null),[p,v]=b.useState(null),y=b.useRef(!1),w=x?!!o||!!x.closest("form"):!0,S={checked:m,disabled:i,setChecked:f,control:x,setControl:g,name:l,form:o,value:d,hasConsumerStoppedPropagationRef:y,required:u,defaultChecked:jo(a)?!1:a,isFormControl:w,bubbleInput:p,setBubbleInput:v};return s.jsx(kEe,{scope:t,...S,children:OEe(h)?h(S):r})}var z8="CheckboxTrigger",B8=b.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},a)=>{const{control:i,value:o,disabled:l,checked:c,required:u,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:m,isFormControl:f,bubbleInput:x}=j2(z8,e),g=ft(a,d),p=b.useRef(c);return b.useEffect(()=>{const v=i==null?void 0:i.form;if(v){const y=()=>h(p.current);return v.addEventListener("reset",y),()=>v.removeEventListener("reset",y)}},[i,h]),s.jsx(qe.button,{type:"button",role:"checkbox","aria-checked":jo(c)?"mixed":c,"aria-required":u,"data-state":H8(c),"data-disabled":l?"":void 0,disabled:l,value:o,...r,ref:g,onKeyDown:Te(t,v=>{v.key==="Enter"&&v.preventDefault()}),onClick:Te(n,v=>{h(y=>jo(y)?!0:!y),x&&f&&(m.current=v.isPropagationStopped(),m.current||v.stopPropagation())})})});B8.displayName=z8;var N2=b.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:u,form:d,...h}=e;return s.jsx(TEe,{__scopeCheckbox:n,checked:a,defaultChecked:i,disabled:l,required:o,onCheckedChange:u,name:r,form:d,value:c,internal_do_not_use_render:({isFormControl:m})=>s.jsxs(s.Fragment,{children:[s.jsx(B8,{...h,ref:t,__scopeCheckbox:n}),m&&s.jsx(W8,{__scopeCheckbox:n})]})})});N2.displayName=e0;var q8="CheckboxIndicator",V8=b.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...a}=e,i=j2(q8,n);return s.jsx(As,{present:r||jo(i.checked)||i.checked===!0,children:s.jsx(qe.span,{"data-state":H8(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});V8.displayName=q8;var U8="CheckboxBubbleInput",W8=b.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:o,required:l,disabled:c,name:u,value:d,form:h,bubbleInput:m,setBubbleInput:f}=j2(U8,e),x=ft(n,f),g=s_(i),p=yS(r);b.useEffect(()=>{const y=m;if(!y)return;const w=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(w,"checked").set,N=!a.current;if(g!==i&&j){const C=new Event("click",{bubbles:N});y.indeterminate=jo(i),j.call(y,jo(i)?!1:i),y.dispatchEvent(C)}},[m,g,i,a]);const v=b.useRef(jo(i)?!1:i);return s.jsx(qe.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??v.current,required:l,disabled:c,name:u,value:d,form:h,...t,tabIndex:-1,ref:x,style:{...t.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});W8.displayName=U8;function OEe(e){return typeof e=="function"}function jo(e){return e==="indeterminate"}function H8(e){return jo(e)?"indeterminate":e?"checked":"unchecked"}const Zv=b.forwardRef(({className:e,...t},n)=>s.jsx(N2,{ref:n,className:Me("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(V8,{className:Me("flex items-center justify-center text-current"),children:s.jsx(iS,{className:"h-4 w-4"})})}));Zv.displayName=N2.displayName;const DEe=({open:e,onOpenChange:t})=>{const{user:n}=Sn(),{toast:r}=it(),{data:a}=km(),{data:i=[]}=l_(),[o,l]=b.useState([]),[c,u]=b.useState({farm_name:"",client_id:"",owner_name:"",owner_id_number:"",address:"",latitude:"",longitude:"",phone:"",email:"",farm_types:[],total_animals:"",surface_area:"",registration_number:"",herd_size:"",veterinarian:"",building_details:"",equipment_details:"",insurance_details:"",status:"active",notes:"",certifications:[],emergency_contact:{name:"",phone:"",relation:""},animal_details:[]}),[d,h]=b.useState({category:"",maleCount:0,femaleCount:0,breeds:[],ageGroups:[]}),[m,f]=b.useState(!1),g=((a==null?void 0:a.farm_types)||["Laitire","Viande","Mixte","Avicole","Ovine","Caprine"]).map(_=>({id:_.toLowerCase().replace(/\s+/g,"_"),label:_})),p=(a==null?void 0:a.certification_types)||["Bio","Label Rouge","Standard","AOC","IGP"];b.useEffect(()=>{e&&n&&(v(),y())},[e,n]);const v=async()=>{if(n)try{const{data:_,error:A}=await fe.from("clients").select("id, first_name, last_name").eq("user_id",n.id).eq("status","actif").order("first_name");if(A)throw A;l(_||[])}catch(_){console.error("Error fetching clients:",_),r({title:"Erreur",description:"Impossible de charger les clients",variant:"destructive"})}},y=()=>{u({farm_name:"",client_id:"",owner_name:"",owner_id_number:"",address:"",latitude:"",longitude:"",phone:"",email:"",farm_types:[],total_animals:"",surface_area:"",registration_number:"",herd_size:"",veterinarian:"",building_details:"",equipment_details:"",insurance_details:"",status:"active",notes:"",certifications:[],emergency_contact:{name:"",phone:"",relation:""},animal_details:[]}),h({category:"",maleCount:0,femaleCount:0,breeds:[],ageGroups:[]})},w=async _=>{if(_.preventDefault(),!!n){if(!c.farm_name.trim()){r({title:"Erreur",description:"Le nom de l'exploitation est requis",variant:"destructive"});return}if(!c.client_id){r({title:"Erreur",description:"Veuillez slectionner un client",variant:"destructive"});return}f(!0);try{const A={farm_name:c.farm_name.trim(),client_id:c.client_id,user_id:n.id,active:!0,farm_type:c.farm_types[0]||null,farm_types:c.farm_types.length>0?c.farm_types:null,registration_number:c.registration_number||null,address:c.address||null,latitude:c.latitude?parseFloat(c.latitude):null,longitude:c.longitude?parseFloat(c.longitude):null,phone:c.phone||null,email:c.email||null,herd_size:c.herd_size?parseInt(c.herd_size):null,total_animals:c.total_animals?parseInt(c.total_animals):null,surface_area:c.surface_area?parseFloat(c.surface_area):null,owner_name:c.owner_name||null,owner_id_number:c.owner_id_number||null,veterinarian:c.veterinarian||null,building_details:c.building_details||null,equipment_details:c.equipment_details||null,insurance_details:c.insurance_details||null,status:c.status,notes:c.notes||null,certifications:c.certifications.length>0?c.certifications:null,emergency_contact:c.emergency_contact.name||c.emergency_contact.phone?c.emergency_contact:null,animal_details:c.animal_details.length>0?c.animal_details:null,photos:[]},{error:P}=await fe.from("farms").insert([A]);if(P)throw P;r({title:"Succs",description:"Exploitation cre avec succs"}),t(!1)}catch(A){console.error("Error creating farm:",A),r({title:"Erreur",description:A.message||"Impossible de crer l'exploitation",variant:"destructive"})}finally{f(!1)}}},S=(_,A)=>{u(P=>({...P,[_]:A}))},j=(_,A)=>{u(P=>({...P,emergency_contact:{...P.emergency_contact,[_]:A}}))},N=_=>{u(A=>({...A,farm_types:A.farm_types.includes(_)?A.farm_types.filter(P=>P!==_):[...A.farm_types,_]}))},C=_=>{u(A=>({...A,certifications:A.certifications.includes(_)?A.certifications.filter(P=>P!==_):[...A.certifications,_]}))};return s.jsx(tt,{open:e,onOpenChange:t,children:s.jsxs(et,{className:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[s.jsxs(nt,{children:[s.jsx(rt,{children:"Nouvelle Exploitation Agricole"}),s.jsx(At,{children:"Crer une nouvelle exploitation agricole avec toutes les informations dtailles"})]}),s.jsxs("form",{onSubmit:w,className:"space-y-6",children:[s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsx(ye,{className:"text-lg",children:"Informations gnrales"})}),s.jsxs(oe,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"farm_name",children:"Nom de l'exploitation *"}),s.jsx(se,{id:"farm_name",value:c.farm_name,onChange:_=>S("farm_name",_.target.value),placeholder:"Ex: Ferme Ben Ali",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"client_id",children:"Propritaire *"}),s.jsxs(_e,{value:c.client_id,onValueChange:_=>S("client_id",_),children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Slectionner un client"})}),s.jsx(Se,{children:o.map(_=>s.jsxs(Q,{value:_.id,children:[_.first_name," ",_.last_name]},_.id))})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"owner_name",children:"Nom du propritaire"}),s.jsx(se,{id:"owner_name",value:c.owner_name,onChange:_=>S("owner_name",_.target.value),placeholder:"Nom du propritaire"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"owner_id_number",children:"N pice d'identit du propritaire"}),s.jsx(se,{id:"owner_id_number",value:c.owner_id_number,onChange:_=>S("owner_id_number",_.target.value),placeholder:"Numro de carte d'identit, passeport, etc."})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"address",children:"Adresse *"}),s.jsx(se,{id:"address",value:c.address,onChange:_=>S("address",_.target.value),placeholder:"Adresse complte"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"latitude",children:"Latitude"}),s.jsx(se,{id:"latitude",type:"number",step:"any",value:c.latitude,onChange:_=>S("latitude",_.target.value),placeholder:"47.9058"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"longitude",children:"Longitude"}),s.jsx(se,{id:"longitude",type:"number",step:"any",value:c.longitude,onChange:_=>S("longitude",_.target.value),placeholder:"1.9190"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"phone",children:"Tlphone"}),s.jsx(se,{id:"phone",value:c.phone,onChange:_=>S("phone",_.target.value),placeholder:"Tlphone"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"email",children:"Email"}),s.jsx(se,{id:"email",type:"email",value:c.email,onChange:_=>S("email",_.target.value),placeholder:"Email"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"veterinarian",children:"Vtrinaire responsable"}),s.jsxs(_e,{value:c.veterinarian,onValueChange:_=>S("veterinarian",_),children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Slectionner un vtrinaire"})}),s.jsx(Se,{children:i.filter(_=>_.is_active).map(_=>s.jsxs(Q,{value:_.name,children:[_.name," ",_.title?`- ${_.title}`:""]},_.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"status",children:"Statut"}),s.jsxs(_e,{value:c.status,onValueChange:_=>S("status",_),children:[s.jsx(Ne,{children:s.jsx(Ce,{})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"active",children:"Actif"}),s.jsx(Q,{value:"attention",children:"Attention"}),s.jsx(Q,{value:"urgent",children:"Urgent"})]})]})]})]})]})]}),s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsx(ye,{className:"text-lg",children:"Types d'levage *"})}),s.jsx(oe,{children:s.jsx("div",{className:"grid grid-cols-2 gap-4",children:g.map(_=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Zv,{id:_.id,checked:c.farm_types.includes(_.id),onCheckedChange:()=>N(_.id)}),s.jsx(M,{htmlFor:_.id,children:_.label})]},_.id))})})]}),s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsx(ye,{className:"text-lg",children:"Dtails de l'exploitation"})}),s.jsxs(oe,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"registration_number",children:"N d'enregistrement"}),s.jsx(se,{id:"registration_number",value:c.registration_number,onChange:_=>S("registration_number",_.target.value),placeholder:"Ex: MA-2024-001"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"surface_area",children:"Surface (hectares)"}),s.jsx(se,{id:"surface_area",type:"number",step:"0.01",value:c.surface_area,onChange:_=>S("surface_area",_.target.value),placeholder:"Surface en hectares"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"total_animals",children:"Nombre total d'animaux"}),s.jsx(se,{id:"total_animals",type:"number",value:c.total_animals,onChange:_=>S("total_animals",_.target.value),placeholder:"Nombre d'animaux"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"building_details",children:"Dtails des btiments"}),s.jsx(Ke,{id:"building_details",value:c.building_details,onChange:_=>S("building_details",_.target.value),placeholder:"Description des btiments d'levage...",rows:2})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"equipment_details",children:"quipements"}),s.jsx(Ke,{id:"equipment_details",value:c.equipment_details,onChange:_=>S("equipment_details",_.target.value),placeholder:"Description des quipements...",rows:2})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"insurance_details",children:"Dtails assurance"}),s.jsx(Ke,{id:"insurance_details",value:c.insurance_details,onChange:_=>S("insurance_details",_.target.value),placeholder:"Informations sur l'assurance...",rows:2})]})]})]}),s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsx(ye,{className:"text-lg",children:"Contact d'urgence"})}),s.jsx(oe,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"emergency_name",children:"Nom"}),s.jsx(se,{id:"emergency_name",value:c.emergency_contact.name,onChange:_=>j("name",_.target.value),placeholder:"Nom du contact"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"emergency_phone",children:"Tlphone"}),s.jsx(se,{id:"emergency_phone",value:c.emergency_contact.phone,onChange:_=>j("phone",_.target.value),placeholder:"Tlphone"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"emergency_relation",children:"Relation"}),s.jsx(se,{id:"emergency_relation",value:c.emergency_contact.relation,onChange:_=>j("relation",_.target.value),placeholder:"Ex: Famille, Associ"})]})]})})]}),s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsx(ye,{className:"text-lg",children:"Certifications"})}),s.jsx(oe,{children:s.jsx("div",{className:"grid grid-cols-2 gap-4",children:p.map(_=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Zv,{id:_,checked:c.certifications.includes(_),onCheckedChange:()=>C(_)}),s.jsx(M,{htmlFor:_,children:_})]},_))})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"notes",children:"Notes"}),s.jsx(Ke,{id:"notes",value:c.notes,onChange:_=>S("notes",_.target.value),placeholder:"Notes additionnelles...",rows:3})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx($,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsx($,{type:"submit",disabled:m,children:m?"Cration...":"Crer l'exploitation"})]})]})]})})},MEe=({open:e,onOpenChange:t,farmId:n,farmName:r})=>{const{user:a}=Sn(),{toast:i}=it(),[o,l]=b.useState([]),[c,u]=b.useState({farm_id:"",intervention_date:"",intervention_type:"",animal_count:"",description:"",diagnosis:"",treatment:"",medications_used:[],cost:"",follow_up_date:"",notes:""}),[d,h]=b.useState(""),[m,f]=b.useState(!1),x=["vaccination","traitement_preventif","traitement_curatif","chirurgie","diagnostic","suivi_reproduction","consultation_generale","urgence","autre"],g={vaccination:"Vaccination",traitement_preventif:"Traitement prventif",traitement_curatif:"Traitement curatif",chirurgie:"Chirurgie",diagnostic:"Diagnostic",suivi_reproduction:"Suivi reproduction",consultation_generale:"Consultation gnrale",urgence:"Urgence",autre:"Autre"};b.useEffect(()=>{e&&a&&(p(),v())},[e,a]),b.useEffect(()=>{n&&r&&u(N=>({...N,farm_id:n}))},[n,r]);const p=async()=>{if(a)try{const{data:N,error:C}=await fe.from("farms").select("id, farm_name").eq("user_id",a.id).eq("active",!0).order("farm_name");if(C)throw C;l(N||[])}catch(N){console.error("Error fetching farms:",N),i({title:"Erreur",description:"Impossible de charger les exploitations",variant:"destructive"})}},v=()=>{const N=new Date().toISOString().split("T")[0];u({farm_id:n||"",intervention_date:N,intervention_type:"",animal_count:"",description:"",diagnosis:"",treatment:"",medications_used:[],cost:"",follow_up_date:"",notes:""}),h("")},y=async N=>{if(N.preventDefault(),!!a){if(!c.farm_id){i({title:"Erreur",description:"Veuillez slectionner une exploitation",variant:"destructive"});return}if(!c.intervention_type){i({title:"Erreur",description:"Veuillez slectionner un type d'intervention",variant:"destructive"});return}if(!c.intervention_date){i({title:"Erreur",description:"Veuillez slectionner une date d'intervention",variant:"destructive"});return}f(!0);try{const C={farm_id:c.farm_id,veterinarian_id:a.id,intervention_date:c.intervention_date,intervention_type:c.intervention_type,animal_count:c.animal_count?parseInt(c.animal_count):null,description:c.description||null,diagnosis:c.diagnosis||null,treatment:c.treatment||null,medications_used:c.medications_used.length>0?c.medications_used:null,cost:c.cost?parseFloat(c.cost):null,follow_up_date:c.follow_up_date||null,notes:c.notes||null},{error:_}=await fe.from("farm_interventions").insert([C]);if(_)throw _;i({title:"Succs",description:"Intervention cre avec succs"}),t(!1)}catch(C){console.error("Error creating intervention:",C),i({title:"Erreur",description:C.message||"Impossible de crer l'intervention",variant:"destructive"})}finally{f(!1)}}},w=(N,C)=>{u(_=>({..._,[N]:C}))},S=()=>{d.trim()&&!c.medications_used.includes(d.trim())&&(u(N=>({...N,medications_used:[...N.medications_used,d.trim()]})),h(""))},j=N=>{u(C=>({...C,medications_used:C.medications_used.filter(_=>_!==N)}))};return o.find(N=>N.id===c.farm_id),s.jsx(tt,{open:e,onOpenChange:t,children:s.jsxs(et,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[s.jsxs(nt,{children:[s.jsx(rt,{children:"Nouvelle Intervention"}),s.jsxs(At,{children:["Crer une nouvelle intervention vtrinaire",r&&` pour ${r}`]})]}),s.jsxs("form",{onSubmit:y,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"farm_id",children:"Exploitation *"}),s.jsxs(_e,{value:c.farm_id,onValueChange:N=>w("farm_id",N),disabled:!!n,children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Slectionner une exploitation"})}),s.jsx(Se,{children:o.map(N=>s.jsx(Q,{value:N.id,children:N.farm_name},N.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"intervention_date",children:"Date d'intervention *"}),s.jsx(se,{id:"intervention_date",type:"date",value:c.intervention_date,onChange:N=>w("intervention_date",N.target.value),required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"intervention_type",children:"Type d'intervention *"}),s.jsxs(_e,{value:c.intervention_type,onValueChange:N=>w("intervention_type",N),children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Slectionner le type"})}),s.jsx(Se,{children:x.map(N=>s.jsx(Q,{value:N,children:g[N]},N))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"animal_count",children:"Nombre d'animaux"}),s.jsx(se,{id:"animal_count",type:"number",value:c.animal_count,onChange:N=>w("animal_count",N.target.value),placeholder:"Nombre d'animaux concerns",min:"1"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"description",children:"Description"}),s.jsx(Ke,{id:"description",value:c.description,onChange:N=>w("description",N.target.value),placeholder:"Description de l'intervention...",rows:2})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"diagnosis",children:"Diagnostic"}),s.jsx(Ke,{id:"diagnosis",value:c.diagnosis,onChange:N=>w("diagnosis",N.target.value),placeholder:"Diagnostic vtrinaire...",rows:2})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"treatment",children:"Traitement"}),s.jsx(Ke,{id:"treatment",value:c.treatment,onChange:N=>w("treatment",N.target.value),placeholder:"Traitement prescrit...",rows:2})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Mdicaments utiliss"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(se,{value:d,onChange:N=>h(N.target.value),placeholder:"Nom du mdicament",onKeyPress:N=>N.key==="Enter"&&(N.preventDefault(),S())}),s.jsx($,{type:"button",onClick:S,variant:"outline",children:"Ajouter"})]}),c.medications_used.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:c.medications_used.map((N,C)=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 rounded-md text-sm",children:[N,s.jsx("button",{type:"button",onClick:()=>j(N),className:"ml-1 text-blue-600 hover:text-blue-800",children:""})]},C))})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"cost",children:"Cot (MAD)"}),s.jsx(se,{id:"cost",type:"number",step:"0.01",value:c.cost,onChange:N=>w("cost",N.target.value),placeholder:"0.00",min:"0"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"follow_up_date",children:"Date de suivi"}),s.jsx(se,{id:"follow_up_date",type:"date",value:c.follow_up_date,onChange:N=>w("follow_up_date",N.target.value)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"notes",children:"Notes"}),s.jsx(Ke,{id:"notes",value:c.notes,onChange:N=>w("notes",N.target.value),placeholder:"Notes additionnelles...",rows:2})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx($,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsx($,{type:"submit",disabled:m,children:m?"Cration...":"Crer l'intervention"})]})]})]})})},IEe=({farm:e,open:t,onOpenChange:n,onEdit:r,onNewIntervention:a})=>{if(!e)return null;const i=e.clients?`${e.clients.first_name} ${e.clients.last_name}`:"Non spcifi";return s.jsx(tt,{open:t,onOpenChange:n,children:s.jsxs(et,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsx(nt,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(rt,{className:"text-2xl flex items-center gap-2",children:[s.jsx(II,{className:"h-6 w-6"}),e.farm_name]}),s.jsx(At,{className:"mt-2",children:"Dtails complets de l'exploitation agricole"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs($,{onClick:r,variant:"outline",className:"gap-2",children:[s.jsx(It,{className:"h-4 w-4"}),"Modifier"]}),s.jsxs($,{onClick:a,className:"gap-2",children:[s.jsx(Wn,{className:"h-4 w-4"}),"Nouvelle Intervention"]})]})]})}),s.jsxs("div",{className:"space-y-6 py-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ie,{variant:"outline",className:"bg-green-100 text-green-800",children:e.active?"Actif":"Inactif"}),e.farm_type&&s.jsx(Ie,{variant:"secondary",children:e.farm_type})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsxs(ye,{className:"text-lg flex items-center gap-2",children:[s.jsx(ts,{className:"h-5 w-5"}),"Informations Gnrales"]})}),s.jsxs(oe,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ha,{className:"text-sm font-medium text-muted-foreground",children:"Propritaire"}),s.jsx("p",{className:"text-base font-medium",children:i})]}),s.jsxs("div",{children:[s.jsx(Ha,{className:"text-sm font-medium text-muted-foreground",children:"Numro d'enregistrement"}),s.jsx("p",{className:"text-base",children:e.registration_number||"Non renseign"})]}),s.jsxs("div",{children:[s.jsx(Ha,{className:"text-sm font-medium text-muted-foreground",children:"Type d'exploitation"}),s.jsx("p",{className:"text-base",children:e.farm_type||"Non spcifi"})]}),s.jsxs("div",{children:[s.jsx(Ha,{className:"text-sm font-medium text-muted-foreground",children:"Taille du cheptel"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(RI,{className:"h-5 w-5 text-primary"}),s.jsxs("p",{className:"text-lg font-semibold",children:[e.herd_size||0," animaux"]})]})]}),e.certifications&&e.certifications.length>0&&s.jsxs("div",{children:[s.jsx(Ha,{className:"text-sm font-medium text-muted-foreground",children:"Certifications"}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:e.certifications.map((o,l)=>s.jsx(Ie,{variant:"outline",className:"text-xs",children:o},l))})]})]})]}),s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsxs(ye,{className:"text-lg flex items-center gap-2",children:[s.jsx(Du,{className:"h-5 w-5"}),"Contact & Localisation"]})}),s.jsxs(oe,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Ha,{className:"text-sm font-medium text-muted-foreground",children:"Adresse"}),s.jsxs("p",{className:"text-base flex items-start gap-2",children:[s.jsx(Du,{className:"h-4 w-4 mt-1 text-muted-foreground flex-shrink-0"}),e.address||"Adresse non renseigne"]})]}),s.jsxs("div",{children:[s.jsx(Ha,{className:"text-sm font-medium text-muted-foreground",children:"Tlphone"}),s.jsxs("p",{className:"text-base flex items-center gap-2",children:[s.jsx(mf,{className:"h-4 w-4 text-muted-foreground"}),e.phone||"Non renseign"]})]}),s.jsxs("div",{children:[s.jsx(Ha,{className:"text-sm font-medium text-muted-foreground",children:"Email"}),s.jsxs("p",{className:"text-base flex items-center gap-2",children:[s.jsx(yd,{className:"h-4 w-4 text-muted-foreground"}),e.email||"Non renseign"]})]}),s.jsxs("div",{children:[s.jsx(Ha,{className:"text-sm font-medium text-muted-foreground",children:"Dates"}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("p",{className:"flex items-center gap-2",children:[s.jsx(Ze,{className:"h-4 w-4 text-muted-foreground"}),"Cr le: ",Al(e.created_at)]}),s.jsxs("p",{className:"flex items-center gap-2",children:[s.jsx(Ze,{className:"h-4 w-4 text-muted-foreground"}),"Modifi le: ",Al(e.updated_at)]})]})]})]})]})]}),e.notes&&s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsx(ye,{className:"text-lg",children:"Notes"})}),s.jsx(oe,{children:s.jsx("p",{className:"text-base whitespace-pre-wrap",children:e.notes})})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[s.jsxs($,{variant:"outline",onClick:()=>n(!1),children:[s.jsx(Ws,{className:"h-4 w-4 mr-2"}),"Fermer"]}),s.jsxs($,{onClick:r,variant:"outline",children:[s.jsx(It,{className:"h-4 w-4 mr-2"}),"Modifier"]}),s.jsxs($,{onClick:a,children:[s.jsx(Wn,{className:"h-4 w-4 mr-2"}),"Nouvelle Intervention"]})]})]})})},Ha=({children:e,className:t})=>s.jsx("div",{className:t,children:e}),$Ee=({open:e,onOpenChange:t,farm:n})=>{const{toast:r}=it(),{data:a}=km();l_();const i=(a==null?void 0:a.farm_types)||[],o=(a==null?void 0:a.certification_types)||[],[l,c]=b.useState(!1),[u,d]=b.useState({farm_name:"",farm_type:"",registration_number:"",address:"",phone:"",email:"",herd_size:"",certifications:[],notes:""});b.useEffect(()=>{n&&d({farm_name:n.farm_name||"",farm_type:n.farm_type||"",registration_number:n.registration_number||"",address:n.address||"",phone:n.phone||"",email:n.email||"",herd_size:n.herd_size?String(n.herd_size):"",certifications:n.certifications||[],notes:n.notes||""})},[n]);const h=g=>{const{id:p,value:v}=g.target;d(y=>({...y,[p]:v}))},m=(g,p)=>{d(v=>({...v,[g]:p}))},f=g=>{d(p=>({...p,certifications:p.certifications.includes(g)?p.certifications.filter(v=>v!==g):[...p.certifications,g]}))},x=async g=>{if(g.preventDefault(),!!n){if(!u.farm_name.trim()){r({title:"Erreur de validation",description:"Le nom de l'exploitation est obligatoire",variant:"destructive"});return}c(!0);try{const{error:p}=await fe.from("farms").update({farm_name:u.farm_name.trim(),farm_type:u.farm_type||null,registration_number:u.registration_number.trim()||null,address:u.address.trim()||null,phone:u.phone.trim()||null,email:u.email.trim()||null,herd_size:u.herd_size?Number(u.herd_size):null,certifications:u.certifications.length>0?u.certifications:null,notes:u.notes.trim()||null,updated_at:new Date().toISOString()}).eq("id",n.id);if(p)throw p;r({title:" Exploitation modifie",description:`${u.farm_name} a t mise  jour avec succs.`}),t(!1)}catch(p){console.error("Error updating farm:",p);let v="Une erreur inattendue s'est produite.";p instanceof Error&&(v=p.message),r({title:" Erreur de mise  jour",description:v,variant:"destructive"})}finally{c(!1)}}};return n?s.jsx(tt,{open:e,onOpenChange:t,children:s.jsxs(et,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(nt,{children:[s.jsx(rt,{children:"Modifier l'Exploitation"}),s.jsx(At,{children:"Modifiez les informations de l'exploitation agricole"})]}),s.jsxs("form",{onSubmit:x,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Informations de base"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"farm_name",children:"Nom de l'exploitation *"}),s.jsx(se,{id:"farm_name",value:u.farm_name,onChange:h,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"registration_number",children:"Numro d'enregistrement"}),s.jsx(se,{id:"registration_number",value:u.registration_number,onChange:h})]})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"farm_type",children:"Type d'exploitation"}),s.jsxs(_e,{value:u.farm_type,onValueChange:g=>m("farm_type",g),children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Slectionner le type"})}),s.jsx(Se,{children:i.map(g=>s.jsx(Q,{value:g,children:g},g))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"herd_size",children:"Taille du cheptel"}),s.jsx(se,{id:"herd_size",type:"number",min:"0",value:u.herd_size,onChange:h,placeholder:"Nombre d'animaux"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Informations de contact"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"address",children:"Adresse"}),s.jsx(Ke,{id:"address",value:u.address,onChange:h,placeholder:"Adresse complte de l'exploitation",rows:2})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"phone",children:"Tlphone"}),s.jsx(se,{id:"phone",type:"tel",value:u.phone,onChange:h,placeholder:"Numro de tlphone"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"email",children:"Email"}),s.jsx(se,{id:"email",type:"email",value:u.email,onChange:h,placeholder:"Adresse email"})]})]})]}),o.length>0&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Certifications"}),s.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:o.map(g=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Zv,{id:`cert-${g}`,checked:u.certifications.includes(g),onCheckedChange:()=>f(g)}),s.jsx(M,{htmlFor:`cert-${g}`,className:"text-sm font-normal cursor-pointer",children:g})]},g))}),u.certifications.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2",children:u.certifications.map(g=>s.jsxs(Ie,{variant:"secondary",className:"gap-1",children:[g,s.jsx(Ws,{className:"h-3 w-3 cursor-pointer",onClick:()=>f(g)})]},g))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"notes",children:"Notes"}),s.jsx(Ke,{id:"notes",value:u.notes,onChange:h,placeholder:"Notes additionnelles sur l'exploitation...",rows:4})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[s.jsx($,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:l,children:"Annuler"}),s.jsxs($,{type:"submit",disabled:l,children:[l&&s.jsx(on,{className:"h-4 w-4 animate-spin mr-2"}),l?"Enregistrement...":"Enregistrer les modifications"]})]})]})]})}):null},REe=({open:e,onOpenChange:t,intervention:n})=>{const{user:r}=Sn(),{toast:a}=it(),[i,o]=b.useState([]),[l,c]=b.useState({farm_id:"",intervention_date:"",intervention_type:"",animal_count:"",description:"",diagnosis:"",treatment:"",medications_used:[],cost:"",follow_up_date:"",notes:""}),[u,d]=b.useState(""),[h,m]=b.useState(!1),f=["vaccination","traitement_preventif","traitement_curatif","chirurgie","diagnostic","suivi_reproduction","consultation_generale","urgence","autre"],x={vaccination:"Vaccination",traitement_preventif:"Traitement prventif",traitement_curatif:"Traitement curatif",chirurgie:"Chirurgie",diagnostic:"Diagnostic",suivi_reproduction:"Suivi reproduction",consultation_generale:"Consultation gnrale",urgence:"Urgence",autre:"Autre"};b.useEffect(()=>{e&&r&&g()},[e,r]),b.useEffect(()=>{var j,N;n?c({farm_id:n.farm_id,intervention_date:n.intervention_date,intervention_type:n.intervention_type,animal_count:((j=n.animal_count)==null?void 0:j.toString())||"",description:n.description||"",diagnosis:n.diagnosis||"",treatment:n.treatment||"",medications_used:n.medications_used||[],cost:((N=n.cost)==null?void 0:N.toString())||"",follow_up_date:n.follow_up_date||"",notes:n.notes||""}):p()},[n]);const g=async()=>{if(r)try{const{data:j,error:N}=await fe.from("farms").select("id, farm_name").eq("user_id",r.id).eq("active",!0).order("farm_name");if(N)throw N;o(j||[])}catch(j){console.error("Error fetching farms:",j),a({title:"Erreur",description:"Impossible de charger les exploitations",variant:"destructive"})}},p=()=>{const j=new Date().toISOString().split("T")[0];c({farm_id:"",intervention_date:j,intervention_type:"",animal_count:"",description:"",diagnosis:"",treatment:"",medications_used:[],cost:"",follow_up_date:"",notes:""}),d("")},v=async j=>{if(j.preventDefault(),!(!r||!n)){if(!l.intervention_type){a({title:"Erreur",description:"Veuillez slectionner un type d'intervention",variant:"destructive"});return}if(!l.intervention_date){a({title:"Erreur",description:"Veuillez slectionner une date d'intervention",variant:"destructive"});return}m(!0);try{const N={intervention_date:l.intervention_date,intervention_type:l.intervention_type,animal_count:l.animal_count?parseInt(l.animal_count):null,description:l.description||null,diagnosis:l.diagnosis||null,treatment:l.treatment||null,medications_used:l.medications_used.length>0?l.medications_used:null,cost:l.cost?parseFloat(l.cost):null,follow_up_date:l.follow_up_date||null,notes:l.notes||null,updated_at:new Date().toISOString()},{error:C}=await fe.from("farm_interventions").update(N).eq("id",n.id);if(C)throw C;a({title:"Succs",description:"Intervention mise  jour avec succs"}),t(!1)}catch(N){console.error("Error updating intervention:",N),a({title:"Erreur",description:N.message||"Impossible de mettre  jour l'intervention",variant:"destructive"})}finally{m(!1)}}},y=(j,N)=>{c(C=>({...C,[j]:N}))},w=()=>{u.trim()&&!l.medications_used.includes(u.trim())&&(c(j=>({...j,medications_used:[...j.medications_used,u.trim()]})),d(""))},S=j=>{c(N=>({...N,medications_used:N.medications_used.filter(C=>C!==j)}))};return i.find(j=>j.id===l.farm_id),n?s.jsx(tt,{open:e,onOpenChange:t,children:s.jsxs(et,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[s.jsxs(nt,{children:[s.jsx(rt,{children:"Modifier l'Intervention"}),s.jsx(At,{children:"Modifier les dtails de l'intervention vtrinaire"})]}),s.jsxs("form",{onSubmit:v,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"farm_id",children:"Exploitation"}),s.jsxs(_e,{value:l.farm_id,onValueChange:j=>y("farm_id",j),disabled:!0,children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Slectionner une exploitation"})}),s.jsx(Se,{children:i.map(j=>s.jsx(Q,{value:j.id,children:j.farm_name},j.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"intervention_date",children:"Date d'intervention *"}),s.jsx(se,{id:"intervention_date",type:"date",value:l.intervention_date,onChange:j=>y("intervention_date",j.target.value),required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"intervention_type",children:"Type d'intervention *"}),s.jsxs(_e,{value:l.intervention_type,onValueChange:j=>y("intervention_type",j),children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Slectionner le type"})}),s.jsx(Se,{children:f.map(j=>s.jsx(Q,{value:j,children:x[j]},j))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"animal_count",children:"Nombre d'animaux"}),s.jsx(se,{id:"animal_count",type:"number",value:l.animal_count,onChange:j=>y("animal_count",j.target.value),placeholder:"Nombre d'animaux concerns",min:"1"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"description",children:"Description"}),s.jsx(Ke,{id:"description",value:l.description,onChange:j=>y("description",j.target.value),placeholder:"Description de l'intervention...",rows:2})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"diagnosis",children:"Diagnostic"}),s.jsx(Ke,{id:"diagnosis",value:l.diagnosis,onChange:j=>y("diagnosis",j.target.value),placeholder:"Diagnostic vtrinaire...",rows:2})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"treatment",children:"Traitement"}),s.jsx(Ke,{id:"treatment",value:l.treatment,onChange:j=>y("treatment",j.target.value),placeholder:"Traitement prescrit...",rows:2})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Mdicaments utiliss"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(se,{value:u,onChange:j=>d(j.target.value),placeholder:"Nom du mdicament",onKeyPress:j=>j.key==="Enter"&&(j.preventDefault(),w())}),s.jsx($,{type:"button",onClick:w,variant:"outline",children:"Ajouter"})]}),l.medications_used.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:l.medications_used.map((j,N)=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-800 rounded-md text-sm",children:[j,s.jsx("button",{type:"button",onClick:()=>S(j),className:"ml-1 text-blue-600 hover:text-blue-800",children:""})]},N))})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"cost",children:"Cot (MAD)"}),s.jsx(se,{id:"cost",type:"number",step:"0.01",value:l.cost,onChange:j=>y("cost",j.target.value),placeholder:"0.00",min:"0"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"follow_up_date",children:"Date de suivi"}),s.jsx(se,{id:"follow_up_date",type:"date",value:l.follow_up_date,onChange:j=>y("follow_up_date",j.target.value)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"notes",children:"Notes"}),s.jsx(Ke,{id:"notes",value:l.notes,onChange:j=>y("notes",j.target.value),placeholder:"Notes additionnelles...",rows:2})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx($,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsx($,{type:"submit",disabled:h,children:h?"Mise  jour...":"Mettre  jour"})]})]})]})}):null},PO=()=>{const{user:e}=Sn(),{toast:t}=it(),{data:n}=km(),r=(n==null?void 0:n.farm_types)||["Laitire","Viande","Mixte"],[a,i]=b.useState([]),[o,l]=b.useState([]),[c,u]=b.useState(!0),[d,h]=b.useState(""),[m,f]=b.useState("all"),[x,g]=b.useState("cards"),[p,v]=b.useState(!1),[y,w]=b.useState(!1),[S,j]=b.useState(!1),[N,C]=b.useState(!1),[_,A]=b.useState(!1),[P,T]=b.useState(null),[E,I]=b.useState(null),R=async()=>{if(e)try{const{data:te,error:ce}=await fe.from("farms").select(`
          *,
          clients(first_name, last_name)
        `).eq("user_id",e.id).eq("active",!0).order("created_at",{ascending:!1});if(ce)throw ce;i(te||[])}catch(te){console.error("Error fetching farms:",te),t({title:"Erreur",description:"Impossible de charger les exploitations",variant:"destructive"})}finally{u(!1)}},z=async()=>{if(e)try{const{data:te,error:ce}=await fe.from("farm_interventions").select(`
          *,
          farms(farm_name),
          user_profiles(full_name)
        `).order("intervention_date",{ascending:!1}).limit(50);if(ce)throw ce;l(te||[])}catch(te){console.error("Error fetching farm interventions:",te)}};b.useEffect(()=>{e&&(R(),z())},[e]);const U=async te=>{if(confirm("tes-vous sr de vouloir supprimer cette exploitation ?"))try{const{error:ce}=await fe.from("farms").update({active:!1}).eq("id",te);if(ce)throw ce;t({title:"Succs",description:"Exploitation supprime avec succs"}),R()}catch(ce){console.error("Error deleting farm:",ce),t({title:"Erreur",description:"Impossible de supprimer l'exploitation",variant:"destructive"})}},K=async te=>{if(confirm("tes-vous sr de vouloir supprimer cette intervention ?"))try{const{error:ce}=await fe.from("farm_interventions").delete().eq("id",te);if(ce)throw ce;t({title:"Succs",description:"Intervention supprime avec succs"}),z()}catch(ce){console.error("Error deleting intervention:",ce),t({title:"Erreur",description:"Impossible de supprimer l'intervention",variant:"destructive"})}},k=te=>{T(te),j(!0)},D=te=>{T(te),C(!0)},J=te=>{te&&T(te),w(!0)},W=te=>{I(te),A(!0)},Y=a.filter(te=>{const ce=te.clients?`${te.clients.first_name} ${te.clients.last_name}`:"",ge=te.farm_name.toLowerCase().includes(d.toLowerCase())||ce.toLowerCase().includes(d.toLowerCase())||te.farm_type&&te.farm_type.toLowerCase().includes(d.toLowerCase()),H=m==="all"||te.farm_type===m;return ge&&H}),V=o.filter(te=>te.follow_up_date&&new Date(te.follow_up_date)>new Date),O={"levage bovin":"levage bovin","levage ovin":"levage ovin","levage caprin":"levage caprin","levage quin":"levage quin","levage avicole":"levage avicole","levage porcin":"levage porcin","levage mixte":"levage mixte",Autre:"Autre"},le={vaccination:"Vaccination",controle:"Contrle sanitaire",urgence:"Urgence",chirurgie:"Chirurgie",prevention:"Prvention",consultation:"Consultation"};return c?s.jsx("div",{className:"container mx-auto px-6 py-8",children:s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx("div",{className:"text-lg",children:"Chargement des exploitations..."})})}):s.jsxs("div",{className:"container mx-auto px-6 py-8 space-y-8",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Gestion des Exploitations"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Grez les fermes, levages et interventions vtrinaires"})]}),s.jsxs($,{className:"gap-2 medical-glow",onClick:()=>v(!0),children:[s.jsx(Ye,{className:"h-4 w-4"}),"Nouvelle Exploitation"]})]}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-4",children:[s.jsx(ie,{children:s.jsxs(oe,{className:"p-6 text-center",children:[s.jsx(L0,{className:"h-12 w-12 text-primary mx-auto mb-4"}),s.jsx("div",{className:"text-2xl font-bold",children:a.length}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Exploitations"})]})}),s.jsx(ie,{children:s.jsxs(oe,{className:"p-6 text-center",children:[s.jsx(RI,{className:"h-12 w-12 text-secondary mx-auto mb-4"}),s.jsx("div",{className:"text-2xl font-bold",children:a.reduce((te,ce)=>te+(ce.herd_size||0),0)}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Total animaux"})]})}),s.jsx(ie,{children:s.jsxs(oe,{className:"p-6 text-center",children:[s.jsx(pn,{className:"h-12 w-12 text-accent mx-auto mb-4"}),s.jsx("div",{className:"text-2xl font-bold",children:"0"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Alertes actives"})]})}),s.jsx(ie,{children:s.jsxs(oe,{className:"p-6 text-center",children:[s.jsx(Ze,{className:"h-12 w-12 text-blue-600 mx-auto mb-4"}),s.jsx("div",{className:"text-2xl font-bold",children:V.length}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Interventions  venir"})]})})]}),s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsxs(ye,{className:"flex items-center gap-2",children:[s.jsx(Si,{className:"h-5 w-5"}),"Rechercher et filtrer"]})}),s.jsx(oe,{className:"space-y-4",children:s.jsxs("div",{className:"flex gap-4",children:[s.jsx(se,{placeholder:"Rechercher par nom, propritaire ou type...",value:d,onChange:te=>h(te.target.value),className:"max-w-md"}),s.jsxs(_e,{value:m,onValueChange:f,children:[s.jsx(Ne,{className:"w-48",children:s.jsx(Ce,{placeholder:"Type d'levage"})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"all",children:"Tous types"}),r.map(te=>s.jsx(Q,{value:te,children:te},te))]})]})]})})]}),s.jsxs($a,{defaultValue:"farms",className:"space-y-6",children:[s.jsxs(Zs,{className:"grid w-full grid-cols-2",children:[s.jsxs(yt,{value:"farms",className:"gap-2",children:[s.jsx(L0,{className:"h-4 w-4"}),"Exploitations"]}),s.jsxs(yt,{value:"interventions",className:"gap-2",children:[s.jsx(Ze,{className:"h-4 w-4"}),"Interventions"]})]}),s.jsxs(wt,{value:"farms",className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-lg font-semibold",children:["Exploitations (",Y.length,")"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs($,{size:"sm",variant:x==="cards"?"default":"outline",onClick:()=>g("cards"),className:"gap-2",children:[s.jsx(_o,{className:"h-4 w-4"}),"Cartes"]}),s.jsxs($,{size:"sm",variant:x==="table"?"default":"outline",onClick:()=>g("table"),className:"gap-2",children:[s.jsx(vi,{className:"h-4 w-4"}),"Tableau"]}),s.jsxs($,{className:"gap-2",onClick:()=>w(!0),children:[s.jsx(Wn,{className:"h-4 w-4"}),"Nouvelle Intervention"]})]})]}),Y.length===0?s.jsx(ie,{children:s.jsx(oe,{className:"p-6 text-center text-muted-foreground",children:a.length===0?"Aucune exploitation enregistre":"Aucune exploitation trouve"})}):x==="cards"?Y.map(te=>s.jsx(ie,{className:"card-hover",children:s.jsx(oe,{className:"p-6",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"space-y-3 flex-1",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("h4",{className:"text-xl font-semibold",children:te.farm_name}),s.jsx(Ie,{variant:"outline",className:"bg-green-100 text-green-800",children:"Actif"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Propritaire:"})," ",te.clients?`${te.clients.first_name} ${te.clients.last_name}`:"Non spcifi"]}),s.jsxs("p",{className:"flex items-center gap-1",children:[s.jsx(Du,{className:"h-3 w-3"}),te.address||"Adresse non renseigne"]}),s.jsxs("p",{className:"flex items-center gap-1",children:[s.jsx(mf,{className:"h-3 w-3"}),te.phone||"Tlphone non renseign"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Type:"}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:te.farm_type&&s.jsx(Ie,{variant:"secondary",className:"text-xs",children:O[te.farm_type]||te.farm_type})})]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Animaux:"})," ",te.herd_size||0]}),s.jsxs("p",{children:[s.jsx("strong",{children:"N enregistrement:"})," ",te.registration_number||"N/A"]})]})]}),te.certifications&&te.certifications.length>0&&s.jsxs("div",{className:"text-sm",children:[s.jsx("strong",{children:"Certifications:"}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:te.certifications.map((ce,ge)=>s.jsx(Ie,{variant:"outline",className:"text-xs",children:ce},ge))})]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Cr le: ",Al(te.created_at)]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx($,{size:"sm",variant:"outline",onClick:()=>k(te),children:s.jsx($n,{className:"h-4 w-4"})}),s.jsx($,{size:"sm",variant:"outline",onClick:()=>D(te),children:s.jsx(It,{className:"h-4 w-4"})}),s.jsx($,{size:"sm",onClick:()=>J(te),children:s.jsx(Wn,{className:"h-4 w-4"})}),s.jsx($,{size:"sm",variant:"destructive",onClick:()=>U(te.id),children:s.jsx(Wt,{className:"h-4 w-4"})})]})]})})},te.id)):s.jsx(ie,{children:s.jsx(oe,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"border-b",children:s.jsxs("tr",{className:"text-left",children:[s.jsx("th",{className:"p-4 font-medium",children:"Exploitation"}),s.jsx("th",{className:"p-4 font-medium",children:"Propritaire"}),s.jsx("th",{className:"p-4 font-medium",children:"Type"}),s.jsx("th",{className:"p-4 font-medium",children:"Animaux"}),s.jsx("th",{className:"p-4 font-medium",children:"Contact"}),s.jsx("th",{className:"p-4 font-medium",children:"Actions"})]})}),s.jsx("tbody",{children:Y.map(te=>s.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[s.jsx("td",{className:"p-4",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:te.farm_name}),s.jsx("div",{className:"text-sm text-muted-foreground",children:te.address})]})}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:te.clients?`${te.clients.first_name} ${te.clients.last_name}`:"Non spcifi"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:te.registration_number&&`N: ${te.registration_number}`})]})}),s.jsx("td",{className:"p-4",children:te.farm_type&&s.jsx(Ie,{variant:"secondary",className:"text-xs",children:O[te.farm_type]||te.farm_type})}),s.jsx("td",{className:"p-4",children:te.herd_size||0}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(mf,{className:"h-3 w-3"}),te.phone||"N/A"]}),s.jsx("div",{className:"text-muted-foreground",children:te.email||"Email non renseign"})]})}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex gap-1",children:[s.jsx($,{size:"sm",variant:"outline",onClick:()=>k(te),children:s.jsx($n,{className:"h-4 w-4"})}),s.jsx($,{size:"sm",variant:"outline",onClick:()=>D(te),children:s.jsx(It,{className:"h-4 w-4"})}),s.jsx($,{size:"sm",onClick:()=>J(te),children:s.jsx(Wn,{className:"h-4 w-4"})}),s.jsx($,{size:"sm",variant:"destructive",onClick:()=>U(te.id),children:s.jsx(Wt,{className:"h-4 w-4"})})]})})]},te.id))})]})})})})]}),s.jsxs(wt,{value:"interventions",className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-lg font-semibold",children:["Interventions rcentes (",o.length,")"]}),s.jsxs($,{className:"gap-2",onClick:()=>w(!0),children:[s.jsx(Wn,{className:"h-4 w-4"}),"Nouvelle Intervention"]})]}),o.length===0?s.jsx(ie,{children:s.jsx(oe,{className:"p-6 text-center text-muted-foreground",children:"Aucune intervention enregistre"})}):o.map(te=>{var ce,ge;return s.jsx(ie,{className:"card-hover",children:s.jsx(oe,{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("h4",{className:"text-lg font-semibold",children:le[te.intervention_type]||te.intervention_type}),s.jsx(Ie,{variant:"outline",className:"bg-green-100 text-green-800",children:"Termin"})]}),s.jsxs("div",{className:"flex items-center gap-6 text-sm text-muted-foreground",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Ze,{className:"h-3 w-3"}),Al(te.intervention_date)]}),s.jsx("span",{children:(ce=te.farms)==null?void 0:ce.farm_name}),s.jsx("span",{children:((ge=te.user_profiles)==null?void 0:ge.full_name)||"Vtrinaire"})]})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Animaux concerns:"})," ",te.animal_count||"Non spcifi"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Cot:"})," ",te.cost?`${te.cost} MAD`:"N/A"]})]}),te.description&&s.jsx("p",{className:"text-sm",children:te.description}),te.follow_up_date&&s.jsxs("p",{className:"text-sm text-blue-600",children:[s.jsx("strong",{children:"Suivi prvu:"})," ",Al(te.follow_up_date)]}),s.jsxs("div",{className:"flex gap-2 pt-2 border-t",children:[s.jsx($,{size:"sm",variant:"outline",children:s.jsx($n,{className:"h-4 w-4"})}),s.jsx($,{size:"sm",variant:"outline",onClick:()=>W(te),children:s.jsx(It,{className:"h-4 w-4"})}),s.jsx($,{size:"sm",variant:"destructive",onClick:()=>K(te.id),children:s.jsx(Wt,{className:"h-4 w-4"})})]})]})})},te.id)})]})]}),a.length===0&&s.jsx(ie,{className:"text-center py-12",children:s.jsxs(oe,{children:[s.jsx(L0,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("p",{className:"text-lg font-medium mb-2",children:"Aucune exploitation enregistre"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Commencez par crer votre premire exploitation agricole."}),s.jsxs($,{children:[s.jsx(Ye,{className:"h-4 w-4 mr-2"}),"Crer une exploitation"]})]})}),s.jsx(DEe,{open:p,onOpenChange:te=>{v(te),te||R()}}),s.jsx(MEe,{open:y,onOpenChange:te=>{w(te),te||(T(null),z())},farmId:P?P.id:void 0,farmName:P==null?void 0:P.farm_name}),s.jsx(IEe,{farm:P,open:S,onOpenChange:te=>{j(te),te||T(null)},onEdit:()=>{j(!1),D(P)},onNewIntervention:()=>{j(!1),w(!0)}}),s.jsx($Ee,{farm:P,open:N,onOpenChange:te=>{C(te),te||(T(null),R())}}),s.jsx(REe,{intervention:E,open:_,onOpenChange:te=>{A(te),te||z()}})]})};function LEe({children:e,selectedAnimalId:t,open:n,onOpenChange:r}){const{data:a=[]}=fn(),{data:i=[]}=vn(),o=Ree(),{toast:l}=it(),{data:c=[],isLoading:u}=oL(),[d,h]=b.useState(!1),m=n!==void 0?n:d,f=r||h,[x,g]=b.useState({animalId:t||"",vaccineName:"",vaccineType:"",manufacturer:"",batchNumber:"",vaccinationDate:ht(new Date,"yyyy-MM-dd"),nextDueDate:"",administeredBy:"",notes:""}),p=async w=>{var _,A,P,T,E;if(w.preventDefault(),!x.animalId){l({title:"Animal manquant",description:"Veuillez slectionner l'animal  vacciner.",variant:"destructive"});return}if(!((_=x.vaccineName)!=null&&_.trim())){l({title:"Nom du vaccin manquant",description:"Veuillez indiquer le nom du vaccin administr.",variant:"destructive"});return}if(!x.vaccinationDate){l({title:"Date manquante",description:"Veuillez indiquer la date de vaccination.",variant:"destructive"});return}if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(x.animalId)){l({title:"Erreur systme",description:"L'animal slectionn n'est pas valide. Veuillez rafrachir la page.",variant:"destructive"});return}const j=new Date(x.vaccinationDate),N=new Date;if(N.setHours(0,0,0,0),j>N){const I=new Date;if(I.setMonth(I.getMonth()+1),j>I){l({title:"Date invalide",description:"La date de vaccination ne peut pas tre plus d'un mois dans le futur.",variant:"destructive"});return}}const C={animal_id:x.animalId,vaccine_name:x.vaccineName.trim(),vaccine_type:x.vaccineType||void 0,manufacturer:((A=x.manufacturer)==null?void 0:A.trim())||void 0,batch_number:((P=x.batchNumber)==null?void 0:P.trim())||void 0,vaccination_date:x.vaccinationDate,next_due_date:x.nextDueDate||void 0,administered_by:((T=x.administeredBy)==null?void 0:T.trim())||void 0,notes:((E=x.notes)==null?void 0:E.trim())||void 0};try{await o.mutateAsync(C);const I=a.find(z=>z.id===x.animalId),R=(I==null?void 0:I.name)||"l'animal";l({title:" Vaccination enregistre",description:`La vaccination de ${R} a t ajoute avec succs.`}),g({animalId:t||"",vaccineName:"",vaccineType:"",manufacturer:"",batchNumber:"",vaccinationDate:ht(new Date,"yyyy-MM-dd"),nextDueDate:"",administeredBy:"",notes:""}),f(!1)}catch(I){console.error("Error creating vaccination:",I);let R="Une erreur inattendue s'est produite. Veuillez ressayer.";if(I!=null&&I.message){const z=I.message.toLowerCase();z.includes("duplicate")||z.includes("unique")?R="Cette vaccination existe dj pour cet animal  cette date.":z.includes("foreign key")||z.includes("animal")?R="L'animal slectionn n'existe plus. Veuillez rafrachir la page.":z.includes("network")||z.includes("fetch")||z.includes("connection")?R="Problme de connexion. Vrifiez votre connexion internet et ressayez.":z.includes("permission")||z.includes("authorized")?R="Vous n'avez pas les permissions ncessaires pour ajouter une vaccination.":z.includes("authentication")?R="Votre session a expir. Veuillez vous reconnecter.":I.message.length<100&&(R=I.message)}l({title:" Impossible d'enregistrer la vaccination",description:R,variant:"destructive"})}},v=a.find(w=>w.id===x.animalId),y=v?i.find(w=>w.id===v.client_id):null;return s.jsxs(tt,{open:m,onOpenChange:f,children:[s.jsx(Vx,{asChild:!0,children:e||s.jsxs($,{className:"gap-2",children:[s.jsx(Ye,{className:"h-4 w-4"}),"Nouvelle Vaccination"]})}),s.jsxs(et,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(nt,{children:s.jsxs(rt,{className:"flex items-center gap-2",children:[s.jsx(xo,{className:"h-5 w-5"}),"Nouvelle Vaccination"]})}),s.jsxs("form",{onSubmit:p,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"animal",children:"Animal *"}),s.jsxs(_e,{value:x.animalId,onValueChange:w=>g({...x,animalId:w}),children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Slectionnez un animal"})}),s.jsx(Se,{children:a.map(w=>{const S=i.find(j=>j.id===w.client_id);return s.jsxs(Q,{value:w.id,children:[w.name," - ",w.species," (",S?`${S.first_name} ${S.last_name}`:"Client inconnu",")"]},w.id)})})]}),v&&y&&s.jsxs("p",{className:"text-sm text-gray-600",children:["Propritaire: ",y.first_name," ",y.last_name]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"vaccineName",children:"Nom du vaccin *"}),s.jsx(se,{id:"vaccineName",value:x.vaccineName,onChange:w=>g({...x,vaccineName:w.target.value}),placeholder:"ex: DHPP, Rage, FVRCP...",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"vaccineType",children:"Type de vaccin"}),s.jsxs(_e,{value:x.vaccineType,onValueChange:w=>g({...x,vaccineType:w}),children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Slectionnez le type"})}),s.jsx(Se,{children:c.map(w=>s.jsx(Q,{value:w,children:w},w))})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"manufacturer",children:"Fabricant"}),s.jsx(se,{id:"manufacturer",value:x.manufacturer,onChange:w=>g({...x,manufacturer:w.target.value}),placeholder:"ex: Zoetis, Virbac, Merial..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"batchNumber",children:"Numro de lot"}),s.jsx(se,{id:"batchNumber",value:x.batchNumber,onChange:w=>g({...x,batchNumber:w.target.value}),placeholder:"Numro de lot du vaccin"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"vaccinationDate",children:"Date de vaccination *"}),s.jsx(se,{id:"vaccinationDate",type:"date",value:x.vaccinationDate,onChange:w=>g({...x,vaccinationDate:w.target.value}),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"nextDueDate",children:"Prochain rappel"}),s.jsx(se,{id:"nextDueDate",type:"date",value:x.nextDueDate,onChange:w=>g({...x,nextDueDate:w.target.value}),min:x.vaccinationDate})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"notes",children:"Notes"}),s.jsx(Ke,{id:"notes",value:x.notes,onChange:w=>g({...x,notes:w.target.value}),placeholder:"Notes complmentaires...",rows:3})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx($,{type:"button",variant:"outline",onClick:()=>f(!1),children:"Annuler"}),s.jsx($,{type:"submit",disabled:o.isPending,children:o.isPending?"Ajout...":"Ajouter la vaccination"})]})]})]})]})}function Iw({children:e,mode:t,protocol:n,open:r,onOpenChange:a}){var w;const i=Bee(),o=qee(),{toast:l}=it(),{data:c=[],isLoading:u}=sc(),{data:d=[],isLoading:h}=oL(),[m,f]=b.useState(!1),x=r!==void 0?r:m,g=a||f,[p,v]=b.useState({species:(n==null?void 0:n.species)||"",vaccineName:(n==null?void 0:n.vaccine_name)||"",vaccineType:(n==null?void 0:n.vaccine_type)||"",ageRecommendation:(n==null?void 0:n.age_recommendation)||"",frequency:(n==null?void 0:n.frequency)||"",durationDays:((w=n==null?void 0:n.duration_days)==null?void 0:w.toString())||"",notes:(n==null?void 0:n.notes)||"",active:(n==null?void 0:n.active)??!0}),y=async S=>{if(S.preventDefault(),!p.species||!p.vaccineName||!p.vaccineType){l({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires",variant:"destructive"});return}try{const j={species:p.species,vaccine_name:p.vaccineName,vaccine_type:p.vaccineType,age_recommendation:p.ageRecommendation||void 0,frequency:p.frequency||void 0,duration_days:p.durationDays?parseInt(p.durationDays):void 0,notes:p.notes||void 0,active:p.active};t==="create"?(await i.mutateAsync(j),l({title:"Protocole cr",description:`Le protocole ${p.vaccineName} a t cr avec succs`})):n&&(await o.mutateAsync({id:n.id,data:j}),l({title:"Protocole modifi",description:`Le protocole ${p.vaccineName} a t modifi avec succs`})),t==="create"&&v({species:"",vaccineName:"",vaccineType:"",ageRecommendation:"",frequency:"",durationDays:"",notes:"",active:!0}),g(!1)}catch{l({title:"Erreur",description:`Impossible de ${t==="create"?"crer":"modifier"} le protocole`,variant:"destructive"})}};return s.jsxs(tt,{open:x,onOpenChange:g,children:[s.jsx(Vx,{asChild:!0,children:e||s.jsxs($,{className:"gap-2",children:[s.jsx(Ye,{className:"h-4 w-4"}),t==="create"?"Nouveau Protocole":"Modifier"]})}),s.jsxs(et,{className:"max-w-2xl",children:[s.jsx(nt,{children:s.jsxs(rt,{className:"flex items-center gap-2",children:[s.jsx(Jn,{className:"h-5 w-5"}),t==="create"?"Nouveau Protocole Vaccinal":"Modifier le Protocole"]})}),s.jsxs("form",{onSubmit:y,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"species",children:"Espce *"}),s.jsxs(_e,{value:p.species,onValueChange:S=>v({...p,species:S}),children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Slectionnez l'espce"})}),s.jsx(Se,{children:c.map(S=>s.jsx(Q,{value:S,children:S},S))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"vaccineName",children:"Nom du vaccin *"}),s.jsx(se,{id:"vaccineName",value:p.vaccineName,onChange:S=>v({...p,vaccineName:S.target.value}),placeholder:"ex: DHPP, Rage, FVRCP...",required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"vaccineType",children:"Type de vaccin *"}),s.jsxs(_e,{value:p.vaccineType,onValueChange:S=>v({...p,vaccineType:S}),children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Slectionnez le type"})}),s.jsx(Se,{children:d.map(S=>s.jsx(Q,{value:S,children:S},S))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"ageRecommendation",children:"ge recommand"}),s.jsx(se,{id:"ageRecommendation",value:p.ageRecommendation,onChange:S=>v({...p,ageRecommendation:S.target.value}),placeholder:"ex: 8 semaines, 3 mois..."})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"frequency",children:"Frquence"}),s.jsx(se,{id:"frequency",value:p.frequency,onChange:S=>v({...p,frequency:S.target.value}),placeholder:"ex: Annuelle, Tous les 3 ans..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"durationDays",children:"Dure (jours)"}),s.jsx(se,{id:"durationDays",type:"number",value:p.durationDays,onChange:S=>v({...p,durationDays:S.target.value}),placeholder:"ex: 365, 1095...",min:"1"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"notes",children:"Notes"}),s.jsx(Ke,{id:"notes",value:p.notes,onChange:S=>v({...p,notes:S.target.value}),placeholder:"Informations complmentaires sur le protocole...",rows:3})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"active",checked:p.active,onChange:S=>v({...p,active:S.target.checked}),className:"rounded"}),s.jsx(M,{htmlFor:"active",children:"Protocole actif"})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx($,{type:"button",variant:"outline",onClick:()=>g(!1),children:"Annuler"}),s.jsx($,{type:"submit",disabled:i.isPending||o.isPending,children:i.isPending||o.isPending?t==="create"?"Cration...":"Modification...":t==="create"?"Crer le protocole":"Modifier le protocole"})]})]})]})]})}function FEe({animalId:e}){const{settings:t}=Zt(),{data:n}=fn(),{data:r}=vn(),{data:a}=nc(),i=JSON.parse(localStorage.getItem("vetpro-veterinarians")||"[]"),o=n==null?void 0:n.find(h=>h.id===e),l=o?r==null?void 0:r.find(h=>h.id===o.client_id):null,c=(a==null?void 0:a.filter(h=>h.animal_id===e))||[],u=h=>{const m=new Date(h),f=new Date;if(isNaN(m.getTime()))return"N/A";let x=f.getFullYear()-m.getFullYear(),g=f.getMonth()-m.getMonth(),p=f.getDate()-m.getDate();if(p<0){g--;const w=new Date(f.getFullYear(),f.getMonth(),0);p+=w.getDate()}g<0&&(x--,g+=12);const v=Math.floor(p/7),y=[];return x>0&&y.push(`${x} an${x>1?"s":""}`),g>0&&y.push(`${g} mois`),v>0&&y.push(`${v} semain${v>1?"es":""}`),y.join(", ")||"0 jour"},d=()=>{if(!o||!l){alert("Donnes animal ou client manquantes");return}try{const h=window.open("",`vaccination_certificate_${o.id}`,"height=800,width=800");if(!h){alert("L'impression a t bloque par le navigateur. Veuillez autoriser les popups pour ce site.");return}const m=`
        <!DOCTYPE html>
        <html>
          <head>
            <title>Certificat de Vaccination - ${o.name}</title>
            <style>
              body {
                font-family: Arial, sans-serif;
                margin: 20px;
                line-height: 1.6;
                color: #333;
              }
              .header {
                text-align: center;
                border-bottom: 3px solid #2c5530;
                padding-bottom: 20px;
                margin-bottom: 30px;
              }
              .header h1 {
                color: #2c5530;
                font-size: 32px;
                margin: 10px 0;
                font-weight: bold;
              }
              .clinic-info {
                margin-bottom: 30px;
                padding: 15px;
                background-color: #f8f9fa;
                border-radius: 8px;
              }
              .clinic-info img {
                height: 60px;
                margin-bottom: 10px;
              }
              .clinic-info h2 {
                color: #2c5530;
                margin: 10px 0;
              }
              .qr-section {
                float: right;
                margin-left: 20px;
              }
              .animal-info {
                clear: both;
                margin-bottom: 30px;
                padding: 20px;
                border: 2px solid #2c5530;
                border-radius: 8px;
              }
              .animal-info h2 {
                color: #2c5530;
                border-bottom: 2px solid #2c5530;
                padding-bottom: 10px;
                margin-bottom: 15px;
                font-size: 24px;
              }
              .animal-photo {
                text-align: center;
                margin-bottom: 20px;
              }
              .animal-photo img {
                width: 120px;
                height: 120px;
                object-fit: cover;
                border-radius: 50%;
                border: 3px solid #2c5530;
              }
              .info-grid {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 15px;
                margin-bottom: 20px;
              }
              .info-item {
                display: flex;
                align-items: center;
              }
              .info-label {
                font-weight: bold;
                min-width: 120px;
                color: #2c5530;
              }
              .info-value {
                color: #666;
              }
              .vaccinations-section {
                margin-bottom: 30px;
              }
              .vaccinations-section h2 {
                color: #2c5530;
                border-bottom: 2px solid #2c5530;
                padding-bottom: 10px;
                margin-bottom: 20px;
                font-size: 24px;
              }
              .vaccination-card {
                border: 1px solid #ddd;
                border-radius: 8px;
                margin-bottom: 15px;
                padding: 15px;
                background-color: #fdfdfd;
              }
              .vaccination-card h3 {
                color: #2c5530;
                margin: 0 0 10px 0;
                font-size: 18px;
              }
              .vaccination-details {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 15px;
              }
              .vaccination-item {
                display: flex;
                align-items: center;
              }
              .vaccination-label {
                font-weight: bold;
                min-width: 140px;
                color: #555;
              }
              .vaccination-value {
                color: #666;
              }
              .vets-info {
                margin-bottom: 30px;
                padding: 15px;
                background-color: #f8f9fa;
                border-radius: 8px;
              }
              .vets-info h2 {
                color: #2c5530;
                margin-bottom: 15px;
              }
              .vet-item {
                margin-bottom: 8px;
                color: #666;
              }
              .footer {
                text-align: center;
                margin-top: 40px;
                padding-top: 20px;
                border-top: 1px solid #ddd;
                color: #888;
                font-size: 12px;
              }
              .no-vaccinations {
                text-align: center;
                color: #666;
                font-style: italic;
                padding: 40px;
                border: 2px dashed #ddd;
                border-radius: 8px;
              }
              
              @media print {
                body { margin: 0; }
                .no-print { display: none; }
              }
            </style>
          </head>
          <body>
            <div class="header">
              ${t.logo?`<img src="${t.logo}" alt="Logo clinique" />`:""}
              <h1>CERTIFICAT DE VACCINATION</h1>
              <div class="qr-section">
                <canvas id="qrcode" width="100" height="100"></canvas>
              </div>
            </div>

            ${t.showClinicInfo?`
            <div class="clinic-info">
              <h2>${t.clinicName||"Clinique Vtrinaire"}</h2>
              <p><strong>Adresse:</strong> ${t.address||"N/A"}</p>
              <p><strong>Tlphone:</strong> ${t.phone||"N/A"} | <strong>Email:</strong> ${t.email||"N/A"}</p>
              ${t.website?`<p><strong>Site web:</strong> ${t.website}</p>`:""}
            </div>
            `:""}

            ${t.showVetsInfo&&i.length>0?`
            <div class="vets-info">
              <h2>quipe Vtrinaire</h2>
              ${i.map(f=>`
                <div class="vet-item">
                  <strong>${f.title||"Dr."} ${f.name}</strong>
                  ${f.specialty?` - ${f.specialty}`:""}
                </div>
              `).join("")}
            </div>
            `:""}

            <div class="animal-info">
              <h2>Informations de l'Animal</h2>
              
              ${o.photo_url?`
              <div class="animal-photo">
                <img src="${o.photo_url}" alt="Photo de ${o.name}" />
              </div>
              `:""}

              <div class="info-grid">
                <div class="info-item">
                  <span class="info-label">Nom:</span>
                  <span class="info-value">${o.name}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Espce:</span>
                  <span class="info-value">${o.species}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Race:</span>
                  <span class="info-value">${o.breed||"N/A"}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">ge:</span>
                  <span class="info-value">${o.birth_date?u(o.birth_date):"N/A"}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Sexe:</span>
                  <span class="info-value">${o.sex||"N/A"}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Poids:</span>
                  <span class="info-value">${o.weight?o.weight+" kg":"N/A"}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Propritaire:</span>
                  <span class="info-value">${l.first_name} ${l.last_name}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Contact:</span>
                  <span class="info-value">${l.phone||l.email||"N/A"}</span>
                </div>
              </div>
            </div>

            <div class="vaccinations-section">
              <h2>Historique des Vaccinations</h2>
              
              ${c.length>0?c.map(f=>`
                  <div class="vaccination-card">
                    <h3>${f.vaccine_name}</h3>
                    <div class="vaccination-details">
                      <div class="vaccination-item">
                        <span class="vaccination-label">Date d'administration:</span>
                        <span class="vaccination-value">
                          ${f.vaccination_date?ht(new Date(f.vaccination_date),"dd/MM/yyyy",{locale:dr}):"N/A"}
                        </span>
                      </div>
                      <div class="vaccination-item">
                        <span class="vaccination-label">Prochaine chance:</span>
                        <span class="vaccination-value">
                          ${f.next_due_date?ht(new Date(f.next_due_date),"dd/MM/yyyy",{locale:dr}):"N/A"}
                        </span>
                      </div>
                      <div class="vaccination-item">
                        <span class="vaccination-label">Type de vaccin:</span>
                        <span class="vaccination-value">${f.vaccine_type||"N/A"}</span>
                      </div>
                      <div class="vaccination-item">
                        <span class="vaccination-label">Fabricant:</span>
                        <span class="vaccination-value">${f.manufacturer||"N/A"}</span>
                      </div>
                      <div class="vaccination-item">
                        <span class="vaccination-label">Numro de lot:</span>
                        <span class="vaccination-value">${f.batch_number||"N/A"}</span>
                      </div>
                  
                    </div>
                    ${f.notes?`
                      <div style="margin-top: 10px; padding-top: 10px; border-top: 1px solid #eee;">
                        <strong>Notes:</strong> ${f.notes}
                      </div>
                    `:""}
                  </div>
                `).join(""):`<div class="no-vaccinations">
                  <p>Aucune vaccination enregistre pour cet animal</p>
                </div>`}
            </div>

            <div class="footer">
              <p>Certificat gnr le ${ht(new Date,"dd/MM/yyyy  HH:mm",{locale:dr})}</p>
              <p>VetPro - Systme de Gestion Vtrinaire</p>
            </div>

            <script>
              // Generate QR Code (simple implementation)
              function generateQRCode() {
                const canvas = document.getElementById('qrcode');
                if (canvas) {
                  const ctx = canvas.getContext('2d');
                  ctx.fillStyle = '#000';
                  ctx.fillRect(0, 0, 100, 100);
                  ctx.fillStyle = '#fff';
                  ctx.font = '12px Arial';
                  ctx.textAlign = 'center';
                  ctx.fillText('QR', 50, 45);
                  ctx.fillText('CODE', 50, 60);
                }
              }
              
              window.onload = function() {
                generateQRCode();
                setTimeout(function() {
                  window.print();
                }, 500);
              };
            <\/script>
          </body>
        </html>
      `;h.document.open(),h.document.write(m),h.document.close(),h.onload=function(){setTimeout(()=>{h.focus(),h.print()},500)}}catch(h){console.error("Erreur lors de l'impression:",h),alert("Une erreur est survenue lors de l'impression du certificat.")}};return!o||!l?s.jsxs($,{variant:"outline",disabled:!0,children:[s.jsx(pf,{className:"h-4 w-4 mr-2"}),"Certificat de vaccination"]}):s.jsxs($,{variant:"outline",onClick:d,children:[s.jsx(pf,{className:"h-4 w-4 mr-2"}),"Certificat de vaccination"]})}const zEe=e=>{if(!e.next_due_date)return"completed";const t=new Date,n=new Date(e.next_due_date);return Jv(n,t)?"overdue":"scheduled"},EO=e=>{switch(e){case"completed":return"bg-green-100 text-green-800 border-green-200";case"overdue":return"bg-red-100 text-red-800 border-red-200";case"scheduled":return"bg-blue-100 text-blue-800 border-blue-200";case"missed":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},kO=e=>{switch(e){case"completed":return s.jsx(On,{className:"h-4 w-4"});case"overdue":return s.jsx(pn,{className:"h-4 w-4"});case"scheduled":return s.jsx($t,{className:"h-4 w-4"});case"missed":return s.jsx(pn,{className:"h-4 w-4"});default:return s.jsx($t,{className:"h-4 w-4"})}};function BEe(){const{data:e=[],isLoading:t}=nc(),{data:n=[],isLoading:r}=fn(),{data:a=[],isLoading:i}=vn(),{data:o=[]}=zee(),l=Fee();Lee();const{toast:c}=it(),{currentView:u}=Hd("vaccinations"),{data:d=[],isLoading:h}=sc(),[m,f]=b.useState(u),[x,g]=b.useState(""),[p,v]=b.useState("all"),[y,w]=b.useState("all"),[S,j]=b.useState("overview"),[N,C]=b.useState(null),[_,A]=b.useState(!1),[P,T]=b.useState(!1),[E,I]=b.useState(null),R=b.useMemo(()=>t||r||i?[]:e.map(W=>{const Y=n.find(O=>O.id===W.animal_id),V=a.find(O=>O.id===(Y==null?void 0:Y.client_id));return{...W,petName:(Y==null?void 0:Y.name)||"Animal inconnu",clientName:V?`${V.first_name} ${V.last_name}`:"Client inconnu",status:zEe(W),animal:Y,client:V}}),[e,n,a,t,r,i]),z=b.useMemo(()=>{const W=R.length,Y=R.filter(te=>te.status==="completed").length,V=R.filter(te=>te.status==="overdue").length,O=R.filter(te=>te.status==="scheduled").length,le=R.filter(te=>{if(!te.next_due_date)return!1;const ce=new Date,ge=new Date(te.next_due_date),H=w2(ce,30);return MPe(ge,ce)&&Jv(ge,H)}).length;return{total:W,completed:Y,overdue:V,scheduled:O,upcoming:le}},[R]),U=b.useMemo(()=>R.filter(W=>{var le;const Y=W.petName.toLowerCase().includes(x.toLowerCase())||W.clientName.toLowerCase().includes(x.toLowerCase())||W.vaccine_name.toLowerCase().includes(x.toLowerCase()),V=p==="all"||W.status===p,O=y==="all"||((le=W.animal)==null?void 0:le.species)===y;return Y&&V&&O}),[R,x,p,y]),K=W=>{I(W),T(!0)},k=()=>{E&&(l.mutate(E.id),c({title:"Vaccination supprime",description:`La vaccination ${E.vaccine_name} a t supprime avec succs.`}),T(!1),I(null))},D=()=>{const W=JSON.stringify(R,null,2),Y=new Blob([W],{type:"application/json"}),V=URL.createObjectURL(Y),O=document.createElement("a");O.href=V,O.download=`vaccinations-${ht(new Date,"yyyy-MM-dd")}.json`,O.click(),URL.revokeObjectURL(V)};return t||r||i?s.jsx("div",{className:"space-y-6 max-w-7xl mx-auto p-4 sm:p-6 lg:p-8",children:s.jsx(ie,{children:s.jsxs(oe,{className:"p-8 text-center",children:[s.jsx(on,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),s.jsx("p",{children:"Chargement des donnes de vaccination..."})]})})}):s.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto p-4 sm:p-6 lg:p-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 flex items-center gap-3 dark:text-white",children:[s.jsx(xo,{className:"h-6 sm:h-8 w-6 sm:w-8 text-blue-600"}),"Gestion Vaccinale"]}),s.jsx("p",{className:"text-gray-600 mt-1 text-sm sm:text-base",children:"Suivi et planification des vaccinations"})]}),s.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[s.jsxs($,{onClick:D,variant:"outline",className:"gap-2 flex-1 sm:flex-none",children:[s.jsx(bx,{className:"h-4 w-4"}),"Exporter"]}),s.jsx(LEe,{})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:[s.jsx(ie,{children:s.jsx(oe,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-2 sm:p-3 bg-blue-100 rounded-full",children:s.jsx(xo,{className:"h-5 sm:h-6 w-5 sm:w-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:z.total})]})]})})}),s.jsx(ie,{children:s.jsx(oe,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-2 sm:p-3 bg-green-100 rounded-full",children:s.jsx(On,{className:"h-5 sm:h-6 w-5 sm:w-6 text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Termines"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:z.completed})]})]})})}),s.jsx(ie,{children:s.jsx(oe,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-2 sm:p-3 bg-red-100 rounded-full",children:s.jsx(pn,{className:"h-5 sm:h-6 w-5 sm:w-6 text-red-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"En Retard"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:z.overdue})]})]})})}),s.jsx(ie,{children:s.jsx(oe,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-2 sm:p-3 bg-orange-100 rounded-full",children:s.jsx($t,{className:"h-5 sm:h-6 w-5 sm:w-6 text-orange-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Prochaines 30j"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:z.upcoming})]})]})})}),s.jsx(ie,{children:s.jsx(oe,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-2 sm:p-3 bg-purple-100 rounded-full",children:s.jsx(Ze,{className:"h-5 sm:h-6 w-5 sm:w-6 text-purple-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Planifies"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:z.scheduled})]})]})})})]}),s.jsxs($a,{value:S,onValueChange:j,children:[s.jsxs(Zs,{className:"grid w-full grid-cols-2",children:[s.jsxs(yt,{value:"overview",className:"flex items-center gap-2 text-xs sm:text-sm",children:[s.jsx(Rn,{className:"h-3 sm:h-4 w-3 sm:w-4"}),"Vue d'ensemble"]}),s.jsxs(yt,{value:"protocols",className:"flex items-center gap-2 text-xs sm:text-sm",children:[s.jsx(Jn,{className:"h-3 sm:h-4 w-3 sm:w-4"}),"Protocoles"]})]}),s.jsxs(wt,{value:"overview",className:"space-y-4",children:[s.jsx(ie,{children:s.jsx(oe,{className:"p-4",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center justify-between",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1 w-full",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Si,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx(se,{placeholder:"Rechercher animal, client, vaccin...",value:x,onChange:W=>g(W.target.value),className:"pl-10"})]}),s.jsxs(_e,{value:p,onValueChange:v,children:[s.jsx(Ne,{className:"w-full sm:w-[150px]",children:s.jsx(Ce,{})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"all",children:"Tous statuts"}),s.jsx(Q,{value:"completed",children:"Termines"}),s.jsx(Q,{value:"scheduled",children:"Planifies"}),s.jsx(Q,{value:"overdue",children:"En retard"})]})]}),s.jsxs(_e,{value:y,onValueChange:w,children:[s.jsx(Ne,{className:"w-full sm:w-[150px]",children:s.jsx(Ce,{})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"all",children:"Toutes espces"}),d.map(W=>s.jsx(Q,{value:W,children:W},W))]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto justify-center sm:justify-end",children:[s.jsx($,{variant:m==="cards"?"default":"outline",size:"sm",onClick:()=>f("cards"),children:s.jsx(_o,{className:"h-4 w-4"})}),s.jsx($,{variant:m==="table"?"default":"outline",size:"sm",onClick:()=>f("table"),children:s.jsx(vi,{className:"h-4 w-4"})})]})]})})}),m==="cards"?s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:U.map(W=>{var Y;return s.jsx(ie,{className:"hover:shadow-md transition-shadow",children:s.jsxs(oe,{className:"p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(er,{className:"h-10 w-10",children:s.jsx(tr,{children:s.jsx(Dg,{className:"h-5 w-5"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-sm",children:W.petName}),s.jsxs("p",{className:"text-xs text-gray-600",children:[(Y=W.animal)==null?void 0:Y.species,"  ",W.clientName]})]})]}),s.jsxs(Ie,{className:`${EO(W.status)} text-xs`,children:[kO(W.status),s.jsx("span",{className:"ml-1 capitalize",children:W.status})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xo,{className:"h-4 w-4 text-blue-600"}),s.jsx("span",{className:"font-medium text-sm",children:W.vaccine_name}),W.vaccine_type&&s.jsx(Ie,{variant:"outline",className:"text-xs",children:W.vaccine_type})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(Ze,{className:"h-4 w-4"}),s.jsxs("span",{children:["Date: ",ht(new Date(W.vaccination_date),"dd/MM/yyyy",{locale:dr})]})]}),W.next_due_date&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx($t,{className:"h-4 w-4"}),s.jsxs("span",{children:["Prochain: ",ht(new Date(W.next_due_date),"dd/MM/yyyy",{locale:dr})]})]}),W.administered_by&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(Ra,{className:"h-4 w-4"}),s.jsx("span",{children:W.administered_by})]})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-4 pt-3 border-t",children:[s.jsxs($,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>{C(W),A(!0)},children:[s.jsx($n,{className:"h-4 w-4 mr-1"}),"Dtails"]}),s.jsx($,{size:"sm",variant:"outline",onClick:()=>K(W),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:s.jsx(Wt,{className:"h-4 w-4"})})]})]})},W.id)})}):s.jsx(ie,{children:s.jsx(oe,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Kd,{children:[s.jsx(Gd,{children:s.jsxs(ea,{children:[s.jsx(ct,{children:"Animal"}),s.jsx(ct,{children:"Vaccin"}),s.jsx(ct,{children:"Date"}),s.jsx(ct,{children:"Prochain"}),s.jsx(ct,{children:"Statut"}),s.jsx(ct,{children:"Actions"})]})}),s.jsx(Yd,{children:U.map(W=>s.jsxs(ea,{children:[s.jsx(ut,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(er,{className:"h-8 w-8",children:s.jsx(tr,{children:s.jsx(Dg,{className:"h-4 w-4"})})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-sm",children:W.petName}),s.jsx("div",{className:"text-xs text-gray-600",children:W.clientName})]})]})}),s.jsx(ut,{className:"font-medium",children:W.vaccine_name}),s.jsx(ut,{children:ht(new Date(W.vaccination_date),"dd/MM/yyyy")}),s.jsx(ut,{children:W.next_due_date?ht(new Date(W.next_due_date),"dd/MM/yyyy"):"N/A"}),s.jsx(ut,{children:s.jsxs(Ie,{className:EO(W.status),children:[kO(W.status),s.jsx("span",{className:"ml-1 capitalize",children:W.status})]})}),s.jsx(ut,{children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx($,{size:"sm",variant:"outline",onClick:()=>{C(W),A(!0)},children:s.jsx($n,{className:"h-4 w-4"})}),s.jsx($,{size:"sm",variant:"outline",onClick:()=>K(W),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:s.jsx(Wt,{className:"h-4 w-4"})})]})})]},W.id))})]})})})})]}),s.jsx(wt,{value:"protocols",children:s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsxs(ye,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Jn,{className:"h-5 w-5"}),"Protocoles Vaccinaux (",o.length,")"]}),s.jsx(Iw,{mode:"create"})]})}),s.jsxs(oe,{children:[s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(W=>s.jsx(ie,{className:"hover:shadow-md transition-shadow",children:s.jsx(oe,{className:"p-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsx("h4",{className:"font-semibold",children:W.vaccine_name}),!W.active&&s.jsx(Ie,{variant:"secondary",className:"text-xs",children:"Inactif"})]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Espce: ",W.species]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Type: ",W.vaccine_type]}),W.frequency&&s.jsxs("p",{className:"text-sm text-gray-600",children:["Frquence: ",W.frequency]}),W.age_recommendation&&s.jsxs("p",{className:"text-sm text-gray-600",children:["ge: ",W.age_recommendation]}),W.notes&&s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:W.notes}),s.jsx("div",{className:"flex gap-2 mt-3",children:s.jsx(Iw,{mode:"edit",protocol:W,children:s.jsxs($,{size:"sm",variant:"outline",className:"flex-1",children:[s.jsx(It,{className:"h-4 w-4 mr-1"}),"Modifier"]})})})]})})},W.id))}),o.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(Jn,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),s.jsx("p",{children:"Aucun protocole vaccinal configur"}),s.jsx(Iw,{mode:"create",children:s.jsxs($,{className:"mt-4",children:[s.jsx(Ye,{className:"h-4 w-4 mr-2"}),"Crer un protocole"]})})]})]})]})})]}),s.jsx(tt,{open:_,onOpenChange:A,children:s.jsxs(et,{className:"max-w-2xl w-full mx-4",children:[s.jsx(nt,{children:s.jsx(rt,{children:"Dtails de la Vaccination"})}),N&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Animal:"}),s.jsx("p",{children:N.petName})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Client:"}),s.jsx("p",{children:N.clientName})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Vaccin:"}),s.jsx("p",{children:N.vaccine_name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Date:"}),s.jsx("p",{children:ht(new Date(N.vaccination_date),"dd/MM/yyyy",{locale:dr})})]}),N.next_due_date&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Prochain rappel:"}),s.jsx("p",{children:ht(new Date(N.next_due_date),"dd/MM/yyyy",{locale:dr})})]})]}),N.notes&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Notes:"}),s.jsx("p",{className:"text-gray-600",children:N.notes})]}),s.jsx("div",{className:"border-t pt-4 mt-4",children:s.jsx("div",{className:"flex justify-center",children:s.jsx(FEe,{animalId:N.animal_id})})})]})]})}),s.jsx(tt,{open:P,onOpenChange:T,children:s.jsxs(et,{className:"max-w-md w-full mx-4",children:[s.jsx(nt,{children:s.jsx(rt,{children:"Confirmer la suppression"})}),E&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("p",{className:"text-gray-600",children:["tes-vous sr de vouloir supprimer la vaccination ",s.jsx("strong",{children:E.vaccine_name})," pour ",s.jsx("strong",{children:E.petName})," ?"]}),s.jsx("p",{className:"text-sm text-red-600",children:"Cette action est irrversible."}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2",children:[s.jsx($,{variant:"outline",onClick:()=>T(!1),className:"w-full sm:w-auto",children:"Annuler"}),s.jsx($,{variant:"destructive",onClick:k,className:"w-full sm:w-auto",children:"Supprimer"})]})]})]})})]})}function qEe({open:e,onOpenChange:t,selectedAnimalId:n,selectedClientId:r,editingAntiparasitic:a}){const{data:i}=fn(),{data:o}=vn(),l=Vee(),{toast:c}=it(),{data:u=[],isLoading:d}=lL(),[h,m]=b.useState({clientId:r||"",animalId:n||"",productName:"",activeIngredient:"",parasiteType:"",administrationRoute:"",dosage:"",treatmentDate:ht(new Date,"yyyy-MM-dd"),nextTreatmentDate:"",administeredBy:"",effectivenessRating:"none",notes:""}),[f,x]=b.useState(null),{data:g}=Hee(f==null?void 0:f.species);b.useEffect(()=>{r&&m(j=>({...j,clientId:r,animalId:""})),n&&m(j=>({...j,animalId:n}))},[r,n]),b.useEffect(()=>{if(h.animalId&&i){const j=i.find(N=>N.id===h.animalId);x(j),j&&m(N=>({...N,clientId:j.client_id}))}},[h.animalId,i]),b.useEffect(()=>{var j,N;a&&m({clientId:((j=a.animal)==null?void 0:j.client_id)||"",animalId:a.animal_id,productName:a.product_name,activeIngredient:a.active_ingredient||"",parasiteType:a.parasite_type||"",administrationRoute:a.administration_route||"",dosage:a.dosage||"",treatmentDate:a.treatment_date,nextTreatmentDate:a.next_treatment_date||"",administeredBy:a.administered_by||"",effectivenessRating:((N=a.effectiveness_rating)==null?void 0:N.toString())||"none",notes:a.notes||""})},[a]);const p=(j,N)=>{m(C=>({...C,[j]:N}))},v=j=>{m(N=>({...N,productName:j.product_name,activeIngredient:j.active_ingredient||"",parasiteType:j.parasite_type,administrationRoute:j.administration_route||"",dosage:j.dosage_recommendation||"",nextTreatmentDate:j.frequency_days?ht(w2(new Date(N.treatmentDate),j.frequency_days),"yyyy-MM-dd"):""})),c({title:"Protocole appliqu",description:`Le protocole ${j.product_name} a t appliqu.`})},y=()=>{m({clientId:r||"",animalId:n||"",productName:"",activeIngredient:"",parasiteType:"",administrationRoute:"",dosage:"",treatmentDate:ht(new Date,"yyyy-MM-dd"),nextTreatmentDate:"",administeredBy:"",effectivenessRating:"none",notes:""})},w=async j=>{var N,C,_,A,P,T,E;if(j.preventDefault(),!h.animalId||!h.productName||!h.treatmentDate){c({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires.",variant:"destructive"});return}if(h.effectivenessRating&&h.effectivenessRating!=="none"){const I=parseInt(h.effectivenessRating);if(isNaN(I)||I<1||I>5){c({title:"Erreur",description:"L'valuation d'efficacit doit tre un nombre entre 1 et 5.",variant:"destructive"});return}}try{const I={animal_id:h.animalId,product_name:h.productName,treatment_date:h.treatmentDate};if((N=h.activeIngredient)!=null&&N.trim()&&(I.active_ingredient=h.activeIngredient.trim()),(C=h.parasiteType)!=null&&C.trim()&&(I.parasite_type=h.parasiteType.trim()),(_=h.administrationRoute)!=null&&_.trim()&&(I.administration_route=h.administrationRoute.trim()),(A=h.dosage)!=null&&A.trim()&&(I.dosage=h.dosage.trim()),(P=h.nextTreatmentDate)!=null&&P.trim()&&(I.next_treatment_date=h.nextTreatmentDate.trim()),(T=h.administeredBy)!=null&&T.trim()&&(I.administered_by=h.administeredBy.trim()),(E=h.notes)!=null&&E.trim()&&(I.notes=h.notes.trim()),h.effectivenessRating&&h.effectivenessRating!=="none"&&h.effectivenessRating!==""&&h.effectivenessRating!=="undefined"){const R=parseInt(h.effectivenessRating);!isNaN(R)&&R>=1&&R<=5&&(I.effectiveness_rating=R)}console.log("Submitting antiparasitic data:",I),console.log("Effectiveness rating value:",h.effectivenessRating),console.log("Effectiveness rating type:",typeof h.effectivenessRating),await l.mutateAsync(I),c({title:"Succs",description:"Le traitement antiparasitaire a t enregistr avec succs."}),y(),t(!1)}catch(I){console.error("Erreur lors de la cration du traitement antiparasitaire:",I);let R="Une erreur s'est produite lors de l'enregistrement.";(I==null?void 0:I.code)==="23514"?R="Les donnes saisies ne respectent pas les contraintes de validation. Vrifiez que l'valuation d'efficacit est entre 1 et 10.":(I==null?void 0:I.code)==="42501"?R="Vous n'avez pas les permissions ncessaires pour effectuer cette action.":I!=null&&I.message&&(R=I.message),c({title:"Erreur",description:R,variant:"destructive"})}},S=(i==null?void 0:i.filter(j=>h.clientId?j.client_id===h.clientId:!0))||[];return s.jsx(tt,{open:e,onOpenChange:t,children:s.jsxs(et,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsx(nt,{children:s.jsxs(rt,{className:"flex items-center gap-2",children:[s.jsx(wa,{className:"h-5 w-5"}),a?"Modifier le traitement":"Nouveau traitement antiparasitaire"]})}),s.jsxs("form",{onSubmit:w,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"clientId",children:"Client *"}),s.jsxs(_e,{value:h.clientId,onValueChange:j=>p("clientId",j),children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Slectionner un client"})}),s.jsx(Se,{children:o==null?void 0:o.map(j=>s.jsxs(Q,{value:j.id,children:[j.first_name," ",j.last_name]},j.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"animalId",children:"Animal *"}),s.jsxs(_e,{value:h.animalId,onValueChange:j=>p("animalId",j),disabled:!h.clientId,children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Slectionner un animal"})}),s.jsx(Se,{children:S.map(j=>s.jsxs(Q,{value:j.id,children:[j.name," (",j.species,")"]},j.id))})]})]})]}),f&&s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsx(ye,{className:"text-sm",children:"Animal slectionn"})}),s.jsx(oe,{children:s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Nom:"})," ",f.name]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Espce:"})," ",f.species]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Race:"})," ",f.breed||"N/A"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Poids:"})," ",f.weight?`${f.weight} kg`:"N/A"]})]})})]}),g&&g.length>0&&s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsxs(ye,{className:"text-sm",children:["Protocoles recommands pour ",f==null?void 0:f.species]})}),s.jsx(oe,{children:s.jsx("div",{className:"grid gap-2",children:g.map(j=>s.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:j.product_name}),s.jsxs("div",{className:"text-sm text-gray-600",children:[j.parasite_type," - ",j.active_ingredient]})]}),s.jsxs($,{type:"button",variant:"outline",size:"sm",onClick:()=>v(j),children:[s.jsx(Ye,{className:"h-4 w-4 mr-1"}),"Appliquer"]})]},j.id))})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"productName",children:"Nom du produit *"}),s.jsx(se,{id:"productName",value:h.productName,onChange:j=>p("productName",j.target.value),placeholder:"Ex: Frontline, Bravecto...",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"activeIngredient",children:"Principe actif"}),s.jsx(se,{id:"activeIngredient",value:h.activeIngredient,onChange:j=>p("activeIngredient",j.target.value),placeholder:"Ex: Fipronil, Fluralaner..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"parasiteType",children:"Type de parasite"}),s.jsxs(_e,{value:h.parasiteType,onValueChange:j=>p("parasiteType",j),children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Slectionner le type"})}),s.jsx(Se,{children:u.map(j=>s.jsx(Q,{value:j,children:j},j))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"administrationRoute",children:"Voie d'administration"}),s.jsxs(_e,{value:h.administrationRoute,onValueChange:j=>p("administrationRoute",j),children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Slectionner la voie"})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"spot_on",children:"Spot-on (pipette)"}),s.jsx(Q,{value:"oral",children:"Orale (comprim/liquide)"}),s.jsx(Q,{value:"injection",children:"Injection"}),s.jsx(Q,{value:"spray",children:"Spray"}),s.jsx(Q,{value:"collier",children:"Collier"}),s.jsx(Q,{value:"shampoing",children:"Shampoing"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"dosage",children:"Dosage"}),s.jsx(se,{id:"dosage",value:h.dosage,onChange:j=>p("dosage",j.target.value),placeholder:"Ex: 1 pipette, 1 comprim..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"treatmentDate",children:"Date du traitement *"}),s.jsx(se,{id:"treatmentDate",type:"date",value:h.treatmentDate,onChange:j=>p("treatmentDate",j.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"nextTreatmentDate",children:"Prochain traitement"}),s.jsx(se,{id:"nextTreatmentDate",type:"date",value:h.nextTreatmentDate,onChange:j=>p("nextTreatmentDate",j.target.value)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(M,{htmlFor:"effectivenessRating",children:["Efficacit du traitement (optionnel)",s.jsx("span",{className:"text-xs text-muted-foreground block",children:"valuez l'efficacit sur une chelle de 1  5"})]}),s.jsxs(_e,{value:h.effectivenessRating,onValueChange:j=>p("effectivenessRating",j),children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Slectionner l'efficacit"})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"none",children:"Non valu"}),[...Array(5)].map((j,N)=>s.jsxs(Q,{value:(N+1).toString(),children:[N+1," - ",N+1<=2?"Faible":N+1<=3?"Moyenne":N+1<=4?"Bonne":"Excellente"]},N+1))]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"notes",children:"Notes"}),s.jsx(Ke,{id:"notes",value:h.notes,onChange:j=>p("notes",j.target.value),placeholder:"Observations, effets secondaires, etc.",rows:3})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx($,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsxs($,{type:"submit",disabled:l.isPending,children:[l.isPending&&s.jsx(on,{className:"h-4 w-4 mr-2 animate-spin"}),a?"Modifier":"Enregistrer"]})]})]})]})})}var t0="Switch",[VEe,Yke]=Br(t0),[UEe,WEe]=VEe(t0),K8=b.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:a,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=e,[m,f]=b.useState(null),x=ft(t,w=>f(w)),g=b.useRef(!1),p=m?d||!!m.closest("form"):!0,[v,y]=gi({prop:a,defaultProp:i??!1,onChange:u,caller:t0});return s.jsxs(UEe,{scope:n,checked:v,disabled:l,children:[s.jsx(qe.button,{type:"button",role:"switch","aria-checked":v,"aria-required":o,"data-state":X8(v),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:x,onClick:Te(e.onClick,w=>{y(S=>!S),p&&(g.current=w.isPropagationStopped(),g.current||w.stopPropagation())})}),p&&s.jsx(Q8,{control:m,bubbles:!g.current,name:r,value:c,checked:v,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});K8.displayName=t0;var G8="SwitchThumb",Y8=b.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,a=WEe(G8,n);return s.jsx(qe.span,{"data-state":X8(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t})});Y8.displayName=G8;var HEe="SwitchBubbleInput",Q8=b.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...a},i)=>{const o=b.useRef(null),l=ft(o,i),c=s_(n),u=yS(t);return b.useEffect(()=>{const d=o.current;if(!d)return;const h=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==n&&f){const x=new Event("click",{bubbles:r});f.call(d,n),d.dispatchEvent(x)}},[c,n,r]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:l,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Q8.displayName=HEe;function X8(e){return e?"checked":"unchecked"}var J8=K8,KEe=Y8;const mr=b.forwardRef(({className:e,...t},n)=>s.jsx(J8,{className:Me("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:s.jsx(KEe,{className:Me("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));mr.displayName=J8.displayName;function GEe({open:e,onOpenChange:t,editingProtocol:n}){const r=Kee(),a=Gee(),{toast:i}=it(),{data:o=[],isLoading:l}=sc(),{data:c=[],isLoading:u}=lL(),[d,h]=b.useState({species:"",parasiteType:"",productName:"",activeIngredient:"",administrationRoute:"",dosageRecommendation:"",frequencyDays:"",ageRecommendation:"",weightRange:"",seasonRecommendation:"",notes:"",active:!0});b.useEffect(()=>{n&&h({species:n.species,parasiteType:n.parasite_type,productName:n.product_name,activeIngredient:n.active_ingredient||"",administrationRoute:n.administration_route||"",dosageRecommendation:n.dosage_per_kg||"",frequencyDays:"",ageRecommendation:n.age_restriction||"",weightRange:"",seasonRecommendation:"",notes:n.notes||"",active:n.active})},[n]);const m=(p,v)=>{h(y=>({...y,[p]:v}))},f=()=>{h({species:"",parasiteType:"",productName:"",activeIngredient:"",administrationRoute:"",dosageRecommendation:"",frequencyDays:"",ageRecommendation:"",weightRange:"",seasonRecommendation:"",notes:"",active:!0})},x=async p=>{if(p.preventDefault(),!d.species||!d.parasiteType||!d.productName){i({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires.",variant:"destructive"});return}try{const v={species:d.species,parasite_type:d.parasiteType,product_name:d.productName,active_ingredient:d.activeIngredient||void 0,administration_route:d.administrationRoute||void 0,dosage_per_kg:d.dosageRecommendation||void 0,frequency:d.frequencyDays?`${d.frequencyDays} jours`:void 0,age_restriction:d.ageRecommendation||void 0,notes:[d.notes,d.weightRange?`Poids: ${d.weightRange}`:"",d.seasonRecommendation?`Saison: ${d.seasonRecommendation}`:""].filter(Boolean).join(" | ")||void 0,active:d.active};n?(await a.mutateAsync({id:n.id,updates:v}),i({title:"Succs",description:"Le protocole antiparasitaire a t modifi avec succs."})):(await r.mutateAsync(v),i({title:"Succs",description:"Le protocole antiparasitaire a t cr avec succs."})),f(),t(!1)}catch(v){console.error("Erreur lors de la sauvegarde du protocole:",v),i({title:"Erreur",description:"Une erreur s'est produite lors de la sauvegarde.",variant:"destructive"})}},g=r.isPending||a.isPending;return s.jsx(tt,{open:e,onOpenChange:t,children:s.jsxs(et,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[s.jsx(nt,{children:s.jsxs(rt,{className:"flex items-center gap-2",children:[s.jsx(Jn,{className:"h-5 w-5"}),n?"Modifier le protocole":"Nouveau protocole antiparasitaire"]})}),s.jsxs("form",{onSubmit:x,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"species",children:"Espce *"}),s.jsxs(_e,{value:d.species,onValueChange:p=>m("species",p),children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Slectionner une espce"})}),s.jsx(Se,{children:o.map(p=>s.jsx(Q,{value:p,children:p},p))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"parasiteType",children:"Type de parasite *"}),s.jsxs(_e,{value:d.parasiteType,onValueChange:p=>m("parasiteType",p),children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Slectionner le type"})}),s.jsx(Se,{children:c.map(p=>s.jsx(Q,{value:p,children:p},p))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"productName",children:"Nom du produit *"}),s.jsx(se,{id:"productName",value:d.productName,onChange:p=>m("productName",p.target.value),placeholder:"Ex: Frontline, Bravecto...",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"activeIngredient",children:"Principe actif"}),s.jsx(se,{id:"activeIngredient",value:d.activeIngredient,onChange:p=>m("activeIngredient",p.target.value),placeholder:"Ex: Fipronil, Fluralaner..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"administrationRoute",children:"Voie d'administration"}),s.jsxs(_e,{value:d.administrationRoute,onValueChange:p=>m("administrationRoute",p),children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Slectionner la voie"})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"spot_on",children:"Spot-on (pipette)"}),s.jsx(Q,{value:"oral",children:"Orale (comprim/liquide)"}),s.jsx(Q,{value:"injection",children:"Injection"}),s.jsx(Q,{value:"spray",children:"Spray"}),s.jsx(Q,{value:"collier",children:"Collier"}),s.jsx(Q,{value:"shampoing",children:"Shampoing"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"dosageRecommendation",children:"Recommandation de dosage"}),s.jsx(se,{id:"dosageRecommendation",value:d.dosageRecommendation,onChange:p=>m("dosageRecommendation",p.target.value),placeholder:"Ex: 1 pipette par 10-20kg..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"frequencyDays",children:"Frquence (jours)"}),s.jsx(se,{id:"frequencyDays",type:"number",value:d.frequencyDays,onChange:p=>m("frequencyDays",p.target.value),placeholder:"Ex: 30, 90..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"ageRecommendation",children:"Recommandation d'ge"}),s.jsx(se,{id:"ageRecommendation",value:d.ageRecommendation,onChange:p=>m("ageRecommendation",p.target.value),placeholder:"Ex: > 8 semaines, adulte..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"weightRange",children:"Gamme de poids"}),s.jsx(se,{id:"weightRange",value:d.weightRange,onChange:p=>m("weightRange",p.target.value),placeholder:"Ex: 10-20kg, < 5kg..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"seasonRecommendation",children:"Recommandation saisonnire"}),s.jsxs(_e,{value:d.seasonRecommendation,onValueChange:p=>m("seasonRecommendation",p),children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Slectionner la saison"})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"toute_annee",children:"Toute l'anne"}),s.jsx(Q,{value:"printemps_ete",children:"Printemps-t"}),s.jsx(Q,{value:"automne_hiver",children:"Automne-Hiver"}),s.jsx(Q,{value:"printemps",children:"Printemps"}),s.jsx(Q,{value:"ete",children:"t"}),s.jsx(Q,{value:"automne",children:"Automne"}),s.jsx(Q,{value:"hiver",children:"Hiver"})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"notes",children:"Notes"}),s.jsx(Ke,{id:"notes",value:d.notes,onChange:p=>m("notes",p.target.value),placeholder:"Informations supplmentaires, contre-indications...",rows:3})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(mr,{id:"active",checked:d.active,onCheckedChange:p=>m("active",p)}),s.jsx(M,{htmlFor:"active",children:"Protocole actif"})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx($,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsxs($,{type:"submit",disabled:g,children:[g&&s.jsx(on,{className:"h-4 w-4 mr-2 animate-spin"}),n?"Modifier":"Crer"]})]})]})]})})}const YEe=e=>{if(!e.next_treatment_date)return"completed";const t=new Date(e.next_treatment_date),n=new Date,r=w2(n,7);return Jv(t,n)?"overdue":Jv(t,r)?"upcoming":"scheduled"},TO=e=>{switch(e){case"completed":return"bg-green-100 text-green-800 border-green-200";case"overdue":return"bg-red-100 text-red-800 border-red-200";case"scheduled":return"bg-blue-100 text-blue-800 border-blue-200";case"upcoming":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},OO=e=>{switch(e){case"completed":return s.jsx(On,{className:"h-4 w-4"});case"overdue":return s.jsx(pn,{className:"h-4 w-4"});case"scheduled":return s.jsx($t,{className:"h-4 w-4"});case"upcoming":return s.jsx(Ze,{className:"h-4 w-4"});default:return s.jsx($t,{className:"h-4 w-4"})}},DO=e=>{switch(e){case"completed":return"Termin";case"overdue":return"En retard";case"scheduled":return"Programm";case"upcoming":return" venir";default:return"Inconnu"}},QEe=(e,t,n)=>e.map(r=>{const a=t.find(l=>l.id===r.animal_id),i=a?n.find(l=>l.id===a.client_id):null,o=YEe(r);return{...r,petName:(a==null?void 0:a.name)||"Animal inconnu",petSpecies:(a==null?void 0:a.species)||"Espce inconnue",clientName:i?`${i.first_name} ${i.last_name}`:"Client inconnu",status:o,animal:a,client:i}});function XEe(){const{currentView:e}=Hd("antiparasitics"),{data:t=[],isLoading:n}=Em(),{data:r=[],isLoading:a}=Wee(),{data:i=[]}=fn(),{data:o=[]}=vn(),l=Uee(),{toast:c}=it(),{data:u=[],isLoading:d}=sc(),[h,m]=b.useState(""),[f,x]=b.useState("all"),[g,p]=b.useState("all"),[v,y]=b.useState("all"),[w,S]=b.useState(!1),[j,N]=b.useState(!1),[C,_]=b.useState(!1),[A,P]=b.useState(null),[T,E]=b.useState(!1),[I,R]=b.useState(null),[z,U]=b.useState(null),K=b.useMemo(()=>QEe(t,i,o),[t,i,o]),k=b.useMemo(()=>K.filter(O=>{const le=!h||O.petName.toLowerCase().includes(h.toLowerCase())||O.clientName.toLowerCase().includes(h.toLowerCase())||O.product_name.toLowerCase().includes(h.toLowerCase()),te=f==="all"||O.status===f,ce=g==="all"||O.parasite_type===g,ge=v==="all"||O.petSpecies===v;return le&&te&&ce&&ge}),[K,h,f,g,v]),D=b.useMemo(()=>{const O=K.length,le=K.filter(H=>H.status==="overdue").length,te=K.filter(H=>H.status==="upcoming").length,ce=K.filter(H=>H.status==="completed").length,ge=K.reduce((H,G)=>{const ue=G.parasite_type||"Non spcifi";return H[ue]=(H[ue]||0)+1,H},{});return{total:O,overdue:le,upcoming:te,completed:ce,parasiteTypes:ge}},[K]),J=O=>{R(O),E(!0)},W=async()=>{if(I)try{await l.mutateAsync(I.id),c({title:"Succs",description:"Le traitement antiparasitaire a t supprim."}),E(!1),R(null)}catch{c({title:"Erreur",description:"Impossible de supprimer le traitement.",variant:"destructive"})}},V=(O=>[...new Set(O)])(K.map(O=>O.parasite_type).filter(Boolean));return n?s.jsxs("div",{className:"flex items-center justify-center h-64",children:[s.jsx(on,{className:"h-8 w-8 animate-spin"}),s.jsx("span",{className:"ml-2",children:"Chargement des traitements antiparasitaires..."})]}):s.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto p-4 sm:p-6 lg:p-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold flex items-center gap-3",children:[s.jsx(Mb,{className:"h-6 w-6 sm:h-8 sm:w-8"}),"Traitements Antiparasitaires"]}),s.jsx("p",{className:"text-gray-600 mt-1 text-sm sm:text-base",children:"Gestion des traitements antiparasitaires et protocoles"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[s.jsxs($,{onClick:()=>N(!0),variant:"outline",className:"gap-2 w-full sm:w-auto",children:[s.jsx(Jn,{className:"h-4 w-4"}),"Protocoles"]}),s.jsxs($,{onClick:()=>S(!0),className:"gap-2 w-full sm:w-auto",children:[s.jsx(Ye,{className:"h-4 w-4"}),"Nouveau traitement"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(ie,{children:s.jsx(oe,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),s.jsx("p",{className:"text-2xl font-bold",children:D.total})]}),s.jsx(wa,{className:"h-8 w-8 text-blue-500"})]})})}),s.jsx(ie,{children:s.jsx(oe,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"En retard"}),s.jsx("p",{className:"text-2xl font-bold text-red-600",children:D.overdue})]}),s.jsx(pn,{className:"h-8 w-8 text-red-500"})]})})}),s.jsx(ie,{children:s.jsx(oe,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:" venir"}),s.jsx("p",{className:"text-2xl font-bold text-orange-600",children:D.upcoming})]}),s.jsx(Ze,{className:"h-8 w-8 text-orange-500"})]})})}),s.jsx(ie,{children:s.jsx(oe,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Termins"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:D.completed})]}),s.jsx(On,{className:"h-8 w-8 text-green-500"})]})})})]}),s.jsx(ie,{children:s.jsx(oe,{className:"p-4",children:s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(Si,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx(se,{placeholder:"Rechercher par animal, client ou produit...",value:h,onChange:O=>m(O.target.value),className:"pl-10"})]})}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs(_e,{value:f,onValueChange:x,children:[s.jsx(Ne,{className:"w-full sm:w-48",children:s.jsx(Ce,{placeholder:"Filtrer par statut"})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"all",children:"Tous les statuts"}),s.jsx(Q,{value:"overdue",children:"En retard"}),s.jsx(Q,{value:"upcoming",children:" venir"}),s.jsx(Q,{value:"scheduled",children:"Programms"}),s.jsx(Q,{value:"completed",children:"Termins"})]})]}),s.jsxs(_e,{value:g,onValueChange:p,children:[s.jsx(Ne,{className:"w-full sm:w-48",children:s.jsx(Ce,{placeholder:"Filtrer par parasite"})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"all",children:"Tous les parasites"}),V.map(O=>s.jsx(Q,{value:O,children:O},O))]})]}),s.jsxs(_e,{value:v,onValueChange:y,children:[s.jsx(Ne,{className:"w-full sm:w-48",children:s.jsx(Ce,{placeholder:"Filtrer par espce"})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"all",children:"Toutes espces"}),u.map(O=>s.jsx(Q,{value:O,children:O},O))]})]})]})]})})}),s.jsxs($a,{defaultValue:"overview",className:"space-y-4",children:[s.jsxs(Zs,{className:"flex flex-wrap",children:[s.jsxs(yt,{value:"overview",className:"flex items-center gap-2 flex-1 sm:flex-none",children:[s.jsx(vi,{className:"h-4 w-4"}),"Vue d'ensemble"]}),s.jsxs(yt,{value:"protocols",className:"flex items-center gap-2 flex-1 sm:flex-none",children:[s.jsx(Jn,{className:"h-4 w-4"}),"Protocoles"]}),s.jsxs(yt,{value:"statistics",className:"flex items-center gap-2 flex-1 sm:flex-none",children:[s.jsx(Rn,{className:"h-4 w-4"}),"Statistiques"]})]}),s.jsx(wt,{value:"overview",children:s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsxs(ye,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2",children:[s.jsxs("span",{children:["Traitements antiparasitaires (",k.length,")"]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs($,{variant:"outline",size:"sm",onClick:()=>{},children:[s.jsx(bx,{className:"h-4 w-4 mr-1"}),"Export"]})})]})}),s.jsxs(oe,{children:[e==="table"?s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Kd,{children:[s.jsx(Gd,{children:s.jsxs(ea,{children:[s.jsx(ct,{children:"Animal"}),s.jsx(ct,{children:"Client"}),s.jsx(ct,{children:"Produit"}),s.jsx(ct,{children:"Parasite"}),s.jsx(ct,{children:"Date traitement"}),s.jsx(ct,{children:"Prochain traitement"}),s.jsx(ct,{children:"Statut"}),s.jsx(ct,{children:"Actions"})]})}),s.jsx(Yd,{children:k.map(O=>s.jsxs(ea,{children:[s.jsx(ut,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(er,{className:"h-8 w-8",children:s.jsx(tr,{children:s.jsx(Dg,{className:"h-4 w-4"})})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:O.petName}),s.jsx("div",{className:"text-sm text-gray-500",children:O.petSpecies})]})]})}),s.jsx(ut,{children:O.clientName}),s.jsx(ut,{children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:O.product_name}),O.active_ingredient&&s.jsx("div",{className:"text-sm text-gray-500",children:O.active_ingredient})]})}),s.jsx(ut,{children:O.parasite_type&&s.jsx(Ie,{variant:"outline",children:O.parasite_type})}),s.jsx(ut,{children:ht(new Date(O.treatment_date),"dd/MM/yyyy",{locale:dr})}),s.jsx(ut,{children:O.next_treatment_date?ht(new Date(O.next_treatment_date),"dd/MM/yyyy",{locale:dr}):"N/A"}),s.jsx(ut,{children:s.jsx(Ie,{className:TO(O.status),children:s.jsxs("div",{className:"flex items-center gap-1",children:[OO(O.status),DO(O.status)]})})}),s.jsx(ut,{children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx($,{variant:"ghost",size:"sm",onClick:()=>{P(O),_(!0)},children:s.jsx($n,{className:"h-4 w-4"})}),s.jsx($,{variant:"ghost",size:"sm",onClick:()=>J(O),children:s.jsx(Wt,{className:"h-4 w-4"})})]})})]},O.id))})]})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:k.map(O=>s.jsx(ie,{className:"hover:shadow-md transition-shadow",children:s.jsxs(oe,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(er,{className:"h-8 w-8",children:s.jsx(tr,{children:s.jsx(Dg,{className:"h-4 w-4"})})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-sm",children:O.petName}),s.jsx("p",{className:"text-xs text-gray-600",children:O.clientName})]})]}),s.jsx(Ie,{className:TO(O.status),children:s.jsxs("div",{className:"flex items-center gap-1",children:[OO(O.status),DO(O.status)]})})]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Produit:"})," ",O.product_name]}),O.parasite_type&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Parasite:"})," ",O.parasite_type]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Date:"})," ",ht(new Date(O.treatment_date),"dd/MM/yyyy")]}),O.next_treatment_date&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Prochain:"})," ",ht(new Date(O.next_treatment_date),"dd/MM/yyyy")]})]}),s.jsxs("div",{className:"flex justify-between mt-4",children:[s.jsxs($,{variant:"outline",size:"sm",onClick:()=>{P(O),_(!0)},children:[s.jsx($n,{className:"h-4 w-4 mr-1"}),"Dtails"]}),s.jsx($,{variant:"ghost",size:"sm",onClick:()=>J(O),children:s.jsx(Wt,{className:"h-4 w-4"})})]})]})},O.id))}),k.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(Mb,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),s.jsx("p",{children:"Aucun traitement antiparasitaire trouv"})]})]})]})}),s.jsx(wt,{value:"protocols",children:s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsxs(ye,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2",children:[s.jsxs("span",{children:["Protocoles antiparasitaires (",r.length,")"]}),s.jsxs($,{onClick:()=>{U(null),N(!0)},className:"gap-2 w-full sm:w-auto",children:[s.jsx(Ye,{className:"h-4 w-4"}),"Nouveau protocole"]})]})}),s.jsxs(oe,{children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(O=>s.jsx(ie,{className:"hover:shadow-md transition-shadow",children:s.jsxs(oe,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx(Ie,{variant:"outline",children:O.species}),s.jsx("div",{className:"flex gap-1",children:s.jsx($,{variant:"ghost",size:"sm",onClick:()=>{U(O),N(!0)},children:s.jsx(It,{className:"h-4 w-4"})})})]}),s.jsx("h4",{className:"font-medium mb-2",children:O.product_name}),s.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Parasite:"})," ",O.parasite_type]}),O.active_ingredient&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Principe actif:"})," ",O.active_ingredient]}),O.frequency&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Frquence:"})," ",O.frequency]})]})]})},O.id))}),r.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(Jn,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),s.jsx("p",{children:"Aucun protocole configur"})]})]})]})}),s.jsx(wt,{value:"statistics",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsxs(ye,{className:"flex items-center gap-2",children:[s.jsx(Rn,{className:"h-5 w-5"}),"Rpartition par type de parasite"]})}),s.jsx(oe,{children:s.jsx("div",{className:"space-y-3",children:Object.entries(D.parasiteTypes).map(([O,le])=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:O}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"bg-gray-200 rounded-full h-2 w-20",children:s.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${le/D.total*100}%`}})}),s.jsx("span",{className:"text-sm font-medium",children:le})]})]},O))})})]}),s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsx(ye,{children:"Rsum des traitements"})}),s.jsx(oe,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:"Total des traitements"}),s.jsx("span",{className:"font-bold",children:D.total})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:"En retard"}),s.jsx("span",{className:"font-bold text-red-600",children:D.overdue})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:" venir (7 jours)"}),s.jsx("span",{className:"font-bold text-orange-600",children:D.upcoming})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:"Termins"}),s.jsx("span",{className:"font-bold text-green-600",children:D.completed})]})]})})]})]})})]}),s.jsx(qEe,{open:w,onOpenChange:S}),s.jsx(GEe,{open:j,onOpenChange:N,editingProtocol:z}),s.jsx(tt,{open:C,onOpenChange:_,children:s.jsxs(et,{className:"max-w-2xl",children:[s.jsx(nt,{children:s.jsx(rt,{children:"Dtails du traitement"})}),A&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Animal:"}),s.jsx("p",{children:A.petName})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Client:"}),s.jsx("p",{children:A.clientName})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Produit:"}),s.jsx("p",{children:A.product_name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Principe actif:"}),s.jsx("p",{children:A.active_ingredient||"N/A"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Type de parasite:"}),s.jsx("p",{children:A.parasite_type||"N/A"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Voie d'administration:"}),s.jsx("p",{children:A.administration_route||"N/A"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Dosage:"}),s.jsx("p",{children:A.dosage||"N/A"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Date du traitement:"}),s.jsx("p",{children:ht(new Date(A.treatment_date),"dd/MM/yyyy",{locale:dr})})]}),A.next_treatment_date&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Prochain traitement:"}),s.jsx("p",{children:ht(new Date(A.next_treatment_date),"dd/MM/yyyy",{locale:dr})})]}),A.effectiveness_rating&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Efficacit:"}),s.jsxs("p",{children:[A.effectiveness_rating,"/10"]})]})]}),A.notes&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Notes:"}),s.jsx("p",{className:"text-gray-600",children:A.notes})]})]})]})}),s.jsx(tt,{open:T,onOpenChange:E,children:s.jsxs(et,{className:"max-w-md",children:[s.jsx(nt,{children:s.jsx(rt,{children:"Confirmer la suppression"})}),I&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("p",{className:"text-gray-600",children:["tes-vous sr de vouloir supprimer le traitement ",s.jsx("strong",{children:I.product_name})," pour ",s.jsx("strong",{children:I.petName})," ?"]}),s.jsx("p",{className:"text-sm text-red-600",children:"Cette action est irrversible."}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2",children:[s.jsx($,{variant:"outline",onClick:()=>E(!1),className:"w-full sm:w-auto",children:"Annuler"}),s.jsx($,{variant:"destructive",onClick:W,className:"w-full sm:w-auto",children:"Supprimer"})]})]})]})})]})}const JEe=e=>({id:parseInt(e.id.replace(/-/g,"").slice(0,8),16),name:e.name,category:e.category,description:e.description,unit:e.unit,currentStock:e.current_quantity,minimumStock:e.minimum_quantity,maximumStock:e.maximum_quantity,purchasePrice:e.unit_cost||0,sellingPrice:e.selling_price||0,totalValue:(e.current_quantity||0)*(e.unit_cost||0),expirationDate:e.expiration_date,supplier:e.supplier,location:e.location,lastUpdated:e.updated_at,isActive:e.active,batchNumber:e.batch_number,manufacturer:e.supplier}),Z8=()=>{const{user:e}=Sn(),{toast:t}=it(),[n,r]=b.useState([]),[a,i]=b.useState([]),[o,l]=b.useState([]),[c,u]=b.useState([]),[d,h]=b.useState(!0),[m,f]=b.useState(null),x=async()=>{if(e)try{const{data:E,error:I}=await fe.from("stock_items").select("*").eq("user_id",e.id).eq("active",!0).order("name");if(I)throw I;r(E||[])}catch(E){console.error("Error fetching stock items:",E),f(E.message)}},g=async()=>{if(e)try{const{data:E,error:I}=await fe.from("stock_movements").select(`
          *,
          stock_items!inner(user_id)
        `).eq("stock_items.user_id",e.id).order("movement_date",{ascending:!1});if(I)throw I;i(E||[])}catch(E){console.error("Error fetching stock movements:",E),f(E.message)}},p=async()=>{if(e)try{const{data:E,error:I}=await fe.from("stock_alerts").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(I)throw I;l(E||[])}catch(E){console.error("Error fetching stock alerts:",E),f(E.message)}},v=async()=>{if(e)try{const{data:E,error:I}=await fe.from("suppliers").select("*").eq("user_id",e.id).eq("is_active",!0).order("name");if(I)throw I;u(E||[])}catch(E){console.error("Error fetching suppliers:",E),f(E.message)}},y=async E=>{if(!e)return null;try{const I={...E,user_id:e.id},{data:R,error:z}=await fe.from("stock_items").insert([I]).select().single();if(z)throw z;return r(U=>{const K=[...U,R];return console.log(" Added item to state, new count:",K.length),K}),t({title:"Succs",description:"Article ajout au stock"}),R}catch(I){return console.error("Error adding stock item:",I),t({title:"Erreur",description:"Impossible d'ajouter l'article",variant:"destructive"}),null}},w=async(E,I)=>{if(!e)return null;try{const{data:R,error:z}=await fe.from("stock_items").update({...I,updated_at:new Date().toISOString()}).eq("id",E).eq("user_id",e.id).select().single();if(z)throw z;return r(U=>{const K=U.map(k=>k.id===E?R:k);return console.log(" Updated item in state, found:",K.some(k=>k.id===E)),K}),t({title:"Succs",description:"Article mis  jour"}),R}catch(R){return console.error("Error updating stock item:",R),t({title:"Erreur",description:"Impossible de mettre  jour l'article",variant:"destructive"}),null}},S=async E=>{if(!e)return!1;try{const{error:I}=await fe.from("stock_items").update({active:!1}).eq("id",E).eq("user_id",e.id);if(I)throw I;return r(R=>R.filter(z=>z.id!==E)),t({title:"Succs",description:"Article supprim du stock"}),!0}catch(I){return console.error("Error deleting stock item:",I),t({title:"Erreur",description:"Impossible de supprimer l'article",variant:"destructive"}),!1}},j=async E=>{if(!e)return null;try{const{data:I,error:R}=await fe.from("stock_movements").insert([E]).select().single();if(R)throw R;return i(z=>[I,...z]),await x(),t({title:"Succs",description:"Mouvement de stock enregistr"}),I}catch(I){return console.error("Error adding stock movement:",I),t({title:"Erreur",description:"Impossible d'enregistrer le mouvement",variant:"destructive"}),null}},N=async()=>{if(e)try{const{error:E}=await fe.rpc("generate_stock_alerts");if(E)throw E;await p()}catch(E){console.error("Error generating stock alerts:",E)}},C=async E=>{if(e)try{const{error:I}=await fe.from("stock_alerts").update({is_read:!0}).eq("id",E).eq("user_id",e.id);if(I)throw I;await p()}catch(I){console.error("Error marking alert as read:",I)}},_=async E=>{if(!e)return null;try{const I={...E,user_id:e.id},{data:R,error:z}=await fe.from("suppliers").insert([I]).select().single();if(z)throw z;return await v(),t({title:"Succs",description:"Fournisseur ajout"}),R}catch(I){return console.error("Error adding supplier:",I),t({title:"Erreur",description:"Impossible d'ajouter le fournisseur",variant:"destructive"}),null}},A=()=>n.map(JEe),P=()=>o.map(E=>({id:parseInt(E.id.replace(/-/g,"").slice(0,8),16),itemId:parseInt(E.item_id.replace(/-/g,"").slice(0,8),16),itemName:E.item_name,type:E.alert_type,message:E.message,severity:E.severity,createdAt:E.created_at,isRead:E.is_read})),T=()=>a.map(E=>({id:parseInt(E.id.replace(/-/g,"").slice(0,8),16),itemId:parseInt(E.stock_item_id.replace(/-/g,"").slice(0,8),16),itemName:E.item_name,type:E.movement_type,quantity:E.quantity,reason:E.reason,reference:E.reference,performedBy:E.performed_by,date:E.movement_date,notes:E.notes}));return b.useEffect(()=>{e&&(h(!0),Promise.all([x(),g(),p(),v()]).finally(()=>{h(!1)}),N())},[e]),{stockItems:n,stockMovements:a,stockAlerts:o,suppliers:c,loading:d,error:m,compatibleStockItems:A(),compatibleStockAlerts:P(),compatibleStockMovements:T(),addStockItem:y,updateStockItem:w,deleteStockItem:S,addStockMovement:j,addSupplier:_,generateStockAlerts:N,markAlertAsRead:C,fetchStockItems:x,fetchStockMovements:g,fetchStockAlerts:p,fetchSuppliers:v}},ZEe=[{value:"medication",label:"Mdicaments",icon:""},{value:"vaccine",label:"Vaccins",icon:""},{value:"consumable",label:"Consommables",icon:""},{value:"equipment",label:"quipement",icon:""},{value:"supplement",label:"Supplments",icon:""}],eke=[{value:"unit",label:"Unit"},{value:"box",label:"Bote"},{value:"vial",label:"Flacon"},{value:"bottle",label:"Bouteille"},{value:"pack",label:"Paquet"},{value:"kg",label:"Kilogramme"},{value:"g",label:"Gramme"},{value:"ml",label:"Millilitre"},{value:"l",label:"Litre"}],tke={medication:["Antibiotique","Anti-inflammatoire","Antiparasitaire","Anesthsique","Analgsique","Antihistaminique","Corticode","Diurtique","Autre"],vaccine:["Vaccin Core","Vaccin Non-Core","Vaccin Obligatoire","Vaccin Recommand","Autre"],consumable:["Matriel d'injection","Protection","Pansement","Suture","Autre"],equipment:["Diagnostic","Chirurgie","Monitoring","Strilisation","Autre"],supplement:["Vitamines","Minraux","Probiotiques","Acides amins","Autre"]};function MO({open:e,onOpenChange:t,editingItem:n,onItemAdded:r,addStockItemFn:a,updateStockItemFn:i,rawStockItems:o}){var S;const l=Z8(),{addStockItem:c,updateStockItem:u,stockItems:d}=a&&i&&o?{addStockItem:a,updateStockItem:i,stockItems:o}:l,{settings:h}=Zt(),{toast:m}=it(),f=j=>{const N=d.find(C=>parseInt(C.id.replace(/-/g,"").slice(0,8),16)===j);return(N==null?void 0:N.id)||null},x=async(j,N)=>{const C=f(j);if(!C)return null;const _={};return N.currentStock!==void 0&&(_.current_quantity=N.currentStock),N.minimumStock!==void 0&&(_.minimum_quantity=N.minimumStock),N.maximumStock!==void 0&&(_.maximum_quantity=N.maximumStock),N.purchasePrice!==void 0&&(_.unit_cost=N.purchasePrice),N.sellingPrice!==void 0&&(_.selling_price=N.sellingPrice),N.name!==void 0&&(_.name=N.name),N.supplier!==void 0&&(_.supplier=N.supplier),N.location!==void 0&&(_.location=N.location),N.batchNumber!==void 0&&(_.batch_number=N.batchNumber),N.expirationDate!==void 0&&(_.expiration_date=N.expirationDate),N.description!==void 0&&(_.description=N.description),N.unit!==void 0&&(_.unit=N.unit),N.category!==void 0&&(_.category=N.category),await u(C,_)},g=async j=>{const N={name:j.name,category:j.category,description:j.description,batch_number:j.batchNumber,unit:j.unit,current_quantity:j.currentStock,minimum_quantity:j.minimumStock,maximum_quantity:j.maximumStock,unit_cost:j.purchasePrice,selling_price:j.sellingPrice,expiration_date:j.expirationDate,supplier:j.supplier,location:j.location,active:j.isActive!==void 0?j.isActive:!0};return await c(N)},[p,v]=b.useState({name:"",category:"medication",subcategory:"",description:"",manufacturer:"",batchNumber:"",dosage:"",unit:"unit",currentStock:0,minimumStock:0,maximumStock:0,purchasePrice:0,sellingPrice:0,expirationDate:"",supplier:"",location:"",notes:"",barcode:"",sku:"",isActive:!0});b.useEffect(()=>{v(n?{name:n.name,category:n.category,subcategory:n.subcategory||"",description:n.description||"",manufacturer:n.manufacturer||"",batchNumber:n.batchNumber||"",dosage:n.dosage||"",unit:n.unit,currentStock:n.currentStock,minimumStock:n.minimumStock,maximumStock:n.maximumStock||0,purchasePrice:n.purchasePrice,sellingPrice:n.sellingPrice,expirationDate:n.expirationDate||"",supplier:n.supplier||"",location:n.location||"",notes:n.notes||"",barcode:n.barcode||"",sku:n.sku||"",isActive:n.isActive}:{name:"",category:"medication",subcategory:"",description:"",manufacturer:"",batchNumber:"",dosage:"",unit:"unit",currentStock:0,minimumStock:0,maximumStock:0,purchasePrice:0,sellingPrice:0,expirationDate:"",supplier:"",location:"",notes:"",barcode:"",sku:"",isActive:!0})},[n,e]);const y=async j=>{if(j.preventDefault(),!p.name.trim()){m({title:"Erreur",description:"Le nom de l'lment est requis.",variant:"destructive"});return}if(p.currentStock<0||p.minimumStock<0||p.purchasePrice<0||p.sellingPrice<0){m({title:"Erreur",description:"Les valeurs numriques ne peuvent pas tre ngatives.",variant:"destructive"});return}const N={id:0,...p,currentStock:Number(p.currentStock),minimumStock:Number(p.minimumStock),maximumStock:Number(p.maximumStock)||void 0,purchasePrice:Number(p.purchasePrice),sellingPrice:Number(p.sellingPrice),totalValue:Number(p.currentStock)*Number(p.purchasePrice),expirationDate:p.expirationDate||void 0,subcategory:p.subcategory||void 0,description:p.description||void 0,manufacturer:p.manufacturer||void 0,batchNumber:p.batchNumber||void 0,dosage:p.dosage||void 0,supplier:p.supplier||void 0,location:p.location||void 0,notes:p.notes||void 0,barcode:p.barcode||void 0,sku:p.sku||void 0,lastUpdated:new Date().toISOString(),lastRestocked:void 0,isActive:!0};n?(await x(n.id,N),m({title:"lment modifi",description:`"${p.name}" a t modifi avec succs.`})):(await g(N),m({title:"lment ajout",description:`"${p.name}" a t ajout au stock.`})),r&&r(),t(!1)},w=(j,N)=>{v(C=>({...C,[j]:N}))};return s.jsx(tt,{open:e,onOpenChange:t,children:s.jsxs(et,{className:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[s.jsxs(nt,{children:[s.jsx(rt,{children:n?"Modifier l'lment de stock":"Nouvel lment de stock"}),s.jsx(At,{children:n?"Modifiez les informations de l'lment de stock.":"Ajoutez un nouvel lment  votre inventaire."})]}),s.jsxs("form",{onSubmit:y,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Informations de base"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"name",children:"Nom de l'lment *"}),s.jsx(se,{id:"name",value:p.name,onChange:j=>w("name",j.target.value),placeholder:"ex: Amoxicilline 500mg",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"category",children:"Catgorie *"}),s.jsxs(_e,{value:p.category,onValueChange:j=>w("category",j),children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Slectionner une catgorie"})}),s.jsx(Se,{children:ZEe.map(j=>s.jsxs(Q,{value:j.value,children:[j.icon," ",j.label]},j.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"subcategory",children:"Sous-catgorie"}),s.jsxs(_e,{value:p.subcategory,onValueChange:j=>w("subcategory",j),children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Slectionner une sous-catgorie"})}),s.jsx(Se,{children:(S=tke[p.category])==null?void 0:S.map(j=>s.jsx(Q,{value:j,children:j},j))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"manufacturer",children:"Fabricant"}),s.jsx(se,{id:"manufacturer",value:p.manufacturer,onChange:j=>w("manufacturer",j.target.value),placeholder:"ex: Boehringer Ingelheim"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"description",children:"Description"}),s.jsx(Ke,{id:"description",value:p.description,onChange:j=>w("description",j.target.value),placeholder:"Description dtaille de l'lment...",rows:2})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Informations techniques"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"batchNumber",children:"Numro de lot"}),s.jsx(se,{id:"batchNumber",value:p.batchNumber,onChange:j=>w("batchNumber",j.target.value),placeholder:"ex: AMX2024001"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"dosage",children:"Dosage"}),s.jsx(se,{id:"dosage",value:p.dosage,onChange:j=>w("dosage",j.target.value),placeholder:"ex: 500mg"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"unit",children:"Unit"}),s.jsxs(_e,{value:p.unit,onValueChange:j=>w("unit",j),children:[s.jsx(Ne,{children:s.jsx(Ce,{placeholder:"Slectionner une unit"})}),s.jsx(Se,{children:eke.map(j=>s.jsx(Q,{value:j.value,children:j.label},j.value))})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Gestion du stock"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"currentStock",children:"Stock actuel *"}),s.jsx(se,{id:"currentStock",type:"number",min:"0",value:p.currentStock,onChange:j=>w("currentStock",parseInt(j.target.value)||0),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"minimumStock",children:"Stock minimum *"}),s.jsx(se,{id:"minimumStock",type:"number",min:"0",value:p.minimumStock,onChange:j=>w("minimumStock",parseInt(j.target.value)||0),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"maximumStock",children:"Stock maximum"}),s.jsx(se,{id:"maximumStock",type:"number",min:"0",value:p.maximumStock,onChange:j=>w("maximumStock",parseInt(j.target.value)||0)})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(M,{htmlFor:"purchasePrice",children:["Prix d'achat (",h.currency,") *"]}),s.jsx(se,{id:"purchasePrice",type:"number",step:"0.01",min:"0",value:p.purchasePrice,onChange:j=>w("purchasePrice",parseFloat(j.target.value)||0),required:!0}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Prix d'achat au fournisseur"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(M,{htmlFor:"sellingPrice",children:["Prix de vente (",h.currency,") *"]}),s.jsx(se,{id:"sellingPrice",type:"number",step:"0.01",min:"0",value:p.sellingPrice,onChange:j=>w("sellingPrice",parseFloat(j.target.value)||0),required:!0}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Prix de vente au client"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"La valeur totale sera calcule automatiquement : Prix d'achat  Stock actuel"}),p.purchasePrice>0&&p.currentStock>0&&s.jsxs("div",{className:"text-sm font-medium text-primary",children:["Valeur totale : ",(p.purchasePrice*p.currentStock).toFixed(2)," ",h.currency]}),p.purchasePrice>0&&p.sellingPrice>0&&s.jsxs("div",{className:"text-sm font-medium text-green-600",children:["Marge : ",((p.sellingPrice-p.purchasePrice)*p.currentStock).toFixed(2)," ",h.currency]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Informations supplmentaires"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"expirationDate",children:"Date d'expiration"}),s.jsx(se,{id:"expirationDate",type:"date",value:p.expirationDate,onChange:j=>w("expirationDate",j.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"supplier",children:"Fournisseur"}),s.jsx(se,{id:"supplier",value:p.supplier,onChange:j=>w("supplier",j.target.value),placeholder:"ex: Pharmacie Vtrinaire Centrale"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"location",children:"Emplacement"}),s.jsx(se,{id:"location",value:p.location,onChange:j=>w("location",j.target.value),placeholder:"ex: Armoire A - tagre 1"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"barcode",children:"Code-barres"}),s.jsx(se,{id:"barcode",value:p.barcode,onChange:j=>w("barcode",j.target.value),placeholder:"ex: 1234567890123"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"sku",children:"SKU"}),s.jsx(se,{id:"sku",value:p.sku,onChange:j=>w("sku",j.target.value),placeholder:"ex: MED-AMX-500"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"notes",children:"Notes"}),s.jsx(Ke,{id:"notes",value:p.notes,onChange:j=>w("notes",j.target.value),placeholder:"Notes supplmentaires...",rows:3})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx($,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsx($,{type:"submit",children:n?"Modifier":"Ajouter"})]})]})]})})}const bh={medication:{label:"Mdicaments",color:"bg-blue-100 text-blue-800",icon:""},vaccine:{label:"Vaccins",color:"bg-green-100 text-green-800",icon:""},consumable:{label:"Consommables",color:"bg-orange-100 text-orange-800",icon:""},equipment:{label:"quipement",color:"bg-purple-100 text-purple-800",icon:""},supplement:{label:"Supplments",color:"bg-yellow-100 text-yellow-800",icon:""}},nke=[{value:"unit",label:"Unit"},{value:"box",label:"Bote"},{value:"vial",label:"Flacon"},{value:"bottle",label:"Bouteille"},{value:"pack",label:"Paquet"},{value:"kg",label:"Kilogramme"},{value:"g",label:"Gramme"},{value:"ml",label:"Millilitre"},{value:"l",label:"Litre"}];function rke(){const{stockItems:e,loading:t,addStockItem:n,updateStockItem:r,deleteStockItem:a}=Z8(),{toast:i}=it(),[o,l]=b.useState(0),c=b.useMemo(()=>(console.log(" Recalculating stockItems, raw count:",e.length),e.map(G=>({id:parseInt(G.id.replace(/-/g,"").slice(0,8),16),name:G.name,category:G.category,subcategory:"",manufacturer:G.supplier||"",batchNumber:G.batch_number||"",dosage:"",unit:G.unit,currentStock:G.current_quantity||0,minimumStock:G.minimum_quantity||0,maximumStock:G.maximum_quantity||0,purchasePrice:G.unit_cost||0,sellingPrice:G.selling_price||0,totalValue:(G.current_quantity||0)*(G.unit_cost||0),expirationDate:G.expiration_date,supplier:G.supplier||"",location:G.location||"",notes:G.description||"",barcode:"",sku:"",lastUpdated:G.updated_at,isActive:G.active||!0}))),[e,o]),u=[],[d,h]=b.useState(!1),[m,f]=b.useState(!1),[x,g]=b.useState(!1),[p,v]=b.useState(null),[y,w]=b.useState(null),[S,j]=b.useState(""),[N,C]=b.useState("all"),[_,A]=b.useState("all"),[P,T]=b.useState("name"),[E,I]=b.useState("asc"),[R,z]=b.useState(null),[U,K]=b.useState(""),k=b.useMemo(()=>{const G=c.length,ue=c.reduce((ee,Pe)=>ee+Pe.totalValue,0),re=c.filter(ee=>ee.currentStock<=ee.minimumStock).length,ve=c.filter(ee=>ee.expirationDate&&new Date(ee.expirationDate)<new Date).length,pe=c.filter(ee=>ee.expirationDate&&new Date(ee.expirationDate)<=new Date(Date.now()+30*24*60*60*1e3)&&new Date(ee.expirationDate)>new Date).length;return{totalItems:G,totalValue:ue,lowStockItems:re,expiredItems:ve,expiringSoonItems:pe}},[c]),D=()=>{l(G=>G+1)},J=b.useMemo(()=>{let G=c.filter(ue=>{var ee,Pe;const re=ue.name.toLowerCase().includes(S.toLowerCase())||((ee=ue.manufacturer)==null?void 0:ee.toLowerCase().includes(S.toLowerCase()))||((Pe=ue.batchNumber)==null?void 0:Pe.toLowerCase().includes(S.toLowerCase())),ve=N==="all"||ue.category===N;let pe=!0;return _==="low_stock"?pe=ue.currentStock<=ue.minimumStock:_==="expired"?pe=ue.expirationDate&&new Date(ue.expirationDate)<new Date:_==="expiring_soon"?pe=ue.expirationDate&&new Date(ue.expirationDate)<=new Date(Date.now()+2592e6)&&new Date(ue.expirationDate)>new Date:_==="active"&&(pe=ue.isActive),re&&ve&&pe});return G.sort((ue,re)=>{let ve,pe;switch(P){case"name":ve=ue.name.toLowerCase(),pe=re.name.toLowerCase();break;case"currentStock":ve=ue.currentStock,pe=re.currentStock;break;case"totalValue":ve=ue.totalValue,pe=re.totalValue;break;case"expirationDate":ve=ue.expirationDate||"9999-12-31",pe=re.expirationDate||"9999-12-31";break;default:ve=ue.name.toLowerCase(),pe=re.name.toLowerCase()}return E==="asc"?ve<pe?-1:ve>pe?1:0:ve>pe?-1:ve<pe?1:0}),G},[c,S,N,_,P,E]),W=G=>e.find(ue=>parseInt(ue.id.replace(/-/g,"").slice(0,8),16)===G),Y=async(G,ue,re)=>{const ve=W(G);if(!ve)return;const pe={};switch(ue){case"currentStock":pe.current_quantity=parseInt(re)||0;break;case"minimumStock":pe.minimum_quantity=parseInt(re)||0;break;case"purchasePrice":pe.unit_cost=parseFloat(re)||0;break;case"sellingPrice":pe.selling_price=parseFloat(re)||0;break;case"location":pe.location=re;break;case"notes":pe.description=re;break}await r(ve.id,pe),z(null),i({title:"Stock mis  jour",description:"L'lment de stock a t mis  jour avec succs."})},V=G=>{w(G),g(!0)},O=G=>{g(G),G||w(null)},le=async G=>{const ue=W(G.id);ue&&confirm(`tes-vous sr de vouloir supprimer "${G.name}" du stock ?`)&&(await a(ue.id),i({title:"lment supprim",description:`"${G.name}" a t supprim du stock.`}))},te=G=>{v(G),f(!0)},ce=()=>{const G=[["Nom","Catgorie","Sous-catgorie","Fabricant","Numro de lot","Dosage","Unit","Stock actuel","Stock minimum","Prix d'achat","Prix de vente","Date d'expiration","Fournisseur","Emplacement","Notes","Code-barres","SKU"].join(","),...c.map(pe=>[`"${pe.name}"`,`"${pe.category}"`,`"${pe.subcategory||""}"`,`"${pe.manufacturer||""}"`,`"${pe.batchNumber||""}"`,`"${pe.dosage||""}"`,`"${pe.unit}"`,pe.currentStock,pe.minimumStock,pe.purchasePrice,pe.sellingPrice,`"${pe.expirationDate||""}"`,`"${pe.supplier||""}"`,`"${pe.location||""}"`,`"${pe.notes||""}"`,`"${pe.barcode||""}"`,`"${pe.sku||""}"`].join(","))].join(`
`),ue=new Blob([G],{type:"text/csv;charset=utf-8;"}),re=document.createElement("a"),ve=URL.createObjectURL(ue);re.setAttribute("href",ve),re.setAttribute("download",`stock_${new Date().toISOString().split("T")[0]}.csv`),re.style.visibility="hidden",document.body.appendChild(re),re.click(),document.body.removeChild(re),i({title:"Export russi",description:"Le fichier CSV a t tlcharg avec succs."})},ge=async G=>{var ve;const ue=(ve=G.target.files)==null?void 0:ve[0];if(!ue)return;const re=new FileReader;re.onload=async pe=>{var ee;try{const Ee=((ee=pe.target)==null?void 0:ee.result).split(`
`),dt=Ee[0].split(",").map(he=>he.replace(/"/g,"").trim()),en=["Nom","Catgorie","Unit","Stock actuel","Stock minimum","Prix d'achat","Prix de vente"].filter(he=>!dt.includes(he));if(en.length>0){i({title:"Erreur d'import",description:`En-ttes manquants: ${en.join(", ")}`,variant:"destructive"});return}let ae=0,B=0;for(let he=1;he<Ee.length;he++){const Oe=Ee[he].trim();if(Oe)try{const St=Oe.split(",").map(Fn=>Fn.replace(/"/g,"").trim()),Qe={};if(dt.forEach((Fn,Vr)=>{Qe[Fn]=St[Vr]||""}),!Qe.Nom||!Qe.Catgorie||!Qe.Unit){B++;continue}if(!Object.keys(bh).includes(Qe.Catgorie)){B++;continue}const Fe={name:Qe.Nom,category:Qe.Catgorie,description:Qe.Notes||"",unit:Qe.Unit,current_quantity:parseInt(Qe["Stock actuel"])||0,minimum_quantity:parseInt(Qe["Stock minimum"])||0,maximum_quantity:0,unit_cost:parseFloat(Qe["Prix d'achat"])||0,selling_price:parseFloat(Qe["Prix de vente"])||0,expiration_date:Qe["Date d'expiration"]||null,supplier:Qe.Fournisseur||"",location:Qe.Emplacement||"",batch_number:Qe["Numro de lot"]||"",active:!0};await n(Fe),ae++}catch(St){B++,console.error(`Erreur ligne ${he+1}:`,St)}}i({title:"Import termin",description:`${ae} lments imports avec succs${B>0?`, ${B} erreurs`:""}.`})}catch{i({title:"Erreur d'import",description:"Impossible de lire le fichier CSV.",variant:"destructive"})}},re.readAsText(ue),G.target.value=""},H=()=>{const G=[["Nom","Catgorie","Sous-catgorie","Fabricant","Numro de lot","Dosage","Unit","Stock actuel","Stock minimum","Prix d'achat","Prix de vente","Date d'expiration","Fournisseur","Emplacement","Notes","Code-barres","SKU"].join(","),["Amoxicilline 500mg","medication","Antibiotique","Boehringer Ingelheim","AMX2024001","500mg","box","15","5","20.00","25.50","2025-12-31","Pharmacie Vtrinaire Centrale","Armoire A - tagre 1","Stockage  temprature ambiante","1234567890123","MED-AMX-500"].join(","),["Vaccin DHPP","vaccine","Vaccin combin","Merial","VAC2024001","1ml","vial","25","10","45.00","55.00","2025-06-30","VetoPharma","Rfrigrateur - tagre 1","Conservation entre 2-8C","9876543210987","VAC-DHPP-001"].join(","),["Seringues 5ml","consumable","Matriel mdical","BD","SYR2024001","5ml","unit","100","20","0.50","0.75","","MedSupply","Armoire B - tagre 2","Usage unique","5556667778889","CON-SYR-5ML"].join(",")].join(`
`),ue=new Blob([G],{type:"text/csv;charset=utf-8;"}),re=document.createElement("a"),ve=URL.createObjectURL(ue);re.setAttribute("href",ve),re.setAttribute("download","gabarit_import_stock.csv"),re.style.visibility="hidden",document.body.appendChild(re),re.click(),document.body.removeChild(re),i({title:"Gabarit tlcharg",description:"Le fichier gabarit a t tlcharg avec succs."})};return t?s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx(wa,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"Chargement du stock..."})]})})}):s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-4 sm:py-8 space-y-4 sm:space-y-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold flex items-center gap-3",children:[s.jsx(wa,{className:"h-6 sm:h-8 w-6 sm:w-8 text-primary"}),"Gestion de Stock"]}),s.jsx("p",{className:"text-muted-foreground mt-2 text-sm sm:text-base",children:"Grez votre inventaire de mdicaments, vaccins et consommables"})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto",children:[s.jsxs($,{variant:"outline",onClick:ce,className:"gap-2 text-xs sm:text-sm",size:"sm",children:[s.jsx(bx,{className:"h-3 sm:h-4 w-3 sm:w-4"}),"Exporter CSV"]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"file",accept:".csv,.xlsx,.xls",onChange:ge,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",id:"import-file"}),s.jsx($,{variant:"outline",className:"gap-2 text-xs sm:text-sm",size:"sm",asChild:!0,children:s.jsxs("label",{htmlFor:"import-file",className:"cursor-pointer",children:[s.jsx($b,{className:"h-3 sm:h-4 w-3 sm:w-4"}),"Importer CSV"]})})]}),s.jsxs($,{variant:"outline",onClick:H,className:"gap-2 text-xs sm:text-sm",size:"sm",children:[s.jsx(TU,{className:"h-3 sm:h-4 w-3 sm:w-4"}),"Gabarit"]}),s.jsxs($,{className:"gap-2 medical-glow text-xs sm:text-sm",size:"sm",onClick:()=>h(!0),children:[s.jsx(Ye,{className:"h-3 sm:h-4 w-3 sm:w-4"}),"Nouvel lment"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:[s.jsx(ie,{children:s.jsx(oe,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total lments"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold",children:k.totalItems})]}),s.jsx(wa,{className:"h-6 sm:h-8 w-6 sm:w-8 text-muted-foreground"})]})})}),s.jsx(ie,{children:s.jsx(oe,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Valeur Totale"}),s.jsxs("p",{className:"text-xl sm:text-2xl font-bold",children:[k.totalValue.toFixed(2)," MAD"]})]}),s.jsx(xd,{className:"h-6 sm:h-8 w-6 sm:w-8 text-green-600"})]})})}),s.jsx(ie,{children:s.jsx(oe,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Stock Bas"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-orange-600",children:k.lowStockItems})]}),s.jsx(pn,{className:"h-6 sm:h-8 w-6 sm:w-8 text-orange-600"})]})})}),s.jsx(ie,{children:s.jsx(oe,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Expirs"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-red-600",children:k.expiredItems})]}),s.jsx($l,{className:"h-6 sm:h-8 w-6 sm:w-8 text-red-600"})]})})}),s.jsx(ie,{children:s.jsx(oe,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Expirent Bientt"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-yellow-600",children:k.expiringSoonItems})]}),s.jsx($t,{className:"h-6 sm:h-8 w-6 sm:w-8 text-yellow-600"})]})})})]}),s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsxs(ye,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[s.jsx(Og,{className:"h-4 sm:h-5 w-4 sm:w-5"}),"Rechercher et filtrer"]})}),s.jsx(oe,{className:"space-y-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-wrap",children:[s.jsx("div",{className:"flex-1 min-w-[250px] sm:min-w-[300px]",children:s.jsx(se,{placeholder:"Rechercher par nom, fabricant, lot...",value:S,onChange:G=>j(G.target.value),className:"w-full"})}),s.jsxs(_e,{value:N,onValueChange:C,children:[s.jsx(Ne,{className:"w-full sm:w-48",children:s.jsx(Ce,{placeholder:"Catgorie"})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"all",children:"Toutes les catgories"}),Object.entries(bh).map(([G,ue])=>s.jsxs(Q,{value:G,children:[ue.icon," ",ue.label]},G))]})]}),s.jsxs(_e,{value:_,onValueChange:A,children:[s.jsx(Ne,{className:"w-full sm:w-48",children:s.jsx(Ce,{placeholder:"Statut"})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"all",children:"Tous les statuts"}),s.jsx(Q,{value:"active",children:"Actifs"}),s.jsx(Q,{value:"low_stock",children:"Stock bas"}),s.jsx(Q,{value:"expired",children:"Expirs"}),s.jsx(Q,{value:"expiring_soon",children:"Expirent bientt"})]})]}),s.jsxs(_e,{value:P,onValueChange:T,children:[s.jsx(Ne,{className:"w-full sm:w-48",children:s.jsx(Ce,{placeholder:"Trier par"})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"name",children:"Nom"}),s.jsx(Q,{value:"currentStock",children:"Stock actuel"}),s.jsx(Q,{value:"totalValue",children:"Valeur totale"}),s.jsx(Q,{value:"expirationDate",children:"Date d'expiration"})]})]}),s.jsx($,{variant:"outline",onClick:()=>I(E==="asc"?"desc":"asc"),size:"sm",className:"w-full sm:w-auto",children:E==="asc"?s.jsx(Rn,{className:"h-4 w-4"}):s.jsx(gf,{className:"h-4 w-4"})})]})})]}),s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsxs(ye,{className:"text-lg sm:text-xl",children:["Inventaire (",J.length," lments)"]})}),s.jsxs(oe,{children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Kd,{children:[s.jsx(Gd,{children:s.jsxs(ea,{children:[s.jsx(ct,{className:"min-w-[150px]",children:"Nom"}),s.jsx(ct,{className:"min-w-[120px]",children:"Catgorie"}),s.jsx(ct,{className:"min-w-[100px] hidden sm:table-cell",children:"Fabricant"}),s.jsx(ct,{className:"min-w-[100px]",children:"Stock"}),s.jsx(ct,{className:"min-w-[100px] hidden md:table-cell",children:"Prix d'achat"}),s.jsx(ct,{className:"min-w-[100px] hidden md:table-cell",children:"Prix de vente"}),s.jsx(ct,{className:"min-w-[100px] hidden lg:table-cell",children:"Valeur totale"}),s.jsx(ct,{className:"min-w-[100px] hidden md:table-cell",children:"Expiration"}),s.jsx(ct,{className:"min-w-[120px] hidden lg:table-cell",children:"Emplacement"}),s.jsx(ct,{className:"min-w-[120px]",children:"Actions"})]})}),s.jsx(Yd,{children:J.map(G=>{var pe;const ue=G.currentStock<=G.minimumStock,re=G.expirationDate&&new Date(G.expirationDate)<new Date,ve=G.expirationDate&&new Date(G.expirationDate)<=new Date(Date.now()+30*24*60*60*1e3)&&new Date(G.expirationDate)>new Date;return s.jsxs(ea,{className:G.isActive?"":"opacity-50",children:[s.jsx(ut,{children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"font-medium text-sm sm:text-base",children:G.name}),G.batchNumber&&s.jsxs("div",{className:"text-xs sm:text-sm text-muted-foreground",children:["Lot: ",G.batchNumber]}),G.dosage&&s.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:G.dosage})]})}),s.jsxs(ut,{children:[s.jsxs(Ie,{className:`${bh[G.category].color} text-xs sm:text-sm`,children:[bh[G.category].icon," ",bh[G.category].label]}),G.subcategory&&s.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:G.subcategory})]}),s.jsx(ut,{className:"hidden sm:table-cell",children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-sm",children:G.manufacturer||"-"}),G.supplier&&s.jsx("div",{className:"text-xs text-muted-foreground",children:G.supplier})]})}),s.jsx(ut,{children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:`font-medium text-sm sm:text-base ${ue?"text-orange-600":""}`,children:[G.currentStock," ",((pe=nke.find(ee=>ee.value===G.unit))==null?void 0:pe.label)||G.unit]}),s.jsxs("div",{className:"text-xs sm:text-sm text-muted-foreground",children:["Min: ",G.minimumStock]}),s.jsxs("div",{className:"flex items-center gap-2",children:[ue&&s.jsx(Ie,{variant:"destructive",className:"text-xs",children:"Stock bas"}),G.lastUpdated&&new Date(G.lastUpdated).getTime()>Date.now()-24*60*60*1e3&&s.jsx(Ie,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700",children:"Mis  jour"})]})]})}),s.jsx(ut,{className:"hidden md:table-cell",children:(R==null?void 0:R.id)===G.id&&R.field==="purchasePrice"?s.jsx(se,{type:"number",step:"0.01",value:U,onChange:ee=>K(ee.target.value),onBlur:()=>Y(G.id,"purchasePrice",U),onKeyDown:ee=>{ee.key==="Enter"&&Y(G.id,"purchasePrice",U)},autoFocus:!0,className:"w-16 sm:w-20"}):s.jsxs("div",{className:"cursor-pointer hover:bg-muted p-1 rounded text-sm",onClick:()=>{z({id:G.id,field:"purchasePrice"}),K(G.purchasePrice.toString())},children:[G.purchasePrice.toFixed(2)," MAD"]})}),s.jsx(ut,{className:"hidden md:table-cell",children:(R==null?void 0:R.id)===G.id&&R.field==="sellingPrice"?s.jsx(se,{type:"number",step:"0.01",value:U,onChange:ee=>K(ee.target.value),onBlur:()=>Y(G.id,"sellingPrice",U),onKeyDown:ee=>{ee.key==="Enter"&&Y(G.id,"sellingPrice",U)},autoFocus:!0,className:"w-16 sm:w-20"}):s.jsxs("div",{className:"cursor-pointer hover:bg-muted p-1 rounded",onClick:()=>{z({id:G.id,field:"sellingPrice"}),K(G.sellingPrice.toString())},children:[s.jsxs("div",{className:"font-medium text-sm",children:[G.sellingPrice.toFixed(2)," MAD"]}),s.jsxs("div",{className:"text-xs text-green-600",children:["Marge: ",((G.sellingPrice-G.purchasePrice)*G.currentStock).toFixed(2)," MAD"]})]})}),s.jsx(ut,{className:"hidden lg:table-cell",children:s.jsxs("div",{className:"font-medium text-sm",children:[G.totalValue.toFixed(2)," MAD"]})}),s.jsx(ut,{className:"hidden md:table-cell",children:G.expirationDate?s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:`text-xs sm:text-sm ${re?"text-red-600 font-medium":ve?"text-yellow-600 font-medium":""}`,children:ht(new Date(G.expirationDate),"dd/MM/yyyy",{locale:dr})}),re&&s.jsx(Ie,{variant:"destructive",className:"text-xs",children:"Expir"}),ve&&!re&&s.jsx(Ie,{variant:"secondary",className:"text-xs bg-yellow-100 text-yellow-800",children:"Expire bientt"})]}):s.jsx("span",{className:"text-muted-foreground text-xs sm:text-sm",children:"-"})}),s.jsx(ut,{className:"hidden lg:table-cell",children:(R==null?void 0:R.id)===G.id&&R.field==="location"?s.jsx(se,{value:U,onChange:ee=>K(ee.target.value),onBlur:()=>Y(G.id,"location",U),onKeyDown:ee=>{ee.key==="Enter"&&Y(G.id,"location",U)},autoFocus:!0,className:"w-24 sm:w-32"}):s.jsxs("div",{className:"cursor-pointer hover:bg-muted p-1 rounded flex items-center gap-1 text-xs sm:text-sm",onClick:()=>{z({id:G.id,field:"location"}),K(G.location||"")},children:[s.jsx(Du,{className:"h-3 w-3"}),G.location||"Non dfini"]})}),s.jsx(ut,{children:s.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[s.jsx($,{size:"sm",variant:"outline",onClick:()=>te(G),className:"p-1 sm:p-2",children:s.jsx(Rn,{className:"h-3 w-3"})}),s.jsx($,{size:"sm",variant:"outline",onClick:()=>V(G),className:"p-1 sm:p-2",children:s.jsx(It,{className:"h-3 w-3"})}),s.jsx($,{size:"sm",variant:"outline",onClick:()=>le(G),className:"p-1 sm:p-2",children:s.jsx(Wt,{className:"h-3 w-3"})})]})})]},G.id)})})]})}),J.length===0&&s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(wa,{className:"h-8 sm:h-12 w-8 sm:w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{className:"text-sm sm:text-base",children:"Aucun lment trouv"}),s.jsx("p",{className:"text-xs sm:text-sm",children:"Ajustez vos filtres ou ajoutez de nouveaux lments"})]})]})]}),s.jsxs(ie,{children:[s.jsxs(xe,{children:[s.jsxs(ye,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[s.jsx($t,{className:"h-4 sm:h-5 w-4 sm:w-5"}),"Historique des Mouvements (",u.length,")"]}),s.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Derniers mouvements de stock (prescriptions, achats, ajustements)"})]}),s.jsx(oe,{children:u.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx($t,{className:"h-8 sm:h-12 w-8 sm:w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{className:"text-sm sm:text-base",children:"Aucun mouvement de stock enregistr"})]}):s.jsxs("div",{className:"space-y-4",children:[u.sort((G,ue)=>new Date(ue.date).getTime()-new Date(G.date).getTime()).slice(0,20).map(G=>{const re={in:{label:"Entre",color:"text-green-600",icon:""},out:{label:G.reason==="Prescription mdicale"?"Prescription":"Sortie",color:G.reason==="Prescription mdicale"?"text-orange-600":"text-red-600",icon:G.reason==="Prescription mdicale"?"":""},adjustment:{label:"Ajustement",color:"text-blue-600",icon:""},transfer:{label:"Transfert",color:"text-purple-600",icon:""}}[G.type];return s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-3 sm:p-4 border rounded-lg hover:bg-muted/50 gap-2 sm:gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[s.jsx("div",{className:"text-xl sm:text-2xl",children:re.icon}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-sm sm:text-base",children:G.itemName}),s.jsxs("div",{className:"text-xs sm:text-sm text-muted-foreground",children:[G.reason,"  ",G.performedBy||"Non spcifi"]}),G.reference&&s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Rfrence: ",G.reference]})]})]}),s.jsxs("div",{className:"text-right sm:text-left",children:[s.jsxs("div",{className:`font-semibold text-sm sm:text-base ${re.color}`,children:[G.type==="in"?"+":G.type==="out"?"-":"",G.quantity]}),s.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:ht(new Date(G.date),"dd/MM/yyyy HH:mm",{locale:dr})})]})]},G.id)}),u.length>20&&s.jsx("div",{className:"text-center pt-4",children:s.jsxs($,{variant:"outline",size:"sm",className:"text-xs sm:text-sm",children:["Voir tous les mouvements (",u.length,")"]})})]})})]}),s.jsx(MO,{open:d,onOpenChange:h,onItemAdded:D,addStockItemFn:n,updateStockItemFn:r,rawStockItems:e}),s.jsx(MO,{open:x,onOpenChange:O,editingItem:y,onItemAdded:D,addStockItemFn:n,updateStockItemFn:r,rawStockItems:e}),m&&s.jsx(tt,{open:m,onOpenChange:f,children:s.jsxs(et,{children:[s.jsxs(nt,{children:[s.jsx(rt,{children:"Mouvement de Stock"}),s.jsxs(At,{children:["Ajouter une entre ou sortie pour ",p==null?void 0:p.name]})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Cette fonctionnalit sera bientt disponible."})]})})]})}const ske=()=>{const{user:e}=Sn(),{toast:t}=it(),[n,r]=b.useState([]),[a,i]=b.useState([]),[o,l]=b.useState([]),[c,u]=b.useState([]),[d,h]=b.useState(!0),[m,f]=b.useState(null),x=async()=>{if(e)try{const{data:_,error:A}=await fe.from("revenue").select("*").eq("user_id",e.id).order("revenue_date",{ascending:!1});if(A)throw A;r(_||[])}catch(_){console.error("Error fetching revenues:",_),f(_.message)}},g=async()=>{if(e)try{const{data:_,error:A}=await fe.from("expenses").select("*").eq("user_id",e.id).order("expense_date",{ascending:!1});if(A)throw A;i(_||[])}catch(_){console.error("Error fetching expenses:",_),f(_.message)}},p=async()=>{if(e)try{const{data:_,error:A}=await fe.from("invoices").select("*").eq("user_id",e.id).order("invoice_date",{ascending:!1});if(A)throw A;l(_||[])}catch(_){console.error("Error fetching invoices:",_),f(_.message)}},v=async()=>{if(e)try{const{data:_,error:A}=await fe.from("payments").select("*").eq("user_id",e.id).order("payment_date",{ascending:!1});if(A)throw A;u(_||[])}catch(_){console.error("Error fetching payments:",_),f(_.message)}};return b.useEffect(()=>{e&&(h(!0),Promise.all([x(),g(),p(),v()]).finally(()=>h(!1)))},[e]),{revenues:n,expenses:a,invoices:o,payments:c,loading:d,error:m,addRevenue:async _=>{if(!e)return null;try{const A={..._,user_id:e.id},{data:P,error:T}=await fe.from("revenue").insert([A]).select().single();if(T)throw T;return await x(),t({title:"Succs",description:"Recette ajoute"}),P}catch(A){return console.error("Error adding revenue:",A),t({title:"Erreur",description:"Impossible d'ajouter la recette",variant:"destructive"}),null}},addExpense:async _=>{if(!e)return null;try{const A={..._,user_id:e.id},{data:P,error:T}=await fe.from("expenses").insert([A]).select().single();if(T)throw T;return await g(),t({title:"Succs",description:"Charge ajoute"}),P}catch(A){return console.error("Error adding expense:",A),t({title:"Erreur",description:"Impossible d'ajouter la charge",variant:"destructive"}),null}},updateRevenue:async(_,A)=>{try{const{error:P}=await fe.from("revenue").update(A).eq("id",_);if(P)throw P;await x(),t({title:"Succs",description:"Recette modifie"})}catch(P){console.error("Error updating revenue:",P),t({title:"Erreur",description:"Impossible de modifier la recette",variant:"destructive"})}},updateExpense:async(_,A)=>{try{const{error:P}=await fe.from("expenses").update(A).eq("id",_);if(P)throw P;await g(),t({title:"Succs",description:"Charge modifie"})}catch(P){console.error("Error updating expense:",P),t({title:"Erreur",description:"Impossible de modifier la charge",variant:"destructive"})}},deleteRevenue:async _=>{try{const{error:A}=await fe.from("revenue").delete().eq("id",_);if(A)throw A;await x(),t({title:"Succs",description:"Recette supprime"})}catch(A){console.error("Error deleting revenue:",A),t({title:"Erreur",description:"Impossible de supprimer la recette",variant:"destructive"})}},deleteExpense:async _=>{try{const{error:A}=await fe.from("expenses").delete().eq("id",_);if(A)throw A;await g(),t({title:"Succs",description:"Charge supprime"})}catch(A){console.error("Error deleting expense:",A),t({title:"Erreur",description:"Impossible de supprimer la charge",variant:"destructive"})}},refreshAll:()=>{x(),g(),p(),v()}}},IO=[{type:"expense",frequency:"monthly",description:"Salaire Secrtaire",amount:3e3,source:"salary",is_active:!0},{type:"expense",frequency:"monthly",description:"CNSS Secrtaire",amount:700,source:"insurance",is_active:!0},{type:"expense",frequency:"monthly",description:"CNSS Vtrinaire",amount:1500,source:"insurance",is_active:!0},{type:"expense",frequency:"monthly",description:"Loyer",amount:3e3,source:"rent",is_active:!0},{type:"expense",frequency:"monthly",description:"Eau et lectricit",amount:300,source:"other",is_active:!0},{type:"expense",frequency:"annual",description:"Impts",amount:3e3,source:"tax",is_active:!0},{type:"expense",frequency:"annual",description:"Cotisation Ordre des Vtrinaires",amount:1200,source:"other",is_active:!0},{type:"expense",frequency:"occasional",description:"Maintenance quipement",amount:500,source:"other",is_active:!0},{type:"expense",frequency:"occasional",description:"Formation Professionnelle",amount:800,source:"other",is_active:!0},{type:"expense",frequency:"occasional",description:"Achat Matriel",amount:1200,source:"other",is_active:!0}],ake=()=>{const{user:e}=Sn(),{toast:t}=it(),[n,r]=b.useState([]),[a,i]=b.useState(!1),[o,l]=b.useState(null),c=b.useCallback(async()=>{if(e){i(!0);try{const{data:x,error:g}=await fe.from("accounting_templates").select("*").eq("user_id",e.id).eq("is_active",!0).order("frequency",{ascending:!0}).order("description",{ascending:!0});if(g)throw g;r(x||[])}catch(x){l(x.message),console.error("fetchTemplates error",x)}finally{i(!1)}}},[e]),u=b.useCallback(async()=>{if(e)try{const{count:x,error:g}=await fe.from("accounting_templates").select("*",{count:"exact",head:!0}).eq("user_id",e.id);if(g)throw g;if((x||0)>0){const y=IO.map(w=>({...w,user_id:e.id}));await fe.from("accounting_templates").upsert(y,{onConflict:"user_id,description,frequency,type",ignoreDuplicates:!0}),await c();return}const p=IO.map(y=>({...y,user_id:e.id})),{error:v}=await fe.from("accounting_templates").upsert(p,{onConflict:"user_id,description,frequency,type",ignoreDuplicates:!0});if(v)throw v;await c()}catch(x){console.error("seedIfEmpty error",x)}},[e,c]);b.useEffect(()=>{e&&(async()=>(await u(),await c()))()},[e,u,c]);const d=async x=>{if(!e)return null;try{const g={...x,is_active:x.is_active??!0,user_id:e.id},{data:p,error:v}=await fe.from("accounting_templates").upsert([g],{onConflict:"user_id,description,frequency,type",ignoreDuplicates:!0}).select().single();if(v)throw v;return await c(),t({title:"Succs",description:"Suggestion ajoute"}),p}catch(g){const p=(g==null?void 0:g.code)==="23505"?"Cette suggestion existe dj":"Impossible d'ajouter la suggestion";return t({title:"Erreur",description:p,variant:"destructive"}),null}},h=async(x,g)=>{try{const{error:p}=await fe.from("accounting_templates").update({...g,updated_at:new Date().toISOString()}).eq("id",x);if(p)throw p;await c(),t({title:"Succs",description:"Suggestion modifie"})}catch{t({title:"Erreur",description:"Impossible de modifier la suggestion",variant:"destructive"})}},m=async x=>{try{const{error:g}=await fe.from("accounting_templates").delete().eq("id",x);if(g)throw g;await c(),t({title:"Succs",description:"Suggestion supprime"})}catch{t({title:"Erreur",description:"Impossible de supprimer la suggestion",variant:"destructive"})}},f=b.useMemo(()=>{const x={monthly:[],annual:[],occasional:[]};for(const g of n)x[g.frequency].push(g);return x},[n]);return{templates:n,grouped:f,loading:a,error:o,fetchTemplates:c,seedIfEmpty:u,addTemplate:d,updateTemplate:h,deleteTemplate:m}},ike=()=>{const{revenues:e,expenses:t,invoices:n,payments:r,loading:a,addRevenue:i,addExpense:o,updateRevenue:l,updateExpense:c,deleteRevenue:u,deleteExpense:d}=ske(),{settings:h}=Zt();it();const m=b.useMemo(()=>{const ee=e.map(Ee=>({id:Ee.id,type:"revenue",category:"manual",frequency:"occasional",description:Ee.description,amount:Ee.amount,date:Ee.revenue_date,reference:Ee.reference_id||void 0,source:Ee.source||"other",sourceId:Ee.reference_id,notes:Ee.notes||void 0,createdAt:Ee.created_at,createdBy:Ee.user_id})),Pe=t.map(Ee=>({id:Ee.id,type:"expense",category:"manual",frequency:"occasional",description:Ee.description,amount:Ee.amount,date:Ee.expense_date,reference:Ee.receipt_number||void 0,source:Ee.category||"other",sourceId:void 0,notes:Ee.notes||void 0,createdAt:Ee.created_at,createdBy:Ee.user_id}));return[...ee,...Pe].sort((Ee,dt)=>new Date(dt.date).getTime()-new Date(Ee.date).getTime())},[e,t]),[f,x]=b.useState("month"),[g,p]=b.useState(""),[v,y]=b.useState(""),[w,S]=b.useState(!1),[j,N]=b.useState(null),[C,_]=b.useState(null),[A,P]=b.useState(!1),{grouped:T,addTemplate:E,updateTemplate:I,deleteTemplate:R}=ake(),[z,U]=b.useState(!1),[K,k]=b.useState(null),[D,J]=b.useState({description:"",amount:"",type:"expense",frequency:"monthly",source:"other"}),[W,Y]=b.useState({type:"revenue",frequency:"occasional",description:"",amount:"",date:"",source:"other",notes:""});b.useEffect(()=>{const ee=new Date,Pe=new Date(ee.getFullYear(),ee.getMonth(),1),Ee=new Date(ee.getFullYear(),ee.getMonth()+1,0);p(ht(Pe,"yyyy-MM-dd")),y(ht(Ee,"yyyy-MM-dd"))},[]);const V=b.useMemo(()=>{if(!g||!v)return null;const ee=m.filter(B=>{const he=new Date(B.date),Oe=new Date(g),St=new Date(v);return he>=Oe&&he<=St}),Pe=ee.filter(B=>B.type==="revenue"),Ee=ee.filter(B=>B.type==="expense"),dt=Pe.reduce((B,he)=>B+he.amount,0),Dt=Ee.reduce((B,he)=>B+he.amount,0),en={consultations:Pe.filter(B=>B.source==="consultation").reduce((B,he)=>B+he.amount,0),vaccinations:Pe.filter(B=>B.source==="vaccination").reduce((B,he)=>B+he.amount,0),antiparasitics:Pe.filter(B=>B.source==="antiparasitic").reduce((B,he)=>B+he.amount,0),prescriptions:Pe.filter(B=>B.source==="prescription").reduce((B,he)=>B+he.amount,0),stockSales:Pe.filter(B=>B.source==="stock_sale").reduce((B,he)=>B+he.amount,0),manualEntries:Pe.filter(B=>!B.source||B.source==="other").reduce((B,he)=>B+he.amount,0)},ae={stockPurchases:Ee.filter(B=>B.source==="stock_purchase").reduce((B,he)=>B+he.amount,0),salaries:Ee.filter(B=>B.source==="salary").reduce((B,he)=>B+he.amount,0),rent:Ee.filter(B=>B.source==="rent").reduce((B,he)=>B+he.amount,0),taxes:Ee.filter(B=>B.source==="tax").reduce((B,he)=>B+he.amount,0),insurance:Ee.filter(B=>B.source==="insurance").reduce((B,he)=>B+he.amount,0),other:Ee.filter(B=>!B.source||B.source==="other").reduce((B,he)=>B+he.amount,0),manualEntries:Ee.length>0?Dt:0};return{totalRevenue:dt,totalExpenses:Dt,netIncome:dt-Dt,entriesCount:ee.length,revenueBreakdown:en,expenseBreakdown:ae}},[m,g,v]);b.useEffect(()=>{g&&v&&_(V)},[g,v,V]);const O=ee=>{x(ee);const Pe=new Date;switch(ee){case"day":const Ee=ht(Pe,"yyyy-MM-dd");p(Ee),y(Ee);break;case"month":const dt=new Date(Pe.getFullYear(),Pe.getMonth(),1),Dt=new Date(Pe.getFullYear(),Pe.getMonth()+1,0);p(ht(dt,"yyyy-MM-dd")),y(ht(Dt,"yyyy-MM-dd"));break;case"quarter":const en=Math.floor(Pe.getMonth()/3),ae=new Date(Pe.getFullYear(),en*3,1),B=new Date(Pe.getFullYear(),en*3+3,0);p(ht(ae,"yyyy-MM-dd")),y(ht(B,"yyyy-MM-dd"));break;case"year":const he=new Date(Pe.getFullYear(),0,1),Oe=new Date(Pe.getFullYear(),11,31);p(ht(he,"yyyy-MM-dd")),y(ht(Oe,"yyyy-MM-dd"));break}},le=async()=>{!W.description||!W.amount||!W.date||(j?(j.type==="revenue"?await l(j.id,{description:W.description,amount:parseFloat(W.amount),revenue_date:W.date,source:W.source,notes:W.notes}):await c(j.id,{description:W.description,amount:parseFloat(W.amount),expense_date:W.date,category:W.source,notes:W.notes}),N(null)):W.type==="revenue"?await i({revenue_date:W.date,source:W.source,description:W.description,amount:parseFloat(W.amount),notes:W.notes}):await o({expense_date:W.date,category:W.source,description:W.description,amount:parseFloat(W.amount),status:"approved",is_deductible:!0,notes:W.notes}),Y({type:"revenue",frequency:"occasional",description:"",amount:"",date:"",source:"other",notes:""}),S(!1))},te=ee=>{N(ee),Y({type:ee.type,frequency:ee.frequency,description:ee.description,amount:ee.amount.toString(),date:ee.date,source:ee.source||"other",notes:ee.notes||""}),S(!0)},ce=async ee=>{if(window.confirm("tes-vous sr de vouloir supprimer cette entre ?")){const Pe=m.find(Ee=>Ee.id===ee);Pe&&(Pe.type==="revenue"?await u(ee):await d(ee))}},ge=ee=>{Y({...W,type:ee.type,frequency:ee.frequency||"occasional",description:ee.description,amount:ee.amount.toString(),source:ee.source,date:W.date||ht(new Date,"yyyy-MM-dd")}),P(!1)},H=async()=>{!D.description||!D.amount||(K?(await I(K.id,{description:D.description,amount:parseFloat(D.amount),type:D.type,frequency:D.frequency,source:D.source}),k(null)):await E({description:D.description,amount:parseFloat(D.amount),type:D.type,frequency:D.frequency,source:D.source}),J({description:"",amount:"",type:"expense",frequency:"monthly",source:"other"}),U(!1))},G=ee=>{k(ee),J({description:ee.description,amount:ee.amount.toString(),type:ee.type,frequency:ee.frequency,source:ee.source}),U(!0)},ue=async ee=>{window.confirm("tes-vous sr de vouloir supprimer cette suggestion ?")&&await R(ee.id)},re=m.filter(ee=>{const Pe=new Date(ee.date),Ee=new Date(g),dt=new Date(v);return Pe>=Ee&&Pe<=dt}),ve=ee=>`${ee.toFixed(2)} ${h.currency}`,pe=ee=>{switch(ee){case"consultation":return"";case"vaccination":return"";case"antiparasitic":return"";case"prescription":return"";case"stock_purchase":return"";case"salary":return"";case"rent":return"";case"tax":return"";case"insurance":return"";default:return""}};return s.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto p-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(bU,{className:"h-8 w-8"}),"Gestion Comptable"]}),s.jsx("p",{className:"text-muted-foreground",children:"Suivi des recettes et charges de votre clinique vtrinaire"})]}),s.jsx("div",{className:"flex gap-2",children:s.jsxs(tt,{open:w,onOpenChange:S,children:[s.jsx(Vx,{asChild:!0,children:s.jsxs($,{onClick:()=>{N(null),Y({type:"revenue",frequency:"occasional",description:"",amount:"",date:"",source:"other",notes:""})},children:[s.jsx(Ye,{className:"h-4 w-4 mr-2"}),"Ajouter une entre"]})}),s.jsxs(et,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(nt,{children:[s.jsx(rt,{children:j?"Modifier l'entre comptable":"Ajouter une entre comptable"}),s.jsx(At,{children:j?"Modifiez les informations de cette entre.":"Ajoutez une nouvelle recette ou charge manuelle."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"border rounded-lg p-4 bg-muted/50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(R0,{className:"h-4 w-4 text-yellow-600"}),s.jsx(M,{className:"text-sm font-medium",children:"Suggestions prdfinies"})]}),s.jsx($,{variant:"ghost",size:"sm",onClick:()=>P(!A),children:A?s.jsx(Ws,{className:"h-4 w-4"}):s.jsx(R0,{className:"h-4 w-4"})})]}),A&&s.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Charges mensuelles"}),s.jsx("div",{className:"grid grid-cols-1 gap-2",children:T.monthly.map(ee=>s.jsx($,{variant:"outline",size:"sm",className:"justify-start text-left h-auto p-2",onClick:()=>ge(ee),children:s.jsxs("div",{className:"flex justify-between items-center w-full",children:[s.jsx("span",{className:"text-sm",children:ee.description}),s.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:[ee.amount," ",h.currency]})]})},ee.id))})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Charges annuelles"}),s.jsx("div",{className:"grid grid-cols-1 gap-2",children:T.annual.map(ee=>s.jsx($,{variant:"outline",size:"sm",className:"justify-start text-left h-auto p-2",onClick:()=>ge(ee),children:s.jsxs("div",{className:"flex justify-between items-center w-full",children:[s.jsx("span",{className:"text-sm",children:ee.description}),s.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:[ee.amount," ",h.currency]})]})},ee.id))})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Charges occasionnelles"}),s.jsx("div",{className:"grid grid-cols-1 gap-2",children:T.occasional.map(ee=>s.jsx($,{variant:"outline",size:"sm",className:"justify-start text-left h-auto p-2",onClick:()=>ge(ee),children:s.jsxs("div",{className:"flex justify-between items-center w-full",children:[s.jsx("span",{className:"text-sm",children:ee.description}),s.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:[ee.amount," ",h.currency]})]})},ee.id))})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(M,{htmlFor:"type",children:"Type"}),s.jsxs(_e,{value:W.type,onValueChange:ee=>Y({...W,type:ee}),children:[s.jsx(Ne,{children:s.jsx(Ce,{})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"revenue",children:"Recette"}),s.jsx(Q,{value:"expense",children:"Charge"})]})]})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"frequency",children:"Frquence"}),s.jsxs(_e,{value:W.frequency,onValueChange:ee=>Y({...W,frequency:ee}),children:[s.jsx(Ne,{children:s.jsx(Ce,{})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"monthly",children:"Mensuel"}),s.jsx(Q,{value:"annual",children:"Annuel"}),s.jsx(Q,{value:"occasional",children:"Occasionnel"})]})]})]})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"description",children:"Description"}),s.jsx(se,{id:"description",value:W.description,onChange:ee=>Y({...W,description:ee.target.value}),placeholder:"Ex: Salaire employ, Loyer, etc."})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs(M,{htmlFor:"amount",children:["Montant (",h.currency,")"]}),s.jsx(se,{id:"amount",type:"number",step:"0.01",value:W.amount,onChange:ee=>Y({...W,amount:ee.target.value}),placeholder:"0.00"})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"date",children:"Date"}),s.jsx(se,{id:"date",type:"date",value:W.date,onChange:ee=>Y({...W,date:ee.target.value})})]})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"source",children:"Source"}),s.jsxs(_e,{value:W.source,onValueChange:ee=>Y({...W,source:ee}),children:[s.jsx(Ne,{children:s.jsx(Ce,{})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"salary",children:"Salaire"}),s.jsx(Q,{value:"rent",children:"Loyer"}),s.jsx(Q,{value:"tax",children:"Impts"}),s.jsx(Q,{value:"insurance",children:"Assurance"}),s.jsx(Q,{value:"other",children:"Autre"})]})]})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"notes",children:"Notes (optionnel)"}),s.jsx(Ke,{id:"notes",value:W.notes,onChange:ee=>Y({...W,notes:ee.target.value}),placeholder:"Informations supplmentaires..."})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx($,{variant:"outline",onClick:()=>S(!1),children:"Annuler"}),s.jsx($,{onClick:le,children:j?"Modifier":"Ajouter"})]})]})]})]})})]}),s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsxs(ye,{className:"flex items-center gap-2",children:[s.jsx(Ze,{className:"h-5 w-5"}),"Priode d'analyse"]})}),s.jsx(oe,{children:s.jsxs("div",{className:"flex gap-4 items-end",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx($,{variant:f==="day"?"default":"outline",onClick:()=>O("day"),size:"sm",children:"Ce jour"}),s.jsx($,{variant:f==="month"?"default":"outline",onClick:()=>O("month"),size:"sm",children:"Ce mois"}),s.jsx($,{variant:f==="quarter"?"default":"outline",onClick:()=>O("quarter"),size:"sm",children:"Ce trimestre"}),s.jsx($,{variant:f==="year"?"default":"outline",onClick:()=>O("year"),size:"sm",children:"Cette anne"})]}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx(M,{htmlFor:"startDate",children:"Du"}),s.jsx(se,{id:"startDate",type:"date",value:g,onChange:ee=>p(ee.target.value),className:"w-40"}),s.jsx(M,{htmlFor:"endDate",children:"Au"}),s.jsx(se,{id:"endDate",type:"date",value:v,onChange:ee=>y(ee.target.value),className:"w-40"})]})]})})]}),C&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs(ie,{children:[s.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ye,{className:"text-sm font-medium",children:"Total Recettes"}),s.jsx(Rn,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(oe,{children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:ve(C.totalRevenue)}),s.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[s.jsxs("div",{children:["Consultations: ",ve(C.revenueBreakdown.consultations)]}),s.jsxs("div",{children:["Vaccinations: ",ve(C.revenueBreakdown.vaccinations)]}),s.jsxs("div",{children:["Antiparasitaires: ",ve(C.revenueBreakdown.antiparasitics)]}),s.jsxs("div",{children:["Prescriptions: ",ve(C.revenueBreakdown.prescriptions)]}),s.jsxs("div",{children:["Manuelles: ",ve(C.revenueBreakdown.manualEntries)]})]})]})]}),s.jsxs(ie,{children:[s.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ye,{className:"text-sm font-medium",children:"Total Charges"}),s.jsx(gf,{className:"h-4 w-4 text-red-600"})]}),s.jsxs(oe,{children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:ve(C.totalExpenses)}),s.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[s.jsxs("div",{children:["Achats stock: ",ve(C.expenseBreakdown.stockPurchases)]}),s.jsxs("div",{children:["Salaires: ",ve(C.expenseBreakdown.salaries)]}),s.jsxs("div",{children:["Loyer: ",ve(C.expenseBreakdown.rent)]}),s.jsxs("div",{children:["Impts: ",ve(C.expenseBreakdown.taxes)]}),s.jsxs("div",{children:["Autres: ",ve(C.expenseBreakdown.other)]})]})]})]}),s.jsxs(ie,{children:[s.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(ye,{className:"text-sm font-medium",children:"Rsultat Net"}),s.jsx(xd,{className:"h-4 w-4"})]}),s.jsxs(oe,{children:[s.jsx("div",{className:`text-2xl font-bold ${C.netIncome>=0?"text-green-600":"text-red-600"}`,children:ve(C.netIncome)}),s.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:C.netIncome>=0?"Bnfice":"Perte"})]})]})]}),s.jsxs($a,{defaultValue:"entries",className:"space-y-4",children:[s.jsxs(Zs,{children:[s.jsx(yt,{value:"entries",children:"Entres Comptables"}),s.jsx(yt,{value:"configuration",children:"Configuration"})]}),s.jsx(wt,{value:"entries",children:s.jsxs(ie,{children:[s.jsxs(xe,{children:[s.jsxs(ye,{className:"flex items-center gap-2",children:[s.jsx(ts,{className:"h-5 w-5"}),"Entres comptables automatiques et manuelles"]}),s.jsx(Fu,{children:"Entres gnres automatiquement (consultations, vaccinations, etc.) et entres manuelles ajoutes"})]}),s.jsxs(oe,{children:[s.jsxs(Kd,{children:[s.jsx(Gd,{children:s.jsxs(ea,{children:[s.jsx(ct,{children:"Date"}),s.jsx(ct,{children:"Type"}),s.jsx(ct,{children:"Description"}),s.jsx(ct,{children:"Source"}),s.jsx(ct,{children:"Frquence"}),s.jsx(ct,{children:"Montant"}),s.jsx(ct,{children:"Actions"})]})}),s.jsx(Yd,{children:re.map(ee=>s.jsxs(ea,{children:[s.jsx(ut,{children:ht(new Date(ee.date),"dd/MM/yyyy",{locale:dr})}),s.jsx(ut,{children:s.jsx(Ie,{variant:ee.type==="revenue"?"default":"destructive",children:ee.type==="revenue"?"Recette":"Charge"})}),s.jsx(ut,{children:ee.description}),s.jsx(ut,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:pe(ee.source||"other")}),s.jsx("span",{className:"text-sm",children:ee.category==="automatic"?"Automatique":"Manuel"})]})}),s.jsx(ut,{children:s.jsx(Ie,{variant:"outline",children:ee.frequency==="monthly"?"Mensuel":ee.frequency==="annual"?"Annuel":"Occasionnel"})}),s.jsxs(ut,{className:`font-medium ${ee.type==="revenue"?"text-green-600":"text-red-600"}`,children:[ee.type==="revenue"?"+":"-",ve(ee.amount)]}),s.jsx(ut,{children:ee.category==="manual"&&s.jsxs("div",{className:"flex gap-2",children:[s.jsx($,{variant:"outline",size:"sm",onClick:()=>te(ee),children:s.jsx(It,{className:"h-4 w-4"})}),s.jsx($,{variant:"outline",size:"sm",onClick:()=>ce(ee.id),children:s.jsx(Wt,{className:"h-4 w-4"})})]})})]},ee.id))})]}),re.length===0&&s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Aucune entre comptable pour cette priode"})]})]})}),s.jsx(wt,{value:"configuration",children:s.jsxs(ie,{children:[s.jsxs(xe,{children:[s.jsxs(ye,{className:"flex items-center gap-2",children:[s.jsx(R0,{className:"h-5 w-5"}),"Configuration des Suggestions"]}),s.jsx(Fu,{children:"Configurez les suggestions prdfinies pour faciliter la saisie des charges et recettes"})]}),s.jsxs(oe,{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Suggestions Mensuelles"}),s.jsxs($,{onClick:()=>{k(null),J({description:"",amount:"",type:"expense",frequency:"monthly",source:"other"}),U(!0)},children:[s.jsx(Ye,{className:"h-4 w-4 mr-2"}),"Ajouter"]})]}),s.jsx("div",{className:"grid gap-3",children:T.monthly.map(ee=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-sm font-medium",children:ee.description}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[ee.amount," ",h.currency]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx($,{variant:"outline",size:"sm",onClick:()=>G(ee),children:s.jsx(It,{className:"h-4 w-4"})}),s.jsx($,{variant:"outline",size:"sm",onClick:()=>ue(ee),children:s.jsx(Wt,{className:"h-4 w-4"})})]})]},ee.id))}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Suggestions Annuelles"}),s.jsxs($,{onClick:()=>{k(null),J({description:"",amount:"",type:"expense",frequency:"annual",source:"other"}),U(!0)},children:[s.jsx(Ye,{className:"h-4 w-4 mr-2"}),"Ajouter"]})]}),s.jsx("div",{className:"grid gap-3",children:T.annual.map(ee=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-sm font-medium",children:ee.description}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[ee.amount," ",h.currency]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx($,{variant:"outline",size:"sm",onClick:()=>G(ee),children:s.jsx(It,{className:"h-4 w-4"})}),s.jsx($,{variant:"outline",size:"sm",onClick:()=>ue(ee),children:s.jsx(Wt,{className:"h-4 w-4"})})]})]},ee.id))}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Suggestions Occasionnelles"}),s.jsxs($,{onClick:()=>{k(null),J({description:"",amount:"",type:"expense",frequency:"occasional",source:"other"}),U(!0)},children:[s.jsx(Ye,{className:"h-4 w-4 mr-2"}),"Ajouter"]})]}),s.jsx("div",{className:"grid gap-3",children:T.occasional.map(ee=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-sm font-medium",children:ee.description}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[ee.amount," ",h.currency]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx($,{variant:"outline",size:"sm",onClick:()=>G(ee),children:s.jsx(It,{className:"h-4 w-4"})}),s.jsx($,{variant:"outline",size:"sm",onClick:()=>ue(ee),children:s.jsx(Wt,{className:"h-4 w-4"})})]})]},ee.id))})]})]})})]}),s.jsx(tt,{open:z,onOpenChange:U,children:s.jsxs(et,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(nt,{children:[s.jsx(rt,{children:K?"Modifier la suggestion":"Ajouter une suggestion"}),s.jsx(At,{children:K?"Modifiez les informations de cette suggestion.":"Ajoutez une nouvelle suggestion prdfinie."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(M,{htmlFor:"suggestion-type",children:"Type"}),s.jsxs(_e,{value:D.type,onValueChange:ee=>J({...D,type:ee}),children:[s.jsx(Ne,{children:s.jsx(Ce,{})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"revenue",children:"Recette"}),s.jsx(Q,{value:"expense",children:"Charge"})]})]})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"suggestion-frequency",children:"Frquence"}),s.jsxs(_e,{value:D.frequency,onValueChange:ee=>J({...D,frequency:ee}),children:[s.jsx(Ne,{children:s.jsx(Ce,{})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"monthly",children:"Mensuel"}),s.jsx(Q,{value:"annual",children:"Annuel"}),s.jsx(Q,{value:"occasional",children:"Occasionnel"})]})]})]})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"suggestion-description",children:"Description"}),s.jsx(se,{id:"suggestion-description",value:D.description,onChange:ee=>J({...D,description:ee.target.value}),placeholder:"Ex: Salaire employ, Loyer, etc."})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs(M,{htmlFor:"suggestion-amount",children:["Montant (",h.currency,")"]}),s.jsx(se,{id:"suggestion-amount",type:"number",step:"0.01",value:D.amount,onChange:ee=>J({...D,amount:ee.target.value}),placeholder:"0.00"})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"suggestion-source",children:"Source"}),s.jsxs(_e,{value:D.source,onValueChange:ee=>J({...D,source:ee}),children:[s.jsx(Ne,{children:s.jsx(Ce,{})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"salary",children:"Salaire"}),s.jsx(Q,{value:"rent",children:"Loyer"}),s.jsx(Q,{value:"tax",children:"Impts"}),s.jsx(Q,{value:"insurance",children:"Assurance"}),s.jsx(Q,{value:"other",children:"Autre"})]})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx($,{variant:"outline",onClick:()=>U(!1),children:"Annuler"}),s.jsx($,{onClick:H,children:K?"Modifier":"Ajouter"})]})]})]})})]})},oke=()=>{const{user:e}=Sn(),{toast:t}=it(),[n,r]=b.useState([]),[a,i]=b.useState(!0),[o,l]=b.useState(null),[c,u]=b.useState(!1),[d,h]=b.useState(null),[m,f]=b.useState(""),x=async()=>{try{const{data:y,error:w}=await fe.from("user_profiles").select("*").eq("status","pending").eq("role","assistant").order("created_at",{ascending:!0});if(w)throw w;const S=y.map(j=>({...j,days_waiting:Math.floor((new Date().getTime()-new Date(j.created_at).getTime())/(1e3*60*60*24))}));r(S)}catch(y){console.error("Error fetching pending users:",y),t({title:"Erreur",description:"Impossible de charger les utilisateurs en attente.",variant:"destructive"})}finally{i(!1)}},g=async y=>{l(y);try{const{error:w}=await fe.rpc("approve_user",{user_id_param:y,approved_by_param:e==null?void 0:e.id});if(w)throw w;t({title:"Succs",description:"Utilisateur approuv avec succs."}),x()}catch(w){console.error("Error approving user:",w),t({title:"Erreur",description:"Impossible d'approuver l'utilisateur.",variant:"destructive"})}finally{l(null)}},p=async()=>{if(!(!d||!m.trim())){l(d.id);try{const{error:y}=await fe.rpc("reject_user",{user_id_param:d.id,rejected_by_param:e==null?void 0:e.id,reason_param:m});if(y)throw y;t({title:"Succs",description:"Utilisateur rejet."}),u(!1),h(null),f(""),x()}catch(y){console.error("Error rejecting user:",y),t({title:"Erreur",description:"Impossible de rejeter l'utilisateur.",variant:"destructive"})}finally{l(null)}}},v=y=>{h(y),u(!0)};return b.useEffect(()=>{x()},[]),a?s.jsx(ie,{children:s.jsx(oe,{className:"p-6",children:s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsxs(ye,{className:"flex items-center gap-2",children:[s.jsx($t,{className:"h-5 w-5"}),"Utilisateurs en attente d'approbation (",n.length,")"]})}),s.jsx(oe,{children:n.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(On,{className:"h-12 w-12 mx-auto mb-4 text-green-500"}),s.jsx("p",{children:"Aucun utilisateur en attente d'approbation"})]}):s.jsx("div",{className:"space-y-4",children:n.map(y=>s.jsx(ie,{className:"border-l-4 border-l-yellow-400",children:s.jsx(oe,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h4",{className:"font-semibold",children:y.full_name||y.username}),s.jsx(Ie,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:y.role})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(yd,{className:"h-4 w-4"}),y.email]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ze,{className:"h-4 w-4"}),"Inscrit le ",new Date(y.created_at).toLocaleDateString("fr-FR")]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx($t,{className:"h-4 w-4"}),y.days_waiting," jour",y.days_waiting>1?"s":""," d'attente"]})]}),y.days_waiting>2&&s.jsxs("div",{className:"flex items-center gap-1 text-orange-600 text-sm",children:[s.jsx(ps,{className:"h-4 w-4"}),"Attente prolonge - action recommande"]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs($,{onClick:()=>g(y.id),disabled:o===y.id,size:"sm",className:"bg-green-600 hover:bg-green-700",children:[s.jsx(uS,{className:"h-4 w-4 mr-1"}),"Approuver"]}),s.jsxs($,{onClick:()=>v(y),disabled:o===y.id,variant:"destructive",size:"sm",children:[s.jsx(Rb,{className:"h-4 w-4 mr-1"}),"Rejeter"]})]})]})})},y.id))})})]}),s.jsx(tt,{open:c,onOpenChange:u,children:s.jsxs(et,{children:[s.jsx(nt,{children:s.jsxs(rt,{className:"flex items-center gap-2",children:[s.jsx($l,{className:"h-5 w-5 text-red-500"}),"Rejeter la demande d'inscription"]})}),d&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Utilisateur:"})," ",d.full_name||d.username]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Email:"})," ",d.email]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Rle demand:"})," ",d.role]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Raison du rejet ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(Ke,{value:m,onChange:y=>f(y.target.value),placeholder:"Expliquez pourquoi cette demande est rejete...",rows:3})]})]}),s.jsxs(v3,{children:[s.jsx($,{variant:"outline",onClick:()=>u(!1),children:"Annuler"}),s.jsxs($,{variant:"destructive",onClick:p,disabled:!m.trim()||o===(d==null?void 0:d.id),children:[s.jsx(Rb,{className:"h-4 w-4 mr-1"}),"Rejeter dfinitivement"]})]})]})})]})},lke=()=>{var Y;const{user:e}=Sn(),[t,n]=b.useState([]),[r,a]=b.useState([]),[i,o]=b.useState(null),[l,c]=b.useState(!0),[u,d]=b.useState("approvals"),[h,m]=b.useState(""),[f,x]=b.useState("all"),[g,p]=b.useState("all"),[v,y]=b.useState(null),[w,S]=b.useState(!1),[j,N]=b.useState(!1),[C,_]=b.useState(""),A={can_manage_clients:!0,can_manage_animals:!0,can_create_consultations:!0,can_view_reports:!1,can_manage_stock:!1,can_manage_accounting:!1,can_manage_farms:!1},[P,T]=b.useState(A);b.useEffect(()=>{var V;if(((V=e==null?void 0:e.profile)==null?void 0:V.role)!=="admin"){ua({title:"Accs refus",description:"Vous n'avez pas les permissions pour accder au panneau d'administration.",variant:"destructive"});return}E(),I(),R()},[e]);const E=async()=>{try{const{data:V,error:O}=await fe.from("admin_dashboard_stats").select("*").single();if(O&&O.code!=="PGRST116")throw O;o(V)}catch(V){console.error("Error fetching admin stats:",V)}},I=async()=>{try{const{data:V,error:O}=await fe.from("user_profiles").select("*").order("created_at",{ascending:!1});if(O)throw O;n(V||[]),c(!1)}catch(V){console.error("Error fetching users:",V),c(!1)}},R=async()=>{try{const{data:V,error:O}=await fe.from("user_activity_logs").select(`
          *,
          user_profile:user_profiles(full_name, email)
        `).order("created_at",{ascending:!1}).limit(50);if(O)throw O;a(V||[])}catch(V){console.error("Error fetching activity logs:",V)}},z=async V=>{try{const{error:O}=await fe.rpc("approve_user",{user_id_param:V,approved_by_param:e==null?void 0:e.id});if(O)throw O;ua({title:"Succs",description:"Utilisateur approuv avec succs."}),I(),E()}catch(O){console.error("Error approving user:",O),ua({title:"Erreur",description:"Impossible d'approuver l'utilisateur.",variant:"destructive"})}},U=async(V,O)=>{try{const{error:le}=await fe.rpc("reject_user",{user_id_param:V,rejected_by_param:e==null?void 0:e.id,reason_param:O});if(le)throw le;ua({title:"Succs",description:"Utilisateur rejet avec succs."}),_(""),I(),E()}catch(le){console.error("Error rejecting user:",le),ua({title:"Erreur",description:"Impossible de rejeter l'utilisateur.",variant:"destructive"})}},K=async(V,O)=>{try{const{error:le}=await fe.rpc("update_user_permissions",{user_id_param:V,permissions_param:O,updated_by_param:e==null?void 0:e.id});if(le)throw le;ua({title:"Succs",description:"Permissions mises  jour avec succs."}),N(!1),I()}catch(le){console.error("Error updating permissions:",le),ua({title:"Erreur",description:"Impossible de mettre  jour les permissions.",variant:"destructive"})}},k=async V=>{try{const{error:O}=await fe.from("user_profiles").update({status:"suspended",updated_at:new Date().toISOString()}).eq("id",V);if(O)throw O;ua({title:"Succs",description:"Utilisateur suspendu avec succs."}),I(),E()}catch(O){console.error("Error suspending user:",O),ua({title:"Erreur",description:"Impossible de suspendre l'utilisateur.",variant:"destructive"})}},D=V=>{const le={pending:{color:"bg-yellow-100 text-yellow-800",label:"En attente",icon:$t},approved:{color:"bg-green-100 text-green-800",label:"Approuv",icon:On},rejected:{color:"bg-red-100 text-red-800",label:"Rejet",icon:$l},suspended:{color:"bg-gray-100 text-gray-800",label:"Suspendu",icon:pn}}[V]||{color:"bg-gray-100 text-gray-800",label:V,icon:$t},te=le.icon;return s.jsxs(Ie,{className:le.color,variant:"secondary",children:[s.jsx(te,{className:"h-3 w-3 mr-1"}),le.label]})},J=V=>{const le={admin:{color:"bg-purple-100 text-purple-800",label:"Administrateur"},assistant:{color:"bg-blue-100 text-blue-800",label:"Assistant"}}[V]||{color:"bg-gray-100 text-gray-800",label:V};return s.jsx(Ie,{className:le.color,variant:"secondary",children:le.label})},W=t.filter(V=>{var ce,ge,H;if(V.role!=="assistant")return!1;const O=((ce=V.full_name)==null?void 0:ce.toLowerCase().includes(h.toLowerCase()))||((ge=V.email)==null?void 0:ge.toLowerCase().includes(h.toLowerCase()))||((H=V.username)==null?void 0:H.toLowerCase().includes(h.toLowerCase())),le=f==="all"||V.status===f,te=g==="all"||V.role===g;return O&&le&&te});return l?s.jsx("div",{className:"flex justify-center items-center h-64",children:"Chargement..."}):((Y=e==null?void 0:e.profile)==null?void 0:Y.role)!=="admin"?s.jsx("div",{className:"container mx-auto px-4 py-6",children:s.jsxs(zu,{children:[s.jsx(pn,{className:"h-4 w-4"}),s.jsx(Bu,{children:"Vous n'avez pas les permissions pour accder au panneau d'administration."})]})}):s.jsxs("div",{className:"container mx-auto px-4 py-6",children:[s.jsx("div",{className:"flex justify-between items-center mb-6",children:s.jsx("h1",{className:"text-2xl font-bold",children:"Panneau d'Administration"})}),s.jsxs($a,{value:u,onValueChange:d,className:"space-y-4",children:[s.jsxs(Zs,{children:[s.jsx(yt,{value:"approvals",children:"Approbations en attente"}),s.jsx(yt,{value:"users",children:"Assistants"}),s.jsx(yt,{value:"activity",children:"Activit"})]}),s.jsx(wt,{value:"approvals",className:"space-y-4",children:s.jsx(oke,{})}),s.jsxs(wt,{value:"users",className:"space-y-4",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("div",{className:"flex gap-4 items-center",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Si,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx(se,{placeholder:"Rechercher un utilisateur...",value:h,onChange:V=>m(V.target.value),className:"pl-10 w-64"})]}),s.jsxs(_e,{value:f,onValueChange:x,children:[s.jsxs(Ne,{className:"w-48",children:[s.jsx(Og,{className:"h-4 w-4 mr-2"}),s.jsx(Ce,{placeholder:"Filtrer par statut"})]}),s.jsxs(Se,{children:[s.jsx(Q,{value:"all",children:"Tous les statuts"}),s.jsx(Q,{value:"pending",children:"En attente"}),s.jsx(Q,{value:"approved",children:"Approuvs"}),s.jsx(Q,{value:"rejected",children:"Rejets"}),s.jsx(Q,{value:"suspended",children:"Suspendus"})]})]}),s.jsxs(_e,{value:g,onValueChange:p,children:[s.jsxs(Ne,{className:"w-48",children:[s.jsx(Og,{className:"h-4 w-4 mr-2"}),s.jsx(Ce,{placeholder:"Filtrer par rle"})]}),s.jsxs(Se,{children:[s.jsx(Q,{value:"all",children:"Tous les rles"}),s.jsx(Q,{value:"admin",children:"Administrateur"}),s.jsx(Q,{value:"assistant",children:"Assistant"})]})]})]})}),s.jsx(ie,{children:s.jsx(oe,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"border-b",children:s.jsxs("tr",{className:"text-left",children:[s.jsx("th",{className:"p-4",children:"Utilisateur"}),s.jsx("th",{className:"p-4",children:"Rle"}),s.jsx("th",{className:"p-4",children:"Statut"}),s.jsx("th",{className:"p-4",children:"Inscrit le"}),s.jsx("th",{className:"p-4",children:"Dernire connexion"}),s.jsx("th",{className:"p-4",children:"Actions"})]})}),s.jsx("tbody",{children:W.map(V=>s.jsxs("tr",{className:"border-b",children:[s.jsx("td",{className:"p-4",children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:V.full_name||V.username}),s.jsx("p",{className:"text-sm text-muted-foreground",children:V.email})]})}),s.jsx("td",{className:"p-4",children:J(V.role)}),s.jsx("td",{className:"p-4",children:D(V.status)}),s.jsx("td",{className:"p-4",children:new Date(V.created_at).toLocaleDateString()}),s.jsx("td",{className:"p-4",children:V.last_login?new Date(V.last_login).toLocaleDateString():"Jamais"}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex gap-2",children:[V.status==="pending"&&s.jsxs(s.Fragment,{children:[s.jsxs($,{size:"sm",variant:"outline",onClick:()=>z(V.id),children:[s.jsx(uS,{className:"h-4 w-4 mr-1"}),"Approuver"]}),s.jsxs($,{size:"sm",variant:"outline",onClick:()=>{const O=prompt("Raison du rejet:");O&&U(V.id,O)},children:[s.jsx(Rb,{className:"h-4 w-4 mr-1"}),"Rejeter"]})]}),V.status==="approved"&&s.jsxs(s.Fragment,{children:[s.jsxs($,{size:"sm",variant:"outline",onClick:()=>{y(V),T({...A,...V.permissions}),N(!0)},children:[s.jsx(It,{className:"h-4 w-4 mr-1"}),"Permissions"]}),s.jsxs($,{size:"sm",variant:"outline",onClick:()=>k(V.id),children:[s.jsx(pn,{className:"h-4 w-4 mr-1"}),"Suspendre"]})]}),s.jsxs($,{size:"sm",variant:"outline",onClick:()=>{y(V),S(!0)},children:[s.jsx($n,{className:"h-4 w-4 mr-1"}),"Voir"]})]})})]},V.id))})]})})})})]}),s.jsxs(wt,{value:"activity",className:"space-y-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Journal d'activit"}),s.jsx(ie,{children:s.jsx(oe,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"border-b",children:s.jsxs("tr",{className:"text-left",children:[s.jsx("th",{className:"p-4",children:"Date"}),s.jsx("th",{className:"p-4",children:"Utilisateur"}),s.jsx("th",{className:"p-4",children:"Action"}),s.jsx("th",{className:"p-4",children:"Ressource"}),s.jsx("th",{className:"p-4",children:"Dtails"})]})}),s.jsx("tbody",{children:r.map(V=>{var O,le;return s.jsxs("tr",{className:"border-b",children:[s.jsx("td",{className:"p-4",children:new Date(V.created_at).toLocaleString()}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:(O=V.user_profile)==null?void 0:O.full_name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:(le=V.user_profile)==null?void 0:le.email})]})}),s.jsx("td",{className:"p-4",children:s.jsx(Ie,{variant:"outline",children:V.action})}),s.jsx("td",{className:"p-4",children:V.resource_type}),s.jsx("td",{className:"p-4",children:s.jsx("div",{className:"text-sm text-muted-foreground max-w-xs truncate",children:JSON.stringify(V.details)})})]},V.id)})})]})})})})]})]}),j&&v&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs(ie,{className:"w-full max-w-2xl mx-4",children:[s.jsx(xe,{children:s.jsxs(ye,{children:["Grer les permissions - ",v.full_name]})}),s.jsxs(oe,{className:"space-y-4",children:[s.jsx("div",{className:"grid grid-cols-1 gap-4",children:Object.entries(P).map(([V,O])=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(M,{htmlFor:V,className:"text-sm font-medium",children:V.replace("can_","").replace("_"," ").toUpperCase()}),s.jsx("input",{type:"checkbox",id:V,checked:O,onChange:le=>T({...P,[V]:le.target.checked})})]},V))}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx($,{variant:"outline",onClick:()=>{N(!1),y(null)},children:"Annuler"}),s.jsx($,{onClick:()=>K(v.id,P),children:"Sauvegarder"})]})]})]})}),w&&v&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs(ie,{className:"w-full max-w-2xl mx-4",children:[s.jsx(xe,{children:s.jsx(ye,{children:"Dtails de l'utilisateur"})}),s.jsxs(oe,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(M,{children:"Nom complet"}),s.jsx("p",{className:"font-medium",children:v.full_name||"Non renseign"})]}),s.jsxs("div",{children:[s.jsx(M,{children:"Email"}),s.jsx("p",{className:"font-medium",children:v.email})]}),s.jsxs("div",{children:[s.jsx(M,{children:"Nom d'utilisateur"}),s.jsx("p",{className:"font-medium",children:v.username})]}),s.jsxs("div",{children:[s.jsx(M,{children:"Rle"}),s.jsx("div",{children:J(v.role)})]}),s.jsxs("div",{children:[s.jsx(M,{children:"Statut"}),s.jsx("div",{children:D(v.status)})]}),s.jsxs("div",{children:[s.jsx(M,{children:"Date d'inscription"}),s.jsx("p",{className:"font-medium",children:new Date(v.created_at).toLocaleDateString()})]})]}),v.rejection_reason&&s.jsxs("div",{children:[s.jsx(M,{children:"Raison du rejet"}),s.jsx("p",{className:"text-red-600",children:v.rejection_reason})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx($,{variant:"outline",onClick:()=>{S(!1),y(null)},children:"Fermer"})})]})]})})]})},cke=()=>{const{clients:e,consultations:t,vaccinations:n,antiparasitics:r,appointments:a,addConsultation:i,addVaccination:o,addAntiparasitic:l,updateClientStats:c}=Fa(),u=()=>{if(e.length>0){const f=e[0],x=f.pets[0];x&&i({clientId:f.id,clientName:f.name,petId:x.id,petName:x.name,date:new Date().toISOString().split("T")[0],symptoms:"Test consultation",diagnosis:"Test diagnosis",treatment:"Test treatment",cost:"50",notes:"Test consultation for stats update",photos:[]})}},d=()=>{if(e.length>0){const f=e[0],x=f.pets[0];x&&o({clientId:f.id,clientName:f.name,petId:x.id,petName:x.name,vaccineName:"Test Vaccine",vaccineType:"Test Type",dateGiven:new Date().toISOString().split("T")[0],nextDueDate:new Date(Date.now()+365*24*60*60*1e3).toISOString().split("T")[0],veterinarian:"Dr. Test",cost:"30",notes:"Test vaccination for stats update",status:"completed"})}},h=()=>{if(e.length>0){const f=e[0],x=f.pets[0];x&&l({clientId:f.id,clientName:f.name,petId:x.id,petName:x.name,productName:"Test Product",productType:"Test Type",dateGiven:new Date().toISOString().split("T")[0],nextDueDate:new Date(Date.now()+90*24*60*60*1e3).toISOString().split("T")[0],targetParasites:"Test Parasites",veterinarian:"Dr. Test",cost:"25",notes:"Test antiparasitic for stats update",status:"completed"})}},m=()=>{e.length>0&&e.forEach(f=>{c(f.id)})};return s.jsxs("div",{className:"container mx-auto px-6 py-8 space-y-6",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Test des Statistiques des Clients"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsx(ye,{className:"text-lg",children:"Actions de Test"})}),s.jsxs(oe,{className:"space-y-3",children:[s.jsxs($,{onClick:u,className:"w-full",children:[s.jsx(Ye,{className:"h-4 w-4 mr-2"}),"Ajouter Consultation Test"]}),s.jsxs($,{onClick:d,className:"w-full",children:[s.jsx(Ye,{className:"h-4 w-4 mr-2"}),"Ajouter Vaccination Test"]}),s.jsxs($,{onClick:h,className:"w-full",children:[s.jsx(Ye,{className:"h-4 w-4 mr-2"}),"Ajouter Antiparasite Test"]}),s.jsx($,{onClick:m,variant:"outline",className:"w-full",children:"Mettre  jour Stats"})]})]}),s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsx(ye,{className:"text-lg",children:"Statistiques Globales"})}),s.jsxs(oe,{className:"space-y-2",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Clients:"})," ",e.length]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Consultations:"})," ",t.length]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Vaccinations:"})," ",n.length]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Antiparasites:"})," ",r.length]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Rendez-vous:"})," ",a.length]})]})]}),s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsx(ye,{className:"text-lg",children:"Dtails des Clients"})}),s.jsx(oe,{className:"space-y-3",children:e.map(f=>s.jsxs("div",{className:"border-b pb-2",children:[s.jsx("p",{className:"font-medium",children:f.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Total visites: ",f.totalVisits," | Dernire visite: ",new Date(f.lastVisit).toLocaleDateString("fr-FR")]})]},f.id))})]})]})]})},uke=()=>s.jsx(YS,{children:s.jsx(cke,{})}),dke=()=>{const{clients:e,consultations:t,vaccinations:n,antiparasitics:r,appointments:a,addConsultation:i,addVaccination:o,addAntiparasitic:l,updateClientStats:c}=Fa(),u=()=>{if(e.length>0){const f=e[0],x=f.pets[0];x&&i({clientId:f.id,clientName:f.name,petId:x.id,petName:x.name,date:new Date().toISOString().split("T")[0],symptoms:"Test consultation",diagnosis:"Test diagnosis",treatment:"Test treatment",cost:"50",notes:"Test consultation for stats update",photos:[]})}},d=()=>{if(e.length>0){const f=e[0],x=f.pets[0];x&&o({clientId:f.id,clientName:f.name,petId:x.id,petName:x.name,vaccineName:"Test Vaccine",vaccineType:"Test Type",dateGiven:new Date().toISOString().split("T")[0],nextDueDate:new Date(Date.now()+365*24*60*60*1e3).toISOString().split("T")[0],veterinarian:"Dr. Test",cost:"30",notes:"Test vaccination for stats update",status:"completed"})}},h=()=>{if(e.length>0){const f=e[0],x=f.pets[0];x&&l({clientId:f.id,clientName:f.name,petId:x.id,petName:x.name,productName:"Test Product",productType:"Test Type",dateGiven:new Date().toISOString().split("T")[0],nextDueDate:new Date(Date.now()+90*24*60*60*1e3).toISOString().split("T")[0],targetParasites:"Test Parasites",veterinarian:"Dr. Test",cost:"25",notes:"Test antiparasitic for stats update",status:"completed"})}},m=()=>{e.length>0&&e.forEach(f=>{c(f.id)})};return s.jsxs("div",{className:"container mx-auto px-6 py-8 space-y-6",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Test Simple des Statistiques"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsx(ye,{className:"text-lg",children:"Actions de Test"})}),s.jsxs(oe,{className:"space-y-3",children:[s.jsxs($,{onClick:u,className:"w-full",children:[s.jsx(Ye,{className:"h-4 w-4 mr-2"}),"Ajouter Consultation Test"]}),s.jsxs($,{onClick:d,className:"w-full",children:[s.jsx(Ye,{className:"h-4 w-4 mr-2"}),"Ajouter Vaccination Test"]}),s.jsxs($,{onClick:h,className:"w-full",children:[s.jsx(Ye,{className:"h-4 w-4 mr-2"}),"Ajouter Antiparasite Test"]}),s.jsx($,{onClick:m,variant:"outline",className:"w-full",children:"Mettre  jour Stats"})]})]}),s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsx(ye,{className:"text-lg",children:"Statistiques Globales"})}),s.jsxs(oe,{className:"space-y-2",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Clients:"})," ",e.length]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Consultations:"})," ",t.length]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Vaccinations:"})," ",n.length]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Antiparasites:"})," ",r.length]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Rendez-vous:"})," ",a.length]})]})]}),s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsx(ye,{className:"text-lg",children:"Dtails des Clients"})}),s.jsx(oe,{className:"space-y-3",children:e.map(f=>s.jsxs("div",{className:"border-b pb-2",children:[s.jsx("p",{className:"font-medium",children:f.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Total visites: ",f.totalVisits," | Dernire visite: ",new Date(f.lastVisit).toLocaleDateString("fr-FR")]})]},f.id))})]})]})]})},hke=()=>s.jsx(YS,{children:s.jsx(dke,{})}),fke=()=>{const e=Mo();return b.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),s.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),s.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})};function mke(){const{user:e,logout:t}=Sn(),{toast:n}=it();if(!e)return null;const r=l=>l?l.split(" ").map(c=>c.charAt(0)).join("").toUpperCase().slice(0,2):e.profile.username.charAt(0).toUpperCase(),a=l=>{switch(l){case"admin":return"Administrateur";case"assistant":return"Assistant";default:return"Utilisateur"}},i=l=>{switch(l){case"admin":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"assistant":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"}},o=async()=>{await t(),n({title:"Dconnexion russie",description:"Vous avez t dconnect avec succs."})};return s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsxs(ye,{className:"flex items-center gap-2",children:[s.jsx(Kn,{className:"h-5 w-5"}),"Profil Utilisateur"]})}),s.jsxs(oe,{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(er,{className:"h-16 w-16",children:s.jsx(tr,{className:"bg-primary text-primary-foreground text-lg",children:r(e.profile.full_name||e.profile.username)})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold",children:e.profile.full_name||e.profile.username}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx(yd,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:e.email})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx(Kn,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:["@",e.profile.username]})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.jsx(Jn,{className:"h-4 w-4 text-muted-foreground"}),s.jsx(Ie,{className:i(e.profile.role),children:a(e.profile.role)})]})]})]}),s.jsx("div",{className:"border-t pt-4",children:s.jsxs($,{variant:"outline",onClick:o,className:"w-full gap-2 text-red-600 hover:text-red-700 hover:bg-red-50",children:[s.jsx(oS,{className:"h-4 w-4"}),"Se dconnecter"]})})]})]})}const $w=[{key:"animals",label:"Animaux",description:"Configuration des espces, races et couleurs"},{key:"clients",label:"Clients",description:"Types de clients et paramtres associs"},{key:"consultations",label:"Consultations",description:"Types de consultations disponibles"},{key:"appointments",label:"Rendez-vous",description:"Types de rendez-vous et configurations"},{key:"medications",label:"Mdicaments",description:"Catgories de mdicaments"},{key:"vaccinations",label:"Vaccinations",description:"Types de vaccinations disponibles"},{key:"parasites",label:"Parasites",description:"Types de parasites et traitements"},{key:"farms",label:"Fermes",description:"Types de fermes et configurations"},{key:"payments",label:"Paiements",description:"Mthodes de paiement acceptes"}],pke=()=>{var N,C;const[e,t]=b.useState("animals"),[n,r]=b.useState({}),[a,i]=b.useState(!1),[o,l]=b.useState({key:"",description:"",value:""}),{toast:c}=it(),{data:u,isLoading:d}=nte(e),h=cL(),m=ote(),{initializeDefaults:f,isLoading:x}=dte();b.useEffect(()=>{if(u){const _={};u.forEach(A=>{_[A.setting_key]=A.setting_value}),r(_)}},[u]);const g=async()=>{try{await f(),c({title:"Paramtres initialiss",description:"Les paramtres par dfaut ont t chargs avec succs"})}catch{c({title:"Erreur",description:"Impossible d'initialiser les paramtres par dfaut",variant:"destructive"})}},p=async _=>{try{const A=n[_];await h.mutateAsync({category:e,key:_,value:A,description:`Configuration ${_} pour ${e}`}),c({title:"Paramtre sauvegard",description:`Le paramtre ${_} a t mis  jour`})}catch{c({title:"Erreur",description:"Impossible de sauvegarder le paramtre",variant:"destructive"})}},v=async _=>{if(confirm(`tes-vous sr de vouloir supprimer le paramtre ${_} ?`))try{await m.mutateAsync({category:e,key:_}),c({title:"Paramtre supprim",description:`Le paramtre ${_} a t supprim`})}catch{c({title:"Erreur",description:"Impossible de supprimer le paramtre",variant:"destructive"})}},y=async(_,A)=>{if(!A.trim())return;const P=n[_]||[],T=Array.isArray(P)?[...P,A.trim()]:[P,A.trim()];r(E=>({...E,[_]:T}));try{await h.mutateAsync({category:e,key:_,value:T,description:`Configuration ${_} pour ${e}`}),c({title:" Valeur ajoute",description:"La valeur a t ajoute et sauvegarde"})}catch{c({title:"Erreur",description:"Impossible de sauvegarder la valeur",variant:"destructive"})}},w=async(_,A)=>{const P=n[_]||[],T=Array.isArray(P)?P.filter(E=>E!==A):[];r(E=>({...E,[_]:T}));try{await h.mutateAsync({category:e,key:_,value:T,description:`Configuration ${_} pour ${e}`}),c({title:" Valeur supprime",description:"La valeur a t supprime et les changements sauvegards"})}catch{c({title:"Erreur",description:"Impossible de sauvegarder les changements",variant:"destructive"})}},S=async()=>{if(!o.key.trim()){c({title:"Erreur",description:"Le nom du paramtre est obligatoire",variant:"destructive"});return}try{const _=o.value.includes(",")?o.value.split(",").map(A=>A.trim()):o.value;await h.mutateAsync({category:e,key:o.key,value:_,description:o.description||`Paramtre personnalis ${o.key}`}),i(!1),l({key:"",description:"",value:""}),c({title:"Paramtre ajout",description:`Le paramtre ${o.key} a t cr`})}catch{c({title:"Erreur",description:"Impossible de crer le paramtre",variant:"destructive"})}},j=(_,A)=>Array.isArray(A)?s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"flex flex-wrap gap-2",children:A.map((P,T)=>s.jsxs(Ie,{variant:"secondary",className:"flex items-center gap-1",children:[P,s.jsx(Ws,{className:"h-3 w-3 cursor-pointer",onClick:()=>w(_,P)})]},T))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(se,{placeholder:"Ajouter une valeur...",onKeyPress:P=>{P.key==="Enter"&&(y(_,P.target.value),P.target.value="")}}),s.jsx($,{size:"sm",onClick:P=>{const T=P.target.previousElementSibling;y(_,T.value),T.value=""},children:s.jsx(Ye,{className:"h-4 w-4"})})]})]}):typeof A=="object"?s.jsx(Ke,{value:JSON.stringify(A,null,2),onChange:P=>{try{const T=JSON.parse(P.target.value);r(E=>({...E,[_]:T}))}catch{}},rows:10,className:"font-mono text-sm"}):s.jsx(se,{value:A||"",onChange:P=>r(T=>({...T,[_]:P.target.value}))});return d?s.jsx("div",{className:"flex justify-center p-8",children:"Chargement..."}):s.jsxs("div",{className:"space-y-6 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(lS,{className:"h-8 w-8"}),"Gestion des paramtres"]}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Configurez les valeurs utilises dans toute l'application"})]}),s.jsx($,{onClick:g,disabled:x,children:x?"Initialisation...":"Charger les valeurs par dfaut"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[s.jsxs(ie,{className:"lg:col-span-1",children:[s.jsx(xe,{children:s.jsx(ye,{children:"Catgories"})}),s.jsx(oe,{className:"space-y-2",children:$w.map(_=>s.jsx($,{variant:e===_.key?"default":"ghost",className:"w-full justify-start",onClick:()=>t(_.key),children:_.label},_.key))})]}),s.jsxs(ie,{className:"lg:col-span-3",children:[s.jsx(xe,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(ye,{children:(N=$w.find(_=>_.key===e))==null?void 0:N.label}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:(C=$w.find(_=>_.key===e))==null?void 0:C.description})]}),s.jsxs(tt,{open:a,onOpenChange:i,children:[s.jsx(Vx,{asChild:!0,children:s.jsxs($,{children:[s.jsx(Ye,{className:"h-4 w-4 mr-2"}),"Ajouter un paramtre"]})}),s.jsxs(et,{children:[s.jsx(nt,{children:s.jsx(rt,{children:"Nouveau paramtre"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(M,{htmlFor:"key",children:"Nom du paramtre"}),s.jsx(se,{id:"key",value:o.key,onChange:_=>l(A=>({...A,key:_.target.value})),placeholder:"ex: types, categories..."})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"description",children:"Description"}),s.jsx(se,{id:"description",value:o.description,onChange:_=>l(A=>({...A,description:_.target.value})),placeholder:"Description du paramtre"})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"value",children:"Valeurs (spares par des virgules)"}),s.jsx(Ke,{id:"value",value:o.value,onChange:_=>l(A=>({...A,value:_.target.value})),placeholder:"Valeur1, Valeur2, Valeur3...",rows:4})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx($,{onClick:S,className:"flex-1",children:"Crer"}),s.jsx($,{variant:"outline",onClick:()=>i(!1),children:"Annuler"})]})]})]})]})]})}),s.jsx(oe,{className:"space-y-6",children:(u==null?void 0:u.length)===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx("p",{children:"Aucun paramtre configur pour cette catgorie."}),s.jsx("p",{className:"text-sm mt-2",children:'Cliquez sur "Charger les valeurs par dfaut" pour commencer.'})]}):u==null?void 0:u.map(_=>s.jsxs("div",{className:"border rounded-lg p-4 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:_.setting_key}),_.description&&s.jsx("p",{className:"text-sm text-muted-foreground",children:_.description})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx($,{size:"sm",onClick:()=>p(_.setting_key),disabled:h.isPending,children:s.jsx(nu,{className:"h-4 w-4"})}),s.jsx($,{size:"sm",variant:"outline",onClick:()=>v(_.setting_key),disabled:m.isPending,children:s.jsx(Wt,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{children:[s.jsx(M,{children:"Valeurs"}),j(_.setting_key,n[_.setting_key]||_.setting_value)]})]},_.setting_key))})]})]})]})};function gke(){const{toast:e}=it(),{settings:t,updateSettings:n}=Zt(),{theme:r,setTheme:a}=K$(),[i,o]=b.useState("general"),{data:l=[],isLoading:c}=l_(),u=lte(),{data:d,isLoading:h}=km(),m=cte(),{data:f,isLoading:x}=ite(),g=ute(),[p,v]=b.useState(!1),[y,w]=b.useState(null),[S,j]=b.useState({name:"",title:"",specialty:"",phone:"",email:"",is_active:!0}),[N,C]=b.useState(!1),[_,A]=b.useState(""),[P,T]=b.useState(!1),[E,I]=b.useState(""),[R,z]=b.useState(""),[U,K]=b.useState(!1),[k,D]=b.useState(""),[J,W]=b.useState(!1),[Y,V]=b.useState(""),O=l.length>0?l:t.veterinarians,{pets:le}=Fa();b.useEffect(()=>{const B=Array.from(new Set([...le.map(Oe=>Oe.type)])),he=Array.from(new Set([...t.species.split(",").map(Oe=>Oe.trim()),...B]));n({...t,species:he.join(", ")})},[le]);const te=(B,he)=>{n({...t,[B]:he})},ce=()=>{e({title:"Paramtres sauvegards",description:"Informations de la clinique mises  jour."})},ge=B=>{var Oe;const he=(Oe=B.target.files)==null?void 0:Oe[0];if(he){const St=new FileReader;St.onload=()=>te("logo",St.result),St.readAsDataURL(he)}},H=(B,he)=>{const Oe={...t.displayPreferences,[B]:he},St={...t,displayPreferences:Oe};n(St),e({title:"Prfrence d'affichage mise  jour",description:`${B} s'affichera maintenant en ${he==="table"?"tableau":"cartes"}`})},G=()=>{w(null),j({name:"",title:"",specialty:"",phone:"",email:"",is_active:!0}),v(!0)},ue=B=>{w(B),j({name:B.name,title:B.title,specialty:B.specialty||"",phone:B.phone||"",email:B.email||"",is_active:B.is_active}),v(!0)},re=()=>{if(!S.name||!S.title){e({title:"Erreur",description:"Nom et titre requis",variant:"destructive"});return}const B=`${S.title} ${S.name}`;let he;if(y)he=l.map(Oe=>Oe.id===y.id?{...Oe,name:B,title:S.title,specialty:S.specialty,phone:S.phone,email:S.email,is_active:S.is_active}:Oe);else{const Oe={id:`vet_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:B,title:S.title,specialty:S.specialty,phone:S.phone,email:S.email,is_active:!0};he=[...l,Oe]}u.mutate(he),e({title:"Vtrinaire enregistr"}),v(!1)},ve=B=>{if(!confirm("Supprimer ce vtrinaire ?"))return;const he=l.filter(Oe=>Oe.id!==B);u.mutate(he),e({title:"Vtrinaire supprim"})},pe=B=>{if(!B.trim()||!d)return;const he={...d,farm_types:[...d.farm_types,B.trim()]};m.mutate(he),e({title:"Type ajout",description:`${B} a t ajout aux types d'levage`}),C(!1),A("")},ee=B=>{if(!d)return;const he={...d,farm_types:d.farm_types.filter(Oe=>Oe!==B)};m.mutate(he),e({title:"Type supprim",description:`${B} a t supprim`})},Pe=B=>{if(!B.trim()||!d)return;const he={...d,animal_categories:[...d.animal_categories,B.trim()],breeds_by_category:{...d.breeds_by_category,[B.trim()]:[]}};m.mutate(he),e({title:"Catgorie ajoute",description:`${B} a t ajoute`}),T(!1),I("")},Ee=B=>{if(!d)return;const{[B]:he,...Oe}=d.breeds_by_category,St={...d,animal_categories:d.animal_categories.filter(Qe=>Qe!==B),breeds_by_category:Oe};m.mutate(St),e({title:"Catgorie supprime",description:`${B} et ses races ont t supprims`})},dt=(B,he)=>{if(!he.trim()||!d)return;const Oe={...d,breeds_by_category:{...d.breeds_by_category,[B]:[...d.breeds_by_category[B]||[],he.trim()]}};m.mutate(Oe),e({title:"Race ajoute",description:`${he} a t ajoute  ${B}`}),K(!1),D(""),z("")},Dt=(B,he)=>{if(!d)return;const Oe={...d,breeds_by_category:{...d.breeds_by_category,[B]:(d.breeds_by_category[B]||[]).filter(St=>St!==he)}};m.mutate(Oe),e({title:"Race supprime",description:`${he} a t supprime de ${B}`})},en=B=>{if(!B.trim()||!d)return;const he={...d,certification_types:[...d.certification_types,B.trim()]};m.mutate(he),e({title:"Certification ajoute",description:`${B} a t ajoute`}),W(!1),V("")},ae=B=>{if(!d)return;const he={...d,certification_types:d.certification_types.filter(Oe=>Oe!==B)};m.mutate(he),e({title:"Certification supprime",description:`${B} a t supprime`})};return s.jsxs("div",{className:"container mx-auto px-6 py-8 space-y-8",children:[s.jsxs(ie,{children:[s.jsxs(xe,{children:[s.jsx(ye,{children:"Paramtres de l'application"}),s.jsxs("div",{className:"flex items-center gap-4 mt-8 pt-8",children:[s.jsxs($,{variant:i==="general"?"default":"outline",onClick:()=>o("general"),className:"flex items-center gap-2",children:[s.jsx(LU,{className:"h-4 w-4"}),"Paramtres gnraux"]}),s.jsxs($,{variant:i==="data"?"default":"outline",onClick:()=>o("data"),className:"flex items-center gap-2",children:[s.jsx(Jn,{className:"h-4 w-4"}),"Configuration des donnes"]})]})]}),s.jsx(oe,{children:i==="data"?s.jsx(pke,{}):s.jsxs("div",{className:"grid gap-8 lg:grid-cols-3",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsx(ye,{children:"Paramtres de la Clinique"})}),s.jsxs(oe,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(M,{htmlFor:"logo",children:"Logo de la clinique"}),s.jsx(se,{id:"logo",type:"file",accept:"image/*",onChange:ge}),t.logo&&s.jsx("img",{src:t.logo,alt:"Logo",className:"h-24 mt-2"})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"clinicName",children:"Nom de la clinique"}),s.jsx(se,{id:"clinicName",value:t.clinicName,onChange:B=>te("clinicName",B.target.value)})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"address",children:"Adresse"}),s.jsx(se,{id:"address",value:t.address,onChange:B=>te("address",B.target.value)})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"phone",children:"Tlphone"}),s.jsx(se,{id:"phone",value:t.phone,onChange:B=>te("phone",B.target.value)})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"email",children:"Email"}),s.jsx(se,{id:"email",type:"email",value:t.email,onChange:B=>te("email",B.target.value)})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"website",children:"Site web"}),s.jsx(se,{id:"website",value:t.website,onChange:B=>te("website",B.target.value)})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"currency",children:"Devise"}),s.jsx(se,{id:"currency",value:t.currency,onChange:B=>te("currency",B.target.value)})]}),s.jsxs("div",{children:[s.jsxs(M,{htmlFor:"defaultConsultationPrice",children:["Prix de consultation par dfaut (",t.currency,")"]}),s.jsx(se,{id:"defaultConsultationPrice",type:"number",step:"0.01",min:"0",value:t.defaultConsultationPrice,onChange:B=>te("defaultConsultationPrice",parseFloat(B.target.value)||0)})]})]}),s.jsx("div",{className:"flex gap-2",children:s.jsx($,{onClick:ce,children:"Enregistrer"})})]})]}),s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsx(ye,{children:"Thme de l'application"})}),s.jsx(oe,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Choisissez le thme de l'application pour votre confort visuel."}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(M,{htmlFor:"theme-select",children:"Thme"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:r==="light"?"Mode clair":"Mode sombre"})]}),s.jsxs(_e,{value:r,onValueChange:B=>{a(B),e({title:"Thme mis  jour",description:`Thme chang en mode ${B==="light"?"clair":"sombre"}`})},children:[s.jsx(Ne,{className:"w-32",children:s.jsx(Ce,{})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"light",children:"Mode clair"}),s.jsx(Q,{value:"dark",children:"Mode sombre"})]})]})]})]})})]}),s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsx(ye,{children:"Prfrences d'affichage"})}),s.jsx(oe,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Choisissez comment vous souhaitez afficher les diffrentes sections par dfaut."}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(t.displayPreferences).map(([B,he])=>s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:`${B}-display`,children:B.charAt(0).toUpperCase()+B.slice(1)}),s.jsxs(_e,{value:he,onValueChange:Oe=>H(B,Oe),children:[s.jsx(Ne,{children:s.jsx(Ce,{})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"table",children:"Tableau"}),s.jsx(Q,{value:"cards",children:"Cartes"})]})]})]},B))})]})})]}),s.jsxs(ie,{children:[s.jsxs(xe,{className:"flex justify-between items-center",children:[s.jsx(ye,{children:"Vtrinaires"}),s.jsxs($,{onClick:G,className:"gap-2",children:[s.jsx(Ye,{className:"h-4 w-4"})," Ajouter"]})]}),s.jsx(oe,{className:"space-y-2",children:O.length===0?s.jsx("p",{className:"text-muted-foreground",children:"Aucun vtrinaire configur"}):O.map(B=>s.jsxs("div",{className:"flex justify-between items-center p-2 border rounded",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:B.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:B.specialty}),s.jsxs("p",{className:"text-xs",children:[B.phone," | ",B.email]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx($,{size:"sm",variant:"outline",onClick:()=>ue(B),children:s.jsx(It,{className:"h-4 w-4"})}),s.jsx($,{size:"sm",variant:"destructive",onClick:()=>ve(B.id),children:s.jsx(Wt,{className:"h-4 w-4"})})]})]},B.id))})]}),s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsx(ye,{children:"Configuration des Horaires"})}),s.jsx(oe,{className:"space-y-6",children:x?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(on,{className:"h-6 w-6 animate-spin"})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(M,{htmlFor:"workingHours",children:"Heure d'ouverture"}),s.jsx(se,{id:"workingHours",type:"time",value:(f==null?void 0:f.opening_time)||"08:00",onChange:B=>{f&&g.mutate({...f,opening_time:B.target.value})}})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"closingTime",children:"Heure de fermeture"}),s.jsx(se,{id:"closingTime",type:"time",value:(f==null?void 0:f.closing_time)||"18:00",onChange:B=>{f&&g.mutate({...f,closing_time:B.target.value})}})]})]}),s.jsxs("div",{children:[s.jsx(M,{children:"Priode djeuner"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-2",children:[s.jsxs("div",{children:[s.jsx(M,{htmlFor:"lunchStart",className:"text-xs text-muted-foreground",children:"Dbut de pause"}),s.jsx(se,{id:"lunchStart",type:"time",value:(f==null?void 0:f.lunch_break_start)||"12:00",onChange:B=>{f&&g.mutate({...f,lunch_break_start:B.target.value})}})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"lunchEnd",className:"text-xs text-muted-foreground",children:"Fin de pause"}),s.jsx(se,{id:"lunchEnd",type:"time",value:(f==null?void 0:f.lunch_break_end)||"14:00",onChange:B=>{f&&g.mutate({...f,lunch_break_end:B.target.value})}})]})]})]}),s.jsxs("div",{children:[s.jsx(M,{children:"Dure des crneaux (minutes)"}),s.jsx(se,{type:"number",value:(f==null?void 0:f.slot_duration)||30,onChange:B=>{f&&g.mutate({...f,slot_duration:parseInt(B.target.value)||30})},className:"mt-2"})]}),s.jsxs("div",{children:[s.jsx(M,{className:"mb-3 block",children:"Jours de travail"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{day:"Lundi",key:"monday"},{day:"Mardi",key:"tuesday"},{day:"Mercredi",key:"wednesday"},{day:"Jeudi",key:"thursday"},{day:"Vendredi",key:"friday"},{day:"Samedi",key:"saturday"},{day:"Dimanche",key:"sunday"}].map(B=>{var Oe;const he=((Oe=f==null?void 0:f.working_days)==null?void 0:Oe.includes(B.key))??!0;return s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(M,{htmlFor:B.day,className:"text-sm",children:B.day}),s.jsx(mr,{id:B.day,checked:he,onCheckedChange:St=>{if(f){const Qe=St?[...f.working_days||[],B.key]:(f.working_days||[]).filter(de=>de!==B.key);g.mutate({...f,working_days:Qe})}}})]},B.day)})})]})]})})]}),s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsx(ye,{children:"Gestion des Exploitations"})}),s.jsx(oe,{className:"space-y-6",children:h?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(on,{className:"h-6 w-6 animate-spin"})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx(M,{children:"Types d'levage"}),s.jsxs($,{size:"sm",variant:"outline",className:"gap-2",onClick:()=>C(!0),children:[s.jsx(Ye,{className:"h-3 w-3"})," Ajouter"]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[((d==null?void 0:d.farm_types)||[]).map(B=>s.jsxs(Ie,{variant:"secondary",className:"gap-1",children:[B,s.jsx(Ws,{className:"h-3 w-3 cursor-pointer hover:text-destructive",onClick:()=>ee(B)})]},B)),((d==null?void 0:d.farm_types)||[]).length===0&&s.jsx("p",{className:"text-sm text-muted-foreground",children:"Aucun type d'levage configur"})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx(M,{children:"Catgories d'animaux"}),s.jsxs($,{size:"sm",variant:"outline",className:"gap-2",onClick:()=>T(!0),children:[s.jsx(Ye,{className:"h-3 w-3"})," Ajouter"]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[((d==null?void 0:d.animal_categories)||[]).map(B=>s.jsxs(Ie,{variant:"secondary",className:"gap-1",children:[B,s.jsx(Ws,{className:"h-3 w-3 cursor-pointer hover:text-destructive",onClick:()=>Ee(B)})]},B)),((d==null?void 0:d.animal_categories)||[]).length===0&&s.jsx("p",{className:"text-sm text-muted-foreground",children:"Aucune catgorie configure"})]})]}),d!=null&&d.breeds_by_category&&Object.keys(d.breeds_by_category).length>0?Object.entries(d.breeds_by_category).map(([B,he])=>s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx(M,{children:B}),s.jsxs($,{size:"sm",variant:"outline",className:"gap-2",onClick:()=>{z(B),K(!0)},children:[s.jsx(Ye,{className:"h-3 w-3"})," Race"]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[(he||[]).map(Oe=>s.jsxs(Ie,{variant:"outline",className:"gap-1",children:[Oe,s.jsx(Ws,{className:"h-3 w-3 cursor-pointer hover:text-destructive",onClick:()=>Dt(B,Oe)})]},Oe)),(he||[]).length===0&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Aucune race configure pour ",B]})]})]},B)):s.jsx("div",{className:"text-sm text-muted-foreground",children:"Aucune race configure. Ajoutez des catgories d'animaux d'abord."}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx(M,{children:"Types de certifications"}),s.jsxs($,{size:"sm",variant:"outline",className:"gap-2",onClick:()=>W(!0),children:[s.jsx(Ye,{className:"h-3 w-3"})," Ajouter"]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[((d==null?void 0:d.certification_types)||[]).map(B=>s.jsxs(Ie,{variant:"secondary",className:"gap-1",children:[B,s.jsx(Ws,{className:"h-3 w-3 cursor-pointer hover:text-destructive",onClick:()=>ae(B)})]},B)),((d==null?void 0:d.certification_types)||[]).length===0&&s.jsx("p",{className:"text-sm text-muted-foreground",children:"Aucune certification configure"})]})]})]})})]})]}),s.jsx("div",{className:"space-y-6",children:s.jsx(mke,{})})]})})]}),s.jsx(tt,{open:p,onOpenChange:v,children:s.jsxs(et,{children:[s.jsxs(nt,{children:[s.jsx(rt,{children:y?"Modifier vtrinaire":"Nouveau vtrinaire"}),s.jsx(At,{children:"Nom, titre, spcialit, contact"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(M,{htmlFor:"vetName",children:"Nom complet *"}),s.jsx(se,{id:"vetName",value:S.name,onChange:B=>j(he=>({...he,name:B.target.value}))})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"vetTitle",children:"Titre *"}),s.jsx(se,{id:"vetTitle",value:S.title,onChange:B=>j(he=>({...he,title:B.target.value}))})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"vetSpec",children:"Spcialit"}),s.jsx(se,{id:"vetSpec",value:S.specialty,onChange:B=>j(he=>({...he,specialty:B.target.value}))})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"vetPhone",children:"Tlphone"}),s.jsx(se,{id:"vetPhone",value:S.phone,onChange:B=>j(he=>({...he,phone:B.target.value}))})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"vetEmail",children:"Email"}),s.jsx(se,{id:"vetEmail",type:"email",value:S.email,onChange:B=>j(he=>({...he,email:B.target.value}))})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx($,{variant:"outline",onClick:()=>v(!1),children:"Annuler"}),s.jsx($,{onClick:re,children:y?"Mettre  jour":"Crer"})]})]})]})}),s.jsx(tt,{open:N,onOpenChange:C,children:s.jsxs(et,{className:"sm:max-w-md",children:[s.jsxs(nt,{children:[s.jsx(rt,{children:"Ajouter un type d'levage"}),s.jsx(At,{children:"Ajoutez un nouveau type d'exploitation agricole"})]}),s.jsx("div",{className:"space-y-4 py-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"farmType",children:"Type d'levage *"}),s.jsx(se,{id:"farmType",placeholder:"Ex: Laitire, Viande, Avicole...",value:_,onChange:B=>A(B.target.value),onKeyDown:B=>{B.key==="Enter"&&_.trim()&&pe(_)}}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Appuyez sur Entre ou cliquez sur Ajouter"})]})}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx($,{variant:"outline",onClick:()=>{C(!1),A("")},children:"Annuler"}),s.jsxs($,{onClick:()=>pe(_),disabled:!_.trim(),children:[s.jsx(Ye,{className:"h-4 w-4 mr-2"}),"Ajouter"]})]})]})}),s.jsx(tt,{open:P,onOpenChange:T,children:s.jsxs(et,{className:"sm:max-w-md",children:[s.jsxs(nt,{children:[s.jsx(rt,{children:"Ajouter une catgorie d'animaux"}),s.jsx(At,{children:"Ajoutez une nouvelle catgorie d'animaux d'levage"})]}),s.jsx("div",{className:"space-y-4 py-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"animalCategory",children:"Catgorie *"}),s.jsx(se,{id:"animalCategory",placeholder:"Ex: Bovin, Ovin, Caprin, Volaille...",value:E,onChange:B=>I(B.target.value),onKeyDown:B=>{B.key==="Enter"&&E.trim()&&Pe(E)}}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Une section pour les races sera cre automatiquement"})]})}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx($,{variant:"outline",onClick:()=>{T(!1),I("")},children:"Annuler"}),s.jsxs($,{onClick:()=>Pe(E),disabled:!E.trim(),children:[s.jsx(Ye,{className:"h-4 w-4 mr-2"}),"Ajouter"]})]})]})}),s.jsx(tt,{open:U,onOpenChange:K,children:s.jsxs(et,{className:"sm:max-w-md",children:[s.jsxs(nt,{children:[s.jsx(rt,{children:"Ajouter une race"}),s.jsxs(At,{children:["Ajouter une race pour la catgorie: ",s.jsx("strong",{children:R})]})]}),s.jsx("div",{className:"space-y-4 py-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"breed",children:"Nom de la race *"}),s.jsx(se,{id:"breed",placeholder:"Ex: Holstein, Timahdit, Dra...",value:k,onChange:B=>D(B.target.value),onKeyDown:B=>{B.key==="Enter"&&k.trim()&&dt(R,k)}})]})}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx($,{variant:"outline",onClick:()=>{K(!1),D(""),z("")},children:"Annuler"}),s.jsxs($,{onClick:()=>dt(R,k),disabled:!k.trim(),children:[s.jsx(Ye,{className:"h-4 w-4 mr-2"}),"Ajouter"]})]})]})}),s.jsx(tt,{open:J,onOpenChange:W,children:s.jsxs(et,{className:"sm:max-w-md",children:[s.jsxs(nt,{children:[s.jsx(rt,{children:"Ajouter une certification"}),s.jsx(At,{children:"Ajoutez un nouveau type de certification agricole"})]}),s.jsx("div",{className:"space-y-4 py-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"certification",children:"Type de certification *"}),s.jsx(se,{id:"certification",placeholder:"Ex: Bio, Label Rouge, AOC, IGP...",value:Y,onChange:B=>V(B.target.value),onKeyDown:B=>{B.key==="Enter"&&Y.trim()&&en(Y)}})]})}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx($,{variant:"outline",onClick:()=>{W(!1),V("")},children:"Annuler"}),s.jsxs($,{onClick:()=>en(Y),disabled:!Y.trim(),children:[s.jsx(Ye,{className:"h-4 w-4 mr-2"}),"Ajouter"]})]})]})})]})}var vke="Separator",$O="horizontal",xke=["horizontal","vertical"],ez=b.forwardRef((e,t)=>{const{decorative:n,orientation:r=$O,...a}=e,i=yke(r)?r:$O,l=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return s.jsx(qe.div,{"data-orientation":i,...l,...a,ref:t})});ez.displayName=vke;function yke(e){return xke.includes(e)}var tz=ez;const ex=b.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},a)=>s.jsx(tz,{ref:a,decorative:n,orientation:t,className:Me("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));ex.displayName=tz.displayName;function wke(){const{user:e,logout:t,refreshProfile:n}=Sn(),{toast:r}=it(),{data:a,isLoading:i,refetch:o}=Jee(),l=Zee(),[c,u]=b.useState(!1);b.useState(!1);const[d,h]=b.useState({full_name:"",username:"",email:"",phone:"",address:"",specialty:"",experience:"",bio:"",languages:["Franais","Arabe","Anglais"]});b.useEffect(()=>{a&&e&&h(p=>({...p,full_name:a.full_name||"",username:a.username||"",email:e.email||"",phone:a.phone||"",address:a.address||"",specialty:a.specialty||"",experience:a.experience||"",bio:a.bio||""}))},[a,e]),b.useState({currentPassword:"",newPassword:"",confirmPassword:""}),b.useState({notifications:{email:!0,sms:!1,push:!0},privacy:{showEmail:!1,showPhone:!0,showAddress:!1},language:"fr",timezone:"Africa/Casablanca"});const m=async()=>{try{await l.mutateAsync({full_name:d.full_name,username:d.username,phone:d.phone,address:d.address,specialty:d.specialty,experience:d.experience,bio:d.bio}),await Promise.all([o(),n()]),r({title:"Profil mis  jour",description:"Vos informations personnelles ont t sauvegardes avec succs."}),u(!1)}catch(p){r({title:"Erreur",description:p instanceof Error?p.message:"Impossible de sauvegarder le profil.",variant:"destructive"})}},f=p=>p.split(" ").map(v=>v.charAt(0)).join("").toUpperCase().slice(0,2),x=p=>{switch(p){case"admin":return"Administrateur";case"assistant":return"Assistant";default:return"Utilisateur"}},g=p=>{switch(p){case"admin":return"bg-red-100 text-red-800";case"assistant":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return e?i?s.jsx("div",{className:"container mx-auto px-2 sm:px-4 lg:px-6 py-4 sm:py-6 lg:py-8",children:s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx(on,{className:"h-8 w-8 animate-spin"}),s.jsx("p",{className:"text-muted-foreground",children:"Chargement du profil..."})]})})}):s.jsxs("div",{className:"container mx-auto px-2 sm:px-4 lg:px-6 py-4 sm:py-6 lg:py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Mon Profil"}),s.jsx("p",{className:"text-muted-foreground text-sm sm:text-base",children:"Grez vos informations personnelles et prfrences"})]}),s.jsx("div",{className:"flex flex-col sm:flex-row gap-2",children:c?s.jsxs(s.Fragment,{children:[s.jsx($,{variant:"outline",onClick:()=>u(!1),className:"w-full sm:w-auto",children:"Annuler"}),s.jsxs($,{onClick:m,className:"gap-2 w-full sm:w-auto",disabled:l.isPending,children:[l.isPending?s.jsx(on,{className:"h-4 w-4 animate-spin"}):s.jsx(nu,{className:"h-4 w-4"}),l.isPending?"Sauvegarde...":"Sauvegarder"]})]}):s.jsxs($,{onClick:()=>u(!0),className:"gap-2 w-full sm:w-auto",children:[s.jsx(It,{className:"h-4 w-4"}),"Modifier"]})})]}),s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsxs(ye,{className:"flex items-center gap-2",children:[s.jsx(Kn,{className:"h-5 w-5"}),"Informations Personnelles"]})}),s.jsxs(oe,{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(er,{className:"h-16 w-16 sm:h-20 sm:w-20",children:s.jsx(tr,{className:"bg-primary text-primary-foreground text-lg sm:text-xl",children:f(e.profile.full_name)})}),c&&s.jsx($,{size:"sm",className:"absolute -bottom-2 -right-2 h-8 w-8 rounded-full",variant:"secondary",children:s.jsx(Tg,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[s.jsx("h3",{className:"text-lg sm:text-xl font-semibold",children:e.profile.full_name||e.profile.username}),s.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 mt-1",children:[s.jsx(yd,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:e.email})]}),s.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 mt-2",children:[s.jsx(Jn,{className:"h-4 w-4 text-muted-foreground"}),s.jsx(Ie,{className:g(e.profile.role),children:x(e.profile.role)})]})]})]}),s.jsx(ex,{}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"full_name",children:"Nom complet"}),s.jsx(se,{id:"full_name",value:d.full_name,onChange:p=>h(v=>({...v,full_name:p.target.value})),disabled:!c})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"username",children:"Nom d'utilisateur"}),s.jsx(se,{id:"username",value:d.username,onChange:p=>h(v=>({...v,username:p.target.value})),disabled:!c})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"email",children:"Email"}),s.jsx(se,{id:"email",type:"email",value:d.email,disabled:!0,className:"bg-muted"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"phone",children:"Tlphone"}),s.jsx(se,{id:"phone",value:d.phone,onChange:p=>h(v=>({...v,phone:p.target.value})),disabled:!c})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"address",children:"Adresse"}),s.jsx(se,{id:"address",value:d.address,onChange:p=>h(v=>({...v,address:p.target.value})),disabled:!c})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"specialty",children:"Spcialit"}),s.jsx(se,{id:"specialty",value:d.specialty,onChange:p=>h(v=>({...v,specialty:p.target.value})),disabled:!c})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"experience",children:"Exprience"}),s.jsx(se,{id:"experience",value:d.experience,onChange:p=>h(v=>({...v,experience:p.target.value})),disabled:!c})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"bio",children:"Biographie"}),s.jsx("textarea",{id:"bio",className:"w-full min-h-[100px] px-3 py-2 border border-input bg-background rounded-md text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:d.bio,onChange:p=>h(v=>({...v,bio:p.target.value})),disabled:!c})]})]})]})]}):null}function bke(){const{user:e}=Sn(),{toast:t}=it(),[n,r]=b.useState({twoFactorAuth:!1,sessionTimeout:30,passwordExpiry:90,loginNotifications:!0,deviceTracking:!0,autoLogout:!0}),[a,i]=b.useState({rememberMe:!0,autoLogin:!1,sessionDuration:8,maxConcurrentSessions:3}),[o,l]=b.useState({loginAlerts:!0,securityAlerts:!0,deviceAlerts:!0,emailNotifications:!0,smsNotifications:!1,pushNotifications:!0});b.useState({dataSharing:!1,analytics:!0,crashReports:!0,marketingEmails:!1,profileVisibility:"private"}),b.useState({language:"fr",timezone:"Africa/Casablanca",dateFormat:"DD/MM/YYYY",timeFormat:"24h",theme:"system"});const[c]=b.useState([{id:1,device:"MacBook Pro",browser:"Chrome",location:"Rabat, Maroc",lastActive:"Maintenant",current:!0,ip:"192.168.1.100"},{id:2,device:"iPhone 14",browser:"Safari",location:"Rabat, Maroc",lastActive:"Il y a 2 heures",current:!1,ip:"192.168.1.101"}]),u=()=>{t({title:"Paramtres de scurit sauvegards",description:"Vos paramtres de scurit ont t mis  jour."})},d=()=>{t({title:"Paramtres de session sauvegards",description:"Vos paramtres de session ont t mis  jour."})},h=()=>{t({title:"Paramtres de notification sauvegards",description:"Vos paramtres de notification ont t mis  jour."})},m=g=>{t({title:"Session termine",description:"La session a t ferme avec succs."})},f=()=>{t({title:"Toutes les sessions termines",description:"Toutes les autres sessions ont t fermes."})},x=g=>g.includes("iPhone")||g.includes("Android")?s.jsx(FU,{className:"h-4 w-4"}):g.includes("iPad")||g.includes("Tablet")?s.jsx(BU,{className:"h-4 w-4"}):s.jsx(HC,{className:"h-4 w-4"});return e?s.jsxs("div",{className:"container mx-auto px-2 sm:px-4 lg:px-6 py-4 sm:py-6 lg:py-8 space-y-6",children:[s.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Paramtres de Connexion"}),s.jsx("p",{className:"text-muted-foreground text-sm sm:text-base",children:"Grez vos paramtres de scurit et de session"})]})}),s.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsxs(ye,{className:"flex items-center gap-2",children:[s.jsx(Jn,{className:"h-5 w-5"}),"Scurit"]})}),s.jsxs(oe,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(M,{children:"Authentification  deux facteurs"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Ajoutez une couche de scurit supplmentaire"})]}),s.jsx(mr,{checked:n.twoFactorAuth,onCheckedChange:g=>r(p=>({...p,twoFactorAuth:g}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Dlai d'expiration de session (minutes)"}),s.jsxs(_e,{value:n.sessionTimeout.toString(),onValueChange:g=>r(p=>({...p,sessionTimeout:parseInt(g)})),children:[s.jsx(Ne,{children:s.jsx(Ce,{})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"15",children:"15 minutes"}),s.jsx(Q,{value:"30",children:"30 minutes"}),s.jsx(Q,{value:"60",children:"1 heure"}),s.jsx(Q,{value:"120",children:"2 heures"}),s.jsx(Q,{value:"480",children:"8 heures"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Expiration du mot de passe (jours)"}),s.jsxs(_e,{value:n.passwordExpiry.toString(),onValueChange:g=>r(p=>({...p,passwordExpiry:parseInt(g)})),children:[s.jsx(Ne,{children:s.jsx(Ce,{})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"30",children:"30 jours"}),s.jsx(Q,{value:"60",children:"60 jours"}),s.jsx(Q,{value:"90",children:"90 jours"}),s.jsx(Q,{value:"180",children:"6 mois"}),s.jsx(Q,{value:"365",children:"1 an"})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(M,{children:"Notifications de connexion"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevez des alertes pour les nouvelles connexions"})]}),s.jsx(mr,{checked:n.loginNotifications,onCheckedChange:g=>r(p=>({...p,loginNotifications:g}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(M,{children:"Suivi des appareils"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Surveillez les appareils connects"})]}),s.jsx(mr,{checked:n.deviceTracking,onCheckedChange:g=>r(p=>({...p,deviceTracking:g}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(M,{children:"Dconnexion automatique"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Dconnexion aprs inactivit"})]}),s.jsx(mr,{checked:n.autoLogout,onCheckedChange:g=>r(p=>({...p,autoLogout:g}))})]})]}),s.jsxs($,{onClick:u,className:"w-full gap-2",children:[s.jsx(nu,{className:"h-4 w-4"}),"Sauvegarder les paramtres de scurit"]})]})]}),s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsxs(ye,{className:"flex items-center gap-2",children:[s.jsx(HC,{className:"h-5 w-5"}),"Sessions Actives"]})}),s.jsxs(oe,{className:"space-y-4",children:[s.jsx("div",{className:"space-y-3",children:c.map(g=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[x(g.device),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:g.device}),g.current&&s.jsx(Ie,{variant:"secondary",className:"text-xs",children:"Actuel"})]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[g.browser,"  ",g.location]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Dernire activit: ",g.lastActive]})]})]}),!g.current&&s.jsx($,{variant:"outline",size:"sm",onClick:()=>m(g.id),children:"Terminer"})]},g.id))}),s.jsx(ex,{}),s.jsx($,{variant:"destructive",onClick:f,className:"w-full",children:"Terminer toutes les autres sessions"})]})]}),s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsxs(ye,{className:"flex items-center gap-2",children:[s.jsx($t,{className:"h-5 w-5"}),"Gestion des Sessions"]})}),s.jsxs(oe,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(M,{children:"Se souvenir de moi"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Restez connect entre les sessions"})]}),s.jsx(mr,{checked:a.rememberMe,onCheckedChange:g=>i(p=>({...p,rememberMe:g}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(M,{children:"Connexion automatique"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Connexion automatique au dmarrage"})]}),s.jsx(mr,{checked:a.autoLogin,onCheckedChange:g=>i(p=>({...p,autoLogin:g}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Dure de session (heures)"}),s.jsxs(_e,{value:a.sessionDuration.toString(),onValueChange:g=>i(p=>({...p,sessionDuration:parseInt(g)})),children:[s.jsx(Ne,{children:s.jsx(Ce,{})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"1",children:"1 heure"}),s.jsx(Q,{value:"4",children:"4 heures"}),s.jsx(Q,{value:"8",children:"8 heures"}),s.jsx(Q,{value:"12",children:"12 heures"}),s.jsx(Q,{value:"24",children:"24 heures"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Sessions simultanes maximum"}),s.jsxs(_e,{value:a.maxConcurrentSessions.toString(),onValueChange:g=>i(p=>({...p,maxConcurrentSessions:parseInt(g)})),children:[s.jsx(Ne,{children:s.jsx(Ce,{})}),s.jsxs(Se,{children:[s.jsx(Q,{value:"1",children:"1 session"}),s.jsx(Q,{value:"2",children:"2 sessions"}),s.jsx(Q,{value:"3",children:"3 sessions"}),s.jsx(Q,{value:"5",children:"5 sessions"}),s.jsx(Q,{value:"10",children:"10 sessions"})]})]})]})]}),s.jsxs($,{onClick:d,className:"w-full gap-2",children:[s.jsx(nu,{className:"h-4 w-4"}),"Sauvegarder les paramtres de session"]})]})]}),s.jsxs(ie,{children:[s.jsx(xe,{children:s.jsxs(ye,{className:"flex items-center gap-2",children:[s.jsx(yU,{className:"h-5 w-5"}),"Notifications de Scurit"]})}),s.jsxs(oe,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(M,{children:"Alertes de connexion"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications pour les nouvelles connexions"})]}),s.jsx(mr,{checked:o.loginAlerts,onCheckedChange:g=>l(p=>({...p,loginAlerts:g}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(M,{children:"Alertes de scurit"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications pour les vnements de scurit"})]}),s.jsx(mr,{checked:o.securityAlerts,onCheckedChange:g=>l(p=>({...p,securityAlerts:g}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(M,{children:"Alertes d'appareil"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications pour les nouveaux appareils"})]}),s.jsx(mr,{checked:o.deviceAlerts,onCheckedChange:g=>l(p=>({...p,deviceAlerts:g}))})]}),s.jsx(ex,{}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(M,{children:"Notifications par email"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevez les alertes par email"})]}),s.jsx(mr,{checked:o.emailNotifications,onCheckedChange:g=>l(p=>({...p,emailNotifications:g}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(M,{children:"Notifications SMS"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevez les alertes par SMS"})]}),s.jsx(mr,{checked:o.smsNotifications,onCheckedChange:g=>l(p=>({...p,smsNotifications:g}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(M,{children:"Notifications push"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevez les alertes push"})]}),s.jsx(mr,{checked:o.pushNotifications,onCheckedChange:g=>l(p=>({...p,pushNotifications:g}))})]})]}),s.jsxs($,{onClick:h,className:"w-full gap-2",children:[s.jsx(nu,{className:"h-4 w-4"}),"Sauvegarder les paramtres de notification"]})]})]})]})]}):null}function jke(){const[e,t]=b.useState(""),[n,r]=b.useState(""),[a,i]=b.useState(!1),[o,l]=b.useState(!1),[c,u]=b.useState(""),[d,h]=b.useState(!1),[m,f]=b.useState(!1),x=Ad(),{toast:g}=it();jK(),b.useEffect(()=>{(async()=>{try{const{data:{session:w},error:S}=await fe.auth.getSession();if(S){u("Lien de rinitialisation invalide ou expir");return}w?f(!0):u("Lien de rinitialisation invalide ou expir")}catch{u("Erreur lors de la vrification du lien de rinitialisation")}})()},[]);const p=y=>y.length<8?"Le mot de passe doit contenir au moins 8 caractres":/[A-Z]/.test(y)?/[a-z]/.test(y)?/\d/.test(y)?/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>?]/.test(y)?null:"Le mot de passe doit contenir au moins un caractre spcial":"Le mot de passe doit contenir au moins un chiffre":"Le mot de passe doit contenir au moins une lettre minuscule":"Le mot de passe doit contenir au moins une lettre majuscule",v=async y=>{if(y.preventDefault(),u(""),!e||!n){g({title:"Champs requis",description:"Veuillez remplir tous les champs",variant:"destructive"});return}if(e!==n){g({title:"Erreur",description:"Les mots de passe ne correspondent pas",variant:"destructive"});return}const w=p(e);if(w){g({title:"Mot de passe invalide",description:w,variant:"destructive"});return}h(!0);try{const{error:S}=await fe.auth.updateUser({password:e});if(S)throw S;g({title:"Mot de passe mis  jour",description:"Votre mot de passe a t rinitialis avec succs."}),x("/login")}catch(S){u(S instanceof Error?S.message:"Une erreur est survenue lors de la mise  jour du mot de passe")}finally{h(!1)}};return!m&&!c?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-green-50 dark:from-gray-900 dark:to-gray-800 px-4",children:s.jsx(ie,{className:"w-full max-w-md",children:s.jsxs(oe,{className:"pt-6",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx(on,{className:"h-8 w-8 animate-spin"})}),s.jsx("p",{className:"text-center mt-4 text-sm text-muted-foreground",children:"Vrification du lien de rinitialisation..."})]})})}):c?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-green-50 dark:from-gray-900 dark:to-gray-800 px-4",children:s.jsxs(ie,{className:"w-full max-w-md",children:[s.jsxs(xe,{className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:s.jsx(gt,{className:"h-8 w-8 text-red-600"})})}),s.jsx(ye,{className:"text-2xl font-bold text-red-600",children:"Lien invalide"})]}),s.jsxs(oe,{children:[s.jsx(zu,{className:"mb-4",children:s.jsx(Bu,{children:c})}),s.jsx($,{onClick:()=>x("/login"),className:"w-full",children:"Retour  la connexion"})]})]})}):s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-green-50 dark:from-gray-900 dark:to-gray-800 px-4",children:s.jsxs(ie,{className:"w-full max-w-md",children:[s.jsxs(xe,{className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"p-3 bg-primary/10 rounded-full",children:s.jsx(gt,{className:"h-8 w-8 text-primary"})})}),s.jsx(ye,{className:"text-2xl font-bold",children:"VetPro CRM3"}),s.jsx(Fu,{children:"Dfinir un nouveau mot de passe"})]}),s.jsx(oe,{children:s.jsxs("form",{onSubmit:v,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"password",children:"Nouveau mot de passe"}),s.jsxs("div",{className:"relative",children:[s.jsx(se,{id:"password",type:a?"text":"password",value:e,onChange:y=>t(y.target.value),placeholder:"Votre nouveau mot de passe",required:!0}),s.jsx($,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>i(!a),children:a?s.jsx(Ib,{className:"h-4 w-4"}):s.jsx($n,{className:"h-4 w-4"})})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Le mot de passe doit contenir au moins 8 caractres, une majuscule, une minuscule, un chiffre et un caractre spcial."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),s.jsxs("div",{className:"relative",children:[s.jsx(se,{id:"confirmPassword",type:o?"text":"password",value:n,onChange:y=>r(y.target.value),placeholder:"Confirmer votre nouveau mot de passe",required:!0}),s.jsx($,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>l(!o),children:o?s.jsx(Ib,{className:"h-4 w-4"}):s.jsx($n,{className:"h-4 w-4"})})]})]}),s.jsx($,{type:"submit",className:"w-full",disabled:d,children:d?s.jsxs(s.Fragment,{children:[s.jsx(on,{className:"mr-2 h-4 w-4 animate-spin"}),"Mise  jour..."]}):"Mettre  jour le mot de passe"})]})})]})})}const Nke=new cH({defaultOptions:{queries:{retry:(e,t)=>(t==null?void 0:t.status)>=400&&(t==null?void 0:t.status)<500?!1:e<2,staleTime:3*60*1e3,gcTime:8*60*1e3,refetchOnWindowFocus:!1,refetchOnReconnect:"always",refetchOnMount:!0,networkMode:"offlineFirst"},mutations:{retry:1,networkMode:"offlineFirst"}}}),Ske=()=>s.jsx(QJ,{children:s.jsx(uH,{client:Nke,children:s.jsxs(FW,{children:[s.jsx(N9,{}),s.jsx(t7,{}),s.jsx(KJ,{children:s.jsx(YS,{children:s.jsx(fte,{children:s.jsx(NK,{children:s.jsx(xK,{children:s.jsx("div",{className:"min-h-screen bg-background w-full text-foreground overflow-x-hidden",children:s.jsxs(uK,{children:[s.jsx(Yt,{path:"/",element:s.jsx(aZ,{})}),s.jsx(Yt,{path:"/login",element:s.jsx(sZ,{children:s.jsx(nZ,{})})}),s.jsx(Yt,{path:"/register",element:s.jsx(iZ,{})}),s.jsx(Yt,{path:"/pending-approval",element:s.jsx(Cn,{children:s.jsx(oZ,{})})}),s.jsx(Yt,{path:"/dashboard",element:s.jsxs(Cn,{children:[s.jsx(zn,{}),s.jsx(aAe,{})]})}),s.jsx(Yt,{path:"/clients",element:s.jsxs(Cn,{children:[s.jsx(zn,{}),s.jsx(bAe,{})]})}),s.jsx(Yt,{path:"/pets",element:s.jsxs(Cn,{children:[s.jsx(zn,{}),s.jsx(AAe,{})]})}),s.jsx(Yt,{path:"/appointments",element:s.jsxs(Cn,{children:[s.jsx(zn,{}),s.jsx(pEe,{})]})}),s.jsx(Yt,{path:"/consultations",element:s.jsxs(Cn,{children:[s.jsx(zn,{}),s.jsx(wEe,{})]})}),s.jsx(Yt,{path:"/history",element:s.jsxs(Cn,{children:[s.jsx(zn,{}),s.jsx(PEe,{})]})}),s.jsx(Yt,{path:"/farm",element:s.jsxs(Cn,{children:[s.jsx(zn,{}),s.jsx(PO,{})]})}),s.jsx(Yt,{path:"/vaccinations",element:s.jsxs(Cn,{children:[s.jsx(zn,{}),s.jsx(BEe,{})]})}),s.jsx(Yt,{path:"/antiparasites",element:s.jsxs(Cn,{children:[s.jsx(zn,{}),s.jsx(XEe,{})]})}),s.jsx(Yt,{path:"/accounting",element:s.jsxs(Cn,{children:[s.jsx(zn,{}),s.jsx(ike,{})]})}),s.jsx(Yt,{path:"/farms",element:s.jsxs(Cn,{children:[s.jsx(zn,{}),s.jsx(PO,{})]})}),s.jsx(Yt,{path:"/stock",element:s.jsxs(Cn,{children:[s.jsx(zn,{}),s.jsx(rke,{})]})}),s.jsx(Yt,{path:"/admin",element:s.jsxs(rZ,{children:[s.jsx(zn,{}),s.jsx(lke,{})]})}),s.jsx(Yt,{path:"/test-stats",element:s.jsxs(Cn,{children:[s.jsx(zn,{}),s.jsx(uke,{})]})}),s.jsx(Yt,{path:"/simple-test",element:s.jsxs(Cn,{children:[s.jsx(zn,{}),s.jsx(hke,{})]})}),s.jsx(Yt,{path:"/settings",element:s.jsxs(Cn,{children:[s.jsx(zn,{}),s.jsx(gke,{})]})}),s.jsx(Yt,{path:"/profile",element:s.jsxs(Cn,{children:[s.jsx(zn,{}),s.jsx(wke,{})]})}),s.jsx(Yt,{path:"/auth-settings",element:s.jsxs(Cn,{children:[s.jsx(zn,{}),s.jsx(bke,{})]})}),s.jsx(Yt,{path:"/reset-password",element:s.jsx(jke,{})}),s.jsx(Yt,{path:"*",element:s.jsx(fke,{})})]})})})})})})})]})})});oI(document.getElementById("root")).render(s.jsx(Ske,{}));
