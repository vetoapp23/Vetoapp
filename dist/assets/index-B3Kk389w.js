var d2=e=>{throw TypeError(e)};var Gy=(e,t,n)=>t.has(e)||d2("Cannot "+n);var G=(e,t,n)=>(Gy(e,t,"read from private field"),n?n.call(e):t.get(e)),Re=(e,t,n)=>t.has(e)?d2("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Ae=(e,t,n,r)=>(Gy(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),st=(e,t,n)=>(Gy(e,t,"access private method"),n);var Mm=(e,t,n,r)=>({set _(a){Ae(e,t,a,n)},get _(){return G(e,t,r)}});function OB(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var lr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ct(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function DB(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var a=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return e[r]}})}),n}var AO={exports:{}},qv={},kO={exports:{}},ht={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var am=Symbol.for("react.element"),MB=Symbol.for("react.portal"),IB=Symbol.for("react.fragment"),$B=Symbol.for("react.strict_mode"),RB=Symbol.for("react.profiler"),LB=Symbol.for("react.provider"),FB=Symbol.for("react.context"),BB=Symbol.for("react.forward_ref"),zB=Symbol.for("react.suspense"),VB=Symbol.for("react.memo"),qB=Symbol.for("react.lazy"),h2=Symbol.iterator;function UB(e){return e===null||typeof e!="object"?null:(e=h2&&e[h2]||e["@@iterator"],typeof e=="function"?e:null)}var EO={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},TO=Object.assign,OO={};function ad(e,t,n){this.props=e,this.context=t,this.refs=OO,this.updater=n||EO}ad.prototype.isReactComponent={};ad.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ad.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function DO(){}DO.prototype=ad.prototype;function K1(e,t,n){this.props=e,this.context=t,this.refs=OO,this.updater=n||EO}var G1=K1.prototype=new DO;G1.constructor=K1;TO(G1,ad.prototype);G1.isPureReactComponent=!0;var f2=Array.isArray,MO=Object.prototype.hasOwnProperty,Y1={current:null},IO={key:!0,ref:!0,__self:!0,__source:!0};function $O(e,t,n){var r,a={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)MO.call(t,r)&&!IO.hasOwnProperty(r)&&(a[r]=t[r]);var l=arguments.length-2;if(l===1)a.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)a[r]===void 0&&(a[r]=l[r]);return{$$typeof:am,type:e,key:i,ref:o,props:a,_owner:Y1.current}}function WB(e,t){return{$$typeof:am,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Q1(e){return typeof e=="object"&&e!==null&&e.$$typeof===am}function HB(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var m2=/\/+/g;function Yy(e,t){return typeof e=="object"&&e!==null&&e.key!=null?HB(""+e.key):t.toString(36)}function Ip(e,t,n,r,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case am:case MB:o=!0}}if(o)return o=e,a=a(o),e=r===""?"."+Yy(o,0):r,f2(a)?(n="",e!=null&&(n=e.replace(m2,"$&/")+"/"),Ip(a,t,n,"",function(u){return u})):a!=null&&(Q1(a)&&(a=WB(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(m2,"$&/")+"/")+e)),t.push(a)),1;if(o=0,r=r===""?".":r+":",f2(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+Yy(i,l);o+=Ip(i,t,n,c,a)}else if(c=UB(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+Yy(i,l++),o+=Ip(i,t,n,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Im(e,t,n){if(e==null)return e;var r=[],a=0;return Ip(e,r,"","",function(i){return t.call(n,i,a++)}),r}function KB(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var wr={current:null},$p={transition:null},GB={ReactCurrentDispatcher:wr,ReactCurrentBatchConfig:$p,ReactCurrentOwner:Y1};function RO(){throw Error("act(...) is not supported in production builds of React.")}ht.Children={map:Im,forEach:function(e,t,n){Im(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Im(e,function(){t++}),t},toArray:function(e){return Im(e,function(t){return t})||[]},only:function(e){if(!Q1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ht.Component=ad;ht.Fragment=IB;ht.Profiler=RB;ht.PureComponent=K1;ht.StrictMode=$B;ht.Suspense=zB;ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GB;ht.act=RO;ht.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=TO({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Y1.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)MO.call(t,c)&&!IO.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:am,type:e.type,key:a,ref:i,props:r,_owner:o}};ht.createContext=function(e){return e={$$typeof:FB,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:LB,_context:e},e.Consumer=e};ht.createElement=$O;ht.createFactory=function(e){var t=$O.bind(null,e);return t.type=e,t};ht.createRef=function(){return{current:null}};ht.forwardRef=function(e){return{$$typeof:BB,render:e}};ht.isValidElement=Q1;ht.lazy=function(e){return{$$typeof:qB,_payload:{_status:-1,_result:e},_init:KB}};ht.memo=function(e,t){return{$$typeof:VB,type:e,compare:t===void 0?null:t}};ht.startTransition=function(e){var t=$p.transition;$p.transition={};try{e()}finally{$p.transition=t}};ht.unstable_act=RO;ht.useCallback=function(e,t){return wr.current.useCallback(e,t)};ht.useContext=function(e){return wr.current.useContext(e)};ht.useDebugValue=function(){};ht.useDeferredValue=function(e){return wr.current.useDeferredValue(e)};ht.useEffect=function(e,t){return wr.current.useEffect(e,t)};ht.useId=function(){return wr.current.useId()};ht.useImperativeHandle=function(e,t,n){return wr.current.useImperativeHandle(e,t,n)};ht.useInsertionEffect=function(e,t){return wr.current.useInsertionEffect(e,t)};ht.useLayoutEffect=function(e,t){return wr.current.useLayoutEffect(e,t)};ht.useMemo=function(e,t){return wr.current.useMemo(e,t)};ht.useReducer=function(e,t,n){return wr.current.useReducer(e,t,n)};ht.useRef=function(e){return wr.current.useRef(e)};ht.useState=function(e){return wr.current.useState(e)};ht.useSyncExternalStore=function(e,t,n){return wr.current.useSyncExternalStore(e,t,n)};ht.useTransition=function(){return wr.current.useTransition()};ht.version="18.3.1";kO.exports=ht;var j=kO.exports;const $=Ct(j),X1=OB({__proto__:null,default:$},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YB=j,QB=Symbol.for("react.element"),XB=Symbol.for("react.fragment"),JB=Object.prototype.hasOwnProperty,ZB=YB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ez={key:!0,ref:!0,__self:!0,__source:!0};function LO(e,t,n){var r,a={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)JB.call(t,r)&&!ez.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:QB,type:e,key:i,ref:o,props:a,_owner:ZB.current}}qv.Fragment=XB;qv.jsx=LO;qv.jsxs=LO;AO.exports=qv;var s=AO.exports,FO={exports:{}},ns={},BO={exports:{}},zO={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(k,D){var X=k.length;k.push(D);e:for(;0<X;){var Q=X-1>>>1,te=k[Q];if(0<a(te,D))k[Q]=D,k[X]=te,X=Q;else break e}}function n(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var D=k[0],X=k.pop();if(X!==D){k[0]=X;e:for(var Q=0,te=k.length,ne=te>>>1;Q<ne;){var T=2*(Q+1)-1,ce=k[T],me=T+1,le=k[me];if(0>a(ce,X))me<te&&0>a(le,ce)?(k[Q]=le,k[me]=X,Q=me):(k[Q]=ce,k[T]=X,Q=T);else if(me<te&&0>a(le,X))k[Q]=le,k[me]=X,Q=me;else break e}}return D}function a(k,D){var X=k.sortIndex-D.sortIndex;return X!==0?X:k.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,v=!1,p=!1,g=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(k){for(var D=n(u);D!==null;){if(D.callback===null)r(u);else if(D.startTime<=k)r(u),D.sortIndex=D.expirationTime,t(c,D);else break;D=n(u)}}function N(k){if(p=!1,b(k),!v)if(n(c)!==null)v=!0,V(w);else{var D=n(u);D!==null&&H(N,D.startTime-k)}}function w(k,D){v=!1,p&&(p=!1,x(C),C=-1),m=!0;var X=f;try{for(b(D),h=n(c);h!==null&&(!(h.expirationTime>D)||k&&!O());){var Q=h.callback;if(typeof Q=="function"){h.callback=null,f=h.priorityLevel;var te=Q(h.expirationTime<=D);D=e.unstable_now(),typeof te=="function"?h.callback=te:h===n(c)&&r(c),b(D)}else r(c);h=n(c)}if(h!==null)var ne=!0;else{var T=n(u);T!==null&&H(N,T.startTime-D),ne=!1}return ne}finally{h=null,f=X,m=!1}}var S=!1,_=null,C=-1,P=5,A=-1;function O(){return!(e.unstable_now()-A<P)}function E(){if(_!==null){var k=e.unstable_now();A=k;var D=!0;try{D=_(!0,k)}finally{D?z():(S=!1,_=null)}}else S=!1}var z;if(typeof y=="function")z=function(){y(E)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,W=I.port2;I.port1.onmessage=E,z=function(){W.postMessage(null)}}else z=function(){g(E,0)};function V(k){_=k,S||(S=!0,z())}function H(k,D){C=g(function(){k(e.unstable_now())},D)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(k){k.callback=null},e.unstable_continueExecution=function(){v||m||(v=!0,V(w))},e.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<k?Math.floor(1e3/k):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(k){switch(f){case 1:case 2:case 3:var D=3;break;default:D=f}var X=f;f=D;try{return k()}finally{f=X}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(k,D){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var X=f;f=k;try{return D()}finally{f=X}},e.unstable_scheduleCallback=function(k,D,X){var Q=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?Q+X:Q):X=Q,k){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=X+te,k={id:d++,callback:D,priorityLevel:k,startTime:X,expirationTime:te,sortIndex:-1},X>Q?(k.sortIndex=X,t(u,k),n(c)===null&&k===n(u)&&(p?(x(C),C=-1):p=!0,H(N,X-Q))):(k.sortIndex=te,t(c,k),v||m||(v=!0,V(w))),k},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(k){var D=f;return function(){var X=f;f=D;try{return k.apply(this,arguments)}finally{f=X}}}})(zO);BO.exports=zO;var tz=BO.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nz=j,ts=tz;function ve(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var VO=new Set,Bh={};function Ul(e,t){xu(e,t),xu(e+"Capture",t)}function xu(e,t){for(Bh[e]=t,e=0;e<t.length;e++)VO.add(t[e])}var ii=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nb=Object.prototype.hasOwnProperty,rz=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p2={},g2={};function sz(e){return Nb.call(g2,e)?!0:Nb.call(p2,e)?!1:rz.test(e)?g2[e]=!0:(p2[e]=!0,!1)}function az(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function iz(e,t,n,r){if(t===null||typeof t>"u"||az(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Nr(e,t,n,r,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Yn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Yn[e]=new Nr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Yn[t]=new Nr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Yn[e]=new Nr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Yn[e]=new Nr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Yn[e]=new Nr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Yn[e]=new Nr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Yn[e]=new Nr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Yn[e]=new Nr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Yn[e]=new Nr(e,5,!1,e.toLowerCase(),null,!1,!1)});var J1=/[\-:]([a-z])/g;function Z1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(J1,Z1);Yn[t]=new Nr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(J1,Z1);Yn[t]=new Nr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(J1,Z1);Yn[t]=new Nr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Yn[e]=new Nr(e,1,!1,e.toLowerCase(),null,!1,!1)});Yn.xlinkHref=new Nr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Yn[e]=new Nr(e,1,!1,e.toLowerCase(),null,!0,!0)});function eN(e,t,n,r){var a=Yn.hasOwnProperty(t)?Yn[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(iz(t,n,a,r)&&(n=null),r||a===null?sz(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var vi=nz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$m=Symbol.for("react.element"),Cc=Symbol.for("react.portal"),Pc=Symbol.for("react.fragment"),tN=Symbol.for("react.strict_mode"),Sb=Symbol.for("react.profiler"),qO=Symbol.for("react.provider"),UO=Symbol.for("react.context"),nN=Symbol.for("react.forward_ref"),_b=Symbol.for("react.suspense"),Cb=Symbol.for("react.suspense_list"),rN=Symbol.for("react.memo"),Mi=Symbol.for("react.lazy"),WO=Symbol.for("react.offscreen"),v2=Symbol.iterator;function Vd(e){return e===null||typeof e!="object"?null:(e=v2&&e[v2]||e["@@iterator"],typeof e=="function"?e:null)}var sn=Object.assign,Qy;function hh(e){if(Qy===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Qy=t&&t[1]||""}return`
`+Qy+e}var Xy=!1;function Jy(e,t){if(!e||Xy)return"";Xy=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=r.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Xy=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?hh(e):""}function oz(e){switch(e.tag){case 5:return hh(e.type);case 16:return hh("Lazy");case 13:return hh("Suspense");case 19:return hh("SuspenseList");case 0:case 2:case 15:return e=Jy(e.type,!1),e;case 11:return e=Jy(e.type.render,!1),e;case 1:return e=Jy(e.type,!0),e;default:return""}}function Pb(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Pc:return"Fragment";case Cc:return"Portal";case Sb:return"Profiler";case tN:return"StrictMode";case _b:return"Suspense";case Cb:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case UO:return(e.displayName||"Context")+".Consumer";case qO:return(e._context.displayName||"Context")+".Provider";case nN:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case rN:return t=e.displayName||null,t!==null?t:Pb(e.type)||"Memo";case Mi:t=e._payload,e=e._init;try{return Pb(e(t))}catch{}}return null}function lz(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pb(t);case 8:return t===tN?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function vo(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function HO(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function cz(e){var t=HO(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Rm(e){e._valueTracker||(e._valueTracker=cz(e))}function KO(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=HO(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function eg(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ab(e,t){var n=t.checked;return sn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function x2(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=vo(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function GO(e,t){t=t.checked,t!=null&&eN(e,"checked",t,!1)}function kb(e,t){GO(e,t);var n=vo(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Eb(e,t.type,n):t.hasOwnProperty("defaultValue")&&Eb(e,t.type,vo(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function y2(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Eb(e,t,n){(t!=="number"||eg(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var fh=Array.isArray;function qc(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+vo(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Tb(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ve(91));return sn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function b2(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ve(92));if(fh(n)){if(1<n.length)throw Error(ve(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:vo(n)}}function YO(e,t){var n=vo(t.value),r=vo(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function j2(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function QO(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ob(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?QO(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Lm,XO=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Lm=Lm||document.createElement("div"),Lm.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Lm.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function zh(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var jh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uz=["Webkit","ms","Moz","O"];Object.keys(jh).forEach(function(e){uz.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),jh[t]=jh[e]})});function JO(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||jh.hasOwnProperty(e)&&jh[e]?(""+t).trim():t+"px"}function ZO(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=JO(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var dz=sn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Db(e,t){if(t){if(dz[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ve(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ve(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ve(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ve(62))}}function Mb(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ib=null;function sN(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var $b=null,Uc=null,Wc=null;function w2(e){if(e=lm(e)){if(typeof $b!="function")throw Error(ve(280));var t=e.stateNode;t&&(t=Gv(t),$b(e.stateNode,e.type,t))}}function eD(e){Uc?Wc?Wc.push(e):Wc=[e]:Uc=e}function tD(){if(Uc){var e=Uc,t=Wc;if(Wc=Uc=null,w2(e),t)for(e=0;e<t.length;e++)w2(t[e])}}function nD(e,t){return e(t)}function rD(){}var Zy=!1;function sD(e,t,n){if(Zy)return e(t,n);Zy=!0;try{return nD(e,t,n)}finally{Zy=!1,(Uc!==null||Wc!==null)&&(rD(),tD())}}function Vh(e,t){var n=e.stateNode;if(n===null)return null;var r=Gv(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ve(231,t,typeof n));return n}var Rb=!1;if(ii)try{var qd={};Object.defineProperty(qd,"passive",{get:function(){Rb=!0}}),window.addEventListener("test",qd,qd),window.removeEventListener("test",qd,qd)}catch{Rb=!1}function hz(e,t,n,r,a,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var wh=!1,tg=null,ng=!1,Lb=null,fz={onError:function(e){wh=!0,tg=e}};function mz(e,t,n,r,a,i,o,l,c){wh=!1,tg=null,hz.apply(fz,arguments)}function pz(e,t,n,r,a,i,o,l,c){if(mz.apply(this,arguments),wh){if(wh){var u=tg;wh=!1,tg=null}else throw Error(ve(198));ng||(ng=!0,Lb=u)}}function Wl(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function aD(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function N2(e){if(Wl(e)!==e)throw Error(ve(188))}function gz(e){var t=e.alternate;if(!t){if(t=Wl(e),t===null)throw Error(ve(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return N2(a),e;if(i===r)return N2(a),t;i=i.sibling}throw Error(ve(188))}if(n.return!==r.return)n=a,r=i;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o)throw Error(ve(189))}}if(n.alternate!==r)throw Error(ve(190))}if(n.tag!==3)throw Error(ve(188));return n.stateNode.current===n?e:t}function iD(e){return e=gz(e),e!==null?oD(e):null}function oD(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=oD(e);if(t!==null)return t;e=e.sibling}return null}var lD=ts.unstable_scheduleCallback,S2=ts.unstable_cancelCallback,vz=ts.unstable_shouldYield,xz=ts.unstable_requestPaint,mn=ts.unstable_now,yz=ts.unstable_getCurrentPriorityLevel,aN=ts.unstable_ImmediatePriority,cD=ts.unstable_UserBlockingPriority,rg=ts.unstable_NormalPriority,bz=ts.unstable_LowPriority,uD=ts.unstable_IdlePriority,Uv=null,ba=null;function jz(e){if(ba&&typeof ba.onCommitFiberRoot=="function")try{ba.onCommitFiberRoot(Uv,e,void 0,(e.current.flags&128)===128)}catch{}}var qs=Math.clz32?Math.clz32:Sz,wz=Math.log,Nz=Math.LN2;function Sz(e){return e>>>=0,e===0?32:31-(wz(e)/Nz|0)|0}var Fm=64,Bm=4194304;function mh(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function sg(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~a;l!==0?r=mh(l):(i&=o,i!==0&&(r=mh(i)))}else o=n&~a,o!==0?r=mh(o):i!==0&&(r=mh(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-qs(t),a=1<<n,r|=e[n],t&=~a;return r}function _z(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cz(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-qs(i),l=1<<o,c=a[o];c===-1?(!(l&n)||l&r)&&(a[o]=_z(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Fb(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function dD(){var e=Fm;return Fm<<=1,!(Fm&4194240)&&(Fm=64),e}function e0(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function im(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-qs(t),e[t]=n}function Pz(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-qs(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}function iN(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-qs(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var kt=0;function hD(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var fD,oN,mD,pD,gD,Bb=!1,zm=[],no=null,ro=null,so=null,qh=new Map,Uh=new Map,Ri=[],Az="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _2(e,t){switch(e){case"focusin":case"focusout":no=null;break;case"dragenter":case"dragleave":ro=null;break;case"mouseover":case"mouseout":so=null;break;case"pointerover":case"pointerout":qh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uh.delete(t.pointerId)}}function Ud(e,t,n,r,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},t!==null&&(t=lm(t),t!==null&&oN(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function kz(e,t,n,r,a){switch(t){case"focusin":return no=Ud(no,e,t,n,r,a),!0;case"dragenter":return ro=Ud(ro,e,t,n,r,a),!0;case"mouseover":return so=Ud(so,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return qh.set(i,Ud(qh.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,Uh.set(i,Ud(Uh.get(i)||null,e,t,n,r,a)),!0}return!1}function vD(e){var t=rl(e.target);if(t!==null){var n=Wl(t);if(n!==null){if(t=n.tag,t===13){if(t=aD(n),t!==null){e.blockedOn=t,gD(e.priority,function(){mD(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Rp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=zb(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ib=r,n.target.dispatchEvent(r),Ib=null}else return t=lm(n),t!==null&&oN(t),e.blockedOn=n,!1;t.shift()}return!0}function C2(e,t,n){Rp(e)&&n.delete(t)}function Ez(){Bb=!1,no!==null&&Rp(no)&&(no=null),ro!==null&&Rp(ro)&&(ro=null),so!==null&&Rp(so)&&(so=null),qh.forEach(C2),Uh.forEach(C2)}function Wd(e,t){e.blockedOn===t&&(e.blockedOn=null,Bb||(Bb=!0,ts.unstable_scheduleCallback(ts.unstable_NormalPriority,Ez)))}function Wh(e){function t(a){return Wd(a,e)}if(0<zm.length){Wd(zm[0],e);for(var n=1;n<zm.length;n++){var r=zm[n];r.blockedOn===e&&(r.blockedOn=null)}}for(no!==null&&Wd(no,e),ro!==null&&Wd(ro,e),so!==null&&Wd(so,e),qh.forEach(t),Uh.forEach(t),n=0;n<Ri.length;n++)r=Ri[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ri.length&&(n=Ri[0],n.blockedOn===null);)vD(n),n.blockedOn===null&&Ri.shift()}var Hc=vi.ReactCurrentBatchConfig,ag=!0;function Tz(e,t,n,r){var a=kt,i=Hc.transition;Hc.transition=null;try{kt=1,lN(e,t,n,r)}finally{kt=a,Hc.transition=i}}function Oz(e,t,n,r){var a=kt,i=Hc.transition;Hc.transition=null;try{kt=4,lN(e,t,n,r)}finally{kt=a,Hc.transition=i}}function lN(e,t,n,r){if(ag){var a=zb(e,t,n,r);if(a===null)u0(e,t,r,ig,n),_2(e,r);else if(kz(a,e,t,n,r))r.stopPropagation();else if(_2(e,r),t&4&&-1<Az.indexOf(e)){for(;a!==null;){var i=lm(a);if(i!==null&&fD(i),i=zb(e,t,n,r),i===null&&u0(e,t,r,ig,n),i===a)break;a=i}a!==null&&r.stopPropagation()}else u0(e,t,r,null,n)}}var ig=null;function zb(e,t,n,r){if(ig=null,e=sN(r),e=rl(e),e!==null)if(t=Wl(e),t===null)e=null;else if(n=t.tag,n===13){if(e=aD(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ig=e,null}function xD(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yz()){case aN:return 1;case cD:return 4;case rg:case bz:return 16;case uD:return 536870912;default:return 16}default:return 16}}var Xi=null,cN=null,Lp=null;function yD(){if(Lp)return Lp;var e,t=cN,n=t.length,r,a="value"in Xi?Xi.value:Xi.textContent,i=a.length;for(e=0;e<n&&t[e]===a[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===a[i-r];r++);return Lp=a.slice(e,1<r?1-r:void 0)}function Fp(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Vm(){return!0}function P2(){return!1}function rs(e){function t(n,r,a,i,o){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Vm:P2,this.isPropagationStopped=P2,this}return sn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Vm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Vm)},persist:function(){},isPersistent:Vm}),t}var id={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},uN=rs(id),om=sn({},id,{view:0,detail:0}),Dz=rs(om),t0,n0,Hd,Wv=sn({},om,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dN,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Hd&&(Hd&&e.type==="mousemove"?(t0=e.screenX-Hd.screenX,n0=e.screenY-Hd.screenY):n0=t0=0,Hd=e),t0)},movementY:function(e){return"movementY"in e?e.movementY:n0}}),A2=rs(Wv),Mz=sn({},Wv,{dataTransfer:0}),Iz=rs(Mz),$z=sn({},om,{relatedTarget:0}),r0=rs($z),Rz=sn({},id,{animationName:0,elapsedTime:0,pseudoElement:0}),Lz=rs(Rz),Fz=sn({},id,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Bz=rs(Fz),zz=sn({},id,{data:0}),k2=rs(zz),Vz={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qz={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uz={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wz(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Uz[e])?!!t[e]:!1}function dN(){return Wz}var Hz=sn({},om,{key:function(e){if(e.key){var t=Vz[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Fp(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?qz[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dN,charCode:function(e){return e.type==="keypress"?Fp(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Fp(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Kz=rs(Hz),Gz=sn({},Wv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),E2=rs(Gz),Yz=sn({},om,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dN}),Qz=rs(Yz),Xz=sn({},id,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jz=rs(Xz),Zz=sn({},Wv,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),eV=rs(Zz),tV=[9,13,27,32],hN=ii&&"CompositionEvent"in window,Nh=null;ii&&"documentMode"in document&&(Nh=document.documentMode);var nV=ii&&"TextEvent"in window&&!Nh,bD=ii&&(!hN||Nh&&8<Nh&&11>=Nh),T2=" ",O2=!1;function jD(e,t){switch(e){case"keyup":return tV.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wD(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ac=!1;function rV(e,t){switch(e){case"compositionend":return wD(t);case"keypress":return t.which!==32?null:(O2=!0,T2);case"textInput":return e=t.data,e===T2&&O2?null:e;default:return null}}function sV(e,t){if(Ac)return e==="compositionend"||!hN&&jD(e,t)?(e=yD(),Lp=cN=Xi=null,Ac=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return bD&&t.locale!=="ko"?null:t.data;default:return null}}var aV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function D2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!aV[e.type]:t==="textarea"}function ND(e,t,n,r){eD(r),t=og(t,"onChange"),0<t.length&&(n=new uN("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Sh=null,Hh=null;function iV(e){MD(e,0)}function Hv(e){var t=Tc(e);if(KO(t))return e}function oV(e,t){if(e==="change")return t}var SD=!1;if(ii){var s0;if(ii){var a0="oninput"in document;if(!a0){var M2=document.createElement("div");M2.setAttribute("oninput","return;"),a0=typeof M2.oninput=="function"}s0=a0}else s0=!1;SD=s0&&(!document.documentMode||9<document.documentMode)}function I2(){Sh&&(Sh.detachEvent("onpropertychange",_D),Hh=Sh=null)}function _D(e){if(e.propertyName==="value"&&Hv(Hh)){var t=[];ND(t,Hh,e,sN(e)),sD(iV,t)}}function lV(e,t,n){e==="focusin"?(I2(),Sh=t,Hh=n,Sh.attachEvent("onpropertychange",_D)):e==="focusout"&&I2()}function cV(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Hv(Hh)}function uV(e,t){if(e==="click")return Hv(t)}function dV(e,t){if(e==="input"||e==="change")return Hv(t)}function hV(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Hs=typeof Object.is=="function"?Object.is:hV;function Kh(e,t){if(Hs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Nb.call(t,a)||!Hs(e[a],t[a]))return!1}return!0}function $2(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function R2(e,t){var n=$2(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=$2(n)}}function CD(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?CD(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function PD(){for(var e=window,t=eg();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=eg(e.document)}return t}function fN(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function fV(e){var t=PD(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&CD(n.ownerDocument.documentElement,n)){if(r!==null&&fN(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=r.end===void 0?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=R2(n,i);var o=R2(n,r);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mV=ii&&"documentMode"in document&&11>=document.documentMode,kc=null,Vb=null,_h=null,qb=!1;function L2(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;qb||kc==null||kc!==eg(r)||(r=kc,"selectionStart"in r&&fN(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),_h&&Kh(_h,r)||(_h=r,r=og(Vb,"onSelect"),0<r.length&&(t=new uN("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=kc)))}function qm(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ec={animationend:qm("Animation","AnimationEnd"),animationiteration:qm("Animation","AnimationIteration"),animationstart:qm("Animation","AnimationStart"),transitionend:qm("Transition","TransitionEnd")},i0={},AD={};ii&&(AD=document.createElement("div").style,"AnimationEvent"in window||(delete Ec.animationend.animation,delete Ec.animationiteration.animation,delete Ec.animationstart.animation),"TransitionEvent"in window||delete Ec.transitionend.transition);function Kv(e){if(i0[e])return i0[e];if(!Ec[e])return e;var t=Ec[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in AD)return i0[e]=t[n];return e}var kD=Kv("animationend"),ED=Kv("animationiteration"),TD=Kv("animationstart"),OD=Kv("transitionend"),DD=new Map,F2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function No(e,t){DD.set(e,t),Ul(t,[e])}for(var o0=0;o0<F2.length;o0++){var l0=F2[o0],pV=l0.toLowerCase(),gV=l0[0].toUpperCase()+l0.slice(1);No(pV,"on"+gV)}No(kD,"onAnimationEnd");No(ED,"onAnimationIteration");No(TD,"onAnimationStart");No("dblclick","onDoubleClick");No("focusin","onFocus");No("focusout","onBlur");No(OD,"onTransitionEnd");xu("onMouseEnter",["mouseout","mouseover"]);xu("onMouseLeave",["mouseout","mouseover"]);xu("onPointerEnter",["pointerout","pointerover"]);xu("onPointerLeave",["pointerout","pointerover"]);Ul("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ul("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ul("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ul("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ul("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ul("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ph="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vV=new Set("cancel close invalid load scroll toggle".split(" ").concat(ph));function B2(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,pz(r,t,void 0,e),e.currentTarget=null}function MD(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;B2(a,l,u),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;B2(a,l,u),i=c}}}if(ng)throw e=Lb,ng=!1,Lb=null,e}function Ht(e,t){var n=t[Gb];n===void 0&&(n=t[Gb]=new Set);var r=e+"__bubble";n.has(r)||(ID(t,e,2,!1),n.add(r))}function c0(e,t,n){var r=0;t&&(r|=4),ID(n,e,r,t)}var Um="_reactListening"+Math.random().toString(36).slice(2);function Gh(e){if(!e[Um]){e[Um]=!0,VO.forEach(function(n){n!=="selectionchange"&&(vV.has(n)||c0(n,!1,e),c0(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Um]||(t[Um]=!0,c0("selectionchange",!1,t))}}function ID(e,t,n,r){switch(xD(t)){case 1:var a=Tz;break;case 4:a=Oz;break;default:a=lN}n=a.bind(null,t,n,e),a=void 0,!Rb||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function u0(e,t,n,r,a){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=rl(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}sD(function(){var u=i,d=sN(n),h=[];e:{var f=DD.get(e);if(f!==void 0){var m=uN,v=e;switch(e){case"keypress":if(Fp(n)===0)break e;case"keydown":case"keyup":m=Kz;break;case"focusin":v="focus",m=r0;break;case"focusout":v="blur",m=r0;break;case"beforeblur":case"afterblur":m=r0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=A2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Iz;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Qz;break;case kD:case ED:case TD:m=Lz;break;case OD:m=Jz;break;case"scroll":m=Dz;break;case"wheel":m=eV;break;case"copy":case"cut":case"paste":m=Bz;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=E2}var p=(t&4)!==0,g=!p&&e==="scroll",x=p?f!==null?f+"Capture":null:f;p=[];for(var y=u,b;y!==null;){b=y;var N=b.stateNode;if(b.tag===5&&N!==null&&(b=N,x!==null&&(N=Vh(y,x),N!=null&&p.push(Yh(y,N,b)))),g)break;y=y.return}0<p.length&&(f=new m(f,v,null,n,d),h.push({event:f,listeners:p}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&n!==Ib&&(v=n.relatedTarget||n.fromElement)&&(rl(v)||v[oi]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=u,v=v?rl(v):null,v!==null&&(g=Wl(v),v!==g||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=u),m!==v)){if(p=A2,N="onMouseLeave",x="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(p=E2,N="onPointerLeave",x="onPointerEnter",y="pointer"),g=m==null?f:Tc(m),b=v==null?f:Tc(v),f=new p(N,y+"leave",m,n,d),f.target=g,f.relatedTarget=b,N=null,rl(d)===u&&(p=new p(x,y+"enter",v,n,d),p.target=b,p.relatedTarget=g,N=p),g=N,m&&v)t:{for(p=m,x=v,y=0,b=p;b;b=lc(b))y++;for(b=0,N=x;N;N=lc(N))b++;for(;0<y-b;)p=lc(p),y--;for(;0<b-y;)x=lc(x),b--;for(;y--;){if(p===x||x!==null&&p===x.alternate)break t;p=lc(p),x=lc(x)}p=null}else p=null;m!==null&&z2(h,f,m,p,!1),v!==null&&g!==null&&z2(h,g,v,p,!0)}}e:{if(f=u?Tc(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var w=oV;else if(D2(f))if(SD)w=dV;else{w=cV;var S=lV}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(w=uV);if(w&&(w=w(e,u))){ND(h,w,n,d);break e}S&&S(e,f,u),e==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&Eb(f,"number",f.value)}switch(S=u?Tc(u):window,e){case"focusin":(D2(S)||S.contentEditable==="true")&&(kc=S,Vb=u,_h=null);break;case"focusout":_h=Vb=kc=null;break;case"mousedown":qb=!0;break;case"contextmenu":case"mouseup":case"dragend":qb=!1,L2(h,n,d);break;case"selectionchange":if(mV)break;case"keydown":case"keyup":L2(h,n,d)}var _;if(hN)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Ac?jD(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(bD&&n.locale!=="ko"&&(Ac||C!=="onCompositionStart"?C==="onCompositionEnd"&&Ac&&(_=yD()):(Xi=d,cN="value"in Xi?Xi.value:Xi.textContent,Ac=!0)),S=og(u,C),0<S.length&&(C=new k2(C,e,null,n,d),h.push({event:C,listeners:S}),_?C.data=_:(_=wD(n),_!==null&&(C.data=_)))),(_=nV?rV(e,n):sV(e,n))&&(u=og(u,"onBeforeInput"),0<u.length&&(d=new k2("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=_))}MD(h,t)})}function Yh(e,t,n){return{instance:e,listener:t,currentTarget:n}}function og(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Vh(e,n),i!=null&&r.unshift(Yh(e,i,a)),i=Vh(e,t),i!=null&&r.push(Yh(e,i,a))),e=e.return}return r}function lc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function z2(e,t,n,r,a){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,a?(c=Vh(n,i),c!=null&&o.unshift(Yh(n,c,l))):a||(c=Vh(n,i),c!=null&&o.push(Yh(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var xV=/\r\n?/g,yV=/\u0000|\uFFFD/g;function V2(e){return(typeof e=="string"?e:""+e).replace(xV,`
`).replace(yV,"")}function Wm(e,t,n){if(t=V2(t),V2(e)!==t&&n)throw Error(ve(425))}function lg(){}var Ub=null,Wb=null;function Hb(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Kb=typeof setTimeout=="function"?setTimeout:void 0,bV=typeof clearTimeout=="function"?clearTimeout:void 0,q2=typeof Promise=="function"?Promise:void 0,jV=typeof queueMicrotask=="function"?queueMicrotask:typeof q2<"u"?function(e){return q2.resolve(null).then(e).catch(wV)}:Kb;function wV(e){setTimeout(function(){throw e})}function d0(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),Wh(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);Wh(t)}function ao(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function U2(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var od=Math.random().toString(36).slice(2),ha="__reactFiber$"+od,Qh="__reactProps$"+od,oi="__reactContainer$"+od,Gb="__reactEvents$"+od,NV="__reactListeners$"+od,SV="__reactHandles$"+od;function rl(e){var t=e[ha];if(t)return t;for(var n=e.parentNode;n;){if(t=n[oi]||n[ha]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=U2(e);e!==null;){if(n=e[ha])return n;e=U2(e)}return t}e=n,n=e.parentNode}return null}function lm(e){return e=e[ha]||e[oi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Tc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ve(33))}function Gv(e){return e[Qh]||null}var Yb=[],Oc=-1;function So(e){return{current:e}}function Yt(e){0>Oc||(e.current=Yb[Oc],Yb[Oc]=null,Oc--)}function Vt(e,t){Oc++,Yb[Oc]=e.current,e.current=t}var xo={},cr=So(xo),$r=So(!1),Cl=xo;function yu(e,t){var n=e.type.contextTypes;if(!n)return xo;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in n)a[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Rr(e){return e=e.childContextTypes,e!=null}function cg(){Yt($r),Yt(cr)}function W2(e,t,n){if(cr.current!==xo)throw Error(ve(168));Vt(cr,t),Vt($r,n)}function $D(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(ve(108,lz(e)||"Unknown",a));return sn({},n,r)}function ug(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||xo,Cl=cr.current,Vt(cr,e),Vt($r,$r.current),!0}function H2(e,t,n){var r=e.stateNode;if(!r)throw Error(ve(169));n?(e=$D(e,t,Cl),r.__reactInternalMemoizedMergedChildContext=e,Yt($r),Yt(cr),Vt(cr,e)):Yt($r),Vt($r,n)}var Wa=null,Yv=!1,h0=!1;function RD(e){Wa===null?Wa=[e]:Wa.push(e)}function _V(e){Yv=!0,RD(e)}function _o(){if(!h0&&Wa!==null){h0=!0;var e=0,t=kt;try{var n=Wa;for(kt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Wa=null,Yv=!1}catch(a){throw Wa!==null&&(Wa=Wa.slice(e+1)),lD(aN,_o),a}finally{kt=t,h0=!1}}return null}var Dc=[],Mc=0,dg=null,hg=0,cs=[],us=0,Pl=null,Qa=1,Xa="";function Go(e,t){Dc[Mc++]=hg,Dc[Mc++]=dg,dg=e,hg=t}function LD(e,t,n){cs[us++]=Qa,cs[us++]=Xa,cs[us++]=Pl,Pl=e;var r=Qa;e=Xa;var a=32-qs(r)-1;r&=~(1<<a),n+=1;var i=32-qs(t)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Qa=1<<32-qs(t)+a|n<<a|r,Xa=i+e}else Qa=1<<i|n<<a|r,Xa=e}function mN(e){e.return!==null&&(Go(e,1),LD(e,1,0))}function pN(e){for(;e===dg;)dg=Dc[--Mc],Dc[Mc]=null,hg=Dc[--Mc],Dc[Mc]=null;for(;e===Pl;)Pl=cs[--us],cs[us]=null,Xa=cs[--us],cs[us]=null,Qa=cs[--us],cs[us]=null}var Jr=null,Qr=null,Zt=!1,Ls=null;function FD(e,t){var n=hs(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function K2(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Jr=e,Qr=ao(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Jr=e,Qr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Pl!==null?{id:Qa,overflow:Xa}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=hs(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Jr=e,Qr=null,!0):!1;default:return!1}}function Qb(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Xb(e){if(Zt){var t=Qr;if(t){var n=t;if(!K2(e,t)){if(Qb(e))throw Error(ve(418));t=ao(n.nextSibling);var r=Jr;t&&K2(e,t)?FD(r,n):(e.flags=e.flags&-4097|2,Zt=!1,Jr=e)}}else{if(Qb(e))throw Error(ve(418));e.flags=e.flags&-4097|2,Zt=!1,Jr=e}}}function G2(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Jr=e}function Hm(e){if(e!==Jr)return!1;if(!Zt)return G2(e),Zt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Hb(e.type,e.memoizedProps)),t&&(t=Qr)){if(Qb(e))throw BD(),Error(ve(418));for(;t;)FD(e,t),t=ao(t.nextSibling)}if(G2(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ve(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Qr=ao(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Qr=null}}else Qr=Jr?ao(e.stateNode.nextSibling):null;return!0}function BD(){for(var e=Qr;e;)e=ao(e.nextSibling)}function bu(){Qr=Jr=null,Zt=!1}function gN(e){Ls===null?Ls=[e]:Ls.push(e)}var CV=vi.ReactCurrentBatchConfig;function Kd(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ve(309));var r=n.stateNode}if(!r)throw Error(ve(147,e));var a=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(ve(284));if(!n._owner)throw Error(ve(290,e))}return e}function Km(e,t){throw e=Object.prototype.toString.call(t),Error(ve(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Y2(e){var t=e._init;return t(e._payload)}function zD(e){function t(x,y){if(e){var b=x.deletions;b===null?(x.deletions=[y],x.flags|=16):b.push(y)}}function n(x,y){if(!e)return null;for(;y!==null;)t(x,y),y=y.sibling;return null}function r(x,y){for(x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function a(x,y){return x=co(x,y),x.index=0,x.sibling=null,x}function i(x,y,b){return x.index=b,e?(b=x.alternate,b!==null?(b=b.index,b<y?(x.flags|=2,y):b):(x.flags|=2,y)):(x.flags|=1048576,y)}function o(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,y,b,N){return y===null||y.tag!==6?(y=y0(b,x.mode,N),y.return=x,y):(y=a(y,b),y.return=x,y)}function c(x,y,b,N){var w=b.type;return w===Pc?d(x,y,b.props.children,N,b.key):y!==null&&(y.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Mi&&Y2(w)===y.type)?(N=a(y,b.props),N.ref=Kd(x,y,b),N.return=x,N):(N=Hp(b.type,b.key,b.props,null,x.mode,N),N.ref=Kd(x,y,b),N.return=x,N)}function u(x,y,b,N){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=b0(b,x.mode,N),y.return=x,y):(y=a(y,b.children||[]),y.return=x,y)}function d(x,y,b,N,w){return y===null||y.tag!==7?(y=wl(b,x.mode,N,w),y.return=x,y):(y=a(y,b),y.return=x,y)}function h(x,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=y0(""+y,x.mode,b),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case $m:return b=Hp(y.type,y.key,y.props,null,x.mode,b),b.ref=Kd(x,null,y),b.return=x,b;case Cc:return y=b0(y,x.mode,b),y.return=x,y;case Mi:var N=y._init;return h(x,N(y._payload),b)}if(fh(y)||Vd(y))return y=wl(y,x.mode,b,null),y.return=x,y;Km(x,y)}return null}function f(x,y,b,N){var w=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return w!==null?null:l(x,y,""+b,N);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case $m:return b.key===w?c(x,y,b,N):null;case Cc:return b.key===w?u(x,y,b,N):null;case Mi:return w=b._init,f(x,y,w(b._payload),N)}if(fh(b)||Vd(b))return w!==null?null:d(x,y,b,N,null);Km(x,b)}return null}function m(x,y,b,N,w){if(typeof N=="string"&&N!==""||typeof N=="number")return x=x.get(b)||null,l(y,x,""+N,w);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case $m:return x=x.get(N.key===null?b:N.key)||null,c(y,x,N,w);case Cc:return x=x.get(N.key===null?b:N.key)||null,u(y,x,N,w);case Mi:var S=N._init;return m(x,y,b,S(N._payload),w)}if(fh(N)||Vd(N))return x=x.get(b)||null,d(y,x,N,w,null);Km(y,N)}return null}function v(x,y,b,N){for(var w=null,S=null,_=y,C=y=0,P=null;_!==null&&C<b.length;C++){_.index>C?(P=_,_=null):P=_.sibling;var A=f(x,_,b[C],N);if(A===null){_===null&&(_=P);break}e&&_&&A.alternate===null&&t(x,_),y=i(A,y,C),S===null?w=A:S.sibling=A,S=A,_=P}if(C===b.length)return n(x,_),Zt&&Go(x,C),w;if(_===null){for(;C<b.length;C++)_=h(x,b[C],N),_!==null&&(y=i(_,y,C),S===null?w=_:S.sibling=_,S=_);return Zt&&Go(x,C),w}for(_=r(x,_);C<b.length;C++)P=m(_,x,C,b[C],N),P!==null&&(e&&P.alternate!==null&&_.delete(P.key===null?C:P.key),y=i(P,y,C),S===null?w=P:S.sibling=P,S=P);return e&&_.forEach(function(O){return t(x,O)}),Zt&&Go(x,C),w}function p(x,y,b,N){var w=Vd(b);if(typeof w!="function")throw Error(ve(150));if(b=w.call(b),b==null)throw Error(ve(151));for(var S=w=null,_=y,C=y=0,P=null,A=b.next();_!==null&&!A.done;C++,A=b.next()){_.index>C?(P=_,_=null):P=_.sibling;var O=f(x,_,A.value,N);if(O===null){_===null&&(_=P);break}e&&_&&O.alternate===null&&t(x,_),y=i(O,y,C),S===null?w=O:S.sibling=O,S=O,_=P}if(A.done)return n(x,_),Zt&&Go(x,C),w;if(_===null){for(;!A.done;C++,A=b.next())A=h(x,A.value,N),A!==null&&(y=i(A,y,C),S===null?w=A:S.sibling=A,S=A);return Zt&&Go(x,C),w}for(_=r(x,_);!A.done;C++,A=b.next())A=m(_,x,C,A.value,N),A!==null&&(e&&A.alternate!==null&&_.delete(A.key===null?C:A.key),y=i(A,y,C),S===null?w=A:S.sibling=A,S=A);return e&&_.forEach(function(E){return t(x,E)}),Zt&&Go(x,C),w}function g(x,y,b,N){if(typeof b=="object"&&b!==null&&b.type===Pc&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case $m:e:{for(var w=b.key,S=y;S!==null;){if(S.key===w){if(w=b.type,w===Pc){if(S.tag===7){n(x,S.sibling),y=a(S,b.props.children),y.return=x,x=y;break e}}else if(S.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Mi&&Y2(w)===S.type){n(x,S.sibling),y=a(S,b.props),y.ref=Kd(x,S,b),y.return=x,x=y;break e}n(x,S);break}else t(x,S);S=S.sibling}b.type===Pc?(y=wl(b.props.children,x.mode,N,b.key),y.return=x,x=y):(N=Hp(b.type,b.key,b.props,null,x.mode,N),N.ref=Kd(x,y,b),N.return=x,x=N)}return o(x);case Cc:e:{for(S=b.key;y!==null;){if(y.key===S)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){n(x,y.sibling),y=a(y,b.children||[]),y.return=x,x=y;break e}else{n(x,y);break}else t(x,y);y=y.sibling}y=b0(b,x.mode,N),y.return=x,x=y}return o(x);case Mi:return S=b._init,g(x,y,S(b._payload),N)}if(fh(b))return v(x,y,b,N);if(Vd(b))return p(x,y,b,N);Km(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(n(x,y.sibling),y=a(y,b),y.return=x,x=y):(n(x,y),y=y0(b,x.mode,N),y.return=x,x=y),o(x)):n(x,y)}return g}var ju=zD(!0),VD=zD(!1),fg=So(null),mg=null,Ic=null,vN=null;function xN(){vN=Ic=mg=null}function yN(e){var t=fg.current;Yt(fg),e._currentValue=t}function Jb(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Kc(e,t){mg=e,vN=Ic=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Mr=!0),e.firstContext=null)}function vs(e){var t=e._currentValue;if(vN!==e)if(e={context:e,memoizedValue:t,next:null},Ic===null){if(mg===null)throw Error(ve(308));Ic=e,mg.dependencies={lanes:0,firstContext:e}}else Ic=Ic.next=e;return t}var sl=null;function bN(e){sl===null?sl=[e]:sl.push(e)}function qD(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,bN(t)):(n.next=a.next,a.next=n),t.interleaved=n,li(e,r)}function li(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Ii=!1;function jN(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function UD(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ti(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function io(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,vt&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,li(e,n)}return a=r.interleaved,a===null?(t.next=t,bN(r)):(t.next=a.next,a.next=t),r.interleaved=t,li(e,n)}function Bp(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,iN(e,n)}}function Q2(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?a=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?a=i=t:i=i.next=t}else a=i=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function pg(e,t,n,r){var a=e.updateQueue;Ii=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=a.baseState;o=0,d=u=c=null,l=i;do{var f=l.lane,m=l.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,p=l;switch(f=t,m=n,p.tag){case 1:if(v=p.payload,typeof v=="function"){h=v.call(m,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=p.payload,f=typeof v=="function"?v.call(m,h,f):v,f==null)break e;h=sn({},h,f);break e;case 2:Ii=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=a.effects,f===null?a.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=h):d=d.next=m,o|=f;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;f=l,l=f.next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}while(!0);if(d===null&&(c=h),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);kl|=o,e.lanes=o,e.memoizedState=h}}function X2(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(ve(191,a));a.call(r)}}}var cm={},ja=So(cm),Xh=So(cm),Jh=So(cm);function al(e){if(e===cm)throw Error(ve(174));return e}function wN(e,t){switch(Vt(Jh,t),Vt(Xh,e),Vt(ja,cm),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ob(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ob(t,e)}Yt(ja),Vt(ja,t)}function wu(){Yt(ja),Yt(Xh),Yt(Jh)}function WD(e){al(Jh.current);var t=al(ja.current),n=Ob(t,e.type);t!==n&&(Vt(Xh,e),Vt(ja,n))}function NN(e){Xh.current===e&&(Yt(ja),Yt(Xh))}var nn=So(0);function gg(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var f0=[];function SN(){for(var e=0;e<f0.length;e++)f0[e]._workInProgressVersionPrimary=null;f0.length=0}var zp=vi.ReactCurrentDispatcher,m0=vi.ReactCurrentBatchConfig,Al=0,rn=null,Pn=null,Ln=null,vg=!1,Ch=!1,Zh=0,PV=0;function Jn(){throw Error(ve(321))}function _N(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Hs(e[n],t[n]))return!1;return!0}function CN(e,t,n,r,a,i){if(Al=i,rn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,zp.current=e===null||e.memoizedState===null?TV:OV,e=n(r,a),Ch){i=0;do{if(Ch=!1,Zh=0,25<=i)throw Error(ve(301));i+=1,Ln=Pn=null,t.updateQueue=null,zp.current=DV,e=n(r,a)}while(Ch)}if(zp.current=xg,t=Pn!==null&&Pn.next!==null,Al=0,Ln=Pn=rn=null,vg=!1,t)throw Error(ve(300));return e}function PN(){var e=Zh!==0;return Zh=0,e}function oa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ln===null?rn.memoizedState=Ln=e:Ln=Ln.next=e,Ln}function xs(){if(Pn===null){var e=rn.alternate;e=e!==null?e.memoizedState:null}else e=Pn.next;var t=Ln===null?rn.memoizedState:Ln.next;if(t!==null)Ln=t,Pn=e;else{if(e===null)throw Error(ve(310));Pn=e,e={memoizedState:Pn.memoizedState,baseState:Pn.baseState,baseQueue:Pn.baseQueue,queue:Pn.queue,next:null},Ln===null?rn.memoizedState=Ln=e:Ln=Ln.next=e}return Ln}function ef(e,t){return typeof t=="function"?t(e):t}function p0(e){var t=xs(),n=t.queue;if(n===null)throw Error(ve(311));n.lastRenderedReducer=e;var r=Pn,a=r.baseQueue,i=n.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}r.baseQueue=a=i,n.pending=null}if(a!==null){i=a.next,r=r.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((Al&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=r):c=c.next=h,rn.lanes|=d,kl|=d}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=l,Hs(r,t.memoizedState)||(Mr=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do i=a.lane,rn.lanes|=i,kl|=i,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function g0(e){var t=xs(),n=t.queue;if(n===null)throw Error(ve(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Hs(i,t.memoizedState)||(Mr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function HD(){}function KD(e,t){var n=rn,r=xs(),a=t(),i=!Hs(r.memoizedState,a);if(i&&(r.memoizedState=a,Mr=!0),r=r.queue,AN(QD.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Ln!==null&&Ln.memoizedState.tag&1){if(n.flags|=2048,tf(9,YD.bind(null,n,r,a,t),void 0,null),zn===null)throw Error(ve(349));Al&30||GD(n,t,a)}return a}function GD(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=rn.updateQueue,t===null?(t={lastEffect:null,stores:null},rn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function YD(e,t,n,r){t.value=n,t.getSnapshot=r,XD(t)&&JD(e)}function QD(e,t,n){return n(function(){XD(t)&&JD(e)})}function XD(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Hs(e,n)}catch{return!0}}function JD(e){var t=li(e,1);t!==null&&Us(t,e,1,-1)}function J2(e){var t=oa();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ef,lastRenderedState:e},t.queue=e,e=e.dispatch=EV.bind(null,rn,e),[t.memoizedState,e]}function tf(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=rn.updateQueue,t===null?(t={lastEffect:null,stores:null},rn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function ZD(){return xs().memoizedState}function Vp(e,t,n,r){var a=oa();rn.flags|=e,a.memoizedState=tf(1|t,n,void 0,r===void 0?null:r)}function Qv(e,t,n,r){var a=xs();r=r===void 0?null:r;var i=void 0;if(Pn!==null){var o=Pn.memoizedState;if(i=o.destroy,r!==null&&_N(r,o.deps)){a.memoizedState=tf(t,n,i,r);return}}rn.flags|=e,a.memoizedState=tf(1|t,n,i,r)}function Z2(e,t){return Vp(8390656,8,e,t)}function AN(e,t){return Qv(2048,8,e,t)}function eM(e,t){return Qv(4,2,e,t)}function tM(e,t){return Qv(4,4,e,t)}function nM(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function rM(e,t,n){return n=n!=null?n.concat([e]):null,Qv(4,4,nM.bind(null,t,e),n)}function kN(){}function sM(e,t){var n=xs();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&_N(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function aM(e,t){var n=xs();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&_N(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function iM(e,t,n){return Al&21?(Hs(n,t)||(n=dD(),rn.lanes|=n,kl|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Mr=!0),e.memoizedState=n)}function AV(e,t){var n=kt;kt=n!==0&&4>n?n:4,e(!0);var r=m0.transition;m0.transition={};try{e(!1),t()}finally{kt=n,m0.transition=r}}function oM(){return xs().memoizedState}function kV(e,t,n){var r=lo(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},lM(e))cM(t,n);else if(n=qD(e,t,n,r),n!==null){var a=br();Us(n,e,r,a),uM(n,t,r)}}function EV(e,t,n){var r=lo(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(lM(e))cM(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(a.hasEagerState=!0,a.eagerState=l,Hs(l,o)){var c=t.interleaved;c===null?(a.next=a,bN(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}n=qD(e,t,a,r),n!==null&&(a=br(),Us(n,e,r,a),uM(n,t,r))}}function lM(e){var t=e.alternate;return e===rn||t!==null&&t===rn}function cM(e,t){Ch=vg=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function uM(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,iN(e,n)}}var xg={readContext:vs,useCallback:Jn,useContext:Jn,useEffect:Jn,useImperativeHandle:Jn,useInsertionEffect:Jn,useLayoutEffect:Jn,useMemo:Jn,useReducer:Jn,useRef:Jn,useState:Jn,useDebugValue:Jn,useDeferredValue:Jn,useTransition:Jn,useMutableSource:Jn,useSyncExternalStore:Jn,useId:Jn,unstable_isNewReconciler:!1},TV={readContext:vs,useCallback:function(e,t){return oa().memoizedState=[e,t===void 0?null:t],e},useContext:vs,useEffect:Z2,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Vp(4194308,4,nM.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vp(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vp(4,2,e,t)},useMemo:function(e,t){var n=oa();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=oa();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=kV.bind(null,rn,e),[r.memoizedState,e]},useRef:function(e){var t=oa();return e={current:e},t.memoizedState=e},useState:J2,useDebugValue:kN,useDeferredValue:function(e){return oa().memoizedState=e},useTransition:function(){var e=J2(!1),t=e[0];return e=AV.bind(null,e[1]),oa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=rn,a=oa();if(Zt){if(n===void 0)throw Error(ve(407));n=n()}else{if(n=t(),zn===null)throw Error(ve(349));Al&30||GD(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,Z2(QD.bind(null,r,i,e),[e]),r.flags|=2048,tf(9,YD.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=oa(),t=zn.identifierPrefix;if(Zt){var n=Xa,r=Qa;n=(r&~(1<<32-qs(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Zh++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=PV++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},OV={readContext:vs,useCallback:sM,useContext:vs,useEffect:AN,useImperativeHandle:rM,useInsertionEffect:eM,useLayoutEffect:tM,useMemo:aM,useReducer:p0,useRef:ZD,useState:function(){return p0(ef)},useDebugValue:kN,useDeferredValue:function(e){var t=xs();return iM(t,Pn.memoizedState,e)},useTransition:function(){var e=p0(ef)[0],t=xs().memoizedState;return[e,t]},useMutableSource:HD,useSyncExternalStore:KD,useId:oM,unstable_isNewReconciler:!1},DV={readContext:vs,useCallback:sM,useContext:vs,useEffect:AN,useImperativeHandle:rM,useInsertionEffect:eM,useLayoutEffect:tM,useMemo:aM,useReducer:g0,useRef:ZD,useState:function(){return g0(ef)},useDebugValue:kN,useDeferredValue:function(e){var t=xs();return Pn===null?t.memoizedState=e:iM(t,Pn.memoizedState,e)},useTransition:function(){var e=g0(ef)[0],t=xs().memoizedState;return[e,t]},useMutableSource:HD,useSyncExternalStore:KD,useId:oM,unstable_isNewReconciler:!1};function Os(e,t){if(e&&e.defaultProps){t=sn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Zb(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:sn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Xv={isMounted:function(e){return(e=e._reactInternals)?Wl(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=br(),a=lo(e),i=ti(r,a);i.payload=t,n!=null&&(i.callback=n),t=io(e,i,a),t!==null&&(Us(t,e,a,r),Bp(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=br(),a=lo(e),i=ti(r,a);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=io(e,i,a),t!==null&&(Us(t,e,a,r),Bp(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=br(),r=lo(e),a=ti(n,r);a.tag=2,t!=null&&(a.callback=t),t=io(e,a,r),t!==null&&(Us(t,e,r,n),Bp(t,e,r))}};function eC(e,t,n,r,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!Kh(n,r)||!Kh(a,i):!0}function dM(e,t,n){var r=!1,a=xo,i=t.contextType;return typeof i=="object"&&i!==null?i=vs(i):(a=Rr(t)?Cl:cr.current,r=t.contextTypes,i=(r=r!=null)?yu(e,a):xo),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Xv,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function tC(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Xv.enqueueReplaceState(t,t.state,null)}function ej(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},jN(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=vs(i):(i=Rr(t)?Cl:cr.current,a.context=yu(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Zb(e,t,i,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Xv.enqueueReplaceState(a,a.state,null),pg(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Nu(e,t){try{var n="",r=t;do n+=oz(r),r=r.return;while(r);var a=n}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function v0(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function tj(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var MV=typeof WeakMap=="function"?WeakMap:Map;function hM(e,t,n){n=ti(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){bg||(bg=!0,dj=r),tj(e,t)},n}function fM(e,t,n){n=ti(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){tj(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){tj(e,t),typeof r!="function"&&(oo===null?oo=new Set([this]):oo.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function nC(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new MV;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=GV.bind(null,e,t,n),t.then(e,e))}function rC(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function sC(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ti(-1,1),t.tag=2,io(n,t,1))),n.lanes|=1),e)}var IV=vi.ReactCurrentOwner,Mr=!1;function pr(e,t,n,r){t.child=e===null?VD(t,null,n,r):ju(t,e.child,n,r)}function aC(e,t,n,r,a){n=n.render;var i=t.ref;return Kc(t,a),r=CN(e,t,n,r,i,a),n=PN(),e!==null&&!Mr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,ci(e,t,a)):(Zt&&n&&mN(t),t.flags|=1,pr(e,t,r,a),t.child)}function iC(e,t,n,r,a){if(e===null){var i=n.type;return typeof i=="function"&&!RN(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,mM(e,t,i,r,a)):(e=Hp(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Kh,n(o,r)&&e.ref===t.ref)return ci(e,t,a)}return t.flags|=1,e=co(i,r),e.ref=t.ref,e.return=t,t.child=e}function mM(e,t,n,r,a){if(e!==null){var i=e.memoizedProps;if(Kh(i,r)&&e.ref===t.ref)if(Mr=!1,t.pendingProps=r=i,(e.lanes&a)!==0)e.flags&131072&&(Mr=!0);else return t.lanes=e.lanes,ci(e,t,a)}return nj(e,t,n,r,a)}function pM(e,t,n){var r=t.pendingProps,a=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Vt(Rc,Wr),Wr|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Vt(Rc,Wr),Wr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Vt(Rc,Wr),Wr|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Vt(Rc,Wr),Wr|=r;return pr(e,t,a,n),t.child}function gM(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function nj(e,t,n,r,a){var i=Rr(n)?Cl:cr.current;return i=yu(t,i),Kc(t,a),n=CN(e,t,n,r,i,a),r=PN(),e!==null&&!Mr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,ci(e,t,a)):(Zt&&r&&mN(t),t.flags|=1,pr(e,t,n,a),t.child)}function oC(e,t,n,r,a){if(Rr(n)){var i=!0;ug(t)}else i=!1;if(Kc(t,a),t.stateNode===null)qp(e,t),dM(t,n,r),ej(t,n,r,a),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=vs(u):(u=Rr(n)?Cl:cr.current,u=yu(t,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&tC(t,o,r,u),Ii=!1;var f=t.memoizedState;o.state=f,pg(t,r,o,a),c=t.memoizedState,l!==r||f!==c||$r.current||Ii?(typeof d=="function"&&(Zb(t,n,d,r),c=t.memoizedState),(l=Ii||eC(t,n,l,r,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,UD(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Os(t.type,l),o.props=u,h=t.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=vs(c):(c=Rr(n)?Cl:cr.current,c=yu(t,c));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&tC(t,o,r,c),Ii=!1,f=t.memoizedState,o.state=f,pg(t,r,o,a);var v=t.memoizedState;l!==h||f!==v||$r.current||Ii?(typeof m=="function"&&(Zb(t,n,m,r),v=t.memoizedState),(u=Ii||eC(t,n,u,r,f,v,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),o.props=r,o.state=v,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return rj(e,t,n,r,i,a)}function rj(e,t,n,r,a,i){gM(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return a&&H2(t,n,!1),ci(e,t,i);r=t.stateNode,IV.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=ju(t,e.child,null,i),t.child=ju(t,null,l,i)):pr(e,t,l,i),t.memoizedState=r.state,a&&H2(t,n,!0),t.child}function vM(e){var t=e.stateNode;t.pendingContext?W2(e,t.pendingContext,t.pendingContext!==t.context):t.context&&W2(e,t.context,!1),wN(e,t.containerInfo)}function lC(e,t,n,r,a){return bu(),gN(a),t.flags|=256,pr(e,t,n,r),t.child}var sj={dehydrated:null,treeContext:null,retryLane:0};function aj(e){return{baseLanes:e,cachePool:null,transitions:null}}function xM(e,t,n){var r=t.pendingProps,a=nn.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Vt(nn,a&1),e===null)return Xb(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ex(o,r,0,null),e=wl(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=aj(n),t.memoizedState=sj,e):EN(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return $V(e,t,o,r,l,a,n);if(i){i=r.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=co(a,c),r.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=co(l,i):(i=wl(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?aj(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=sj,r}return i=e.child,e=i.sibling,r=co(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function EN(e,t){return t=ex({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Gm(e,t,n,r){return r!==null&&gN(r),ju(t,e.child,null,n),e=EN(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function $V(e,t,n,r,a,i,o){if(n)return t.flags&256?(t.flags&=-257,r=v0(Error(ve(422))),Gm(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=ex({mode:"visible",children:r.children},a,0,null),i=wl(i,a,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&ju(t,e.child,null,o),t.child.memoizedState=aj(o),t.memoizedState=sj,i);if(!(t.mode&1))return Gm(e,t,o,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(ve(419)),r=v0(i,r,void 0),Gm(e,t,o,r)}if(l=(o&e.childLanes)!==0,Mr||l){if(r=zn,r!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,li(e,a),Us(r,e,a,-1))}return $N(),r=v0(Error(ve(421))),Gm(e,t,o,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=YV.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Qr=ao(a.nextSibling),Jr=t,Zt=!0,Ls=null,e!==null&&(cs[us++]=Qa,cs[us++]=Xa,cs[us++]=Pl,Qa=e.id,Xa=e.overflow,Pl=t),t=EN(t,r.children),t.flags|=4096,t)}function cC(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Jb(e.return,t,n)}function x0(e,t,n,r,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function yM(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(pr(e,t,r.children,n),r=nn.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&cC(e,n,t);else if(e.tag===19)cC(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Vt(nn,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&gg(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),x0(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&gg(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}x0(t,!0,n,null,i);break;case"together":x0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qp(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ci(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),kl|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ve(153));if(t.child!==null){for(e=t.child,n=co(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=co(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function RV(e,t,n){switch(t.tag){case 3:vM(t),bu();break;case 5:WD(t);break;case 1:Rr(t.type)&&ug(t);break;case 4:wN(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Vt(fg,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Vt(nn,nn.current&1),t.flags|=128,null):n&t.child.childLanes?xM(e,t,n):(Vt(nn,nn.current&1),e=ci(e,t,n),e!==null?e.sibling:null);Vt(nn,nn.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return yM(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Vt(nn,nn.current),r)break;return null;case 22:case 23:return t.lanes=0,pM(e,t,n)}return ci(e,t,n)}var bM,ij,jM,wM;bM=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ij=function(){};jM=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,al(ja.current);var i=null;switch(n){case"input":a=Ab(e,a),r=Ab(e,r),i=[];break;case"select":a=sn({},a,{value:void 0}),r=sn({},r,{value:void 0}),i=[];break;case"textarea":a=Tb(e,a),r=Tb(e,r),i=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=lg)}Db(n,r);var o;n=null;for(u in a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Bh.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=a!=null?a[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Bh.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ht("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};wM=function(e,t,n,r){n!==r&&(t.flags|=4)};function Gd(e,t){if(!Zt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Zn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function LV(e,t,n){var r=t.pendingProps;switch(pN(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zn(t),null;case 1:return Rr(t.type)&&cg(),Zn(t),null;case 3:return r=t.stateNode,wu(),Yt($r),Yt(cr),SN(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Hm(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ls!==null&&(mj(Ls),Ls=null))),ij(e,t),Zn(t),null;case 5:NN(t);var a=al(Jh.current);if(n=t.type,e!==null&&t.stateNode!=null)jM(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ve(166));return Zn(t),null}if(e=al(ja.current),Hm(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[ha]=t,r[Qh]=i,e=(t.mode&1)!==0,n){case"dialog":Ht("cancel",r),Ht("close",r);break;case"iframe":case"object":case"embed":Ht("load",r);break;case"video":case"audio":for(a=0;a<ph.length;a++)Ht(ph[a],r);break;case"source":Ht("error",r);break;case"img":case"image":case"link":Ht("error",r),Ht("load",r);break;case"details":Ht("toggle",r);break;case"input":x2(r,i),Ht("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ht("invalid",r);break;case"textarea":b2(r,i),Ht("invalid",r)}Db(n,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Wm(r.textContent,l,e),a=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Wm(r.textContent,l,e),a=["children",""+l]):Bh.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ht("scroll",r)}switch(n){case"input":Rm(r),y2(r,i,!0);break;case"textarea":Rm(r),j2(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=lg)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=QO(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[ha]=t,e[Qh]=r,bM(e,t,!1,!1),t.stateNode=e;e:{switch(o=Mb(n,r),n){case"dialog":Ht("cancel",e),Ht("close",e),a=r;break;case"iframe":case"object":case"embed":Ht("load",e),a=r;break;case"video":case"audio":for(a=0;a<ph.length;a++)Ht(ph[a],e);a=r;break;case"source":Ht("error",e),a=r;break;case"img":case"image":case"link":Ht("error",e),Ht("load",e),a=r;break;case"details":Ht("toggle",e),a=r;break;case"input":x2(e,r),a=Ab(e,r),Ht("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=sn({},r,{value:void 0}),Ht("invalid",e);break;case"textarea":b2(e,r),a=Tb(e,r),Ht("invalid",e);break;default:a=r}Db(n,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?ZO(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&XO(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&zh(e,c):typeof c=="number"&&zh(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Bh.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ht("scroll",e):c!=null&&eN(e,i,c,o))}switch(n){case"input":Rm(e),y2(e,r,!1);break;case"textarea":Rm(e),j2(e);break;case"option":r.value!=null&&e.setAttribute("value",""+vo(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?qc(e,!!r.multiple,i,!1):r.defaultValue!=null&&qc(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=lg)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Zn(t),null;case 6:if(e&&t.stateNode!=null)wM(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ve(166));if(n=al(Jh.current),al(ja.current),Hm(t)){if(r=t.stateNode,n=t.memoizedProps,r[ha]=t,(i=r.nodeValue!==n)&&(e=Jr,e!==null))switch(e.tag){case 3:Wm(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Wm(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ha]=t,t.stateNode=r}return Zn(t),null;case 13:if(Yt(nn),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Zt&&Qr!==null&&t.mode&1&&!(t.flags&128))BD(),bu(),t.flags|=98560,i=!1;else if(i=Hm(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(ve(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ve(317));i[ha]=t}else bu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Zn(t),i=!1}else Ls!==null&&(mj(Ls),Ls=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||nn.current&1?En===0&&(En=3):$N())),t.updateQueue!==null&&(t.flags|=4),Zn(t),null);case 4:return wu(),ij(e,t),e===null&&Gh(t.stateNode.containerInfo),Zn(t),null;case 10:return yN(t.type._context),Zn(t),null;case 17:return Rr(t.type)&&cg(),Zn(t),null;case 19:if(Yt(nn),i=t.memoizedState,i===null)return Zn(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)Gd(i,!1);else{if(En!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=gg(e),o!==null){for(t.flags|=128,Gd(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Vt(nn,nn.current&1|2),t.child}e=e.sibling}i.tail!==null&&mn()>Su&&(t.flags|=128,r=!0,Gd(i,!1),t.lanes=4194304)}else{if(!r)if(e=gg(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Gd(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Zt)return Zn(t),null}else 2*mn()-i.renderingStartTime>Su&&n!==1073741824&&(t.flags|=128,r=!0,Gd(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=mn(),t.sibling=null,n=nn.current,Vt(nn,r?n&1|2:n&1),t):(Zn(t),null);case 22:case 23:return IN(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Wr&1073741824&&(Zn(t),t.subtreeFlags&6&&(t.flags|=8192)):Zn(t),null;case 24:return null;case 25:return null}throw Error(ve(156,t.tag))}function FV(e,t){switch(pN(t),t.tag){case 1:return Rr(t.type)&&cg(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return wu(),Yt($r),Yt(cr),SN(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return NN(t),null;case 13:if(Yt(nn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ve(340));bu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Yt(nn),null;case 4:return wu(),null;case 10:return yN(t.type._context),null;case 22:case 23:return IN(),null;case 24:return null;default:return null}}var Ym=!1,sr=!1,BV=typeof WeakSet=="function"?WeakSet:Set,Oe=null;function $c(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){cn(e,t,r)}else n.current=null}function oj(e,t,n){try{n()}catch(r){cn(e,t,r)}}var uC=!1;function zV(e,t){if(Ub=ag,e=PD(),fN(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==n||a!==0&&h.nodeType!==3||(l=o+a),h!==i||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===e)break t;if(f===n&&++u===a&&(l=o),f===i&&++d===r&&(c=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Wb={focusedElem:e,selectionRange:n},ag=!1,Oe=t;Oe!==null;)if(t=Oe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Oe=e;else for(;Oe!==null;){t=Oe;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var p=v.memoizedProps,g=v.memoizedState,x=t.stateNode,y=x.getSnapshotBeforeUpdate(t.elementType===t.type?p:Os(t.type,p),g);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ve(163))}}catch(N){cn(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,Oe=e;break}Oe=t.return}return v=uC,uC=!1,v}function Ph(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&oj(t,n,i)}a=a.next}while(a!==r)}}function Jv(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function lj(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function NM(e){var t=e.alternate;t!==null&&(e.alternate=null,NM(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ha],delete t[Qh],delete t[Gb],delete t[NV],delete t[SV])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function SM(e){return e.tag===5||e.tag===3||e.tag===4}function dC(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||SM(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function cj(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=lg));else if(r!==4&&(e=e.child,e!==null))for(cj(e,t,n),e=e.sibling;e!==null;)cj(e,t,n),e=e.sibling}function uj(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(uj(e,t,n),e=e.sibling;e!==null;)uj(e,t,n),e=e.sibling}var Wn=null,Is=!1;function _i(e,t,n){for(n=n.child;n!==null;)_M(e,t,n),n=n.sibling}function _M(e,t,n){if(ba&&typeof ba.onCommitFiberUnmount=="function")try{ba.onCommitFiberUnmount(Uv,n)}catch{}switch(n.tag){case 5:sr||$c(n,t);case 6:var r=Wn,a=Is;Wn=null,_i(e,t,n),Wn=r,Is=a,Wn!==null&&(Is?(e=Wn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Wn.removeChild(n.stateNode));break;case 18:Wn!==null&&(Is?(e=Wn,n=n.stateNode,e.nodeType===8?d0(e.parentNode,n):e.nodeType===1&&d0(e,n),Wh(e)):d0(Wn,n.stateNode));break;case 4:r=Wn,a=Is,Wn=n.stateNode.containerInfo,Is=!0,_i(e,t,n),Wn=r,Is=a;break;case 0:case 11:case 14:case 15:if(!sr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&oj(n,t,o),a=a.next}while(a!==r)}_i(e,t,n);break;case 1:if(!sr&&($c(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){cn(n,t,l)}_i(e,t,n);break;case 21:_i(e,t,n);break;case 22:n.mode&1?(sr=(r=sr)||n.memoizedState!==null,_i(e,t,n),sr=r):_i(e,t,n);break;default:_i(e,t,n)}}function hC(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new BV),t.forEach(function(r){var a=QV.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function Ps(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Wn=l.stateNode,Is=!1;break e;case 3:Wn=l.stateNode.containerInfo,Is=!0;break e;case 4:Wn=l.stateNode.containerInfo,Is=!0;break e}l=l.return}if(Wn===null)throw Error(ve(160));_M(i,o,a),Wn=null,Is=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){cn(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)CM(t,e),t=t.sibling}function CM(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ps(t,e),ia(e),r&4){try{Ph(3,e,e.return),Jv(3,e)}catch(p){cn(e,e.return,p)}try{Ph(5,e,e.return)}catch(p){cn(e,e.return,p)}}break;case 1:Ps(t,e),ia(e),r&512&&n!==null&&$c(n,n.return);break;case 5:if(Ps(t,e),ia(e),r&512&&n!==null&&$c(n,n.return),e.flags&32){var a=e.stateNode;try{zh(a,"")}catch(p){cn(e,e.return,p)}}if(r&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&GO(a,i),Mb(l,o);var u=Mb(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?ZO(a,h):d==="dangerouslySetInnerHTML"?XO(a,h):d==="children"?zh(a,h):eN(a,d,h,u)}switch(l){case"input":kb(a,i);break;case"textarea":YO(a,i);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?qc(a,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?qc(a,!!i.multiple,i.defaultValue,!0):qc(a,!!i.multiple,i.multiple?[]:"",!1))}a[Qh]=i}catch(p){cn(e,e.return,p)}}break;case 6:if(Ps(t,e),ia(e),r&4){if(e.stateNode===null)throw Error(ve(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(p){cn(e,e.return,p)}}break;case 3:if(Ps(t,e),ia(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Wh(t.containerInfo)}catch(p){cn(e,e.return,p)}break;case 4:Ps(t,e),ia(e);break;case 13:Ps(t,e),ia(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(DN=mn())),r&4&&hC(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(sr=(u=sr)||d,Ps(t,e),sr=u):Ps(t,e),ia(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Oe=e,d=e.child;d!==null;){for(h=Oe=d;Oe!==null;){switch(f=Oe,m=f.child,f.tag){case 0:case 11:case 14:case 15:Ph(4,f,f.return);break;case 1:$c(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(p){cn(r,n,p)}}break;case 5:$c(f,f.return);break;case 22:if(f.memoizedState!==null){mC(h);continue}}m!==null?(m.return=f,Oe=m):mC(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{a=h.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=JO("display",o))}catch(p){cn(e,e.return,p)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(p){cn(e,e.return,p)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ps(t,e),ia(e),r&4&&hC(e);break;case 21:break;default:Ps(t,e),ia(e)}}function ia(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(SM(n)){var r=n;break e}n=n.return}throw Error(ve(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(zh(a,""),r.flags&=-33);var i=dC(e);uj(e,i,a);break;case 3:case 4:var o=r.stateNode.containerInfo,l=dC(e);cj(e,l,o);break;default:throw Error(ve(161))}}catch(c){cn(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function VV(e,t,n){Oe=e,PM(e)}function PM(e,t,n){for(var r=(e.mode&1)!==0;Oe!==null;){var a=Oe,i=a.child;if(a.tag===22&&r){var o=a.memoizedState!==null||Ym;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||sr;l=Ym;var u=sr;if(Ym=o,(sr=c)&&!u)for(Oe=a;Oe!==null;)o=Oe,c=o.child,o.tag===22&&o.memoizedState!==null?pC(a):c!==null?(c.return=o,Oe=c):pC(a);for(;i!==null;)Oe=i,PM(i),i=i.sibling;Oe=a,Ym=l,sr=u}fC(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Oe=i):fC(e)}}function fC(e){for(;Oe!==null;){var t=Oe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:sr||Jv(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!sr)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Os(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&X2(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}X2(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Wh(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ve(163))}sr||t.flags&512&&lj(t)}catch(f){cn(t,t.return,f)}}if(t===e){Oe=null;break}if(n=t.sibling,n!==null){n.return=t.return,Oe=n;break}Oe=t.return}}function mC(e){for(;Oe!==null;){var t=Oe;if(t===e){Oe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Oe=n;break}Oe=t.return}}function pC(e){for(;Oe!==null;){var t=Oe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Jv(4,t)}catch(c){cn(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(c){cn(t,a,c)}}var i=t.return;try{lj(t)}catch(c){cn(t,i,c)}break;case 5:var o=t.return;try{lj(t)}catch(c){cn(t,o,c)}}}catch(c){cn(t,t.return,c)}if(t===e){Oe=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Oe=l;break}Oe=t.return}}var qV=Math.ceil,yg=vi.ReactCurrentDispatcher,TN=vi.ReactCurrentOwner,ms=vi.ReactCurrentBatchConfig,vt=0,zn=null,yn=null,Kn=0,Wr=0,Rc=So(0),En=0,nf=null,kl=0,Zv=0,ON=0,Ah=null,Tr=null,DN=0,Su=1/0,Va=null,bg=!1,dj=null,oo=null,Qm=!1,Ji=null,jg=0,kh=0,hj=null,Up=-1,Wp=0;function br(){return vt&6?mn():Up!==-1?Up:Up=mn()}function lo(e){return e.mode&1?vt&2&&Kn!==0?Kn&-Kn:CV.transition!==null?(Wp===0&&(Wp=dD()),Wp):(e=kt,e!==0||(e=window.event,e=e===void 0?16:xD(e.type)),e):1}function Us(e,t,n,r){if(50<kh)throw kh=0,hj=null,Error(ve(185));im(e,n,r),(!(vt&2)||e!==zn)&&(e===zn&&(!(vt&2)&&(Zv|=n),En===4&&Li(e,Kn)),Lr(e,r),n===1&&vt===0&&!(t.mode&1)&&(Su=mn()+500,Yv&&_o()))}function Lr(e,t){var n=e.callbackNode;Cz(e,t);var r=sg(e,e===zn?Kn:0);if(r===0)n!==null&&S2(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&S2(n),t===1)e.tag===0?_V(gC.bind(null,e)):RD(gC.bind(null,e)),jV(function(){!(vt&6)&&_o()}),n=null;else{switch(hD(r)){case 1:n=aN;break;case 4:n=cD;break;case 16:n=rg;break;case 536870912:n=uD;break;default:n=rg}n=IM(n,AM.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function AM(e,t){if(Up=-1,Wp=0,vt&6)throw Error(ve(327));var n=e.callbackNode;if(Gc()&&e.callbackNode!==n)return null;var r=sg(e,e===zn?Kn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=wg(e,r);else{t=r;var a=vt;vt|=2;var i=EM();(zn!==e||Kn!==t)&&(Va=null,Su=mn()+500,jl(e,t));do try{HV();break}catch(l){kM(e,l)}while(!0);xN(),yg.current=i,vt=a,yn!==null?t=0:(zn=null,Kn=0,t=En)}if(t!==0){if(t===2&&(a=Fb(e),a!==0&&(r=a,t=fj(e,a))),t===1)throw n=nf,jl(e,0),Li(e,r),Lr(e,mn()),n;if(t===6)Li(e,r);else{if(a=e.current.alternate,!(r&30)&&!UV(a)&&(t=wg(e,r),t===2&&(i=Fb(e),i!==0&&(r=i,t=fj(e,i))),t===1))throw n=nf,jl(e,0),Li(e,r),Lr(e,mn()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(ve(345));case 2:Yo(e,Tr,Va);break;case 3:if(Li(e,r),(r&130023424)===r&&(t=DN+500-mn(),10<t)){if(sg(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){br(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Kb(Yo.bind(null,e,Tr,Va),t);break}Yo(e,Tr,Va);break;case 4:if(Li(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-qs(r);i=1<<o,o=t[o],o>a&&(a=o),r&=~i}if(r=a,r=mn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*qV(r/1960))-r,10<r){e.timeoutHandle=Kb(Yo.bind(null,e,Tr,Va),r);break}Yo(e,Tr,Va);break;case 5:Yo(e,Tr,Va);break;default:throw Error(ve(329))}}}return Lr(e,mn()),e.callbackNode===n?AM.bind(null,e):null}function fj(e,t){var n=Ah;return e.current.memoizedState.isDehydrated&&(jl(e,t).flags|=256),e=wg(e,t),e!==2&&(t=Tr,Tr=n,t!==null&&mj(t)),e}function mj(e){Tr===null?Tr=e:Tr.push.apply(Tr,e)}function UV(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!Hs(i(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Li(e,t){for(t&=~ON,t&=~Zv,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-qs(t),r=1<<n;e[n]=-1,t&=~r}}function gC(e){if(vt&6)throw Error(ve(327));Gc();var t=sg(e,0);if(!(t&1))return Lr(e,mn()),null;var n=wg(e,t);if(e.tag!==0&&n===2){var r=Fb(e);r!==0&&(t=r,n=fj(e,r))}if(n===1)throw n=nf,jl(e,0),Li(e,t),Lr(e,mn()),n;if(n===6)throw Error(ve(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Yo(e,Tr,Va),Lr(e,mn()),null}function MN(e,t){var n=vt;vt|=1;try{return e(t)}finally{vt=n,vt===0&&(Su=mn()+500,Yv&&_o())}}function El(e){Ji!==null&&Ji.tag===0&&!(vt&6)&&Gc();var t=vt;vt|=1;var n=ms.transition,r=kt;try{if(ms.transition=null,kt=1,e)return e()}finally{kt=r,ms.transition=n,vt=t,!(vt&6)&&_o()}}function IN(){Wr=Rc.current,Yt(Rc)}function jl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,bV(n)),yn!==null)for(n=yn.return;n!==null;){var r=n;switch(pN(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&cg();break;case 3:wu(),Yt($r),Yt(cr),SN();break;case 5:NN(r);break;case 4:wu();break;case 13:Yt(nn);break;case 19:Yt(nn);break;case 10:yN(r.type._context);break;case 22:case 23:IN()}n=n.return}if(zn=e,yn=e=co(e.current,null),Kn=Wr=t,En=0,nf=null,ON=Zv=kl=0,Tr=Ah=null,sl!==null){for(t=0;t<sl.length;t++)if(n=sl[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=a,r.next=o}n.pending=r}sl=null}return e}function kM(e,t){do{var n=yn;try{if(xN(),zp.current=xg,vg){for(var r=rn.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}vg=!1}if(Al=0,Ln=Pn=rn=null,Ch=!1,Zh=0,TN.current=null,n===null||n.return===null){En=1,nf=t,yn=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=Kn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=rC(o);if(m!==null){m.flags&=-257,sC(m,o,l,i,t),m.mode&1&&nC(i,u,t),t=m,c=u;var v=t.updateQueue;if(v===null){var p=new Set;p.add(c),t.updateQueue=p}else v.add(c);break e}else{if(!(t&1)){nC(i,u,t),$N();break e}c=Error(ve(426))}}else if(Zt&&l.mode&1){var g=rC(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),sC(g,o,l,i,t),gN(Nu(c,l));break e}}i=c=Nu(c,l),En!==4&&(En=2),Ah===null?Ah=[i]:Ah.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var x=hM(i,c,t);Q2(i,x);break e;case 1:l=c;var y=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(oo===null||!oo.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var N=fM(i,l,t);Q2(i,N);break e}}i=i.return}while(i!==null)}OM(n)}catch(w){t=w,yn===n&&n!==null&&(yn=n=n.return);continue}break}while(!0)}function EM(){var e=yg.current;return yg.current=xg,e===null?xg:e}function $N(){(En===0||En===3||En===2)&&(En=4),zn===null||!(kl&268435455)&&!(Zv&268435455)||Li(zn,Kn)}function wg(e,t){var n=vt;vt|=2;var r=EM();(zn!==e||Kn!==t)&&(Va=null,jl(e,t));do try{WV();break}catch(a){kM(e,a)}while(!0);if(xN(),vt=n,yg.current=r,yn!==null)throw Error(ve(261));return zn=null,Kn=0,En}function WV(){for(;yn!==null;)TM(yn)}function HV(){for(;yn!==null&&!vz();)TM(yn)}function TM(e){var t=MM(e.alternate,e,Wr);e.memoizedProps=e.pendingProps,t===null?OM(e):yn=t,TN.current=null}function OM(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=FV(n,t),n!==null){n.flags&=32767,yn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{En=6,yn=null;return}}else if(n=LV(n,t,Wr),n!==null){yn=n;return}if(t=t.sibling,t!==null){yn=t;return}yn=t=e}while(t!==null);En===0&&(En=5)}function Yo(e,t,n){var r=kt,a=ms.transition;try{ms.transition=null,kt=1,KV(e,t,n,r)}finally{ms.transition=a,kt=r}return null}function KV(e,t,n,r){do Gc();while(Ji!==null);if(vt&6)throw Error(ve(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ve(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(Pz(e,i),e===zn&&(yn=zn=null,Kn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Qm||(Qm=!0,IM(rg,function(){return Gc(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ms.transition,ms.transition=null;var o=kt;kt=1;var l=vt;vt|=4,TN.current=null,zV(e,n),CM(n,e),fV(Wb),ag=!!Ub,Wb=Ub=null,e.current=n,VV(n),xz(),vt=l,kt=o,ms.transition=i}else e.current=n;if(Qm&&(Qm=!1,Ji=e,jg=a),i=e.pendingLanes,i===0&&(oo=null),jz(n.stateNode),Lr(e,mn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(bg)throw bg=!1,e=dj,dj=null,e;return jg&1&&e.tag!==0&&Gc(),i=e.pendingLanes,i&1?e===hj?kh++:(kh=0,hj=e):kh=0,_o(),null}function Gc(){if(Ji!==null){var e=hD(jg),t=ms.transition,n=kt;try{if(ms.transition=null,kt=16>e?16:e,Ji===null)var r=!1;else{if(e=Ji,Ji=null,jg=0,vt&6)throw Error(ve(331));var a=vt;for(vt|=4,Oe=e.current;Oe!==null;){var i=Oe,o=i.child;if(Oe.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Oe=u;Oe!==null;){var d=Oe;switch(d.tag){case 0:case 11:case 15:Ph(8,d,i)}var h=d.child;if(h!==null)h.return=d,Oe=h;else for(;Oe!==null;){d=Oe;var f=d.sibling,m=d.return;if(NM(d),d===u){Oe=null;break}if(f!==null){f.return=m,Oe=f;break}Oe=m}}}var v=i.alternate;if(v!==null){var p=v.child;if(p!==null){v.child=null;do{var g=p.sibling;p.sibling=null,p=g}while(p!==null)}}Oe=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Oe=o;else e:for(;Oe!==null;){if(i=Oe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ph(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,Oe=x;break e}Oe=i.return}}var y=e.current;for(Oe=y;Oe!==null;){o=Oe;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Oe=b;else e:for(o=y;Oe!==null;){if(l=Oe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Jv(9,l)}}catch(w){cn(l,l.return,w)}if(l===o){Oe=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,Oe=N;break e}Oe=l.return}}if(vt=a,_o(),ba&&typeof ba.onPostCommitFiberRoot=="function")try{ba.onPostCommitFiberRoot(Uv,e)}catch{}r=!0}return r}finally{kt=n,ms.transition=t}}return!1}function vC(e,t,n){t=Nu(n,t),t=hM(e,t,1),e=io(e,t,1),t=br(),e!==null&&(im(e,1,t),Lr(e,t))}function cn(e,t,n){if(e.tag===3)vC(e,e,n);else for(;t!==null;){if(t.tag===3){vC(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(oo===null||!oo.has(r))){e=Nu(n,e),e=fM(t,e,1),t=io(t,e,1),e=br(),t!==null&&(im(t,1,e),Lr(t,e));break}}t=t.return}}function GV(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=br(),e.pingedLanes|=e.suspendedLanes&n,zn===e&&(Kn&n)===n&&(En===4||En===3&&(Kn&130023424)===Kn&&500>mn()-DN?jl(e,0):ON|=n),Lr(e,t)}function DM(e,t){t===0&&(e.mode&1?(t=Bm,Bm<<=1,!(Bm&130023424)&&(Bm=4194304)):t=1);var n=br();e=li(e,t),e!==null&&(im(e,t,n),Lr(e,n))}function YV(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),DM(e,n)}function QV(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ve(314))}r!==null&&r.delete(t),DM(e,n)}var MM;MM=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||$r.current)Mr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Mr=!1,RV(e,t,n);Mr=!!(e.flags&131072)}else Mr=!1,Zt&&t.flags&1048576&&LD(t,hg,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qp(e,t),e=t.pendingProps;var a=yu(t,cr.current);Kc(t,n),a=CN(null,t,r,e,a,n);var i=PN();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Rr(r)?(i=!0,ug(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,jN(t),a.updater=Xv,t.stateNode=a,a._reactInternals=t,ej(t,r,e,n),t=rj(null,t,r,!0,i,n)):(t.tag=0,Zt&&i&&mN(t),pr(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qp(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=JV(r),e=Os(r,e),a){case 0:t=nj(null,t,r,e,n);break e;case 1:t=oC(null,t,r,e,n);break e;case 11:t=aC(null,t,r,e,n);break e;case 14:t=iC(null,t,r,Os(r.type,e),n);break e}throw Error(ve(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Os(r,a),nj(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Os(r,a),oC(e,t,r,a,n);case 3:e:{if(vM(t),e===null)throw Error(ve(387));r=t.pendingProps,i=t.memoizedState,a=i.element,UD(e,t),pg(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Nu(Error(ve(423)),t),t=lC(e,t,r,n,a);break e}else if(r!==a){a=Nu(Error(ve(424)),t),t=lC(e,t,r,n,a);break e}else for(Qr=ao(t.stateNode.containerInfo.firstChild),Jr=t,Zt=!0,Ls=null,n=VD(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(bu(),r===a){t=ci(e,t,n);break e}pr(e,t,r,n)}t=t.child}return t;case 5:return WD(t),e===null&&Xb(t),r=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,Hb(r,a)?o=null:i!==null&&Hb(r,i)&&(t.flags|=32),gM(e,t),pr(e,t,o,n),t.child;case 6:return e===null&&Xb(t),null;case 13:return xM(e,t,n);case 4:return wN(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ju(t,null,r,n):pr(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Os(r,a),aC(e,t,r,a,n);case 7:return pr(e,t,t.pendingProps,n),t.child;case 8:return pr(e,t,t.pendingProps.children,n),t.child;case 12:return pr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Vt(fg,r._currentValue),r._currentValue=o,i!==null)if(Hs(i.value,o)){if(i.children===a.children&&!$r.current){t=ci(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=ti(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Jb(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ve(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Jb(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}pr(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Kc(t,n),a=vs(a),r=r(a),t.flags|=1,pr(e,t,r,n),t.child;case 14:return r=t.type,a=Os(r,t.pendingProps),a=Os(r.type,a),iC(e,t,r,a,n);case 15:return mM(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Os(r,a),qp(e,t),t.tag=1,Rr(r)?(e=!0,ug(t)):e=!1,Kc(t,n),dM(t,r,a),ej(t,r,a,n),rj(null,t,r,!0,e,n);case 19:return yM(e,t,n);case 22:return pM(e,t,n)}throw Error(ve(156,t.tag))};function IM(e,t){return lD(e,t)}function XV(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hs(e,t,n,r){return new XV(e,t,n,r)}function RN(e){return e=e.prototype,!(!e||!e.isReactComponent)}function JV(e){if(typeof e=="function")return RN(e)?1:0;if(e!=null){if(e=e.$$typeof,e===nN)return 11;if(e===rN)return 14}return 2}function co(e,t){var n=e.alternate;return n===null?(n=hs(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Hp(e,t,n,r,a,i){var o=2;if(r=e,typeof e=="function")RN(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Pc:return wl(n.children,a,i,t);case tN:o=8,a|=8;break;case Sb:return e=hs(12,n,t,a|2),e.elementType=Sb,e.lanes=i,e;case _b:return e=hs(13,n,t,a),e.elementType=_b,e.lanes=i,e;case Cb:return e=hs(19,n,t,a),e.elementType=Cb,e.lanes=i,e;case WO:return ex(n,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case qO:o=10;break e;case UO:o=9;break e;case nN:o=11;break e;case rN:o=14;break e;case Mi:o=16,r=null;break e}throw Error(ve(130,e==null?e:typeof e,""))}return t=hs(o,n,t,a),t.elementType=e,t.type=r,t.lanes=i,t}function wl(e,t,n,r){return e=hs(7,e,r,t),e.lanes=n,e}function ex(e,t,n,r){return e=hs(22,e,r,t),e.elementType=WO,e.lanes=n,e.stateNode={isHidden:!1},e}function y0(e,t,n){return e=hs(6,e,null,t),e.lanes=n,e}function b0(e,t,n){return t=hs(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ZV(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=e0(0),this.expirationTimes=e0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=e0(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function LN(e,t,n,r,a,i,o,l,c){return e=new ZV(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=hs(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},jN(i),e}function eq(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cc,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function $M(e){if(!e)return xo;e=e._reactInternals;e:{if(Wl(e)!==e||e.tag!==1)throw Error(ve(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Rr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ve(171))}if(e.tag===1){var n=e.type;if(Rr(n))return $D(e,n,t)}return t}function RM(e,t,n,r,a,i,o,l,c){return e=LN(n,r,!0,e,a,i,o,l,c),e.context=$M(null),n=e.current,r=br(),a=lo(n),i=ti(r,a),i.callback=t??null,io(n,i,a),e.current.lanes=a,im(e,a,r),Lr(e,r),e}function tx(e,t,n,r){var a=t.current,i=br(),o=lo(a);return n=$M(n),t.context===null?t.context=n:t.pendingContext=n,t=ti(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=io(a,t,o),e!==null&&(Us(e,a,o,i),Bp(e,a,o)),o}function Ng(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function xC(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function FN(e,t){xC(e,t),(e=e.alternate)&&xC(e,t)}function tq(){return null}var LM=typeof reportError=="function"?reportError:function(e){console.error(e)};function BN(e){this._internalRoot=e}nx.prototype.render=BN.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ve(409));tx(e,t,null,null)};nx.prototype.unmount=BN.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;El(function(){tx(null,e,null,null)}),t[oi]=null}};function nx(e){this._internalRoot=e}nx.prototype.unstable_scheduleHydration=function(e){if(e){var t=pD();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ri.length&&t!==0&&t<Ri[n].priority;n++);Ri.splice(n,0,e),n===0&&vD(e)}};function zN(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function rx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function yC(){}function nq(e,t,n,r,a){if(a){if(typeof r=="function"){var i=r;r=function(){var u=Ng(o);i.call(u)}}var o=RM(t,r,e,0,null,!1,!1,"",yC);return e._reactRootContainer=o,e[oi]=o.current,Gh(e.nodeType===8?e.parentNode:e),El(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var l=r;r=function(){var u=Ng(c);l.call(u)}}var c=LN(e,0,!1,null,null,!1,!1,"",yC);return e._reactRootContainer=c,e[oi]=c.current,Gh(e.nodeType===8?e.parentNode:e),El(function(){tx(t,c,n,r)}),c}function sx(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=Ng(o);l.call(c)}}tx(t,o,e,a)}else o=nq(n,t,e,a,r);return Ng(o)}fD=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=mh(t.pendingLanes);n!==0&&(iN(t,n|1),Lr(t,mn()),!(vt&6)&&(Su=mn()+500,_o()))}break;case 13:El(function(){var r=li(e,1);if(r!==null){var a=br();Us(r,e,1,a)}}),FN(e,1)}};oN=function(e){if(e.tag===13){var t=li(e,134217728);if(t!==null){var n=br();Us(t,e,134217728,n)}FN(e,134217728)}};mD=function(e){if(e.tag===13){var t=lo(e),n=li(e,t);if(n!==null){var r=br();Us(n,e,t,r)}FN(e,t)}};pD=function(){return kt};gD=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}};$b=function(e,t,n){switch(t){case"input":if(kb(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=Gv(r);if(!a)throw Error(ve(90));KO(r),kb(r,a)}}}break;case"textarea":YO(e,n);break;case"select":t=n.value,t!=null&&qc(e,!!n.multiple,t,!1)}};nD=MN;rD=El;var rq={usingClientEntryPoint:!1,Events:[lm,Tc,Gv,eD,tD,MN]},Yd={findFiberByHostInstance:rl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sq={bundleType:Yd.bundleType,version:Yd.version,rendererPackageName:Yd.rendererPackageName,rendererConfig:Yd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=iD(e),e===null?null:e.stateNode},findFiberByHostInstance:Yd.findFiberByHostInstance||tq,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xm.isDisabled&&Xm.supportsFiber)try{Uv=Xm.inject(sq),ba=Xm}catch{}}ns.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rq;ns.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zN(t))throw Error(ve(200));return eq(e,t,null,n)};ns.createRoot=function(e,t){if(!zN(e))throw Error(ve(299));var n=!1,r="",a=LM;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=LN(e,1,!1,null,null,n,!1,r,a),e[oi]=t.current,Gh(e.nodeType===8?e.parentNode:e),new BN(t)};ns.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ve(188)):(e=Object.keys(e).join(","),Error(ve(268,e)));return e=iD(t),e=e===null?null:e.stateNode,e};ns.flushSync=function(e){return El(e)};ns.hydrate=function(e,t,n){if(!rx(t))throw Error(ve(200));return sx(null,e,t,!0,n)};ns.hydrateRoot=function(e,t,n){if(!zN(e))throw Error(ve(405));var r=n!=null&&n.hydratedSources||null,a=!1,i="",o=LM;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=RM(t,null,e,1,n??null,a,!1,i,o),e[oi]=t.current,Gh(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new nx(t)};ns.render=function(e,t,n){if(!rx(t))throw Error(ve(200));return sx(null,e,t,!1,n)};ns.unmountComponentAtNode=function(e){if(!rx(e))throw Error(ve(40));return e._reactRootContainer?(El(function(){sx(null,null,e,!1,function(){e._reactRootContainer=null,e[oi]=null})}),!0):!1};ns.unstable_batchedUpdates=MN;ns.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!rx(n))throw Error(ve(200));if(e==null||e._reactInternals===void 0)throw Error(ve(38));return sx(e,t,n,!1,r)};ns.version="18.3.1-next-f1338f8080-20240426";function FM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(FM)}catch(e){console.error(e)}}FM(),FO.exports=ns;var Hl=FO.exports;const BM=Ct(Hl);var zM,bC=Hl;zM=bC.createRoot,bC.hydrateRoot;const aq=1,iq=1e6;let j0=0;function oq(){return j0=(j0+1)%Number.MAX_SAFE_INTEGER,j0.toString()}const w0=new Map,jC=e=>{if(w0.has(e))return;const t=setTimeout(()=>{w0.delete(e),Eh({type:"REMOVE_TOAST",toastId:e})},iq);w0.set(e,t)},lq=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,aq)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?jC(n):e.toasts.forEach(r=>{jC(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},Kp=[];let Gp={toasts:[]};function Eh(e){Gp=lq(Gp,e),Kp.forEach(t=>{t(Gp)})}function cq({...e}){const t=oq(),n=a=>Eh({type:"UPDATE_TOAST",toast:{...a,id:t}}),r=()=>Eh({type:"DISMISS_TOAST",toastId:t});return Eh({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||r()}}}),{id:t,dismiss:r,update:n}}function at(){const[e,t]=j.useState(Gp);return j.useEffect(()=>(Kp.push(t),()=>{const n=Kp.indexOf(t);n>-1&&Kp.splice(n,1)}),[e]),{...e,toast:cq,dismiss:n=>Eh({type:"DISMISS_TOAST",toastId:n})}}function Pe(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function wC(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function ax(...e){return t=>{let n=!1;const r=e.map(a=>{const i=wC(a,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let a=0;a<r.length;a++){const i=r[a];typeof i=="function"?i():wC(e[a],null)}}}}function dt(...e){return j.useCallback(ax(...e),e)}function uq(e,t){const n=j.createContext(t),r=i=>{const{children:o,...l}=i,c=j.useMemo(()=>l,Object.values(l));return s.jsx(n.Provider,{value:c,children:o})};r.displayName=e+"Provider";function a(i){const o=j.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,a]}function Fr(e,t=[]){let n=[];function r(i,o){const l=j.createContext(o),c=n.length;n=[...n,o];const u=h=>{var x;const{scope:f,children:m,...v}=h,p=((x=f==null?void 0:f[e])==null?void 0:x[c])||l,g=j.useMemo(()=>v,Object.values(v));return s.jsx(p.Provider,{value:g,children:m})};u.displayName=i+"Provider";function d(h,f){var p;const m=((p=f==null?void 0:f[e])==null?void 0:p[c])||l,v=j.useContext(m);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const a=()=>{const i=n.map(o=>j.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return j.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[r,dq(a,...t)]}function dq(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const h=c(i)[`__scope${u}`];return{...l,...h}},{});return j.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function Tl(e){const t=fq(e),n=j.forwardRef((r,a)=>{const{children:i,...o}=r,l=j.Children.toArray(i),c=l.find(mq);if(c){const u=c.props.children,d=l.map(h=>h===c?j.Children.count(u)>1?j.Children.only(null):j.isValidElement(u)?u.props.children:null:h);return s.jsx(t,{...o,ref:a,children:j.isValidElement(u)?j.cloneElement(u,void 0,d):null})}return s.jsx(t,{...o,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}var hq=Tl("Slot");function fq(e){const t=j.forwardRef((n,r)=>{const{children:a,...i}=n;if(j.isValidElement(a)){const o=gq(a),l=pq(i,a.props);return a.type!==j.Fragment&&(l.ref=r?ax(r,o):o),j.cloneElement(a,l)}return j.Children.count(a)>1?j.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var VM=Symbol("radix.slottable");function qM(e){const t=({children:n})=>s.jsx(s.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=VM,t}function mq(e){return j.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===VM}function pq(e,t){const n={...t};for(const r in t){const a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(n[r]=a):r==="style"?n[r]={...a,...i}:r==="className"&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function gq(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function ix(e){const t=e+"CollectionProvider",[n,r]=Fr(t),[a,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:g,children:x}=p,y=$.useRef(null),b=$.useRef(new Map).current;return s.jsx(a,{scope:g,itemMap:b,collectionRef:y,children:x})};o.displayName=t;const l=e+"CollectionSlot",c=Tl(l),u=$.forwardRef((p,g)=>{const{scope:x,children:y}=p,b=i(l,x),N=dt(g,b.collectionRef);return s.jsx(c,{ref:N,children:y})});u.displayName=l;const d=e+"CollectionItemSlot",h="data-radix-collection-item",f=Tl(d),m=$.forwardRef((p,g)=>{const{scope:x,children:y,...b}=p,N=$.useRef(null),w=dt(g,N),S=i(d,x);return $.useEffect(()=>(S.itemMap.set(N,{ref:N,...b}),()=>void S.itemMap.delete(N))),s.jsx(f,{[h]:"",ref:w,children:y})});m.displayName=d;function v(p){const g=i(e+"CollectionConsumer",p);return $.useCallback(()=>{const y=g.collectionRef.current;if(!y)return[];const b=Array.from(y.querySelectorAll(`[${h}]`));return Array.from(g.itemMap.values()).sort((S,_)=>b.indexOf(S.ref.current)-b.indexOf(_.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:u,ItemSlot:m},v,r]}var vq=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Le=vq.reduce((e,t)=>{const n=Tl(`Primitive.${t}`),r=j.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function VN(e,t){e&&Hl.flushSync(()=>e.dispatchEvent(t))}function jr(e){const t=j.useRef(e);return j.useEffect(()=>{t.current=e}),j.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function xq(e,t=globalThis==null?void 0:globalThis.document){const n=jr(e);j.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var yq="DismissableLayer",pj="dismissableLayer.update",bq="dismissableLayer.pointerDownOutside",jq="dismissableLayer.focusOutside",NC,UM=j.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ld=j.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,u=j.useContext(UM),[d,h]=j.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=j.useState({}),v=dt(t,_=>h(_)),p=Array.from(u.layers),[g]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=p.indexOf(g),y=d?p.indexOf(d):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,N=y>=x,w=Nq(_=>{const C=_.target,P=[...u.branches].some(A=>A.contains(C));!N||P||(a==null||a(_),o==null||o(_),_.defaultPrevented||l==null||l())},f),S=Sq(_=>{const C=_.target;[...u.branches].some(A=>A.contains(C))||(i==null||i(_),o==null||o(_),_.defaultPrevented||l==null||l())},f);return xq(_=>{y===u.layers.size-1&&(r==null||r(_),!_.defaultPrevented&&l&&(_.preventDefault(),l()))},f),j.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(NC=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),SC(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=NC)}},[d,f,n,u]),j.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),SC())},[d,u]),j.useEffect(()=>{const _=()=>m({});return document.addEventListener(pj,_),()=>document.removeEventListener(pj,_)},[]),s.jsx(Le.div,{...c,ref:v,style:{pointerEvents:b?N?"auto":"none":void 0,...e.style},onFocusCapture:Pe(e.onFocusCapture,S.onFocusCapture),onBlurCapture:Pe(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:Pe(e.onPointerDownCapture,w.onPointerDownCapture)})});ld.displayName=yq;var wq="DismissableLayerBranch",WM=j.forwardRef((e,t)=>{const n=j.useContext(UM),r=j.useRef(null),a=dt(t,r);return j.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),s.jsx(Le.div,{...e,ref:a})});WM.displayName=wq;function Nq(e,t=globalThis==null?void 0:globalThis.document){const n=jr(e),r=j.useRef(!1),a=j.useRef(()=>{});return j.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){HM(bq,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function Sq(e,t=globalThis==null?void 0:globalThis.document){const n=jr(e),r=j.useRef(!1);return j.useEffect(()=>{const a=i=>{i.target&&!r.current&&HM(jq,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function SC(){const e=new CustomEvent(pj);document.dispatchEvent(e)}function HM(e,t,n,{discrete:r}){const a=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?VN(a,i):a.dispatchEvent(i)}var _q=ld,Cq=WM,jn=globalThis!=null&&globalThis.document?j.useLayoutEffect:()=>{},Pq="Portal",um=j.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[a,i]=j.useState(!1);jn(()=>i(!0),[]);const o=n||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?BM.createPortal(s.jsx(Le.div,{...r,ref:t}),o):null});um.displayName=Pq;function Aq(e,t){return j.useReducer((n,r)=>t[n][r]??n,e)}var js=e=>{const{present:t,children:n}=e,r=kq(t),a=typeof n=="function"?n({present:r.isPresent}):j.Children.only(n),i=dt(r.ref,Eq(a));return typeof n=="function"||r.isPresent?j.cloneElement(a,{ref:i}):null};js.displayName="Presence";function kq(e){const[t,n]=j.useState(),r=j.useRef(null),a=j.useRef(e),i=j.useRef("none"),o=e?"mounted":"unmounted",[l,c]=Aq(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return j.useEffect(()=>{const u=Jm(r.current);i.current=l==="mounted"?u:"none"},[l]),jn(()=>{const u=r.current,d=a.current;if(d!==e){const f=i.current,m=Jm(u);e?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&f!==m?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),jn(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,h=m=>{const p=Jm(r.current).includes(m.animationName);if(m.target===t&&p&&(c("ANIMATION_END"),!a.current)){const g=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=g)})}},f=m=>{m.target===t&&(i.current=Jm(r.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:j.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function Jm(e){return(e==null?void 0:e.animationName)||"none"}function Eq(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Tq=X1[" useInsertionEffect ".trim().toString()]||jn;function ui({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[a,i,o]=Oq({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:a;{const d=j.useRef(e!==void 0);j.useEffect(()=>{const h=d.current;h!==l&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,r])}const u=j.useCallback(d=>{var h;if(l){const f=Dq(d)?d(e):d;f!==e&&((h=o.current)==null||h.call(o,f))}else i(d)},[l,e,i,o]);return[c,u]}function Oq({defaultProp:e,onChange:t}){const[n,r]=j.useState(e),a=j.useRef(n),i=j.useRef(t);return Tq(()=>{i.current=t},[t]),j.useEffect(()=>{var o;a.current!==n&&((o=i.current)==null||o.call(i,n),a.current=n)},[n,a]),[n,r,i]}function Dq(e){return typeof e=="function"}var KM=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Mq="VisuallyHidden",ox=j.forwardRef((e,t)=>s.jsx(Le.span,{...e,ref:t,style:{...KM,...e.style}}));ox.displayName=Mq;var Iq=ox,qN="ToastProvider",[UN,$q,Rq]=ix("Toast"),[GM,Ike]=Fr("Toast",[Rq]),[Lq,lx]=GM(qN),YM=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=e,[l,c]=j.useState(null),[u,d]=j.useState(0),h=j.useRef(!1),f=j.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${qN}\`. Expected non-empty \`string\`.`),s.jsx(UN.Provider,{scope:t,children:s.jsx(Lq,{scope:t,label:n,duration:r,swipeDirection:a,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:j.useCallback(()=>d(m=>m+1),[]),onToastRemove:j.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};YM.displayName=qN;var QM="ToastViewport",Fq=["F8"],gj="toast.viewportPause",vj="toast.viewportResume",XM=j.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=Fq,label:a="Notifications ({hotkey})",...i}=e,o=lx(QM,n),l=$q(n),c=j.useRef(null),u=j.useRef(null),d=j.useRef(null),h=j.useRef(null),f=dt(t,h,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=o.toastCount>0;j.useEffect(()=>{const g=x=>{var b;r.length!==0&&r.every(N=>x[N]||x.code===N)&&((b=h.current)==null||b.focus())};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[r]),j.useEffect(()=>{const g=c.current,x=h.current;if(v&&g&&x){const y=()=>{if(!o.isClosePausedRef.current){const S=new CustomEvent(gj);x.dispatchEvent(S),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const S=new CustomEvent(vj);x.dispatchEvent(S),o.isClosePausedRef.current=!1}},N=S=>{!g.contains(S.relatedTarget)&&b()},w=()=>{g.contains(document.activeElement)||b()};return g.addEventListener("focusin",y),g.addEventListener("focusout",N),g.addEventListener("pointermove",y),g.addEventListener("pointerleave",w),window.addEventListener("blur",y),window.addEventListener("focus",b),()=>{g.removeEventListener("focusin",y),g.removeEventListener("focusout",N),g.removeEventListener("pointermove",y),g.removeEventListener("pointerleave",w),window.removeEventListener("blur",y),window.removeEventListener("focus",b)}}},[v,o.isClosePausedRef]);const p=j.useCallback(({tabbingDirection:g})=>{const y=l().map(b=>{const N=b.ref.current,w=[N,...Jq(N)];return g==="forwards"?w:w.reverse()});return(g==="forwards"?y.reverse():y).flat()},[l]);return j.useEffect(()=>{const g=h.current;if(g){const x=y=>{var w,S,_;const b=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!b){const C=document.activeElement,P=y.shiftKey;if(y.target===g&&P){(w=u.current)==null||w.focus();return}const E=p({tabbingDirection:P?"backwards":"forwards"}),z=E.findIndex(I=>I===C);N0(E.slice(z+1))?y.preventDefault():P?(S=u.current)==null||S.focus():(_=d.current)==null||_.focus()}};return g.addEventListener("keydown",x),()=>g.removeEventListener("keydown",x)}},[l,p]),s.jsxs(Cq,{ref:c,role:"region","aria-label":a.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&s.jsx(xj,{ref:u,onFocusFromOutsideViewport:()=>{const g=p({tabbingDirection:"forwards"});N0(g)}}),s.jsx(UN.Slot,{scope:n,children:s.jsx(Le.ol,{tabIndex:-1,...i,ref:f})}),v&&s.jsx(xj,{ref:d,onFocusFromOutsideViewport:()=>{const g=p({tabbingDirection:"backwards"});N0(g)}})]})});XM.displayName=QM;var JM="ToastFocusProxy",xj=j.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...a}=e,i=lx(JM,n);return s.jsx(ox,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&r()}})});xj.displayName=JM;var dm="Toast",Bq="toast.swipeStart",zq="toast.swipeMove",Vq="toast.swipeCancel",qq="toast.swipeEnd",ZM=j.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:a,onOpenChange:i,...o}=e,[l,c]=ui({prop:r,defaultProp:a??!0,onChange:i,caller:dm});return s.jsx(js,{present:n||l,children:s.jsx(Hq,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:jr(e.onPause),onResume:jr(e.onResume),onSwipeStart:Pe(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Pe(e.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Pe(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Pe(e.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});ZM.displayName=dm;var[Uq,Wq]=GM(dm,{onClose(){}}),Hq=j.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:m,...v}=e,p=lx(dm,n),[g,x]=j.useState(null),y=dt(t,I=>x(I)),b=j.useRef(null),N=j.useRef(null),w=a||p.duration,S=j.useRef(0),_=j.useRef(w),C=j.useRef(0),{onToastAdd:P,onToastRemove:A}=p,O=jr(()=>{var W;(g==null?void 0:g.contains(document.activeElement))&&((W=p.viewport)==null||W.focus()),o()}),E=j.useCallback(I=>{!I||I===1/0||(window.clearTimeout(C.current),S.current=new Date().getTime(),C.current=window.setTimeout(O,I))},[O]);j.useEffect(()=>{const I=p.viewport;if(I){const W=()=>{E(_.current),u==null||u()},V=()=>{const H=new Date().getTime()-S.current;_.current=_.current-H,window.clearTimeout(C.current),c==null||c()};return I.addEventListener(gj,V),I.addEventListener(vj,W),()=>{I.removeEventListener(gj,V),I.removeEventListener(vj,W)}}},[p.viewport,w,c,u,E]),j.useEffect(()=>{i&&!p.isClosePausedRef.current&&E(w)},[i,w,p.isClosePausedRef,E]),j.useEffect(()=>(P(),()=>A()),[P,A]);const z=j.useMemo(()=>g?iI(g):null,[g]);return p.viewport?s.jsxs(s.Fragment,{children:[z&&s.jsx(Kq,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:z}),s.jsx(Uq,{scope:n,onClose:O,children:Hl.createPortal(s.jsx(UN.ItemSlot,{scope:n,children:s.jsx(_q,{asChild:!0,onEscapeKeyDown:Pe(l,()=>{p.isFocusedToastEscapeKeyDownRef.current||O(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(Le.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":p.swipeDirection,...v,ref:y,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Pe(e.onKeyDown,I=>{I.key==="Escape"&&(l==null||l(I.nativeEvent),I.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,O()))}),onPointerDown:Pe(e.onPointerDown,I=>{I.button===0&&(b.current={x:I.clientX,y:I.clientY})}),onPointerMove:Pe(e.onPointerMove,I=>{if(!b.current)return;const W=I.clientX-b.current.x,V=I.clientY-b.current.y,H=!!N.current,k=["left","right"].includes(p.swipeDirection),D=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,X=k?D(0,W):0,Q=k?0:D(0,V),te=I.pointerType==="touch"?10:2,ne={x:X,y:Q},T={originalEvent:I,delta:ne};H?(N.current=ne,Zm(zq,h,T,{discrete:!1})):_C(ne,p.swipeDirection,te)?(N.current=ne,Zm(Bq,d,T,{discrete:!1}),I.target.setPointerCapture(I.pointerId)):(Math.abs(W)>te||Math.abs(V)>te)&&(b.current=null)}),onPointerUp:Pe(e.onPointerUp,I=>{const W=N.current,V=I.target;if(V.hasPointerCapture(I.pointerId)&&V.releasePointerCapture(I.pointerId),N.current=null,b.current=null,W){const H=I.currentTarget,k={originalEvent:I,delta:W};_C(W,p.swipeDirection,p.swipeThreshold)?Zm(qq,m,k,{discrete:!0}):Zm(Vq,f,k,{discrete:!0}),H.addEventListener("click",D=>D.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),Kq=e=>{const{__scopeToast:t,children:n,...r}=e,a=lx(dm,t),[i,o]=j.useState(!1),[l,c]=j.useState(!1);return Qq(()=>o(!0)),j.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:s.jsx(um,{asChild:!0,children:s.jsx(ox,{...r,children:i&&s.jsxs(s.Fragment,{children:[a.label," ",n]})})})},Gq="ToastTitle",eI=j.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return s.jsx(Le.div,{...r,ref:t})});eI.displayName=Gq;var Yq="ToastDescription",tI=j.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return s.jsx(Le.div,{...r,ref:t})});tI.displayName=Yq;var nI="ToastAction",rI=j.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?s.jsx(aI,{altText:n,asChild:!0,children:s.jsx(WN,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${nI}\`. Expected non-empty \`string\`.`),null)});rI.displayName=nI;var sI="ToastClose",WN=j.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,a=Wq(sI,n);return s.jsx(aI,{asChild:!0,children:s.jsx(Le.button,{type:"button",...r,ref:t,onClick:Pe(e.onClick,a.onClose)})})});WN.displayName=sI;var aI=j.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...a}=e;return s.jsx(Le.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...a,ref:t})});function iI(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),Xq(r)){const a=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...iI(r))}}),t}function Zm(e,t,n,{discrete:r}){const a=n.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?VN(a,i):a.dispatchEvent(i)}var _C=(e,t,n=0)=>{const r=Math.abs(e.x),a=Math.abs(e.y),i=r>a;return t==="left"||t==="right"?i&&r>n:!i&&a>n};function Qq(e=()=>{}){const t=jr(e);jn(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function Xq(e){return e.nodeType===e.ELEMENT_NODE}function Jq(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function N0(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var Zq=YM,oI=XM,lI=ZM,cI=eI,uI=tI,dI=rI,hI=WN;function fI(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=fI(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Ye(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=fI(e))&&(r&&(r+=" "),r+=t);return r}const CC=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,PC=Ye,hm=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return PC(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(u=>{const d=n==null?void 0:n[u],h=i==null?void 0:i[u];if(d===null)return null;const f=CC(d)||CC(h);return a[u][f]}),l=n&&Object.entries(n).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:f,...m}=d;return Object.entries(m).every(v=>{let[p,g]=v;return Array.isArray(g)?g.includes({...i,...l}[p]):{...i,...l}[p]===g})?[...u,h,f]:u},[]);return PC(e,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eU=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mI=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var tU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nU=j.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:o,...l},c)=>j.createElement("svg",{ref:c,...tU,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:mI("lucide",a),...l},[...o.map(([u,d])=>j.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=(e,t)=>{const n=j.forwardRef(({className:r,...a},i)=>j.createElement(nU,{ref:i,iconNode:t,className:mI(`lucide-${eU(e)}`,r),...a}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=_e("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=_e("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rU=_e("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=_e("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=_e("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sU=_e("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aU=_e("Bird",[["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M3.4 18H12a8 8 0 0 0 8-8V7a4 4 0 0 0-7.28-2.3L2 20",key:"oj1oa8"}],["path",{d:"m20 7 2 .5-2 .5",key:"12nv4d"}],["path",{d:"M10 18v3",key:"1yea0a"}],["path",{d:"M14 17.75V21",key:"1pymcb"}],["path",{d:"M7 18a6 6 0 0 0 3.84-10.61",key:"1npnn0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=_e("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iU=_e("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pI=_e("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=_e("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _u=_e("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oU=_e("Cat",[["path",{d:"M12 5c.67 0 1.35.09 2 .26 1.78-2 5.03-2.84 6.42-2.26 1.4.58-.42 7-.42 7 .57 1.07 1 2.24 1 3.44C21 17.9 16.97 21 12 21s-9-3-9-7.56c0-1.25.5-2.4 1-3.44 0 0-1.89-6.42-.5-7 1.39-.58 4.72.23 6.5 2.23A9.04 9.04 0 0 1 12 5Z",key:"x6xyqk"}],["path",{d:"M8 14v.5",key:"1nzgdb"}],["path",{d:"M16 14v.5",key:"1lajdz"}],["path",{d:"M11.25 16.25h1.5L12 17l-.75-.75Z",key:"12kq1m"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=_e("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lU=_e("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KN=_e("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gI=_e("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cU=_e("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uU=_e("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=_e("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=_e("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rf=_e("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dU=_e("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=_e("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hU=_e("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fU=_e("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mU=_e("Dog",[["path",{d:"M11.25 16.25h1.5L12 17z",key:"w7jh35"}],["path",{d:"M16 14v.5",key:"1lajdz"}],["path",{d:"M4.42 11.247A13.152 13.152 0 0 0 4 14.556C4 18.728 7.582 21 12 21s8-2.272 8-6.444a11.702 11.702 0 0 0-.493-3.309",key:"u7s9ue"}],["path",{d:"M8 14v.5",key:"1nzgdb"}],["path",{d:"M8.5 8.5c-.384 1.05-1.083 2.028-2.344 2.5-1.931.722-3.576-.297-3.656-1-.113-.994 1.177-6.53 4-7 1.923-.321 3.651.845 3.651 2.235A7.497 7.497 0 0 1 14 5.277c0-1.39 1.844-2.598 3.767-2.277 2.823.47 4.113 6.006 4 7-.08.703-1.725 1.722-3.656 1-1.261-.472-1.855-1.45-2.239-2.5",key:"v8hric"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=_e("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=_e("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=_e("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=_e("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=_e("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=_e("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vI=_e("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pU=_e("Fish",[["path",{d:"M6.5 12c.94-3.46 4.94-6 8.5-6 3.56 0 6.06 2.54 7 6-.94 3.47-3.44 6-7 6s-7.56-2.53-8.5-6Z",key:"15baut"}],["path",{d:"M18 12v.5",key:"18hhni"}],["path",{d:"M16 17.93a9.77 9.77 0 0 1 0-11.86",key:"16dt7o"}],["path",{d:"M7 10.67C7 8 5.58 5.97 2.73 5.5c-1 1.5-1 5 .23 6.5-1.24 1.5-1.24 5-.23 6.5C5.58 18.03 7 16 7 13.33",key:"l9di03"}],["path",{d:"M10.46 7.26C10.2 5.88 9.17 4.24 8 3h5.8a2 2 0 0 1 1.98 1.67l.23 1.4",key:"1kjonw"}],["path",{d:"m16.01 17.93-.23 1.4A2 2 0 0 1 13.8 21H9.5a5.96 5.96 0 0 0 1.49-3.98",key:"1zlm23"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=_e("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=_e("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gU=_e("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vU=_e("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S0=_e("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const di=_e("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=_e("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xI=_e("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=_e("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ud=_e("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=_e("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xU=_e("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OC=_e("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yU=_e("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=_e("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sg=_e("PawPrint",[["circle",{cx:"11",cy:"4",r:"2",key:"vol9p0"}],["circle",{cx:"18",cy:"8",r:"2",key:"17gozi"}],["circle",{cx:"20",cy:"16",r:"2",key:"1v9bxh"}],["path",{d:"M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z",key:"1ydw1z"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sf=_e("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=_e("Pill",[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=_e("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const af=_e("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yI=_e("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=_e("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Co=_e("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bU=_e("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GN=_e("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=_e("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jU=_e("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=_e("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=_e("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wU=_e("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uo=_e("Syringe",[["path",{d:"m18 2 4 4",key:"22kx64"}],["path",{d:"m17 7 3-3",key:"1w1zoj"}],["path",{d:"M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5",key:"1exhtz"}],["path",{d:"m9 11 4 4",key:"rovt3i"}],["path",{d:"m5 19-3 3",key:"59f2uf"}],["path",{d:"m14 4 6 6",key:"yqp9t2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NU=_e("Tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YN=_e("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=_e("Tractor",[["path",{d:"m10 11 11 .9a1 1 0 0 1 .8 1.1l-.665 4.158a1 1 0 0 1-.988.842H20",key:"she1j9"}],["path",{d:"M16 18h-5",key:"bq60fd"}],["path",{d:"M18 5a1 1 0 0 0-1 1v5.573",key:"1kv8ia"}],["path",{d:"M3 4h8.129a1 1 0 0 1 .99.863L13 11.246",key:"1q1ert"}],["path",{d:"M4 11V4",key:"9ft8pt"}],["path",{d:"M7 15h.01",key:"k5ht0j"}],["path",{d:"M8 10.1V4",key:"1jgyzo"}],["circle",{cx:"18",cy:"18",r:"2",key:"1emm8v"}],["circle",{cx:"7",cy:"15",r:"5",key:"ddtuc"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=_e("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=_e("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=_e("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=_e("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=_e("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SU=_e("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=_e("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _U=_e("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=_e("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bI=_e("Weight",[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fm=_e("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),QN="-",CU=e=>{const t=AU(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const l=o.split(QN);return l[0]===""&&l.length!==1&&l.shift(),jI(l,t)||PU(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},jI=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),a=r?jI(e.slice(1),r):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(QN);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},DC=/^\[(.+)\]$/,PU=e=>{if(DC.test(e)){const t=DC.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},AU=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return EU(Object.entries(e.classGroups),n).forEach(([i,o])=>{Sj(o,r,i,t)}),r},Sj=(e,t,n,r)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:MC(t,a);i.classGroupId=n;return}if(typeof a=="function"){if(kU(a)){Sj(a(r),t,n,r);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([i,o])=>{Sj(o,MC(t,i),n,r)})})},MC=(e,t)=>{let n=e;return t.split(QN).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},kU=e=>e.isThemeGetter,EU=(e,t)=>t?e.map(([n,r])=>{const a=r.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[n,a]}):e,TU=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(i,o)=>{n.set(i,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return a(i,o),o},set(i,o){n.has(i)?n.set(i,o):a(i,o)}}},wI="!",OU=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,a=t[0],i=t.length,o=l=>{const c=[];let u=0,d=0,h;for(let g=0;g<l.length;g++){let x=l[g];if(u===0){if(x===a&&(r||l.slice(g,g+i)===t)){c.push(l.slice(d,g)),d=g+i;continue}if(x==="/"){h=g;continue}}x==="["?u++:x==="]"&&u--}const f=c.length===0?l:l.substring(d),m=f.startsWith(wI),v=m?f.substring(1):f,p=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:v,maybePostfixModifierPosition:p}};return n?l=>n({className:l,parseClassName:o}):o},DU=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},MU=e=>({cache:TU(e.cacheSize),parseClassName:OU(e),...CU(e)}),IU=/\s+/,$U=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(IU);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:m}=n(u);let v=!!m,p=r(v?f.substring(0,m):f);if(!p){if(!v){l=u+(l.length>0?" "+l:l);continue}if(p=r(f),!p){l=u+(l.length>0?" "+l:l);continue}v=!1}const g=DU(d).join(":"),x=h?g+wI:g,y=x+p;if(i.includes(y))continue;i.push(y);const b=a(p,v);for(let N=0;N<b.length;++N){const w=b[N];i.push(x+w)}l=u+(l.length>0?" "+l:l)}return l};function RU(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=NI(t))&&(r&&(r+=" "),r+=n);return r}const NI=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=NI(e[r]))&&(n&&(n+=" "),n+=t);return n};function LU(e,...t){let n,r,a,i=o;function o(c){const u=t.reduce((d,h)=>h(d),e());return n=MU(u),r=n.cache.get,a=n.cache.set,i=l,l(c)}function l(c){const u=r(c);if(u)return u;const d=$U(c,n);return a(c,d),d}return function(){return i(RU.apply(null,arguments))}}const Wt=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},SI=/^\[(?:([a-z-]+):)?(.+)\]$/i,FU=/^\d+\/\d+$/,BU=new Set(["px","full","screen"]),zU=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,VU=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,qU=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,UU=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,WU=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,La=e=>Qc(e)||BU.has(e)||FU.test(e),Ci=e=>dd(e,"length",ZU),Qc=e=>!!e&&!Number.isNaN(Number(e)),_0=e=>dd(e,"number",Qc),Qd=e=>!!e&&Number.isInteger(Number(e)),HU=e=>e.endsWith("%")&&Qc(e.slice(0,-1)),rt=e=>SI.test(e),Pi=e=>zU.test(e),KU=new Set(["length","size","percentage"]),GU=e=>dd(e,KU,_I),YU=e=>dd(e,"position",_I),QU=new Set(["image","url"]),XU=e=>dd(e,QU,t9),JU=e=>dd(e,"",e9),Xd=()=>!0,dd=(e,t,n)=>{const r=SI.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},ZU=e=>VU.test(e)&&!qU.test(e),_I=()=>!1,e9=e=>UU.test(e),t9=e=>WU.test(e),n9=()=>{const e=Wt("colors"),t=Wt("spacing"),n=Wt("blur"),r=Wt("brightness"),a=Wt("borderColor"),i=Wt("borderRadius"),o=Wt("borderSpacing"),l=Wt("borderWidth"),c=Wt("contrast"),u=Wt("grayscale"),d=Wt("hueRotate"),h=Wt("invert"),f=Wt("gap"),m=Wt("gradientColorStops"),v=Wt("gradientColorStopPositions"),p=Wt("inset"),g=Wt("margin"),x=Wt("opacity"),y=Wt("padding"),b=Wt("saturate"),N=Wt("scale"),w=Wt("sepia"),S=Wt("skew"),_=Wt("space"),C=Wt("translate"),P=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto",rt,t],E=()=>[rt,t],z=()=>["",La,Ci],I=()=>["auto",Qc,rt],W=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],V=()=>["solid","dashed","dotted","double","none"],H=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],k=()=>["start","end","center","between","around","evenly","stretch"],D=()=>["","0",rt],X=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Q=()=>[Qc,rt];return{cacheSize:500,separator:":",theme:{colors:[Xd],spacing:[La,Ci],blur:["none","",Pi,rt],brightness:Q(),borderColor:[e],borderRadius:["none","","full",Pi,rt],borderSpacing:E(),borderWidth:z(),contrast:Q(),grayscale:D(),hueRotate:Q(),invert:D(),gap:E(),gradientColorStops:[e],gradientColorStopPositions:[HU,Ci],inset:O(),margin:O(),opacity:Q(),padding:E(),saturate:Q(),scale:Q(),sepia:D(),skew:Q(),space:E(),translate:E()},classGroups:{aspect:[{aspect:["auto","square","video",rt]}],container:["container"],columns:[{columns:[Pi]}],"break-after":[{"break-after":X()}],"break-before":[{"break-before":X()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...W(),rt]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Qd,rt]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",rt]}],grow:[{grow:D()}],shrink:[{shrink:D()}],order:[{order:["first","last","none",Qd,rt]}],"grid-cols":[{"grid-cols":[Xd]}],"col-start-end":[{col:["auto",{span:["full",Qd,rt]},rt]}],"col-start":[{"col-start":I()}],"col-end":[{"col-end":I()}],"grid-rows":[{"grid-rows":[Xd]}],"row-start-end":[{row:["auto",{span:[Qd,rt]},rt]}],"row-start":[{"row-start":I()}],"row-end":[{"row-end":I()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",rt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",rt]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...k()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...k(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...k(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[_]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[_]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",rt,t]}],"min-w":[{"min-w":[rt,t,"min","max","fit"]}],"max-w":[{"max-w":[rt,t,"none","full","min","max","fit","prose",{screen:[Pi]},Pi]}],h:[{h:[rt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[rt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[rt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[rt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Pi,Ci]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",_0]}],"font-family":[{font:[Xd]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",rt]}],"line-clamp":[{"line-clamp":["none",Qc,_0]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",La,rt]}],"list-image":[{"list-image":["none",rt]}],"list-style-type":[{list:["none","disc","decimal",rt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...V(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",La,Ci]}],"underline-offset":[{"underline-offset":["auto",La,rt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",rt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",rt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...W(),YU]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",GU]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},XU]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...V(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:V()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...V()]}],"outline-offset":[{"outline-offset":[La,rt]}],"outline-w":[{outline:[La,Ci]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[La,Ci]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Pi,JU]}],"shadow-color":[{shadow:[Xd]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...H(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":H()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Pi,rt]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",rt]}],duration:[{duration:Q()}],ease:[{ease:["linear","in","out","in-out",rt]}],delay:[{delay:Q()}],animate:[{animate:["none","spin","ping","pulse","bounce",rt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[Qd,rt]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",rt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",rt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",rt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[La,Ci,_0]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},r9=LU(n9);function Ee(...e){return r9(Ye(e))}function of(e){if(!e)return"Âge inconnu";const t=new Date(e),n=new Date;if(isNaN(t.getTime()))return"Date invalide";let r=n.getFullYear()-t.getFullYear(),a=n.getMonth()-t.getMonth();if((a<0||a===0&&n.getDate()<t.getDate())&&(r--,a+=12),r===0){if(a===0){const i=Math.floor((n.getTime()-t.getTime())/864e5);return`${i} jour${i>1?"s":""}`}return`${a} mois`}else return a===0?`${r} an${r>1?"s":""}`:`${r} an${r>1?"s":""} et ${a} mois`}function ho(e){if(!e)return"Non renseigné";const t=new Date(e);return isNaN(t.getTime())?"Date invalide":t.toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})}const s9=Zq,CI=j.forwardRef(({className:e,...t},n)=>s.jsx(oI,{ref:n,className:Ee("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));CI.displayName=oI.displayName;const a9=hm("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),PI=j.forwardRef(({className:e,variant:t,...n},r)=>s.jsx(lI,{ref:r,className:Ee(a9({variant:t}),e),...n}));PI.displayName=lI.displayName;const i9=j.forwardRef(({className:e,...t},n)=>s.jsx(dI,{ref:n,className:Ee("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));i9.displayName=dI.displayName;const AI=j.forwardRef(({className:e,...t},n)=>s.jsx(hI,{ref:n,className:Ee("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(fm,{className:"h-4 w-4"})}));AI.displayName=hI.displayName;const kI=j.forwardRef(({className:e,...t},n)=>s.jsx(cI,{ref:n,className:Ee("text-sm font-semibold",e),...t}));kI.displayName=cI.displayName;const EI=j.forwardRef(({className:e,...t},n)=>s.jsx(uI,{ref:n,className:Ee("text-sm opacity-90",e),...t}));EI.displayName=uI.displayName;function o9(){const{toasts:e}=at();return s.jsxs(s9,{children:[e.map(function({id:t,title:n,description:r,action:a,...i}){return s.jsxs(PI,{...i,children:[s.jsxs("div",{className:"grid gap-1",children:[n&&s.jsx(kI,{children:n}),r&&s.jsx(EI,{children:r})]}),a,s.jsx(AI,{})]},t)}),s.jsx(CI,{})]})}var IC=["light","dark"],l9="(prefers-color-scheme: dark)",c9=j.createContext(void 0),u9={setTheme:e=>{},themes:[]},d9=()=>{var e;return(e=j.useContext(c9))!=null?e:u9};j.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:a,defaultTheme:i,value:o,attrs:l,nonce:c})=>{let u=i==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(v=>`'${v}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=a?IC.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",f=(v,p=!1,g=!0)=>{let x=o?o[v]:v,y=p?v+"|| ''":`'${x}'`,b="";return a&&g&&!p&&IC.includes(v)&&(b+=`d.style.colorScheme = '${v}';`),n==="class"?p||x?b+=`c.add(${y})`:b+="null":x&&(b+=`d[s](n,${y})`),b},m=e?`!function(){${d}${f(e)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${l9}',m=window.matchMedia(t);if(m.media!==t||m.matches){${f("dark")}}else{${f("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}${u?"":"else{"+f(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${f(o?"x[e]":"e",!0)}}else{${f(i,!1,!1)};}${h}}catch(t){}}();`;return j.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:m}})});var h9=e=>{switch(e){case"success":return p9;case"info":return v9;case"warning":return g9;case"error":return x9;default:return null}},f9=Array(12).fill(0),m9=({visible:e,className:t})=>$.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},$.createElement("div",{className:"sonner-spinner"},f9.map((n,r)=>$.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),p9=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),g9=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),v9=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),x9=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},$.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),y9=$.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},$.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),$.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),b9=()=>{let[e,t]=$.useState(document.hidden);return $.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},_j=1,j9=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:_j++,i=this.toasts.find(l=>l.id===a),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),i?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...e,id:a,title:n}),{...l,...e,id:a,dismissible:o,title:n}):l):this.addToast({title:n,...r,dismissible:o,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),a=n!==void 0,i,o=r.then(async c=>{if(i=["resolve",c],$.isValidElement(c))a=!1,this.create({id:n,type:"default",message:c});else if(N9(c)&&!c.ok){a=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,d=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:n,type:"error",message:u,description:d})}else if(t.success!==void 0){a=!1;let u=typeof t.success=="function"?await t.success(c):t.success,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"success",message:u,description:d})}}).catch(async c=>{if(i=["reject",c],t.error!==void 0){a=!1;let u=typeof t.error=="function"?await t.error(c):t.error,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"error",message:u,description:d})}}).finally(()=>{var c;a&&(this.dismiss(n),n=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,u)=>o.then(()=>i[0]==="reject"?u(i[1]):c(i[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||_j++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Er=new j9,w9=(e,t)=>{let n=(t==null?void 0:t.id)||_j++;return Er.addToast({title:e,...t,id:n}),n},N9=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",S9=w9,_9=()=>Er.toasts,C9=()=>Er.getActiveToasts();Object.assign(S9,{success:Er.success,info:Er.info,warning:Er.warning,error:Er.error,custom:Er.custom,message:Er.message,promise:Er.promise,dismiss:Er.dismiss,loading:Er.loading},{getHistory:_9,getToasts:C9});function P9(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}P9(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function ep(e){return e.label!==void 0}var A9=3,k9="32px",E9="16px",$C=4e3,T9=356,O9=14,D9=20,M9=200;function As(...e){return e.filter(Boolean).join(" ")}function I9(e){let[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}var $9=e=>{var t,n,r,a,i,o,l,c,u,d,h;let{invert:f,toast:m,unstyled:v,interacting:p,setHeights:g,visibleToasts:x,heights:y,index:b,toasts:N,expanded:w,removeToast:S,defaultRichColors:_,closeButton:C,style:P,cancelButtonStyle:A,actionButtonStyle:O,className:E="",descriptionClassName:z="",duration:I,position:W,gap:V,loadingIcon:H,expandByDefault:k,classNames:D,icons:X,closeButtonAriaLabel:Q="Close toast",pauseWhenPageIsHidden:te}=e,[ne,T]=$.useState(null),[ce,me]=$.useState(null),[le,Z]=$.useState(!1),[B,oe]=$.useState(!1),[U,K]=$.useState(!1),[fe,Se]=$.useState(!1),[$e,Ue]=$.useState(!1),[ft,Tt]=$.useState(0),[Rt,ae]=$.useState(0),Ne=$.useRef(m.duration||I||$C),Me=$.useRef(null),He=$.useRef(null),dr=b===0,ct=b+1<=x,Xt=m.type,ie=m.dismissible!==!1,Be=m.className||"",ea=m.descriptionClassName||"",_s=$.useMemo(()=>y.findIndex(Ke=>Ke.toastId===m.id)||0,[y,m.id]),Bd=$.useMemo(()=>{var Ke;return(Ke=m.closeButton)!=null?Ke:C},[m.closeButton,C]),ac=$.useMemo(()=>m.duration||I||$C,[m.duration,I]),Vo=$.useRef(0),_r=$.useRef(0),ta=$.useRef(0),Cs=$.useRef(null),[na,wi]=W.split("-"),ic=$.useMemo(()=>y.reduce((Ke,Nt,Lt)=>Lt>=_s?Ke:Ke+Nt.height,0),[y,_s]),Em=b9(),qy=m.invert||f,zd=Xt==="loading";_r.current=$.useMemo(()=>_s*V+ic,[_s,ic]),$.useEffect(()=>{Ne.current=ac},[ac]),$.useEffect(()=>{Z(!0)},[]),$.useEffect(()=>{let Ke=He.current;if(Ke){let Nt=Ke.getBoundingClientRect().height;return ae(Nt),g(Lt=>[{toastId:m.id,height:Nt,position:m.position},...Lt]),()=>g(Lt=>Lt.filter(zr=>zr.toastId!==m.id))}},[g,m.id]),$.useLayoutEffect(()=>{if(!le)return;let Ke=He.current,Nt=Ke.style.height;Ke.style.height="auto";let Lt=Ke.getBoundingClientRect().height;Ke.style.height=Nt,ae(Lt),g(zr=>zr.find(Vr=>Vr.toastId===m.id)?zr.map(Vr=>Vr.toastId===m.id?{...Vr,height:Lt}:Vr):[{toastId:m.id,height:Lt,position:m.position},...zr])},[le,m.title,m.description,g,m.id]);let ra=$.useCallback(()=>{oe(!0),Tt(_r.current),g(Ke=>Ke.filter(Nt=>Nt.toastId!==m.id)),setTimeout(()=>{S(m)},M9)},[m,S,g,_r]);$.useEffect(()=>{if(m.promise&&Xt==="loading"||m.duration===1/0||m.type==="loading")return;let Ke;return w||p||te&&Em?(()=>{if(ta.current<Vo.current){let Nt=new Date().getTime()-Vo.current;Ne.current=Ne.current-Nt}ta.current=new Date().getTime()})():Ne.current!==1/0&&(Vo.current=new Date().getTime(),Ke=setTimeout(()=>{var Nt;(Nt=m.onAutoClose)==null||Nt.call(m,m),ra()},Ne.current)),()=>clearTimeout(Ke)},[w,p,m,Xt,te,Em,ra]),$.useEffect(()=>{m.delete&&ra()},[ra,m.delete]);function Uy(){var Ke,Nt,Lt;return X!=null&&X.loading?$.createElement("div",{className:As(D==null?void 0:D.loader,(Ke=m==null?void 0:m.classNames)==null?void 0:Ke.loader,"sonner-loader"),"data-visible":Xt==="loading"},X.loading):H?$.createElement("div",{className:As(D==null?void 0:D.loader,(Nt=m==null?void 0:m.classNames)==null?void 0:Nt.loader,"sonner-loader"),"data-visible":Xt==="loading"},H):$.createElement(m9,{className:As(D==null?void 0:D.loader,(Lt=m==null?void 0:m.classNames)==null?void 0:Lt.loader),visible:Xt==="loading"})}return $.createElement("li",{tabIndex:0,ref:He,className:As(E,Be,D==null?void 0:D.toast,(t=m==null?void 0:m.classNames)==null?void 0:t.toast,D==null?void 0:D.default,D==null?void 0:D[Xt],(n=m==null?void 0:m.classNames)==null?void 0:n[Xt]),"data-sonner-toast":"","data-rich-colors":(r=m.richColors)!=null?r:_,"data-styled":!(m.jsx||m.unstyled||v),"data-mounted":le,"data-promise":!!m.promise,"data-swiped":$e,"data-removed":B,"data-visible":ct,"data-y-position":na,"data-x-position":wi,"data-index":b,"data-front":dr,"data-swiping":U,"data-dismissible":ie,"data-type":Xt,"data-invert":qy,"data-swipe-out":fe,"data-swipe-direction":ce,"data-expanded":!!(w||k&&le),style:{"--index":b,"--toasts-before":b,"--z-index":N.length-b,"--offset":`${B?ft:_r.current}px`,"--initial-height":k?"auto":`${Rt}px`,...P,...m.style},onDragEnd:()=>{K(!1),T(null),Cs.current=null},onPointerDown:Ke=>{zd||!ie||(Me.current=new Date,Tt(_r.current),Ke.target.setPointerCapture(Ke.pointerId),Ke.target.tagName!=="BUTTON"&&(K(!0),Cs.current={x:Ke.clientX,y:Ke.clientY}))},onPointerUp:()=>{var Ke,Nt,Lt,zr;if(fe||!ie)return;Cs.current=null;let Vr=Number(((Ke=He.current)==null?void 0:Ke.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),sa=Number(((Nt=He.current)==null?void 0:Nt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Ra=new Date().getTime()-((Lt=Me.current)==null?void 0:Lt.getTime()),qr=ne==="x"?Vr:sa,aa=Math.abs(qr)/Ra;if(Math.abs(qr)>=D9||aa>.11){Tt(_r.current),(zr=m.onDismiss)==null||zr.call(m,m),me(ne==="x"?Vr>0?"right":"left":sa>0?"down":"up"),ra(),Se(!0),Ue(!1);return}K(!1),T(null)},onPointerMove:Ke=>{var Nt,Lt,zr,Vr;if(!Cs.current||!ie||((Nt=window.getSelection())==null?void 0:Nt.toString().length)>0)return;let sa=Ke.clientY-Cs.current.y,Ra=Ke.clientX-Cs.current.x,qr=(Lt=e.swipeDirections)!=null?Lt:I9(W);!ne&&(Math.abs(Ra)>1||Math.abs(sa)>1)&&T(Math.abs(Ra)>Math.abs(sa)?"x":"y");let aa={x:0,y:0};ne==="y"?(qr.includes("top")||qr.includes("bottom"))&&(qr.includes("top")&&sa<0||qr.includes("bottom")&&sa>0)&&(aa.y=sa):ne==="x"&&(qr.includes("left")||qr.includes("right"))&&(qr.includes("left")&&Ra<0||qr.includes("right")&&Ra>0)&&(aa.x=Ra),(Math.abs(aa.x)>0||Math.abs(aa.y)>0)&&Ue(!0),(zr=He.current)==null||zr.style.setProperty("--swipe-amount-x",`${aa.x}px`),(Vr=He.current)==null||Vr.style.setProperty("--swipe-amount-y",`${aa.y}px`)}},Bd&&!m.jsx?$.createElement("button",{"aria-label":Q,"data-disabled":zd,"data-close-button":!0,onClick:zd||!ie?()=>{}:()=>{var Ke;ra(),(Ke=m.onDismiss)==null||Ke.call(m,m)},className:As(D==null?void 0:D.closeButton,(a=m==null?void 0:m.classNames)==null?void 0:a.closeButton)},(i=X==null?void 0:X.close)!=null?i:y9):null,m.jsx||j.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:$.createElement($.Fragment,null,Xt||m.icon||m.promise?$.createElement("div",{"data-icon":"",className:As(D==null?void 0:D.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Uy():null,m.type!=="loading"?m.icon||(X==null?void 0:X[Xt])||h9(Xt):null):null,$.createElement("div",{"data-content":"",className:As(D==null?void 0:D.content,(l=m==null?void 0:m.classNames)==null?void 0:l.content)},$.createElement("div",{"data-title":"",className:As(D==null?void 0:D.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?$.createElement("div",{"data-description":"",className:As(z,ea,D==null?void 0:D.description,(u=m==null?void 0:m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),j.isValidElement(m.cancel)?m.cancel:m.cancel&&ep(m.cancel)?$.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||A,onClick:Ke=>{var Nt,Lt;ep(m.cancel)&&ie&&((Lt=(Nt=m.cancel).onClick)==null||Lt.call(Nt,Ke),ra())},className:As(D==null?void 0:D.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,j.isValidElement(m.action)?m.action:m.action&&ep(m.action)?$.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||O,onClick:Ke=>{var Nt,Lt;ep(m.action)&&((Lt=(Nt=m.action).onClick)==null||Lt.call(Nt,Ke),!Ke.defaultPrevented&&ra())},className:As(D==null?void 0:D.actionButton,(h=m==null?void 0:m.classNames)==null?void 0:h.actionButton)},m.action.label):null))};function RC(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function R9(e,t){let n={};return[e,t].forEach((r,a)=>{let i=a===1,o=i?"--mobile-offset":"--offset",l=i?E9:k9;function c(u){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${o}-${u}`]=l:n[`${o}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):c(l)}),n}var L9=j.forwardRef(function(e,t){let{invert:n,position:r="bottom-right",hotkey:a=["altKey","KeyT"],expand:i,closeButton:o,className:l,offset:c,mobileOffset:u,theme:d="light",richColors:h,duration:f,style:m,visibleToasts:v=A9,toastOptions:p,dir:g=RC(),gap:x=O9,loadingIcon:y,icons:b,containerAriaLabel:N="Notifications",pauseWhenPageIsHidden:w}=e,[S,_]=$.useState([]),C=$.useMemo(()=>Array.from(new Set([r].concat(S.filter(te=>te.position).map(te=>te.position)))),[S,r]),[P,A]=$.useState([]),[O,E]=$.useState(!1),[z,I]=$.useState(!1),[W,V]=$.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),H=$.useRef(null),k=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),D=$.useRef(null),X=$.useRef(!1),Q=$.useCallback(te=>{_(ne=>{var T;return(T=ne.find(ce=>ce.id===te.id))!=null&&T.delete||Er.dismiss(te.id),ne.filter(({id:ce})=>ce!==te.id)})},[]);return $.useEffect(()=>Er.subscribe(te=>{if(te.dismiss){_(ne=>ne.map(T=>T.id===te.id?{...T,delete:!0}:T));return}setTimeout(()=>{BM.flushSync(()=>{_(ne=>{let T=ne.findIndex(ce=>ce.id===te.id);return T!==-1?[...ne.slice(0,T),{...ne[T],...te},...ne.slice(T+1)]:[te,...ne]})})})}),[]),$.useEffect(()=>{if(d!=="system"){V(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?V("dark"):V("light")),typeof window>"u")return;let te=window.matchMedia("(prefers-color-scheme: dark)");try{te.addEventListener("change",({matches:ne})=>{V(ne?"dark":"light")})}catch{te.addListener(({matches:T})=>{try{V(T?"dark":"light")}catch(ce){console.error(ce)}})}},[d]),$.useEffect(()=>{S.length<=1&&E(!1)},[S]),$.useEffect(()=>{let te=ne=>{var T,ce;a.every(me=>ne[me]||ne.code===me)&&(E(!0),(T=H.current)==null||T.focus()),ne.code==="Escape"&&(document.activeElement===H.current||(ce=H.current)!=null&&ce.contains(document.activeElement))&&E(!1)};return document.addEventListener("keydown",te),()=>document.removeEventListener("keydown",te)},[a]),$.useEffect(()=>{if(H.current)return()=>{D.current&&(D.current.focus({preventScroll:!0}),D.current=null,X.current=!1)}},[H.current]),$.createElement("section",{ref:t,"aria-label":`${N} ${k}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},C.map((te,ne)=>{var T;let[ce,me]=te.split("-");return S.length?$.createElement("ol",{key:te,dir:g==="auto"?RC():g,tabIndex:-1,ref:H,className:l,"data-sonner-toaster":!0,"data-theme":W,"data-y-position":ce,"data-lifted":O&&S.length>1&&!i,"data-x-position":me,style:{"--front-toast-height":`${((T=P[0])==null?void 0:T.height)||0}px`,"--width":`${T9}px`,"--gap":`${x}px`,...m,...R9(c,u)},onBlur:le=>{X.current&&!le.currentTarget.contains(le.relatedTarget)&&(X.current=!1,D.current&&(D.current.focus({preventScroll:!0}),D.current=null))},onFocus:le=>{le.target instanceof HTMLElement&&le.target.dataset.dismissible==="false"||X.current||(X.current=!0,D.current=le.relatedTarget)},onMouseEnter:()=>E(!0),onMouseMove:()=>E(!0),onMouseLeave:()=>{z||E(!1)},onDragEnd:()=>E(!1),onPointerDown:le=>{le.target instanceof HTMLElement&&le.target.dataset.dismissible==="false"||I(!0)},onPointerUp:()=>I(!1)},S.filter(le=>!le.position&&ne===0||le.position===te).map((le,Z)=>{var B,oe;return $.createElement($9,{key:le.id,icons:b,index:Z,toast:le,defaultRichColors:h,duration:(B=p==null?void 0:p.duration)!=null?B:f,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:n,visibleToasts:v,closeButton:(oe=p==null?void 0:p.closeButton)!=null?oe:o,interacting:z,position:te,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,removeToast:Q,toasts:S.filter(U=>U.position==le.position),heights:P.filter(U=>U.position==le.position),setHeights:A,expandByDefault:i,gap:x,loadingIcon:y,expanded:O,pauseWhenPageIsHidden:w,swipeDirections:e.swipeDirections})})):null}))});const F9=({...e})=>{const{theme:t="system"}=d9();return s.jsx(L9,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var B9=X1[" useId ".trim().toString()]||(()=>{}),z9=0;function Na(e){const[t,n]=j.useState(B9());return jn(()=>{n(r=>r??String(z9++))},[e]),t?`radix-${t}`:""}const V9=["top","right","bottom","left"],bo=Math.min,Kr=Math.max,_g=Math.round,tp=Math.floor,Sa=e=>({x:e,y:e}),q9={left:"right",right:"left",bottom:"top",top:"bottom"},U9={start:"end",end:"start"};function Cj(e,t,n){return Kr(e,bo(t,n))}function hi(e,t){return typeof e=="function"?e(t):e}function fi(e){return e.split("-")[0]}function hd(e){return e.split("-")[1]}function XN(e){return e==="x"?"y":"x"}function JN(e){return e==="y"?"height":"width"}const W9=new Set(["top","bottom"]);function ga(e){return W9.has(fi(e))?"y":"x"}function ZN(e){return XN(ga(e))}function H9(e,t,n){n===void 0&&(n=!1);const r=hd(e),a=ZN(e),i=JN(a);let o=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=Cg(o)),[o,Cg(o)]}function K9(e){const t=Cg(e);return[Pj(e),t,Pj(t)]}function Pj(e){return e.replace(/start|end/g,t=>U9[t])}const LC=["left","right"],FC=["right","left"],G9=["top","bottom"],Y9=["bottom","top"];function Q9(e,t,n){switch(e){case"top":case"bottom":return n?t?FC:LC:t?LC:FC;case"left":case"right":return t?G9:Y9;default:return[]}}function X9(e,t,n,r){const a=hd(e);let i=Q9(fi(e),n==="start",r);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(Pj)))),i}function Cg(e){return e.replace(/left|right|bottom|top/g,t=>q9[t])}function J9(e){return{top:0,right:0,bottom:0,left:0,...e}}function TI(e){return typeof e!="number"?J9(e):{top:e,right:e,bottom:e,left:e}}function Pg(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function BC(e,t,n){let{reference:r,floating:a}=e;const i=ga(t),o=ZN(t),l=JN(o),c=fi(t),u=i==="y",d=r.x+r.width/2-a.width/2,h=r.y+r.height/2-a.height/2,f=r[l]/2-a[l]/2;let m;switch(c){case"top":m={x:d,y:r.y-a.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-a.width,y:h};break;default:m={x:r.x,y:r.y}}switch(hd(t)){case"start":m[o]-=f*(n&&u?-1:1);break;case"end":m[o]+=f*(n&&u?-1:1);break}return m}const Z9=async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:i=[],platform:o}=n,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:h}=BC(u,r,c),f=r,m={},v=0;for(let p=0;p<l.length;p++){const{name:g,fn:x}=l[p],{x:y,y:b,data:N,reset:w}=await x({x:d,y:h,initialPlacement:r,placement:f,strategy:a,middlewareData:m,rects:u,platform:o,elements:{reference:e,floating:t}});d=y??d,h=b??h,m={...m,[g]:{...m[g],...N}},w&&v<=50&&(v++,typeof w=="object"&&(w.placement&&(f=w.placement),w.rects&&(u=w.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):w.rects),{x:d,y:h}=BC(u,f,c)),p=-1)}return{x:d,y:h,placement:f,strategy:a,middlewareData:m}};async function lf(e,t){var n;t===void 0&&(t={});const{x:r,y:a,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:f=!1,padding:m=0}=hi(t,e),v=TI(m),g=l[f?h==="floating"?"reference":"floating":h],x=Pg(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(g)))==null||n?g:g.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),y=h==="floating"?{x:r,y:a,width:o.floating.width,height:o.floating.height}:o.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),N=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},w=Pg(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:b,strategy:c}):y);return{top:(x.top-w.top+v.top)/N.y,bottom:(w.bottom-x.bottom+v.bottom)/N.y,left:(x.left-w.left+v.left)/N.x,right:(w.right-x.right+v.right)/N.x}}const e7=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=hi(e,t)||{};if(u==null)return{};const h=TI(d),f={x:n,y:r},m=ZN(a),v=JN(m),p=await o.getDimensions(u),g=m==="y",x=g?"top":"left",y=g?"bottom":"right",b=g?"clientHeight":"clientWidth",N=i.reference[v]+i.reference[m]-f[m]-i.floating[v],w=f[m]-i.reference[m],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let _=S?S[b]:0;(!_||!await(o.isElement==null?void 0:o.isElement(S)))&&(_=l.floating[b]||i.floating[v]);const C=N/2-w/2,P=_/2-p[v]/2-1,A=bo(h[x],P),O=bo(h[y],P),E=A,z=_-p[v]-O,I=_/2-p[v]/2+C,W=Cj(E,I,z),V=!c.arrow&&hd(a)!=null&&I!==W&&i.reference[v]/2-(I<E?A:O)-p[v]/2<0,H=V?I<E?I-E:I-z:0;return{[m]:f[m]+H,data:{[m]:W,centerOffset:I-W-H,...V&&{alignmentOffset:H}},reset:V}}}),t7=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:p=!0,...g}=hi(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const x=fi(a),y=ga(l),b=fi(l)===l,N=await(c.isRTL==null?void 0:c.isRTL(u.floating)),w=f||(b||!p?[Cg(l)]:K9(l)),S=v!=="none";!f&&S&&w.push(...X9(l,p,v,N));const _=[l,...w],C=await lf(t,g),P=[];let A=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&P.push(C[x]),h){const I=H9(a,o,N);P.push(C[I[0]],C[I[1]])}if(A=[...A,{placement:a,overflows:P}],!P.every(I=>I<=0)){var O,E;const I=(((O=i.flip)==null?void 0:O.index)||0)+1,W=_[I];if(W&&(!(h==="alignment"?y!==ga(W):!1)||A.every(k=>k.overflows[0]>0&&ga(k.placement)===y)))return{data:{index:I,overflows:A},reset:{placement:W}};let V=(E=A.filter(H=>H.overflows[0]<=0).sort((H,k)=>H.overflows[1]-k.overflows[1])[0])==null?void 0:E.placement;if(!V)switch(m){case"bestFit":{var z;const H=(z=A.filter(k=>{if(S){const D=ga(k.placement);return D===y||D==="y"}return!0}).map(k=>[k.placement,k.overflows.filter(D=>D>0).reduce((D,X)=>D+X,0)]).sort((k,D)=>k[1]-D[1])[0])==null?void 0:z[0];H&&(V=H);break}case"initialPlacement":V=l;break}if(a!==V)return{reset:{placement:V}}}return{}}}};function zC(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function VC(e){return V9.some(t=>e[t]>=0)}const n7=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...a}=hi(e,t);switch(r){case"referenceHidden":{const i=await lf(t,{...a,elementContext:"reference"}),o=zC(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:VC(o)}}}case"escaped":{const i=await lf(t,{...a,altBoundary:!0}),o=zC(i,n.floating);return{data:{escapedOffsets:o,escaped:VC(o)}}}default:return{}}}}},OI=new Set(["left","top"]);async function r7(e,t){const{placement:n,platform:r,elements:a}=e,i=await(r.isRTL==null?void 0:r.isRTL(a.floating)),o=fi(n),l=hd(n),c=ga(n)==="y",u=OI.has(o)?-1:1,d=i&&c?-1:1,h=hi(t,e);let{mainAxis:f,crossAxis:m,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof v=="number"&&(m=l==="end"?v*-1:v),c?{x:m*d,y:f*u}:{x:f*u,y:m*d}}const s7=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:i,placement:o,middlewareData:l}=t,c=await r7(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},a7=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:g=>{let{x,y}=g;return{x,y}}},...c}=hi(e,t),u={x:n,y:r},d=await lf(t,c),h=ga(fi(a)),f=XN(h);let m=u[f],v=u[h];if(i){const g=f==="y"?"top":"left",x=f==="y"?"bottom":"right",y=m+d[g],b=m-d[x];m=Cj(y,m,b)}if(o){const g=h==="y"?"top":"left",x=h==="y"?"bottom":"right",y=v+d[g],b=v-d[x];v=Cj(y,v,b)}const p=l.fn({...t,[f]:m,[h]:v});return{...p,data:{x:p.x-n,y:p.y-r,enabled:{[f]:i,[h]:o}}}}}},i7=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:a,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=hi(e,t),d={x:n,y:r},h=ga(a),f=XN(h);let m=d[f],v=d[h];const p=hi(l,t),g=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const b=f==="y"?"height":"width",N=i.reference[f]-i.floating[b]+g.mainAxis,w=i.reference[f]+i.reference[b]-g.mainAxis;m<N?m=N:m>w&&(m=w)}if(u){var x,y;const b=f==="y"?"width":"height",N=OI.has(fi(a)),w=i.reference[h]-i.floating[b]+(N&&((x=o.offset)==null?void 0:x[h])||0)+(N?0:g.crossAxis),S=i.reference[h]+i.reference[b]+(N?0:((y=o.offset)==null?void 0:y[h])||0)-(N?g.crossAxis:0);v<w?v=w:v>S&&(v=S)}return{[f]:m,[h]:v}}}},o7=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...u}=hi(e,t),d=await lf(t,u),h=fi(a),f=hd(a),m=ga(a)==="y",{width:v,height:p}=i.floating;let g,x;h==="top"||h==="bottom"?(g=h,x=f===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(x=h,g=f==="end"?"top":"bottom");const y=p-d.top-d.bottom,b=v-d.left-d.right,N=bo(p-d[g],y),w=bo(v-d[x],b),S=!t.middlewareData.shift;let _=N,C=w;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(C=b),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(_=y),S&&!f){const A=Kr(d.left,0),O=Kr(d.right,0),E=Kr(d.top,0),z=Kr(d.bottom,0);m?C=v-2*(A!==0||O!==0?A+O:Kr(d.left,d.right)):_=p-2*(E!==0||z!==0?E+z:Kr(d.top,d.bottom))}await c({...t,availableWidth:C,availableHeight:_});const P=await o.getDimensions(l.floating);return v!==P.width||p!==P.height?{reset:{rects:!0}}:{}}}};function dx(){return typeof window<"u"}function fd(e){return DI(e)?(e.nodeName||"").toLowerCase():"#document"}function Zr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ma(e){var t;return(t=(DI(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function DI(e){return dx()?e instanceof Node||e instanceof Zr(e).Node:!1}function Ks(e){return dx()?e instanceof Element||e instanceof Zr(e).Element:!1}function ka(e){return dx()?e instanceof HTMLElement||e instanceof Zr(e).HTMLElement:!1}function qC(e){return!dx()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Zr(e).ShadowRoot}const l7=new Set(["inline","contents"]);function mm(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=Gs(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!l7.has(a)}const c7=new Set(["table","td","th"]);function u7(e){return c7.has(fd(e))}const d7=[":popover-open",":modal"];function hx(e){return d7.some(t=>{try{return e.matches(t)}catch{return!1}})}const h7=["transform","translate","scale","rotate","perspective"],f7=["transform","translate","scale","rotate","perspective","filter"],m7=["paint","layout","strict","content"];function eS(e){const t=tS(),n=Ks(e)?Gs(e):e;return h7.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||f7.some(r=>(n.willChange||"").includes(r))||m7.some(r=>(n.contain||"").includes(r))}function p7(e){let t=jo(e);for(;ka(t)&&!Pu(t);){if(eS(t))return t;if(hx(t))return null;t=jo(t)}return null}function tS(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const g7=new Set(["html","body","#document"]);function Pu(e){return g7.has(fd(e))}function Gs(e){return Zr(e).getComputedStyle(e)}function fx(e){return Ks(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function jo(e){if(fd(e)==="html")return e;const t=e.assignedSlot||e.parentNode||qC(e)&&e.host||Ma(e);return qC(t)?t.host:t}function MI(e){const t=jo(e);return Pu(t)?e.ownerDocument?e.ownerDocument.body:e.body:ka(t)&&mm(t)?t:MI(t)}function cf(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=MI(e),i=a===((r=e.ownerDocument)==null?void 0:r.body),o=Zr(a);if(i){const l=Aj(o);return t.concat(o,o.visualViewport||[],mm(a)?a:[],l&&n?cf(l):[])}return t.concat(a,cf(a,[],n))}function Aj(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function II(e){const t=Gs(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=ka(e),i=a?e.offsetWidth:n,o=a?e.offsetHeight:r,l=_g(n)!==i||_g(r)!==o;return l&&(n=i,r=o),{width:n,height:r,$:l}}function nS(e){return Ks(e)?e:e.contextElement}function Xc(e){const t=nS(e);if(!ka(t))return Sa(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:i}=II(t);let o=(i?_g(n.width):n.width)/r,l=(i?_g(n.height):n.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const v7=Sa(0);function $I(e){const t=Zr(e);return!tS()||!t.visualViewport?v7:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function x7(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Zr(e)?!1:t}function Ol(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),i=nS(e);let o=Sa(1);t&&(r?Ks(r)&&(o=Xc(r)):o=Xc(e));const l=x7(i,n,r)?$I(i):Sa(0);let c=(a.left+l.x)/o.x,u=(a.top+l.y)/o.y,d=a.width/o.x,h=a.height/o.y;if(i){const f=Zr(i),m=r&&Ks(r)?Zr(r):r;let v=f,p=Aj(v);for(;p&&r&&m!==v;){const g=Xc(p),x=p.getBoundingClientRect(),y=Gs(p),b=x.left+(p.clientLeft+parseFloat(y.paddingLeft))*g.x,N=x.top+(p.clientTop+parseFloat(y.paddingTop))*g.y;c*=g.x,u*=g.y,d*=g.x,h*=g.y,c+=b,u+=N,v=Zr(p),p=Aj(v)}}return Pg({width:d,height:h,x:c,y:u})}function rS(e,t){const n=fx(e).scrollLeft;return t?t.left+n:Ol(Ma(e)).left+n}function RI(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),a=r.left+t.scrollLeft-(n?0:rS(e,r)),i=r.top+t.scrollTop;return{x:a,y:i}}function y7(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const i=a==="fixed",o=Ma(r),l=t?hx(t.floating):!1;if(r===o||l&&i)return n;let c={scrollLeft:0,scrollTop:0},u=Sa(1);const d=Sa(0),h=ka(r);if((h||!h&&!i)&&((fd(r)!=="body"||mm(o))&&(c=fx(r)),ka(r))){const m=Ol(r);u=Xc(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}const f=o&&!h&&!i?RI(o,c,!0):Sa(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+f.x,y:n.y*u.y-c.scrollTop*u.y+d.y+f.y}}function b7(e){return Array.from(e.getClientRects())}function j7(e){const t=Ma(e),n=fx(e),r=e.ownerDocument.body,a=Kr(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=Kr(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+rS(e);const l=-n.scrollTop;return Gs(r).direction==="rtl"&&(o+=Kr(t.clientWidth,r.clientWidth)-a),{width:a,height:i,x:o,y:l}}function w7(e,t){const n=Zr(e),r=Ma(e),a=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const u=tS();(!u||u&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:l,y:c}}const N7=new Set(["absolute","fixed"]);function S7(e,t){const n=Ol(e,!0,t==="fixed"),r=n.top+e.clientTop,a=n.left+e.clientLeft,i=ka(e)?Xc(e):Sa(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,u=r*i.y;return{width:o,height:l,x:c,y:u}}function UC(e,t,n){let r;if(t==="viewport")r=w7(e,n);else if(t==="document")r=j7(Ma(e));else if(Ks(t))r=S7(t,n);else{const a=$I(e);r={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Pg(r)}function LI(e,t){const n=jo(e);return n===t||!Ks(n)||Pu(n)?!1:Gs(n).position==="fixed"||LI(n,t)}function _7(e,t){const n=t.get(e);if(n)return n;let r=cf(e,[],!1).filter(l=>Ks(l)&&fd(l)!=="body"),a=null;const i=Gs(e).position==="fixed";let o=i?jo(e):e;for(;Ks(o)&&!Pu(o);){const l=Gs(o),c=eS(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&N7.has(a.position)||mm(o)&&!c&&LI(e,o))?r=r.filter(d=>d!==o):a=l,o=jo(o)}return t.set(e,r),r}function C7(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const o=[...n==="clippingAncestors"?hx(t)?[]:_7(t,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,d)=>{const h=UC(t,d,a);return u.top=Kr(h.top,u.top),u.right=bo(h.right,u.right),u.bottom=bo(h.bottom,u.bottom),u.left=Kr(h.left,u.left),u},UC(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function P7(e){const{width:t,height:n}=II(e);return{width:t,height:n}}function A7(e,t,n){const r=ka(t),a=Ma(t),i=n==="fixed",o=Ol(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=Sa(0);function u(){c.x=rS(a)}if(r||!r&&!i)if((fd(t)!=="body"||mm(a))&&(l=fx(t)),r){const m=Ol(t,!0,i,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else a&&u();i&&!r&&a&&u();const d=a&&!r&&!i?RI(a,l):Sa(0),h=o.left+l.scrollLeft-c.x-d.x,f=o.top+l.scrollTop-c.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function C0(e){return Gs(e).position==="static"}function WC(e,t){if(!ka(e)||Gs(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Ma(e)===n&&(n=n.ownerDocument.body),n}function FI(e,t){const n=Zr(e);if(hx(e))return n;if(!ka(e)){let a=jo(e);for(;a&&!Pu(a);){if(Ks(a)&&!C0(a))return a;a=jo(a)}return n}let r=WC(e,t);for(;r&&u7(r)&&C0(r);)r=WC(r,t);return r&&Pu(r)&&C0(r)&&!eS(r)?n:r||p7(e)||n}const k7=async function(e){const t=this.getOffsetParent||FI,n=this.getDimensions,r=await n(e.floating);return{reference:A7(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function E7(e){return Gs(e).direction==="rtl"}const T7={convertOffsetParentRelativeRectToViewportRelativeRect:y7,getDocumentElement:Ma,getClippingRect:C7,getOffsetParent:FI,getElementRects:k7,getClientRects:b7,getDimensions:P7,getScale:Xc,isElement:Ks,isRTL:E7};function BI(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function O7(e,t){let n=null,r;const a=Ma(e);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=e.getBoundingClientRect(),{left:d,top:h,width:f,height:m}=u;if(l||t(),!f||!m)return;const v=tp(h),p=tp(a.clientWidth-(d+f)),g=tp(a.clientHeight-(h+m)),x=tp(d),b={rootMargin:-v+"px "+-p+"px "+-g+"px "+-x+"px",threshold:Kr(0,bo(1,c))||1};let N=!0;function w(S){const _=S[0].intersectionRatio;if(_!==c){if(!N)return o();_?o(!1,_):r=setTimeout(()=>{o(!1,1e-7)},1e3)}_===1&&!BI(u,e.getBoundingClientRect())&&o(),N=!1}try{n=new IntersectionObserver(w,{...b,root:a.ownerDocument})}catch{n=new IntersectionObserver(w,b)}n.observe(e)}return o(!0),i}function D7(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=nS(e),d=a||i?[...u?cf(u):[],...cf(t)]:[];d.forEach(x=>{a&&x.addEventListener("scroll",n,{passive:!0}),i&&x.addEventListener("resize",n)});const h=u&&l?O7(u,n):null;let f=-1,m=null;o&&(m=new ResizeObserver(x=>{let[y]=x;y&&y.target===u&&m&&(m.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var b;(b=m)==null||b.observe(t)})),n()}),u&&!c&&m.observe(u),m.observe(t));let v,p=c?Ol(e):null;c&&g();function g(){const x=Ol(e);p&&!BI(p,x)&&n(),p=x,v=requestAnimationFrame(g)}return n(),()=>{var x;d.forEach(y=>{a&&y.removeEventListener("scroll",n),i&&y.removeEventListener("resize",n)}),h==null||h(),(x=m)==null||x.disconnect(),m=null,c&&cancelAnimationFrame(v)}}const M7=s7,I7=a7,$7=t7,R7=o7,L7=n7,HC=e7,F7=i7,B7=(e,t,n)=>{const r=new Map,a={platform:T7,...n},i={...a.platform,_c:r};return Z9(e,t,{...a,platform:i})};var z7=typeof document<"u",V7=function(){},Yp=z7?j.useLayoutEffect:V7;function Ag(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Ag(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;r--!==0;){const i=a[r];if(!(i==="_owner"&&e.$$typeof)&&!Ag(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function zI(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function KC(e,t){const n=zI(e);return Math.round(t*n)/n}function P0(e){const t=j.useRef(e);return Yp(()=>{t.current=e}),t}function q7(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,h]=j.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,m]=j.useState(r);Ag(f,r)||m(r);const[v,p]=j.useState(null),[g,x]=j.useState(null),y=j.useCallback(k=>{k!==S.current&&(S.current=k,p(k))},[]),b=j.useCallback(k=>{k!==_.current&&(_.current=k,x(k))},[]),N=i||v,w=o||g,S=j.useRef(null),_=j.useRef(null),C=j.useRef(d),P=c!=null,A=P0(c),O=P0(a),E=P0(u),z=j.useCallback(()=>{if(!S.current||!_.current)return;const k={placement:t,strategy:n,middleware:f};O.current&&(k.platform=O.current),B7(S.current,_.current,k).then(D=>{const X={...D,isPositioned:E.current!==!1};I.current&&!Ag(C.current,X)&&(C.current=X,Hl.flushSync(()=>{h(X)}))})},[f,t,n,O,E]);Yp(()=>{u===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,h(k=>({...k,isPositioned:!1})))},[u]);const I=j.useRef(!1);Yp(()=>(I.current=!0,()=>{I.current=!1}),[]),Yp(()=>{if(N&&(S.current=N),w&&(_.current=w),N&&w){if(A.current)return A.current(N,w,z);z()}},[N,w,z,A,P]);const W=j.useMemo(()=>({reference:S,floating:_,setReference:y,setFloating:b}),[y,b]),V=j.useMemo(()=>({reference:N,floating:w}),[N,w]),H=j.useMemo(()=>{const k={position:n,left:0,top:0};if(!V.floating)return k;const D=KC(V.floating,d.x),X=KC(V.floating,d.y);return l?{...k,transform:"translate("+D+"px, "+X+"px)",...zI(V.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:D,top:X}},[n,l,V.floating,d.x,d.y]);return j.useMemo(()=>({...d,update:z,refs:W,elements:V,floatingStyles:H}),[d,z,W,V,H])}const U7=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:a}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?HC({element:r.current,padding:a}).fn(n):{}:r?HC({element:r,padding:a}).fn(n):{}}}},W7=(e,t)=>({...M7(e),options:[e,t]}),H7=(e,t)=>({...I7(e),options:[e,t]}),K7=(e,t)=>({...F7(e),options:[e,t]}),G7=(e,t)=>({...$7(e),options:[e,t]}),Y7=(e,t)=>({...R7(e),options:[e,t]}),Q7=(e,t)=>({...L7(e),options:[e,t]}),X7=(e,t)=>({...U7(e),options:[e,t]});var J7="Arrow",VI=j.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5,...i}=e;return s.jsx(Le.svg,{...i,ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});VI.displayName=J7;var Z7=VI;function sS(e){const[t,n]=j.useState(void 0);return jn(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;n({width:o,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var aS="Popper",[qI,md]=Fr(aS),[eW,UI]=qI(aS),WI=e=>{const{__scopePopper:t,children:n}=e,[r,a]=j.useState(null);return s.jsx(eW,{scope:t,anchor:r,onAnchorChange:a,children:n})};WI.displayName=aS;var HI="PopperAnchor",KI=j.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...a}=e,i=UI(HI,n),o=j.useRef(null),l=dt(t,o);return j.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:s.jsx(Le.div,{...a,ref:l})});KI.displayName=HI;var iS="PopperContent",[tW,nW]=qI(iS),GI=j.forwardRef((e,t)=>{var le,Z,B,oe,U,K;const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:v,...p}=e,g=UI(iS,n),[x,y]=j.useState(null),b=dt(t,fe=>y(fe)),[N,w]=j.useState(null),S=sS(N),_=(S==null?void 0:S.width)??0,C=(S==null?void 0:S.height)??0,P=r+(i!=="center"?"-"+i:""),A=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},O=Array.isArray(u)?u:[u],E=O.length>0,z={padding:A,boundary:O.filter(sW),altBoundary:E},{refs:I,floatingStyles:W,placement:V,isPositioned:H,middlewareData:k}=q7({strategy:"fixed",placement:P,whileElementsMounted:(...fe)=>D7(...fe,{animationFrame:m==="always"}),elements:{reference:g.anchor},middleware:[W7({mainAxis:a+C,alignmentAxis:o}),c&&H7({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?K7():void 0,...z}),c&&G7({...z}),Y7({...z,apply:({elements:fe,rects:Se,availableWidth:$e,availableHeight:Ue})=>{const{width:ft,height:Tt}=Se.reference,Rt=fe.floating.style;Rt.setProperty("--radix-popper-available-width",`${$e}px`),Rt.setProperty("--radix-popper-available-height",`${Ue}px`),Rt.setProperty("--radix-popper-anchor-width",`${ft}px`),Rt.setProperty("--radix-popper-anchor-height",`${Tt}px`)}}),N&&X7({element:N,padding:l}),aW({arrowWidth:_,arrowHeight:C}),f&&Q7({strategy:"referenceHidden",...z})]}),[D,X]=XI(V),Q=jr(v);jn(()=>{H&&(Q==null||Q())},[H,Q]);const te=(le=k.arrow)==null?void 0:le.x,ne=(Z=k.arrow)==null?void 0:Z.y,T=((B=k.arrow)==null?void 0:B.centerOffset)!==0,[ce,me]=j.useState();return jn(()=>{x&&me(window.getComputedStyle(x).zIndex)},[x]),s.jsx("div",{ref:I.setFloating,"data-radix-popper-content-wrapper":"",style:{...W,transform:H?W.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ce,"--radix-popper-transform-origin":[(oe=k.transformOrigin)==null?void 0:oe.x,(U=k.transformOrigin)==null?void 0:U.y].join(" "),...((K=k.hide)==null?void 0:K.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(tW,{scope:n,placedSide:D,onArrowChange:w,arrowX:te,arrowY:ne,shouldHideArrow:T,children:s.jsx(Le.div,{"data-side":D,"data-align":X,...p,ref:b,style:{...p.style,animation:H?void 0:"none"}})})})});GI.displayName=iS;var YI="PopperArrow",rW={top:"bottom",right:"left",bottom:"top",left:"right"},QI=j.forwardRef(function(t,n){const{__scopePopper:r,...a}=t,i=nW(YI,r),o=rW[i.placedSide];return s.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:s.jsx(Z7,{...a,ref:n,style:{...a.style,display:"block"}})})});QI.displayName=YI;function sW(e){return e!==null}var aW=e=>({name:"transformOrigin",options:e,fn(t){var g,x,y;const{placement:n,rects:r,middlewareData:a}=t,o=((g=a.arrow)==null?void 0:g.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[u,d]=XI(n),h={start:"0%",center:"50%",end:"100%"}[d],f=(((x=a.arrow)==null?void 0:x.x)??0)+l/2,m=(((y=a.arrow)==null?void 0:y.y)??0)+c/2;let v="",p="";return u==="bottom"?(v=o?h:`${f}px`,p=`${-c}px`):u==="top"?(v=o?h:`${f}px`,p=`${r.floating.height+c}px`):u==="right"?(v=`${-c}px`,p=o?h:`${m}px`):u==="left"&&(v=`${r.floating.width+c}px`,p=o?h:`${m}px`),{data:{x:v,y:p}}}});function XI(e){const[t,n="center"]=e.split("-");return[t,n]}var JI=WI,oS=KI,lS=GI,cS=QI,[mx,$ke]=Fr("Tooltip",[md]),uS=md(),ZI="TooltipProvider",iW=700,GC="tooltip.open",[oW,e$]=mx(ZI),t$=e=>{const{__scopeTooltip:t,delayDuration:n=iW,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:i}=e,o=j.useRef(!0),l=j.useRef(!1),c=j.useRef(0);return j.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),s.jsx(oW,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:j.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:j.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:j.useCallback(u=>{l.current=u},[]),disableHoverableContent:a,children:i})};t$.displayName=ZI;var n$="Tooltip",[Rke,px]=mx(n$),kj="TooltipTrigger",lW=j.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=px(kj,n),i=e$(kj,n),o=uS(n),l=j.useRef(null),c=dt(t,l,a.onTriggerChange),u=j.useRef(!1),d=j.useRef(!1),h=j.useCallback(()=>u.current=!1,[]);return j.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),s.jsx(oS,{asChild:!0,...o,children:s.jsx(Le.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:c,onPointerMove:Pe(e.onPointerMove,f=>{f.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),d.current=!0)}),onPointerLeave:Pe(e.onPointerLeave,()=>{a.onTriggerLeave(),d.current=!1}),onPointerDown:Pe(e.onPointerDown,()=>{a.open&&a.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Pe(e.onFocus,()=>{u.current||a.onOpen()}),onBlur:Pe(e.onBlur,a.onClose),onClick:Pe(e.onClick,a.onClose)})})});lW.displayName=kj;var cW="TooltipPortal",[Lke,uW]=mx(cW,{forceMount:void 0}),Au="TooltipContent",r$=j.forwardRef((e,t)=>{const n=uW(Au,e.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...i}=e,o=px(Au,e.__scopeTooltip);return s.jsx(js,{present:r||o.open,children:o.disableHoverableContent?s.jsx(s$,{side:a,...i,ref:t}):s.jsx(dW,{side:a,...i,ref:t})})}),dW=j.forwardRef((e,t)=>{const n=px(Au,e.__scopeTooltip),r=e$(Au,e.__scopeTooltip),a=j.useRef(null),i=dt(t,a),[o,l]=j.useState(null),{trigger:c,onClose:u}=n,d=a.current,{onPointerInTransitChange:h}=r,f=j.useCallback(()=>{l(null),h(!1)},[h]),m=j.useCallback((v,p)=>{const g=v.currentTarget,x={x:v.clientX,y:v.clientY},y=gW(x,g.getBoundingClientRect()),b=vW(x,y),N=xW(p.getBoundingClientRect()),w=bW([...b,...N]);l(w),h(!0)},[h]);return j.useEffect(()=>()=>f(),[f]),j.useEffect(()=>{if(c&&d){const v=g=>m(g,d),p=g=>m(g,c);return c.addEventListener("pointerleave",v),d.addEventListener("pointerleave",p),()=>{c.removeEventListener("pointerleave",v),d.removeEventListener("pointerleave",p)}}},[c,d,m,f]),j.useEffect(()=>{if(o){const v=p=>{const g=p.target,x={x:p.clientX,y:p.clientY},y=(c==null?void 0:c.contains(g))||(d==null?void 0:d.contains(g)),b=!yW(x,o);y?f():b&&(f(),u())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[c,d,o,u,f]),s.jsx(s$,{...e,ref:i})}),[hW,fW]=mx(n$,{isInside:!1}),mW=qM("TooltipContent"),s$=j.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,c=px(Au,n),u=uS(n),{onClose:d}=c;return j.useEffect(()=>(document.addEventListener(GC,d),()=>document.removeEventListener(GC,d)),[d]),j.useEffect(()=>{if(c.trigger){const h=f=>{const m=f.target;m!=null&&m.contains(c.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,d]),s.jsx(ld,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:s.jsxs(lS,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(mW,{children:r}),s.jsx(hW,{scope:n,isInside:!0,children:s.jsx(Iq,{id:c.contentId,role:"tooltip",children:a||r})})]})})});r$.displayName=Au;var a$="TooltipArrow",pW=j.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=uS(n);return fW(a$,n).isInside?null:s.jsx(cS,{...a,...r,ref:t})});pW.displayName=a$;function gW(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,a,i)){case i:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function vW(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function xW(e){const{top:t,right:n,bottom:r,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:r},{x:a,y:r}]}function yW(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],u=l.x,d=l.y,h=c.x,f=c.y;d>r!=f>r&&n<(h-u)*(r-d)/(f-d)+u&&(a=!a)}return a}function bW(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),jW(t)}function jW(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const a=e[r];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const a=e[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var wW=t$,i$=r$;const NW=wW,SW=j.forwardRef(({className:e,sideOffset:t=4,...n},r)=>s.jsx(i$,{ref:r,sideOffset:t,className:Ee("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));SW.displayName=i$.displayName;var pd=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},_W={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Vi,H1,vO,CW=(vO=class{constructor(){Re(this,Vi,_W);Re(this,H1,!1)}setTimeoutProvider(e){Ae(this,Vi,e)}setTimeout(e,t){return G(this,Vi).setTimeout(e,t)}clearTimeout(e){G(this,Vi).clearTimeout(e)}setInterval(e,t){return G(this,Vi).setInterval(e,t)}clearInterval(e){G(this,Vi).clearInterval(e)}},Vi=new WeakMap,H1=new WeakMap,vO),il=new CW;function PW(e){setTimeout(e,0)}var Dl=typeof window>"u"||"Deno"in globalThis;function gr(){}function AW(e,t){return typeof e=="function"?e(t):e}function Ej(e){return typeof e=="number"&&e>=0&&e!==1/0}function o$(e,t){return Math.max(e+(t||0)-Date.now(),0)}function fo(e,t){return typeof e=="function"?e(t):e}function ls(e,t){return typeof e=="function"?e(t):e}function YC(e,t){const{type:n="all",exact:r,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==dS(o,t.options))return!1}else if(!uf(t.queryKey,o))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function QC(e,t){const{exact:n,status:r,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(Ml(t.options.mutationKey)!==Ml(i))return!1}else if(!uf(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||a&&!a(t))}function dS(e,t){return((t==null?void 0:t.queryKeyHashFn)||Ml)(e)}function Ml(e){return JSON.stringify(e,(t,n)=>Tj(n)?Object.keys(n).sort().reduce((r,a)=>(r[a]=n[a],r),{}):n)}function uf(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>uf(e[n],t[n])):!1}var kW=Object.prototype.hasOwnProperty;function l$(e,t){if(e===t)return e;const n=XC(e)&&XC(t);if(!n&&!(Tj(e)&&Tj(t)))return t;const a=(n?e:Object.keys(e)).length,i=n?t:Object.keys(t),o=i.length,l=n?new Array(o):{};let c=0;for(let u=0;u<o;u++){const d=n?u:i[u],h=e[d],f=t[d];if(h===f){l[d]=h,(n?u<a:kW.call(e,d))&&c++;continue}if(h===null||f===null||typeof h!="object"||typeof f!="object"){l[d]=f;continue}const m=l$(h,f);l[d]=m,m===h&&c++}return a===o&&c===a?e:l}function kg(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function XC(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Tj(e){if(!JC(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!JC(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function JC(e){return Object.prototype.toString.call(e)==="[object Object]"}function EW(e){return new Promise(t=>{il.setTimeout(t,e)})}function Oj(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?l$(e,t):t}function TW(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function OW(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var hS=Symbol();function c$(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===hS?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function u$(e,t){return typeof e=="function"?e(...t):!!e}var hl,qi,iu,xO,DW=(xO=class extends pd{constructor(){super();Re(this,hl);Re(this,qi);Re(this,iu);Ae(this,iu,t=>{if(!Dl&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){G(this,qi)||this.setEventListener(G(this,iu))}onUnsubscribe(){var t;this.hasListeners()||((t=G(this,qi))==null||t.call(this),Ae(this,qi,void 0))}setEventListener(t){var n;Ae(this,iu,t),(n=G(this,qi))==null||n.call(this),Ae(this,qi,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){G(this,hl)!==t&&(Ae(this,hl,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof G(this,hl)=="boolean"?G(this,hl):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},hl=new WeakMap,qi=new WeakMap,iu=new WeakMap,xO),fS=new DW;function Dj(){let e,t;const n=new Promise((a,i)=>{e=a,t=i});n.status="pending",n.catch(()=>{});function r(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{r({status:"fulfilled",value:a}),e(a)},n.reject=a=>{r({status:"rejected",reason:a}),t(a)},n}var MW=PW;function IW(){let e=[],t=0,n=l=>{l()},r=l=>{l()},a=MW;const i=l=>{t?e.push(l):a(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{a=l}}}var An=IW(),ou,Ui,lu,yO,$W=(yO=class extends pd{constructor(){super();Re(this,ou,!0);Re(this,Ui);Re(this,lu);Ae(this,lu,t=>{if(!Dl&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){G(this,Ui)||this.setEventListener(G(this,lu))}onUnsubscribe(){var t;this.hasListeners()||((t=G(this,Ui))==null||t.call(this),Ae(this,Ui,void 0))}setEventListener(t){var n;Ae(this,lu,t),(n=G(this,Ui))==null||n.call(this),Ae(this,Ui,t(this.setOnline.bind(this)))}setOnline(t){G(this,ou)!==t&&(Ae(this,ou,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return G(this,ou)}},ou=new WeakMap,Ui=new WeakMap,lu=new WeakMap,yO),Eg=new $W;function RW(e){return Math.min(1e3*2**e,3e4)}function d$(e){return(e??"online")==="online"?Eg.isOnline():!0}var Mj=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function h$(e){let t=!1,n=0,r;const a=Dj(),i=()=>a.status!=="pending",o=p=>{var g;if(!i()){const x=new Mj(p);f(x),(g=e.onCancel)==null||g.call(e,x)}},l=()=>{t=!0},c=()=>{t=!1},u=()=>fS.isFocused()&&(e.networkMode==="always"||Eg.isOnline())&&e.canRun(),d=()=>d$(e.networkMode)&&e.canRun(),h=p=>{i()||(r==null||r(),a.resolve(p))},f=p=>{i()||(r==null||r(),a.reject(p))},m=()=>new Promise(p=>{var g;r=x=>{(i()||u())&&p(x)},(g=e.onPause)==null||g.call(e)}).then(()=>{var p;r=void 0,i()||(p=e.onContinue)==null||p.call(e)}),v=()=>{if(i())return;let p;const g=n===0?e.initialPromise:void 0;try{p=g??e.fn()}catch(x){p=Promise.reject(x)}Promise.resolve(p).then(h).catch(x=>{var S;if(i())return;const y=e.retry??(Dl?0:3),b=e.retryDelay??RW,N=typeof b=="function"?b(n,x):b,w=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,x);if(t||!w){f(x);return}n++,(S=e.onFail)==null||S.call(e,n,x),EW(N).then(()=>u()?void 0:m()).then(()=>{t?f(x):v()})})};return{promise:a,status:()=>a.status,cancel:o,continue:()=>(r==null||r(),a),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?v():m().then(v),a)}}var fl,bO,f$=(bO=class{constructor(){Re(this,fl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ej(this.gcTime)&&Ae(this,fl,il.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Dl?1/0:5*60*1e3))}clearGcTimeout(){G(this,fl)&&(il.clearTimeout(G(this,fl)),Ae(this,fl,void 0))}},fl=new WeakMap,bO),ml,cu,os,pl,$n,em,gl,Ds,Ba,jO,LW=(jO=class extends f${constructor(t){super();Re(this,Ds);Re(this,ml);Re(this,cu);Re(this,os);Re(this,pl);Re(this,$n);Re(this,em);Re(this,gl);Ae(this,gl,!1),Ae(this,em,t.defaultOptions),this.setOptions(t.options),this.observers=[],Ae(this,pl,t.client),Ae(this,os,G(this,pl).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Ae(this,ml,ZC(this.options)),this.state=t.state??G(this,ml),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=G(this,$n))==null?void 0:t.promise}setOptions(t){if(this.options={...G(this,em),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=ZC(this.options);n.data!==void 0&&(this.setData(n.data,{updatedAt:n.dataUpdatedAt,manual:!0}),Ae(this,ml,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&G(this,os).remove(this)}setData(t,n){const r=Oj(this.state.data,t,this.options);return st(this,Ds,Ba).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){st(this,Ds,Ba).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,a;const n=(r=G(this,$n))==null?void 0:r.promise;return(a=G(this,$n))==null||a.cancel(t),n?n.then(gr).catch(gr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(G(this,ml))}isActive(){return this.observers.some(t=>ls(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===hS||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>fo(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!o$(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=G(this,$n))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=G(this,$n))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),G(this,os).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(G(this,$n)&&(G(this,gl)?G(this,$n).cancel({revert:!0}):G(this,$n).cancelRetry()),this.scheduleGc()),G(this,os).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||st(this,Ds,Ba).call(this,{type:"invalidate"})}async fetch(t,n){var c,u,d,h,f,m,v,p,g,x,y,b;if(this.state.fetchStatus!=="idle"&&((c=G(this,$n))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(G(this,$n))return G(this,$n).continueRetry(),G(this,$n).promise}if(t&&this.setOptions(t),!this.options.queryFn){const N=this.observers.find(w=>w.options.queryFn);N&&this.setOptions(N.options)}const r=new AbortController,a=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(Ae(this,gl,!0),r.signal)})},i=()=>{const N=c$(this.options,n),S=(()=>{const _={client:G(this,pl),queryKey:this.queryKey,meta:this.meta};return a(_),_})();return Ae(this,gl,!1),this.options.persister?this.options.persister(N,S,this):N(S)},l=(()=>{const N={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:G(this,pl),state:this.state,fetchFn:i};return a(N),N})();(u=this.options.behavior)==null||u.onFetch(l,this),Ae(this,cu,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&st(this,Ds,Ba).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta}),Ae(this,$n,h$({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,onCancel:N=>{N instanceof Mj&&N.revert&&this.setState({...G(this,cu),fetchStatus:"idle"}),r.abort()},onFail:(N,w)=>{st(this,Ds,Ba).call(this,{type:"failed",failureCount:N,error:w})},onPause:()=>{st(this,Ds,Ba).call(this,{type:"pause"})},onContinue:()=>{st(this,Ds,Ba).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const N=await G(this,$n).start();if(N===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(N),(m=(f=G(this,os).config).onSuccess)==null||m.call(f,N,this),(p=(v=G(this,os).config).onSettled)==null||p.call(v,N,this.state.error,this),N}catch(N){if(N instanceof Mj){if(N.silent)return G(this,$n).promise;if(N.revert){if(this.state.data===void 0)throw N;return this.state.data}}throw st(this,Ds,Ba).call(this,{type:"error",error:N}),(x=(g=G(this,os).config).onError)==null||x.call(g,N,this),(b=(y=G(this,os).config).onSettled)==null||b.call(y,this.state.data,N,this),N}finally{this.scheduleGc()}}},ml=new WeakMap,cu=new WeakMap,os=new WeakMap,pl=new WeakMap,$n=new WeakMap,em=new WeakMap,gl=new WeakMap,Ds=new WeakSet,Ba=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...m$(r.data,this.options),fetchMeta:t.meta??null};case"success":const a={...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Ae(this,cu,t.manual?a:void 0),a;case"error":const i=t.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),An.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),G(this,os).notify({query:this,type:"updated",action:t})})},jO);function m$(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:d$(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function ZC(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Ar,mt,tm,fr,vl,uu,Ha,Wi,nm,du,hu,xl,yl,Hi,fu,_t,gh,Ij,$j,Rj,Lj,Fj,Bj,zj,p$,wO,FW=(wO=class extends pd{constructor(t,n){super();Re(this,_t);Re(this,Ar);Re(this,mt);Re(this,tm);Re(this,fr);Re(this,vl);Re(this,uu);Re(this,Ha);Re(this,Wi);Re(this,nm);Re(this,du);Re(this,hu);Re(this,xl);Re(this,yl);Re(this,Hi);Re(this,fu,new Set);this.options=n,Ae(this,Ar,t),Ae(this,Wi,null),Ae(this,Ha,Dj()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(G(this,mt).addObserver(this),eP(G(this,mt),this.options)?st(this,_t,gh).call(this):this.updateResult(),st(this,_t,Lj).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Vj(G(this,mt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Vj(G(this,mt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,st(this,_t,Fj).call(this),st(this,_t,Bj).call(this),G(this,mt).removeObserver(this)}setOptions(t){const n=this.options,r=G(this,mt);if(this.options=G(this,Ar).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ls(this.options.enabled,G(this,mt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");st(this,_t,zj).call(this),G(this,mt).setOptions(this.options),n._defaulted&&!kg(this.options,n)&&G(this,Ar).getQueryCache().notify({type:"observerOptionsUpdated",query:G(this,mt),observer:this});const a=this.hasListeners();a&&tP(G(this,mt),r,this.options,n)&&st(this,_t,gh).call(this),this.updateResult(),a&&(G(this,mt)!==r||ls(this.options.enabled,G(this,mt))!==ls(n.enabled,G(this,mt))||fo(this.options.staleTime,G(this,mt))!==fo(n.staleTime,G(this,mt)))&&st(this,_t,Ij).call(this);const i=st(this,_t,$j).call(this);a&&(G(this,mt)!==r||ls(this.options.enabled,G(this,mt))!==ls(n.enabled,G(this,mt))||i!==G(this,Hi))&&st(this,_t,Rj).call(this,i)}getOptimisticResult(t){const n=G(this,Ar).getQueryCache().build(G(this,Ar),t),r=this.createResult(n,t);return zW(this,r)&&(Ae(this,fr,r),Ae(this,uu,this.options),Ae(this,vl,G(this,mt).state)),r}getCurrentResult(){return G(this,fr)}trackResult(t,n){return new Proxy(t,{get:(r,a)=>(this.trackProp(a),n==null||n(a),a==="promise"&&!this.options.experimental_prefetchInRender&&G(this,Ha).status==="pending"&&G(this,Ha).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(r,a))})}trackProp(t){G(this,fu).add(t)}getCurrentQuery(){return G(this,mt)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=G(this,Ar).defaultQueryOptions(t),r=G(this,Ar).getQueryCache().build(G(this,Ar),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return st(this,_t,gh).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),G(this,fr)))}createResult(t,n){var P;const r=G(this,mt),a=this.options,i=G(this,fr),o=G(this,vl),l=G(this,uu),u=t!==r?t.state:G(this,tm),{state:d}=t;let h={...d},f=!1,m;if(n._optimisticResults){const A=this.hasListeners(),O=!A&&eP(t,n),E=A&&tP(t,r,n,a);(O||E)&&(h={...h,...m$(d.data,t.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:v,errorUpdatedAt:p,status:g}=h;m=h.data;let x=!1;if(n.placeholderData!==void 0&&m===void 0&&g==="pending"){let A;i!=null&&i.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(A=i.data,x=!0):A=typeof n.placeholderData=="function"?n.placeholderData((P=G(this,hu))==null?void 0:P.state.data,G(this,hu)):n.placeholderData,A!==void 0&&(g="success",m=Oj(i==null?void 0:i.data,A,n),f=!0)}if(n.select&&m!==void 0&&!x)if(i&&m===(o==null?void 0:o.data)&&n.select===G(this,nm))m=G(this,du);else try{Ae(this,nm,n.select),m=n.select(m),m=Oj(i==null?void 0:i.data,m,n),Ae(this,du,m),Ae(this,Wi,null)}catch(A){Ae(this,Wi,A)}G(this,Wi)&&(v=G(this,Wi),m=G(this,du),p=Date.now(),g="error");const y=h.fetchStatus==="fetching",b=g==="pending",N=g==="error",w=b&&y,S=m!==void 0,C={status:g,fetchStatus:h.fetchStatus,isPending:b,isSuccess:g==="success",isError:N,isInitialLoading:w,isLoading:w,data:m,dataUpdatedAt:h.dataUpdatedAt,error:v,errorUpdatedAt:p,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:y,isRefetching:y&&!b,isLoadingError:N&&!S,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:N&&S,isStale:mS(t,n),refetch:this.refetch,promise:G(this,Ha),isEnabled:ls(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const A=z=>{C.status==="error"?z.reject(C.error):C.data!==void 0&&z.resolve(C.data)},O=()=>{const z=Ae(this,Ha,C.promise=Dj());A(z)},E=G(this,Ha);switch(E.status){case"pending":t.queryHash===r.queryHash&&A(E);break;case"fulfilled":(C.status==="error"||C.data!==E.value)&&O();break;case"rejected":(C.status!=="error"||C.error!==E.reason)&&O();break}}return C}updateResult(){const t=G(this,fr),n=this.createResult(G(this,mt),this.options);if(Ae(this,vl,G(this,mt).state),Ae(this,uu,this.options),G(this,vl).data!==void 0&&Ae(this,hu,G(this,mt)),kg(n,t))return;Ae(this,fr,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!G(this,fu).size)return!0;const o=new Set(i??G(this,fu));return this.options.throwOnError&&o.add("error"),Object.keys(G(this,fr)).some(l=>{const c=l;return G(this,fr)[c]!==t[c]&&o.has(c)})};st(this,_t,p$).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&st(this,_t,Lj).call(this)}},Ar=new WeakMap,mt=new WeakMap,tm=new WeakMap,fr=new WeakMap,vl=new WeakMap,uu=new WeakMap,Ha=new WeakMap,Wi=new WeakMap,nm=new WeakMap,du=new WeakMap,hu=new WeakMap,xl=new WeakMap,yl=new WeakMap,Hi=new WeakMap,fu=new WeakMap,_t=new WeakSet,gh=function(t){st(this,_t,zj).call(this);let n=G(this,mt).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(gr)),n},Ij=function(){st(this,_t,Fj).call(this);const t=fo(this.options.staleTime,G(this,mt));if(Dl||G(this,fr).isStale||!Ej(t))return;const r=o$(G(this,fr).dataUpdatedAt,t)+1;Ae(this,xl,il.setTimeout(()=>{G(this,fr).isStale||this.updateResult()},r))},$j=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(G(this,mt)):this.options.refetchInterval)??!1},Rj=function(t){st(this,_t,Bj).call(this),Ae(this,Hi,t),!(Dl||ls(this.options.enabled,G(this,mt))===!1||!Ej(G(this,Hi))||G(this,Hi)===0)&&Ae(this,yl,il.setInterval(()=>{(this.options.refetchIntervalInBackground||fS.isFocused())&&st(this,_t,gh).call(this)},G(this,Hi)))},Lj=function(){st(this,_t,Ij).call(this),st(this,_t,Rj).call(this,st(this,_t,$j).call(this))},Fj=function(){G(this,xl)&&(il.clearTimeout(G(this,xl)),Ae(this,xl,void 0))},Bj=function(){G(this,yl)&&(il.clearInterval(G(this,yl)),Ae(this,yl,void 0))},zj=function(){const t=G(this,Ar).getQueryCache().build(G(this,Ar),this.options);if(t===G(this,mt))return;const n=G(this,mt);Ae(this,mt,t),Ae(this,tm,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},p$=function(t){An.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(G(this,fr))}),G(this,Ar).getQueryCache().notify({query:G(this,mt),type:"observerResultsUpdated"})})},wO);function BW(e,t){return ls(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function eP(e,t){return BW(e,t)||e.state.data!==void 0&&Vj(e,t,t.refetchOnMount)}function Vj(e,t,n){if(ls(t.enabled,e)!==!1&&fo(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&mS(e,t)}return!1}function tP(e,t,n,r){return(e!==t||ls(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&mS(e,n)}function mS(e,t){return ls(t.enabled,e)!==!1&&e.isStaleByTime(fo(t.staleTime,e))}function zW(e,t){return!kg(e.getCurrentResult(),t)}function nP(e){return{onFetch:(t,n)=>{var d,h,f,m,v;const r=t.options,a=(f=(h=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,i=((m=t.state.data)==null?void 0:m.pages)||[],o=((v=t.state.data)==null?void 0:v.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let p=!1;const g=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?p=!0:t.signal.addEventListener("abort",()=>{p=!0}),t.signal)})},x=c$(t.options,t.fetchOptions),y=async(b,N,w)=>{if(p)return Promise.reject();if(N==null&&b.pages.length)return Promise.resolve(b);const _=(()=>{const O={client:t.client,queryKey:t.queryKey,pageParam:N,direction:w?"backward":"forward",meta:t.options.meta};return g(O),O})(),C=await x(_),{maxPages:P}=t.options,A=w?OW:TW;return{pages:A(b.pages,C,P),pageParams:A(b.pageParams,N,P)}};if(a&&i.length){const b=a==="backward",N=b?VW:rP,w={pages:i,pageParams:o},S=N(r,w);l=await y(w,S,b)}else{const b=e??i.length;do{const N=c===0?o[0]??r.initialPageParam:rP(r,l);if(c>0&&N==null)break;l=await y(l,N),c++}while(c<b)}return l};t.options.persister?t.fetchFn=()=>{var p,g;return(g=(p=t.options).persister)==null?void 0:g.call(p,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function rP(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function VW(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var rm,ca,mr,bl,ua,Ei,NO,qW=(NO=class extends f${constructor(t){super();Re(this,ua);Re(this,rm);Re(this,ca);Re(this,mr);Re(this,bl);Ae(this,rm,t.client),this.mutationId=t.mutationId,Ae(this,mr,t.mutationCache),Ae(this,ca,[]),this.state=t.state||g$(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){G(this,ca).includes(t)||(G(this,ca).push(t),this.clearGcTimeout(),G(this,mr).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Ae(this,ca,G(this,ca).filter(n=>n!==t)),this.scheduleGc(),G(this,mr).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){G(this,ca).length||(this.state.status==="pending"?this.scheduleGc():G(this,mr).remove(this))}continue(){var t;return((t=G(this,bl))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,c,u,d,h,f,m,v,p,g,x,y,b,N,w,S,_,C,P;const n=()=>{st(this,ua,Ei).call(this,{type:"continue"})},r={client:G(this,rm),meta:this.options.meta,mutationKey:this.options.mutationKey};Ae(this,bl,h$({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(A,O)=>{st(this,ua,Ei).call(this,{type:"failed",failureCount:A,error:O})},onPause:()=>{st(this,ua,Ei).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>G(this,mr).canRun(this)}));const a=this.state.status==="pending",i=!G(this,bl).canStart();try{if(a)n();else{st(this,ua,Ei).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(o=G(this,mr).config).onMutate)==null?void 0:l.call(o,t,this,r));const O=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,t,r));O!==this.state.context&&st(this,ua,Ei).call(this,{type:"pending",context:O,variables:t,isPaused:i})}const A=await G(this,bl).start();return await((h=(d=G(this,mr).config).onSuccess)==null?void 0:h.call(d,A,t,this.state.context,this,r)),await((m=(f=this.options).onSuccess)==null?void 0:m.call(f,A,t,this.state.context,r)),await((p=(v=G(this,mr).config).onSettled)==null?void 0:p.call(v,A,null,this.state.variables,this.state.context,this,r)),await((x=(g=this.options).onSettled)==null?void 0:x.call(g,A,null,t,this.state.context,r)),st(this,ua,Ei).call(this,{type:"success",data:A}),A}catch(A){try{throw await((b=(y=G(this,mr).config).onError)==null?void 0:b.call(y,A,t,this.state.context,this,r)),await((w=(N=this.options).onError)==null?void 0:w.call(N,A,t,this.state.context,r)),await((_=(S=G(this,mr).config).onSettled)==null?void 0:_.call(S,void 0,A,this.state.variables,this.state.context,this,r)),await((P=(C=this.options).onSettled)==null?void 0:P.call(C,void 0,A,t,this.state.context,r)),A}finally{st(this,ua,Ei).call(this,{type:"error",error:A})}}finally{G(this,mr).runNext(this)}}},rm=new WeakMap,ca=new WeakMap,mr=new WeakMap,bl=new WeakMap,ua=new WeakSet,Ei=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),An.batch(()=>{G(this,ca).forEach(r=>{r.onMutationUpdate(t)}),G(this,mr).notify({mutation:this,type:"updated",action:t})})},NO);function g$(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ka,Ms,sm,SO,UW=(SO=class extends pd{constructor(t={}){super();Re(this,Ka);Re(this,Ms);Re(this,sm);this.config=t,Ae(this,Ka,new Set),Ae(this,Ms,new Map),Ae(this,sm,0)}build(t,n,r){const a=new qW({client:t,mutationCache:this,mutationId:++Mm(this,sm)._,options:t.defaultMutationOptions(n),state:r});return this.add(a),a}add(t){G(this,Ka).add(t);const n=np(t);if(typeof n=="string"){const r=G(this,Ms).get(n);r?r.push(t):G(this,Ms).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(G(this,Ka).delete(t)){const n=np(t);if(typeof n=="string"){const r=G(this,Ms).get(n);if(r)if(r.length>1){const a=r.indexOf(t);a!==-1&&r.splice(a,1)}else r[0]===t&&G(this,Ms).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=np(t);if(typeof n=="string"){const r=G(this,Ms).get(n),a=r==null?void 0:r.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var r;const n=np(t);if(typeof n=="string"){const a=(r=G(this,Ms).get(n))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){An.batch(()=>{G(this,Ka).forEach(t=>{this.notify({type:"removed",mutation:t})}),G(this,Ka).clear(),G(this,Ms).clear()})}getAll(){return Array.from(G(this,Ka))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>QC(n,r))}findAll(t={}){return this.getAll().filter(n=>QC(t,n))}notify(t){An.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return An.batch(()=>Promise.all(t.map(n=>n.continue().catch(gr))))}},Ka=new WeakMap,Ms=new WeakMap,sm=new WeakMap,SO);function np(e){var t;return(t=e.options.scope)==null?void 0:t.id}var Ga,Ki,kr,Ya,ai,Qp,qj,_O,WW=(_O=class extends pd{constructor(n,r){super();Re(this,ai);Re(this,Ga);Re(this,Ki);Re(this,kr);Re(this,Ya);Ae(this,Ga,n),this.setOptions(r),this.bindMethods(),st(this,ai,Qp).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var a;const r=this.options;this.options=G(this,Ga).defaultMutationOptions(n),kg(this.options,r)||G(this,Ga).getMutationCache().notify({type:"observerOptionsUpdated",mutation:G(this,kr),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Ml(r.mutationKey)!==Ml(this.options.mutationKey)?this.reset():((a=G(this,kr))==null?void 0:a.state.status)==="pending"&&G(this,kr).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=G(this,kr))==null||n.removeObserver(this)}onMutationUpdate(n){st(this,ai,Qp).call(this),st(this,ai,qj).call(this,n)}getCurrentResult(){return G(this,Ki)}reset(){var n;(n=G(this,kr))==null||n.removeObserver(this),Ae(this,kr,void 0),st(this,ai,Qp).call(this),st(this,ai,qj).call(this)}mutate(n,r){var a;return Ae(this,Ya,r),(a=G(this,kr))==null||a.removeObserver(this),Ae(this,kr,G(this,Ga).getMutationCache().build(G(this,Ga),this.options)),G(this,kr).addObserver(this),G(this,kr).execute(n)}},Ga=new WeakMap,Ki=new WeakMap,kr=new WeakMap,Ya=new WeakMap,ai=new WeakSet,Qp=function(){var r;const n=((r=G(this,kr))==null?void 0:r.state)??g$();Ae(this,Ki,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},qj=function(n){An.batch(()=>{var r,a,i,o,l,c,u,d;if(G(this,Ya)&&this.hasListeners()){const h=G(this,Ki).variables,f=G(this,Ki).context,m={client:G(this,Ga),meta:this.options.meta,mutationKey:this.options.mutationKey};(n==null?void 0:n.type)==="success"?((a=(r=G(this,Ya)).onSuccess)==null||a.call(r,n.data,h,f,m),(o=(i=G(this,Ya)).onSettled)==null||o.call(i,n.data,null,h,f,m)):(n==null?void 0:n.type)==="error"&&((c=(l=G(this,Ya)).onError)==null||c.call(l,n.error,h,f,m),(d=(u=G(this,Ya)).onSettled)==null||d.call(u,void 0,n.error,h,f,m))}this.listeners.forEach(h=>{h(G(this,Ki))})})},_O),da,CO,HW=(CO=class extends pd{constructor(t={}){super();Re(this,da);this.config=t,Ae(this,da,new Map)}build(t,n,r){const a=n.queryKey,i=n.queryHash??dS(a,n);let o=this.get(i);return o||(o=new LW({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){G(this,da).has(t.queryHash)||(G(this,da).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=G(this,da).get(t.queryHash);n&&(t.destroy(),n===t&&G(this,da).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){An.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return G(this,da).get(t)}getAll(){return[...G(this,da).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>YC(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>YC(t,r)):n}notify(t){An.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){An.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){An.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},da=new WeakMap,CO),ln,Gi,Yi,mu,pu,Qi,gu,vu,PO,KW=(PO=class{constructor(e={}){Re(this,ln);Re(this,Gi);Re(this,Yi);Re(this,mu);Re(this,pu);Re(this,Qi);Re(this,gu);Re(this,vu);Ae(this,ln,e.queryCache||new HW),Ae(this,Gi,e.mutationCache||new UW),Ae(this,Yi,e.defaultOptions||{}),Ae(this,mu,new Map),Ae(this,pu,new Map),Ae(this,Qi,0)}mount(){Mm(this,Qi)._++,G(this,Qi)===1&&(Ae(this,gu,fS.subscribe(async e=>{e&&(await this.resumePausedMutations(),G(this,ln).onFocus())})),Ae(this,vu,Eg.subscribe(async e=>{e&&(await this.resumePausedMutations(),G(this,ln).onOnline())})))}unmount(){var e,t;Mm(this,Qi)._--,G(this,Qi)===0&&((e=G(this,gu))==null||e.call(this),Ae(this,gu,void 0),(t=G(this,vu))==null||t.call(this),Ae(this,vu,void 0))}isFetching(e){return G(this,ln).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return G(this,Gi).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=G(this,ln).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=G(this,ln).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(fo(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return G(this,ln).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),a=G(this,ln).get(r.queryHash),i=a==null?void 0:a.state.data,o=AW(t,i);if(o!==void 0)return G(this,ln).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return An.batch(()=>G(this,ln).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=G(this,ln).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=G(this,ln);An.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=G(this,ln);return An.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=An.batch(()=>G(this,ln).findAll(e).map(a=>a.cancel(n)));return Promise.all(r).then(gr).catch(gr)}invalidateQueries(e,t={}){return An.batch(()=>(G(this,ln).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=An.batch(()=>G(this,ln).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,n);return n.throwOnError||(i=i.catch(gr)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(gr)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=G(this,ln).build(this,t);return n.isStaleByTime(fo(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(gr).catch(gr)}fetchInfiniteQuery(e){return e.behavior=nP(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(gr).catch(gr)}ensureInfiniteQueryData(e){return e.behavior=nP(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Eg.isOnline()?G(this,Gi).resumePausedMutations():Promise.resolve()}getQueryCache(){return G(this,ln)}getMutationCache(){return G(this,Gi)}getDefaultOptions(){return G(this,Yi)}setDefaultOptions(e){Ae(this,Yi,e)}setQueryDefaults(e,t){G(this,mu).set(Ml(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...G(this,mu).values()],n={};return t.forEach(r=>{uf(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){G(this,pu).set(Ml(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...G(this,pu).values()],n={};return t.forEach(r=>{uf(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...G(this,Yi).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=dS(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===hS&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...G(this,Yi).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){G(this,ln).clear(),G(this,Gi).clear()}},ln=new WeakMap,Gi=new WeakMap,Yi=new WeakMap,mu=new WeakMap,pu=new WeakMap,Qi=new WeakMap,gu=new WeakMap,vu=new WeakMap,PO),v$=j.createContext(void 0),yt=e=>{const t=j.useContext(v$);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},GW=({client:e,children:t})=>(j.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(v$.Provider,{value:e,children:t})),x$=j.createContext(!1),YW=()=>j.useContext(x$);x$.Provider;function QW(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var XW=j.createContext(QW()),JW=()=>j.useContext(XW),ZW=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},eH=e=>{j.useEffect(()=>{e.clearReset()},[e])},tH=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(a&&e.data===void 0||u$(n,[e.error,r])),nH=e=>{if(e.suspense){const n=a=>a==="static"?a:Math.max(a??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...a)=>n(r(...a)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},rH=(e,t)=>e.isLoading&&e.isFetching&&!t,sH=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,sP=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function aH(e,t,n){var h,f,m,v,p;const r=YW(),a=JW(),i=yt(),o=i.defaultQueryOptions(e);(f=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,o),o._optimisticResults=r?"isRestoring":"optimistic",nH(o),ZW(o,a),eH(a);const l=!i.getQueryCache().get(o.queryHash),[c]=j.useState(()=>new t(i,o)),u=c.getOptimisticResult(o),d=!r&&e.subscribed!==!1;if(j.useSyncExternalStore(j.useCallback(g=>{const x=d?c.subscribe(An.batchCalls(g)):gr;return c.updateResult(),x},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),j.useEffect(()=>{c.setOptions(o)},[o,c]),sH(o,u))throw sP(o,c,a);if(tH({result:u,errorResetBoundary:a,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;if((v=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||v.call(m,o,u),o.experimental_prefetchInRender&&!Dl&&rH(u,r)){const g=l?sP(o,c,a):(p=i.getQueryCache().get(o.queryHash))==null?void 0:p.promise;g==null||g.catch(gr).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?u:c.trackResult(u)}function Qt(e,t){return aH(e,FW)}function wt(e,t){const n=yt(),[r]=j.useState(()=>new WW(n,e));j.useEffect(()=>{r.setOptions(e)},[r,e]);const a=j.useSyncExternalStore(j.useCallback(o=>r.subscribe(An.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=j.useCallback((o,l)=>{r.mutate(o,l).catch(gr)},[r]);if(a.error&&u$(r.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function df(){return df=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},df.apply(this,arguments)}var Zi;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Zi||(Zi={}));const aP="popstate";function iH(e){e===void 0&&(e={});function t(r,a){let{pathname:i,search:o,hash:l}=r.location;return Uj("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:Tg(a)}return lH(t,n,null,e)}function gn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function y$(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function oH(){return Math.random().toString(36).substr(2,8)}function iP(e,t){return{usr:e.state,key:e.key,idx:t}}function Uj(e,t,n,r){return n===void 0&&(n=null),df({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?gd(t):t,{state:n,key:t&&t.key||r||oH()})}function Tg(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function gd(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function lH(e,t,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:i=!1}=r,o=a.history,l=Zi.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(df({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=Zi.Pop;let g=d(),x=g==null?null:g-u;u=g,c&&c({action:l,location:p.location,delta:x})}function f(g,x){l=Zi.Push;let y=Uj(p.location,g,x);u=d()+1;let b=iP(y,u),N=p.createHref(y);try{o.pushState(b,"",N)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;a.location.assign(N)}i&&c&&c({action:l,location:p.location,delta:1})}function m(g,x){l=Zi.Replace;let y=Uj(p.location,g,x);u=d();let b=iP(y,u),N=p.createHref(y);o.replaceState(b,"",N),i&&c&&c({action:l,location:p.location,delta:0})}function v(g){let x=a.location.origin!=="null"?a.location.origin:a.location.href,y=typeof g=="string"?g:Tg(g);return y=y.replace(/ $/,"%20"),gn(x,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,x)}let p={get action(){return l},get location(){return e(a,o)},listen(g){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(aP,h),c=g,()=>{a.removeEventListener(aP,h),c=null}},createHref(g){return t(a,g)},createURL:v,encodeLocation(g){let x=v(g);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:f,replace:m,go(g){return o.go(g)}};return p}var oP;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(oP||(oP={}));function cH(e,t,n){return n===void 0&&(n="/"),uH(e,t,n,!1)}function uH(e,t,n,r){let a=typeof t=="string"?gd(t):t,i=pS(a.pathname||"/",n);if(i==null)return null;let o=b$(e);dH(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=wH(i);l=bH(o[c],u,r)}return l}function b$(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(gn(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=mo([r,c.relativePath]),d=n.concat(c);i.children&&i.children.length>0&&(gn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),b$(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:xH(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of j$(i.path))a(i,o,c)}),t}function j$(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return a?[i,""]:[i];let o=j$(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function dH(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:yH(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const hH=/^:[\w-]+$/,fH=3,mH=2,pH=1,gH=10,vH=-2,lP=e=>e==="*";function xH(e,t){let n=e.split("/"),r=n.length;return n.some(lP)&&(r+=vH),t&&(r+=mH),n.filter(a=>!lP(a)).reduce((a,i)=>a+(hH.test(i)?fH:i===""?pH:gH),r)}function yH(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function bH(e,t,n){let{routesMeta:r}=e,a={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=cP({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=cP({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(a,h.params),o.push({params:a,pathname:mo([i,h.pathname]),pathnameBase:CH(mo([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=mo([i,h.pathnameBase]))}return o}function cP(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=jH(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:f,isOptional:m}=d;if(f==="*"){let p=l[h]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const v=l[h];return m&&!v?u[f]=void 0:u[f]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function jH(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),y$(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function wH(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return y$(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function pS(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function NH(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?gd(e):e;return{pathname:n?n.startsWith("/")?n:SH(n,t):t,search:PH(r),hash:AH(a)}}function SH(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function A0(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function _H(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function gS(e,t){let n=_H(e);return t?n.map((r,a)=>a===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function vS(e,t,n,r){r===void 0&&(r=!1);let a;typeof e=="string"?a=gd(e):(a=df({},e),gn(!a.pathname||!a.pathname.includes("?"),A0("?","pathname","search",a)),gn(!a.pathname||!a.pathname.includes("#"),A0("#","pathname","hash",a)),gn(!a.search||!a.search.includes("#"),A0("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=n;else{let h=t.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;a.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=NH(a,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const mo=e=>e.join("/").replace(/\/\/+/g,"/"),CH=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),PH=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,AH=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function kH(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const w$=["post","put","patch","delete"];new Set(w$);const EH=["get",...w$];new Set(EH);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hf(){return hf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hf.apply(this,arguments)}const xS=j.createContext(null),TH=j.createContext(null),Po=j.createContext(null),gx=j.createContext(null),Ao=j.createContext({outlet:null,matches:[],isDataRoute:!1}),N$=j.createContext(null);function OH(e,t){let{relative:n}=t===void 0?{}:t;vd()||gn(!1);let{basename:r,navigator:a}=j.useContext(Po),{hash:i,pathname:o,search:l}=_$(e,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:mo([r,o])),a.createHref({pathname:c,search:l,hash:i})}function vd(){return j.useContext(gx)!=null}function ko(){return vd()||gn(!1),j.useContext(gx).location}function S$(e){j.useContext(Po).static||j.useLayoutEffect(e)}function xd(){let{isDataRoute:e}=j.useContext(Ao);return e?WH():DH()}function DH(){vd()||gn(!1);let e=j.useContext(xS),{basename:t,future:n,navigator:r}=j.useContext(Po),{matches:a}=j.useContext(Ao),{pathname:i}=ko(),o=JSON.stringify(gS(a,n.v7_relativeSplatPath)),l=j.useRef(!1);return S$(()=>{l.current=!0}),j.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let h=vS(u,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:mo([t,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[t,r,o,i,e])}function _$(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=j.useContext(Po),{matches:a}=j.useContext(Ao),{pathname:i}=ko(),o=JSON.stringify(gS(a,r.v7_relativeSplatPath));return j.useMemo(()=>vS(e,JSON.parse(o),i,n==="path"),[e,o,i,n])}function MH(e,t){return IH(e,t)}function IH(e,t,n,r){vd()||gn(!1);let{navigator:a}=j.useContext(Po),{matches:i}=j.useContext(Ao),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=ko(),d;if(t){var h;let g=typeof t=="string"?gd(t):t;c==="/"||(h=g.pathname)!=null&&h.startsWith(c)||gn(!1),d=g}else d=u;let f=d.pathname||"/",m=f;if(c!=="/"){let g=c.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(g.length).join("/")}let v=cH(e,{pathname:m}),p=BH(v&&v.map(g=>Object.assign({},g,{params:Object.assign({},l,g.params),pathname:mo([c,a.encodeLocation?a.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?c:mo([c,a.encodeLocation?a.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),i,n,r);return t&&p?j.createElement(gx.Provider,{value:{location:hf({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Zi.Pop}},p):p}function $H(){let e=UH(),t=kH(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),n?j.createElement("pre",{style:a},n):null,null)}const RH=j.createElement($H,null);class LH extends j.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?j.createElement(Ao.Provider,{value:this.props.routeContext},j.createElement(N$.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function FH(e){let{routeContext:t,match:n,children:r}=e,a=j.useContext(xS);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(Ao.Provider,{value:t},r)}function BH(e,t,n,r){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(a=n)==null?void 0:a.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||gn(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:f,errors:m}=n,v=h.route.loader&&f[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||v){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,f)=>{let m,v=!1,p=null,g=null;n&&(m=l&&h.route.id?l[h.route.id]:void 0,p=h.route.errorElement||RH,c&&(u<0&&f===0?(v=!0,g=null):u===f&&(v=!0,g=h.route.hydrateFallbackElement||null)));let x=t.concat(o.slice(0,f+1)),y=()=>{let b;return m?b=p:v?b=g:h.route.Component?b=j.createElement(h.route.Component,null):h.route.element?b=h.route.element:b=d,j.createElement(FH,{match:h,routeContext:{outlet:d,matches:x,isDataRoute:n!=null},children:b})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?j.createElement(LH,{location:n.location,revalidation:n.revalidation,component:p,error:m,children:y(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):y()},null)}var C$=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(C$||{}),Og=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Og||{});function zH(e){let t=j.useContext(xS);return t||gn(!1),t}function VH(e){let t=j.useContext(TH);return t||gn(!1),t}function qH(e){let t=j.useContext(Ao);return t||gn(!1),t}function P$(e){let t=qH(),n=t.matches[t.matches.length-1];return n.route.id||gn(!1),n.route.id}function UH(){var e;let t=j.useContext(N$),n=VH(Og.UseRouteError),r=P$(Og.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function WH(){let{router:e}=zH(C$.UseNavigateStable),t=P$(Og.UseNavigateStable),n=j.useRef(!1);return S$(()=>{n.current=!0}),j.useCallback(function(a,i){i===void 0&&(i={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,hf({fromRouteId:t},i)))},[e,t])}function HH(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Wj(e){let{to:t,replace:n,state:r,relative:a}=e;vd()||gn(!1);let{future:i,static:o}=j.useContext(Po),{matches:l}=j.useContext(Ao),{pathname:c}=ko(),u=xd(),d=vS(t,gS(l,i.v7_relativeSplatPath),c,a==="path"),h=JSON.stringify(d);return j.useEffect(()=>u(JSON.parse(h),{replace:n,state:r,relative:a}),[u,h,a,n,r]),null}function on(e){gn(!1)}function KH(e){let{basename:t="/",children:n=null,location:r,navigationType:a=Zi.Pop,navigator:i,static:o=!1,future:l}=e;vd()&&gn(!1);let c=t.replace(/^\/*/,"/"),u=j.useMemo(()=>({basename:c,navigator:i,static:o,future:hf({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof r=="string"&&(r=gd(r));let{pathname:d="/",search:h="",hash:f="",state:m=null,key:v="default"}=r,p=j.useMemo(()=>{let g=pS(d,c);return g==null?null:{location:{pathname:g,search:h,hash:f,state:m,key:v},navigationType:a}},[c,d,h,f,m,v,a]);return p==null?null:j.createElement(Po.Provider,{value:u},j.createElement(gx.Provider,{children:n,value:p}))}function GH(e){let{children:t,location:n}=e;return MH(Hj(t),n)}new Promise(()=>{});function Hj(e,t){t===void 0&&(t=[]);let n=[];return j.Children.forEach(e,(r,a)=>{if(!j.isValidElement(r))return;let i=[...t,a];if(r.type===j.Fragment){n.push.apply(n,Hj(r.props.children,i));return}r.type!==on&&gn(!1),!r.props.index||!r.props.children||gn(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Hj(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kj(){return Kj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kj.apply(this,arguments)}function YH(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function QH(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function XH(e,t){return e.button===0&&(!t||t==="_self")&&!QH(e)}function Gj(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(a=>[n,a]):[[n,r]])},[]))}function JH(e,t){let n=Gj(e);return t&&t.forEach((r,a)=>{n.has(a)||t.getAll(a).forEach(i=>{n.append(a,i)})}),n}const ZH=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],eK="6";try{window.__reactRouterVersion=eK}catch{}const tK="startTransition",uP=X1[tK];function nK(e){let{basename:t,children:n,future:r,window:a}=e,i=j.useRef();i.current==null&&(i.current=iH({window:a,v5Compat:!0}));let o=i.current,[l,c]=j.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=j.useCallback(h=>{u&&uP?uP(()=>c(h)):c(h)},[c,u]);return j.useLayoutEffect(()=>o.listen(d),[o,d]),j.useEffect(()=>HH(r),[r]),j.createElement(KH,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const rK=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",sK=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Bs=j.forwardRef(function(t,n){let{onClick:r,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,f=YH(t,ZH),{basename:m}=j.useContext(Po),v,p=!1;if(typeof u=="string"&&sK.test(u)&&(v=u,rK))try{let b=new URL(window.location.href),N=u.startsWith("//")?new URL(b.protocol+u):new URL(u),w=pS(N.pathname,m);N.origin===b.origin&&w!=null?u=w+N.search+N.hash:p=!0}catch{}let g=OH(u,{relative:a}),x=aK(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:h});function y(b){r&&r(b),b.defaultPrevented||x(b)}return j.createElement("a",Kj({},f,{href:v||g,onClick:p||i?r:y,ref:n,target:c}))});var dP;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(dP||(dP={}));var hP;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(hP||(hP={}));function aK(e,t){let{target:n,replace:r,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=xd(),u=ko(),d=_$(e,{relative:o});return j.useCallback(h=>{if(XH(h,n)){h.preventDefault();let f=r!==void 0?r:Tg(u)===Tg(d);c(e,{replace:f,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,r,a,n,e,i,o,l])}function iK(e){let t=j.useRef(Gj(e)),n=j.useRef(!1),r=ko(),a=j.useMemo(()=>JH(r.search,n.current?null:t.current),[r.search]),i=xd(),o=j.useCallback((l,c)=>{const u=Gj(typeof l=="function"?l(a):l);n.current=!0,i("?"+u,c)},[i,a]);return[a,o]}const yS=hm("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),L=j.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...a},i)=>{const o=r?hq:"button";return s.jsx(o,{className:Ee(yS({variant:t,size:n,className:e})),ref:i,...a})});L.displayName="Button";const A$=j.createContext(void 0);function oK({children:e}){const[t,n]=j.useState(()=>{const a=localStorage.getItem("theme");return a||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});j.useEffect(()=>{localStorage.setItem("theme",t);const a=document.documentElement;t==="dark"?a.classList.add("dark"):a.classList.remove("dark")},[t]);const r=()=>{n(a=>a==="light"?"dark":"light")};return s.jsx(A$.Provider,{value:{theme:t,setTheme:n,toggleTheme:r},children:e})}function k$(){const e=j.useContext(A$);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e}function fP(){const{theme:e,toggleTheme:t}=k$();return s.jsxs(L,{variant:"outline",size:"sm",onClick:t,className:"h-9 w-9 p-0",title:e==="light"?"Activer le mode sombre":"Activer le mode clair",children:[e==="light"?s.jsx(yU,{className:"h-4 w-4"}):s.jsx(wU,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:e==="light"?"Activer le mode sombre":"Activer le mode clair"})]})}var lK=j.createContext(void 0);function vx(e){const t=j.useContext(lK);return e||t||"ltr"}var k0=0;function bS(){j.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??mP()),document.body.insertAdjacentElement("beforeend",e[1]??mP()),k0++,()=>{k0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),k0--}},[])}function mP(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var E0="focusScope.autoFocusOnMount",T0="focusScope.autoFocusOnUnmount",pP={bubbles:!1,cancelable:!0},cK="FocusScope",xx=j.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=j.useState(null),u=jr(a),d=jr(i),h=j.useRef(null),f=dt(t,p=>c(p)),m=j.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;j.useEffect(()=>{if(r){let p=function(b){if(m.paused||!l)return;const N=b.target;l.contains(N)?h.current=N:Ti(h.current,{select:!0})},g=function(b){if(m.paused||!l)return;const N=b.relatedTarget;N!==null&&(l.contains(N)||Ti(h.current,{select:!0}))},x=function(b){if(document.activeElement===document.body)for(const w of b)w.removedNodes.length>0&&Ti(l)};document.addEventListener("focusin",p),document.addEventListener("focusout",g);const y=new MutationObserver(x);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",g),y.disconnect()}}},[r,l,m.paused]),j.useEffect(()=>{if(l){vP.add(m);const p=document.activeElement;if(!l.contains(p)){const x=new CustomEvent(E0,pP);l.addEventListener(E0,u),l.dispatchEvent(x),x.defaultPrevented||(uK(pK(E$(l)),{select:!0}),document.activeElement===p&&Ti(l))}return()=>{l.removeEventListener(E0,u),setTimeout(()=>{const x=new CustomEvent(T0,pP);l.addEventListener(T0,d),l.dispatchEvent(x),x.defaultPrevented||Ti(p??document.body,{select:!0}),l.removeEventListener(T0,d),vP.remove(m)},0)}}},[l,u,d,m]);const v=j.useCallback(p=>{if(!n&&!r||m.paused)return;const g=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,x=document.activeElement;if(g&&x){const y=p.currentTarget,[b,N]=dK(y);b&&N?!p.shiftKey&&x===N?(p.preventDefault(),n&&Ti(b,{select:!0})):p.shiftKey&&x===b&&(p.preventDefault(),n&&Ti(N,{select:!0})):x===y&&p.preventDefault()}},[n,r,m.paused]);return s.jsx(Le.div,{tabIndex:-1,...o,ref:f,onKeyDown:v})});xx.displayName=cK;function uK(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Ti(r,{select:t}),document.activeElement!==n)return}function dK(e){const t=E$(e),n=gP(t,e),r=gP(t.reverse(),e);return[n,r]}function E$(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function gP(e,t){for(const n of e)if(!hK(n,{upTo:t}))return n}function hK(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function fK(e){return e instanceof HTMLInputElement&&"select"in e}function Ti(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&fK(e)&&t&&e.select()}}var vP=mK();function mK(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=xP(e,t),e.unshift(t)},remove(t){var n;e=xP(e,t),(n=e[0])==null||n.resume()}}}function xP(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function pK(e){return e.filter(t=>t.tagName!=="A")}var O0="rovingFocusGroup.onEntryFocus",gK={bubbles:!1,cancelable:!0},pm="RovingFocusGroup",[Yj,T$,vK]=ix(pm),[xK,yx]=Fr(pm,[vK]),[yK,bK]=xK(pm),O$=j.forwardRef((e,t)=>s.jsx(Yj.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(Yj.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(jK,{...e,ref:t})})}));O$.displayName=pm;var jK=j.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=e,f=j.useRef(null),m=dt(t,f),v=vx(i),[p,g]=ui({prop:o,defaultProp:l??null,onChange:c,caller:pm}),[x,y]=j.useState(!1),b=jr(u),N=T$(n),w=j.useRef(!1),[S,_]=j.useState(0);return j.useEffect(()=>{const C=f.current;if(C)return C.addEventListener(O0,b),()=>C.removeEventListener(O0,b)},[b]),s.jsx(yK,{scope:n,orientation:r,dir:v,loop:a,currentTabStopId:p,onItemFocus:j.useCallback(C=>g(C),[g]),onItemShiftTab:j.useCallback(()=>y(!0),[]),onFocusableItemAdd:j.useCallback(()=>_(C=>C+1),[]),onFocusableItemRemove:j.useCallback(()=>_(C=>C-1),[]),children:s.jsx(Le.div,{tabIndex:x||S===0?-1:0,"data-orientation":r,...h,ref:m,style:{outline:"none",...e.style},onMouseDown:Pe(e.onMouseDown,()=>{w.current=!0}),onFocus:Pe(e.onFocus,C=>{const P=!w.current;if(C.target===C.currentTarget&&P&&!x){const A=new CustomEvent(O0,gK);if(C.currentTarget.dispatchEvent(A),!A.defaultPrevented){const O=N().filter(V=>V.focusable),E=O.find(V=>V.active),z=O.find(V=>V.id===p),W=[E,z,...O].filter(Boolean).map(V=>V.ref.current);I$(W,d)}}w.current=!1}),onBlur:Pe(e.onBlur,()=>y(!1))})})}),D$="RovingFocusGroupItem",M$=j.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:i,children:o,...l}=e,c=Na(),u=i||c,d=bK(D$,n),h=d.currentTabStopId===u,f=T$(n),{onFocusableItemAdd:m,onFocusableItemRemove:v,currentTabStopId:p}=d;return j.useEffect(()=>{if(r)return m(),()=>v()},[r,m,v]),s.jsx(Yj.ItemSlot,{scope:n,id:u,focusable:r,active:a,children:s.jsx(Le.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:Pe(e.onMouseDown,g=>{r?d.onItemFocus(u):g.preventDefault()}),onFocus:Pe(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:Pe(e.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){d.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const x=SK(g,d.orientation,d.dir);if(x!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let b=f().filter(N=>N.focusable).map(N=>N.ref.current);if(x==="last")b.reverse();else if(x==="prev"||x==="next"){x==="prev"&&b.reverse();const N=b.indexOf(g.currentTarget);b=d.loop?_K(b,N+1):b.slice(N+1)}setTimeout(()=>I$(b))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:p!=null}):o})})});M$.displayName=D$;var wK={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function NK(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function SK(e,t,n){const r=NK(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return wK[r]}function I$(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function _K(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var $$=O$,R$=M$,CK=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},cc=new WeakMap,rp=new WeakMap,sp={},D0=0,L$=function(e){return e&&(e.host||L$(e.parentNode))},PK=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=L$(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},AK=function(e,t,n,r){var a=PK(t,Array.isArray(e)?e:[e]);sp[n]||(sp[n]=new WeakMap);var i=sp[n],o=[],l=new Set,c=new Set(a),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};a.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(f){if(l.has(f))d(f);else try{var m=f.getAttribute(r),v=m!==null&&m!=="false",p=(cc.get(f)||0)+1,g=(i.get(f)||0)+1;cc.set(f,p),i.set(f,g),o.push(f),p===1&&v&&rp.set(f,!0),g===1&&f.setAttribute(n,"true"),v||f.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",f,x)}})};return d(t),l.clear(),D0++,function(){o.forEach(function(h){var f=cc.get(h)-1,m=i.get(h)-1;cc.set(h,f),i.set(h,m),f||(rp.has(h)||h.removeAttribute(r),rp.delete(h)),m||h.removeAttribute(n)}),D0--,D0||(cc=new WeakMap,cc=new WeakMap,rp=new WeakMap,sp={})}},jS=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=CK(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),AK(r,a,n,"aria-hidden")):function(){return null}},fa=function(){return fa=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},fa.apply(this,arguments)};function F$(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function kK(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var Xp="right-scroll-bar-position",Jp="width-before-scroll-bar",EK="with-scroll-bars-hidden",TK="--removed-body-scroll-bar-size";function M0(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function OK(e,t){var n=j.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=t,n.facade}var DK=typeof window<"u"?j.useLayoutEffect:j.useEffect,yP=new WeakMap;function MK(e,t){var n=OK(null,function(r){return e.forEach(function(a){return M0(a,r)})});return DK(function(){var r=yP.get(n);if(r){var a=new Set(r),i=new Set(e),o=n.current;a.forEach(function(l){i.has(l)||M0(l,null)}),i.forEach(function(l){a.has(l)||M0(l,o)})}yP.set(n,e)},[e]),n}function IK(e){return e}function $K(e,t){t===void 0&&(t=IK);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var o=t(i,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(i),o=n}var c=function(){var d=o;o=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),n}}}};return a}function RK(e){e===void 0&&(e={});var t=$K(null);return t.options=fa({async:!0,ssr:!1},e),t}var B$=function(e){var t=e.sideCar,n=F$(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return j.createElement(r,fa({},n))};B$.isSideCarExport=!0;function LK(e,t){return e.useMedium(t),B$}var z$=RK(),I0=function(){},bx=j.forwardRef(function(e,t){var n=j.useRef(null),r=j.useState({onScrollCapture:I0,onWheelCapture:I0,onTouchMoveCapture:I0}),a=r[0],i=r[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,h=e.shards,f=e.sideCar,m=e.noRelative,v=e.noIsolation,p=e.inert,g=e.allowPinchZoom,x=e.as,y=x===void 0?"div":x,b=e.gapMode,N=F$(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=f,S=MK([n,t]),_=fa(fa({},N),a);return j.createElement(j.Fragment,null,d&&j.createElement(w,{sideCar:z$,removeScrollBar:u,shards:h,noRelative:m,noIsolation:v,inert:p,setCallbacks:i,allowPinchZoom:!!g,lockRef:n,gapMode:b}),o?j.cloneElement(j.Children.only(l),fa(fa({},_),{ref:S})):j.createElement(y,fa({},_,{className:c,ref:S}),l))});bx.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};bx.classNames={fullWidth:Jp,zeroRight:Xp};var FK=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function BK(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=FK();return t&&e.setAttribute("nonce",t),e}function zK(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function VK(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var qK=function(){var e=0,t=null;return{add:function(n){e==0&&(t=BK())&&(zK(t,n),VK(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},UK=function(){var e=qK();return function(t,n){j.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},V$=function(){var e=UK(),t=function(n){var r=n.styles,a=n.dynamic;return e(r,a),null};return t},WK={left:0,top:0,right:0,gap:0},$0=function(e){return parseInt(e||"",10)||0},HK=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[$0(n),$0(r),$0(a)]},KK=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return WK;var t=HK(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},GK=V$(),Jc="data-scroll-locked",YK=function(e,t,n,r){var a=e.left,i=e.top,o=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(EK,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(Jc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Xp,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Jp,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Xp," .").concat(Xp,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Jp," .").concat(Jp,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Jc,`] {
    `).concat(TK,": ").concat(l,`px;
  }
`)},bP=function(){var e=parseInt(document.body.getAttribute(Jc)||"0",10);return isFinite(e)?e:0},QK=function(){j.useEffect(function(){return document.body.setAttribute(Jc,(bP()+1).toString()),function(){var e=bP()-1;e<=0?document.body.removeAttribute(Jc):document.body.setAttribute(Jc,e.toString())}},[])},XK=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,a=r===void 0?"margin":r;QK();var i=j.useMemo(function(){return KK(a)},[a]);return j.createElement(GK,{styles:YK(i,!t,a,n?"":"!important")})},Qj=!1;if(typeof window<"u")try{var ap=Object.defineProperty({},"passive",{get:function(){return Qj=!0,!0}});window.addEventListener("test",ap,ap),window.removeEventListener("test",ap,ap)}catch{Qj=!1}var uc=Qj?{passive:!1}:!1,JK=function(e){return e.tagName==="TEXTAREA"},q$=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!JK(e)&&n[t]==="visible")},ZK=function(e){return q$(e,"overflowY")},eG=function(e){return q$(e,"overflowX")},jP=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=U$(e,r);if(a){var i=W$(e,r),o=i[1],l=i[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},tG=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},nG=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},U$=function(e,t){return e==="v"?ZK(t):eG(t)},W$=function(e,t){return e==="v"?tG(t):nG(t)},rG=function(e,t){return e==="h"&&t==="rtl"?-1:1},sG=function(e,t,n,r,a){var i=rG(e,window.getComputedStyle(t).direction),o=i*r,l=n.target,c=t.contains(l),u=!1,d=o>0,h=0,f=0;do{if(!l)break;var m=W$(e,l),v=m[0],p=m[1],g=m[2],x=p-g-i*v;(v||x)&&U$(e,l)&&(h+=x,f+=v);var y=l.parentNode;l=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&(Math.abs(h)<1||!a)||!d&&(Math.abs(f)<1||!a))&&(u=!0),u},ip=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},wP=function(e){return[e.deltaX,e.deltaY]},NP=function(e){return e&&"current"in e?e.current:e},aG=function(e,t){return e[0]===t[0]&&e[1]===t[1]},iG=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},oG=0,dc=[];function lG(e){var t=j.useRef([]),n=j.useRef([0,0]),r=j.useRef(),a=j.useState(oG++)[0],i=j.useState(V$)[0],o=j.useRef(e);j.useEffect(function(){o.current=e},[e]),j.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var p=kK([e.lockRef.current],(e.shards||[]).map(NP),!0).filter(Boolean);return p.forEach(function(g){return g.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),p.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=j.useCallback(function(p,g){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!o.current.allowPinchZoom;var x=ip(p),y=n.current,b="deltaX"in p?p.deltaX:y[0]-x[0],N="deltaY"in p?p.deltaY:y[1]-x[1],w,S=p.target,_=Math.abs(b)>Math.abs(N)?"h":"v";if("touches"in p&&_==="h"&&S.type==="range")return!1;var C=jP(_,S);if(!C)return!0;if(C?w=_:(w=_==="v"?"h":"v",C=jP(_,S)),!C)return!1;if(!r.current&&"changedTouches"in p&&(b||N)&&(r.current=w),!w)return!0;var P=r.current||w;return sG(P,g,p,P==="h"?b:N,!0)},[]),c=j.useCallback(function(p){var g=p;if(!(!dc.length||dc[dc.length-1]!==i)){var x="deltaY"in g?wP(g):ip(g),y=t.current.filter(function(w){return w.name===g.type&&(w.target===g.target||g.target===w.shadowParent)&&aG(w.delta,x)})[0];if(y&&y.should){g.cancelable&&g.preventDefault();return}if(!y){var b=(o.current.shards||[]).map(NP).filter(Boolean).filter(function(w){return w.contains(g.target)}),N=b.length>0?l(g,b[0]):!o.current.noIsolation;N&&g.cancelable&&g.preventDefault()}}},[]),u=j.useCallback(function(p,g,x,y){var b={name:p,delta:g,target:x,should:y,shadowParent:cG(x)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(N){return N!==b})},1)},[]),d=j.useCallback(function(p){n.current=ip(p),r.current=void 0},[]),h=j.useCallback(function(p){u(p.type,wP(p),p.target,l(p,e.lockRef.current))},[]),f=j.useCallback(function(p){u(p.type,ip(p),p.target,l(p,e.lockRef.current))},[]);j.useEffect(function(){return dc.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,uc),document.addEventListener("touchmove",c,uc),document.addEventListener("touchstart",d,uc),function(){dc=dc.filter(function(p){return p!==i}),document.removeEventListener("wheel",c,uc),document.removeEventListener("touchmove",c,uc),document.removeEventListener("touchstart",d,uc)}},[]);var m=e.removeScrollBar,v=e.inert;return j.createElement(j.Fragment,null,v?j.createElement(i,{styles:iG(a)}):null,m?j.createElement(XK,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function cG(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const uG=LK(z$,lG);var jx=j.forwardRef(function(e,t){return j.createElement(bx,fa({},e,{ref:t,sideCar:uG}))});jx.classNames=bx.classNames;var Xj=["Enter"," "],dG=["ArrowDown","PageUp","Home"],H$=["ArrowUp","PageDown","End"],hG=[...dG,...H$],fG={ltr:[...Xj,"ArrowRight"],rtl:[...Xj,"ArrowLeft"]},mG={ltr:["ArrowLeft"],rtl:["ArrowRight"]},gm="Menu",[ff,pG,gG]=ix(gm),[Kl,K$]=Fr(gm,[gG,md,yx]),wx=md(),G$=yx(),[vG,Gl]=Kl(gm),[xG,vm]=Kl(gm),Y$=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:a,onOpenChange:i,modal:o=!0}=e,l=wx(t),[c,u]=j.useState(null),d=j.useRef(!1),h=jr(i),f=vx(a);return j.useEffect(()=>{const m=()=>{d.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>d.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),s.jsx(JI,{...l,children:s.jsx(vG,{scope:t,open:n,onOpenChange:h,content:c,onContentChange:u,children:s.jsx(xG,{scope:t,onClose:j.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:f,modal:o,children:r})})})};Y$.displayName=gm;var yG="MenuAnchor",wS=j.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=wx(n);return s.jsx(oS,{...a,...r,ref:t})});wS.displayName=yG;var NS="MenuPortal",[bG,Q$]=Kl(NS,{forceMount:void 0}),X$=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:a}=e,i=Gl(NS,t);return s.jsx(bG,{scope:t,forceMount:n,children:s.jsx(js,{present:n||i.open,children:s.jsx(um,{asChild:!0,container:a,children:r})})})};X$.displayName=NS;var ps="MenuContent",[jG,SS]=Kl(ps),J$=j.forwardRef((e,t)=>{const n=Q$(ps,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=Gl(ps,e.__scopeMenu),o=vm(ps,e.__scopeMenu);return s.jsx(ff.Provider,{scope:e.__scopeMenu,children:s.jsx(js,{present:r||i.open,children:s.jsx(ff.Slot,{scope:e.__scopeMenu,children:o.modal?s.jsx(wG,{...a,ref:t}):s.jsx(NG,{...a,ref:t})})})})}),wG=j.forwardRef((e,t)=>{const n=Gl(ps,e.__scopeMenu),r=j.useRef(null),a=dt(t,r);return j.useEffect(()=>{const i=r.current;if(i)return jS(i)},[]),s.jsx(_S,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Pe(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),NG=j.forwardRef((e,t)=>{const n=Gl(ps,e.__scopeMenu);return s.jsx(_S,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),SG=Tl("MenuContent.ScrollLock"),_S=j.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:m,disableOutsideScroll:v,...p}=e,g=Gl(ps,n),x=vm(ps,n),y=wx(n),b=G$(n),N=pG(n),[w,S]=j.useState(null),_=j.useRef(null),C=dt(t,_,g.onContentChange),P=j.useRef(0),A=j.useRef(""),O=j.useRef(0),E=j.useRef(null),z=j.useRef("right"),I=j.useRef(0),W=v?jx:j.Fragment,V=v?{as:SG,allowPinchZoom:!0}:void 0,H=D=>{var le,Z;const X=A.current+D,Q=N().filter(B=>!B.disabled),te=document.activeElement,ne=(le=Q.find(B=>B.ref.current===te))==null?void 0:le.textValue,T=Q.map(B=>B.textValue),ce=$G(T,X,ne),me=(Z=Q.find(B=>B.textValue===ce))==null?void 0:Z.ref.current;(function B(oe){A.current=oe,window.clearTimeout(P.current),oe!==""&&(P.current=window.setTimeout(()=>B(""),1e3))})(X),me&&setTimeout(()=>me.focus())};j.useEffect(()=>()=>window.clearTimeout(P.current),[]),bS();const k=j.useCallback(D=>{var Q,te;return z.current===((Q=E.current)==null?void 0:Q.side)&&LG(D,(te=E.current)==null?void 0:te.area)},[]);return s.jsx(jG,{scope:n,searchRef:A,onItemEnter:j.useCallback(D=>{k(D)&&D.preventDefault()},[k]),onItemLeave:j.useCallback(D=>{var X;k(D)||((X=_.current)==null||X.focus(),S(null))},[k]),onTriggerLeave:j.useCallback(D=>{k(D)&&D.preventDefault()},[k]),pointerGraceTimerRef:O,onPointerGraceIntentChange:j.useCallback(D=>{E.current=D},[]),children:s.jsx(W,{...V,children:s.jsx(xx,{asChild:!0,trapped:a,onMountAutoFocus:Pe(i,D=>{var X;D.preventDefault(),(X=_.current)==null||X.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:s.jsx(ld,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:f,onDismiss:m,children:s.jsx($$,{asChild:!0,...b,dir:x.dir,orientation:"vertical",loop:r,currentTabStopId:w,onCurrentTabStopIdChange:S,onEntryFocus:Pe(c,D=>{x.isUsingKeyboardRef.current||D.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(lS,{role:"menu","aria-orientation":"vertical","data-state":m4(g.open),"data-radix-menu-content":"",dir:x.dir,...y,...p,ref:C,style:{outline:"none",...p.style},onKeyDown:Pe(p.onKeyDown,D=>{const Q=D.target.closest("[data-radix-menu-content]")===D.currentTarget,te=D.ctrlKey||D.altKey||D.metaKey,ne=D.key.length===1;Q&&(D.key==="Tab"&&D.preventDefault(),!te&&ne&&H(D.key));const T=_.current;if(D.target!==T||!hG.includes(D.key))return;D.preventDefault();const me=N().filter(le=>!le.disabled).map(le=>le.ref.current);H$.includes(D.key)&&me.reverse(),MG(me)}),onBlur:Pe(e.onBlur,D=>{D.currentTarget.contains(D.target)||(window.clearTimeout(P.current),A.current="")}),onPointerMove:Pe(e.onPointerMove,mf(D=>{const X=D.target,Q=I.current!==D.clientX;if(D.currentTarget.contains(X)&&Q){const te=D.clientX>I.current?"right":"left";z.current=te,I.current=D.clientX}}))})})})})})})});J$.displayName=ps;var _G="MenuGroup",CS=j.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(Le.div,{role:"group",...r,ref:t})});CS.displayName=_G;var CG="MenuLabel",Z$=j.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(Le.div,{...r,ref:t})});Z$.displayName=CG;var Dg="MenuItem",SP="menu.itemSelect",Nx=j.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...a}=e,i=j.useRef(null),o=vm(Dg,e.__scopeMenu),l=SS(Dg,e.__scopeMenu),c=dt(t,i),u=j.useRef(!1),d=()=>{const h=i.current;if(!n&&h){const f=new CustomEvent(SP,{bubbles:!0,cancelable:!0});h.addEventListener(SP,m=>r==null?void 0:r(m),{once:!0}),VN(h,f),f.defaultPrevented?u.current=!1:o.onClose()}};return s.jsx(e4,{...a,ref:c,disabled:n,onClick:Pe(e.onClick,d),onPointerDown:h=>{var f;(f=e.onPointerDown)==null||f.call(e,h),u.current=!0},onPointerUp:Pe(e.onPointerUp,h=>{var f;u.current||(f=h.currentTarget)==null||f.click()}),onKeyDown:Pe(e.onKeyDown,h=>{const f=l.searchRef.current!=="";n||f&&h.key===" "||Xj.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});Nx.displayName=Dg;var e4=j.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...i}=e,o=SS(Dg,n),l=G$(n),c=j.useRef(null),u=dt(t,c),[d,h]=j.useState(!1),[f,m]=j.useState("");return j.useEffect(()=>{const v=c.current;v&&m((v.textContent??"").trim())},[i.children]),s.jsx(ff.ItemSlot,{scope:n,disabled:r,textValue:a??f,children:s.jsx(R$,{asChild:!0,...l,focusable:!r,children:s.jsx(Le.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:u,onPointerMove:Pe(e.onPointerMove,mf(v=>{r?o.onItemLeave(v):(o.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Pe(e.onPointerLeave,mf(v=>o.onItemLeave(v))),onFocus:Pe(e.onFocus,()=>h(!0)),onBlur:Pe(e.onBlur,()=>h(!1))})})})}),PG="MenuCheckboxItem",t4=j.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...a}=e;return s.jsx(i4,{scope:e.__scopeMenu,checked:n,children:s.jsx(Nx,{role:"menuitemcheckbox","aria-checked":Mg(n)?"mixed":n,...a,ref:t,"data-state":AS(n),onSelect:Pe(a.onSelect,()=>r==null?void 0:r(Mg(n)?!0:!n),{checkForDefaultPrevented:!1})})})});t4.displayName=PG;var n4="MenuRadioGroup",[AG,kG]=Kl(n4,{value:void 0,onValueChange:()=>{}}),r4=j.forwardRef((e,t)=>{const{value:n,onValueChange:r,...a}=e,i=jr(r);return s.jsx(AG,{scope:e.__scopeMenu,value:n,onValueChange:i,children:s.jsx(CS,{...a,ref:t})})});r4.displayName=n4;var s4="MenuRadioItem",a4=j.forwardRef((e,t)=>{const{value:n,...r}=e,a=kG(s4,e.__scopeMenu),i=n===a.value;return s.jsx(i4,{scope:e.__scopeMenu,checked:i,children:s.jsx(Nx,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":AS(i),onSelect:Pe(r.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,n)},{checkForDefaultPrevented:!1})})})});a4.displayName=s4;var PS="MenuItemIndicator",[i4,EG]=Kl(PS,{checked:!1}),o4=j.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...a}=e,i=EG(PS,n);return s.jsx(js,{present:r||Mg(i.checked)||i.checked===!0,children:s.jsx(Le.span,{...a,ref:t,"data-state":AS(i.checked)})})});o4.displayName=PS;var TG="MenuSeparator",l4=j.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(Le.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});l4.displayName=TG;var OG="MenuArrow",c4=j.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=wx(n);return s.jsx(cS,{...a,...r,ref:t})});c4.displayName=OG;var DG="MenuSub",[Bke,u4]=Kl(DG),vh="MenuSubTrigger",d4=j.forwardRef((e,t)=>{const n=Gl(vh,e.__scopeMenu),r=vm(vh,e.__scopeMenu),a=u4(vh,e.__scopeMenu),i=SS(vh,e.__scopeMenu),o=j.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,u={__scopeMenu:e.__scopeMenu},d=j.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return j.useEffect(()=>d,[d]),j.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),s.jsx(wS,{asChild:!0,...u,children:s.jsx(e4,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":m4(n.open),...e,ref:ax(t,a.onTriggerChange),onClick:h=>{var f;(f=e.onClick)==null||f.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Pe(e.onPointerMove,mf(h=>{i.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:Pe(e.onPointerLeave,mf(h=>{var m,v;d();const f=(m=n.content)==null?void 0:m.getBoundingClientRect();if(f){const p=(v=n.content)==null?void 0:v.dataset.side,g=p==="right",x=g?-5:5,y=f[g?"left":"right"],b=f[g?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+x,y:h.clientY},{x:y,y:f.top},{x:b,y:f.top},{x:b,y:f.bottom},{x:y,y:f.bottom}],side:p}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Pe(e.onKeyDown,h=>{var m;const f=i.searchRef.current!=="";e.disabled||f&&h.key===" "||fG[r.dir].includes(h.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),h.preventDefault())})})})});d4.displayName=vh;var h4="MenuSubContent",f4=j.forwardRef((e,t)=>{const n=Q$(ps,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=Gl(ps,e.__scopeMenu),o=vm(ps,e.__scopeMenu),l=u4(h4,e.__scopeMenu),c=j.useRef(null),u=dt(t,c);return s.jsx(ff.Provider,{scope:e.__scopeMenu,children:s.jsx(js,{present:r||i.open,children:s.jsx(ff.Slot,{scope:e.__scopeMenu,children:s.jsx(_S,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:Pe(e.onFocusOutside,d=>{d.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Pe(e.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:Pe(e.onKeyDown,d=>{var m;const h=d.currentTarget.contains(d.target),f=mG[o.dir].includes(d.key);h&&f&&(i.onOpenChange(!1),(m=l.trigger)==null||m.focus(),d.preventDefault())})})})})})});f4.displayName=h4;function m4(e){return e?"open":"closed"}function Mg(e){return e==="indeterminate"}function AS(e){return Mg(e)?"indeterminate":e?"checked":"unchecked"}function MG(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function IG(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function $G(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=IG(e,Math.max(i,0));a.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function RG(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],u=l.x,d=l.y,h=c.x,f=c.y;d>r!=f>r&&n<(h-u)*(r-d)/(f-d)+u&&(a=!a)}return a}function LG(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return RG(n,t)}function mf(e){return t=>t.pointerType==="mouse"?e(t):void 0}var FG=Y$,BG=wS,zG=X$,VG=J$,qG=CS,UG=Z$,WG=Nx,HG=t4,KG=r4,GG=a4,YG=o4,QG=l4,XG=c4,JG=d4,ZG=f4,Sx="DropdownMenu",[eY,zke]=Fr(Sx,[K$]),Sr=K$(),[tY,p4]=eY(Sx),g4=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:a,defaultOpen:i,onOpenChange:o,modal:l=!0}=e,c=Sr(t),u=j.useRef(null),[d,h]=ui({prop:a,defaultProp:i??!1,onChange:o,caller:Sx});return s.jsx(tY,{scope:t,triggerId:Na(),triggerRef:u,contentId:Na(),open:d,onOpenChange:h,onOpenToggle:j.useCallback(()=>h(f=>!f),[h]),modal:l,children:s.jsx(FG,{...c,open:d,onOpenChange:h,dir:r,modal:l,children:n})})};g4.displayName=Sx;var v4="DropdownMenuTrigger",x4=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...a}=e,i=p4(v4,n),o=Sr(n);return s.jsx(BG,{asChild:!0,...o,children:s.jsx(Le.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:ax(t,i.triggerRef),onPointerDown:Pe(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:Pe(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});x4.displayName=v4;var nY="DropdownMenuPortal",y4=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Sr(t);return s.jsx(zG,{...r,...n})};y4.displayName=nY;var b4="DropdownMenuContent",j4=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=p4(b4,n),i=Sr(n),o=j.useRef(!1);return s.jsx(VG,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...r,ref:t,onCloseAutoFocus:Pe(e.onCloseAutoFocus,l=>{var c;o.current||(c=a.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:Pe(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!a.modal||d)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});j4.displayName=b4;var rY="DropdownMenuGroup",sY=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Sr(n);return s.jsx(qG,{...a,...r,ref:t})});sY.displayName=rY;var aY="DropdownMenuLabel",w4=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Sr(n);return s.jsx(UG,{...a,...r,ref:t})});w4.displayName=aY;var iY="DropdownMenuItem",N4=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Sr(n);return s.jsx(WG,{...a,...r,ref:t})});N4.displayName=iY;var oY="DropdownMenuCheckboxItem",S4=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Sr(n);return s.jsx(HG,{...a,...r,ref:t})});S4.displayName=oY;var lY="DropdownMenuRadioGroup",cY=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Sr(n);return s.jsx(KG,{...a,...r,ref:t})});cY.displayName=lY;var uY="DropdownMenuRadioItem",_4=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Sr(n);return s.jsx(GG,{...a,...r,ref:t})});_4.displayName=uY;var dY="DropdownMenuItemIndicator",C4=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Sr(n);return s.jsx(YG,{...a,...r,ref:t})});C4.displayName=dY;var hY="DropdownMenuSeparator",P4=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Sr(n);return s.jsx(QG,{...a,...r,ref:t})});P4.displayName=hY;var fY="DropdownMenuArrow",mY=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Sr(n);return s.jsx(XG,{...a,...r,ref:t})});mY.displayName=fY;var pY="DropdownMenuSubTrigger",A4=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Sr(n);return s.jsx(JG,{...a,...r,ref:t})});A4.displayName=pY;var gY="DropdownMenuSubContent",k4=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Sr(n);return s.jsx(ZG,{...a,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});k4.displayName=gY;var vY=g4,xY=x4,yY=y4,E4=j4,T4=w4,O4=N4,D4=S4,M4=_4,I4=C4,$4=P4,R4=A4,L4=k4;const bY=vY,jY=xY,wY=j.forwardRef(({className:e,inset:t,children:n,...r},a)=>s.jsxs(R4,{ref:a,className:Ee("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[n,s.jsx(cU,{className:"ml-auto h-4 w-4"})]}));wY.displayName=R4.displayName;const NY=j.forwardRef(({className:e,...t},n)=>s.jsx(L4,{ref:n,className:Ee("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));NY.displayName=L4.displayName;const F4=j.forwardRef(({className:e,sideOffset:t=4,...n},r)=>s.jsx(yY,{children:s.jsx(E4,{ref:r,sideOffset:t,className:Ee("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));F4.displayName=E4.displayName;const Jj=j.forwardRef(({className:e,inset:t,...n},r)=>s.jsx(O4,{ref:r,className:Ee("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));Jj.displayName=O4.displayName;const SY=j.forwardRef(({className:e,children:t,checked:n,...r},a)=>s.jsxs(D4,{ref:a,className:Ee("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(I4,{children:s.jsx(KN,{className:"h-4 w-4"})})}),t]}));SY.displayName=D4.displayName;const _Y=j.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(M4,{ref:r,className:Ee("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(I4,{children:s.jsx(dU,{className:"h-2 w-2 fill-current"})})}),t]}));_Y.displayName=M4.displayName;const B4=j.forwardRef(({className:e,inset:t,...n},r)=>s.jsx(T4,{ref:r,className:Ee("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));B4.displayName=T4.displayName;const Zj=j.forwardRef(({className:e,...t},n)=>s.jsx($4,{ref:n,className:Ee("-mx-1 my-1 h-px bg-muted",e),...t}));Zj.displayName=$4.displayName;var z4={exports:{}},V4={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ku=j;function CY(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var PY=typeof Object.is=="function"?Object.is:CY,AY=ku.useState,kY=ku.useEffect,EY=ku.useLayoutEffect,TY=ku.useDebugValue;function OY(e,t){var n=t(),r=AY({inst:{value:n,getSnapshot:t}}),a=r[0].inst,i=r[1];return EY(function(){a.value=n,a.getSnapshot=t,R0(a)&&i({inst:a})},[e,n,t]),kY(function(){return R0(a)&&i({inst:a}),e(function(){R0(a)&&i({inst:a})})},[e]),TY(n),n}function R0(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!PY(e,n)}catch{return!0}}function DY(e,t){return t()}var MY=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?DY:OY;V4.useSyncExternalStore=ku.useSyncExternalStore!==void 0?ku.useSyncExternalStore:MY;z4.exports=V4;var IY=z4.exports;function $Y(){return IY.useSyncExternalStore(RY,()=>!0,()=>!1)}function RY(){return()=>{}}var kS="Avatar",[LY,Vke]=Fr(kS),[FY,q4]=LY(kS),U4=j.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[a,i]=j.useState("idle");return s.jsx(FY,{scope:n,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:s.jsx(Le.span,{...r,ref:t})})});U4.displayName=kS;var W4="AvatarImage",H4=j.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:a=()=>{},...i}=e,o=q4(W4,n),l=BY(r,i),c=jr(u=>{a(u),o.onImageLoadingStatusChange(u)});return jn(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?s.jsx(Le.img,{...i,ref:t,src:r}):null});H4.displayName=W4;var K4="AvatarFallback",G4=j.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...a}=e,i=q4(K4,n),[o,l]=j.useState(r===void 0);return j.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&i.imageLoadingStatus!=="loaded"?s.jsx(Le.span,{...a,ref:t}):null});G4.displayName=K4;function _P(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function BY(e,{referrerPolicy:t,crossOrigin:n}){const r=$Y(),a=j.useRef(null),i=r?(a.current||(a.current=new window.Image),a.current):null,[o,l]=j.useState(()=>_P(i,e));return jn(()=>{l(_P(i,e))},[i,e]),jn(()=>{const c=h=>()=>{l(h)};if(!i)return;const u=c("loaded"),d=c("error");return i.addEventListener("load",u),i.addEventListener("error",d),t&&(i.referrerPolicy=t),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",u),i.removeEventListener("error",d)}},[i,n,t]),o}var Y4=U4,Q4=H4,X4=G4;const Qn=j.forwardRef(({className:e,...t},n)=>s.jsx(Y4,{ref:n,className:Ee("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));Qn.displayName=Y4.displayName;const Eu=j.forwardRef(({className:e,...t},n)=>s.jsx(Q4,{ref:n,className:Ee("aspect-square h-full w-full",e),...t}));Eu.displayName=Q4.displayName;const Xn=j.forwardRef(({className:e,...t},n)=>s.jsx(X4,{ref:n,className:Ee("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));Xn.displayName=X4.displayName;const zY="modulepreload",VY=function(e){return"/"+e},CP={},xm=function(t,n,r){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(n.map(c=>{if(c=VY(c),c in CP)return;CP[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":zY,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},qY=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>xm(async()=>{const{default:r}=await Promise.resolve().then(()=>yd);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class ES extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class UY extends ES{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class PP extends ES{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class AP extends ES{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var ew;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(ew||(ew={}));var WY=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class HY{constructor(t,{headers:n={},customFetch:r,region:a=ew.Any}={}){this.url=t,this.headers=n,this.region=a,this.fetch=qY(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return WY(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:o}=n;let l={},{region:c}=n;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const h=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:d}).catch(p=>{throw new UY(p)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new PP(h);if(!h.ok)throw new AP(h);let m=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),v;return m==="application/json"?v=yield h.json():m==="application/octet-stream"?v=yield h.blob():m==="text/event-stream"?v=h:m==="multipart/form-data"?v=yield h.formData():v=yield h.text(),{data:v,error:null,response:h}}catch(a){return{data:null,error:a,response:a instanceof AP||a instanceof PP?a.context:void 0}}})}}var Or={},TS={},_x={},ym={},Cx={},Px={},KY=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Tu=KY();const GY=Tu.fetch,J4=Tu.fetch.bind(Tu),Z4=Tu.Headers,YY=Tu.Request,QY=Tu.Response,yd=Object.freeze(Object.defineProperty({__proto__:null,Headers:Z4,Request:YY,Response:QY,default:J4,fetch:GY},Symbol.toStringTag,{value:"Module"})),XY=DB(yd);var Ax={};Object.defineProperty(Ax,"__esModule",{value:!0});let JY=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Ax.default=JY;var eR=lr&&lr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Px,"__esModule",{value:!0});const ZY=eR(XY),eQ=eR(Ax);let tQ=class{constructor(t){var n,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(n=t.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=ZY.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=new Headers(this.headers),this.headers.set(t,n),this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let a=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c,u;let d=null,h=null,f=null,m=i.status,v=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=y:h=JSON.parse(y))}const g=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),x=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");g&&x&&x.length>1&&(f=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,m=406,v="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const g=await i.text();try{d=JSON.parse(g),Array.isArray(d)&&i.status===404&&(h=[],d=null,m=200,v="OK")}catch{i.status===404&&g===""?(m=204,v="No Content"):d={message:g}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,m=200,v="OK"),d&&this.shouldThrowOnError)throw new eQ.default(d)}return{error:d,data:h,count:f,status:m,statusText:v}});return this.shouldThrowOnError||(a=a.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,n)}returns(){return this}overrideTypes(){return this}};Px.default=tQ;var nQ=lr&&lr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Cx,"__esModule",{value:!0});const rQ=nQ(Px);let sQ=class extends rQ.default{select(t){let n=!1;const r=(t??"*").split("").map(a=>/\s/.test(a)&&!n?"":(a==='"'&&(n=!n),a)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:a,referencedTable:i=a}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:a=r}={}){const i=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:a=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Cx.default=sQ;var aQ=lr&&lr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ym,"__esModule",{value:!0});const iQ=aQ(Cx);let oQ=class extends iQ.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${o}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const a=r?`${r}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};ym.default=oQ;var lQ=lr&&lr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_x,"__esModule",{value:!0});const Jd=lQ(ym);let cQ=class{constructor(t,{headers:n={},schema:r,fetch:a}){this.url=t,this.headers=new Headers(n),this.schema=r,this.fetch=a}select(t,{head:n=!1,count:r}={}){const a=n?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new Jd.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:n,defaultToNull:r=!0}={}){var a;const i="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Jd.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:a,defaultToNull:i=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),a&&this.headers.append("Prefer",`count=${a}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Jd.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:n}={}){var r;const a="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new Jd.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var n;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Jd.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};_x.default=cQ;var tR=lr&&lr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(TS,"__esModule",{value:!0});const uQ=tR(_x),dQ=tR(ym);let hQ=class nR{constructor(t,{headers:n={},schema:r,fetch:a}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=a}from(t){const n=new URL(`${this.url}/${t}`);return new uQ.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new nR(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:a=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;r||a?(l=r?"HEAD":"GET",Object.entries(n).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{c.searchParams.append(h,f)})):(l="POST",u=n);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new dQ.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};TS.default=hQ;var bd=lr&&lr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Or,"__esModule",{value:!0});Or.PostgrestError=Or.PostgrestBuilder=Or.PostgrestTransformBuilder=Or.PostgrestFilterBuilder=Or.PostgrestQueryBuilder=Or.PostgrestClient=void 0;const rR=bd(TS);Or.PostgrestClient=rR.default;const sR=bd(_x);Or.PostgrestQueryBuilder=sR.default;const aR=bd(ym);Or.PostgrestFilterBuilder=aR.default;const iR=bd(Cx);Or.PostgrestTransformBuilder=iR.default;const oR=bd(Px);Or.PostgrestBuilder=oR.default;const lR=bd(Ax);Or.PostgrestError=lR.default;var fQ=Or.default={PostgrestClient:rR.default,PostgrestQueryBuilder:sR.default,PostgrestFilterBuilder:aR.default,PostgrestTransformBuilder:iR.default,PostgrestBuilder:oR.default,PostgrestError:lR.default};const{PostgrestClient:mQ,PostgrestQueryBuilder:Gke,PostgrestFilterBuilder:Yke,PostgrestTransformBuilder:Qke,PostgrestBuilder:Xke,PostgrestError:Jke}=fQ;class pQ{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,a=parseInt(r.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const gQ="2.15.5",vQ=`realtime-js/${gQ}`,xQ="1.0.0",tw=1e4,yQ=1e3,bQ=100;var Th;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Th||(Th={}));var _n;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(_n||(_n={}));var $s;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})($s||($s={}));var nw;(function(e){e.websocket="websocket"})(nw||(nw={}));var tl;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(tl||(tl={}));class jQ{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const a=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(t.slice(o,o+a));o=o+a;const c=r.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class cR{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ft;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ft||(Ft={}));const kP=(e,t,n={})=>{var r;const a=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((i,o)=>(i[o]=wQ(o,e,t,a),i),{})},wQ=(e,t,n,r)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,o=n[e];return i&&!r.includes(i)?uR(i,o):rw(o)},uR=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return CQ(t,n)}switch(e){case Ft.bool:return NQ(t);case Ft.float4:case Ft.float8:case Ft.int2:case Ft.int4:case Ft.int8:case Ft.numeric:case Ft.oid:return SQ(t);case Ft.json:case Ft.jsonb:return _Q(t);case Ft.timestamp:return PQ(t);case Ft.abstime:case Ft.date:case Ft.daterange:case Ft.int4range:case Ft.int8range:case Ft.money:case Ft.reltime:case Ft.text:case Ft.time:case Ft.timestamptz:case Ft.timetz:case Ft.tsrange:case Ft.tstzrange:return rw(t);default:return rw(t)}},rw=e=>e,NQ=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},SQ=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},_Q=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},CQ=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const o=e.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>uR(t,l))}return e},PQ=e=>typeof e=="string"?e.replace(" ","T"):e,dR=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class L0{constructor(t,n,r={},a=tw){this.channel=t,this.event=n,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var EP;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(EP||(EP={}));class Oh{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Oh.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=Oh.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Oh.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,a){const i=this.cloneDeep(t),o=this.transformState(n),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const f=d.map(g=>g.presence_ref),m=h.map(g=>g.presence_ref),v=d.filter(g=>m.indexOf(g.presence_ref)<0),p=h.filter(g=>f.indexOf(g.presence_ref)<0);v.length>0&&(l[u]=v),p.length>0&&(c[u]=p)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},r,a)}static syncDiff(t,n,r,a){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(m=>m.presence_ref),f=d.filter(m=>h.indexOf(m.presence_ref)<0);t[l].unshift(...f)}r(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,a(l,u,c),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const a=t[r];return"metas"in a?n[r]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=a,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var TP;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(TP||(TP={}));var Dh;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Dh||(Dh={}));var qa;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(qa||(qa={}));class OS{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=_n.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new L0(this,$s.join,this.params,this.timeout),this.rejoinTimer=new cR(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=_n.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=_n.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=_n.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=_n.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=_n.errored,this.rejoinTimer.scheduleTimeout())}),this._on($s.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new Oh(this),this.broadcastEndpointURL=dR(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==_n.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(m=>m.filter))!==null&&a!==void 0?a:[],d=!!this.bindings[Dh.PRESENCE]&&this.bindings[Dh.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(qa.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(qa.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:m})=>{var v;if(this.socket.setAuth(),m===void 0){t==null||t(qa.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,g=(v=p==null?void 0:p.length)!==null&&v!==void 0?v:0,x=[];for(let y=0;y<g;y++){const b=p[y],{filter:{event:N,schema:w,table:S,filter:_}}=b,C=m&&m[y];if(C&&C.event===N&&C.schema===w&&C.table===S&&C.filter===_)x.push(Object.assign(Object.assign({},b),{id:C.id}));else{this.unsubscribe(),this.state=_n.errored,t==null||t(qa.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(qa.SUBSCRIBED);return}}).receive("error",m=>{this.state=_n.errored,t==null||t(qa.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(qa.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===_n.joined&&t===Dh.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,a;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=_n.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger($s.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(a=>{r=new L0(this,$s.leave,{},t),r.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=_n.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const a=new AbortController,i=setTimeout(()=>a.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(i),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new L0(this,t,n,r);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>bQ){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=$s;if(r&&[l,c,u,d].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(m=>{var v,p,g;return((v=m.filter)===null||v===void 0?void 0:v.event)==="*"||((g=(p=m.filter)===null||p===void 0?void 0:p.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===o}).map(m=>m.callback(f,r)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var v,p,g,x,y,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const N=m.id,w=(v=m.filter)===null||v===void 0?void 0:v.event;return N&&((p=n.ids)===null||p===void 0?void 0:p.includes(N))&&(w==="*"||(w==null?void 0:w.toLocaleLowerCase())===((g=n.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const N=(y=(x=m==null?void 0:m.filter)===null||x===void 0?void 0:x.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return N==="*"||N===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof f=="object"&&"ids"in f){const v=f.data,{schema:p,table:g,commit_timestamp:x,type:y,errors:b}=v;f=Object.assign(Object.assign({},{schema:p,table:g,commit_timestamp:x,eventType:y,new:{},old:{},errors:b}),this._getPayloadRecords(v))}m.callback(f,r)})}_isClosed(){return this.state===_n.closed}_isJoined(){return this.state===_n.joined}_isJoining(){return this.state===_n.joining}_isLeaving(){return this.state===_n.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const a=t.toLocaleLowerCase(),i={type:a,filter:n,callback:r};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&OS.isEqual(a.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on($s.close,{},t)}_onError(t){this._on($s.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=_n.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=kP(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=kP(t.columns,t.old_record)),n}}const F0=()=>{},op={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},AQ=[1e3,2e3,5e3,1e4],kQ=1e4,EQ=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class TQ{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=tw,this.transport=null,this.heartbeatIntervalMs=op.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=F0,this.ref=0,this.reconnectTimer=null,this.logger=F0,this.conn=null,this.sendBuffer=[],this.serializer=new jQ,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let i;return a?i=a:typeof fetch>"u"?i=(...o)=>xm(async()=>{const{default:l}=await Promise.resolve().then(()=>yd);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${nw.websocket}`,this.httpEndpoint=dR(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=pQ.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:xQ}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Th.connecting:return tl.Connecting;case Th.open:return tl.Open;case Th.closing:return tl.Closing;default:return tl.Closed}}isConnected(){return this.connectionState()===tl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===r);if(a)return a;{const i=new OS(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(yQ,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},op.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:a,payload:i,ref:o}=n,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${a} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(a,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger($s.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${t}${r}${a}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([EQ],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const a={access_token:n,version:vQ};n&&r.updateJoinPayload(a),r.joinedOnce&&r._isJoined()&&r._push($s.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new cR(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},op.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,a,i,o,l,c,u,d;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:tw,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:op.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:F0,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:h=>AQ[h-1]||kQ,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(h,f)=>f(JSON.stringify(h)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class DS extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Cn(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class OQ extends DS{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class sw extends DS{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var DQ=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const hR=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>xm(async()=>{const{default:r}=await Promise.resolve().then(()=>yd);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},MQ=()=>DQ(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield xm(()=>Promise.resolve().then(()=>yd),void 0)).Response:Response}),aw=e=>{if(Array.isArray(e))return e.map(n=>aw(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const a=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=aw(r)}),t},IQ=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Yl=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const B0=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),$Q=(e,t,n)=>Yl(void 0,void 0,void 0,function*(){const r=yield MQ();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(a=>{const i=e.status||500,o=(a==null?void 0:a.statusCode)||i+"";t(new OQ(B0(a),i,o))}).catch(a=>{t(new sw(B0(a),a))}):t(new sw(B0(e),e))}),RQ=(e,t,n,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?a:(IQ(r)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(r)):a.body=r,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),n))};function bm(e,t,n,r,a,i){return Yl(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(n,RQ(t,r,a,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>$Q(c,l,r))})})}function Ig(e,t,n,r){return Yl(this,void 0,void 0,function*(){return bm(e,"GET",t,n,r)})}function la(e,t,n,r,a){return Yl(this,void 0,void 0,function*(){return bm(e,"POST",t,r,a,n)})}function iw(e,t,n,r,a){return Yl(this,void 0,void 0,function*(){return bm(e,"PUT",t,r,a,n)})}function LQ(e,t,n,r){return Yl(this,void 0,void 0,function*(){return bm(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function fR(e,t,n,r,a){return Yl(this,void 0,void 0,function*(){return bm(e,"DELETE",t,r,a,n)})}var hr=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const FQ={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},OP={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class BQ{constructor(t,n={},r,a){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=hR(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,a){return hr(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},OP),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),h=yield(t=="PUT"?iw:la)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Cn(i))return{data:null,error:i};throw i}})}upload(t,n,r){return hr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,a){return hr(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:OP.upsert},a),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield iw(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Cn(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return hr(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const a=Object.assign({},this.headers);n!=null&&n.upsert&&(a["x-upsert"]="true");const i=yield la(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new DS("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Cn(r))return{data:null,error:r};throw r}})}update(t,n,r){return hr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return hr(this,void 0,void 0,function*(){try{return{data:yield la(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Cn(a))return{data:null,error:a};throw a}})}copy(t,n,r){return hr(this,void 0,void 0,function*(){try{return{data:{path:(yield la(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Cn(a))return{data:null,error:a};throw a}})}createSignedUrl(t,n,r){return hr(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield la(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Cn(a))return{data:null,error:a};throw a}})}createSignedUrls(t,n,r){return hr(this,void 0,void 0,function*(){try{const a=yield la(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Cn(a))return{data:null,error:a};throw a}})}download(t,n){return hr(this,void 0,void 0,function*(){const a=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield Ig(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Cn(l))return{data:null,error:l};throw l}})}info(t){return hr(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Ig(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:aw(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Cn(r))return{data:null,error:r};throw r}})}exists(t){return hr(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield LQ(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Cn(r)&&r instanceof sw){const a=r.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),a=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&a.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&a.push(c);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(t){return hr(this,void 0,void 0,function*(){try{return{data:yield fR(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cn(n))return{data:null,error:n};throw n}})}list(t,n,r){return hr(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},FQ),n),{prefix:t||""});return{data:yield la(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Cn(a))return{data:null,error:a};throw a}})}listV2(t,n){return hr(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield la(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Cn(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const zQ="2.12.1",VQ={"X-Client-Info":`storage-js/${zQ}`};var hc=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class qQ{constructor(t,n={},r,a){this.shouldThrowOnError=!1;const i=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},VQ),n),this.fetch=hR(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return hc(this,void 0,void 0,function*(){try{return{data:yield Ig(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Cn(t))return{data:null,error:t};throw t}})}getBucket(t){return hc(this,void 0,void 0,function*(){try{return{data:yield Ig(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cn(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return hc(this,void 0,void 0,function*(){try{return{data:yield la(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Cn(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return hc(this,void 0,void 0,function*(){try{return{data:yield iw(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Cn(r))return{data:null,error:r};throw r}})}emptyBucket(t){return hc(this,void 0,void 0,function*(){try{return{data:yield la(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cn(n))return{data:null,error:n};throw n}})}deleteBucket(t){return hc(this,void 0,void 0,function*(){try{return{data:yield fR(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cn(n))return{data:null,error:n};throw n}})}}class UQ extends qQ{constructor(t,n={},r,a){super(t,n,r,a)}from(t){return new BQ(this.url,this.headers,t,this.fetch)}}const WQ="2.57.4";let xh="";typeof Deno<"u"?xh="deno":typeof document<"u"?xh="web":typeof navigator<"u"&&navigator.product==="ReactNative"?xh="react-native":xh="node";const HQ={"X-Client-Info":`supabase-js-${xh}/${WQ}`},KQ={headers:HQ},GQ={schema:"public"},YQ={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},QQ={};var XQ=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const JQ=e=>{let t;return e?t=e:typeof fetch>"u"?t=J4:t=fetch,(...n)=>t(...n)},ZQ=()=>typeof Headers>"u"?Z4:Headers,eX=(e,t,n)=>{const r=JQ(n),a=ZQ();return(i,o)=>XQ(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new a(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},o),{headers:u}))})};var tX=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};function nX(e){return e.endsWith("/")?e:e+"/"}function rX(e,t){var n,r;const{db:a,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,f={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>tX(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function sX(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(nX(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const mR="2.71.1",Nc=30*1e3,ow=3,z0=ow*Nc,aX="http://localhost:9999",iX="supabase.auth.token",oX={"X-Client-Info":`gotrue-js/${mR}`},lw="X-Supabase-Api-Version",pR={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},lX=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,cX=10*60*1e3;class MS extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Je(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class uX extends MS{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function dX(e){return Je(e)&&e.name==="AuthApiError"}class gR extends MS{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Eo extends MS{constructor(t,n,r,a){super(t,r,a),this.name=n,this.status=r}}class Oi extends Eo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function hX(e){return Je(e)&&e.name==="AuthSessionMissingError"}class lp extends Eo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class cp extends Eo{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class up extends Eo{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function fX(e){return Je(e)&&e.name==="AuthImplicitGrantRedirectError"}class DP extends Eo{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class cw extends Eo{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function V0(e){return Je(e)&&e.name==="AuthRetryableFetchError"}class MP extends Eo{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class uw extends Eo{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const $g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),IP=` 	
\r=`.split(""),mX=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<IP.length;t+=1)e[IP[t].charCodeAt(0)]=-2;for(let t=0;t<$g.length;t+=1)e[$g[t].charCodeAt(0)]=t;return e})();function $P(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n($g[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n($g[r]),t.queuedBits-=6}}function vR(e,t,n){const r=mX[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function RP(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{vX(o,r,n)};for(let o=0;o<e.length;o+=1)vR(e.charCodeAt(o),a,i);return t.join("")}function pX(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function gX(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const a=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}pX(r,t)}}function vX(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function xX(e){const t=[],n={queue:0,queuedBits:0},r=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)vR(e.charCodeAt(a),n,r);return new Uint8Array(t)}function yX(e){const t=[];return gX(e,n=>t.push(n)),new Uint8Array(t)}function bX(e){const t=[],n={queue:0,queuedBits:0},r=a=>{t.push(a)};return e.forEach(a=>$P(a,n,r)),$P(null,n,r),t.join("")}function jX(e){return Math.round(Date.now()/1e3)+e}function wX(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Es=()=>typeof window<"u"&&typeof document<"u",qo={tested:!1,writable:!1},xR=()=>{if(!Es())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(qo.tested)return qo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),qo.tested=!0,qo.writable=!0}catch{qo.tested=!0,qo.writable=!1}return qo.writable};function NX(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return n.searchParams.forEach((r,a)=>{t[a]=r}),t}const yR=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>xm(async()=>{const{default:r}=await Promise.resolve().then(()=>yd);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},SX=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Sc=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Uo=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ai=async(e,t)=>{await e.removeItem(t)};class kx{constructor(){this.promise=new kx.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}kx.promiseConstructor=Promise;function q0(e){const t=e.split(".");if(t.length!==3)throw new uw("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!lX.test(t[r]))throw new uw("JWT not in base64url format");return{header:JSON.parse(RP(t[0])),payload:JSON.parse(RP(t[1])),signature:xX(t[2]),raw:{header:t[0],payload:t[1]}}}async function _X(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function CX(e,t){return new Promise((r,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){r(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function PX(e){return("0"+e.toString(16)).substr(-2)}function AX(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let a="";for(let i=0;i<56;i++)a+=n.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(t),Array.from(t,PX).join("")}async function kX(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(r);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function EX(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await kX(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function fc(e,t,n=!1){const r=AX();let a=r;n&&(a+="/PASSWORD_RECOVERY"),await Sc(e,`${t}-code-verifier`,a);const i=await EX(r);return[i,r===i?"plain":"s256"]}const TX=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function OX(e){const t=e.headers.get(lw);if(!t||!t.match(TX))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function DX(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function MX(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const IX=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function mc(e){if(!IX.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function U0(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function LP(e){return JSON.parse(JSON.stringify(e))}var $X=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};const Qo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),RX=[502,503,504];async function FP(e){var t;if(!SX(e))throw new cw(Qo(e),0);if(RX.includes(e.status))throw new cw(Qo(e),e.status);let n;try{n=await e.json()}catch(i){throw new gR(Qo(i),i)}let r;const a=OX(e);if(a&&a.getTime()>=pR["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new MP(Qo(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Oi}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new MP(Qo(n),e.status,n.weak_password.reasons);throw new uX(Qo(n),e.status||500,r)}const LX=(e,t,n,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),n))};async function ut(e,t,n,r){var a;const i=Object.assign({},r==null?void 0:r.headers);i[lw]||(i[lw]=pR["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(a=r==null?void 0:r.query)!==null&&a!==void 0?a:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await FX(e,t,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function FX(e,t,n,r,a,i){const o=LX(t,r,a,i);let l;try{l=await e(n,Object.assign({},o))}catch(c){throw console.error(c),new cw(Qo(c),0)}if(l.ok||await FP(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await FP(c)}}function za(e){var t;let n=null;qX(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=jX(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function BP(e){const t=za(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Bi(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function BX(e){return{data:e,error:null}}function zX(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:i}=e,o=$X(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function VX(e){return e}function qX(e){return e.access_token&&e.refresh_token&&e.expires_in}const W0=["global","local","others"];var UX=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};class WX{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=yR(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=W0[0]){if(W0.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${W0.join(", ")}`);try{return await ut(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Je(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await ut(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Bi})}catch(r){if(Je(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=UX(t,["options"]),a=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(a.new_email=r==null?void 0:r.newEmail,delete a.newEmail),await ut(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:zX,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Je(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await ut(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Bi})}catch(n){if(Je(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,a,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ut(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:VX});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(v=>{const p=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(v.split(";")[1].split("=")[1]);u[`${g}Page`]=p}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(Je(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){mc(t);try{return await ut(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Bi})}catch(n){if(Je(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){mc(t);try{return await ut(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Bi})}catch(r){if(Je(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){mc(t);try{return await ut(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Bi})}catch(r){if(Je(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){mc(t.userId);try{const{data:n,error:r}=await ut(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:r}}catch(n){if(Je(n))return{data:null,error:n};throw n}}async _deleteFactor(t){mc(t.userId),mc(t.id);try{return{data:await ut(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(Je(n))return{data:null,error:n};throw n}}}function zP(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function HX(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const pc={debug:!!(globalThis&&xR()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class bR extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class KX extends bR{}async function GX(e,t,n){pc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),pc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){pc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await n()}finally{pc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw pc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new KX(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(pc.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}HX();const YX={url:aX,storageKey:iX,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:oX,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function VP(e,t,n){return await n()}const gc={};class pf{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=pf.nextInstanceID,pf.nextInstanceID+=1,this.instanceID>0&&Es()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},YX),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new WX({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=yR(a.fetch),this.lock=a.lock||VP,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Es()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=GX:this.lock=VP,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:xR()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=zP(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=zP(this.memoryStorage)),Es()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=gc[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){gc[this.storageKey]=Object.assign(Object.assign({},gc[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=gc[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){gc[this.storageKey]=Object.assign(Object.assign({},gc[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${mR}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=NX(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Es()&&this.detectSessionInUrl&&r!=="none"){const{data:a,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),fX(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Je(n)?{error:n}:{error:new gR("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,a;try{const i=await ut(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:za}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(Je(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,a;try{let i;if("email"in t){const{email:d,password:h,options:f}=t;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await fc(this.storage,this.storageKey)),i=await ut(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:v},xform:za})}else if("phone"in t){const{phone:d,password:h,options:f}=t;i=await ut(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(a=f==null?void 0:f.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:za})}else throw new cp("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(Je(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:o,options:l}=t;n=await ut(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:BP})}else if("phone"in t){const{phone:i,password:o,options:l}=t;n=await ut(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:BP})}else throw new cp("You must provide either an email or phone number and a password");const{data:r,error:a}=n;return a?{data:{user:null,session:null},error:a}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new lp}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(n){if(Je(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,a,i,o,l,c,u,d,h,f,m;let v,p;if("message"in t)v=t.message,p=t.signature;else{const{chain:g,wallet:x,statement:y,options:b}=t;let N;if(Es())if(typeof x=="object")N=x;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))N=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=x}const w=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in N&&N.signIn){const S=await N.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:w.host,uri:w.href}),y?{statement:y}:null));let _;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")_=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)_=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in _&&"signature"in _&&(typeof _.signedMessage=="string"||_.signedMessage instanceof Uint8Array)&&_.signature instanceof Uint8Array)v=typeof _.signedMessage=="string"?_.signedMessage:new TextDecoder().decode(_.signedMessage),p=_.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in N)||typeof N.signMessage!="function"||!("publicKey"in N)||typeof N!="object"||!N.publicKey||!("toBase58"in N.publicKey)||typeof N.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${w.host} wants you to sign in with your Solana account:`,N.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${w.href}`,`Issued At: ${(a=(r=b==null?void 0:b.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((h=(d=b==null?void 0:b.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...b.signInWithSolana.resources.map(_=>`- ${_}`)]:[]].join(`
`);const S=await N.signMessage(new TextEncoder().encode(v),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=S}}try{const{data:g,error:x}=await ut(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:bX(p)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:za});if(x)throw x;return!g||!g.session||!g.user?{data:{user:null,session:null},error:new lp}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:Object.assign({},g),error:x})}catch(g){if(Je(g))return{data:{user:null,session:null},error:g};throw g}}async _exchangeCodeForSession(t){const n=await Uo(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(n??"").split("/");try{const{data:i,error:o}=await ut(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:za});if(await Ai(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new lp}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(Je(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:a,access_token:i,nonce:o}=t,l=await ut(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:za}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new lp}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(Je(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,a,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await fc(this.storage,this.storageKey));const{error:h}=await ut(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await ut(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new cp("You must provide either an email or phone number.")}catch(l){if(Je(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let a,i;"options"in t&&(a=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await ut(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:za});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(Je(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var n,r,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await fc(this.storage,this.storageKey)),await ut(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:BX})}catch(i){if(Je(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Oi;const{error:a}=await ut(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(Je(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:a,options:i}=t,{error:o}=await ut(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:a,options:i}=t,{data:o,error:l}=await ut(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new cp("You must provide either an email or phone number and a type")}catch(n){if(Je(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Uo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<z0:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await Uo(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=U0()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ut(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Bi}):await this._useSession(async n=>{var r,a,i;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Oi}:await ut(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Bi})})}catch(n){if(Je(n))return hX(n)&&(await this._removeSession(),await Ai(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:a,error:i}=r;if(i)throw i;if(!a.session)throw new Oi;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await fc(this.storage,this.storageKey));const{data:u,error:d}=await ut(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Bi});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Je(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Oi;const n=Date.now()/1e3;let r=n,a=!0,i=null;const{payload:o}=q0(t.access_token);if(o.exp&&(r=o.exp,a=r<=n),a){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(Je(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:l}=n;if(l)throw l;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Oi;const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Je(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!Es())throw new up("No browser detected.");if(t.error||t.error_description||t.error_code)throw new up(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new DP("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new up("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new DP("No code detected.");const{data:y,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new up("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const m=f-d;m*1e3<=Nc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const v=f-h;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,f,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,f,d);const{data:p,error:g}=await this._getUser(i);if(g)throw g;const x={provider_token:r,provider_refresh_token:a,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(r){if(Je(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Uo(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:a,error:i}=n;if(i)return{error:i};const o=(r=a.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(dX(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Ai(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=wX(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,a;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await fc(this.storage,this.storageKey,!0));try{return await ut(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(Je(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(Je(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:a}=await this._useSession(async i=>{var o,l,c,u,d;const{data:h,error:f}=i;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ut(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return Es()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Je(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,a;const{data:i,error:o}=n;if(o)throw o;return await ut(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(Je(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await CX(async a=>(a>0&&await _X(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await ut(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:za})),(a,i)=>{const o=200*Math.pow(2,a);return i&&V0(i)&&Date.now()+o-r<Nc})}catch(r){if(this._debug(n,"error",r),Je(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),Es()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await Uo(this.storage,this.storageKey);if(a&&this.userStorage){let o=await Uo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await Sc(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:U0()}else if(a&&!a.user&&!a.user){const o=await Uo(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await Ai(this.storage,this.storageKey+"-user"),await Sc(this.storage,this.storageKey,a)):a.user=U0()}if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const i=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<z0;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${z0}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),V0(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Oi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new kx;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Oi;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),Je(i)){const o={session:null,error:i};return V0(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,n,r=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Sc(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const i=LP(a);await Sc(this.storage,this.storageKey,i)}else{const a=LP(n);await Sc(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Ai(this.storage,this.storageKey),await Ai(this.storage,this.storageKey+"-code-verifier"),await Ai(this.storage,this.storageKey+"-user"),this.userStorage&&await Ai(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Es()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Nc);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-t)/Nc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Nc}ms, refresh threshold is ${ow} ticks`),a<=ow&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof bR)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Es()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const a=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await fc(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);a.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:a,error:i}=n;return i?{data:null,error:i}:await ut(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Je(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,a;const{data:i,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await ut(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(Je(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:l}=await ut(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(n){if(Je(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:i}=n;return i?{data:null,error:i}:await ut(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Je(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],a=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:a},error:i}=t;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=q0(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((r=(n=a.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const a=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+cX>a)return r;const{data:i,error:o}=await ut(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,r=i.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:m,error:v}=await this.getSession();if(v||!m.session)return{data:null,error:v};r=m.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=q0(r);n!=null&&n.allowExpired||DX(i.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:i,header:a,signature:o},error:null}}const d=MX(a.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,yX(`${l}.${c}`)))throw new uw("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(r){if(Je(r))return{data:null,error:r};throw r}}}pf.nextInstanceID=0;const QX=pf;class XX extends QX{constructor(t){super(t)}}var JX=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class ZX{constructor(t,n,r){var a,i,o;this.supabaseUrl=t,this.supabaseKey=n;const l=sX(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:GQ,realtime:QQ,auth:Object.assign(Object.assign({},YQ),{storageKey:c}),global:KQ},d=rX(r??{},u);this.storageKey=(a=d.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=eX(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new mQ(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new UQ(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new HY(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return JX(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:a,userStorage:i,storageKey:o,flowType:l,lock:c,debug:u},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new XX({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),d),storageKey:o,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:a,userStorage:i,flowType:l,lock:c,debug:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new TQ(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const eJ=(e,t,n)=>new ZX(e,t,n);function tJ(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}tJ()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const jR="https://fqmeqckchbppabetefuk.supabase.co",nJ="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZxbWVxY2tjaGJwcGFiZXRlZnVrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY2NzUzODYsImV4cCI6MjA3MjI1MTM4Nn0.MkyVvQVmqUXShrHXHTpHib0Dyq39ZB47KhGZZgBlF-o",ge=eJ(jR,nJ,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),wR=async()=>{const{data:{user:e},error:t}=await ge.auth.getUser();if(t)throw t;return e},Ex=async()=>{const e=await wR();if(!e)return null;const{data:t,error:n}=await ge.from("user_profiles").select("*").eq("id",e.id).single();if(n)throw n;return t},rJ=async(e,t,n,r,a="assistant")=>{const{data:i,error:o}=await ge.auth.signUp({email:e,password:t,options:{data:{username:n,full_name:r,role:a}}});if(o)throw o;return i},sJ=async()=>{const{error:e}=await ge.auth.signOut();if(e)throw e;try{localStorage.removeItem("supabase.auth.token"),localStorage.removeItem("sb-"+jR.split("//")[1].split(".")[0]+"-auth-token"),document.cookie.split(";").forEach(t=>{document.cookie=t.replace(/^ +/,"").replace(/=.*/,"=;expires="+new Date().toUTCString()+";path=/")})}catch(t){console.warn("Error clearing auth storage:",t)}},aJ=async e=>{const t=await wR();if(!t)throw new Error("No authenticated user");const{data:n,error:r}=await ge.from("user_profiles").select("*").eq("id",t.id).single();n||await NR(t);const a=Object.entries({...e,updated_at:new Date().toISOString()}).reduce((l,[c,u])=>(u!=null&&u!==""&&(l[c]=u),l),{}),{data:i,error:o}=await ge.from("user_profiles").update(a).eq("id",t.id).select().single();if(o){const l=t.user_metadata||{},c=l.full_name||l.name||"",u=(n==null?void 0:n.username)||l.username||t.email.split("@")[0],d=(n==null?void 0:n.role)||l.role||"assistant",h={id:t.id,email:t.email,username:u,full_name:c,role:d,...a},{data:f,error:m}=await ge.from("user_profiles").upsert(h).select().single();if(m)throw new Error(`Profile update failed: ${m.message}`);return f}return i},NR=async e=>{const t=await Ex();if(t)return t;const n=e.user_metadata||{},r=n.full_name||n.name||"",a=n.username||e.email.split("@")[0],i=n.role||"assistant",{data:o,error:l}=await ge.from("user_profiles").insert({id:e.id,email:e.email,username:a,full_name:r,role:i}).select().single();if(l)throw l;return o},iJ=async e=>{const{data:t,error:n}=await ge.auth.resetPasswordForEmail(e,{redirectTo:"https://vetoapp-six.vercel.app//reset-password"});if(n)throw n;return t},Vs={all:["auth"],session:()=>[...Vs.all,"session"]},oJ=async()=>{try{const{data:{session:e},error:t}=await ge.auth.getSession();if(t||!(e!=null&&e.user))return null;let n=null;try{n=await Ex()}catch{try{n=await NR(e.user)}catch(a){console.error("Failed to create user profile:",a);const i=e.user.user_metadata||{},o=i.full_name||i.name||"",l=i.username||e.user.email.split("@")[0];n={id:e.user.id,email:e.user.email,username:l,full_name:o,role:"assistant",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),avatar_url:i.avatar_url||i.picture||null}}}return n?{id:e.user.id,email:e.user.email,profile:n}:null}catch{return null}},lJ=()=>Qt({queryKey:Vs.session(),queryFn:oJ,staleTime:5*60*1e3,gcTime:10*60*1e3,retry:!1,refetchOnWindowFocus:!1,refetchOnMount:"always",refetchOnReconnect:!1,networkMode:"offlineFirst"}),SR=()=>{const e=yt();return wt({mutationFn:async({email:t,password:n})=>{const{data:r,error:a}=await ge.auth.signInWithPassword({email:t,password:n});if(a){const o={"Invalid login credentials":"Email ou mot de passe incorrect","Email not confirmed":"Veuillez confirmer votre email avant de vous connecter","Too many requests":"Trop de tentatives de connexion. Veuillez réessayer plus tard"}[a.message]||a.message;throw new Error(o)}if(!r.user||!r.session)throw new Error("Échec de connexion - session invalide");return r.user},onSuccess:async()=>{await new Promise(t=>setTimeout(t,100)),e.refetchQueries({queryKey:Vs.session()})},onError:()=>{e.setQueryData(Vs.session(),null)}})},cJ=()=>{const e=yt();return wt({mutationFn:async()=>{await sJ()},onSuccess:()=>{e.setQueryData(Vs.session(),null),e.removeQueries({queryKey:Vs.session()})}})},uJ=()=>{const e=yt();return wt({mutationFn:async()=>{const t=await Ex();if(!t)throw new Error("Could not refresh profile");return t},onSuccess:()=>{e.invalidateQueries({queryKey:Vs.session()})}})},dJ=()=>wt({mutationFn:async()=>{const{data:e,error:t}=await ge.auth.signInWithOAuth({provider:"google",options:{redirectTo:"https://vetoapp-six.vercel.app//dashboard"}});if(t)throw t;return e}}),hJ=()=>wt({mutationFn:async e=>{await iJ(e)}}),_R=j.createContext(void 0);function fJ({children:e}){const{data:t,isLoading:n,error:r}=lJ(),a=SR(),i=cJ(),o=uJ(),l=yt(),[c,u]=j.useState(!1),d=j.useRef(!1);j.useEffect(()=>{if(d.current)return;d.current=!0;const{data:{subscription:x}}=ge.auth.onAuthStateChange((b,N)=>{b==="SIGNED_OUT"?(l.setQueryData(Vs.session(),null),l.removeQueries({queryKey:Vs.session()})):b==="TOKEN_REFRESHED"&&N&&l.invalidateQueries({queryKey:Vs.session()}),c||u(!0)}),y=setTimeout(()=>{c||u(!0)},2e3);return()=>{x.unsubscribe(),clearTimeout(y),d.current=!1}},[l,c]);const h=async(x,y)=>{try{return await a.mutateAsync({email:x,password:y}),!0}catch(b){return console.error("Login error:",b),!1}},f=async()=>{try{await i.mutateAsync()}catch(x){console.error("Logout error:",x),l.setQueryData(Vs.session(),null)}},m=async()=>{await o.mutateAsync()},v=!c||n&&!r&&t===void 0,p=a.isPending||i.isPending,g={user:t||null,isAuthenticated:!!t&&c,isLoading:v||p,login:h,logout:f,refreshProfile:m};return s.jsx(_R.Provider,{value:g,children:e})}function To(){const e=j.useContext(_R);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}function qP(){const{user:e,logout:t}=To(),{toast:n}=at(),r=xd(),[a,i]=j.useState(!1),o=async()=>{i(!0),await new Promise(d=>setTimeout(d,500)),t(),n({title:"Déconnexion réussie",description:"Vous avez été déconnecté avec succès."}),i(!1)};if(!e)return null;const l=d=>d?d.split(" ").map(h=>h.charAt(0)).join("").toUpperCase().slice(0,2):e.profile.username.charAt(0).toUpperCase(),c=d=>{switch(d){case"admin":return"Administrateur";case"assistant":return"Assistant";default:return"Utilisateur"}},u=d=>{switch(d){case"admin":return s.jsx(Gn,{className:"h-3 w-3"});case"assistant":return s.jsx(Vn,{className:"h-3 w-3"});default:return s.jsx(Vn,{className:"h-3 w-3"})}};return s.jsxs(bY,{children:[s.jsx(jY,{asChild:!0,children:s.jsx(L,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:s.jsx(Qn,{className:"h-8 w-8",children:s.jsx(Xn,{className:"bg-primary text-primary-foreground text-sm",children:l(e.profile.full_name)})})})}),s.jsxs(F4,{className:"w-56",align:"end",forceMount:!0,children:[s.jsx(B4,{className:"font-normal",children:s.jsxs("div",{className:"flex flex-col space-y-1",children:[s.jsx("p",{className:"text-sm font-medium leading-none",children:e.profile.full_name||e.profile.username}),s.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:e.email}),s.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[u(e.profile.role),s.jsx("span",{className:"text-xs text-muted-foreground",children:c(e.profile.role)})]})]})}),s.jsx(Zj,{}),s.jsxs(Jj,{className:"cursor-pointer",onClick:()=>r("/profile"),children:[s.jsx(Vn,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Profil"})]}),s.jsx(Zj,{}),s.jsxs(Jj,{className:"cursor-pointer text-red-600 focus:text-red-600",onClick:o,disabled:a,children:[s.jsx(xI,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:a?"Déconnexion...":"Se déconnecter"})]})]})]})}const CR=[{icon:gU,label:"Dashboard",path:"/dashboard"},{icon:Da,label:"Clients",path:"/clients"},{icon:pt,label:"Animaux",path:"/pets"},{icon:Ze,label:"RDV",path:"/appointments"},{icon:Xr,label:"Consultations",path:"/consultations"},{icon:uo,label:"Vaccinations",path:"/vaccinations"},{icon:bj,label:"Antiparasites",path:"/antiparasites"},{icon:HN,label:"Historiques",path:"/history"},{icon:wj,label:"Farm Mgmt",path:"/farm"}],PR=[{icon:wa,label:"Stock",path:"/stock"},{icon:pI,label:"Comptabilité",path:"/accounting"},{icon:hU,label:"Paramètres",path:"/settings"}],mJ=[...CR,...PR];function er(){const e=ko(),[t,n]=j.useState(!1);return s.jsx("nav",{className:"bg-card border-b shadow-card",children:s.jsxs("div",{className:"container mx-auto px-2 sm:px-4 py-2 sm:py-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-shrink-0",children:[s.jsxs(Bs,{to:"/dashboard",className:"flex items-center gap-1 sm:gap-2",children:[s.jsx(pt,{className:"h-6 w-6 sm:h-7 sm:w-7 text-primary"}),s.jsx("h1",{className:"text-lg sm:text-xl font-bold gradient-primary bg-clip-text text-transparent hidden sm:block",children:"VetPro CRM"}),s.jsx("h1",{className:"text-base sm:text-lg font-bold gradient-primary bg-clip-text text-transparent sm:hidden",children:"VetPro"})]}),s.jsx("div",{className:"hidden sm:block",children:s.jsx(fP,{})})]}),s.jsxs("div",{className:"hidden lg:flex items-center gap-1",children:[CR.map(r=>s.jsx(L,{variant:e.pathname===r.path?"default":"ghost",size:"sm",className:"gap-1 px-3 transition-all hover:medical-glow",asChild:!0,children:s.jsxs(Bs,{to:r.path,children:[s.jsx(r.icon,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden xl:inline",children:r.label})]})},r.path)),s.jsxs("div",{className:"relative group",children:[s.jsxs(L,{variant:"ghost",size:"sm",className:"gap-1 px-3 transition-all hover:medical-glow",children:[s.jsx(TC,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden xl:inline",children:"Plus"})]}),s.jsx("div",{className:"absolute right-0 top-full mt-1 w-40 bg-card border rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:s.jsx("div",{className:"py-1",children:PR.map(r=>s.jsxs(Bs,{to:r.path,className:`flex items-center gap-2 px-4 py-2 text-sm transition-colors hover:bg-muted ${e.pathname===r.path?"bg-primary text-primary-foreground":""}`,children:[s.jsx(r.icon,{className:"h-4 w-4"}),r.label]},r.path))})})]})]}),s.jsx("div",{className:"hidden lg:flex items-center gap-2",children:s.jsx(qP,{})}),s.jsxs("div",{className:"lg:hidden flex items-center gap-2",children:[s.jsx("div",{className:"sm:hidden",children:s.jsx(fP,{})}),s.jsx(qP,{}),s.jsx(L,{variant:"ghost",size:"sm",onClick:()=>n(!t),className:"gap-1 p-2",children:t?s.jsx(fm,{className:"h-4 w-4"}):s.jsx(TC,{className:"h-4 w-4"})})]})]}),t&&s.jsx("div",{className:"lg:hidden mt-2 pt-2 border-t",children:s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1",children:mJ.map(r=>s.jsx(L,{variant:e.pathname===r.path?"default":"ghost",size:"sm",className:"gap-2 justify-start text-xs sm:text-sm",asChild:!0,onClick:()=>n(!1),children:s.jsxs(Bs,{to:r.path,children:[s.jsx(r.icon,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{className:"truncate",children:r.label})]})},r.path))})})]})})}class pJ extends j.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){console.error("ErrorBoundary caught an error:",t,n),this.setState({error:t,errorInfo:n})}render(){var t,n;return this.state.hasError?s.jsx("div",{className:"min-h-screen bg-red-50 flex items-center justify-center p-8",children:s.jsxs("div",{className:"max-w-2xl bg-white p-8 rounded-lg shadow-lg border border-red-200",children:[s.jsx("h1",{className:"text-2xl font-bold text-red-800 mb-4",children:"🚨 Erreur dans l'application"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-red-700 mb-2",children:"Erreur :"}),s.jsx("pre",{className:"bg-red-100 p-4 rounded text-sm text-red-800 overflow-auto",children:(t=this.state.error)==null?void 0:t.toString()})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-red-700 mb-2",children:"Stack Trace :"}),s.jsx("pre",{className:"bg-gray-100 p-4 rounded text-sm text-gray-800 overflow-auto max-h-64",children:(n=this.state.errorInfo)==null?void 0:n.componentStack})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Recharger la page"}),s.jsx("button",{onClick:()=>window.history.back(),className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"Retour"})]})]})]})}):this.props.children}}const AR=j.createContext(void 0),UP=[{id:1,name:"Marie Dubois",firstName:"Marie",lastName:"Dubois",email:"marie.dubois@email.com",phone:"06 12 34 56 78",address:"123 Rue de la Paix",city:"Paris",postalCode:"75001",idNumber:"1234567890123",pets:[{id:1,name:"Bella",type:"Chien",breed:"Golden Retriever",gender:"female",birthDate:"2021-03-15",weight:"28 kg",color:"Doré",ownerId:1,owner:"Marie Dubois",status:"healthy",lastVisit:"2024-01-15",nextAppointment:"2024-01-25",microchip:"982000123456789",vaccinations:["Rage","DHPP","Lyme"]},{id:4,name:"Luna",type:"Chat",breed:"Siamois",gender:"female",birthDate:"2022-05-12",weight:"3.8 kg",color:"Crème et marron",ownerId:1,owner:"Marie Dubois",status:"healthy",lastVisit:"2024-01-08",nextAppointment:"2024-02-08",microchip:"982000111222333",vaccinations:["Rage","FVRCP","FeLV"]}],lastVisit:"2024-01-15",totalVisits:12},{id:2,name:"Jean Martin",firstName:"Jean",lastName:"Martin",email:"jean.martin@email.com",phone:"06 98 76 54 32",address:"45 Avenue des Roses",city:"Lyon",postalCode:"69000",idNumber:"9876543210987",pets:[{id:2,name:"Whiskers",type:"Chat",breed:"Persan",gender:"male",birthDate:"2019-08-22",weight:"4.5 kg",color:"Blanc",ownerId:2,owner:"Jean Martin",status:"treatment",lastVisit:"2024-01-10",nextAppointment:"2024-01-22",microchip:"982000987654321",vaccinations:["Rage","FVRCP"]}],lastVisit:"2024-01-10",totalVisits:8},{id:3,name:"Sophie Leroux",firstName:"Sophie",lastName:"Leroux",email:"sophie.leroux@email.com",phone:"06 45 67 89 12",address:"78 Boulevard Maritime",city:"Marseille",postalCode:"13000",idNumber:"4567891234567",pets:[{id:3,name:"Rex",type:"Chien",breed:"Berger Allemand",gender:"male",birthDate:"2017-11-10",weight:"32 kg",color:"Noir et feu",ownerId:3,owner:"Sophie Leroux",status:"healthy",lastVisit:"2024-01-18",nextAppointment:"2024-02-01",microchip:"982000555444333",vaccinations:["Rage","DHPP","Bordetella"]},{id:5,name:"Max",type:"Chien",breed:"Labrador",gender:"male",birthDate:"2020-09-03",weight:"30 kg",color:"Noir",ownerId:3,owner:"Sophie Leroux",status:"healthy",lastVisit:"2024-01-22",nextAppointment:"2024-02-22",microchip:"982000444555666",vaccinations:["Rage","DHPP","Lyme","Bordetella"]}],lastVisit:"2024-01-18",totalVisits:15}],Zd=[{id:1,name:"Bella",type:"Chien",breed:"Golden Retriever",birthDate:"2021-03-15",weight:"28 kg",color:"Doré",ownerId:1,owner:"Marie Dubois",status:"healthy",lastVisit:"2024-01-15",nextAppointment:"2024-01-25",microchip:"982000123456789",vaccinations:["Rage","DHPP","Lyme"]},{id:2,name:"Whiskers",type:"Chat",breed:"Persan",birthDate:"2019-08-22",weight:"4.5 kg",color:"Blanc",ownerId:2,owner:"Jean Martin",status:"treatment",lastVisit:"2024-01-10",nextAppointment:"2024-01-22",microchip:"982000987654321",vaccinations:["Rage","FVRCP"]},{id:3,name:"Rex",type:"Chien",breed:"Berger Allemand",birthDate:"2017-11-10",weight:"32 kg",color:"Noir et feu",ownerId:3,owner:"Sophie Leroux",status:"healthy",lastVisit:"2024-01-18",nextAppointment:"2024-02-01",microchip:"982000555444333",vaccinations:["Rage","DHPP","Bordetella"]}],dp=[{id:1,clientId:1,clientName:"Marie Dubois",petId:1,petName:"Bella",date:"2024-01-15",weight:"28.2 kg",temperature:"38.5",symptoms:"Contrôle annuel, bonne santé générale",diagnosis:"Aucun problème détecté",treatment:"Vaccination annuelle",medications:"Rappel vaccin DHPP",followUp:"Contrôle dans 1 an",cost:"85.00",notes:"Animal en excellente santé",photos:[],createdAt:"2024-01-15T10:30:00Z"},{id:2,clientId:2,clientName:"Jean Martin",petId:2,petName:"Whiskers",date:"2024-01-10",weight:"4.3 kg",temperature:"39.2",symptoms:"Perte d'appétit, léthargie",diagnosis:"Infection urinaire",treatment:"Antibiotiques",medications:"Amoxicilline 50mg 2x/jour pendant 7 jours",followUp:"Contrôle dans 1 semaine",cost:"120.00",notes:"Surveiller la consommation d'eau",photos:[],createdAt:"2024-01-10T14:15:00Z"}],hp=[{id:1,clientId:1,clientName:"Marie Dubois",petId:1,petName:"Bella",date:"2024-01-25",time:"14:30",type:"vaccination",duration:30,reason:"Vaccination annuelle",notes:"Rappel vaccinal complet",status:"scheduled",reminderSent:!1,createdAt:"2024-01-20T09:00:00Z"},{id:2,clientId:2,clientName:"Jean Martin",petId:2,petName:"Whiskers",date:"2024-01-22",time:"10:00",type:"controle",duration:45,reason:"Contrôle post-traitement",notes:"Vérifier l'amélioration de l'appétit",status:"confirmed",reminderSent:!0,createdAt:"2024-01-18T16:30:00Z"},{id:3,clientId:3,clientName:"Sophie Leroux",petId:3,petName:"Rex",date:"2024-01-26",time:"16:00",type:"sterilisation",duration:60,reason:"Stérilisation",notes:"Jeûne 12h avant l'intervention",status:"scheduled",reminderSent:!1,createdAt:"2024-01-19T11:15:00Z"}],fp=[{id:1,consultationId:1,clientId:1,clientName:"Marie Dubois",petId:1,petName:"Bella",date:"2024-01-15",prescribedBy:"Dr. Martin",diagnosis:"Trachéobronchite",medications:[{id:1,name:"Doxycycline",dosage:"100mg",frequency:"2x/jour",duration:"7 jours",instructions:"Donner avec de la nourriture",quantity:14,unit:"comprimés",refills:0,cost:25.5},{id:2,name:"Sirop antitussif",dosage:"5ml",frequency:"3x/jour",duration:"5 jours",instructions:"Donner 30 minutes avant les repas",quantity:75,unit:"ml",refills:1,cost:15}],instructions:"Surveiller la température et l'appétit. Retour en cas d'aggravation.",duration:"7 jours",followUpDate:"2024-01-22",status:"active",notes:"Patient calme, bon appétit maintenu",createdAt:"2024-01-15T10:30:00Z"},{id:2,consultationId:2,clientId:2,clientName:"Jean Martin",petId:2,petName:"Whiskers",date:"2024-01-10",prescribedBy:"Dr. Martin",diagnosis:"Infection urinaire",medications:[{id:3,name:"Amoxicilline",dosage:"50mg",frequency:"2x/jour",duration:"7 jours",instructions:"Donner avec de la nourriture",quantity:14,unit:"comprimés",refills:0,cost:18}],instructions:"Augmenter la consommation d'eau. Surveiller les urines.",duration:"7 jours",followUpDate:"2024-01-17",status:"completed",notes:"Amélioration progressive",createdAt:"2024-01-10T14:15:00Z"}],mp=[{id:1,name:"Ferme des Prairies",owner:"Pierre Durand",address:"123 Route de la Campagne, 45000 Orléans",coordinates:{latitude:47.9056,longitude:1.919},phone:"02 38 45 67 89",email:"p.durand@fermedespra.fr",types:["Bovin laitier"],totalAnimals:85,animalDetails:[{category:"Bovins laitiers",maleCount:3,femaleCount:82,breeds:["Holstein","Prim'Holstein"],ageGroups:["Veaux (0-6 mois)","Génisses (6-24 mois)","Vaches adultes"]}],lastVisit:"2024-01-15",status:"active",veterinarian:"Dr. Dupont",notes:"Exploitation bien gérée, animaux en bonne santé",registrationNumber:"FR45123456789",surfaceArea:45.5,buildingDetails:"Étable moderne 850m², stabulation libre, salle de traite 2x8",equipmentDetails:"Tracteur John Deere, Tank à lait 2000L, Système de ventilation automatique",certifications:["Agriculture Biologique","Haute Valeur Environnementale"],insuranceDetails:"Groupama - Police n°123456789",emergencyContact:{name:"Marie Durand",phone:"06 12 34 56 78",relation:"Épouse"},photos:[{id:"photo_1",url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgdmlld0JveD0iMCAwIDQwMCA0MDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iNDAwIiBmaWxsPSIjRjNGNEY2Ii8+Cjx0ZXh0IHg9IjIwMCIgeT0iMjAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IiM2QjcyODAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5QaG90byBDaGVwdGVsPC90ZXh0Pgo8L3N2Zz4K",description:"Vaches Holstein dans le pré",category:"cheptel",uploadedAt:"2024-01-15T10:00:00Z"},{id:"photo_2",url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgdmlld0JveD0iMCAwIDQwMCA0MDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iNDAwIiBmaWxsPSIjRjNGNEY2Ii8+Cjx0ZXh0IHg9IjIwMCIgeT0iMjAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IiM2QjcyODAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5QaG90byBCw6J0aW1lbnRzPC90ZXh0Pgo8L3N2Zz4K",description:"Étable moderne avec salle de traite",category:"batiments",uploadedAt:"2024-01-15T10:00:00Z"}],createdAt:"2024-01-01T09:00:00Z"},{id:2,name:"Élevage Martin",owner:"Jean-Luc Martin",address:"456 Chemin des Champs, 41000 Blois",coordinates:{latitude:47.5886,longitude:1.334},phone:"02 54 78 90 12",email:"jl.martin@elevagemartin.fr",types:["Porcin"],totalAnimals:150,animalDetails:[{category:"Porcs",maleCount:75,femaleCount:75,breeds:["Large White","Landrace"],ageGroups:["Porcelets (0-2 mois)","Porcs en croissance (2-6 mois)"]}],lastVisit:"2024-01-10",status:"active",veterinarian:"Dr. Martin",notes:"Nouveau système de ventilation installé",registrationNumber:"FR41987654321",surfaceArea:28.3,buildingDetails:"Porcherie 600m², nurserie 200m², système de ventilation automatique",equipmentDetails:"Système d'alimentation automatique, Pompe à lisier, Générateur de secours",certifications:["Label Rouge"],insuranceDetails:"Crédit Agricole Assurances - Police n°987654321",emergencyContact:{name:"Sophie Martin",phone:"06 98 76 54 32",relation:"Sœur"},createdAt:"2024-01-02T10:30:00Z"},{id:3,name:"Ferme Avicole Leroux",owner:"Marie Leroux",address:"789 Avenue des Volailles, 37000 Tours",coordinates:{latitude:47.3936,longitude:.6848},phone:"02 47 12 34 56",email:"m.leroux@avicole-leroux.fr",types:["Avicole"],totalAnimals:2500,animalDetails:[{category:"Poules pondeuses",maleCount:50,femaleCount:2e3,breeds:["ISA Brown","Lohmann Brown"],ageGroups:["Poussins (0-18 semaines)","Pondeuses (18+ semaines)"]},{category:"Poulets de chair",maleCount:225,femaleCount:225,breeds:["Cobb 500","Ross 308"],ageGroups:["0-6 semaines"]}],lastVisit:"2024-01-18",status:"attention",veterinarian:"Dr. Dupont",notes:"Problème de ventilation détecté, surveillance renforcée",registrationNumber:"FR37555666777",surfaceArea:12.8,buildingDetails:"Poulailler automatisé 1200m², aire de parcours 5000m²",equipmentDetails:"Système de ramassage automatique des œufs, Ventilation programmable, Éclairage LED",certifications:["Œufs de France","Bien-être animal"],insuranceDetails:"MMA - Police n°555666777",emergencyContact:{name:"Paul Leroux",phone:"06 47 12 34 56",relation:"Fils"},createdAt:"2024-01-03T14:15:00Z"},{id:4,name:"Ferme Équine du Val",owner:"Sophie Moreau",address:"12 Chemin des Écuries, 78000 Versailles",coordinates:{latitude:48.8044,longitude:2.1232},phone:"01 39 50 12 34",email:"s.moreau@fermeequine.fr",types:["Équin"],totalAnimals:25,animalDetails:[{category:"Chevaux",maleCount:8,femaleCount:17,breeds:["Pur-sang","Selle français","Arabe"],ageGroups:["Poulains (0-3 ans)","Jeunes chevaux (3-7 ans)","Chevaux adultes (7+ ans)"]}],lastVisit:"2024-01-20",status:"active",veterinarian:"Dr. Martin",notes:"Écurie de prestige, chevaux de compétition",registrationNumber:"FR78123456789",surfaceArea:15.2,buildingDetails:"Écuries 800m², manège couvert 1200m², carrière extérieure 2000m²",equipmentDetails:"Tracteur, Système d'arrosage automatique, Éclairage LED, Système de sécurité",certifications:["Bien-être animal","Équitation de tradition française"],insuranceDetails:"Allianz - Police n°781234567",emergencyContact:{name:"Marc Moreau",phone:"06 12 34 56 78",relation:"Époux"},createdAt:"2024-01-04T08:30:00Z"},{id:5,name:"Rucher des Fleurs",owner:"Jean Dupuis",address:"45 Route des Champs, 13000 Marseille",coordinates:{latitude:43.2965,longitude:5.3698},phone:"04 91 23 45 67",email:"j.dupuis@rucherdesfleurs.fr",types:["Apiculture"],totalAnimals:120,animalDetails:[{category:"Abeilles",maleCount:0,femaleCount:120,breeds:["Abeille noire","Buckfast"],ageGroups:["Reines (1-3 ans)","Ouvrières (6 semaines)","Faux-bourdons (3 mois)"]}],lastVisit:"2024-01-12",status:"active",veterinarian:"Dr. Dupont",notes:"Production de miel de qualité, apiculture biologique",registrationNumber:"FR13123456789",surfaceArea:8.5,buildingDetails:"Miellerie 200m², entrepôt 150m², zone de conditionnement 100m²",equipmentDetails:"Extracteur de miel, Centrifugeuse, Filtres, Matériel de conditionnement",certifications:["Agriculture Biologique","Miel de France"],insuranceDetails:"MAIF - Police n°131234567",emergencyContact:{name:"Marie Dupuis",phone:"06 91 23 45 67",relation:"Épouse"},createdAt:"2024-01-05T11:15:00Z"}],pp=[{id:1,date:"2024-01-20",farmId:1,farmName:"Ferme des Prairies",type:"vaccination",animals:"15 bovins",veterinarian:"Dr. Dupont",description:"Vaccination contre la fièvre aphteuse",status:"completed",followUp:"Contrôle dans 6 mois",cost:450,notes:"Intervention réussie, aucun effet secondaire",createdAt:"2024-01-20T08:00:00Z"},{id:2,date:"2024-01-18",farmId:3,farmName:"Ferme Avicole Leroux",type:"urgence",animals:"50 poules",veterinarian:"Dr. Dupont",description:"Traitement infection respiratoire",status:"ongoing",followUp:"Suivi hebdomadaire",cost:320,notes:"Traitement antibiotique en cours",createdAt:"2024-01-18T14:30:00Z"},{id:3,date:"2024-01-15",farmId:2,farmName:"Élevage Martin",type:"controle",animals:"Tous les porcins",veterinarian:"Dr. Martin",description:"Contrôle sanitaire trimestriel",status:"completed",followUp:"Prochain contrôle en avril",cost:280,notes:"Tous les paramètres dans les normes",createdAt:"2024-01-15T10:00:00Z"}],gp=[{id:1,petId:1,petName:"Bella",clientId:1,clientName:"Marie Dubois",vaccineName:"DHPP",vaccineType:"core",vaccinationCategory:"new",dateGiven:"2024-01-15",nextDueDate:"2025-01-15",batchNumber:"VAC2024-001",veterinarian:"Dr. Martin",notes:"Première vaccination annuelle",status:"completed",cost:"45.00",location:"left_shoulder",manufacturer:"Zoetis",expirationDate:"2025-12-31",createdAt:"2024-01-15T10:30:00Z",isInStock:!1,stockQuantity:0,stockDeducted:!1},{id:2,petId:1,petName:"Bella",clientId:1,clientName:"Marie Dubois",vaccineName:"Rage",vaccineType:"rabies",vaccinationCategory:"new",dateGiven:"2024-01-15",nextDueDate:"2027-01-15",batchNumber:"RAB2024-005",veterinarian:"Dr. Martin",notes:"Vaccination antirabique obligatoire",status:"completed",cost:"35.00",location:"right_shoulder",manufacturer:"Merial",expirationDate:"2026-08-15",createdAt:"2024-01-15T10:45:00Z",isInStock:!1,stockQuantity:0,stockDeducted:!1},{id:3,petId:2,petName:"Whiskers",clientId:2,clientName:"Jean Martin",vaccineName:"FVRCP",vaccineType:"core",vaccinationCategory:"new",dateGiven:"2023-08-22",nextDueDate:"2024-08-22",batchNumber:"CAT2023-012",veterinarian:"Dr. Dupont",notes:"Vaccination de base pour chat",status:"overdue",cost:"40.00",location:"subcutaneous",manufacturer:"Virbac",expirationDate:"2025-06-30",createdAt:"2023-08-22T14:20:00Z",isInStock:!1,stockQuantity:0,stockDeducted:!1},{id:4,petId:3,petName:"Rex",clientId:3,clientName:"Sophie Leroux",vaccineName:"Bordetella",vaccineType:"non-core",vaccinationCategory:"new",dateGiven:"2024-01-18",nextDueDate:"2025-01-18",batchNumber:"BOR2024-008",veterinarian:"Dr. Martin",notes:"Vaccination contre la toux de chenil",status:"completed",cost:"30.00",location:"left_shoulder",manufacturer:"Zoetis",expirationDate:"2025-09-30",createdAt:"2024-01-18T16:15:00Z",isInStock:!1,stockQuantity:0,stockDeducted:!1},{id:5,petId:1,petName:"Bella",clientId:1,clientName:"Marie Dubois",vaccineName:"Lyme",vaccineType:"non-core",vaccinationCategory:"new",dateGiven:"2024-01-25",nextDueDate:"2024-04-25",batchNumber:"LYM2024-003",veterinarian:"Dr. Martin",notes:"Vaccination contre la maladie de Lyme",status:"scheduled",cost:"50.00",location:"left_hip",manufacturer:"Boehringer Ingelheim",expirationDate:"2025-11-20",createdAt:"2024-01-25T09:00:00Z",isInStock:!1,stockQuantity:0,stockDeducted:!1}],vc=[{id:1,petId:1,petName:"Bella",clientId:1,clientName:"Marie Dubois",productName:"Frontline Combo Spot-On",productType:"flea_tick",targetParasites:"Puces, Tiques, Poux broyeurs",dateGiven:"2024-01-10",nextDueDate:"2024-02-10",dosage:"1 pipette",administrationRoute:"topical",veterinarian:"Dr. Martin",notes:"Application entre les omoplates",batchNumber:"FRC2024-001",manufacturer:"Boehringer Ingelheim",weight:"28kg",status:"completed",cost:"25.50",sideEffects:"",createdAt:new Date().toISOString(),isInStock:!1,stockQuantity:0,stockDeducted:!1},{id:2,petId:2,petName:"Whiskers",clientId:2,clientName:"Jean Martin",productName:"Milbemax Chat",productType:"worming",targetParasites:"Vers ronds, Vers plats, Vers du cœur",dateGiven:"2024-01-05",nextDueDate:"2024-04-05",dosage:"1/2 comprimé",administrationRoute:"oral",veterinarian:"Dr. Dupont",notes:"Donné avec la nourriture",batchNumber:"MLX2024-008",manufacturer:"Novartis",weight:"4.5kg",status:"completed",cost:"18.00",sideEffects:"",createdAt:new Date().toISOString(),isInStock:!1,stockQuantity:0,stockDeducted:!1}],eh=[{id:1,name:"Frontline Combo Spot-On",species:"Chien",productType:"flea_tick",targetParasites:"Puces, Tiques, Poux broyeurs",description:"Protection complète contre puces et tiques pendant 8 semaines",manufacturer:"Boehringer Ingelheim",intervals:[{offsetDays:0,label:"Application initiale"},{offsetDays:28,label:"Rappel mensuel"}],weightRange:"2-60kg",ageRequirement:"Dès 8 semaines",seasonalTreatment:!0,notes:"Éviter le bain 48h avant et après application",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:2,name:"NexGard Spectra",species:"Chien",productType:"combined",targetParasites:"Puces, Tiques, Vers du cœur, Vers ronds, Vers plats",description:"Protection combinée externe et interne mensuelle",manufacturer:"Boehringer Ingelheim",intervals:[{offsetDays:0,label:"Première dose"},{offsetDays:30,label:"Dose mensuelle"}],weightRange:"2-60kg",ageRequirement:"Dès 8 semaines",seasonalTreatment:!1,notes:"Donner avec la nourriture pour une meilleure absorption",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:3,name:"Drontal Plus",species:"Chien",productType:"worming",targetParasites:"Vers ronds, Vers plats, Ankylostomes, Trichures",description:"Vermifugation large spectre",manufacturer:"Bayer",intervals:[{offsetDays:0,label:"Première vermifugation"},{offsetDays:90,label:"Rappel trimestriel"},{offsetDays:180,label:"Rappel semestriel"}],weightRange:"2-35kg",ageRequirement:"Dès 2 semaines",seasonalTreatment:!1,notes:"Administrer le matin à jeun, répéter selon exposition aux parasites",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:4,name:"Advocate Spot-On",species:"Chien",productType:"combined",targetParasites:"Puces, Vers du cœur, Vers ronds, Ankylostomes, Gale sarcoptique",description:"Protection topique combinée mensuelle",manufacturer:"Bayer",intervals:[{offsetDays:0,label:"Application initiale"},{offsetDays:30,label:"Application mensuelle"}],weightRange:"1-40kg",ageRequirement:"Dès 7 semaines",seasonalTreatment:!1,notes:"Appliquer sur peau sèche entre les omoplates",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:5,name:"Frontline Combo Chat",species:"Chat",productType:"flea_tick",targetParasites:"Puces, Tiques",description:"Protection mensuelle contre puces et tiques chez le chat",manufacturer:"Boehringer Ingelheim",intervals:[{offsetDays:0,label:"Application initiale"},{offsetDays:28,label:"Rappel mensuel"}],weightRange:"1-8kg",ageRequirement:"Dès 8 semaines",seasonalTreatment:!0,notes:"Attention aux réactions cutanées, surveiller 24h après application",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:6,name:"Stronghold Plus",species:"Chat",productType:"combined",targetParasites:"Puces, Vers du cœur, Vers ronds, Ankylostomes, Gale des oreilles",description:"Protection combinée mensuelle pour chats",manufacturer:"Zoetis",intervals:[{offsetDays:0,label:"Application initiale"},{offsetDays:30,label:"Application mensuelle"}],weightRange:"0.5-8kg",ageRequirement:"Dès 6 semaines",seasonalTreatment:!1,notes:"Efficace contre gale des oreilles en 1 application",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:7,name:"Milbemax Chat",species:"Chat",productType:"worming",targetParasites:"Vers ronds, Vers plats, Vers du cœur",description:"Vermifugation complète pour chats",manufacturer:"Novartis",intervals:[{offsetDays:0,label:"Première vermifugation"},{offsetDays:90,label:"Rappel trimestriel"}],weightRange:"0.5-8kg",ageRequirement:"Dès 6 semaines",seasonalTreatment:!1,notes:"Comprimés appétents, peut être donné avec ou sans nourriture",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:8,name:"Eprinex Pour-On",species:"Bovins",productType:"external",targetParasites:"Mouches, Poux, Gales, Vers gastro-intestinaux",description:"Traitement pour-on systémique pour bovins",manufacturer:"Boehringer Ingelheim",intervals:[{offsetDays:0,label:"Application unique"},{offsetDays:84,label:"Rappel saisonnier"}],weightRange:"50-800kg",ageRequirement:"Tous âges",seasonalTreatment:!0,notes:"Temps d'attente viande: 15 jours, lait: 0 jour",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:9,name:"Panacur 100",species:"Bovins",productType:"worming",targetParasites:"Vers gastro-intestinaux, Vers pulmonaires",description:"Vermifuge oral pour bovins",manufacturer:"MSD",intervals:[{offsetDays:0,label:"Traitement initial"},{offsetDays:120,label:"Rappel saisonnier"}],weightRange:"50-800kg",ageRequirement:"Dès 2 semaines",seasonalTreatment:!1,notes:"Temps d'attente viande: 14 jours, lait: 3 jours",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:10,name:"Cydectin 0.1%",species:"Ovins",productType:"combined",targetParasites:"Vers gastro-intestinaux, Vers pulmonaires, Gales",description:"Traitement injectable pour ovins et caprins",manufacturer:"Boehringer Ingelheim",intervals:[{offsetDays:0,label:"Injection unique"},{offsetDays:90,label:"Rappel saisonnier"}],weightRange:"10-100kg",ageRequirement:"Dès 4 semaines",seasonalTreatment:!0,notes:"Temps d'attente viande: 35 jours",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}],WP=[{id:1,name:"Amoxicilline 500mg",category:"medication",subcategory:"Antibiotique",description:"Antibiotique à large spectre",manufacturer:"Boehringer Ingelheim",batchNumber:"AMX2024001",dosage:"500mg",unit:"box",currentStock:15,minimumStock:5,maximumStock:50,purchasePrice:20,sellingPrice:25.5,totalValue:300,expirationDate:"2025-12-31",supplier:"Pharmacie Vétérinaire Centrale",location:"Armoire A - Étagère 1",notes:"Stockage à température ambiante",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-15",isActive:!0,barcode:"1234567890123",sku:"MED-AMX-500"},{id:2,name:"Frontline Combo Spot-On",category:"medication",subcategory:"Antiparasitaire",description:"Traitement contre puces et tiques",manufacturer:"Boehringer Ingelheim",batchNumber:"FRC2024001",dosage:"1 pipette",unit:"pack",currentStock:8,minimumStock:10,maximumStock:100,purchasePrice:15,sellingPrice:18.75,totalValue:120,expirationDate:"2026-06-30",supplier:"VetoSupply Maroc",location:"Armoire B - Étagère 2",notes:"Pour chiens 20-40kg",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-10",isActive:!0,barcode:"2345678901234",sku:"ANT-FRONT-20-40"},{id:3,name:"DHPP Canine",category:"vaccine",subcategory:"Vaccin Core",description:"Vaccin contre Distemper, Hépatite, Parvovirus, Parainfluenza",manufacturer:"Merial",batchNumber:"DHPP2024001",dosage:"1 dose",unit:"vial",currentStock:25,minimumStock:10,maximumStock:100,purchasePrice:9.5,sellingPrice:12,totalValue:237.5,expirationDate:"2025-08-15",supplier:"Vaccins Vétérinaires SA",location:"Réfrigérateur - Étagère 1",notes:"Conservation 2-8°C",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-20",isActive:!0,barcode:"3456789012345",sku:"VAC-DHPP-001"},{id:4,name:"Rage Canine",category:"vaccine",subcategory:"Vaccin Obligatoire",description:"Vaccin antirabique obligatoire",manufacturer:"Merial",batchNumber:"RAB2024001",dosage:"1 dose",unit:"vial",currentStock:12,minimumStock:5,maximumStock:50,purchasePrice:12,sellingPrice:15,totalValue:144,expirationDate:"2025-10-20",supplier:"Vaccins Vétérinaires SA",location:"Réfrigérateur - Étagère 2",notes:"Conservation 2-8°C - Obligatoire",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-18",isActive:!0,barcode:"4567890123456",sku:"VAC-RAB-001"},{id:5,name:"Seringues 5ml",category:"consumable",subcategory:"Matériel d'injection",description:"Seringues stériles 5ml avec aiguilles",manufacturer:"BD Medical",batchNumber:"SYR2024001",dosage:"5ml",unit:"box",currentStock:50,minimumStock:20,maximumStock:200,purchasePrice:.35,sellingPrice:.45,totalValue:17.5,expirationDate:"2027-03-15",supplier:"Matériel Médical Pro",location:"Armoire C - Étagère 1",notes:"Stériles, usage unique",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-12",isActive:!0,barcode:"5678901234567",sku:"CON-SYR-5ML"},{id:6,name:"Masques chirurgicaux",category:"consumable",subcategory:"Protection",description:"Masques chirurgicaux jetables",manufacturer:"3M",batchNumber:"MSK2024001",dosage:"1 unité",unit:"box",currentStock:200,minimumStock:50,maximumStock:500,purchasePrice:.12,sellingPrice:.15,totalValue:24,expirationDate:"2026-12-31",supplier:"Protection Médicale",location:"Armoire D - Étagère 1",notes:"Type IIR, boîte de 50",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-08",isActive:!0,barcode:"6789012345678",sku:"CON-MSK-50"},{id:7,name:"Gants nitrile",category:"consumable",subcategory:"Protection",description:"Gants nitrile non poudrés",manufacturer:"Ansell",batchNumber:"GNT2024001",dosage:"1 paire",unit:"box",currentStock:30,minimumStock:10,maximumStock:100,purchasePrice:.2,sellingPrice:.25,totalValue:6,expirationDate:"2026-08-20",supplier:"Protection Médicale",location:"Armoire D - Étagère 2",notes:"Taille M, boîte de 100",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-05",isActive:!0,barcode:"7890123456789",sku:"CON-GNT-M-100"},{id:8,name:"Thermomètre digital",category:"equipment",subcategory:"Diagnostic",description:"Thermomètre digital vétérinaire",manufacturer:"Gima",batchNumber:"THM2024001",dosage:"1 unité",unit:"unit",currentStock:3,minimumStock:2,maximumStock:10,purchasePrice:35,sellingPrice:45,totalValue:105,expirationDate:void 0,supplier:"Équipement Vétérinaire",location:"Bureau - Tiroir 1",notes:"Résistant à l'eau, écran LCD",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-03",isActive:!0,barcode:"8901234567890",sku:"EQP-THM-DIG"},{id:9,name:"Vitamines B Complex",category:"supplement",subcategory:"Vitamines",description:"Complexe vitaminique B pour animaux",manufacturer:"Virbac",batchNumber:"VIT2024001",dosage:"1ml",unit:"bottle",currentStock:5,minimumStock:3,maximumStock:20,purchasePrice:6.5,sellingPrice:8.5,totalValue:32.5,expirationDate:"2025-11-30",supplier:"Suppléments Vétérinaires",location:"Armoire A - Étagère 3",notes:"Flacon 50ml",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-14",isActive:!0,barcode:"9012345678901",sku:"SUP-VIT-B-50"}],vp=[{id:1,name:"DAPP (DHPP)",species:"Chien",vaccineType:"core",description:"Distemper, Adénovirus, Parvovirus, Parainfluenza - Vaccination essentielle",manufacturer:"Zoetis",intervals:[{offsetDays:0,label:"J0 (première injection)"},{offsetDays:21,label:"21 jours (2e injection)"},{offsetDays:42,label:"42 jours (3e injection)"},{offsetDays:365,label:"1 an (rappel)"}],ageRequirement:"6-8 semaines (renforcer jusqu'à 16 semaines)",notes:"Protocole d'initiation à 6-8-12-16 semaines puis rappel à 1 an, puis triennal",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"},{id:2,name:"Rage (Rabies)",species:"Chien",vaccineType:"rabies",description:"Vaccination antirabique obligatoire selon la législation locale",manufacturer:"Merial",intervals:[{offsetDays:0,label:"À l'âge de 12 semaines minimum"},{offsetDays:365,label:"1 an (rappel)"}],ageRequirement:"12 semaines minimum",notes:"Rappel annuel ou biennal selon réglementation",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"},{id:3,name:"Bordetella bronchiseptica",species:"Chien",vaccineType:"non-core",description:"Protection contre la toux de chenil",manufacturer:"Zoetis",intervals:[{offsetDays:8,label:"8 semaines"}],ageRequirement:"8 semaines",notes:"Vaccination intracellulaire recommandée pour chiens en collectivité",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"},{id:4,name:"Leptospirose",species:"Chien",vaccineType:"non-core",description:"Protection contre les sérovars pathogènes de Leptospira",manufacturer:"Virbac",intervals:[{offsetDays:12,label:"12 semaines"}],ageRequirement:"12 semaines",notes:"Double sérovariels recommandé",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"},{id:5,name:"RCP (FVRCP)",species:"Chat",vaccineType:"core",description:"Calicivirose, Panleucopénie, Rhinotrachéite virale féline",manufacturer:"Virbac",intervals:[{offsetDays:0,label:"6 semaines"},{offsetDays:21,label:"12 semaines"},{offsetDays:28,label:"1 an"}],ageRequirement:"6-8-12 semaines",notes:"Renforcement à 1 an puis rappel triennal ou annuel selon protocole",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"},{id:6,name:"Rage (Rabies)",species:"Chat",vaccineType:"rabies",description:"Vaccination antirabique selon réglementation voyage",manufacturer:"Merial",intervals:[{offsetDays:365,label:"1 an"},{offsetDays:730,label:"2 ans"}],ageRequirement:"12 semaines",notes:"Rappel annuel ou biennal selon réglementation",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"},{id:7,name:"Distemper furet (Maladie de Carré)",species:"Furet",vaccineType:"core",description:"Protection contre le morbillivirus (Carré)",manufacturer:"Merial",intervals:[{offsetDays:6,label:"6 semaines"},{offsetDays:12,label:"8 semaines"}],ageRequirement:"6-8 semaines",notes:"Protocole similaire à celui des chiens",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"},{id:8,name:"Myxomatose",species:"Lapin",vaccineType:"core",description:"Protection contre la myxomatose",manufacturer:"Virbac",intervals:[{offsetDays:180,label:"180 jours"}],ageRequirement:"5-6 semaines",notes:"Vaccination semestrielle",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"},{id:9,name:"VHD (Maladie hémorragique virale)",species:"Lapin",vaccineType:"core",description:"Protection contre VHD de type 1 et 2",manufacturer:"Virbac",intervals:[{offsetDays:6,label:"6 semaines"}],ageRequirement:"6 semaines",notes:"Rappel annuel",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"}];function IS({children:e}){const t=()=>{try{const R=localStorage.getItem("vetpro-clients"),Y=localStorage.getItem("vetpro-pets"),ee=localStorage.getItem("vetpro-consultations"),Ce=localStorage.getItem("vetpro-appointments"),Te=localStorage.getItem("vetpro-prescriptions"),we=localStorage.getItem("vetpro-farms"),Ie=localStorage.getItem("vetpro-farmInterventions"),Jt=localStorage.getItem("vetpro-vaccinations"),Mt=localStorage.getItem("vetpro-vaccinationProtocols"),ze=localStorage.getItem("vetpro-antiparasitics"),an=localStorage.getItem("vetpro-antiparasiticProtocols"),Cr=localStorage.getItem("vetpro-stockItems"),Ni=localStorage.getItem("vetpro-stockAlerts"),Si=localStorage.getItem("vetpro-stockMovements"),Dm=localStorage.getItem("vetpro-accountingEntries");if(R&&Y){const vB=JSON.parse(R),c2=JSON.parse(Y),xB=ee?JSON.parse(ee):dp,yB=Ce?JSON.parse(Ce):hp,bB=Te?JSON.parse(Te):fp,jB=we?JSON.parse(we):mp,wB=Ie?JSON.parse(Ie):pp,NB=Jt?JSON.parse(Jt):gp,SB=Mt?JSON.parse(Mt):vp,_B=ze?JSON.parse(ze):vc,CB=an?JSON.parse(an):eh,PB=Cr?JSON.parse(Cr):WP,AB=Ni?JSON.parse(Ni):[],kB=Si?JSON.parse(Si):[],EB=Dm?JSON.parse(Dm):[];return{clients:vB.map(u2=>({...u2,pets:c2.filter(TB=>TB.ownerId===u2.id)})),pets:c2,consultations:xB,appointments:yB,prescriptions:bB,farms:jB,farmInterventions:wB,vaccinations:NB,vaccinationProtocols:SB,antiparasitics:_B,antiparasiticProtocols:CB,stockItems:PB,stockAlerts:AB,stockMovements:kB,accountingEntries:EB}}}catch(R){console.error("Erreur lors du chargement des données:",R)}return{clients:UP.map(R=>({...R,pets:Zd.filter(Y=>Y.ownerId===R.id)})),pets:Zd,consultations:dp,appointments:hp,prescriptions:fp,farms:mp,farmInterventions:pp,vaccinations:gp,vaccinationProtocols:vp,antiparasitics:vc,antiparasiticProtocols:eh,stockItems:WP,stockAlerts:[],stockMovements:[],accountingEntries:[]}},n=(F,R,Y,ee=d,Ce=f,Te=v,we=g,Ie=y,Jt=N,Mt=S,ze=C,an=A,Cr=E,Ni=I,Si=V)=>{try{localStorage.setItem("vetpro-clients",JSON.stringify(F)),localStorage.setItem("vetpro-pets",JSON.stringify(R)),localStorage.setItem("vetpro-consultations",JSON.stringify(Y)),localStorage.setItem("vetpro-appointments",JSON.stringify(ee)),localStorage.setItem("vetpro-prescriptions",JSON.stringify(Ce)),localStorage.setItem("vetpro-farms",JSON.stringify(Te)),localStorage.setItem("vetpro-farmInterventions",JSON.stringify(we)),localStorage.setItem("vetpro-vaccinations",JSON.stringify(Ie)),localStorage.setItem("vetpro-vaccinationProtocols",JSON.stringify(Jt)),localStorage.setItem("vetpro-antiparasitics",JSON.stringify(Mt)),localStorage.setItem("vetpro-antiparasiticProtocols",JSON.stringify(ze)),localStorage.setItem("vetpro-stockItems",JSON.stringify(an)),localStorage.setItem("vetpro-stockAlerts",JSON.stringify(Cr)),localStorage.setItem("vetpro-stockMovements",JSON.stringify(Ni)),localStorage.setItem("vetpro-accountingEntries",JSON.stringify(Si))}catch(Dm){console.error("Erreur lors de la sauvegarde des données:",Dm)}},r=t(),[a,i]=j.useState(r.clients),[o,l]=j.useState(r.pets),[c,u]=j.useState(r.consultations),[d,h]=j.useState(r.appointments),[f,m]=j.useState(r.prescriptions),[v,p]=j.useState(r.farms),[g,x]=j.useState(r.farmInterventions),[y,b]=j.useState(r.vaccinations),[N,w]=j.useState(r.vaccinationProtocols),[S,_]=j.useState(r.antiparasitics),[C,P]=j.useState(r.antiparasiticProtocols),[A,O]=j.useState(r.stockItems||[]),[E,z]=j.useState(r.stockAlerts||[]),[I,W]=j.useState(r.stockMovements||[]),[V,H]=j.useState(r.accountingEntries||[]);j.useEffect(()=>{localStorage.getItem("vetpro-antiparasiticProtocols")||localStorage.setItem("vetpro-antiparasiticProtocols",JSON.stringify(eh)),localStorage.getItem("vetpro-antiparasitics")||(localStorage.setItem("vetpro-antiparasitics",JSON.stringify(vc)),_(vc))},[]),j.useEffect(()=>{const F=new Date;new Date(F.getFullYear(),F.getMonth(),1),new Date(F.getFullYear(),F.getMonth()+1,0)},[]),j.useEffect(()=>{const F=new Date,R=new Date(F.getFullYear(),F.getMonth(),1),Y=new Date(F.getFullYear(),F.getMonth()+1,0);Hy(R.toISOString().split("T")[0],Y.toISOString().split("T")[0]),Ky(R.toISOString().split("T")[0],Y.toISOString().split("T")[0])},[c,y,S,f,I]),j.useEffect(()=>{},[S]),j.useEffect(()=>{a.length>0&&c.length>=0&&y.length>=0&&S.length>=0&&d.length>=0&&a.forEach(F=>{te(F.id)})},[a.length,c.length,y.length,S.length,d.length]);const k=F=>{const R={...F,name:`${F.firstName} ${F.lastName}`,id:Math.max(...a.map(ee=>ee.id),0)+1,pets:[],lastVisit:new Date().toISOString().split("T")[0],totalVisits:0},Y=[...a,R];i(Y),n(Y,o,c,d,f,v,g,y)},D=F=>{const R={...F,id:Math.max(...o.map(Ce=>Ce.id),0)+1,status:F.status||"healthy",lastVisit:new Date().toISOString().split("T")[0]},Y=[...o,R];l(Y);const ee=a.map(Ce=>Ce.id===F.ownerId?{...Ce,pets:[...Ce.pets,{id:R.id,name:R.name,type:R.type,breed:R.breed,birthDate:R.birthDate,weight:R.weight,color:R.color,microchip:R.microchip,medicalNotes:R.medicalNotes,photo:R.photo,ownerId:R.ownerId,owner:R.owner,status:R.status,lastVisit:R.lastVisit,nextAppointment:R.nextAppointment,vaccinations:R.vaccinations}]}:Ce);i(ee),n(ee,Y,c,d,f,v,g,y)},X=(F,R)=>{const Y=a.map(ee=>ee.id===F?{...ee,...R,name:R.firstName&&R.lastName?`${R.firstName} ${R.lastName}`:ee.name}:ee);i(Y),n(Y,o,c,d,f,v,g,y)},Q=(F,R)=>{({...o.find(Ce=>Ce.id===F),...R});const Y=o.map(Ce=>Ce.id===F?{...Ce,...R}:Ce);l(Y);const ee=a.map(Ce=>({...Ce,pets:Ce.pets.map(Te=>Te.id===F?{...Te,...R}:Te)}));i(ee),n(ee,Y,c)},te=F=>{const R=a.find(ze=>ze.id===F);if(!R)return;const Y=c.filter(ze=>ze.clientId===F),ee=y.filter(ze=>ze.clientId===F),Ce=S.filter(ze=>ze.clientId===F),Te=d.filter(ze=>ze.clientId===F&&ze.status==="completed"),we=Y.length+ee.length+Ce.length+Te.length,Ie=[...Y.map(ze=>({date:ze.date,type:"consultation"})),...ee.map(ze=>({date:ze.dateGiven,type:"vaccination"})),...Ce.map(ze=>({date:ze.dateGiven,type:"antiparasitic"})),...Te.map(ze=>({date:ze.date,type:"appointment"}))],Jt=Ie.length>0?Ie.reduce((ze,an)=>new Date(an.date)>new Date(ze.date)?an:ze).date:R.lastVisit,Mt=a.map(ze=>ze.id===F?{...ze,totalVisits:we,lastVisit:Jt}:ze);return i(Mt),{totalVisits:we,lastVisit:Jt}},ne=F=>{const R={...F,id:Math.max(...A.map(ee=>ee.id),0)+1,lastUpdated:new Date().toISOString(),totalValue:F.currentStock*F.purchasePrice},Y=[...A,R];return O(Y),n(a,o,c,d,f,v,g,y,N,S,C,Y,E,I),R},T=(F,R)=>{const Y=A.map(ee=>{if(ee.id===F){const Ce={...ee,...R};return(R.currentStock!==void 0||R.purchasePrice!==void 0)&&(Ce.totalValue=Ce.currentStock*Ce.purchasePrice),Ce.lastUpdated=new Date().toISOString(),Ce}return ee});return O(Y),n(a,o,c,d,f,v,g,y,N,S,C,Y,E,I),Y.find(ee=>ee.id===F)},ce=F=>{const R=A.filter(Y=>Y.id!==F);O(R),n(a,o,c,d,f,v,g,y,N,S,C,R,E,I)},me=F=>{const R={...F,id:Math.max(...I.map(ee=>ee.id),0)+1},Y=[...I,R];return W(Y),n(a,o,c,d,f,v,g,y,N,S,C,A,E,Y),R},le=()=>{const F=[],R=new Date().toISOString().split("T")[0],Y=new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0];return A.forEach(ee=>{ee.currentStock<=ee.minimumStock&&F.push({id:F.length+1,itemId:ee.id,itemName:ee.name,type:"low_stock",message:`Stock bas: ${ee.currentStock} ${ee.unit} restant(s)`,severity:ee.currentStock===0?"critical":"high",createdAt:new Date().toISOString(),isRead:!1}),ee.expirationDate&&(ee.expirationDate<R?F.push({id:F.length+1,itemId:ee.id,itemName:ee.name,type:"expired",message:`Expiré le ${ee.expirationDate}`,severity:"critical",createdAt:new Date().toISOString(),isRead:!1}):ee.expirationDate<=Y&&F.push({id:F.length+1,itemId:ee.id,itemName:ee.name,type:"expiring_soon",message:`Expire le ${ee.expirationDate}`,severity:"medium",createdAt:new Date().toISOString(),isRead:!1}))}),F},Z=F=>{const R={...F,id:Math.max(...c.map(Te=>Te.id),0)+1,createdAt:new Date().toISOString(),photos:F.photos||[]},Y=[...c,R];u(Y);const ee=o.map(Te=>Te.id===F.petId?{...Te,lastVisit:F.date}:Te);l(ee);const Ce=a.map(Te=>({...Te,pets:Te.pets.map(we=>we.id===F.petId?{...we,lastVisit:F.date}:we)}));i(Ce),te(F.clientId),n(Ce,ee,Y)},B=F=>{if(!o.find(Ce=>Ce.id===F))return;const Y=o.filter(Ce=>Ce.id!==F);l(Y);const ee=a.map(Ce=>({...Ce,pets:Ce.pets.filter(Te=>Te.id!==F)}));i(ee),n(ee,Y,c)},oe=()=>{localStorage.removeItem("vetpro-clients"),localStorage.removeItem("vetpro-pets"),localStorage.removeItem("vetpro-consultations"),localStorage.removeItem("vetpro-appointments"),localStorage.removeItem("vetpro-prescriptions"),localStorage.removeItem("vetpro-farms"),localStorage.removeItem("vetpro-farmInterventions"),localStorage.removeItem("vetpro-vaccinations"),localStorage.removeItem("vetpro-vaccinationProtocols"),localStorage.removeItem("vetpro-antiparasitics"),localStorage.removeItem("vetpro-antiparasiticProtocols");const F=UP.map(R=>({...R,pets:Zd.filter(Y=>Y.ownerId===R.id)}));i(F),l(Zd),u(dp),h(hp),m(fp),p(mp),x(pp),b(gp),w(vp),_(vc),P(eh),n(F,Zd,dp,hp,fp,mp,pp,gp,vp,vc,eh)},U=()=>{const F={clients:a,pets:o,consultations:c,appointments:d,prescriptions:f,farms:v,farmInterventions:g,vaccinations:y,vaccinationProtocols:N,antiparasitics:S,antiparasiticProtocols:C},R=new Blob([JSON.stringify(F,null,2)],{type:"application/json"}),Y=URL.createObjectURL(R),ee=document.createElement("a");ee.href=Y,ee.download=`vetpro-data-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(ee),ee.click(),document.body.removeChild(ee),URL.revokeObjectURL(Y)},K=F=>{const R=F.clients.map(Y=>({...Y,pets:F.pets.filter(ee=>ee.ownerId===Y.id)}));i(R),l(F.pets),u(F.consultations||[]),h(F.appointments||[]),m(F.prescriptions||[]),p(F.farms||[]),x(F.farmInterventions||[]),b(F.vaccinations||[]),w(F.vaccinationProtocols||[]),_(F.antiparasitics||[]),P(F.antiparasiticProtocols||[]),n(R,F.pets,F.consultations||[],F.appointments||[],F.prescriptions||[],F.farms||[],F.farmInterventions||[],F.vaccinations||[],F.vaccinationProtocols||[],F.antiparasitics||[],F.antiparasiticProtocols||[])},fe=(F,R)=>{const Y=c.map(ee=>ee.id===F?{...ee,...R}:ee);u(Y),n(a,o,Y)},Se=F=>{const R=c.filter(Y=>Y.id!==F);u(R),n(a,o,R)},$e=F=>{const R=A.find(Y=>Y.name.toLowerCase()===F.productName.toLowerCase()&&Y.category==="medication"&&Y.isActive);return R&&R.currentStock>=1?{...F,stockItemId:R.id,isInStock:!0,stockQuantity:R.currentStock,stockDeducted:!0}:R&&R.currentStock>0?{...F,stockItemId:R.id,isInStock:!0,stockQuantity:R.currentStock,stockDeducted:!1}:{...F,isInStock:!1,stockQuantity:0,stockDeducted:!1}},Ue=F=>{const R=$e(F);let Y=[...A];if(R.stockDeducted&&R.stockItemId){const Te=Y.findIndex(we=>we.id===R.stockItemId);if(Te!==-1){const we=Y[Te];Y[Te]={...we,currentStock:we.currentStock-1,lastUpdated:new Date().toISOString()},me({itemId:R.stockItemId,itemName:R.productName,type:"out",quantity:1,reason:"Traitement antiparasitaire",reference:`Antiparasitaire #${Math.max(0,...S.map(Ie=>Ie.id))+1}`,performedBy:R.veterinarian,date:new Date().toISOString(),notes:`Traitement antiparasitaire de ${R.petName} - ${R.productName}`})}}const ee={...R,id:Math.max(0,...S.map(Te=>Te.id))+1,createdAt:new Date().toISOString()},Ce=[...S,ee];_(Ce),O(Y),te(F.clientId),n(a,o,c,d,f,v,g,y,N,Ce,C,Y,E,I),localStorage.getItem("vetpro-antiparasitics")},ft=(F,R)=>{const Y=S.map(ee=>ee.id===F?{...ee,...R}:ee);_(Y),n(a,o,c,d,f,v,g,y,N,Y,C)},Tt=F=>{const R=S.filter(Y=>Y.id!==F);_(R),n(a,o,c,d,f,v,g,y,N,R,C)},Rt=F=>{const R={...F,id:Math.max(0,...C.map(ee=>ee.id))+1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},Y=[...C,R];P(Y),localStorage.setItem("vetpro-antiparasiticProtocols",JSON.stringify(Y))},ae=(F,R)=>{const Y=C.map(ee=>ee.id===F?{...ee,...R,updatedAt:new Date().toISOString()}:ee);P(Y),localStorage.setItem("vetpro-antiparasiticProtocols",JSON.stringify(Y))},Ne=F=>{const R=C.filter(Y=>Y.id!==F);P(R),localStorage.setItem("vetpro-antiparasiticProtocols",JSON.stringify(R))},Me=F=>S.find(R=>R.id===F),He=F=>S.filter(Y=>Y.petId===F),dr=F=>S.filter(R=>R.clientId===F),ct=()=>{const F=new Date().toISOString().split("T")[0];return S.filter(R=>R.nextDueDate&&R.nextDueDate<F&&R.status!=="completed")},Xt=(F=7)=>{const R=new Date,Y=new Date(R.getTime()+F*24*60*60*1e3);return S.filter(ee=>{if(!ee.nextDueDate)return!1;const Ce=new Date(ee.nextDueDate);return Ce>=R&&Ce<=Y})},ie=F=>S.filter(R=>R.status===F),Be=F=>C.find(R=>R.id===F),ea=F=>C.filter(R=>R.species===F&&R.isActive),_s=()=>C.filter(F=>F.isActive),Bd=F=>a.find(R=>R.id===F),ac=F=>o.find(R=>R.id===F),Vo=F=>c.find(R=>R.id===F),_r=F=>o.filter(R=>R.ownerId===F),ta=F=>c.filter(R=>R.petId===F),Cs=F=>c.filter(R=>R.clientId===F),na=F=>{const R={...F,id:Math.max(...d.map(ee=>ee.id),0)+1,createdAt:new Date().toISOString()},Y=[...d,R];h(Y),te(F.clientId),n(a,o,c,Y,f)},wi=(F,R)=>{const Y=d.map(ee=>ee.id===F?{...ee,...R}:ee);h(Y),n(a,o,c,Y,f)},ic=F=>{const R=d.filter(Y=>Y.id!==F);h(R),n(a,o,c,R,f)},Em=F=>d.find(R=>R.id===F),qy=F=>d.filter(R=>R.clientId===F),zd=F=>d.filter(R=>R.petId===F),ra=F=>d.filter(R=>R.date===F),Uy=()=>{const F=new Date().toISOString().split("T")[0];return d.filter(R=>R.date>=F&&R.status!=="cancelled"&&R.status!=="completed").sort((R,Y)=>new Date(R.date+"T"+R.time).getTime()-new Date(Y.date+"T"+Y.time).getTime())},Ke=()=>{const F=new Date().toISOString().split("T")[0];return d.filter(R=>R.date<F&&R.status==="scheduled").sort((R,Y)=>new Date(R.date+"T"+R.time).getTime()-new Date(Y.date+"T"+Y.time).getTime())},Nt=F=>F.map(R=>{const Y=A.find(ee=>ee.name.toLowerCase()===R.name.toLowerCase()&&ee.category==="medication"&&ee.isActive);return Y&&Y.currentStock>=R.quantity?{...R,stockItemId:Y.id,isInStock:!0,stockQuantity:Y.currentStock,stockDeducted:!0}:Y&&Y.currentStock>0?{...R,stockItemId:Y.id,isInStock:!0,stockQuantity:Y.currentStock,stockDeducted:!1}:{...R,isInStock:!1,stockQuantity:0,stockDeducted:!1}}),Lt=F=>{const R=Nt(F.medications);let Y=[...A];R.forEach(Te=>{if(Te.stockDeducted&&Te.stockItemId){const we=Y.findIndex(Ie=>Ie.id===Te.stockItemId);if(we!==-1){const Ie=Y[we];Y[we]={...Ie,currentStock:Ie.currentStock-Te.quantity,lastUpdated:new Date().toISOString()},me({itemId:Te.stockItemId,itemName:Te.name,type:"out",quantity:Te.quantity,reason:"Prescription médicale",reference:`Prescription #${Math.max(...f.map(Jt=>Jt.id),0)+1}`,performedBy:F.prescribedBy,date:new Date().toISOString(),notes:`Prescription pour ${F.petName} - ${F.diagnosis}`})}}});const ee={...F,medications:R,id:Math.max(...f.map(Te=>Te.id),0)+1,createdAt:new Date().toISOString()},Ce=[...f,ee];m(Ce),O(Y),n(a,o,c,d,Ce,v,g,y,N,S,C,Y,E,I,V)},zr=(F,R)=>{const Y=f.map(ee=>ee.id===F?{...ee,...R}:ee);m(Y),n(a,o,c,d,Y,v,g,y,N,S,C,A,E,I,V)},Vr=F=>{const R=f.filter(Y=>Y.id!==F);m(R),n(a,o,c,d,R,v,g,y,N,S,C,A,E,I,V)},sa=F=>f.find(R=>R.id===F),Ra=F=>f.filter(R=>R.petId===F),qr=F=>f.filter(R=>R.consultationId===F),aa=()=>f.filter(F=>F.status==="active").sort((F,R)=>new Date(R.date).getTime()-new Date(F.date).getTime()),F8=F=>{const R={...F,id:Math.max(...v.map(ee=>ee.id),0)+1,createdAt:new Date().toISOString()},Y=[...v,R];p(Y),n(a,o,c,d,f,Y,g)},B8=(F,R)=>{const Y=v.map(ee=>ee.id===F?{...ee,...R}:ee);p(Y),n(a,o,c,d,f,Y,g)},z8=F=>{const R=v.filter(Y=>Y.id!==F);p(R),n(a,o,c,d,f,R,g)},V8=F=>{const R={...F,id:Math.max(...g.map(ee=>ee.id),0)+1,createdAt:new Date().toISOString()},Y=[...g,R];x(Y),n(a,o,c,d,f,v,Y)},q8=(F,R)=>{const Y=g.map(ee=>ee.id===F?{...ee,...R}:ee);x(Y),n(a,o,c,d,f,v,Y)},U8=F=>{const R=g.filter(Y=>Y.id!==F);x(R),n(a,o,c,d,f,v,R)},W8=F=>v.find(R=>R.id===F),H8=F=>g.find(R=>R.id===F),K8=F=>g.filter(R=>R.farmId===F),G8=()=>{const F=new Date().toISOString().split("T")[0];return g.filter(R=>R.date>=F&&R.status!=="cancelled").sort((R,Y)=>new Date(R.date).getTime()-new Date(Y.date).getTime())},Y8=F=>v.filter(R=>R.status===F),Q8=F=>{const R=A.find(Y=>Y.name.toLowerCase()===F.vaccineName.toLowerCase()&&Y.category==="vaccine"&&Y.isActive);return R&&R.currentStock>=1?{...F,stockItemId:R.id,isInStock:!0,stockQuantity:R.currentStock,stockDeducted:!0}:R&&R.currentStock>0?{...F,stockItemId:R.id,isInStock:!0,stockQuantity:R.currentStock,stockDeducted:!1}:{...F,isInStock:!1,stockQuantity:0,stockDeducted:!1}},Wy=F=>{const R=Q8(F);let Y=[...A];if(R.stockDeducted&&R.stockItemId){const Ce=Y.findIndex(Te=>Te.id===R.stockItemId);if(Ce!==-1){const Te=Y[Ce];Y[Ce]={...Te,currentStock:Te.currentStock-1,lastUpdated:new Date().toISOString()},me({itemId:R.stockItemId,itemName:R.vaccineName,type:"out",quantity:1,reason:"Vaccination",reference:`Vaccination #${Math.max(...y.map(we=>we.id),0)+1}`,performedBy:R.veterinarian,date:new Date().toISOString(),notes:`Vaccination de ${R.petName} - ${R.vaccineName}`})}}const ee={...R,id:Math.max(...y.map(Ce=>Ce.id),0)+1,createdAt:new Date().toISOString()};return b(Ce=>{const Te=[...Ce,ee];return te(F.clientId),n(a,o,c,d,f,v,g,Te,N,S,C,Y,E,I),Te}),O(Y),ee.id},Tm=(F,R)=>{const Y=y.map(ee=>ee.id===F?{...ee,...R}:ee);b(Y),n(a,o,c,d,f,v,g,Y)},X8=F=>{const R=y.find(ee=>ee.id===F);if(!R)return;let Y=[...y];R.vaccinationCategory==="new"?(y.filter(ee=>ee.originalVaccinationId===F),Y=y.filter(ee=>ee.id!==F&&ee.originalVaccinationId!==F)):Y=y.filter(ee=>ee.id!==F),b(Y),n(a,o,c,d,f,v,g,Y)},Om=F=>y.find(R=>R.id===F),J8=F=>y.filter(R=>R.petId===F),Z8=F=>y.filter(R=>R.clientId===F),eB=()=>{const F=new Date().toISOString().split("T")[0];return y.filter(R=>R.nextDueDate<F&&R.status!=="completed").sort((R,Y)=>new Date(R.nextDueDate).getTime()-new Date(Y.nextDueDate).getTime())},tB=()=>{const F=new Date,R=new Date(F.getTime()+30*24*60*60*1e3).toISOString().split("T")[0],Y=F.toISOString().split("T")[0];return y.filter(ee=>ee.nextDueDate>=Y&&ee.nextDueDate<=R&&ee.status!=="completed").sort((ee,Ce)=>new Date(ee.nextDueDate).getTime()-new Date(Ce.nextDueDate).getTime())},nB=F=>y.filter(R=>R.status===F),rB=()=>{const F=new Date().toISOString().split("T")[0];let R=!1;const Y=y.map(ee=>ee.status==="completed"?ee:ee.nextDueDate<F&&ee.status!=="overdue"?(R=!0,{...ee,status:"overdue"}):ee.nextDueDate>=F&&ee.status!=="scheduled"?(R=!0,{...ee,status:"scheduled"}):ee);return R&&(b(Y),n(a,o,c,d,f,v,g,Y)),Y},sB=F=>{const R={...F,id:Math.max(...N.map(ee=>ee.id),0)+1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},Y=[...N,R];w(Y),n(a,o,c,d,f,v,g,y,Y)},aB=(F,R)=>{const Y=N.map(ee=>ee.id===F?{...ee,...R,updatedAt:new Date().toISOString()}:ee);w(Y),n(a,o,c,d,f,v,g,y,Y)},iB=F=>{const R=N.filter(Y=>Y.id!==F);w(R),n(a,o,c,d,f,v,g,y,R)},oB=F=>N.find(R=>R.id===F),lB=F=>N.filter(R=>R.species===F&&R.isActive),cB=()=>N.filter(F=>F.isActive),uB=(F,R,Y)=>{const ee=N.find(we=>we.name===F&&we.species===R&&we.isActive);if(!ee||!ee.intervals.length)return null;const Ce=ee.intervals[ee.intervals.length-1],Te=new Date(Y);return Te.setDate(Te.getDate()+Ce.offsetDays),Te.toISOString().split("T")[0]},dB=(F,R,Y)=>{var Mt;const ee=Om(F);if(!ee)return;const Ce={clientId:ee.clientId,clientName:ee.clientName,petId:ee.petId,petName:ee.petName,date:R,time:Y,type:"vaccination",duration:30,reason:`Rappel vaccinal - ${ee.vaccineName}`,notes:`Rappel pour ${ee.vaccineName} (vaccination originale ID: ${F})`,status:"scheduled",reminderSent:!1};na(Ce);const Te=Math.max(...d.map(ze=>ze.id),0)+1,we={petId:ee.petId,petName:ee.petName,clientId:ee.clientId,clientName:ee.clientName,vaccineName:ee.vaccineName,vaccineType:ee.vaccineType,vaccinationCategory:"reminder",dateGiven:R,nextDueDate:ee.nextDueDate,batchNumber:ee.batchNumber,veterinarian:ee.veterinarian,notes:`Rappel de ${ee.vaccineName} (original: ${F})`,status:"scheduled",cost:ee.cost,location:ee.location,manufacturer:ee.manufacturer,originalVaccinationId:F,reminderAppointmentId:Te,isReminder:!0};Wy(we);const Ie={id:Math.max(...((Mt=ee.reminderHistory)==null?void 0:Mt.map(ze=>ze.id))||[0],0)+1,vaccinationId:F,appointmentId:Te,scheduledDate:R,status:"scheduled",notes:`Rappel programmé pour ${ee.vaccineName}`,createdAt:new Date().toISOString()},Jt=[...ee.reminderHistory||[],Ie];return Tm(F,{reminderHistory:Jt}),{appointment:Ce,reminderVaccination:we,reminder:Ie}},hB=(F,R,Y)=>{var we;const ee=Om(F);if(!ee)return;const Te={status:"completed",reminderHistory:((we=ee.reminderHistory)==null?void 0:we.map(Ie=>Ie.appointmentId===R?{...Ie,status:"completed"}:Ie))||[],reminderAppointmentId:void 0};return Y&&(Te.nextDueDate=Y),Tm(F,Te),wi(R,{status:"completed"}),ee},fB=(F,R)=>{const Y=Om(F);if(!Y)return null;const ee={petId:Y.petId,petName:Y.petName,clientId:Y.clientId,clientName:Y.clientName,vaccineName:Y.vaccineName,vaccineType:Y.vaccineType,vaccinationCategory:"reminder",dateGiven:R.datePerformed,nextDueDate:R.newNextDueDate||Y.nextDueDate,calculatedDueDate:Y.calculatedDueDate,batchNumber:R.batchNumber||Y.batchNumber,veterinarian:R.veterinarian,notes:R.notes||`Rappel effectué - ${Y.vaccineName}`,status:"completed",cost:Y.cost,location:Y.location,manufacturer:Y.manufacturer,expirationDate:Y.expirationDate,adverseReactions:Y.adverseReactions,originalVaccinationId:F,isReminder:!0};Wy(ee);const Ce={status:"completed",reminderAppointmentId:void 0};return R.newNextDueDate&&(Ce.nextDueDate=R.newNextDueDate),Tm(F,Ce),ee},oc=F=>{const R={...F,id:Math.max(...V.map(ee=>ee.id),0)+1,createdAt:new Date().toISOString()},Y=[...V,R];return H(Y),n(a,o,c,d,f,v,g,y,N,S,C,A,E,I,Y),R},mB=(F,R)=>{const Y=V.map(ee=>ee.id===F?{...ee,...R}:ee);H(Y),n(a,o,c,d,f,v,g,y,N,S,C,A,E,I,Y)},pB=F=>{const R=V.filter(Y=>Y.id!==F);H(R),n(a,o,c,d,f,v,g,y,N,S,C,A,E,I,R)},Hy=(F,R)=>{const Y=new Date(F),ee=new Date(R);let Ce=0;const Te={consultations:0,vaccinations:0,antiparasitics:0,prescriptions:0,stockSales:0,manualEntries:0,recurringCharges:0};return c.filter(we=>{const Ie=new Date(we.date);return Ie>=Y&&Ie<=ee}).forEach(we=>{var Mt;const Ie=parseFloat(((Mt=we.cost)==null?void 0:Mt.toString())||"0");Ce+=Ie,Te.consultations+=Ie,V.find(ze=>ze.source==="consultation"&&ze.sourceId===we.id)||oc({type:"revenue",category:"automatic",frequency:"occasional",description:`Consultation - ${we.petName}`,amount:Ie,date:we.date,reference:`Consultation #${we.id}`,source:"consultation",sourceId:we.id,notes:`Consultation automatique pour ${we.petName}`})}),y.filter(we=>{const Ie=new Date(we.dateGiven);return Ie>=Y&&Ie<=ee}).forEach(we=>{var Mt;const Ie=parseFloat(((Mt=we.cost)==null?void 0:Mt.toString())||"0");Ce+=Ie,Te.vaccinations+=Ie,V.find(ze=>ze.source==="vaccination"&&ze.sourceId===we.id)||oc({type:"revenue",category:"automatic",frequency:"occasional",description:`Vaccination - ${we.vaccineName}`,amount:Ie,date:we.dateGiven,reference:`Vaccination #${we.id}`,source:"vaccination",sourceId:we.id,notes:`Vaccination automatique pour ${we.petName}`})}),S.filter(we=>{const Ie=new Date(we.dateGiven);return Ie>=Y&&Ie<=ee}).forEach(we=>{var Mt;const Ie=parseFloat(((Mt=we.cost)==null?void 0:Mt.toString())||"0");Ce+=Ie,Te.antiparasitics+=Ie,V.find(ze=>ze.source==="antiparasitic"&&ze.sourceId===we.id)||oc({type:"revenue",category:"automatic",frequency:"occasional",description:`Antiparasitaire - ${we.productName}`,amount:Ie,date:we.dateGiven,reference:`Antiparasitaire #${we.id}`,source:"antiparasitic",sourceId:we.id,notes:`Antiparasitaire automatique pour ${we.petName}`})}),f.filter(we=>{const Ie=new Date(we.createdAt);return Ie>=Y&&Ie<=ee}).forEach(we=>{const Ie=we.medications.reduce((Mt,ze)=>{var an;return Mt+parseFloat(((an=ze.cost)==null?void 0:an.toString())||"0")*ze.quantity},0);Ce+=Ie,Te.prescriptions+=Ie,!V.find(Mt=>Mt.source==="prescription"&&Mt.sourceId===we.id)&&Ie>0&&oc({type:"revenue",category:"automatic",frequency:"occasional",description:`Prescription - ${we.petName}`,amount:Ie,date:we.createdAt,reference:`Prescription #${we.id}`,source:"prescription",sourceId:we.id,notes:`Prescription automatique pour ${we.petName}`})}),{totalRevenue:Ce,revenueBreakdown:Te}},Ky=(F,R)=>{const Y=new Date(F),ee=new Date(R);let Ce=0;const Te={stockPurchases:0,salaries:0,rent:0,taxes:0,insurance:0,other:0,manualEntries:0,recurringCharges:0};return I.filter(we=>{const Ie=new Date(we.date);return Ie>=Y&&Ie<=ee&&we.type==="in"&&we.reason==="Achat fournisseur"}).forEach(we=>{const Ie=A.find(Jt=>Jt.id===we.itemId);if(Ie){const Jt=Ie.purchasePrice*we.quantity;Ce+=Jt,Te.stockPurchases+=Jt,V.find(ze=>ze.source==="stock_purchase"&&ze.reference===we.reference)||oc({type:"expense",category:"automatic",frequency:"occasional",description:`Achat stock - ${we.itemName}`,amount:Jt,date:we.date,reference:we.reference,source:"stock_purchase",notes:`Achat automatique de ${we.quantity} ${we.itemName}`})}}),{totalExpenses:Ce,expenseBreakdown:Te}},gB=(F,R,Y)=>{const{totalRevenue:ee,revenueBreakdown:Ce}=Hy(R,Y),{totalExpenses:Te,expenseBreakdown:we}=Ky(R,Y),Ie=V.filter(an=>{const Cr=new Date(an.date),Ni=new Date(R),Si=new Date(Y);return Cr>=Ni&&Cr<=Si&&an.category==="manual"&&an.type==="revenue"}).reduce((an,Cr)=>an+Cr.amount,0),Jt=V.filter(an=>{const Cr=new Date(an.date),Ni=new Date(R),Si=new Date(Y);return Cr>=Ni&&Cr<=Si&&an.category==="manual"&&an.type==="expense"}).reduce((an,Cr)=>an+Cr.amount,0);Ce.manualEntries=Ie,we.manualEntries=Jt;const Mt=ee+Ie,ze=Te+Jt;return{period:F,totalRevenue:Mt,totalExpenses:ze,netIncome:Mt-ze,revenueBreakdown:Ce,expenseBreakdown:we}};return s.jsx(AR.Provider,{value:{clients:a,pets:o,consultations:c,appointments:d,prescriptions:f,farms:v,farmInterventions:g,vaccinations:y,vaccinationProtocols:N,antiparasitics:S,antiparasiticProtocols:C,stockItems:A,stockAlerts:E,stockMovements:I,accountingEntries:V,addClient:k,addPet:D,addConsultation:Z,addAppointment:na,addPrescription:Lt,addFarm:F8,addFarmIntervention:V8,addVaccination:Wy,addVaccinationProtocol:sB,addAntiparasitic:Ue,addAntiparasiticProtocol:Rt,addStockItem:ne,addStockMovement:me,addAccountingEntry:oc,updateAccountingEntry:mB,deleteAccountingEntry:pB,calculateAutomaticRevenue:Hy,calculateAutomaticExpenses:Ky,generateAccountingSummary:gB,updateClient:X,updatePet:Q,updateConsultation:fe,updateAppointment:wi,updatePrescription:zr,updateFarm:B8,updateFarmIntervention:q8,updateVaccination:Tm,updateVaccinationProtocol:aB,updateAntiparasitic:ft,updateAntiparasiticProtocol:ae,updateStockItem:T,deletePet:B,deleteConsultation:Se,deleteAppointment:ic,deletePrescription:Vr,deleteFarm:z8,deleteFarmIntervention:U8,deleteVaccination:X8,deleteVaccinationProtocol:iB,deleteAntiparasitic:Tt,deleteAntiparasiticProtocol:Ne,deleteStockItem:ce,resetData:oe,exportData:U,importData:K,getClientById:Bd,getPetById:ac,getConsultationById:Vo,getAppointmentById:Em,getPrescriptionById:sa,getFarmById:W8,getFarmInterventionById:H8,getVaccinationById:Om,getVaccinationProtocolById:oB,getVaccinationProtocolsBySpecies:lB,getActiveVaccinationProtocols:cB,getAntiparasiticById:Me,getAntiparasiticsByPetId:He,getAntiparasiticsByClientId:dr,getOverdueAntiparasitics:ct,getUpcomingAntiparasitics:Xt,getAntiparasiticsByStatus:ie,getAntiparasiticProtocolById:Be,getAntiparasiticProtocolsBySpecies:ea,getActiveAntiparasiticProtocols:_s,getPetsByOwnerId:_r,getConsultationsByPetId:ta,getConsultationsByClientId:Cs,getAppointmentsByClientId:qy,getAppointmentsByPetId:zd,getAppointmentsByDate:ra,getUpcomingAppointments:Uy,getOverdueAppointments:Ke,getPrescriptionsByPetId:Ra,getPrescriptionsByConsultationId:qr,getActivePrescriptions:aa,getFarmInterventionsByFarmId:K8,getUpcomingFarmInterventions:G8,getFarmsByStatus:Y8,getVaccinationsByPetId:J8,getVaccinationsByClientId:Z8,getOverdueVaccinations:eB,getUpcomingVaccinations:tB,getVaccinationsByStatus:nB,createVaccinationReminder:dB,completeVaccinationReminder:hB,confirmVaccinationReminder:fB,updateVaccinationStatuses:rB,calculateDueDateFromProtocol:uB,updateClientStats:te,getStockAlerts:le},children:e})}const wn=()=>{const e=j.useContext(AR);if(e===void 0)throw new Error("useClients must be used within a ClientProvider");return e},J=j.forwardRef(({className:e,type:t,...n},r)=>s.jsx("input",{type:t,className:Ee("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));J.displayName="Input";var gJ="Label",kR=j.forwardRef((e,t)=>s.jsx(Le.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));kR.displayName=gJ;var ER=kR;const vJ=hm("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),M=j.forwardRef(({className:e,...t},n)=>s.jsx(ER,{ref:n,className:Ee(vJ(),e),...t}));M.displayName=ER.displayName;const re=j.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:Ee("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));re.displayName="Card";const de=j.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:Ee("flex flex-col space-y-1.5 p-6",e),...t}));de.displayName="CardHeader";const he=j.forwardRef(({className:e,...t},n)=>s.jsx("h3",{ref:n,className:Ee("text-2xl font-semibold leading-none tracking-tight",e),...t}));he.displayName="CardTitle";const Ou=j.forwardRef(({className:e,...t},n)=>s.jsx("p",{ref:n,className:Ee("text-sm text-muted-foreground",e),...t}));Ou.displayName="CardDescription";const se=j.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:Ee("p-6 pt-0",e),...t}));se.displayName="CardContent";const xJ=j.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:Ee("flex items-center p-6 pt-0",e),...t}));xJ.displayName="CardFooter";const yJ=hm("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),gf=j.forwardRef(({className:e,variant:t,...n},r)=>s.jsx("div",{ref:r,role:"alert",className:Ee(yJ({variant:t}),e),...n}));gf.displayName="Alert";const bJ=j.forwardRef(({className:e,...t},n)=>s.jsx("h5",{ref:n,className:Ee("mb-1 font-medium leading-none tracking-tight",e),...t}));bJ.displayName="AlertTitle";const vf=j.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:Ee("text-sm [&_p]:leading-relaxed",e),...t}));vf.displayName="AlertDescription";function jJ(){const[e,t]=j.useState(""),[n,r]=j.useState(""),[a,i]=j.useState(!1),[o,l]=j.useState(""),[c,u]=j.useState(!1),[d,h]=j.useState(!1);To();const f=SR(),m=dJ(),v=hJ(),p=async b=>{if(b.preventDefault(),l(""),!e||!n){l("Veuillez remplir tous les champs");return}try{await f.mutateAsync({email:e,password:n})}catch(N){l(N instanceof Error?N.message:"Une erreur inattendue est survenue")}},g=async()=>{l("");try{await m.mutateAsync()}catch{l("Erreur lors de la connexion avec Google")}},x=async b=>{if(b.preventDefault(),l(""),!e){l("Veuillez saisir votre email");return}try{await v.mutateAsync(e),h(!0)}catch(N){l(N instanceof Error?N.message:"Une erreur est survenue")}},y=()=>{u(!1),h(!1),l(""),r("")};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-green-50 dark:from-gray-900 dark:to-gray-800 px-4",children:s.jsxs(re,{className:"w-full max-w-md",children:[s.jsxs(de,{className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"p-3 bg-primary/10 rounded-full",children:s.jsx(pt,{className:"h-8 w-8 text-primary"})})}),s.jsx(he,{className:"text-2xl font-bold",children:"VetPro CRM3"}),s.jsx(Ou,{children:c?d?"Vérifiez votre email":"Réinitialiser votre mot de passe":"Connectez-vous à votre espace vétérinaire"})]}),s.jsx(se,{children:d?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Nous avons envoyé un lien de réinitialisation à ",s.jsx("strong",{children:e})]}),s.jsx("p",{className:"text-xs text-muted-foreground mb-6",children:"Cliquez sur le lien dans l'email pour réinitialiser votre mot de passe. Si vous ne voyez pas l'email, vérifiez votre dossier spam."})]}),s.jsxs(L,{onClick:y,className:"w-full",children:[s.jsx(AC,{className:"mr-2 h-4 w-4"}),"Retour à la connexion"]})]}):c?s.jsxs("form",{onSubmit:x,className:"space-y-4",children:[o&&s.jsx(gf,{variant:"destructive",children:s.jsx(vf,{children:o})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"reset-email",children:"Email"}),s.jsx(J,{id:"reset-email",type:"email",placeholder:"votre.email@example.com",value:e,onChange:b=>t(b.target.value),disabled:v.isPending,required:!0}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Entrez l'adresse email associée à votre compte"})]}),s.jsx(L,{type:"submit",className:"w-full",disabled:v.isPending,children:v.isPending?s.jsxs(s.Fragment,{children:[s.jsx(Mn,{className:"mr-2 h-4 w-4 animate-spin"}),"Envoi en cours..."]}):"Envoyer le lien de réinitialisation"}),s.jsx("div",{className:"text-center",children:s.jsxs(L,{type:"button",variant:"link",onClick:y,className:"text-sm",children:[s.jsx(AC,{className:"mr-1 h-4 w-4"}),"Retour à la connexion"]})})]}):s.jsxs(s.Fragment,{children:[s.jsxs("form",{onSubmit:p,className:"space-y-4",children:[o&&s.jsx(gf,{variant:"destructive",children:s.jsx(vf,{children:o})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"email",children:"Email"}),s.jsx(J,{id:"email",type:"email",placeholder:"vet@vetpro.com",value:e,onChange:b=>t(b.target.value),disabled:f.isPending,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"password",children:"Mot de passe"}),s.jsxs("div",{className:"relative",children:[s.jsx(J,{id:"password",type:a?"text":"password",placeholder:"••••••••",value:n,onChange:b=>r(b.target.value),disabled:f.isPending,required:!0}),s.jsx(L,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>i(!a),disabled:f.isPending,children:a?s.jsx(jj,{className:"h-4 w-4"}):s.jsx(Dn,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(L,{type:"button",variant:"link",className:"text-xs p-0 h-auto",onClick:()=>u(!0),children:"Mot de passe oublié ?"})})]}),s.jsx(L,{type:"submit",className:"w-full",disabled:f.isPending,children:f.isPending?s.jsxs(s.Fragment,{children:[s.jsx(Mn,{className:"mr-2 h-4 w-4 animate-spin"}),"Connexion..."]}):"Se connecter"})]}),s.jsxs("div",{className:"relative my-6",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("span",{className:"w-full border-t"})}),s.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:s.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Ou continuer avec"})})]}),s.jsx(L,{type:"button",variant:"outline",className:"w-full",onClick:g,disabled:f.isPending||m.isPending,children:m.isPending?s.jsxs(s.Fragment,{children:[s.jsx(Mn,{className:"mr-2 h-4 w-4 animate-spin"}),"Connexion avec Google..."]}):s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"mr-2 h-4 w-4",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuer avec Google"]})}),s.jsx("div",{className:"mt-6 text-center",children:s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Pas encore de compte ?"," ",s.jsx("a",{href:"/register",className:"text-primary hover:underline",children:"S'inscrire"})]})})]})})]})})}function tr({children:e}){const{isAuthenticated:t,isLoading:n,user:r}=To(),[a,i]=j.useState(!1);return j.useEffect(()=>{if(n){const o=setTimeout(()=>{i(!0)},3e3);return()=>clearTimeout(o)}else i(!1)},[n]),a?s.jsx(Wj,{to:"/login",replace:!0}):n&&!a?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Vérification de l'authentification..."})]})}):!t||!r?s.jsx(Wj,{to:"/login",replace:!0}):s.jsx(s.Fragment,{children:e})}function wJ({children:e,redirectTo:t="/dashboard"}){const{isAuthenticated:n,isLoading:r,user:a}=To(),[i,o]=j.useState(!1);return j.useEffect(()=>{if(r){const l=setTimeout(()=>{o(!0)},2e3);return()=>clearTimeout(l)}else o(!1)},[r]),i?s.jsx(s.Fragment,{children:e}):r&&!i?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Chargement..."})]})}):n&&a?s.jsx(Wj,{to:t,replace:!0}):s.jsx(s.Fragment,{children:e})}const TR="/assets/vet-hero-UFBVcjRL.jpg";function NJ(){return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("header",{className:"border-b",children:s.jsxs("div",{className:"container mx-auto px-6 py-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pt,{className:"h-8 w-8 text-primary"}),s.jsx("span",{className:"text-xl font-bold",children:"VetPro"})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx(L,{variant:"ghost",asChild:!0,children:s.jsx(Bs,{to:"/login",children:"Se connecter"})}),s.jsx(L,{asChild:!0,children:s.jsx(Bs,{to:"/register",children:"Commencer"})})]})]})}),s.jsx("section",{className:"py-20",children:s.jsx("div",{className:"container mx-auto px-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1 space-y-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pt,{className:"h-8 w-8 text-primary"}),s.jsx("span",{className:"text-sm font-medium text-primary",children:"Solution CRM Vétérinaire Complète"})]}),s.jsxs("h1",{className:"text-5xl font-bold leading-tight",children:["Gérez votre pratique",s.jsx("span",{className:"gradient-primary bg-clip-text text-transparent block",children:"vétérinaire efficacement"})]}),s.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl",children:"VetPro vous aide à gérer vos clients, leurs animaux, les rendez-vous, consultations et l'historique médical. Optimisez votre pratique avec notre solution tout-en-un."})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx(L,{size:"lg",className:"gap-2 medical-glow",asChild:!0,children:s.jsxs(Bs,{to:"/register",children:["Commencer gratuitement",s.jsx(yj,{className:"h-4 w-4"})]})}),s.jsx(L,{variant:"outline",size:"lg",className:"gap-2",asChild:!0,children:s.jsx(Bs,{to:"/login",children:"Voir la démo"})})]})]}),s.jsx("div",{className:"hidden lg:block",children:s.jsx("img",{src:TR,alt:"Vétérinaire professionnel",className:"w-96 h-64 object-cover rounded-xl shadow-medical"})})]})})}),s.jsx("section",{className:"py-20 bg-muted/30",children:s.jsxs("div",{className:"container mx-auto px-6",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Tout ce dont vous avez besoin pour votre clinique"}),s.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Une solution complète pour moderniser et optimiser votre pratique vétérinaire"})]}),s.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"bg-card p-6 rounded-xl border shadow-sm",children:[s.jsx(Da,{className:"h-12 w-12 text-primary mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Gestion des Clients"}),s.jsx("p",{className:"text-muted-foreground",children:"Gérez facilement vos clients et leurs animaux avec un système intuitif et complet."})]}),s.jsxs("div",{className:"bg-card p-6 rounded-xl border shadow-sm",children:[s.jsx(Ze,{className:"h-12 w-12 text-primary mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Rendez-vous"}),s.jsx("p",{className:"text-muted-foreground",children:"Planifiez et gérez vos rendez-vous avec un calendrier intelligent et flexible."})]}),s.jsxs("div",{className:"bg-card p-6 rounded-xl border shadow-sm",children:[s.jsx(Xr,{className:"h-12 w-12 text-primary mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Consultations"}),s.jsx("p",{className:"text-muted-foreground",children:"Documentez vos consultations et maintenez un historique médical détaillé."})]}),s.jsxs("div",{className:"bg-card p-6 rounded-xl border shadow-sm",children:[s.jsx(HN,{className:"h-12 w-12 text-primary mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Statistiques"}),s.jsx("p",{className:"text-muted-foreground",children:"Analysez votre activité avec des rapports détaillés et des tableaux de bord."})]}),s.jsxs("div",{className:"bg-card p-6 rounded-xl border shadow-sm",children:[s.jsx(Gn,{className:"h-12 w-12 text-primary mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Sécurisé"}),s.jsx("p",{className:"text-muted-foreground",children:"Vos données sont protégées avec les plus hauts standards de sécurité."})]}),s.jsxs("div",{className:"bg-card p-6 rounded-xl border shadow-sm",children:[s.jsx(pt,{className:"h-12 w-12 text-primary mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Farm Management"}),s.jsx("p",{className:"text-muted-foreground",children:"Gérez les exploitations agricoles et suivez la santé des troupeaux."})]})]})]})}),s.jsx("section",{className:"py-20",children:s.jsx("div",{className:"container mx-auto px-6 text-center",children:s.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[s.jsx("h2",{className:"text-3xl font-bold",children:"Prêt à moderniser votre pratique ?"}),s.jsx("p",{className:"text-lg text-muted-foreground",children:"Rejoignez des centaines de vétérinaires qui font confiance à VetPro pour gérer leur clinique efficacement."}),s.jsx("div",{className:"flex gap-4 justify-center",children:s.jsx(L,{size:"lg",className:"gap-2 medical-glow",asChild:!0,children:s.jsxs(Bs,{to:"/register",children:["Commencer maintenant",s.jsx(yj,{className:"h-4 w-4"})]})})})]})})}),s.jsx("footer",{className:"border-t py-8",children:s.jsx("div",{className:"container mx-auto px-6 text-center text-muted-foreground",children:s.jsxs("p",{children:["© ",new Date().getFullYear()," VetPro. Tous droits réservés."]})})})]})}const SJ=()=>{const e=xd(),{toast:t}=at(),[n,r]=j.useState(!1),[a,i]=j.useState({username:"",fullName:"",email:"",password:"",confirmPassword:""}),o=u=>u.length<8?"Le mot de passe doit contenir au moins 8 caractères":/[A-Z]/.test(u)?/[a-z]/.test(u)?/\d/.test(u)?/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>?]/.test(u)?null:"Le mot de passe doit contenir au moins un caractère spécial":"Le mot de passe doit contenir au moins un chiffre":"Le mot de passe doit contenir au moins une lettre minuscule":"Le mot de passe doit contenir au moins une lettre majuscule",l=u=>{i(d=>({...d,[u.target.id]:u.target.value}))},c=async u=>{if(u.preventDefault(),r(!0),a.password!==a.confirmPassword){t({title:"Erreur",description:"Les mots de passe ne correspondent pas",variant:"destructive"}),r(!1);return}const d=o(a.password);if(d){t({title:"Erreur",description:d,variant:"destructive"}),r(!1);return}try{await rJ(a.email,a.password,a.username,a.fullName,"assistant"),t({title:"Inscription réussie",description:"Votre compte a été créé avec succès. Veuillez vérifier votre email et cliquer sur le lien de confirmation pour pouvoir vous connecter."}),e("/login")}catch(h){const f=h instanceof Error?h.message:"Une erreur est survenue lors de l'inscription";t({title:"Erreur d'inscription",description:f,variant:"destructive"})}finally{r(!1)}};return s.jsx("div",{className:"min-h-screen bg-gradient-hero flex items-center justify-center p-6",children:s.jsxs(re,{className:"w-full max-w-md",children:[s.jsxs(de,{className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx(pt,{className:"h-12 w-12 text-primary"})}),s.jsx(he,{className:"text-2xl gradient-primary bg-clip-text text-transparent",children:"VetPro CRM"}),s.jsx(Ou,{children:"Créez votre compte vétérinaire"})]}),s.jsxs(se,{children:[s.jsxs("form",{onSubmit:c,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"username",children:"Nom d'utilisateur"}),s.jsx(J,{id:"username",placeholder:"martin.dubois",value:a.username,onChange:l,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"fullName",children:"Nom complet"}),s.jsx(J,{id:"fullName",placeholder:"Dr. Martin Dubois",value:a.fullName,onChange:l,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"email",children:"Email"}),s.jsx(J,{id:"email",type:"email",placeholder:"votre.email@example.com",value:a.email,onChange:l,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"password",children:"Mot de passe"}),s.jsx(J,{id:"password",type:"password",placeholder:"Votre mot de passe sécurisé",value:a.password,onChange:l,required:!0,minLength:8}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Le mot de passe doit contenir au moins 8 caractères, une majuscule, une minuscule, un chiffre et un caractère spécial."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),s.jsx(J,{id:"confirmPassword",type:"password",placeholder:"Confirmer votre mot de passe",value:a.confirmPassword,onChange:l,required:!0,minLength:8})]}),s.jsx(L,{type:"submit",className:"w-full",disabled:n,children:n?s.jsxs(s.Fragment,{children:[s.jsx(Mn,{className:"mr-2 h-4 w-4 animate-spin"}),"Création en cours..."]}):"Créer le compte"})]}),s.jsxs("div",{className:"mt-6 text-center",children:[s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Déjà un compte ?"," ",s.jsx(Bs,{to:"/login",className:"text-primary hover:underline",children:"Se connecter"})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:s.jsx(Bs,{to:"/",className:"hover:underline",children:"Retour à l'accueil"})})]})]})]})})};var Tx="Dialog",[OR,DR]=Fr(Tx),[_J,Xs]=OR(Tx),MR=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=j.useRef(null),c=j.useRef(null),[u,d]=ui({prop:r,defaultProp:a??!1,onChange:i,caller:Tx});return s.jsx(_J,{scope:t,triggerRef:l,contentRef:c,contentId:Na(),titleId:Na(),descriptionId:Na(),open:u,onOpenChange:d,onOpenToggle:j.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};MR.displayName=Tx;var IR="DialogTrigger",$R=j.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Xs(IR,n),i=dt(t,a.triggerRef);return s.jsx(Le.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":LS(a.open),...r,ref:i,onClick:Pe(e.onClick,a.onOpenToggle)})});$R.displayName=IR;var $S="DialogPortal",[CJ,RR]=OR($S,{forceMount:void 0}),LR=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:a}=e,i=Xs($S,t);return s.jsx(CJ,{scope:t,forceMount:n,children:j.Children.map(r,o=>s.jsx(js,{present:n||i.open,children:s.jsx(um,{asChild:!0,container:a,children:o})}))})};LR.displayName=$S;var Rg="DialogOverlay",FR=j.forwardRef((e,t)=>{const n=RR(Rg,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=Xs(Rg,e.__scopeDialog);return i.modal?s.jsx(js,{present:r||i.open,children:s.jsx(AJ,{...a,ref:t})}):null});FR.displayName=Rg;var PJ=Tl("DialogOverlay.RemoveScroll"),AJ=j.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Xs(Rg,n);return s.jsx(jx,{as:PJ,allowPinchZoom:!0,shards:[a.contentRef],children:s.jsx(Le.div,{"data-state":LS(a.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Il="DialogContent",BR=j.forwardRef((e,t)=>{const n=RR(Il,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=Xs(Il,e.__scopeDialog);return s.jsx(js,{present:r||i.open,children:i.modal?s.jsx(kJ,{...a,ref:t}):s.jsx(EJ,{...a,ref:t})})});BR.displayName=Il;var kJ=j.forwardRef((e,t)=>{const n=Xs(Il,e.__scopeDialog),r=j.useRef(null),a=dt(t,n.contentRef,r);return j.useEffect(()=>{const i=r.current;if(i)return jS(i)},[]),s.jsx(zR,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Pe(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Pe(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:Pe(e.onFocusOutside,i=>i.preventDefault())})}),EJ=j.forwardRef((e,t)=>{const n=Xs(Il,e.__scopeDialog),r=j.useRef(!1),a=j.useRef(!1);return s.jsx(zR,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),zR=j.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,l=Xs(Il,n),c=j.useRef(null),u=dt(t,c);return bS(),s.jsxs(s.Fragment,{children:[s.jsx(xx,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(ld,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":LS(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(OJ,{titleId:l.titleId}),s.jsx(MJ,{contentRef:c,descriptionId:l.descriptionId})]})]})}),RS="DialogTitle",VR=j.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Xs(RS,n);return s.jsx(Le.h2,{id:a.titleId,...r,ref:t})});VR.displayName=RS;var qR="DialogDescription",UR=j.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Xs(qR,n);return s.jsx(Le.p,{id:a.descriptionId,...r,ref:t})});UR.displayName=qR;var WR="DialogClose",HR=j.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=Xs(WR,n);return s.jsx(Le.button,{type:"button",...r,ref:t,onClick:Pe(e.onClick,()=>a.onOpenChange(!1))})});HR.displayName=WR;function LS(e){return e?"open":"closed"}var KR="DialogTitleWarning",[TJ,GR]=uq(KR,{contentName:Il,titleName:RS,docsSlug:"dialog"}),OJ=({titleId:e})=>{const t=GR(KR),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return j.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},DJ="DialogDescriptionWarning",MJ=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${GR(DJ).contentName}}.`;return j.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},YR=MR,QR=$R,XR=LR,FS=FR,BS=BR,zS=VR,VS=UR,qS=HR;const et=YR,jm=QR,IJ=XR,JR=j.forwardRef(({className:e,...t},n)=>s.jsx(FS,{ref:n,className:Ee("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));JR.displayName=FS.displayName;const Xe=j.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(IJ,{children:[s.jsx(JR,{}),s.jsxs(BS,{ref:r,className:Ee("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,s.jsxs(qS,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(fm,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Xe.displayName=BS.displayName;const tt=({className:e,...t})=>s.jsx("div",{className:Ee("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});tt.displayName="DialogHeader";const nt=j.forwardRef(({className:e,...t},n)=>s.jsx(zS,{ref:n,className:Ee("text-lg font-semibold leading-none tracking-tight",e),...t}));nt.displayName=zS.displayName;const Dt=j.forwardRef(({className:e,...t},n)=>s.jsx(VS,{ref:n,className:Ee("text-sm text-muted-foreground",e),...t}));Dt.displayName=VS.displayName;const We=j.forwardRef(({className:e,...t},n)=>s.jsx("textarea",{className:Ee("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));We.displayName="Textarea";function HP(e,[t,n]){return Math.min(n,Math.max(t,e))}function US(e){const t=j.useRef({value:e,previous:e});return j.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var $J=[" ","Enter","ArrowUp","ArrowDown"],RJ=[" ","Enter"],$l="Select",[Ox,Dx,LJ]=ix($l),[jd,Zke]=Fr($l,[LJ,md]),Mx=md(),[FJ,Oo]=jd($l),[BJ,zJ]=jd($l),ZR=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:f,required:m,form:v}=e,p=Mx(t),[g,x]=j.useState(null),[y,b]=j.useState(null),[N,w]=j.useState(!1),S=vx(u),[_,C]=ui({prop:r,defaultProp:a??!1,onChange:i,caller:$l}),[P,A]=ui({prop:o,defaultProp:l,onChange:c,caller:$l}),O=j.useRef(null),E=g?v||!!g.closest("form"):!0,[z,I]=j.useState(new Set),W=Array.from(z).map(V=>V.props.value).join(";");return s.jsx(JI,{...p,children:s.jsxs(FJ,{required:m,scope:t,trigger:g,onTriggerChange:x,valueNode:y,onValueNodeChange:b,valueNodeHasChildren:N,onValueNodeHasChildrenChange:w,contentId:Na(),value:P,onValueChange:A,open:_,onOpenChange:C,dir:S,triggerPointerDownPosRef:O,disabled:f,children:[s.jsx(Ox.Provider,{scope:t,children:s.jsx(BJ,{scope:e.__scopeSelect,onNativeOptionAdd:j.useCallback(V=>{I(H=>new Set(H).add(V))},[]),onNativeOptionRemove:j.useCallback(V=>{I(H=>{const k=new Set(H);return k.delete(V),k})},[]),children:n})}),E?s.jsxs(N3,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:h,value:P,onChange:V=>A(V.target.value),disabled:f,form:v,children:[P===void 0?s.jsx("option",{value:""}):null,Array.from(z)]},W):null]})})};ZR.displayName=$l;var e3="SelectTrigger",t3=j.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...a}=e,i=Mx(n),o=Oo(e3,n),l=o.disabled||r,c=dt(t,o.onTriggerChange),u=Dx(n),d=j.useRef("touch"),[h,f,m]=_3(p=>{const g=u().filter(b=>!b.disabled),x=g.find(b=>b.value===o.value),y=C3(g,p,x);y!==void 0&&o.onValueChange(y.value)}),v=p=>{l||(o.onOpenChange(!0),m()),p&&(o.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return s.jsx(oS,{asChild:!0,...i,children:s.jsx(Le.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":S3(o.value)?"":void 0,...a,ref:c,onClick:Pe(a.onClick,p=>{p.currentTarget.focus(),d.current!=="mouse"&&v(p)}),onPointerDown:Pe(a.onPointerDown,p=>{d.current=p.pointerType;const g=p.target;g.hasPointerCapture(p.pointerId)&&g.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(v(p),p.preventDefault())}),onKeyDown:Pe(a.onKeyDown,p=>{const g=h.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&f(p.key),!(g&&p.key===" ")&&$J.includes(p.key)&&(v(),p.preventDefault())})})})});t3.displayName=e3;var n3="SelectValue",r3=j.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:i,placeholder:o="",...l}=e,c=Oo(n3,n),{onValueNodeHasChildrenChange:u}=c,d=i!==void 0,h=dt(t,c.onValueNodeChange);return jn(()=>{u(d)},[u,d]),s.jsx(Le.span,{...l,ref:h,style:{pointerEvents:"none"},children:S3(c.value)?s.jsx(s.Fragment,{children:o}):i})});r3.displayName=n3;var VJ="SelectIcon",s3=j.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...a}=e;return s.jsx(Le.span,{"aria-hidden":!0,...a,ref:t,children:r||"▼"})});s3.displayName=VJ;var qJ="SelectPortal",a3=e=>s.jsx(um,{asChild:!0,...e});a3.displayName=qJ;var Rl="SelectContent",i3=j.forwardRef((e,t)=>{const n=Oo(Rl,e.__scopeSelect),[r,a]=j.useState();if(jn(()=>{a(new DocumentFragment)},[]),!n.open){const i=r;return i?Hl.createPortal(s.jsx(o3,{scope:e.__scopeSelect,children:s.jsx(Ox.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),i):null}return s.jsx(l3,{...e,ref:t})});i3.displayName=Rl;var Ts=10,[o3,Do]=jd(Rl),UJ="SelectContentImpl",WJ=Tl("SelectContent.RemoveScroll"),l3=j.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:v,hideWhenDetached:p,avoidCollisions:g,...x}=e,y=Oo(Rl,n),[b,N]=j.useState(null),[w,S]=j.useState(null),_=dt(t,le=>N(le)),[C,P]=j.useState(null),[A,O]=j.useState(null),E=Dx(n),[z,I]=j.useState(!1),W=j.useRef(!1);j.useEffect(()=>{if(b)return jS(b)},[b]),bS();const V=j.useCallback(le=>{const[Z,...B]=E().map(K=>K.ref.current),[oe]=B.slice(-1),U=document.activeElement;for(const K of le)if(K===U||(K==null||K.scrollIntoView({block:"nearest"}),K===Z&&w&&(w.scrollTop=0),K===oe&&w&&(w.scrollTop=w.scrollHeight),K==null||K.focus(),document.activeElement!==U))return},[E,w]),H=j.useCallback(()=>V([C,b]),[V,C,b]);j.useEffect(()=>{z&&H()},[z,H]);const{onOpenChange:k,triggerPointerDownPosRef:D}=y;j.useEffect(()=>{if(b){let le={x:0,y:0};const Z=oe=>{var U,K;le={x:Math.abs(Math.round(oe.pageX)-(((U=D.current)==null?void 0:U.x)??0)),y:Math.abs(Math.round(oe.pageY)-(((K=D.current)==null?void 0:K.y)??0))}},B=oe=>{le.x<=10&&le.y<=10?oe.preventDefault():b.contains(oe.target)||k(!1),document.removeEventListener("pointermove",Z),D.current=null};return D.current!==null&&(document.addEventListener("pointermove",Z),document.addEventListener("pointerup",B,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Z),document.removeEventListener("pointerup",B,{capture:!0})}}},[b,k,D]),j.useEffect(()=>{const le=()=>k(!1);return window.addEventListener("blur",le),window.addEventListener("resize",le),()=>{window.removeEventListener("blur",le),window.removeEventListener("resize",le)}},[k]);const[X,Q]=_3(le=>{const Z=E().filter(U=>!U.disabled),B=Z.find(U=>U.ref.current===document.activeElement),oe=C3(Z,le,B);oe&&setTimeout(()=>oe.ref.current.focus())}),te=j.useCallback((le,Z,B)=>{const oe=!W.current&&!B;(y.value!==void 0&&y.value===Z||oe)&&(P(le),oe&&(W.current=!0))},[y.value]),ne=j.useCallback(()=>b==null?void 0:b.focus(),[b]),T=j.useCallback((le,Z,B)=>{const oe=!W.current&&!B;(y.value!==void 0&&y.value===Z||oe)&&O(le)},[y.value]),ce=r==="popper"?dw:c3,me=ce===dw?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:v,hideWhenDetached:p,avoidCollisions:g}:{};return s.jsx(o3,{scope:n,content:b,viewport:w,onViewportChange:S,itemRefCallback:te,selectedItem:C,onItemLeave:ne,itemTextRefCallback:T,focusSelectedItem:H,selectedItemText:A,position:r,isPositioned:z,searchRef:X,children:s.jsx(jx,{as:WJ,allowPinchZoom:!0,children:s.jsx(xx,{asChild:!0,trapped:y.open,onMountAutoFocus:le=>{le.preventDefault()},onUnmountAutoFocus:Pe(a,le=>{var Z;(Z=y.trigger)==null||Z.focus({preventScroll:!0}),le.preventDefault()}),children:s.jsx(ld,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:le=>le.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:s.jsx(ce,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:le=>le.preventDefault(),...x,...me,onPlaced:()=>I(!0),ref:_,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:Pe(x.onKeyDown,le=>{const Z=le.ctrlKey||le.altKey||le.metaKey;if(le.key==="Tab"&&le.preventDefault(),!Z&&le.key.length===1&&Q(le.key),["ArrowUp","ArrowDown","Home","End"].includes(le.key)){let oe=E().filter(U=>!U.disabled).map(U=>U.ref.current);if(["ArrowUp","End"].includes(le.key)&&(oe=oe.slice().reverse()),["ArrowUp","ArrowDown"].includes(le.key)){const U=le.target,K=oe.indexOf(U);oe=oe.slice(K+1)}setTimeout(()=>V(oe)),le.preventDefault()}})})})})})})});l3.displayName=UJ;var HJ="SelectItemAlignedPosition",c3=j.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...a}=e,i=Oo(Rl,n),o=Do(Rl,n),[l,c]=j.useState(null),[u,d]=j.useState(null),h=dt(t,_=>d(_)),f=Dx(n),m=j.useRef(!1),v=j.useRef(!0),{viewport:p,selectedItem:g,selectedItemText:x,focusSelectedItem:y}=o,b=j.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&p&&g&&x){const _=i.trigger.getBoundingClientRect(),C=u.getBoundingClientRect(),P=i.valueNode.getBoundingClientRect(),A=x.getBoundingClientRect();if(i.dir!=="rtl"){const U=A.left-C.left,K=P.left-U,fe=_.left-K,Se=_.width+fe,$e=Math.max(Se,C.width),Ue=window.innerWidth-Ts,ft=HP(K,[Ts,Math.max(Ts,Ue-$e)]);l.style.minWidth=Se+"px",l.style.left=ft+"px"}else{const U=C.right-A.right,K=window.innerWidth-P.right-U,fe=window.innerWidth-_.right-K,Se=_.width+fe,$e=Math.max(Se,C.width),Ue=window.innerWidth-Ts,ft=HP(K,[Ts,Math.max(Ts,Ue-$e)]);l.style.minWidth=Se+"px",l.style.right=ft+"px"}const O=f(),E=window.innerHeight-Ts*2,z=p.scrollHeight,I=window.getComputedStyle(u),W=parseInt(I.borderTopWidth,10),V=parseInt(I.paddingTop,10),H=parseInt(I.borderBottomWidth,10),k=parseInt(I.paddingBottom,10),D=W+V+z+k+H,X=Math.min(g.offsetHeight*5,D),Q=window.getComputedStyle(p),te=parseInt(Q.paddingTop,10),ne=parseInt(Q.paddingBottom,10),T=_.top+_.height/2-Ts,ce=E-T,me=g.offsetHeight/2,le=g.offsetTop+me,Z=W+V+le,B=D-Z;if(Z<=T){const U=O.length>0&&g===O[O.length-1].ref.current;l.style.bottom="0px";const K=u.clientHeight-p.offsetTop-p.offsetHeight,fe=Math.max(ce,me+(U?ne:0)+K+H),Se=Z+fe;l.style.height=Se+"px"}else{const U=O.length>0&&g===O[0].ref.current;l.style.top="0px";const fe=Math.max(T,W+p.offsetTop+(U?te:0)+me)+B;l.style.height=fe+"px",p.scrollTop=Z-T+p.offsetTop}l.style.margin=`${Ts}px 0`,l.style.minHeight=X+"px",l.style.maxHeight=E+"px",r==null||r(),requestAnimationFrame(()=>m.current=!0)}},[f,i.trigger,i.valueNode,l,u,p,g,x,i.dir,r]);jn(()=>b(),[b]);const[N,w]=j.useState();jn(()=>{u&&w(window.getComputedStyle(u).zIndex)},[u]);const S=j.useCallback(_=>{_&&v.current===!0&&(b(),y==null||y(),v.current=!1)},[b,y]);return s.jsx(GJ,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:S,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:s.jsx(Le.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});c3.displayName=HJ;var KJ="SelectPopperPosition",dw=j.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=Ts,...i}=e,o=Mx(n);return s.jsx(lS,{...o,...i,ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});dw.displayName=KJ;var[GJ,WS]=jd(Rl,{}),hw="SelectViewport",u3=j.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...a}=e,i=Do(hw,n),o=WS(hw,n),l=dt(t,i.onViewportChange),c=j.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),s.jsx(Ox.Slot,{scope:n,children:s.jsx(Le.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Pe(a.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&h){const m=Math.abs(c.current-d.scrollTop);if(m>0){const v=window.innerHeight-Ts*2,p=parseFloat(h.style.minHeight),g=parseFloat(h.style.height),x=Math.max(p,g);if(x<v){const y=x+m,b=Math.min(v,y),N=y-b;h.style.height=b+"px",h.style.bottom==="0px"&&(d.scrollTop=N>0?N:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});u3.displayName=hw;var d3="SelectGroup",[YJ,QJ]=jd(d3),XJ=j.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Na();return s.jsx(YJ,{scope:n,id:a,children:s.jsx(Le.div,{role:"group","aria-labelledby":a,...r,ref:t})})});XJ.displayName=d3;var h3="SelectLabel",f3=j.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=QJ(h3,n);return s.jsx(Le.div,{id:a.id,...r,ref:t})});f3.displayName=h3;var Lg="SelectItem",[JJ,m3]=jd(Lg),p3=j.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:i,...o}=e,l=Oo(Lg,n),c=Do(Lg,n),u=l.value===r,[d,h]=j.useState(i??""),[f,m]=j.useState(!1),v=dt(t,y=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,y,r,a)}),p=Na(),g=j.useRef("touch"),x=()=>{a||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(JJ,{scope:n,value:r,disabled:a,textId:p,isSelected:u,onItemTextChange:j.useCallback(y=>{h(b=>b||((y==null?void 0:y.textContent)??"").trim())},[]),children:s.jsx(Ox.ItemSlot,{scope:n,value:r,disabled:a,textValue:d,children:s.jsx(Le.div,{role:"option","aria-labelledby":p,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:v,onFocus:Pe(o.onFocus,()=>m(!0)),onBlur:Pe(o.onBlur,()=>m(!1)),onClick:Pe(o.onClick,()=>{g.current!=="mouse"&&x()}),onPointerUp:Pe(o.onPointerUp,()=>{g.current==="mouse"&&x()}),onPointerDown:Pe(o.onPointerDown,y=>{g.current=y.pointerType}),onPointerMove:Pe(o.onPointerMove,y=>{var b;g.current=y.pointerType,a?(b=c.onItemLeave)==null||b.call(c):g.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Pe(o.onPointerLeave,y=>{var b;y.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:Pe(o.onKeyDown,y=>{var N;((N=c.searchRef)==null?void 0:N.current)!==""&&y.key===" "||(RJ.includes(y.key)&&x(),y.key===" "&&y.preventDefault())})})})})});p3.displayName=Lg;var yh="SelectItemText",g3=j.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,...i}=e,o=Oo(yh,n),l=Do(yh,n),c=m3(yh,n),u=zJ(yh,n),[d,h]=j.useState(null),f=dt(t,x=>h(x),c.onItemTextChange,x=>{var y;return(y=l.itemTextRefCallback)==null?void 0:y.call(l,x,c.value,c.disabled)}),m=d==null?void 0:d.textContent,v=j.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:p,onNativeOptionRemove:g}=u;return jn(()=>(p(v),()=>g(v)),[p,g,v]),s.jsxs(s.Fragment,{children:[s.jsx(Le.span,{id:c.textId,...i,ref:f}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Hl.createPortal(i.children,o.valueNode):null]})});g3.displayName=yh;var v3="SelectItemIndicator",x3=j.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return m3(v3,n).isSelected?s.jsx(Le.span,{"aria-hidden":!0,...r,ref:t}):null});x3.displayName=v3;var fw="SelectScrollUpButton",y3=j.forwardRef((e,t)=>{const n=Do(fw,e.__scopeSelect),r=WS(fw,e.__scopeSelect),[a,i]=j.useState(!1),o=dt(t,r.onScrollButtonChange);return jn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?s.jsx(j3,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});y3.displayName=fw;var mw="SelectScrollDownButton",b3=j.forwardRef((e,t)=>{const n=Do(mw,e.__scopeSelect),r=WS(mw,e.__scopeSelect),[a,i]=j.useState(!1),o=dt(t,r.onScrollButtonChange);return jn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;i(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?s.jsx(j3,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});b3.displayName=mw;var j3=j.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=e,i=Do("SelectScrollButton",n),o=j.useRef(null),l=Dx(n),c=j.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return j.useEffect(()=>()=>c(),[c]),jn(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),s.jsx(Le.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Pe(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Pe(a.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Pe(a.onPointerLeave,()=>{c()})})}),ZJ="SelectSeparator",w3=j.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return s.jsx(Le.div,{"aria-hidden":!0,...r,ref:t})});w3.displayName=ZJ;var pw="SelectArrow",eZ=j.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Mx(n),i=Oo(pw,n),o=Do(pw,n);return i.open&&o.position==="popper"?s.jsx(cS,{...a,...r,ref:t}):null});eZ.displayName=pw;var tZ="SelectBubbleInput",N3=j.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const a=j.useRef(null),i=dt(r,a),o=US(t);return j.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&d){const h=new Event("change",{bubbles:!0});d.call(l,t),l.dispatchEvent(h)}},[o,t]),s.jsx(Le.select,{...n,style:{...KM,...n.style},ref:i,defaultValue:t})});N3.displayName=tZ;function S3(e){return e===""||e===void 0}function _3(e){const t=jr(e),n=j.useRef(""),r=j.useRef(0),a=j.useCallback(o=>{const l=n.current+o;t(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=j.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return j.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,i]}function C3(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=nZ(e,Math.max(i,0));a.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function nZ(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var rZ=ZR,P3=t3,sZ=r3,aZ=s3,iZ=a3,A3=i3,oZ=u3,k3=f3,E3=p3,lZ=g3,cZ=x3,T3=y3,O3=b3,D3=w3;const be=rZ,je=sZ,xe=j.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(P3,{ref:r,className:Ee("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,s.jsx(aZ,{asChild:!0,children:s.jsx(gI,{className:"h-4 w-4 opacity-50"})})]}));xe.displayName=P3.displayName;const M3=j.forwardRef(({className:e,...t},n)=>s.jsx(T3,{ref:n,className:Ee("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(uU,{className:"h-4 w-4"})}));M3.displayName=T3.displayName;const I3=j.forwardRef(({className:e,...t},n)=>s.jsx(O3,{ref:n,className:Ee("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(gI,{className:"h-4 w-4"})}));I3.displayName=O3.displayName;const ye=j.forwardRef(({className:e,children:t,position:n="popper",...r},a)=>s.jsx(iZ,{children:s.jsxs(A3,{ref:a,className:Ee("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[s.jsx(M3,{}),s.jsx(oZ,{className:Ee("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(I3,{})]})}));ye.displayName=A3.displayName;const uZ=j.forwardRef(({className:e,...t},n)=>s.jsx(k3,{ref:n,className:Ee("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));uZ.displayName=k3.displayName;const q=j.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(E3,{ref:r,className:Ee("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(cZ,{children:s.jsx(KN,{className:"h-4 w-4"})})}),s.jsx(lZ,{children:t})]}));q.displayName=E3.displayName;const dZ=j.forwardRef(({className:e,...t},n)=>s.jsx(D3,{ref:n,className:Ee("-mx-1 my-1 h-px bg-muted",e),...t}));dZ.displayName=D3.displayName;const hZ=async()=>{const{data:{user:e}}=await ge.auth.getUser();if(!e)throw new Error("User must be authenticated to fetch clients");const{data:t,error:n}=await ge.from("clients").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(n)throw new Error(`Error fetching clients: ${n.message}`);return t||[]},fZ=async e=>{const{data:{user:t}}=await ge.auth.getUser();if(!t)throw new Error("User not authenticated");const{data:n,error:r}=await ge.from("clients").insert({...e,user_id:t.id,city:e.city||"Rabat",country:e.country||"Maroc",client_type:e.client_type||"particulier"}).select().single();if(r)throw new Error(`Error creating client: ${r.message}`);return n},mZ=async(e,t)=>{const{data:n,error:r}=await ge.from("clients").update(t).eq("id",e).select().single();if(r)throw new Error(`Error updating client: ${r.message}`);return n},pZ=async e=>{const{error:t}=await ge.from("clients").delete().eq("id",e);if(t)throw new Error(`Error deleting client: ${t.message}`)},gZ=async()=>{const{data:{user:e}}=await ge.auth.getUser();if(!e)throw new Error("User must be authenticated to fetch animals");const{data:t,error:n}=await ge.from("animals").select(`
      *,
      client:clients(*)
    `).eq("user_id",e.id).order("created_at",{ascending:!1});if(n)throw new Error(`Error fetching animals: ${n.message}`);return t||[]},vZ=async e=>{var o,l,c;const{data:{user:t}}=await ge.auth.getUser();if(!t)throw new Error("User not authenticated");const n={...e};"microchip_number"in n&&!((o=n.microchip_number)!=null&&o.trim())&&delete n.microchip_number,"birth_date"in n&&!((l=n.birth_date)!=null&&l.trim())&&delete n.birth_date,"sterilization_date"in n&&!((c=n.sterilization_date)!=null&&c.trim())&&delete n.sterilization_date;const r=u=>{switch(u){case"healthy":return"vivant";case"urgent":return"décédé";case"treatment":return"perdu";default:return"vivant"}},{data:a,error:i}=await ge.from("animals").insert({...n,user_id:t.id,sterilized:n.sterilized||!1,status:r(n.status)}).select(`
      *,
      client:clients(*)
    `).single();if(i)throw new Error(`Error creating animal: ${i.message}`);return a},xZ=async(e,t)=>{var i,o,l;const n={...t};"microchip_number"in n&&!((i=n.microchip_number)!=null&&i.trim())&&(n.microchip_number=null),"birth_date"in n&&!((o=n.birth_date)!=null&&o.trim())&&(n.birth_date=null),"sterilization_date"in n&&!((l=n.sterilization_date)!=null&&l.trim())&&(n.sterilization_date=null);const{data:r,error:a}=await ge.from("animals").update(n).eq("id",e).select(`
      *,
      client:clients(*)
    `).single();if(a)throw new Error(`Error updating animal: ${a.message}`);return r},yZ=async e=>{const{error:t}=await ge.from("animals").delete().eq("id",e);if(t)throw new Error(`Error deleting animal: ${t.message}`)},bZ=async()=>{const{data:{user:e}}=await ge.auth.getUser();if(!e)throw new Error("User must be authenticated to fetch vaccinations");const{data:t,error:n}=await ge.from("animals").select("id").eq("user_id",e.id);if(n)throw new Error(`Error fetching user animals: ${n.message}`);const r=(t==null?void 0:t.map(o=>o.id))||[];if(r.length===0)return[];const{data:a,error:i}=await ge.from("vaccinations").select(`
      *,
      animal:animals(*)
    `).in("animal_id",r).order("vaccination_date",{ascending:!1});if(i)throw new Error(`Error fetching vaccinations: ${i.message}`);return a||[]},jZ=async e=>{const{data:{user:t}}=await ge.auth.getUser();if(!t)throw new Error("User not authenticated");let n=e.administered_by;if(!n||n.trim()===""){const{data:i}=await ge.from("user_profiles").select("id").eq("id",t.id).single();n=i?t.id:null}const{data:r,error:a}=await ge.from("vaccinations").insert({...e,administered_by:n}).select(`
      *,
      animal:animals(*)
    `).single();if(a)throw new Error(`Error creating vaccination: ${a.message}`);return r},wZ=async(e,t)=>{const{data:n,error:r}=await ge.from("vaccinations").update(t).eq("id",e).select(`
      *,
      animal:animals(*)
    `).single();if(r)throw new Error(`Error updating vaccination: ${r.message}`);return n},NZ=async e=>{const{error:t}=await ge.from("vaccinations").delete().eq("id",e);if(t)throw new Error(`Error deleting vaccination: ${t.message}`)},SZ=async()=>{const{data:e,error:t}=await ge.from("vaccination_protocols").select("*").order("species",{ascending:!0}).order("vaccine_name",{ascending:!0});if(t)throw new Error(`Error fetching vaccination protocols: ${t.message}`);return e||[]},_Z=async e=>{const{data:t,error:n}=await ge.from("vaccination_protocols").insert(e).select().single();if(n)throw new Error(`Error creating vaccination protocol: ${n.message}`);return t},CZ=async(e,t)=>{const{data:n,error:r}=await ge.from("vaccination_protocols").update(t).eq("id",e).select().single();if(r)throw new Error(`Error updating vaccination protocol: ${r.message}`);return n},PZ=async()=>{const{data:e,error:t}=await ge.from("antiparasitics").select(`
      *,
      animal:animals(*)
    `).order("treatment_date",{ascending:!1});if(t)throw new Error(`Error fetching antiparasitics: ${t.message}`);return e||[]},AZ=async e=>{const{data:{user:t}}=await ge.auth.getUser();if(!t)throw new Error("User must be authenticated to create antiparasitic");const n={...e};if(n.effectiveness_rating!==void 0){const i=n.effectiveness_rating;(typeof i!="number"||i<1||i>5||isNaN(i))&&(console.warn("Invalid effectiveness_rating detected, removing from data:",i),delete n.effectiveness_rating)}if(console.log("Final antiparasitic data being sent to database:",n),n.administered_by){const{data:i}=await ge.from("user_profiles").select("id").eq("id",n.administered_by).single();i||(console.warn("administered_by user not found, removing field"),delete n.administered_by)}const{data:r,error:a}=await ge.from("antiparasitics").insert([n]).select(`
      *,
      animal:animals(*)
    `).single();if(a)throw console.error("Database error details:",{code:a.code,message:a.message,details:a.details,hint:a.hint,data:n}),new Error(`Error creating antiparasitic: ${a.message} (Code: ${a.code})`);return r},kZ=async e=>{const{error:t}=await ge.from("antiparasitics").delete().eq("id",e);if(t)throw new Error(`Error deleting antiparasitic: ${t.message}`)},EZ=async()=>{const{data:{user:e}}=await ge.auth.getUser();if(!e)throw new Error("User must be authenticated to fetch antiparasitic protocols");const{data:t,error:n}=await ge.from("antiparasitic_protocols").select("*").eq("user_id",e.id).order("species",{ascending:!0});if(n)throw new Error(`Error fetching antiparasitic protocols: ${n.message}`);return t||[]},TZ=async e=>{const{data:{user:t}}=await ge.auth.getUser();if(!t)throw new Error("User must be authenticated to fetch antiparasitic protocols");const{data:n,error:r}=await ge.from("antiparasitic_protocols").select("*").eq("user_id",t.id).eq("species",e).eq("active",!0).order("parasite_type",{ascending:!0});if(r)throw new Error(`Error fetching antiparasitic protocols for species: ${r.message}`);return n||[]},OZ=async e=>{const{data:{user:t}}=await ge.auth.getUser();if(!t)throw new Error("User must be authenticated to create antiparasitic protocol");const n={...e,user_id:t.id},{data:r,error:a}=await ge.from("antiparasitic_protocols").insert([n]).select("*").single();if(a)throw new Error(`Error creating antiparasitic protocol: ${a.message}`);return r},DZ=async(e,t)=>{const{data:{user:n}}=await ge.auth.getUser();if(!n)throw new Error("User must be authenticated to update antiparasitic protocol");const{data:r,error:a}=await ge.from("antiparasitic_protocols").update(t).eq("id",e).select("*").single();if(a)throw new Error(`Error updating antiparasitic protocol: ${a.message}`);return r},MZ=async()=>{const{data:{user:e}}=await ge.auth.getUser();if(!e)throw new Error("User must be authenticated to fetch appointments");const{data:t,error:n}=await ge.from("clients").select("id").eq("user_id",e.id);if(n)throw new Error(`Error fetching user clients: ${n.message}`);const r=(t==null?void 0:t.map(o=>o.id))||[];if(r.length===0)return[];const{data:a,error:i}=await ge.from("appointments").select(`
      *,
      client:clients(*),
      animal:animals(*)
    `).in("client_id",r).order("appointment_date",{ascending:!0});if(i)throw new Error(`Error fetching appointments: ${i.message}`);return a||[]},IZ=async e=>{const{data:{user:t}}=await ge.auth.getUser();if(!t)throw new Error("User not authenticated");const{data:n,error:r}=await ge.from("appointments").insert({...e,veterinarian_id:e.veterinarian_id||t.id,duration_minutes:e.duration_minutes||30}).select(`
      *,
      client:clients(*),
      animal:animals(*)
    `).single();if(r)throw new Error(`Error creating appointment: ${r.message}`);return n},$Z=async(e,t)=>{const{data:n,error:r}=await ge.from("appointments").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select(`
      *,
      client:clients(*),
      animal:animals(*)
    `).single();if(r)throw new Error(`Error updating appointment: ${r.message}`);return n},RZ=async e=>{const{error:t}=await ge.from("appointments").delete().eq("id",e);if(t)throw new Error(`Error deleting appointment: ${t.message}`)},LZ=async()=>{const{data:{user:e}}=await ge.auth.getUser();if(!e)throw new Error("User must be authenticated to fetch farms");const{data:t,error:n}=await ge.from("farms").select(`
      *,
      clients!inner(
        id,
        first_name,
        last_name,
        user_id
      )
    `).eq("clients.user_id",e.id).order("farm_name",{ascending:!0});if(n)throw new Error(`Error fetching farms: ${n.message}`);return t||[]},FZ=async e=>{const{data:{user:t}}=await ge.auth.getUser();if(!t)throw new Error("User must be authenticated to fetch app settings");const{data:n,error:r}=await ge.from("app_settings").select("*").eq("user_id",t.id).eq("setting_category",e).eq("is_active",!0).order("setting_key",{ascending:!0});if(r)throw new Error(`Error fetching app settings for category: ${r.message}`);return n||[]},Mo=async(e,t)=>{const{data:{user:n}}=await ge.auth.getUser();if(!n)throw new Error("User must be authenticated to fetch app setting");const{data:r,error:a}=await ge.from("app_settings").select("*").eq("user_id",n.id).eq("setting_category",e).eq("setting_key",t).eq("is_active",!0).single();if(a){if(a.code==="PGRST116")return null;throw new Error(`Error fetching app setting: ${a.message}`)}return r},$3=async(e,t,n,r)=>{const{data:{user:a}}=await ge.auth.getUser();if(!a)throw new Error("User must be authenticated to create/update app setting");const{data:i,error:o}=await ge.from("app_settings").update({setting_value:n,description:r,updated_at:new Date().toISOString()}).eq("user_id",a.id).eq("setting_category",e).eq("setting_key",t).select().single();if(!o&&i)return i;const{data:l,error:c}=await ge.from("app_settings").insert([{user_id:a.id,setting_category:e,setting_key:t,setting_value:n,description:r,is_active:!0}]).select().single();if(c)throw new Error(`Error creating app setting: ${c.message}`);return l},BZ=async(e,t)=>{const{data:{user:n}}=await ge.auth.getUser();if(!n)throw new Error("User must be authenticated to delete app setting");const{error:r}=await ge.from("app_settings").update({is_active:!1}).eq("user_id",n.id).eq("setting_category",e).eq("setting_key",t);if(r)throw new Error(`Error deleting app setting: ${r.message}`)},zZ=async()=>{const e=await Mo("clinic","veterinarians");return(e==null?void 0:e.setting_value)||[]},VZ=async e=>{await $3("clinic","veterinarians",e,"List of veterinarians")},Gr={all:["clients"],lists:()=>[...Gr.all,"list"],list:e=>[...Gr.lists(),{filters:e}],details:()=>[...Gr.all,"detail"],detail:e=>[...Gr.details(),e],search:e=>[...Gr.all,"search",e]},ar={all:["animals"],lists:()=>[...ar.all,"list"],list:e=>[...ar.lists(),{filters:e}],details:()=>[...ar.all,"detail"],detail:e=>[...ar.details(),e],byClient:e=>[...ar.all,"client",e],search:e=>[...ar.all,"search",e]},ir={all:["appointments"],lists:()=>[...ir.all,"list"],list:e=>[...ir.lists(),{filters:e}],details:()=>[...ir.all,"detail"],detail:e=>[...ir.details(),e],byAnimal:e=>[...ir.all,"animal",e],byClient:e=>[...ir.all,"client",e]},_c={all:["farms"],lists:()=>[..._c.all,"list"],list:e=>[..._c.lists(),{filters:e}],details:()=>[..._c.all,"detail"],detail:e=>[..._c.details(),e],byClient:e=>[..._c.all,"client",e]},Ql={all:["stats"],clients:()=>[...Ql.all,"clients"]},HS={all:["userProfile"],profile:()=>[...HS.all,"profile"]},vn=()=>Qt({queryKey:Gr.lists(),queryFn:hZ,staleTime:5*60*1e3}),qZ=()=>{const e=yt();return wt({mutationFn:fZ,onSuccess:t=>{e.invalidateQueries({queryKey:Gr.lists()}),e.setQueryData(Gr.detail(t.id),t),e.invalidateQueries({queryKey:Ql.clients()})}})},UZ=()=>{const e=yt();return wt({mutationFn:({id:t,data:n})=>mZ(t,n),onSuccess:t=>{e.setQueryData(Gr.detail(t.id),t),e.invalidateQueries({queryKey:Gr.lists()})}})},WZ=()=>{const e=yt();return wt({mutationFn:pZ,onSuccess:(t,n)=>{e.removeQueries({queryKey:Gr.detail(n)}),e.invalidateQueries({queryKey:Gr.lists()}),e.invalidateQueries({queryKey:ar.byClient(n)}),e.invalidateQueries({queryKey:Ql.clients()})}})},hn=()=>Qt({queryKey:ar.lists(),queryFn:gZ,staleTime:5*60*1e3}),HZ=()=>{const e=yt();return wt({mutationFn:vZ,onSuccess:t=>{e.invalidateQueries({queryKey:ar.lists()}),e.setQueryData(ar.detail(t.id),t),e.invalidateQueries({queryKey:ar.byClient(t.client_id)}),e.invalidateQueries({queryKey:Ql.clients()})}})},KZ=()=>{const e=yt();return wt({mutationFn:({id:t,data:n})=>xZ(t,n),onSuccess:t=>{e.setQueryData(ar.detail(t.id),t),e.invalidateQueries({queryKey:ar.lists()}),e.invalidateQueries({queryKey:ar.byClient(t.client_id)})}})},GZ=()=>{const e=yt();return wt({mutationFn:yZ,onSuccess:(t,n)=>{e.removeQueries({queryKey:ar.detail(n)}),e.invalidateQueries({queryKey:ar.lists()}),e.invalidateQueries({queryKey:Ql.clients()})}})},ws=()=>Qt({queryKey:["consultations"],queryFn:async()=>{try{const{data:e,error:t}=await ge.from("consultations").select(`
            id,
            animal_id,
            client_id,
            veterinarian_id,
            consultation_date,
            consultation_type,
            symptoms,
            diagnosis,
            treatment,
            notes,
            weight,
            temperature,
            heart_rate,
            respiratory_rate,
            photos,
            follow_up_date,
            follow_up_notes,
            status,
            created_at,
            updated_at,
            animal:animals(
              id,
              name,
              species,
              breed,
              color,
              sex,
              weight,
              birth_date,
              microchip_number,
              status
            ),
            client:clients(
              id,
              first_name,
              last_name,
              email,
              phone,
              mobile_phone,
              address,
              city,
              client_type
            )
          `).order("consultation_date",{ascending:!1});if(t)throw console.error("Error fetching consultations:",t),t;return(e||[]).map(n=>({...n,followUp:n.follow_up_notes||null,cost:null,animal:Array.isArray(n.animal)?n.animal[0]:n.animal,client:Array.isArray(n.client)?n.client[0]:n.client}))}catch(e){throw console.error("Failed to fetch consultations:",e),e}},staleTime:5*60*1e3,retry:3,retryDelay:e=>Math.min(1e3*2**e,3e4)}),R3=()=>{const e=yt();return wt({mutationFn:async t=>{try{const{data:{user:n}}=await ge.auth.getUser();if(!n)throw new Error("User not authenticated");const r={animal_id:t.animal_id,client_id:t.client_id,veterinarian_id:n.id,consultation_date:t.consultation_date||new Date().toISOString(),consultation_type:t.consultation_type,symptoms:t.symptoms||null,diagnosis:t.diagnosis||null,treatment:t.treatment||null,notes:t.notes||null,weight:t.weight||null,temperature:t.temperature||null,heart_rate:t.heart_rate||null,respiratory_rate:t.respiratory_rate||null,photos:t.photos||null,follow_up_date:t.follow_up_date||null,follow_up_notes:t.follow_up_notes||null,status:t.status||"completed"},{data:a,error:i}=await ge.from("consultations").insert(r).select(`
            id,
            animal_id,
            client_id,
            veterinarian_id,
            consultation_date,
            consultation_type,
            symptoms,
            diagnosis,
            treatment,
            notes,
            weight,
            temperature,
            heart_rate,
            respiratory_rate,
            photos,
            follow_up_date,
            follow_up_notes,
            status,
            created_at,
            updated_at,
            animal:animals(
              id,
              name,
              species,
              breed,
              color,
              sex,
              weight,
              birth_date,
              microchip_number,
              status
            ),
            client:clients(
              id,
              first_name,
              last_name,
              email,
              phone,
              mobile_phone,
              address,
              city,
              client_type
            )
          `).single();if(i)throw console.error("Error creating consultation:",i),i;return{...a,followUp:a.follow_up_notes||null,cost:null}}catch(n){throw console.error("Failed to create consultation:",n),n}},onSuccess:()=>{e.invalidateQueries({queryKey:["consultations"]}),e.invalidateQueries({queryKey:["dashboard-stats"]})}})},L3=()=>{const e=yt();return wt({mutationFn:async({id:t,data:n})=>{const{data:r,error:a}=await ge.from("consultations").update(n).eq("id",t).select(`
          *,
          animal:animals(*),
          client:clients(*)
        `).single();if(a)throw a;return r},onSuccess:()=>{e.invalidateQueries({queryKey:["consultations"]}),e.invalidateQueries({queryKey:["dashboard-stats"]})}})},YZ=()=>{const e=yt();return wt({mutationFn:async t=>{try{const n=[{table:"prescriptions",field:"consultation_id"},{table:"vaccinations",field:"consultation_id"},{table:"lab_results",field:"consultation_id"},{table:"antiparasitics",field:"consultation_id"}];for(const a of n)try{const{data:i,error:o}=await ge.from(a.table).select("id").eq(a.field,t);if(o){console.warn(`Could not check ${a.table}: ${o.message}`);continue}if(i&&i.length>0){if(a.table==="prescriptions")for(const c of i){const{error:u}=await ge.from("prescription_medications").delete().eq("prescription_id",c.id);u&&console.warn(`Could not delete prescription medications: ${u.message}`)}const{error:l}=await ge.from(a.table).delete().eq(a.field,t);l&&console.warn(`Could not delete from ${a.table}: ${l.message}`)}}catch(i){console.warn(`Error handling ${a.table}:`,i)}const{error:r}=await ge.from("consultations").delete().eq("id",t);if(r)throw console.error(`Database error during consultation deletion: ${r.message}`),new Error(`Failed to delete consultation: ${r.message}`);return{success:!0,id:t}}catch(n){throw console.error("Dynamic deletion failed:",n),new Error(`Deletion failed: ${n.message||"Unknown error"}`)}},onSuccess:()=>{e.invalidateQueries({queryKey:["consultations"]}),e.invalidateQueries({queryKey:["prescriptions"]}),e.invalidateQueries({queryKey:["dashboard-stats"]}),e.invalidateQueries({queryKey:["vaccinations"]}),e.invalidateQueries({queryKey:["lab-results"]})},retry:1})},Xl=()=>Qt({queryKey:["vaccinations"],queryFn:()=>bZ()}),QZ=()=>{const e=yt();return wt({mutationFn:jZ,onSuccess:()=>{e.invalidateQueries({queryKey:["vaccinations"]}),e.invalidateQueries({queryKey:["animals"]})}})},XZ=()=>{const e=yt();return wt({mutationFn:({id:t,data:n})=>wZ(t,n),onSuccess:()=>{e.invalidateQueries({queryKey:["vaccinations"]}),e.invalidateQueries({queryKey:["animals"]})}})},JZ=()=>{const e=yt();return wt({mutationFn:NZ,onSuccess:()=>{e.invalidateQueries({queryKey:["vaccinations"]}),e.invalidateQueries({queryKey:["animals"]})}})},ZZ=()=>Qt({queryKey:["vaccination-protocols"],queryFn:()=>SZ()}),eee=()=>{const e=yt();return wt({mutationFn:_Z,onSuccess:()=>{e.invalidateQueries({queryKey:["vaccination-protocols"]})}})},tee=()=>{const e=yt();return wt({mutationFn:({id:t,data:n})=>CZ(t,n),onSuccess:()=>{e.invalidateQueries({queryKey:["vaccination-protocols"]})}})},wm=()=>Qt({queryKey:["antiparasitics"],queryFn:PZ}),nee=()=>{const e=yt();return wt({mutationFn:AZ,onSuccess:()=>{e.invalidateQueries({queryKey:["antiparasitics"]})}})},ree=()=>{const e=yt();return wt({mutationFn:kZ,onSuccess:()=>{e.invalidateQueries({queryKey:["antiparasitics"]})}})},see=()=>Qt({queryKey:["antiparasitic-protocols"],queryFn:EZ}),aee=e=>Qt({queryKey:["antiparasitic-protocols","by-species",e],queryFn:()=>e?TZ(e):Promise.resolve([]),enabled:!!e}),iee=()=>{const e=yt();return wt({mutationFn:OZ,onSuccess:()=>{e.invalidateQueries({queryKey:["antiparasitic-protocols"]})}})},oee=()=>{const e=yt();return wt({mutationFn:({id:t,updates:n})=>DZ(t,n),onSuccess:()=>{e.invalidateQueries({queryKey:["antiparasitic-protocols"]})}})},lee=()=>Qt({queryKey:["client-stats"],queryFn:async()=>{var i,o,l,c;const[e,t]=await Promise.all([ge.from("clients").select("id, status"),ge.from("animals").select("id, status")]);if(e.error||t.error)throw new Error("Failed to fetch client stats");const n=((i=e.data)==null?void 0:i.filter(u=>u.status==="actif").length)||0;(o=e.data)!=null&&o.length;const r=((l=t.data)==null?void 0:l.length)||0,a=((c=t.data)==null?void 0:c.reduce((u,d)=>(u[d.status]=(u[d.status]||0)+1,u),{}))||{};return{totalClients:n,totalAnimals:r,animalsByStatus:a}},staleTime:5*60*1e3}),Ix=()=>Qt({queryKey:["prescriptions"],queryFn:async()=>{try{const{data:e,error:t}=await ge.from("prescriptions").select(`
            id,
            consultation_id,
            animal_id,
            client_id,
            veterinarian_id,
            prescription_date,
            diagnosis,
            notes,
            status,
            refill_count,
            valid_until,
            created_at,
            updated_at,
            animal:animals(
              id,
              name,
              species,
              breed,
              color,
              sex,
              weight,
              birth_date,
              microchip_number,
              status
            ),
            client:clients(
              id,
              first_name,
              last_name,
              email,
              phone,
              mobile_phone,
              address,
              city,
              client_type
            ),
            medications:prescription_medications(
              id,
              prescription_id,
              stock_item_id,
              medication_name,
              dosage,
              frequency,
              duration,
              quantity,
              instructions,
              route,
              created_at
            )
          `).order("prescription_date",{ascending:!1});if(t)throw console.error("Error fetching prescriptions:",t),t;return(e||[]).map(n=>({...n,animal:Array.isArray(n.animal)?n.animal[0]:n.animal,client:Array.isArray(n.client)?n.client[0]:n.client}))}catch(e){throw console.error("Dynamic prescription fetch failed:",e),e}},staleTime:5*60*1e3,retry:3,retryDelay:e=>Math.min(1e3*2**e,3e4)}),cee=e=>Qt({queryKey:["prescriptions","animal",e],queryFn:async()=>{try{const{data:t,error:n}=await ge.from("prescriptions").select(`
            id,
            consultation_id,
            animal_id,
            client_id,
            veterinarian_id,
            prescription_date,
            diagnosis,
            notes,
            status,
            refill_count,
            valid_until,
            created_at,
            updated_at,
            animal:animals(
              id,
              name,
              species,
              breed,
              color,
              sex,
              weight,
              birth_date,
              microchip_number,
              status
            ),
            client:clients(
              id,
              first_name,
              last_name,
              email,
              phone,
              mobile_phone,
              address,
              city,
              client_type
            ),
            medications:prescription_medications(
              id,
              prescription_id,
              stock_item_id,
              medication_name,
              dosage,
              frequency,
              duration,
              quantity,
              instructions,
              route,
              created_at
            )
          `).eq("animal_id",e).order("prescription_date",{ascending:!1});if(n)throw console.error("Error fetching prescriptions by animal:",n),n;return t||[]}catch(t){throw console.error("Dynamic prescription fetch by animal failed:",t),t}},enabled:!!e,staleTime:5*60*1e3,retry:2}),uee=()=>{const e=yt();return wt({mutationFn:async t=>{try{const{data:{user:n}}=await ge.auth.getUser();if(!n)throw new Error("User not authenticated");const{medications:r,...a}=t,i={consultation_id:a.consultation_id,animal_id:a.animal_id,client_id:a.client_id,veterinarian_id:a.veterinarian_id||n.id,prescription_date:a.prescription_date||new Date().toISOString(),diagnosis:a.diagnosis||null,notes:a.notes||null,status:a.status||"active",refill_count:a.refill_count||0,valid_until:a.valid_until||null},{data:o,error:l}=await ge.from("prescriptions").insert(i).select(`
            id,
            consultation_id,
            animal_id,
            client_id,
            veterinarian_id,
            prescription_date,
            diagnosis,
            notes,
            status,
            refill_count,
            valid_until,
            created_at,
            updated_at,
            animal:animals(
              id,
              name,
              species,
              breed,
              color,
              sex,
              weight,
              birth_date,
              microchip_number,
              status
            ),
            client:clients(
              id,
              first_name,
              last_name,
              email,
              phone,
              mobile_phone,
              address,
              city,
              client_type
            )
          `).single();if(l)throw console.error("Error creating prescription:",l),new Error(`Error creating prescription: ${l.message}`);if(r&&r.length>0){const c=r.map(h=>({prescription_id:o.id,stock_item_id:h.stock_item_id||null,medication_name:h.medication_name,dosage:h.dosage||null,frequency:h.frequency||null,duration:h.duration||null,quantity:h.quantity||1,instructions:h.instructions||null,route:h.route||null})),{data:u,error:d}=await ge.from("prescription_medications").insert(c).select();if(d)throw console.error("Error creating prescription medications:",d),await ge.from("prescriptions").delete().eq("id",o.id),new Error(`Error creating prescription medications: ${d.message}`)}return{...o,medications:r||[]}}catch(n){throw console.error("Dynamic prescription creation failed:",n),n}},onSuccess:()=>{e.invalidateQueries({queryKey:["prescriptions"]}),e.invalidateQueries({queryKey:["consultations"]}),e.invalidateQueries({queryKey:["dashboard-stats"]}),e.invalidateQueries({queryKey:["stock-items"]})},retry:1})},$x=()=>Qt({queryKey:["stock-items"],queryFn:async()=>{try{const{data:e,error:t}=await ge.from("stock_items").select(`
            id,
            name,
            description,
            category,
            unit,
            current_quantity,
            minimum_quantity,
            maximum_quantity,
            unit_cost,
            selling_price,
            supplier,
            batch_number,
            expiration_date,
            location,
            requires_prescription,
            active,
            created_at,
            updated_at
          `).eq("active",!0).order("name");if(t)throw console.error("Error fetching stock items:",t),t;return e||[]}catch(e){throw console.error("Dynamic stock items fetch failed:",e),e}},staleTime:5*60*1e3,retry:3,retryDelay:e=>Math.min(1e3*2**e,3e4)}),dee=()=>Qt({queryKey:HS.profile(),queryFn:Ex,staleTime:5*60*1e3}),hee=()=>{const e=yt();return wt({mutationFn:t=>aJ(t),onSuccess:t=>{e.setQueryData(HS.profile(),t),e.invalidateQueries({queryKey:["auth","session"]})}})},Jl=()=>Qt({queryKey:ir.lists(),queryFn:MZ,staleTime:2*60*1e3}),F3=()=>{const e=yt();return wt({mutationFn:IZ,onSuccess:t=>{e.invalidateQueries({queryKey:ir.lists()}),t.animal_id&&e.invalidateQueries({queryKey:ir.byAnimal(t.animal_id)}),t.client_id&&(e.invalidateQueries({queryKey:ir.byClient(t.client_id)}),e.invalidateQueries({queryKey:Gr.detail(t.client_id)})),e.invalidateQueries({queryKey:Ql.clients()})}})},fee=()=>{const e=yt();return wt({mutationFn:({id:t,data:n})=>$Z(t,n),onSuccess:t=>{e.invalidateQueries({queryKey:ir.lists()}),e.setQueryData(ir.lists(),n=>n?n.map(r=>r.id===t.id?t:r):[]),t.animal_id&&e.invalidateQueries({queryKey:ir.byAnimal(t.animal_id)}),t.client_id&&e.invalidateQueries({queryKey:ir.byClient(t.client_id)})}})},mee=()=>{const e=yt();return wt({mutationFn:RZ,onSuccess:(t,n)=>{e.setQueryData(ir.lists(),r=>r?r.filter(a=>a.id!==n):[]),e.invalidateQueries({queryKey:ir.lists()}),e.invalidateQueries({queryKey:Ql.clients()})}})},B3=()=>Qt({queryKey:_c.lists(),queryFn:LZ,staleTime:5*60*1e3}),fn={animal_species:["Chien","Chat","Oiseau","Lapin","Furet","Bovin","Ovin","Caprin","Porc","Cheval","Âne","Autre"],animal_breeds:{Chien:["Labrador","Golden Retriever","Berger Allemand","Bulldog","Yorkshire Terrier","Chihuahua","Rottweiler","Poodle","Boxer","Husky"],Chat:["Persan","Siamois","Maine Coon","British Shorthair","Ragdoll","Bengal","Abyssin","Sphinx","Scottish Fold","Chartreux"],Oiseau:["Canari","Perruche","Cockatiel","Inséparable","Perroquet","Cacatoès","Conure","Calopsitte"],Lapin:["Nain","Bélier","Angora","Rex","Géant des Flandres","Hollandais"],Bovin:["Holstein","Montbéliarde","Charolaise","Limousine","Blonde d'Aquitaine","Normande"],Ovin:["Lacaune","Île-de-France","Texel","Suffolk","Mérinos","Dorper"],Caprin:["Saanen","Alpine","Poitevine","Boer","Angora","Nubienne"],Cheval:["Pur-sang","Arabe","Quarter Horse","Frison","Andalou","Trotteur"]},animal_colors:["Noir","Blanc","Marron","Gris","Roux","Crème","Tacheté","Tricolore","Bringé","Fauve"],client_types:["Particulier","Éleveur","Ferme","Refuge","Clinique","Zoo"],consultation_types:["Consultation générale","Vaccination","Chirurgie","Urgence","Contrôle post-opératoire","Examen de santé","Stérilisation","Dentaire","Dermatologie","Cardiologie","Ophtalmologie","Orthopédie"],appointment_types:["Consultation","Vaccination","Chirurgie","Urgence","Contrôle","Toilettage","Radiographie","Échographie","Analyses"],medication_categories:["Antibiotiques","Anti-inflammatoires","Antiparasitaires","Vaccins","Anesthésiques","Vitamines","Compléments","Dermatologie","Cardiologie","Neurologie"],vaccination_types:["CHPPI-L (Chien)","Rage","Toux du chenil","TCL (Chat)","Leucose féline","FIV","Myxomatose (Lapin)","VHD (Lapin)"],parasite_types:["Puces","Tiques","Vers ronds","Vers plats","Giardia","Coccidies","Acariens","Poux"],farm_types:["Bovin laitier","Bovin viande","Porcin","Avicole","Ovin","Caprin","Équin","Apiculture","Aquaculture","Cuniculture","Mixte"],payment_methods:["Espèces","Carte bancaire","Chèque","Virement","Autre"],currencies:["MAD","EUR","USD"],countries:["Maroc","France","Espagne","Algérie","Tunisie"],cities_morocco:["Rabat","Casablanca","Fès","Marrakech","Agadir","Tanger","Meknès","Oujda","Kenitra","Tétouan"]},pee=e=>Qt({queryKey:["app-settings",e],queryFn:()=>FZ(e),enabled:!!e}),Io=()=>Qt({queryKey:["app-setting","animals","species"],queryFn:()=>Mo("animals","species"),select:e=>(e==null?void 0:e.setting_value)||fn.animal_species}),z3=e=>Qt({queryKey:["app-setting","animals","breeds"],queryFn:()=>Mo("animals","breeds"),select:t=>(t==null?void 0:t.setting_value)||fn.animal_breeds}),V3=()=>Qt({queryKey:["app-setting","animals","colors"],queryFn:()=>Mo("animals","colors"),select:e=>(e==null?void 0:e.setting_value)||fn.animal_colors}),q3=()=>Qt({queryKey:["app-setting","clients","types"],queryFn:()=>Mo("clients","types"),select:e=>(e==null?void 0:e.setting_value)||fn.client_types}),KS=()=>Qt({queryKey:["app-setting","appointments","types"],queryFn:()=>Mo("appointments","types"),select:e=>(e==null?void 0:e.setting_value)||fn.appointment_types}),U3=()=>Qt({queryKey:["app-setting","vaccinations","types"],queryFn:()=>Mo("vaccinations","types"),select:e=>(e==null?void 0:e.setting_value)||fn.vaccination_types}),W3=()=>Qt({queryKey:["app-setting","parasites","types"],queryFn:()=>Mo("parasites","types"),select:e=>(e==null?void 0:e.setting_value)||fn.parasite_types}),gee=()=>Qt({queryKey:["veterinarian-settings"],queryFn:zZ}),H3=()=>{const e=yt();return wt({mutationFn:async({category:t,key:n,value:r,description:a})=>$3(t,n,r,a),onSuccess:(t,n)=>{e.invalidateQueries({queryKey:["app-setting",n.category,n.key]}),e.invalidateQueries({queryKey:["app-settings",n.category]}),e.invalidateQueries({queryKey:["app-settings"]})}})},vee=()=>{const e=yt();return wt({mutationFn:({category:t,key:n})=>BZ(t,n),onSuccess:()=>{e.invalidateQueries({queryKey:["app-settings"]})}})},xee=()=>{const e=yt();return wt({mutationFn:VZ,onSuccess:()=>{e.invalidateQueries({queryKey:["veterinarian-settings"]})}})},yee=()=>{const e=H3();return{initializeDefaults:async()=>{const n=[{category:"animals",key:"species",value:fn.animal_species,description:"Types d'espèces animales"},{category:"animals",key:"breeds",value:fn.animal_breeds,description:"Races par espèce"},{category:"animals",key:"colors",value:fn.animal_colors,description:"Couleurs des animaux"},{category:"clients",key:"types",value:fn.client_types,description:"Types de clients"},{category:"consultations",key:"types",value:fn.consultation_types,description:"Types de consultations"},{category:"appointments",key:"types",value:fn.appointment_types,description:"Types de rendez-vous"},{category:"medications",key:"categories",value:fn.medication_categories,description:"Catégories de médicaments"},{category:"vaccinations",key:"types",value:fn.vaccination_types,description:"Types de vaccinations"},{category:"parasites",key:"types",value:fn.parasite_types,description:"Types de parasites"},{category:"farms",key:"types",value:fn.farm_types,description:"Types de fermes"},{category:"payments",key:"methods",value:fn.payment_methods,description:"Méthodes de paiement"}];for(const r of n)try{await e.mutateAsync(r)}catch(a){console.error(`Failed to initialize setting ${r.category}.${r.key}:`,a)}},isLoading:e.isPending}};function Rx({open:e,onOpenChange:t}){const n=qZ(),{toast:r}=at(),{data:a=[],isLoading:i}=q3(),[o,l]=j.useState({first_name:"",last_name:"",email:"",phone:"",mobile_phone:"",address:"",city:"",postal_code:"",country:"Maroc",notes:"",client_type:"particulier"}),c=h=>{const{id:f,value:m}=h.target;l(v=>({...v,[f]:m}))},u=(h,f)=>{l(m=>({...m,[h]:f}))},d=async h=>{h.preventDefault();try{await n.mutateAsync(o),r({title:"Client ajouté",description:`${o.first_name} ${o.last_name} a été ajouté et sauvegardé avec succès.`}),l({first_name:"",last_name:"",email:"",phone:"",mobile_phone:"",address:"",city:"",postal_code:"",country:"Maroc",notes:"",client_type:a.length>0?a[0].toLowerCase():"particulier"}),t(!1)}catch{r({title:"Erreur",description:"Une erreur s'est produite lors de l'ajout du client.",variant:"destructive"})}};return s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Xe,{className:"sm:max-w-[500px]",children:[s.jsxs(tt,{children:[s.jsx(nt,{children:"Nouveau Client"}),s.jsx(Dt,{children:"Ajoutez un nouveau client à votre base de données."})]}),s.jsxs("form",{onSubmit:d,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"first_name",children:"Prénom *"}),s.jsx(J,{id:"first_name",value:o.first_name,onChange:c,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"last_name",children:"Nom *"}),s.jsx(J,{id:"last_name",value:o.last_name,onChange:c,required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"email",children:"Email"}),s.jsx(J,{id:"email",type:"email",value:o.email||"",onChange:c})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"phone",children:"Téléphone *"}),s.jsx(J,{id:"phone",value:o.phone||"",onChange:c,required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"address",children:"Adresse"}),s.jsx(J,{id:"address",value:o.address||"",onChange:c})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"city",children:"Ville"}),s.jsx(J,{id:"city",value:o.city||"",onChange:c})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"postal_code",children:"Code postal"}),s.jsx(J,{id:"postal_code",value:o.postal_code||"",onChange:c})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"mobile_phone",children:"Téléphone portable"}),s.jsx(J,{id:"mobile_phone",value:o.mobile_phone||"",onChange:c,placeholder:"Numéro de téléphone portable"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"client_type",children:"Type de client"}),s.jsxs(be,{value:o.client_type,onValueChange:h=>u("client_type",h),children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Sélectionner le type"})}),s.jsx(ye,{children:a.map(h=>s.jsx(q,{value:h.toLowerCase(),children:h},h))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"notes",children:"Notes"}),s.jsx(We,{id:"notes",value:o.notes||"",onChange:c,placeholder:"Notes additionnelles..."})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(L,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsxs(L,{type:"submit",disabled:n.isPending,children:[n.isPending&&s.jsx(Mn,{className:"mr-2 h-4 w-4 animate-spin"}),"Ajouter Client"]})]})]})]})})}function bee({open:e,onOpenChange:t,prefillClientId:n,prefillPetId:r,prefillType:a,prefillReason:i}){const{data:o=[]}=vn(),{data:l=[]}=hn(),c=F3(),{toast:u}=at(),{data:d=[],isLoading:h}=KS(),[f,m]=j.useState({clientId:n||"",animalId:r||"",date:"",time:"",appointmentType:a||"consultation",notes:i||""}),[v,p]=j.useState([]);j.useEffect(()=>{if(n&&e){const S=l.filter(_=>_.client_id===n);p(S)}},[n,e,l]);const g=async S=>{if(S.preventDefault(),!f.clientId||!f.animalId||!f.date||!f.time){u({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires",variant:"destructive"});return}try{const _=new Date(`${f.date}T${f.time}:00`);await c.mutateAsync({client_id:f.clientId,animal_id:f.animalId,appointment_date:_.toISOString(),appointment_type:f.appointmentType,notes:f.notes||void 0,duration_minutes:30}),u({title:"Succès",description:"Rendez-vous créé avec succès"}),m({clientId:"",animalId:"",date:"",time:"",appointmentType:"consultation",notes:""}),p([]),t(!1)}catch(_){console.error("Error creating appointment:",_),u({title:"Erreur",description:"Impossible de créer le rendez-vous",variant:"destructive"})}},x=S=>{m(C=>({...C,clientId:S,animalId:""}));const _=l.filter(C=>C.client_id===S);p(_)},y=S=>`${S.first_name} ${S.last_name}`,b=S=>`${S.name} (${S.species})`,N=()=>new Date().toISOString().split("T")[0],w=()=>{const S=new Date;return S.setHours(S.getHours()+1,0,0,0),S.toTimeString().slice(0,5)};return s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Xe,{className:"sm:max-w-[500px] max-h-[90vh] overflow-y-auto",children:[s.jsxs(tt,{children:[s.jsxs(nt,{className:"flex items-center gap-2",children:[s.jsx(Ze,{className:"h-5 w-5"}),"Nouveau Rendez-vous"]}),s.jsx(Dt,{children:"Planifiez un nouveau rendez-vous pour un animal"})]}),s.jsxs("form",{onSubmit:g,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(M,{htmlFor:"client",className:"flex items-center gap-2",children:[s.jsx(Vn,{className:"h-4 w-4"}),"Client *"]}),s.jsxs(be,{value:f.clientId,onValueChange:x,required:!0,children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Sélectionner un client"})}),s.jsx(ye,{children:o.map(S=>s.jsx(q,{value:S.id,children:y(S)},S.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(M,{htmlFor:"animal",className:"flex items-center gap-2",children:[s.jsx(pt,{className:"h-4 w-4"}),"Animal *"]}),s.jsxs(be,{value:f.animalId,onValueChange:S=>m(_=>({..._,animalId:S})),disabled:!f.clientId,required:!0,children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Sélectionner un animal"})}),s.jsx(ye,{children:v.map(S=>s.jsx(q,{value:S.id,children:b(S)},S.id))})]}),!f.clientId&&s.jsx("p",{className:"text-sm text-muted-foreground",children:"Sélectionnez d'abord un client"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(M,{htmlFor:"date",className:"flex items-center gap-2",children:[s.jsx(Ze,{className:"h-4 w-4"}),"Date *"]}),s.jsx(J,{id:"date",type:"date",value:f.date||N(),onChange:S=>m(_=>({..._,date:S.target.value})),min:new Date().toISOString().split("T")[0],required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(M,{htmlFor:"time",className:"flex items-center gap-2",children:[s.jsx(tn,{className:"h-4 w-4"}),"Heure *"]}),s.jsx(J,{id:"time",type:"time",value:f.time||w(),onChange:S=>m(_=>({..._,time:S.target.value})),required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"appointmentType",children:"Type de rendez-vous"}),s.jsxs(be,{value:f.appointmentType,onValueChange:S=>m(_=>({..._,appointmentType:S})),children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Type de rendez-vous"})}),s.jsx(ye,{children:d.map(S=>s.jsx(q,{value:S.toLowerCase().replace(/\s+/g,"-"),children:S},S))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"notes",children:"Notes (optionnel)"}),s.jsx(We,{id:"notes",placeholder:"Notes additionnelles sur le rendez-vous...",value:f.notes,onChange:S=>m(_=>({..._,notes:S.target.value})),rows:3})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[s.jsx(L,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:c.isPending,children:"Annuler"}),s.jsx(L,{type:"submit",disabled:c.isPending,className:"gap-2",children:c.isPending?s.jsxs(s.Fragment,{children:[s.jsx(Mn,{className:"h-4 w-4 animate-spin"}),"Création..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ze,{className:"h-4 w-4"}),"Créer le rendez-vous"]})})]})]})]})})}function Lx({open:e,onOpenChange:t}){const{data:n=[]}=vn(),{data:r=[]}=hn(),a=HZ(),{toast:i}=at(),{data:o=[]}=Io(),{data:l={}}=z3(),{data:c=[]}=V3(),[u,d]=j.useState({}),[h,f]=j.useState(!1),[m,v]=j.useState({name:"",type:"",breed:"",gender:"",birthDate:"",weight:"",color:"",ownerId:"",microchip:"",medicalNotes:"",photo:"",status:"vivant",hasPedigree:!1,officialName:"",pedigreeNumber:"",breeder:"",fatherName:"",fatherPedigree:"",fatherBreed:"",fatherTitles:"",motherName:"",motherPedigree:"",motherBreed:"",motherTitles:"",pedigreePhoto:""}),p=m.type&&l[m.type]?l[m.type]:[],g=()=>{const N={};if(m.name.trim()?m.name.trim().length<2?N.name="Le nom doit contenir au moins 2 caractères":m.name.trim().length>50&&(N.name="Le nom ne peut pas dépasser 50 caractères"):N.name="Le nom de l'animal est obligatoire",m.type||(N.type="Le type d'animal est obligatoire"),m.ownerId||(N.ownerId="Le propriétaire est obligatoire"),m.weight&&(isNaN(Number(m.weight))||Number(m.weight)<=0)&&(N.weight="Le poids doit être un nombre positif"),m.weight&&Number(m.weight)>1e3&&(N.weight="Le poids semble anormalement élevé (max: 1000kg)"),m.microchip&&m.microchip.trim()&&(/^[0-9A-Fa-f]{15}$/.test(m.microchip.trim())||(N.microchip="Le numéro de puce doit contenir exactement 15 caractères alphanumériques"),r.find(_=>_.microchip_number===m.microchip.trim())&&(N.microchip="Un animal avec ce numéro de puce existe déjà")),m.birthDate){const w=new Date(m.birthDate);w>new Date&&(N.birthDate="La date de naissance ne peut pas être dans le futur");const _=new Date;_.setFullYear(_.getFullYear()-30),w<_&&(N.birthDate="La date de naissance semble trop ancienne")}return N},x=N=>{const{id:w,value:S}=N.target;v(_=>({..._,[w]:S})),u[w]&&d(_=>{const C={..._};return delete C[w],C})},y=(N,w)=>{v(S=>({...S,[N]:w})),u[N]&&d(S=>{const _={...S};return delete _[N],_})},b=async N=>{var S,_,C,P;N.preventDefault();const w=g();if(d(w),Object.keys(w).length>0){i({title:"Erreurs de validation",description:"Veuillez corriger les erreurs dans le formulaire",variant:"destructive"});return}f(!0);try{const A={client_id:m.ownerId,name:m.name.trim(),species:m.type,breed:((S=m.breed)==null?void 0:S.trim())||void 0,color:((_=m.color)==null?void 0:_.trim())||void 0,sex:m.gender==="male"?"Mâle":m.gender==="female"?"Femelle":"Inconnu",weight:m.weight?Number(m.weight):void 0,birth_date:m.birthDate||void 0,...m.microchip&&m.microchip.trim()?{microchip_number:m.microchip.trim()}:{},notes:((C=m.medicalNotes)==null?void 0:C.trim())||void 0,photo_url:((P=m.photo)==null?void 0:P.trim())||void 0,status:m.status==="healthy"?"vivant":m.status==="urgent"?"décédé":"perdu"};await a.mutateAsync(A),i({title:"Animal ajouté avec succès",description:`${m.name} a été ajouté et sauvegardé dans la base de données.`}),v({name:"",type:"",breed:"",gender:"",birthDate:"",weight:"",color:"",ownerId:"",microchip:"",medicalNotes:"",photo:"",status:"vivant",hasPedigree:!1,officialName:"",pedigreeNumber:"",breeder:"",fatherName:"",fatherPedigree:"",fatherBreed:"",fatherTitles:"",motherName:"",motherPedigree:"",motherBreed:"",motherTitles:"",pedigreePhoto:""}),d({}),t(!1)}catch(A){console.error("Error creating animal:",A);let O="Une erreur inattendue s'est produite";if(A instanceof Error){const E=A.message.toLowerCase();E.includes("microchip")||E.includes("unique")?(O="Ce numéro de puce électronique est déjà utilisé par un autre animal",d({microchip:O})):E.includes("client")||E.includes("foreign key")?(O="Le propriétaire sélectionné n'est plus valide. Veuillez en choisir un autre.",d({ownerId:O})):E.includes("name")||E.includes("not null")?O="Tous les champs obligatoires doivent être remplis":E.includes("authentication")||E.includes("not authenticated")?O="Votre session a expiré. Veuillez vous reconnecter.":E.includes("network")||E.includes("connection")?O="Problème de connexion. Vérifiez votre connexion internet.":E.includes("permission")||E.includes("access")?O="Vous n'avez pas les permissions nécessaires pour effectuer cette action.":A.message.includes("Error creating animal:")?O=A.message.replace("Error creating animal:","").trim():O=A.message}i({title:"Erreur lors de l'ajout de l'animal",description:O,variant:"destructive"})}finally{f(!1)}};return s.jsx(et,{open:e,onOpenChange:N=>{t(N),N||(d({}),f(!1))},children:s.jsxs(Xe,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto",children:[s.jsxs(tt,{children:[s.jsx(nt,{children:"Nouvel Animal"}),s.jsx(Dt,{children:"Ajoutez un nouvel animal à votre base de données."})]}),s.jsxs("form",{onSubmit:b,className:"space-y-4",children:[Object.keys(u).length>0&&s.jsxs(gf,{variant:"destructive",children:[s.jsx(pn,{className:"h-4 w-4"}),s.jsxs(vf,{children:["Veuillez corriger les erreurs suivantes :",s.jsx("ul",{className:"mt-2 ml-4 list-disc",children:Object.values(u).map((N,w)=>s.jsx("li",{className:"text-sm",children:N},w))})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"name",className:u.name?"text-destructive":"",children:"Nom de l'animal *"}),s.jsx(J,{id:"name",value:m.name,onChange:x,required:!0,className:u.name?"border-destructive focus:border-destructive":""}),u.name&&s.jsx("p",{className:"text-sm text-destructive",children:u.name})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{className:u.type?"text-destructive":"",children:"Type d'animal *"}),s.jsxs(be,{value:m.type,onValueChange:N=>y("type",N),children:[s.jsx(xe,{className:u.type?"border-destructive focus:border-destructive":"",children:s.jsx(je,{placeholder:"Sélectionner le type"})}),s.jsx(ye,{children:o.map(N=>s.jsx(q,{value:N,children:N},N))})]}),u.type&&s.jsx("p",{className:"text-sm text-destructive",children:u.type})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"breed",children:"Race"}),s.jsxs(be,{value:m.breed,onValueChange:N=>y("breed",N),children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Sélectionner la race"})}),s.jsx(ye,{children:p.length>0?p.map(N=>s.jsx(q,{value:N,children:N},N)):s.jsx(q,{value:"not-available",disabled:!0,children:m.type?"Aucune race disponible":"Sélectionnez d'abord un type"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Sexe"}),s.jsxs(be,{value:m.gender,onValueChange:N=>y("gender",N),children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Sélectionner le sexe"})}),s.jsxs(ye,{children:[s.jsx(q,{value:"male",children:"Mâle"}),s.jsx(q,{value:"female",children:"Femelle"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"birthDate",className:u.birthDate?"text-destructive":"",children:"Date de naissance"}),s.jsx(J,{id:"birthDate",type:"date",value:m.birthDate,onChange:x,max:new Date().toISOString().split("T")[0],className:u.birthDate?"border-destructive focus:border-destructive":""}),u.birthDate&&s.jsx("p",{className:"text-sm text-destructive",children:u.birthDate})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"weight",className:u.weight?"text-destructive":"",children:"Poids (kg)"}),s.jsx(J,{id:"weight",value:m.weight,onChange:x,type:"number",step:"0.1",min:"0",max:"1000",placeholder:"Ex: 5.2",className:u.weight?"border-destructive focus:border-destructive":""}),u.weight&&s.jsx("p",{className:"text-sm text-destructive",children:u.weight})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"color",children:"Couleur"}),s.jsxs(be,{value:m.color,onValueChange:N=>y("color",N),children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Sélectionner la couleur"})}),s.jsx(ye,{children:c.map(N=>s.jsx(q,{value:N,children:N},N))})]})]}),s.jsx("div",{className:"space-y-2"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{className:u.ownerId?"text-destructive":"",children:"Propriétaire *"}),n.length===0?s.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:s.jsx("p",{className:"text-yellow-800 text-sm",children:"Aucun client disponible. Veuillez d'abord ajouter un client."})}):s.jsxs(be,{value:m.ownerId.toString(),onValueChange:N=>y("ownerId",N),children:[s.jsx(xe,{className:u.ownerId?"border-destructive focus:border-destructive":"",children:s.jsx(je,{placeholder:"Sélectionner le propriétaire"})}),s.jsx(ye,{children:n.map(N=>s.jsxs(q,{value:N.id.toString(),children:[N.first_name," ",N.last_name," - ",N.email]},N.id))})]}),u.ownerId&&s.jsx("p",{className:"text-sm text-destructive",children:u.ownerId})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"microchip",className:u.microchip?"text-destructive":"",children:"Numéro de puce électronique"}),s.jsx(J,{id:"microchip",value:m.microchip,onChange:x,className:u.microchip?"border-destructive focus:border-destructive":"",placeholder:"15 caractères alphanumériques"}),u.microchip&&s.jsx("p",{className:"text-sm text-destructive",children:u.microchip})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"medicalNotes",children:"Notes médicales"}),s.jsx(We,{id:"medicalNotes",value:m.medicalNotes,onChange:x,placeholder:"Allergies, conditions médicales, notes importantes..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"État de santé"}),s.jsxs(be,{value:m.status,onValueChange:N=>y("status",N),children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Sélectionner l'état de santé"})}),s.jsxs(ye,{children:[s.jsx(q,{value:"healthy",children:"En bonne santé"}),s.jsx(q,{value:"treatment",children:"En traitement"}),s.jsx(q,{value:"urgent",children:"Urgent"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Photo de l'animal"}),s.jsx("input",{type:"file",accept:"image/*",onChange:async N=>{var _;const w=(_=N.target.files)==null?void 0:_[0];if(!w)return;const S=new FileReader;S.onload=()=>v(C=>({...C,photo:S.result})),S.readAsDataURL(w)}}),m.photo&&s.jsx("img",{src:m.photo,alt:"preview",className:"h-24 w-24 object-cover rounded"})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(L,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:h,children:"Annuler"}),s.jsxs(L,{type:"submit",disabled:h||Object.keys(u).length>0,children:[h&&s.jsx(Mn,{className:"h-4 w-4 animate-spin mr-2"}),h?"Ajout en cours...":"Ajouter Animal"]})]})]})]})})}const xp="vetpro-clinicSettings",K3={farmTypes:["Bovin laitier","Bovin viande","Porcin","Avicole","Ovin","Caprin","Équin","Apiculture","Aquaculture","Cuniculture","Mixte"],animalCategories:["Bovins laitiers","Bovins à viande","Porcs","Poules pondeuses","Poulets de chair","Ovins","Caprins","Chevaux","Lapins","Abeilles","Poissons"],breedsByCategory:{"Bovins laitiers":["Holstein","Prim'Holstein","Montbéliarde","Normande","Simmental"],"Bovins à viande":["Charolaise","Limousine","Blonde d'Aquitaine","Angus","Salers"],Porcs:["Large White","Landrace","Piétrain","Duroc","Hampshire"],"Poules pondeuses":["ISA Brown","Lohmann Brown","Hy-Line","Novogen","Dekalb"],"Poulets de chair":["Cobb 500","Ross 308","Hubbard","Arbor Acres"],Ovins:["Lacaune","Brebis laitière","Ile-de-France","Texel","Suffolk"],Caprins:["Saanen","Alpine","Poitevine","Boer","Angora"],Chevaux:["Pur-sang","Trotteur","Selle français","Arabe","Quarter Horse"],Lapins:["Néo-Zélandais","Californien","Fauve de Bourgogne","Géant des Flandres"],Abeilles:["Abeille noire","Buckfast","Carnica","Caucasienne"],Poissons:["Truite arc-en-ciel","Saumon","Carpe","Bar","Daurade"]},certificationTypes:["Agriculture Biologique","Label Rouge","AOC/AOP","IGP","Haute Valeur Environnementale","Bien-être animal","Global GAP","IFS Food","BRC Food","Œufs de France"],equipmentTypes:["Tracteur","Moissonneuse","Épandeur","Charrue","Système de traite","Tank à lait","Système d'alimentation automatique","Ventilation","Générateur","Système d'irrigation","Matériel de récolte"],defaultSurfaceUnit:"hectares",defaultCoordinateFormat:"decimal"},G3={clients:"table",pets:"cards",consultations:"table",appointments:"table",prescriptions:"table",farms:"cards",vaccinations:"table",antiparasitics:"table"},Y3={openingTime:"08:00",closingTime:"18:00",slotDuration:30,lunchBreakStart:"12:00",lunchBreakEnd:"13:00",workingDays:["monday","tuesday","wednesday","thursday","friday","saturday"]},gw=[{id:1,name:"Dr. Jean Dupont",isActive:!0},{id:2,name:"Dr. Marie Martin",isActive:!0},{id:3,name:"Pr. Ahmed El Alaoui",isActive:!0}],yp={clinicName:"",address:"",phone:"",email:"",website:"",footerText:"",logo:"/placeholder.svg",currency:"MAD",species:"",showClinicInfo:!0,showVetsInfo:!0,veterinarians:gw,farmManagement:K3,displayPreferences:G3,defaultConsultationPrice:150,scheduleSettings:Y3},Q3=j.createContext(void 0),jee=({children:e})=>{const[t,n]=j.useState(yp);j.useEffect(()=>{const a=localStorage.getItem(xp);if(a)try{const i=JSON.parse(a),o={...yp,...i,veterinarians:i.veterinarians&&i.veterinarians.some(l=>l.name==="Dr. Martin"||l.name==="Dr. Dupont")?gw:i.veterinarians||gw,farmManagement:{...K3,...i.farmManagement},displayPreferences:{...G3,...i.displayPreferences},scheduleSettings:{...Y3,...i.scheduleSettings}};n(o),localStorage.setItem(xp,JSON.stringify(o))}catch(i){console.error("Erreur lors du chargement des paramètres:",i),n(yp)}else localStorage.setItem(xp,JSON.stringify(yp))},[]);const r=a=>{n(a),localStorage.setItem(xp,JSON.stringify(a))};return s.jsx(Q3.Provider,{value:{settings:t,updateSettings:r},children:e})};//!/ note: AD - not important
const Pt=()=>{const e=j.useContext(Q3);if(!e)throw new Error("useSettings must be used within SettingsProvider");return e};function Fx({open:e,onOpenChange:t,prefillData:n}){var N,w;const{data:r=[],isLoading:a}=vn(),{data:i=[],isLoading:o}=hn(),l=R3(),{toast:c}=at();Pt();const[u,d]=j.useState(!1),[h,f]=j.useState(!1),[m,v]=j.useState({clientId:(n==null?void 0:n.clientId)||"",clientName:"",animalId:(n==null?void 0:n.animalId)||"",animalName:"",date:n!=null&&n.consultation_date?new Date(n.consultation_date).toISOString().split("T")[0]:"",weight:((N=n==null?void 0:n.weight)==null?void 0:N.toString())||"",temperature:((w=n==null?void 0:n.temperature)==null?void 0:w.toString())||"",symptoms:(n==null?void 0:n.symptoms)||"",diagnosis:(n==null?void 0:n.diagnosis)||"",treatment:(n==null?void 0:n.treatment)||"",followUp:(n==null?void 0:n.follow_up_notes)||"",notes:(n==null?void 0:n.notes)||"",photos:(n==null?void 0:n.photos)||[]}),p=i.filter(S=>S.client_id===m.clientId),g=new Date().toISOString().split("T")[0],x=S=>{v(_=>({..._,[S.target.id]:S.target.value}))},y=(S,_)=>{if(S==="clientId"){const C=r.find(P=>P.id===_);v(P=>({...P,clientId:_,clientName:C?`${C.first_name} ${C.last_name}`:"",animalId:"",animalName:""}))}else if(S==="animalId"){const C=i.find(P=>P.id===_);v(P=>({...P,animalId:_,animalName:(C==null?void 0:C.name)||""}))}else v(C=>({...C,[S]:_}))},b=async S=>{S.preventDefault();const _=[];if(m.clientId||_.push("Veuillez sélectionner un client"),m.animalId||_.push("Veuillez sélectionner un animal"),!m.date)_.push("Veuillez sélectionner une date de consultation");else{const C=new Date(m.date),P=new Date;P.setFullYear(P.getFullYear()+1),C>P&&_.push("La date de consultation ne peut pas être plus d'un an dans le futur")}if(m.weight){const C=parseFloat(m.weight);(isNaN(C)||C<=0||C>999.9)&&_.push("Le poids doit être un nombre valide entre 0.1 et 999.9 kg")}if(m.temperature){const C=parseFloat(m.temperature);(isNaN(C)||C<30||C>50)&&_.push("La température doit être un nombre valide entre 30°C et 50°C")}if(m.symptoms&&m.symptoms.length>1e3&&_.push("Les symptômes ne peuvent pas dépasser 1000 caractères"),m.diagnosis&&m.diagnosis.length>1e3&&_.push("Le diagnostic ne peut pas dépasser 1000 caractères"),m.treatment&&m.treatment.length>1e3&&_.push("Le traitement ne peut pas dépasser 1000 caractères"),m.notes&&m.notes.length>2e3&&_.push("Les notes ne peuvent pas dépasser 2000 caractères"),m.followUp&&m.followUp.length>500&&_.push("Les notes de suivi ne peuvent pas dépasser 500 caractères"),_.length>0){c({title:"Erreurs de validation",description:_.join(". "),variant:"destructive"});return}try{const C={client_id:m.clientId,animal_id:m.animalId,consultation_type:"routine",consultation_date:m.date||g,weight:m.weight?Math.min(parseFloat(m.weight),999.9):void 0,temperature:m.temperature?Math.min(parseFloat(m.temperature),99.9):void 0,symptoms:m.symptoms.trim()||void 0,diagnosis:m.diagnosis.trim()||void 0,treatment:m.treatment.trim()||void 0,follow_up_notes:m.followUp.trim()||void 0,notes:m.notes.trim()||void 0};await l.mutateAsync(C),c({title:"Consultation enregistrée",description:`Consultation pour ${m.animalName} (${m.clientName}) a été enregistrée avec succès.`}),v({clientId:"",clientName:"",animalId:"",animalName:"",date:g,weight:"",temperature:"",symptoms:"",diagnosis:"",treatment:"",followUp:"",notes:"",photos:[]}),t(!1)}catch(C){console.error("Error creating consultation:",C);let P="Impossible d'enregistrer la consultation. Veuillez réessayer.";C!=null&&C.message&&(C.message.includes("foreign key constraint")?P="Erreur: Le client ou l'animal sélectionné n'existe plus. Veuillez actualiser la page.":C.message.includes("network")?P="Erreur de connexion. Vérifiez votre connexion internet et réessayez.":C.message.includes("permission")||C.message.includes("unauthorized")?P="Vous n'avez pas les permissions nécessaires pour créer une consultation.":(C.message.includes("duplicate")||C.message.includes("already exists"))&&(P="Une consultation similaire existe déjà pour cette date.")),c({title:"Erreur lors de la création",description:P,variant:"destructive"})}};return j.useEffect(()=>{e&&v({clientId:"",clientName:"",animalId:"",animalName:"",date:g,weight:"",temperature:"",symptoms:"",diagnosis:"",treatment:"",followUp:"",notes:"",photos:[]})},[e,g]),s.jsxs(s.Fragment,{children:[s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Xe,{className:"sm:max-w-[700px] max-h-[80vh] overflow-y-auto",children:[s.jsxs(tt,{children:[s.jsx(nt,{children:"Nouvelle Consultation"}),s.jsx(Dt,{children:"Enregistrez une nouvelle consultation vétérinaire."})]}),s.jsxs("form",{onSubmit:b,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Client *"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(be,{value:m.clientId.toString(),onValueChange:S=>y("clientId",S),disabled:a,children:[s.jsx(xe,{className:"flex-1",children:s.jsx(je,{placeholder:a?"Chargement des clients...":"Sélectionner le client"})}),s.jsx(ye,{children:r.length===0&&!a?s.jsx(q,{value:"",disabled:!0,children:"Aucun client disponible"}):r.map(S=>s.jsxs(q,{value:S.id,children:[S.first_name," ",S.last_name]},S.id))})]}),s.jsx(L,{type:"button",size:"sm",variant:"outline",onClick:()=>d(!0),className:"px-2",disabled:a,children:s.jsx(lt,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Animal *"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(be,{value:m.animalId,onValueChange:S=>y("animalId",S),disabled:!m.clientId||o,children:[s.jsx(xe,{className:"flex-1",children:s.jsx(je,{placeholder:m.clientId?o?"Chargement des animaux...":p.length===0?"Aucun animal pour ce client":"Sélectionner l'animal":"Sélectionnez d'abord un client"})}),s.jsx(ye,{children:p.length===0&&m.clientId&&!o?s.jsx(q,{value:"",disabled:!0,children:"Aucun animal pour ce client"}):p.map(S=>s.jsxs(q,{value:S.id,children:[S.name," (",S.species,")"]},S.id))})]}),s.jsx(L,{type:"button",size:"sm",variant:"outline",onClick:()=>f(!0),className:"px-2",disabled:!m.clientId||o,children:s.jsx(lt,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"date",children:"Date *"}),s.jsx(J,{id:"date",type:"date",value:m.date||g,onChange:x,required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"weight",children:"Poids (kg)"}),s.jsx(J,{id:"weight",type:"number",step:"0.1",min:"0.1",max:"999.9",value:m.weight,onChange:x,placeholder:"ex: 25.5",title:"Poids en kilogrammes (0.1 à 999.9 kg)"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"temperature",children:"Température (°C)"}),s.jsx(J,{id:"temperature",type:"number",step:"0.1",min:"30",max:"50",value:m.temperature,onChange:x,placeholder:"ex: 38.5",title:"Température corporelle (30°C à 50°C)"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"symptoms",children:"Symptômes observés"}),s.jsx(We,{id:"symptoms",value:m.symptoms,onChange:x,placeholder:"Symptômes observés, comportement anormal...",rows:3,maxLength:1e3,title:"Maximum 1000 caractères"}),s.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[m.symptoms.length,"/1000 caractères"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"diagnosis",children:"Diagnostic"}),s.jsx(We,{id:"diagnosis",value:m.diagnosis,onChange:x,placeholder:"Diagnostic établi...",rows:3,maxLength:1e3,title:"Maximum 1000 caractères"}),s.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[m.diagnosis.length,"/1000 caractères"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"treatment",children:"Traitement administré"}),s.jsx(We,{id:"treatment",value:m.treatment,onChange:x,placeholder:"Traitements, injections, interventions...",rows:3,maxLength:1e3,title:"Maximum 1000 caractères"}),s.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[m.treatment.length,"/1000 caractères"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"followUp",children:"Suivi recommandé"}),s.jsx(J,{id:"followUp",value:m.followUp,onChange:x,placeholder:"ex: Contrôle dans 1 semaine",maxLength:500,title:"Maximum 500 caractères"}),s.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[m.followUp.length,"/500 caractères"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"notes",children:"Notes additionnelles"}),s.jsx(We,{id:"notes",value:m.notes,onChange:x,placeholder:"Notes diverses, recommandations...",rows:3,maxLength:2e3,title:"Maximum 2000 caractères"}),s.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[m.notes.length,"/2000 caractères"]})]}),s.jsxs("div",{className:"space-y-2 col-span-2",children:[s.jsx(M,{children:"Photos de la consultation"}),s.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:async S=>{const _=Array.from(S.target.files||[]),C=await Promise.all(_.map(P=>new Promise((A,O)=>{const E=new FileReader;E.onload=()=>A(E.result),E.onerror=()=>O(),E.readAsDataURL(P)})));v(P=>({...P,photos:[...P.photos,...C]}))},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary file:text-primary-foreground hover:file:bg-primary/90"}),m.photos.length>0&&s.jsx("div",{className:"flex gap-2 overflow-x-auto pt-2",children:m.photos.map((S,_)=>s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:S,alt:`photo-${_}`,className:"h-24 w-24 object-cover rounded"}),s.jsx("button",{type:"button",onClick:()=>v(C=>({...C,photos:C.photos.filter((P,A)=>A!==_)})),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600",children:"×"})]},_))})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(L,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:l.isPending,children:"Annuler"}),s.jsx(L,{type:"submit",disabled:!m.clientId||!m.animalId||l.isPending||a||o,children:l.isPending?"Enregistrement...":"Enregistrer Consultation"})]})]})]})}),s.jsx(Rx,{open:u,onOpenChange:d}),s.jsx(Lx,{open:h,onOpenChange:f})]})}const wee=({children:e,allowedRoles:t,fallback:n=null})=>{const{user:r}=To();return!r||!t.includes(r.profile.role)?s.jsx(s.Fragment,{children:n}):s.jsx(s.Fragment,{children:e})},vw=({children:e,fallback:t=null})=>s.jsx(wee,{allowedRoles:["admin"],fallback:t,children:e});function Nee(){const{data:e=[]}=vn(),{data:t=[]}=hn(),{data:n=[]}=ws(),{data:r=[]}=Xl(),{data:a=[]}=wm(),{settings:i}=Pt(),o=JSON.parse(localStorage.getItem("vetpro-veterinarians")||"[]"),l=o.length===1?`Bienvenue ${o[0].title} ${o[0].name}`:`Bienvenue à ${i.clinicName}`,[c,u]=j.useState(!1),[d,h]=j.useState(!1),[f,m]=j.useState(!1),[v,p]=j.useState(!1),g=e.length,x=t.length,y=r.length,b=a.length,N=new Date().toISOString().split("T")[0],w=n.filter(_=>_.consultation_date.split("T")[0]===N).length,S={totalRevenue:0,totalExpenses:0,netIncome:0,revenueBreakdown:{consultations:0,vaccinations:0,antiparasitics:0,prescriptions:0,manualEntries:0},expenseBreakdown:{stockPurchases:0,salaries:0,rent:0,taxes:0,other:0}};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"relative overflow-hidden gradient-hero rounded-2xl p-4 md:p-8 mb-8",children:s.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center gap-6 md:gap-8",children:[s.jsxs("div",{className:"flex-1 space-y-4 md:space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pt,{className:"h-6 w-6 md:h-8 md:w-8 text-primary"}),s.jsx("span",{className:"text-xs md:text-sm font-medium text-primary",children:"Gestion Vétérinaire Complète"})]}),s.jsxs("h1",{className:"text-2xl md:text-4xl font-bold leading-tight max-w-3xl",children:[l,", ",s.jsx("span",{className:"gradient-primary bg-clip-text text-transparent block",children:"Dashboard VetPro"})]}),s.jsx("p",{className:"text-base md:text-lg text-muted-foreground max-w-3xl",children:"Gérez efficacement vos clients, leurs animaux, les rendez-vous et consultations. Votre pratique vétérinaire optimisée en un seul endroit."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 md:gap-4 pt-4",children:[s.jsxs(L,{size:"lg",className:"gap-2 medical-glow w-full sm:w-auto",onClick:()=>u(!0),children:[s.jsx(Da,{className:"h-5 w-5"}),"Nouveau Client",s.jsx(yj,{className:"h-4 w-4"})]}),s.jsxs(L,{variant:"outline",size:"lg",className:"gap-2 w-full sm:w-auto",onClick:()=>m(!0),children:[s.jsx(pt,{className:"h-5 w-5"}),"Nouvel Animal"]}),s.jsxs(L,{variant:"outline",size:"lg",className:"gap-2 w-full sm:w-auto",onClick:()=>h(!0),children:[s.jsx(Ze,{className:"h-5 w-5"}),"Planifier RDV"]}),s.jsxs(L,{variant:"outline",size:"lg",className:"gap-2 w-full sm:w-auto",onClick:()=>p(!0),children:[s.jsx(Hn,{className:"h-5 w-5"}),"Nouvelle Consultation"]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 md:gap-6 pt-6 md:pt-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl md:text-2xl font-bold text-primary",children:g}),s.jsx("div",{className:"text-xs md:text-sm text-muted-foreground",children:"Clients actifs"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl md:text-2xl font-bold text-secondary",children:x}),s.jsx("div",{className:"text-xs md:text-sm text-muted-foreground",children:"Animaux suivis"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl md:text-2xl font-bold text-accent",children:w}),s.jsx("div",{className:"text-xs md:text-sm text-muted-foreground",children:"Consultations aujourd'hui"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl md:text-2xl font-bold text-blue-600",children:y}),s.jsx("div",{className:"text-xs md:text-sm text-muted-foreground",children:"Vaccinations"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl md:text-2xl font-bold text-purple-600",children:b}),s.jsx("div",{className:"text-xs md:text-sm text-muted-foreground",children:"Antiparasitaires"})]}),s.jsx(vw,{children:s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-xl md:text-2xl font-bold text-emerald-600",children:[S.totalRevenue.toFixed(2)," ",i.currency||"€"]}),s.jsx("div",{className:"text-xs md:text-sm text-muted-foreground",children:"Revenus ce mois"})]})})]})]}),s.jsx("div",{className:"hidden lg:block",children:s.jsx("img",{src:TR,alt:"Vétérinaire professionnel examinant un chien",className:"w-96 h-64 object-cover rounded-xl shadow-medical"})})]})}),s.jsx(Rx,{open:c,onOpenChange:u}),s.jsx(bee,{open:d,onOpenChange:h}),s.jsx(Lx,{open:f,onOpenChange:m}),s.jsx(Fx,{open:v,onOpenChange:p})]})}function See(){const{data:e=[]}=vn(),{data:t=[]}=hn(),{data:n=[]}=ws(),{data:r=[]}=Jl(),{data:a=[]}=Ix(),{data:i=[]}=Xl(),{data:o=[]}=wm(),{data:l=[]}=$x(),{data:c=[]}=B3(),{settings:u}=Pt(),d=e.length,h=t.length;n.length,r.length,a.length;const f=c.length,m=i.length,v=o.length,p=l.length,g=new Date().getMonth(),x=new Date().getFullYear(),y=n.filter(ne=>{const T=new Date(ne.consultation_date);return T.getMonth()===g&&T.getFullYear()===x}).length,b=i.filter(ne=>{const T=new Date(ne.vaccination_date);return T.getMonth()===g&&T.getFullYear()===x}).length,N=o.filter(ne=>{const T=new Date(ne.treatment_date);return T.getMonth()===g&&T.getFullYear()===x}).length,w=new Date().toISOString().split("T")[0],S=n.filter(ne=>ne.consultation_date.split("T")[0]===w).length,_=r.filter(ne=>ne.appointment_date.split("T")[0]===w&&ne.status!=="cancelled"&&ne.status!=="completed").length,C=[],P=l.filter(ne=>ne.current_quantity<=ne.minimum_quantity).length,A=l.filter(ne=>ne.current_quantity===0).length;l.reduce((ne,T)=>ne+T.current_quantity*(T.unit_cost||0),0),new Date(x,g,1).toISOString().split("T")[0],new Date(x,g+1,0).toISOString().split("T")[0];const O={totalRevenue:0,totalExpenses:0,netIncome:0,revenueBreakdown:{consultations:0,vaccinations:0,antiparasitics:0,prescriptions:0,manualEntries:0},expenseBreakdown:{stockPurchases:0,salaries:0,rent:0,taxes:0,other:0}},E=O.totalRevenue,z=O.netIncome,I=(ne,T)=>{if(T===0)return ne>0?"+100%":"0%";const ce=(ne-T)/T*100;return ce>=0?`+${Math.round(ce)}%`:`${Math.round(ce)}%`},W=g===0?11:g-1,V=g===0?x-1:x,H=n.filter(ne=>{const T=new Date(ne.consultation_date);return T.getMonth()===W&&T.getFullYear()===V}).length,k=e.filter(ne=>{const T=new Date(ne.created_at);return T.getMonth()===W&&T.getFullYear()===V}).length,D=t.filter(ne=>{const T=new Date(ne.created_at);return T.getMonth()===W&&T.getFullYear()===V}).length,X=e.filter(ne=>{const T=new Date(ne.created_at);return T.getMonth()===g&&T.getFullYear()===x}).length,Q=t.filter(ne=>{const T=new Date(ne.created_at);return T.getMonth()===g&&T.getFullYear()===x}).length;r.filter(ne=>{const T=new Date(ne.appointment_date);return T.getMonth()===W&&T.getFullYear()===V}).length;const te=[{title:"Clients Total",value:d.toString(),change:I(d,k),icon:Da,color:"text-blue-600",bgColor:"bg-blue-50",description:`${X} nouveaux ce mois`},{title:"Animaux Suivis",value:h.toString(),change:I(h,D),icon:pt,color:"text-red-600",bgColor:"bg-red-50",description:`${Q} nouveaux ce mois`},{title:"RDV Aujourd'hui",value:_.toString(),change:_>0?"+"+Math.min(20,Math.floor(_*.3))+"%":"0%",icon:Ze,color:"text-purple-600",bgColor:"bg-purple-50",description:`${C.length} à venir cette semaine`},{title:"Consultations",value:y.toString(),change:I(y,H),icon:Hn,color:"text-green-600",bgColor:"bg-green-50",description:`${S} aujourd'hui`},{title:"Revenus Réels",value:`${E.toFixed(0)} ${u.currency||"€"}`,change:"0%",icon:cd,color:"text-emerald-600",bgColor:"bg-emerald-50",description:`Bénéfice: ${z.toFixed(0)} ${u.currency||"€"}`},{title:"Activité Ferme",value:f.toString(),change:f>0?"+"+Math.min(15,Math.floor(f*.2))+"%":"0%",icon:Aa,color:"text-orange-600",bgColor:"bg-orange-50",description:`${f} exploitations actives`},{title:"Vaccinations",value:b.toString(),change:b>0?"+"+Math.min(25,Math.floor(b*.3))+"%":"0%",icon:uo,color:"text-blue-600",bgColor:"bg-blue-50",description:`${m} total ce mois`},{title:"Antiparasitaires",value:N.toString(),change:N>0?"+"+Math.min(20,Math.floor(N*.25))+"%":"0%",icon:Gn,color:"text-purple-600",bgColor:"bg-purple-50",description:`${v} total ce mois`},{title:"Stock",value:p.toString(),change:P>0?"-"+Math.min(15,Math.floor(P*.2))+"%":"0%",icon:P>0?pn:wa,color:P>0?"text-red-600":"text-green-600",bgColor:P>0?"bg-red-50":"bg-green-50",description:`${P} en rupture, ${A} épuisés`}];return s.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:te.map(ne=>s.jsxs(re,{className:"card-hover",children:[s.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:ne.title}),s.jsx("div",{className:`p-2 rounded-lg ${ne.bgColor}`,children:s.jsx(ne.icon,{className:`h-4 w-4 ${ne.color}`})})]}),s.jsxs(se,{children:[s.jsx("div",{className:"text-2xl font-bold",children:ne.value}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[s.jsx("span",{className:"text-secondary font-medium",children:ne.change})," vs mois dernier"]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:ne.description})]})]},ne.title))})}const _ee=hm("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ke({className:e,variant:t,...n}){return s.jsx("div",{className:Ee(_ee({variant:t}),e),...n})}function KP(){const{data:e=[]}=vn(),{data:t=[]}=hn(),{data:n=[]}=ws();Jl(),Pt();const[r,a]=j.useState(!1),[i,o]=j.useState(!1),[l,c]=j.useState(!1),[u,d]=j.useState(null),h=e.map(S=>{const _=n.filter(P=>P.client_id===S.id),C=_.length>0?Math.max(..._.map(P=>new Date(P.consultation_date).getTime())):0;return{...S,lastVisit:C>0?new Date(C).toISOString():S.created_at}}),m=[...h].sort((S,_)=>new Date(_.lastVisit).getTime()-new Date(S.lastVisit).getTime()).slice(0,5),v=e.length,p=h.filter(S=>{const _=new Date(S.lastVisit),C=new Date;return C.setDate(C.getDate()-30),_>=C}).length,g=new Date().getMonth(),x=new Date().getFullYear(),y=e.filter(S=>{const _=new Date(S.created_at);return _.getMonth()===g&&_.getFullYear()===x}).length,b=v>0?(t.length/v).toFixed(1):"0",N=S=>{d(S),o(!0)},w=S=>{d(S),c(!0)};return s.jsxs(re,{className:"h-fit",children:[s.jsx(de,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(he,{className:"text-lg flex items-center gap-2",children:[s.jsx(Da,{className:"h-5 w-5"}),"Clients Récents"]}),s.jsxs(L,{size:"sm",onClick:()=>a(!0),className:"gap-2",children:[s.jsx(lt,{className:"h-4 w-4"}),"Nouveau"]})]})}),s.jsxs(se,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-primary",children:v}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Total"})]}),s.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:p}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Actifs"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(dn,{className:"h-4 w-4 text-blue-600"}),s.jsxs("span",{children:["+",y," ce mois"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Aa,{className:"h-4 w-4 text-purple-600"}),s.jsxs("span",{children:[b," animaux/client"]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-medium text-sm text-muted-foreground",children:"Derniers clients"}),m.length===0?s.jsx("p",{className:"text-sm text-muted-foreground py-4 text-center",children:"Aucun client trouvé"}):m.map(S=>{const _=t.filter(O=>O.client_id===S.id),C=n.filter(O=>O.client_id===S.id),P=`${S.first_name} ${S.last_name}`,A=`${S.first_name[0]||""}${S.last_name[0]||""}`;return s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx(Qn,{className:"h-9 w-9 flex-shrink-0",children:s.jsx(Xn,{className:"text-sm",children:A})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("h4",{className:"font-medium truncate",children:P}),s.jsx(ke,{variant:"outline",className:"text-xs flex-shrink-0",children:S.client_type})]}),s.jsxs("div",{className:"flex items-center gap-4 mt-1 text-xs text-muted-foreground flex-wrap",children:[S.phone&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(sf,{className:"h-3 w-3 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:S.phone})]}),S.city&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ud,{className:"h-3 w-3 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:S.city})]})]}),s.jsxs("div",{className:"flex items-center gap-4 mt-1 text-xs text-muted-foreground flex-wrap",children:[s.jsxs("span",{children:[_.length," animaux"]}),s.jsxs("span",{children:["Dernière visite: ",new Date(S.lastVisit).toLocaleDateString()]}),s.jsxs("span",{children:["Total consultations: ",C.length]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 ml-2",children:[s.jsx(L,{variant:"ghost",size:"sm",onClick:()=>N(S),className:"h-8 w-8 p-0",children:s.jsx(Dn,{className:"h-4 w-4"})}),s.jsx(L,{variant:"ghost",size:"sm",onClick:()=>w(S),className:"h-8 w-8 p-0",children:s.jsx(qt,{className:"h-4 w-4"})})]})]},S.id)})]})]}),s.jsx(Rx,{open:r,onOpenChange:a})]})}function GP(){const{data:e=[]}=vn(),{data:t=[]}=hn(),{data:n=[]}=ws();Jl(),Pt();const[r,a]=j.useState(!1),i=t.length,o=t.filter(v=>v.status==="vivant").length,l=t.filter(v=>n.filter(g=>g.animal_id===v.id&&new Date(g.consultation_date)>new Date(Date.now()-2592e6)).length>0).length,d=[...t.map(v=>{const p=n.filter(x=>x.animal_id===v.id),g=p.length>0?Math.max(...p.map(x=>new Date(x.consultation_date).getTime())):0;return{...v,lastActivity:g>0?new Date(g).toISOString():v.created_at,consultationsCount:p.length}})].sort((v,p)=>new Date(p.lastActivity).getTime()-new Date(v.lastActivity).getTime()).slice(0,5),h=new Date().getMonth(),f=new Date().getFullYear(),m=t.filter(v=>{const p=new Date(v.created_at);return p.getMonth()===h&&p.getFullYear()===f}).length;return s.jsxs(re,{className:"h-fit",children:[s.jsx(de,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(he,{className:"text-lg flex items-center gap-2",children:[s.jsx(pt,{className:"h-5 w-5"}),"Animaux Récents"]}),s.jsxs(L,{size:"sm",onClick:()=>a(!0),className:"gap-2",children:[s.jsx(lt,{className:"h-4 w-4"}),"Nouveau"]})]})}),s.jsxs(se,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-primary",children:i}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Total"})]}),s.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:o}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"En bonne santé"})]}),s.jsxs("div",{className:"text-center p-3 bg-orange-50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:l}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"En traitement"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(dn,{className:"h-4 w-4 text-blue-600"}),s.jsxs("span",{children:["+",m," ce mois"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Aa,{className:"h-4 w-4 text-purple-600"}),s.jsxs("span",{children:[i," suivis actifs"]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-medium text-sm text-muted-foreground",children:"Derniers animaux"}),d.length===0?s.jsx("p",{className:"text-sm text-muted-foreground py-4 text-center",children:"Aucun animal trouvé"}):d.map(v=>{const p=e.find(b=>b.id===v.client_id),g=p?`${p.first_name} ${p.last_name}`:"Propriétaire inconnu",x=b=>{switch(b){case"vivant":return"bg-green-100 text-green-800";case"décédé":return"bg-red-100 text-red-800";case"perdu":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},y=b=>"🐾";return s.jsx("div",{className:"flex items-center justify-between p-3 rounded-lg border hover:bg-muted/50 transition-colors",children:s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx(Qn,{className:"h-9 w-9 flex-shrink-0",children:v.photo_url?s.jsx(Eu,{src:v.photo_url,alt:v.name}):s.jsx(Xn,{className:"text-sm",children:y(v.species)})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("h4",{className:"font-medium truncate",children:v.name}),s.jsx(ke,{variant:"outline",className:"text-xs flex-shrink-0",children:v.species}),s.jsx(ke,{className:`text-xs flex-shrink-0 ${x(v.status)}`,children:v.status})]}),s.jsxs("div",{className:"flex items-center gap-4 mt-1 text-xs text-muted-foreground flex-wrap",children:[s.jsxs("span",{children:["Propriétaire: ",g]}),v.breed&&s.jsxs("span",{children:["Race: ",v.breed]}),v.birth_date&&s.jsxs("span",{children:["Âge: ",of(v.birth_date)]})]}),s.jsxs("div",{className:"flex items-center gap-4 mt-1 text-xs text-muted-foreground flex-wrap",children:[s.jsxs("span",{children:["Consultations: ",v.consultationsCount]}),s.jsxs("span",{children:["Dernière activité: ",new Date(v.lastActivity).toLocaleDateString()]}),v.weight&&s.jsxs("span",{children:["Poids: ",v.weight,"kg"]})]})]})]})},v.id)})]})]}),s.jsx(Lx,{open:r,onOpenChange:a})]})}function Cee({open:e,onOpenChange:t,consultation:n}){const{clients:r,pets:a,updateConsultation:i}=wn(),{toast:o}=at(),{settings:l}=Pt(),[c,u]=j.useState({clientId:0,clientName:"",petId:0,petName:"",date:"",weight:"",temperature:"",symptoms:"",diagnosis:"",treatment:"",medications:"",followUp:"",cost:"",notes:""}),d=a.filter(p=>p.ownerId===c.clientId),h=new Date().toISOString().split("T")[0],f=p=>{u(g=>({...g,[p.target.id]:p.target.value}))},m=(p,g)=>{if(p==="clientId"){const x=parseInt(g),y=r.find(b=>b.id===x);u(b=>({...b,clientId:x,clientName:(y==null?void 0:y.name)||"",petId:0,petName:""}))}else if(p==="petId"){const x=parseInt(g),y=a.find(b=>b.id===x);u(b=>({...b,petId:x,petName:(y==null?void 0:y.name)||""}))}else u(x=>({...x,[p]:g}))},v=p=>{if(p.preventDefault(),!!n){if(!c.clientId||!c.petId){o({title:"Erreur",description:"Veuillez sélectionner un client et un animal.",variant:"destructive"});return}i(n.id,{clientId:c.clientId,clientName:c.clientName,petId:c.petId,petName:c.petName,date:c.date||h,weight:c.weight,temperature:c.temperature,symptoms:c.symptoms,diagnosis:c.diagnosis,treatment:c.treatment,medications:c.medications,followUp:c.followUp,cost:c.cost,notes:c.notes}),o({title:"Consultation modifiée",description:`Consultation pour ${c.petName} (${c.clientName}) a été modifiée et sauvegardée.`}),t(!1)}};return j.useEffect(()=>{e&&n&&u({clientId:n.clientId,clientName:n.clientName,petId:n.petId,petName:n.petName,date:n.date,weight:n.weight||"",temperature:n.temperature||"",symptoms:n.symptoms||"",diagnosis:n.diagnosis||"",treatment:n.treatment||"",medications:n.medications||"",followUp:n.followUp||"",cost:n.cost||"",notes:n.notes||""})},[e,n]),n?s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Xe,{className:"sm:max-w-[700px] max-h-[80vh] overflow-y-auto",children:[s.jsxs(tt,{children:[s.jsx(nt,{children:"Modifier la Consultation"}),s.jsxs(Dt,{children:["Modifiez les détails de la consultation pour ",n.petName,"."]})]}),s.jsxs("form",{onSubmit:v,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Client *"}),s.jsxs(be,{value:c.clientId.toString(),onValueChange:p=>m("clientId",p),children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Sélectionner le client"})}),s.jsx(ye,{children:r.map(p=>s.jsx(q,{value:p.id.toString(),children:p.name},p.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Animal *"}),s.jsxs(be,{value:c.petId.toString(),onValueChange:p=>m("petId",p),disabled:!c.clientId,children:[s.jsx(xe,{children:s.jsx(je,{placeholder:c.clientId?"Sélectionner l'animal":"Sélectionnez d'abord un client"})}),s.jsx(ye,{children:d.map(p=>s.jsxs(q,{value:p.id.toString(),children:[p.name," (",p.type,")"]},p.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"date",children:"Date *"}),s.jsx(J,{id:"date",type:"date",value:c.date||h,onChange:f,required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"weight",children:"Poids (kg)"}),s.jsx(J,{id:"weight",type:"number",step:"0.1",value:c.weight,onChange:f,placeholder:"ex: 25.5"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"temperature",children:"Température (°C)"}),s.jsx(J,{id:"temperature",type:"number",step:"0.1",value:c.temperature,onChange:f,placeholder:"ex: 38.5"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"symptoms",children:"Symptômes observés"}),s.jsx(We,{id:"symptoms",value:c.symptoms,onChange:f,placeholder:"Décrivez les symptômes et observations...",rows:3})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"diagnosis",children:"Diagnostic"}),s.jsx(We,{id:"diagnosis",value:c.diagnosis,onChange:f,placeholder:"Diagnostic posé...",rows:3})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"treatment",children:"Traitement administré"}),s.jsx(We,{id:"treatment",value:c.treatment,onChange:f,placeholder:"Traitements, injections, interventions...",rows:3})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"medications",children:"Médicaments prescrits"}),s.jsx(We,{id:"medications",value:c.medications,onChange:f,placeholder:"Liste des médicaments avec posologie...",rows:3})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"followUp",children:"Suivi recommandé"}),s.jsx(J,{id:"followUp",value:c.followUp,onChange:f,placeholder:"ex: Contrôle dans 1 semaine"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(M,{htmlFor:"cost",children:["Coût (",l.currency,")"]}),s.jsx(J,{id:"cost",type:"number",step:"0.01",value:c.cost,onChange:f,placeholder:"ex: 85.50"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"notes",children:"Notes additionnelles"}),s.jsx(We,{id:"notes",value:c.notes,onChange:f,placeholder:"Notes diverses, recommandations...",rows:3})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(L,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsx(L,{type:"submit",children:"Modifier Consultation"})]})]})]})}):null}function X3({consultation:e}){const{settings:t}=Pt(),r=(i=>{var o;return i.petName&&i.clientName?i:{...i,petName:((o=i.animal)==null?void 0:o.name)||"Non spécifié",clientName:i.client?`${i.client.first_name||""} ${i.client.last_name||""}`.trim():"Non spécifié",date:i.consultation_date||i.date,symptoms:i.symptoms||"",diagnosis:i.diagnosis||"",treatment:i.treatment||"",notes:i.notes||"",weight:i.weight||null,temperature:i.temperature||null,medications:i.medications||"",followUp:i.follow_up_notes||i.followUp||null,cost:i.cost||null}})(e),a=()=>{if(!r||!r.petName||!r.clientName)return;const i=window.open("","_blank");if(!i)return;const o=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Consultation - ${r.petName}</title>
          <style>
            body {
              font-family: Arial, sans-serif;
              margin: 20px;
              line-height: 1.6;
            }
            .header {
              text-align: center;
              border-bottom: 2px solid #333;
              padding-bottom: 20px;
              margin-bottom: 30px;
            }
            .clinic-name {
              font-size: 24px;
              font-weight: bold;
              color: #2563eb;
            }
            .consultation-title {
              font-size: 20px;
              margin: 10px 0;
            }
            .info-grid {
              display: grid;
              grid-template-columns: 1fr 1fr;
              gap: 20px;
              margin-bottom: 30px;
            }
            .info-section {
              border: 1px solid #ddd;
              padding: 15px;
              border-radius: 5px;
            }
            .info-section h3 {
              margin: 0 0 10px 0;
              color: #333;
              border-bottom: 1px solid #eee;
              padding-bottom: 5px;
            }
            .info-item {
              margin: 5px 0;
            }
            .info-label {
              font-weight: bold;
              color: #666;
            }
            .medical-section {
              margin: 20px 0;
            }
            .medical-section h3 {
              color: #333;
              border-bottom: 1px solid #eee;
              padding-bottom: 5px;
            }
            .footer {
              margin-top: 40px;
              text-align: center;
              font-size: 12px;
              color: #666;
            }
            @media print {
              body { margin: 0; }
              .no-print { display: none; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            <div class="clinic-name">${t.clinicName||"VetPro CRM"}</div>
            <div class="consultation-title">Rapport de Consultation</div>
            <div>Date: ${new Date(r.date).toLocaleDateString("fr-FR")}</div>
          </div>

          <div class="info-grid">
            <div class="info-section">
              <h3>Informations Client</h3>
              <div class="info-item">
                <span class="info-label">Nom:</span> ${r.clientName}
              </div>
            </div>
            <div class="info-section">
              <h3>Informations Animal</h3>
              <div class="info-item">
                <span class="info-label">Nom:</span> ${r.petName}
              </div>
              <div class="info-item">
                <span class="info-label">Poids:</span> ${r.weight||"Non renseigné"}
              </div>
              <div class="info-item">
                <span class="info-label">Température:</span> ${r.temperature||"Non renseigné"}
              </div>
            </div>
          </div>

          ${r.symptoms?`
            <div class="medical-section">
              <h3>Symptômes Observés</h3>
              <p>${r.symptoms}</p>
            </div>
          `:""}

          ${r.diagnosis?`
            <div class="medical-section">
              <h3>Diagnostic</h3>
              <p>${r.diagnosis}</p>
            </div>
          `:""}

          ${r.treatment?`
            <div class="medical-section">
              <h3>Traitement Administré</h3>
              <p>${r.treatment}</p>
            </div>
          `:""}

          ${r.medications?`
            <div class="medical-section">
              <h3>Médicaments Prescrits</h3>
              <p>${r.medications}</p>
            </div>
          `:""}

          ${r.notes?`
            <div class="medical-section">
              <h3>Notes Additionnelles</h3>
              <p>${r.notes}</p>
            </div>
          `:""}

          <div class="info-grid">
            <div class="info-section">
              <h3>Suivi Recommandé</h3>
              <p>${r.followUp||"Aucun suivi prévu"}</p>
            </div>
            <div class="info-section">
              <h3>Coût</h3>
              <p>${r.cost?r.cost+" "+(t.currency||"MAD"):"Non renseigné"}</p>
            </div>
          </div>

          <div class="footer">
            <p>Consultation générée le ${new Date().toLocaleDateString("fr-FR")} à ${new Date().toLocaleTimeString("fr-FR")}</p>
            <p>VetPro CRM - Gestion Vétérinaire Complète</p>
          </div>
        </body>
      </html>
    `;i.document.write(o),i.document.close(),setTimeout(()=>{i.focus(),i.print(),i.close()},500)};return s.jsxs(L,{size:"sm",variant:"outline",onClick:a,className:"gap-2",children:[s.jsx(af,{className:"h-4 w-4"}),"Imprimer"]})}function YP(){const{data:e=[]}=ws(),{data:t=[]}=vn(),{data:n=[]}=hn();Pt();const[r,a]=j.useState(!1),[i,o]=j.useState(!1),[l,c]=j.useState(null),d=[...e].sort((C,P)=>new Date(P.consultation_date).getTime()-new Date(C.consultation_date).getTime()).slice(0,5),h=e.length,f=new Date().toISOString().split("T")[0],m=e.filter(C=>new Date(C.consultation_date).toISOString().split("T")[0]===f).length,v=new Date().getMonth(),p=new Date().getFullYear(),g=e.filter(C=>{const P=new Date(C.consultation_date);return P.getMonth()===v&&P.getFullYear()===p}).length,x=e.filter(C=>{const P=new Date(C.consultation_date),A=v===0?11:v-1,O=v===0?p-1:p;return P.getMonth()===A&&P.getFullYear()===O}).length,y=x>0?Math.round((g-x)/x*100):g>0?100:0,b=g*50,N=C=>{c(C),o(!0)},w=C=>{const P=new Date(C.consultation_date).toISOString().split("T")[0];return P===f?"bg-accent text-accent-foreground":P<f?"bg-secondary text-secondary-foreground":"bg-primary text-primary-foreground"},S=C=>{const P=new Date(C.consultation_date).toISOString().split("T")[0];return P===f?"Aujourd'hui":P<f?"Terminée":"À venir"},_=C=>{const P=C.animal||n.find(O=>O.id===C.animal_id),A=C.client||t.find(O=>O.id===C.client_id);return{animalName:(P==null?void 0:P.name)||"Animal inconnu",animalSpecies:(P==null?void 0:P.species)||"Inconnu",animalBreed:(P==null?void 0:P.breed)||"Non spécifiée",clientName:A?`${A.first_name} ${A.last_name}`:"Client inconnu",clientPhone:(A==null?void 0:A.phone)||"Non spécifié",clientCity:(A==null?void 0:A.address)||"Non spécifiée"}};return s.jsxs(s.Fragment,{children:[s.jsxs(re,{className:"card-hover",children:[s.jsx(de,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(he,{className:"text-lg flex items-center gap-2",children:[s.jsx(Hn,{className:"h-5 w-5"}),"Consultations Récentes"]}),s.jsxs(L,{size:"sm",className:"gap-2",onClick:()=>a(!0),children:[s.jsx(lt,{className:"h-4 w-4"}),"Nouveau"]})]})}),s.jsxs(se,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-primary",children:h}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Total"})]}),s.jsxs("div",{className:"text-center p-3 bg-muted rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:m}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Aujourd'hui"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(dn,{className:"h-4 w-4 text-blue-600"}),s.jsxs("span",{children:["+",g," ce mois"]}),y!==0&&s.jsxs(ke,{variant:y>0?"default":"destructive",className:"text-xs",children:[y>0?"+":"",y,"%"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(cd,{className:"h-4 w-4 text-green-600"}),s.jsxs("span",{children:["~",b,"€ ce mois"]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-medium text-sm text-muted-foreground",children:"Dernières consultations"}),d.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Hn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"Aucune consultation enregistrée"}),s.jsx("p",{className:"text-sm",children:"Commencez par créer votre première consultation"})]}):d.map(C=>{const P=_(C);return s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx(Qn,{className:"h-9 w-9 flex-shrink-0",children:s.jsx(Xn,{className:"bg-primary text-primary-foreground",children:s.jsx(Hn,{className:"h-4 w-4"})})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs("h4",{className:"font-medium truncate",children:["#",C.id.slice(0,8)]}),s.jsx(ke,{variant:"outline",className:`text-xs ${w(C)}`,children:S(C)})]}),s.jsxs("div",{className:"flex items-center gap-4 mt-1 text-xs text-muted-foreground flex-wrap",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(pt,{className:"h-3 w-3 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:P.animalName})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Vn,{className:"h-3 w-3 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:P.clientName})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ze,{className:"h-3 w-3 flex-shrink-0"}),s.jsx("span",{children:new Date(C.consultation_date).toLocaleDateString("fr-FR")})]})]})]})]}),s.jsxs("div",{className:"flex gap-1 flex-shrink-0 ml-2",children:[s.jsx(L,{size:"sm",variant:"ghost",onClick:()=>N(C),className:"h-8 w-8 p-0",children:s.jsx(qt,{className:"h-4 w-4"})}),s.jsx(X3,{consultation:C})]})]},C.id)})]})]})]}),s.jsx(Fx,{open:r,onOpenChange:a}),s.jsx(Cee,{open:i,onOpenChange:o,consultation:l})]})}function Pee(){const{appointments:e,stockItems:t,getUpcomingAppointments:n,getOverdueAppointments:r}=wn();Pt();const a=new Date().toISOString().split("T")[0];n();const i=r(),o=e.filter(d=>d.date===a&&d.status!=="cancelled"&&d.status!=="completed"),l=t.filter(d=>d.currentStock<=d.minimumStock),c=t.filter(d=>d.currentStock===0),u=[];return c.length>0&&u.push({type:"critical",icon:pn,title:"Stock épuisé",message:`${c.length} produit(s) en rupture de stock`,count:c.length,color:"text-red-600",bgColor:"bg-red-50",borderColor:"border-red-200"}),l.length>0&&u.push({type:"warning",icon:wa,title:"Stock faible",message:`${l.length} produit(s) en stock faible`,count:l.length,color:"text-orange-600",bgColor:"bg-orange-50",borderColor:"border-orange-200"}),i.length>0&&u.push({type:"warning",icon:tn,title:"Rendez-vous en retard",message:`${i.length} rendez-vous en retard`,count:i.length,color:"text-orange-600",bgColor:"bg-orange-50",borderColor:"border-orange-200"}),o.length>0&&u.push({type:"info",icon:Ze,title:"Rendez-vous aujourd'hui",message:`${o.length} rendez-vous prévus aujourd'hui`,count:o.length,color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200"}),u.length===0?s.jsxs(re,{className:"card-hover",children:[s.jsx(de,{children:s.jsxs(he,{className:"flex items-center gap-2",children:[s.jsx(dn,{className:"h-5 w-5 text-green-600"}),"Aucune alerte"]})}),s.jsx(se,{children:s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{className:"text-green-600 text-4xl mb-2",children:"✅"}),s.jsx("p",{className:"text-muted-foreground",children:"Tout va bien ! Aucune alerte à signaler."})]})})]}):s.jsxs(re,{className:"card-hover",children:[s.jsx(de,{children:s.jsxs(he,{className:"flex items-center gap-2",children:[s.jsx(pn,{className:"h-5 w-5 text-orange-600"}),"Alertes & Notifications",s.jsx(ke,{variant:"destructive",className:"ml-2",children:u.length})]})}),s.jsx(se,{className:"space-y-3",children:u.map((d,h)=>s.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${d.borderColor} ${d.bgColor}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`p-2 rounded-full ${d.bgColor}`,children:s.jsx(d.icon,{className:`h-4 w-4 ${d.color}`})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-sm",children:d.title}),s.jsx("p",{className:"text-xs text-muted-foreground",children:d.message})]})]}),s.jsx(ke,{variant:d.type==="critical"?"destructive":d.type==="warning"?"secondary":"default",className:"text-xs",children:d.count})]},h))})]})}function Aee(){const{clients:e,pets:t,consultations:n,appointments:r,prescriptions:a,farms:i,farmInterventions:o}=wn();Pt();const l=e.reduce((x,y)=>x+y.pets.length,0),c=l===t.length,u=e.length+t.length+n.length+r.length+a.length+i.length+o.length,d=c?100:Math.round((u-Math.abs(l-t.length))/u*100),h=new Date().toISOString().split("T")[0],f=n.filter(x=>x.date===h).length,m=r.filter(x=>x.date===h&&x.status!=="cancelled"&&x.status!=="completed").length,v=new Date().getMonth(),p=new Date().getFullYear(),g=n.filter(x=>{const y=new Date(x.date);return y.getMonth()===v&&y.getFullYear()===p}).length;return s.jsxs(re,{className:"mb-6",children:[s.jsx(de,{children:s.jsxs(he,{className:"flex items-center gap-2",children:[c?s.jsx(Bn,{className:"h-5 w-5 text-green-600"}):s.jsx(Fs,{className:"h-5 w-5 text-yellow-600"}),"Statut de Synchronisation"]})}),s.jsxs(se,{children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Da,{className:"h-4 w-4 text-blue-600"}),s.jsxs("span",{className:"text-sm",children:["Clients: ",e.length]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pt,{className:"h-4 w-4 text-red-600"}),s.jsxs("span",{className:"text-sm",children:["Animaux: ",t.length]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Xr,{className:"h-4 w-4 text-green-600"}),s.jsxs("span",{className:"text-sm",children:["Consultations: ",n.length]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ze,{className:"h-4 w-4 text-purple-600"}),s.jsxs("span",{className:"text-sm",children:["RDV: ",r.length]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(dn,{className:"h-4 w-4 text-blue-600"}),s.jsxs("span",{className:"text-sm",children:["Aujourd'hui: ",f+m]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(tn,{className:"h-4 w-4 text-green-600"}),s.jsxs("span",{className:"text-sm",children:["Ce mois: ",g]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Bn,{className:"h-4 w-4 text-orange-600"}),s.jsxs("span",{className:"text-sm",children:["Prescriptions: ",a.length]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Xr,{className:"h-4 w-4 text-indigo-600"}),s.jsxs("span",{className:"text-sm",children:["Fermes: ",i.length]})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"Intégrité des données:"}),s.jsxs(ke,{variant:d>=95?"default":d>=80?"secondary":"destructive",children:[d,"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full ${d>=95?"bg-green-600":d>=80?"bg-yellow-600":"bg-red-600"}`,style:{width:`${d}%`}})}),s.jsx("div",{className:"flex items-center gap-2 text-sm",children:c?s.jsxs(s.Fragment,{children:[s.jsx(Bn,{className:"h-4 w-4 text-green-600"}),s.jsx("span",{className:"text-green-700",children:"Synchronisation OK"})]}):s.jsxs(s.Fragment,{children:[s.jsx(Fs,{className:"h-4 w-4 text-yellow-600"}),s.jsx("span",{className:"text-yellow-700",children:"Désynchronisation détectée"})]})}),!c&&s.jsxs("div",{className:"text-xs text-muted-foreground bg-yellow-50 p-2 rounded",children:[s.jsx("strong",{children:"Attention:"})," ",Math.abs(l-t.length)," animal(s) non synchronisé(s) entre clients et animaux"]})]})]})]})}function kee(){const{clients:e,pets:t,consultations:n,appointments:r,prescriptions:a,farms:i,farmInterventions:o,resetData:l,exportData:c,importData:u}=wn(),{settings:d}=Pt(),{toast:h}=at(),[f,m]=j.useState(!1),[v,p]=j.useState(!1),g=e.length+t.length+n.length+r.length+a.length+i.length+o.length,x=Math.round(g*.5),y=[...e.map(E=>E.lastVisit),...t.map(E=>E.lastVisit).filter(Boolean),...n.map(E=>E.date),...r.map(E=>E.date),...a.map(E=>E.date),...i.map(E=>E.lastVisit)].filter(Boolean),b=y.length>0?new Date(Math.max(...y.map(E=>new Date(E).getTime()))):new Date,N=new Date().toISOString().split("T")[0],w=new Date().getMonth(),S=new Date().getFullYear(),_=[...e.filter(E=>E.lastVisit===N),...t.filter(E=>E.lastVisit===N),...n.filter(E=>E.date===N),...r.filter(E=>E.date===N)].length,C=[...e.filter(E=>{const z=new Date(E.lastVisit);return z.getMonth()===w&&z.getFullYear()===S}),...t.filter(E=>{if(!E.lastVisit)return!1;const z=new Date(E.lastVisit);return z.getMonth()===w&&z.getFullYear()===S}),...n.filter(E=>{const z=new Date(E.date);return z.getMonth()===w&&z.getFullYear()===S}),...r.filter(E=>{const z=new Date(E.date);return z.getMonth()===w&&z.getFullYear()===S})].length,P=()=>{try{c(),h({title:"Données exportées",description:`Export de ${g} enregistrements réussi.`})}catch{h({title:"Erreur d'export",description:"Impossible d'exporter les données.",variant:"destructive"})}},A=E=>{var W;const z=(W=E.target.files)==null?void 0:W[0];if(!z)return;const I=new FileReader;I.onload=V=>{var H,k;try{const D=JSON.parse((H=V.target)==null?void 0:H.result);if(D.clients&&D.pets)u(D),h({title:"Données importées",description:`${D.clients.length} clients, ${D.pets.length} animaux et ${((k=D.consultations)==null?void 0:k.length)||0} consultations importés avec succès.`});else throw new Error("Format de fichier invalide")}catch{h({title:"Erreur d'import",description:"Le fichier sélectionné n'est pas valide.",variant:"destructive"})}},I.readAsText(z),p(!1)},O=()=>{try{l(),h({title:"Données réinitialisées",description:"Toutes les données ont été remises aux valeurs par défaut."}),m(!1)}catch{h({title:"Erreur de réinitialisation",description:"Impossible de réinitialiser les données.",variant:"destructive"})}};return s.jsxs(s.Fragment,{children:[s.jsxs(re,{children:[s.jsx(de,{children:s.jsxs(he,{className:"flex items-center gap-2",children:[s.jsx(fU,{className:"h-5 w-5"}),"Gestion des Données"]})}),s.jsxs(se,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Total:"}),s.jsxs("span",{className:"text-muted-foreground",children:[g," enregistrements"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Taille:"}),s.jsxs("span",{className:"text-muted-foreground",children:["~",x," KB"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Dernière modif:"}),s.jsx("span",{className:"text-muted-foreground",children:b.toLocaleDateString("fr-FR")})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(dn,{className:"h-4 w-4 text-green-600"}),s.jsx("span",{className:"font-medium",children:"Aujourd'hui:"}),s.jsx("span",{className:"text-muted-foreground",children:_})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(tn,{className:"h-4 w-4 text-blue-600"}),s.jsx("span",{className:"font-medium",children:"Ce mois:"}),s.jsx("span",{className:"text-muted-foreground",children:C})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Bn,{className:"h-4 w-4 text-green-600"}),s.jsx("span",{className:"font-medium",children:"Clinique:"}),s.jsx("span",{className:"text-muted-foreground",children:d.clinicName||"Non configurée"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-xs",children:[s.jsxs("div",{className:"text-center p-2 bg-blue-50 rounded",children:[s.jsx("div",{className:"font-medium text-blue-700",children:e.length}),s.jsx("div",{className:"text-blue-600",children:"Clients"})]}),s.jsxs("div",{className:"text-center p-2 bg-red-50 rounded",children:[s.jsx("div",{className:"font-medium text-red-700",children:t.length}),s.jsx("div",{className:"text-red-600",children:"Animaux"})]}),s.jsxs("div",{className:"text-center p-2 bg-green-50 rounded",children:[s.jsx("div",{className:"font-medium text-green-700",children:n.length}),s.jsx("div",{className:"text-green-600",children:"Consultations"})]}),s.jsxs("div",{className:"text-center p-2 bg-purple-50 rounded",children:[s.jsx("div",{className:"font-medium text-purple-700",children:r.length}),s.jsx("div",{className:"text-purple-600",children:"RDV"})]}),s.jsxs("div",{className:"text-center p-2 bg-orange-50 rounded",children:[s.jsx("div",{className:"font-medium text-orange-700",children:a.length}),s.jsx("div",{className:"text-orange-600",children:"Prescriptions"})]}),s.jsxs("div",{className:"text-center p-2 bg-indigo-50 rounded",children:[s.jsx("div",{className:"font-medium text-indigo-700",children:i.length}),s.jsx("div",{className:"text-indigo-600",children:"Fermes"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(L,{size:"sm",variant:"outline",onClick:P,className:"gap-2",children:[s.jsx(cx,{className:"h-4 w-4"}),"Exporter"]}),s.jsxs(L,{size:"sm",variant:"outline",onClick:()=>p(!0),className:"gap-2",children:[s.jsx(Nj,{className:"h-4 w-4"}),"Importer"]}),s.jsxs(L,{size:"sm",variant:"destructive",onClick:()=>m(!0),className:"gap-2",children:[s.jsx(yI,{className:"h-4 w-4"}),"Réinitialiser"]})]})]})]}),s.jsx(et,{open:f,onOpenChange:m,children:s.jsxs(Xe,{children:[s.jsxs(tt,{children:[s.jsxs(nt,{className:"flex items-center gap-2",children:[s.jsx(pn,{className:"h-5 w-5 text-red-600"}),"Réinitialiser toutes les données"]}),s.jsx(Dt,{children:"Cette action supprimera définitivement toutes les données (clients, animaux, consultations, etc.) et les remettra aux valeurs par défaut. Cette action ne peut pas être annulée."})]}),s.jsxs("div",{className:"flex gap-2 justify-end",children:[s.jsx(L,{variant:"outline",onClick:()=>m(!1),children:"Annuler"}),s.jsx(L,{variant:"destructive",onClick:O,children:"Réinitialiser"})]})]})}),s.jsx(et,{open:v,onOpenChange:p,children:s.jsxs(Xe,{children:[s.jsxs(tt,{children:[s.jsxs(nt,{className:"flex items-center gap-2",children:[s.jsx(Nj,{className:"h-5 w-5"}),"Importer des données"]}),s.jsx(Dt,{children:"Sélectionnez un fichier JSON exporté précédemment pour restaurer vos données."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("input",{type:"file",accept:".json",onChange:A,className:"w-full"}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx("strong",{children:"Note:"})," L'import remplacera toutes les données existantes."]})]}),s.jsx("div",{className:"flex gap-2 justify-end",children:s.jsx(L,{variant:"outline",onClick:()=>p(!1),children:"Annuler"})})]})})]})}function Eee(){const{data:e=[]}=vn(),{data:t=[]}=hn(),{data:n=[]}=ws(),{data:r=[]}=Jl();Xl(),wm();const{data:a=[]}=$x();B3();const{settings:i}=Pt(),o=new Date().toISOString().split("T")[0],l=new Date().getMonth(),c=new Date().getFullYear(),u=n.filter(b=>b.consultation_date.split("T")[0]===o).length,d=r.filter(b=>b.appointment_date.split("T")[0]===o&&b.status!=="cancelled").length,h=0,f=[],m=a.filter(b=>b.current_quantity<=b.minimum_quantity).length,v=a.filter(b=>b.current_quantity===0).length,p={totalRevenue:0,totalExpenses:0,netIncome:0,revenueBreakdown:{consultations:0,vaccinations:0,antiparasitics:0,prescriptions:0,manualEntries:0},expenseBreakdown:{stockPurchases:0,salaries:0,rent:0,taxes:0,other:0}},g=e.filter(b=>{const N=new Date(b.created_at);return N.getMonth()===l&&N.getFullYear()===c}).length,x=t.filter(b=>{const N=new Date(b.created_at);return N.getMonth()===l&&N.getFullYear()===c}).length,y=[{title:"Consultations Aujourd'hui",value:u,icon:Hn,color:"text-green-600",bgColor:"bg-green-50",trend:u>0?"up":"neutral",description:"Consultations réalisées"},{title:"RDV Aujourd'hui",value:d,icon:Ze,color:"text-blue-600",bgColor:"bg-blue-50",trend:d>0?"up":"neutral",description:"Rendez-vous programmés"},{title:"RDV Cette Semaine",value:h,icon:tn,color:"text-purple-600",bgColor:"bg-purple-50",trend:"neutral",description:"Rendez-vous à venir"},{title:"RDV En Retard",value:f.length,icon:pn,color:f.length>0?"text-red-600":"text-gray-600",bgColor:f.length>0?"bg-red-50":"bg-gray-50",trend:f.length>0?"down":"neutral",description:"Rendez-vous en retard"},{title:"Nouveaux Clients",value:g,icon:Da,color:"text-emerald-600",bgColor:"bg-emerald-50",trend:g>0?"up":"neutral",description:"Ce mois"},{title:"Nouveaux Animaux",value:x,icon:pt,color:"text-pink-600",bgColor:"bg-pink-50",trend:x>0?"up":"neutral",description:"Ce mois"},{title:"Revenus du Mois",value:`${p.totalRevenue.toFixed(0)} ${i.currency||"€"}`,icon:cd,color:"text-green-600",bgColor:"bg-green-50",trend:"neutral",description:`Bénéfice: ${p.netIncome.toFixed(0)} ${i.currency||"€"}`},{title:"Stock Critique",value:m,icon:Aa,color:m>0?"text-orange-600":"text-green-600",bgColor:m>0?"bg-orange-50":"bg-green-50",trend:m>0?"down":"neutral",description:`${v} en rupture`}];return s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:y.map((b,N)=>s.jsxs(re,{className:"card-hover",children:[s.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(he,{className:"text-sm font-medium text-muted-foreground",children:b.title}),s.jsx("div",{className:`p-2 rounded-lg ${b.bgColor}`,children:s.jsx(b.icon,{className:`h-4 w-4 ${b.color}`})})]}),s.jsxs(se,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"text-2xl font-bold",children:b.value}),s.jsxs("div",{className:"flex items-center gap-1",children:[b.trend==="up"&&s.jsxs(s.Fragment,{children:[s.jsx(dn,{className:"h-4 w-4 text-green-600"}),s.jsxs(ke,{variant:"secondary",className:"text-xs bg-green-100 text-green-800",children:["+",Math.floor(Math.random()*20)+5,"%"]})]}),b.trend==="down"&&s.jsxs(s.Fragment,{children:[s.jsx(Cu,{className:"h-4 w-4 text-red-600"}),s.jsxs(ke,{variant:"secondary",className:"text-xs bg-red-100 text-red-800",children:["-",Math.floor(Math.random()*15)+3,"%"]})]}),b.trend==="neutral"&&s.jsx(ke,{variant:"outline",className:"text-xs",children:"0%"})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:b.description})]})]},N))})}var Tee=Array.isArray,Br=Tee,Oee=typeof lr=="object"&&lr&&lr.Object===Object&&lr,J3=Oee,Dee=J3,Mee=typeof self=="object"&&self&&self.Object===Object&&self,Iee=Dee||Mee||Function("return this")(),Ia=Iee,$ee=Ia,Ree=$ee.Symbol,Nm=Ree,QP=Nm,Z3=Object.prototype,Lee=Z3.hasOwnProperty,Fee=Z3.toString,th=QP?QP.toStringTag:void 0;function Bee(e){var t=Lee.call(e,th),n=e[th];try{e[th]=void 0;var r=!0}catch{}var a=Fee.call(e);return r&&(t?e[th]=n:delete e[th]),a}var zee=Bee,Vee=Object.prototype,qee=Vee.toString;function Uee(e){return qee.call(e)}var Wee=Uee,XP=Nm,Hee=zee,Kee=Wee,Gee="[object Null]",Yee="[object Undefined]",JP=XP?XP.toStringTag:void 0;function Qee(e){return e==null?e===void 0?Yee:Gee:JP&&JP in Object(e)?Hee(e):Kee(e)}var xi=Qee;function Xee(e){return e!=null&&typeof e=="object"}var yi=Xee,Jee=xi,Zee=yi,ete="[object Symbol]";function tte(e){return typeof e=="symbol"||Zee(e)&&Jee(e)==ete}var wd=tte,nte=Br,rte=wd,ste=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ate=/^\w*$/;function ite(e,t){if(nte(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||rte(e)?!0:ate.test(e)||!ste.test(e)||t!=null&&e in Object(t)}var GS=ite;function ote(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var $o=ote;const Nd=Ct($o);var lte=xi,cte=$o,ute="[object AsyncFunction]",dte="[object Function]",hte="[object GeneratorFunction]",fte="[object Proxy]";function mte(e){if(!cte(e))return!1;var t=lte(e);return t==dte||t==hte||t==ute||t==fte}var YS=mte;const qe=Ct(YS);var pte=Ia,gte=pte["__core-js_shared__"],vte=gte,H0=vte,ZP=function(){var e=/[^.]+$/.exec(H0&&H0.keys&&H0.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function xte(e){return!!ZP&&ZP in e}var yte=xte,bte=Function.prototype,jte=bte.toString;function wte(e){if(e!=null){try{return jte.call(e)}catch{}try{return e+""}catch{}}return""}var eL=wte,Nte=YS,Ste=yte,_te=$o,Cte=eL,Pte=/[\\^$.*+?()[\]{}|]/g,Ate=/^\[object .+?Constructor\]$/,kte=Function.prototype,Ete=Object.prototype,Tte=kte.toString,Ote=Ete.hasOwnProperty,Dte=RegExp("^"+Tte.call(Ote).replace(Pte,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Mte(e){if(!_te(e)||Ste(e))return!1;var t=Nte(e)?Dte:Ate;return t.test(Cte(e))}var Ite=Mte;function $te(e,t){return e==null?void 0:e[t]}var Rte=$te,Lte=Ite,Fte=Rte;function Bte(e,t){var n=Fte(e,t);return Lte(n)?n:void 0}var Zl=Bte,zte=Zl,Vte=zte(Object,"create"),Bx=Vte,eA=Bx;function qte(){this.__data__=eA?eA(null):{},this.size=0}var Ute=qte;function Wte(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Hte=Wte,Kte=Bx,Gte="__lodash_hash_undefined__",Yte=Object.prototype,Qte=Yte.hasOwnProperty;function Xte(e){var t=this.__data__;if(Kte){var n=t[e];return n===Gte?void 0:n}return Qte.call(t,e)?t[e]:void 0}var Jte=Xte,Zte=Bx,ene=Object.prototype,tne=ene.hasOwnProperty;function nne(e){var t=this.__data__;return Zte?t[e]!==void 0:tne.call(t,e)}var rne=nne,sne=Bx,ane="__lodash_hash_undefined__";function ine(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=sne&&t===void 0?ane:t,this}var one=ine,lne=Ute,cne=Hte,une=Jte,dne=rne,hne=one;function Sd(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Sd.prototype.clear=lne;Sd.prototype.delete=cne;Sd.prototype.get=une;Sd.prototype.has=dne;Sd.prototype.set=hne;var fne=Sd;function mne(){this.__data__=[],this.size=0}var pne=mne;function gne(e,t){return e===t||e!==e&&t!==t}var QS=gne,vne=QS;function xne(e,t){for(var n=e.length;n--;)if(vne(e[n][0],t))return n;return-1}var zx=xne,yne=zx,bne=Array.prototype,jne=bne.splice;function wne(e){var t=this.__data__,n=yne(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():jne.call(t,n,1),--this.size,!0}var Nne=wne,Sne=zx;function _ne(e){var t=this.__data__,n=Sne(t,e);return n<0?void 0:t[n][1]}var Cne=_ne,Pne=zx;function Ane(e){return Pne(this.__data__,e)>-1}var kne=Ane,Ene=zx;function Tne(e,t){var n=this.__data__,r=Ene(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var One=Tne,Dne=pne,Mne=Nne,Ine=Cne,$ne=kne,Rne=One;function _d(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}_d.prototype.clear=Dne;_d.prototype.delete=Mne;_d.prototype.get=Ine;_d.prototype.has=$ne;_d.prototype.set=Rne;var Vx=_d,Lne=Zl,Fne=Ia,Bne=Lne(Fne,"Map"),XS=Bne,tA=fne,zne=Vx,Vne=XS;function qne(){this.size=0,this.__data__={hash:new tA,map:new(Vne||zne),string:new tA}}var Une=qne;function Wne(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Hne=Wne,Kne=Hne;function Gne(e,t){var n=e.__data__;return Kne(t)?n[typeof t=="string"?"string":"hash"]:n.map}var qx=Gne,Yne=qx;function Qne(e){var t=Yne(this,e).delete(e);return this.size-=t?1:0,t}var Xne=Qne,Jne=qx;function Zne(e){return Jne(this,e).get(e)}var ere=Zne,tre=qx;function nre(e){return tre(this,e).has(e)}var rre=nre,sre=qx;function are(e,t){var n=sre(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var ire=are,ore=Une,lre=Xne,cre=ere,ure=rre,dre=ire;function Cd(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Cd.prototype.clear=ore;Cd.prototype.delete=lre;Cd.prototype.get=cre;Cd.prototype.has=ure;Cd.prototype.set=dre;var JS=Cd,tL=JS,hre="Expected a function";function ZS(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(hre);var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],i=n.cache;if(i.has(a))return i.get(a);var o=e.apply(this,r);return n.cache=i.set(a,o)||i,o};return n.cache=new(ZS.Cache||tL),n}ZS.Cache=tL;var nL=ZS;const fre=Ct(nL);var mre=nL,pre=500;function gre(e){var t=mre(e,function(r){return n.size===pre&&n.clear(),r}),n=t.cache;return t}var vre=gre,xre=vre,yre=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,bre=/\\(\\)?/g,jre=xre(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(yre,function(n,r,a,i){t.push(a?i.replace(bre,"$1"):r||n)}),t}),wre=jre;function Nre(e,t){for(var n=-1,r=e==null?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}var e_=Nre,nA=Nm,Sre=e_,_re=Br,Cre=wd,Pre=1/0,rA=nA?nA.prototype:void 0,sA=rA?rA.toString:void 0;function rL(e){if(typeof e=="string")return e;if(_re(e))return Sre(e,rL)+"";if(Cre(e))return sA?sA.call(e):"";var t=e+"";return t=="0"&&1/e==-Pre?"-0":t}var Are=rL,kre=Are;function Ere(e){return e==null?"":kre(e)}var sL=Ere,Tre=Br,Ore=GS,Dre=wre,Mre=sL;function Ire(e,t){return Tre(e)?e:Ore(e,t)?[e]:Dre(Mre(e))}var aL=Ire,$re=wd,Rre=1/0;function Lre(e){if(typeof e=="string"||$re(e))return e;var t=e+"";return t=="0"&&1/e==-Rre?"-0":t}var Ux=Lre,Fre=aL,Bre=Ux;function zre(e,t){t=Fre(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[Bre(t[n++])];return n&&n==r?e:void 0}var t_=zre,Vre=t_;function qre(e,t,n){var r=e==null?void 0:Vre(e,t);return r===void 0?n:r}var iL=qre;const es=Ct(iL);function Ure(e){return e==null}var Wre=Ure;const Qe=Ct(Wre);var Hre=xi,Kre=Br,Gre=yi,Yre="[object String]";function Qre(e){return typeof e=="string"||!Kre(e)&&Gre(e)&&Hre(e)==Yre}var Xre=Qre;const Ll=Ct(Xre);var oL={exports:{}},Et={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n_=Symbol.for("react.element"),r_=Symbol.for("react.portal"),Wx=Symbol.for("react.fragment"),Hx=Symbol.for("react.strict_mode"),Kx=Symbol.for("react.profiler"),Gx=Symbol.for("react.provider"),Yx=Symbol.for("react.context"),Jre=Symbol.for("react.server_context"),Qx=Symbol.for("react.forward_ref"),Xx=Symbol.for("react.suspense"),Jx=Symbol.for("react.suspense_list"),Zx=Symbol.for("react.memo"),ey=Symbol.for("react.lazy"),Zre=Symbol.for("react.offscreen"),lL;lL=Symbol.for("react.module.reference");function Ns(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case n_:switch(e=e.type,e){case Wx:case Kx:case Hx:case Xx:case Jx:return e;default:switch(e=e&&e.$$typeof,e){case Jre:case Yx:case Qx:case ey:case Zx:case Gx:return e;default:return t}}case r_:return t}}}Et.ContextConsumer=Yx;Et.ContextProvider=Gx;Et.Element=n_;Et.ForwardRef=Qx;Et.Fragment=Wx;Et.Lazy=ey;Et.Memo=Zx;Et.Portal=r_;Et.Profiler=Kx;Et.StrictMode=Hx;Et.Suspense=Xx;Et.SuspenseList=Jx;Et.isAsyncMode=function(){return!1};Et.isConcurrentMode=function(){return!1};Et.isContextConsumer=function(e){return Ns(e)===Yx};Et.isContextProvider=function(e){return Ns(e)===Gx};Et.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===n_};Et.isForwardRef=function(e){return Ns(e)===Qx};Et.isFragment=function(e){return Ns(e)===Wx};Et.isLazy=function(e){return Ns(e)===ey};Et.isMemo=function(e){return Ns(e)===Zx};Et.isPortal=function(e){return Ns(e)===r_};Et.isProfiler=function(e){return Ns(e)===Kx};Et.isStrictMode=function(e){return Ns(e)===Hx};Et.isSuspense=function(e){return Ns(e)===Xx};Et.isSuspenseList=function(e){return Ns(e)===Jx};Et.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Wx||e===Kx||e===Hx||e===Xx||e===Jx||e===Zre||typeof e=="object"&&e!==null&&(e.$$typeof===ey||e.$$typeof===Zx||e.$$typeof===Gx||e.$$typeof===Yx||e.$$typeof===Qx||e.$$typeof===lL||e.getModuleId!==void 0)};Et.typeOf=Ns;oL.exports=Et;var ese=oL.exports,tse=xi,nse=yi,rse="[object Number]";function sse(e){return typeof e=="number"||nse(e)&&tse(e)==rse}var cL=sse;const ase=Ct(cL);var ise=cL;function ose(e){return ise(e)&&e!=+e}var lse=ose;const Pd=Ct(lse);var vr=function(t){return t===0?0:t>0?1:-1},ol=function(t){return Ll(t)&&t.indexOf("%")===t.length-1},pe=function(t){return ase(t)&&!Pd(t)},cse=function(t){return Qe(t)},Tn=function(t){return pe(t)||Ll(t)},use=0,Ad=function(t){var n=++use;return"".concat(t||"").concat(n)},xr=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!pe(t)&&!Ll(t))return r;var i;if(ol(t)){var o=t.indexOf("%");i=n*parseFloat(t.slice(0,o))/100}else i=+t;return Pd(i)&&(i=r),a&&i>n&&(i=n),i},zi=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},dse=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,r={},a=0;a<n;a++)if(!r[t[a]])r[t[a]]=!0;else return!0;return!1},Dr=function(t,n){return pe(t)&&pe(n)?function(r){return t+r*(n-t)}:function(){return n}};function Fg(e,t,n){return!e||!e.length?null:e.find(function(r){return r&&(typeof t=="function"?t(r):es(r,t))===n})}var hse=function(t,n){return pe(t)&&pe(n)?t-n:Ll(t)&&Ll(n)?t.localeCompare(n):t instanceof Date&&n instanceof Date?t.getTime()-n.getTime():String(t).localeCompare(String(n))};function Zc(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function xw(e){"@babel/helpers - typeof";return xw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xw(e)}var fse=["viewBox","children"],mse=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],aA=["points","pathLength"],K0={svg:fse,polygon:aA,polyline:aA},s_=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Bg=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(j.isValidElement(t)&&(r=t.props),!Nd(r))return null;var a={};return Object.keys(r).forEach(function(i){s_.includes(i)&&(a[i]=n||function(o){return r[i](r,o)})}),a},pse=function(t,n,r){return function(a){return t(n,r,a),null}},Fl=function(t,n,r){if(!Nd(t)||xw(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var o=t[i];s_.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=pse(o,n,r))}),a},gse=["children"],vse=["children"];function iA(e,t){if(e==null)return{};var n=xse(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function xse(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function yw(e){"@babel/helpers - typeof";return yw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yw(e)}var oA={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},ni=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},lA=null,G0=null,a_=function e(t){if(t===lA&&Array.isArray(G0))return G0;var n=[];return j.Children.forEach(t,function(r){Qe(r)||(ese.isFragment(r)?n=n.concat(e(r.props.children)):n.push(r))}),G0=n,lA=t,n};function gs(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(function(a){return ni(a)}):r=[ni(t)],a_(e).forEach(function(a){var i=es(a,"type.displayName")||es(a,"type.name");r.indexOf(i)!==-1&&n.push(a)}),n}function Hr(e,t){var n=gs(e,t);return n&&n[0]}var cA=function(t){if(!t||!t.props)return!1;var n=t.props,r=n.width,a=n.height;return!(!pe(r)||r<=0||!pe(a)||a<=0)},yse=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],bse=function(t){return t&&t.type&&Ll(t.type)&&yse.indexOf(t.type)>=0},jse=function(t){return t&&yw(t)==="object"&&"clipDot"in t},wse=function(t,n,r,a){var i,o=(i=K0==null?void 0:K0[a])!==null&&i!==void 0?i:[];return n.startsWith("data-")||!qe(t)&&(a&&o.includes(n)||mse.includes(n))||r&&s_.includes(n)},Fe=function(t,n,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(j.isValidElement(t)&&(a=t.props),!Nd(a))return null;var i={};return Object.keys(a).forEach(function(o){var l;wse((l=a)===null||l===void 0?void 0:l[o],o,n,r)&&(i[o]=a[o])}),i},bw=function e(t,n){if(t===n)return!0;var r=j.Children.count(t);if(r!==j.Children.count(n))return!1;if(r===0)return!0;if(r===1)return uA(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var a=0;a<r;a++){var i=t[a],o=n[a];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!uA(i,o))return!1}return!0},uA=function(t,n){if(Qe(t)&&Qe(n))return!0;if(!Qe(t)&&!Qe(n)){var r=t.props||{},a=r.children,i=iA(r,gse),o=n.props||{},l=o.children,c=iA(o,vse);return a&&l?Zc(i,c)&&bw(a,l):!a&&!l?Zc(i,c):!1}return!1},dA=function(t,n){var r=[],a={};return a_(t).forEach(function(i,o){if(bse(i))r.push(i);else if(i){var l=ni(i.type),c=n[l]||{},u=c.handler,d=c.once;if(u&&(!d||!a[l])){var h=u(i,l,o);r.push(h),a[l]=!0}}}),r},Nse=function(t){var n=t&&t.type;return n&&oA[n]?oA[n]:null},Sse=function(t,n){return a_(n).indexOf(t)},_se=["children","width","height","viewBox","className","style","title","desc"];function jw(){return jw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jw.apply(this,arguments)}function Cse(e,t){if(e==null)return{};var n=Pse(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Pse(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function ww(e){var t=e.children,n=e.width,r=e.height,a=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,u=Cse(e,_se),d=a||{width:n,height:r,x:0,y:0},h=Ye("recharts-surface",i);return $.createElement("svg",jw({},Fe(u,!0,"svg"),{className:h,width:n,height:r,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),$.createElement("title",null,l),$.createElement("desc",null,c),t)}var Ase=["children","className"];function Nw(){return Nw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nw.apply(this,arguments)}function kse(e,t){if(e==null)return{};var n=Ese(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Ese(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var gt=$.forwardRef(function(e,t){var n=e.children,r=e.className,a=kse(e,Ase),i=Ye("recharts-layer",r);return $.createElement("g",Nw({className:i},Fe(a,!0),{ref:t}),n)}),Ws=function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i]};function Tse(e,t,n){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),n=n>a?a:n,n<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(a);++r<a;)i[r]=e[r+t];return i}var Ose=Tse,Dse=Ose;function Mse(e,t,n){var r=e.length;return n=n===void 0?r:n,!t&&n>=r?e:Dse(e,t,n)}var Ise=Mse,$se="\\ud800-\\udfff",Rse="\\u0300-\\u036f",Lse="\\ufe20-\\ufe2f",Fse="\\u20d0-\\u20ff",Bse=Rse+Lse+Fse,zse="\\ufe0e\\ufe0f",Vse="\\u200d",qse=RegExp("["+Vse+$se+Bse+zse+"]");function Use(e){return qse.test(e)}var uL=Use;function Wse(e){return e.split("")}var Hse=Wse,dL="\\ud800-\\udfff",Kse="\\u0300-\\u036f",Gse="\\ufe20-\\ufe2f",Yse="\\u20d0-\\u20ff",Qse=Kse+Gse+Yse,Xse="\\ufe0e\\ufe0f",Jse="["+dL+"]",Sw="["+Qse+"]",_w="\\ud83c[\\udffb-\\udfff]",Zse="(?:"+Sw+"|"+_w+")",hL="[^"+dL+"]",fL="(?:\\ud83c[\\udde6-\\uddff]){2}",mL="[\\ud800-\\udbff][\\udc00-\\udfff]",eae="\\u200d",pL=Zse+"?",gL="["+Xse+"]?",tae="(?:"+eae+"(?:"+[hL,fL,mL].join("|")+")"+gL+pL+")*",nae=gL+pL+tae,rae="(?:"+[hL+Sw+"?",Sw,fL,mL,Jse].join("|")+")",sae=RegExp(_w+"(?="+_w+")|"+rae+nae,"g");function aae(e){return e.match(sae)||[]}var iae=aae,oae=Hse,lae=uL,cae=iae;function uae(e){return lae(e)?cae(e):oae(e)}var dae=uae,hae=Ise,fae=uL,mae=dae,pae=sL;function gae(e){return function(t){t=pae(t);var n=fae(t)?mae(t):void 0,r=n?n[0]:t.charAt(0),a=n?hae(n,1).join(""):t.slice(1);return r[e]()+a}}var vae=gae,xae=vae,yae=xae("toUpperCase"),bae=yae;const ty=Ct(bae);function zt(e){return function(){return e}}const vL=Math.cos,zg=Math.sin,Js=Math.sqrt,Vg=Math.PI,ny=2*Vg,Cw=Math.PI,Pw=2*Cw,Xo=1e-6,jae=Pw-Xo;function xL(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function wae(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return xL;const n=10**t;return function(r){this._+=r[0];for(let a=1,i=r.length;a<i;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}class Nae{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?xL:wae(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,a){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+a}`}bezierCurveTo(t,n,r,a,i,o){this._append`C${+t},${+n},${+r},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,n,r,a,i){if(t=+t,n=+n,r=+r,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=r-t,u=a-n,d=o-t,h=l-n,f=d*d+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(f>Xo)if(!(Math.abs(h*c-u*d)>Xo)||!i)this._append`L${this._x1=t},${this._y1=n}`;else{let m=r-o,v=a-l,p=c*c+u*u,g=m*m+v*v,x=Math.sqrt(p),y=Math.sqrt(f),b=i*Math.tan((Cw-Math.acos((p+f-g)/(2*x*y)))/2),N=b/y,w=b/x;Math.abs(N-1)>Xo&&this._append`L${t+N*d},${n+N*h}`,this._append`A${i},${i},0,0,${+(h*m>d*v)},${this._x1=t+w*c},${this._y1=n+w*u}`}}arc(t,n,r,a,i,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(a),c=r*Math.sin(a),u=t+l,d=n+c,h=1^o,f=o?a-i:i-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Xo||Math.abs(this._y1-d)>Xo)&&this._append`L${u},${d}`,r&&(f<0&&(f=f%Pw+Pw),f>jae?this._append`A${r},${r},0,1,${h},${t-l},${n-c}A${r},${r},0,1,${h},${this._x1=u},${this._y1=d}`:f>Xo&&this._append`A${r},${r},0,${+(f>=Cw)},${h},${this._x1=t+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(t,n,r,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+a}h${-r}Z`}toString(){return this._}}function i_(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Nae(t)}function o_(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function yL(e){this._context=e}yL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function ry(e){return new yL(e)}function bL(e){return e[0]}function jL(e){return e[1]}function wL(e,t){var n=zt(!0),r=null,a=ry,i=null,o=i_(l);e=typeof e=="function"?e:e===void 0?bL:zt(e),t=typeof t=="function"?t:t===void 0?jL:zt(t);function l(c){var u,d=(c=o_(c)).length,h,f=!1,m;for(r==null&&(i=a(m=o())),u=0;u<=d;++u)!(u<d&&n(h=c[u],u,c))===f&&((f=!f)?i.lineStart():i.lineEnd()),f&&i.point(+e(h,u,c),+t(h,u,c));if(m)return i=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:zt(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:zt(+c),l):t},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:zt(!!c),l):n},l.curve=function(c){return arguments.length?(a=c,r!=null&&(i=a(r)),l):a},l.context=function(c){return arguments.length?(c==null?r=i=null:i=a(r=c),l):r},l}function bp(e,t,n){var r=null,a=zt(!0),i=null,o=ry,l=null,c=i_(u);e=typeof e=="function"?e:e===void 0?bL:zt(+e),t=typeof t=="function"?t:zt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?jL:zt(+n);function u(h){var f,m,v,p=(h=o_(h)).length,g,x=!1,y,b=new Array(p),N=new Array(p);for(i==null&&(l=o(y=c())),f=0;f<=p;++f){if(!(f<p&&a(g=h[f],f,h))===x)if(x=!x)m=f,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=f-1;v>=m;--v)l.point(b[v],N[v]);l.lineEnd(),l.areaEnd()}x&&(b[f]=+e(g,f,h),N[f]=+t(g,f,h),l.point(r?+r(g,f,h):b[f],n?+n(g,f,h):N[f]))}if(y)return l=null,y+""||null}function d(){return wL().defined(a).curve(o).context(i)}return u.x=function(h){return arguments.length?(e=typeof h=="function"?h:zt(+h),r=null,u):e},u.x0=function(h){return arguments.length?(e=typeof h=="function"?h:zt(+h),u):e},u.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:zt(+h),u):r},u.y=function(h){return arguments.length?(t=typeof h=="function"?h:zt(+h),n=null,u):t},u.y0=function(h){return arguments.length?(t=typeof h=="function"?h:zt(+h),u):t},u.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:zt(+h),u):n},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(n)},u.lineX1=function(){return d().x(r).y(t)},u.defined=function(h){return arguments.length?(a=typeof h=="function"?h:zt(!!h),u):a},u.curve=function(h){return arguments.length?(o=h,i!=null&&(l=o(i)),u):o},u.context=function(h){return arguments.length?(h==null?i=l=null:l=o(i=h),u):i},u}class NL{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function Sae(e){return new NL(e,!0)}function _ae(e){return new NL(e,!1)}const l_={draw(e,t){const n=Js(t/Vg);e.moveTo(n,0),e.arc(0,0,n,0,ny)}},Cae={draw(e,t){const n=Js(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},SL=Js(1/3),Pae=SL*2,Aae={draw(e,t){const n=Js(t/Pae),r=n*SL;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},kae={draw(e,t){const n=Js(t),r=-n/2;e.rect(r,r,n,n)}},Eae=.8908130915292852,_L=zg(Vg/10)/zg(7*Vg/10),Tae=zg(ny/10)*_L,Oae=-vL(ny/10)*_L,Dae={draw(e,t){const n=Js(t*Eae),r=Tae*n,a=Oae*n;e.moveTo(0,-n),e.lineTo(r,a);for(let i=1;i<5;++i){const o=ny*i/5,l=vL(o),c=zg(o);e.lineTo(c*n,-l*n),e.lineTo(l*r-c*a,c*r+l*a)}e.closePath()}},Y0=Js(3),Mae={draw(e,t){const n=-Js(t/(Y0*3));e.moveTo(0,n*2),e.lineTo(-Y0*n,-n),e.lineTo(Y0*n,-n),e.closePath()}},ss=-.5,as=Js(3)/2,Aw=1/Js(12),Iae=(Aw/2+1)*3,$ae={draw(e,t){const n=Js(t/Iae),r=n/2,a=n*Aw,i=r,o=n*Aw+n,l=-i,c=o;e.moveTo(r,a),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(ss*r-as*a,as*r+ss*a),e.lineTo(ss*i-as*o,as*i+ss*o),e.lineTo(ss*l-as*c,as*l+ss*c),e.lineTo(ss*r+as*a,ss*a-as*r),e.lineTo(ss*i+as*o,ss*o-as*i),e.lineTo(ss*l+as*c,ss*c-as*l),e.closePath()}};function Rae(e,t){let n=null,r=i_(a);e=typeof e=="function"?e:zt(e||l_),t=typeof t=="function"?t:zt(t===void 0?64:+t);function a(){let i;if(n||(n=i=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:zt(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:zt(+i),a):t},a.context=function(i){return arguments.length?(n=i??null,a):n},a}function qg(){}function Ug(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function CL(e){this._context=e}CL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ug(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ug(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Lae(e){return new CL(e)}function PL(e){this._context=e}PL.prototype={areaStart:qg,areaEnd:qg,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Ug(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Fae(e){return new PL(e)}function AL(e){this._context=e}AL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Ug(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Bae(e){return new AL(e)}function kL(e){this._context=e}kL.prototype={areaStart:qg,areaEnd:qg,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function zae(e){return new kL(e)}function hA(e){return e<0?-1:1}function fA(e,t,n){var r=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(r||a<0&&-0),o=(n-e._y1)/(a||r<0&&-0),l=(i*a+o*r)/(r+a);return(hA(i)+hA(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function mA(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Q0(e,t,n){var r=e._x0,a=e._y0,i=e._x1,o=e._y1,l=(i-r)/3;e._context.bezierCurveTo(r+l,a+l*t,i-l,o-l*n,i,o)}function Wg(e){this._context=e}Wg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Q0(this,this._t0,mA(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Q0(this,mA(this,n=fA(this,e,t)),n);break;default:Q0(this,this._t0,n=fA(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function EL(e){this._context=new TL(e)}(EL.prototype=Object.create(Wg.prototype)).point=function(e,t){Wg.prototype.point.call(this,t,e)};function TL(e){this._context=e}TL.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,a,i){this._context.bezierCurveTo(t,e,r,n,i,a)}};function Vae(e){return new Wg(e)}function qae(e){return new EL(e)}function OL(e){this._context=e}OL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=pA(e),a=pA(t),i=0,o=1;o<n;++i,++o)this._context.bezierCurveTo(r[0][i],a[0][i],r[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function pA(e){var t,n=e.length-1,r,a=new Array(n),i=new Array(n),o=new Array(n);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[n-1]=2,i[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=a[t]/i[t-1],i[t]-=r,o[t]-=r*o[t-1];for(a[n-1]=o[n-1]/i[n-1],t=n-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[n-1]=(e[n]+a[n-1])/2,t=0;t<n-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function Uae(e){return new OL(e)}function sy(e,t){this._context=e,this._t=t}sy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Wae(e){return new sy(e,.5)}function Hae(e){return new sy(e,0)}function Kae(e){return new sy(e,1)}function Du(e,t){if((o=e.length)>1)for(var n=1,r,a,i=e[t[0]],o,l=i.length;n<o;++n)for(a=i,i=e[t[n]],r=0;r<l;++r)i[r][1]+=i[r][0]=isNaN(a[r][1])?a[r][0]:a[r][1]}function kw(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Gae(e,t){return e[t]}function Yae(e){const t=[];return t.key=e,t}function Qae(){var e=zt([]),t=kw,n=Du,r=Gae;function a(i){var o=Array.from(e.apply(this,arguments),Yae),l,c=o.length,u=-1,d;for(const h of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+r(h,o[l].key,u,i)]).data=h;for(l=0,d=o_(t(o));l<c;++l)o[d[l]].index=l;return n(o,d),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:zt(Array.from(i)),a):e},a.value=function(i){return arguments.length?(r=typeof i=="function"?i:zt(+i),a):r},a.order=function(i){return arguments.length?(t=i==null?kw:typeof i=="function"?i:zt(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(n=i??Du,a):n},a}function Xae(e,t){if((r=e.length)>0){for(var n,r,a=0,i=e[0].length,o;a<i;++a){for(o=n=0;n<r;++n)o+=e[n][a][1]||0;if(o)for(n=0;n<r;++n)e[n][a][1]/=o}Du(e,t)}}function Jae(e,t){if((a=e.length)>0){for(var n=0,r=e[t[0]],a,i=r.length;n<i;++n){for(var o=0,l=0;o<a;++o)l+=e[o][n][1]||0;r[n][1]+=r[n][0]=-l/2}Du(e,t)}}function Zae(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var n=0,r=1,a,i,o;r<i;++r){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],h=d[r][1]||0,f=d[r-1][1]||0,m=(h-f)/2,v=0;v<l;++v){var p=e[t[v]],g=p[r][1]||0,x=p[r-1][1]||0;m+=g-x}c+=h,u+=m*h}a[r-1][1]+=a[r-1][0]=n,c&&(n-=u/c)}a[r-1][1]+=a[r-1][0]=n,Du(e,t)}}function xf(e){"@babel/helpers - typeof";return xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xf(e)}var eie=["type","size","sizeType"];function Ew(){return Ew=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ew.apply(this,arguments)}function gA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function vA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gA(Object(n),!0).forEach(function(r){tie(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function tie(e,t,n){return t=nie(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nie(e){var t=rie(e,"string");return xf(t)=="symbol"?t:t+""}function rie(e,t){if(xf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(xf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sie(e,t){if(e==null)return{};var n=aie(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function aie(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var DL={symbolCircle:l_,symbolCross:Cae,symbolDiamond:Aae,symbolSquare:kae,symbolStar:Dae,symbolTriangle:Mae,symbolWye:$ae},iie=Math.PI/180,oie=function(t){var n="symbol".concat(ty(t));return DL[n]||l_},lie=function(t,n,r){if(n==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*iie;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},cie=function(t,n){DL["symbol".concat(ty(t))]=n},c_=function(t){var n=t.type,r=n===void 0?"circle":n,a=t.size,i=a===void 0?64:a,o=t.sizeType,l=o===void 0?"area":o,c=sie(t,eie),u=vA(vA({},c),{},{type:r,size:i,sizeType:l}),d=function(){var g=oie(r),x=Rae().type(g).size(lie(i,l,r));return x()},h=u.className,f=u.cx,m=u.cy,v=Fe(u,!0);return f===+f&&m===+m&&i===+i?$.createElement("path",Ew({},v,{className:Ye("recharts-symbols",h),transform:"translate(".concat(f,", ").concat(m,")"),d:d()})):null};c_.registerSymbol=cie;function Mu(e){"@babel/helpers - typeof";return Mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mu(e)}function Tw(){return Tw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tw.apply(this,arguments)}function xA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function uie(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xA(Object(n),!0).forEach(function(r){yf(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function die(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,IL(r.key),r)}}function fie(e,t,n){return t&&hie(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function mie(e,t,n){return t=Hg(t),pie(e,ML()?Reflect.construct(t,n||[],Hg(e).constructor):t.apply(e,n))}function pie(e,t){if(t&&(Mu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gie(e)}function gie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ML(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ML=function(){return!!e})()}function Hg(e){return Hg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Hg(e)}function vie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ow(e,t)}function Ow(e,t){return Ow=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Ow(e,t)}function yf(e,t,n){return t=IL(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IL(e){var t=xie(e,"string");return Mu(t)=="symbol"?t:t+""}function xie(e,t){if(Mu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Mu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var is=32,u_=function(e){function t(){return die(this,t),mie(this,t,arguments)}return vie(t,e),fie(t,[{key:"renderIcon",value:function(r){var a=this.props.inactiveColor,i=is/2,o=is/6,l=is/3,c=r.inactive?a:r.color;if(r.type==="plainline")return $.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:i,x2:is,y2:i,className:"recharts-legend-icon"});if(r.type==="line")return $.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(is,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(r.type==="rect")return $.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(is/8,"h").concat(is,"v").concat(is*3/4,"h").concat(-is,"z"),className:"recharts-legend-icon"});if($.isValidElement(r.legendIcon)){var u=uie({},r);return delete u.legendIcon,$.cloneElement(r.legendIcon,u)}return $.createElement(c_,{fill:c,cx:i,cy:i,size:is,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,a=this.props,i=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,u=a.inactiveColor,d={x:0,y:0,width:is,height:is},h={display:l==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(m,v){var p=m.formatter||c,g=Ye(yf(yf({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",m.inactive));if(m.type==="none")return null;var x=qe(m.value)?null:m.value;Ws(!qe(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var y=m.inactive?u:m.color;return $.createElement("li",Tw({className:g,style:h,key:"legend-item-".concat(v)},Fl(r.props,m,v)),$.createElement(ww,{width:o,height:o,viewBox:d,style:f},r.renderIcon(m)),$.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},p?p(x,m,v):x))})}},{key:"render",value:function(){var r=this.props,a=r.payload,i=r.layout,o=r.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return $.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(j.PureComponent);yf(u_,"displayName","Legend");yf(u_,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var yie=Vx;function bie(){this.__data__=new yie,this.size=0}var jie=bie;function wie(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var Nie=wie;function Sie(e){return this.__data__.get(e)}var _ie=Sie;function Cie(e){return this.__data__.has(e)}var Pie=Cie,Aie=Vx,kie=XS,Eie=JS,Tie=200;function Oie(e,t){var n=this.__data__;if(n instanceof Aie){var r=n.__data__;if(!kie||r.length<Tie-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Eie(r)}return n.set(e,t),this.size=n.size,this}var Die=Oie,Mie=Vx,Iie=jie,$ie=Nie,Rie=_ie,Lie=Pie,Fie=Die;function kd(e){var t=this.__data__=new Mie(e);this.size=t.size}kd.prototype.clear=Iie;kd.prototype.delete=$ie;kd.prototype.get=Rie;kd.prototype.has=Lie;kd.prototype.set=Fie;var $L=kd,Bie="__lodash_hash_undefined__";function zie(e){return this.__data__.set(e,Bie),this}var Vie=zie;function qie(e){return this.__data__.has(e)}var Uie=qie,Wie=JS,Hie=Vie,Kie=Uie;function Kg(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Wie;++t<n;)this.add(e[t])}Kg.prototype.add=Kg.prototype.push=Hie;Kg.prototype.has=Kie;var RL=Kg;function Gie(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var LL=Gie;function Yie(e,t){return e.has(t)}var FL=Yie,Qie=RL,Xie=LL,Jie=FL,Zie=1,eoe=2;function toe(e,t,n,r,a,i){var o=n&Zie,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var u=i.get(e),d=i.get(t);if(u&&d)return u==t&&d==e;var h=-1,f=!0,m=n&eoe?new Qie:void 0;for(i.set(e,t),i.set(t,e);++h<l;){var v=e[h],p=t[h];if(r)var g=o?r(p,v,h,t,e,i):r(v,p,h,e,t,i);if(g!==void 0){if(g)continue;f=!1;break}if(m){if(!Xie(t,function(x,y){if(!Jie(m,y)&&(v===x||a(v,x,n,r,i)))return m.push(y)})){f=!1;break}}else if(!(v===p||a(v,p,n,r,i))){f=!1;break}}return i.delete(e),i.delete(t),f}var BL=toe,noe=Ia,roe=noe.Uint8Array,soe=roe;function aoe(e){var t=-1,n=Array(e.size);return e.forEach(function(r,a){n[++t]=[a,r]}),n}var ioe=aoe;function ooe(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var d_=ooe,yA=Nm,bA=soe,loe=QS,coe=BL,uoe=ioe,doe=d_,hoe=1,foe=2,moe="[object Boolean]",poe="[object Date]",goe="[object Error]",voe="[object Map]",xoe="[object Number]",yoe="[object RegExp]",boe="[object Set]",joe="[object String]",woe="[object Symbol]",Noe="[object ArrayBuffer]",Soe="[object DataView]",jA=yA?yA.prototype:void 0,X0=jA?jA.valueOf:void 0;function _oe(e,t,n,r,a,i,o){switch(n){case Soe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Noe:return!(e.byteLength!=t.byteLength||!i(new bA(e),new bA(t)));case moe:case poe:case xoe:return loe(+e,+t);case goe:return e.name==t.name&&e.message==t.message;case yoe:case joe:return e==t+"";case voe:var l=uoe;case boe:var c=r&hoe;if(l||(l=doe),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;r|=foe,o.set(e,t);var d=coe(l(e),l(t),r,a,i,o);return o.delete(e),d;case woe:if(X0)return X0.call(e)==X0.call(t)}return!1}var Coe=_oe;function Poe(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}var zL=Poe,Aoe=zL,koe=Br;function Eoe(e,t,n){var r=t(e);return koe(e)?r:Aoe(r,n(e))}var Toe=Eoe;function Ooe(e,t){for(var n=-1,r=e==null?0:e.length,a=0,i=[];++n<r;){var o=e[n];t(o,n,e)&&(i[a++]=o)}return i}var Doe=Ooe;function Moe(){return[]}var Ioe=Moe,$oe=Doe,Roe=Ioe,Loe=Object.prototype,Foe=Loe.propertyIsEnumerable,wA=Object.getOwnPropertySymbols,Boe=wA?function(e){return e==null?[]:(e=Object(e),$oe(wA(e),function(t){return Foe.call(e,t)}))}:Roe,zoe=Boe;function Voe(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var qoe=Voe,Uoe=xi,Woe=yi,Hoe="[object Arguments]";function Koe(e){return Woe(e)&&Uoe(e)==Hoe}var Goe=Koe,NA=Goe,Yoe=yi,VL=Object.prototype,Qoe=VL.hasOwnProperty,Xoe=VL.propertyIsEnumerable,Joe=NA(function(){return arguments}())?NA:function(e){return Yoe(e)&&Qoe.call(e,"callee")&&!Xoe.call(e,"callee")},h_=Joe,Gg={exports:{}};function Zoe(){return!1}var ele=Zoe;Gg.exports;(function(e,t){var n=Ia,r=ele,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||r;e.exports=u})(Gg,Gg.exports);var qL=Gg.exports,tle=9007199254740991,nle=/^(?:0|[1-9]\d*)$/;function rle(e,t){var n=typeof e;return t=t??tle,!!t&&(n=="number"||n!="symbol"&&nle.test(e))&&e>-1&&e%1==0&&e<t}var f_=rle,sle=9007199254740991;function ale(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=sle}var m_=ale,ile=xi,ole=m_,lle=yi,cle="[object Arguments]",ule="[object Array]",dle="[object Boolean]",hle="[object Date]",fle="[object Error]",mle="[object Function]",ple="[object Map]",gle="[object Number]",vle="[object Object]",xle="[object RegExp]",yle="[object Set]",ble="[object String]",jle="[object WeakMap]",wle="[object ArrayBuffer]",Nle="[object DataView]",Sle="[object Float32Array]",_le="[object Float64Array]",Cle="[object Int8Array]",Ple="[object Int16Array]",Ale="[object Int32Array]",kle="[object Uint8Array]",Ele="[object Uint8ClampedArray]",Tle="[object Uint16Array]",Ole="[object Uint32Array]",Kt={};Kt[Sle]=Kt[_le]=Kt[Cle]=Kt[Ple]=Kt[Ale]=Kt[kle]=Kt[Ele]=Kt[Tle]=Kt[Ole]=!0;Kt[cle]=Kt[ule]=Kt[wle]=Kt[dle]=Kt[Nle]=Kt[hle]=Kt[fle]=Kt[mle]=Kt[ple]=Kt[gle]=Kt[vle]=Kt[xle]=Kt[yle]=Kt[ble]=Kt[jle]=!1;function Dle(e){return lle(e)&&ole(e.length)&&!!Kt[ile(e)]}var Mle=Dle;function Ile(e){return function(t){return e(t)}}var UL=Ile,Yg={exports:{}};Yg.exports;(function(e,t){var n=J3,r=t&&!t.nodeType&&t,a=r&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===r,o=i&&n.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(Yg,Yg.exports);var $le=Yg.exports,Rle=Mle,Lle=UL,SA=$le,_A=SA&&SA.isTypedArray,Fle=_A?Lle(_A):Rle,WL=Fle,Ble=qoe,zle=h_,Vle=Br,qle=qL,Ule=f_,Wle=WL,Hle=Object.prototype,Kle=Hle.hasOwnProperty;function Gle(e,t){var n=Vle(e),r=!n&&zle(e),a=!n&&!r&&qle(e),i=!n&&!r&&!a&&Wle(e),o=n||r||a||i,l=o?Ble(e.length,String):[],c=l.length;for(var u in e)(t||Kle.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Ule(u,c)))&&l.push(u);return l}var Yle=Gle,Qle=Object.prototype;function Xle(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Qle;return e===n}var Jle=Xle;function Zle(e,t){return function(n){return e(t(n))}}var HL=Zle,ece=HL,tce=ece(Object.keys,Object),nce=tce,rce=Jle,sce=nce,ace=Object.prototype,ice=ace.hasOwnProperty;function oce(e){if(!rce(e))return sce(e);var t=[];for(var n in Object(e))ice.call(e,n)&&n!="constructor"&&t.push(n);return t}var lce=oce,cce=YS,uce=m_;function dce(e){return e!=null&&uce(e.length)&&!cce(e)}var Sm=dce,hce=Yle,fce=lce,mce=Sm;function pce(e){return mce(e)?hce(e):fce(e)}var ay=pce,gce=Toe,vce=zoe,xce=ay;function yce(e){return gce(e,xce,vce)}var bce=yce,CA=bce,jce=1,wce=Object.prototype,Nce=wce.hasOwnProperty;function Sce(e,t,n,r,a,i){var o=n&jce,l=CA(e),c=l.length,u=CA(t),d=u.length;if(c!=d&&!o)return!1;for(var h=c;h--;){var f=l[h];if(!(o?f in t:Nce.call(t,f)))return!1}var m=i.get(e),v=i.get(t);if(m&&v)return m==t&&v==e;var p=!0;i.set(e,t),i.set(t,e);for(var g=o;++h<c;){f=l[h];var x=e[f],y=t[f];if(r)var b=o?r(y,x,f,t,e,i):r(x,y,f,e,t,i);if(!(b===void 0?x===y||a(x,y,n,r,i):b)){p=!1;break}g||(g=f=="constructor")}if(p&&!g){var N=e.constructor,w=t.constructor;N!=w&&"constructor"in e&&"constructor"in t&&!(typeof N=="function"&&N instanceof N&&typeof w=="function"&&w instanceof w)&&(p=!1)}return i.delete(e),i.delete(t),p}var _ce=Sce,Cce=Zl,Pce=Ia,Ace=Cce(Pce,"DataView"),kce=Ace,Ece=Zl,Tce=Ia,Oce=Ece(Tce,"Promise"),Dce=Oce,Mce=Zl,Ice=Ia,$ce=Mce(Ice,"Set"),KL=$ce,Rce=Zl,Lce=Ia,Fce=Rce(Lce,"WeakMap"),Bce=Fce,Dw=kce,Mw=XS,Iw=Dce,$w=KL,Rw=Bce,GL=xi,Ed=eL,PA="[object Map]",zce="[object Object]",AA="[object Promise]",kA="[object Set]",EA="[object WeakMap]",TA="[object DataView]",Vce=Ed(Dw),qce=Ed(Mw),Uce=Ed(Iw),Wce=Ed($w),Hce=Ed(Rw),Jo=GL;(Dw&&Jo(new Dw(new ArrayBuffer(1)))!=TA||Mw&&Jo(new Mw)!=PA||Iw&&Jo(Iw.resolve())!=AA||$w&&Jo(new $w)!=kA||Rw&&Jo(new Rw)!=EA)&&(Jo=function(e){var t=GL(e),n=t==zce?e.constructor:void 0,r=n?Ed(n):"";if(r)switch(r){case Vce:return TA;case qce:return PA;case Uce:return AA;case Wce:return kA;case Hce:return EA}return t});var Kce=Jo,J0=$L,Gce=BL,Yce=Coe,Qce=_ce,OA=Kce,DA=Br,MA=qL,Xce=WL,Jce=1,IA="[object Arguments]",$A="[object Array]",jp="[object Object]",Zce=Object.prototype,RA=Zce.hasOwnProperty;function eue(e,t,n,r,a,i){var o=DA(e),l=DA(t),c=o?$A:OA(e),u=l?$A:OA(t);c=c==IA?jp:c,u=u==IA?jp:u;var d=c==jp,h=u==jp,f=c==u;if(f&&MA(e)){if(!MA(t))return!1;o=!0,d=!1}if(f&&!d)return i||(i=new J0),o||Xce(e)?Gce(e,t,n,r,a,i):Yce(e,t,c,n,r,a,i);if(!(n&Jce)){var m=d&&RA.call(e,"__wrapped__"),v=h&&RA.call(t,"__wrapped__");if(m||v){var p=m?e.value():e,g=v?t.value():t;return i||(i=new J0),a(p,g,n,r,i)}}return f?(i||(i=new J0),Qce(e,t,n,r,a,i)):!1}var tue=eue,nue=tue,LA=yi;function YL(e,t,n,r,a){return e===t?!0:e==null||t==null||!LA(e)&&!LA(t)?e!==e&&t!==t:nue(e,t,n,r,YL,a)}var p_=YL,rue=$L,sue=p_,aue=1,iue=2;function oue(e,t,n,r){var a=n.length,i=a,o=!r;if(e==null)return!i;for(e=Object(e);a--;){var l=n[a];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<i;){l=n[a];var c=l[0],u=e[c],d=l[1];if(o&&l[2]){if(u===void 0&&!(c in e))return!1}else{var h=new rue;if(r)var f=r(u,d,c,e,t,h);if(!(f===void 0?sue(d,u,aue|iue,r,h):f))return!1}}return!0}var lue=oue,cue=$o;function uue(e){return e===e&&!cue(e)}var QL=uue,due=QL,hue=ay;function fue(e){for(var t=hue(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,due(a)]}return t}var mue=fue;function pue(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var XL=pue,gue=lue,vue=mue,xue=XL;function yue(e){var t=vue(e);return t.length==1&&t[0][2]?xue(t[0][0],t[0][1]):function(n){return n===e||gue(n,e,t)}}var bue=yue;function jue(e,t){return e!=null&&t in Object(e)}var wue=jue,Nue=aL,Sue=h_,_ue=Br,Cue=f_,Pue=m_,Aue=Ux;function kue(e,t,n){t=Nue(t,e);for(var r=-1,a=t.length,i=!1;++r<a;){var o=Aue(t[r]);if(!(i=e!=null&&n(e,o)))break;e=e[o]}return i||++r!=a?i:(a=e==null?0:e.length,!!a&&Pue(a)&&Cue(o,a)&&(_ue(e)||Sue(e)))}var Eue=kue,Tue=wue,Oue=Eue;function Due(e,t){return e!=null&&Oue(e,t,Tue)}var Mue=Due,Iue=p_,$ue=iL,Rue=Mue,Lue=GS,Fue=QL,Bue=XL,zue=Ux,Vue=1,que=2;function Uue(e,t){return Lue(e)&&Fue(t)?Bue(zue(e),t):function(n){var r=$ue(n,e);return r===void 0&&r===t?Rue(n,e):Iue(t,r,Vue|que)}}var Wue=Uue;function Hue(e){return e}var Td=Hue;function Kue(e){return function(t){return t==null?void 0:t[e]}}var Gue=Kue,Yue=t_;function Que(e){return function(t){return Yue(t,e)}}var Xue=Que,Jue=Gue,Zue=Xue,ede=GS,tde=Ux;function nde(e){return ede(e)?Jue(tde(e)):Zue(e)}var rde=nde,sde=bue,ade=Wue,ide=Td,ode=Br,lde=rde;function cde(e){return typeof e=="function"?e:e==null?ide:typeof e=="object"?ode(e)?ade(e[0],e[1]):sde(e):lde(e)}var $a=cde;function ude(e,t,n,r){for(var a=e.length,i=n+(r?1:-1);r?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var JL=ude;function dde(e){return e!==e}var hde=dde;function fde(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}var mde=fde,pde=JL,gde=hde,vde=mde;function xde(e,t,n){return t===t?vde(e,t,n):pde(e,gde,n)}var yde=xde,bde=yde;function jde(e,t){var n=e==null?0:e.length;return!!n&&bde(e,t,0)>-1}var wde=jde;function Nde(e,t,n){for(var r=-1,a=e==null?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}var Sde=Nde;function _de(){}var Cde=_de,Z0=KL,Pde=Cde,Ade=d_,kde=1/0,Ede=Z0&&1/Ade(new Z0([,-0]))[1]==kde?function(e){return new Z0(e)}:Pde,Tde=Ede,Ode=RL,Dde=wde,Mde=Sde,Ide=FL,$de=Tde,Rde=d_,Lde=200;function Fde(e,t,n){var r=-1,a=Dde,i=e.length,o=!0,l=[],c=l;if(n)o=!1,a=Mde;else if(i>=Lde){var u=t?null:$de(e);if(u)return Rde(u);o=!1,a=Ide,c=new Ode}else c=t?[]:l;e:for(;++r<i;){var d=e[r],h=t?t(d):d;if(d=n||d!==0?d:0,o&&h===h){for(var f=c.length;f--;)if(c[f]===h)continue e;t&&c.push(h),l.push(d)}else a(c,h,n)||(c!==l&&c.push(h),l.push(d))}return l}var Bde=Fde,zde=$a,Vde=Bde;function qde(e,t){return e&&e.length?Vde(e,zde(t)):[]}var Ude=qde;const FA=Ct(Ude);function ZL(e,t,n){return t===!0?FA(e,n):qe(t)?FA(e,t):e}function Iu(e){"@babel/helpers - typeof";return Iu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Iu(e)}var Wde=["ref"];function BA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Fa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BA(Object(n),!0).forEach(function(r){iy(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Hde(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zA(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tF(r.key),r)}}function Kde(e,t,n){return t&&zA(e.prototype,t),n&&zA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Gde(e,t,n){return t=Qg(t),Yde(e,eF()?Reflect.construct(t,n||[],Qg(e).constructor):t.apply(e,n))}function Yde(e,t){if(t&&(Iu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qde(e)}function Qde(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eF=function(){return!!e})()}function Qg(e){return Qg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Qg(e)}function Xde(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lw(e,t)}function Lw(e,t){return Lw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Lw(e,t)}function iy(e,t,n){return t=tF(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tF(e){var t=Jde(e,"string");return Iu(t)=="symbol"?t:t+""}function Jde(e,t){if(Iu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Iu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zde(e,t){if(e==null)return{};var n=ehe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ehe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function the(e){return e.value}function nhe(e,t){if($.isValidElement(e))return $.cloneElement(e,t);if(typeof e=="function")return $.createElement(e,t);t.ref;var n=Zde(t,Wde);return $.createElement(u_,n)}var VA=1,eu=function(e){function t(){var n;Hde(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=Gde(this,t,[].concat(a)),iy(n,"lastBoundingBox",{width:-1,height:-1}),n}return Xde(t,e),Kde(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>VA||Math.abs(a.height-this.lastBoundingBox.height)>VA)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,r&&r(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Fa({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var a=this.props,i=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,u=a.chartWidth,d=a.chartHeight,h,f;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&i==="vertical"){var m=this.getBBoxSnapshot();h={left:((u||0)-m.width)/2}}else h=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(l==="middle"){var v=this.getBBoxSnapshot();f={top:((d||0)-v.height)/2}}else f=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Fa(Fa({},h),f)}},{key:"render",value:function(){var r=this,a=this.props,i=a.content,o=a.width,l=a.height,c=a.wrapperStyle,u=a.payloadUniqBy,d=a.payload,h=Fa(Fa({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return $.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(m){r.wrapperNode=m}},nhe(i,Fa(Fa({},this.props),{},{payload:ZL(d,u,the)})))}}],[{key:"getWithHeight",value:function(r,a){var i=Fa(Fa({},this.defaultProps),r.props),o=i.layout;return o==="vertical"&&pe(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||a}:null}}])}(j.PureComponent);iy(eu,"displayName","Legend");iy(eu,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var qA=Nm,rhe=h_,she=Br,UA=qA?qA.isConcatSpreadable:void 0;function ahe(e){return she(e)||rhe(e)||!!(UA&&e&&e[UA])}var ihe=ahe,ohe=zL,lhe=ihe;function nF(e,t,n,r,a){var i=-1,o=e.length;for(n||(n=lhe),a||(a=[]);++i<o;){var l=e[i];t>0&&n(l)?t>1?nF(l,t-1,n,r,a):ohe(a,l):r||(a[a.length]=l)}return a}var rF=nF;function che(e){return function(t,n,r){for(var a=-1,i=Object(t),o=r(t),l=o.length;l--;){var c=o[e?l:++a];if(n(i[c],c,i)===!1)break}return t}}var uhe=che,dhe=uhe,hhe=dhe(),fhe=hhe,mhe=fhe,phe=ay;function ghe(e,t){return e&&mhe(e,t,phe)}var sF=ghe,vhe=Sm;function xhe(e,t){return function(n,r){if(n==null)return n;if(!vhe(n))return e(n,r);for(var a=n.length,i=t?a:-1,o=Object(n);(t?i--:++i<a)&&r(o[i],i,o)!==!1;);return n}}var yhe=xhe,bhe=sF,jhe=yhe,whe=jhe(bhe),g_=whe,Nhe=g_,She=Sm;function _he(e,t){var n=-1,r=She(e)?Array(e.length):[];return Nhe(e,function(a,i,o){r[++n]=t(a,i,o)}),r}var aF=_he;function Che(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}var Phe=Che,WA=wd;function Ahe(e,t){if(e!==t){var n=e!==void 0,r=e===null,a=e===e,i=WA(e),o=t!==void 0,l=t===null,c=t===t,u=WA(t);if(!l&&!u&&!i&&e>t||i&&o&&c&&!l&&!u||r&&o&&c||!n&&c||!a)return 1;if(!r&&!i&&!u&&e<t||u&&n&&a&&!r&&!i||l&&n&&a||!o&&a||!c)return-1}return 0}var khe=Ahe,Ehe=khe;function The(e,t,n){for(var r=-1,a=e.criteria,i=t.criteria,o=a.length,l=n.length;++r<o;){var c=Ehe(a[r],i[r]);if(c){if(r>=l)return c;var u=n[r];return c*(u=="desc"?-1:1)}}return e.index-t.index}var Ohe=The,eb=e_,Dhe=t_,Mhe=$a,Ihe=aF,$he=Phe,Rhe=UL,Lhe=Ohe,Fhe=Td,Bhe=Br;function zhe(e,t,n){t.length?t=eb(t,function(i){return Bhe(i)?function(o){return Dhe(o,i.length===1?i[0]:i)}:i}):t=[Fhe];var r=-1;t=eb(t,Rhe(Mhe));var a=Ihe(e,function(i,o,l){var c=eb(t,function(u){return u(i)});return{criteria:c,index:++r,value:i}});return $he(a,function(i,o){return Lhe(i,o,n)})}var Vhe=zhe;function qhe(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var Uhe=qhe,Whe=Uhe,HA=Math.max;function Hhe(e,t,n){return t=HA(t===void 0?e.length-1:t,0),function(){for(var r=arguments,a=-1,i=HA(r.length-t,0),o=Array(i);++a<i;)o[a]=r[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=r[a];return l[t]=n(o),Whe(e,this,l)}}var Khe=Hhe;function Ghe(e){return function(){return e}}var Yhe=Ghe,Qhe=Zl,Xhe=function(){try{var e=Qhe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),iF=Xhe,Jhe=Yhe,KA=iF,Zhe=Td,efe=KA?function(e,t){return KA(e,"toString",{configurable:!0,enumerable:!1,value:Jhe(t),writable:!0})}:Zhe,tfe=efe,nfe=800,rfe=16,sfe=Date.now;function afe(e){var t=0,n=0;return function(){var r=sfe(),a=rfe-(r-n);if(n=r,a>0){if(++t>=nfe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var ife=afe,ofe=tfe,lfe=ife,cfe=lfe(ofe),ufe=cfe,dfe=Td,hfe=Khe,ffe=ufe;function mfe(e,t){return ffe(hfe(e,t,dfe),e+"")}var pfe=mfe,gfe=QS,vfe=Sm,xfe=f_,yfe=$o;function bfe(e,t,n){if(!yfe(n))return!1;var r=typeof t;return(r=="number"?vfe(n)&&xfe(t,n.length):r=="string"&&t in n)?gfe(n[t],e):!1}var oy=bfe,jfe=rF,wfe=Vhe,Nfe=pfe,GA=oy,Sfe=Nfe(function(e,t){if(e==null)return[];var n=t.length;return n>1&&GA(e,t[0],t[1])?t=[]:n>2&&GA(t[0],t[1],t[2])&&(t=[t[0]]),wfe(e,jfe(t,1),[])}),_fe=Sfe;const v_=Ct(_fe);function bf(e){"@babel/helpers - typeof";return bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bf(e)}function Fw(){return Fw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fw.apply(this,arguments)}function Cfe(e,t){return Efe(e)||kfe(e,t)||Afe(e,t)||Pfe()}function Pfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Afe(e,t){if(e){if(typeof e=="string")return YA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return YA(e,t)}}function YA(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function kfe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Efe(e){if(Array.isArray(e))return e}function QA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function tb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QA(Object(n),!0).forEach(function(r){Tfe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Tfe(e,t,n){return t=Ofe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ofe(e){var t=Dfe(e,"string");return bf(t)=="symbol"?t:t+""}function Dfe(e,t){if(bf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(bf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mfe(e){return Array.isArray(e)&&Tn(e[0])&&Tn(e[1])?e.join(" ~ "):e}var Ife=function(t){var n=t.separator,r=n===void 0?" : ":n,a=t.contentStyle,i=a===void 0?{}:a,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,d=t.payload,h=t.formatter,f=t.itemSorter,m=t.wrapperClassName,v=t.labelClassName,p=t.label,g=t.labelFormatter,x=t.accessibilityLayer,y=x===void 0?!1:x,b=function(){if(d&&d.length){var E={padding:0,margin:0},z=(f?v_(d,f):d).map(function(I,W){if(I.type==="none")return null;var V=tb({display:"block",paddingTop:4,paddingBottom:4,color:I.color||"#000"},l),H=I.formatter||h||Mfe,k=I.value,D=I.name,X=k,Q=D;if(H&&X!=null&&Q!=null){var te=H(k,D,I,W,d);if(Array.isArray(te)){var ne=Cfe(te,2);X=ne[0],Q=ne[1]}else X=te}return $.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(W),style:V},Tn(Q)?$.createElement("span",{className:"recharts-tooltip-item-name"},Q):null,Tn(Q)?$.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,$.createElement("span",{className:"recharts-tooltip-item-value"},X),$.createElement("span",{className:"recharts-tooltip-item-unit"},I.unit||""))});return $.createElement("ul",{className:"recharts-tooltip-item-list",style:E},z)}return null},N=tb({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),w=tb({margin:0},u),S=!Qe(p),_=S?p:"",C=Ye("recharts-default-tooltip",m),P=Ye("recharts-tooltip-label",v);S&&g&&d!==void 0&&d!==null&&(_=g(p,d));var A=y?{role:"status","aria-live":"assertive"}:{};return $.createElement("div",Fw({className:C,style:N},A),$.createElement("p",{className:P,style:w},$.isValidElement(_)?_:"".concat(_)),b())};function jf(e){"@babel/helpers - typeof";return jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jf(e)}function wp(e,t,n){return t=$fe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $fe(e){var t=Rfe(e,"string");return jf(t)=="symbol"?t:t+""}function Rfe(e,t){if(jf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(jf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nh="recharts-tooltip-wrapper",Lfe={visibility:"hidden"};function Ffe(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return Ye(nh,wp(wp(wp(wp({},"".concat(nh,"-right"),pe(n)&&t&&pe(t.x)&&n>=t.x),"".concat(nh,"-left"),pe(n)&&t&&pe(t.x)&&n<t.x),"".concat(nh,"-bottom"),pe(r)&&t&&pe(t.y)&&r>=t.y),"".concat(nh,"-top"),pe(r)&&t&&pe(t.y)&&r<t.y))}function XA(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,a=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(i&&pe(i[r]))return i[r];var d=n[r]-l-a,h=n[r]+a;if(t[r])return o[r]?d:h;if(o[r]){var f=d,m=c[r];return f<m?Math.max(h,c[r]):Math.max(d,c[r])}var v=h+l,p=c[r]+u;return v>p?Math.max(d,c[r]):Math.max(h,c[r])}function Bfe(e){var t=e.translateX,n=e.translateY,r=e.useTranslate3d;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function zfe(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.offsetTopLeft,a=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,d,h;return o.height>0&&o.width>0&&n?(d=XA({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=XA({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=Bfe({translateX:d,translateY:h,useTranslate3d:l})):u=Lfe,{cssProperties:u,cssClasses:Ffe({translateX:d,translateY:h,coordinate:n})}}function $u(e){"@babel/helpers - typeof";return $u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$u(e)}function JA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ZA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JA(Object(n),!0).forEach(function(r){zw(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Vfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qfe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,lF(r.key),r)}}function Ufe(e,t,n){return t&&qfe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Wfe(e,t,n){return t=Xg(t),Hfe(e,oF()?Reflect.construct(t,n||[],Xg(e).constructor):t.apply(e,n))}function Hfe(e,t){if(t&&($u(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kfe(e)}function Kfe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oF=function(){return!!e})()}function Xg(e){return Xg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Xg(e)}function Gfe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bw(e,t)}function Bw(e,t){return Bw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Bw(e,t)}function zw(e,t,n){return t=lF(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lF(e){var t=Yfe(e,"string");return $u(t)=="symbol"?t:t+""}function Yfe(e,t){if($u(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if($u(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ek=1,Qfe=function(e){function t(){var n;Vfe(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=Wfe(this,t,[].concat(a)),zw(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),zw(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,d;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=n.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),n}return Gfe(t,e),Ufe(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>ek||Math.abs(r.height-this.state.lastBoundingBox.height)>ek)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.children,d=a.coordinate,h=a.hasPayload,f=a.isAnimationActive,m=a.offset,v=a.position,p=a.reverseDirection,g=a.useTranslate3d,x=a.viewBox,y=a.wrapperStyle,b=zfe({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:m,position:v,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:g,viewBox:x}),N=b.cssClasses,w=b.cssProperties,S=ZA(ZA({transition:f&&i?"transform ".concat(l,"ms ").concat(c):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&h?"visible":"hidden",position:"absolute",top:0,left:0},y);return $.createElement("div",{tabIndex:-1,className:N,style:S,ref:function(C){r.wrapperNode=C}},u)}}])}(j.PureComponent),Xfe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},_a={isSsr:Xfe(),get:function(t){return _a[t]},set:function(t,n){if(typeof t=="string")_a[t]=n;else{var r=Object.keys(t);r&&r.length&&r.forEach(function(a){_a[a]=t[a]})}}};function Ru(e){"@babel/helpers - typeof";return Ru=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ru(e)}function tk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function nk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tk(Object(n),!0).forEach(function(r){x_(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tk(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Jfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zfe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,uF(r.key),r)}}function eme(e,t,n){return t&&Zfe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function tme(e,t,n){return t=Jg(t),nme(e,cF()?Reflect.construct(t,n||[],Jg(e).constructor):t.apply(e,n))}function nme(e,t){if(t&&(Ru(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rme(e)}function rme(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cF=function(){return!!e})()}function Jg(e){return Jg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Jg(e)}function sme(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vw(e,t)}function Vw(e,t){return Vw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Vw(e,t)}function x_(e,t,n){return t=uF(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uF(e){var t=ame(e,"string");return Ru(t)=="symbol"?t:t+""}function ame(e,t){if(Ru(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ru(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ime(e){return e.dataKey}function ome(e,t){return $.isValidElement(e)?$.cloneElement(e,t):typeof e=="function"?$.createElement(e,t):$.createElement(Ife,t)}var rr=function(e){function t(){return Jfe(this,t),tme(this,t,arguments)}return sme(t,e),eme(t,[{key:"render",value:function(){var r=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.content,d=a.coordinate,h=a.filterNull,f=a.isAnimationActive,m=a.offset,v=a.payload,p=a.payloadUniqBy,g=a.position,x=a.reverseDirection,y=a.useTranslate3d,b=a.viewBox,N=a.wrapperStyle,w=v??[];h&&w.length&&(w=ZL(v.filter(function(_){return _.value!=null&&(_.hide!==!0||r.props.includeHidden)}),p,ime));var S=w.length>0;return $.createElement(Qfe,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:f,active:i,coordinate:d,hasPayload:S,offset:m,position:g,reverseDirection:x,useTranslate3d:y,viewBox:b,wrapperStyle:N},ome(u,nk(nk({},this.props),{},{payload:w})))}}])}(j.PureComponent);x_(rr,"displayName","Tooltip");x_(rr,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!_a.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var lme=Ia,cme=function(){return lme.Date.now()},ume=cme,dme=/\s/;function hme(e){for(var t=e.length;t--&&dme.test(e.charAt(t)););return t}var fme=hme,mme=fme,pme=/^\s+/;function gme(e){return e&&e.slice(0,mme(e)+1).replace(pme,"")}var vme=gme,xme=vme,rk=$o,yme=wd,sk=NaN,bme=/^[-+]0x[0-9a-f]+$/i,jme=/^0b[01]+$/i,wme=/^0o[0-7]+$/i,Nme=parseInt;function Sme(e){if(typeof e=="number")return e;if(yme(e))return sk;if(rk(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=rk(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=xme(e);var n=jme.test(e);return n||wme.test(e)?Nme(e.slice(2),n?2:8):bme.test(e)?sk:+e}var dF=Sme,_me=$o,nb=ume,ak=dF,Cme="Expected a function",Pme=Math.max,Ame=Math.min;function kme(e,t,n){var r,a,i,o,l,c,u=0,d=!1,h=!1,f=!0;if(typeof e!="function")throw new TypeError(Cme);t=ak(t)||0,_me(n)&&(d=!!n.leading,h="maxWait"in n,i=h?Pme(ak(n.maxWait)||0,t):i,f="trailing"in n?!!n.trailing:f);function m(S){var _=r,C=a;return r=a=void 0,u=S,o=e.apply(C,_),o}function v(S){return u=S,l=setTimeout(x,t),d?m(S):o}function p(S){var _=S-c,C=S-u,P=t-_;return h?Ame(P,i-C):P}function g(S){var _=S-c,C=S-u;return c===void 0||_>=t||_<0||h&&C>=i}function x(){var S=nb();if(g(S))return y(S);l=setTimeout(x,p(S))}function y(S){return l=void 0,f&&r?m(S):(r=a=void 0,o)}function b(){l!==void 0&&clearTimeout(l),u=0,r=c=a=l=void 0}function N(){return l===void 0?o:y(nb())}function w(){var S=nb(),_=g(S);if(r=arguments,a=this,c=S,_){if(l===void 0)return v(c);if(h)return clearTimeout(l),l=setTimeout(x,t),m(c)}return l===void 0&&(l=setTimeout(x,t)),o}return w.cancel=b,w.flush=N,w}var Eme=kme,Tme=Eme,Ome=$o,Dme="Expected a function";function Mme(e,t,n){var r=!0,a=!0;if(typeof e!="function")throw new TypeError(Dme);return Ome(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),Tme(e,t,{leading:r,maxWait:t,trailing:a})}var Ime=Mme;const hF=Ct(Ime);function wf(e){"@babel/helpers - typeof";return wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wf(e)}function ik(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Np(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ik(Object(n),!0).forEach(function(r){$me(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ik(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $me(e,t,n){return t=Rme(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rme(e){var t=Lme(e,"string");return wf(t)=="symbol"?t:t+""}function Lme(e,t){if(wf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(wf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fme(e,t){return qme(e)||Vme(e,t)||zme(e,t)||Bme()}function Bme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zme(e,t){if(e){if(typeof e=="string")return ok(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ok(e,t)}}function ok(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vme(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function qme(e){if(Array.isArray(e))return e}var ec=j.forwardRef(function(e,t){var n=e.aspect,r=e.initialDimension,a=r===void 0?{width:-1,height:-1}:r,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,d=u===void 0?0:u,h=e.minHeight,f=e.maxHeight,m=e.children,v=e.debounce,p=v===void 0?0:v,g=e.id,x=e.className,y=e.onResize,b=e.style,N=b===void 0?{}:b,w=j.useRef(null),S=j.useRef();S.current=y,j.useImperativeHandle(t,function(){return Object.defineProperty(w.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),w.current},configurable:!0})});var _=j.useState({containerWidth:a.width,containerHeight:a.height}),C=Fme(_,2),P=C[0],A=C[1],O=j.useCallback(function(z,I){A(function(W){var V=Math.round(z),H=Math.round(I);return W.containerWidth===V&&W.containerHeight===H?W:{containerWidth:V,containerHeight:H}})},[]);j.useEffect(function(){var z=function(D){var X,Q=D[0].contentRect,te=Q.width,ne=Q.height;O(te,ne),(X=S.current)===null||X===void 0||X.call(S,te,ne)};p>0&&(z=hF(z,p,{trailing:!0,leading:!1}));var I=new ResizeObserver(z),W=w.current.getBoundingClientRect(),V=W.width,H=W.height;return O(V,H),I.observe(w.current),function(){I.disconnect()}},[O,p]);var E=j.useMemo(function(){var z=P.containerWidth,I=P.containerHeight;if(z<0||I<0)return null;Ws(ol(o)||ol(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Ws(!n||n>0,"The aspect(%s) must be greater than zero.",n);var W=ol(o)?z:o,V=ol(c)?I:c;n&&n>0&&(W?V=W/n:V&&(W=V*n),f&&V>f&&(V=f)),Ws(W>0||V>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,W,V,o,c,d,h,n);var H=!Array.isArray(m)&&ni(m.type).endsWith("Chart");return $.Children.map(m,function(k){return $.isValidElement(k)?j.cloneElement(k,Np({width:W,height:V},H?{style:Np({height:"100%",width:"100%",maxHeight:V,maxWidth:W},k.props.style)}:{})):k})},[n,m,c,f,h,d,P,o]);return $.createElement("div",{id:g?"".concat(g):void 0,className:Ye("recharts-responsive-container",x),style:Np(Np({},N),{},{width:o,height:c,minWidth:d,minHeight:h,maxHeight:f}),ref:w},E)}),Od=function(t){return null};Od.displayName="Cell";function Nf(e){"@babel/helpers - typeof";return Nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nf(e)}function lk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function qw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lk(Object(n),!0).forEach(function(r){Ume(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lk(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ume(e,t,n){return t=Wme(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wme(e){var t=Hme(e,"string");return Nf(t)=="symbol"?t:t+""}function Hme(e,t){if(Nf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Nf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xc={widthCache:{},cacheCount:0},Kme=2e3,Gme={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},ck="recharts_measurement_span";function Yme(e){var t=qw({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var Mh=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||_a.isSsr)return{width:0,height:0};var r=Yme(n),a=JSON.stringify({text:t,copyStyle:r});if(xc.widthCache[a])return xc.widthCache[a];try{var i=document.getElementById(ck);i||(i=document.createElement("span"),i.setAttribute("id",ck),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=qw(qw({},Gme),r);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return xc.widthCache[a]=c,++xc.cacheCount>Kme&&(xc.cacheCount=0,xc.widthCache={}),c}catch{return{width:0,height:0}}},Qme=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Sf(e){"@babel/helpers - typeof";return Sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sf(e)}function Zg(e,t){return epe(e)||Zme(e,t)||Jme(e,t)||Xme()}function Xme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jme(e,t){if(e){if(typeof e=="string")return uk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uk(e,t)}}function uk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Zme(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function epe(e){if(Array.isArray(e))return e}function tpe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,rpe(r.key),r)}}function npe(e,t,n){return t&&dk(e.prototype,t),n&&dk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function rpe(e){var t=spe(e,"string");return Sf(t)=="symbol"?t:t+""}function spe(e,t){if(Sf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Sf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var hk=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,fk=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ape=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,ipe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,fF={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},ope=Object.keys(fF),Lc="NaN";function lpe(e,t){return e*fF[t]}var Sp=function(){function e(t,n){tpe(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!ape.test(n)&&(this.num=NaN,this.unit=""),ope.includes(n)&&(this.num=lpe(t,n),this.unit="px")}return npe(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,a=(r=ipe.exec(n))!==null&&r!==void 0?r:[],i=Zg(a,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])}();function mF(e){if(e.includes(Lc))return Lc;for(var t=e;t.includes("*")||t.includes("/");){var n,r=(n=hk.exec(t))!==null&&n!==void 0?n:[],a=Zg(r,4),i=a[1],o=a[2],l=a[3],c=Sp.parse(i??""),u=Sp.parse(l??""),d=o==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return Lc;t=t.replace(hk,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,f=(h=fk.exec(t))!==null&&h!==void 0?h:[],m=Zg(f,4),v=m[1],p=m[2],g=m[3],x=Sp.parse(v??""),y=Sp.parse(g??""),b=p==="+"?x.add(y):x.subtract(y);if(b.isNaN())return Lc;t=t.replace(fk,b.toString())}return t}var mk=/\(([^()]*)\)/;function cpe(e){for(var t=e;t.includes("(");){var n=mk.exec(t),r=Zg(n,2),a=r[1];t=t.replace(mk,mF(a))}return t}function upe(e){var t=e.replace(/\s+/g,"");return t=cpe(t),t=mF(t),t}function dpe(e){try{return upe(e)}catch{return Lc}}function rb(e){var t=dpe(e.slice(5,-1));return t===Lc?"":t}var hpe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],fpe=["dx","dy","angle","className","breakAll"];function Uw(){return Uw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Uw.apply(this,arguments)}function pk(e,t){if(e==null)return{};var n=mpe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function mpe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function gk(e,t){return xpe(e)||vpe(e,t)||gpe(e,t)||ppe()}function ppe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gpe(e,t){if(e){if(typeof e=="string")return vk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vk(e,t)}}function vk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function vpe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function xpe(e){if(Array.isArray(e))return e}var pF=/[ \f\n\r\t\v\u2028\u2029]+/,gF=function(t){var n=t.children,r=t.breakAll,a=t.style;try{var i=[];Qe(n)||(r?i=n.toString().split(""):i=n.toString().split(pF));var o=i.map(function(c){return{word:c,width:Mh(c,a).width}}),l=r?0:Mh(" ",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},ype=function(t,n,r,a,i){var o=t.maxLines,l=t.children,c=t.style,u=t.breakAll,d=pe(o),h=l,f=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return W.reduce(function(V,H){var k=H.word,D=H.width,X=V[V.length-1];if(X&&(a==null||i||X.width+D+r<Number(a)))X.words.push(k),X.width+=D+r;else{var Q={words:[k],width:D};V.push(Q)}return V},[])},m=f(n),v=function(W){return W.reduce(function(V,H){return V.width>H.width?V:H})};if(!d)return m;for(var p="…",g=function(W){var V=h.slice(0,W),H=gF({breakAll:u,style:c,children:V+p}).wordsWithComputedWidth,k=f(H),D=k.length>o||v(k).width>Number(a);return[D,k]},x=0,y=h.length-1,b=0,N;x<=y&&b<=h.length-1;){var w=Math.floor((x+y)/2),S=w-1,_=g(S),C=gk(_,2),P=C[0],A=C[1],O=g(w),E=gk(O,1),z=E[0];if(!P&&!z&&(x=w+1),P&&z&&(y=w-1),!P&&z){N=A;break}b++}return N||m},xk=function(t){var n=Qe(t)?[]:t.toString().split(pF);return[{words:n}]},bpe=function(t){var n=t.width,r=t.scaleToFit,a=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((n||r)&&!_a.isSsr){var c,u,d=gF({breakAll:o,children:a,style:i});if(d){var h=d.wordsWithComputedWidth,f=d.spaceWidth;c=h,u=f}else return xk(a);return ype({breakAll:o,children:a,maxLines:l,style:i},c,u,n,r)}return xk(a)},yk="#808080",Bl=function(t){var n=t.x,r=n===void 0?0:n,a=t.y,i=a===void 0?0:a,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,d=t.scaleToFit,h=d===void 0?!1:d,f=t.textAnchor,m=f===void 0?"start":f,v=t.verticalAnchor,p=v===void 0?"end":v,g=t.fill,x=g===void 0?yk:g,y=pk(t,hpe),b=j.useMemo(function(){return bpe({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:h,style:y.style,width:y.width})},[y.breakAll,y.children,y.maxLines,h,y.style,y.width]),N=y.dx,w=y.dy,S=y.angle,_=y.className,C=y.breakAll,P=pk(y,fpe);if(!Tn(r)||!Tn(i))return null;var A=r+(pe(N)?N:0),O=i+(pe(w)?w:0),E;switch(p){case"start":E=rb("calc(".concat(u,")"));break;case"middle":E=rb("calc(".concat((b.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:E=rb("calc(".concat(b.length-1," * -").concat(l,")"));break}var z=[];if(h){var I=b[0].width,W=y.width;z.push("scale(".concat((pe(W)?W/I:1)/I,")"))}return S&&z.push("rotate(".concat(S,", ").concat(A,", ").concat(O,")")),z.length&&(P.transform=z.join(" ")),$.createElement("text",Uw({},Fe(P,!0),{x:A,y:O,className:Ye("recharts-text",_),textAnchor:m,fill:x.includes("url")?yk:x}),b.map(function(V,H){var k=V.words.join(C?"":" ");return $.createElement("tspan",{x:A,dy:H===0?E:l,key:"".concat(k,"-").concat(H)},k)}))};function po(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function jpe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function y_(e){let t,n,r;e.length!==2?(t=po,n=(l,c)=>po(e(l),c),r=(l,c)=>e(l)-c):(t=e===po||e===jpe?e:wpe,n=e,r=e);function a(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const h=u+d>>>1;n(l[h],c)<0?u=h+1:d=h}while(u<d)}return u}function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const h=u+d>>>1;n(l[h],c)<=0?u=h+1:d=h}while(u<d)}return u}function o(l,c,u=0,d=l.length){const h=a(l,c,u,d-1);return h>u&&r(l[h-1],c)>-r(l[h],c)?h-1:h}return{left:a,center:o,right:i}}function wpe(){return 0}function vF(e){return e===null?NaN:+e}function*Npe(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const Spe=y_(po),_m=Spe.right;y_(vF).center;class bk extends Map{constructor(t,n=Ppe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,a]of t)this.set(r,a)}get(t){return super.get(jk(this,t))}has(t){return super.has(jk(this,t))}set(t,n){return super.set(_pe(this,t),n)}delete(t){return super.delete(Cpe(this,t))}}function jk({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function _pe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Cpe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Ppe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Ape(e=po){if(e===po)return xF;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function xF(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const kpe=Math.sqrt(50),Epe=Math.sqrt(10),Tpe=Math.sqrt(2);function ev(e,t,n){const r=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(r)),i=r/Math.pow(10,a),o=i>=kpe?10:i>=Epe?5:i>=Tpe?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=n&&n<2?ev(e,t,n*2):[l,c,u]}function Ww(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[a,i,o]=r?ev(t,e,n):ev(e,t,n);if(!(i>=a))return[];const l=i-a+1,c=new Array(l);if(r)if(o<0)for(let u=0;u<l;++u)c[u]=(i-u)/-o;else for(let u=0;u<l;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function Hw(e,t,n){return t=+t,e=+e,n=+n,ev(e,t,n)[2]}function Kw(e,t,n){t=+t,e=+e,n=+n;const r=t<e,a=r?Hw(t,e,n):Hw(e,t,n);return(r?-1:1)*(a<0?1/-a:a)}function wk(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function Nk(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function yF(e,t,n=0,r=1/0,a){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(a=a===void 0?xF:Ape(a);r>n;){if(r-n>600){const c=r-n+1,u=t-n+1,d=Math.log(c),h=.5*Math.exp(2*d/3),f=.5*Math.sqrt(d*h*(c-h)/c)*(u-c/2<0?-1:1),m=Math.max(n,Math.floor(t-u*h/c+f)),v=Math.min(r,Math.floor(t+(c-u)*h/c+f));yF(e,t,m,v,a)}const i=e[t];let o=n,l=r;for(rh(e,n,t),a(e[r],i)>0&&rh(e,n,r);o<l;){for(rh(e,o,l),++o,--l;a(e[o],i)<0;)++o;for(;a(e[l],i)>0;)--l}a(e[n],i)===0?rh(e,n,l):(++l,rh(e,l,r)),l<=t&&(n=l+1),t<=l&&(r=l-1)}return e}function rh(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Ope(e,t,n){if(e=Float64Array.from(Npe(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return Nk(e);if(t>=1)return wk(e);var r,a=(r-1)*t,i=Math.floor(a),o=wk(yF(e,i).subarray(0,i+1)),l=Nk(e.subarray(i+1));return o+(l-o)*(a-i)}}function Dpe(e,t,n=vF){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,a=(r-1)*t,i=Math.floor(a),o=+n(e[i],i,e),l=+n(e[i+1],i+1,e);return o+(l-o)*(a-i)}}function Mpe(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=Math.max(0,Math.ceil((t-e)/n))|0,i=new Array(a);++r<a;)i[r]=e+r*n;return i}function Ss(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function bi(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Gw=Symbol("implicit");function b_(){var e=new bk,t=[],n=[],r=Gw;function a(i){let o=e.get(i);if(o===void 0){if(r!==Gw)return r;e.set(i,o=t.push(i)-1)}return n[o%n.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new bk;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(n=Array.from(i),a):n.slice()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return b_(t,n).unknown(r)},Ss.apply(a,arguments),a}function _f(){var e=b_().unknown(void 0),t=e.domain,n=e.range,r=0,a=1,i,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function h(){var f=t().length,m=a<r,v=m?a:r,p=m?r:a;i=(p-v)/Math.max(1,f-c+u*2),l&&(i=Math.floor(i)),v+=(p-v-i*(f-c))*d,o=i*(1-c),l&&(v=Math.round(v),o=Math.round(o));var g=Mpe(f).map(function(x){return v+i*x});return n(m?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),h()):t()},e.range=function(f){return arguments.length?([r,a]=f,r=+r,a=+a,h()):[r,a]},e.rangeRound=function(f){return[r,a]=f,r=+r,a=+a,l=!0,h()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(l=!!f,h()):l},e.padding=function(f){return arguments.length?(c=Math.min(1,u=+f),h()):c},e.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),h()):c},e.paddingOuter=function(f){return arguments.length?(u=+f,h()):u},e.align=function(f){return arguments.length?(d=Math.max(0,Math.min(1,f)),h()):d},e.copy=function(){return _f(t(),[r,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},Ss.apply(h(),arguments)}function bF(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return bF(t())},e}function Ih(){return bF(_f.apply(null,arguments).paddingInner(1))}function j_(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function jF(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Cm(){}var Cf=.7,tv=1/Cf,tu="\\s*([+-]?\\d+)\\s*",Pf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ca="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ipe=/^#([0-9a-f]{3,8})$/,$pe=new RegExp(`^rgb\\(${tu},${tu},${tu}\\)$`),Rpe=new RegExp(`^rgb\\(${Ca},${Ca},${Ca}\\)$`),Lpe=new RegExp(`^rgba\\(${tu},${tu},${tu},${Pf}\\)$`),Fpe=new RegExp(`^rgba\\(${Ca},${Ca},${Ca},${Pf}\\)$`),Bpe=new RegExp(`^hsl\\(${Pf},${Ca},${Ca}\\)$`),zpe=new RegExp(`^hsla\\(${Pf},${Ca},${Ca},${Pf}\\)$`),Sk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};j_(Cm,Af,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:_k,formatHex:_k,formatHex8:Vpe,formatHsl:qpe,formatRgb:Ck,toString:Ck});function _k(){return this.rgb().formatHex()}function Vpe(){return this.rgb().formatHex8()}function qpe(){return wF(this).formatHsl()}function Ck(){return this.rgb().formatRgb()}function Af(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Ipe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Pk(t):n===3?new Ir(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?_p(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?_p(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=$pe.exec(e))?new Ir(t[1],t[2],t[3],1):(t=Rpe.exec(e))?new Ir(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Lpe.exec(e))?_p(t[1],t[2],t[3],t[4]):(t=Fpe.exec(e))?_p(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Bpe.exec(e))?Ek(t[1],t[2]/100,t[3]/100,1):(t=zpe.exec(e))?Ek(t[1],t[2]/100,t[3]/100,t[4]):Sk.hasOwnProperty(e)?Pk(Sk[e]):e==="transparent"?new Ir(NaN,NaN,NaN,0):null}function Pk(e){return new Ir(e>>16&255,e>>8&255,e&255,1)}function _p(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ir(e,t,n,r)}function Upe(e){return e instanceof Cm||(e=Af(e)),e?(e=e.rgb(),new Ir(e.r,e.g,e.b,e.opacity)):new Ir}function Yw(e,t,n,r){return arguments.length===1?Upe(e):new Ir(e,t,n,r??1)}function Ir(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}j_(Ir,Yw,jF(Cm,{brighter(e){return e=e==null?tv:Math.pow(tv,e),new Ir(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Cf:Math.pow(Cf,e),new Ir(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ir(Nl(this.r),Nl(this.g),Nl(this.b),nv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ak,formatHex:Ak,formatHex8:Wpe,formatRgb:kk,toString:kk}));function Ak(){return`#${ll(this.r)}${ll(this.g)}${ll(this.b)}`}function Wpe(){return`#${ll(this.r)}${ll(this.g)}${ll(this.b)}${ll((isNaN(this.opacity)?1:this.opacity)*255)}`}function kk(){const e=nv(this.opacity);return`${e===1?"rgb(":"rgba("}${Nl(this.r)}, ${Nl(this.g)}, ${Nl(this.b)}${e===1?")":`, ${e})`}`}function nv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Nl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ll(e){return e=Nl(e),(e<16?"0":"")+e.toString(16)}function Ek(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new zs(e,t,n,r)}function wF(e){if(e instanceof zs)return new zs(e.h,e.s,e.l,e.opacity);if(e instanceof Cm||(e=Af(e)),!e)return new zs;if(e instanceof zs)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,l=i-a,c=(i+a)/2;return l?(t===i?o=(n-r)/l+(n<r)*6:n===i?o=(r-t)/l+2:o=(t-n)/l+4,l/=c<.5?i+a:2-i-a,o*=60):l=c>0&&c<1?0:o,new zs(o,l,c,e.opacity)}function Hpe(e,t,n,r){return arguments.length===1?wF(e):new zs(e,t,n,r??1)}function zs(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}j_(zs,Hpe,jF(Cm,{brighter(e){return e=e==null?tv:Math.pow(tv,e),new zs(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Cf:Math.pow(Cf,e),new zs(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new Ir(sb(e>=240?e-240:e+120,a,r),sb(e,a,r),sb(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new zs(Tk(this.h),Cp(this.s),Cp(this.l),nv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=nv(this.opacity);return`${e===1?"hsl(":"hsla("}${Tk(this.h)}, ${Cp(this.s)*100}%, ${Cp(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Tk(e){return e=(e||0)%360,e<0?e+360:e}function Cp(e){return Math.max(0,Math.min(1,e||0))}function sb(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const w_=e=>()=>e;function Kpe(e,t){return function(n){return e+n*t}}function Gpe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Ype(e){return(e=+e)==1?NF:function(t,n){return n-t?Gpe(t,n,e):w_(isNaN(t)?n:t)}}function NF(e,t){var n=t-e;return n?Kpe(e,n):w_(isNaN(e)?t:e)}const Ok=function e(t){var n=Ype(t);function r(a,i){var o=n((a=Yw(a)).r,(i=Yw(i)).r),l=n(a.g,i.g),c=n(a.b,i.b),u=NF(a.opacity,i.opacity);return function(d){return a.r=o(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return r.gamma=e,r}(1);function Qpe(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),a;return function(i){for(a=0;a<n;++a)r[a]=e[a]*(1-i)+t[a]*i;return r}}function Xpe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Jpe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,a=new Array(r),i=new Array(n),o;for(o=0;o<r;++o)a[o]=Dd(e[o],t[o]);for(;o<n;++o)i[o]=t[o];return function(l){for(o=0;o<r;++o)i[o]=a[o](l);return i}}function Zpe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function rv(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function ege(e,t){var n={},r={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=Dd(e[a],t[a]):r[a]=t[a];return function(i){for(a in n)r[a]=n[a](i);return r}}var Qw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ab=new RegExp(Qw.source,"g");function tge(e){return function(){return e}}function nge(e){return function(t){return e(t)+""}}function rge(e,t){var n=Qw.lastIndex=ab.lastIndex=0,r,a,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(r=Qw.exec(e))&&(a=ab.exec(t));)(i=a.index)>n&&(i=t.slice(n,i),l[o]?l[o]+=i:l[++o]=i),(r=r[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:rv(r,a)})),n=ab.lastIndex;return n<t.length&&(i=t.slice(n),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?nge(c[0].x):tge(t):(t=c.length,function(u){for(var d=0,h;d<t;++d)l[(h=c[d]).i]=h.x(u);return l.join("")})}function Dd(e,t){var n=typeof t,r;return t==null||n==="boolean"?w_(t):(n==="number"?rv:n==="string"?(r=Af(t))?(t=r,Ok):rge:t instanceof Af?Ok:t instanceof Date?Zpe:Xpe(t)?Qpe:Array.isArray(t)?Jpe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?ege:rv)(e,t)}function N_(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function sge(e,t){t===void 0&&(t=e,e=Dd);for(var n=0,r=t.length-1,a=t[0],i=new Array(r<0?0:r);n<r;)i[n]=e(a,a=t[++n]);return function(o){var l=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return i[l](o-l)}}function age(e){return function(){return e}}function sv(e){return+e}var Dk=[0,1];function yr(e){return e}function Xw(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:age(isNaN(t)?NaN:.5)}function ige(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function oge(e,t,n){var r=e[0],a=e[1],i=t[0],o=t[1];return a<r?(r=Xw(a,r),i=n(o,i)):(r=Xw(r,a),i=n(i,o)),function(l){return i(r(l))}}function lge(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),i=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)a[o]=Xw(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(l){var c=_m(e,l,1,r)-1;return i[c](a[c](l))}}function Pm(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function ly(){var e=Dk,t=Dk,n=Dd,r,a,i,o=yr,l,c,u;function d(){var f=Math.min(e.length,t.length);return o!==yr&&(o=ige(e[0],e[f-1])),l=f>2?lge:oge,c=u=null,h}function h(f){return f==null||isNaN(f=+f)?i:(c||(c=l(e.map(r),t,n)))(r(o(f)))}return h.invert=function(f){return o(a((u||(u=l(t,e.map(r),rv)))(f)))},h.domain=function(f){return arguments.length?(e=Array.from(f,sv),d()):e.slice()},h.range=function(f){return arguments.length?(t=Array.from(f),d()):t.slice()},h.rangeRound=function(f){return t=Array.from(f),n=N_,d()},h.clamp=function(f){return arguments.length?(o=f?!0:yr,d()):o!==yr},h.interpolate=function(f){return arguments.length?(n=f,d()):n},h.unknown=function(f){return arguments.length?(i=f,h):i},function(f,m){return r=f,a=m,d()}}function S_(){return ly()(yr,yr)}function cge(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function av(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Lu(e){return e=av(Math.abs(e)),e?e[1]:NaN}function uge(e,t){return function(n,r){for(var a=n.length,i=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),i.push(n.substring(a-=l,a+l)),!((c+=l+1)>r));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function dge(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var hge=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function kf(e){if(!(t=hge.exec(e)))throw new Error("invalid format: "+e);var t;return new __({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}kf.prototype=__.prototype;function __(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}__.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function fge(e){e:for(var t=e.length,n=1,r=-1,a;n<t;++n)switch(e[n]){case".":r=a=n;break;case"0":r===0&&(r=n),a=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(a+1):e}var SF;function mge(e,t){var n=av(e,t);if(!n)return e+"";var r=n[0],a=n[1],i=a-(SF=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+av(e,Math.max(0,t+i-1))[0]}function Mk(e,t){var n=av(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const Ik={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:cge,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Mk(e*100,t),r:Mk,s:mge,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function $k(e){return e}var Rk=Array.prototype.map,Lk=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function pge(e){var t=e.grouping===void 0||e.thousands===void 0?$k:uge(Rk.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?$k:dge(Rk.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(h){h=kf(h);var f=h.fill,m=h.align,v=h.sign,p=h.symbol,g=h.zero,x=h.width,y=h.comma,b=h.precision,N=h.trim,w=h.type;w==="n"?(y=!0,w="g"):Ik[w]||(b===void 0&&(b=12),N=!0,w="g"),(g||f==="0"&&m==="=")&&(g=!0,f="0",m="=");var S=p==="$"?n:p==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",_=p==="$"?r:/[%p]/.test(w)?o:"",C=Ik[w],P=/[defgprs%]/.test(w);b=b===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function A(O){var E=S,z=_,I,W,V;if(w==="c")z=C(O)+z,O="";else{O=+O;var H=O<0||1/O<0;if(O=isNaN(O)?c:C(Math.abs(O),b),N&&(O=fge(O)),H&&+O==0&&v!=="+"&&(H=!1),E=(H?v==="("?v:l:v==="-"||v==="("?"":v)+E,z=(w==="s"?Lk[8+SF/3]:"")+z+(H&&v==="("?")":""),P){for(I=-1,W=O.length;++I<W;)if(V=O.charCodeAt(I),48>V||V>57){z=(V===46?a+O.slice(I+1):O.slice(I))+z,O=O.slice(0,I);break}}}y&&!g&&(O=t(O,1/0));var k=E.length+O.length+z.length,D=k<x?new Array(x-k+1).join(f):"";switch(y&&g&&(O=t(D+O,D.length?x-z.length:1/0),D=""),m){case"<":O=E+O+z+D;break;case"=":O=E+D+O+z;break;case"^":O=D.slice(0,k=D.length>>1)+E+O+z+D.slice(k);break;default:O=D+E+O+z;break}return i(O)}return A.toString=function(){return h+""},A}function d(h,f){var m=u((h=kf(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(Lu(f)/3)))*3,p=Math.pow(10,-v),g=Lk[8+v/3];return function(x){return m(p*x)+g}}return{format:u,formatPrefix:d}}var Pp,C_,_F;gge({thousands:",",grouping:[3],currency:["$",""]});function gge(e){return Pp=pge(e),C_=Pp.format,_F=Pp.formatPrefix,Pp}function vge(e){return Math.max(0,-Lu(Math.abs(e)))}function xge(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Lu(t)/3)))*3-Lu(Math.abs(e)))}function yge(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Lu(t)-Lu(e))+1}function CF(e,t,n,r){var a=Kw(e,t,n),i;switch(r=kf(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(i=xge(a,o))&&(r.precision=i),_F(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=yge(a,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=vge(a))&&(r.precision=i-(r.type==="%")*2);break}}return C_(r)}function Ro(e){var t=e.domain;return e.ticks=function(n){var r=t();return Ww(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var a=t();return CF(a[0],a[a.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),a=0,i=r.length-1,o=r[a],l=r[i],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=a,a=i,i=u);d-- >0;){if(u=Hw(o,l,n),u===c)return r[a]=o,r[i]=l,t(r);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function iv(){var e=S_();return e.copy=function(){return Pm(e,iv())},Ss.apply(e,arguments),Ro(e)}function PF(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,sv),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return PF(e).unknown(t)},e=arguments.length?Array.from(e,sv):[0,1],Ro(n)}function AF(e,t){e=e.slice();var n=0,r=e.length-1,a=e[n],i=e[r],o;return i<a&&(o=n,n=r,r=o,o=a,a=i,i=o),e[n]=t.floor(a),e[r]=t.ceil(i),e}function Fk(e){return Math.log(e)}function Bk(e){return Math.exp(e)}function bge(e){return-Math.log(-e)}function jge(e){return-Math.exp(-e)}function wge(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Nge(e){return e===10?wge:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Sge(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function zk(e){return(t,n)=>-e(-t,n)}function P_(e){const t=e(Fk,Bk),n=t.domain;let r=10,a,i;function o(){return a=Sge(r),i=Nge(r),n()[0]<0?(a=zk(a),i=zk(i),e(bge,jge)):e(Fk,Bk),t}return t.base=function(l){return arguments.length?(r=+l,o()):r},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const c=n();let u=c[0],d=c[c.length-1];const h=d<u;h&&([u,d]=[d,u]);let f=a(u),m=a(d),v,p;const g=l==null?10:+l;let x=[];if(!(r%1)&&m-f<g){if(f=Math.floor(f),m=Math.ceil(m),u>0){for(;f<=m;++f)for(v=1;v<r;++v)if(p=f<0?v/i(-f):v*i(f),!(p<u)){if(p>d)break;x.push(p)}}else for(;f<=m;++f)for(v=r-1;v>=1;--v)if(p=f>0?v/i(-f):v*i(f),!(p<u)){if(p>d)break;x.push(p)}x.length*2<g&&(x=Ww(u,d,g))}else x=Ww(f,m,Math.min(m-f,g)).map(i);return h?x.reverse():x},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=kf(c)).precision==null&&(c.trim=!0),c=C_(c)),l===1/0)return c;const u=Math.max(1,r*l/t.ticks().length);return d=>{let h=d/i(Math.round(a(d)));return h*r<r-.5&&(h*=r),h<=u?c(d):""}},t.nice=()=>n(AF(n(),{floor:l=>i(Math.floor(a(l))),ceil:l=>i(Math.ceil(a(l)))})),t}function kF(){const e=P_(ly()).domain([1,10]);return e.copy=()=>Pm(e,kF()).base(e.base()),Ss.apply(e,arguments),e}function Vk(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function qk(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function A_(e){var t=1,n=e(Vk(t),qk(t));return n.constant=function(r){return arguments.length?e(Vk(t=+r),qk(t)):t},Ro(n)}function EF(){var e=A_(ly());return e.copy=function(){return Pm(e,EF()).constant(e.constant())},Ss.apply(e,arguments)}function Uk(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function _ge(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Cge(e){return e<0?-e*e:e*e}function k_(e){var t=e(yr,yr),n=1;function r(){return n===1?e(yr,yr):n===.5?e(_ge,Cge):e(Uk(n),Uk(1/n))}return t.exponent=function(a){return arguments.length?(n=+a,r()):n},Ro(t)}function E_(){var e=k_(ly());return e.copy=function(){return Pm(e,E_()).exponent(e.exponent())},Ss.apply(e,arguments),e}function Pge(){return E_.apply(null,arguments).exponent(.5)}function Wk(e){return Math.sign(e)*e*e}function Age(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function TF(){var e=S_(),t=[0,1],n=!1,r;function a(i){var o=Age(e(i));return isNaN(o)?r:n?Math.round(o):o}return a.invert=function(i){return e.invert(Wk(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,sv)).map(Wk)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(n=!!i,a):n},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return TF(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Ss.apply(a,arguments),Ro(a)}function OF(){var e=[],t=[],n=[],r;function a(){var o=0,l=Math.max(1,t.length);for(n=new Array(l-1);++o<l;)n[o-1]=Dpe(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?r:t[_m(n,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(po),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.quantiles=function(){return n.slice()},i.copy=function(){return OF().domain(e).range(t).unknown(r)},Ss.apply(i,arguments)}function DF(){var e=0,t=1,n=1,r=[.5],a=[0,1],i;function o(c){return c!=null&&c<=c?a[_m(r,c,0,n)]:i}function l(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*t-(c-n)*e)/(n+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(n=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return r.slice()},o.copy=function(){return DF().domain([e,t]).range(a).unknown(i)},Ss.apply(Ro(o),arguments)}function MF(){var e=[.5],t=[0,1],n,r=1;function a(i){return i!=null&&i<=i?t[_m(e,i,0,r)]:n}return a.domain=function(i){return arguments.length?(e=Array.from(i),r=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),r=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return MF().domain(e).range(t).unknown(n)},Ss.apply(a,arguments)}const ib=new Date,ob=new Date;function In(e,t,n,r){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),l=a.ceil(i);return i-o<l-i?o:l},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,l)=>{const c=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return c},a.filter=i=>In(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),n&&(a.count=(i,o)=>(ib.setTime(+i),ob.setTime(+o),e(ib),e(ob),Math.floor(n(ib,ob))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(r?o=>r(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const ov=In(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);ov.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?In(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):ov);ov.range;const Ja=1e3,fs=Ja*60,Za=fs*60,mi=Za*24,T_=mi*7,Hk=mi*30,lb=mi*365,cl=In(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ja)},(e,t)=>(t-e)/Ja,e=>e.getUTCSeconds());cl.range;const O_=In(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ja)},(e,t)=>{e.setTime(+e+t*fs)},(e,t)=>(t-e)/fs,e=>e.getMinutes());O_.range;const D_=In(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*fs)},(e,t)=>(t-e)/fs,e=>e.getUTCMinutes());D_.range;const M_=In(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ja-e.getMinutes()*fs)},(e,t)=>{e.setTime(+e+t*Za)},(e,t)=>(t-e)/Za,e=>e.getHours());M_.range;const I_=In(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Za)},(e,t)=>(t-e)/Za,e=>e.getUTCHours());I_.range;const Am=In(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*fs)/mi,e=>e.getDate()-1);Am.range;const cy=In(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/mi,e=>e.getUTCDate()-1);cy.range;const IF=In(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/mi,e=>Math.floor(e/mi));IF.range;function tc(e){return In(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*fs)/T_)}const uy=tc(0),lv=tc(1),kge=tc(2),Ege=tc(3),Fu=tc(4),Tge=tc(5),Oge=tc(6);uy.range;lv.range;kge.range;Ege.range;Fu.range;Tge.range;Oge.range;function nc(e){return In(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/T_)}const dy=nc(0),cv=nc(1),Dge=nc(2),Mge=nc(3),Bu=nc(4),Ige=nc(5),$ge=nc(6);dy.range;cv.range;Dge.range;Mge.range;Bu.range;Ige.range;$ge.range;const $_=In(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());$_.range;const R_=In(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());R_.range;const pi=In(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());pi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:In(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});pi.range;const gi=In(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());gi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:In(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});gi.range;function $F(e,t,n,r,a,i){const o=[[cl,1,Ja],[cl,5,5*Ja],[cl,15,15*Ja],[cl,30,30*Ja],[i,1,fs],[i,5,5*fs],[i,15,15*fs],[i,30,30*fs],[a,1,Za],[a,3,3*Za],[a,6,6*Za],[a,12,12*Za],[r,1,mi],[r,2,2*mi],[n,1,T_],[t,1,Hk],[t,3,3*Hk],[e,1,lb]];function l(u,d,h){const f=d<u;f&&([u,d]=[d,u]);const m=h&&typeof h.range=="function"?h:c(u,d,h),v=m?m.range(u,+d+1):[];return f?v.reverse():v}function c(u,d,h){const f=Math.abs(d-u)/h,m=y_(([,,g])=>g).right(o,f);if(m===o.length)return e.every(Kw(u/lb,d/lb,h));if(m===0)return ov.every(Math.max(Kw(u,d,h),1));const[v,p]=o[f/o[m-1][2]<o[m][2]/f?m-1:m];return v.every(p)}return[l,c]}const[Rge,Lge]=$F(gi,R_,dy,IF,I_,D_),[Fge,Bge]=$F(pi,$_,uy,Am,M_,O_);function cb(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function ub(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function sh(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function zge(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=ah(a),d=ih(a),h=ah(i),f=ih(i),m=ah(o),v=ih(o),p=ah(l),g=ih(l),x=ah(c),y=ih(c),b={a:H,A:k,b:D,B:X,c:null,d:Jk,e:Jk,f:uve,g:bve,G:wve,H:ove,I:lve,j:cve,L:RF,m:dve,M:hve,p:Q,q:te,Q:tE,s:nE,S:fve,u:mve,U:pve,V:gve,w:vve,W:xve,x:null,X:null,y:yve,Y:jve,Z:Nve,"%":eE},N={a:ne,A:T,b:ce,B:me,c:null,d:Zk,e:Zk,f:Pve,g:Rve,G:Fve,H:Sve,I:_ve,j:Cve,L:FF,m:Ave,M:kve,p:le,q:Z,Q:tE,s:nE,S:Eve,u:Tve,U:Ove,V:Dve,w:Mve,W:Ive,x:null,X:null,y:$ve,Y:Lve,Z:Bve,"%":eE},w={a:A,A:O,b:E,B:z,c:I,d:Qk,e:Qk,f:rve,g:Yk,G:Gk,H:Xk,I:Xk,j:Zge,L:nve,m:Jge,M:eve,p:P,q:Xge,Q:ave,s:ive,S:tve,u:Hge,U:Kge,V:Gge,w:Wge,W:Yge,x:W,X:V,y:Yk,Y:Gk,Z:Qge,"%":sve};b.x=S(n,b),b.X=S(r,b),b.c=S(t,b),N.x=S(n,N),N.X=S(r,N),N.c=S(t,N);function S(B,oe){return function(U){var K=[],fe=-1,Se=0,$e=B.length,Ue,ft,Tt;for(U instanceof Date||(U=new Date(+U));++fe<$e;)B.charCodeAt(fe)===37&&(K.push(B.slice(Se,fe)),(ft=Kk[Ue=B.charAt(++fe)])!=null?Ue=B.charAt(++fe):ft=Ue==="e"?" ":"0",(Tt=oe[Ue])&&(Ue=Tt(U,ft)),K.push(Ue),Se=fe+1);return K.push(B.slice(Se,fe)),K.join("")}}function _(B,oe){return function(U){var K=sh(1900,void 0,1),fe=C(K,B,U+="",0),Se,$e;if(fe!=U.length)return null;if("Q"in K)return new Date(K.Q);if("s"in K)return new Date(K.s*1e3+("L"in K?K.L:0));if(oe&&!("Z"in K)&&(K.Z=0),"p"in K&&(K.H=K.H%12+K.p*12),K.m===void 0&&(K.m="q"in K?K.q:0),"V"in K){if(K.V<1||K.V>53)return null;"w"in K||(K.w=1),"Z"in K?(Se=ub(sh(K.y,0,1)),$e=Se.getUTCDay(),Se=$e>4||$e===0?cv.ceil(Se):cv(Se),Se=cy.offset(Se,(K.V-1)*7),K.y=Se.getUTCFullYear(),K.m=Se.getUTCMonth(),K.d=Se.getUTCDate()+(K.w+6)%7):(Se=cb(sh(K.y,0,1)),$e=Se.getDay(),Se=$e>4||$e===0?lv.ceil(Se):lv(Se),Se=Am.offset(Se,(K.V-1)*7),K.y=Se.getFullYear(),K.m=Se.getMonth(),K.d=Se.getDate()+(K.w+6)%7)}else("W"in K||"U"in K)&&("w"in K||(K.w="u"in K?K.u%7:"W"in K?1:0),$e="Z"in K?ub(sh(K.y,0,1)).getUTCDay():cb(sh(K.y,0,1)).getDay(),K.m=0,K.d="W"in K?(K.w+6)%7+K.W*7-($e+5)%7:K.w+K.U*7-($e+6)%7);return"Z"in K?(K.H+=K.Z/100|0,K.M+=K.Z%100,ub(K)):cb(K)}}function C(B,oe,U,K){for(var fe=0,Se=oe.length,$e=U.length,Ue,ft;fe<Se;){if(K>=$e)return-1;if(Ue=oe.charCodeAt(fe++),Ue===37){if(Ue=oe.charAt(fe++),ft=w[Ue in Kk?oe.charAt(fe++):Ue],!ft||(K=ft(B,U,K))<0)return-1}else if(Ue!=U.charCodeAt(K++))return-1}return K}function P(B,oe,U){var K=u.exec(oe.slice(U));return K?(B.p=d.get(K[0].toLowerCase()),U+K[0].length):-1}function A(B,oe,U){var K=m.exec(oe.slice(U));return K?(B.w=v.get(K[0].toLowerCase()),U+K[0].length):-1}function O(B,oe,U){var K=h.exec(oe.slice(U));return K?(B.w=f.get(K[0].toLowerCase()),U+K[0].length):-1}function E(B,oe,U){var K=x.exec(oe.slice(U));return K?(B.m=y.get(K[0].toLowerCase()),U+K[0].length):-1}function z(B,oe,U){var K=p.exec(oe.slice(U));return K?(B.m=g.get(K[0].toLowerCase()),U+K[0].length):-1}function I(B,oe,U){return C(B,t,oe,U)}function W(B,oe,U){return C(B,n,oe,U)}function V(B,oe,U){return C(B,r,oe,U)}function H(B){return o[B.getDay()]}function k(B){return i[B.getDay()]}function D(B){return c[B.getMonth()]}function X(B){return l[B.getMonth()]}function Q(B){return a[+(B.getHours()>=12)]}function te(B){return 1+~~(B.getMonth()/3)}function ne(B){return o[B.getUTCDay()]}function T(B){return i[B.getUTCDay()]}function ce(B){return c[B.getUTCMonth()]}function me(B){return l[B.getUTCMonth()]}function le(B){return a[+(B.getUTCHours()>=12)]}function Z(B){return 1+~~(B.getUTCMonth()/3)}return{format:function(B){var oe=S(B+="",b);return oe.toString=function(){return B},oe},parse:function(B){var oe=_(B+="",!1);return oe.toString=function(){return B},oe},utcFormat:function(B){var oe=S(B+="",N);return oe.toString=function(){return B},oe},utcParse:function(B){var oe=_(B+="",!0);return oe.toString=function(){return B},oe}}}var Kk={"-":"",_:" ",0:"0"},qn=/^\s*\d+/,Vge=/^%/,qge=/[\\^$*+?|[\]().{}]/g;function xt(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",i=a.length;return r+(i<n?new Array(n-i+1).join(t)+a:a)}function Uge(e){return e.replace(qge,"\\$&")}function ah(e){return new RegExp("^(?:"+e.map(Uge).join("|")+")","i")}function ih(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Wge(e,t,n){var r=qn.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Hge(e,t,n){var r=qn.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Kge(e,t,n){var r=qn.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Gge(e,t,n){var r=qn.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Yge(e,t,n){var r=qn.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Gk(e,t,n){var r=qn.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Yk(e,t,n){var r=qn.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Qge(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Xge(e,t,n){var r=qn.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Jge(e,t,n){var r=qn.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Qk(e,t,n){var r=qn.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Zge(e,t,n){var r=qn.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Xk(e,t,n){var r=qn.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function eve(e,t,n){var r=qn.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function tve(e,t,n){var r=qn.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function nve(e,t,n){var r=qn.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function rve(e,t,n){var r=qn.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function sve(e,t,n){var r=Vge.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function ave(e,t,n){var r=qn.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function ive(e,t,n){var r=qn.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Jk(e,t){return xt(e.getDate(),t,2)}function ove(e,t){return xt(e.getHours(),t,2)}function lve(e,t){return xt(e.getHours()%12||12,t,2)}function cve(e,t){return xt(1+Am.count(pi(e),e),t,3)}function RF(e,t){return xt(e.getMilliseconds(),t,3)}function uve(e,t){return RF(e,t)+"000"}function dve(e,t){return xt(e.getMonth()+1,t,2)}function hve(e,t){return xt(e.getMinutes(),t,2)}function fve(e,t){return xt(e.getSeconds(),t,2)}function mve(e){var t=e.getDay();return t===0?7:t}function pve(e,t){return xt(uy.count(pi(e)-1,e),t,2)}function LF(e){var t=e.getDay();return t>=4||t===0?Fu(e):Fu.ceil(e)}function gve(e,t){return e=LF(e),xt(Fu.count(pi(e),e)+(pi(e).getDay()===4),t,2)}function vve(e){return e.getDay()}function xve(e,t){return xt(lv.count(pi(e)-1,e),t,2)}function yve(e,t){return xt(e.getFullYear()%100,t,2)}function bve(e,t){return e=LF(e),xt(e.getFullYear()%100,t,2)}function jve(e,t){return xt(e.getFullYear()%1e4,t,4)}function wve(e,t){var n=e.getDay();return e=n>=4||n===0?Fu(e):Fu.ceil(e),xt(e.getFullYear()%1e4,t,4)}function Nve(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+xt(t/60|0,"0",2)+xt(t%60,"0",2)}function Zk(e,t){return xt(e.getUTCDate(),t,2)}function Sve(e,t){return xt(e.getUTCHours(),t,2)}function _ve(e,t){return xt(e.getUTCHours()%12||12,t,2)}function Cve(e,t){return xt(1+cy.count(gi(e),e),t,3)}function FF(e,t){return xt(e.getUTCMilliseconds(),t,3)}function Pve(e,t){return FF(e,t)+"000"}function Ave(e,t){return xt(e.getUTCMonth()+1,t,2)}function kve(e,t){return xt(e.getUTCMinutes(),t,2)}function Eve(e,t){return xt(e.getUTCSeconds(),t,2)}function Tve(e){var t=e.getUTCDay();return t===0?7:t}function Ove(e,t){return xt(dy.count(gi(e)-1,e),t,2)}function BF(e){var t=e.getUTCDay();return t>=4||t===0?Bu(e):Bu.ceil(e)}function Dve(e,t){return e=BF(e),xt(Bu.count(gi(e),e)+(gi(e).getUTCDay()===4),t,2)}function Mve(e){return e.getUTCDay()}function Ive(e,t){return xt(cv.count(gi(e)-1,e),t,2)}function $ve(e,t){return xt(e.getUTCFullYear()%100,t,2)}function Rve(e,t){return e=BF(e),xt(e.getUTCFullYear()%100,t,2)}function Lve(e,t){return xt(e.getUTCFullYear()%1e4,t,4)}function Fve(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Bu(e):Bu.ceil(e),xt(e.getUTCFullYear()%1e4,t,4)}function Bve(){return"+0000"}function eE(){return"%"}function tE(e){return+e}function nE(e){return Math.floor(+e/1e3)}var yc,zF,VF;zve({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function zve(e){return yc=zge(e),zF=yc.format,yc.parse,VF=yc.utcFormat,yc.utcParse,yc}function Vve(e){return new Date(e)}function qve(e){return e instanceof Date?+e:+new Date(+e)}function L_(e,t,n,r,a,i,o,l,c,u){var d=S_(),h=d.invert,f=d.domain,m=u(".%L"),v=u(":%S"),p=u("%I:%M"),g=u("%I %p"),x=u("%a %d"),y=u("%b %d"),b=u("%B"),N=u("%Y");function w(S){return(c(S)<S?m:l(S)<S?v:o(S)<S?p:i(S)<S?g:r(S)<S?a(S)<S?x:y:n(S)<S?b:N)(S)}return d.invert=function(S){return new Date(h(S))},d.domain=function(S){return arguments.length?f(Array.from(S,qve)):f().map(Vve)},d.ticks=function(S){var _=f();return e(_[0],_[_.length-1],S??10)},d.tickFormat=function(S,_){return _==null?w:u(_)},d.nice=function(S){var _=f();return(!S||typeof S.range!="function")&&(S=t(_[0],_[_.length-1],S??10)),S?f(AF(_,S)):d},d.copy=function(){return Pm(d,L_(e,t,n,r,a,i,o,l,c,u))},d}function Uve(){return Ss.apply(L_(Fge,Bge,pi,$_,uy,Am,M_,O_,cl,zF).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Wve(){return Ss.apply(L_(Rge,Lge,gi,R_,dy,cy,I_,D_,cl,VF).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function hy(){var e=0,t=1,n,r,a,i,o=yr,l=!1,c;function u(h){return h==null||isNaN(h=+h)?c:o(a===0?.5:(h=(i(h)-n)*a,l?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([e,t]=h,n=i(e=+e),r=i(t=+t),a=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(h){return arguments.length?(l=!!h,u):l},u.interpolator=function(h){return arguments.length?(o=h,u):o};function d(h){return function(f){var m,v;return arguments.length?([m,v]=f,o=h(m,v),u):[o(0),o(1)]}}return u.range=d(Dd),u.rangeRound=d(N_),u.unknown=function(h){return arguments.length?(c=h,u):c},function(h){return i=h,n=h(e),r=h(t),a=n===r?0:1/(r-n),u}}function Lo(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function qF(){var e=Ro(hy()(yr));return e.copy=function(){return Lo(e,qF())},bi.apply(e,arguments)}function UF(){var e=P_(hy()).domain([1,10]);return e.copy=function(){return Lo(e,UF()).base(e.base())},bi.apply(e,arguments)}function WF(){var e=A_(hy());return e.copy=function(){return Lo(e,WF()).constant(e.constant())},bi.apply(e,arguments)}function F_(){var e=k_(hy());return e.copy=function(){return Lo(e,F_()).exponent(e.exponent())},bi.apply(e,arguments)}function Hve(){return F_.apply(null,arguments).exponent(.5)}function HF(){var e=[],t=yr;function n(r){if(r!=null&&!isNaN(r=+r))return t((_m(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let a of r)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(po),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,a)=>t(a/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(a,i)=>Ope(e,i/r))},n.copy=function(){return HF(t).domain(e)},bi.apply(n,arguments)}function fy(){var e=0,t=.5,n=1,r=1,a,i,o,l,c,u=yr,d,h=!1,f;function m(p){return isNaN(p=+p)?f:(p=.5+((p=+d(p))-i)*(r*p<r*i?l:c),u(h?Math.max(0,Math.min(1,p)):p))}m.domain=function(p){return arguments.length?([e,t,n]=p,a=d(e=+e),i=d(t=+t),o=d(n=+n),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),r=i<a?-1:1,m):[e,t,n]},m.clamp=function(p){return arguments.length?(h=!!p,m):h},m.interpolator=function(p){return arguments.length?(u=p,m):u};function v(p){return function(g){var x,y,b;return arguments.length?([x,y,b]=g,u=sge(p,[x,y,b]),m):[u(0),u(.5),u(1)]}}return m.range=v(Dd),m.rangeRound=v(N_),m.unknown=function(p){return arguments.length?(f=p,m):f},function(p){return d=p,a=p(e),i=p(t),o=p(n),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),r=i<a?-1:1,m}}function KF(){var e=Ro(fy()(yr));return e.copy=function(){return Lo(e,KF())},bi.apply(e,arguments)}function GF(){var e=P_(fy()).domain([.1,1,10]);return e.copy=function(){return Lo(e,GF()).base(e.base())},bi.apply(e,arguments)}function YF(){var e=A_(fy());return e.copy=function(){return Lo(e,YF()).constant(e.constant())},bi.apply(e,arguments)}function B_(){var e=k_(fy());return e.copy=function(){return Lo(e,B_()).exponent(e.exponent())},bi.apply(e,arguments)}function Kve(){return B_.apply(null,arguments).exponent(.5)}const rE=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:_f,scaleDiverging:KF,scaleDivergingLog:GF,scaleDivergingPow:B_,scaleDivergingSqrt:Kve,scaleDivergingSymlog:YF,scaleIdentity:PF,scaleImplicit:Gw,scaleLinear:iv,scaleLog:kF,scaleOrdinal:b_,scalePoint:Ih,scalePow:E_,scaleQuantile:OF,scaleQuantize:DF,scaleRadial:TF,scaleSequential:qF,scaleSequentialLog:UF,scaleSequentialPow:F_,scaleSequentialQuantile:HF,scaleSequentialSqrt:Hve,scaleSequentialSymlog:WF,scaleSqrt:Pge,scaleSymlog:EF,scaleThreshold:MF,scaleTime:Uve,scaleUtc:Wve,tickFormat:CF},Symbol.toStringTag,{value:"Module"}));var Gve=wd;function Yve(e,t,n){for(var r=-1,a=e.length;++r<a;){var i=e[r],o=t(i);if(o!=null&&(l===void 0?o===o&&!Gve(o):n(o,l)))var l=o,c=i}return c}var my=Yve;function Qve(e,t){return e>t}var QF=Qve,Xve=my,Jve=QF,Zve=Td;function exe(e){return e&&e.length?Xve(e,Zve,Jve):void 0}var txe=exe;const eo=Ct(txe);function nxe(e,t){return e<t}var XF=nxe,rxe=my,sxe=XF,axe=Td;function ixe(e){return e&&e.length?rxe(e,axe,sxe):void 0}var oxe=ixe;const py=Ct(oxe);var lxe=e_,cxe=$a,uxe=aF,dxe=Br;function hxe(e,t){var n=dxe(e)?lxe:uxe;return n(e,cxe(t))}var fxe=hxe,mxe=rF,pxe=fxe;function gxe(e,t){return mxe(pxe(e,t),1)}var vxe=gxe;const xxe=Ct(vxe);var yxe=p_;function bxe(e,t){return yxe(e,t)}var jxe=bxe;const zu=Ct(jxe);var Md=1e9,wxe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},V_,en=!0,ys="[DecimalError] ",Sl=ys+"Invalid argument: ",z_=ys+"Exponent out of range: ",Id=Math.floor,Zo=Math.pow,Nxe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Yr,Rn=1e7,Gt=7,JF=9007199254740991,uv=Id(JF/Gt),De={};De.absoluteValue=De.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};De.comparedTo=De.cmp=function(e){var t,n,r,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(r=i.d.length,a=e.d.length,t=0,n=r<a?r:a;t<n;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return r===a?0:r>a^i.s<0?1:-1};De.decimalPlaces=De.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Gt;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};De.dividedBy=De.div=function(e){return ri(this,new this.constructor(e))};De.dividedToIntegerBy=De.idiv=function(e){var t=this,n=t.constructor;return $t(ri(t,new n(e),0,1),n.precision)};De.equals=De.eq=function(e){return!this.cmp(e)};De.exponent=function(){return bn(this)};De.greaterThan=De.gt=function(e){return this.cmp(e)>0};De.greaterThanOrEqualTo=De.gte=function(e){return this.cmp(e)>=0};De.isInteger=De.isint=function(){return this.e>this.d.length-2};De.isNegative=De.isneg=function(){return this.s<0};De.isPositive=De.ispos=function(){return this.s>0};De.isZero=function(){return this.s===0};De.lessThan=De.lt=function(e){return this.cmp(e)<0};De.lessThanOrEqualTo=De.lte=function(e){return this.cmp(e)<1};De.logarithm=De.log=function(e){var t,n=this,r=n.constructor,a=r.precision,i=a+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(Yr))throw Error(ys+"NaN");if(n.s<1)throw Error(ys+(n.s?"NaN":"-Infinity"));return n.eq(Yr)?new r(0):(en=!1,t=ri(Ef(n,i),Ef(e,i),i),en=!0,$t(t,a))};De.minus=De.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?t5(t,e):ZF(t,(e.s=-e.s,e))};De.modulo=De.mod=function(e){var t,n=this,r=n.constructor,a=r.precision;if(e=new r(e),!e.s)throw Error(ys+"NaN");return n.s?(en=!1,t=ri(n,e,0,1).times(e),en=!0,n.minus(t)):$t(new r(n),a)};De.naturalExponential=De.exp=function(){return e5(this)};De.naturalLogarithm=De.ln=function(){return Ef(this)};De.negated=De.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};De.plus=De.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?ZF(t,e):t5(t,(e.s=-e.s,e))};De.precision=De.sd=function(e){var t,n,r,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Sl+e);if(t=bn(a)+1,r=a.d.length-1,n=r*Gt+1,r=a.d[r],r){for(;r%10==0;r/=10)n--;for(r=a.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};De.squareRoot=De.sqrt=function(){var e,t,n,r,a,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(ys+"NaN")}for(e=bn(l),en=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=va(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Id((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new c(t)):r=new c(a.toString()),n=c.precision,a=o=n+3;;)if(i=r,r=i.plus(ri(l,i,o+2)).times(.5),va(i.d).slice(0,o)===(t=va(r.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if($t(i,n+1,0),i.times(i).eq(l)){r=i;break}}else if(t!="9999")break;o+=4}return en=!0,$t(r,n)};De.times=De.mul=function(e){var t,n,r,a,i,o,l,c,u,d=this,h=d.constructor,f=d.d,m=(e=new h(e)).d;if(!d.s||!e.s)return new h(0);for(e.s*=d.s,n=d.e+e.e,c=f.length,u=m.length,c<u&&(i=f,f=m,m=i,o=c,c=u,u=o),i=[],o=c+u,r=o;r--;)i.push(0);for(r=u;--r>=0;){for(t=0,a=c+r;a>r;)l=i[a]+m[r]*f[a-r-1]+t,i[a--]=l%Rn|0,t=l/Rn|0;i[a]=(i[a]+t)%Rn|0}for(;!i[--o];)i.pop();return t?++n:i.shift(),e.d=i,e.e=n,en?$t(e,h.precision):e};De.toDecimalPlaces=De.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(Ea(e,0,Md),t===void 0?t=r.rounding:Ea(t,0,8),$t(n,e+bn(n)+1,t))};De.toExponential=function(e,t){var n,r=this,a=r.constructor;return e===void 0?n=zl(r,!0):(Ea(e,0,Md),t===void 0?t=a.rounding:Ea(t,0,8),r=$t(new a(r),e+1,t),n=zl(r,!0,e+1)),n};De.toFixed=function(e,t){var n,r,a=this,i=a.constructor;return e===void 0?zl(a):(Ea(e,0,Md),t===void 0?t=i.rounding:Ea(t,0,8),r=$t(new i(a),e+bn(a)+1,t),n=zl(r.abs(),!1,e+bn(r)+1),a.isneg()&&!a.isZero()?"-"+n:n)};De.toInteger=De.toint=function(){var e=this,t=e.constructor;return $t(new t(e),bn(e)+1,t.rounding)};De.toNumber=function(){return+this};De.toPower=De.pow=function(e){var t,n,r,a,i,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Yr);if(l=new c(l),!l.s){if(e.s<1)throw Error(ys+"Infinity");return l}if(l.eq(Yr))return l;if(r=c.precision,e.eq(Yr))return $t(l,r);if(t=e.e,n=e.d.length-1,o=t>=n,i=l.s,o){if((n=d<0?-d:d)<=JF){for(a=new c(Yr),t=Math.ceil(r/Gt+4),en=!1;n%2&&(a=a.times(l),aE(a.d,t)),n=Id(n/2),n!==0;)l=l.times(l),aE(l.d,t);return en=!0,e.s<0?new c(Yr).div(a):$t(a,r)}}else if(i<0)throw Error(ys+"NaN");return i=i<0&&e.d[Math.max(t,n)]&1?-1:1,l.s=1,en=!1,a=e.times(Ef(l,r+u)),en=!0,a=e5(a),a.s=i,a};De.toPrecision=function(e,t){var n,r,a=this,i=a.constructor;return e===void 0?(n=bn(a),r=zl(a,n<=i.toExpNeg||n>=i.toExpPos)):(Ea(e,1,Md),t===void 0?t=i.rounding:Ea(t,0,8),a=$t(new i(a),e,t),n=bn(a),r=zl(a,e<=n||n<=i.toExpNeg,e)),r};De.toSignificantDigits=De.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(Ea(e,1,Md),t===void 0?t=r.rounding:Ea(t,0,8)),$t(new r(n),e,t)};De.toString=De.valueOf=De.val=De.toJSON=De[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=bn(e),n=e.constructor;return zl(e,t<=n.toExpNeg||t>=n.toExpPos)};function ZF(e,t){var n,r,a,i,o,l,c,u,d=e.constructor,h=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),en?$t(t,h):t;if(c=e.d,u=t.d,o=e.e,a=t.e,c=c.slice(),i=o-a,i){for(i<0?(r=c,i=-i,l=u.length):(r=u,a=o,l=c.length),o=Math.ceil(h/Gt),l=o>l?o+1:l+1,i>l&&(i=l,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,r=u,u=c,c=r),n=0;i;)n=(c[--i]=c[i]+u[i]+n)/Rn|0,c[i]%=Rn;for(n&&(c.unshift(n),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,en?$t(t,h):t}function Ea(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Sl+e)}function va(e){var t,n,r,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)r=e[t]+"",n=Gt-r.length,n&&(i+=$i(n)),i+=r;o=e[t],r=o+"",n=Gt-r.length,n&&(i+=$i(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var ri=function(){function e(r,a){var i,o=0,l=r.length;for(r=r.slice();l--;)i=r[l]*a+o,r[l]=i%Rn|0,o=i/Rn|0;return o&&r.unshift(o),r}function t(r,a,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(r[l]!=a[l]){c=r[l]>a[l]?1:-1;break}return c}function n(r,a,i){for(var o=0;i--;)r[i]-=o,o=r[i]<a[i]?1:0,r[i]=o*Rn+r[i]-a[i];for(;!r[0]&&r.length>1;)r.shift()}return function(r,a,i,o){var l,c,u,d,h,f,m,v,p,g,x,y,b,N,w,S,_,C,P=r.constructor,A=r.s==a.s?1:-1,O=r.d,E=a.d;if(!r.s)return new P(r);if(!a.s)throw Error(ys+"Division by zero");for(c=r.e-a.e,_=E.length,w=O.length,m=new P(A),v=m.d=[],u=0;E[u]==(O[u]||0);)++u;if(E[u]>(O[u]||0)&&--c,i==null?y=i=P.precision:o?y=i+(bn(r)-bn(a))+1:y=i,y<0)return new P(0);if(y=y/Gt+2|0,u=0,_==1)for(d=0,E=E[0],y++;(u<w||d)&&y--;u++)b=d*Rn+(O[u]||0),v[u]=b/E|0,d=b%E|0;else{for(d=Rn/(E[0]+1)|0,d>1&&(E=e(E,d),O=e(O,d),_=E.length,w=O.length),N=_,p=O.slice(0,_),g=p.length;g<_;)p[g++]=0;C=E.slice(),C.unshift(0),S=E[0],E[1]>=Rn/2&&++S;do d=0,l=t(E,p,_,g),l<0?(x=p[0],_!=g&&(x=x*Rn+(p[1]||0)),d=x/S|0,d>1?(d>=Rn&&(d=Rn-1),h=e(E,d),f=h.length,g=p.length,l=t(h,p,f,g),l==1&&(d--,n(h,_<f?C:E,f))):(d==0&&(l=d=1),h=E.slice()),f=h.length,f<g&&h.unshift(0),n(p,h,g),l==-1&&(g=p.length,l=t(E,p,_,g),l<1&&(d++,n(p,_<g?C:E,g))),g=p.length):l===0&&(d++,p=[0]),v[u++]=d,l&&p[0]?p[g++]=O[N]||0:(p=[O[N]],g=1);while((N++<w||p[0]!==void 0)&&y--)}return v[0]||v.shift(),m.e=c,$t(m,o?i+bn(m)+1:i)}}();function e5(e,t){var n,r,a,i,o,l,c=0,u=0,d=e.constructor,h=d.precision;if(bn(e)>16)throw Error(z_+bn(e));if(!e.s)return new d(Yr);for(t==null?(en=!1,l=h):l=t,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(r=Math.log(Zo(2,u))/Math.LN10*2+5|0,l+=r,n=a=i=new d(Yr),d.precision=l;;){if(a=$t(a.times(e),l),n=n.times(++c),o=i.plus(ri(a,n,l)),va(o.d).slice(0,l)===va(i.d).slice(0,l)){for(;u--;)i=$t(i.times(i),l);return d.precision=h,t==null?(en=!0,$t(i,h)):i}i=o}}function bn(e){for(var t=e.e*Gt,n=e.d[0];n>=10;n/=10)t++;return t}function db(e,t,n){if(t>e.LN10.sd())throw en=!0,n&&(e.precision=n),Error(ys+"LN10 precision limit exceeded");return $t(new e(e.LN10),t)}function $i(e){for(var t="";e--;)t+="0";return t}function Ef(e,t){var n,r,a,i,o,l,c,u,d,h=1,f=10,m=e,v=m.d,p=m.constructor,g=p.precision;if(m.s<1)throw Error(ys+(m.s?"NaN":"-Infinity"));if(m.eq(Yr))return new p(0);if(t==null?(en=!1,u=g):u=t,m.eq(10))return t==null&&(en=!0),db(p,u);if(u+=f,p.precision=u,n=va(v),r=n.charAt(0),i=bn(m),Math.abs(i)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)m=m.times(e),n=va(m.d),r=n.charAt(0),h++;i=bn(m),r>1?(m=new p("0."+n),i++):m=new p(r+"."+n.slice(1))}else return c=db(p,u+2,g).times(i+""),m=Ef(new p(r+"."+n.slice(1)),u-f).plus(c),p.precision=g,t==null?(en=!0,$t(m,g)):m;for(l=o=m=ri(m.minus(Yr),m.plus(Yr),u),d=$t(m.times(m),u),a=3;;){if(o=$t(o.times(d),u),c=l.plus(ri(o,new p(a),u)),va(c.d).slice(0,u)===va(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(db(p,u+2,g).times(i+""))),l=ri(l,new p(h),u),p.precision=g,t==null?(en=!0,$t(l,g)):l;l=c,a+=2}}function sE(e,t){var n,r,a;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(r,a),t){if(a-=r,n=n-r-1,e.e=Id(n/Gt),e.d=[],r=(n+1)%Gt,n<0&&(r+=Gt),r<a){for(r&&e.d.push(+t.slice(0,r)),a-=Gt;r<a;)e.d.push(+t.slice(r,r+=Gt));t=t.slice(r),r=Gt-t.length}else r-=a;for(;r--;)t+="0";if(e.d.push(+t),en&&(e.e>uv||e.e<-uv))throw Error(z_+n)}else e.s=0,e.e=0,e.d=[0];return e}function $t(e,t,n){var r,a,i,o,l,c,u,d,h=e.d;for(o=1,i=h[0];i>=10;i/=10)o++;if(r=t-o,r<0)r+=Gt,a=t,u=h[d=0];else{if(d=Math.ceil((r+1)/Gt),i=h.length,d>=i)return e;for(u=i=h[d],o=1;i>=10;i/=10)o++;r%=Gt,a=r-Gt+o}if(n!==void 0&&(i=Zo(10,o-a-1),l=u/i%10|0,c=t<0||h[d+1]!==void 0||u%i,c=n<4?(l||c)&&(n==0||n==(e.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(r>0?a>0?u/Zo(10,o-a):0:h[d-1])%10&1||n==(e.s<0?8:7))),t<1||!h[0])return c?(i=bn(e),h.length=1,t=t-i-1,h[0]=Zo(10,(Gt-t%Gt)%Gt),e.e=Id(-t/Gt)||0):(h.length=1,h[0]=e.e=e.s=0),e;if(r==0?(h.length=d,i=1,d--):(h.length=d+1,i=Zo(10,Gt-r),h[d]=a>0?(u/Zo(10,o-a)%Zo(10,a)|0)*i:0),c)for(;;)if(d==0){(h[0]+=i)==Rn&&(h[0]=1,++e.e);break}else{if(h[d]+=i,h[d]!=Rn)break;h[d--]=0,i=1}for(r=h.length;h[--r]===0;)h.pop();if(en&&(e.e>uv||e.e<-uv))throw Error(z_+bn(e));return e}function t5(e,t){var n,r,a,i,o,l,c,u,d,h,f=e.constructor,m=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),en?$t(t,m):t;if(c=e.d,h=t.d,r=t.e,u=e.e,c=c.slice(),o=u-r,o){for(d=o<0,d?(n=c,o=-o,l=h.length):(n=h,r=u,l=c.length),a=Math.max(Math.ceil(m/Gt),l)+2,o>a&&(o=a,n.length=1),n.reverse(),a=o;a--;)n.push(0);n.reverse()}else{for(a=c.length,l=h.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=h[a]){d=c[a]<h[a];break}o=0}for(d&&(n=c,c=h,h=n,t.s=-t.s),l=c.length,a=h.length-l;a>0;--a)c[l++]=0;for(a=h.length;a>o;){if(c[--a]<h[a]){for(i=a;i&&c[--i]===0;)c[i]=Rn-1;--c[i],c[a]+=Rn}c[a]-=h[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(t.d=c,t.e=r,en?$t(t,m):t):new f(0)}function zl(e,t,n){var r,a=bn(e),i=va(e.d),o=i.length;return t?(n&&(r=n-o)>0?i=i.charAt(0)+"."+i.slice(1)+$i(r):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+$i(-a-1)+i,n&&(r=n-o)>0&&(i+=$i(r))):a>=o?(i+=$i(a+1-o),n&&(r=n-a-1)>0&&(i=i+"."+$i(r))):((r=a+1)<o&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-o)>0&&(a+1===o&&(i+="."),i+=$i(r))),e.s<0?"-"+i:i}function aE(e,t){if(e.length>t)return e.length=t,!0}function n5(e){var t,n,r;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Sl+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return sE(o,i.toString())}else if(typeof i!="string")throw Error(Sl+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,Nxe.test(i))sE(o,i);else throw Error(Sl+i)}if(a.prototype=De,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=n5,a.config=a.set=Sxe,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return a.config(e),a}function Sxe(e){if(!e||typeof e!="object")throw Error(ys+"Object expected");var t,n,r,a=["precision",1,Md,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((r=e[n=a[t]])!==void 0)if(Id(r)===r&&r>=a[t+1]&&r<=a[t+2])this[n]=r;else throw Error(Sl+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Sl+n+": "+r);return this}var V_=n5(wxe);Yr=new V_(1);const Ot=V_;function _xe(e){return kxe(e)||Axe(e)||Pxe(e)||Cxe()}function Cxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pxe(e,t){if(e){if(typeof e=="string")return Jw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jw(e,t)}}function Axe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function kxe(e){if(Array.isArray(e))return Jw(e)}function Jw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Exe=function(t){return t},r5={"@@functional/placeholder":!0},s5=function(t){return t===r5},iE=function(t){return function n(){return arguments.length===0||arguments.length===1&&s5(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},Txe=function e(t,n){return t===1?n:iE(function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];var o=a.filter(function(l){return l!==r5}).length;return o>=t?n.apply(void 0,a):e(t-o,iE(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=a.map(function(h){return s5(h)?c.shift():h});return n.apply(void 0,_xe(d).concat(c))}))})},gy=function(t){return Txe(t.length,t)},Zw=function(t,n){for(var r=[],a=t;a<n;++a)r[a-t]=a;return r},Oxe=gy(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),Dxe=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return Exe;var a=n.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},e1=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},a5=function(t){var n=null,r=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n&&i.every(function(l,c){return l===n[c]})||(n=i,r=t.apply(void 0,i)),r}};function Mxe(e){var t;return e===0?t=1:t=Math.floor(new Ot(e).abs().log(10).toNumber())+1,t}function Ixe(e,t,n){for(var r=new Ot(e),a=0,i=[];r.lt(t)&&a<1e5;)i.push(r.toNumber()),r=r.add(n),a++;return i}var $xe=gy(function(e,t,n){var r=+e,a=+t;return r+n*(a-r)}),Rxe=gy(function(e,t,n){var r=t-+e;return r=r||1/0,(n-e)/r}),Lxe=gy(function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});const vy={rangeStep:Ixe,getDigitCount:Mxe,interpolateNumber:$xe,uninterpolateNumber:Rxe,uninterpolateTruncation:Lxe};function t1(e){return zxe(e)||Bxe(e)||i5(e)||Fxe()}function Fxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bxe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function zxe(e){if(Array.isArray(e))return n1(e)}function Tf(e,t){return Uxe(e)||qxe(e,t)||i5(e,t)||Vxe()}function Vxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function i5(e,t){if(e){if(typeof e=="string")return n1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return n1(e,t)}}function n1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qxe(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,a=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(r=(l=o.next()).done)&&(n.push(l.value),!(t&&n.length===t));r=!0);}catch(c){a=!0,i=c}finally{try{!r&&o.return!=null&&o.return()}finally{if(a)throw i}}return n}}function Uxe(e){if(Array.isArray(e))return e}function o5(e){var t=Tf(e,2),n=t[0],r=t[1],a=n,i=r;return n>r&&(a=r,i=n),[a,i]}function l5(e,t,n){if(e.lte(0))return new Ot(0);var r=vy.getDigitCount(e.toNumber()),a=new Ot(10).pow(r),i=e.div(a),o=r!==1?.05:.1,l=new Ot(Math.ceil(i.div(o).toNumber())).add(n).mul(o),c=l.mul(a);return t?c:new Ot(Math.ceil(c))}function Wxe(e,t,n){var r=1,a=new Ot(e);if(!a.isint()&&n){var i=Math.abs(e);i<1?(r=new Ot(10).pow(vy.getDigitCount(e)-1),a=new Ot(Math.floor(a.div(r).toNumber())).mul(r)):i>1&&(a=new Ot(Math.floor(e)))}else e===0?a=new Ot(Math.floor((t-1)/2)):n||(a=new Ot(Math.floor(e)));var o=Math.floor((t-1)/2),l=Dxe(Oxe(function(c){return a.add(new Ot(c-o).mul(r)).toNumber()}),Zw);return l(0,t)}function c5(e,t,n,r){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new Ot(0),tickMin:new Ot(0),tickMax:new Ot(0)};var i=l5(new Ot(t).sub(e).div(n-1),r,a),o;e<=0&&t>=0?o=new Ot(0):(o=new Ot(e).add(t).div(2),o=o.sub(new Ot(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new Ot(t).sub(o).div(i).toNumber()),u=l+c+1;return u>n?c5(e,t,n,r,a+1):(u<n&&(c=t>0?c+(n-u):c,l=t>0?l:l+(n-u)),{step:i,tickMin:o.sub(new Ot(l).mul(i)),tickMax:o.add(new Ot(c).mul(i))})}function Hxe(e){var t=Tf(e,2),n=t[0],r=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=o5([n,r]),c=Tf(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var h=d===1/0?[u].concat(t1(Zw(0,a-1).map(function(){return 1/0}))):[].concat(t1(Zw(0,a-1).map(function(){return-1/0})),[d]);return n>r?e1(h):h}if(u===d)return Wxe(u,a,i);var f=c5(u,d,o,i),m=f.step,v=f.tickMin,p=f.tickMax,g=vy.rangeStep(v,p.add(new Ot(.1).mul(m)),m);return n>r?e1(g):g}function Kxe(e,t){var n=Tf(e,2),r=n[0],a=n[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=o5([r,a]),l=Tf(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[r,a];if(c===u)return[c];var d=Math.max(t,2),h=l5(new Ot(u).sub(c).div(d-1),i,0),f=[].concat(t1(vy.rangeStep(new Ot(c),new Ot(u).sub(new Ot(.99).mul(h)),h)),[u]);return r>a?e1(f):f}var Gxe=a5(Hxe),Yxe=a5(Kxe),Qxe="Invariant failed";function Vl(e,t){throw new Error(Qxe)}var Xxe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Vu(e){"@babel/helpers - typeof";return Vu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vu(e)}function dv(){return dv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dv.apply(this,arguments)}function Jxe(e,t){return nye(e)||tye(e,t)||eye(e,t)||Zxe()}function Zxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eye(e,t){if(e){if(typeof e=="string")return oE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oE(e,t)}}function oE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tye(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function nye(e){if(Array.isArray(e))return e}function rye(e,t){if(e==null)return{};var n=sye(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function sye(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function aye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h5(r.key),r)}}function oye(e,t,n){return t&&iye(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function lye(e,t,n){return t=hv(t),cye(e,u5()?Reflect.construct(t,n||[],hv(e).constructor):t.apply(e,n))}function cye(e,t){if(t&&(Vu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uye(e)}function uye(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(u5=function(){return!!e})()}function hv(e){return hv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},hv(e)}function dye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r1(e,t)}function r1(e,t){return r1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},r1(e,t)}function d5(e,t,n){return t=h5(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h5(e){var t=hye(e,"string");return Vu(t)=="symbol"?t:t+""}function hye(e,t){if(Vu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Vu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xy=function(e){function t(){return aye(this,t),lye(this,t,arguments)}return dye(t,e),oye(t,[{key:"render",value:function(){var r=this.props,a=r.offset,i=r.layout,o=r.width,l=r.dataKey,c=r.data,u=r.dataPointFormatter,d=r.xAxis,h=r.yAxis,f=rye(r,Xxe),m=Fe(f,!1);this.props.direction==="x"&&d.type!=="number"&&Vl();var v=c.map(function(p){var g=u(p,l),x=g.x,y=g.y,b=g.value,N=g.errorVal;if(!N)return null;var w=[],S,_;if(Array.isArray(N)){var C=Jxe(N,2);S=C[0],_=C[1]}else S=_=N;if(i==="vertical"){var P=d.scale,A=y+a,O=A+o,E=A-o,z=P(b-S),I=P(b+_);w.push({x1:I,y1:O,x2:I,y2:E}),w.push({x1:z,y1:A,x2:I,y2:A}),w.push({x1:z,y1:O,x2:z,y2:E})}else if(i==="horizontal"){var W=h.scale,V=x+a,H=V-o,k=V+o,D=W(b-S),X=W(b+_);w.push({x1:H,y1:X,x2:k,y2:X}),w.push({x1:V,y1:D,x2:V,y2:X}),w.push({x1:H,y1:D,x2:k,y2:D})}return $.createElement(gt,dv({className:"recharts-errorBar",key:"bar-".concat(w.map(function(Q){return"".concat(Q.x1,"-").concat(Q.x2,"-").concat(Q.y1,"-").concat(Q.y2)}))},m),w.map(function(Q){return $.createElement("line",dv({},Q,{key:"line-".concat(Q.x1,"-").concat(Q.x2,"-").concat(Q.y1,"-").concat(Q.y2)}))}))});return $.createElement(gt,{className:"recharts-errorBars"},v)}}])}($.Component);d5(xy,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});d5(xy,"displayName","ErrorBar");function Of(e){"@babel/helpers - typeof";return Of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Of(e)}function lE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Wo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lE(Object(n),!0).forEach(function(r){fye(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function fye(e,t,n){return t=mye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mye(e){var t=pye(e,"string");return Of(t)=="symbol"?t:t+""}function pye(e,t){if(Of(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Of(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var f5=function(t){var n=t.children,r=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,o=Hr(n,eu);if(!o)return null;var l=eu.defaultProps,c=l!==void 0?Wo(Wo({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(r||[]).reduce(function(d,h){var f=h.item,m=h.props,v=m.sectors||m.data||[];return d.concat(v.map(function(p){return{type:o.props.iconType||f.props.legendType,value:p.name,color:p.fill,payload:p}}))},[]):u=(r||[]).map(function(d){var h=d.item,f=h.type.defaultProps,m=f!==void 0?Wo(Wo({},f),h.props):{},v=m.dataKey,p=m.name,g=m.legendType,x=m.hide;return{inactive:x,dataKey:v,type:c.iconType||g||"square",color:q_(h),value:p||v,payload:m}}),Wo(Wo(Wo({},c),eu.getWithHeight(o,a)),{},{payload:u,item:o})};function Df(e){"@babel/helpers - typeof";return Df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Df(e)}function cE(e){return yye(e)||xye(e)||vye(e)||gye()}function gye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vye(e,t){if(e){if(typeof e=="string")return s1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s1(e,t)}}function xye(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function yye(e){if(Array.isArray(e))return s1(e)}function s1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function uE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function un(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uE(Object(n),!0).forEach(function(r){nu(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function nu(e,t,n){return t=bye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bye(e){var t=jye(e,"string");return Df(t)=="symbol"?t:t+""}function jye(e,t){if(Df(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Df(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kn(e,t,n){return Qe(e)||Qe(t)?n:Tn(t)?es(e,t,n):qe(t)?t(e):n}function $h(e,t,n,r){var a=xxe(e,function(l){return kn(l,t)});if(n==="number"){var i=a.filter(function(l){return pe(l)||parseFloat(l)});return i.length?[py(i),eo(i)]:[1/0,-1/0]}var o=r?a.filter(function(l){return!Qe(l)}):a;return o.map(function(l){return Tn(l)||l instanceof Date?l:""})}var wye=function(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,u=0;u<l;u++){var d=u>0?a[u-1].coordinate:a[l-1].coordinate,h=a[u].coordinate,f=u>=l-1?a[0].coordinate:a[u+1].coordinate,m=void 0;if(vr(h-d)!==vr(f-h)){var v=[];if(vr(f-h)===vr(c[1]-c[0])){m=f;var p=h+c[1]-c[0];v[0]=Math.min(p,(p+d)/2),v[1]=Math.max(p,(p+d)/2)}else{m=d;var g=f+c[1]-c[0];v[0]=Math.min(h,(g+h)/2),v[1]=Math.max(h,(g+h)/2)}var x=[Math.min(h,(m+h)/2),Math.max(h,(m+h)/2)];if(t>x[0]&&t<=x[1]||t>=v[0]&&t<=v[1]){o=a[u].index;break}}else{var y=Math.min(d,f),b=Math.max(d,f);if(t>(y+h)/2&&t<=(b+h)/2){o=a[u].index;break}}}else for(var N=0;N<l;N++)if(N===0&&t<=(r[N].coordinate+r[N+1].coordinate)/2||N>0&&N<l-1&&t>(r[N].coordinate+r[N-1].coordinate)/2&&t<=(r[N].coordinate+r[N+1].coordinate)/2||N===l-1&&t>(r[N].coordinate+r[N-1].coordinate)/2){o=r[N].index;break}return o},q_=function(t){var n,r=t,a=r.type.displayName,i=(n=t.type)!==null&&n!==void 0&&n.defaultProps?un(un({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},Nye=function(t){var n=t.barSize,r=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},l=Object.keys(i),c=0,u=l.length;c<u;c++)for(var d=i[l[c]].stackGroups,h=Object.keys(d),f=0,m=h.length;f<m;f++){var v=d[h[f]],p=v.items,g=v.cateAxisId,x=p.filter(function(_){return ni(_.type).indexOf("Bar")>=0});if(x&&x.length){var y=x[0].type.defaultProps,b=y!==void 0?un(un({},y),x[0].props):x[0].props,N=b.barSize,w=b[g];o[w]||(o[w]=[]);var S=Qe(N)?n:N;o[w].push({item:x[0],stackList:x.slice(1),barSize:Qe(S)?void 0:xr(S,r,0)})}}return o},Sye=function(t){var n=t.barGap,r=t.barCategoryGap,a=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var u=xr(n,a,0,!0),d,h=[];if(o[0].barSize===+o[0].barSize){var f=!1,m=a/c,v=o.reduce(function(N,w){return N+w.barSize||0},0);v+=(c-1)*u,v>=a&&(v-=(c-1)*u,u=0),v>=a&&m>0&&(f=!0,m*=.9,v=c*m);var p=(a-v)/2>>0,g={offset:p-u,size:0};d=o.reduce(function(N,w){var S={item:w.item,position:{offset:g.offset+g.size+u,size:f?m:w.barSize}},_=[].concat(cE(N),[S]);return g=_[_.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function(C){_.push({item:C,position:g})}),_},h)}else{var x=xr(r,a,0,!0);a-2*x-(c-1)*u<=0&&(u=0);var y=(a-2*x-(c-1)*u)/c;y>1&&(y>>=0);var b=l===+l?Math.min(y,l):y;d=o.reduce(function(N,w,S){var _=[].concat(cE(N),[{item:w.item,position:{offset:x+(y+u)*S+(y-b)/2,size:b}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function(C){_.push({item:C,position:_[_.length-1].position})}),_},h)}return d},_ye=function(t,n,r,a){var i=r.children,o=r.width,l=r.margin,c=o-(l.left||0)-(l.right||0),u=f5({children:i,legendWidth:c});if(u){var d=a||{},h=d.width,f=d.height,m=u.align,v=u.verticalAlign,p=u.layout;if((p==="vertical"||p==="horizontal"&&v==="middle")&&m!=="center"&&pe(t[m]))return un(un({},t),{},nu({},m,t[m]+(h||0)));if((p==="horizontal"||p==="vertical"&&m==="center")&&v!=="middle"&&pe(t[v]))return un(un({},t),{},nu({},v,t[v]+(f||0)))}return t},Cye=function(t,n,r){return Qe(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},m5=function(t,n,r,a,i){var o=n.props.children,l=gs(o,xy).filter(function(u){return Cye(a,i,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var h=kn(d,r);if(Qe(h))return u;var f=Array.isArray(h)?[py(h),eo(h)]:[h,h],m=c.reduce(function(v,p){var g=kn(d,p,0),x=f[0]-Math.abs(Array.isArray(g)?g[0]:g),y=f[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(x,v[0]),Math.max(y,v[1])]},[1/0,-1/0]);return[Math.min(m[0],u[0]),Math.max(m[1],u[1])]},[1/0,-1/0])}return null},Pye=function(t,n,r,a,i){var o=n.map(function(l){return m5(t,l,r,i,a)}).filter(function(l){return!Qe(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},p5=function(t,n,r,a,i){var o=n.map(function(c){var u=c.props.dataKey;return r==="number"&&u&&m5(t,c,u,a)||$h(t,u,r,i)});if(r==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var d=0,h=u.length;d<h;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},g5=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},v5=function(t,n,r,a){if(a)return t.map(function(c){return c.coordinate});var i,o,l=t.map(function(c){return c.coordinate===n&&(i=!0),c.coordinate===r&&(o=!0),c.coordinate});return i||l.push(n),o||l.push(r),l},ei=function(t,n,r){if(!t)return null;var a=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(n||r)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?vr(l[0]-l[1])*2*u:u,n&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(h){var f=i?i.indexOf(h):h;return{coordinate:a(f)+u,value:h,offset:u}});return d.filter(function(h){return!Pd(h.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(h,f){return{coordinate:a(h)+u,value:h,index:f,offset:u}}):a.ticks&&!r?a.ticks(t.tickCount).map(function(h){return{coordinate:a(h)+u,value:h,offset:u}}):a.domain().map(function(h,f){return{coordinate:a(h)+u,value:i?i[h]:h,index:f,offset:u}})},hb=new WeakMap,Ap=function(t,n){if(typeof n!="function")return t;hb.has(t)||hb.set(t,new WeakMap);var r=hb.get(t);if(r.has(n))return r.get(n);var a=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,a),a},x5=function(t,n,r){var a=t.scale,i=t.type,o=t.layout,l=t.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:_f(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:iv(),realScaleType:"linear"}:i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Ih(),realScaleType:"point"}:i==="category"?{scale:_f(),realScaleType:"band"}:{scale:iv(),realScaleType:"linear"};if(Ll(a)){var c="scale".concat(ty(a));return{scale:(rE[c]||Ih)(),realScaleType:rE[c]?c:"point"}}return qe(a)?{scale:a}:{scale:Ih(),realScaleType:"point"}},dE=1e-4,y5=function(t){var n=t.domain();if(!(!n||n.length<=2)){var r=n.length,a=t.range(),i=Math.min(a[0],a[1])-dE,o=Math.max(a[0],a[1])+dE,l=t(n[0]),c=t(n[r-1]);(l<i||l>o||c<i||c>o)&&t.domain([n[0],n[r-1]])}},Aye=function(t,n){if(!t)return null;for(var r=0,a=t.length;r<a;r++)if(t[r].item===n)return t[r].position;return null},kye=function(t,n){if(!n||n.length!==2||!pe(n[0])||!pe(n[1]))return t;var r=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]),i=[t[0],t[1]];return(!pe(t[0])||t[0]<r)&&(i[0]=r),(!pe(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<r&&(i[1]=r),i},Eye=function(t){var n=t.length;if(!(n<=0))for(var r=0,a=t[0].length;r<a;++r)for(var i=0,o=0,l=0;l<n;++l){var c=Pd(t[l][r][1])?t[l][r][0]:t[l][r][1];c>=0?(t[l][r][0]=i,t[l][r][1]=i+c,i=t[l][r][1]):(t[l][r][0]=o,t[l][r][1]=o+c,o=t[l][r][1])}},Tye=function(t){var n=t.length;if(!(n<=0))for(var r=0,a=t[0].length;r<a;++r)for(var i=0,o=0;o<n;++o){var l=Pd(t[o][r][1])?t[o][r][0]:t[o][r][1];l>=0?(t[o][r][0]=i,t[o][r][1]=i+l,i=t[o][r][1]):(t[o][r][0]=0,t[o][r][1]=0)}},Oye={sign:Eye,expand:Xae,none:Du,silhouette:Jae,wiggle:Zae,positive:Tye},Dye=function(t,n,r){var a=n.map(function(l){return l.props.dataKey}),i=Oye[r],o=Qae().keys(a).value(function(l,c){return+kn(l,c,0)}).order(kw).offset(i);return o(t)},Mye=function(t,n,r,a,i,o){if(!t)return null;var l=o?n.reverse():n,c={},u=l.reduce(function(h,f){var m,v=(m=f.type)!==null&&m!==void 0&&m.defaultProps?un(un({},f.type.defaultProps),f.props):f.props,p=v.stackId,g=v.hide;if(g)return h;var x=v[r],y=h[x]||{hasStack:!1,stackGroups:{}};if(Tn(p)){var b=y.stackGroups[p]||{numericAxisId:r,cateAxisId:a,items:[]};b.items.push(f),y.hasStack=!0,y.stackGroups[p]=b}else y.stackGroups[Ad("_stackId_")]={numericAxisId:r,cateAxisId:a,items:[f]};return un(un({},h),{},nu({},x,y))},c),d={};return Object.keys(u).reduce(function(h,f){var m=u[f];if(m.hasStack){var v={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(p,g){var x=m.stackGroups[g];return un(un({},p),{},nu({},g,{numericAxisId:r,cateAxisId:a,items:x.items,stackedData:Dye(t,x.items,i)}))},v)}return un(un({},h),{},nu({},f,m))},d)},b5=function(t,n){var r=n.realScaleType,a=n.type,i=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=r||n.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=Gxe(u,i,l);return t.domain([py(d),eo(d)]),{niceTicks:d}}if(i&&a==="number"){var h=t.domain(),f=Yxe(h,i,l);return{niceTicks:f}}return null};function hE(e){var t=e.axis,n=e.ticks,r=e.bandSize,a=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Qe(a[t.dataKey])){var l=Fg(n,"value",a[t.dataKey]);if(l)return l.coordinate+r/2}return n[i]?n[i].coordinate+r/2:null}var c=kn(a,Qe(o)?t.dataKey:o);return Qe(c)?null:t.scale(c)}var fE=function(t){var n=t.axis,r=t.ticks,a=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(n.type==="category")return r[l]?r[l].coordinate+a:null;var c=kn(o,n.dataKey,n.domain[l]);return Qe(c)?null:n.scale(c)-i/2+a},Iye=function(t){var n=t.numericAxis,r=n.scale.domain();if(n.type==="number"){var a=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return a<=0&&i>=0?0:i<0?i:a}return r[0]},$ye=function(t,n){var r,a=(r=t.type)!==null&&r!==void 0&&r.defaultProps?un(un({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(Tn(i)){var o=n[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},Rye=function(t){return t.reduce(function(n,r){return[py(r.concat([n[0]]).filter(pe)),eo(r.concat([n[1]]).filter(pe))]},[1/0,-1/0])},j5=function(t,n,r){return Object.keys(t).reduce(function(a,i){var o=t[i],l=o.stackedData,c=l.reduce(function(u,d){var h=Rye(d.slice(n,r+1));return[Math.min(u[0],h[0]),Math.max(u[1],h[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},mE=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,pE=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,a1=function(t,n,r){if(qe(t))return t(n,r);if(!Array.isArray(t))return n;var a=[];if(pe(t[0]))a[0]=r?t[0]:Math.min(t[0],n[0]);else if(mE.test(t[0])){var i=+mE.exec(t[0])[1];a[0]=n[0]-i}else qe(t[0])?a[0]=t[0](n[0]):a[0]=n[0];if(pe(t[1]))a[1]=r?t[1]:Math.max(t[1],n[1]);else if(pE.test(t[1])){var o=+pE.exec(t[1])[1];a[1]=n[1]+o}else qe(t[1])?a[1]=t[1](n[1]):a[1]=n[1];return a},fv=function(t,n,r){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!r||a>0)return a}if(t&&n&&n.length>=2){for(var i=v_(n,function(h){return h.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var u=i[l],d=i[l-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},gE=function(t,n,r){return!t||!t.length||zu(t,es(r,"type.defaultProps.domain"))?n:t},w5=function(t,n){var r=t.type.defaultProps?un(un({},t.type.defaultProps),t.props):t.props,a=r.dataKey,i=r.name,o=r.unit,l=r.formatter,c=r.tooltipType,u=r.chartType,d=r.hide;return un(un({},Fe(t,!1)),{},{dataKey:a,unit:o,formatter:l,name:i||a,color:q_(t),value:kn(n,a),type:c,payload:n,chartType:u,hide:d})};function Mf(e){"@babel/helpers - typeof";return Mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mf(e)}function vE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ua(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vE(Object(n),!0).forEach(function(r){N5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function N5(e,t,n){return t=Lye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lye(e){var t=Fye(e,"string");return Mf(t)=="symbol"?t:t+""}function Fye(e,t){if(Mf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Mf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bye(e,t){return Uye(e)||qye(e,t)||Vye(e,t)||zye()}function zye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vye(e,t){if(e){if(typeof e=="string")return xE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xE(e,t)}}function xE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qye(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Uye(e){if(Array.isArray(e))return e}var mv=Math.PI/180,Wye=function(t){return t*180/Math.PI},Ut=function(t,n,r,a){return{x:t+Math.cos(-mv*a)*r,y:n+Math.sin(-mv*a)*r}},S5=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},Hye=function(t,n,r,a,i){var o=t.width,l=t.height,c=t.startAngle,u=t.endAngle,d=xr(t.cx,o,o/2),h=xr(t.cy,l,l/2),f=S5(o,l,r),m=xr(t.innerRadius,f,0),v=xr(t.outerRadius,f,f*.8),p=Object.keys(n);return p.reduce(function(g,x){var y=n[x],b=y.domain,N=y.reversed,w;if(Qe(y.range))a==="angleAxis"?w=[c,u]:a==="radiusAxis"&&(w=[m,v]),N&&(w=[w[1],w[0]]);else{w=y.range;var S=w,_=Bye(S,2);c=_[0],u=_[1]}var C=x5(y,i),P=C.realScaleType,A=C.scale;A.domain(b).range(w),y5(A);var O=b5(A,Ua(Ua({},y),{},{realScaleType:P})),E=Ua(Ua(Ua({},y),O),{},{range:w,radius:v,realScaleType:P,scale:A,cx:d,cy:h,innerRadius:m,outerRadius:v,startAngle:c,endAngle:u});return Ua(Ua({},g),{},N5({},x,E))},{})},Kye=function(t,n){var r=t.x,a=t.y,i=n.x,o=n.y;return Math.sqrt(Math.pow(r-i,2)+Math.pow(a-o,2))},Gye=function(t,n){var r=t.x,a=t.y,i=n.cx,o=n.cy,l=Kye({x:r,y:a},{x:i,y:o});if(l<=0)return{radius:l};var c=(r-i)/l,u=Math.acos(c);return a>o&&(u=2*Math.PI-u),{radius:l,angle:Wye(u),angleInRadian:u}},Yye=function(t){var n=t.startAngle,r=t.endAngle,a=Math.floor(n/360),i=Math.floor(r/360),o=Math.min(a,i);return{startAngle:n-o*360,endAngle:r-o*360}},Qye=function(t,n){var r=n.startAngle,a=n.endAngle,i=Math.floor(r/360),o=Math.floor(a/360),l=Math.min(i,o);return t+l*360},yE=function(t,n){var r=t.x,a=t.y,i=Gye({x:r,y:a},n),o=i.radius,l=i.angle,c=n.innerRadius,u=n.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var d=Yye(n),h=d.startAngle,f=d.endAngle,m=l,v;if(h<=f){for(;m>f;)m-=360;for(;m<h;)m+=360;v=m>=h&&m<=f}else{for(;m>h;)m-=360;for(;m<f;)m+=360;v=m>=f&&m<=h}return v?Ua(Ua({},n),{},{radius:o,angle:Qye(m,n)}):null},_5=function(t){return!j.isValidElement(t)&&!qe(t)&&typeof t!="boolean"?t.className:""};function If(e){"@babel/helpers - typeof";return If=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},If(e)}var Xye=["offset"];function Jye(e){return n0e(e)||t0e(e)||e0e(e)||Zye()}function Zye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e0e(e,t){if(e){if(typeof e=="string")return i1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i1(e,t)}}function t0e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function n0e(e){if(Array.isArray(e))return i1(e)}function i1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function r0e(e,t){if(e==null)return{};var n=s0e(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function s0e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function bE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Sn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bE(Object(n),!0).forEach(function(r){a0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function a0e(e,t,n){return t=i0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i0e(e){var t=o0e(e,"string");return If(t)=="symbol"?t:t+""}function o0e(e,t){if(If(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(If(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $f(){return $f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$f.apply(this,arguments)}var l0e=function(t){var n=t.value,r=t.formatter,a=Qe(t.children)?n:t.children;return qe(r)?r(a):a},c0e=function(t,n){var r=vr(n-t),a=Math.min(Math.abs(n-t),360);return r*a},u0e=function(t,n,r){var a=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,u=c.cx,d=c.cy,h=c.innerRadius,f=c.outerRadius,m=c.startAngle,v=c.endAngle,p=c.clockWise,g=(h+f)/2,x=c0e(m,v),y=x>=0?1:-1,b,N;a==="insideStart"?(b=m+y*o,N=p):a==="insideEnd"?(b=v-y*o,N=!p):a==="end"&&(b=v+y*o,N=p),N=x<=0?N:!N;var w=Ut(u,d,g,b),S=Ut(u,d,g,b+(N?1:-1)*359),_="M".concat(w.x,",").concat(w.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(N?0:1,`,
    `).concat(S.x,",").concat(S.y),C=Qe(t.id)?Ad("recharts-radial-line-"):t.id;return $.createElement("text",$f({},r,{dominantBaseline:"central",className:Ye("recharts-radial-bar-label",l)}),$.createElement("defs",null,$.createElement("path",{id:C,d:_})),$.createElement("textPath",{xlinkHref:"#".concat(C)},n))},d0e=function(t){var n=t.viewBox,r=t.offset,a=t.position,i=n,o=i.cx,l=i.cy,c=i.innerRadius,u=i.outerRadius,d=i.startAngle,h=i.endAngle,f=(d+h)/2;if(a==="outside"){var m=Ut(o,l,u+r,f),v=m.x,p=m.y;return{x:v,y:p,textAnchor:v>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var g=(c+u)/2,x=Ut(o,l,g,f),y=x.x,b=x.y;return{x:y,y:b,textAnchor:"middle",verticalAnchor:"middle"}},h0e=function(t){var n=t.viewBox,r=t.parentViewBox,a=t.offset,i=t.position,o=n,l=o.x,c=o.y,u=o.width,d=o.height,h=d>=0?1:-1,f=h*a,m=h>0?"end":"start",v=h>0?"start":"end",p=u>=0?1:-1,g=p*a,x=p>0?"end":"start",y=p>0?"start":"end";if(i==="top"){var b={x:l+u/2,y:c-h*a,textAnchor:"middle",verticalAnchor:m};return Sn(Sn({},b),r?{height:Math.max(c-r.y,0),width:u}:{})}if(i==="bottom"){var N={x:l+u/2,y:c+d+f,textAnchor:"middle",verticalAnchor:v};return Sn(Sn({},N),r?{height:Math.max(r.y+r.height-(c+d),0),width:u}:{})}if(i==="left"){var w={x:l-g,y:c+d/2,textAnchor:x,verticalAnchor:"middle"};return Sn(Sn({},w),r?{width:Math.max(w.x-r.x,0),height:d}:{})}if(i==="right"){var S={x:l+u+g,y:c+d/2,textAnchor:y,verticalAnchor:"middle"};return Sn(Sn({},S),r?{width:Math.max(r.x+r.width-S.x,0),height:d}:{})}var _=r?{width:u,height:d}:{};return i==="insideLeft"?Sn({x:l+g,y:c+d/2,textAnchor:y,verticalAnchor:"middle"},_):i==="insideRight"?Sn({x:l+u-g,y:c+d/2,textAnchor:x,verticalAnchor:"middle"},_):i==="insideTop"?Sn({x:l+u/2,y:c+f,textAnchor:"middle",verticalAnchor:v},_):i==="insideBottom"?Sn({x:l+u/2,y:c+d-f,textAnchor:"middle",verticalAnchor:m},_):i==="insideTopLeft"?Sn({x:l+g,y:c+f,textAnchor:y,verticalAnchor:v},_):i==="insideTopRight"?Sn({x:l+u-g,y:c+f,textAnchor:x,verticalAnchor:v},_):i==="insideBottomLeft"?Sn({x:l+g,y:c+d-f,textAnchor:y,verticalAnchor:m},_):i==="insideBottomRight"?Sn({x:l+u-g,y:c+d-f,textAnchor:x,verticalAnchor:m},_):Nd(i)&&(pe(i.x)||ol(i.x))&&(pe(i.y)||ol(i.y))?Sn({x:l+xr(i.x,u),y:c+xr(i.y,d),textAnchor:"end",verticalAnchor:"end"},_):Sn({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},_)},f0e=function(t){return"cx"in t&&pe(t.cx)};function Fn(e){var t=e.offset,n=t===void 0?5:t,r=r0e(e,Xye),a=Sn({offset:n},r),i=a.viewBox,o=a.position,l=a.value,c=a.children,u=a.content,d=a.className,h=d===void 0?"":d,f=a.textBreakAll;if(!i||Qe(l)&&Qe(c)&&!j.isValidElement(u)&&!qe(u))return null;if(j.isValidElement(u))return j.cloneElement(u,a);var m;if(qe(u)){if(m=j.createElement(u,a),j.isValidElement(m))return m}else m=l0e(a);var v=f0e(i),p=Fe(a,!0);if(v&&(o==="insideStart"||o==="insideEnd"||o==="end"))return u0e(a,m,p);var g=v?d0e(a):h0e(a);return $.createElement(Bl,$f({className:Ye("recharts-label",h)},p,g,{breakAll:f}),m)}Fn.displayName="Label";var C5=function(t){var n=t.cx,r=t.cy,a=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,d=t.outerRadius,h=t.x,f=t.y,m=t.top,v=t.left,p=t.width,g=t.height,x=t.clockWise,y=t.labelViewBox;if(y)return y;if(pe(p)&&pe(g)){if(pe(h)&&pe(f))return{x:h,y:f,width:p,height:g};if(pe(m)&&pe(v))return{x:m,y:v,width:p,height:g}}return pe(h)&&pe(f)?{x:h,y:f,width:0,height:0}:pe(n)&&pe(r)?{cx:n,cy:r,startAngle:i||a||0,endAngle:o||a||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:x}:t.viewBox?t.viewBox:{}},m0e=function(t,n){return t?t===!0?$.createElement(Fn,{key:"label-implicit",viewBox:n}):Tn(t)?$.createElement(Fn,{key:"label-implicit",viewBox:n,value:t}):j.isValidElement(t)?t.type===Fn?j.cloneElement(t,{key:"label-implicit",viewBox:n}):$.createElement(Fn,{key:"label-implicit",content:t,viewBox:n}):qe(t)?$.createElement(Fn,{key:"label-implicit",content:t,viewBox:n}):Nd(t)?$.createElement(Fn,$f({viewBox:n},t,{key:"label-implicit"})):null:null},p0e=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var a=t.children,i=C5(t),o=gs(a,Fn).map(function(c,u){return j.cloneElement(c,{viewBox:n||i,key:"label-".concat(u)})});if(!r)return o;var l=m0e(t.label,n||i);return[l].concat(Jye(o))};Fn.parseViewBox=C5;Fn.renderCallByParent=p0e;function g0e(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var v0e=g0e;const x0e=Ct(v0e);function Rf(e){"@babel/helpers - typeof";return Rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rf(e)}var y0e=["valueAccessor"],b0e=["data","dataKey","clockWise","id","textBreakAll"];function j0e(e){return _0e(e)||S0e(e)||N0e(e)||w0e()}function w0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N0e(e,t){if(e){if(typeof e=="string")return o1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o1(e,t)}}function S0e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _0e(e){if(Array.isArray(e))return o1(e)}function o1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pv(){return pv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pv.apply(this,arguments)}function jE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function wE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jE(Object(n),!0).forEach(function(r){C0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function C0e(e,t,n){return t=P0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P0e(e){var t=A0e(e,"string");return Rf(t)=="symbol"?t:t+""}function A0e(e,t){if(Rf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Rf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NE(e,t){if(e==null)return{};var n=k0e(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function k0e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var E0e=function(t){return Array.isArray(t.value)?x0e(t.value):t.value};function si(e){var t=e.valueAccessor,n=t===void 0?E0e:t,r=NE(e,y0e),a=r.data,i=r.dataKey,o=r.clockWise,l=r.id,c=r.textBreakAll,u=NE(r,b0e);return!a||!a.length?null:$.createElement(gt,{className:"recharts-label-list"},a.map(function(d,h){var f=Qe(i)?n(d,h):kn(d&&d.payload,i),m=Qe(l)?{}:{id:"".concat(l,"-").concat(h)};return $.createElement(Fn,pv({},Fe(d,!0),u,m,{parentViewBox:d.parentViewBox,value:f,textBreakAll:c,viewBox:Fn.parseViewBox(Qe(o)?d:wE(wE({},d),{},{clockWise:o})),key:"label-".concat(h),index:h}))}))}si.displayName="LabelList";function T0e(e,t){return e?e===!0?$.createElement(si,{key:"labelList-implicit",data:t}):$.isValidElement(e)||qe(e)?$.createElement(si,{key:"labelList-implicit",data:t,content:e}):Nd(e)?$.createElement(si,pv({data:t},e,{key:"labelList-implicit"})):null:null}function O0e(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var r=e.children,a=gs(r,si).map(function(o,l){return j.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!n)return a;var i=T0e(e.label,t);return[i].concat(j0e(a))}si.renderCallByParent=O0e;function Lf(e){"@babel/helpers - typeof";return Lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lf(e)}function l1(){return l1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l1.apply(this,arguments)}function SE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function _E(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SE(Object(n),!0).forEach(function(r){D0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function D0e(e,t,n){return t=M0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M0e(e){var t=I0e(e,"string");return Lf(t)=="symbol"?t:t+""}function I0e(e,t){if(Lf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Lf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $0e=function(t,n){var r=vr(n-t),a=Math.min(Math.abs(n-t),359.999);return r*a},kp=function(t){var n=t.cx,r=t.cy,a=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,d=c*(l?1:-1)+a,h=Math.asin(c/d)/mv,f=u?i:i+o*h,m=Ut(n,r,d,f),v=Ut(n,r,a,f),p=u?i-o*h:i,g=Ut(n,r,d*Math.cos(h*mv),p);return{center:m,circleTangency:v,lineTangency:g,theta:h}},P5=function(t){var n=t.cx,r=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=$0e(o,l),u=o+c,d=Ut(n,r,i,o),h=Ut(n,r,i,u),f="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(a>0){var m=Ut(n,r,a,o),v=Ut(n,r,a,u);f+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(m.x,",").concat(m.y," Z")}else f+="L ".concat(n,",").concat(r," Z");return f},R0e=function(t){var n=t.cx,r=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,h=vr(d-u),f=kp({cx:n,cy:r,radius:i,angle:u,sign:h,cornerRadius:o,cornerIsExternal:c}),m=f.circleTangency,v=f.lineTangency,p=f.theta,g=kp({cx:n,cy:r,radius:i,angle:d,sign:-h,cornerRadius:o,cornerIsExternal:c}),x=g.circleTangency,y=g.lineTangency,b=g.theta,N=c?Math.abs(u-d):Math.abs(u-d)-p-b;if(N<0)return l?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):P5({cx:n,cy:r,innerRadius:a,outerRadius:i,startAngle:u,endAngle:d});var w="M ".concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(N>180),",").concat(+(h<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(y.x,",").concat(y.y,`
  `);if(a>0){var S=kp({cx:n,cy:r,radius:a,angle:u,sign:h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),_=S.circleTangency,C=S.lineTangency,P=S.theta,A=kp({cx:n,cy:r,radius:a,angle:d,sign:-h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),O=A.circleTangency,E=A.lineTangency,z=A.theta,I=c?Math.abs(u-d):Math.abs(u-d)-P-z;if(I<0&&o===0)return"".concat(w,"L").concat(n,",").concat(r,"Z");w+="L".concat(E.x,",").concat(E.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(O.x,",").concat(O.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(I>180),",").concat(+(h>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(C.x,",").concat(C.y,"Z")}else w+="L".concat(n,",").concat(r,"Z");return w},L0e={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},A5=function(t){var n=_E(_E({},L0e),t),r=n.cx,a=n.cy,i=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,u=n.cornerIsExternal,d=n.startAngle,h=n.endAngle,f=n.className;if(o<i||d===h)return null;var m=Ye("recharts-sector",f),v=o-i,p=xr(l,v,0,!0),g;return p>0&&Math.abs(d-h)<360?g=R0e({cx:r,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(p,v/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:h}):g=P5({cx:r,cy:a,innerRadius:i,outerRadius:o,startAngle:d,endAngle:h}),$.createElement("path",l1({},Fe(n,!0),{className:m,d:g,role:"img"}))};function Ff(e){"@babel/helpers - typeof";return Ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ff(e)}function c1(){return c1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c1.apply(this,arguments)}function CE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function PE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CE(Object(n),!0).forEach(function(r){F0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function F0e(e,t,n){return t=B0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B0e(e){var t=z0e(e,"string");return Ff(t)=="symbol"?t:t+""}function z0e(e,t){if(Ff(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ff(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var AE={curveBasisClosed:Fae,curveBasisOpen:Bae,curveBasis:Lae,curveBumpX:Sae,curveBumpY:_ae,curveLinearClosed:zae,curveLinear:ry,curveMonotoneX:Vae,curveMonotoneY:qae,curveNatural:Uae,curveStep:Wae,curveStepAfter:Kae,curveStepBefore:Hae},Ep=function(t){return t.x===+t.x&&t.y===+t.y},oh=function(t){return t.x},lh=function(t){return t.y},V0e=function(t,n){if(qe(t))return t;var r="curve".concat(ty(t));return(r==="curveMonotone"||r==="curveBump")&&n?AE["".concat(r).concat(n==="vertical"?"Y":"X")]:AE[r]||ry},q0e=function(t){var n=t.type,r=n===void 0?"linear":n,a=t.points,i=a===void 0?[]:a,o=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,d=V0e(r,l),h=u?i.filter(function(p){return Ep(p)}):i,f;if(Array.isArray(o)){var m=u?o.filter(function(p){return Ep(p)}):o,v=h.map(function(p,g){return PE(PE({},p),{},{base:m[g]})});return l==="vertical"?f=bp().y(lh).x1(oh).x0(function(p){return p.base.x}):f=bp().x(oh).y1(lh).y0(function(p){return p.base.y}),f.defined(Ep).curve(d),f(v)}return l==="vertical"&&pe(o)?f=bp().y(lh).x1(oh).x0(o):pe(o)?f=bp().x(oh).y1(lh).y0(o):f=wL().x(oh).y(lh),f.defined(Ep).curve(d),f(h)},ru=function(t){var n=t.className,r=t.points,a=t.path,i=t.pathRef;if((!r||!r.length)&&!a)return null;var o=r&&r.length?q0e(t):a;return j.createElement("path",c1({},Fe(t,!1),Bg(t),{className:Ye("recharts-curve",n),d:o,ref:i}))},k5={exports:{}},U0e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",W0e=U0e,H0e=W0e;function E5(){}function T5(){}T5.resetWarningCache=E5;var K0e=function(){function e(r,a,i,o,l,c){if(c!==H0e){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:T5,resetWarningCache:E5};return n.PropTypes=n,n};k5.exports=K0e();var G0e=k5.exports;const St=Ct(G0e);var Y0e=Object.getOwnPropertyNames,Q0e=Object.getOwnPropertySymbols,X0e=Object.prototype.hasOwnProperty;function kE(e,t){return function(r,a,i){return e(r,a,i)&&t(r,a,i)}}function Tp(e){return function(n,r,a){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,a);var i=a.cache,o=i.get(n),l=i.get(r);if(o&&l)return o===r&&l===n;i.set(n,r),i.set(r,n);var c=e(n,r,a);return i.delete(n),i.delete(r),c}}function EE(e){return Y0e(e).concat(Q0e(e))}var J0e=Object.hasOwn||function(e,t){return X0e.call(e,t)};function rc(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var Z0e="__v",ebe="__o",tbe="_owner",TE=Object.getOwnPropertyDescriptor,OE=Object.keys;function nbe(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function rbe(e,t){return rc(e.getTime(),t.getTime())}function sbe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function abe(e,t){return e===t}function DE(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var a=new Array(r),i=e.entries(),o,l,c=0;(o=i.next())&&!o.done;){for(var u=t.entries(),d=!1,h=0;(l=u.next())&&!l.done;){if(a[h]){h++;continue}var f=o.value,m=l.value;if(n.equals(f[0],m[0],c,h,e,t,n)&&n.equals(f[1],m[1],f[0],m[0],e,t,n)){d=a[h]=!0;break}h++}if(!d)return!1;c++}return!0}var ibe=rc;function obe(e,t,n){var r=OE(e),a=r.length;if(OE(t).length!==a)return!1;for(;a-- >0;)if(!O5(e,t,n,r[a]))return!1;return!0}function ch(e,t,n){var r=EE(e),a=r.length;if(EE(t).length!==a)return!1;for(var i,o,l;a-- >0;)if(i=r[a],!O5(e,t,n,i)||(o=TE(e,i),l=TE(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function lbe(e,t){return rc(e.valueOf(),t.valueOf())}function cbe(e,t){return e.source===t.source&&e.flags===t.flags}function ME(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var a=new Array(r),i=e.values(),o,l;(o=i.next())&&!o.done;){for(var c=t.values(),u=!1,d=0;(l=c.next())&&!l.done;){if(!a[d]&&n.equals(o.value,l.value,o.value,l.value,e,t,n)){u=a[d]=!0;break}d++}if(!u)return!1}return!0}function ube(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function dbe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function O5(e,t,n,r){return(r===tbe||r===ebe||r===Z0e)&&(e.$$typeof||t.$$typeof)?!0:J0e(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}var hbe="[object Arguments]",fbe="[object Boolean]",mbe="[object Date]",pbe="[object Error]",gbe="[object Map]",vbe="[object Number]",xbe="[object Object]",ybe="[object RegExp]",bbe="[object Set]",jbe="[object String]",wbe="[object URL]",Nbe=Array.isArray,IE=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,$E=Object.assign,Sbe=Object.prototype.toString.call.bind(Object.prototype.toString);function _be(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areErrorsEqual,a=e.areFunctionsEqual,i=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,d=e.areSetsEqual,h=e.areTypedArraysEqual,f=e.areUrlsEqual;return function(v,p,g){if(v===p)return!0;if(v==null||p==null)return!1;var x=typeof v;if(x!==typeof p)return!1;if(x!=="object")return x==="number"?o(v,p,g):x==="function"?a(v,p,g):!1;var y=v.constructor;if(y!==p.constructor)return!1;if(y===Object)return l(v,p,g);if(Nbe(v))return t(v,p,g);if(IE!=null&&IE(v))return h(v,p,g);if(y===Date)return n(v,p,g);if(y===RegExp)return u(v,p,g);if(y===Map)return i(v,p,g);if(y===Set)return d(v,p,g);var b=Sbe(v);return b===mbe?n(v,p,g):b===ybe?u(v,p,g):b===gbe?i(v,p,g):b===bbe?d(v,p,g):b===xbe?typeof v.then!="function"&&typeof p.then!="function"&&l(v,p,g):b===wbe?f(v,p,g):b===pbe?r(v,p,g):b===hbe?l(v,p,g):b===fbe||b===vbe||b===jbe?c(v,p,g):!1}}function Cbe(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,a={areArraysEqual:r?ch:nbe,areDatesEqual:rbe,areErrorsEqual:sbe,areFunctionsEqual:abe,areMapsEqual:r?kE(DE,ch):DE,areNumbersEqual:ibe,areObjectsEqual:r?ch:obe,arePrimitiveWrappersEqual:lbe,areRegExpsEqual:cbe,areSetsEqual:r?kE(ME,ch):ME,areTypedArraysEqual:r?ch:ube,areUrlsEqual:dbe};if(n&&(a=$E({},a,n(a))),t){var i=Tp(a.areArraysEqual),o=Tp(a.areMapsEqual),l=Tp(a.areObjectsEqual),c=Tp(a.areSetsEqual);a=$E({},a,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return a}function Pbe(e){return function(t,n,r,a,i,o,l){return e(t,n,l)}}function Abe(e){var t=e.circular,n=e.comparator,r=e.createState,a=e.equals,i=e.strict;if(r)return function(c,u){var d=r(),h=d.cache,f=h===void 0?t?new WeakMap:void 0:h,m=d.meta;return n(c,u,{cache:f,equals:a,meta:m,strict:i})};if(t)return function(c,u){return n(c,u,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var o={cache:void 0,equals:a,meta:void 0,strict:i};return function(c,u){return n(c,u,o)}}var kbe=Fo();Fo({strict:!0});Fo({circular:!0});Fo({circular:!0,strict:!0});Fo({createInternalComparator:function(){return rc}});Fo({strict:!0,createInternalComparator:function(){return rc}});Fo({circular:!0,createInternalComparator:function(){return rc}});Fo({circular:!0,createInternalComparator:function(){return rc},strict:!0});function Fo(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,r=e.createInternalComparator,a=e.createState,i=e.strict,o=i===void 0?!1:i,l=Cbe(e),c=_be(l),u=r?r(c):Pbe(c);return Abe({circular:n,comparator:c,createState:a,equals:u,strict:o})}function Ebe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function RE(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function a(i){n<0&&(n=i),i-n>t?(e(i),n=-1):Ebe(a)};requestAnimationFrame(r)}function u1(e){"@babel/helpers - typeof";return u1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u1(e)}function Tbe(e){return Ibe(e)||Mbe(e)||Dbe(e)||Obe()}function Obe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dbe(e,t){if(e){if(typeof e=="string")return LE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LE(e,t)}}function LE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mbe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ibe(e){if(Array.isArray(e))return e}function $be(){var e={},t=function(){return null},n=!1,r=function a(i){if(!n){if(Array.isArray(i)){if(!i.length)return;var o=i,l=Tbe(o),c=l[0],u=l.slice(1);if(typeof c=="number"){RE(a.bind(null,u),c);return}a(c),RE(a.bind(null,u));return}u1(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){n=!0},start:function(i){n=!1,r(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function Bf(e){"@babel/helpers - typeof";return Bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bf(e)}function FE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function BE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FE(Object(n),!0).forEach(function(r){D5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function D5(e,t,n){return t=Rbe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rbe(e){var t=Lbe(e,"string");return Bf(t)==="symbol"?t:String(t)}function Lbe(e,t){if(Bf(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Bf(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Fbe=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(r,a){return r.filter(function(i){return a.includes(i)})})},Bbe=function(t){return t},zbe=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Rh=function(t,n){return Object.keys(n).reduce(function(r,a){return BE(BE({},r),{},D5({},a,t(a,n[a])))},{})},zE=function(t,n,r){return t.map(function(a){return"".concat(zbe(a)," ").concat(n,"ms ").concat(r)}).join(",")};function Vbe(e,t){return Wbe(e)||Ube(e,t)||M5(e,t)||qbe()}function qbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ube(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Wbe(e){if(Array.isArray(e))return e}function Hbe(e){return Ybe(e)||Gbe(e)||M5(e)||Kbe()}function Kbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function M5(e,t){if(e){if(typeof e=="string")return d1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d1(e,t)}}function Gbe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ybe(e){if(Array.isArray(e))return d1(e)}function d1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var gv=1e-4,I5=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},$5=function(t,n){return t.map(function(r,a){return r*Math.pow(n,a)}).reduce(function(r,a){return r+a})},VE=function(t,n){return function(r){var a=I5(t,n);return $5(a,r)}},Qbe=function(t,n){return function(r){var a=I5(t,n),i=[].concat(Hbe(a.map(function(o,l){return o*l}).slice(1)),[0]);return $5(i,r)}},qE=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":a=0,i=0,o=1,l=1;break;case"ease":a=.25,i=.1,o=.25,l=1;break;case"ease-in":a=.42,i=0,o=1,l=1;break;case"ease-out":a=.42,i=0,o=.58,l=1;break;case"ease-in-out":a=0,i=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),d=Vbe(u,4);a=d[0],i=d[1],o=d[2],l=d[3]}}}var h=VE(a,o),f=VE(i,l),m=Qbe(a,o),v=function(x){return x>1?1:x<0?0:x},p=function(x){for(var y=x>1?1:x,b=y,N=0;N<8;++N){var w=h(b)-y,S=m(b);if(Math.abs(w-y)<gv||S<gv)return f(b);b=v(b-w/S)}return f(b)};return p.isStepper=!1,p},Xbe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,r=n===void 0?100:n,a=t.damping,i=a===void 0?8:a,o=t.dt,l=o===void 0?17:o,c=function(d,h,f){var m=-(d-h)*r,v=f*i,p=f+(m-v)*l/1e3,g=f*l/1e3+d;return Math.abs(g-h)<gv&&Math.abs(p)<gv?[h,0]:[g,p]};return c.isStepper=!0,c.dt=l,c},Jbe=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return qE(a);case"spring":return Xbe();default:if(a.split("(")[0]==="cubic-bezier")return qE(a)}return typeof a=="function"?a:null};function zf(e){"@babel/helpers - typeof";return zf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zf(e)}function UE(e){return tje(e)||eje(e)||R5(e)||Zbe()}function Zbe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eje(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function tje(e){if(Array.isArray(e))return f1(e)}function WE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Un(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WE(Object(n),!0).forEach(function(r){h1(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function h1(e,t,n){return t=nje(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nje(e){var t=rje(e,"string");return zf(t)==="symbol"?t:String(t)}function rje(e,t){if(zf(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(zf(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sje(e,t){return oje(e)||ije(e,t)||R5(e,t)||aje()}function aje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R5(e,t){if(e){if(typeof e=="string")return f1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f1(e,t)}}function f1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ije(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function oje(e){if(Array.isArray(e))return e}var vv=function(t,n,r){return t+(n-t)*r},m1=function(t){var n=t.from,r=t.to;return n!==r},lje=function e(t,n,r){var a=Rh(function(i,o){if(m1(o)){var l=t(o.from,o.to,o.velocity),c=sje(l,2),u=c[0],d=c[1];return Un(Un({},o),{},{from:u,velocity:d})}return o},n);return r<1?Rh(function(i,o){return m1(o)?Un(Un({},o),{},{velocity:vv(o.velocity,a[i].velocity,r),from:vv(o.from,a[i].from,r)}):o},n):e(t,a,r-1)};const cje=function(e,t,n,r,a){var i=Fbe(e,t),o=i.reduce(function(g,x){return Un(Un({},g),{},h1({},x,[e[x],t[x]]))},{}),l=i.reduce(function(g,x){return Un(Un({},g),{},h1({},x,{from:e[x],velocity:0,to:t[x]}))},{}),c=-1,u,d,h=function(){return null},f=function(){return Rh(function(x,y){return y.from},l)},m=function(){return!Object.values(l).filter(m1).length},v=function(x){u||(u=x);var y=x-u,b=y/n.dt;l=lje(n,l,b),a(Un(Un(Un({},e),t),f())),u=x,m()||(c=requestAnimationFrame(h))},p=function(x){d||(d=x);var y=(x-d)/r,b=Rh(function(w,S){return vv.apply(void 0,UE(S).concat([n(y)]))},o);if(a(Un(Un(Un({},e),t),b)),y<1)c=requestAnimationFrame(h);else{var N=Rh(function(w,S){return vv.apply(void 0,UE(S).concat([n(1)]))},o);a(Un(Un(Un({},e),t),N))}};return h=n.isStepper?v:p,function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(c)}}};function qu(e){"@babel/helpers - typeof";return qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qu(e)}var uje=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function dje(e,t){if(e==null)return{};var n=hje(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function hje(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function fb(e){return gje(e)||pje(e)||mje(e)||fje()}function fje(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mje(e,t){if(e){if(typeof e=="string")return p1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p1(e,t)}}function pje(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function gje(e){if(Array.isArray(e))return p1(e)}function p1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function HE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ks(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?HE(Object(n),!0).forEach(function(r){bh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bh(e,t,n){return t=L5(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vje(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xje(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,L5(r.key),r)}}function yje(e,t,n){return t&&xje(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function L5(e){var t=bje(e,"string");return qu(t)==="symbol"?t:String(t)}function bje(e,t){if(qu(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(qu(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jje(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g1(e,t)}function g1(e,t){return g1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},g1(e,t)}function wje(e){var t=Nje();return function(){var r=xv(e),a;if(t){var i=xv(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return v1(this,a)}}function v1(e,t){if(t&&(qu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return x1(e)}function x1(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nje(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function xv(e){return xv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xv(e)}var Ta=function(e){jje(n,e);var t=wje(n);function n(r,a){var i;vje(this,n),i=t.call(this,r,a);var o=i.props,l=o.isActive,c=o.attributeName,u=o.from,d=o.to,h=o.steps,f=o.children,m=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(x1(i)),i.changeStyle=i.changeStyle.bind(x1(i)),!l||m<=0)return i.state={style:{}},typeof f=="function"&&(i.state={style:d}),v1(i);if(h&&h.length)i.state={style:h[0].style};else if(u){if(typeof f=="function")return i.state={style:u},v1(i);i.state={style:c?bh({},c,u):u}}else i.state={style:{}};return i}return yje(n,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,u=i.shouldReAnimate,d=i.to,h=i.from,f=this.state.style;if(l){if(!o){var m={style:c?bh({},c,d):d};this.state&&f&&(c&&f[c]!==d||!c&&f!==d)&&this.setState(m);return}if(!(kbe(a.to,d)&&a.canBegin&&a.isActive)){var v=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=v||u?h:a.to;if(this.state&&f){var g={style:c?bh({},c,p):p};(c&&f[c]!==p||!c&&f!==p)&&this.setState(g)}this.runAnimation(ks(ks({},this.props),{},{from:p,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,l=a.to,c=a.duration,u=a.easing,d=a.begin,h=a.onAnimationEnd,f=a.onAnimationStart,m=cje(o,l,Jbe(u),c,this.changeStyle),v=function(){i.stopJSAnimation=m()};this.manager.start([f,d,v,c,h])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,l=a.begin,c=a.onAnimationStart,u=o[0],d=u.style,h=u.duration,f=h===void 0?0:h,m=function(p,g,x){if(x===0)return p;var y=g.duration,b=g.easing,N=b===void 0?"ease":b,w=g.style,S=g.properties,_=g.onAnimationEnd,C=x>0?o[x-1]:g,P=S||Object.keys(w);if(typeof N=="function"||N==="spring")return[].concat(fb(p),[i.runJSAnimation.bind(i,{from:C.style,to:w,duration:y,easing:N}),y]);var A=zE(P,y,N),O=ks(ks(ks({},C.style),w),{},{transition:A});return[].concat(fb(p),[O,y,_]).filter(Bbe)};return this.manager.start([c].concat(fb(o.reduce(m,[d,Math.max(f,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=$be());var i=a.begin,o=a.duration,l=a.attributeName,c=a.to,u=a.easing,d=a.onAnimationStart,h=a.onAnimationEnd,f=a.steps,m=a.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof u=="function"||typeof m=="function"||u==="spring"){this.runJSAnimation(a);return}if(f.length>1){this.runStepAnimation(a);return}var p=l?bh({},l,c):c,g=zE(Object.keys(p),o,u);v.start([d,i,ks(ks({},p),{},{transition:g}),o,h])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=dje(a,uje),u=j.Children.count(i),d=this.state.style;if(typeof i=="function")return i(d);if(!l||u===0||o<=0)return i;var h=function(m){var v=m.props,p=v.style,g=p===void 0?{}:p,x=v.className,y=j.cloneElement(m,ks(ks({},c),{},{style:ks(ks({},g),d),className:x}));return y};return u===1?h(j.Children.only(i)):$.createElement("div",null,j.Children.map(i,function(f){return h(f)}))}}]),n}(j.PureComponent);Ta.displayName="Animate";Ta.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Ta.propTypes={from:St.oneOfType([St.object,St.string]),to:St.oneOfType([St.object,St.string]),attributeName:St.string,duration:St.number,begin:St.number,easing:St.oneOfType([St.string,St.func]),steps:St.arrayOf(St.shape({duration:St.number.isRequired,style:St.object.isRequired,easing:St.oneOfType([St.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),St.func]),properties:St.arrayOf("string"),onAnimationEnd:St.func})),children:St.oneOfType([St.node,St.func]),isActive:St.bool,canBegin:St.bool,onAnimationEnd:St.func,shouldReAnimate:St.bool,onAnimationStart:St.func,onAnimationReStart:St.func};function Vf(e){"@babel/helpers - typeof";return Vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vf(e)}function yv(){return yv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yv.apply(this,arguments)}function Sje(e,t){return Aje(e)||Pje(e,t)||Cje(e,t)||_je()}function _je(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cje(e,t){if(e){if(typeof e=="string")return KE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return KE(e,t)}}function KE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pje(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Aje(e){if(Array.isArray(e))return e}function GE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function YE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GE(Object(n),!0).forEach(function(r){kje(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kje(e,t,n){return t=Eje(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Eje(e){var t=Tje(e,"string");return Vf(t)=="symbol"?t:t+""}function Tje(e,t){if(Vf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Vf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var QE=function(t,n,r,a,i){var o=Math.min(Math.abs(r)/2,Math.abs(a)/2),l=a>=0?1:-1,c=r>=0?1:-1,u=a>=0&&r>=0||a<0&&r<0?1:0,d;if(o>0&&i instanceof Array){for(var h=[0,0,0,0],f=0,m=4;f<m;f++)h[f]=i[f]>o?o:i[f];d="M".concat(t,",").concat(n+l*h[0]),h[0]>0&&(d+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(u,",").concat(t+c*h[0],",").concat(n)),d+="L ".concat(t+r-c*h[1],",").concat(n),h[1]>0&&(d+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(u,`,
        `).concat(t+r,",").concat(n+l*h[1])),d+="L ".concat(t+r,",").concat(n+a-l*h[2]),h[2]>0&&(d+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(u,`,
        `).concat(t+r-c*h[2],",").concat(n+a)),d+="L ".concat(t+c*h[3],",").concat(n+a),h[3]>0&&(d+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(n+a-l*h[3])),d+="Z"}else if(o>0&&i===+i&&i>0){var v=Math.min(o,i);d="M ".concat(t,",").concat(n+l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t+c*v,",").concat(n,`
            L `).concat(t+r-c*v,",").concat(n,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t+r,",").concat(n+l*v,`
            L `).concat(t+r,",").concat(n+a-l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t+r-c*v,",").concat(n+a,`
            L `).concat(t+c*v,",").concat(n+a,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t,",").concat(n+a-l*v," Z")}else d="M ".concat(t,",").concat(n," h ").concat(r," v ").concat(a," h ").concat(-r," Z");return d},Oje=function(t,n){if(!t||!n)return!1;var r=t.x,a=t.y,i=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(i,i+l),d=Math.max(i,i+l),h=Math.min(o,o+c),f=Math.max(o,o+c);return r>=u&&r<=d&&a>=h&&a<=f}return!1},Dje={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},U_=function(t){var n=YE(YE({},Dje),t),r=j.useRef(),a=j.useState(-1),i=Sje(a,2),o=i[0],l=i[1];j.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var N=r.current.getTotalLength();N&&l(N)}catch{}},[]);var c=n.x,u=n.y,d=n.width,h=n.height,f=n.radius,m=n.className,v=n.animationEasing,p=n.animationDuration,g=n.animationBegin,x=n.isAnimationActive,y=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||h!==+h||d===0||h===0)return null;var b=Ye("recharts-rectangle",m);return y?$.createElement(Ta,{canBegin:o>0,from:{width:d,height:h,x:c,y:u},to:{width:d,height:h,x:c,y:u},duration:p,animationEasing:v,isActive:y},function(N){var w=N.width,S=N.height,_=N.x,C=N.y;return $.createElement(Ta,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:p,isActive:x,easing:v},$.createElement("path",yv({},Fe(n,!0),{className:b,d:QE(_,C,w,S,f),ref:r})))}):$.createElement("path",yv({},Fe(n,!0),{className:b,d:QE(c,u,d,h,f)}))},Mje=["points","className","baseLinePoints","connectNulls"];function Fc(){return Fc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fc.apply(this,arguments)}function Ije(e,t){if(e==null)return{};var n=$je(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function $je(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function XE(e){return Bje(e)||Fje(e)||Lje(e)||Rje()}function Rje(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lje(e,t){if(e){if(typeof e=="string")return y1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y1(e,t)}}function Fje(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Bje(e){if(Array.isArray(e))return y1(e)}function y1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var JE=function(t){return t&&t.x===+t.x&&t.y===+t.y},zje=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return t.forEach(function(r){JE(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),JE(t[0])&&n[n.length-1].push(t[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},Lh=function(t,n){var r=zje(t);n&&(r=[r.reduce(function(i,o){return[].concat(XE(i),XE(o))},[])]);var a=r.map(function(i){return i.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return r.length===1?"".concat(a,"Z"):a},Vje=function(t,n,r){var a=Lh(t,r);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(Lh(n.reverse(),r).slice(1))},qje=function(t){var n=t.points,r=t.className,a=t.baseLinePoints,i=t.connectNulls,o=Ije(t,Mje);if(!n||!n.length)return null;var l=Ye("recharts-polygon",r);if(a&&a.length){var c=o.stroke&&o.stroke!=="none",u=Vje(n,a,i);return $.createElement("g",{className:l},$.createElement("path",Fc({},Fe(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),c?$.createElement("path",Fc({},Fe(o,!0),{fill:"none",d:Lh(n,i)})):null,c?$.createElement("path",Fc({},Fe(o,!0),{fill:"none",d:Lh(a,i)})):null)}var d=Lh(n,i);return $.createElement("path",Fc({},Fe(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",className:l,d}))};function b1(){return b1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b1.apply(this,arguments)}var yy=function(t){var n=t.cx,r=t.cy,a=t.r,i=t.className,o=Ye("recharts-dot",i);return n===+n&&r===+r&&a===+a?j.createElement("circle",b1({},Fe(t,!1),Bg(t),{className:o,cx:n,cy:r,r:a})):null};function qf(e){"@babel/helpers - typeof";return qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qf(e)}var Uje=["x","y","top","left","width","height","className"];function j1(){return j1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j1.apply(this,arguments)}function ZE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Wje(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZE(Object(n),!0).forEach(function(r){Hje(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Hje(e,t,n){return t=Kje(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kje(e){var t=Gje(e,"string");return qf(t)=="symbol"?t:t+""}function Gje(e,t){if(qf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(qf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yje(e,t){if(e==null)return{};var n=Qje(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Qje(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Xje=function(t,n,r,a,i,o){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(o,",").concat(n,"h").concat(r)},Jje=function(t){var n=t.x,r=n===void 0?0:n,a=t.y,i=a===void 0?0:a,o=t.top,l=o===void 0?0:o,c=t.left,u=c===void 0?0:c,d=t.width,h=d===void 0?0:d,f=t.height,m=f===void 0?0:f,v=t.className,p=Yje(t,Uje),g=Wje({x:r,y:i,top:l,left:u,width:h,height:m},p);return!pe(r)||!pe(i)||!pe(h)||!pe(m)||!pe(l)||!pe(u)?null:$.createElement("path",j1({},Fe(g,!0),{className:Ye("recharts-cross",v),d:Xje(r,i,h,m,l,u)}))},Zje=my,ewe=QF,twe=$a;function nwe(e,t){return e&&e.length?Zje(e,twe(t),ewe):void 0}var rwe=nwe;const swe=Ct(rwe);var awe=my,iwe=$a,owe=XF;function lwe(e,t){return e&&e.length?awe(e,iwe(t),owe):void 0}var cwe=lwe;const uwe=Ct(cwe);var dwe=["cx","cy","angle","ticks","axisLine"],hwe=["ticks","tick","angle","tickFormatter","stroke"];function Uu(e){"@babel/helpers - typeof";return Uu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uu(e)}function Fh(){return Fh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fh.apply(this,arguments)}function eT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ho(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eT(Object(n),!0).forEach(function(r){by(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function tT(e,t){if(e==null)return{};var n=fwe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function fwe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function mwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,B5(r.key),r)}}function pwe(e,t,n){return t&&nT(e.prototype,t),n&&nT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function gwe(e,t,n){return t=bv(t),vwe(e,F5()?Reflect.construct(t,n||[],bv(e).constructor):t.apply(e,n))}function vwe(e,t){if(t&&(Uu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xwe(e)}function xwe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(F5=function(){return!!e})()}function bv(e){return bv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},bv(e)}function ywe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w1(e,t)}function w1(e,t){return w1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},w1(e,t)}function by(e,t,n){return t=B5(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B5(e){var t=bwe(e,"string");return Uu(t)=="symbol"?t:t+""}function bwe(e,t){if(Uu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Uu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jy=function(e){function t(){return mwe(this,t),gwe(this,t,arguments)}return ywe(t,e),pwe(t,[{key:"getTickValueCoord",value:function(r){var a=r.coordinate,i=this.props,o=i.angle,l=i.cx,c=i.cy;return Ut(l,c,a,o)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,a;switch(r){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var r=this.props,a=r.cx,i=r.cy,o=r.angle,l=r.ticks,c=swe(l,function(d){return d.coordinate||0}),u=uwe(l,function(d){return d.coordinate||0});return{cx:a,cy:i,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,a=r.cx,i=r.cy,o=r.angle,l=r.ticks,c=r.axisLine,u=tT(r,dwe),d=l.reduce(function(v,p){return[Math.min(v[0],p.coordinate),Math.max(v[1],p.coordinate)]},[1/0,-1/0]),h=Ut(a,i,d[0],o),f=Ut(a,i,d[1],o),m=Ho(Ho(Ho({},Fe(u,!1)),{},{fill:"none"},Fe(c,!1)),{},{x1:h.x,y1:h.y,x2:f.x,y2:f.y});return $.createElement("line",Fh({className:"recharts-polar-radius-axis-line"},m))}},{key:"renderTicks",value:function(){var r=this,a=this.props,i=a.ticks,o=a.tick,l=a.angle,c=a.tickFormatter,u=a.stroke,d=tT(a,hwe),h=this.getTickTextAnchor(),f=Fe(d,!1),m=Fe(o,!1),v=i.map(function(p,g){var x=r.getTickValueCoord(p),y=Ho(Ho(Ho(Ho({textAnchor:h,transform:"rotate(".concat(90-l,", ").concat(x.x,", ").concat(x.y,")")},f),{},{stroke:"none",fill:u},m),{},{index:g},x),{},{payload:p});return $.createElement(gt,Fh({className:Ye("recharts-polar-radius-axis-tick",_5(o)),key:"tick-".concat(p.coordinate)},Fl(r.props,p,g)),t.renderTickItem(o,y,c?c(p.value,g):p.value))});return $.createElement(gt,{className:"recharts-polar-radius-axis-ticks"},v)}},{key:"render",value:function(){var r=this.props,a=r.ticks,i=r.axisLine,o=r.tick;return!a||!a.length?null:$.createElement(gt,{className:Ye("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),Fn.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,a,i){var o;return $.isValidElement(r)?o=$.cloneElement(r,a):qe(r)?o=r(a):o=$.createElement(Bl,Fh({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])}(j.PureComponent);by(jy,"displayName","PolarRadiusAxis");by(jy,"axisType","radiusAxis");by(jy,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Wu(e){"@babel/helpers - typeof";return Wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wu(e)}function nl(){return nl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nl.apply(this,arguments)}function rT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ko(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rT(Object(n),!0).forEach(function(r){wy(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function jwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,V5(r.key),r)}}function wwe(e,t,n){return t&&sT(e.prototype,t),n&&sT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nwe(e,t,n){return t=jv(t),Swe(e,z5()?Reflect.construct(t,n||[],jv(e).constructor):t.apply(e,n))}function Swe(e,t){if(t&&(Wu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _we(e)}function _we(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(z5=function(){return!!e})()}function jv(e){return jv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jv(e)}function Cwe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N1(e,t)}function N1(e,t){return N1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},N1(e,t)}function wy(e,t,n){return t=V5(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V5(e){var t=Pwe(e,"string");return Wu(t)=="symbol"?t:t+""}function Pwe(e,t){if(Wu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Wu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Awe=Math.PI/180,aT=1e-5,Ny=function(e){function t(){return jwe(this,t),Nwe(this,t,arguments)}return Cwe(t,e),wwe(t,[{key:"getTickLineCoord",value:function(r){var a=this.props,i=a.cx,o=a.cy,l=a.radius,c=a.orientation,u=a.tickSize,d=u||8,h=Ut(i,o,l,r.coordinate),f=Ut(i,o,l+(c==="inner"?-1:1)*d,r.coordinate);return{x1:h.x,y1:h.y,x2:f.x,y2:f.y}}},{key:"getTickTextAnchor",value:function(r){var a=this.props.orientation,i=Math.cos(-r.coordinate*Awe),o;return i>aT?o=a==="outer"?"start":"end":i<-aT?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var r=this.props,a=r.cx,i=r.cy,o=r.radius,l=r.axisLine,c=r.axisLineType,u=Ko(Ko({},Fe(this.props,!1)),{},{fill:"none"},Fe(l,!1));if(c==="circle")return $.createElement(yy,nl({className:"recharts-polar-angle-axis-line"},u,{cx:a,cy:i,r:o}));var d=this.props.ticks,h=d.map(function(f){return Ut(a,i,o,f.coordinate)});return $.createElement(qje,nl({className:"recharts-polar-angle-axis-line"},u,{points:h}))}},{key:"renderTicks",value:function(){var r=this,a=this.props,i=a.ticks,o=a.tick,l=a.tickLine,c=a.tickFormatter,u=a.stroke,d=Fe(this.props,!1),h=Fe(o,!1),f=Ko(Ko({},d),{},{fill:"none"},Fe(l,!1)),m=i.map(function(v,p){var g=r.getTickLineCoord(v),x=r.getTickTextAnchor(v),y=Ko(Ko(Ko({textAnchor:x},d),{},{stroke:"none",fill:u},h),{},{index:p,payload:v,x:g.x2,y:g.y2});return $.createElement(gt,nl({className:Ye("recharts-polar-angle-axis-tick",_5(o)),key:"tick-".concat(v.coordinate)},Fl(r.props,v,p)),l&&$.createElement("line",nl({className:"recharts-polar-angle-axis-tick-line"},f,g)),o&&t.renderTickItem(o,y,c?c(v.value,p):v.value))});return $.createElement(gt,{className:"recharts-polar-angle-axis-ticks"},m)}},{key:"render",value:function(){var r=this.props,a=r.ticks,i=r.radius,o=r.axisLine;return i<=0||!a||!a.length?null:$.createElement(gt,{className:Ye("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,a,i){var o;return $.isValidElement(r)?o=$.cloneElement(r,a):qe(r)?o=r(a):o=$.createElement(Bl,nl({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])}(j.PureComponent);wy(Ny,"displayName","PolarAngleAxis");wy(Ny,"axisType","angleAxis");wy(Ny,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var kwe=HL,Ewe=kwe(Object.getPrototypeOf,Object),Twe=Ewe,Owe=xi,Dwe=Twe,Mwe=yi,Iwe="[object Object]",$we=Function.prototype,Rwe=Object.prototype,q5=$we.toString,Lwe=Rwe.hasOwnProperty,Fwe=q5.call(Object);function Bwe(e){if(!Mwe(e)||Owe(e)!=Iwe)return!1;var t=Dwe(e);if(t===null)return!0;var n=Lwe.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&q5.call(n)==Fwe}var zwe=Bwe;const Vwe=Ct(zwe);var qwe=xi,Uwe=yi,Wwe="[object Boolean]";function Hwe(e){return e===!0||e===!1||Uwe(e)&&qwe(e)==Wwe}var Kwe=Hwe;const Gwe=Ct(Kwe);function Uf(e){"@babel/helpers - typeof";return Uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uf(e)}function wv(){return wv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wv.apply(this,arguments)}function Ywe(e,t){return Zwe(e)||Jwe(e,t)||Xwe(e,t)||Qwe()}function Qwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xwe(e,t){if(e){if(typeof e=="string")return iT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iT(e,t)}}function iT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jwe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Zwe(e){if(Array.isArray(e))return e}function oT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function lT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oT(Object(n),!0).forEach(function(r){e1e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function e1e(e,t,n){return t=t1e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t1e(e){var t=n1e(e,"string");return Uf(t)=="symbol"?t:t+""}function n1e(e,t){if(Uf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Uf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cT=function(t,n,r,a,i){var o=r-a,l;return l="M ".concat(t,",").concat(n),l+="L ".concat(t+r,",").concat(n),l+="L ".concat(t+r-o/2,",").concat(n+i),l+="L ".concat(t+r-o/2-a,",").concat(n+i),l+="L ".concat(t,",").concat(n," Z"),l},r1e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},s1e=function(t){var n=lT(lT({},r1e),t),r=j.useRef(),a=j.useState(-1),i=Ywe(a,2),o=i[0],l=i[1];j.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var b=r.current.getTotalLength();b&&l(b)}catch{}},[]);var c=n.x,u=n.y,d=n.upperWidth,h=n.lowerWidth,f=n.height,m=n.className,v=n.animationEasing,p=n.animationDuration,g=n.animationBegin,x=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||h!==+h||f!==+f||d===0&&h===0||f===0)return null;var y=Ye("recharts-trapezoid",m);return x?$.createElement(Ta,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:f,x:c,y:u},to:{upperWidth:d,lowerWidth:h,height:f,x:c,y:u},duration:p,animationEasing:v,isActive:x},function(b){var N=b.upperWidth,w=b.lowerWidth,S=b.height,_=b.x,C=b.y;return $.createElement(Ta,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:p,easing:v},$.createElement("path",wv({},Fe(n,!0),{className:y,d:cT(_,C,N,w,S),ref:r})))}):$.createElement("g",null,$.createElement("path",wv({},Fe(n,!0),{className:y,d:cT(c,u,d,h,f)})))},a1e=["option","shapeType","propTransformer","activeClassName","isActive"];function Wf(e){"@babel/helpers - typeof";return Wf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wf(e)}function i1e(e,t){if(e==null)return{};var n=o1e(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function o1e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function uT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Nv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uT(Object(n),!0).forEach(function(r){l1e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function l1e(e,t,n){return t=c1e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c1e(e){var t=u1e(e,"string");return Wf(t)=="symbol"?t:t+""}function u1e(e,t){if(Wf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Wf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function d1e(e,t){return Nv(Nv({},t),e)}function h1e(e,t){return e==="symbols"}function dT(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return $.createElement(U_,n);case"trapezoid":return $.createElement(s1e,n);case"sector":return $.createElement(A5,n);case"symbols":if(h1e(t))return $.createElement(c_,n);break;default:return null}}function f1e(e){return j.isValidElement(e)?e.props:e}function U5(e){var t=e.option,n=e.shapeType,r=e.propTransformer,a=r===void 0?d1e:r,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=i1e(e,a1e),u;if(j.isValidElement(t))u=j.cloneElement(t,Nv(Nv({},c),f1e(t)));else if(qe(t))u=t(c);else if(Vwe(t)&&!Gwe(t)){var d=a(t,c);u=$.createElement(dT,{shapeType:n,elementProps:d})}else{var h=c;u=$.createElement(dT,{shapeType:n,elementProps:h})}return l?$.createElement(gt,{className:o},u):u}function Sy(e,t){return t!=null&&"trapezoids"in e.props}function _y(e,t){return t!=null&&"sectors"in e.props}function Hf(e,t){return t!=null&&"points"in e.props}function m1e(e,t){var n,r,a=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,i=e.y===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.y)||e.y===t.y;return a&&i}function p1e(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function g1e(e,t){var n=e.x===t.x,r=e.y===t.y,a=e.z===t.z;return n&&r&&a}function v1e(e,t){var n;return Sy(e,t)?n=m1e:_y(e,t)?n=p1e:Hf(e,t)&&(n=g1e),n}function x1e(e,t){var n;return Sy(e,t)?n="trapezoids":_y(e,t)?n="sectors":Hf(e,t)&&(n="points"),n}function y1e(e,t){if(Sy(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(_y(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return Hf(e,t)?t.payload:{}}function b1e(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,a=x1e(n,t),i=y1e(n,t),o=r.filter(function(c,u){var d=zu(i,c),h=n.props[a].filter(function(v){var p=v1e(n,t);return p(v,t)}),f=n.props[a].indexOf(h[h.length-1]),m=u===f;return d&&m}),l=r.indexOf(o[o.length-1]);return l}var Zp;function Hu(e){"@babel/helpers - typeof";return Hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hu(e)}function Bc(){return Bc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bc.apply(this,arguments)}function hT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Bt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hT(Object(n),!0).forEach(function(r){ds(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function j1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,H5(r.key),r)}}function w1e(e,t,n){return t&&fT(e.prototype,t),n&&fT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function N1e(e,t,n){return t=Sv(t),S1e(e,W5()?Reflect.construct(t,n||[],Sv(e).constructor):t.apply(e,n))}function S1e(e,t){if(t&&(Hu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _1e(e)}function _1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(W5=function(){return!!e})()}function Sv(e){return Sv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Sv(e)}function C1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S1(e,t)}function S1(e,t){return S1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},S1(e,t)}function ds(e,t,n){return t=H5(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H5(e){var t=P1e(e,"string");return Hu(t)=="symbol"?t:t+""}function P1e(e,t){if(Hu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Hu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Zs=function(e){function t(n){var r;return j1e(this,t),r=N1e(this,t,[n]),ds(r,"pieRef",null),ds(r,"sectorRefs",[]),ds(r,"id",Ad("recharts-pie-")),ds(r,"handleAnimationEnd",function(){var a=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),qe(a)&&a()}),ds(r,"handleAnimationStart",function(){var a=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),qe(a)&&a()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return C1e(t,e),w1e(t,[{key:"isActiveIndex",value:function(r){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(r)!==-1:r===a}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,l=i.labelLine,c=i.dataKey,u=i.valueKey,d=Fe(this.props,!1),h=Fe(o,!1),f=Fe(l,!1),m=o&&o.offsetRadius||20,v=r.map(function(p,g){var x=(p.startAngle+p.endAngle)/2,y=Ut(p.cx,p.cy,p.outerRadius+m,x),b=Bt(Bt(Bt(Bt({},d),p),{},{stroke:"none"},h),{},{index:g,textAnchor:t.getTextAnchor(y.x,p.cx)},y),N=Bt(Bt(Bt(Bt({},d),p),{},{fill:"none",stroke:p.fill},f),{},{index:g,points:[Ut(p.cx,p.cy,p.outerRadius,x),y]}),w=c;return Qe(c)&&Qe(u)?w="value":Qe(c)&&(w=u),$.createElement(gt,{key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(g)},l&&t.renderLabelLineItem(l,N,"line"),t.renderLabelItem(o,b,kn(p,w)))});return $.createElement(gt,{className:"recharts-pie-labels"},v)}},{key:"renderSectorsStatically",value:function(r){var a=this,i=this.props,o=i.activeShape,l=i.blendStroke,c=i.inactiveShape;return r.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&r.length!==1)return null;var h=a.isActiveIndex(d),f=c&&a.hasActiveIndex()?c:null,m=h?o:f,v=Bt(Bt({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return $.createElement(gt,Bc({ref:function(g){g&&!a.sectorRefs.includes(g)&&a.sectorRefs.push(g)},tabIndex:-1,className:"recharts-pie-sector"},Fl(a.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),$.createElement(U5,Bc({option:m,isActive:h,shapeType:"sector"},v)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,a=this.props,i=a.sectors,o=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,u=a.animationEasing,d=a.animationId,h=this.state,f=h.prevSectors,m=h.prevIsAnimationActive;return $.createElement(Ta,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(m),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(v){var p=v.t,g=[],x=i&&i[0],y=x.startAngle;return i.forEach(function(b,N){var w=f&&f[N],S=N>0?es(b,"paddingAngle",0):0;if(w){var _=Dr(w.endAngle-w.startAngle,b.endAngle-b.startAngle),C=Bt(Bt({},b),{},{startAngle:y+S,endAngle:y+_(p)+S});g.push(C),y=C.endAngle}else{var P=b.endAngle,A=b.startAngle,O=Dr(0,P-A),E=O(p),z=Bt(Bt({},b),{},{startAngle:y+S,endAngle:y+E+S});g.push(z),y=z.endAngle}}),$.createElement(gt,null,r.renderSectorsStatically(g))})}},{key:"attachKeyboardHandlers",value:function(r){var a=this;r.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,a=r.sectors,i=r.isAnimationActive,o=this.state.prevSectors;return i&&a&&a.length&&(!o||!zu(o,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,a=this.props,i=a.hide,o=a.sectors,l=a.className,c=a.label,u=a.cx,d=a.cy,h=a.innerRadius,f=a.outerRadius,m=a.isAnimationActive,v=this.state.isAnimationFinished;if(i||!o||!o.length||!pe(u)||!pe(d)||!pe(h)||!pe(f))return null;var p=Ye("recharts-pie",l);return $.createElement(gt,{tabIndex:this.props.rootTabIndex,className:p,ref:function(x){r.pieRef=x}},this.renderSectors(),c&&this.renderLabels(o),Fn.renderCallByParent(this.props,null,!1),(!m||v)&&si.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,a){return a.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==a.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:r.sectors!==a.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,a){return r>a?"start":r<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,a,i){if($.isValidElement(r))return $.cloneElement(r,a);if(qe(r))return r(a);var o=Ye("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return $.createElement(ru,Bc({},a,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(r,a,i){if($.isValidElement(r))return $.cloneElement(r,a);var o=i;if(qe(r)&&(o=r(a),$.isValidElement(o)))return o;var l=Ye("recharts-pie-label-text",typeof r!="boolean"&&!qe(r)?r.className:"");return $.createElement(Bl,Bc({},a,{alignmentBaseline:"middle",className:l}),o)}}])}(j.PureComponent);Zp=Zs;ds(Zs,"displayName","Pie");ds(Zs,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!_a.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});ds(Zs,"parseDeltaAngle",function(e,t){var n=vr(t-e),r=Math.min(Math.abs(t-e),360);return n*r});ds(Zs,"getRealPieData",function(e){var t=e.data,n=e.children,r=Fe(e,!1),a=gs(n,Od);return t&&t.length?t.map(function(i,o){return Bt(Bt(Bt({payload:i},r),i),a&&a[o]&&a[o].props)}):a&&a.length?a.map(function(i){return Bt(Bt({},r),i.props)}):[]});ds(Zs,"parseCoordinateOfPie",function(e,t){var n=t.top,r=t.left,a=t.width,i=t.height,o=S5(a,i),l=r+xr(e.cx,a,a/2),c=n+xr(e.cy,i,i/2),u=xr(e.innerRadius,o,0),d=xr(e.outerRadius,o,o*.8),h=e.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:h}});ds(Zs,"getComposedData",function(e){var t=e.item,n=e.offset,r=t.type.defaultProps!==void 0?Bt(Bt({},t.type.defaultProps),t.props):t.props,a=Zp.getRealPieData(r);if(!a||!a.length)return null;var i=r.cornerRadius,o=r.startAngle,l=r.endAngle,c=r.paddingAngle,u=r.dataKey,d=r.nameKey,h=r.valueKey,f=r.tooltipType,m=Math.abs(r.minAngle),v=Zp.parseCoordinateOfPie(r,n),p=Zp.parseDeltaAngle(o,l),g=Math.abs(p),x=u;Qe(u)&&Qe(h)?(Ws(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x="value"):Qe(u)&&(Ws(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x=h);var y=a.filter(function(C){return kn(C,x,0)!==0}).length,b=(g>=360?y:y-1)*c,N=g-y*m-b,w=a.reduce(function(C,P){var A=kn(P,x,0);return C+(pe(A)?A:0)},0),S;if(w>0){var _;S=a.map(function(C,P){var A=kn(C,x,0),O=kn(C,d,P),E=(pe(A)?A:0)/w,z;P?z=_.endAngle+vr(p)*c*(A!==0?1:0):z=o;var I=z+vr(p)*((A!==0?m:0)+E*N),W=(z+I)/2,V=(v.innerRadius+v.outerRadius)/2,H=[{name:O,value:A,payload:C,dataKey:x,type:f}],k=Ut(v.cx,v.cy,V,W);return _=Bt(Bt(Bt({percent:E,cornerRadius:i,name:O,tooltipPayload:H,midAngle:W,middleRadius:V,tooltipPosition:k},C),v),{},{value:kn(C,x),startAngle:z,endAngle:I,payload:C,paddingAngle:vr(p)*c}),_})}return Bt(Bt({},v),{},{sectors:S,data:a})});var A1e=Math.ceil,k1e=Math.max;function E1e(e,t,n,r){for(var a=-1,i=k1e(A1e((t-e)/(n||1)),0),o=Array(i);i--;)o[r?i:++a]=e,e+=n;return o}var T1e=E1e,O1e=dF,mT=1/0,D1e=17976931348623157e292;function M1e(e){if(!e)return e===0?e:0;if(e=O1e(e),e===mT||e===-mT){var t=e<0?-1:1;return t*D1e}return e===e?e:0}var K5=M1e,I1e=T1e,$1e=oy,mb=K5;function R1e(e){return function(t,n,r){return r&&typeof r!="number"&&$1e(t,n,r)&&(n=r=void 0),t=mb(t),n===void 0?(n=t,t=0):n=mb(n),r=r===void 0?t<n?1:-1:mb(r),I1e(t,n,r,e)}}var L1e=R1e,F1e=L1e,B1e=F1e(),z1e=B1e;const _v=Ct(z1e);function Kf(e){"@babel/helpers - typeof";return Kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kf(e)}function pT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function gT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pT(Object(n),!0).forEach(function(r){G5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function G5(e,t,n){return t=V1e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V1e(e){var t=q1e(e,"string");return Kf(t)=="symbol"?t:t+""}function q1e(e,t){if(Kf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Kf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var U1e=["Webkit","Moz","O","ms"],W1e=function(t,n){var r=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=U1e.reduce(function(i,o){return gT(gT({},i),{},G5({},o+r,n))},{});return a[t]=n,a};function Ku(e){"@babel/helpers - typeof";return Ku=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ku(e)}function Cv(){return Cv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cv.apply(this,arguments)}function vT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function pb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vT(Object(n),!0).forEach(function(r){Ur(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function H1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Q5(r.key),r)}}function K1e(e,t,n){return t&&xT(e.prototype,t),n&&xT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function G1e(e,t,n){return t=Pv(t),Y1e(e,Y5()?Reflect.construct(t,n||[],Pv(e).constructor):t.apply(e,n))}function Y1e(e,t){if(t&&(Ku(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Q1e(e)}function Q1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Y5=function(){return!!e})()}function Pv(e){return Pv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Pv(e)}function X1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_1(e,t)}function _1(e,t){return _1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},_1(e,t)}function Ur(e,t,n){return t=Q5(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q5(e){var t=J1e(e,"string");return Ku(t)=="symbol"?t:t+""}function J1e(e,t){if(Ku(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ku(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Z1e=function(t){var n=t.data,r=t.startIndex,a=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!n||!n.length)return{};var c=n.length,u=Ih().domain(_v(0,c)).range([i,i+o-l]),d=u.domain().map(function(h){return u(h)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(a),scale:u,scaleValues:d}},yT=function(t){return t.changedTouches&&!!t.changedTouches.length},Gu=function(e){function t(n){var r;return H1e(this,t),r=G1e(this,t,[n]),Ur(r,"handleDrag",function(a){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(a):r.state.isSlideMoving&&r.handleSlideDrag(a)}),Ur(r,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&r.handleDrag(a.changedTouches[0])}),Ur(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=r.props,i=a.endIndex,o=a.onDragEnd,l=a.startIndex;o==null||o({endIndex:i,startIndex:l})}),r.detachDragEndListener()}),Ur(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Ur(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Ur(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Ur(r,"handleSlideDragStart",function(a){var i=yT(a)?a.changedTouches[0]:a;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return X1e(t,e),K1e(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var a=r.startX,i=r.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,h=Math.min(a,i),f=Math.max(a,i),m=t.getIndexInRange(o,h),v=t.getIndexInRange(o,f);return{startIndex:m-m%c,endIndex:v===d?d:v-v%c}}},{key:"getTextOfTick",value:function(r){var a=this.props,i=a.data,o=a.tickFormatter,l=a.dataKey,c=kn(i[r],l,r);return qe(o)?o(c,r):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var a=this.state,i=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,u=c.x,d=c.width,h=c.travellerWidth,f=c.startIndex,m=c.endIndex,v=c.onChange,p=r.pageX-i;p>0?p=Math.min(p,u+d-h-l,u+d-h-o):p<0&&(p=Math.max(p,u-o,u-l));var g=this.getIndex({startX:o+p,endX:l+p});(g.startIndex!==f||g.endIndex!==m)&&v&&v(g),this.setState({startX:o+p,endX:l+p,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,a){var i=yT(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,u=this.state[o],d=this.props,h=d.x,f=d.width,m=d.travellerWidth,v=d.onChange,p=d.gap,g=d.data,x={startX:this.state.startX,endX:this.state.endX},y=r.pageX-i;y>0?y=Math.min(y,h+f-m-u):y<0&&(y=Math.max(y,h-u)),x[o]=u+y;var b=this.getIndex(x),N=b.startIndex,w=b.endIndex,S=function(){var C=g.length-1;return o==="startX"&&(l>c?N%p===0:w%p===0)||l<c&&w===C||o==="endX"&&(l>c?w%p===0:N%p===0)||l>c&&w===C};this.setState(Ur(Ur({},o,u+y),"brushMoveStartX",r.pageX),function(){v&&S()&&v(b)})}},{key:"handleTravellerMoveKeyboard",value:function(r,a){var i=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,d=this.state[a],h=l.indexOf(d);if(h!==-1){var f=h+r;if(!(f===-1||f>=l.length)){var m=l[f];a==="startX"&&m>=u||a==="endX"&&m<=c||this.setState(Ur({},a,m),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,a=r.x,i=r.y,o=r.width,l=r.height,c=r.fill,u=r.stroke;return $.createElement("rect",{stroke:u,fill:c,x:a,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var r=this.props,a=r.x,i=r.y,o=r.width,l=r.height,c=r.data,u=r.children,d=r.padding,h=j.Children.only(u);return h?$.cloneElement(h,{x:a,y:i,width:o,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(r,a){var i,o,l=this,c=this.props,u=c.y,d=c.travellerWidth,h=c.height,f=c.traveller,m=c.ariaLabel,v=c.data,p=c.startIndex,g=c.endIndex,x=Math.max(r,this.props.x),y=pb(pb({},Fe(this.props,!1)),{},{x,y:u,width:d,height:h}),b=m||"Min value: ".concat((i=v[p])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=v[g])===null||o===void 0?void 0:o.name);return $.createElement(gt,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(w){["ArrowLeft","ArrowRight"].includes(w.key)&&(w.preventDefault(),w.stopPropagation(),l.handleTravellerMoveKeyboard(w.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(f,y))}},{key:"renderSlide",value:function(r,a){var i=this.props,o=i.y,l=i.height,c=i.stroke,u=i.travellerWidth,d=Math.min(r,a)+u,h=Math.max(Math.abs(a-r)-u,0);return $.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:o,width:h,height:l})}},{key:"renderText",value:function(){var r=this.props,a=r.startIndex,i=r.endIndex,o=r.y,l=r.height,c=r.travellerWidth,u=r.stroke,d=this.state,h=d.startX,f=d.endX,m=5,v={pointerEvents:"none",fill:u};return $.createElement(gt,{className:"recharts-brush-texts"},$.createElement(Bl,Cv({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,f)-m,y:o+l/2},v),this.getTextOfTick(a)),$.createElement(Bl,Cv({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,f)+c+m,y:o+l/2},v),this.getTextOfTick(i)))}},{key:"render",value:function(){var r=this.props,a=r.data,i=r.className,o=r.children,l=r.x,c=r.y,u=r.width,d=r.height,h=r.alwaysShowText,f=this.state,m=f.startX,v=f.endX,p=f.isTextActive,g=f.isSlideMoving,x=f.isTravellerMoving,y=f.isTravellerFocused;if(!a||!a.length||!pe(l)||!pe(c)||!pe(u)||!pe(d)||u<=0||d<=0)return null;var b=Ye("recharts-brush",i),N=$.Children.count(o)===1,w=W1e("userSelect","none");return $.createElement(gt,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),N&&this.renderPanorama(),this.renderSlide(m,v),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(v,"endX"),(p||g||x||y||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var a=r.x,i=r.y,o=r.width,l=r.height,c=r.stroke,u=Math.floor(i+l/2)-1;return $.createElement($.Fragment,null,$.createElement("rect",{x:a,y:i,width:o,height:l,fill:c,stroke:"none"}),$.createElement("line",{x1:a+1,y1:u,x2:a+o-1,y2:u,fill:"none",stroke:"#fff"}),$.createElement("line",{x1:a+1,y1:u+2,x2:a+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,a){var i;return $.isValidElement(r)?i=$.cloneElement(r,a):qe(r)?i=r(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(r,a){var i=r.data,o=r.width,l=r.x,c=r.travellerWidth,u=r.updateId,d=r.startIndex,h=r.endIndex;if(i!==a.prevData||u!==a.prevUpdateId)return pb({prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},i&&i.length?Z1e({data:i,width:o,x:l,travellerWidth:c,startIndex:d,endIndex:h}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var f=a.scale.domain().map(function(m){return a.scale(m)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:a.scale(r.startIndex),endX:a.scale(r.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(r,a){for(var i=r.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);r[c]>a?l=c:o=c}return a>=r[l]?l:o}}])}(j.PureComponent);Ur(Gu,"displayName","Brush");Ur(Gu,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var eNe=g_;function tNe(e,t){var n;return eNe(e,function(r,a,i){return n=t(r,a,i),!n}),!!n}var nNe=tNe,rNe=LL,sNe=$a,aNe=nNe,iNe=Br,oNe=oy;function lNe(e,t,n){var r=iNe(e)?rNe:aNe;return n&&oNe(e,t,n)&&(t=void 0),r(e,sNe(t))}var cNe=lNe;const uNe=Ct(cNe);var Pa=function(t,n){var r=t.alwaysShow,a=t.ifOverflow;return r&&(a="extendDomain"),a===n},bT=iF;function dNe(e,t,n){t=="__proto__"&&bT?bT(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var hNe=dNe,fNe=hNe,mNe=sF,pNe=$a;function gNe(e,t){var n={};return t=pNe(t),mNe(e,function(r,a,i){fNe(n,a,t(r,a,i))}),n}var vNe=gNe;const xNe=Ct(vNe);function yNe(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}var bNe=yNe,jNe=g_;function wNe(e,t){var n=!0;return jNe(e,function(r,a,i){return n=!!t(r,a,i),n}),n}var NNe=wNe,SNe=bNe,_Ne=NNe,CNe=$a,PNe=Br,ANe=oy;function kNe(e,t,n){var r=PNe(e)?SNe:_Ne;return n&&ANe(e,t,n)&&(t=void 0),r(e,CNe(t))}var ENe=kNe;const X5=Ct(ENe);var TNe=["x","y"];function Gf(e){"@babel/helpers - typeof";return Gf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gf(e)}function C1(){return C1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C1.apply(this,arguments)}function jT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function uh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jT(Object(n),!0).forEach(function(r){ONe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ONe(e,t,n){return t=DNe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DNe(e){var t=MNe(e,"string");return Gf(t)=="symbol"?t:t+""}function MNe(e,t){if(Gf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Gf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function INe(e,t){if(e==null)return{};var n=$Ne(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function $Ne(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function RNe(e,t){var n=e.x,r=e.y,a=INe(e,TNe),i="".concat(n),o=parseInt(i,10),l="".concat(r),c=parseInt(l,10),u="".concat(t.height||a.height),d=parseInt(u,10),h="".concat(t.width||a.width),f=parseInt(h,10);return uh(uh(uh(uh(uh({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:f,name:t.name,radius:t.radius})}function wT(e){return $.createElement(U5,C1({shapeType:"rectangle",propTransformer:RNe,activeClassName:"recharts-active-bar"},e))}var LNe=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,a){if(typeof t=="number")return t;var i=pe(r)||cse(r);return i?t(r,a):(i||Vl(),n)}},FNe=["value","background"],J5;function Yu(e){"@babel/helpers - typeof";return Yu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yu(e)}function BNe(e,t){if(e==null)return{};var n=zNe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function zNe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Av(){return Av=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Av.apply(this,arguments)}function NT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function xn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NT(Object(n),!0).forEach(function(r){to(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function VNe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ST(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,e6(r.key),r)}}function qNe(e,t,n){return t&&ST(e.prototype,t),n&&ST(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function UNe(e,t,n){return t=kv(t),WNe(e,Z5()?Reflect.construct(t,n||[],kv(e).constructor):t.apply(e,n))}function WNe(e,t){if(t&&(Yu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HNe(e)}function HNe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Z5=function(){return!!e})()}function kv(e){return kv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},kv(e)}function KNe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P1(e,t)}function P1(e,t){return P1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},P1(e,t)}function to(e,t,n){return t=e6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function e6(e){var t=GNe(e,"string");return Yu(t)=="symbol"?t:t+""}function GNe(e,t){if(Yu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Yu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xa=function(e){function t(){var n;VNe(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=UNe(this,t,[].concat(a)),to(n,"state",{isAnimationFinished:!1}),to(n,"id",Ad("recharts-bar-")),to(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),to(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return KNe(t,e),qNe(t,[{key:"renderRectanglesStatically",value:function(r){var a=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,u=i.activeBar,d=Fe(this.props,!1);return r&&r.map(function(h,f){var m=f===c,v=m?u:o,p=xn(xn(xn({},d),h),{},{isActive:m,option:v,index:f,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return $.createElement(gt,Av({className:"recharts-bar-rectangle"},Fl(a.props,h,f),{key:"rectangle-".concat(h==null?void 0:h.x,"-").concat(h==null?void 0:h.y,"-").concat(h==null?void 0:h.value,"-").concat(f)}),$.createElement(wT,p))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,a=this.props,i=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,u=a.animationDuration,d=a.animationEasing,h=a.animationId,f=this.state.prevData;return $.createElement(Ta,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var v=m.t,p=i.map(function(g,x){var y=f&&f[x];if(y){var b=Dr(y.x,g.x),N=Dr(y.y,g.y),w=Dr(y.width,g.width),S=Dr(y.height,g.height);return xn(xn({},g),{},{x:b(v),y:N(v),width:w(v),height:S(v)})}if(o==="horizontal"){var _=Dr(0,g.height),C=_(v);return xn(xn({},g),{},{y:g.y+g.height-C,height:C})}var P=Dr(0,g.width),A=P(v);return xn(xn({},g),{},{width:A})});return $.createElement(gt,null,r.renderRectanglesStatically(p))})}},{key:"renderRectangles",value:function(){var r=this.props,a=r.data,i=r.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!zu(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var r=this,a=this.props,i=a.data,o=a.dataKey,l=a.activeIndex,c=Fe(this.props.background,!1);return i.map(function(u,d){u.value;var h=u.background,f=BNe(u,FNe);if(!h)return null;var m=xn(xn(xn(xn(xn({},f),{},{fill:"#eee"},h),c),Fl(r.props,u,d)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return $.createElement(wT,Av({key:"background-bar-".concat(d),option:r.props.background,isActive:d===l},m))})}},{key:"renderErrorBar",value:function(r,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,h=gs(d,xy);if(!h)return null;var f=u==="vertical"?o[0].height/2:o[0].width/2,m=function(g,x){var y=Array.isArray(g.value)?g.value[1]:g.value;return{x:g.x,y:g.y,value:y,errorVal:kn(g,x)}},v={clipPath:r?"url(#clipPath-".concat(a,")"):null};return $.createElement(gt,v,h.map(function(p){return $.cloneElement(p,{key:"error-bar-".concat(a,"-").concat(p.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:f,dataPointFormatter:m})}))}},{key:"render",value:function(){var r=this.props,a=r.hide,i=r.data,o=r.className,l=r.xAxis,c=r.yAxis,u=r.left,d=r.top,h=r.width,f=r.height,m=r.isAnimationActive,v=r.background,p=r.id;if(a||!i||!i.length)return null;var g=this.state.isAnimationFinished,x=Ye("recharts-bar",o),y=l&&l.allowDataOverflow,b=c&&c.allowDataOverflow,N=y||b,w=Qe(p)?this.id:p;return $.createElement(gt,{className:x},y||b?$.createElement("defs",null,$.createElement("clipPath",{id:"clipPath-".concat(w)},$.createElement("rect",{x:y?u:u-h/2,y:b?d:d-f/2,width:y?h:h*2,height:b?f:f*2}))):null,$.createElement(gt,{className:"recharts-bar-rectangles",clipPath:N?"url(#clipPath-".concat(w,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(N,w),(!m||g)&&si.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(r,a){return r.animationId!==a.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:a.curData}:r.data!==a.curData?{curData:r.data}:null}}])}(j.PureComponent);J5=xa;to(xa,"displayName","Bar");to(xa,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!_a.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});to(xa,"getComposedData",function(e){var t=e.props,n=e.item,r=e.barPosition,a=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,h=e.displayedData,f=e.offset,m=Aye(r,n);if(!m)return null;var v=t.layout,p=n.type.defaultProps,g=p!==void 0?xn(xn({},p),n.props):n.props,x=g.dataKey,y=g.children,b=g.minPointSize,N=v==="horizontal"?o:i,w=u?N.scale.domain():null,S=Iye({numericAxis:N}),_=gs(y,Od),C=h.map(function(P,A){var O,E,z,I,W,V;u?O=kye(u[d+A],w):(O=kn(P,x),Array.isArray(O)||(O=[S,O]));var H=LNe(b,J5.defaultProps.minPointSize)(O[1],A);if(v==="horizontal"){var k,D=[o.scale(O[0]),o.scale(O[1])],X=D[0],Q=D[1];E=fE({axis:i,ticks:l,bandSize:a,offset:m.offset,entry:P,index:A}),z=(k=Q??X)!==null&&k!==void 0?k:void 0,I=m.size;var te=X-Q;if(W=Number.isNaN(te)?0:te,V={x:E,y:o.y,width:I,height:o.height},Math.abs(H)>0&&Math.abs(W)<Math.abs(H)){var ne=vr(W||H)*(Math.abs(H)-Math.abs(W));z-=ne,W+=ne}}else{var T=[i.scale(O[0]),i.scale(O[1])],ce=T[0],me=T[1];if(E=ce,z=fE({axis:o,ticks:c,bandSize:a,offset:m.offset,entry:P,index:A}),I=me-ce,W=m.size,V={x:i.x,y:z,width:i.width,height:W},Math.abs(H)>0&&Math.abs(I)<Math.abs(H)){var le=vr(I||H)*(Math.abs(H)-Math.abs(I));I+=le}}return xn(xn(xn({},P),{},{x:E,y:z,width:I,height:W,value:u?O:O[1],payload:P,background:V},_&&_[A]&&_[A].props),{},{tooltipPayload:[w5(n,P)],tooltipPosition:{x:E+I/2,y:z+W/2}})});return xn({data:C,layout:v},f)});function Yf(e){"@babel/helpers - typeof";return Yf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yf(e)}function YNe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,t6(r.key),r)}}function QNe(e,t,n){return t&&_T(e.prototype,t),n&&_T(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function CT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Rs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CT(Object(n),!0).forEach(function(r){Cy(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Cy(e,t,n){return t=t6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t6(e){var t=XNe(e,"string");return Yf(t)=="symbol"?t:t+""}function XNe(e,t){if(Yf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Yf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var n6=function(t,n,r,a,i){var o=t.width,l=t.height,c=t.layout,u=t.children,d=Object.keys(n),h={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:l-r.bottom,bottomMirror:l-r.bottom},f=!!Hr(u,xa);return d.reduce(function(m,v){var p=n[v],g=p.orientation,x=p.domain,y=p.padding,b=y===void 0?{}:y,N=p.mirror,w=p.reversed,S="".concat(g).concat(N?"Mirror":""),_,C,P,A,O;if(p.type==="number"&&(p.padding==="gap"||p.padding==="no-gap")){var E=x[1]-x[0],z=1/0,I=p.categoricalDomain.sort(hse);if(I.forEach(function(T,ce){ce>0&&(z=Math.min((T||0)-(I[ce-1]||0),z))}),Number.isFinite(z)){var W=z/E,V=p.layout==="vertical"?r.height:r.width;if(p.padding==="gap"&&(_=W*V/2),p.padding==="no-gap"){var H=xr(t.barCategoryGap,W*V),k=W*V/2;_=k-H-(k-H)/V*H}}}a==="xAxis"?C=[r.left+(b.left||0)+(_||0),r.left+r.width-(b.right||0)-(_||0)]:a==="yAxis"?C=c==="horizontal"?[r.top+r.height-(b.bottom||0),r.top+(b.top||0)]:[r.top+(b.top||0)+(_||0),r.top+r.height-(b.bottom||0)-(_||0)]:C=p.range,w&&(C=[C[1],C[0]]);var D=x5(p,i,f),X=D.scale,Q=D.realScaleType;X.domain(x).range(C),y5(X);var te=b5(X,Rs(Rs({},p),{},{realScaleType:Q}));a==="xAxis"?(O=g==="top"&&!N||g==="bottom"&&N,P=r.left,A=h[S]-O*p.height):a==="yAxis"&&(O=g==="left"&&!N||g==="right"&&N,P=h[S]-O*p.width,A=r.top);var ne=Rs(Rs(Rs({},p),te),{},{realScaleType:Q,x:P,y:A,scale:X,width:a==="xAxis"?r.width:p.width,height:a==="yAxis"?r.height:p.height});return ne.bandSize=fv(ne,te),!p.hide&&a==="xAxis"?h[S]+=(O?-1:1)*ne.height:p.hide||(h[S]+=(O?-1:1)*ne.width),Rs(Rs({},m),{},Cy({},v,ne))},{})},r6=function(t,n){var r=t.x,a=t.y,i=n.x,o=n.y;return{x:Math.min(r,i),y:Math.min(a,o),width:Math.abs(i-r),height:Math.abs(o-a)}},JNe=function(t){var n=t.x1,r=t.y1,a=t.x2,i=t.y2;return r6({x:n,y:r},{x:a,y:i})},s6=function(){function e(t){YNe(this,e),this.scale=t}return QNe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=r.bandAware,i=r.position;if(n!==void 0){if(i)switch(i){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),a=r[0],i=r[r.length-1];return a<=i?n>=a&&n<=i:n>=i&&n<=a}}],[{key:"create",value:function(n){return new e(n)}}])}();Cy(s6,"EPS",1e-4);var W_=function(t){var n=Object.keys(t).reduce(function(r,a){return Rs(Rs({},r),{},Cy({},a,s6.create(t[a])))},{});return Rs(Rs({},n),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return xNe(a,function(c,u){return n[u].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return X5(a,function(i,o){return n[o].isInRange(i)})}})};function ZNe(e){return(e%180+180)%180}var eSe=function(t){var n=t.width,r=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=ZNe(a),o=i*Math.PI/180,l=Math.atan(r/n),c=o>l&&o<Math.PI-l?r/Math.sin(o):n/Math.cos(o);return Math.abs(c)},tSe=$a,nSe=Sm,rSe=ay;function sSe(e){return function(t,n,r){var a=Object(t);if(!nSe(t)){var i=tSe(n);t=rSe(t),n=function(l){return i(a[l],l,a)}}var o=e(t,n,r);return o>-1?a[i?t[o]:o]:void 0}}var aSe=sSe,iSe=K5;function oSe(e){var t=iSe(e),n=t%1;return t===t?n?t-n:t:0}var lSe=oSe,cSe=JL,uSe=$a,dSe=lSe,hSe=Math.max;function fSe(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var a=n==null?0:dSe(n);return a<0&&(a=hSe(r+a,0)),cSe(e,uSe(t),a)}var mSe=fSe,pSe=aSe,gSe=mSe,vSe=pSe(gSe),xSe=vSe;const ySe=Ct(xSe);var bSe=fre(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),H_=j.createContext(void 0),K_=j.createContext(void 0),a6=j.createContext(void 0),i6=j.createContext({}),o6=j.createContext(void 0),l6=j.createContext(0),c6=j.createContext(0),PT=function(t){var n=t.state,r=n.xAxisMap,a=n.yAxisMap,i=n.offset,o=t.clipPathId,l=t.children,c=t.width,u=t.height,d=bSe(i);return $.createElement(H_.Provider,{value:r},$.createElement(K_.Provider,{value:a},$.createElement(i6.Provider,{value:i},$.createElement(a6.Provider,{value:d},$.createElement(o6.Provider,{value:o},$.createElement(l6.Provider,{value:u},$.createElement(c6.Provider,{value:c},l)))))))},jSe=function(){return j.useContext(o6)},u6=function(t){var n=j.useContext(H_);n==null&&Vl();var r=n[t];return r==null&&Vl(),r},wSe=function(){var t=j.useContext(H_);return zi(t)},NSe=function(){var t=j.useContext(K_),n=ySe(t,function(r){return X5(r.domain,Number.isFinite)});return n||zi(t)},d6=function(t){var n=j.useContext(K_);n==null&&Vl();var r=n[t];return r==null&&Vl(),r},SSe=function(){var t=j.useContext(a6);return t},_Se=function(){return j.useContext(i6)},G_=function(){return j.useContext(c6)},Y_=function(){return j.useContext(l6)};function Qu(e){"@babel/helpers - typeof";return Qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qu(e)}function CSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PSe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f6(r.key),r)}}function ASe(e,t,n){return t&&PSe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function kSe(e,t,n){return t=Ev(t),ESe(e,h6()?Reflect.construct(t,n||[],Ev(e).constructor):t.apply(e,n))}function ESe(e,t){if(t&&(Qu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return TSe(e)}function TSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(h6=function(){return!!e})()}function Ev(e){return Ev=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ev(e)}function OSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A1(e,t)}function A1(e,t){return A1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},A1(e,t)}function AT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function kT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AT(Object(n),!0).forEach(function(r){Q_(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Q_(e,t,n){return t=f6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f6(e){var t=DSe(e,"string");return Qu(t)=="symbol"?t:t+""}function DSe(e,t){if(Qu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Qu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function MSe(e,t){return LSe(e)||RSe(e,t)||$Se(e,t)||ISe()}function ISe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $Se(e,t){if(e){if(typeof e=="string")return ET(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ET(e,t)}}function ET(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function RSe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function LSe(e){if(Array.isArray(e))return e}function k1(){return k1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k1.apply(this,arguments)}var FSe=function(t,n){var r;return $.isValidElement(t)?r=$.cloneElement(t,n):qe(t)?r=t(n):r=$.createElement("line",k1({},n,{className:"recharts-reference-line-line"})),r},BSe=function(t,n,r,a,i,o,l,c,u){var d=i.x,h=i.y,f=i.width,m=i.height;if(r){var v=u.y,p=t.y.apply(v,{position:o});if(Pa(u,"discard")&&!t.y.isInRange(p))return null;var g=[{x:d+f,y:p},{x:d,y:p}];return c==="left"?g.reverse():g}if(n){var x=u.x,y=t.x.apply(x,{position:o});if(Pa(u,"discard")&&!t.x.isInRange(y))return null;var b=[{x:y,y:h+m},{x:y,y:h}];return l==="top"?b.reverse():b}if(a){var N=u.segment,w=N.map(function(S){return t.apply(S,{position:o})});return Pa(u,"discard")&&uNe(w,function(S){return!t.isInRange(S)})?null:w}return null};function zSe(e){var t=e.x,n=e.y,r=e.segment,a=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=jSe(),d=u6(a),h=d6(i),f=SSe();if(!u||!f)return null;Ws(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=W_({x:d.scale,y:h.scale}),v=Tn(t),p=Tn(n),g=r&&r.length===2,x=BSe(m,v,p,g,f,e.position,d.orientation,h.orientation,e);if(!x)return null;var y=MSe(x,2),b=y[0],N=b.x,w=b.y,S=y[1],_=S.x,C=S.y,P=Pa(e,"hidden")?"url(#".concat(u,")"):void 0,A=kT(kT({clipPath:P},Fe(e,!0)),{},{x1:N,y1:w,x2:_,y2:C});return $.createElement(gt,{className:Ye("recharts-reference-line",l)},FSe(o,A),Fn.renderCallByParent(e,JNe({x1:N,y1:w,x2:_,y2:C})))}var X_=function(e){function t(){return CSe(this,t),kSe(this,t,arguments)}return OSe(t,e),ASe(t,[{key:"render",value:function(){return $.createElement(zSe,this.props)}}])}($.Component);Q_(X_,"displayName","ReferenceLine");Q_(X_,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function E1(){return E1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E1.apply(this,arguments)}function Xu(e){"@babel/helpers - typeof";return Xu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xu(e)}function TT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function OT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?TT(Object(n),!0).forEach(function(r){Py(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function VSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qSe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p6(r.key),r)}}function USe(e,t,n){return t&&qSe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function WSe(e,t,n){return t=Tv(t),HSe(e,m6()?Reflect.construct(t,n||[],Tv(e).constructor):t.apply(e,n))}function HSe(e,t){if(t&&(Xu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KSe(e)}function KSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(m6=function(){return!!e})()}function Tv(e){return Tv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Tv(e)}function GSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T1(e,t)}function T1(e,t){return T1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},T1(e,t)}function Py(e,t,n){return t=p6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p6(e){var t=YSe(e,"string");return Xu(t)=="symbol"?t:t+""}function YSe(e,t){if(Xu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Xu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var QSe=function(t){var n=t.x,r=t.y,a=t.xAxis,i=t.yAxis,o=W_({x:a.scale,y:i.scale}),l=o.apply({x:n,y:r},{bandAware:!0});return Pa(t,"discard")&&!o.isInRange(l)?null:l},Ay=function(e){function t(){return VSe(this,t),WSe(this,t,arguments)}return GSe(t,e),USe(t,[{key:"render",value:function(){var r=this.props,a=r.x,i=r.y,o=r.r,l=r.alwaysShow,c=r.clipPathId,u=Tn(a),d=Tn(i);if(Ws(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var h=QSe(this.props);if(!h)return null;var f=h.x,m=h.y,v=this.props,p=v.shape,g=v.className,x=Pa(this.props,"hidden")?"url(#".concat(c,")"):void 0,y=OT(OT({clipPath:x},Fe(this.props,!0)),{},{cx:f,cy:m});return $.createElement(gt,{className:Ye("recharts-reference-dot",g)},t.renderDot(p,y),Fn.renderCallByParent(this.props,{x:f-o,y:m-o,width:2*o,height:2*o}))}}])}($.Component);Py(Ay,"displayName","ReferenceDot");Py(Ay,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Py(Ay,"renderDot",function(e,t){var n;return $.isValidElement(e)?n=$.cloneElement(e,t):qe(e)?n=e(t):n=$.createElement(yy,E1({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function O1(){return O1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O1.apply(this,arguments)}function Ju(e){"@babel/helpers - typeof";return Ju=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ju(e)}function DT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function MT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DT(Object(n),!0).forEach(function(r){ky(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function XSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JSe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v6(r.key),r)}}function ZSe(e,t,n){return t&&JSe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function e_e(e,t,n){return t=Ov(t),t_e(e,g6()?Reflect.construct(t,n||[],Ov(e).constructor):t.apply(e,n))}function t_e(e,t){if(t&&(Ju(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n_e(e)}function n_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g6=function(){return!!e})()}function Ov(e){return Ov=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ov(e)}function r_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D1(e,t)}function D1(e,t){return D1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},D1(e,t)}function ky(e,t,n){return t=v6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v6(e){var t=s_e(e,"string");return Ju(t)=="symbol"?t:t+""}function s_e(e,t){if(Ju(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ju(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var a_e=function(t,n,r,a,i){var o=i.x1,l=i.x2,c=i.y1,u=i.y2,d=i.xAxis,h=i.yAxis;if(!d||!h)return null;var f=W_({x:d.scale,y:h.scale}),m={x:t?f.x.apply(o,{position:"start"}):f.x.rangeMin,y:r?f.y.apply(c,{position:"start"}):f.y.rangeMin},v={x:n?f.x.apply(l,{position:"end"}):f.x.rangeMax,y:a?f.y.apply(u,{position:"end"}):f.y.rangeMax};return Pa(i,"discard")&&(!f.isInRange(m)||!f.isInRange(v))?null:r6(m,v)},Ey=function(e){function t(){return XSe(this,t),e_e(this,t,arguments)}return r_e(t,e),ZSe(t,[{key:"render",value:function(){var r=this.props,a=r.x1,i=r.x2,o=r.y1,l=r.y2,c=r.className,u=r.alwaysShow,d=r.clipPathId;Ws(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=Tn(a),f=Tn(i),m=Tn(o),v=Tn(l),p=this.props.shape;if(!h&&!f&&!m&&!v&&!p)return null;var g=a_e(h,f,m,v,this.props);if(!g&&!p)return null;var x=Pa(this.props,"hidden")?"url(#".concat(d,")"):void 0;return $.createElement(gt,{className:Ye("recharts-reference-area",c)},t.renderRect(p,MT(MT({clipPath:x},Fe(this.props,!0)),g)),Fn.renderCallByParent(this.props,g))}}])}($.Component);ky(Ey,"displayName","ReferenceArea");ky(Ey,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});ky(Ey,"renderRect",function(e,t){var n;return $.isValidElement(e)?n=$.cloneElement(e,t):qe(e)?n=e(t):n=$.createElement(U_,O1({},t,{className:"recharts-reference-area-rect"})),n});function x6(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],a=0;a<e.length;a+=t)r.push(e[a]);return r}function i_e(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return eSe(r,n)}function o_e(e,t,n){var r=n==="width",a=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:r?a:i,end:r?a+o:i+l}:{start:r?a+o:i+l,end:r?a:i}}function Dv(e,t,n,r,a){if(e*t<e*r||e*t>e*a)return!1;var i=n();return e*(t-e*i/2-r)>=0&&e*(t+e*i/2-a)<=0}function l_e(e,t){return x6(e,t+1)}function c_e(e,t,n,r,a){for(var i=(r||[]).slice(),o=t.start,l=t.end,c=0,u=1,d=o,h=function(){var v=r==null?void 0:r[c];if(v===void 0)return{v:x6(r,u)};var p=c,g,x=function(){return g===void 0&&(g=n(v,p)),g},y=v.coordinate,b=c===0||Dv(e,y,x,d,l);b||(c=0,d=o,u+=1),b&&(d=y+e*(x()/2+a),c+=u)},f;u<=i.length;)if(f=h(),f)return f.v;return[]}function Qf(e){"@babel/helpers - typeof";return Qf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qf(e)}function IT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function nr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IT(Object(n),!0).forEach(function(r){u_e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function u_e(e,t,n){return t=d_e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d_e(e){var t=h_e(e,"string");return Qf(t)=="symbol"?t:t+""}function h_e(e,t){if(Qf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Qf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function f_e(e,t,n,r,a){for(var i=(r||[]).slice(),o=i.length,l=t.start,c=t.end,u=function(f){var m=i[f],v,p=function(){return v===void 0&&(v=n(m,f)),v};if(f===o-1){var g=e*(m.coordinate+e*p()/2-c);i[f]=m=nr(nr({},m),{},{tickCoord:g>0?m.coordinate-g*e:m.coordinate})}else i[f]=m=nr(nr({},m),{},{tickCoord:m.coordinate});var x=Dv(e,m.tickCoord,p,l,c);x&&(c=m.tickCoord-e*(p()/2+a),i[f]=nr(nr({},m),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return i}function m_e(e,t,n,r,a,i){var o=(r||[]).slice(),l=o.length,c=t.start,u=t.end;if(i){var d=r[l-1],h=n(d,l-1),f=e*(d.coordinate+e*h/2-u);o[l-1]=d=nr(nr({},d),{},{tickCoord:f>0?d.coordinate-f*e:d.coordinate});var m=Dv(e,d.tickCoord,function(){return h},c,u);m&&(u=d.tickCoord-e*(h/2+a),o[l-1]=nr(nr({},d),{},{isShow:!0}))}for(var v=i?l-1:l,p=function(y){var b=o[y],N,w=function(){return N===void 0&&(N=n(b,y)),N};if(y===0){var S=e*(b.coordinate-e*w()/2-c);o[y]=b=nr(nr({},b),{},{tickCoord:S<0?b.coordinate-S*e:b.coordinate})}else o[y]=b=nr(nr({},b),{},{tickCoord:b.coordinate});var _=Dv(e,b.tickCoord,w,c,u);_&&(c=b.tickCoord+e*(w()/2+a),o[y]=nr(nr({},b),{},{isShow:!0}))},g=0;g<v;g++)p(g);return o}function J_(e,t,n){var r=e.tick,a=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,d=e.unit,h=e.angle;if(!a||!a.length||!r)return[];if(pe(c)||_a.isSsr)return l_e(a,typeof c=="number"&&pe(c)?c:0);var f=[],m=l==="top"||l==="bottom"?"width":"height",v=d&&m==="width"?Mh(d,{fontSize:t,letterSpacing:n}):{width:0,height:0},p=function(b,N){var w=qe(u)?u(b.value,N):b.value;return m==="width"?i_e(Mh(w,{fontSize:t,letterSpacing:n}),v,h):Mh(w,{fontSize:t,letterSpacing:n})[m]},g=a.length>=2?vr(a[1].coordinate-a[0].coordinate):1,x=o_e(i,g,m);return c==="equidistantPreserveStart"?c_e(g,x,p,a,o):(c==="preserveStart"||c==="preserveStartEnd"?f=m_e(g,x,p,a,o,c==="preserveStartEnd"):f=f_e(g,x,p,a,o),f.filter(function(y){return y.isShow}))}var p_e=["viewBox"],g_e=["viewBox"],v_e=["ticks"];function Zu(e){"@babel/helpers - typeof";return Zu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zu(e)}function zc(){return zc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zc.apply(this,arguments)}function $T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Nn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$T(Object(n),!0).forEach(function(r){Z_(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$T(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function gb(e,t){if(e==null)return{};var n=x_e(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function x_e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function y_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b6(r.key),r)}}function b_e(e,t,n){return t&&RT(e.prototype,t),n&&RT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function j_e(e,t,n){return t=Mv(t),w_e(e,y6()?Reflect.construct(t,n||[],Mv(e).constructor):t.apply(e,n))}function w_e(e,t){if(t&&(Zu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return N_e(e)}function N_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(y6=function(){return!!e})()}function Mv(e){return Mv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Mv(e)}function S_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M1(e,t)}function M1(e,t){return M1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},M1(e,t)}function Z_(e,t,n){return t=b6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b6(e){var t=__e(e,"string");return Zu(t)=="symbol"?t:t+""}function __e(e,t){if(Zu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Zu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $d=function(e){function t(n){var r;return y_e(this,t),r=j_e(this,t,[n]),r.state={fontSize:"",letterSpacing:""},r}return S_e(t,e),b_e(t,[{key:"shouldComponentUpdate",value:function(r,a){var i=r.viewBox,o=gb(r,p_e),l=this.props,c=l.viewBox,u=gb(l,g_e);return!Zc(i,c)||!Zc(o,u)||!Zc(a,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var a=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var a=this.props,i=a.x,o=a.y,l=a.width,c=a.height,u=a.orientation,d=a.tickSize,h=a.mirror,f=a.tickMargin,m,v,p,g,x,y,b=h?-1:1,N=r.tickSize||d,w=pe(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":m=v=r.coordinate,g=o+ +!h*c,p=g-b*N,y=p-b*f,x=w;break;case"left":p=g=r.coordinate,v=i+ +!h*l,m=v-b*N,x=m-b*f,y=w;break;case"right":p=g=r.coordinate,v=i+ +h*l,m=v+b*N,x=m+b*f,y=w;break;default:m=v=r.coordinate,g=o+ +h*c,p=g+b*N,y=p+b*f,x=w;break}return{line:{x1:m,y1:p,x2:v,y2:g},tick:{x,y}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,a=r.orientation,i=r.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,a=r.orientation,i=r.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,a=r.x,i=r.y,o=r.width,l=r.height,c=r.orientation,u=r.mirror,d=r.axisLine,h=Nn(Nn(Nn({},Fe(this.props,!1)),Fe(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var f=+(c==="top"&&!u||c==="bottom"&&u);h=Nn(Nn({},h),{},{x1:a,y1:i+f*l,x2:a+o,y2:i+f*l})}else{var m=+(c==="left"&&!u||c==="right"&&u);h=Nn(Nn({},h),{},{x1:a+m*o,y1:i,x2:a+m*o,y2:i+l})}return $.createElement("line",zc({},h,{className:Ye("recharts-cartesian-axis-line",es(d,"className"))}))}},{key:"renderTicks",value:function(r,a,i){var o=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,h=l.tickFormatter,f=l.unit,m=J_(Nn(Nn({},this.props),{},{ticks:r}),a,i),v=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),g=Fe(this.props,!1),x=Fe(d,!1),y=Nn(Nn({},g),{},{fill:"none"},Fe(c,!1)),b=m.map(function(N,w){var S=o.getTickLineCoord(N),_=S.line,C=S.tick,P=Nn(Nn(Nn(Nn({textAnchor:v,verticalAnchor:p},g),{},{stroke:"none",fill:u},x),C),{},{index:w,payload:N,visibleTicksCount:m.length,tickFormatter:h});return $.createElement(gt,zc({className:"recharts-cartesian-axis-tick",key:"tick-".concat(N.value,"-").concat(N.coordinate,"-").concat(N.tickCoord)},Fl(o.props,N,w)),c&&$.createElement("line",zc({},y,_,{className:Ye("recharts-cartesian-axis-tick-line",es(c,"className"))})),d&&t.renderTickItem(d,P,"".concat(qe(h)?h(N.value,w):N.value).concat(f||"")))});return $.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var r=this,a=this.props,i=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,u=a.className,d=a.hide;if(d)return null;var h=this.props,f=h.ticks,m=gb(h,v_e),v=f;return qe(c)&&(v=f&&f.length>0?c(this.props):c(m)),o<=0||l<=0||!v||!v.length?null:$.createElement(gt,{className:Ye("recharts-cartesian-axis",u),ref:function(g){r.layerReference=g}},i&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),Fn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,a,i){var o,l=Ye(a.className,"recharts-cartesian-axis-tick-value");return $.isValidElement(r)?o=$.cloneElement(r,Nn(Nn({},a),{},{className:l})):qe(r)?o=r(Nn(Nn({},a),{},{className:l})):o=$.createElement(Bl,zc({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(j.Component);Z_($d,"displayName","CartesianAxis");Z_($d,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var C_e=["x1","y1","x2","y2","key"],P_e=["offset"];function ql(e){"@babel/helpers - typeof";return ql=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ql(e)}function LT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function or(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LT(Object(n),!0).forEach(function(r){A_e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function A_e(e,t,n){return t=k_e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k_e(e){var t=E_e(e,"string");return ql(t)=="symbol"?t:t+""}function E_e(e,t){if(ql(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ql(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ul(){return ul=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ul.apply(this,arguments)}function FT(e,t){if(e==null)return{};var n=T_e(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function T_e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var O_e=function(t){var n=t.fill;if(!n||n==="none")return null;var r=t.fillOpacity,a=t.x,i=t.y,o=t.width,l=t.height,c=t.ry;return $.createElement("rect",{x:a,y:i,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function j6(e,t){var n;if($.isValidElement(e))n=$.cloneElement(e,t);else if(qe(e))n=e(t);else{var r=t.x1,a=t.y1,i=t.x2,o=t.y2,l=t.key,c=FT(t,C_e),u=Fe(c,!1);u.offset;var d=FT(u,P_e);n=$.createElement("line",ul({},d,{x1:r,y1:a,x2:i,y2:o,fill:"none",key:l}))}return n}function D_e(e){var t=e.x,n=e.width,r=e.horizontal,a=r===void 0?!0:r,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var u=or(or({},e),{},{x1:t,y1:l,x2:t+n,y2:l,key:"line-".concat(c),index:c});return j6(a,u)});return $.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function M_e(e){var t=e.y,n=e.height,r=e.vertical,a=r===void 0?!0:r,i=e.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var u=or(or({},e),{},{x1:l,y1:t,x2:l,y2:t+n,key:"line-".concat(c),index:c});return j6(a,u)});return $.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function I_e(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,a=e.y,i=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var d=l.map(function(f){return Math.round(f+a-a)}).sort(function(f,m){return f-m});a!==d[0]&&d.unshift(0);var h=d.map(function(f,m){var v=!d[m+1],p=v?a+o-f:d[m+1]-f;if(p<=0)return null;var g=m%t.length;return $.createElement("rect",{key:"react-".concat(m),y:f,x:r,height:p,width:i,stroke:"none",fill:t[g],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return $.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function $_e(e){var t=e.vertical,n=t===void 0?!0:t,r=e.verticalFill,a=e.fillOpacity,i=e.x,o=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!n||!r||!r.length)return null;var d=u.map(function(f){return Math.round(f+i-i)}).sort(function(f,m){return f-m});i!==d[0]&&d.unshift(0);var h=d.map(function(f,m){var v=!d[m+1],p=v?i+l-f:d[m+1]-f;if(p<=0)return null;var g=m%r.length;return $.createElement("rect",{key:"react-".concat(m),x:f,y:o,width:p,height:c,stroke:"none",fill:r[g],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return $.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var R_e=function(t,n){var r=t.xAxis,a=t.width,i=t.height,o=t.offset;return v5(J_(or(or(or({},$d.defaultProps),r),{},{ticks:ei(r,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,n)},L_e=function(t,n){var r=t.yAxis,a=t.width,i=t.height,o=t.offset;return v5(J_(or(or(or({},$d.defaultProps),r),{},{ticks:ei(r,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,n)},bc={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function km(e){var t,n,r,a,i,o,l=G_(),c=Y_(),u=_Se(),d=or(or({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:bc.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:bc.fill,horizontal:(r=e.horizontal)!==null&&r!==void 0?r:bc.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:bc.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:bc.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:bc.verticalFill,x:pe(e.x)?e.x:u.left,y:pe(e.y)?e.y:u.top,width:pe(e.width)?e.width:u.width,height:pe(e.height)?e.height:u.height}),h=d.x,f=d.y,m=d.width,v=d.height,p=d.syncWithTicks,g=d.horizontalValues,x=d.verticalValues,y=wSe(),b=NSe();if(!pe(m)||m<=0||!pe(v)||v<=0||!pe(h)||h!==+h||!pe(f)||f!==+f)return null;var N=d.verticalCoordinatesGenerator||R_e,w=d.horizontalCoordinatesGenerator||L_e,S=d.horizontalPoints,_=d.verticalPoints;if((!S||!S.length)&&qe(w)){var C=g&&g.length,P=w({yAxis:b?or(or({},b),{},{ticks:C?g:b.ticks}):void 0,width:l,height:c,offset:u},C?!0:p);Ws(Array.isArray(P),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(ql(P),"]")),Array.isArray(P)&&(S=P)}if((!_||!_.length)&&qe(N)){var A=x&&x.length,O=N({xAxis:y?or(or({},y),{},{ticks:A?x:y.ticks}):void 0,width:l,height:c,offset:u},A?!0:p);Ws(Array.isArray(O),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(ql(O),"]")),Array.isArray(O)&&(_=O)}return $.createElement("g",{className:"recharts-cartesian-grid"},$.createElement(O_e,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),$.createElement(D_e,ul({},d,{offset:u,horizontalPoints:S,xAxis:y,yAxis:b})),$.createElement(M_e,ul({},d,{offset:u,verticalPoints:_,xAxis:y,yAxis:b})),$.createElement(I_e,ul({},d,{horizontalPoints:S})),$.createElement($_e,ul({},d,{verticalPoints:_})))}km.displayName="CartesianGrid";var F_e=["layout","type","stroke","connectNulls","isRange","ref"],B_e=["key"],w6;function ed(e){"@babel/helpers - typeof";return ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ed(e)}function N6(e,t){if(e==null)return{};var n=z_e(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function z_e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function dl(){return dl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dl.apply(this,arguments)}function BT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Di(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BT(Object(n),!0).forEach(function(r){ya(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function V_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_6(r.key),r)}}function q_e(e,t,n){return t&&zT(e.prototype,t),n&&zT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function U_e(e,t,n){return t=Iv(t),W_e(e,S6()?Reflect.construct(t,n||[],Iv(e).constructor):t.apply(e,n))}function W_e(e,t){if(t&&(ed(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return H_e(e)}function H_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(S6=function(){return!!e})()}function Iv(e){return Iv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Iv(e)}function K_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I1(e,t)}function I1(e,t){return I1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},I1(e,t)}function ya(e,t,n){return t=_6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _6(e){var t=G_e(e,"string");return ed(t)=="symbol"?t:t+""}function G_e(e,t){if(ed(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ed(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bs=function(e){function t(){var n;V_e(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=U_e(this,t,[].concat(a)),ya(n,"state",{isAnimationFinished:!0}),ya(n,"id",Ad("recharts-area-")),ya(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),qe(o)&&o()}),ya(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),qe(o)&&o()}),n}return K_e(t,e),q_e(t,[{key:"renderDots",value:function(r,a,i){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,u=c.dot,d=c.points,h=c.dataKey,f=Fe(this.props,!1),m=Fe(u,!0),v=d.map(function(g,x){var y=Di(Di(Di({key:"dot-".concat(x),r:3},f),m),{},{index:x,cx:g.x,cy:g.y,dataKey:h,value:g.value,payload:g.payload,points:d});return t.renderDotItem(u,y)}),p={clipPath:r?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return $.createElement(gt,dl({className:"recharts-area-dots"},p),v)}},{key:"renderHorizontalRect",value:function(r){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].x,u=o[o.length-1].x,d=r*Math.abs(c-u),h=eo(o.map(function(f){return f.y||0}));return pe(i)&&typeof i=="number"?h=Math.max(i,h):i&&Array.isArray(i)&&i.length&&(h=Math.max(eo(i.map(function(f){return f.y||0})),h)),pe(h)?$.createElement("rect",{x:c<u?c:c-d,y:0,width:d,height:Math.floor(h+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].y,u=o[o.length-1].y,d=r*Math.abs(c-u),h=eo(o.map(function(f){return f.x||0}));return pe(i)&&typeof i=="number"?h=Math.max(i,h):i&&Array.isArray(i)&&i.length&&(h=Math.max(eo(i.map(function(f){return f.x||0})),h)),pe(h)?$.createElement("rect",{x:0,y:c<u?c:c-d,width:h+(l?parseInt("".concat(l),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(r){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,a,i,o){var l=this.props,c=l.layout,u=l.type,d=l.stroke,h=l.connectNulls,f=l.isRange;l.ref;var m=N6(l,F_e);return $.createElement(gt,{clipPath:i?"url(#clipPath-".concat(o,")"):null},$.createElement(ru,dl({},Fe(m,!0),{points:r,connectNulls:h,type:u,baseLine:a,layout:c,stroke:"none",className:"recharts-area-area"})),d!=="none"&&$.createElement(ru,dl({},Fe(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:h,fill:"none",points:r})),d!=="none"&&f&&$.createElement(ru,dl({},Fe(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:h,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(r,a){var i=this,o=this.props,l=o.points,c=o.baseLine,u=o.isAnimationActive,d=o.animationBegin,h=o.animationDuration,f=o.animationEasing,m=o.animationId,v=this.state,p=v.prevPoints,g=v.prevBaseLine;return $.createElement(Ta,{begin:d,duration:h,isActive:u,easing:f,from:{t:0},to:{t:1},key:"area-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var y=x.t;if(p){var b=p.length/l.length,N=l.map(function(C,P){var A=Math.floor(P*b);if(p[A]){var O=p[A],E=Dr(O.x,C.x),z=Dr(O.y,C.y);return Di(Di({},C),{},{x:E(y),y:z(y)})}return C}),w;if(pe(c)&&typeof c=="number"){var S=Dr(g,c);w=S(y)}else if(Qe(c)||Pd(c)){var _=Dr(g,0);w=_(y)}else w=c.map(function(C,P){var A=Math.floor(P*b);if(g[A]){var O=g[A],E=Dr(O.x,C.x),z=Dr(O.y,C.y);return Di(Di({},C),{},{x:E(y),y:z(y)})}return C});return i.renderAreaStatically(N,w,r,a)}return $.createElement(gt,null,$.createElement("defs",null,$.createElement("clipPath",{id:"animationClipPath-".concat(a)},i.renderClipRect(y))),$.createElement(gt,{clipPath:"url(#animationClipPath-".concat(a,")")},i.renderAreaStatically(l,c,r,a)))})}},{key:"renderArea",value:function(r,a){var i=this.props,o=i.points,l=i.baseLine,c=i.isAnimationActive,u=this.state,d=u.prevPoints,h=u.prevBaseLine,f=u.totalLength;return c&&o&&o.length&&(!d&&f>0||!zu(d,o)||!zu(h,l))?this.renderAreaWithAnimation(r,a):this.renderAreaStatically(o,l,r,a)}},{key:"render",value:function(){var r,a=this.props,i=a.hide,o=a.dot,l=a.points,c=a.className,u=a.top,d=a.left,h=a.xAxis,f=a.yAxis,m=a.width,v=a.height,p=a.isAnimationActive,g=a.id;if(i||!l||!l.length)return null;var x=this.state.isAnimationFinished,y=l.length===1,b=Ye("recharts-area",c),N=h&&h.allowDataOverflow,w=f&&f.allowDataOverflow,S=N||w,_=Qe(g)?this.id:g,C=(r=Fe(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},P=C.r,A=P===void 0?3:P,O=C.strokeWidth,E=O===void 0?2:O,z=jse(o)?o:{},I=z.clipDot,W=I===void 0?!0:I,V=A*2+E;return $.createElement(gt,{className:b},N||w?$.createElement("defs",null,$.createElement("clipPath",{id:"clipPath-".concat(_)},$.createElement("rect",{x:N?d:d-m/2,y:w?u:u-v/2,width:N?m:m*2,height:w?v:v*2})),!W&&$.createElement("clipPath",{id:"clipPath-dots-".concat(_)},$.createElement("rect",{x:d-V/2,y:u-V/2,width:m+V,height:v+V}))):null,y?null:this.renderArea(S,_),(o||y)&&this.renderDots(S,W,_),(!p||x)&&si.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,a){return r.animationId!==a.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:r.points!==a.curPoints||r.baseLine!==a.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(j.PureComponent);w6=bs;ya(bs,"displayName","Area");ya(bs,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!_a.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});ya(bs,"getBaseValue",function(e,t,n,r){var a=e.layout,i=e.baseValue,o=t.props.baseValue,l=o??i;if(pe(l)&&typeof l=="number")return l;var c=a==="horizontal"?r:n,u=c.scale.domain();if(c.type==="number"){var d=Math.max(u[0],u[1]),h=Math.min(u[0],u[1]);return l==="dataMin"?h:l==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});ya(bs,"getComposedData",function(e){var t=e.props,n=e.item,r=e.xAxis,a=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,u=e.stackedData,d=e.dataStartIndex,h=e.displayedData,f=e.offset,m=t.layout,v=u&&u.length,p=w6.getBaseValue(t,n,r,a),g=m==="horizontal",x=!1,y=h.map(function(N,w){var S;v?S=u[d+w]:(S=kn(N,c),Array.isArray(S)?x=!0:S=[p,S]);var _=S[1]==null||v&&kn(N,c)==null;return g?{x:hE({axis:r,ticks:i,bandSize:l,entry:N,index:w}),y:_?null:a.scale(S[1]),value:S,payload:N}:{x:_?null:r.scale(S[1]),y:hE({axis:a,ticks:o,bandSize:l,entry:N,index:w}),value:S,payload:N}}),b;return v||x?b=y.map(function(N){var w=Array.isArray(N.value)?N.value[0]:null;return g?{x:N.x,y:w!=null&&N.y!=null?a.scale(w):null}:{x:w!=null?r.scale(w):null,y:N.y}}):b=g?a.scale(p):r.scale(p),Di({points:y,baseLine:b,layout:m,isRange:x},f)});ya(bs,"renderDotItem",function(e,t){var n;if($.isValidElement(e))n=$.cloneElement(e,t);else if(qe(e))n=e(t);else{var r=Ye("recharts-area-dot",typeof e!="boolean"?e.className:""),a=t.key,i=N6(t,B_e);n=$.createElement(yy,dl({},i,{key:a,className:r}))}return n});function td(e){"@babel/helpers - typeof";return td=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},td(e)}function Y_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q_e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,A6(r.key),r)}}function X_e(e,t,n){return t&&Q_e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function J_e(e,t,n){return t=$v(t),Z_e(e,C6()?Reflect.construct(t,n||[],$v(e).constructor):t.apply(e,n))}function Z_e(e,t){if(t&&(td(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return e2e(e)}function e2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(C6=function(){return!!e})()}function $v(e){return $v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$v(e)}function t2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$1(e,t)}function $1(e,t){return $1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},$1(e,t)}function P6(e,t,n){return t=A6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A6(e){var t=n2e(e,"string");return td(t)=="symbol"?t:t+""}function n2e(e,t){if(td(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(td(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function R1(){return R1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},R1.apply(this,arguments)}function r2e(e){var t=e.xAxisId,n=G_(),r=Y_(),a=u6(t);return a==null?null:j.createElement($d,R1({},a,{className:Ye("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(o){return ei(o,!0)}}))}var Bo=function(e){function t(){return Y_e(this,t),J_e(this,t,arguments)}return t2e(t,e),X_e(t,[{key:"render",value:function(){return j.createElement(r2e,this.props)}}])}(j.Component);P6(Bo,"displayName","XAxis");P6(Bo,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function nd(e){"@babel/helpers - typeof";return nd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nd(e)}function s2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a2e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,T6(r.key),r)}}function i2e(e,t,n){return t&&a2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function o2e(e,t,n){return t=Rv(t),l2e(e,k6()?Reflect.construct(t,n||[],Rv(e).constructor):t.apply(e,n))}function l2e(e,t){if(t&&(nd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return c2e(e)}function c2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(k6=function(){return!!e})()}function Rv(e){return Rv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Rv(e)}function u2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L1(e,t)}function L1(e,t){return L1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},L1(e,t)}function E6(e,t,n){return t=T6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T6(e){var t=d2e(e,"string");return nd(t)=="symbol"?t:t+""}function d2e(e,t){if(nd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(nd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function F1(){return F1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F1.apply(this,arguments)}var h2e=function(t){var n=t.yAxisId,r=G_(),a=Y_(),i=d6(n);return i==null?null:j.createElement($d,F1({},i,{className:Ye("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:a},ticksGenerator:function(l){return ei(l,!0)}}))},zo=function(e){function t(){return s2e(this,t),o2e(this,t,arguments)}return u2e(t,e),i2e(t,[{key:"render",value:function(){return j.createElement(h2e,this.props)}}])}(j.Component);E6(zo,"displayName","YAxis");E6(zo,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function VT(e){return g2e(e)||p2e(e)||m2e(e)||f2e()}function f2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m2e(e,t){if(e){if(typeof e=="string")return B1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B1(e,t)}}function p2e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function g2e(e){if(Array.isArray(e))return B1(e)}function B1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var z1=function(t,n,r,a,i){var o=gs(t,X_),l=gs(t,Ay),c=[].concat(VT(o),VT(l)),u=gs(t,Ey),d="".concat(a,"Id"),h=a[0],f=n;if(c.length&&(f=c.reduce(function(p,g){if(g.props[d]===r&&Pa(g.props,"extendDomain")&&pe(g.props[h])){var x=g.props[h];return[Math.min(p[0],x),Math.max(p[1],x)]}return p},f)),u.length){var m="".concat(h,"1"),v="".concat(h,"2");f=u.reduce(function(p,g){if(g.props[d]===r&&Pa(g.props,"extendDomain")&&pe(g.props[m])&&pe(g.props[v])){var x=g.props[m],y=g.props[v];return[Math.min(p[0],x,y),Math.max(p[1],x,y)]}return p},f)}return i&&i.length&&(f=i.reduce(function(p,g){return pe(g)?[Math.min(p[0],g),Math.max(p[1],g)]:p},f)),f},O6={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,h,f){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new a(d,h||c,f),v=n?n+u:u;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],m]:c._events[v].push(m):(c._events[v]=m,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)t.call(d,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=n?n+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,m=h.length,v=new Array(m);f<m;f++)v[f]=h[f].fn;return v},l.prototype.listenerCount=function(u){var d=n?n+u:u,h=this._events[d];return h?h.fn?1:h.length:0},l.prototype.emit=function(u,d,h,f,m,v){var p=n?n+u:u;if(!this._events[p])return!1;var g=this._events[p],x=arguments.length,y,b;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),x){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,d),!0;case 3:return g.fn.call(g.context,d,h),!0;case 4:return g.fn.call(g.context,d,h,f),!0;case 5:return g.fn.call(g.context,d,h,f,m),!0;case 6:return g.fn.call(g.context,d,h,f,m,v),!0}for(b=1,y=new Array(x-1);b<x;b++)y[b-1]=arguments[b];g.fn.apply(g.context,y)}else{var N=g.length,w;for(b=0;b<N;b++)switch(g[b].once&&this.removeListener(u,g[b].fn,void 0,!0),x){case 1:g[b].fn.call(g[b].context);break;case 2:g[b].fn.call(g[b].context,d);break;case 3:g[b].fn.call(g[b].context,d,h);break;case 4:g[b].fn.call(g[b].context,d,h,f);break;default:if(!y)for(w=1,y=new Array(x-1);w<x;w++)y[w-1]=arguments[w];g[b].fn.apply(g[b].context,y)}}return!0},l.prototype.on=function(u,d,h){return i(this,u,d,h,!1)},l.prototype.once=function(u,d,h){return i(this,u,d,h,!0)},l.prototype.removeListener=function(u,d,h,f){var m=n?n+u:u;if(!this._events[m])return this;if(!d)return o(this,m),this;var v=this._events[m];if(v.fn)v.fn===d&&(!f||v.once)&&(!h||v.context===h)&&o(this,m);else{for(var p=0,g=[],x=v.length;p<x;p++)(v[p].fn!==d||f&&!v[p].once||h&&v[p].context!==h)&&g.push(v[p]);g.length?this._events[m]=g.length===1?g[0]:g:o(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&o(this,d)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l})(O6);var v2e=O6.exports;const x2e=Ct(v2e);var vb=new x2e,xb="recharts.syncMouseEvents";function Xf(e){"@babel/helpers - typeof";return Xf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xf(e)}function y2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b2e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,D6(r.key),r)}}function j2e(e,t,n){return t&&b2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function yb(e,t,n){return t=D6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D6(e){var t=w2e(e,"string");return Xf(t)=="symbol"?t:t+""}function w2e(e,t){if(Xf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Xf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var N2e=function(){function e(){y2e(this,e),yb(this,"activeIndex",0),yb(this,"coordinateList",[]),yb(this,"layout","horizontal")}return j2e(e,[{key:"setDetails",value:function(n){var r,a=n.coordinateList,i=a===void 0?null:a,o=n.container,l=o===void 0?null:o,c=n.layout,u=c===void 0?null:c,d=n.offset,h=d===void 0?null:d,f=n.mouseHandlerCallback,m=f===void 0?null:f;this.coordinateList=(r=i??this.coordinateList)!==null&&r!==void 0?r:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=h??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,d=((r=window)===null||r===void 0?void 0:r.scrollY)||0,h=i+c+u,f=o+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:h,pageY:f})}}}])}();function S2e(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var r=e==null?void 0:e[0],a=e==null?void 0:e[1];if(r&&a&&pe(r)&&pe(a))return!0}return!1}function _2e(e,t,n,r){var a=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-a,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function M6(e){var t=e.cx,n=e.cy,r=e.radius,a=e.startAngle,i=e.endAngle,o=Ut(t,n,r,a),l=Ut(t,n,r,i);return{points:[o,l],cx:t,cy:n,radius:r,startAngle:a,endAngle:i}}function C2e(e,t,n){var r,a,i,o;if(e==="horizontal")r=t.x,i=r,a=n.top,o=n.top+n.height;else if(e==="vertical")a=t.y,o=a,r=n.left,i=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,d=t.outerRadius,h=t.angle,f=Ut(l,c,u,h),m=Ut(l,c,d,h);r=f.x,a=f.y,i=m.x,o=m.y}else return M6(t);return[{x:r,y:a},{x:i,y:o}]}function Jf(e){"@babel/helpers - typeof";return Jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jf(e)}function qT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Op(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qT(Object(n),!0).forEach(function(r){P2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function P2e(e,t,n){return t=A2e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A2e(e){var t=k2e(e,"string");return Jf(t)=="symbol"?t:t+""}function k2e(e,t){if(Jf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Jf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function E2e(e){var t,n,r=e.element,a=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,h=e.layout,f=e.chartName,m=(t=r.props.cursor)!==null&&t!==void 0?t:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!m||!i||!o||f!=="ScatterChart"&&a!=="axis")return null;var v,p=ru;if(f==="ScatterChart")v=o,p=Jje;else if(f==="BarChart")v=_2e(h,o,c,d),p=U_;else if(h==="radial"){var g=M6(o),x=g.cx,y=g.cy,b=g.radius,N=g.startAngle,w=g.endAngle;v={cx:x,cy:y,startAngle:N,endAngle:w,innerRadius:b,outerRadius:b},p=A5}else v={points:C2e(h,o,c)},p=ru;var S=Op(Op(Op(Op({stroke:"#ccc",pointerEvents:"none"},c),v),Fe(m,!1)),{},{payload:l,payloadIndex:u,className:Ye("recharts-tooltip-cursor",m.className)});return j.isValidElement(m)?j.cloneElement(m,S):j.createElement(p,S)}var T2e=["item"],O2e=["children","className","width","height","style","compact","title","desc"];function rd(e){"@babel/helpers - typeof";return rd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rd(e)}function Vc(){return Vc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vc.apply(this,arguments)}function UT(e,t){return I2e(e)||M2e(e,t)||$6(e,t)||D2e()}function D2e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function M2e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function I2e(e){if(Array.isArray(e))return e}function WT(e,t){if(e==null)return{};var n=$2e(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function $2e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function R2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L2e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,R6(r.key),r)}}function F2e(e,t,n){return t&&L2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function B2e(e,t,n){return t=Lv(t),z2e(e,I6()?Reflect.construct(t,n||[],Lv(e).constructor):t.apply(e,n))}function z2e(e,t){if(t&&(rd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return V2e(e)}function V2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(I6=function(){return!!e})()}function Lv(e){return Lv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Lv(e)}function q2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V1(e,t)}function V1(e,t){return V1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},V1(e,t)}function sd(e){return H2e(e)||W2e(e)||$6(e)||U2e()}function U2e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $6(e,t){if(e){if(typeof e=="string")return q1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q1(e,t)}}function W2e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function H2e(e){if(Array.isArray(e))return q1(e)}function q1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function HT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?HT(Object(n),!0).forEach(function(r){Ve(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ve(e,t,n){return t=R6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R6(e){var t=K2e(e,"string");return rd(t)=="symbol"?t:t+""}function K2e(e,t){if(rd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(rd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var G2e={xAxis:["bottom","top"],yAxis:["left","right"]},Y2e={width:"100%",height:"100%"},L6={x:0,y:0};function Dp(e){return e}var Q2e=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},X2e=function(t,n,r,a){var i=n.find(function(d){return d&&d.index===r});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=a.radius;return ue(ue(ue({},a),Ut(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,u=a.angle;return ue(ue(ue({},a),Ut(a.cx,a.cy,c,u)),{},{angle:u,radius:c})}return L6},Ty=function(t,n){var r=n.graphicalItems,a=n.dataStartIndex,i=n.dataEndIndex,o=(r??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(sd(l),sd(u)):l},[]);return o.length>0?o:t&&t.length&&pe(a)&&pe(i)?t.slice(a,i+1):[]};function F6(e){return e==="number"?[0,"auto"]:void 0}var U1=function(t,n,r,a){var i=t.graphicalItems,o=t.tooltipAxis,l=Ty(n,t);return r<0||!i||!i.length||r>=l.length?null:i.reduce(function(c,u){var d,h=(d=u.props.data)!==null&&d!==void 0?d:n;h&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=r&&(h=h.slice(t.dataStartIndex,t.dataEndIndex+1));var f;if(o.dataKey&&!o.allowDuplicatedCategory){var m=h===void 0?l:h;f=Fg(m,o.dataKey,a)}else f=h&&h[r]||l[r];return f?[].concat(sd(c),[w5(u,f)]):c},[])},KT=function(t,n,r,a){var i=a||{x:t.chartX,y:t.chartY},o=Q2e(i,r),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,d=wye(o,l,u,c);if(d>=0&&u){var h=u[d]&&u[d].value,f=U1(t,n,d,h),m=X2e(r,l,d,i);return{activeTooltipIndex:d,activeLabel:h,activePayload:f,activeCoordinate:m}}return null},J2e=function(t,n){var r=n.axes,a=n.graphicalItems,i=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=t.layout,h=t.children,f=t.stackOffset,m=g5(d,i);return r.reduce(function(v,p){var g,x=p.type.defaultProps!==void 0?ue(ue({},p.type.defaultProps),p.props):p.props,y=x.type,b=x.dataKey,N=x.allowDataOverflow,w=x.allowDuplicatedCategory,S=x.scale,_=x.ticks,C=x.includeHidden,P=x[o];if(v[P])return v;var A=Ty(t.data,{graphicalItems:a.filter(function(te){var ne,T=o in te.props?te.props[o]:(ne=te.type.defaultProps)===null||ne===void 0?void 0:ne[o];return T===P}),dataStartIndex:c,dataEndIndex:u}),O=A.length,E,z,I;S2e(x.domain,N,y)&&(E=a1(x.domain,null,N),m&&(y==="number"||S!=="auto")&&(I=$h(A,b,"category")));var W=F6(y);if(!E||E.length===0){var V,H=(V=x.domain)!==null&&V!==void 0?V:W;if(b){if(E=$h(A,b,y),y==="category"&&m){var k=dse(E);w&&k?(z=E,E=_v(0,O)):w||(E=gE(H,E,p).reduce(function(te,ne){return te.indexOf(ne)>=0?te:[].concat(sd(te),[ne])},[]))}else if(y==="category")w?E=E.filter(function(te){return te!==""&&!Qe(te)}):E=gE(H,E,p).reduce(function(te,ne){return te.indexOf(ne)>=0||ne===""||Qe(ne)?te:[].concat(sd(te),[ne])},[]);else if(y==="number"){var D=Pye(A,a.filter(function(te){var ne,T,ce=o in te.props?te.props[o]:(ne=te.type.defaultProps)===null||ne===void 0?void 0:ne[o],me="hide"in te.props?te.props.hide:(T=te.type.defaultProps)===null||T===void 0?void 0:T.hide;return ce===P&&(C||!me)}),b,i,d);D&&(E=D)}m&&(y==="number"||S!=="auto")&&(I=$h(A,b,"category"))}else m?E=_v(0,O):l&&l[P]&&l[P].hasStack&&y==="number"?E=f==="expand"?[0,1]:j5(l[P].stackGroups,c,u):E=p5(A,a.filter(function(te){var ne=o in te.props?te.props[o]:te.type.defaultProps[o],T="hide"in te.props?te.props.hide:te.type.defaultProps.hide;return ne===P&&(C||!T)}),y,d,!0);if(y==="number")E=z1(h,E,P,i,_),H&&(E=a1(H,E,N));else if(y==="category"&&H){var X=H,Q=E.every(function(te){return X.indexOf(te)>=0});Q&&(E=X)}}return ue(ue({},v),{},Ve({},P,ue(ue({},x),{},{axisType:i,domain:E,categoricalDomain:I,duplicateDomain:z,originalDomain:(g=x.domain)!==null&&g!==void 0?g:W,isCategorical:m,layout:d})))},{})},Z2e=function(t,n){var r=n.graphicalItems,a=n.Axis,i=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=t.layout,h=t.children,f=Ty(t.data,{graphicalItems:r,dataStartIndex:c,dataEndIndex:u}),m=f.length,v=g5(d,i),p=-1;return r.reduce(function(g,x){var y=x.type.defaultProps!==void 0?ue(ue({},x.type.defaultProps),x.props):x.props,b=y[o],N=F6("number");if(!g[b]){p++;var w;return v?w=_v(0,m):l&&l[b]&&l[b].hasStack?(w=j5(l[b].stackGroups,c,u),w=z1(h,w,b,i)):(w=a1(N,p5(f,r.filter(function(S){var _,C,P=o in S.props?S.props[o]:(_=S.type.defaultProps)===null||_===void 0?void 0:_[o],A="hide"in S.props?S.props.hide:(C=S.type.defaultProps)===null||C===void 0?void 0:C.hide;return P===b&&!A}),"number",d),a.defaultProps.allowDataOverflow),w=z1(h,w,b,i)),ue(ue({},g),{},Ve({},b,ue(ue({axisType:i},a.defaultProps),{},{hide:!0,orientation:es(G2e,"".concat(i,".").concat(p%2),null),domain:w,originalDomain:N,isCategorical:v,layout:d})))}return g},{})},eCe=function(t,n){var r=n.axisType,a=r===void 0?"xAxis":r,i=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=t.children,h="".concat(a,"Id"),f=gs(d,i),m={};return f&&f.length?m=J2e(t,{axes:f,graphicalItems:o,axisType:a,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(m=Z2e(t,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),m},tCe=function(t){var n=zi(t),r=ei(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:v_(r,function(a){return a.coordinate}),tooltipAxis:n,tooltipAxisBandSize:fv(n,r)}},GT=function(t){var n=t.children,r=t.defaultShowTooltip,a=Hr(n,Gu),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},nCe=function(t){return!t||!t.length?!1:t.some(function(n){var r=ni(n&&n.type);return r&&r.indexOf("Bar")>=0})},YT=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},rCe=function(t,n){var r=t.props,a=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,u=r.width,d=r.height,h=r.children,f=r.margin||{},m=Hr(h,Gu),v=Hr(h,eu),p=Object.keys(c).reduce(function(w,S){var _=c[S],C=_.orientation;return!_.mirror&&!_.hide?ue(ue({},w),{},Ve({},C,w[C]+_.width)):w},{left:f.left||0,right:f.right||0}),g=Object.keys(o).reduce(function(w,S){var _=o[S],C=_.orientation;return!_.mirror&&!_.hide?ue(ue({},w),{},Ve({},C,es(w,"".concat(C))+_.height)):w},{top:f.top||0,bottom:f.bottom||0}),x=ue(ue({},g),p),y=x.bottom;m&&(x.bottom+=m.props.height||Gu.defaultProps.height),v&&n&&(x=_ye(x,a,r,n));var b=u-x.left-x.right,N=d-x.top-x.bottom;return ue(ue({brushBottom:y},x),{},{width:Math.max(b,0),height:Math.max(N,0)})},sCe=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},e2=function(t){var n=t.chartName,r=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,h=t.defaultProps,f=function(x,y){var b=y.graphicalItems,N=y.stackGroups,w=y.offset,S=y.updateId,_=y.dataStartIndex,C=y.dataEndIndex,P=x.barSize,A=x.layout,O=x.barGap,E=x.barCategoryGap,z=x.maxBarSize,I=YT(A),W=I.numericAxisName,V=I.cateAxisName,H=nCe(b),k=[];return b.forEach(function(D,X){var Q=Ty(x.data,{graphicalItems:[D],dataStartIndex:_,dataEndIndex:C}),te=D.type.defaultProps!==void 0?ue(ue({},D.type.defaultProps),D.props):D.props,ne=te.dataKey,T=te.maxBarSize,ce=te["".concat(W,"Id")],me=te["".concat(V,"Id")],le={},Z=c.reduce(function(Ne,Me){var He=y["".concat(Me.axisType,"Map")],dr=te["".concat(Me.axisType,"Id")];He&&He[dr]||Me.axisType==="zAxis"||Vl();var ct=He[dr];return ue(ue({},Ne),{},Ve(Ve({},Me.axisType,ct),"".concat(Me.axisType,"Ticks"),ei(ct)))},le),B=Z[V],oe=Z["".concat(V,"Ticks")],U=N&&N[ce]&&N[ce].hasStack&&$ye(D,N[ce].stackGroups),K=ni(D.type).indexOf("Bar")>=0,fe=fv(B,oe),Se=[],$e=H&&Nye({barSize:P,stackGroups:N,totalSize:sCe(Z,V)});if(K){var Ue,ft,Tt=Qe(T)?z:T,Rt=(Ue=(ft=fv(B,oe,!0))!==null&&ft!==void 0?ft:Tt)!==null&&Ue!==void 0?Ue:0;Se=Sye({barGap:O,barCategoryGap:E,bandSize:Rt!==fe?Rt:fe,sizeList:$e[me],maxBarSize:Tt}),Rt!==fe&&(Se=Se.map(function(Ne){return ue(ue({},Ne),{},{position:ue(ue({},Ne.position),{},{offset:Ne.position.offset-Rt/2})})}))}var ae=D&&D.type&&D.type.getComposedData;ae&&k.push({props:ue(ue({},ae(ue(ue({},Z),{},{displayedData:Q,props:x,dataKey:ne,item:D,bandSize:fe,barPosition:Se,offset:w,stackedData:U,layout:A,dataStartIndex:_,dataEndIndex:C}))),{},Ve(Ve(Ve({key:D.key||"item-".concat(X)},W,Z[W]),V,Z[V]),"animationId",S)),childIndex:Sse(D,x.children),item:D})}),k},m=function(x,y){var b=x.props,N=x.dataStartIndex,w=x.dataEndIndex,S=x.updateId;if(!cA({props:b}))return null;var _=b.children,C=b.layout,P=b.stackOffset,A=b.data,O=b.reverseStackOrder,E=YT(C),z=E.numericAxisName,I=E.cateAxisName,W=gs(_,r),V=Mye(A,W,"".concat(z,"Id"),"".concat(I,"Id"),P,O),H=c.reduce(function(te,ne){var T="".concat(ne.axisType,"Map");return ue(ue({},te),{},Ve({},T,eCe(b,ue(ue({},ne),{},{graphicalItems:W,stackGroups:ne.axisType===z&&V,dataStartIndex:N,dataEndIndex:w}))))},{}),k=rCe(ue(ue({},H),{},{props:b,graphicalItems:W}),y==null?void 0:y.legendBBox);Object.keys(H).forEach(function(te){H[te]=d(b,H[te],k,te.replace("Map",""),n)});var D=H["".concat(I,"Map")],X=tCe(D),Q=f(b,ue(ue({},H),{},{dataStartIndex:N,dataEndIndex:w,updateId:S,graphicalItems:W,stackGroups:V,offset:k}));return ue(ue({formattedGraphicalItems:Q,graphicalItems:W,offset:k,stackGroups:V},X),H)},v=function(g){function x(y){var b,N,w;return R2e(this,x),w=B2e(this,x,[y]),Ve(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Ve(w,"accessibilityManager",new N2e),Ve(w,"handleLegendBBoxUpdate",function(S){if(S){var _=w.state,C=_.dataStartIndex,P=_.dataEndIndex,A=_.updateId;w.setState(ue({legendBBox:S},m({props:w.props,dataStartIndex:C,dataEndIndex:P,updateId:A},ue(ue({},w.state),{},{legendBBox:S}))))}}),Ve(w,"handleReceiveSyncEvent",function(S,_,C){if(w.props.syncId===S){if(C===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent(_)}}),Ve(w,"handleBrushChange",function(S){var _=S.startIndex,C=S.endIndex;if(_!==w.state.dataStartIndex||C!==w.state.dataEndIndex){var P=w.state.updateId;w.setState(function(){return ue({dataStartIndex:_,dataEndIndex:C},m({props:w.props,dataStartIndex:_,dataEndIndex:C,updateId:P},w.state))}),w.triggerSyncEvent({dataStartIndex:_,dataEndIndex:C})}}),Ve(w,"handleMouseEnter",function(S){var _=w.getMouseInfo(S);if(_){var C=ue(ue({},_),{},{isTooltipActive:!0});w.setState(C),w.triggerSyncEvent(C);var P=w.props.onMouseEnter;qe(P)&&P(C,S)}}),Ve(w,"triggeredAfterMouseMove",function(S){var _=w.getMouseInfo(S),C=_?ue(ue({},_),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState(C),w.triggerSyncEvent(C);var P=w.props.onMouseMove;qe(P)&&P(C,S)}),Ve(w,"handleItemMouseEnter",function(S){w.setState(function(){return{isTooltipActive:!0,activeItem:S,activePayload:S.tooltipPayload,activeCoordinate:S.tooltipPosition||{x:S.cx,y:S.cy}}})}),Ve(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),Ve(w,"handleMouseMove",function(S){S.persist(),w.throttleTriggeredAfterMouseMove(S)}),Ve(w,"handleMouseLeave",function(S){w.throttleTriggeredAfterMouseMove.cancel();var _={isTooltipActive:!1};w.setState(_),w.triggerSyncEvent(_);var C=w.props.onMouseLeave;qe(C)&&C(_,S)}),Ve(w,"handleOuterEvent",function(S){var _=Nse(S),C=es(w.props,"".concat(_));if(_&&qe(C)){var P,A;/.*touch.*/i.test(_)?A=w.getMouseInfo(S.changedTouches[0]):A=w.getMouseInfo(S),C((P=A)!==null&&P!==void 0?P:{},S)}}),Ve(w,"handleClick",function(S){var _=w.getMouseInfo(S);if(_){var C=ue(ue({},_),{},{isTooltipActive:!0});w.setState(C),w.triggerSyncEvent(C);var P=w.props.onClick;qe(P)&&P(C,S)}}),Ve(w,"handleMouseDown",function(S){var _=w.props.onMouseDown;if(qe(_)){var C=w.getMouseInfo(S);_(C,S)}}),Ve(w,"handleMouseUp",function(S){var _=w.props.onMouseUp;if(qe(_)){var C=w.getMouseInfo(S);_(C,S)}}),Ve(w,"handleTouchMove",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(S.changedTouches[0])}),Ve(w,"handleTouchStart",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&w.handleMouseDown(S.changedTouches[0])}),Ve(w,"handleTouchEnd",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&w.handleMouseUp(S.changedTouches[0])}),Ve(w,"handleDoubleClick",function(S){var _=w.props.onDoubleClick;if(qe(_)){var C=w.getMouseInfo(S);_(C,S)}}),Ve(w,"handleContextMenu",function(S){var _=w.props.onContextMenu;if(qe(_)){var C=w.getMouseInfo(S);_(C,S)}}),Ve(w,"triggerSyncEvent",function(S){w.props.syncId!==void 0&&vb.emit(xb,w.props.syncId,S,w.eventEmitterSymbol)}),Ve(w,"applySyncEvent",function(S){var _=w.props,C=_.layout,P=_.syncMethod,A=w.state.updateId,O=S.dataStartIndex,E=S.dataEndIndex;if(S.dataStartIndex!==void 0||S.dataEndIndex!==void 0)w.setState(ue({dataStartIndex:O,dataEndIndex:E},m({props:w.props,dataStartIndex:O,dataEndIndex:E,updateId:A},w.state)));else if(S.activeTooltipIndex!==void 0){var z=S.chartX,I=S.chartY,W=S.activeTooltipIndex,V=w.state,H=V.offset,k=V.tooltipTicks;if(!H)return;if(typeof P=="function")W=P(k,S);else if(P==="value"){W=-1;for(var D=0;D<k.length;D++)if(k[D].value===S.activeLabel){W=D;break}}var X=ue(ue({},H),{},{x:H.left,y:H.top}),Q=Math.min(z,X.x+X.width),te=Math.min(I,X.y+X.height),ne=k[W]&&k[W].value,T=U1(w.state,w.props.data,W),ce=k[W]?{x:C==="horizontal"?k[W].coordinate:Q,y:C==="horizontal"?te:k[W].coordinate}:L6;w.setState(ue(ue({},S),{},{activeLabel:ne,activeCoordinate:ce,activePayload:T,activeTooltipIndex:W}))}else w.setState(S)}),Ve(w,"renderCursor",function(S){var _,C=w.state,P=C.isTooltipActive,A=C.activeCoordinate,O=C.activePayload,E=C.offset,z=C.activeTooltipIndex,I=C.tooltipAxisBandSize,W=w.getTooltipEventType(),V=(_=S.props.active)!==null&&_!==void 0?_:P,H=w.props.layout,k=S.key||"_recharts-cursor";return $.createElement(E2e,{key:k,activeCoordinate:A,activePayload:O,activeTooltipIndex:z,chartName:n,element:S,isActive:V,layout:H,offset:E,tooltipAxisBandSize:I,tooltipEventType:W})}),Ve(w,"renderPolarAxis",function(S,_,C){var P=es(S,"type.axisType"),A=es(w.state,"".concat(P,"Map")),O=S.type.defaultProps,E=O!==void 0?ue(ue({},O),S.props):S.props,z=A&&A[E["".concat(P,"Id")]];return j.cloneElement(S,ue(ue({},z),{},{className:Ye(P,z.className),key:S.key||"".concat(_,"-").concat(C),ticks:ei(z,!0)}))}),Ve(w,"renderPolarGrid",function(S){var _=S.props,C=_.radialLines,P=_.polarAngles,A=_.polarRadius,O=w.state,E=O.radiusAxisMap,z=O.angleAxisMap,I=zi(E),W=zi(z),V=W.cx,H=W.cy,k=W.innerRadius,D=W.outerRadius;return j.cloneElement(S,{polarAngles:Array.isArray(P)?P:ei(W,!0).map(function(X){return X.coordinate}),polarRadius:Array.isArray(A)?A:ei(I,!0).map(function(X){return X.coordinate}),cx:V,cy:H,innerRadius:k,outerRadius:D,key:S.key||"polar-grid",radialLines:C})}),Ve(w,"renderLegend",function(){var S=w.state.formattedGraphicalItems,_=w.props,C=_.children,P=_.width,A=_.height,O=w.props.margin||{},E=P-(O.left||0)-(O.right||0),z=f5({children:C,formattedGraphicalItems:S,legendWidth:E,legendContent:u});if(!z)return null;var I=z.item,W=WT(z,T2e);return j.cloneElement(I,ue(ue({},W),{},{chartWidth:P,chartHeight:A,margin:O,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),Ve(w,"renderTooltip",function(){var S,_=w.props,C=_.children,P=_.accessibilityLayer,A=Hr(C,rr);if(!A)return null;var O=w.state,E=O.isTooltipActive,z=O.activeCoordinate,I=O.activePayload,W=O.activeLabel,V=O.offset,H=(S=A.props.active)!==null&&S!==void 0?S:E;return j.cloneElement(A,{viewBox:ue(ue({},V),{},{x:V.left,y:V.top}),active:H,label:W,payload:H?I:[],coordinate:z,accessibilityLayer:P})}),Ve(w,"renderBrush",function(S){var _=w.props,C=_.margin,P=_.data,A=w.state,O=A.offset,E=A.dataStartIndex,z=A.dataEndIndex,I=A.updateId;return j.cloneElement(S,{key:S.key||"_recharts-brush",onChange:Ap(w.handleBrushChange,S.props.onChange),data:P,x:pe(S.props.x)?S.props.x:O.left,y:pe(S.props.y)?S.props.y:O.top+O.height+O.brushBottom-(C.bottom||0),width:pe(S.props.width)?S.props.width:O.width,startIndex:E,endIndex:z,updateId:"brush-".concat(I)})}),Ve(w,"renderReferenceElement",function(S,_,C){if(!S)return null;var P=w,A=P.clipPathId,O=w.state,E=O.xAxisMap,z=O.yAxisMap,I=O.offset,W=S.type.defaultProps||{},V=S.props,H=V.xAxisId,k=H===void 0?W.xAxisId:H,D=V.yAxisId,X=D===void 0?W.yAxisId:D;return j.cloneElement(S,{key:S.key||"".concat(_,"-").concat(C),xAxis:E[k],yAxis:z[X],viewBox:{x:I.left,y:I.top,width:I.width,height:I.height},clipPathId:A})}),Ve(w,"renderActivePoints",function(S){var _=S.item,C=S.activePoint,P=S.basePoint,A=S.childIndex,O=S.isRange,E=[],z=_.props.key,I=_.item.type.defaultProps!==void 0?ue(ue({},_.item.type.defaultProps),_.item.props):_.item.props,W=I.activeDot,V=I.dataKey,H=ue(ue({index:A,dataKey:V,cx:C.x,cy:C.y,r:4,fill:q_(_.item),strokeWidth:2,stroke:"#fff",payload:C.payload,value:C.value},Fe(W,!1)),Bg(W));return E.push(x.renderActiveDot(W,H,"".concat(z,"-activePoint-").concat(A))),P?E.push(x.renderActiveDot(W,ue(ue({},H),{},{cx:P.x,cy:P.y}),"".concat(z,"-basePoint-").concat(A))):O&&E.push(null),E}),Ve(w,"renderGraphicChild",function(S,_,C){var P=w.filterFormatItem(S,_,C);if(!P)return null;var A=w.getTooltipEventType(),O=w.state,E=O.isTooltipActive,z=O.tooltipAxis,I=O.activeTooltipIndex,W=O.activeLabel,V=w.props.children,H=Hr(V,rr),k=P.props,D=k.points,X=k.isRange,Q=k.baseLine,te=P.item.type.defaultProps!==void 0?ue(ue({},P.item.type.defaultProps),P.item.props):P.item.props,ne=te.activeDot,T=te.hide,ce=te.activeBar,me=te.activeShape,le=!!(!T&&E&&H&&(ne||ce||me)),Z={};A!=="axis"&&H&&H.props.trigger==="click"?Z={onClick:Ap(w.handleItemMouseEnter,S.props.onClick)}:A!=="axis"&&(Z={onMouseLeave:Ap(w.handleItemMouseLeave,S.props.onMouseLeave),onMouseEnter:Ap(w.handleItemMouseEnter,S.props.onMouseEnter)});var B=j.cloneElement(S,ue(ue({},P.props),Z));function oe(Me){return typeof z.dataKey=="function"?z.dataKey(Me.payload):null}if(le)if(I>=0){var U,K;if(z.dataKey&&!z.allowDuplicatedCategory){var fe=typeof z.dataKey=="function"?oe:"payload.".concat(z.dataKey.toString());U=Fg(D,fe,W),K=X&&Q&&Fg(Q,fe,W)}else U=D==null?void 0:D[I],K=X&&Q&&Q[I];if(me||ce){var Se=S.props.activeIndex!==void 0?S.props.activeIndex:I;return[j.cloneElement(S,ue(ue(ue({},P.props),Z),{},{activeIndex:Se})),null,null]}if(!Qe(U))return[B].concat(sd(w.renderActivePoints({item:P,activePoint:U,basePoint:K,childIndex:I,isRange:X})))}else{var $e,Ue=($e=w.getItemByXY(w.state.activeCoordinate))!==null&&$e!==void 0?$e:{graphicalItem:B},ft=Ue.graphicalItem,Tt=ft.item,Rt=Tt===void 0?S:Tt,ae=ft.childIndex,Ne=ue(ue(ue({},P.props),Z),{},{activeIndex:ae});return[j.cloneElement(Rt,Ne),null,null]}return X?[B,null,null]:[B,null]}),Ve(w,"renderCustomized",function(S,_,C){return j.cloneElement(S,ue(ue({key:"recharts-customized-".concat(C)},w.props),w.state))}),Ve(w,"renderMap",{CartesianGrid:{handler:Dp,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:Dp},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:Dp},YAxis:{handler:Dp},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((b=y.id)!==null&&b!==void 0?b:Ad("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=hF(w.triggeredAfterMouseMove,(N=y.throttleDelay)!==null&&N!==void 0?N:1e3/60),w.state={},w}return q2e(x,g),F2e(x,[{key:"componentDidMount",value:function(){var b,N;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(N=this.props.margin.top)!==null&&N!==void 0?N:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,N=b.children,w=b.data,S=b.height,_=b.layout,C=Hr(N,rr);if(C){var P=C.props.defaultIndex;if(!(typeof P!="number"||P<0||P>this.state.tooltipTicks.length-1)){var A=this.state.tooltipTicks[P]&&this.state.tooltipTicks[P].value,O=U1(this.state,w,P,A),E=this.state.tooltipTicks[P].coordinate,z=(this.state.offset.top+S)/2,I=_==="horizontal",W=I?{x:E,y:z}:{y:E,x:z},V=this.state.formattedGraphicalItems.find(function(k){var D=k.item;return D.type.name==="Scatter"});V&&(W=ue(ue({},W),V.props.points[P].tooltipPosition),O=V.props.points[P].tooltipPayload);var H={activeTooltipIndex:P,isTooltipActive:!0,activeLabel:A,activePayload:O,activeCoordinate:W};this.setState(H),this.renderCursor(C),this.accessibilityManager.setIndex(P)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,N){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==N.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var w,S;this.accessibilityManager.setDetails({offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0}})}return null}},{key:"componentDidUpdate",value:function(b){bw([Hr(b.children,rr)],[Hr(this.props.children,rr)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=Hr(this.props.children,rr);if(b&&typeof b.props.shared=="boolean"){var N=b.props.shared?"axis":"item";return l.indexOf(N)>=0?N:i}return i}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var N=this.container,w=N.getBoundingClientRect(),S=Qme(w),_={chartX:Math.round(b.pageX-S.left),chartY:Math.round(b.pageY-S.top)},C=w.width/N.offsetWidth||1,P=this.inRange(_.chartX,_.chartY,C);if(!P)return null;var A=this.state,O=A.xAxisMap,E=A.yAxisMap,z=this.getTooltipEventType(),I=KT(this.state,this.props.data,this.props.layout,P);if(z!=="axis"&&O&&E){var W=zi(O).scale,V=zi(E).scale,H=W&&W.invert?W.invert(_.chartX):null,k=V&&V.invert?V.invert(_.chartY):null;return ue(ue({},_),{},{xValue:H,yValue:k},I)}return I?ue(ue({},_),I):null}},{key:"inRange",value:function(b,N){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=this.props.layout,_=b/w,C=N/w;if(S==="horizontal"||S==="vertical"){var P=this.state.offset,A=_>=P.left&&_<=P.left+P.width&&C>=P.top&&C<=P.top+P.height;return A?{x:_,y:C}:null}var O=this.state,E=O.angleAxisMap,z=O.radiusAxisMap;if(E&&z){var I=zi(E);return yE({x:_,y:C},I)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,N=this.getTooltipEventType(),w=Hr(b,rr),S={};w&&N==="axis"&&(w.props.trigger==="click"?S={onClick:this.handleClick}:S={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var _=Bg(this.props,this.handleOuterEvent);return ue(ue({},_),S)}},{key:"addListener",value:function(){vb.on(xb,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){vb.removeListener(xb,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,N,w){for(var S=this.state.formattedGraphicalItems,_=0,C=S.length;_<C;_++){var P=S[_];if(P.item===b||P.props.key===b.key||N===ni(P.item.type)&&w===P.childIndex)return P}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,N=this.state.offset,w=N.left,S=N.top,_=N.height,C=N.width;return $.createElement("defs",null,$.createElement("clipPath",{id:b},$.createElement("rect",{x:w,y:S,height:_,width:C})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(N,w){var S=UT(w,2),_=S[0],C=S[1];return ue(ue({},N),{},Ve({},_,C.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(N,w){var S=UT(w,2),_=S[0],C=S[1];return ue(ue({},N),{},Ve({},_,C.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var N;return(N=this.state.xAxisMap)===null||N===void 0||(N=N[b])===null||N===void 0?void 0:N.scale}},{key:"getYScaleByAxisId",value:function(b){var N;return(N=this.state.yAxisMap)===null||N===void 0||(N=N[b])===null||N===void 0?void 0:N.scale}},{key:"getItemByXY",value:function(b){var N=this.state,w=N.formattedGraphicalItems,S=N.activeItem;if(w&&w.length)for(var _=0,C=w.length;_<C;_++){var P=w[_],A=P.props,O=P.item,E=O.type.defaultProps!==void 0?ue(ue({},O.type.defaultProps),O.props):O.props,z=ni(O.type);if(z==="Bar"){var I=(A.data||[]).find(function(k){return Oje(b,k)});if(I)return{graphicalItem:P,payload:I}}else if(z==="RadialBar"){var W=(A.data||[]).find(function(k){return yE(b,k)});if(W)return{graphicalItem:P,payload:W}}else if(Sy(P,S)||_y(P,S)||Hf(P,S)){var V=b1e({graphicalItem:P,activeTooltipItem:S,itemData:E.data}),H=E.activeIndex===void 0?V:E.activeIndex;return{graphicalItem:ue(ue({},P),{},{childIndex:H}),payload:Hf(P,S)?E.data[V]:P.props.data[V]}}}return null}},{key:"render",value:function(){var b=this;if(!cA(this))return null;var N=this.props,w=N.children,S=N.className,_=N.width,C=N.height,P=N.style,A=N.compact,O=N.title,E=N.desc,z=WT(N,O2e),I=Fe(z,!1);if(A)return $.createElement(PT,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},$.createElement(ww,Vc({},I,{width:_,height:C,title:O,desc:E}),this.renderClipPath(),dA(w,this.renderMap)));if(this.props.accessibilityLayer){var W,V;I.tabIndex=(W=this.props.tabIndex)!==null&&W!==void 0?W:0,I.role=(V=this.props.role)!==null&&V!==void 0?V:"application",I.onKeyDown=function(k){b.accessibilityManager.keyboardEvent(k)},I.onFocus=function(){b.accessibilityManager.focus()}}var H=this.parseEventsOfWrapper();return $.createElement(PT,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},$.createElement("div",Vc({className:Ye("recharts-wrapper",S),style:ue({position:"relative",cursor:"default",width:_,height:C},P)},H,{ref:function(D){b.container=D}}),$.createElement(ww,Vc({},I,{width:_,height:C,title:O,desc:E,style:Y2e}),this.renderClipPath(),dA(w,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(j.Component);Ve(v,"displayName",n),Ve(v,"defaultProps",ue({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),Ve(v,"getDerivedStateFromProps",function(g,x){var y=g.dataKey,b=g.data,N=g.children,w=g.width,S=g.height,_=g.layout,C=g.stackOffset,P=g.margin,A=x.dataStartIndex,O=x.dataEndIndex;if(x.updateId===void 0){var E=GT(g);return ue(ue(ue({},E),{},{updateId:0},m(ue(ue({props:g},E),{},{updateId:0}),x)),{},{prevDataKey:y,prevData:b,prevWidth:w,prevHeight:S,prevLayout:_,prevStackOffset:C,prevMargin:P,prevChildren:N})}if(y!==x.prevDataKey||b!==x.prevData||w!==x.prevWidth||S!==x.prevHeight||_!==x.prevLayout||C!==x.prevStackOffset||!Zc(P,x.prevMargin)){var z=GT(g),I={chartX:x.chartX,chartY:x.chartY,isTooltipActive:x.isTooltipActive},W=ue(ue({},KT(x,b,_)),{},{updateId:x.updateId+1}),V=ue(ue(ue({},z),I),W);return ue(ue(ue({},V),m(ue({props:g},V),x)),{},{prevDataKey:y,prevData:b,prevWidth:w,prevHeight:S,prevLayout:_,prevStackOffset:C,prevMargin:P,prevChildren:N})}if(!bw(N,x.prevChildren)){var H,k,D,X,Q=Hr(N,Gu),te=Q&&(H=(k=Q.props)===null||k===void 0?void 0:k.startIndex)!==null&&H!==void 0?H:A,ne=Q&&(D=(X=Q.props)===null||X===void 0?void 0:X.endIndex)!==null&&D!==void 0?D:O,T=te!==A||ne!==O,ce=!Qe(b),me=ce&&!T?x.updateId:x.updateId+1;return ue(ue({updateId:me},m(ue(ue({props:g},x),{},{updateId:me,dataStartIndex:te,dataEndIndex:ne}),x)),{},{prevChildren:N,dataStartIndex:te,dataEndIndex:ne})}return null}),Ve(v,"renderActiveDot",function(g,x,y){var b;return j.isValidElement(g)?b=j.cloneElement(g,x):qe(g)?b=g(x):b=$.createElement(yy,x),$.createElement(gt,{className:"recharts-active-dot",key:y},b)});var p=j.forwardRef(function(x,y){return $.createElement(v,Vc({},x,{ref:y}))});return p.displayName=v.displayName,p},aCe=e2({chartName:"BarChart",GraphicalChild:xa,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Bo},{axisType:"yAxis",AxisComp:zo}],formatAxisMap:n6}),t2=e2({chartName:"PieChart",GraphicalChild:Zs,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Ny},{axisType:"radiusAxis",AxisComp:jy}],formatAxisMap:Hye,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),n2=e2({chartName:"AreaChart",GraphicalChild:bs,axisComponents:[{axisType:"xAxis",AxisComp:Bo},{axisType:"yAxis",AxisComp:zo}],formatAxisMap:n6});function QT(){const{data:e=[]}=ws(),{settings:t}=Pt(),r=(()=>{const a=[],i=new Date;for(let o=5;o>=0;o--){const l=new Date(i.getFullYear(),i.getMonth()-o,1);`${l.getFullYear()}${String(l.getMonth()+1).padStart(2,"0")}`;const c=new Date(l.getFullYear(),l.getMonth(),1).toISOString().split("T")[0],u=new Date(l.getFullYear(),l.getMonth()+1,0).toISOString().split("T")[0],h=e.filter(m=>{const v=new Date(m.consultation_date);return v>=new Date(c)&&v<=new Date(u)}).length*50,f=Math.round(h*.3);a.push({month:l.toLocaleDateString("fr-FR",{month:"short"}),revenue:Math.round(h),expenses:Math.round(f),profit:Math.round(h-f)})}return a})();return s.jsxs(re,{children:[s.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(he,{className:"text-base font-medium",children:"Évolution des Revenus"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(cd,{className:"h-4 w-4 text-muted-foreground"}),s.jsx(dn,{className:"h-4 w-4 text-green-600"})]})]}),s.jsxs(se,{children:[s.jsx("div",{className:"h-[300px] w-full",children:s.jsx(ec,{width:"100%",height:"100%",children:s.jsxs(n2,{data:r,margin:{top:5,right:30,left:20,bottom:5},children:[s.jsx(km,{strokeDasharray:"3 3",className:"opacity-30"}),s.jsx(Bo,{dataKey:"month",axisLine:!1,tickLine:!1,className:"text-xs"}),s.jsx(zo,{axisLine:!1,tickLine:!1,className:"text-xs",tickFormatter:a=>`${a}${t.currency||"€"}`}),s.jsx(rr,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:(a,i)=>[`${a} ${t.currency||"€"}`,i==="revenue"?"Revenus":i==="expenses"?"Dépenses":"Bénéfice"]}),s.jsx(bs,{type:"monotone",dataKey:"revenue",stackId:"1",stroke:"#10b981",fill:"#10b981",fillOpacity:.6,strokeWidth:2}),s.jsx(bs,{type:"monotone",dataKey:"expenses",stackId:"2",stroke:"#ef4444",fill:"#ef4444",fillOpacity:.6,strokeWidth:2})]})})}),s.jsxs("div",{className:"flex items-center justify-between mt-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-muted-foreground",children:"Revenus"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),s.jsx("span",{className:"text-muted-foreground",children:"Dépenses"})]})]})]})]})}function iCe(){const{data:e=[]}=ws(),{data:t=[]}=Jl(),{data:n=[]}=Xl(),{data:r=[]}=wm(),i=(()=>{const o=[],l=new Date;for(let c=6;c>=0;c--){const u=new Date(l);u.setDate(u.getDate()-c);const d=u.toISOString().split("T")[0],h=e.filter(p=>new Date(p.consultation_date).toISOString().split("T")[0]===d).length,f=t.filter(p=>new Date(p.appointment_date).toISOString().split("T")[0]===d).length,m=n.filter(p=>new Date(p.vaccination_date).toISOString().split("T")[0]===d).length,v=r.filter(p=>new Date(p.treatment_date).toISOString().split("T")[0]===d).length;o.push({day:u.toLocaleDateString("fr-FR",{weekday:"short"}),date:d,consultations:h,appointments:f,vaccinations:m,antiparasitics:v,total:h+f+m+v})}return o})();return s.jsxs(re,{children:[s.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(he,{className:"text-base font-medium",children:"Activité des 7 derniers jours"}),s.jsx(Aa,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(se,{children:[s.jsx("div",{className:"h-[300px] w-full",children:s.jsx(ec,{width:"100%",height:"100%",children:s.jsxs(aCe,{data:i,margin:{top:5,right:30,left:20,bottom:5},children:[s.jsx(km,{strokeDasharray:"3 3",className:"opacity-30"}),s.jsx(Bo,{dataKey:"day",axisLine:!1,tickLine:!1,className:"text-xs"}),s.jsx(zo,{axisLine:!1,tickLine:!1,className:"text-xs"}),s.jsx(rr,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:(o,l)=>[o,l==="consultations"?"Consultations":l==="appointments"?"Rendez-vous":l==="vaccinations"?"Vaccinations":l==="antiparasitics"?"Antiparasitaires":"Total"]}),s.jsx(xa,{dataKey:"consultations",fill:"#10b981",radius:[2,2,0,0]}),s.jsx(xa,{dataKey:"appointments",fill:"#3b82f6",radius:[2,2,0,0]}),s.jsx(xa,{dataKey:"vaccinations",fill:"#8b5cf6",radius:[2,2,0,0]}),s.jsx(xa,{dataKey:"antiparasitics",fill:"#f59e0b",radius:[2,2,0,0]})]})})}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mt-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-muted-foreground",children:"Consultations"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),s.jsx("span",{className:"text-muted-foreground",children:"Rendez-vous"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),s.jsx("span",{className:"text-muted-foreground",children:"Vaccinations"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-amber-500 rounded-full"}),s.jsx("span",{className:"text-muted-foreground",children:"Antiparasitaires"})]})]})]})]})}function oCe(){const{data:e=[]}=$x(),t=$.useMemo(()=>{const a=e.length,i=e.filter(c=>c.current_quantity<=c.minimum_quantity&&c.current_quantity>0).length,o=e.filter(c=>c.current_quantity===0).length;return[{name:"Stock Normal",value:a-i-o,color:"#10b981"},{name:"Stock Faible",value:i,color:"#f59e0b"},{name:"Rupture",value:o,color:"#ef4444"}].filter(c=>c.value>0)},[e]),n=e.reduce((a,i)=>a+i.current_quantity*(i.unit_cost||0),0),r=e.sort((a,i)=>i.current_quantity*(i.unit_cost||0)-a.current_quantity*(a.unit_cost||0)).slice(0,5);return s.jsxs(re,{children:[s.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(he,{className:"text-base font-medium",children:"État du Stock"}),s.jsx(wa,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(se,{children:[s.jsx("div",{className:"h-[300px] w-full",children:s.jsx(ec,{width:"100%",height:"100%",children:s.jsxs(t2,{children:[s.jsx(Zs,{data:t,cx:"50%",cy:"50%",labelLine:!1,label:({name:a,percent:i})=>`${a} ${(i*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:t.map((a,i)=>s.jsx(Od,{fill:a.color},`cell-${i}`))}),s.jsx(rr,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:a=>[a,"Articles"]})]})})}),s.jsxs("div",{className:"mt-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Valeur totale du stock"}),s.jsxs("span",{className:"font-medium",children:[n.toFixed(0)," €"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-sm font-medium",children:"Articles les plus précieux"}),r.map((a,i)=>s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsx("span",{className:"truncate flex-1",children:a.name}),s.jsxs("span",{className:"text-muted-foreground ml-2",children:[(a.current_quantity*(a.unit_cost||0)).toFixed(0)," €"]})]},a.id))]})]})]})]})}function lCe(){const{data:e=[]}=vn(),{data:t=[]}=hn(),r=(()=>{const a=[],i=new Date;for(let o=5;o>=0;o--){const l=new Date(i.getFullYear(),i.getMonth()-o,1),c=new Date(l.getFullYear(),l.getMonth(),1),u=new Date(l.getFullYear(),l.getMonth()+1,0),d=e.filter(v=>{const p=new Date(v.created_at);return p>=c&&p<=u}).length,h=t.filter(v=>{const p=new Date(v.created_at);return p>=c&&p<=u}).length,f=e.filter(v=>new Date(v.created_at)<=u).length,m=t.filter(v=>new Date(v.created_at)<=u).length;a.push({month:l.toLocaleDateString("fr-FR",{month:"short"}),newClients:d,newPets:h,totalClients:f,totalPets:m})}return a})();return s.jsxs(re,{children:[s.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(he,{className:"text-base font-medium",children:"Croissance des Clients"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Da,{className:"h-4 w-4 text-muted-foreground"}),s.jsx(dn,{className:"h-4 w-4 text-blue-600"})]})]}),s.jsxs(se,{children:[s.jsx("div",{className:"h-[300px] w-full",children:s.jsx(ec,{width:"100%",height:"100%",children:s.jsxs(n2,{data:r,margin:{top:5,right:30,left:20,bottom:5},children:[s.jsx(km,{strokeDasharray:"3 3",className:"opacity-30"}),s.jsx(Bo,{dataKey:"month",axisLine:!1,tickLine:!1,className:"text-xs"}),s.jsx(zo,{axisLine:!1,tickLine:!1,className:"text-xs"}),s.jsx(rr,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:(a,i)=>[a,i==="newClients"?"Nouveaux Clients":i==="newPets"?"Nouveaux Animaux":i==="totalClients"?"Total Clients":"Total Animaux"]}),s.jsx(bs,{type:"monotone",dataKey:"newClients",stackId:"1",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.6,strokeWidth:2}),s.jsx(bs,{type:"monotone",dataKey:"newPets",stackId:"2",stroke:"#8b5cf6",fill:"#8b5cf6",fillOpacity:.6,strokeWidth:2})]})})}),s.jsxs("div",{className:"flex items-center justify-between mt-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),s.jsx("span",{className:"text-muted-foreground",children:"Nouveaux Clients"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),s.jsx("span",{className:"text-muted-foreground",children:"Nouveaux Animaux"})]})]})]})]})}function XT(){const{data:e=[]}=Jl(),t=$.useMemo(()=>{const c=e.reduce((h,f)=>(h[f.status]=(h[f.status]||0)+1,h),{}),u={scheduled:"Planifié",confirmed:"Confirmé",completed:"Terminé",cancelled:"Annulé","no-show":"Absent"},d={scheduled:"#3b82f6",confirmed:"#10b981",completed:"#6b7280",cancelled:"#ef4444","no-show":"#f59e0b"};return Object.entries(c).map(([h,f])=>({name:u[h]||h,value:f,color:d[h]||"#6b7280"}))},[e]),n=e.length,r=e.filter(c=>c.status==="completed").length,a=e.filter(c=>c.status==="scheduled"||c.status==="confirmed").length,i=e.filter(c=>c.status==="cancelled").length,o=n>0?r/n*100:0,l=n>0?i/n*100:0;return s.jsxs(re,{children:[s.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(he,{className:"text-base font-medium",children:"Statuts des Rendez-vous"}),s.jsx(Ze,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(se,{children:[s.jsx("div",{className:"h-[300px] w-full",children:s.jsx(ec,{width:"100%",height:"100%",children:s.jsxs(t2,{children:[s.jsx(Zs,{data:t,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,dataKey:"value",children:t.map((c,u)=>s.jsx(Od,{fill:c.color},`cell-${u}`))}),s.jsx(rr,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:c=>[c,"Rendez-vous"]})]})})}),s.jsxs("div",{className:"mt-4 space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[o.toFixed(1),"%"]}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Taux de réussite"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-red-600",children:[l.toFixed(1),"%"]}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Taux d'annulation"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Bn,{className:"h-4 w-4 text-green-600"}),s.jsx("span",{children:"Terminés"})]}),s.jsx("span",{className:"font-medium",children:r})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(tn,{className:"h-4 w-4 text-blue-600"}),s.jsx("span",{children:"À venir"})]}),s.jsx("span",{className:"font-medium",children:a})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(rf,{className:"h-4 w-4 text-red-600"}),s.jsx("span",{children:"Annulés"})]}),s.jsx("span",{className:"font-medium",children:i})]})]})]})]})]})}function cCe(){const{data:e=[]}=ws(),n=(()=>{const r=[],a=new Date;for(let i=11;i>=0;i--){const o=new Date(a.getFullYear(),a.getMonth()-i,1),l=new Date(o.getFullYear(),o.getMonth(),1),c=new Date(o.getFullYear(),o.getMonth()+1,0),u=e.filter(f=>{const m=new Date(f.consultation_date);return m>=l&&m<=c}),d=u.reduce((f,m)=>f+(m.cost||0),0),h=u.length>0?d/u.length:0;r.push({month:o.toLocaleDateString("fr-FR",{month:"short",year:"2-digit"}),consultations:u.length,revenue:Math.round(d),averageRevenue:Math.round(h)})}return r})();return s.jsxs(re,{children:[s.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(he,{className:"text-base font-medium",children:"Tendances des Consultations"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Hn,{className:"h-4 w-4 text-muted-foreground"}),s.jsx(dn,{className:"h-4 w-4 text-blue-600"})]})]}),s.jsxs(se,{children:[s.jsx("div",{className:"h-[300px] w-full",children:s.jsx(ec,{width:"100%",height:"100%",children:s.jsxs(n2,{data:n,margin:{top:5,right:30,left:20,bottom:5},children:[s.jsx(km,{strokeDasharray:"3 3",className:"opacity-30"}),s.jsx(Bo,{dataKey:"month",axisLine:!1,tickLine:!1,className:"text-xs"}),s.jsx(zo,{axisLine:!1,tickLine:!1,className:"text-xs"}),s.jsx(rr,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:(r,a)=>[a==="consultations"?r:`${r} €`,a==="consultations"?"Consultations":a==="revenue"?"Revenus":"Revenu moyen"]}),s.jsx(bs,{type:"monotone",dataKey:"consultations",stackId:"1",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.6,strokeWidth:2})]})})}),s.jsx("div",{className:"flex items-center justify-between mt-4 text-sm",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),s.jsx("span",{className:"text-muted-foreground",children:"Nombre de consultations"})]})})]})]})}function JT(){const{data:e=[]}=hn(),t=$.useMemo(()=>{const o=e.reduce((c,u)=>{const d=u.species||"Autre";return c[d]=(c[d]||0)+1,c},{}),l=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#84cc16","#f97316"];return Object.entries(o).map(([c,u],d)=>({name:c,value:u,color:l[d%l.length]}))},[e]),n=e.length,r=t.length>0?t[0]:null,a=e.length>0?e.reduce((o,l)=>{if(l.birth_date){const c=new Date(l.birth_date),d=(new Date().getTime()-c.getTime())/(365.25*24*60*60*1e3);return o+d}return o},0)/e.length:0,i=o=>{switch(o.toLowerCase()){case"chien":case"dog":return s.jsx(mU,{className:"h-4 w-4"});case"chat":case"cat":return s.jsx(oU,{className:"h-4 w-4"});case"poisson":case"fish":return s.jsx(pU,{className:"h-4 w-4"});case"oiseau":case"bird":return s.jsx(aU,{className:"h-4 w-4"});default:return s.jsx(pt,{className:"h-4 w-4"})}};return s.jsxs(re,{children:[s.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(he,{className:"text-base font-medium",children:"Répartition par Espèce"}),s.jsx(pt,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(se,{children:[s.jsx("div",{className:"h-[300px] w-full",children:s.jsx(ec,{width:"100%",height:"100%",children:s.jsxs(t2,{children:[s.jsx(Zs,{data:t,cx:"50%",cy:"50%",labelLine:!1,label:({name:o,percent:l})=>`${o} ${(l*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:t.map((o,l)=>s.jsx(Od,{fill:o.color},`cell-${l}`))}),s.jsx(rr,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:o=>[o,"Animaux"]})]})})}),s.jsxs("div",{className:"mt-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Total d'animaux"}),s.jsx("span",{className:"font-medium",children:n})]}),r&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Espèce la plus commune"}),s.jsxs("div",{className:"flex items-center gap-2",children:[i(r.name),s.jsx("span",{className:"font-medium",children:r.name})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Âge moyen"}),s.jsxs("span",{className:"font-medium",children:[a.toFixed(1)," ans"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-sm font-medium",children:"Répartition détaillée"}),t.slice(0,5).map((o,l)=>s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[i(o.name),s.jsx("span",{children:o.name})]}),s.jsxs("span",{className:"text-muted-foreground",children:[o.value," (",(o.value/n*100).toFixed(1),"%)"]})]},l))]})]})]})]})}var Oy="Tabs",[uCe,eEe]=Fr(Oy,[yx]),B6=yx(),[dCe,r2]=uCe(Oy),z6=j.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=vx(l),[h,f]=ui({prop:r,onChange:a,defaultProp:i??"",caller:Oy});return s.jsx(dCe,{scope:n,baseId:Na(),value:h,onValueChange:f,orientation:o,dir:d,activationMode:c,children:s.jsx(Le.div,{dir:d,"data-orientation":o,...u,ref:t})})});z6.displayName=Oy;var V6="TabsList",q6=j.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...a}=e,i=r2(V6,n),o=B6(n);return s.jsx($$,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:s.jsx(Le.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});q6.displayName=V6;var U6="TabsTrigger",W6=j.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...i}=e,o=r2(U6,n),l=B6(n),c=G6(o.baseId,r),u=Y6(o.baseId,r),d=r===o.value;return s.jsx(R$,{asChild:!0,...l,focusable:!a,active:d,children:s.jsx(Le.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:Pe(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:Pe(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:Pe(e.onFocus,()=>{const h=o.activationMode!=="manual";!d&&!a&&h&&o.onValueChange(r)})})})});W6.displayName=U6;var H6="TabsContent",K6=j.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:a,children:i,...o}=e,l=r2(H6,n),c=G6(l.baseId,r),u=Y6(l.baseId,r),d=r===l.value,h=j.useRef(d);return j.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),s.jsx(js,{present:a||d,children:({present:f})=>s.jsx(Le.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:f&&i})})});K6.displayName=H6;function G6(e,t){return`${e}-trigger-${t}`}function Y6(e,t){return`${e}-content-${t}`}var hCe=z6,Q6=q6,X6=W6,J6=K6;const Oa=hCe,Ys=j.forwardRef(({className:e,...t},n)=>s.jsx(Q6,{ref:n,className:Ee("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Ys.displayName=Q6.displayName;const bt=j.forwardRef(({className:e,...t},n)=>s.jsx(X6,{ref:n,className:Ee("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));bt.displayName=X6.displayName;const jt=j.forwardRef(({className:e,...t},n)=>s.jsx(J6,{ref:n,className:Ee("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));jt.displayName=J6.displayName;const fCe=()=>s.jsxs("div",{className:"container mx-auto px-3 sm:px-4 lg:px-6 py-3 sm:py-4 lg:py-6 max-w-7xl",children:[s.jsx(Nee,{}),s.jsx("div",{className:"mt-6 sm:mt-8",children:s.jsxs(Oa,{defaultValue:"overview",className:"w-full",children:[s.jsxs(Ys,{className:"grid w-full grid-cols-3 sm:grid-cols-6 lg:grid-cols-6 h-auto p-1",children:[s.jsxs(bt,{value:"overview",className:"flex flex-col sm:flex-row items-center gap-1 sm:gap-2 py-2 px-1 sm:px-3 text-xs sm:text-sm",children:[s.jsx(vU,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{className:"text-[10px] sm:text-xs lg:text-sm",children:"Vue d'ensemble"})]}),s.jsxs(bt,{value:"analytics",className:"flex flex-col sm:flex-row items-center gap-1 sm:gap-2 py-2 px-1 sm:px-3 text-xs sm:text-sm",children:[s.jsx(dn,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{className:"text-[10px] sm:text-xs lg:text-sm",children:"Analyses"})]}),s.jsxs(bt,{value:"clients",className:"flex flex-col sm:flex-row items-center gap-1 sm:gap-2 py-2 px-1 sm:px-3 text-xs sm:text-sm",children:[s.jsx(Da,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{className:"text-[10px] sm:text-xs lg:text-sm",children:"Clients"})]}),s.jsxs(bt,{value:"animals",className:"flex flex-col sm:flex-row items-center gap-1 sm:gap-2 py-2 px-1 sm:px-3 text-xs sm:text-sm",children:[s.jsx(pt,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{className:"text-[10px] sm:text-xs lg:text-sm",children:"Animaux"})]}),s.jsxs(bt,{value:"consultations",className:"flex flex-col sm:flex-row items-center gap-1 sm:gap-2 py-2 px-1 sm:px-3 text-xs sm:text-sm",children:[s.jsx(Hn,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{className:"text-[10px] sm:text-xs lg:text-sm",children:"Consultations"})]}),s.jsxs(bt,{value:"charts",className:"flex flex-col sm:flex-row items-center gap-1 sm:gap-2 py-2 px-1 sm:px-3 text-xs sm:text-sm",children:[s.jsx(HN,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{className:"text-[10px] sm:text-xs lg:text-sm",children:"Graphiques"})]})]}),s.jsx(jt,{value:"overview",className:"space-y-4 sm:space-y-6 mt-4 sm:mt-6",children:s.jsxs(Oa,{defaultValue:"kpis",className:"w-full",children:[s.jsxs(Ys,{className:"grid w-full grid-cols-2 sm:grid-cols-4 lg:grid-cols-4 h-auto p-1",children:[s.jsxs(bt,{value:"kpis",className:"flex items-center gap-1 sm:gap-2 py-2 px-2 sm:px-3 text-xs sm:text-sm",children:[s.jsx(dn,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{children:"KPIs"})]}),s.jsxs(bt,{value:"activities",className:"flex items-center gap-1 sm:gap-2 py-2 px-2 sm:px-3 text-xs sm:text-sm",children:[s.jsx(Aa,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{children:"Activités"})]}),s.jsxs(bt,{value:"statistics",className:"flex items-center gap-1 sm:gap-2 py-2 px-2 sm:px-3 text-xs sm:text-sm",children:[s.jsx(lU,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{children:"Statistiques"})]}),s.jsxs(bt,{value:"system",className:"flex items-center gap-1 sm:gap-2 py-2 px-2 sm:px-3 text-xs sm:text-sm",children:[s.jsx(GN,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{children:"Système"})]})]}),s.jsx(jt,{value:"kpis",className:"space-y-4 sm:space-y-6 mt-4 sm:mt-6",children:s.jsxs("section",{children:[s.jsx("h2",{className:"text-base sm:text-lg lg:text-xl font-bold mb-3 sm:mb-4 px-1",children:"Indicateurs Clés de Performance"}),s.jsx(Eee,{})]})}),s.jsx(jt,{value:"activities",className:"space-y-4 sm:space-y-6 mt-4 sm:mt-6",children:s.jsxs("section",{children:[s.jsx("h2",{className:"text-base sm:text-lg lg:text-xl font-bold mb-3 sm:mb-4 px-1",children:"Activités Récentes"}),s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-4 lg:gap-6",children:[s.jsx("div",{className:"w-full",children:s.jsx(KP,{})}),s.jsx("div",{className:"w-full",children:s.jsx(GP,{})}),s.jsx("div",{className:"w-full",children:s.jsx(YP,{})})]})]})}),s.jsx(jt,{value:"statistics",className:"space-y-4 sm:space-y-6 mt-4 sm:mt-6",children:s.jsxs("section",{children:[s.jsx("h2",{className:"text-base sm:text-lg lg:text-xl font-bold mb-3 sm:mb-4 px-1",children:"Statistiques Détaillées"}),s.jsx(See,{})]})}),s.jsx(jt,{value:"system",className:"space-y-4 sm:space-y-6 mt-4 sm:mt-6",children:s.jsxs("section",{children:[s.jsx("h2",{className:"text-base sm:text-lg lg:text-xl font-bold mb-3 sm:mb-4 px-1",children:"État du Système"}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-3 sm:gap-4",children:[s.jsx(Aee,{}),s.jsx(kee,{}),s.jsx(Pee,{})]})]})})]})}),s.jsx(jt,{value:"analytics",className:"space-y-4 sm:space-y-6 mt-4 sm:mt-6",children:s.jsxs("section",{children:[s.jsx("h2",{className:"text-base sm:text-lg lg:text-xl font-bold mb-3 sm:mb-4 px-1",children:"Analyses et Tendances"}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[s.jsx(vw,{children:s.jsx(QT,{})}),s.jsx(iCe,{})]})]})}),s.jsx(jt,{value:"clients",className:"space-y-4 sm:space-y-6 mt-4 sm:mt-6",children:s.jsxs("section",{children:[s.jsx("h2",{className:"text-base sm:text-lg lg:text-xl font-bold mb-3 sm:mb-4 px-1",children:"Gestion des Clients"}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[s.jsx(KP,{}),s.jsx(lCe,{})]})]})}),s.jsx(jt,{value:"animals",className:"space-y-4 sm:space-y-6 mt-4 sm:mt-6",children:s.jsxs("section",{children:[s.jsx("h2",{className:"text-base sm:text-lg lg:text-xl font-bold mb-3 sm:mb-4 px-1",children:"Gestion des Animaux"}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[s.jsx(GP,{}),s.jsx(JT,{})]})]})}),s.jsxs(jt,{value:"consultations",className:"space-y-4 sm:space-y-6 mt-4 sm:mt-6",children:[s.jsxs("section",{children:[s.jsx("h2",{className:"text-base sm:text-lg lg:text-xl font-bold mb-3 sm:mb-4 px-1",children:"Activité Récente"}),s.jsx(YP,{})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-base sm:text-lg lg:text-xl font-bold mb-3 sm:mb-4 px-1",children:"Rendez-vous"}),s.jsx(XT,{})]})]}),s.jsx(jt,{value:"charts",className:"space-y-4 sm:space-y-6 mt-4 sm:mt-6",children:s.jsxs("section",{children:[s.jsx("h2",{className:"text-base sm:text-lg lg:text-xl font-bold mb-3 sm:mb-4 px-1",children:"Graphiques Détaillés"}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[s.jsx(cCe,{}),s.jsx(XT,{})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 mt-4 sm:mt-6",children:[s.jsx(JT,{}),s.jsx(oCe,{})]})]})})]})}),s.jsx(vw,{children:s.jsxs("div",{className:"mt-6 sm:mt-8 p-4 sm:p-6 border rounded-lg bg-muted/50",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3 sm:mb-4",children:[s.jsx(Gn,{className:"h-4 w-4 sm:h-5 sm:w-5"}),s.jsx("h2",{className:"text-base sm:text-lg lg:text-xl font-bold",children:"Administration"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[s.jsx(QT,{}),s.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[s.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:"Fonctionnalités Admin"}),s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Section réservée aux administrateurs pour la gestion avancée du système."})]})]})]})})]});var Z6="AlertDialog",[mCe,tEe]=Fr(Z6,[DR]),ji=DR(),e8=e=>{const{__scopeAlertDialog:t,...n}=e,r=ji(t);return s.jsx(YR,{...r,...n,modal:!0})};e8.displayName=Z6;var pCe="AlertDialogTrigger",gCe=j.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=ji(n);return s.jsx(QR,{...a,...r,ref:t})});gCe.displayName=pCe;var vCe="AlertDialogPortal",t8=e=>{const{__scopeAlertDialog:t,...n}=e,r=ji(t);return s.jsx(XR,{...r,...n})};t8.displayName=vCe;var xCe="AlertDialogOverlay",n8=j.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=ji(n);return s.jsx(FS,{...a,...r,ref:t})});n8.displayName=xCe;var su="AlertDialogContent",[yCe,bCe]=mCe(su),jCe=qM("AlertDialogContent"),r8=j.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...a}=e,i=ji(n),o=j.useRef(null),l=dt(t,o),c=j.useRef(null);return s.jsx(TJ,{contentName:su,titleName:s8,docsSlug:"alert-dialog",children:s.jsx(yCe,{scope:n,cancelRef:c,children:s.jsxs(BS,{role:"alertdialog",...i,...a,ref:l,onOpenAutoFocus:Pe(a.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[s.jsx(jCe,{children:r}),s.jsx(NCe,{contentRef:o})]})})})});r8.displayName=su;var s8="AlertDialogTitle",a8=j.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=ji(n);return s.jsx(zS,{...a,...r,ref:t})});a8.displayName=s8;var i8="AlertDialogDescription",o8=j.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=ji(n);return s.jsx(VS,{...a,...r,ref:t})});o8.displayName=i8;var wCe="AlertDialogAction",l8=j.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=ji(n);return s.jsx(qS,{...a,...r,ref:t})});l8.displayName=wCe;var c8="AlertDialogCancel",u8=j.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:a}=bCe(c8,n),i=ji(n),o=dt(t,a);return s.jsx(qS,{...i,...r,ref:o})});u8.displayName=c8;var NCe=({contentRef:e})=>{const t=`\`${su}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${su}\` by passing a \`${i8}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${su}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return j.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},SCe=e8,_Ce=t8,d8=n8,h8=r8,f8=l8,m8=u8,p8=a8,g8=o8;const s2=SCe,CCe=_Ce,v8=j.forwardRef(({className:e,...t},n)=>s.jsx(d8,{className:Ee("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));v8.displayName=d8.displayName;const Dy=j.forwardRef(({className:e,...t},n)=>s.jsxs(CCe,{children:[s.jsx(v8,{}),s.jsx(h8,{ref:n,className:Ee("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Dy.displayName=h8.displayName;const My=({className:e,...t})=>s.jsx("div",{className:Ee("flex flex-col space-y-2 text-center sm:text-left",e),...t});My.displayName="AlertDialogHeader";const Iy=({className:e,...t})=>s.jsx("div",{className:Ee("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Iy.displayName="AlertDialogFooter";const $y=j.forwardRef(({className:e,...t},n)=>s.jsx(p8,{ref:n,className:Ee("text-lg font-semibold",e),...t}));$y.displayName=p8.displayName;const Ry=j.forwardRef(({className:e,...t},n)=>s.jsx(g8,{ref:n,className:Ee("text-sm text-muted-foreground",e),...t}));Ry.displayName=g8.displayName;const Ly=j.forwardRef(({className:e,...t},n)=>s.jsx(f8,{ref:n,className:Ee(yS(),e),...t}));Ly.displayName=f8.displayName;const Fy=j.forwardRef(({className:e,...t},n)=>s.jsx(m8,{ref:n,className:Ee(yS({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Fy.displayName=m8.displayName;const sc=e=>{const{settings:t}=Pt();return{currentView:t.displayPreferences[e],isTableView:t.displayPreferences[e]==="table",isCardsView:t.displayPreferences[e]==="cards"}},PCe=(e,t)=>{const n=t.filter(i=>i.client_id===e.id),r=Math.abs(e.id.split("").reduce((i,o)=>(i=(i<<5)-i+o.charCodeAt(0),i&i),0)),a=n.map(i=>({id:Math.abs(i.id.split("").reduce((l,c)=>(l=(l<<5)-l+c.charCodeAt(0),l&l),0)),name:i.name,type:i.species,breed:i.breed||""}));return{id:r,name:`${e.first_name} ${e.last_name}`,firstName:e.first_name,lastName:e.last_name,email:e.email||"",phone:e.phone||e.mobile_phone||"",address:e.address||"",city:e.city,pets:a,lastVisit:new Date(e.updated_at).toLocaleDateString("fr-FR"),totalVisits:0,dbId:e.id}},ACe=()=>{const{data:e=[],isLoading:t}=vn(),{data:n=[],isLoading:r}=hn(),a=UZ(),i=WZ(),{toast:o}=at(),{data:l=[],isLoading:c}=Io(),{data:u=[],isLoading:d}=q3(),h=e.map(T=>PCe(T,n)),{currentView:f}=sc("clients"),[m,v]=j.useState(""),[p,g]=j.useState("all"),[x,y]=j.useState(f),[b,N]=j.useState(!1),[w,S]=j.useState(null),[_,C]=j.useState(!1),[P,A]=j.useState(!1),[O,E]=j.useState(!1),[z,I]=j.useState(null),[W,V]=j.useState({first_name:"",last_name:"",email:"",phone:"",mobile_phone:"",address:"",city:"Rabat",postal_code:"",country:"Maroc",notes:"",client_type:"particulier"}),H=h.filter(T=>{const ce=T.name.toLowerCase().includes(m.toLowerCase())||T.email.toLowerCase().includes(m.toLowerCase())||T.city&&T.city.toLowerCase().includes(m.toLowerCase()),me=p==="all"||T.pets.some(le=>le.type===p);return ce&&me}),k=T=>{S(T),C(!0)},D=T=>{S(T),V({first_name:T.firstName,last_name:T.lastName,email:T.email,phone:T.phone,mobile_phone:"",address:T.address,city:T.city,postal_code:"",country:"Maroc",notes:"",client_type:"particulier"}),A(!0)},X=T=>{I(T),E(!0)},Q=async()=>{if(z)try{await i.mutateAsync(z.dbId),o({title:"Client supprimé",description:`${z.name} a été supprimé avec succès`}),E(!1),I(null)}catch(T){o({title:"Erreur",description:T instanceof Error?T.message:"Erreur lors de la suppression du client",variant:"destructive"})}},te=()=>{w&&V({first_name:w.firstName,last_name:w.lastName,email:w.email,phone:w.phone,mobile_phone:"",address:w.address,city:w.city,postal_code:"",country:"Maroc",notes:"",client_type:"particulier"}),C(!1),A(!0)},ne=async T=>{if(T.preventDefault(),!w||!W.first_name||!W.last_name){o({title:"Erreur",description:"Le prénom et le nom sont obligatoires",variant:"destructive"});return}try{await a.mutateAsync({id:w.dbId,data:W}),o({title:"Client modifié",description:`${W.first_name} ${W.last_name} a été modifié avec succès`}),A(!1),S(null)}catch(ce){o({title:"Erreur",description:ce instanceof Error?ce.message:"Erreur lors de la modification du client",variant:"destructive"})}};return t||r?s.jsx("div",{className:"container mx-auto px-6 py-8",children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Chargement des clients..."})]})})}):s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-8 space-y-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Gestion des Clients"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Gérez tous vos clients et leurs informations"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[s.jsxs(L,{size:"sm",variant:x==="cards"?"default":"outline",onClick:()=>y("cards"),className:"gap-2 w-full sm:w-auto",children:[s.jsx(yo,{className:"h-4 w-4"}),"Cartes"]}),s.jsxs(L,{size:"sm",variant:x==="table"?"default":"outline",onClick:()=>y("table"),className:"gap-2 w-full sm:w-auto",children:[s.jsx(di,{className:"h-4 w-4"}),"Tableau"]}),s.jsxs(L,{className:"gap-2 medical-glow w-full sm:w-auto",onClick:()=>N(!0),children:[s.jsx(lt,{className:"h-4 w-4"}),"Nouveau Client"]})]})]}),s.jsxs(re,{children:[s.jsx(de,{children:s.jsxs(he,{className:"flex items-center gap-2",children:[s.jsx(Co,{className:"h-5 w-5"}),"Rechercher un client"]})}),s.jsx(se,{children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsx(J,{placeholder:"Rechercher par nom, email ou ville...",value:m,onChange:T=>v(T.target.value),className:"flex-1"}),s.jsxs(be,{value:p,onValueChange:g,children:[s.jsx(xe,{className:"w-full sm:w-[200px]",children:s.jsx(je,{placeholder:"Filtrer par espèce"})}),s.jsxs(ye,{children:[s.jsx(q,{value:"all",children:"Toutes espèces"}),l.map(T=>s.jsx(q,{value:T,children:T},T))]})]})]})})]}),x==="cards"?s.jsx("div",{className:"grid gap-6",children:H.map(T=>s.jsx(re,{className:"card-hover",children:s.jsx(se,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-4 flex-1",children:[s.jsx(Qn,{className:"h-12 w-12 sm:h-16 sm:w-16 mx-auto sm:mx-0",children:s.jsx(Xn,{className:"bg-primary text-primary-foreground text-sm sm:text-lg",children:T.name.split(" ").map(ce=>ce[0]).join("")})}),s.jsxs("div",{className:"space-y-3 flex-1 text-center sm:text-left",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg sm:text-xl font-semibold",children:T.name}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 mt-2 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-1",children:[s.jsx(ux,{className:"h-3 w-3"}),T.email]}),s.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-1",children:[s.jsx(sf,{className:"h-3 w-3"}),T.phone]}),s.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-1",children:[s.jsx(ud,{className:"h-3 w-3"}),T.address]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"font-medium flex items-center justify-center sm:justify-start gap-2",children:[s.jsx(pt,{className:"h-4 w-4 text-primary"}),"Animaux (",T.pets.length,")"]}),s.jsx("div",{className:"flex gap-2 flex-wrap justify-center sm:justify-start",children:T.pets.length>0?T.pets.map((ce,me)=>s.jsxs(ke,{variant:"secondary",className:"gap-1",children:[ce.name," - ",ce.type," ",ce.breed&&`(${ce.breed})`]},ce.id||me)):s.jsx("span",{className:"text-sm text-muted-foreground",children:"Aucun animal enregistré"})})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-6 text-sm justify-center sm:justify-start",children:[s.jsxs("span",{children:[s.jsx("strong",{children:"Dernière visite:"})," ",T.lastVisit]}),s.jsxs("span",{children:[s.jsx("strong",{children:"Total visites:"})," ",T.totalVisits]})]})]})]}),s.jsxs("div",{className:"flex gap-2 justify-center sm:justify-end",children:[s.jsxs(L,{size:"sm",variant:"outline",className:"gap-2",onClick:()=>k(T),children:[s.jsx(Dn,{className:"h-4 w-4"}),"Voir"]}),s.jsxs(L,{size:"sm",variant:"outline",className:"gap-2",onClick:()=>D(T),children:[s.jsx(qt,{className:"h-4 w-4"}),"Modifier"]}),s.jsxs(L,{size:"sm",variant:"outline",className:"gap-2 text-destructive hover:text-destructive-foreground hover:bg-destructive",onClick:()=>X(T),children:[s.jsx(It,{className:"h-4 w-4"}),"Supprimer"]})]})]})})},T.id))}):s.jsx(re,{children:s.jsx(se,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"border-b",children:s.jsxs("tr",{className:"text-left",children:[s.jsx("th",{className:"p-2 sm:p-4 font-medium",children:"Client"}),s.jsx("th",{className:"p-2 sm:p-4 font-medium hidden sm:table-cell",children:"Contact"}),s.jsx("th",{className:"p-2 sm:p-4 font-medium hidden md:table-cell",children:"Animaux"}),s.jsx("th",{className:"p-2 sm:p-4 font-medium hidden lg:table-cell",children:"Dernière visite"}),s.jsx("th",{className:"p-2 sm:p-4 font-medium hidden lg:table-cell",children:"Total visites"}),s.jsx("th",{className:"p-2 sm:p-4 font-medium",children:"Actions"})]})}),s.jsx("tbody",{children:H.map(T=>s.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[s.jsx("td",{className:"p-2 sm:p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Qn,{className:"h-8 w-8 sm:h-10 sm:w-10",children:s.jsx(Xn,{className:"bg-primary text-primary-foreground text-xs sm:text-sm",children:T.name.split(" ").map(ce=>ce[0]).join("")})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-sm sm:text-base",children:T.name}),s.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:T.address})]})]})}),s.jsx("td",{className:"p-2 sm:p-4 hidden sm:table-cell",children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-xs sm:text-sm",children:T.email}),s.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:T.phone})]})}),s.jsx("td",{className:"p-2 sm:p-4 hidden md:table-cell",children:s.jsx("div",{className:"flex gap-1 flex-wrap",children:T.pets.length>0?T.pets.map((ce,me)=>s.jsx(ke,{variant:"secondary",className:"text-xs",children:ce.name},ce.id||me)):s.jsx("span",{className:"text-xs text-muted-foreground",children:"Aucun"})})}),s.jsx("td",{className:"p-2 sm:p-4 hidden lg:table-cell text-sm",children:T.lastVisit}),s.jsx("td",{className:"p-2 sm:p-4 hidden lg:table-cell text-sm",children:T.totalVisits}),s.jsx("td",{className:"p-2 sm:p-4",children:s.jsxs("div",{className:"flex gap-1",children:[s.jsx(L,{size:"sm",variant:"outline",onClick:()=>k(T),children:s.jsx(Dn,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),s.jsx(L,{size:"sm",variant:"outline",onClick:()=>D(T),children:s.jsx(qt,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),s.jsx(L,{size:"sm",variant:"outline",className:"text-destructive hover:text-destructive-foreground hover:bg-destructive",onClick:()=>X(T),children:s.jsx(It,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]})})]},T.id))})]})})})}),s.jsx(Rx,{open:b,onOpenChange:N}),w&&_&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(re,{className:"w-full max-w-2xl mx-auto max-h-[90vh] overflow-y-auto",children:[s.jsx(de,{children:s.jsxs(he,{className:"flex items-center justify-between",children:["Profil Client - ",w.name,s.jsx(L,{variant:"ghost",size:"sm",onClick:()=>C(!1),children:"✕"})]})}),s.jsxs(se,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Nom complet"}),s.jsx("p",{children:w.name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Email"}),s.jsx("p",{children:w.email})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Téléphone"}),s.jsx("p",{children:w.phone})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Ville"}),s.jsx("p",{children:w.city})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Adresse"}),s.jsx("p",{children:w.address})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-sm font-medium",children:["Animaux (",w.pets.length,")"]}),s.jsx("div",{className:"flex gap-2 flex-wrap mt-2",children:w.pets.map((T,ce)=>s.jsxs(ke,{variant:"secondary",children:[T.name," - ",T.type," ",T.breed&&`(${T.breed})`]},T.id||ce))})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-4",children:[s.jsx(L,{onClick:()=>te(),className:"w-full sm:w-auto",children:"Modifier"}),s.jsx(L,{variant:"outline",onClick:()=>{C(!1),w&&X(w)},className:"w-full sm:w-auto text-destructive hover:text-destructive-foreground hover:bg-destructive",children:"Supprimer"}),s.jsx(L,{variant:"outline",onClick:()=>C(!1),className:"w-full sm:w-auto",children:"Fermer"})]})]})]})}),w&&P&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(re,{className:"w-full max-w-2xl mx-auto max-h-[90vh] overflow-y-auto",children:[s.jsx(de,{children:s.jsxs(he,{className:"flex items-center justify-between",children:["Modifier Client - ",w.name,s.jsx(L,{variant:"ghost",size:"sm",onClick:()=>A(!1),children:"✕"})]})}),s.jsx(se,{children:s.jsxs("form",{onSubmit:ne,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"edit_first_name",children:"Prénom *"}),s.jsx(J,{id:"edit_first_name",value:W.first_name,onChange:T=>V(ce=>({...ce,first_name:T.target.value})),placeholder:"Prénom du client",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"edit_last_name",children:"Nom *"}),s.jsx(J,{id:"edit_last_name",value:W.last_name,onChange:T=>V(ce=>({...ce,last_name:T.target.value})),placeholder:"Nom du client",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"edit_email",children:"Email"}),s.jsx(J,{id:"edit_email",type:"email",value:W.email||"",onChange:T=>V(ce=>({...ce,email:T.target.value})),placeholder:"email@exemple.com"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"edit_phone",children:"Téléphone"}),s.jsx(J,{id:"edit_phone",value:W.phone||"",onChange:T=>V(ce=>({...ce,phone:T.target.value})),placeholder:"06 12 34 56 78"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"edit_mobile_phone",children:"Téléphone mobile"}),s.jsx(J,{id:"edit_mobile_phone",value:W.mobile_phone||"",onChange:T=>V(ce=>({...ce,mobile_phone:T.target.value})),placeholder:"06 12 34 56 78"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"edit_city",children:"Ville"}),s.jsx(J,{id:"edit_city",value:W.city||"Rabat",onChange:T=>V(ce=>({...ce,city:T.target.value})),placeholder:"Ville"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"edit_address",children:"Adresse"}),s.jsx(J,{id:"edit_address",value:W.address||"",onChange:T=>V(ce=>({...ce,address:T.target.value})),placeholder:"Adresse complète"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"edit_postal_code",children:"Code postal"}),s.jsx(J,{id:"edit_postal_code",value:W.postal_code||"",onChange:T=>V(ce=>({...ce,postal_code:T.target.value})),placeholder:"10000"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"edit_client_type",children:"Type de client"}),s.jsxs(be,{value:W.client_type||"particulier",onValueChange:T=>V(ce=>({...ce,client_type:T})),children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Type de client"})}),s.jsx(ye,{children:u.map(T=>s.jsx(q,{value:T.toLowerCase(),children:T},T))})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"edit_notes",children:"Notes"}),s.jsx(We,{id:"edit_notes",value:W.notes||"",onChange:T=>V(ce=>({...ce,notes:T.target.value})),placeholder:"Notes supplémentaires...",rows:3})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-4",children:[s.jsx(L,{type:"submit",disabled:a.isPending,className:"w-full sm:flex-1",children:a.isPending?s.jsxs(s.Fragment,{children:[s.jsx(Mn,{className:"h-4 w-4 animate-spin mr-2"}),"Modification..."]}):"Enregistrer"}),s.jsx(L,{type:"button",variant:"outline",onClick:()=>A(!1),disabled:a.isPending,className:"w-full sm:flex-1",children:"Annuler"})]})]})})]})}),s.jsx(s2,{open:O,onOpenChange:E,children:s.jsxs(Dy,{children:[s.jsxs(My,{children:[s.jsx($y,{children:"Confirmer la suppression"}),s.jsxs(Ry,{children:["Êtes-vous sûr de vouloir supprimer le client ",s.jsx("strong",{children:z==null?void 0:z.name})," ? Cette action est irréversible et supprimera définitivement toutes les données associées à ce client."]})]}),s.jsxs(Iy,{children:[s.jsx(Fy,{children:"Annuler"}),s.jsx(Ly,{onClick:Q,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",disabled:i.isPending,children:i.isPending?s.jsxs(s.Fragment,{children:[s.jsx(Mn,{className:"h-4 w-4 animate-spin mr-2"}),"Suppression..."]}):"Supprimer"})]})]})})]})},kCe=()=>s.jsx(ACe,{});function ECe({open:e,onOpenChange:t,pet:n,onEdit:r,onShowDossier:a,onDelete:i}){const{updatePet:o}=wn(),[l,c]=j.useState(null);j.useEffect(()=>{e&&c((n==null?void 0:n.photo)||null)},[e,n]);const u=j.useRef(null),d=h=>{var m;const f=(m=h.target.files)==null?void 0:m[0];if(f){const v=new FileReader;v.onload=p=>{var x;const g=(x=p.target)==null?void 0:x.result;c(g),o(n.id,{photo:g})},v.readAsDataURL(f)}};return n?s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Xe,{className:"sm:max-w-[700px] max-h-[80vh] overflow-y-auto",children:[s.jsx(tt,{children:s.jsx(nt,{children:"Profil Animal"})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-start gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx(Qn,{className:"h-24 w-24",children:l?s.jsx(Eu,{src:l,alt:n.name,className:"h-full w-full object-cover rounded-full"}):s.jsx(Xn,{className:"bg-primary-glow text-primary-foreground",children:s.jsx(pt,{className:"h-12 w-12"})})}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(L,{size:"sm",variant:"outline",className:"gap-2 w-full flex items-center justify-center",onClick:()=>{var h;return(h=u.current)==null?void 0:h.click()},children:[s.jsx(_u,{className:"h-4 w-4"}),l?"Changer photo":"Ajouter photo"]}),l&&s.jsx(L,{size:"sm",variant:"destructive",className:"gap-2 w-full",onClick:()=>{c(null),o(n.id,{photo:void 0})},children:"Supprimer photo"}),s.jsx("input",{ref:u,type:"file",accept:"image/*",onChange:d,className:"hidden"})]})]}),s.jsxs("div",{className:"flex-1 space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("h2",{className:"text-2xl font-semibold",children:n.name}),s.jsx(ke,{variant:"outline",className:n.status==="healthy"?"bg-secondary text-secondary-foreground":n.status==="treatment"?"bg-accent text-accent-foreground":"bg-destructive text-destructive-foreground",children:n.status==="healthy"?"En bonne santé":n.status==="treatment"?"En traitement":"Urgent"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Type:"}),s.jsx("p",{className:"text-muted-foreground",children:n.type})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Race:"}),s.jsx("p",{className:"text-muted-foreground",children:n.breed||"Non spécifiée"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Âge:"}),s.jsx("p",{className:"text-muted-foreground",children:n.birthDate?s.jsxs(s.Fragment,{children:[of(n.birthDate),s.jsx("br",{}),s.jsxs("span",{className:"text-xs",children:["Né(e) le ",ho(n.birthDate)]})]}):"Non spécifié"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Poids:"}),s.jsx("p",{className:"text-muted-foreground",children:n.weight||"Non spécifié"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Couleur:"}),s.jsx("p",{className:"text-muted-foreground",children:n.color||"Non spécifiée"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Vn,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Propriétaire:"}),s.jsx("p",{className:"text-muted-foreground",children:n.owner})]})]}),n.microchip&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Puce électronique:"}),s.jsx("p",{className:"text-muted-foreground font-mono",children:n.microchip})]})]}),s.jsxs("div",{className:"space-y-4",children:[n.lastVisit&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ze,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Dernière visite:"}),s.jsx("p",{className:"text-muted-foreground",children:new Date(n.lastVisit).toLocaleDateString("fr-FR")})]})]}),n.nextAppointment&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ze,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Prochain RDV:"}),s.jsx("p",{className:"text-muted-foreground",children:new Date(n.nextAppointment).toLocaleDateString("fr-FR")})]})]})]})]}),n.vaccinations&&n.vaccinations.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"font-semibold",children:"Vaccinations"}),s.jsx("div",{className:"flex gap-2 flex-wrap",children:n.vaccinations.map((h,f)=>s.jsx(ke,{variant:"outline",children:h},f))})]}),n.medicalNotes&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"font-semibold",children:"Notes médicales"}),s.jsx("p",{className:"text-muted-foreground p-3 bg-muted/30 rounded-lg",children:n.medicalNotes})]}),s.jsxs("div",{className:"flex justify-between gap-2 pt-4 border-t",children:[s.jsxs(L,{variant:"outline",onClick:a,className:"gap-2",children:[s.jsx(Xr,{className:"h-4 w-4"}),"Voir Dossier Médical"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(L,{variant:"outline",onClick:()=>t(!1),children:"Fermer"}),i&&s.jsxs(L,{variant:"outline",onClick:()=>{t(!1),i()},className:"text-destructive hover:text-destructive-foreground hover:bg-destructive",children:[s.jsx(It,{className:"h-4 w-4 mr-2"}),"Supprimer"]}),s.jsxs(L,{onClick:r,className:"gap-2",children:[s.jsx(qt,{className:"h-4 w-4"}),"Modifier"]})]})]})]})]})}):null}function TCe({open:e,onOpenChange:t,pet:n}){const[r,a]=j.useState("overview");if(!n)return null;const i=n.birthDate?of(n.birthDate):"Non renseigné",o=n.weight?`${n.weight} kg`:"Non renseigné";return s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Xe,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsx(tt,{children:s.jsxs(nt,{className:"flex items-center gap-2",children:[s.jsx(Xr,{className:"h-5 w-5"}),"Dossier Médical - ",n.name," (Propriétaire: ",n.owner,")"]})}),s.jsxs(Oa,{value:r,onValueChange:a,className:"w-full",children:[s.jsxs(Ys,{className:"grid w-full grid-cols-6",children:[s.jsxs(bt,{value:"overview",className:"flex items-center gap-1",children:[s.jsx(Aa,{className:"h-4 w-4"}),"Vue d'ensemble"]}),s.jsxs(bt,{value:"historique",className:"flex items-center gap-1",children:[s.jsx(Ze,{className:"h-4 w-4"}),"Historique"]}),s.jsxs(bt,{value:"prescriptions",className:"flex items-center gap-1",children:[s.jsx(Xr,{className:"h-4 w-4"}),"Prescriptions"]}),s.jsxs(bt,{value:"vaccinations",className:"flex items-center gap-1",children:[s.jsx(uo,{className:"h-4 w-4"}),"Vaccinations"]}),s.jsxs(bt,{value:"antiparasites",className:"flex items-center gap-1",children:[s.jsx(Fs,{className:"h-4 w-4"}),"Antiparasites"]}),s.jsxs(bt,{value:"pedigree",className:"flex items-center gap-1",children:[s.jsx(kC,{className:"h-4 w-4"}),"Pedigree"]})]}),s.jsxs(jt,{value:"overview",className:"space-y-6",children:[s.jsxs(re,{children:[s.jsx(de,{children:s.jsx(he,{children:"Informations générales"})}),s.jsx(se,{children:s.jsxs("div",{className:"flex items-start gap-6",children:[s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx(Qn,{className:"h-32 w-32",children:n.photo?s.jsx(Eu,{src:n.photo,alt:n.name}):s.jsx(Xn,{className:"bg-primary-glow text-primary-foreground",children:s.jsx(pt,{className:"h-16 w-16"})})}),s.jsxs(L,{variant:"outline",size:"sm",className:"gap-2",children:[s.jsx(_u,{className:"h-4 w-4"}),"Ajouter photo"]})]}),s.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg",children:n.name}),s.jsxs("div",{className:"space-y-2 mt-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Type:"})," ",n.type]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Race:"})," ",n.breed||"Non renseignée"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Sexe:"})," ",n.gender==="male"?"Mâle":n.gender==="female"?"Femelle":"Inconnu"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Âge:"})," ",i]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Date de naissance:"})," ",n.birthDate||"Non renseignée"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Couleur:"})," ",n.color||"Non renseignée"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Poids actuel:"})," ",o]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"N° puce:"})," ",n.microchip||"Non renseigné"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Statut de santé:"}),s.jsx(ke,{variant:n.status==="healthy"?"default":n.status==="treatment"?"secondary":"destructive",children:n.status==="healthy"?"En bonne santé":n.status==="treatment"?"En traitement":"Urgent"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Vn,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:"Propriétaire:"})," ",n.owner]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Dernière visite:"})," ",n.lastVisit||"Aucune"]})]})]})]})})]}),s.jsxs(re,{children:[s.jsxs(de,{className:"flex flex-row items-center justify-between",children:[s.jsx(he,{children:"Galerie photos"}),s.jsxs(L,{size:"sm",className:"gap-2",children:[s.jsx(lt,{className:"h-4 w-4"}),"Ajouter une photo"]})]}),s.jsx(se,{children:s.jsxs("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-8 text-center",children:[s.jsx(_u,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucune photo disponible"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Ajoutez des photos de l'animal pour enrichir son dossier"})]})})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsx(re,{children:s.jsx(se,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(bI,{className:"h-5 w-5 text-blue-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Poids actuel"}),s.jsx("p",{className:"text-lg font-bold",children:o}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"-28.2kg"})]})]})})}),s.jsx(re,{children:s.jsx(se,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(YN,{className:"h-5 w-5 text-red-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Température"}),s.jsx("p",{className:"text-lg font-bold",children:"38.5°C"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Moy: 38.5°C"})]})]})})}),s.jsx(re,{children:s.jsx(se,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Hn,{className:"h-5 w-5 text-green-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Consultations"}),s.jsx("p",{className:"text-lg font-bold",children:"1"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Dernière: 15/01/2024"})]})]})})}),s.jsx(re,{children:s.jsx(se,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Fs,{className:"h-5 w-5 text-yellow-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Alertes"}),s.jsx("p",{className:"text-lg font-bold",children:"1"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"À traiter"})]})]})})})]}),s.jsxs(re,{children:[s.jsx(de,{children:s.jsxs(he,{className:"flex items-center gap-2",children:[s.jsx(Ze,{className:"h-5 w-5"}),"Prochain suivi recommandé"]})}),s.jsx(se,{children:s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/20 p-4 rounded-lg",children:[s.jsx("p",{className:"font-medium",children:"Contrôle dans 3 an"}),s.jsxs(L,{size:"sm",className:"mt-2 gap-2",children:[s.jsx(lt,{className:"h-4 w-4"}),"Planifier"]})]})})]}),s.jsxs(re,{children:[s.jsx(de,{children:s.jsx(he,{className:"text-red-600",children:"Alertes importantes"})}),s.jsxs(se,{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-red-50 dark:bg-red-950/20 rounded-lg",children:[s.jsx(Fs,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:"Contrôle de routine recommandé"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Dernière consultation il y a 20 mois"})]}),s.jsx(L,{size:"sm",variant:"outline",children:"Planifier consultation"})]}),s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-red-50 dark:bg-red-950/20 rounded-lg",children:[s.jsx(Fs,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:"Vaccination en retard"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"DHPP - 247 jour(s) de retard"})]}),s.jsx(L,{size:"sm",variant:"outline",children:"Planifier vaccination"})]}),s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-red-50 dark:bg-red-950/20 rounded-lg",children:[s.jsx(Fs,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:"Vaccination en retard"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Lyme - 512 jour(s) de retard"})]}),s.jsx(L,{size:"sm",variant:"outline",children:"Planifier vaccination"})]})]})]})]}),s.jsx(jt,{value:"historique",className:"space-y-4",children:s.jsxs(re,{children:[s.jsx(de,{children:s.jsx(he,{children:"Historique médical"})}),s.jsx(se,{children:s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Ze,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Pas assez de données pour afficher les tendances"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Ajoutez plus de consultations avec poids et température"})]})})]})}),s.jsx(jt,{value:"prescriptions",className:"space-y-4",children:s.jsxs(re,{children:[s.jsxs(de,{className:"flex flex-row items-center justify-between",children:[s.jsx(he,{children:"Prescriptions"}),s.jsxs(L,{size:"sm",className:"gap-2",children:[s.jsx(lt,{className:"h-4 w-4"}),"Nouvelle prescription"]})]}),s.jsx(se,{children:s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Xr,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucune prescription disponible"})]})})]})}),s.jsx(jt,{value:"vaccinations",className:"space-y-4",children:s.jsxs(re,{children:[s.jsxs(de,{className:"flex flex-row items-center justify-between",children:[s.jsx(he,{children:"Vaccinations"}),s.jsxs(L,{size:"sm",className:"gap-2",children:[s.jsx(lt,{className:"h-4 w-4"}),"Nouvelle vaccination"]})]}),s.jsx(se,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm font-medium",children:[s.jsx("div",{children:"Rage"}),s.jsx("div",{children:"DHPP"}),s.jsx("div",{children:"Lyme"})]}),s.jsxs("div",{className:"text-center py-8",children:[s.jsx(uo,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucune vaccination enregistrée"})]})]})})]})}),s.jsx(jt,{value:"antiparasites",className:"space-y-4",children:s.jsxs(re,{children:[s.jsxs(de,{className:"flex flex-row items-center justify-between",children:[s.jsx(he,{children:"Antiparasitaires"}),s.jsxs(L,{size:"sm",className:"gap-2",children:[s.jsx(lt,{className:"h-4 w-4"}),"Nouveau traitement"]})]}),s.jsx(se,{children:s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Fs,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucun traitement antiparasitaire enregistré"})]})})]})}),s.jsx(jt,{value:"pedigree",className:"space-y-4",children:s.jsxs(re,{children:[s.jsx(de,{children:s.jsx(he,{children:"Informations de pedigree"})}),s.jsx(se,{children:s.jsxs("div",{className:"text-center py-8",children:[s.jsx(kC,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucune information de pedigree disponible"})]})})]})})]}),s.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[s.jsx("div",{className:"flex gap-2",children:s.jsxs(L,{variant:"outline",size:"sm",children:[s.jsx(Xr,{className:"h-4 w-4 mr-2"}),"Voir Dossier Médical"]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(L,{variant:"outline",onClick:()=>t(!1),children:"Fermer"}),s.jsxs(L,{children:[s.jsx(qt,{className:"h-4 w-4 mr-2"}),"Modifier"]})]})]}),s.jsxs("div",{className:"mt-4 p-4 bg-muted/50 rounded-lg",children:[s.jsx("p",{className:"text-sm font-medium",children:"Animal modifié"}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Les informations de ",n.name," ont été mises à jour."]})]})]})})}function OCe({pet:e,consultations:t}){var N,w,S;const n=[...t].sort((_,C)=>new Date(C.date).getTime()-new Date(_.date).getTime()),r=n.filter(_=>_.weight).map(_=>({date:_.date,weight:parseFloat(_.weight)})),a=n.filter(_=>_.temperature).map(_=>({date:_.date,temperature:parseFloat(_.temperature)})),i=((N=r[0])==null?void 0:N.weight)||0,o=((w=r[1])==null?void 0:w.weight)||0,l=i-o,c=l>0?"up":l<0?"down":"stable",u=((S=a[0])==null?void 0:S.temperature)||0,d=a.length>0?a.reduce((_,C)=>_+C.temperature,0)/a.length:0,h=a.length>0?Math.min(...a.map(_=>_.temperature)):0,f=a.length>0?Math.max(...a.map(_=>_.temperature)):0,m=t.length,v=new Date().getMonth(),p=new Date().getFullYear(),g=t.filter(_=>{const C=new Date(_.date);return C.getMonth()===v&&C.getFullYear()===p}).length,x=n[0],y=x?Math.floor((new Date().getTime()-new Date(x.date).getTime())/(1e3*60*60*24)):null,b=[];return u>39.5?b.push({type:"danger",message:"Température élevée",icon:pn}):u<37.5&&b.push({type:"warning",message:"Température basse",icon:pn}),l<-2&&b.push({type:"warning",message:"Perte de poids",icon:Cu}),y&&y>180&&b.push({type:"info",message:"Contrôle recommandé",icon:Ze}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Statistiques médicales"}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[s.jsxs(re,{children:[s.jsx(de,{className:"pb-2",children:s.jsxs(he,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(bI,{className:"h-4 w-4"}),"Poids actuel"]})}),s.jsxs(se,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[i,"kg"]}),l!==0&&s.jsxs("div",{className:"flex items-center gap-1 text-sm mt-1",children:[c==="up"?s.jsx(dn,{className:"h-3 w-3 text-green-600"}):c==="down"?s.jsx(Cu,{className:"h-3 w-3 text-red-600"}):s.jsx(xU,{className:"h-3 w-3 text-gray-600"}),s.jsxs("span",{className:c==="up"?"text-green-600":c==="down"?"text-red-600":"text-gray-600",children:[Math.abs(l),"kg"]})]})]})]}),s.jsxs(re,{children:[s.jsx(de,{className:"pb-2",children:s.jsxs(he,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(YN,{className:"h-4 w-4"}),"Température"]})}),s.jsxs(se,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[u,"°C"]}),s.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Moy: ",d.toFixed(1),"°C"]}),a.length>1&&s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Min: ",h,"°C | Max: ",f,"°C"]})]})]}),s.jsxs(re,{children:[s.jsx(de,{className:"pb-2",children:s.jsxs(he,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(Aa,{className:"h-4 w-4"}),"Consultations"]})}),s.jsxs(se,{children:[s.jsx("div",{className:"text-2xl font-bold",children:m}),s.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Ce mois: ",g]}),x&&s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Dernière: ",new Date(x.date).toLocaleDateString("fr-FR")]})]})]}),s.jsxs(re,{children:[s.jsx(de,{className:"pb-2",children:s.jsxs(he,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(pn,{className:"h-4 w-4"}),"Alertes"]})}),s.jsxs(se,{children:[s.jsx("div",{className:"text-2xl font-bold",children:b.length}),s.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:b.length>0?"À traiter":"Aucune"}),b.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:b.slice(0,2).map((_,C)=>s.jsx(ke,{variant:"outline",className:"text-xs",children:_.message},C))})]})]})]}),b.length>0&&s.jsxs(re,{className:"border-destructive/20",children:[s.jsx(de,{children:s.jsx(he,{className:"text-destructive text-base",children:"Alertes médicales"})}),s.jsx(se,{children:s.jsx("div",{className:"space-y-2",children:b.map((_,C)=>s.jsxs("div",{className:"flex items-center gap-3 p-2 bg-destructive/5 rounded",children:[s.jsx(_.icon,{className:`h-4 w-4 ${_.type==="danger"?"text-destructive":_.type==="warning"?"text-yellow-600":"text-blue-600"}`}),s.jsx("span",{className:"text-sm font-medium",children:_.message})]},C))})})]}),r.length>1||a.length>1?s.jsxs(re,{children:[s.jsx(de,{children:s.jsx(he,{className:"text-base",children:"Tendances"})}),s.jsx(se,{children:s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.length>1&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-2",children:"Évolution du poids"}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Poids initial:"}),s.jsxs("span",{children:[r[r.length-1].weight,"kg"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Poids actuel:"}),s.jsxs("span",{children:[r[0].weight,"kg"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Évolution totale:"}),s.jsxs("span",{className:r[0].weight>r[r.length-1].weight?"text-green-600":"text-red-600",children:[r[0].weight-r[r.length-1].weight,"kg"]})]})]})]}),a.length>1&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-2",children:"Évolution de la température"}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Température moyenne:"}),s.jsxs("span",{children:[d.toFixed(1),"°C"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Variation:"}),s.jsxs("span",{children:[f-h,"°C"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Stabilité:"}),s.jsx("span",{className:f-h<1?"text-green-600":"text-yellow-600",children:f-h<1?"Stable":"Variable"})]})]})]})]})})]}):s.jsx(re,{children:s.jsxs(se,{className:"p-6 text-center text-muted-foreground",children:[s.jsx(Aa,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground/50"}),s.jsx("p",{children:"Pas assez de données pour afficher les tendances"}),s.jsx("p",{className:"text-sm",children:"Ajoutez plus de consultations avec poids et température"})]})})]})}const ZT={healthy:"bg-secondary text-secondary-foreground",treatment:"bg-accent text-accent-foreground",urgent:"bg-destructive text-destructive-foreground"},DCe=(e,t)=>{const n=t.find(o=>o.id===e.client_id),r=n?`${n.first_name} ${n.last_name}`:"Propriétaire inconnu",a=Math.abs(e.id.split("").reduce((o,l)=>(o=(o<<5)-o+l.charCodeAt(0),o&o),0)),i=Math.abs(e.client_id.split("").reduce((o,l)=>(o=(o<<5)-o+l.charCodeAt(0),o&o),0));return{id:a,name:e.name,type:e.species,breed:e.breed||"",gender:e.sex==="Mâle"?"male":e.sex==="Femelle"?"female":void 0,birthDate:e.birth_date||"",weight:e.weight?e.weight.toString():"",color:e.color||"",microchip:e.microchip_number||"",medicalNotes:e.notes||"",photo:e.photo_url||"",ownerId:i,owner:r,status:e.status==="vivant"?"healthy":e.status==="décédé"?"urgent":"treatment",lastVisit:e.updated_at?new Date(e.updated_at).toLocaleDateString("fr-FR"):"Jamais",nextAppointment:void 0,vaccinations:[],dbId:e.id,dbClientId:e.client_id}},MCe=()=>{var Rt;const{data:e=[],isLoading:t}=hn(),{data:n=[],isLoading:r}=vn(),{data:a}=lee(),i=KZ(),o=GZ(),{data:l=fn.animal_species}=Io(),{data:c=fn.animal_breeds}=z3(),{data:u=fn.animal_colors}=V3(),d=e.map(ae=>DCe(ae,n)),{data:h=[]}=ws(),{data:f=[]}=Xl(),m=j.useCallback(ae=>{var Me;const Ne=typeof ae=="string"?ae:(Me=d.find(He=>He.id===ae))==null?void 0:Me.dbId;return Ne?h.filter(He=>He.animal_id===Ne):[]},[d,h]),v=j.useCallback(ae=>{var Me;const Ne=typeof ae=="string"?ae:(Me=d.find(He=>He.id===ae))==null?void 0:Me.dbId;return Ne?f.filter(He=>He.animal_id===Ne):[]},[d,f]),p=j.useCallback(ae=>{var Ne,Me,He,dr,ct,Xt;return{id:Math.abs(ae.id.split("").reduce((ie,Be)=>(ie=(ie<<5)-ie+Be.charCodeAt(0),ie&ie),0)),clientId:Math.abs(ae.client_id.split("").reduce((ie,Be)=>(ie=(ie<<5)-ie+Be.charCodeAt(0),ie&ie),0)),clientName:(Ne=ae.client)!=null&&Ne.first_name&&((Me=ae.client)!=null&&Me.last_name)?`${ae.client.first_name} ${ae.client.last_name}`:"Client inconnu",petId:Math.abs(ae.animal_id.split("").reduce((ie,Be)=>(ie=(ie<<5)-ie+Be.charCodeAt(0),ie&ie),0)),petName:((He=ae.animal)==null?void 0:He.name)||"Animal inconnu",date:ae.consultation_date||ae.created_at,weight:(dr=ae.weight)==null?void 0:dr.toString(),temperature:(ct=ae.temperature)==null?void 0:ct.toString(),symptoms:ae.symptoms,diagnosis:ae.diagnosis,treatment:ae.treatment,medications:ae.medications,followUp:ae.follow_up,cost:(Xt=ae.cost)==null?void 0:Xt.toString(),notes:ae.notes,photos:ae.photos||[],createdAt:ae.created_at,purpose:ae.consultation_type||"consultation",veterinarian:ae.veterinarian_name||"Vétérinaire"}},[]),{currentView:g}=sc("pets"),[x,y]=j.useState(""),[b,N]=j.useState("all"),[w,S]=j.useState("all"),[_,C]=j.useState(g);Pt();const P=l,[A,O]=j.useState(!1),[E,z]=j.useState(!1),[I,W]=j.useState(null),[V,H]=j.useState(!1),[k,D]=j.useState(!1),[X,Q]=j.useState(!1),[te,ne]=j.useState(!1),[T,ce]=j.useState(null),{toast:me}=at(),[le,Z]=j.useState({client_id:"",name:"",species:"Chien",breed:"",color:"",sex:"Inconnu",weight:void 0,height:void 0,birth_date:"",microchip_number:"",tattoo_number:"",sterilized:!1,sterilization_date:"",notes:"",photo_url:"",status:"vivant"}),B=d.filter(ae=>{const Ne=ae.name.toLowerCase().includes(x.toLowerCase())||ae.breed&&ae.breed.toLowerCase().includes(x.toLowerCase())||ae.owner.toLowerCase().includes(x.toLowerCase()),Me=b==="all"||ae.type.toLowerCase()===b.toLowerCase(),He=w==="all"||ae.status===w;return Ne&&Me&&He}),oe=ae=>{W(ae),H(!0)},U=ae=>{W(ae),Z({client_id:ae.dbClientId,name:ae.name,species:ae.type,breed:ae.breed||"",color:ae.color||"",sex:ae.gender==="male"?"Mâle":ae.gender==="female"?"Femelle":"Inconnu",weight:ae.weight?parseFloat(ae.weight):void 0,height:void 0,birth_date:ae.birthDate||"",microchip_number:ae.microchip||"",tattoo_number:"",sterilized:!1,sterilization_date:"",notes:ae.medicalNotes||"",photo_url:ae.photo||"",status:ae.status==="healthy"?"vivant":ae.status==="urgent"?"décédé":"perdu"}),D(!0)},K=()=>{I&&Z({client_id:I.dbClientId,name:I.name,species:I.type,breed:I.breed||"",color:I.color||"",sex:I.gender==="male"?"Mâle":I.gender==="female"?"Femelle":"Inconnu",weight:I.weight?parseFloat(I.weight):void 0,height:void 0,birth_date:I.birthDate||"",microchip_number:I.microchip||"",tattoo_number:"",sterilized:!1,sterilization_date:"",notes:I.medicalNotes||"",photo_url:I.photo||"",status:I.status==="healthy"?"vivant":I.status==="urgent"?"décédé":"perdu"}),H(!1),D(!0)},fe=ae=>{ce(ae),ne(!0)},Se=async()=>{if(T)try{await o.mutateAsync(T.dbId),me({title:"Suppression réussie",description:`${T.name} a été supprimé avec succès de la base de données`}),ne(!1),ce(null)}catch(ae){console.error("Error deleting animal:",ae);let Ne="Erreur lors de la suppression de l'animal";if(ae instanceof Error){const Me=ae.message.toLowerCase();Me.includes("foreign key")||Me.includes("constraint")?Ne="Impossible de supprimer cet animal car il a des données associées (consultations, vaccinations, etc.). Supprimez d'abord ces données.":Me.includes("permission")||Me.includes("access")?Ne="Vous n'avez pas les permissions nécessaires pour supprimer cet animal.":Me.includes("network")||Me.includes("connection")?Ne="Problème de connexion. Vérifiez votre connexion internet.":Me.includes("authentication")?Ne="Votre session a expiré. Veuillez vous reconnecter.":Ne=ae.message}me({title:"Erreur de suppression",description:Ne,variant:"destructive"})}},$e=ae=>{W(ae),Q(!0)},Ue=()=>{H(!1),Q(!0)},ft=async()=>{var ae;if(I){if(!((ae=le.name)!=null&&ae.trim())){me({title:"Erreur de validation",description:"Le nom de l'animal est obligatoire.",variant:"destructive"});return}if(!le.client_id){me({title:"Erreur de validation",description:"Le propriétaire est obligatoire.",variant:"destructive"});return}if(le.microchip_number&&le.microchip_number.trim()&&e.find(Me=>Me.microchip_number===le.microchip_number.trim()&&Me.id!==I.dbId)){me({title:"Erreur de validation",description:"Un animal avec ce numéro de puce existe déjà.",variant:"destructive"});return}try{await i.mutateAsync({id:I.dbId,data:le}),me({title:"Modification réussie",description:`${le.name} a été modifié avec succès.`}),D(!1)}catch(Ne){console.error("Error updating animal:",Ne);let Me="Une erreur inattendue s'est produite";if(Ne instanceof Error){const He=Ne.message.toLowerCase();He.includes("microchip")||He.includes("unique")?Me="Ce numéro de puce électronique est déjà utilisé par un autre animal":He.includes("client")||He.includes("foreign key")?Me="Le propriétaire sélectionné n'est plus valide":He.includes("name")||He.includes("not null")?Me="Tous les champs obligatoires doivent être remplis":He.includes("authentication")||He.includes("not authenticated")?Me="Votre session a expiré. Veuillez vous reconnecter.":He.includes("network")||He.includes("connection")?Me="Problème de connexion. Vérifiez votre connexion internet.":He.includes("permission")||He.includes("access")?Me="Vous n'avez pas les permissions nécessaires.":Me=Ne.message}me({title:"Erreur lors de la modification",description:Me,variant:"destructive"})}}},Tt=j.useMemo(()=>I?m(I.id).map(p):[],[I,m,p]);return s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8 sm:px-6",children:[s.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold sm:text-3xl",children:"Gestion des Animaux"}),s.jsx("p",{className:"text-muted-foreground mt-2 text-sm sm:text-base",children:"Suivez tous les animaux et leurs informations médicales"})]}),s.jsxs("div",{className:"flex gap-2 flex-wrap",children:[s.jsxs(L,{size:"sm",variant:_==="cards"?"default":"outline",onClick:()=>C("cards"),className:"gap-2 flex-1 sm:flex-none",children:[s.jsx(yo,{className:"h-4 w-4"}),"Cartes"]}),s.jsxs(L,{size:"sm",variant:_==="table"?"default":"outline",onClick:()=>C("table"),className:"gap-2 flex-1 sm:flex-none",children:[s.jsx(di,{className:"h-4 w-4"}),"Tableau"]}),s.jsxs(L,{className:"gap-2 medical-glow flex-1 sm:flex-none",onClick:()=>O(!0),children:[s.jsx(lt,{className:"h-4 w-4"}),"Nouvel Animal"]})]})]}),s.jsxs("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4",children:[s.jsx(re,{children:s.jsx(se,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pt,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total animaux"}),s.jsx("p",{className:"text-2xl font-bold",children:(a==null?void 0:a.totalAnimals)||d.length})]})]})})}),s.jsx(re,{children:s.jsx(se,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Bn,{className:"h-5 w-5 text-green-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"En bonne santé"}),s.jsx("p",{className:"text-2xl font-bold",children:((Rt=a==null?void 0:a.animalsByStatus)==null?void 0:Rt.vivant)||d.filter(ae=>ae.status==="healthy").length})]})]})})}),s.jsx(re,{children:s.jsx(se,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pn,{className:"h-5 w-5 text-yellow-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"En traitement"}),s.jsx("p",{className:"text-2xl font-bold",children:d.filter(ae=>ae.status==="treatment").length})]})]})})}),s.jsx(re,{children:s.jsx(se,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Vn,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Clients actifs"}),s.jsx("p",{className:"text-2xl font-bold",children:(a==null?void 0:a.totalClients)||n.length})]})]})})})]}),s.jsx(re,{className:"border-dashed",children:s.jsx(se,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(GN,{className:"h-5 w-5 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:"Configuration dynamique activée"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Les types d'animaux sont configurables dans les paramètres"})]})]}),s.jsxs("div",{className:"flex gap-4 text-xs text-muted-foreground",children:[s.jsxs("span",{children:[l.length," espèces"]}),s.jsxs("span",{children:[Object.keys(c).length," groupes de races"]}),s.jsxs("span",{children:[u.length," couleurs"]})]})]})})}),s.jsxs(re,{children:[s.jsx(de,{children:s.jsxs(he,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[s.jsx(Co,{className:"h-5 w-5"}),"Rechercher et filtrer"]})}),s.jsxs(se,{className:"space-y-4",children:[s.jsx(J,{placeholder:"Rechercher par nom, race ou propriétaire...",value:x,onChange:ae=>y(ae.target.value),className:"w-full max-w-md"}),s.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:gap-4",children:[s.jsxs(be,{value:b,onValueChange:N,children:[s.jsx(xe,{className:"w-full sm:w-40",children:s.jsx(je,{placeholder:"Tous types"})}),s.jsxs(ye,{children:[s.jsx(q,{value:"all",children:"Tous types"}),P.map((ae,Ne)=>s.jsx(q,{value:ae.toLowerCase(),children:ae},Ne))]})]}),s.jsxs(be,{value:w,onValueChange:S,children:[s.jsx(xe,{className:"w-full sm:w-40",children:s.jsx(je,{placeholder:"Statut"})}),s.jsxs(ye,{children:[s.jsx(q,{value:"all",children:"Tous statuts"}),s.jsx(q,{value:"healthy",children:"En bonne santé"}),s.jsx(q,{value:"treatment",children:"En traitement"}),s.jsx(q,{value:"urgent",children:"Urgent"})]})]})]})]})]}),_==="cards"?s.jsx("div",{className:"grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:B.map(ae=>s.jsx(re,{className:"card-hover",children:s.jsx(se,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Qn,{className:"h-12 w-12 sm:h-16 sm:w-16",children:ae.photo?s.jsx(Eu,{src:ae.photo,alt:ae.name}):s.jsx(Xn,{className:"bg-primary-glow text-primary-foreground",children:s.jsx(pt,{className:"h-6 w-6 sm:h-8 sm:w-8"})})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("h3",{className:"text-lg sm:text-xl font-semibold truncate",children:ae.name}),s.jsx("p",{className:"text-muted-foreground text-sm truncate",children:ae.breed}),s.jsx(ke,{variant:"outline",className:`${ZT[ae.status]} text-xs`,children:ae.status==="healthy"?"En bonne santé":ae.status==="treatment"?"En traitement":"Urgent"})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Type:"})," ",ae.type]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Âge:"})," ",ae.birthDate?of(ae.birthDate):"Non renseigné"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Poids:"})," ",ae.weight]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Couleur:"})," ",ae.color]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Vn,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),s.jsxs("span",{className:"truncate",children:["Propriétaire: ",typeof ae.owner=="string"?ae.owner:(()=>{const Ne=n.find(Me=>String(Me.id)===String(ae.ownerId));return Ne?`${Ne.first_name} ${Ne.last_name}`:"Non spécifié"})()]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Ze,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),s.jsxs("span",{children:["Dernière visite: ",ae.lastVisit?new Date(ae.lastVisit).toLocaleDateString("fr-FR"):"Aucune"]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Hn,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),s.jsxs("span",{children:["Consultations: ",m(ae.id).length]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-sm",children:"Vaccinations:"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:(()=>{const Ne=v(ae.id);return Ne.length>0?`${Ne.length} vaccination${Ne.length>1?"s":""} enregistrée${Ne.length>1?"s":""}`:"Aucune vaccination enregistrée"})()})]}),s.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row",children:[s.jsxs(L,{size:"sm",variant:"outline",className:"gap-2 flex-1",onClick:()=>oe(ae),children:[s.jsx(Dn,{className:"h-4 w-4"}),"Voir"]}),s.jsxs(L,{size:"sm",variant:"outline",className:"gap-2 flex-1",onClick:()=>U(ae),children:[s.jsx(qt,{className:"h-4 w-4"}),"Modifier"]}),s.jsxs(L,{size:"sm",variant:"outline",className:"gap-2 flex-1 text-destructive hover:text-destructive-foreground hover:bg-destructive",onClick:()=>fe(ae),children:[s.jsx(It,{className:"h-4 w-4"}),"Supprimer"]})]}),s.jsx("div",{className:"flex gap-2",children:s.jsxs(L,{size:"sm",className:"flex-1",onClick:()=>{W(ae),z(!0)},children:[s.jsx(Hn,{className:"h-4 w-4 mr-2"}),"Consultation"]})})]})})},ae.id))}):s.jsx(re,{children:s.jsx(se,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full min-w-[600px]",children:[s.jsx("thead",{className:"border-b",children:s.jsxs("tr",{className:"text-left",children:[s.jsx("th",{className:"p-4 font-medium",children:"Animal"}),s.jsx("th",{className:"p-4 font-medium",children:"Type"}),s.jsx("th",{className:"p-4 font-medium",children:"Âge"}),s.jsx("th",{className:"p-4 font-medium",children:"Propriétaire"}),s.jsx("th",{className:"p-4 font-medium",children:"Statut"}),s.jsx("th",{className:"p-4 font-medium",children:"Dernière visite"}),s.jsx("th",{className:"p-4 font-medium",children:"Actions"})]})}),s.jsx("tbody",{children:B.map(ae=>s.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Qn,{className:"h-10 w-10",children:ae.photo?s.jsx(Eu,{src:ae.photo,alt:ae.name}):s.jsx(Xn,{className:"bg-primary-glow text-primary-foreground",children:s.jsx(pt,{className:"h-5 w-5"})})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:ae.name}),s.jsx("div",{className:"text-sm text-muted-foreground",children:ae.breed})]})]})}),s.jsx("td",{className:"p-4",children:ae.type}),s.jsx("td",{className:"p-4",children:ae.birthDate?of(ae.birthDate):"Non renseigné"}),s.jsx("td",{className:"p-4",children:typeof ae.owner=="string"?ae.owner:(()=>{const Ne=n.find(Me=>String(Me.id)===String(ae.ownerId));return Ne?`${Ne.first_name} ${Ne.last_name}`:"Non spécifié"})()}),s.jsx("td",{className:"p-4",children:s.jsx(ke,{variant:"outline",className:ZT[ae.status],children:ae.status==="healthy"?"En bonne santé":ae.status==="treatment"?"En traitement":"Urgent"})}),s.jsx("td",{className:"p-4",children:ae.lastVisit?new Date(ae.lastVisit).toLocaleDateString("fr-FR"):"Aucune"}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex gap-1 flex-wrap",children:[s.jsx(L,{size:"sm",variant:"outline",onClick:()=>oe(ae),children:s.jsx(Dn,{className:"h-4 w-4"})}),s.jsx(L,{size:"sm",variant:"outline",onClick:()=>U(ae),children:s.jsx(qt,{className:"h-4 w-4"})}),s.jsx(L,{size:"sm",variant:"outline",className:"text-destructive hover:text-destructive-foreground hover:bg-destructive",onClick:()=>fe(ae),children:s.jsx(It,{className:"h-4 w-4"})}),s.jsx(L,{size:"sm",variant:"outline",onClick:()=>$e(ae),children:"Dossier"})]})})]},ae.id))})]})})})}),I&&s.jsxs(re,{children:[s.jsx(de,{children:s.jsxs(he,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[s.jsx(Aa,{className:"h-5 w-5"}),"Statistiques médicales - ",I.name]})}),s.jsx(se,{children:s.jsx(OCe,{pet:I,consultations:Tt})})]}),s.jsx(Lx,{open:A,onOpenChange:O}),s.jsx(Fx,{open:E,onOpenChange:z}),s.jsx(ECe,{open:V,onOpenChange:H,pet:I,onEdit:K,onShowDossier:Ue,onDelete:I?()=>fe(I):void 0}),s.jsx(et,{open:k,onOpenChange:D,children:s.jsxs(Xe,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto mx-4",children:[s.jsxs(tt,{children:[s.jsx(nt,{children:"Modifier Animal"}),s.jsx(Dt,{children:"Modifiez les informations de l'animal."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"name",children:"Nom *"}),s.jsx(J,{id:"name",value:le.name,onChange:ae=>Z(Ne=>({...Ne,name:ae.target.value})),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"species",children:"Espèce *"}),s.jsxs(be,{value:le.species,onValueChange:ae=>Z(Ne=>({...Ne,species:ae})),children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Sélectionner l'espèce"})}),s.jsxs(ye,{children:[s.jsx(q,{value:"Chien",children:"Chien"}),s.jsx(q,{value:"Chat",children:"Chat"}),s.jsx(q,{value:"Oiseau",children:"Oiseau"}),s.jsx(q,{value:"Lapin",children:"Lapin"}),s.jsx(q,{value:"Furet",children:"Furet"}),s.jsx(q,{value:"Autre",children:"Autre"})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"client_id",children:"Propriétaire *"}),s.jsxs(be,{value:le.client_id,onValueChange:ae=>Z(Ne=>({...Ne,client_id:ae})),children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Sélectionner le propriétaire"})}),s.jsx(ye,{children:n.map(ae=>s.jsxs(q,{value:ae.id,children:[ae.first_name," ",ae.last_name]},ae.id))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"breed",children:"Race"}),s.jsx(J,{id:"breed",value:le.breed||"",onChange:ae=>Z(Ne=>({...Ne,breed:ae.target.value}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"sex",children:"Sexe"}),s.jsxs(be,{value:le.sex,onValueChange:ae=>Z(Ne=>({...Ne,sex:ae})),children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Sélectionner le sexe"})}),s.jsxs(ye,{children:[s.jsx(q,{value:"Mâle",children:"Mâle"}),s.jsx(q,{value:"Femelle",children:"Femelle"}),s.jsx(q,{value:"Inconnu",children:"Inconnu"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"birth_date",children:"Date de naissance"}),s.jsx(J,{id:"birth_date",type:"date",value:le.birth_date||"",onChange:ae=>Z(Ne=>({...Ne,birth_date:ae.target.value||void 0}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"weight",children:"Poids (kg)"}),s.jsx(J,{id:"weight",type:"number",step:"0.1",value:le.weight||"",onChange:ae=>Z(Ne=>({...Ne,weight:ae.target.value?parseFloat(ae.target.value):void 0}))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"color",children:"Couleur"}),s.jsx(J,{id:"color",value:le.color||"",onChange:ae=>Z(Ne=>({...Ne,color:ae.target.value}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"microchip_number",children:"N° puce électronique"}),s.jsx(J,{id:"microchip_number",value:le.microchip_number||"",onChange:ae=>Z(Ne=>({...Ne,microchip_number:ae.target.value}))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"notes",children:"Notes médicales"}),s.jsx(We,{id:"notes",value:le.notes||"",onChange:ae=>Z(Ne=>({...Ne,notes:ae.target.value})),placeholder:"Notes additionnelles..."})]}),s.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:justify-end pt-4",children:[s.jsx(L,{type:"button",variant:"outline",onClick:()=>D(!1),className:"w-full sm:w-auto",children:"Annuler"}),s.jsxs(L,{onClick:ft,disabled:i.isPending,className:"w-full sm:w-auto",children:[i.isPending&&s.jsx(Mn,{className:"mr-2 h-4 w-4 animate-spin"}),"Sauvegarder"]})]})]})]})}),s.jsx(TCe,{open:X,onOpenChange:Q,pet:I}),s.jsx(s2,{open:te,onOpenChange:ne,children:s.jsxs(Dy,{children:[s.jsxs(My,{children:[s.jsx($y,{children:"Confirmer la suppression"}),s.jsxs(Ry,{children:["Êtes-vous sûr de vouloir supprimer l'animal ",s.jsx("strong",{children:T==null?void 0:T.name})," ? Cette action est irréversible et supprimera définitivement toutes les données associées à cet animal, y compris ses consultations, vaccinations et historique médical."]})]}),s.jsxs(Iy,{children:[s.jsx(Fy,{children:"Annuler"}),s.jsx(Ly,{onClick:Se,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",disabled:o.isPending,children:o.isPending?s.jsxs(s.Fragment,{children:[s.jsx(Mn,{className:"h-4 w-4 animate-spin mr-2"}),"Suppression..."]}):"Supprimer"})]})]})})]})},ICe=()=>s.jsx(MCe,{});function $Ce({open:e,onOpenChange:t}){const{data:n=[]}=vn(),{data:r=[]}=hn(),a=F3(),{toast:i}=at(),{data:o=[],isLoading:l}=KS(),[c,u]=j.useState({clientId:"",animalId:"",date:"",time:"",appointmentType:"consultation",notes:""}),[d,h]=j.useState([]),f=async p=>{if(p.preventDefault(),!c.clientId||!c.animalId||!c.date||!c.time){i({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires",variant:"destructive"});return}try{const g=new Date(`${c.date}T${c.time}:00`);await a.mutateAsync({client_id:c.clientId,animal_id:c.animalId,appointment_date:g.toISOString(),appointment_type:c.appointmentType,notes:c.notes||void 0,duration_minutes:30}),i({title:"Succès",description:"Rendez-vous créé avec succès"}),u({clientId:"",animalId:"",date:"",time:"",appointmentType:"consultation",notes:""}),h([]),t(!1)}catch(g){console.error("Error creating appointment:",g),i({title:"Erreur",description:"Impossible de créer le rendez-vous",variant:"destructive"})}},m=p=>{u(x=>({...x,clientId:p,animalId:""}));const g=r.filter(x=>x.client_id===p);h(g)},v=p=>`${p.first_name} ${p.last_name}`;return s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Xe,{className:"max-w-2xl",children:[s.jsxs(tt,{children:[s.jsxs(nt,{className:"flex items-center gap-2",children:[s.jsx(Ze,{className:"h-5 w-5"}),"Nouveau Rendez-vous"]}),s.jsx(Dt,{children:"Créer un nouveau rendez-vous pour un client et son animal"})]}),s.jsxs("form",{onSubmit:f,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"client",children:"Client *"}),s.jsxs(be,{value:c.clientId,onValueChange:m,children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Sélectionner un client"})}),s.jsx(ye,{children:n.map(p=>s.jsx(q,{value:p.id,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Vn,{className:"h-4 w-4"}),v(p)]})},p.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"animal",children:"Animal *"}),s.jsxs(be,{value:c.animalId,onValueChange:p=>u(g=>({...g,animalId:p})),disabled:!c.clientId,children:[s.jsx(xe,{children:s.jsx(je,{placeholder:c.clientId?"Sélectionner un animal":"Sélectionner d'abord un client"})}),s.jsx(ye,{children:d.map(p=>s.jsx(q,{value:p.id,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pt,{className:"h-4 w-4"}),p.name," (",p.species,")"]})},p.id))})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"date",children:"Date *"}),s.jsx(J,{id:"date",type:"date",value:c.date,onChange:p=>u(g=>({...g,date:p.target.value})),min:new Date().toISOString().split("T")[0]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"time",children:"Heure *"}),s.jsx(J,{id:"time",type:"time",value:c.time,onChange:p=>u(g=>({...g,time:p.target.value}))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"type",children:"Type de rendez-vous"}),s.jsxs(be,{value:c.appointmentType,onValueChange:p=>u(g=>({...g,appointmentType:p})),children:[s.jsx(xe,{children:s.jsx(je,{})}),s.jsx(ye,{children:o.map(p=>s.jsx(q,{value:p.toLowerCase().replace(/\s+/g,"-"),children:p},p))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"notes",children:"Notes (optionnel)"}),s.jsx(We,{id:"notes",placeholder:"Notes additionnelles sur le rendez-vous...",value:c.notes,onChange:p=>u(g=>({...g,notes:p.target.value})),rows:3})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(L,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsx(L,{type:"submit",disabled:a.isPending,children:a.isPending?"Création...":"Créer le rendez-vous"})]})]})]})})}function ur(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function wo(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function a2(e,t){const n=ur(e);return isNaN(t)?wo(e,NaN):(t&&n.setDate(n.getDate()+t),n)}const x8=6048e5,RCe=864e5;let LCe={};function By(){return LCe}function Zf(e,t){var l,c,u,d;const n=By(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=ur(e),i=a.getDay(),o=(i<r?7:0)+i-r;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function Fv(e){return Zf(e,{weekStartsOn:1})}function y8(e){const t=ur(e),n=t.getFullYear(),r=wo(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const a=Fv(r),i=wo(e,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const o=Fv(i);return t.getTime()>=a.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function Bv(e){const t=ur(e);return t.setHours(0,0,0,0),t}function eO(e){const t=ur(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function FCe(e,t){const n=Bv(e),r=Bv(t),a=+n-eO(n),i=+r-eO(r);return Math.round((a-i)/RCe)}function BCe(e){const t=y8(e),n=wo(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Fv(n)}function zCe(e,t){const n=Bv(e),r=Bv(t);return+n==+r}function VCe(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function qCe(e){if(!VCe(e)&&typeof e!="number")return!1;const t=ur(e);return!isNaN(Number(t))}function UCe(e){const t=ur(e),n=wo(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}const WCe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},HCe=(e,t,n)=>{let r;const a=WCe[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function au(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const KCe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},GCe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},YCe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},QCe={date:au({formats:KCe,defaultWidth:"full"}),time:au({formats:GCe,defaultWidth:"full"}),dateTime:au({formats:YCe,defaultWidth:"full"})},XCe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},JCe=(e,t,n,r)=>XCe[e];function ma(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const ZCe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ePe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},tPe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},nPe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},rPe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},sPe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},aPe=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},iPe={ordinalNumber:aPe,era:ma({values:ZCe,defaultWidth:"wide"}),quarter:ma({values:ePe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:ma({values:tPe,defaultWidth:"wide"}),day:ma({values:nPe,defaultWidth:"wide"}),dayPeriod:ma({values:rPe,defaultWidth:"wide",formattingValues:sPe,defaultFormattingWidth:"wide"})};function pa(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?lPe(l,h=>h.test(o)):oPe(l,h=>h.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=t.slice(o.length);return{value:u,rest:d}}}function oPe(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function lPe(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function b8(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const a=r[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const cPe=/^(\d+)(th|st|nd|rd)?/i,uPe=/\d+/i,dPe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},hPe={any:[/^b/i,/^(a|c)/i]},fPe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},mPe={any:[/1/i,/2/i,/3/i,/4/i]},pPe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},gPe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},vPe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},xPe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},yPe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},bPe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},jPe={ordinalNumber:b8({matchPattern:cPe,parsePattern:uPe,valueCallback:e=>parseInt(e,10)}),era:pa({matchPatterns:dPe,defaultMatchWidth:"wide",parsePatterns:hPe,defaultParseWidth:"any"}),quarter:pa({matchPatterns:fPe,defaultMatchWidth:"wide",parsePatterns:mPe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:pa({matchPatterns:pPe,defaultMatchWidth:"wide",parsePatterns:gPe,defaultParseWidth:"any"}),day:pa({matchPatterns:vPe,defaultMatchWidth:"wide",parsePatterns:xPe,defaultParseWidth:"any"}),dayPeriod:pa({matchPatterns:yPe,defaultMatchWidth:"any",parsePatterns:bPe,defaultParseWidth:"any"})},wPe={code:"en-US",formatDistance:HCe,formatLong:QCe,formatRelative:JCe,localize:iPe,match:jPe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function NPe(e){const t=ur(e);return FCe(t,UCe(t))+1}function SPe(e){const t=ur(e),n=+Fv(t)-+BCe(t);return Math.round(n/x8)+1}function j8(e,t){var d,h,f,m;const n=ur(e),r=n.getFullYear(),a=By(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??a.firstWeekContainsDate??((m=(f=a.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,o=wo(e,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const l=Zf(o,t),c=wo(e,0);c.setFullYear(r,0,i),c.setHours(0,0,0,0);const u=Zf(c,t);return n.getTime()>=l.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function _Pe(e,t){var l,c,u,d;const n=By(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=j8(e,t),i=wo(e,0);return i.setFullYear(a,0,r),i.setHours(0,0,0,0),Zf(i,t)}function CPe(e,t){const n=ur(e),r=+Zf(n,t)-+_Pe(n,t);return Math.round(r/x8)+1}function At(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const ki={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return At(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):At(n+1,2)},d(e,t){return At(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return At(e.getHours()%12||12,t.length)},H(e,t){return At(e.getHours(),t.length)},m(e,t){return At(e.getMinutes(),t.length)},s(e,t){return At(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return At(a,t.length)}},jc={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},tO={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return ki.y(e,t)},Y:function(e,t,n,r){const a=j8(e,r),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return At(o,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):At(i,t.length)},R:function(e,t){const n=y8(e);return At(n,t.length)},u:function(e,t){const n=e.getFullYear();return At(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return At(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return At(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return ki.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return At(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=CPe(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):At(a,t.length)},I:function(e,t,n){const r=SPe(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):At(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):ki.d(e,t)},D:function(e,t,n){const r=NPe(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):At(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return At(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return At(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return At(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(r===12?a=jc.noon:r===0?a=jc.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(r>=17?a=jc.evening:r>=12?a=jc.afternoon:r>=4?a=jc.morning:a=jc.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ki.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):ki.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):At(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):At(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):ki.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):ki.s(e,t)},S:function(e,t){return ki.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return rO(r);case"XXXX":case"XX":return el(r);case"XXXXX":case"XXX":default:return el(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return rO(r);case"xxxx":case"xx":return el(r);case"xxxxx":case"xxx":default:return el(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+nO(r,":");case"OOOO":default:return"GMT"+el(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+nO(r,":");case"zzzz":default:return"GMT"+el(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return At(r,t.length)},T:function(e,t,n){const r=e.getTime();return At(r,t.length)}};function nO(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),i=r%60;return i===0?n+String(a):n+String(a)+t+At(i,2)}function rO(e,t){return e%60===0?(e>0?"-":"+")+At(Math.abs(e)/60,2):el(e,t)}function el(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=At(Math.trunc(r/60),2),i=At(r%60,2);return n+a+t+i}const sO=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},w8=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},PPe=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return sO(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",sO(r,t)).replace("{{time}}",w8(a,t))},APe={p:w8,P:PPe},kPe=/^D+$/,EPe=/^Y+$/,TPe=["D","DD","YY","YYYY"];function OPe(e){return kPe.test(e)}function DPe(e){return EPe.test(e)}function MPe(e,t,n){const r=IPe(e,t,n);if(console.warn(r),TPe.includes(e))throw new RangeError(r)}function IPe(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const $Pe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,RPe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,LPe=/^'([^]*?)'?$/,FPe=/''/g,BPe=/[a-zA-Z]/;function Ge(e,t,n){var d,h,f,m,v,p,g,x;const r=By(),a=(n==null?void 0:n.locale)??r.locale??wPe,i=(n==null?void 0:n.firstWeekContainsDate)??((h=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(f=r.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((p=(v=n==null?void 0:n.locale)==null?void 0:v.options)==null?void 0:p.weekStartsOn)??r.weekStartsOn??((x=(g=r.locale)==null?void 0:g.options)==null?void 0:x.weekStartsOn)??0,l=ur(e);if(!qCe(l))throw new RangeError("Invalid time value");let c=t.match(RPe).map(y=>{const b=y[0];if(b==="p"||b==="P"){const N=APe[b];return N(y,a.formatLong)}return y}).join("").match($Pe).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const b=y[0];if(b==="'")return{isToken:!1,value:zPe(y)};if(tO[b])return{isToken:!0,value:y};if(b.match(BPe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:y}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return c.map(y=>{if(!y.isToken)return y.value;const b=y.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&DPe(b)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&OPe(b))&&MPe(b,t,String(e));const N=tO[b[0]];return N(l,b,a.localize,u)}).join("")}function zPe(e){const t=e.match(LPe);return t?t[1].replace(FPe,"'"):e}function VPe(e,t){const n=ur(e),r=ur(t);return n.getTime()>r.getTime()}function zv(e,t){const n=ur(e),r=ur(t);return+n<+r}const qPe={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},UPe=(e,t,n)=>{let r;const a=qPe[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",String(t)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"dans "+r:"il y a "+r:r},WPe={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},HPe={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},KPe={full:"{{date}} 'à' {{time}}",long:"{{date}} 'à' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},GPe={date:au({formats:WPe,defaultWidth:"full"}),time:au({formats:HPe,defaultWidth:"full"}),dateTime:au({formats:KPe,defaultWidth:"full"})},YPe={lastWeek:"eeee 'dernier à' p",yesterday:"'hier à' p",today:"'aujourd’hui à' p",tomorrow:"'demain à' p'",nextWeek:"eeee 'prochain à' p",other:"P"},QPe=(e,t,n,r)=>YPe[e],XPe={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jésus-Christ","après Jésus-Christ"]},JPe={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2ème trim.","3ème trim.","4ème trim."],wide:["1er trimestre","2ème trimestre","3ème trimestre","4ème trimestre"]},ZPe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],wide:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},eAe={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},tAe={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"après-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’après-midi",evening:"du soir",night:"du matin"}},nAe=(e,t)=>{const n=Number(e),r=t==null?void 0:t.unit;if(n===0)return"0";const a=["year","week","hour","minute","second"];let i;return n===1?i=r&&a.includes(r)?"ère":"er":i="ème",n+i},rAe=["MMM","MMMM"],sAe={preprocessor:(e,t)=>e.getDate()===1||!t.some(r=>r.isToken&&rAe.includes(r.value))?t:t.map(r=>r.isToken&&r.value==="do"?{isToken:!0,value:"d"}:r),ordinalNumber:nAe,era:ma({values:XPe,defaultWidth:"wide"}),quarter:ma({values:JPe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:ma({values:ZPe,defaultWidth:"wide"}),day:ma({values:eAe,defaultWidth:"wide"}),dayPeriod:ma({values:tAe,defaultWidth:"wide"})},aAe=/^(\d+)(ième|ère|ème|er|e)?/i,iAe=/\d+/i,oAe={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},lAe={any:[/^av/i,/^ap/i]},cAe={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},uAe={any:[/1/i,/2/i,/3/i,/4/i]},dAe={narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},hAe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},fAe={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},mAe={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},pAe={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},gAe={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},vAe={ordinalNumber:b8({matchPattern:aAe,parsePattern:iAe,valueCallback:e=>parseInt(e)}),era:pa({matchPatterns:oAe,defaultMatchWidth:"wide",parsePatterns:lAe,defaultParseWidth:"any"}),quarter:pa({matchPatterns:cAe,defaultMatchWidth:"wide",parsePatterns:uAe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:pa({matchPatterns:dAe,defaultMatchWidth:"wide",parsePatterns:hAe,defaultParseWidth:"any"}),day:pa({matchPatterns:fAe,defaultMatchWidth:"wide",parsePatterns:mAe,defaultParseWidth:"any"}),dayPeriod:pa({matchPatterns:pAe,defaultMatchWidth:"any",parsePatterns:gAe,defaultParseWidth:"any"})},On={code:"fr",formatDistance:UPe,formatLong:GPe,formatRelative:QPe,localize:sAe,match:vAe,options:{weekStartsOn:1,firstWeekContainsDate:4}};function xAe(e,t,n){const r=[],{openingTime:a,closingTime:i,slotDuration:o,lunchBreakStart:l,lunchBreakEnd:c}=t,u=Mp(a),d=Mp(i),h=l?Mp(l):null,f=c?Mp(c):null;for(let m=u;m<d;m+=o){const v=yAe(m),p=h&&f&&m>=h&&m<f,g=n.some(x=>x.date===e&&x.time===v);r.push({time:v,isAvailable:!g&&!p,isLunchBreak:!!p})}return r}function Mp(e){const[t,n]=e.split(":").map(Number);return t*60+n}function yAe(e){const t=Math.floor(e/60),n=e%60;return`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}function bAe(e){return new Date(e).toLocaleDateString("fr-FR",{weekday:"long"})}function jAe(e,t){const n=bAe(e).toLowerCase();return t.workingDays.includes(n)}const aO=(e,t)=>{switch(e){case"appointment":switch(t){case"confirmed":return"bg-green-100 text-green-800 border-green-200";case"completed":return"bg-gray-100 text-gray-800 border-gray-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-blue-100 text-blue-800 border-blue-200"}case"vaccination":switch(t){case"completed":return"bg-green-100 text-green-800 border-green-200";case"overdue":return"bg-red-100 text-red-800 border-red-200";case"scheduled":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-yellow-100 text-yellow-800 border-yellow-200"}case"antiparasitic":switch(t){case"completed":return"bg-green-100 text-green-800 border-green-200";case"overdue":return"bg-red-100 text-red-800 border-red-200";case"scheduled":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-purple-100 text-purple-800 border-purple-200"}default:return"bg-gray-100 text-gray-800 border-gray-200"}},iO=(e,t)=>{switch(e){case"appointment":return s.jsx(tn,{className:"h-3 w-3"});case"vaccination":return s.jsx(Bn,{className:"h-3 w-3"});case"antiparasitic":return s.jsx(pn,{className:"h-3 w-3"});default:return s.jsx(Ze,{className:"h-3 w-3"})}},wAe=({events:e,onEventClick:t,onDateClick:n,onTimeSlotClick:r,showTimeSlots:a=!1,title:i="Calendrier",icon:o=s.jsx(Ze,{className:"h-5 w-5"})})=>{var S;const{settings:l}=Pt(),[c,u]=j.useState(new Date),[d,h]=j.useState(""),f=new Date(c.getFullYear(),c.getMonth(),1),m=new Date(c.getFullYear(),c.getMonth()+1,0),v=new Date(f);v.setDate(v.getDate()-f.getDay());const p=[],g=new Date(v);for(;g<=m||p.length<42;)p.push(new Date(g)),g.setDate(g.getDate()+1);const x=j.useMemo(()=>{const _={};return e.forEach(C=>{const P=C.date;_[P]||(_[P]=[]),_[P].push(C)}),_},[e]),y=j.useMemo(()=>!d||!a?[]:xAe(d,l.scheduleSettings,[]),[d,a,l.scheduleSettings]),b=_=>{const C=new Date(c);C.setMonth(c.getMonth()+(_==="next"?1:-1)),u(C)},N=_=>{const C=Ge(_,"yyyy-MM-dd");h(C),n==null||n(C)},w=_=>{r&&d&&r(d,_)};return s.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[s.jsxs(re,{children:[s.jsx(de,{className:"pb-3 sm:pb-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-0",children:[s.jsxs(he,{className:"flex items-center gap-2 text-base sm:text-lg",children:[o,i]}),s.jsxs("div",{className:"flex items-center justify-between sm:gap-2",children:[s.jsx(L,{variant:"outline",size:"sm",onClick:()=>b("prev"),className:"flex-1 sm:flex-none",children:"←"}),s.jsx("span",{className:"font-medium text-sm sm:text-base px-2 sm:min-w-[140px] text-center",children:Ge(c,"MMMM yyyy",{locale:On})}),s.jsx(L,{variant:"outline",size:"sm",onClick:()=>b("next"),className:"flex-1 sm:flex-none",children:"→"})]})]})}),s.jsxs(se,{className:"p-2 sm:p-6",children:[s.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2 sm:mb-4",children:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"].map(_=>s.jsx("div",{className:"p-1 sm:p-2 text-center text-xs sm:text-sm font-medium text-gray-500",children:_},_))}),s.jsx("div",{className:"grid grid-cols-7 gap-1",children:p.map((_,C)=>{const P=Ge(_,"yyyy-MM-dd"),A=x[P]||[],O=_.getMonth()===c.getMonth(),E=zCe(_,new Date),z=P===d,I=jAe(P,l.scheduleSettings);return s.jsxs("div",{className:`
                    min-h-[60px] sm:min-h-[80px] p-1 border rounded-lg relative cursor-pointer hover:bg-muted/50
                    ${O?"bg-white":"bg-gray-50"}
                    ${E?"ring-2 ring-blue-500":""}
                    ${z?"bg-blue-100 border-blue-300":""}
                    ${I?"":"opacity-50"}
                  `,onClick:()=>N(_),children:[s.jsx("div",{className:`text-xs sm:text-sm font-medium ${O?"text-gray-900":"text-gray-400"}`,children:_.getDate()}),s.jsxs("div",{className:"space-y-0.5 sm:space-y-1 mt-0.5 sm:mt-1",children:[A.slice(0,2).map((W,V)=>s.jsx("div",{className:`
                          text-xs p-0.5 sm:p-1 rounded text-center truncate border cursor-pointer
                          ${aO(W.type,W.status)}
                        `,title:`${W.title}${W.time?` - ${W.time}`:""}${W.clientName?` (${W.clientName})`:""}`,onClick:H=>{H.stopPropagation(),t==null||t(W)},children:s.jsxs("div",{className:"flex items-center gap-0.5 sm:gap-1 justify-center",children:[iO(W.type,W.status),s.jsx("span",{className:"truncate text-xs",children:W.title})]})},V)),A.length>2&&s.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["+",A.length-2]})]})]},C)})})]})]}),d&&s.jsxs(re,{children:[s.jsx(de,{className:"pb-3",children:s.jsx(he,{className:"text-base sm:text-lg",children:Ge(new Date(d),"EEEE d MMMM yyyy",{locale:On})})}),s.jsxs(se,{className:"p-3 sm:p-6",children:[((S=x[d])==null?void 0:S.length)>0?s.jsx("div",{className:"space-y-3",children:x[d].map(_=>s.jsxs("div",{className:`
                      p-3 rounded-lg border cursor-pointer hover:shadow-sm
                      ${aO(_.type,_.status)}
                    `,onClick:()=>t==null?void 0:t(_),children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[iO(_.type,_.status),s.jsx("span",{className:"font-medium",children:_.title})]}),s.jsx(ke,{variant:"outline",className:"text-xs",children:_.status})]}),_.time&&s.jsxs("div",{className:"flex items-center gap-1 text-sm mt-1",children:[s.jsx(tn,{className:"h-3 w-3"}),s.jsx("span",{children:_.time})]}),_.clientName&&s.jsxs("div",{className:"flex items-center gap-1 text-sm mt-1",children:[s.jsx(Vn,{className:"h-3 w-3"}),s.jsx("span",{children:_.clientName})]}),_.petName&&s.jsxs("div",{className:"flex items-center gap-1 text-sm mt-1",children:[s.jsx(pt,{className:"h-3 w-3"}),s.jsx("span",{children:_.petName})]})]},_.id))}):s.jsx("p",{className:"text-muted-foreground text-center py-4",children:"Aucun événement prévu pour cette date"}),a&&y.length>0&&s.jsxs("div",{className:"mt-4 sm:mt-6",children:[s.jsx("h4",{className:"font-medium mb-2 sm:mb-3 text-sm sm:text-base",children:"Créneaux disponibles"}),s.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-1 sm:gap-2",children:y.map(_=>s.jsxs(L,{variant:_.isAvailable?"outline":"ghost",size:"sm",disabled:!_.isAvailable,onClick:()=>w(_.time),className:"text-xs p-1 sm:p-2",children:[_.time,_.isLunchBreak&&s.jsx(ke,{variant:"secondary",className:"ml-1 text-xs hidden sm:inline",children:"Pause"})]},_.time))})]})]})]})]})},oO={scheduled:"bg-blue-100 text-blue-800",confirmed:"bg-green-100 text-green-800",completed:"bg-gray-100 text-gray-800",cancelled:"bg-red-100 text-red-800","no-show":"bg-orange-100 text-orange-800"},bb={scheduled:"Planifié",confirmed:"Confirmé",completed:"Terminé",cancelled:"Annulé","no-show":"Absent"},lO={consultation:"Consultation générale",vaccination:"Vaccination",chirurgie:"Chirurgie",urgence:"Urgence",controle:"Contrôle post-opératoire",sterilisation:"Stérilisation",dentaire:"Soins dentaires"};function NAe(){const{data:e=[],isLoading:t,error:n}=Jl(),r=fee(),a=mee(),{toast:i}=at(),{currentView:o}=sc("appointments"),{data:l=[],isLoading:c}=Io(),{data:u=[],isLoading:d}=KS(),[h,f]=j.useState(!1),[m,v]=j.useState(""),[p,g]=j.useState("all"),[x,y]=j.useState("all"),[b,N]=j.useState("all"),[w,S]=j.useState("all"),[_,C]=j.useState(new Date().toISOString().split("T")[0]),[P,A]=j.useState("list"),[O,E]=j.useState(o),[z,I]=j.useState(!1),[W,V]=j.useState(null),[H,k]=j.useState(null),[D,X]=j.useState(""),Q=ie=>new Date(ie).toLocaleDateString("fr-FR"),te=ie=>new Date(ie).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),ne=ie=>new Date(ie.appointment_date).toISOString().split("T")[0],T=ie=>new Date(ie.appointment_date).toTimeString().slice(0,5),[ce,me]=j.useState(()=>{const ie=new Date;return new Date(ie.getFullYear(),ie.getMonth(),1)}),le=ie=>ie.client?`${ie.client.first_name} ${ie.client.last_name}`:"Unknown Client",Z=ie=>{var Be;return((Be=ie.animal)==null?void 0:Be.name)||"Unknown Animal"},B=ie=>{var Be;return((Be=ie.animal)==null?void 0:Be.species)||"Unknown Species"},oe=()=>{const ie=new Date;return e.filter(Be=>new Date(Be.appointment_date)>ie)},U=()=>{const ie=new Date;return e.filter(Be=>new Date(Be.appointment_date)<ie&&Be.status==="scheduled")},K=oe(),fe=U(),Se=e.filter(ie=>{const Be=le(ie),ea=Z(ie),_s=Be.toLowerCase().includes(m.toLowerCase())||ea.toLowerCase().includes(m.toLowerCase())||ie.notes&&ie.notes.toLowerCase().includes(m.toLowerCase()),Bd=p==="all"||ie.status===p,ac=x==="all"||ie.appointment_type===x,Vo=b==="all"||B(ie)===b;let _r=!0;const ta=new Date(ie.appointment_date),Cs=ta.toISOString().split("T")[0];if(w==="today")_r=Cs===new Date().toISOString().split("T")[0];else if(w==="week"){const na=new Date,wi=new Date(na.getTime()+7*24*60*60*1e3);_r=ta>=na&&ta<=wi}else if(w==="month"){const na=new Date,wi=na.getMonth(),ic=na.getFullYear();_r=ta.getMonth()===wi&&ta.getFullYear()===ic}else w==="specific"&&(_r=Cs===_);return _s&&Bd&&ac&&Vo&&_r}),$e=async(ie,Be)=>{try{await r.mutateAsync({id:ie,data:{status:Be}}),i({title:"Statut mis à jour",description:`Le rendez-vous est maintenant ${bb[Be].toLowerCase()}.`})}catch{i({title:"Erreur",description:"Impossible de mettre à jour le statut",variant:"destructive"})}},Ue=async()=>{if(!H)return;const{id:ie,field:Be}=H;if(e.find(_s=>_s.id===ie))try{await r.mutateAsync({id:ie,data:{[Be]:D}}),i({title:"Modifié",description:`${Be} mis à jour`})}catch{i({title:"Erreur",description:"Impossible de mettre à jour",variant:"destructive"})}k(null)},ft=async ie=>{V(ie),I(!0)},Tt=async()=>{if(!W)return;const ie=Z(W);try{await a.mutateAsync(W.id),i({title:"Rendez-vous supprimé",description:`Le rendez-vous pour ${ie} a été supprimé.`}),I(!1),V(null)}catch{i({title:"Erreur",description:"Impossible de supprimer le rendez-vous",variant:"destructive"})}},Rt=ie=>e.filter(Be=>new Date(Be.appointment_date).toISOString().split("T")[0]===ie),Ne=(()=>{const ie=new Date().toISOString().split("T")[0];return Rt(ie)})(),Me=ce.getFullYear(),He=ce.getMonth(),dr=new Date(Me,He,1).getDay(),ct=new Date(Me,He+1,0).getDate();let Xt=1-dr;for(;Xt<=ct;){const ie=[];for(let Be=0;Be<7;Be++)Xt>0&&Xt<=ct?ie.push(Xt):ie.push(0),Xt++}return t?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Chargement des rendez-vous..."})]})}):n?s.jsx("div",{className:"p-6",children:s.jsx(re,{className:"border-red-200 bg-red-50",children:s.jsx(se,{className:"p-6",children:s.jsxs("div",{className:"flex items-center text-red-800",children:[s.jsx(Fs,{className:"w-5 h-5 mr-2"}),s.jsxs("span",{children:["Erreur lors du chargement des rendez-vous: ",n.message]})]})})})}):s.jsxs("div",{className:"container mx-auto px-2 sm:px-4 lg:px-6 py-4 sm:py-6 lg:py-8 space-y-4 sm:space-y-6 lg:space-y-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Gestion des Rendez-vous"}),s.jsx("p",{className:"text-muted-foreground text-sm sm:text-base",children:"Planifiez et gérez tous vos rendez-vous vétérinaires"})]}),s.jsxs(L,{onClick:()=>f(!0),className:"gap-2 w-full sm:w-auto",children:[s.jsx(lt,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Nouveau Rendez-vous"}),s.jsx("span",{className:"sm:hidden",children:"Nouveau RDV"})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx(L,{variant:P==="list"?"default":"outline",onClick:()=>A("list"),size:"sm",className:"flex-1 sm:flex-none",children:"Liste"}),s.jsx(L,{variant:P==="calendar"?"default":"outline",onClick:()=>A("calendar"),size:"sm",className:"flex-1 sm:flex-none",children:"Calendrier"})]}),P==="list"&&s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(L,{size:"sm",variant:O==="cards"?"default":"outline",onClick:()=>E("cards"),className:"gap-1 sm:gap-2 flex-1 sm:flex-none",children:[s.jsx(yo,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Cartes"})]}),s.jsxs(L,{size:"sm",variant:O==="table"?"default":"outline",onClick:()=>E("table"),className:"gap-1 sm:gap-2 flex-1 sm:flex-none",children:[s.jsx(di,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Tableau"})]})]})]}),P==="calendar"?s.jsx(wAe,{events:e.map(ie=>({id:parseInt(ie.id),type:"appointment",title:`${le(ie)} - ${Z(ie)}`,time:T(ie),date:ne(ie),status:ie.status,clientName:le(ie),petName:Z(ie)})),onEventClick:ie=>{},onDateClick:ie=>{C(ie)},onTimeSlotClick:(ie,Be)=>{f(!0)},showTimeSlots:!0,title:"Calendrier des Rendez-vous",icon:s.jsx(Ze,{className:"h-5 w-5"})}):s.jsxs("div",{className:"grid gap-2 sm:gap-4 grid-cols-2 lg:grid-cols-4",children:[s.jsx(re,{children:s.jsx(se,{className:"p-3 sm:p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ze,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Aujourd'hui"}),s.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:Ne.length})]})]})})}),s.jsx(re,{children:s.jsx(se,{className:"p-3 sm:p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(tn,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"À venir"}),s.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:K.length})]})]})})}),s.jsx(re,{children:s.jsx(se,{className:"p-3 sm:p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Fs,{className:"h-4 w-4 sm:h-5 sm:w-5 text-orange-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"En retard"}),s.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:fe.length})]})]})})}),s.jsx(re,{children:s.jsx(se,{className:"p-3 sm:p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Bn,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Total"}),s.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:e.length})]})]})})})]}),s.jsxs(re,{children:[s.jsx(de,{className:"pb-3",children:s.jsxs(he,{className:"flex items-center gap-2 text-base sm:text-lg",children:[s.jsx(vI,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Filtres et Recherche"]})}),s.jsx(se,{className:"space-y-3 sm:space-y-4",children:s.jsxs("div",{className:"grid gap-3 sm:gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(wc,{children:"Recherche"}),s.jsxs("div",{className:"relative",children:[s.jsx(Co,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(J,{placeholder:"Client, animal, motif...",value:m,onChange:ie=>v(ie.target.value),className:"pl-10"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(wc,{children:"Statut"}),s.jsxs(be,{value:p,onValueChange:g,children:[s.jsx(xe,{children:s.jsx(je,{})}),s.jsxs(ye,{children:[s.jsx(q,{value:"all",children:"Tous les statuts"}),s.jsx(q,{value:"scheduled",children:"Planifié"}),s.jsx(q,{value:"confirmed",children:"Confirmé"}),s.jsx(q,{value:"completed",children:"Terminé"}),s.jsx(q,{value:"cancelled",children:"Annulé"}),s.jsx(q,{value:"no-show",children:"Absent"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(wc,{children:"Type"}),s.jsxs(be,{value:x,onValueChange:y,children:[s.jsx(xe,{children:s.jsx(je,{})}),s.jsxs(ye,{children:[s.jsx(q,{value:"all",children:"Tous les types"}),u.map(ie=>s.jsx(q,{value:ie.toLowerCase().replace(/\s+/g,"-"),children:ie},ie))]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(wc,{children:"Espèce"}),s.jsxs(be,{value:b,onValueChange:N,children:[s.jsx(xe,{children:s.jsx(je,{})}),s.jsxs(ye,{children:[s.jsx(q,{value:"all",children:"Toutes espèces"}),l.map(ie=>s.jsx(q,{value:ie,children:ie},ie))]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(wc,{children:"Période"}),s.jsxs(be,{value:w,onValueChange:S,children:[s.jsx(xe,{children:s.jsx(je,{})}),s.jsxs(ye,{children:[s.jsx(q,{value:"all",children:"Toutes les dates"}),s.jsx(q,{value:"today",children:"Ce jour"}),s.jsx(q,{value:"week",children:"Cette semaine"}),s.jsx(q,{value:"month",children:"Ce mois"}),s.jsx(q,{value:"specific",children:"Date spécifique"})]})]})]}),w==="specific"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(wc,{children:"Date"}),s.jsx(J,{type:"date",value:_,onChange:ie=>C(ie.target.value)})]})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("h2",{className:"text-xl font-semibold",children:["Rendez-vous (",Se.length,")"]})}),Se.length===0?s.jsx(re,{children:s.jsxs(se,{className:"p-8 text-center text-muted-foreground",children:[s.jsx(Ze,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"Aucun rendez-vous trouvé"}),s.jsx("p",{className:"text-sm",children:"Commencez par créer votre premier rendez-vous"})]})}):O==="cards"?s.jsx("div",{className:"space-y-4",children:Se.sort((ie,Be)=>new Date(ie.appointment_date).getTime()-new Date(Be.appointment_date).getTime()).map(ie=>s.jsx(re,{className:"card-hover",children:s.jsx(se,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[s.jsxs("div",{className:"space-y-4 flex-1",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Vn,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:le(ie)})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pt,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:Z(ie)})]}),s.jsx(ke,{className:oO[ie.status],children:bb[ie.status]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ze,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{children:Q(ie.appointment_date)})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(tn,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{children:te(ie.appointment_date)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Type:"}),s.jsx("span",{className:"ml-1",children:lO[ie.appointment_type]||ie.appointment_type})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Durée:"}),s.jsxs("span",{className:"ml-1",children:[ie.duration_minutes||30," min"]})]})]}),ie.notes&&s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Motif:"}),s.jsx("p",{className:"text-sm mt-1",children:ie.notes})]}),ie.notes&&s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Notes:"}),s.jsx("p",{className:"text-sm mt-1 text-muted-foreground",children:ie.notes})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:ml-4",children:[ie.status==="scheduled"&&s.jsxs(s.Fragment,{children:[s.jsxs(L,{size:"sm",variant:"outline",onClick:()=>$e(ie.id,"confirmed"),className:"gap-1 w-full sm:w-auto",children:[s.jsx(Bn,{className:"h-3 w-3"}),"Confirmer"]}),s.jsxs(L,{size:"sm",variant:"outline",onClick:()=>$e(ie.id,"cancelled"),className:"gap-1 text-red-600 w-full sm:w-auto",children:[s.jsx(rf,{className:"h-3 w-3"}),"Annuler"]})]}),ie.status==="confirmed"&&s.jsxs(L,{size:"sm",variant:"outline",onClick:()=>$e(ie.id,"completed"),className:"gap-1 w-full sm:w-auto",children:[s.jsx(Bn,{className:"h-3 w-3"}),"Terminer"]}),s.jsxs(L,{size:"sm",variant:"outline",onClick:()=>ft(ie),className:"gap-1 text-red-600 w-full sm:w-auto",children:[s.jsx(It,{className:"h-3 w-3"}),"Supprimer"]})]})]})})},ie.id))}):s.jsx(re,{children:s.jsx(se,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"border-b",children:s.jsxs("tr",{className:"text-left",children:[s.jsx("th",{className:"p-2 sm:p-4 font-medium",children:"Client / Animal"}),s.jsx("th",{className:"p-2 sm:p-4 font-medium",children:"Date & Heure"}),s.jsx("th",{className:"p-2 sm:p-4 font-medium",children:"Type"}),s.jsx("th",{className:"p-2 sm:p-4 font-medium",children:"Statut"}),s.jsx("th",{className:"p-2 sm:p-4 font-medium",children:"Motif"}),s.jsx("th",{className:"p-2 sm:p-4 font-medium",children:"Actions"})]})}),s.jsx("tbody",{children:Se.sort((ie,Be)=>new Date(ie.appointment_date).getTime()-new Date(Be.appointment_date).getTime()).map(ie=>s.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[s.jsx("td",{className:"p-2 sm:p-4",children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Vn,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:le(ie)})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pt,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:Z(ie)})]})]})}),s.jsx("td",{className:"p-2 sm:p-4",children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>{k({id:ie.id,field:"date"}),X(ne(ie))},children:[s.jsx(Ze,{className:"h-4 w-4 text-muted-foreground"}),(H==null?void 0:H.id)===ie.id&&H.field==="date"?s.jsx(J,{type:"date",value:D,onChange:Be=>X(Be.target.value),onBlur:Ue,autoFocus:!0,className:"w-32"}):s.jsx("span",{children:Q(ie.appointment_date)})]}),s.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>{k({id:ie.id,field:"time"}),X(T(ie))},children:[s.jsx(tn,{className:"h-4 w-4 text-muted-foreground"}),(H==null?void 0:H.id)===ie.id&&H.field==="time"?s.jsx(J,{type:"time",value:D,onChange:Be=>X(Be.target.value),onBlur:Ue,autoFocus:!0,className:"w-24"}):s.jsx("span",{className:"text-sm text-muted-foreground",children:te(ie.appointment_date)})]})]})}),s.jsx("td",{className:"p-2 sm:p-4",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:lO[ie.appointment_type]||ie.appointment_type}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[ie.duration_minutes||30," min"]})]})}),s.jsx("td",{className:"p-2 sm:p-4",children:s.jsx("div",{className:"cursor-pointer",onClick:()=>{k({id:ie.id,field:"status"}),X(ie.status)},children:(H==null?void 0:H.id)===ie.id&&H.field==="status"?s.jsxs(be,{value:D,onValueChange:Be=>{X(Be),$e(ie.id,Be),k(null)},children:[s.jsx(xe,{className:"w-32",children:s.jsx(je,{})}),s.jsxs(ye,{children:[s.jsx(q,{value:"scheduled",children:"Planifié"}),s.jsx(q,{value:"confirmed",children:"Confirmé"}),s.jsx(q,{value:"completed",children:"Terminé"}),s.jsx(q,{value:"cancelled",children:"Annulé"}),s.jsx(q,{value:"no-show",children:"Absent"})]})]}):s.jsx(ke,{className:oO[ie.status],children:bb[ie.status]})})}),s.jsx("td",{className:"p-2 sm:p-4",children:s.jsx("div",{className:"max-w-xs cursor-pointer",onClick:()=>{k({id:ie.id,field:"reason"}),X(ie.notes||"")},children:(H==null?void 0:H.id)===ie.id&&H.field==="reason"?s.jsx(J,{value:D,onChange:Be=>X(Be.target.value),onBlur:Ue,autoFocus:!0,placeholder:"Motif du rendez-vous"}):s.jsxs(s.Fragment,{children:[ie.notes&&s.jsx("div",{className:"text-sm",children:ie.notes}),ie.notes&&s.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:ie.notes})]})})}),s.jsx("td",{className:"p-2 sm:p-4",children:s.jsxs("div",{className:"flex gap-1",children:[ie.status==="scheduled"&&s.jsxs(s.Fragment,{children:[s.jsx(L,{size:"sm",variant:"outline",onClick:()=>$e(ie.id,"confirmed"),children:s.jsx(Bn,{className:"h-3 w-3"})}),s.jsx(L,{size:"sm",variant:"outline",onClick:()=>$e(ie.id,"cancelled"),className:"text-red-600",children:s.jsx(rf,{className:"h-3 w-3"})})]}),ie.status==="confirmed"&&s.jsx(L,{size:"sm",variant:"outline",onClick:()=>$e(ie.id,"completed"),children:s.jsx(Bn,{className:"h-3 w-3"})}),s.jsx(L,{size:"sm",variant:"outline",onClick:()=>ft(ie),className:"text-red-600",children:s.jsx(It,{className:"h-3 w-3"})})]})})]},ie.id))})]})})})})]}),s.jsx($Ce,{open:h,onOpenChange:f}),s.jsx(et,{open:z,onOpenChange:I,children:s.jsxs(Xe,{className:"max-w-md",children:[s.jsx(tt,{children:s.jsx(nt,{children:"Confirmer la suppression"})}),W&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("p",{className:"text-gray-600",children:["Êtes-vous sûr de vouloir supprimer le rendez-vous pour ",s.jsx("strong",{children:Z(W)})," ?"]}),s.jsx("p",{className:"text-sm text-red-600",children:"Cette action est irréversible."}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(L,{variant:"outline",onClick:()=>I(!1),children:"Annuler"}),s.jsx(L,{variant:"destructive",onClick:Tt,children:"Supprimer"})]})]})]})})]})}const wc=({children:e,...t})=>s.jsx("label",{className:"text-sm font-medium",...t,children:e});function SAe({open:e,onOpenChange:t,consultation:n}){var m,v,p,g;const{data:r=[]}=vn(),{data:a=[]}=hn(),i=L3(),{toast:o}=at();Pt();const[l,c]=j.useState({client_id:"",animal_id:"",consultation_date:"",consultation_type:"routine",weight:"",temperature:"",symptoms:"",diagnosis:"",treatment:"",notes:"",follow_up_date:"",follow_up_notes:"",status:"completed"}),u=a.filter(x=>x.client_id===l.client_id);j.useEffect(()=>{var x,y;n&&e&&c({client_id:n.client_id||"",animal_id:n.animal_id||"",consultation_date:n.consultation_date?n.consultation_date.split("T")[0]:"",consultation_type:n.consultation_type||"routine",weight:((x=n.weight)==null?void 0:x.toString())||"",temperature:((y=n.temperature)==null?void 0:y.toString())||"",symptoms:n.symptoms||"",diagnosis:n.diagnosis||"",treatment:n.treatment||"",notes:n.notes||"",follow_up_date:n.follow_up_date||"",follow_up_notes:n.follow_up_notes||"",status:n.status||"completed"})},[n,e]);const d=x=>{c(y=>({...y,[x.target.id]:x.target.value}))},h=(x,y)=>{c(b=>({...b,[x]:y})),x==="client_id"&&c(b=>({...b,animal_id:""}))},f=async x=>{var N,w,S,_,C;if(x.preventDefault(),!n){o({title:"Erreur",description:"Aucune consultation sélectionnée pour modification.",variant:"destructive"});return}const y=[];if(l.weight){const P=parseFloat(l.weight);(isNaN(P)||P<=0||P>999.9)&&y.push("Le poids doit être un nombre valide entre 0.1 et 999.9 kg")}if(l.temperature){const P=parseFloat(l.temperature);(isNaN(P)||P<30||P>50)&&y.push("La température doit être un nombre valide entre 30°C et 50°C")}if(l.symptoms&&l.symptoms.length>1e3&&y.push("Les symptômes ne peuvent pas dépasser 1000 caractères"),l.diagnosis&&l.diagnosis.length>1e3&&y.push("Le diagnostic ne peut pas dépasser 1000 caractères"),l.treatment&&l.treatment.length>1e3&&y.push("Le traitement ne peut pas dépasser 1000 caractères"),l.notes&&l.notes.length>2e3&&y.push("Les notes ne peuvent pas dépasser 2000 caractères"),l.follow_up_notes&&l.follow_up_notes.length>500&&y.push("Les notes de suivi ne peuvent pas dépasser 500 caractères"),l.follow_up_date){const P=new Date(l.follow_up_date),A=new Date;A.setFullYear(A.getFullYear()+1),P>A&&y.push("La date de suivi ne peut pas être plus d'un an dans le futur");const O=new Date(n.consultation_date);P<O&&y.push("La date de suivi ne peut pas être antérieure à la date de consultation")}const b=["scheduled","in-progress","completed","cancelled"];if(l.status&&!b.includes(l.status)&&y.push("Le statut sélectionné n'est pas valide"),y.length>0){o({title:"Erreurs de validation",description:y.join(". "),variant:"destructive"});return}try{const P={consultation_type:l.consultation_type,symptoms:((N=l.symptoms)==null?void 0:N.trim())||void 0,diagnosis:((w=l.diagnosis)==null?void 0:w.trim())||void 0,treatment:((S=l.treatment)==null?void 0:S.trim())||void 0,notes:((_=l.notes)==null?void 0:_.trim())||void 0,weight:l.weight?parseFloat(l.weight):void 0,temperature:l.temperature?parseFloat(l.temperature):void 0,follow_up_date:l.follow_up_date||null,follow_up_notes:((C=l.follow_up_notes)==null?void 0:C.trim())||void 0,status:l.status};await i.mutateAsync({id:n.id,data:P}),o({title:"Consultation modifiée",description:"La consultation a été modifiée avec succès."}),t(!1)}catch(P){console.error("Error updating consultation:",P);let A="Une erreur est survenue lors de la modification de la consultation.";P!=null&&P.message&&(P.message.includes("not found")||P.message.includes("does not exist")?A="Cette consultation n'existe plus. Elle a peut-être été supprimée.":P.message.includes("foreign key constraint")?A="Erreur: Le client ou l'animal associé n'existe plus. Veuillez actualiser la page.":P.message.includes("network")?A="Erreur de connexion. Vérifiez votre connexion internet et réessayez.":P.message.includes("permission")||P.message.includes("unauthorized")?A="Vous n'avez pas les permissions nécessaires pour modifier cette consultation.":(P.message.includes("version")||P.message.includes("conflict"))&&(A="Cette consultation a été modifiée par un autre utilisateur. Veuillez actualiser et réessayer.")),o({title:"Erreur lors de la modification",description:A,variant:"destructive"})}};return r.find(x=>x.id===l.client_id),a.find(x=>x.id===l.animal_id),s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Xe,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(tt,{children:[s.jsx(nt,{children:"Modifier la consultation"}),s.jsx(Dt,{children:"Modifiez les informations de la consultation"})]}),n?s.jsxs("form",{onSubmit:f,className:"space-y-6",children:[s.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg",children:[s.jsx("h4",{className:"font-medium mb-2",children:"Consultation pour:"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Client:"})," ",s.jsxs("span",{className:"font-medium",children:[(m=r.find(x=>x.id===l.client_id))==null?void 0:m.first_name," ",(v=r.find(x=>x.id===l.client_id))==null?void 0:v.last_name]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Animal:"})," ",s.jsxs("span",{className:"font-medium",children:[(p=u.find(x=>x.id===l.animal_id))==null?void 0:p.name," (",(g=u.find(x=>x.id===l.animal_id))==null?void 0:g.species,")"]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"consultation_date",children:"Date de consultation"}),s.jsx(J,{id:"consultation_date",type:"date",value:l.consultation_date,onChange:d,className:"bg-muted/50",readOnly:!0,title:"La date ne peut pas être modifiée"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"consultation_type",children:"Type de consultation"}),s.jsxs(be,{value:l.consultation_type,onValueChange:x=>h("consultation_type",x),children:[s.jsx(xe,{children:s.jsx(je,{})}),s.jsxs(ye,{children:[s.jsx(q,{value:"routine",children:"Routine"}),s.jsx(q,{value:"emergency",children:"Urgence"}),s.jsx(q,{value:"follow-up",children:"Suivi"}),s.jsx(q,{value:"vaccination",children:"Vaccination"}),s.jsx(q,{value:"surgery",children:"Chirurgie"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"weight",children:"Poids (kg)"}),s.jsx(J,{id:"weight",type:"number",step:"0.1",min:"0.1",max:"999.9",placeholder:"Ex: 25.5",value:l.weight,onChange:d,title:"Poids en kilogrammes (0.1 à 999.9 kg)"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"temperature",children:"Température (°C)"}),s.jsx(J,{id:"temperature",type:"number",step:"0.1",min:"30",max:"50",placeholder:"Ex: 38.5",value:l.temperature,onChange:d,title:"Température corporelle (30°C à 50°C)"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"symptoms",children:"Symptômes"}),s.jsx(We,{id:"symptoms",placeholder:"Décrivez les symptômes observés...",value:l.symptoms,onChange:d,rows:3,maxLength:1e3,title:"Maximum 1000 caractères"}),s.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[(l.symptoms||"").length,"/1000 caractères"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"diagnosis",children:"Diagnostic"}),s.jsx(We,{id:"diagnosis",placeholder:"Diagnostic posé...",value:l.diagnosis,onChange:d,rows:3,maxLength:1e3,title:"Maximum 1000 caractères"}),s.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[(l.diagnosis||"").length,"/1000 caractères"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"treatment",children:"Traitement"}),s.jsx(We,{id:"treatment",placeholder:"Traitement prescrit...",value:l.treatment,onChange:d,rows:3,maxLength:1e3,title:"Maximum 1000 caractères"}),s.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[(l.treatment||"").length,"/1000 caractères"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"follow_up_date",children:"Date de suivi"}),s.jsx(J,{id:"follow_up_date",type:"date",value:l.follow_up_date,onChange:d,title:"Date recommandée pour le prochain suivi"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"follow_up_notes",children:"Notes de suivi"}),s.jsx(We,{id:"follow_up_notes",placeholder:"Notes pour le suivi...",value:l.follow_up_notes,onChange:d,rows:2,maxLength:500,title:"Maximum 500 caractères"}),s.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[(l.follow_up_notes||"").length,"/500 caractères"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"notes",children:"Notes supplémentaires"}),s.jsx(We,{id:"notes",placeholder:"Notes supplémentaires...",value:l.notes,onChange:d,rows:2,maxLength:2e3,title:"Maximum 2000 caractères"}),s.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[(l.notes||"").length,"/2000 caractères"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"status",children:"Statut"}),s.jsxs(be,{value:l.status,onValueChange:x=>h("status",x),children:[s.jsx(xe,{children:s.jsx(je,{})}),s.jsxs(ye,{children:[s.jsx(q,{value:"scheduled",children:"Programmé"}),s.jsx(q,{value:"in-progress",children:"En cours"}),s.jsx(q,{value:"completed",children:"Terminé"}),s.jsx(q,{value:"cancelled",children:"Annulé"})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(L,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:i.isPending,children:"Annuler"}),s.jsx(L,{type:"submit",disabled:i.isPending||!n,children:i.isPending?"Modification...":"Modifier"})]})]}):s.jsx("div",{className:"flex items-center justify-center py-8 text-muted-foreground",children:s.jsx("p",{children:"Aucune consultation sélectionnée"})})]})})}function cO({consultation:e}){const{settings:t}=Pt(),n=()=>{var r,a,i,o,l,c,u,d,h;try{const f=window.open("",`print_consultation_${e.id}`,"height=800,width=800");if(!f){alert("L'impression a été bloquée par le navigateur. Veuillez autoriser les popups pour ce site.");return}const m=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Consultation - ${((r=e.animal)==null?void 0:r.name)||"Animal"}</title>
          <style>
            body {
              font-family: Arial, sans-serif;
              margin: 20px;
              line-height: 1.6;
            }
            .header {
              text-align: center;
              border-bottom: 2px solid #333;
              padding-bottom: 10px;
              margin-bottom: 20px;
            }
            .clinic-info {
              text-align: center;
              color: #666;
              margin-bottom: 30px;
            }
            .consultation-info {
              display: grid;
              grid-template-columns: 1fr 1fr;
              gap: 20px;
              margin-bottom: 30px;
            }
            .info-section {
              border: 1px solid #ddd;
              padding: 15px;
              border-radius: 5px;
            }
            .info-title {
              font-weight: bold;
              color: #333;
              margin-bottom: 10px;
              font-size: 14px;
              text-transform: uppercase;
            }
            .info-content {
              color: #666;
            }
            .medical-section {
              margin-bottom: 20px;
            }
            .medical-title {
              font-weight: bold;
              color: #333;
              margin-bottom: 8px;
              border-bottom: 1px solid #eee;
              padding-bottom: 4px;
            }
            .medical-content {
              color: #666;
              margin-bottom: 15px;
            }
            .vitals {
              display: grid;
              grid-template-columns: repeat(4, 1fr);
              gap: 15px;
              margin-bottom: 20px;
            }
            .vital-item {
              text-align: center;
              padding: 10px;
              border: 1px solid #ddd;
              border-radius: 5px;
            }
            .vital-label {
              font-size: 12px;
              color: #666;
              margin-bottom: 5px;
            }
            .vital-value {
              font-size: 18px;
              font-weight: bold;
              color: #333;
            }
            .footer {
              margin-top: 40px;
              text-align: center;
              color: #666;
              font-size: 12px;
              border-top: 1px solid #ddd;
              padding-top: 20px;
            }
            @media print {
              body { 
                margin: 0; 
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
              }
              .header { page-break-after: avoid; }
              @page { size: auto; margin: 10mm; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            <h1>${t.clinicName||"Clinique Vétérinaire"}</h1>
            <div class="clinic-info">
              <p>${t.address||""}</p>
              <p>Tél: ${t.phone||""} | Email: ${t.email||""}</p>
            </div>
            <h2>Rapport de Consultation</h2>
          </div>

          <div class="consultation-info">
            <div class="info-section">
              <div class="info-title">Informations Client</div>
              <div class="info-content">
                <strong>Nom:</strong> ${((a=e.client)==null?void 0:a.first_name)||""} ${((i=e.client)==null?void 0:i.last_name)||""}<br>
                <strong>Téléphone:</strong> ${((o=e.client)==null?void 0:o.phone)||"N/A"}<br>
                <strong>Email:</strong> ${((l=e.client)==null?void 0:l.email)||"N/A"}
              </div>
            </div>
            
            <div class="info-section">
              <div class="info-title">Informations Animal</div>
              <div class="info-content">
                <strong>Nom:</strong> ${((c=e.animal)==null?void 0:c.name)||"N/A"}<br>
                <strong>Espèce:</strong> ${((u=e.animal)==null?void 0:u.species)||"N/A"}<br>
                <strong>Race:</strong> ${((d=e.animal)==null?void 0:d.breed)||"N/A"}<br>
                <strong>Âge:</strong> ${(h=e.animal)!=null&&h.birth_date?Math.floor((new Date().getTime()-new Date(e.animal.birth_date).getTime())/(365.25*24*60*60*1e3))+" ans":"N/A"}
              </div>
            </div>
          </div>

          <div class="info-section" style="margin-bottom: 20px;">
            <div class="info-title">Détails de la Consultation</div>
            <div class="info-content">
              <strong>Date:</strong> ${new Date(e.consultation_date).toLocaleDateString("fr-FR")}<br>
              <strong>Type:</strong> ${e.consultation_type||"Routine"}<br>
              <strong>Statut:</strong> ${e.status||"Terminé"}
            </div>
          </div>

          ${e.weight||e.temperature||e.heart_rate||e.respiratory_rate?`
          <div class="vitals">
            ${e.weight?`
            <div class="vital-item">
              <div class="vital-label">Poids</div>
              <div class="vital-value">${e.weight} kg</div>
            </div>
            `:""}
            ${e.temperature?`
            <div class="vital-item">
              <div class="vital-label">Température</div>
              <div class="vital-value">${e.temperature}°C</div>
            </div>
            `:""}
            ${e.heart_rate?`
            <div class="vital-item">
              <div class="vital-label">Fréquence Cardiaque</div>
              <div class="vital-value">${e.heart_rate} bpm</div>
            </div>
            `:""}
            ${e.respiratory_rate?`
            <div class="vital-item">
              <div class="vital-label">Fréquence Respiratoire</div>
              <div class="vital-value">${e.respiratory_rate}/min</div>
            </div>
            `:""}
          </div>
          `:""}

          ${e.symptoms?`
          <div class="medical-section">
            <div class="medical-title">Symptômes</div>
            <div class="medical-content">${e.symptoms}</div>
          </div>
          `:""}

          ${e.diagnosis?`
          <div class="medical-section">
            <div class="medical-title">Diagnostic</div>
            <div class="medical-content">${e.diagnosis}</div>
          </div>
          `:""}

          ${e.treatment?`
          <div class="medical-section">
            <div class="medical-title">Traitement</div>
            <div class="medical-content">${e.treatment}</div>
          </div>
          `:""}

          ${e.notes?`
          <div class="medical-section">
            <div class="medical-title">Notes</div>
            <div class="medical-content">${e.notes}</div>
          </div>
          `:""}

          ${e.follow_up_date?`
          <div class="medical-section">
            <div class="medical-title">Suivi Programmé</div>
            <div class="medical-content">
              <strong>Date:</strong> ${new Date(e.follow_up_date).toLocaleDateString("fr-FR")}<br>
              ${e.follow_up_notes?`<strong>Notes:</strong> ${e.follow_up_notes}`:""}
            </div>
          </div>
          `:""}

          ${e.cost?`
          <div class="medical-section">
            <div class="medical-title">Coût de la Consultation</div>
            <div class="medical-content">
              <strong>${e.cost} ${t.currency||"EUR"}</strong>
            </div>
          </div>
          `:""}

          <div class="footer">
            <p>Rapport généré le ${new Date().toLocaleDateString("fr-FR")} à ${new Date().toLocaleTimeString("fr-FR")}</p>
            <p>Vétérinaire: ${e.veterinarian_id||"N/A"}</p>
          </div>
        </body>
      </html>
    `;f.document.open(),f.document.write(m),f.document.close(),f.onload=function(){try{setTimeout(()=>{f.focus(),f.print(),typeof f.onafterprint=="function"?f.onafterprint=function(){try{f.close()}catch(v){console.error("Error closing print window:",v)}}:setTimeout(()=>{try{f.close()}catch(v){console.error("Error closing print window after timeout:",v)}},2e3)},500)}catch(v){console.error("Error during print process:",v),alert("Une erreur s'est produite lors de l'impression. Veuillez réessayer.")}}}catch(f){console.error("Error in print function:",f),alert("Une erreur s'est produite lors de la préparation de l'impression. Veuillez réessayer.")}};return s.jsxs(L,{size:"sm",variant:"outline",onClick:n,className:"gap-1",children:[s.jsx(af,{className:"h-3 w-3"}),"Imprimer"]})}function i2({open:e,onOpenChange:t,petId:n,consultationId:r}){const{data:a=[]}=vn(),{data:i=[]}=hn(),{data:o=[]}=$x(),l=uee(),{toast:c}=at(),[u,d]=j.useState({diagnosis:"",notes:"",validUntil:""}),[h,f]=j.useState([{medication_name:"",dosage:"",frequency:"",duration:"",instructions:"",quantity:1,route:"oral"}]),m=i.find(w=>w.id===n),v=m?a.find(w=>w.id===m.client_id):null,p=o.filter(w=>(w.category==="medication"||w.category==="supplement")&&w.current_quantity>0&&w.active),g=w=>{const{name:S,value:_}=w.target;d(C=>({...C,[S]:_}))},x=(w,S,_)=>{f(C=>C.map((P,A)=>A===w?{...P,[S]:_}:P))},y=()=>{f(w=>[...w,{medication_name:"",dosage:"",frequency:"",duration:"",instructions:"",quantity:1,route:"oral"}])},b=w=>{h.length>1&&f(S=>S.filter((_,C)=>C!==w))},N=async w=>{if(w.preventDefault(),!m||!v){c({title:"Erreur",description:"Impossible de trouver l'animal ou le client associé.",variant:"destructive"});return}const S=h.filter(C=>C.medication_name.trim()!=="");if(S.length===0){c({title:"Erreur",description:"Veuillez ajouter au moins un médicament à la prescription.",variant:"destructive"});return}const _={consultation_id:r,animal_id:m.id,client_id:v.id,diagnosis:u.diagnosis,notes:u.notes,valid_until:u.validUntil||void 0,medications:S};try{await l.mutateAsync(_),c({title:"Prescription créée",description:`Prescription créée avec succès pour ${m.name}.`}),t(!1),d({diagnosis:"",notes:"",validUntil:""}),f([{medication_name:"",dosage:"",frequency:"",duration:"",instructions:"",quantity:1,route:"oral"}])}catch(C){console.error("Error creating prescription:",C),c({title:"Erreur",description:"Une erreur est survenue lors de la création de la prescription.",variant:"destructive"})}};return!m||!v?s.jsx(et,{open:e,onOpenChange:t,children:s.jsx(Xe,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:s.jsxs(tt,{children:[s.jsx(nt,{children:"Erreur"}),s.jsx(Dt,{children:"Impossible de trouver l'animal ou le client associé."})]})})}):s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Xe,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(tt,{children:[s.jsx(nt,{children:"Nouvelle Prescription"}),s.jsxs(Dt,{children:["Créer une nouvelle prescription pour ",m.name," (",v.first_name," ",v.last_name,")"]})]}),s.jsxs("form",{onSubmit:N,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(M,{htmlFor:"diagnosis",children:"Diagnostic"}),s.jsx(We,{id:"diagnosis",name:"diagnosis",value:u.diagnosis,onChange:g,placeholder:"Entrez le diagnostic...",className:"h-20"})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"validUntil",children:"Valide jusqu'au (optionnel)"}),s.jsx(J,{id:"validUntil",name:"validUntil",type:"date",value:u.validUntil,onChange:g})]})]}),s.jsxs("div",{className:"space-y-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(M,{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Médicaments"}),s.jsxs(L,{type:"button",onClick:y,size:"sm",variant:"outline",children:[s.jsx(lt,{className:"h-4 w-4 mr-2"}),"Ajouter un médicament"]})]}),h.map((w,S)=>s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-6 space-y-4 bg-gray-50 dark:bg-gray-800",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h4",{className:"font-medium text-base text-gray-900 dark:text-gray-100",children:["Médicament ",S+1]}),h.length>1&&s.jsx(L,{type:"button",variant:"outline",size:"sm",onClick:()=>b(S),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",children:s.jsx(It,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"md:col-span-2 lg:col-span-1",children:[s.jsx(M,{className:"text-gray-700 dark:text-gray-300",children:"Médicament *"}),s.jsxs(be,{value:w.medication_name,onValueChange:_=>x(S,"medication_name",_),children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Sélectionner ou taper..."})}),s.jsx(ye,{children:p.map(_=>s.jsxs(q,{value:_.name,children:[_.name," (",_.current_quantity," ",_.unit,")"]},_.id))})]}),!p.find(_=>_.name===w.medication_name)&&s.jsx(J,{className:"mt-2",value:w.medication_name,onChange:_=>x(S,"medication_name",_.target.value),placeholder:"Nom du médicament personnalisé"})]}),s.jsxs("div",{children:[s.jsx(M,{className:"text-gray-700 dark:text-gray-300",children:"Dosage"}),s.jsx(J,{value:w.dosage||"",onChange:_=>x(S,"dosage",_.target.value),placeholder:"ex: 5mg"})]}),s.jsxs("div",{children:[s.jsx(M,{className:"text-gray-700 dark:text-gray-300",children:"Fréquence"}),s.jsxs(be,{value:w.frequency||"",onValueChange:_=>x(S,"frequency",_),children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Sélectionner..."})}),s.jsxs(ye,{children:[s.jsx(q,{value:"1x/jour",children:"1 fois par jour"}),s.jsx(q,{value:"2x/jour",children:"2 fois par jour"}),s.jsx(q,{value:"3x/jour",children:"3 fois par jour"}),s.jsx(q,{value:"1x/semaine",children:"1 fois par semaine"}),s.jsx(q,{value:"selon besoin",children:"Selon besoin"})]})]})]}),s.jsxs("div",{children:[s.jsx(M,{className:"text-gray-700 dark:text-gray-300",children:"Durée"}),s.jsx(J,{value:w.duration||"",onChange:_=>x(S,"duration",_.target.value),placeholder:"ex: 7 jours"})]}),s.jsxs("div",{children:[s.jsx(M,{className:"text-gray-700 dark:text-gray-300",children:"Quantité *"}),s.jsx(J,{type:"number",min:"1",value:w.quantity,onChange:_=>x(S,"quantity",parseInt(_.target.value)||1)})]}),s.jsxs("div",{children:[s.jsx(M,{className:"text-gray-700 dark:text-gray-300",children:"Voie d'administration"}),s.jsxs(be,{value:w.route||"oral",onValueChange:_=>x(S,"route",_),children:[s.jsx(xe,{children:s.jsx(je,{})}),s.jsxs(ye,{children:[s.jsx(q,{value:"oral",children:"Orale"}),s.jsx(q,{value:"injectable",children:"Injectable"}),s.jsx(q,{value:"topique",children:"Topique"}),s.jsx(q,{value:"intraveineuse",children:"Intraveineuse"}),s.jsx(q,{value:"intramusculaire",children:"Intramusculaire"}),s.jsx(q,{value:"sous-cutanée",children:"Sous-cutanée"})]})]})]})]}),s.jsxs("div",{children:[s.jsx(M,{className:"text-gray-700 dark:text-gray-300",children:"Instructions spéciales"}),s.jsx(We,{value:w.instructions||"",onChange:_=>x(S,"instructions",_.target.value),placeholder:"Instructions particulières pour ce médicament...",className:"h-16"})]})]},S)),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"notes",className:"text-gray-700 dark:text-gray-300",children:"Notes générales"}),s.jsx(We,{id:"notes",name:"notes",value:u.notes,onChange:g,placeholder:"Notes générales sur la prescription...",className:"h-20"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(L,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:l.isPending,children:"Annuler"}),s.jsx(L,{type:"submit",disabled:l.isPending,children:l.isPending?"Création...":"Créer la prescription"})]})]})]})})}const _Ae=async e=>{try{const{data:{user:t},error:n}=await ge.auth.getUser();if(n||!t)return console.error("Authentication error:",n),{success:!1,message:"User not authenticated"};const{data:r,error:a}=await ge.from("consultations").select("id, animal_id, client_id, veterinarian_id").eq("id",e).single();if(a)return console.error(`Consultation not found: ${a.message}`),{success:!1,message:`Consultation not found: ${a.message}`};const{data:i,error:o}=await ge.from("prescriptions").select("id").eq("consultation_id",e);if(o)console.warn(`Could not fetch prescriptions: ${o.message}`);else if(i&&i.length>0)for(const d of i){const{error:h}=await ge.from("prescription_medications").delete().eq("prescription_id",d.id);h&&console.warn(`Could not delete medications for prescription ${d.id}: ${h.message}`)}const{error:l}=await ge.from("prescriptions").delete().eq("consultation_id",e);l&&console.warn(`Could not delete prescriptions: ${l.message}`);const c=["vaccinations","lab_results","antiparasitics"];for(const d of c)try{const{error:h}=await ge.from(d).delete().eq("consultation_id",e);h&&console.warn(`Could not delete from ${d}: ${h.message}`)}catch(h){console.warn(`Error with ${d}:`,h)}const{error:u}=await ge.from("consultations").delete().eq("id",e);return u?(console.error(`FAILED to delete consultation: ${u.message}`),{success:!1,message:`Failed to delete consultation: ${u.message}`}):{success:!0}}catch(t){return console.error("❌ CRITICAL ERROR during deletion:",t),{success:!1,message:`Critical error: ${(t==null?void 0:t.message)||"Unknown error"}`}}},Rd=j.forwardRef(({className:e,...t},n)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:n,className:Ee("w-full caption-bottom text-sm",e),...t})}));Rd.displayName="Table";const Ld=j.forwardRef(({className:e,...t},n)=>s.jsx("thead",{ref:n,className:Ee("[&_tr]:border-b",e),...t}));Ld.displayName="TableHeader";const Fd=j.forwardRef(({className:e,...t},n)=>s.jsx("tbody",{ref:n,className:Ee("[&_tr:last-child]:border-0",e),...t}));Fd.displayName="TableBody";const CAe=j.forwardRef(({className:e,...t},n)=>s.jsx("tfoot",{ref:n,className:Ee("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));CAe.displayName="TableFooter";const Qs=j.forwardRef(({className:e,...t},n)=>s.jsx("tr",{ref:n,className:Ee("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Qs.displayName="TableRow";const it=j.forwardRef(({className:e,...t},n)=>s.jsx("th",{ref:n,className:Ee("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));it.displayName="TableHead";const ot=j.forwardRef(({className:e,...t},n)=>s.jsx("td",{ref:n,className:Ee("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));ot.displayName="TableCell";const PAe=j.forwardRef(({className:e,...t},n)=>s.jsx("caption",{ref:n,className:Ee("mt-4 text-sm text-muted-foreground",e),...t}));PAe.displayName="TableCaption";const AAe=()=>{var Z;const{data:e=[],isLoading:t}=ws(),{data:n=[]}=Ix();R3(),L3();const r=YZ();Pt();const{toast:a}=at(),{currentView:i}=sc("consultations"),[o,l]=j.useState(""),[c,u]=j.useState("all"),[d,h]=j.useState(i),[f,m]=j.useState(!1),[v,p]=j.useState(!1),[g,x]=j.useState(null),[y,b]=j.useState(null),[N,w]=j.useState(!1),[S,_]=j.useState(null),[C,P]=j.useState(null),[A,O]=j.useState(!1),[E,z]=j.useState([]),[I,W]=j.useState(""),[V,H]=j.useState(!1),[k,D]=j.useState(null),X=B=>n.filter(oe=>oe.consultation_id===B),Q=e.filter(B=>{var Ue,ft,Tt;const oe=`${((Ue=B.client)==null?void 0:Ue.first_name)||""} ${((ft=B.client)==null?void 0:ft.last_name)||""}`.trim(),U=((Tt=B.animal)==null?void 0:Tt.name)||"",K=oe.toLowerCase().includes(o.toLowerCase())||U.toLowerCase().includes(o.toLowerCase())||B.symptoms&&B.symptoms.toLowerCase().includes(o.toLowerCase())||B.diagnosis&&B.diagnosis.toLowerCase().includes(o.toLowerCase());if(c==="all")return K;const fe=new Date(B.consultation_date),$e=(new Date().getTime()-fe.getTime())/(1e3*3600*24);switch(c){case"week":return K&&$e<=7;case"month":return K&&$e<=30;case"quarter":return K&&$e<=90;default:return K}}),te=B=>{x(B),p(!0)},ne=B=>{_(B.animal_id),P(B.id),w(!0)},T=B=>{D(B),H(!0)},ce=async()=>{if(k)try{if((await _Ae(k.id)).success){a({title:"Succès",description:"La consultation a été supprimée avec succès."}),window.location.reload(),H(!1),D(null);return}r.mutate(k.id,{onSuccess:()=>{a({title:"Succès",description:"La consultation a été supprimée avec succès."}),H(!1),D(null)},onError:oe=>{a({title:"Erreur",description:`Impossible de supprimer la consultation: ${oe.message}`,variant:"destructive"}),H(!1),D(null)}})}catch(B){a({title:"Erreur",description:`Erreur inattendue: ${B.message||"Erreur inconnue"}`,variant:"destructive"}),H(!1),D(null)}},me=B=>{b({clientId:B.client_id,animalId:B.animal_id,consultation_date:new Date().toISOString(),consultation_type:"follow-up",symptoms:"",diagnosis:"",treatment:"",notes:`Suivi de la consultation du ${new Date(B.consultation_date).toLocaleDateString("fr-FR")}`,status:"scheduled"}),m(!0)},le=B=>{var U;const oe=X(B.id);z(oe),W(((U=B.animal)==null?void 0:U.name)||"Animal inconnu"),O(!0)};return s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-4 sm:py-8 space-y-4 sm:space-y-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Consultations"}),s.jsx("p",{className:"text-muted-foreground mt-1 sm:mt-2 text-sm sm:text-base",children:"Gérez et consultez tous les dossiers médicaux"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex border rounded-lg p-1",children:[s.jsx(L,{variant:d==="cards"?"default":"ghost",size:"sm",onClick:()=>h("cards"),className:"px-3",children:s.jsx(yo,{className:"h-4 w-4"})}),s.jsx(L,{variant:d==="table"?"default":"ghost",size:"sm",onClick:()=>h("table"),className:"px-3",children:s.jsx(di,{className:"h-4 w-4"})})]}),s.jsxs(L,{className:"gap-2 medical-glow text-sm sm:text-base",onClick:()=>m(!0),children:[s.jsx(lt,{className:"h-4 w-4"}),"Nouvelle Consultation"]})]})]}),s.jsxs(re,{children:[s.jsx(de,{children:s.jsxs(he,{className:"flex items-center gap-2 text-base sm:text-lg",children:[s.jsx(Co,{className:"h-4 sm:h-5 w-4 sm:w-5"}),"Rechercher et filtrer"]})}),s.jsx(se,{className:"space-y-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsx(J,{placeholder:"Rechercher par client, animal, symptômes ou diagnostic...",value:o,onChange:B=>l(B.target.value),className:"max-w-full sm:max-w-md"}),s.jsxs(be,{value:c,onValueChange:u,children:[s.jsx(xe,{className:"w-full sm:w-48",children:s.jsx(je,{placeholder:"Période"})}),s.jsxs(ye,{children:[s.jsx(q,{value:"all",children:"Toutes les périodes"}),s.jsx(q,{value:"week",children:"Cette semaine"}),s.jsx(q,{value:"month",children:"Ce mois"}),s.jsx(q,{value:"quarter",children:"Ce trimestre"})]})]})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-base sm:text-lg font-semibold",children:["Consultations récentes (",Q.length,")"]}),Q.length===0?s.jsx(re,{children:s.jsxs(se,{className:"p-6 sm:p-8 text-center text-muted-foreground",children:[s.jsx(Xr,{className:"h-10 sm:h-12 w-10 sm:w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{className:"text-sm sm:text-base",children:"Aucune consultation trouvée"}),s.jsx("p",{className:"text-xs sm:text-sm",children:"Commencez par créer votre première consultation"})]})}):d==="cards"?Q.map(B=>{var oe,U,K;return s.jsx(re,{className:"card-hover",children:s.jsx(se,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[s.jsx("h4",{className:"text-base sm:text-lg font-semibold",children:((oe=B.animal)==null?void 0:oe.name)||"Animal inconnu"}),s.jsx(ke,{variant:"secondary",className:"w-fit",children:"Consultation"}),s.jsx("span",{className:"text-xs sm:text-sm text-muted-foreground",children:new Date(B.consultation_date).toLocaleDateString("fr-FR")})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-6 text-xs sm:text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Vn,{className:"h-3 sm:h-4 w-3 sm:w-4"}),(U=B.client)==null?void 0:U.first_name," ",(K=B.client)==null?void 0:K.last_name]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Xr,{className:"h-3 w-3"}),"Consultation #",B.id]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 text-xs sm:text-sm",children:[B.temperature&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(YN,{className:"h-3 sm:h-4 w-3 sm:w-4 text-primary"}),B.temperature,"°C"]}),B.weight&&s.jsxs("span",{children:[B.weight," kg"]})]})]}),s.jsxs("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[B.symptoms&&s.jsxs(s.Fragment,{children:[s.jsx("h5",{className:"font-medium text-sm sm:text-base",children:"Symptômes:"}),s.jsx("p",{className:"text-xs sm:text-sm",children:B.symptoms})]}),B.diagnosis&&s.jsxs(s.Fragment,{children:[s.jsx("h5",{className:"font-medium text-sm sm:text-base",children:"Diagnostic:"}),s.jsx("p",{className:"text-xs sm:text-sm",children:B.diagnosis})]})]}),s.jsxs("div",{className:"space-y-2",children:[B.treatment&&s.jsxs(s.Fragment,{children:[s.jsx("h5",{className:"font-medium text-sm sm:text-base",children:"Traitement:"}),s.jsx("p",{className:"text-xs sm:text-sm",children:B.treatment})]}),(()=>{const fe=X(B.id);return fe.length>0&&s.jsxs(s.Fragment,{children:[s.jsxs("h5",{className:"font-medium flex items-center gap-1 text-sm sm:text-base",children:[s.jsx(Fi,{className:"h-3 sm:h-4 w-3 sm:w-4"}),"Prescriptions (",fe.length,"):"]}),s.jsx("div",{className:"space-y-1",children:fe.map(Se=>s.jsxs("div",{className:"text-xs sm:text-sm bg-blue-50 p-2 rounded border-l-2 border-blue-200",children:[s.jsxs("div",{className:"font-medium text-blue-800",children:["Prescription #",Se.id.slice(-8)]}),s.jsxs("div",{className:"text-blue-600 text-xs",children:[new Date(Se.prescription_date).toLocaleDateString("fr-FR")," - Status: ",Se.status]}),Se.medications&&Se.medications.length>0&&s.jsxs("div",{className:"mt-1",children:[s.jsx("div",{className:"text-xs font-medium text-blue-700",children:"Médicaments:"}),Se.medications.map(($e,Ue)=>s.jsxs("div",{className:"text-xs text-blue-600 ml-2",children:["• ",$e.medication_name," ",$e.dosage&&`- ${$e.dosage}`," ",$e.quantity&&`(${$e.quantity})`]},Ue))]})]},Se.id))})]})})()]})]}),B.notes&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h5",{className:"font-medium text-sm sm:text-base",children:"Notes:"}),s.jsx("p",{className:"text-xs sm:text-sm bg-muted p-2 sm:p-3 rounded",children:B.notes})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between pt-2 border-t gap-2",children:[s.jsxs("span",{className:"text-xs sm:text-sm text-muted-foreground",children:[s.jsx(Ze,{className:"h-3 w-3 inline mr-1"}),B.followUp?`Suivi: ${B.followUp}`:"Aucun suivi prévu"]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(cO,{consultation:B}),s.jsxs(L,{size:"sm",variant:"outline",onClick:()=>te(B),className:"gap-1 text-xs sm:text-sm",children:[s.jsx(qt,{className:"h-3 w-3"}),"Modifier"]}),s.jsxs(L,{size:"sm",variant:"default",onClick:()=>ne(B),className:"gap-1 text-xs sm:text-sm",children:[s.jsx(Fi,{className:"h-3 w-3"}),"Prescription"]}),s.jsxs(L,{size:"sm",variant:"outline",onClick:()=>T(B),className:"gap-1 text-red-600 hover:text-red-700 hover:bg-red-50",children:[s.jsx(It,{className:"h-3 w-3"}),"Supprimer"]}),s.jsx(L,{size:"sm",onClick:()=>me(B),className:"text-xs sm:text-sm",children:"Nouveau suivi"})]})]})]})})},B.id)}):s.jsx(re,{children:s.jsx(se,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Rd,{children:[s.jsx(Ld,{children:s.jsxs(Qs,{children:[s.jsx(it,{className:"text-xs sm:text-sm",children:"Animal / Client"}),s.jsx(it,{className:"text-xs sm:text-sm",children:"Date"}),s.jsx(it,{className:"text-xs sm:text-sm",children:"Symptômes"}),s.jsx(it,{className:"text-xs sm:text-sm",children:"Diagnostic"}),s.jsx(it,{className:"text-xs sm:text-sm",children:"Température"}),s.jsx(it,{className:"text-xs sm:text-sm",children:"Prescriptions"}),s.jsx(it,{className:"text-xs sm:text-sm",children:"Actions"})]})}),s.jsx(Fd,{children:Q.map(B=>{var oe,U,K;return s.jsxs(Qs,{children:[s.jsx(ot,{className:"text-xs sm:text-sm",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:(oe=B.animal)==null?void 0:oe.name}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[(U=B.client)==null?void 0:U.first_name," ",(K=B.client)==null?void 0:K.last_name]})]})}),s.jsx(ot,{className:"text-xs sm:text-sm",children:new Date(B.consultation_date).toLocaleDateString("fr-FR")}),s.jsx(ot,{className:"text-xs sm:text-sm",children:s.jsx("div",{className:"max-w-xs truncate",children:B.symptoms||"-"})}),s.jsx(ot,{className:"text-xs sm:text-sm",children:s.jsx("div",{className:"max-w-xs truncate",children:B.diagnosis||"-"})}),s.jsx(ot,{className:"text-xs sm:text-sm",children:B.temperature?`${B.temperature}°C`:"-"}),s.jsx(ot,{className:"text-xs sm:text-sm",children:(()=>{const fe=X(B.id);return fe.length>0?s.jsx("div",{className:"space-y-1",children:s.jsxs("div",{className:"flex items-center gap-2 cursor-pointer p-1 rounded transition-colors w-fit",onClick:()=>le(B),title:"Cliquer pour voir les détails des prescriptions",children:[s.jsxs(ke,{variant:"outline",className:"text-xs",children:[fe.length," prescription",fe.length>1?"s":""]}),s.jsx(Dn,{className:"h-3 w-3 text-blue-600 hover:text-blue-800"})]})}):s.jsx("span",{className:"text-muted-foreground text-xs",children:"Aucune"})})()}),s.jsx(ot,{className:"text-xs sm:text-sm",children:s.jsxs("div",{className:"flex gap-1 flex-wrap",children:[s.jsx(cO,{consultation:B}),s.jsx(L,{size:"sm",variant:"outline",onClick:()=>te(B),title:"Modifier",children:s.jsx(qt,{className:"h-3 w-3"})}),s.jsx(L,{size:"sm",variant:"default",onClick:()=>ne(B),title:"Nouvelle Prescription",children:s.jsx(Fi,{className:"h-3 w-3"})}),s.jsx(L,{size:"sm",variant:"outline",onClick:()=>T(B),className:"text-red-600 hover:text-red-700 hover:bg-red-50",title:"Supprimer",children:s.jsx(It,{className:"h-3 w-3"})})]})})]},B.id)})})]})})})})]}),s.jsx(Fx,{open:f,onOpenChange:B=>{m(B),B||b(null)},prefillData:y||void 0}),s.jsx(SAe,{open:v,onOpenChange:p,consultation:g}),S&&C&&s.jsx(i2,{open:N,onOpenChange:w,petId:S,consultationId:C}),s.jsx(et,{open:A,onOpenChange:O,children:s.jsxs(Xe,{className:"max-w-full sm:max-w-4xl max-h-[80vh] overflow-y-auto mx-4",children:[s.jsxs(tt,{children:[s.jsxs(nt,{className:"flex items-center gap-2 text-base sm:text-lg",children:[s.jsx(Fi,{className:"h-4 sm:h-5 w-4 sm:w-5"}),"Prescriptions pour ",I]}),s.jsxs(Dt,{className:"text-sm",children:["Détails des ",E.length," prescription",E.length>1?"s":""," associée",E.length>1?"s":""," à cette consultation"]})]}),s.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[E.map((B,oe)=>s.jsxs(re,{className:"border-l-4 border-l-primary",children:[s.jsxs(de,{className:"pb-3",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[s.jsxs(he,{className:"text-base sm:text-lg",children:["Prescription #",B.id.slice(-8)]}),s.jsx(ke,{variant:B.status==="active"?"default":B.status==="completed"?"secondary":"destructive",className:"text-xs w-fit",children:B.status})]}),s.jsxs("div",{className:"text-xs sm:text-sm text-muted-foreground",children:["Date: ",new Date(B.prescription_date).toLocaleDateString("fr-FR")," à ",new Date(B.prescription_date).toLocaleTimeString("fr-FR"),B.valid_until&&s.jsxs("span",{className:"ml-0 sm:ml-4 block sm:inline",children:["Valide jusqu'au: ",new Date(B.valid_until).toLocaleDateString("fr-FR")]})]})]}),s.jsxs(se,{className:"space-y-4",children:[B.diagnosis&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-sm mb-1",children:"Diagnostic:"}),s.jsx("p",{className:"text-sm bg-muted p-2 rounded",children:B.diagnosis})]}),B.medications&&B.medications.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium text-sm mb-2",children:["Médicaments (",B.medications.length,"):"]}),s.jsx("div",{className:"grid gap-3 grid-cols-1 sm:grid-cols-2",children:B.medications.map((U,K)=>s.jsxs("div",{className:"bg-muted p-3 rounded-lg",children:[s.jsx("div",{className:"font-medium text-sm",children:U.medication_name}),s.jsxs("div",{className:"text-xs space-y-1 mt-1",children:[U.dosage&&s.jsxs("div",{children:["Dosage: ",U.dosage]}),U.frequency&&s.jsxs("div",{children:["Fréquence: ",U.frequency]}),U.duration&&s.jsxs("div",{children:["Durée: ",U.duration]}),U.quantity&&s.jsxs("div",{children:["Quantité: ",U.quantity]}),U.route&&s.jsxs("div",{children:["Voie: ",U.route]})]}),U.instructions&&s.jsxs("div",{className:"mt-2 text-xs bg-background p-2 rounded border",children:[s.jsx("span",{className:"font-medium",children:"Instructions: "}),U.instructions]})]},K))})]}),B.notes&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-sm mb-1",children:"Notes:"}),s.jsx("p",{className:"text-sm bg-muted p-2 rounded",children:B.notes})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 text-xs text-muted-foreground pt-2 border-t",children:[s.jsxs("span",{children:["Renouvellements: ",B.refill_count||0]}),s.jsxs("span",{children:["Créée le: ",new Date(B.created_at).toLocaleDateString("fr-FR")]}),B.updated_at!==B.created_at&&s.jsxs("span",{children:["Modifiée le: ",new Date(B.updated_at).toLocaleDateString("fr-FR")]})]})]})]},B.id)),E.length===0&&s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Fi,{className:"h-10 sm:h-12 w-10 sm:w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{className:"text-sm",children:"Aucune prescription trouvée pour cette consultation"})]})]})]})}),s.jsx(s2,{open:V,onOpenChange:H,children:s.jsxs(Dy,{children:[s.jsxs(My,{children:[s.jsx($y,{children:"Confirmer la suppression"}),s.jsxs(Ry,{children:["Êtes-vous sûr de vouloir supprimer cette consultation pour"," ",s.jsx("strong",{children:((Z=k==null?void 0:k.animal)==null?void 0:Z.name)||"cet animal"})," ?",s.jsx("br",{}),s.jsxs("span",{className:"text-sm text-muted-foreground mt-2 block",children:["Date: ",k&&new Date(k.consultation_date).toLocaleDateString("fr-FR")]}),s.jsx("br",{}),"Cette action est irréversible et supprimera également toutes les prescriptions associées."]})]}),s.jsxs(Iy,{children:[s.jsx(Fy,{onClick:()=>D(null),children:"Annuler"}),s.jsx(Ly,{onClick:ce,className:"bg-red-600 hover:bg-red-700",children:"Supprimer"})]})]})})]})};function kAe({open:e,onOpenChange:t,prescription:n}){const{updatePrescription:r}=wn(),{toast:a}=at(),[i,o]=j.useState({date:"",prescribedBy:"",diagnosis:"",instructions:"",duration:"",followUpDate:"",status:"",notes:""}),[l,c]=j.useState([]);j.useEffect(()=>{e&&n&&(o({date:n.date,prescribedBy:n.prescribedBy,diagnosis:n.diagnosis,instructions:n.instructions,duration:n.duration,followUpDate:n.followUpDate||"",status:n.status,notes:n.notes||""}),c([...n.medications]))},[e,n]);const u=g=>{o(x=>({...x,[g.target.id]:g.target.value}))},d=(g,x)=>{o(y=>({...y,[g]:x}))},h=(g,x,y)=>{const b=[...l];b[g]={...b[g],[x]:x==="quantity"||x==="refills"||x==="cost"?Number(y):y},c(b)},f=()=>{const g=Math.max(...l.map(x=>x.id),0)+1;c([...l,{id:g,name:"",dosage:"",frequency:"",duration:"",instructions:"",quantity:1,unit:"comprimés",refills:0,cost:0}])},m=g=>{l.length>1&&c(l.filter((x,y)=>y!==g))},v=g=>{if(g.preventDefault(),!n)return;const x=l.filter(y=>y.name.trim()!=="");if(x.length===0){a({title:"Erreur",description:"Au moins un médicament doit être spécifié.",variant:"destructive"});return}r(n.id,{date:i.date,prescribedBy:i.prescribedBy,diagnosis:i.diagnosis,medications:x,instructions:i.instructions,duration:i.duration,followUpDate:i.followUpDate||void 0,status:i.status,notes:i.notes}),a({title:"Prescription mise à jour",description:"La prescription a été modifiée avec succès."}),t(!1)},p=()=>l.reduce((g,x)=>g+(x.cost||0),0);return n?s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Xe,{className:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[s.jsxs(tt,{children:[s.jsxs(nt,{className:"flex items-center gap-2",children:[s.jsx(Fi,{className:"h-5 w-5"}),"Modifier la Prescription"]}),s.jsxs(Dt,{children:["Modifiez la prescription pour ",n.petName," (",n.clientName,")."]})]}),s.jsxs("form",{onSubmit:v,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"date",children:"Date de prescription *"}),s.jsx(J,{id:"date",type:"date",value:i.date,onChange:u,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"prescribedBy",children:"Prescrit par *"}),s.jsx(J,{id:"prescribedBy",value:i.prescribedBy,onChange:u,required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"diagnosis",children:"Diagnostic *"}),s.jsx(J,{id:"diagnosis",value:i.diagnosis,onChange:u,required:!0})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"duration",children:"Durée du traitement"}),s.jsx(J,{id:"duration",value:i.duration,onChange:u})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"followUpDate",children:"Date de suivi"}),s.jsx(J,{id:"followUpDate",type:"date",value:i.followUpDate,onChange:u,min:i.date})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Statut"}),s.jsxs(be,{value:i.status,onValueChange:g=>d("status",g),children:[s.jsx(xe,{children:s.jsx(je,{})}),s.jsxs(ye,{children:[s.jsx(q,{value:"active",children:"Active"}),s.jsx(q,{value:"completed",children:"Terminée"}),s.jsx(q,{value:"discontinued",children:"Arrêtée"})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(M,{className:"text-base font-medium",children:"Médicaments prescrits"}),s.jsxs(L,{type:"button",variant:"outline",size:"sm",onClick:f,className:"gap-2",children:[s.jsx(lt,{className:"h-4 w-4"}),"Ajouter médicament"]})]}),s.jsx("div",{className:"space-y-4",children:l.map((g,x)=>s.jsxs("div",{className:"p-4 border rounded-lg space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h4",{className:"font-medium",children:["Médicament ",x+1]}),l.length>1&&s.jsx(L,{type:"button",variant:"outline",size:"sm",onClick:()=>m(x),className:"text-red-600 hover:text-red-700",children:s.jsx(It,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Nom du médicament *"}),s.jsx(J,{value:g.name,onChange:y=>h(x,"name",y.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Dosage *"}),s.jsx(J,{value:g.dosage,onChange:y=>h(x,"dosage",y.target.value),required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Fréquence *"}),s.jsx(J,{value:g.frequency,onChange:y=>h(x,"frequency",y.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Durée"}),s.jsx(J,{value:g.duration,onChange:y=>h(x,"duration",y.target.value)})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Quantité"}),s.jsx(J,{type:"number",value:g.quantity,onChange:y=>h(x,"quantity",parseInt(y.target.value)),min:"1"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Unité"}),s.jsxs(be,{value:g.unit,onValueChange:y=>h(x,"unit",y),children:[s.jsx(xe,{children:s.jsx(je,{})}),s.jsxs(ye,{children:[s.jsx(q,{value:"comprimés",children:"Comprimés"}),s.jsx(q,{value:"ml",children:"ml"}),s.jsx(q,{value:"g",children:"g"}),s.jsx(q,{value:"mg",children:"mg"}),s.jsx(q,{value:"ampoules",children:"Ampoules"}),s.jsx(q,{value:"flacons",children:"Flacons"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Coût (€)"}),s.jsx(J,{type:"number",step:"0.01",value:g.cost,onChange:y=>h(x,"cost",parseFloat(y.target.value)),min:"0"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Instructions spécifiques"}),s.jsx(J,{value:g.instructions,onChange:y=>h(x,"instructions",y.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Renouvellements"}),s.jsx(J,{type:"number",value:g.refills,onChange:y=>h(x,"refills",parseInt(y.target.value)),min:"0"})]})]})]},g.id))}),s.jsx("div",{className:"flex justify-end",children:s.jsxs(ke,{variant:"outline",className:"text-lg px-4 py-2",children:["Coût total: ",p().toFixed(2),"€"]})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"instructions",children:"Instructions générales"}),s.jsx(We,{id:"instructions",value:i.instructions,onChange:u,rows:3})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"notes",children:"Notes"}),s.jsx(We,{id:"notes",value:i.notes,onChange:u,rows:2})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(L,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsxs(L,{type:"submit",className:"gap-2",children:[s.jsx(Yc,{className:"h-4 w-4"}),"Sauvegarder"]})]})]})]})}):null}const EAe="vetpro-veterinarians";function W1({prescription:e}){const{settings:t}=Pt();JSON.parse(localStorage.getItem(EAe)||"[]");const n=e.prescribedBy,r=()=>{if(!e||!e.petName||!e.clientName)return;const a=window.open("","_blank");if(!a)return;const i=`
      <html>
        <head>
          <title>Prescription - ${e.petName}</title>
          <style>
            body {
              font-family: Arial, sans-serif;
              margin: 20px;
              line-height: 1.6;
            }
            .header {
              text-align: center;
              border-bottom: 2px solid #333;
              padding-bottom: 20px;
              margin-bottom: 30px;
            }
            .clinic-info {
              margin-bottom: 30px;
            }
            .patient-info {
              margin-bottom: 30px;
            }
            .prescription-details {
              margin-bottom: 30px;
            }
            .medications {
              margin-bottom: 30px;
            }
            .medication-item {
              border: 1px solid #ccc;
              padding: 15px;
              margin-bottom: 15px;
              border-radius: 5px;
            }
            .instructions {
              margin-bottom: 30px;
            }
            .footer {
              margin-top: 50px;
              text-align: center;
            }
            .signature-line {
              border-top: 1px solid #333;
              width: 200px;
              margin: 20px auto;
            }
            table {
              width: 100%;
              border-collapse: collapse;
              margin-bottom: 20px;
            }
            th, td {
              border: 1px solid #ddd;
              padding: 8px;
              text-align: left;
            }
            th {
              background-color: #f2f2f2;
            }
            .total-cost {
              font-weight: bold;
              text-align: right;
              margin-top: 20px;
            }
          </style>
        </head>
        <body>
          <div class="header">
            ${t.logo?`<img src="${t.logo}" alt="Logo clinique" style="height:60px;margin-bottom:10px;"/>`:""}
            <h1>PRESCRIPTION MÉDICALE</h1>
            <h2>${t.clinicName}</h2>
            <p>${t.address}<br>
            Tél: ${t.phone} | Email: ${t.email}</p>
          </div>

          <div class="clinic-info">
            <strong>Date de prescription:</strong> ${new Date(e.date).toLocaleDateString("fr-FR")}<br>
            <strong>Prescrit par:</strong> ${n}
          </div>

          <div class="patient-info">
            <h3>Informations du patient</h3>
            <table>
              <tr>
                <th>Propriétaire</th>
                <td>${e.clientName}</td>
              </tr>
              <tr>
                <th>Animal</th>
                <td>${e.petName}</td>
              </tr>
              <tr>
                <th>Diagnostic</th>
                <td>${e.diagnosis}</td>
              </tr>
              <tr>
                <th>Durée du traitement</th>
                <td>${e.duration}</td>
              </tr>
            </table>
          </div>

          <div class="medications">
            <h3>Médicaments prescrits</h3>
            ${e.medications.map(o=>`
              <div class="medication-item">
                <h4>${o.name}</h4>
                <table>
                  <tr>
                    <th>Posologie</th>
                    <td>${o.dosage} - ${o.frequency}</td>
                  </tr>
                  <tr>
                    <th>Durée</th>
                    <td>${o.duration}</td>
                  </tr>
                  <tr>
                    <th>Quantité</th>
                    <td>${o.quantity} ${o.unit}</td>
                  </tr>
                  ${o.refills&&o.refills>0?`
                    <tr>
                      <th>Renouvellements</th>
                      <td>${o.refills}</td>
                    </tr>
                  `:""}
                  ${o.instructions?`
                    <tr>
                      <th>Instructions</th>
                      <td>${o.instructions}</td>
                    </tr>
                  `:""}
                  ${o.cost?`
                    <tr>
                      <th>Coût</th>
                      <td>${o.cost.toFixed(2)}€</td>
                    </tr>
                  `:""}
                </table>
              </div>
            `).join("")}
            
            <div class="total-cost">
              Coût total: ${e.medications.reduce((o,l)=>o+(l.cost||0),0).toFixed(2)}€
            </div>
          </div>

          ${e.instructions?`
            <div class="instructions">
              <h3>Instructions générales</h3>
              <p>${e.instructions}</p>
            </div>
          `:""}

          ${e.followUpDate?`
            <div class="instructions">
              <h3>Suivi</h3>
              <p><strong>Date de suivi prévue:</strong> ${new Date(e.followUpDate).toLocaleDateString("fr-FR")}</p>
            </div>
          `:""}

          ${e.notes?`
            <div class="instructions">
              <h3>Notes</h3>
              <p>${e.notes}</p>
            </div>
          `:""}

          <div class="footer">
            <div class="signature-line"></div>
            <p>Signature du vétérinaire</p>
            <p><small>Cette prescription est valable pour la durée du traitement prescrit.</small></p>
          </div>
        </body>
      </html>
    `;a.document.write(i),a.document.close(),setTimeout(()=>{a.print(),a.close()},500)};return s.jsxs(L,{size:"sm",variant:"outline",onClick:r,className:"gap-2",children:[s.jsx(af,{className:"h-4 w-4"}),"Générer Ordonnance"]})}const TAe={active:"bg-green-100 text-green-800",completed:"bg-gray-100 text-gray-800",discontinued:"bg-red-100 text-red-800"},OAe={active:"Active",completed:"Terminée",discontinued:"Arrêtée"};function DAe({petId:e,consultationId:t}){const{data:n=[]}=Ix(),{data:r=[]}=cee(e),{toast:a}=at(),[i,o]=j.useState(!1),[l,c]=j.useState(!1),[u,d]=j.useState(null),h=t?n.filter(x=>x.consultation_id===t):r,f=x=>{d(x),c(!0)},m=x=>{var y;confirm(`Êtes-vous sûr de vouloir supprimer la prescription pour ${((y=x.medications)==null?void 0:y.map(b=>b.medication_name).join(", "))||"médicaments"} ?`)&&a({title:"Fonctionnalité à implémenter",description:"La suppression de prescription n'est pas encore implémentée."})},v=x=>{switch(x){case"active":return s.jsx(Fs,{className:"h-4 w-4 text-green-600"});case"completed":return s.jsx(Bn,{className:"h-4 w-4 text-gray-600"});case"discontinued":return s.jsx(rf,{className:"h-4 w-4 text-red-600"});default:return s.jsx(tn,{className:"h-4 w-4 text-gray-600"})}},p=x=>{var y,b,N,w;return{id:x.id,consultationId:x.consultation_id,clientId:x.client_id,clientName:`${((y=x.client)==null?void 0:y.first_name)||""} ${((b=x.client)==null?void 0:b.last_name)||""}`.trim(),petId:x.animal_id,petName:((N=x.animal)==null?void 0:N.name)||"",date:x.prescription_date,prescribedBy:"Non spécifié",diagnosis:x.diagnosis||"",medications:((w=x.medications)==null?void 0:w.map(S=>({id:S.id,name:S.medication_name,dosage:S.dosage||"",frequency:S.frequency||"",duration:S.duration||"",instructions:S.instructions||"",quantity:S.quantity||1,unit:"unit",cost:0})))||[],instructions:x.notes||"",duration:x.valid_until||"",followUpDate:void 0,status:x.status||"active",notes:x.notes||"",createdAt:x.created_at}},g=x=>(x==null?void 0:x.reduce((y,b)=>y+(b.cost||0),0))||0;return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[s.jsx(Fi,{className:"h-5 w-5"}),"Prescriptions (",h.length,")"]}),s.jsxs(L,{size:"sm",onClick:()=>o(!0),disabled:!t,className:"gap-2",children:[s.jsx(lt,{className:"h-4 w-4"}),"Nouvelle Prescription"]})]}),h.length===0?s.jsx(re,{children:s.jsxs(se,{className:"p-6 text-center text-muted-foreground",children:[s.jsx(Fi,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"Aucune prescription trouvée"}),s.jsx("p",{className:"text-sm",children:"Commencez par créer une nouvelle prescription"})]})}):s.jsx("div",{className:"space-y-4",children:h.sort((x,y)=>new Date(y.prescription_date||y.date).getTime()-new Date(x.prescription_date||x.date).getTime()).map(x=>{var y;return s.jsxs(re,{className:"card-hover",children:[s.jsx(de,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[v(x.status),s.jsx(ke,{className:TAe[x.status],children:OAe[x.status]})]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx(Ze,{className:"h-4 w-4 inline mr-1"}),new Date(x.prescription_date||x.date).toLocaleDateString("fr-FR")]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(W1,{prescription:p(x)}),s.jsx(L,{size:"sm",variant:"outline",onClick:()=>f(x),className:"h-8 w-8 p-0",title:"Modifier",children:s.jsx(qt,{className:"h-3 w-3"})}),s.jsx(L,{size:"sm",variant:"outline",onClick:()=>m(x),className:"h-8 w-8 p-0 text-red-600",title:"Supprimer",children:s.jsx(It,{className:"h-3 w-3"})})]})]})}),s.jsxs(se,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Prescrit par:"}),s.jsx("p",{className:"text-muted-foreground",children:"Non spécifié"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Diagnostic:"}),s.jsx("p",{className:"text-muted-foreground",children:x.diagnosis})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Durée:"}),s.jsx("p",{className:"text-muted-foreground",children:x.valid_until?new Date(x.valid_until).toLocaleDateString("fr-FR"):"N/A"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Coût total:"}),s.jsxs("p",{className:"text-muted-foreground",children:[g(x.medications).toFixed(2),"€"]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-3",children:"Médicaments prescrits:"}),s.jsx("div",{className:"space-y-3",children:(y=x.medications)==null?void 0:y.map(b=>s.jsx("div",{className:"p-3 border rounded-lg bg-muted/30",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"font-medium",children:b.medication_name}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx("span",{className:"font-medium",children:"Posologie:"})," ",b.dosage," - ",b.frequency]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx("span",{className:"font-medium",children:"Durée:"})," ",b.duration]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx("span",{className:"font-medium",children:"Quantité:"})," ",b.quantity]}),b.instructions&&s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx("span",{className:"font-medium",children:"Instructions:"})," ",b.instructions]})]}),b.cost&&s.jsx("div",{className:"text-right",children:s.jsxs("div",{className:"font-medium",children:[b.cost.toFixed(2),"€"]})})]})},b.id))})]}),x.instructions&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Instructions générales:"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:x.instructions})]}),x.followUpDate&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(tn,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:"Suivi prévu:"}),s.jsx("span",{className:"text-muted-foreground",children:new Date(x.followUpDate).toLocaleDateString("fr-FR")})]}),x.notes&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Notes:"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:x.notes})]})]})]},x.id)})})]}),t&&s.jsx(i2,{open:i,onOpenChange:o,petId:e.toString(),consultationId:t.toString()}),s.jsx(kAe,{open:l,onOpenChange:c,prescription:u})]})}const MAe=({consultation:e,open:t,onOpenChange:n,onEdit:r})=>{if(!e)return null;const{getClientById:a,getPetById:i}=wn(),o=a(e.clientId),l=i(e.petId);return s.jsx(et,{open:t,onOpenChange:n,children:s.jsxs(Xe,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(tt,{children:[s.jsxs(nt,{children:["Consultation #",e.id," - ",ho(e.date)]}),s.jsx(Dt,{children:"Détails de la consultation générale"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsx(Ze,{className:"h-5 w-5"}),s.jsx("h3",{className:"text-lg font-semibold",children:e.purpose||"Consultation générale"})]}),s.jsxs("div",{className:"flex gap-8 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(pt,{className:"h-4 w-4"}),l==null?void 0:l.name," (",l==null?void 0:l.type,")"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Vn,{className:"h-4 w-4"}),o==null?void 0:o.name]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Hn,{className:"h-4 w-4"}),e.veterinarian]})]}),e.symptoms&&s.jsx(re,{children:s.jsx(se,{children:s.jsxs("p",{children:[s.jsx("strong",{children:"Symptômes:"})," ",e.symptoms]})})}),s.jsxs(Oa,{defaultValue:"overview",className:"space-y-4",children:[s.jsxs(Ys,{className:"grid grid-cols-2",children:[s.jsx(bt,{value:"overview",children:"Détails"}),s.jsx(bt,{value:"prescriptions",children:"Prescriptions"})]}),s.jsx(jt,{value:"overview",children:s.jsx(re,{children:s.jsxs(se,{className:"space-y-2 text-sm",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Motif:"})," ",e.purpose||"Non spécifié"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Notes:"})," ",e.notes||"Aucune"]}),e.photos&&e.photos.length>0&&s.jsxs("div",{className:"pt-4",children:[s.jsx("h5",{className:"font-medium mb-2",children:"Photos de la consultation"}),s.jsx("div",{className:"flex gap-2 overflow-x-auto",children:e.photos.map((c,u)=>s.jsx("div",{className:"relative",children:s.jsx("img",{src:c,alt:`consult-photo-${u}`,className:"h-32 w-32 object-cover rounded cursor-pointer hover:opacity-80"})},u))})]})]})})}),s.jsx(jt,{value:"prescriptions",children:s.jsx(DAe,{petId:e.petId,consultationId:e.id})})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[s.jsxs(L,{variant:"outline",onClick:r,children:[s.jsx(qt,{className:"h-4 w-4"})," Modifier"]}),s.jsx(X3,{consultation:e})]})]})})};function IAe({prescription:e}){const{settings:t}=Pt(),{logo:n,clinicName:r,address:a,phone:i,email:o,website:l,currency:c}=t,d=e.medications.map(m=>m.cost*(m.quantity||1)).reduce((m,v)=>m+v,0),h=()=>{if(!e||!e.petName||!e.clientName)return;const m=window.open("","_blank");if(!m)return;const v=f();m.document.write(v),m.document.close(),setTimeout(()=>{m.print(),m.close()},500)},f=()=>`
      <html>
        <head>
          <title>Facture Prescription - ${e.petName}</title>
          <style>
            body {
              font-family: Arial, sans-serif;
              margin: 20px;
              line-height: 1.6;
            }
            .header {
              display: flex;
              align-items: center;
              justify-content: space-between;
              margin-bottom: 30px;
              border-bottom: 2px solid #333;
              padding-bottom: 20px;
            }
            .clinic-info {
              text-align: center;
              flex: 1;
            }
            .clinic-info h1 {
              font-size: 24px;
              font-weight: bold;
              margin-bottom: 10px;
            }
            .clinic-info p {
              font-size: 14px;
              margin: 5px 0;
            }
            .invoice-section {
              margin-bottom: 30px;
            }
            .invoice-section h2 {
              font-size: 20px;
              font-weight: 600;
              margin-bottom: 15px;
            }
            .grid {
              display: grid;
              grid-template-columns: 1fr 1fr;
              gap: 30px;
              margin-bottom: 15px;
            }
            table {
              width: 100%;
              border-collapse: collapse;
              margin-bottom: 20px;
            }
            th, td {
              border: 1px solid #ddd;
              padding: 12px;
              text-align: left;
            }
            th {
              background-color: #f2f2f2;
              font-weight: bold;
            }
            .total-row {
              font-weight: bold;
              background-color: #f8f9fa;
            }
            .print-hidden {
              display: none;
            }
            @media print {
              body { margin: 0; }
              .print-hidden { display: none !important; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            ${n?`<img src="${n}" alt="Logo clinique" style="height:60px;width:60px;object-fit:contain;"/>`:'<div style="width:60px;"></div>'}
            <div class="clinic-info">
              <h1>${r}</h1>
              <p>${a}</p>
              <p>${i} | ${o}</p>
              ${l?`<p>${l}</p>`:""}
            </div>
            <div style="width:60px;"></div>
          </div>

          <div class="invoice-section">
            <h2>Ordonnance</h2>
            <div class="grid">
              <div>
                <p><strong>Date :</strong> ${e.date}</p>
                <p><strong>Patient :</strong> ${e.petName} (${e.clientName})</p>
              </div>
              <div>
                <p><strong>Prescrit par :</strong> ${e.prescribedBy}</p>
                <p><strong>Diagnostic :</strong> ${e.diagnosis}</p>
              </div>
            </div>
          </div>

          <div class="invoice-section">
            <h2>Détail des médicaments</h2>
            <table>
              <thead>
                <tr>
                  <th>Médicament</th>
                  <th>Quantité</th>
                  <th>Prix unitaire</th>
                  <th>Total</th>
                </tr>
              </thead>
              <tbody>
                ${e.medications.map(m=>{const v=m.cost*(m.quantity||1);return`
                    <tr>
                      <td>
                        <strong>${m.name}</strong><br>
                        <small>${m.dosage} - ${m.frequency}</small>
                      </td>
                      <td>${m.quantity||1}</td>
                      <td>${m.cost.toFixed(2)} ${c}</td>
                      <td>${v.toFixed(2)} ${c}</td>
                    </tr>
                  `}).join("")}
                <tr class="total-row">
                  <td colspan="3"><strong>Total</strong></td>
                  <td><strong>${d.toFixed(2)} ${c}</strong></td>
                </tr>
              </tbody>
            </table>
          </div>

          ${e.instructions?`
            <div class="invoice-section">
              <h2>Instructions</h2>
              <p>${e.instructions}</p>
            </div>
          `:""}

          <div style="margin-top: 50px; text-align: center;">
            <div style="border-top: 1px solid #333; width: 200px; margin: 20px auto;"></div>
            <p>Signature du vétérinaire</p>
          </div>
        </body>
      </html>
    `;return s.jsxs("div",{className:"p-8 max-w-screen-lg mx-auto bg-white text-gray-800",children:[s.jsxs("header",{className:"flex items-center justify-between mb-8",children:[n&&s.jsx("img",{src:n,alt:"Logo clinique",className:"h-16 w-16 object-contain"}),s.jsxs("div",{className:"text-center flex-1",children:[s.jsx("h1",{className:"text-2xl font-bold",children:r}),s.jsx("p",{className:"text-sm",children:a}),s.jsxs("p",{className:"text-sm",children:[i," | ",o]}),l&&s.jsx("p",{className:"text-sm",children:l})]}),s.jsx("div",{children:s.jsx(L,{variant:"outline",onClick:h,className:"uppercase text-sm",children:"Imprimer"})})]}),s.jsxs("section",{className:"mb-12",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Ordonnance"}),s.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-4",children:[s.jsxs("div",{children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Date :"})," ",e.date]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Patient :"})," ",e.petName," (",e.clientName,")"]})]}),s.jsxs("div",{children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Prescrit par :"})," ",e.prescribedBy]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Diagnostic :"})," ",e.diagnosis]})]})]}),s.jsxs("table",{className:"w-full border-collapse",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"border-b py-2 text-left",children:"Médicament"}),s.jsx("th",{className:"border-b py-2 text-left",children:"Dosage"}),s.jsx("th",{className:"border-b py-2 text-left",children:"Fréquence"}),s.jsx("th",{className:"border-b py-2 text-left",children:"Durée"})]})}),s.jsx("tbody",{children:e.medications.map(m=>s.jsxs("tr",{className:"border-b",children:[s.jsx("td",{className:"py-2",children:m.name}),s.jsx("td",{className:"py-2",children:m.dosage}),s.jsx("td",{className:"py-2",children:m.frequency}),s.jsx("td",{className:"py-2",children:m.duration})]},m.id))})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Facture"}),s.jsxs("table",{className:"w-full border-collapse mb-4",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"border-b py-2 text-left",children:"Produit / Service"}),s.jsx("th",{className:"border-b py-2 text-right",children:"Quantité"}),s.jsxs("th",{className:"border-b py-2 text-right",children:["Prix Unitaire (",c,")"]}),s.jsxs("th",{className:"border-b py-2 text-right",children:["Total (",c,")"]})]})}),s.jsx("tbody",{children:e.medications.map(m=>{const v=m.quantity||1,p=(m.cost||0)*v;return s.jsxs("tr",{className:"border-b",children:[s.jsx("td",{className:"py-2",children:m.name}),s.jsx("td",{className:"py-2 text-right",children:v}),s.jsx("td",{className:"py-2 text-right",children:m.cost.toFixed(2)}),s.jsx("td",{className:"py-2 text-right",children:p.toFixed(2)})]},m.id)})}),s.jsx("tfoot",{children:s.jsxs("tr",{children:[s.jsx("td",{colSpan:3,className:"py-2 text-right font-semibold",children:"Montant total :"}),s.jsx("td",{className:"py-2 text-right font-semibold",children:d.toFixed(2)})]})})]})]})]})}const $Ae=()=>{var V,H;const{data:e=[]}=ws(),{data:t=[]}=Ix();vn(),hn();const n=k=>{var D,X,Q,te;return{id:k.id,consultationId:k.consultation_id,clientId:k.client_id,clientName:`${((D=k.client)==null?void 0:D.first_name)||""} ${((X=k.client)==null?void 0:X.last_name)||""}`.trim(),petId:k.animal_id,petName:((Q=k.animal)==null?void 0:Q.name)||"",date:k.prescription_date,prescribedBy:"Non spécifié",diagnosis:k.diagnosis||"",medications:((te=k.medications)==null?void 0:te.map(ne=>({id:ne.id,name:ne.medication_name,dosage:ne.dosage||"",frequency:ne.frequency||"",duration:ne.duration||"",instructions:ne.instructions||"",quantity:ne.quantity||1,unit:"unit",cost:0})))||[],instructions:k.notes||"",duration:k.valid_until||"",followUpDate:void 0,status:k.status||"active",notes:k.notes||"",createdAt:k.created_at}},[r,a]=j.useState(""),[i,o]=j.useState("all"),[l,c]=j.useState("all"),[u,d]=j.useState("all"),[h,f]=j.useState(""),[m,v]=j.useState("cards"),[p,g]=j.useState(!1),[x,y]=j.useState(null),[b,N]=j.useState(!1),[w,S]=j.useState(null),[_,C]=j.useState(!1),[P,A]=j.useState(null),O=[...e.map(k=>{var D,X,Q,te,ne;return{id:k.id,date:((D=k.consultation_date)==null?void 0:D.split("T")[0])||"",petName:((X=k.animal)==null?void 0:X.name)||"",petType:((Q=k.animal)==null?void 0:Q.species)||"",client:`${((te=k.client)==null?void 0:te.first_name)||""} ${((ne=k.client)==null?void 0:ne.last_name)||""}`.trim(),type:"consultation",title:k.diagnosis||"Consultation",veterinarian:k.notes||"Non spécifié",details:k.symptoms||"",prescriptions:[],cost:k.cost||0,status:"completed"}})].sort((k,D)=>new Date(D.date).getTime()-new Date(k.date).getTime()),E=t.map(k=>{var D,X,Q,te,ne,T,ce,me,le,Z,B;return{id:k.id,date:((D=k.prescription_date)==null?void 0:D.split("T")[0])||"",petName:((X=k.animal)==null?void 0:X.name)||"",client:`${((Q=k.client)==null?void 0:Q.first_name)||""} ${((te=k.client)==null?void 0:te.last_name)||""}`.trim(),medication:((ne=k.medications)==null?void 0:ne.map(oe=>oe.medication_name).join(", "))||"",dosage:((ce=(T=k.medications)==null?void 0:T[0])==null?void 0:ce.dosage)||"",frequency:((le=(me=k.medications)==null?void 0:me[0])==null?void 0:le.frequency)||"",duration:((B=(Z=k.medications)==null?void 0:Z[0])==null?void 0:B.duration)||"",veterinarian:"Non spécifié",status:k.status}}),z=O.filter(k=>{const D=k.petName.toLowerCase().includes(r.toLowerCase())||k.client.toLowerCase().includes(r.toLowerCase())||k.title.toLowerCase().includes(r.toLowerCase()),X=i==="all"||k.petName.toLowerCase().includes(i.toLowerCase()),Q=l==="all"||k.type===l;let te=!0;if(u==="today"){const ne=new Date().toISOString().split("T")[0];te=k.date===ne}else if(u==="week"){const ne=new Date(k.date),T=new Date,ce=T.getDay(),me=T.getDate()-ce+(ce===0?-6:1),le=new Date(T.setDate(me)),Z=new Date(le);Z.setDate(le.getDate()+6),te=ne>=le&&ne<=Z}else u==="specific"&&(te=h&&k.date===h);return D&&X&&Q&&te}),I=E.filter(k=>{const D=k.petName.toLowerCase().includes(r.toLowerCase())||k.client.toLowerCase().includes(r.toLowerCase())||k.medication.toLowerCase().includes(r.toLowerCase()),X=i==="all"||k.petName.toLowerCase().includes(i.toLowerCase()),Q=l==="all"||!0;let te=!0;if(u==="today"){const ne=new Date().toISOString().split("T")[0];te=k.date===ne}else if(u==="week"){const ne=new Date(k.date),T=new Date,ce=T.getDay(),me=T.getDate()-ce+(ce===0?-6:1),le=new Date(T.setDate(me)),Z=new Date(le);Z.setDate(le.getDate()+6),te=ne>=le&&ne<=Z}else u==="specific"&&(te=h&&k.date===h);return D&&X&&Q&&te}),W={active:"bg-blue-100 text-blue-800 hover:bg-blue-200",completed:"bg-green-100 text-green-800 hover:bg-green-200",discontinued:"bg-red-100 text-red-800 hover:bg-red-200"};return s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-8 space-y-8 max-w-7xl",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Historique Médical"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Consultez l'historique complet des soins et traitements"})]}),s.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[s.jsxs(L,{size:"sm",variant:m==="cards"?"default":"outline",onClick:()=>v("cards"),className:"gap-2 flex-1 sm:flex-none",children:[s.jsx(yo,{className:"h-4 w-4"}),"Cartes"]}),s.jsxs(L,{size:"sm",variant:m==="table"?"default":"outline",onClick:()=>v("table"),className:"gap-2 flex-1 sm:flex-none",children:[s.jsx(di,{className:"h-4 w-4"}),"Tableau"]})]})]}),s.jsxs(re,{children:[s.jsx(de,{children:s.jsxs(he,{className:"flex items-center gap-2",children:[s.jsx(Co,{className:"h-5 w-5"}),"Rechercher"]})}),s.jsxs(se,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(J,{placeholder:"Rechercher par nom, animal, diagnostic...",value:r,onChange:k=>a(k.target.value)}),s.jsxs(be,{value:i,onValueChange:o,children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Filtrer par animal"})}),s.jsxs(ye,{children:[s.jsx(q,{value:"all",children:"Tous les animaux"}),Array.from(new Set(O.map(k=>k.petName))).map(k=>s.jsx(q,{value:k,children:k},k))]})]}),s.jsxs(be,{value:l,onValueChange:c,children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Filtrer par type"})}),s.jsxs(ye,{children:[s.jsx(q,{value:"all",children:"Tous types"}),s.jsx(q,{value:"consultation",children:"Consultations"}),s.jsx(q,{value:"treatment",children:"Traitements"}),s.jsx(q,{value:"surgery",children:"Chirurgies"})]})]}),s.jsxs(be,{value:u,onValueChange:d,children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Période"})}),s.jsxs(ye,{children:[s.jsx(q,{value:"all",children:"Toute période"}),s.jsx(q,{value:"today",children:"Aujourd'hui"}),s.jsx(q,{value:"week",children:"Cette semaine"}),s.jsx(q,{value:"specific",children:"Date spécifique"})]})]})]}),u==="specific"&&s.jsx(J,{type:"date",value:h,onChange:k=>f(k.target.value),className:"max-w-xs"})]})]}),s.jsxs(Oa,{defaultValue:"medical",className:"space-y-4",children:[s.jsxs(Ys,{className:"grid w-full grid-cols-2",children:[s.jsxs(bt,{value:"medical",className:"gap-2",children:[s.jsx(Ze,{className:"h-4 w-4"}),"Historique Médical"]}),s.jsxs(bt,{value:"prescriptions",className:"gap-2",children:[s.jsx(pt,{className:"h-4 w-4"}),"Prescriptions"]})]}),s.jsxs(jt,{value:"medical",className:"space-y-4",children:[s.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:s.jsxs("h3",{className:"text-lg font-semibold",children:["Historique des consultations (",z.length," entrées)"]})}),m==="cards"?s.jsx("div",{className:"grid gap-6",children:z.map(k=>s.jsx(re,{className:"card-hover",children:s.jsx(se,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row items-start justify-between gap-4",children:[s.jsxs("div",{className:"space-y-3 flex-1",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ze,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium text-sm sm:text-base",children:new Date(k.date).toLocaleDateString("fr-FR")})]}),s.jsx(ke,{variant:"outline",className:"text-xs",children:k.type})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-semibold",children:k.title}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 text-sm text-muted-foreground mt-1",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(pt,{className:"h-3 w-3"}),k.petName]}),s.jsxs("span",{children:["Client: ",k.client]}),s.jsxs("span",{children:["Vétérinaire: ",k.veterinarian]})]})]}),k.details&&s.jsx("p",{className:"text-sm text-muted-foreground",children:k.details}),k.cost&&s.jsx("div",{className:"text-sm",children:s.jsxs("span",{className:"font-medium",children:["Coût: ",k.cost," MAD"]})})]}),s.jsx("div",{className:"flex gap-2 w-full sm:w-auto justify-end",children:s.jsx(L,{size:"sm",variant:"outline",className:"flex-1 sm:flex-none",onClick:()=>{const D=e.find(X=>X.id===k.id);D&&y({...D,petId:D.animal_id,clientId:D.client_id}),g(!0)},children:s.jsx(Dn,{className:"h-4 w-4"})})})]})})},k.id))}):s.jsx(re,{children:s.jsx(se,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full min-w-[600px]",children:[s.jsx("thead",{className:"border-b",children:s.jsxs("tr",{className:"text-left",children:[s.jsx("th",{className:"p-4 font-medium",children:"Date"}),s.jsx("th",{className:"p-4 font-medium",children:"Type"}),s.jsx("th",{className:"p-4 font-medium",children:"Titre"}),s.jsx("th",{className:"p-4 font-medium",children:"Animal"}),s.jsx("th",{className:"p-4 font-medium",children:"Client"}),s.jsx("th",{className:"p-4 font-medium",children:"Vétérinaire"}),s.jsx("th",{className:"p-4 font-medium",children:"Actions"})]})}),s.jsx("tbody",{children:z.map(k=>s.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[s.jsx("td",{className:"p-4",children:new Date(k.date).toLocaleDateString("fr-FR")}),s.jsx("td",{className:"p-4",children:s.jsx(ke,{variant:"outline",className:"text-xs",children:k.type})}),s.jsxs("td",{className:"p-4",children:[s.jsx("div",{className:"font-medium",children:k.title}),k.details&&s.jsx("div",{className:"text-sm text-muted-foreground",children:k.details})]}),s.jsx("td",{className:"p-4",children:k.petName}),s.jsx("td",{className:"p-4",children:k.client}),s.jsx("td",{className:"p-4",children:k.veterinarian}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.jsx(L,{size:"sm",variant:"outline",onClick:()=>{const D=e.find(X=>X.id===k.id);D&&y({...D,petId:D.animal_id,clientId:D.client_id}),g(!0)},children:s.jsx(Dn,{className:"h-4 w-4"})}),s.jsx(L,{size:"sm",variant:"outline",children:s.jsx(qt,{className:"h-4 w-4"})})]})})]},k.id))})]})})})})]}),s.jsxs(jt,{value:"prescriptions",className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("h3",{className:"text-lg font-semibold",children:["Historique des prescriptions (",I.length," entrées)"]}),s.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[s.jsxs(L,{size:"sm",variant:m==="cards"?"default":"outline",onClick:()=>v("cards"),className:"gap-2 flex-1 sm:flex-none",children:[s.jsx(yo,{className:"h-4 w-4"}),"Cartes"]}),s.jsxs(L,{size:"sm",variant:m==="table"?"default":"outline",onClick:()=>v("table"),className:"gap-2 flex-1 sm:flex-none",children:[s.jsx(di,{className:"h-4 w-4"}),"Tableau"]})]})]}),m==="cards"?s.jsx("div",{className:"grid gap-6",children:I.map(k=>s.jsx(re,{className:"card-hover",children:s.jsx(se,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row items-start justify-between gap-4",children:[s.jsxs("div",{className:"space-y-3 flex-1",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ze,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium text-sm sm:text-base",children:new Date(k.date).toLocaleDateString("fr-FR")})]}),s.jsx(ke,{variant:"outline",className:W[k.status],children:k.status==="active"?"Actif":k.status==="completed"?"Terminé":"Arrêté"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-semibold",children:k.medication}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 text-sm text-muted-foreground mt-1",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(pt,{className:"h-3 w-3"}),k.petName]}),s.jsxs("span",{children:["Client: ",k.client]}),s.jsxs("span",{children:["Prescrit par: ",k.veterinarian]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Dosage:"})," ",k.dosage]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Fréquence:"})," ",k.frequency]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Durée:"})," ",k.duration]})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 w-full sm:w-auto justify-end",children:[s.jsx(L,{size:"sm",variant:"outline",className:"flex-1 sm:flex-none",onClick:()=>{S(k),N(!0)},children:"Renouveler"}),(()=>{const D=t.find(X=>X.id===k.id);return D?s.jsx(W1,{prescription:n(D)}):s.jsx(L,{size:"sm",variant:"outline",disabled:!0,className:"flex-1 sm:flex-none",children:"Prescription indisponible"})})(),s.jsx(L,{size:"sm",variant:"outline",className:"flex-1 sm:flex-none",onClick:()=>{const D=t.find(X=>X.id===k.id);D&&(A(n(D)),C(!0))},children:"Facture"})]})]})})},k.id))}):s.jsx(re,{children:s.jsx(se,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full min-w-[600px]",children:[s.jsx("thead",{className:"border-b",children:s.jsxs("tr",{className:"text-left",children:[s.jsx("th",{className:"p-4 font-medium",children:"Date"}),s.jsx("th",{className:"p-4 font-medium",children:"Statut"}),s.jsx("th",{className:"p-4 font-medium",children:"Médicament"}),s.jsx("th",{className:"p-4 font-medium",children:"Animal"}),s.jsx("th",{className:"p-4 font-medium",children:"Client"}),s.jsx("th",{className:"p-4 font-medium",children:"Dosage"}),s.jsx("th",{className:"p-4 font-medium",children:"Durée"}),s.jsx("th",{className:"p-4 font-medium",children:"Actions"})]})}),s.jsx("tbody",{children:I.map(k=>s.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[s.jsx("td",{className:"p-4",children:new Date(k.date).toLocaleDateString("fr-FR")}),s.jsx("td",{className:"p-4",children:s.jsx(ke,{variant:"outline",className:W[k.status],children:k.status==="active"?"Actif":k.status==="completed"?"Terminé":"Arrêté"})}),s.jsxs("td",{className:"p-4",children:[s.jsx("div",{className:"font-medium",children:k.medication}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Prescrit par: ",k.veterinarian]})]}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pt,{className:"h-4 w-4 text-primary"}),k.petName]})}),s.jsx("td",{className:"p-4",children:k.client}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{children:k.dosage}),s.jsx("div",{className:"text-muted-foreground",children:k.frequency})]})}),s.jsx("td",{className:"p-4",children:k.duration}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.jsx(L,{size:"sm",variant:"outline",onClick:()=>{S(k),N(!0)},children:"Renouveler"}),s.jsx(W1,{prescription:n(t.find(D=>D.id===k.id))}),s.jsx(L,{size:"sm",variant:"outline",onClick:()=>{const D=t.find(X=>X.id===k.id);A(n(D)),C(!0)},children:"Facture"})]})})]},k.id))})]})})})})]})]}),s.jsx(MAe,{consultation:x,open:p,onOpenChange:g,onEdit:()=>{}}),(w==null?void 0:w.id)&&s.jsx(i2,{open:b,onOpenChange:N,petId:((H=(V=t.find(k=>k.id===(w==null?void 0:w.id)))==null?void 0:V.animal_id)==null?void 0:H.toString())||"",consultationId:w.id.toString()}),s.jsx(et,{open:_,onOpenChange:C,children:s.jsx(Xe,{children:P&&s.jsx(IAe,{prescription:P})})})]})};var zy="Checkbox",[RAe,nEe]=Fr(zy),[LAe,o2]=RAe(zy);function FAe(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:a,disabled:i,form:o,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:h}=e,[f,m]=ui({prop:n,defaultProp:a??!1,onChange:c,caller:zy}),[v,p]=j.useState(null),[g,x]=j.useState(null),y=j.useRef(!1),b=v?!!o||!!v.closest("form"):!0,N={checked:f,disabled:i,setChecked:m,control:v,setControl:p,name:l,form:o,value:d,hasConsumerStoppedPropagationRef:y,required:u,defaultChecked:go(a)?!1:a,isFormControl:b,bubbleInput:g,setBubbleInput:x};return s.jsx(LAe,{scope:t,...N,children:BAe(h)?h(N):r})}var N8="CheckboxTrigger",S8=j.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},a)=>{const{control:i,value:o,disabled:l,checked:c,required:u,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:f,isFormControl:m,bubbleInput:v}=o2(N8,e),p=dt(a,d),g=j.useRef(c);return j.useEffect(()=>{const x=i==null?void 0:i.form;if(x){const y=()=>h(g.current);return x.addEventListener("reset",y),()=>x.removeEventListener("reset",y)}},[i,h]),s.jsx(Le.button,{type:"button",role:"checkbox","aria-checked":go(c)?"mixed":c,"aria-required":u,"data-state":k8(c),"data-disabled":l?"":void 0,disabled:l,value:o,...r,ref:p,onKeyDown:Pe(t,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:Pe(n,x=>{h(y=>go(y)?!0:!y),v&&m&&(f.current=x.isPropagationStopped(),f.current||x.stopPropagation())})})});S8.displayName=N8;var l2=j.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:u,form:d,...h}=e;return s.jsx(FAe,{__scopeCheckbox:n,checked:a,defaultChecked:i,disabled:l,required:o,onCheckedChange:u,name:r,form:d,value:c,internal_do_not_use_render:({isFormControl:f})=>s.jsxs(s.Fragment,{children:[s.jsx(S8,{...h,ref:t,__scopeCheckbox:n}),f&&s.jsx(A8,{__scopeCheckbox:n})]})})});l2.displayName=zy;var _8="CheckboxIndicator",C8=j.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...a}=e,i=o2(_8,n);return s.jsx(js,{present:r||go(i.checked)||i.checked===!0,children:s.jsx(Le.span,{"data-state":k8(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});C8.displayName=_8;var P8="CheckboxBubbleInput",A8=j.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:o,required:l,disabled:c,name:u,value:d,form:h,bubbleInput:f,setBubbleInput:m}=o2(P8,e),v=dt(n,m),p=US(i),g=sS(r);j.useEffect(()=>{const y=f;if(!y)return;const b=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(b,"checked").set,S=!a.current;if(p!==i&&w){const _=new Event("click",{bubbles:S});y.indeterminate=go(i),w.call(y,go(i)?!1:i),y.dispatchEvent(_)}},[f,p,i,a]);const x=j.useRef(go(i)?!1:i);return s.jsx(Le.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??x.current,required:l,disabled:c,name:u,value:d,form:h,...t,tabIndex:-1,ref:v,style:{...t.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});A8.displayName=P8;function BAe(e){return typeof e=="function"}function go(e){return e==="indeterminate"}function k8(e){return go(e)?"indeterminate":e?"checked":"unchecked"}const _l=j.forwardRef(({className:e,...t},n)=>s.jsx(l2,{ref:n,className:Ee("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(C8,{className:Ee("flex items-center justify-center text-current"),children:s.jsx(KN,{className:"h-4 w-4"})})}));_l.displayName=l2.displayName;const E8=({photos:e,onPhotosChange:t,farmName:n})=>{const{toast:r}=at(),a=j.useRef(null),[i,o]=j.useState(!1),[l,c]=j.useState(!1),[u,d]=j.useState(null),[h,f]=j.useState({description:"",category:"general"}),m=N=>{const w=N.target.files;if(!w||w.length===0)return;const S=Array.from(w).map(_=>{const C=new FileReader,P={id:`photo_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,url:"",description:h.description||`Photo de ${n}`,category:h.category,uploadedAt:new Date().toISOString()};return C.onload=A=>{var E;P.url=(E=A.target)==null?void 0:E.result;const O=[...e,P];t(O)},C.readAsDataURL(_),P});f({description:"",category:"general"}),o(!1),r({title:"Photos ajoutées",description:`${S.length} photo(s) ajoutée(s) à l'exploitation ${n}`})},v=N=>{const w=e.filter(S=>S.id!==N);t(w),r({title:"Photo supprimée",description:"La photo a été supprimée avec succès"})},p=N=>{d(N),f({description:N.description,category:N.category}),c(!0)},g=()=>{if(!u)return;const N=e.map(w=>w.id===u.id?{...w,...h}:w);t(N),c(!1),d(null),f({description:"",category:"general"}),r({title:"Photo modifiée",description:"La photo a été modifiée avec succès"})},x=N=>({cheptel:"Cheptel",batiments:"Bâtiments",equipements:"Équipements",general:"Général"})[N],y=N=>({cheptel:"bg-blue-100 text-blue-800",batiments:"bg-green-100 text-green-800",equipements:"bg-orange-100 text-orange-800",general:"bg-gray-100 text-gray-800"})[N],b=e.reduce((N,w)=>(N[w.category]||(N[w.category]=[]),N[w.category].push(w),N),{});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Photos de l'exploitation"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Gérez les photos de votre exploitation, du cheptel et des équipements"})]}),s.jsxs(et,{open:i,onOpenChange:o,children:[s.jsx(jm,{asChild:!0,children:s.jsxs(L,{className:"gap-2",children:[s.jsx(lt,{className:"h-4 w-4"}),"Ajouter des photos"]})}),s.jsxs(Xe,{className:"max-w-md",children:[s.jsx(tt,{children:s.jsx(nt,{children:"Ajouter des photos"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(M,{htmlFor:"photo-description",children:"Description"}),s.jsx(J,{id:"photo-description",placeholder:"Description des photos",value:h.description,onChange:N=>f({...h,description:N.target.value})})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"photo-category",children:"Catégorie"}),s.jsxs(be,{value:h.category,onValueChange:N=>f({...h,category:N}),children:[s.jsx(xe,{children:s.jsx(je,{})}),s.jsxs(ye,{children:[s.jsx(q,{value:"cheptel",children:"Cheptel"}),s.jsx(q,{value:"batiments",children:"Bâtiments"}),s.jsx(q,{value:"equipements",children:"Équipements"}),s.jsx(q,{value:"general",children:"Général"})]})]})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"photo-files",children:"Sélectionner des photos"}),s.jsx(J,{id:"photo-files",type:"file",multiple:!0,accept:"image/*",ref:a,onChange:m,className:"cursor-pointer"})]})]})]})]})]}),e.length===0?s.jsx(re,{children:s.jsxs(se,{className:"p-8 text-center",children:[s.jsx(_u,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucune photo ajoutée"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Commencez par ajouter des photos de votre exploitation"})]})}):s.jsx("div",{className:"space-y-6",children:Object.entries(b).map(([N,w])=>s.jsxs(re,{children:[s.jsx(de,{children:s.jsxs(he,{className:"flex items-center gap-2",children:[s.jsx(ke,{className:y(N),children:x(N)}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",w.length," photo",w.length>1?"s":"",")"]})]})}),s.jsx(se,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:w.map(S=>s.jsxs("div",{className:"group relative",children:[s.jsxs("div",{className:"aspect-square rounded-lg overflow-hidden border bg-muted",children:[s.jsx("img",{src:S.url,alt:S.description,className:"w-full h-full object-cover"}),s.jsxs("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[s.jsx(L,{size:"sm",variant:"secondary",onClick:()=>d(S),children:s.jsx(Dn,{className:"h-4 w-4"})}),s.jsx(L,{size:"sm",variant:"secondary",onClick:()=>p(S),children:s.jsx(qt,{className:"h-4 w-4"})}),s.jsx(L,{size:"sm",variant:"destructive",onClick:()=>v(S.id),children:s.jsx(It,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-sm font-medium truncate",children:S.description}),s.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(S.uploadedAt).toLocaleDateString()})]})]},S.id))})})]},N))}),s.jsx(et,{open:l,onOpenChange:c,children:s.jsxs(Xe,{className:"max-w-md",children:[s.jsx(tt,{children:s.jsx(nt,{children:"Modifier la photo"})}),s.jsxs("div",{className:"space-y-4",children:[u&&s.jsx("div",{className:"aspect-square rounded-lg overflow-hidden border",children:s.jsx("img",{src:u.url,alt:u.description,className:"w-full h-full object-cover"})}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"edit-description",children:"Description"}),s.jsx(J,{id:"edit-description",value:h.description,onChange:N=>f({...h,description:N.target.value})})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"edit-category",children:"Catégorie"}),s.jsxs(be,{value:h.category,onValueChange:N=>f({...h,category:N}),children:[s.jsx(xe,{children:s.jsx(je,{})}),s.jsxs(ye,{children:[s.jsx(q,{value:"cheptel",children:"Cheptel"}),s.jsx(q,{value:"batiments",children:"Bâtiments"}),s.jsx(q,{value:"equipements",children:"Équipements"}),s.jsx(q,{value:"general",children:"Général"})]})]})]}),s.jsxs("div",{className:"flex gap-2 justify-end",children:[s.jsx(L,{variant:"outline",onClick:()=>c(!1),children:"Annuler"}),s.jsx(L,{onClick:g,children:"Enregistrer"})]})]})]})})]})},zAe=({open:e,onOpenChange:t})=>{var x,y,b,N,w,S;const{addFarm:n}=wn(),{settings:r}=Pt(),{toast:a}=at(),[i,o]=j.useState({name:"",owner:"",ownerIdNumber:"",address:"",coordinates:{latitude:0,longitude:0},phone:"",email:"",types:[],totalAnimals:0,animalDetails:[],veterinarian:"",notes:"",status:"active",registrationNumber:"",surfaceArea:0,buildingDetails:"",equipmentDetails:"",certifications:[],insuranceDetails:"",emergencyContact:{name:"",phone:"",relation:""},photos:[]}),[l,c]=j.useState({category:"",maleCount:0,femaleCount:0,breeds:[],ageGroups:[]});if(!r.farmManagement)return console.error("farmManagement settings not found, using defaults"),s.jsx(et,{open:e,onOpenChange:t,children:s.jsx(Xe,{children:s.jsxs(tt,{children:[s.jsx(nt,{children:"Erreur de configuration"}),s.jsx(Dt,{children:"Les paramètres de gestion des fermes ne sont pas configurés. Veuillez recharger la page ou vérifier les paramètres."})]})})});j.useEffect(()=>{e||(o({name:"",owner:"",ownerIdNumber:"",address:"",coordinates:{latitude:0,longitude:0},phone:"",email:"",types:[],totalAnimals:0,animalDetails:[],veterinarian:"",notes:"",status:"active",registrationNumber:"",surfaceArea:0,buildingDetails:"",equipmentDetails:"",certifications:[],insuranceDetails:"",emergencyContact:{name:"",phone:"",relation:""},photos:[]}),c({category:"",maleCount:0,femaleCount:0,breeds:[],ageGroups:[]}))},[e]);const u=(_,C)=>{if(_.includes(".")){const[P,A]=_.split(".");o(O=>{const E=O[P];return{...O,[P]:{...E,[A]:C}}})}else o(P=>({...P,[_]:C}))},d=_=>{o(C=>{var P;return{...C,types:(P=C.types)!=null&&P.includes(_)?C.types.filter(A=>A!==_):[...C.types||[],_]}})},h=_=>{o(C=>{var P;return{...C,certifications:(P=C.certifications)!=null&&P.includes(_)?C.certifications.filter(A=>A!==_):[...C.certifications||[],_]}})},f=()=>{if(!l.category){a({title:"Erreur",description:"Veuillez sélectionner une catégorie d'animal",variant:"destructive"});return}o(_=>({..._,animalDetails:[..._.animalDetails||[],{...l}]})),c({category:"",maleCount:0,femaleCount:0,breeds:[],ageGroups:[]})},m=_=>{o(C=>{var P;return{...C,animalDetails:((P=C.animalDetails)==null?void 0:P.filter((A,O)=>O!==_))||[]}})},v=_=>{c(C=>({...C,breeds:[...C.breeds,_]}))},p=_=>{c(C=>({...C,breeds:C.breeds.filter(P=>P!==_)}))},g=_=>{var P;if(_.preventDefault(),!i.name||!i.owner||!i.address||!((P=i.types)!=null&&P.length)){a({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires",variant:"destructive"});return}const C={name:i.name,owner:i.owner,ownerIdNumber:i.ownerIdNumber||"",address:i.address,coordinates:i.coordinates||{latitude:0,longitude:0},phone:i.phone||"",email:i.email||"",types:i.types||[],totalAnimals:(i.animalDetails||[]).reduce((A,O)=>A+O.maleCount+O.femaleCount,0),animalDetails:i.animalDetails||[],lastVisit:new Date().toISOString().split("T")[0],status:i.status||"active",veterinarian:i.veterinarian||"",notes:i.notes||"",registrationNumber:i.registrationNumber||"",surfaceArea:i.surfaceArea||0,buildingDetails:i.buildingDetails||"",equipmentDetails:i.equipmentDetails||"",certifications:i.certifications||[],insuranceDetails:i.insuranceDetails||"",emergencyContact:i.emergencyContact||{name:"",phone:"",relation:""}};n(C),a({title:"Succès",description:"Nouvelle exploitation créée avec succès"}),t(!1)};return s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Xe,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(tt,{children:[s.jsx(nt,{children:"Nouvelle Exploitation Agricole"}),s.jsx(Dt,{children:"Créez une nouvelle exploitation agricole avec toutes les informations détaillées"})]}),s.jsxs("form",{onSubmit:g,className:"space-y-6",children:[s.jsxs(re,{children:[s.jsx(de,{children:s.jsx(he,{children:"Informations générales"})}),s.jsxs(se,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(M,{htmlFor:"name",children:"Nom de l'exploitation *"}),s.jsx(J,{id:"name",value:i.name||"",onChange:_=>u("name",_.target.value),placeholder:"Nom de l'exploitation"})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"owner",children:"Propriétaire *"}),s.jsx(J,{id:"owner",value:i.owner||"",onChange:_=>u("owner",_.target.value),placeholder:"Nom du propriétaire"})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"ownerIdNumber",children:"N° pièce d'identité du propriétaire"}),s.jsx(J,{id:"ownerIdNumber",value:i.ownerIdNumber||"",onChange:_=>u("ownerIdNumber",_.target.value),placeholder:"Numéro de carte d'identité, passeport, etc."})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(M,{htmlFor:"address",children:"Adresse *"}),s.jsx(J,{id:"address",value:i.address||"",onChange:_=>u("address",_.target.value),placeholder:"Adresse complète"})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"latitude",children:"Latitude"}),s.jsx(J,{id:"latitude",type:"number",step:"0.0001",value:((x=i.coordinates)==null?void 0:x.latitude)||"",onChange:_=>u("coordinates.latitude",parseFloat(_.target.value)||0),placeholder:"47.9056"})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"longitude",children:"Longitude"}),s.jsx(J,{id:"longitude",type:"number",step:"0.0001",value:((y=i.coordinates)==null?void 0:y.longitude)||"",onChange:_=>u("coordinates.longitude",parseFloat(_.target.value)||0),placeholder:"1.9190"})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"phone",children:"Téléphone"}),s.jsx(J,{id:"phone",value:i.phone||"",onChange:_=>u("phone",_.target.value),placeholder:"Téléphone"})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"email",children:"Email"}),s.jsx(J,{id:"email",type:"email",value:i.email||"",onChange:_=>u("email",_.target.value),placeholder:"Email"})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"veterinarian",children:"Vétérinaire responsable"}),s.jsx(J,{id:"veterinarian",value:i.veterinarian||"",onChange:_=>u("veterinarian",_.target.value),placeholder:"Vétérinaire"})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"status",children:"Statut"}),s.jsxs(be,{value:i.status,onValueChange:_=>u("status",_),children:[s.jsx(xe,{children:s.jsx(je,{})}),s.jsxs(ye,{children:[s.jsx(q,{value:"active",children:"Active"}),s.jsx(q,{value:"attention",children:"Attention"}),s.jsx(q,{value:"urgent",children:"Urgent"})]})]})]})]})]}),s.jsxs(re,{children:[s.jsx(de,{children:s.jsx(he,{children:"Types d'élevage *"})}),s.jsx(se,{children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:r.farmManagement.farmTypes.map(_=>{var C;return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(_l,{id:`type-${_}`,checked:((C=i.types)==null?void 0:C.includes(_))||!1,onCheckedChange:()=>d(_)}),s.jsx(M,{htmlFor:`type-${_}`,children:_})]},_)})})})]}),s.jsxs(re,{children:[s.jsx(de,{children:s.jsx(he,{children:"Détails du cheptel"})}),s.jsxs(se,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx(M,{children:"Catégorie"}),s.jsxs(be,{value:l.category,onValueChange:_=>c(C=>({...C,category:_})),children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Sélectionner"})}),s.jsx(ye,{children:r.farmManagement.animalCategories.map(_=>s.jsx(q,{value:_,children:_},_))})]})]}),s.jsxs("div",{children:[s.jsx(M,{children:"Mâles"}),s.jsx(J,{type:"number",value:l.maleCount,onChange:_=>c(C=>({...C,maleCount:parseInt(_.target.value)||0})),placeholder:"0"})]}),s.jsxs("div",{children:[s.jsx(M,{children:"Femelles"}),s.jsx(J,{type:"number",value:l.femaleCount,onChange:_=>c(C=>({...C,femaleCount:parseInt(_.target.value)||0})),placeholder:"0"})]}),s.jsx("div",{className:"flex items-end",children:s.jsx(L,{type:"button",onClick:f,className:"w-full",children:"Ajouter"})})]}),l.category&&s.jsxs("div",{className:"p-4 border rounded-lg",children:[s.jsxs(M,{children:["Races pour ",l.category]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mt-2",children:(b=r.farmManagement.breedsByCategory[l.category])==null?void 0:b.map(_=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(_l,{id:`breed-${_}`,checked:l.breeds.includes(_),onCheckedChange:()=>{l.breeds.includes(_)?p(_):v(_)}}),s.jsx(M,{htmlFor:`breed-${_}`,children:_})]},_))})]}),i.animalDetails&&i.animalDetails.length>0&&s.jsxs("div",{className:"p-4 border rounded-lg",children:[s.jsx(M,{children:"Cheptel configuré"}),s.jsx("div",{className:"mt-2 space-y-2",children:i.animalDetails.map((_,C)=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[s.jsxs("span",{children:[s.jsx(ke,{variant:"secondary",children:_.category}),s.jsxs("span",{className:"ml-2",children:[_.maleCount," mâles, ",_.femaleCount," femelles"]}),_.breeds.length>0&&s.jsxs("span",{className:"ml-2 text-sm text-gray-600",children:["Races: ",_.breeds.join(", ")]})]}),s.jsx(L,{type:"button",variant:"outline",size:"sm",onClick:()=>m(C),children:"Supprimer"})]},C))})]})]})]}),s.jsxs(re,{children:[s.jsx(de,{children:s.jsx(he,{children:"Informations administratives"})}),s.jsxs(se,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(M,{htmlFor:"registrationNumber",children:"Numéro d'immatriculation"}),s.jsx(J,{id:"registrationNumber",value:i.registrationNumber||"",onChange:_=>u("registrationNumber",_.target.value),placeholder:"Numéro d'immatriculation"})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"surfaceArea",children:"Surface (hectares)"}),s.jsx(J,{id:"surfaceArea",type:"number",step:"0.1",value:i.surfaceArea||"",onChange:_=>u("surfaceArea",parseFloat(_.target.value)||0),placeholder:"Surface en hectares"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(M,{htmlFor:"buildingDetails",children:"Détails des bâtiments"}),s.jsx(We,{id:"buildingDetails",value:i.buildingDetails||"",onChange:_=>u("buildingDetails",_.target.value),placeholder:"Description des bâtiments, étables, etc."})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(M,{htmlFor:"equipmentDetails",children:"Équipements"}),s.jsx(We,{id:"equipmentDetails",value:i.equipmentDetails||"",onChange:_=>u("equipmentDetails",_.target.value),placeholder:"Liste des équipements disponibles"})]})]})]}),s.jsxs(re,{children:[s.jsx(de,{children:s.jsx(he,{children:"Certifications"})}),s.jsx(se,{children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:r.farmManagement.certificationTypes.map(_=>{var C;return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(_l,{id:`cert-${_}`,checked:((C=i.certifications)==null?void 0:C.includes(_))||!1,onCheckedChange:()=>h(_)}),s.jsx(M,{htmlFor:`cert-${_}`,children:_})]},_)})})})]}),s.jsxs(re,{children:[s.jsx(de,{children:s.jsx(he,{children:"Assurance et contact d'urgence"})}),s.jsxs(se,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(M,{htmlFor:"insuranceDetails",children:"Détails de l'assurance"}),s.jsx(J,{id:"insuranceDetails",value:i.insuranceDetails||"",onChange:_=>u("insuranceDetails",_.target.value),placeholder:"Compagnie d'assurance et numéro de police"})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"emergencyName",children:"Nom du contact d'urgence"}),s.jsx(J,{id:"emergencyName",value:((N=i.emergencyContact)==null?void 0:N.name)||"",onChange:_=>u("emergencyContact.name",_.target.value),placeholder:"Nom du contact"})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"emergencyPhone",children:"Téléphone d'urgence"}),s.jsx(J,{id:"emergencyPhone",value:((w=i.emergencyContact)==null?void 0:w.phone)||"",onChange:_=>u("emergencyContact.phone",_.target.value),placeholder:"Téléphone"})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"emergencyRelation",children:"Relation"}),s.jsx(J,{id:"emergencyRelation",value:((S=i.emergencyContact)==null?void 0:S.relation)||"",onChange:_=>u("emergencyContact.relation",_.target.value),placeholder:"Relation (époux, fils, etc.)"})]})]})]}),s.jsxs(re,{children:[s.jsx(de,{children:s.jsx(he,{children:"Photos de l'exploitation"})}),s.jsx(se,{children:s.jsx(E8,{photos:i.photos||[],onPhotosChange:_=>u("photos",_),farmName:i.name||"Nouvelle exploitation"})})]}),s.jsxs(re,{children:[s.jsx(de,{children:s.jsx(he,{children:"Notes complémentaires"})}),s.jsx(se,{children:s.jsx(We,{value:i.notes||"",onChange:_=>u("notes",_.target.value),placeholder:"Notes additionnelles sur l'exploitation...",rows:3})})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(L,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsx(L,{type:"submit",children:"Créer l'exploitation"})]})]})]})})},VAe=({open:e,onOpenChange:t,farmId:n,farmName:r})=>{const{addFarmIntervention:a,farms:i}=wn(),{toast:o}=at(),[l,c]=j.useState({farmId:"",farmName:"",date:"",type:"",animals:"",veterinarian:"",description:"",status:"scheduled",followUp:"",cost:"",notes:""});j.useEffect(()=>{if(e){const f=new Date().toISOString().split("T")[0];c({farmId:(n==null?void 0:n.toString())||"",farmName:r||"",date:f,type:"",animals:"",veterinarian:"",description:"",status:"scheduled",followUp:"",cost:"",notes:""})}},[e,n,r]);const u=(f,m)=>{c(v=>({...v,[f]:m}))},{settings:d}=Pt(),h=f=>{if(f.preventDefault(),!l.farmId||!l.date||!l.type||!l.description){o({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires",variant:"destructive"});return}const m=i.find(p=>p.id===parseInt(l.farmId));if(!m){o({title:"Erreur",description:"Exploitation non trouvée",variant:"destructive"});return}const v={farmId:parseInt(l.farmId),farmName:m.name,date:l.date,type:l.type,animals:l.animals,veterinarian:l.veterinarian,description:l.description,status:l.status,followUp:l.followUp,cost:l.cost?parseFloat(l.cost):void 0,notes:l.notes};a(v),o({title:"Succès",description:"Intervention programmée avec succès"}),t(!1)};return s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Xe,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(tt,{children:[s.jsx(nt,{children:"Nouvelle Intervention"}),s.jsx(Dt,{children:"Programmez une nouvelle intervention vétérinaire"})]}),s.jsxs("form",{onSubmit:h,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"farmId",children:"Exploitation *"}),s.jsxs(be,{value:l.farmId,onValueChange:f=>{const m=i.find(v=>v.id===parseInt(f));u("farmId",f),u("farmName",(m==null?void 0:m.name)||"")},children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Sélectionner une exploitation"})}),s.jsx(ye,{children:i.map(f=>s.jsx(q,{value:f.id.toString(),children:f.name},f.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"date",children:"Date *"}),s.jsx(J,{id:"date",type:"date",value:l.date,onChange:f=>u("date",f.target.value),required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"type",children:"Type d'intervention *"}),s.jsxs(be,{value:l.type,onValueChange:f=>u("type",f),children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Sélectionner un type"})}),s.jsxs(ye,{children:[s.jsx(q,{value:"vaccination",children:"Vaccination"}),s.jsx(q,{value:"controle",children:"Contrôle sanitaire"}),s.jsx(q,{value:"urgence",children:"Urgence"}),s.jsx(q,{value:"chirurgie",children:"Chirurgie"}),s.jsx(q,{value:"prevention",children:"Prévention"}),s.jsx(q,{value:"consultation",children:"Consultation"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"status",children:"Statut"}),s.jsxs(be,{value:l.status,onValueChange:f=>u("status",f),children:[s.jsx(xe,{children:s.jsx(je,{})}),s.jsxs(ye,{children:[s.jsx(q,{value:"scheduled",children:"Programmée"}),s.jsx(q,{value:"ongoing",children:"En cours"}),s.jsx(q,{value:"completed",children:"Terminée"}),s.jsx(q,{value:"cancelled",children:"Annulée"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"animals",children:"Animaux concernés"}),s.jsx(J,{id:"animals",value:l.animals,onChange:f=>u("animals",f.target.value),placeholder:"15 bovins, 50 poules..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"veterinarian",children:"Vétérinaire"}),s.jsx(J,{id:"veterinarian",value:l.veterinarian,onChange:f=>u("veterinarian",f.target.value),placeholder:"Dr. Dupont"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"description",children:"Description *"}),s.jsx(We,{id:"description",value:l.description,onChange:f=>u("description",f.target.value),placeholder:"Détails de l'intervention...",rows:3,required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(M,{htmlFor:"cost",children:["Coût (",d.currency,")"]}),s.jsx(J,{id:"cost",type:"number",value:l.cost,onChange:f=>u("cost",f.target.value),placeholder:"0.00",min:"0",step:"0.01"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"followUp",children:"Suivi"}),s.jsx(J,{id:"followUp",value:l.followUp,onChange:f=>u("followUp",f.target.value),placeholder:"Contrôle dans 6 mois"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"notes",children:"Notes"}),s.jsx(We,{id:"notes",value:l.notes,onChange:f=>u("notes",f.target.value),placeholder:"Informations complémentaires...",rows:2})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(L,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsx(L,{type:"submit",children:"Programmer Intervention"})]})]})]})})},qAe=({farm:e,open:t,onOpenChange:n,onEdit:r,onNewIntervention:a})=>{var u;const{getFarmInterventionsByFarmId:i}=wn();if(!e)return null;const o=i(e.id),l={active:"bg-green-100 text-green-800",attention:"bg-yellow-100 text-yellow-800",urgent:"bg-red-100 text-red-800"},c=d=>{switch(d){case"active":return s.jsx(Bn,{className:"h-4 w-4"});case"attention":return s.jsx(pn,{className:"h-4 w-4"});case"urgent":return s.jsx(pn,{className:"h-4 w-4 text-red-600"});default:return s.jsx(tn,{className:"h-4 w-4"})}};return s.jsx(et,{open:t,onOpenChange:n,children:s.jsxs(Xe,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(tt,{children:[s.jsxs(nt,{className:"flex items-center gap-2",children:[c(e.status),e.name,s.jsx(ke,{className:l[e.status],children:e.status==="active"?"Actif":e.status==="attention"?"Attention":"Urgent"})]}),s.jsx(Dt,{children:"Détails complets de l'exploitation agricole"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(re,{children:[s.jsx(de,{children:s.jsxs(he,{className:"flex items-center gap-2",children:[s.jsx(SU,{className:"h-5 w-5"}),"Informations Générales"]})}),s.jsxs(se,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Propriétaire"}),s.jsx("p",{className:"font-medium",children:e.owner})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Types d'élevage"}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:(u=e.types)==null?void 0:u.map(d=>s.jsx(ke,{variant:"secondary",children:d},d))})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Nombre total d'animaux"}),s.jsx("p",{className:"font-medium",children:e.totalAnimals})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Vétérinaire"}),s.jsx("p",{className:"font-medium",children:e.veterinarian||"Non assigné"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Dernière visite"}),s.jsx("p",{className:"font-medium",children:ho(e.lastVisit)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Date de création"}),s.jsx("p",{className:"font-medium",children:ho(e.createdAt)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[s.jsx(ud,{className:"h-3 w-3"}),"Adresse"]}),s.jsx("p",{className:"font-medium",children:e.address})]}),e.coordinates&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Coordonnées GPS"}),s.jsxs("p",{className:"font-mono text-sm",children:[e.coordinates.latitude.toFixed(4),", ",e.coordinates.longitude.toFixed(4)]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[s.jsx(sf,{className:"h-3 w-3"}),"Téléphone"]}),s.jsx("p",{className:"font-medium",children:e.phone||"Non renseigné"})]}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[s.jsx(ux,{className:"h-3 w-3"}),"Email"]}),s.jsx("p",{className:"font-medium",children:e.email||"Non renseigné"})]})]})]})]}),e.animalDetails&&e.animalDetails.length>0&&s.jsxs(re,{children:[s.jsx(de,{children:s.jsxs(he,{className:"flex items-center gap-2",children:[s.jsx(_U,{className:"h-5 w-5"}),"Détails du Cheptel"]})}),s.jsx(se,{children:s.jsx("div",{className:"space-y-3",children:e.animalDetails.map((d,h)=>s.jsxs("div",{className:"p-3 border rounded-lg bg-muted/30",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(ke,{variant:"secondary",children:d.category}),s.jsxs("span",{className:"text-sm font-medium",children:["Total: ",d.maleCount+d.femaleCount," animaux"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Mâles:"})," ",d.maleCount]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Femelles:"})," ",d.femaleCount]}),d.breeds.length>0&&s.jsxs("div",{className:"md:col-span-3",children:[s.jsx("span",{className:"text-muted-foreground",children:"Races:"})," ",d.breeds.join(", ")]})]})]},h))})})]}),(e.registrationNumber||e.surfaceArea||e.buildingDetails||e.equipmentDetails)&&s.jsxs(re,{children:[s.jsx(de,{children:s.jsxs(he,{className:"flex items-center gap-2",children:[s.jsx(iU,{className:"h-5 w-5"}),"Informations Administratives"]})}),s.jsxs(se,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.registrationNumber&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"N° d'immatriculation"}),s.jsx("p",{className:"font-medium",children:e.registrationNumber})]}),e.surfaceArea&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Surface"}),s.jsxs("p",{className:"font-medium",children:[e.surfaceArea," hectares"]})]})]}),e.buildingDetails&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Bâtiments"}),s.jsx("p",{className:"font-medium",children:e.buildingDetails})]}),e.equipmentDetails&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Équipements"}),s.jsx("p",{className:"font-medium",children:e.equipmentDetails})]})]})]}),e.certifications&&e.certifications.length>0&&s.jsxs(re,{children:[s.jsx(de,{children:s.jsxs(he,{className:"flex items-center gap-2",children:[s.jsx(Gn,{className:"h-5 w-5"}),"Certifications"]})}),s.jsx(se,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:e.certifications.map(d=>s.jsx(ke,{variant:"outline",children:d},d))})})]}),(e.insuranceDetails||e.emergencyContact)&&s.jsxs(re,{children:[s.jsx(de,{children:s.jsxs(he,{className:"flex items-center gap-2",children:[s.jsx(Xr,{className:"h-5 w-5"}),"Assurance et Contact d'Urgence"]})}),s.jsxs(se,{className:"space-y-4",children:[e.insuranceDetails&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Assurance"}),s.jsx("p",{className:"font-medium",children:e.insuranceDetails})]}),e.emergencyContact&&e.emergencyContact.name&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Contact d'urgence"}),s.jsx("p",{className:"font-medium",children:e.emergencyContact.name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Téléphone"}),s.jsx("p",{className:"font-medium",children:e.emergencyContact.phone})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Relation"}),s.jsx("p",{className:"font-medium",children:e.emergencyContact.relation})]})]})]})]}),e.notes&&s.jsxs(re,{children:[s.jsx(de,{children:s.jsx(he,{children:"Notes"})}),s.jsx(se,{children:s.jsx("p",{className:"text-sm",children:e.notes})})]}),s.jsxs(re,{children:[s.jsx(de,{children:s.jsx(he,{children:"Détails du Cheptel"})}),s.jsx(se,{children:e.animalDetails&&e.animalDetails.length>0?s.jsx("div",{className:"space-y-4",children:e.animalDetails.map((d,h)=>s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h4",{className:"font-semibold text-lg",children:d.category}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ke,{variant:"secondary",children:[d.maleCount+d.femaleCount," animaux"]}),s.jsxs(ke,{variant:"outline",children:[d.maleCount," mâles"]}),s.jsxs(ke,{variant:"outline",children:[d.femaleCount," femelles"]})]})]}),d.breeds&&d.breeds.length>0&&s.jsxs("div",{className:"mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Races: "}),d.breeds.map((f,m)=>s.jsx(ke,{variant:"outline",className:"mr-1 text-xs",children:f},m))]}),d.ageGroups&&d.ageGroups.length>0&&s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Groupes d'âge: "}),d.ageGroups.map((f,m)=>s.jsx(ke,{variant:"outline",className:"mr-1 text-xs",children:f},m))]})]},h))}):s.jsx("p",{className:"text-muted-foreground",children:"Aucun détail de cheptel configuré pour cette exploitation"})})]}),s.jsxs(re,{children:[s.jsx(de,{children:s.jsx(he,{children:"Photos de l'exploitation"})}),s.jsx(se,{children:e.photos&&e.photos.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.photos.map(d=>s.jsxs("div",{className:"group relative",children:[s.jsxs("div",{className:"aspect-square rounded-lg overflow-hidden border bg-muted",children:[s.jsx("img",{src:d.url,alt:d.description,className:"w-full h-full object-cover"}),s.jsx("div",{className:"absolute top-2 right-2",children:s.jsx(ke,{variant:"secondary",className:"text-xs bg-black/70 text-white border-0",children:d.category==="cheptel"?"Cheptel":d.category==="batiments"?"Bâtiments":d.category==="equipements"?"Équipements":"Général"})})]}),s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-sm font-medium truncate",children:d.description}),s.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(d.uploadedAt).toLocaleDateString()})]})]},d.id))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(_u,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucune photo ajoutée"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Les photos peuvent être ajoutées lors de la modification de l'exploitation"})]})})]}),s.jsxs(Oa,{defaultValue:"interventions",className:"w-full",children:[s.jsx(Ys,{className:"grid w-full grid-cols-1",children:s.jsxs(bt,{value:"interventions",children:[s.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Interventions (",o.length,")"]})}),s.jsx(jt,{value:"interventions",className:"space-y-4",children:s.jsxs(re,{children:[s.jsx(de,{children:s.jsx(he,{children:"Interventions vétérinaires"})}),s.jsx(se,{children:o.length>0?s.jsx("div",{className:"space-y-2",children:o.map(d=>s.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:d.type}),s.jsx("span",{className:"text-sm text-muted-foreground ml-2",children:ho(d.date)})]}),s.jsx(ke,{variant:"outline",children:d.status})]},d.id))}):s.jsx("p",{className:"text-muted-foreground",children:"Aucune intervention enregistrée pour cette exploitation"})})]})})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[s.jsx(L,{onClick:a,variant:"outline",children:"Nouvelle Intervention"}),s.jsx(L,{onClick:r,children:"Modifier"})]})]})})},UAe=({open:e,onOpenChange:t,farm:n})=>{var y,b,N,w,S,_;const{updateFarm:r}=wn(),{settings:a}=Pt(),{toast:i}=at(),[o,l]=j.useState({name:"",owner:"",ownerIdNumber:"",address:"",coordinates:{latitude:0,longitude:0},phone:"",email:"",types:[],totalAnimals:0,animalDetails:[],veterinarian:"",notes:"",status:"active",registrationNumber:"",surfaceArea:0,buildingDetails:"",equipmentDetails:"",certifications:[],insuranceDetails:"",emergencyContact:{name:"",phone:"",relation:""}}),[c,u]=j.useState({category:"",maleCount:0,femaleCount:0,breeds:[],ageGroups:[]});if(!a.farmManagement)return console.error("farmManagement settings not found, using defaults"),s.jsx(et,{open:e,onOpenChange:t,children:s.jsx(Xe,{children:s.jsxs(tt,{children:[s.jsx(nt,{children:"Erreur de configuration"}),s.jsx(Dt,{children:"Les paramètres de gestion des fermes ne sont pas configurés. Veuillez recharger la page ou vérifier les paramètres."})]})})});j.useEffect(()=>{n&&e&&l({...n,coordinates:n.coordinates||{latitude:0,longitude:0},types:n.types||[],animalDetails:n.animalDetails||[],certifications:n.certifications||[],emergencyContact:n.emergencyContact||{name:"",phone:"",relation:""}})},[n,e]),j.useEffect(()=>{e||(l({name:"",owner:"",ownerIdNumber:"",address:"",coordinates:{latitude:0,longitude:0},phone:"",email:"",types:[],totalAnimals:0,animalDetails:[],veterinarian:"",notes:"",status:"active",registrationNumber:"",surfaceArea:0,buildingDetails:"",equipmentDetails:"",certifications:[],insuranceDetails:"",emergencyContact:{name:"",phone:"",relation:""}}),u({category:"",maleCount:0,femaleCount:0,breeds:[],ageGroups:[]}))},[e]);const d=(C,P)=>{if(C.includes(".")){const[A,O]=C.split(".");l(E=>({...E,[A]:{...E[A],[O]:P}}))}else l(A=>({...A,[C]:P}))},h=C=>{l(P=>{var A;return{...P,types:(A=P.types)!=null&&A.includes(C)?P.types.filter(O=>O!==C):[...P.types||[],C]}})},f=C=>{l(P=>{var A;return{...P,certifications:(A=P.certifications)!=null&&A.includes(C)?P.certifications.filter(O=>O!==C):[...P.certifications||[],C]}})},m=()=>{if(!c.category){i({title:"Erreur",description:"Veuillez sélectionner une catégorie d'animal",variant:"destructive"});return}l(C=>({...C,animalDetails:[...C.animalDetails||[],{...c}]})),u({category:"",maleCount:0,femaleCount:0,breeds:[],ageGroups:[]})},v=C=>{l(P=>{var A;return{...P,animalDetails:((A=P.animalDetails)==null?void 0:A.filter((O,E)=>E!==C))||[]}})},p=C=>{u(P=>({...P,breeds:[...P.breeds,C]}))},g=C=>{u(P=>({...P,breeds:P.breeds.filter(A=>A!==C)}))},x=C=>{var A;if(C.preventDefault(),!n)return;if(!o.name||!o.owner||!o.address||!((A=o.types)!=null&&A.length)){i({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires",variant:"destructive"});return}const P={...n,...o,coordinates:o.coordinates||{latitude:0,longitude:0},types:o.types||[],animalDetails:o.animalDetails||[],totalAnimals:(o.animalDetails||[]).reduce((O,E)=>O+E.maleCount+E.femaleCount,0),certifications:o.certifications||[],emergencyContact:o.emergencyContact||{name:"",phone:"",relation:""}};r(n.id,P),i({title:"Succès",description:"Exploitation mise à jour avec succès"}),t(!1)};return n?s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Xe,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(tt,{children:[s.jsx(nt,{children:"Modifier l'Exploitation"}),s.jsx(Dt,{children:"Modifiez les informations de l'exploitation agricole"})]}),s.jsxs("form",{onSubmit:x,className:"space-y-6",children:[s.jsxs(re,{children:[s.jsx(de,{children:s.jsx(he,{children:"Informations générales"})}),s.jsxs(se,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(M,{htmlFor:"name",children:"Nom de l'exploitation *"}),s.jsx(J,{id:"name",value:o.name||"",onChange:C=>d("name",C.target.value),placeholder:"Nom de l'exploitation"})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"owner",children:"Propriétaire *"}),s.jsx(J,{id:"owner",value:o.owner||"",onChange:C=>d("owner",C.target.value),placeholder:"Nom du propriétaire"})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"ownerIdNumber",children:"N° pièce d'identité du propriétaire"}),s.jsx(J,{id:"ownerIdNumber",value:o.ownerIdNumber||"",onChange:C=>d("ownerIdNumber",C.target.value),placeholder:"Numéro de carte d'identité, passeport, etc."})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(M,{htmlFor:"address",children:"Adresse *"}),s.jsx(J,{id:"address",value:o.address||"",onChange:C=>d("address",C.target.value),placeholder:"Adresse complète"})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"latitude",children:"Latitude"}),s.jsx(J,{id:"latitude",type:"number",step:"0.0001",value:((y=o.coordinates)==null?void 0:y.latitude)||"",onChange:C=>d("coordinates.latitude",parseFloat(C.target.value)||0),placeholder:"47.9056"})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"longitude",children:"Longitude"}),s.jsx(J,{id:"longitude",type:"number",step:"0.0001",value:((b=o.coordinates)==null?void 0:b.longitude)||"",onChange:C=>d("coordinates.longitude",parseFloat(C.target.value)||0),placeholder:"1.9190"})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"phone",children:"Téléphone"}),s.jsx(J,{id:"phone",value:o.phone||"",onChange:C=>d("phone",C.target.value),placeholder:"Téléphone"})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"email",children:"Email"}),s.jsx(J,{id:"email",type:"email",value:o.email||"",onChange:C=>d("email",C.target.value),placeholder:"Email"})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"veterinarian",children:"Vétérinaire responsable"}),s.jsx(J,{id:"veterinarian",value:o.veterinarian||"",onChange:C=>d("veterinarian",C.target.value),placeholder:"Vétérinaire"})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"status",children:"Statut"}),s.jsxs(be,{value:o.status,onValueChange:C=>d("status",C),children:[s.jsx(xe,{children:s.jsx(je,{})}),s.jsxs(ye,{children:[s.jsx(q,{value:"active",children:"Active"}),s.jsx(q,{value:"attention",children:"Attention"}),s.jsx(q,{value:"urgent",children:"Urgent"})]})]})]})]})]}),s.jsxs(re,{children:[s.jsx(de,{children:s.jsx(he,{children:"Types d'élevage *"})}),s.jsx(se,{children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:a.farmManagement.farmTypes.map(C=>{var P;return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(_l,{id:`type-${C}`,checked:((P=o.types)==null?void 0:P.includes(C))||!1,onCheckedChange:()=>h(C)}),s.jsx(M,{htmlFor:`type-${C}`,children:C})]},C)})})})]}),s.jsxs(re,{children:[s.jsx(de,{children:s.jsx(he,{children:"Détails du cheptel"})}),s.jsxs(se,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx(M,{children:"Catégorie"}),s.jsxs(be,{value:c.category,onValueChange:C=>u(P=>({...P,category:C})),children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Sélectionner"})}),s.jsx(ye,{children:a.farmManagement.animalCategories.map(C=>s.jsx(q,{value:C,children:C},C))})]})]}),s.jsxs("div",{children:[s.jsx(M,{children:"Mâles"}),s.jsx(J,{type:"number",value:c.maleCount,onChange:C=>u(P=>({...P,maleCount:parseInt(C.target.value)||0})),placeholder:"0"})]}),s.jsxs("div",{children:[s.jsx(M,{children:"Femelles"}),s.jsx(J,{type:"number",value:c.femaleCount,onChange:C=>u(P=>({...P,femaleCount:parseInt(C.target.value)||0})),placeholder:"0"})]}),s.jsx("div",{className:"flex items-end",children:s.jsx(L,{type:"button",onClick:m,className:"w-full",children:"Ajouter"})})]}),c.category&&s.jsxs("div",{className:"p-4 border rounded-lg",children:[s.jsxs(M,{children:["Races pour ",c.category]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mt-2",children:(N=a.farmManagement.breedsByCategory[c.category])==null?void 0:N.map(C=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(_l,{id:`breed-${C}`,checked:c.breeds.includes(C),onCheckedChange:()=>{c.breeds.includes(C)?g(C):p(C)}}),s.jsx(M,{htmlFor:`breed-${C}`,children:C})]},C))})]}),o.animalDetails&&o.animalDetails.length>0&&s.jsxs("div",{className:"p-4 border rounded-lg",children:[s.jsx(M,{children:"Cheptel configuré"}),s.jsx("div",{className:"mt-2 space-y-2",children:o.animalDetails.map((C,P)=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[s.jsxs("span",{children:[s.jsx(ke,{variant:"secondary",children:C.category}),s.jsxs("span",{className:"ml-2",children:[C.maleCount," mâles, ",C.femaleCount," femelles"]}),C.breeds.length>0&&s.jsxs("span",{className:"ml-2 text-sm text-gray-600",children:["Races: ",C.breeds.join(", ")]})]}),s.jsx(L,{type:"button",variant:"outline",size:"sm",onClick:()=>v(P),children:"Supprimer"})]},P))})]})]})]}),s.jsxs(re,{children:[s.jsx(de,{children:s.jsx(he,{children:"Informations administratives"})}),s.jsxs(se,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(M,{htmlFor:"registrationNumber",children:"Numéro d'immatriculation"}),s.jsx(J,{id:"registrationNumber",value:o.registrationNumber||"",onChange:C=>d("registrationNumber",C.target.value),placeholder:"Numéro d'immatriculation"})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"surfaceArea",children:"Surface (hectares)"}),s.jsx(J,{id:"surfaceArea",type:"number",step:"0.1",value:o.surfaceArea||"",onChange:C=>d("surfaceArea",parseFloat(C.target.value)||0),placeholder:"Surface en hectares"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(M,{htmlFor:"buildingDetails",children:"Détails des bâtiments"}),s.jsx(We,{id:"buildingDetails",value:o.buildingDetails||"",onChange:C=>d("buildingDetails",C.target.value),placeholder:"Description des bâtiments, étables, etc."})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(M,{htmlFor:"equipmentDetails",children:"Équipements"}),s.jsx(We,{id:"equipmentDetails",value:o.equipmentDetails||"",onChange:C=>d("equipmentDetails",C.target.value),placeholder:"Liste des équipements disponibles"})]})]})]}),s.jsxs(re,{children:[s.jsx(de,{children:s.jsx(he,{children:"Certifications"})}),s.jsx(se,{children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:a.farmManagement.certificationTypes.map(C=>{var P;return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(_l,{id:`cert-${C}`,checked:((P=o.certifications)==null?void 0:P.includes(C))||!1,onCheckedChange:()=>f(C)}),s.jsx(M,{htmlFor:`cert-${C}`,children:C})]},C)})})})]}),s.jsxs(re,{children:[s.jsx(de,{children:s.jsx(he,{children:"Assurance et contact d'urgence"})}),s.jsxs(se,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(M,{htmlFor:"insuranceDetails",children:"Détails de l'assurance"}),s.jsx(J,{id:"insuranceDetails",value:o.insuranceDetails||"",onChange:C=>d("insuranceDetails",C.target.value),placeholder:"Compagnie d'assurance et numéro de police"})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"emergencyName",children:"Nom du contact d'urgence"}),s.jsx(J,{id:"emergencyName",value:((w=o.emergencyContact)==null?void 0:w.name)||"",onChange:C=>d("emergencyContact.name",C.target.value),placeholder:"Nom du contact"})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"emergencyPhone",children:"Téléphone d'urgence"}),s.jsx(J,{id:"emergencyPhone",value:((S=o.emergencyContact)==null?void 0:S.phone)||"",onChange:C=>d("emergencyContact.phone",C.target.value),placeholder:"Téléphone"})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"emergencyRelation",children:"Relation"}),s.jsx(J,{id:"emergencyRelation",value:((_=o.emergencyContact)==null?void 0:_.relation)||"",onChange:C=>d("emergencyContact.relation",C.target.value),placeholder:"Relation (époux, fils, etc.)"})]})]})]}),s.jsxs(re,{children:[s.jsx(de,{children:s.jsx(he,{children:"Photos de l'exploitation"})}),s.jsx(se,{children:s.jsx(E8,{photos:o.photos||[],onPhotosChange:C=>d("photos",C),farmName:o.name||"Exploitation"})})]}),s.jsxs(re,{children:[s.jsx(de,{children:s.jsx(he,{children:"Notes complémentaires"})}),s.jsx(se,{children:s.jsx(We,{value:o.notes||"",onChange:C=>d("notes",C.target.value),placeholder:"Notes additionnelles sur l'exploitation...",rows:3})})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(L,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsx(L,{type:"submit",children:"Mettre à jour l'exploitation"})]})]})]})}):null},WAe=({open:e,onOpenChange:t,intervention:n})=>{const{updateFarmIntervention:r,farms:a}=wn(),{toast:i}=at(),[o,l]=j.useState({farmId:"",type:"",date:"",animals:"",description:"",veterinarian:"",status:"scheduled",followUp:"",cost:""});j.useEffect(()=>{n&&e&&l({farmId:n.farmId.toString(),type:n.type,date:n.date,animals:n.animals,description:n.description,veterinarian:n.veterinarian,status:n.status,followUp:n.followUp||"",cost:n.cost||""})},[n,e]);const c=(h,f)=>{l(m=>({...m,[h]:f}))},u=h=>{if(h.preventDefault(),!n)return;if(!o.farmId||!o.type||!o.date||!o.animals||!o.description){i({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires",variant:"destructive"});return}const f={farmId:parseInt(o.farmId),type:o.type,date:o.date,animals:o.animals,description:o.description,veterinarian:o.veterinarian,status:o.status,followUp:o.followUp,cost:o.cost};r(n.id,f),i({title:"Succès",description:"Intervention mise à jour avec succès"}),t(!1)};if(!n)return null;const d=a.find(h=>h.id===parseInt(o.farmId));return s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Xe,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(tt,{children:[s.jsx(nt,{children:"Modifier l'Intervention"}),s.jsxs(Dt,{children:["Modifiez les informations de l'intervention du ",new Date(n.date).toLocaleDateString("fr-FR")]})]}),s.jsxs("form",{onSubmit:u,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Exploitation *"}),s.jsxs(be,{value:o.farmId,onValueChange:h=>c("farmId",h),children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Sélectionner l'exploitation"})}),s.jsx(ye,{children:a.map(h=>s.jsxs(q,{value:h.id.toString(),children:[h.name," - ",h.owner]},h.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Type d'intervention *"}),s.jsxs(be,{value:o.type,onValueChange:h=>c("type",h),children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Sélectionner le type"})}),s.jsxs(ye,{children:[s.jsx(q,{value:"vaccination",children:"Vaccination"}),s.jsx(q,{value:"controle",children:"Contrôle sanitaire"}),s.jsx(q,{value:"urgence",children:"Urgence"}),s.jsx(q,{value:"chirurgie",children:"Chirurgie"}),s.jsx(q,{value:"prevention",children:"Prévention"}),s.jsx(q,{value:"consultation",children:"Consultation"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"date",children:"Date *"}),s.jsx(J,{id:"date",type:"date",value:o.date,onChange:h=>c("date",h.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Statut"}),s.jsxs(be,{value:o.status,onValueChange:h=>c("status",h),children:[s.jsx(xe,{children:s.jsx(je,{})}),s.jsxs(ye,{children:[s.jsx(q,{value:"scheduled",children:"Programmé"}),s.jsx(q,{value:"ongoing",children:"En cours"}),s.jsx(q,{value:"completed",children:"Terminé"}),s.jsx(q,{value:"cancelled",children:"Annulé"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"animals",children:"Animaux concernés *"}),s.jsx(J,{id:"animals",value:o.animals,onChange:h=>c("animals",h.target.value),placeholder:"ex: 50 vaches, 100 porcs...",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"veterinarian",children:"Vétérinaire *"}),s.jsx(J,{id:"veterinarian",value:o.veterinarian,onChange:h=>c("veterinarian",h.target.value),required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"description",children:"Description *"}),s.jsx(We,{id:"description",value:o.description,onChange:h=>c("description",h.target.value),rows:3,placeholder:"Détails de l'intervention, observations, traitements...",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"followUp",children:"Suivi recommandé"}),s.jsx(We,{id:"followUp",value:o.followUp,onChange:h=>c("followUp",h.target.value),rows:2,placeholder:"Recommandations, prochain contrôle..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"cost",children:"Coût (€)"}),s.jsx(J,{id:"cost",type:"number",value:o.cost,onChange:h=>c("cost",h.target.value),min:"0",step:"0.01",placeholder:"0.00"})]})]}),d&&s.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[s.jsx("h4",{className:"font-medium mb-2",children:"Informations de l'exploitation"}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Nom:"})," ",d.name]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Propriétaire:"})," ",d.owner]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Type:"})," ",d.type]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Adresse:"})," ",d.address]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(L,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsx(L,{type:"submit",children:"Mettre à jour"})]})]})]})})},HAe=()=>{const{farms:e,farmInterventions:t,deleteFarm:n,deleteFarmIntervention:r,getFarmsByStatus:a,getUpcomingFarmInterventions:i}=wn(),{toast:o}=at(),{currentView:l}=sc("farms"),[c,u]=j.useState(""),[d,h]=j.useState("all"),[f,m]=j.useState(l),[v,p]=j.useState(!1),[g,x]=j.useState(!1),[y,b]=j.useState(!1),[N,w]=j.useState(!1),[S,_]=j.useState(!1),[C,P]=j.useState(null),[A,O]=j.useState(null),E=e.filter(T=>{var le,Z;const ce=T.name.toLowerCase().includes(c.toLowerCase())||T.owner.toLowerCase().includes(c.toLowerCase())||((le=T.types)==null?void 0:le.some(B=>B.toLowerCase().includes(c.toLowerCase())))||!1,me=d==="all"||((Z=T.types)==null?void 0:Z.includes(d))||!1;return ce&&me}),z={active:"bg-green-100 text-green-800",attention:"bg-yellow-100 text-yellow-800",urgent:"bg-red-100 text-red-800"},I={"Bovin laitier":"Élevage bovin laitier","Bovin viande":"Élevage bovin viande",Porcin:"Élevage porcin",Avicole:"Élevage avicole",Ovin:"Élevage ovin",Caprin:"Élevage caprin",Équin:"Élevage équin",Apiculture:"Apiculture",Aquaculture:"Aquaculture",Cuniculture:"Cuniculture",Mixte:"Élevage mixte"},W={vaccination:"Vaccination",controle:"Contrôle sanitaire",urgence:"Urgence",chirurgie:"Chirurgie",prevention:"Prévention",consultation:"Consultation"},V=T=>{P(T),b(!0)},H=T=>{P(T),w(!0)},k=T=>{confirm("Êtes-vous sûr de vouloir supprimer cette exploitation ?")&&(n(T),o({title:"Succès",description:"Exploitation supprimée"}))},D=T=>{x(!0)},X=T=>{confirm("Êtes-vous sûr de vouloir supprimer cette intervention ?")&&(r(T),o({title:"Succès",description:"Intervention supprimée"}))},Q=T=>{O(T),_(!0)},te=a("attention").length+a("urgent").length,ne=i();return s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-8 space-y-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Gestion des Exploitations"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Gérez les fermes, élevages et interventions vétérinaires"})]}),s.jsxs(L,{className:"gap-2 medical-glow w-full sm:w-auto",onClick:()=>p(!0),children:[s.jsx(lt,{className:"h-4 w-4"}),"Nouvelle Exploitation"]})]}),s.jsxs("div",{className:"grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4",children:[s.jsx(re,{children:s.jsxs(se,{className:"p-6 text-center",children:[s.jsx(wj,{className:"h-12 w-12 text-primary mx-auto mb-4"}),s.jsx("div",{className:"text-2xl font-bold",children:e.length}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Exploitations"})]})}),s.jsx(re,{children:s.jsxs(se,{className:"p-6 text-center",children:[s.jsx(pn,{className:"h-12 w-12 text-accent mx-auto mb-4"}),s.jsx("div",{className:"text-2xl font-bold",children:te}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Alertes actives"})]})}),s.jsx(re,{children:s.jsxs(se,{className:"p-6 text-center",children:[s.jsx(Ze,{className:"h-12 w-12 text-blue-600 mx-auto mb-4"}),s.jsx("div",{className:"text-2xl font-bold",children:ne.length}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Interventions à venir"})]})})]}),s.jsxs(re,{children:[s.jsx(de,{children:s.jsxs(he,{className:"flex items-center gap-2",children:[s.jsx(Co,{className:"h-5 w-5"}),"Rechercher et filtrer"]})}),s.jsx(se,{className:"space-y-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsx(J,{placeholder:"Rechercher par nom, propriétaire ou type...",value:c,onChange:T=>u(T.target.value),className:"w-full sm:max-w-md"}),s.jsxs(be,{value:d,onValueChange:h,children:[s.jsx(xe,{className:"w-full sm:w-48",children:s.jsx(je,{placeholder:"Type d'élevage"})}),s.jsxs(ye,{children:[s.jsx(q,{value:"all",children:"Tous types"}),s.jsx(q,{value:"Bovin laitier",children:"Élevage bovin laitier"}),s.jsx(q,{value:"Bovin viande",children:"Élevage bovin viande"}),s.jsx(q,{value:"Porcin",children:"Élevage porcin"}),s.jsx(q,{value:"Avicole",children:"Élevage avicole"}),s.jsx(q,{value:"Ovin",children:"Élevage ovin"}),s.jsx(q,{value:"Caprin",children:"Élevage caprin"}),s.jsx(q,{value:"Équin",children:"Élevage équin"}),s.jsx(q,{value:"Apiculture",children:"Apiculture"}),s.jsx(q,{value:"Aquaculture",children:"Aquaculture"}),s.jsx(q,{value:"Cuniculture",children:"Cuniculture"}),s.jsx(q,{value:"Mixte",children:"Élevage mixte"})]})]})]})})]}),s.jsxs(Oa,{defaultValue:"farms",className:"space-y-6",children:[s.jsxs(Ys,{className:"grid w-full grid-cols-2",children:[s.jsxs(bt,{value:"farms",className:"gap-2",children:[s.jsx(wj,{className:"h-4 w-4"}),"Exploitations"]}),s.jsxs(bt,{value:"interventions",className:"gap-2",children:[s.jsx(Ze,{className:"h-4 w-4"}),"Interventions"]})]}),s.jsxs(jt,{value:"farms",className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("h3",{className:"text-lg font-semibold",children:["Exploitations (",E.length,")"]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs(L,{size:"sm",variant:f==="cards"?"default":"outline",onClick:()=>m("cards"),className:"gap-2 flex-1 sm:flex-none",children:[s.jsx(yo,{className:"h-4 w-4"}),"Cartes"]}),s.jsxs(L,{size:"sm",variant:f==="table"?"default":"outline",onClick:()=>m("table"),className:"gap-2 flex-1 sm:flex-none",children:[s.jsx(di,{className:"h-4 w-4"}),"Tableau"]}),s.jsxs(L,{onClick:()=>x(!0),className:"gap-2 flex-1 sm:flex-none",children:[s.jsx(Hn,{className:"h-4 w-4"}),"Nouvelle Intervention"]})]})]}),E.length===0?s.jsx(re,{children:s.jsx(se,{className:"p-6 text-center text-muted-foreground",children:"Aucune exploitation trouvée"})}):f==="cards"?E.map(T=>{var ce;return s.jsx(re,{className:"card-hover",children:s.jsx(se,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row items-start justify-between gap-4",children:[s.jsxs("div",{className:"space-y-3 flex-1",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4",children:[s.jsx("h4",{className:"text-xl font-semibold",children:T.name}),s.jsx(ke,{variant:"outline",className:z[T.status],children:T.status==="active"?"Actif":T.status==="attention"?"Attention":"Urgent"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Propriétaire:"})," ",T.owner]}),s.jsxs("p",{className:"flex items-center gap-1",children:[s.jsx(ud,{className:"h-3 w-3"}),T.address]}),s.jsxs("p",{className:"flex items-center gap-1",children:[s.jsx(sf,{className:"h-3 w-3"}),T.phone]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Types:"}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:(ce=T.types)==null?void 0:ce.map(me=>s.jsx(ke,{variant:"secondary",className:"text-xs",children:I[me]||me},me))})]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Animaux:"})," ",T.totalAnimals]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Vétérinaire:"})," ",T.veterinarian]})]})]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Dernière visite: ",ho(T.lastVisit)]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(L,{size:"sm",variant:"outline",onClick:()=>V(T),children:s.jsx(Dn,{className:"h-4 w-4"})}),s.jsx(L,{size:"sm",variant:"outline",onClick:()=>H(T),children:s.jsx(qt,{className:"h-4 w-4"})}),s.jsx(L,{size:"sm",onClick:()=>D(),children:s.jsx(Hn,{className:"h-4 w-4"})}),s.jsx(L,{size:"sm",variant:"destructive",onClick:()=>k(T.id),children:s.jsx(It,{className:"h-4 w-4"})})]})]})})},T.id)}):s.jsx(re,{children:s.jsx(se,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full min-w-[600px]",children:[s.jsx("thead",{className:"border-b",children:s.jsxs("tr",{className:"text-left",children:[s.jsx("th",{className:"p-4 font-medium",children:"Exploitation"}),s.jsx("th",{className:"p-4 font-medium",children:"Propriétaire"}),s.jsx("th",{className:"p-4 font-medium",children:"Type"}),s.jsx("th",{className:"p-4 font-medium",children:"Statut"}),s.jsx("th",{className:"p-4 font-medium",children:"Animaux"}),s.jsx("th",{className:"p-4 font-medium",children:"Contact"}),s.jsx("th",{className:"p-4 font-medium",children:"Actions"})]})}),s.jsx("tbody",{children:E.map(T=>{var ce;return s.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[s.jsx("td",{className:"p-4",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:T.name}),s.jsx("div",{className:"text-sm text-muted-foreground",children:T.address})]})}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:T.owner}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Vét: ",T.veterinarian]})]})}),s.jsx("td",{className:"p-4",children:s.jsx("div",{className:"flex flex-wrap gap-1",children:(ce=T.types)==null?void 0:ce.map(me=>s.jsx(ke,{variant:"secondary",className:"text-xs",children:I[me]||me},me))})}),s.jsx("td",{className:"p-4",children:s.jsx(ke,{variant:"outline",className:z[T.status],children:T.status==="active"?"Actif":T.status==="attention"?"Attention":"Urgent"})}),s.jsx("td",{className:"p-4",children:T.totalAnimals}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(sf,{className:"h-3 w-3"}),T.phone]}),s.jsxs("div",{className:"text-muted-foreground",children:["Dernière visite: ",ho(T.lastVisit)]})]})}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.jsx(L,{size:"sm",variant:"outline",onClick:()=>V(T),children:s.jsx(Dn,{className:"h-4 w-4"})}),s.jsx(L,{size:"sm",variant:"outline",onClick:()=>H(T),children:s.jsx(qt,{className:"h-4 w-4"})}),s.jsx(L,{size:"sm",onClick:()=>D(),children:s.jsx(Hn,{className:"h-4 w-4"})}),s.jsx(L,{size:"sm",variant:"destructive",onClick:()=>k(T.id),children:s.jsx(It,{className:"h-4 w-4"})})]})})]},T.id)})})]})})})})]}),s.jsxs(jt,{value:"interventions",className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("h3",{className:"text-lg font-semibold",children:["Interventions récentes (",t.length,")"]}),s.jsxs(L,{onClick:()=>x(!0),className:"gap-2 w-full sm:w-auto",children:[s.jsx(Hn,{className:"h-4 w-4"}),"Nouvelle Intervention"]})]}),t.length===0?s.jsx(re,{children:s.jsx(se,{className:"p-6 text-center text-muted-foreground",children:"Aucune intervention enregistrée"})}):t.map(T=>s.jsx(re,{className:"card-hover",children:s.jsx(se,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex flex-col sm:flex-row items-start justify-between gap-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4",children:[s.jsx("h4",{className:"text-lg font-semibold",children:W[T.type]}),s.jsx(ke,{variant:"outline",className:T.status==="completed"?"bg-green-100 text-green-800":T.status==="ongoing"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800",children:T.status==="completed"?"Terminé":T.status==="ongoing"?"En cours":T.status==="scheduled"?"Programmé":"Annulé"})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-4 sm:gap-6 text-sm text-muted-foreground",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Ze,{className:"h-3 w-3"}),ho(T.date)]}),s.jsx("span",{children:T.farmName}),s.jsx("span",{children:T.veterinarian})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Animaux concernés:"})," ",T.animals]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Suivi:"})," ",T.followUp||"Aucun"]})]}),s.jsx("p",{className:"text-sm",children:T.description}),s.jsxs("div",{className:"flex flex-wrap gap-2 pt-2 border-t",children:[s.jsx(L,{size:"sm",variant:"outline",children:s.jsx(Dn,{className:"h-4 w-4"})}),s.jsx(L,{size:"sm",variant:"outline",onClick:()=>Q(T),children:s.jsx(qt,{className:"h-4 w-4"})}),T.status==="ongoing"&&s.jsx(L,{size:"sm",children:s.jsx(Hn,{className:"h-4 w-4"})}),s.jsx(L,{size:"sm",variant:"destructive",onClick:()=>X(T.id),children:s.jsx(It,{className:"h-4 w-4"})})]})]})})},T.id))]})]}),s.jsx(zAe,{open:v,onOpenChange:p}),s.jsx(VAe,{open:g,onOpenChange:x,farmId:C==null?void 0:C.id,farmName:C==null?void 0:C.name}),s.jsx(qAe,{farm:C,open:y,onOpenChange:b,onEdit:()=>H(C),onNewIntervention:()=>{b(!1),x(!0)}}),s.jsx(UAe,{farm:C,open:N,onOpenChange:w}),s.jsx(WAe,{intervention:A,open:S,onOpenChange:_})]})};function KAe({children:e,selectedAnimalId:t,open:n,onOpenChange:r}){const{data:a=[]}=hn(),{data:i=[]}=vn(),o=QZ(),{toast:l}=at(),{data:c=[],isLoading:u}=U3(),[d,h]=j.useState(!1),f=n!==void 0?n:d,m=r||h,[v,p]=j.useState({animalId:t||"",vaccineName:"",vaccineType:"",manufacturer:"",batchNumber:"",vaccinationDate:Ge(new Date,"yyyy-MM-dd"),nextDueDate:"",administeredBy:"",notes:""}),g=async b=>{var S,_,C,P;if(b.preventDefault(),!v.animalId||!v.vaccineName||!v.vaccinationDate){l({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires",variant:"destructive"});return}if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(v.animalId)){l({title:"Erreur",description:"ID d'animal invalide",variant:"destructive"});return}const w={animal_id:v.animalId,vaccine_name:v.vaccineName.trim(),vaccine_type:v.vaccineType||void 0,manufacturer:((S=v.manufacturer)==null?void 0:S.trim())||void 0,batch_number:((_=v.batchNumber)==null?void 0:_.trim())||void 0,vaccination_date:v.vaccinationDate,next_due_date:v.nextDueDate||void 0,administered_by:((C=v.administeredBy)==null?void 0:C.trim())||void 0,notes:((P=v.notes)==null?void 0:P.trim())||void 0};try{await o.mutateAsync(w),l({title:"Vaccination ajoutée",description:`La vaccination ${v.vaccineName} a été ajoutée avec succès`}),p({animalId:t||"",vaccineName:"",vaccineType:"",manufacturer:"",batchNumber:"",vaccinationDate:Ge(new Date,"yyyy-MM-dd"),nextDueDate:"",administeredBy:"",notes:""}),m(!1)}catch{l({title:"Erreur",description:"Impossible d'ajouter la vaccination",variant:"destructive"})}},x=a.find(b=>b.id===v.animalId),y=x?i.find(b=>b.id===x.client_id):null;return s.jsxs(et,{open:f,onOpenChange:m,children:[s.jsx(jm,{asChild:!0,children:e||s.jsxs(L,{className:"gap-2",children:[s.jsx(lt,{className:"h-4 w-4"}),"Nouvelle Vaccination"]})}),s.jsxs(Xe,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(tt,{children:s.jsxs(nt,{className:"flex items-center gap-2",children:[s.jsx(uo,{className:"h-5 w-5"}),"Nouvelle Vaccination"]})}),s.jsxs("form",{onSubmit:g,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"animal",children:"Animal *"}),s.jsxs(be,{value:v.animalId,onValueChange:b=>p({...v,animalId:b}),children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Sélectionnez un animal"})}),s.jsx(ye,{children:a.map(b=>{const N=i.find(w=>w.id===b.client_id);return s.jsxs(q,{value:b.id,children:[b.name," - ",b.species," (",N?`${N.first_name} ${N.last_name}`:"Client inconnu",")"]},b.id)})})]}),x&&y&&s.jsxs("p",{className:"text-sm text-gray-600",children:["Propriétaire: ",y.first_name," ",y.last_name]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"vaccineName",children:"Nom du vaccin *"}),s.jsx(J,{id:"vaccineName",value:v.vaccineName,onChange:b=>p({...v,vaccineName:b.target.value}),placeholder:"ex: DHPP, Rage, FVRCP...",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"vaccineType",children:"Type de vaccin"}),s.jsxs(be,{value:v.vaccineType,onValueChange:b=>p({...v,vaccineType:b}),children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Sélectionnez le type"})}),s.jsx(ye,{children:c.map(b=>s.jsx(q,{value:b,children:b},b))})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"manufacturer",children:"Fabricant"}),s.jsx(J,{id:"manufacturer",value:v.manufacturer,onChange:b=>p({...v,manufacturer:b.target.value}),placeholder:"ex: Zoetis, Virbac, Merial..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"batchNumber",children:"Numéro de lot"}),s.jsx(J,{id:"batchNumber",value:v.batchNumber,onChange:b=>p({...v,batchNumber:b.target.value}),placeholder:"Numéro de lot du vaccin"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"vaccinationDate",children:"Date de vaccination *"}),s.jsx(J,{id:"vaccinationDate",type:"date",value:v.vaccinationDate,onChange:b=>p({...v,vaccinationDate:b.target.value}),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"nextDueDate",children:"Prochain rappel"}),s.jsx(J,{id:"nextDueDate",type:"date",value:v.nextDueDate,onChange:b=>p({...v,nextDueDate:b.target.value}),min:v.vaccinationDate})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"notes",children:"Notes"}),s.jsx(We,{id:"notes",value:v.notes,onChange:b=>p({...v,notes:b.target.value}),placeholder:"Notes complémentaires...",rows:3})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(L,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Annuler"}),s.jsx(L,{type:"submit",disabled:o.isPending,children:o.isPending?"Ajout...":"Ajouter la vaccination"})]})]})]})]})}function jb({children:e,mode:t,protocol:n,open:r,onOpenChange:a}){var b;const i=eee(),o=tee(),{toast:l}=at(),{data:c=[],isLoading:u}=Io(),{data:d=[],isLoading:h}=U3(),[f,m]=j.useState(!1),v=r!==void 0?r:f,p=a||m,[g,x]=j.useState({species:(n==null?void 0:n.species)||"",vaccineName:(n==null?void 0:n.vaccine_name)||"",vaccineType:(n==null?void 0:n.vaccine_type)||"",ageRecommendation:(n==null?void 0:n.age_recommendation)||"",frequency:(n==null?void 0:n.frequency)||"",durationDays:((b=n==null?void 0:n.duration_days)==null?void 0:b.toString())||"",notes:(n==null?void 0:n.notes)||"",active:(n==null?void 0:n.active)??!0}),y=async N=>{if(N.preventDefault(),!g.species||!g.vaccineName||!g.vaccineType){l({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires",variant:"destructive"});return}try{const w={species:g.species,vaccine_name:g.vaccineName,vaccine_type:g.vaccineType,age_recommendation:g.ageRecommendation||void 0,frequency:g.frequency||void 0,duration_days:g.durationDays?parseInt(g.durationDays):void 0,notes:g.notes||void 0,active:g.active};t==="create"?(await i.mutateAsync(w),l({title:"Protocole créé",description:`Le protocole ${g.vaccineName} a été créé avec succès`})):n&&(await o.mutateAsync({id:n.id,data:w}),l({title:"Protocole modifié",description:`Le protocole ${g.vaccineName} a été modifié avec succès`})),t==="create"&&x({species:"",vaccineName:"",vaccineType:"",ageRecommendation:"",frequency:"",durationDays:"",notes:"",active:!0}),p(!1)}catch{l({title:"Erreur",description:`Impossible de ${t==="create"?"créer":"modifier"} le protocole`,variant:"destructive"})}};return s.jsxs(et,{open:v,onOpenChange:p,children:[s.jsx(jm,{asChild:!0,children:e||s.jsxs(L,{className:"gap-2",children:[s.jsx(lt,{className:"h-4 w-4"}),t==="create"?"Nouveau Protocole":"Modifier"]})}),s.jsxs(Xe,{className:"max-w-2xl",children:[s.jsx(tt,{children:s.jsxs(nt,{className:"flex items-center gap-2",children:[s.jsx(Gn,{className:"h-5 w-5"}),t==="create"?"Nouveau Protocole Vaccinal":"Modifier le Protocole"]})}),s.jsxs("form",{onSubmit:y,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"species",children:"Espèce *"}),s.jsxs(be,{value:g.species,onValueChange:N=>x({...g,species:N}),children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Sélectionnez l'espèce"})}),s.jsx(ye,{children:c.map(N=>s.jsx(q,{value:N,children:N},N))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"vaccineName",children:"Nom du vaccin *"}),s.jsx(J,{id:"vaccineName",value:g.vaccineName,onChange:N=>x({...g,vaccineName:N.target.value}),placeholder:"ex: DHPP, Rage, FVRCP...",required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"vaccineType",children:"Type de vaccin *"}),s.jsxs(be,{value:g.vaccineType,onValueChange:N=>x({...g,vaccineType:N}),children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Sélectionnez le type"})}),s.jsx(ye,{children:d.map(N=>s.jsx(q,{value:N,children:N},N))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"ageRecommendation",children:"Âge recommandé"}),s.jsx(J,{id:"ageRecommendation",value:g.ageRecommendation,onChange:N=>x({...g,ageRecommendation:N.target.value}),placeholder:"ex: 8 semaines, 3 mois..."})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"frequency",children:"Fréquence"}),s.jsx(J,{id:"frequency",value:g.frequency,onChange:N=>x({...g,frequency:N.target.value}),placeholder:"ex: Annuelle, Tous les 3 ans..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"durationDays",children:"Durée (jours)"}),s.jsx(J,{id:"durationDays",type:"number",value:g.durationDays,onChange:N=>x({...g,durationDays:N.target.value}),placeholder:"ex: 365, 1095...",min:"1"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"notes",children:"Notes"}),s.jsx(We,{id:"notes",value:g.notes,onChange:N=>x({...g,notes:N.target.value}),placeholder:"Informations complémentaires sur le protocole...",rows:3})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"active",checked:g.active,onChange:N=>x({...g,active:N.target.checked}),className:"rounded"}),s.jsx(M,{htmlFor:"active",children:"Protocole actif"})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(L,{type:"button",variant:"outline",onClick:()=>p(!1),children:"Annuler"}),s.jsx(L,{type:"submit",disabled:i.isPending||o.isPending,children:i.isPending||o.isPending?t==="create"?"Création...":"Modification...":t==="create"?"Créer le protocole":"Modifier le protocole"})]})]})]})]})}function GAe({animalId:e}){const{settings:t}=Pt(),{data:n}=hn(),{data:r}=vn(),{data:a}=Xl(),i=JSON.parse(localStorage.getItem("vetpro-veterinarians")||"[]"),o=n==null?void 0:n.find(h=>h.id===e),l=o?r==null?void 0:r.find(h=>h.id===o.client_id):null,c=(a==null?void 0:a.filter(h=>h.animal_id===e))||[],u=h=>{const f=new Date(h),m=new Date;if(isNaN(f.getTime()))return"N/A";let v=m.getFullYear()-f.getFullYear(),p=m.getMonth()-f.getMonth(),g=m.getDate()-f.getDate();if(g<0){p--;const b=new Date(m.getFullYear(),m.getMonth(),0);g+=b.getDate()}p<0&&(v--,p+=12);const x=Math.floor(g/7),y=[];return v>0&&y.push(`${v} an${v>1?"s":""}`),p>0&&y.push(`${p} mois`),x>0&&y.push(`${x} semain${x>1?"es":""}`),y.join(", ")||"0 jour"},d=()=>{if(!o||!l){alert("Données animal ou client manquantes");return}try{const h=window.open("",`vaccination_certificate_${o.id}`,"height=800,width=800");if(!h){alert("L'impression a été bloquée par le navigateur. Veuillez autoriser les popups pour ce site.");return}const f=`
        <!DOCTYPE html>
        <html>
          <head>
            <title>Certificat de Vaccination - ${o.name}</title>
            <style>
              body {
                font-family: Arial, sans-serif;
                margin: 20px;
                line-height: 1.6;
                color: #333;
              }
              .header {
                text-align: center;
                border-bottom: 3px solid #2c5530;
                padding-bottom: 20px;
                margin-bottom: 30px;
              }
              .header h1 {
                color: #2c5530;
                font-size: 32px;
                margin: 10px 0;
                font-weight: bold;
              }
              .clinic-info {
                margin-bottom: 30px;
                padding: 15px;
                background-color: #f8f9fa;
                border-radius: 8px;
              }
              .clinic-info img {
                height: 60px;
                margin-bottom: 10px;
              }
              .clinic-info h2 {
                color: #2c5530;
                margin: 10px 0;
              }
              .qr-section {
                float: right;
                margin-left: 20px;
              }
              .animal-info {
                clear: both;
                margin-bottom: 30px;
                padding: 20px;
                border: 2px solid #2c5530;
                border-radius: 8px;
              }
              .animal-info h2 {
                color: #2c5530;
                border-bottom: 2px solid #2c5530;
                padding-bottom: 10px;
                margin-bottom: 15px;
                font-size: 24px;
              }
              .animal-photo {
                text-align: center;
                margin-bottom: 20px;
              }
              .animal-photo img {
                width: 120px;
                height: 120px;
                object-fit: cover;
                border-radius: 50%;
                border: 3px solid #2c5530;
              }
              .info-grid {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 15px;
                margin-bottom: 20px;
              }
              .info-item {
                display: flex;
                align-items: center;
              }
              .info-label {
                font-weight: bold;
                min-width: 120px;
                color: #2c5530;
              }
              .info-value {
                color: #666;
              }
              .vaccinations-section {
                margin-bottom: 30px;
              }
              .vaccinations-section h2 {
                color: #2c5530;
                border-bottom: 2px solid #2c5530;
                padding-bottom: 10px;
                margin-bottom: 20px;
                font-size: 24px;
              }
              .vaccination-card {
                border: 1px solid #ddd;
                border-radius: 8px;
                margin-bottom: 15px;
                padding: 15px;
                background-color: #fdfdfd;
              }
              .vaccination-card h3 {
                color: #2c5530;
                margin: 0 0 10px 0;
                font-size: 18px;
              }
              .vaccination-details {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 15px;
              }
              .vaccination-item {
                display: flex;
                align-items: center;
              }
              .vaccination-label {
                font-weight: bold;
                min-width: 140px;
                color: #555;
              }
              .vaccination-value {
                color: #666;
              }
              .vets-info {
                margin-bottom: 30px;
                padding: 15px;
                background-color: #f8f9fa;
                border-radius: 8px;
              }
              .vets-info h2 {
                color: #2c5530;
                margin-bottom: 15px;
              }
              .vet-item {
                margin-bottom: 8px;
                color: #666;
              }
              .footer {
                text-align: center;
                margin-top: 40px;
                padding-top: 20px;
                border-top: 1px solid #ddd;
                color: #888;
                font-size: 12px;
              }
              .no-vaccinations {
                text-align: center;
                color: #666;
                font-style: italic;
                padding: 40px;
                border: 2px dashed #ddd;
                border-radius: 8px;
              }
              
              @media print {
                body { margin: 0; }
                .no-print { display: none; }
              }
            </style>
          </head>
          <body>
            <div class="header">
              ${t.logo?`<img src="${t.logo}" alt="Logo clinique" />`:""}
              <h1>CERTIFICAT DE VACCINATION</h1>
              <div class="qr-section">
                <canvas id="qrcode" width="100" height="100"></canvas>
              </div>
            </div>

            ${t.showClinicInfo?`
            <div class="clinic-info">
              <h2>${t.clinicName||"Clinique Vétérinaire"}</h2>
              <p><strong>Adresse:</strong> ${t.address||"N/A"}</p>
              <p><strong>Téléphone:</strong> ${t.phone||"N/A"} | <strong>Email:</strong> ${t.email||"N/A"}</p>
              ${t.website?`<p><strong>Site web:</strong> ${t.website}</p>`:""}
            </div>
            `:""}

            ${t.showVetsInfo&&i.length>0?`
            <div class="vets-info">
              <h2>Équipe Vétérinaire</h2>
              ${i.map(m=>`
                <div class="vet-item">
                  <strong>${m.title||"Dr."} ${m.name}</strong>
                  ${m.specialty?` - ${m.specialty}`:""}
                </div>
              `).join("")}
            </div>
            `:""}

            <div class="animal-info">
              <h2>Informations de l'Animal</h2>
              
              ${o.photo_url?`
              <div class="animal-photo">
                <img src="${o.photo_url}" alt="Photo de ${o.name}" />
              </div>
              `:""}

              <div class="info-grid">
                <div class="info-item">
                  <span class="info-label">Nom:</span>
                  <span class="info-value">${o.name}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Espèce:</span>
                  <span class="info-value">${o.species}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Race:</span>
                  <span class="info-value">${o.breed||"N/A"}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Âge:</span>
                  <span class="info-value">${o.birth_date?u(o.birth_date):"N/A"}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Sexe:</span>
                  <span class="info-value">${o.sex||"N/A"}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Poids:</span>
                  <span class="info-value">${o.weight?o.weight+" kg":"N/A"}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Propriétaire:</span>
                  <span class="info-value">${l.first_name} ${l.last_name}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Contact:</span>
                  <span class="info-value">${l.phone||l.email||"N/A"}</span>
                </div>
              </div>
            </div>

            <div class="vaccinations-section">
              <h2>Historique des Vaccinations</h2>
              
              ${c.length>0?c.map(m=>`
                  <div class="vaccination-card">
                    <h3>${m.vaccine_name}</h3>
                    <div class="vaccination-details">
                      <div class="vaccination-item">
                        <span class="vaccination-label">Date d'administration:</span>
                        <span class="vaccination-value">
                          ${m.vaccination_date?Ge(new Date(m.vaccination_date),"dd/MM/yyyy",{locale:On}):"N/A"}
                        </span>
                      </div>
                      <div class="vaccination-item">
                        <span class="vaccination-label">Prochaine échéance:</span>
                        <span class="vaccination-value">
                          ${m.next_due_date?Ge(new Date(m.next_due_date),"dd/MM/yyyy",{locale:On}):"N/A"}
                        </span>
                      </div>
                      <div class="vaccination-item">
                        <span class="vaccination-label">Type de vaccin:</span>
                        <span class="vaccination-value">${m.vaccine_type||"N/A"}</span>
                      </div>
                      <div class="vaccination-item">
                        <span class="vaccination-label">Fabricant:</span>
                        <span class="vaccination-value">${m.manufacturer||"N/A"}</span>
                      </div>
                      <div class="vaccination-item">
                        <span class="vaccination-label">Numéro de lot:</span>
                        <span class="vaccination-value">${m.batch_number||"N/A"}</span>
                      </div>
                  
                    </div>
                    ${m.notes?`
                      <div style="margin-top: 10px; padding-top: 10px; border-top: 1px solid #eee;">
                        <strong>Notes:</strong> ${m.notes}
                      </div>
                    `:""}
                  </div>
                `).join(""):`<div class="no-vaccinations">
                  <p>Aucune vaccination enregistrée pour cet animal</p>
                </div>`}
            </div>

            <div class="footer">
              <p>Certificat généré le ${Ge(new Date,"dd/MM/yyyy à HH:mm",{locale:On})}</p>
              <p>VetPro - Système de Gestion Vétérinaire</p>
            </div>

            <script>
              // Generate QR Code (simple implementation)
              function generateQRCode() {
                const canvas = document.getElementById('qrcode');
                if (canvas) {
                  const ctx = canvas.getContext('2d');
                  ctx.fillStyle = '#000';
                  ctx.fillRect(0, 0, 100, 100);
                  ctx.fillStyle = '#fff';
                  ctx.font = '12px Arial';
                  ctx.textAlign = 'center';
                  ctx.fillText('QR', 50, 45);
                  ctx.fillText('CODE', 50, 60);
                }
              }
              
              window.onload = function() {
                generateQRCode();
                setTimeout(function() {
                  window.print();
                }, 500);
              };
            <\/script>
          </body>
        </html>
      `;h.document.open(),h.document.write(f),h.document.close(),h.onload=function(){setTimeout(()=>{h.focus(),h.print()},500)}}catch(h){console.error("Erreur lors de l'impression:",h),alert("Une erreur est survenue lors de l'impression du certificat.")}};return!o||!l?s.jsxs(L,{variant:"outline",disabled:!0,children:[s.jsx(af,{className:"h-4 w-4 mr-2"}),"Certificat de vaccination"]}):s.jsxs(L,{variant:"outline",onClick:d,children:[s.jsx(af,{className:"h-4 w-4 mr-2"}),"Certificat de vaccination"]})}const YAe=e=>{if(!e.next_due_date)return"completed";const t=new Date,n=new Date(e.next_due_date);return zv(n,t)?"overdue":"scheduled"},uO=e=>{switch(e){case"completed":return"bg-green-100 text-green-800 border-green-200";case"overdue":return"bg-red-100 text-red-800 border-red-200";case"scheduled":return"bg-blue-100 text-blue-800 border-blue-200";case"missed":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},dO=e=>{switch(e){case"completed":return s.jsx(Bn,{className:"h-4 w-4"});case"overdue":return s.jsx(pn,{className:"h-4 w-4"});case"scheduled":return s.jsx(tn,{className:"h-4 w-4"});case"missed":return s.jsx(pn,{className:"h-4 w-4"});default:return s.jsx(tn,{className:"h-4 w-4"})}};function QAe(){const{data:e=[],isLoading:t}=Xl(),{data:n=[],isLoading:r}=hn(),{data:a=[],isLoading:i}=vn(),{data:o=[]}=ZZ(),l=JZ();XZ();const{toast:c}=at(),{currentView:u}=sc("vaccinations"),{data:d=[],isLoading:h}=Io(),[f,m]=j.useState(u),[v,p]=j.useState(""),[g,x]=j.useState("all"),[y,b]=j.useState("all"),[N,w]=j.useState("overview"),[S,_]=j.useState(null),[C,P]=j.useState(!1),[A,O]=j.useState(!1),[E,z]=j.useState(null),I=j.useMemo(()=>t||r||i?[]:e.map(Q=>{const te=n.find(T=>T.id===Q.animal_id),ne=a.find(T=>T.id===(te==null?void 0:te.client_id));return{...Q,petName:(te==null?void 0:te.name)||"Animal inconnu",clientName:ne?`${ne.first_name} ${ne.last_name}`:"Client inconnu",status:YAe(Q),animal:te,client:ne}}),[e,n,a,t,r,i]),W=j.useMemo(()=>{const Q=I.length,te=I.filter(me=>me.status==="completed").length,ne=I.filter(me=>me.status==="overdue").length,T=I.filter(me=>me.status==="scheduled").length,ce=I.filter(me=>{if(!me.next_due_date)return!1;const le=new Date,Z=new Date(me.next_due_date),B=a2(le,30);return VPe(Z,le)&&zv(Z,B)}).length;return{total:Q,completed:te,overdue:ne,scheduled:T,upcoming:ce}},[I]),V=j.useMemo(()=>I.filter(Q=>{var ce;const te=Q.petName.toLowerCase().includes(v.toLowerCase())||Q.clientName.toLowerCase().includes(v.toLowerCase())||Q.vaccine_name.toLowerCase().includes(v.toLowerCase()),ne=g==="all"||Q.status===g,T=y==="all"||((ce=Q.animal)==null?void 0:ce.species)===y;return te&&ne&&T}),[I,v,g,y]),H=Q=>{z(Q),O(!0)},k=()=>{E&&(l.mutate(E.id),c({title:"Vaccination supprimée",description:`La vaccination ${E.vaccine_name} a été supprimée avec succès.`}),O(!1),z(null))},D=()=>{const Q=JSON.stringify(I,null,2),te=new Blob([Q],{type:"application/json"}),ne=URL.createObjectURL(te),T=document.createElement("a");T.href=ne,T.download=`vaccinations-${Ge(new Date,"yyyy-MM-dd")}.json`,T.click(),URL.revokeObjectURL(ne)};return t||r||i?s.jsx("div",{className:"space-y-6 max-w-7xl mx-auto p-4 sm:p-6 lg:p-8",children:s.jsx(re,{children:s.jsxs(se,{className:"p-8 text-center",children:[s.jsx(Mn,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),s.jsx("p",{children:"Chargement des données de vaccination..."})]})})}):s.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto p-4 sm:p-6 lg:p-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 flex items-center gap-3 dark:text-white",children:[s.jsx(uo,{className:"h-6 sm:h-8 w-6 sm:w-8 text-blue-600"}),"Gestion Vaccinale"]}),s.jsx("p",{className:"text-gray-600 mt-1 text-sm sm:text-base",children:"Suivi et planification des vaccinations"})]}),s.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[s.jsxs(L,{onClick:D,variant:"outline",className:"gap-2 flex-1 sm:flex-none",children:[s.jsx(cx,{className:"h-4 w-4"}),"Exporter"]}),s.jsx(KAe,{})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:[s.jsx(re,{children:s.jsx(se,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-2 sm:p-3 bg-blue-100 rounded-full",children:s.jsx(uo,{className:"h-5 sm:h-6 w-5 sm:w-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:W.total})]})]})})}),s.jsx(re,{children:s.jsx(se,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-2 sm:p-3 bg-green-100 rounded-full",children:s.jsx(Bn,{className:"h-5 sm:h-6 w-5 sm:w-6 text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Terminées"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:W.completed})]})]})})}),s.jsx(re,{children:s.jsx(se,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-2 sm:p-3 bg-red-100 rounded-full",children:s.jsx(pn,{className:"h-5 sm:h-6 w-5 sm:w-6 text-red-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"En Retard"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:W.overdue})]})]})})}),s.jsx(re,{children:s.jsx(se,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-2 sm:p-3 bg-orange-100 rounded-full",children:s.jsx(tn,{className:"h-5 sm:h-6 w-5 sm:w-6 text-orange-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Prochaines 30j"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:W.upcoming})]})]})})}),s.jsx(re,{children:s.jsx(se,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-2 sm:p-3 bg-purple-100 rounded-full",children:s.jsx(Ze,{className:"h-5 sm:h-6 w-5 sm:w-6 text-purple-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Planifiées"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:W.scheduled})]})]})})})]}),s.jsxs(Oa,{value:N,onValueChange:w,children:[s.jsxs(Ys,{className:"grid w-full grid-cols-2",children:[s.jsxs(bt,{value:"overview",className:"flex items-center gap-2 text-xs sm:text-sm",children:[s.jsx(dn,{className:"h-3 sm:h-4 w-3 sm:w-4"}),"Vue d'ensemble"]}),s.jsxs(bt,{value:"protocols",className:"flex items-center gap-2 text-xs sm:text-sm",children:[s.jsx(Gn,{className:"h-3 sm:h-4 w-3 sm:w-4"}),"Protocoles"]})]}),s.jsxs(jt,{value:"overview",className:"space-y-4",children:[s.jsx(re,{children:s.jsx(se,{className:"p-4",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center justify-between",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1 w-full",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Co,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx(J,{placeholder:"Rechercher animal, client, vaccin...",value:v,onChange:Q=>p(Q.target.value),className:"pl-10"})]}),s.jsxs(be,{value:g,onValueChange:x,children:[s.jsx(xe,{className:"w-full sm:w-[150px]",children:s.jsx(je,{})}),s.jsxs(ye,{children:[s.jsx(q,{value:"all",children:"Tous statuts"}),s.jsx(q,{value:"completed",children:"Terminées"}),s.jsx(q,{value:"scheduled",children:"Planifiées"}),s.jsx(q,{value:"overdue",children:"En retard"})]})]}),s.jsxs(be,{value:y,onValueChange:b,children:[s.jsx(xe,{className:"w-full sm:w-[150px]",children:s.jsx(je,{})}),s.jsxs(ye,{children:[s.jsx(q,{value:"all",children:"Toutes espèces"}),d.map(Q=>s.jsx(q,{value:Q,children:Q},Q))]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto justify-center sm:justify-end",children:[s.jsx(L,{variant:f==="cards"?"default":"outline",size:"sm",onClick:()=>m("cards"),children:s.jsx(yo,{className:"h-4 w-4"})}),s.jsx(L,{variant:f==="table"?"default":"outline",size:"sm",onClick:()=>m("table"),children:s.jsx(di,{className:"h-4 w-4"})})]})]})})}),f==="cards"?s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:V.map(Q=>{var te;return s.jsx(re,{className:"hover:shadow-md transition-shadow",children:s.jsxs(se,{className:"p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Qn,{className:"h-10 w-10",children:s.jsx(Xn,{children:s.jsx(Sg,{className:"h-5 w-5"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-sm",children:Q.petName}),s.jsxs("p",{className:"text-xs text-gray-600",children:[(te=Q.animal)==null?void 0:te.species," • ",Q.clientName]})]})]}),s.jsxs(ke,{className:`${uO(Q.status)} text-xs`,children:[dO(Q.status),s.jsx("span",{className:"ml-1 capitalize",children:Q.status})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(uo,{className:"h-4 w-4 text-blue-600"}),s.jsx("span",{className:"font-medium text-sm",children:Q.vaccine_name}),Q.vaccine_type&&s.jsx(ke,{variant:"outline",className:"text-xs",children:Q.vaccine_type})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(Ze,{className:"h-4 w-4"}),s.jsxs("span",{children:["Date: ",Ge(new Date(Q.vaccination_date),"dd/MM/yyyy",{locale:On})]})]}),Q.next_due_date&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(tn,{className:"h-4 w-4"}),s.jsxs("span",{children:["Prochain: ",Ge(new Date(Q.next_due_date),"dd/MM/yyyy",{locale:On})]})]}),Q.administered_by&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(Da,{className:"h-4 w-4"}),s.jsx("span",{children:Q.administered_by})]})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-4 pt-3 border-t",children:[s.jsxs(L,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>{_(Q),P(!0)},children:[s.jsx(Dn,{className:"h-4 w-4 mr-1"}),"Détails"]}),s.jsx(L,{size:"sm",variant:"outline",onClick:()=>H(Q),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:s.jsx(It,{className:"h-4 w-4"})})]})]})},Q.id)})}):s.jsx(re,{children:s.jsx(se,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Rd,{children:[s.jsx(Ld,{children:s.jsxs(Qs,{children:[s.jsx(it,{children:"Animal"}),s.jsx(it,{children:"Vaccin"}),s.jsx(it,{children:"Date"}),s.jsx(it,{children:"Prochain"}),s.jsx(it,{children:"Statut"}),s.jsx(it,{children:"Actions"})]})}),s.jsx(Fd,{children:V.map(Q=>s.jsxs(Qs,{children:[s.jsx(ot,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Qn,{className:"h-8 w-8",children:s.jsx(Xn,{children:s.jsx(Sg,{className:"h-4 w-4"})})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-sm",children:Q.petName}),s.jsx("div",{className:"text-xs text-gray-600",children:Q.clientName})]})]})}),s.jsx(ot,{className:"font-medium",children:Q.vaccine_name}),s.jsx(ot,{children:Ge(new Date(Q.vaccination_date),"dd/MM/yyyy")}),s.jsx(ot,{children:Q.next_due_date?Ge(new Date(Q.next_due_date),"dd/MM/yyyy"):"N/A"}),s.jsx(ot,{children:s.jsxs(ke,{className:uO(Q.status),children:[dO(Q.status),s.jsx("span",{className:"ml-1 capitalize",children:Q.status})]})}),s.jsx(ot,{children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(L,{size:"sm",variant:"outline",onClick:()=>{_(Q),P(!0)},children:s.jsx(Dn,{className:"h-4 w-4"})}),s.jsx(L,{size:"sm",variant:"outline",onClick:()=>H(Q),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:s.jsx(It,{className:"h-4 w-4"})})]})})]},Q.id))})]})})})})]}),s.jsx(jt,{value:"protocols",children:s.jsxs(re,{children:[s.jsx(de,{children:s.jsxs(he,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Gn,{className:"h-5 w-5"}),"Protocoles Vaccinaux (",o.length,")"]}),s.jsx(jb,{mode:"create"})]})}),s.jsxs(se,{children:[s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(Q=>s.jsx(re,{className:"hover:shadow-md transition-shadow",children:s.jsx(se,{className:"p-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsx("h4",{className:"font-semibold",children:Q.vaccine_name}),!Q.active&&s.jsx(ke,{variant:"secondary",className:"text-xs",children:"Inactif"})]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Espèce: ",Q.species]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Type: ",Q.vaccine_type]}),Q.frequency&&s.jsxs("p",{className:"text-sm text-gray-600",children:["Fréquence: ",Q.frequency]}),Q.age_recommendation&&s.jsxs("p",{className:"text-sm text-gray-600",children:["Âge: ",Q.age_recommendation]}),Q.notes&&s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:Q.notes}),s.jsx("div",{className:"flex gap-2 mt-3",children:s.jsx(jb,{mode:"edit",protocol:Q,children:s.jsxs(L,{size:"sm",variant:"outline",className:"flex-1",children:[s.jsx(qt,{className:"h-4 w-4 mr-1"}),"Modifier"]})})})]})})},Q.id))}),o.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(Gn,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),s.jsx("p",{children:"Aucun protocole vaccinal configuré"}),s.jsx(jb,{mode:"create",children:s.jsxs(L,{className:"mt-4",children:[s.jsx(lt,{className:"h-4 w-4 mr-2"}),"Créer un protocole"]})})]})]})]})})]}),s.jsx(et,{open:C,onOpenChange:P,children:s.jsxs(Xe,{className:"max-w-2xl w-full mx-4",children:[s.jsx(tt,{children:s.jsx(nt,{children:"Détails de la Vaccination"})}),S&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Animal:"}),s.jsx("p",{children:S.petName})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Client:"}),s.jsx("p",{children:S.clientName})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Vaccin:"}),s.jsx("p",{children:S.vaccine_name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Date:"}),s.jsx("p",{children:Ge(new Date(S.vaccination_date),"dd/MM/yyyy",{locale:On})})]}),S.next_due_date&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Prochain rappel:"}),s.jsx("p",{children:Ge(new Date(S.next_due_date),"dd/MM/yyyy",{locale:On})})]})]}),S.notes&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Notes:"}),s.jsx("p",{className:"text-gray-600",children:S.notes})]}),s.jsx("div",{className:"border-t pt-4 mt-4",children:s.jsx("div",{className:"flex justify-center",children:s.jsx(GAe,{animalId:S.animal_id})})})]})]})}),s.jsx(et,{open:A,onOpenChange:O,children:s.jsxs(Xe,{className:"max-w-md w-full mx-4",children:[s.jsx(tt,{children:s.jsx(nt,{children:"Confirmer la suppression"})}),E&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("p",{className:"text-gray-600",children:["Êtes-vous sûr de vouloir supprimer la vaccination ",s.jsx("strong",{children:E.vaccine_name})," pour ",s.jsx("strong",{children:E.petName})," ?"]}),s.jsx("p",{className:"text-sm text-red-600",children:"Cette action est irréversible."}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2",children:[s.jsx(L,{variant:"outline",onClick:()=>O(!1),className:"w-full sm:w-auto",children:"Annuler"}),s.jsx(L,{variant:"destructive",onClick:k,className:"w-full sm:w-auto",children:"Supprimer"})]})]})]})})]})}function XAe({open:e,onOpenChange:t,selectedAnimalId:n,selectedClientId:r,editingAntiparasitic:a}){const{data:i}=hn(),{data:o}=vn(),l=nee(),{toast:c}=at(),{data:u=[],isLoading:d}=W3(),[h,f]=j.useState({clientId:r||"",animalId:n||"",productName:"",activeIngredient:"",parasiteType:"",administrationRoute:"",dosage:"",treatmentDate:Ge(new Date,"yyyy-MM-dd"),nextTreatmentDate:"",administeredBy:"",effectivenessRating:"none",notes:""}),[m,v]=j.useState(null),{data:p}=aee(m==null?void 0:m.species);j.useEffect(()=>{r&&f(w=>({...w,clientId:r,animalId:""})),n&&f(w=>({...w,animalId:n}))},[r,n]),j.useEffect(()=>{if(h.animalId&&i){const w=i.find(S=>S.id===h.animalId);v(w),w&&f(S=>({...S,clientId:w.client_id}))}},[h.animalId,i]),j.useEffect(()=>{var w,S;a&&f({clientId:((w=a.animal)==null?void 0:w.client_id)||"",animalId:a.animal_id,productName:a.product_name,activeIngredient:a.active_ingredient||"",parasiteType:a.parasite_type||"",administrationRoute:a.administration_route||"",dosage:a.dosage||"",treatmentDate:a.treatment_date,nextTreatmentDate:a.next_treatment_date||"",administeredBy:a.administered_by||"",effectivenessRating:((S=a.effectiveness_rating)==null?void 0:S.toString())||"none",notes:a.notes||""})},[a]);const g=(w,S)=>{f(_=>({..._,[w]:S}))},x=w=>{f(S=>({...S,productName:w.product_name,activeIngredient:w.active_ingredient||"",parasiteType:w.parasite_type,administrationRoute:w.administration_route||"",dosage:w.dosage_recommendation||"",nextTreatmentDate:w.frequency_days?Ge(a2(new Date(S.treatmentDate),w.frequency_days),"yyyy-MM-dd"):""})),c({title:"Protocole appliqué",description:`Le protocole ${w.product_name} a été appliqué.`})},y=()=>{f({clientId:r||"",animalId:n||"",productName:"",activeIngredient:"",parasiteType:"",administrationRoute:"",dosage:"",treatmentDate:Ge(new Date,"yyyy-MM-dd"),nextTreatmentDate:"",administeredBy:"",effectivenessRating:"none",notes:""})},b=async w=>{var S,_,C,P,A,O,E;if(w.preventDefault(),!h.animalId||!h.productName||!h.treatmentDate){c({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires.",variant:"destructive"});return}if(h.effectivenessRating&&h.effectivenessRating!=="none"){const z=parseInt(h.effectivenessRating);if(isNaN(z)||z<1||z>5){c({title:"Erreur",description:"L'évaluation d'efficacité doit être un nombre entre 1 et 5.",variant:"destructive"});return}}try{const z={animal_id:h.animalId,product_name:h.productName,treatment_date:h.treatmentDate};if((S=h.activeIngredient)!=null&&S.trim()&&(z.active_ingredient=h.activeIngredient.trim()),(_=h.parasiteType)!=null&&_.trim()&&(z.parasite_type=h.parasiteType.trim()),(C=h.administrationRoute)!=null&&C.trim()&&(z.administration_route=h.administrationRoute.trim()),(P=h.dosage)!=null&&P.trim()&&(z.dosage=h.dosage.trim()),(A=h.nextTreatmentDate)!=null&&A.trim()&&(z.next_treatment_date=h.nextTreatmentDate.trim()),(O=h.administeredBy)!=null&&O.trim()&&(z.administered_by=h.administeredBy.trim()),(E=h.notes)!=null&&E.trim()&&(z.notes=h.notes.trim()),h.effectivenessRating&&h.effectivenessRating!=="none"&&h.effectivenessRating!==""&&h.effectivenessRating!=="undefined"){const I=parseInt(h.effectivenessRating);!isNaN(I)&&I>=1&&I<=5&&(z.effectiveness_rating=I)}console.log("Submitting antiparasitic data:",z),console.log("Effectiveness rating value:",h.effectivenessRating),console.log("Effectiveness rating type:",typeof h.effectivenessRating),await l.mutateAsync(z),c({title:"Succès",description:"Le traitement antiparasitaire a été enregistré avec succès."}),y(),t(!1)}catch(z){console.error("Erreur lors de la création du traitement antiparasitaire:",z);let I="Une erreur s'est produite lors de l'enregistrement.";(z==null?void 0:z.code)==="23514"?I="Les données saisies ne respectent pas les contraintes de validation. Vérifiez que l'évaluation d'efficacité est entre 1 et 10.":(z==null?void 0:z.code)==="42501"?I="Vous n'avez pas les permissions nécessaires pour effectuer cette action.":z!=null&&z.message&&(I=z.message),c({title:"Erreur",description:I,variant:"destructive"})}},N=(i==null?void 0:i.filter(w=>h.clientId?w.client_id===h.clientId:!0))||[];return s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Xe,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsx(tt,{children:s.jsxs(nt,{className:"flex items-center gap-2",children:[s.jsx(wa,{className:"h-5 w-5"}),a?"Modifier le traitement":"Nouveau traitement antiparasitaire"]})}),s.jsxs("form",{onSubmit:b,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"clientId",children:"Client *"}),s.jsxs(be,{value:h.clientId,onValueChange:w=>g("clientId",w),children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Sélectionner un client"})}),s.jsx(ye,{children:o==null?void 0:o.map(w=>s.jsxs(q,{value:w.id,children:[w.first_name," ",w.last_name]},w.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"animalId",children:"Animal *"}),s.jsxs(be,{value:h.animalId,onValueChange:w=>g("animalId",w),disabled:!h.clientId,children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Sélectionner un animal"})}),s.jsx(ye,{children:N.map(w=>s.jsxs(q,{value:w.id,children:[w.name," (",w.species,")"]},w.id))})]})]})]}),m&&s.jsxs(re,{children:[s.jsx(de,{children:s.jsx(he,{className:"text-sm",children:"Animal sélectionné"})}),s.jsx(se,{children:s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Nom:"})," ",m.name]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Espèce:"})," ",m.species]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Race:"})," ",m.breed||"N/A"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Poids:"})," ",m.weight?`${m.weight} kg`:"N/A"]})]})})]}),p&&p.length>0&&s.jsxs(re,{children:[s.jsx(de,{children:s.jsxs(he,{className:"text-sm",children:["Protocoles recommandés pour ",m==null?void 0:m.species]})}),s.jsx(se,{children:s.jsx("div",{className:"grid gap-2",children:p.map(w=>s.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:w.product_name}),s.jsxs("div",{className:"text-sm text-gray-600",children:[w.parasite_type," - ",w.active_ingredient]})]}),s.jsxs(L,{type:"button",variant:"outline",size:"sm",onClick:()=>x(w),children:[s.jsx(lt,{className:"h-4 w-4 mr-1"}),"Appliquer"]})]},w.id))})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"productName",children:"Nom du produit *"}),s.jsx(J,{id:"productName",value:h.productName,onChange:w=>g("productName",w.target.value),placeholder:"Ex: Frontline, Bravecto...",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"activeIngredient",children:"Principe actif"}),s.jsx(J,{id:"activeIngredient",value:h.activeIngredient,onChange:w=>g("activeIngredient",w.target.value),placeholder:"Ex: Fipronil, Fluralaner..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"parasiteType",children:"Type de parasite"}),s.jsxs(be,{value:h.parasiteType,onValueChange:w=>g("parasiteType",w),children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Sélectionner le type"})}),s.jsx(ye,{children:u.map(w=>s.jsx(q,{value:w,children:w},w))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"administrationRoute",children:"Voie d'administration"}),s.jsxs(be,{value:h.administrationRoute,onValueChange:w=>g("administrationRoute",w),children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Sélectionner la voie"})}),s.jsxs(ye,{children:[s.jsx(q,{value:"spot_on",children:"Spot-on (pipette)"}),s.jsx(q,{value:"oral",children:"Orale (comprimé/liquide)"}),s.jsx(q,{value:"injection",children:"Injection"}),s.jsx(q,{value:"spray",children:"Spray"}),s.jsx(q,{value:"collier",children:"Collier"}),s.jsx(q,{value:"shampoing",children:"Shampoing"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"dosage",children:"Dosage"}),s.jsx(J,{id:"dosage",value:h.dosage,onChange:w=>g("dosage",w.target.value),placeholder:"Ex: 1 pipette, 1 comprimé..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"treatmentDate",children:"Date du traitement *"}),s.jsx(J,{id:"treatmentDate",type:"date",value:h.treatmentDate,onChange:w=>g("treatmentDate",w.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"nextTreatmentDate",children:"Prochain traitement"}),s.jsx(J,{id:"nextTreatmentDate",type:"date",value:h.nextTreatmentDate,onChange:w=>g("nextTreatmentDate",w.target.value)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(M,{htmlFor:"effectivenessRating",children:["Efficacité du traitement (optionnel)",s.jsx("span",{className:"text-xs text-muted-foreground block",children:"Évaluez l'efficacité sur une échelle de 1 à 5"})]}),s.jsxs(be,{value:h.effectivenessRating,onValueChange:w=>g("effectivenessRating",w),children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Sélectionner l'efficacité"})}),s.jsxs(ye,{children:[s.jsx(q,{value:"none",children:"Non évalué"}),[...Array(5)].map((w,S)=>s.jsxs(q,{value:(S+1).toString(),children:[S+1," - ",S+1<=2?"Faible":S+1<=3?"Moyenne":S+1<=4?"Bonne":"Excellente"]},S+1))]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"notes",children:"Notes"}),s.jsx(We,{id:"notes",value:h.notes,onChange:w=>g("notes",w.target.value),placeholder:"Observations, effets secondaires, etc.",rows:3})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx(L,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsxs(L,{type:"submit",disabled:l.isPending,children:[l.isPending&&s.jsx(Mn,{className:"h-4 w-4 mr-2 animate-spin"}),a?"Modifier":"Enregistrer"]})]})]})]})})}var Vy="Switch",[JAe,rEe]=Fr(Vy),[ZAe,eke]=JAe(Vy),T8=j.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:a,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=e,[f,m]=j.useState(null),v=dt(t,b=>m(b)),p=j.useRef(!1),g=f?d||!!f.closest("form"):!0,[x,y]=ui({prop:a,defaultProp:i??!1,onChange:u,caller:Vy});return s.jsxs(ZAe,{scope:n,checked:x,disabled:l,children:[s.jsx(Le.button,{type:"button",role:"switch","aria-checked":x,"aria-required":o,"data-state":I8(x),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:v,onClick:Pe(e.onClick,b=>{y(N=>!N),g&&(p.current=b.isPropagationStopped(),p.current||b.stopPropagation())})}),g&&s.jsx(M8,{control:f,bubbles:!p.current,name:r,value:c,checked:x,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});T8.displayName=Vy;var O8="SwitchThumb",D8=j.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,a=eke(O8,n);return s.jsx(Le.span,{"data-state":I8(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t})});D8.displayName=O8;var tke="SwitchBubbleInput",M8=j.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...a},i)=>{const o=j.useRef(null),l=dt(o,i),c=US(n),u=sS(t);return j.useEffect(()=>{const d=o.current;if(!d)return;const h=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==n&&m){const v=new Event("click",{bubbles:r});m.call(d,n),d.dispatchEvent(v)}},[c,n,r]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:l,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});M8.displayName=tke;function I8(e){return e?"checked":"unchecked"}var $8=T8,nke=D8;const Pr=j.forwardRef(({className:e,...t},n)=>s.jsx($8,{className:Ee("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:s.jsx(nke,{className:Ee("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Pr.displayName=$8.displayName;function rke({open:e,onOpenChange:t,editingProtocol:n}){const r=iee(),a=oee(),{toast:i}=at(),{data:o=[],isLoading:l}=Io(),{data:c=[],isLoading:u}=W3(),[d,h]=j.useState({species:"",parasiteType:"",productName:"",activeIngredient:"",administrationRoute:"",dosageRecommendation:"",frequencyDays:"",ageRecommendation:"",weightRange:"",seasonRecommendation:"",notes:"",active:!0});j.useEffect(()=>{n&&h({species:n.species,parasiteType:n.parasite_type,productName:n.product_name,activeIngredient:n.active_ingredient||"",administrationRoute:n.administration_route||"",dosageRecommendation:n.dosage_per_kg||"",frequencyDays:"",ageRecommendation:n.age_restriction||"",weightRange:"",seasonRecommendation:"",notes:n.notes||"",active:n.active})},[n]);const f=(g,x)=>{h(y=>({...y,[g]:x}))},m=()=>{h({species:"",parasiteType:"",productName:"",activeIngredient:"",administrationRoute:"",dosageRecommendation:"",frequencyDays:"",ageRecommendation:"",weightRange:"",seasonRecommendation:"",notes:"",active:!0})},v=async g=>{if(g.preventDefault(),!d.species||!d.parasiteType||!d.productName){i({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires.",variant:"destructive"});return}try{const x={species:d.species,parasite_type:d.parasiteType,product_name:d.productName,active_ingredient:d.activeIngredient||void 0,administration_route:d.administrationRoute||void 0,dosage_per_kg:d.dosageRecommendation||void 0,frequency:d.frequencyDays?`${d.frequencyDays} jours`:void 0,age_restriction:d.ageRecommendation||void 0,notes:[d.notes,d.weightRange?`Poids: ${d.weightRange}`:"",d.seasonRecommendation?`Saison: ${d.seasonRecommendation}`:""].filter(Boolean).join(" | ")||void 0,active:d.active};n?(await a.mutateAsync({id:n.id,updates:x}),i({title:"Succès",description:"Le protocole antiparasitaire a été modifié avec succès."})):(await r.mutateAsync(x),i({title:"Succès",description:"Le protocole antiparasitaire a été créé avec succès."})),m(),t(!1)}catch(x){console.error("Erreur lors de la sauvegarde du protocole:",x),i({title:"Erreur",description:"Une erreur s'est produite lors de la sauvegarde.",variant:"destructive"})}},p=r.isPending||a.isPending;return s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Xe,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[s.jsx(tt,{children:s.jsxs(nt,{className:"flex items-center gap-2",children:[s.jsx(Gn,{className:"h-5 w-5"}),n?"Modifier le protocole":"Nouveau protocole antiparasitaire"]})}),s.jsxs("form",{onSubmit:v,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"species",children:"Espèce *"}),s.jsxs(be,{value:d.species,onValueChange:g=>f("species",g),children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Sélectionner une espèce"})}),s.jsx(ye,{children:o.map(g=>s.jsx(q,{value:g,children:g},g))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"parasiteType",children:"Type de parasite *"}),s.jsxs(be,{value:d.parasiteType,onValueChange:g=>f("parasiteType",g),children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Sélectionner le type"})}),s.jsx(ye,{children:c.map(g=>s.jsx(q,{value:g,children:g},g))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"productName",children:"Nom du produit *"}),s.jsx(J,{id:"productName",value:d.productName,onChange:g=>f("productName",g.target.value),placeholder:"Ex: Frontline, Bravecto...",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"activeIngredient",children:"Principe actif"}),s.jsx(J,{id:"activeIngredient",value:d.activeIngredient,onChange:g=>f("activeIngredient",g.target.value),placeholder:"Ex: Fipronil, Fluralaner..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"administrationRoute",children:"Voie d'administration"}),s.jsxs(be,{value:d.administrationRoute,onValueChange:g=>f("administrationRoute",g),children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Sélectionner la voie"})}),s.jsxs(ye,{children:[s.jsx(q,{value:"spot_on",children:"Spot-on (pipette)"}),s.jsx(q,{value:"oral",children:"Orale (comprimé/liquide)"}),s.jsx(q,{value:"injection",children:"Injection"}),s.jsx(q,{value:"spray",children:"Spray"}),s.jsx(q,{value:"collier",children:"Collier"}),s.jsx(q,{value:"shampoing",children:"Shampoing"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"dosageRecommendation",children:"Recommandation de dosage"}),s.jsx(J,{id:"dosageRecommendation",value:d.dosageRecommendation,onChange:g=>f("dosageRecommendation",g.target.value),placeholder:"Ex: 1 pipette par 10-20kg..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"frequencyDays",children:"Fréquence (jours)"}),s.jsx(J,{id:"frequencyDays",type:"number",value:d.frequencyDays,onChange:g=>f("frequencyDays",g.target.value),placeholder:"Ex: 30, 90..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"ageRecommendation",children:"Recommandation d'âge"}),s.jsx(J,{id:"ageRecommendation",value:d.ageRecommendation,onChange:g=>f("ageRecommendation",g.target.value),placeholder:"Ex: > 8 semaines, adulte..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"weightRange",children:"Gamme de poids"}),s.jsx(J,{id:"weightRange",value:d.weightRange,onChange:g=>f("weightRange",g.target.value),placeholder:"Ex: 10-20kg, < 5kg..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"seasonRecommendation",children:"Recommandation saisonnière"}),s.jsxs(be,{value:d.seasonRecommendation,onValueChange:g=>f("seasonRecommendation",g),children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Sélectionner la saison"})}),s.jsxs(ye,{children:[s.jsx(q,{value:"toute_annee",children:"Toute l'année"}),s.jsx(q,{value:"printemps_ete",children:"Printemps-Été"}),s.jsx(q,{value:"automne_hiver",children:"Automne-Hiver"}),s.jsx(q,{value:"printemps",children:"Printemps"}),s.jsx(q,{value:"ete",children:"Été"}),s.jsx(q,{value:"automne",children:"Automne"}),s.jsx(q,{value:"hiver",children:"Hiver"})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"notes",children:"Notes"}),s.jsx(We,{id:"notes",value:d.notes,onChange:g=>f("notes",g.target.value),placeholder:"Informations supplémentaires, contre-indications...",rows:3})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pr,{id:"active",checked:d.active,onCheckedChange:g=>f("active",g)}),s.jsx(M,{htmlFor:"active",children:"Protocole actif"})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx(L,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsxs(L,{type:"submit",disabled:p,children:[p&&s.jsx(Mn,{className:"h-4 w-4 mr-2 animate-spin"}),n?"Modifier":"Créer"]})]})]})]})})}const ske=e=>{if(!e.next_treatment_date)return"completed";const t=new Date(e.next_treatment_date),n=new Date,r=a2(n,7);return zv(t,n)?"overdue":zv(t,r)?"upcoming":"scheduled"},hO=e=>{switch(e){case"completed":return"bg-green-100 text-green-800 border-green-200";case"overdue":return"bg-red-100 text-red-800 border-red-200";case"scheduled":return"bg-blue-100 text-blue-800 border-blue-200";case"upcoming":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},fO=e=>{switch(e){case"completed":return s.jsx(Bn,{className:"h-4 w-4"});case"overdue":return s.jsx(pn,{className:"h-4 w-4"});case"scheduled":return s.jsx(tn,{className:"h-4 w-4"});case"upcoming":return s.jsx(Ze,{className:"h-4 w-4"});default:return s.jsx(tn,{className:"h-4 w-4"})}},mO=e=>{switch(e){case"completed":return"Terminé";case"overdue":return"En retard";case"scheduled":return"Programmé";case"upcoming":return"À venir";default:return"Inconnu"}},ake=(e,t,n)=>e.map(r=>{const a=t.find(l=>l.id===r.animal_id),i=a?n.find(l=>l.id===a.client_id):null,o=ske(r);return{...r,petName:(a==null?void 0:a.name)||"Animal inconnu",petSpecies:(a==null?void 0:a.species)||"Espèce inconnue",clientName:i?`${i.first_name} ${i.last_name}`:"Client inconnu",status:o,animal:a,client:i}});function ike(){const{currentView:e}=sc("antiparasitics"),{data:t=[],isLoading:n}=wm(),{data:r=[],isLoading:a}=see(),{data:i=[]}=hn(),{data:o=[]}=vn(),l=ree(),{toast:c}=at(),{data:u=[],isLoading:d}=Io(),[h,f]=j.useState(""),[m,v]=j.useState("all"),[p,g]=j.useState("all"),[x,y]=j.useState("all"),[b,N]=j.useState(!1),[w,S]=j.useState(!1),[_,C]=j.useState(!1),[P,A]=j.useState(null),[O,E]=j.useState(!1),[z,I]=j.useState(null),[W,V]=j.useState(null),H=j.useMemo(()=>ake(t,i,o),[t,i,o]),k=j.useMemo(()=>H.filter(T=>{const ce=!h||T.petName.toLowerCase().includes(h.toLowerCase())||T.clientName.toLowerCase().includes(h.toLowerCase())||T.product_name.toLowerCase().includes(h.toLowerCase()),me=m==="all"||T.status===m,le=p==="all"||T.parasite_type===p,Z=x==="all"||T.petSpecies===x;return ce&&me&&le&&Z}),[H,h,m,p,x]),D=j.useMemo(()=>{const T=H.length,ce=H.filter(B=>B.status==="overdue").length,me=H.filter(B=>B.status==="upcoming").length,le=H.filter(B=>B.status==="completed").length,Z=H.reduce((B,oe)=>{const U=oe.parasite_type||"Non spécifié";return B[U]=(B[U]||0)+1,B},{});return{total:T,overdue:ce,upcoming:me,completed:le,parasiteTypes:Z}},[H]),X=T=>{I(T),E(!0)},Q=async()=>{if(z)try{await l.mutateAsync(z.id),c({title:"Succès",description:"Le traitement antiparasitaire a été supprimé."}),E(!1),I(null)}catch{c({title:"Erreur",description:"Impossible de supprimer le traitement.",variant:"destructive"})}},ne=(T=>[...new Set(T)])(H.map(T=>T.parasite_type).filter(Boolean));return n?s.jsxs("div",{className:"flex items-center justify-center h-64",children:[s.jsx(Mn,{className:"h-8 w-8 animate-spin"}),s.jsx("span",{className:"ml-2",children:"Chargement des traitements antiparasitaires..."})]}):s.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto p-4 sm:p-6 lg:p-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold flex items-center gap-3",children:[s.jsx(bj,{className:"h-6 w-6 sm:h-8 sm:w-8"}),"Traitements Antiparasitaires"]}),s.jsx("p",{className:"text-gray-600 mt-1 text-sm sm:text-base",children:"Gestion des traitements antiparasitaires et protocoles"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[s.jsxs(L,{onClick:()=>S(!0),variant:"outline",className:"gap-2 w-full sm:w-auto",children:[s.jsx(Gn,{className:"h-4 w-4"}),"Protocoles"]}),s.jsxs(L,{onClick:()=>N(!0),className:"gap-2 w-full sm:w-auto",children:[s.jsx(lt,{className:"h-4 w-4"}),"Nouveau traitement"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(re,{children:s.jsx(se,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),s.jsx("p",{className:"text-2xl font-bold",children:D.total})]}),s.jsx(wa,{className:"h-8 w-8 text-blue-500"})]})})}),s.jsx(re,{children:s.jsx(se,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"En retard"}),s.jsx("p",{className:"text-2xl font-bold text-red-600",children:D.overdue})]}),s.jsx(pn,{className:"h-8 w-8 text-red-500"})]})})}),s.jsx(re,{children:s.jsx(se,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"À venir"}),s.jsx("p",{className:"text-2xl font-bold text-orange-600",children:D.upcoming})]}),s.jsx(Ze,{className:"h-8 w-8 text-orange-500"})]})})}),s.jsx(re,{children:s.jsx(se,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Terminés"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:D.completed})]}),s.jsx(Bn,{className:"h-8 w-8 text-green-500"})]})})})]}),s.jsx(re,{children:s.jsx(se,{className:"p-4",children:s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(Co,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx(J,{placeholder:"Rechercher par animal, client ou produit...",value:h,onChange:T=>f(T.target.value),className:"pl-10"})]})}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs(be,{value:m,onValueChange:v,children:[s.jsx(xe,{className:"w-full sm:w-48",children:s.jsx(je,{placeholder:"Filtrer par statut"})}),s.jsxs(ye,{children:[s.jsx(q,{value:"all",children:"Tous les statuts"}),s.jsx(q,{value:"overdue",children:"En retard"}),s.jsx(q,{value:"upcoming",children:"À venir"}),s.jsx(q,{value:"scheduled",children:"Programmés"}),s.jsx(q,{value:"completed",children:"Terminés"})]})]}),s.jsxs(be,{value:p,onValueChange:g,children:[s.jsx(xe,{className:"w-full sm:w-48",children:s.jsx(je,{placeholder:"Filtrer par parasite"})}),s.jsxs(ye,{children:[s.jsx(q,{value:"all",children:"Tous les parasites"}),ne.map(T=>s.jsx(q,{value:T,children:T},T))]})]}),s.jsxs(be,{value:x,onValueChange:y,children:[s.jsx(xe,{className:"w-full sm:w-48",children:s.jsx(je,{placeholder:"Filtrer par espèce"})}),s.jsxs(ye,{children:[s.jsx(q,{value:"all",children:"Toutes espèces"}),u.map(T=>s.jsx(q,{value:T,children:T},T))]})]})]})]})})}),s.jsxs(Oa,{defaultValue:"overview",className:"space-y-4",children:[s.jsxs(Ys,{className:"flex flex-wrap",children:[s.jsxs(bt,{value:"overview",className:"flex items-center gap-2 flex-1 sm:flex-none",children:[s.jsx(di,{className:"h-4 w-4"}),"Vue d'ensemble"]}),s.jsxs(bt,{value:"protocols",className:"flex items-center gap-2 flex-1 sm:flex-none",children:[s.jsx(Gn,{className:"h-4 w-4"}),"Protocoles"]}),s.jsxs(bt,{value:"statistics",className:"flex items-center gap-2 flex-1 sm:flex-none",children:[s.jsx(dn,{className:"h-4 w-4"}),"Statistiques"]})]}),s.jsx(jt,{value:"overview",children:s.jsxs(re,{children:[s.jsx(de,{children:s.jsxs(he,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2",children:[s.jsxs("span",{children:["Traitements antiparasitaires (",k.length,")"]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs(L,{variant:"outline",size:"sm",onClick:()=>{},children:[s.jsx(cx,{className:"h-4 w-4 mr-1"}),"Export"]})})]})}),s.jsxs(se,{children:[e==="table"?s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Rd,{children:[s.jsx(Ld,{children:s.jsxs(Qs,{children:[s.jsx(it,{children:"Animal"}),s.jsx(it,{children:"Client"}),s.jsx(it,{children:"Produit"}),s.jsx(it,{children:"Parasite"}),s.jsx(it,{children:"Date traitement"}),s.jsx(it,{children:"Prochain traitement"}),s.jsx(it,{children:"Statut"}),s.jsx(it,{children:"Actions"})]})}),s.jsx(Fd,{children:k.map(T=>s.jsxs(Qs,{children:[s.jsx(ot,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Qn,{className:"h-8 w-8",children:s.jsx(Xn,{children:s.jsx(Sg,{className:"h-4 w-4"})})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:T.petName}),s.jsx("div",{className:"text-sm text-gray-500",children:T.petSpecies})]})]})}),s.jsx(ot,{children:T.clientName}),s.jsx(ot,{children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:T.product_name}),T.active_ingredient&&s.jsx("div",{className:"text-sm text-gray-500",children:T.active_ingredient})]})}),s.jsx(ot,{children:T.parasite_type&&s.jsx(ke,{variant:"outline",children:T.parasite_type})}),s.jsx(ot,{children:Ge(new Date(T.treatment_date),"dd/MM/yyyy",{locale:On})}),s.jsx(ot,{children:T.next_treatment_date?Ge(new Date(T.next_treatment_date),"dd/MM/yyyy",{locale:On}):"N/A"}),s.jsx(ot,{children:s.jsx(ke,{className:hO(T.status),children:s.jsxs("div",{className:"flex items-center gap-1",children:[fO(T.status),mO(T.status)]})})}),s.jsx(ot,{children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(L,{variant:"ghost",size:"sm",onClick:()=>{A(T),C(!0)},children:s.jsx(Dn,{className:"h-4 w-4"})}),s.jsx(L,{variant:"ghost",size:"sm",onClick:()=>X(T),children:s.jsx(It,{className:"h-4 w-4"})})]})})]},T.id))})]})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:k.map(T=>s.jsx(re,{className:"hover:shadow-md transition-shadow",children:s.jsxs(se,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Qn,{className:"h-8 w-8",children:s.jsx(Xn,{children:s.jsx(Sg,{className:"h-4 w-4"})})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-sm",children:T.petName}),s.jsx("p",{className:"text-xs text-gray-600",children:T.clientName})]})]}),s.jsx(ke,{className:hO(T.status),children:s.jsxs("div",{className:"flex items-center gap-1",children:[fO(T.status),mO(T.status)]})})]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Produit:"})," ",T.product_name]}),T.parasite_type&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Parasite:"})," ",T.parasite_type]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Date:"})," ",Ge(new Date(T.treatment_date),"dd/MM/yyyy")]}),T.next_treatment_date&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Prochain:"})," ",Ge(new Date(T.next_treatment_date),"dd/MM/yyyy")]})]}),s.jsxs("div",{className:"flex justify-between mt-4",children:[s.jsxs(L,{variant:"outline",size:"sm",onClick:()=>{A(T),C(!0)},children:[s.jsx(Dn,{className:"h-4 w-4 mr-1"}),"Détails"]}),s.jsx(L,{variant:"ghost",size:"sm",onClick:()=>X(T),children:s.jsx(It,{className:"h-4 w-4"})})]})]})},T.id))}),k.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(bj,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),s.jsx("p",{children:"Aucun traitement antiparasitaire trouvé"})]})]})]})}),s.jsx(jt,{value:"protocols",children:s.jsxs(re,{children:[s.jsx(de,{children:s.jsxs(he,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2",children:[s.jsxs("span",{children:["Protocoles antiparasitaires (",r.length,")"]}),s.jsxs(L,{onClick:()=>{V(null),S(!0)},className:"gap-2 w-full sm:w-auto",children:[s.jsx(lt,{className:"h-4 w-4"}),"Nouveau protocole"]})]})}),s.jsxs(se,{children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(T=>s.jsx(re,{className:"hover:shadow-md transition-shadow",children:s.jsxs(se,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx(ke,{variant:"outline",children:T.species}),s.jsx("div",{className:"flex gap-1",children:s.jsx(L,{variant:"ghost",size:"sm",onClick:()=>{V(T),S(!0)},children:s.jsx(qt,{className:"h-4 w-4"})})})]}),s.jsx("h4",{className:"font-medium mb-2",children:T.product_name}),s.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Parasite:"})," ",T.parasite_type]}),T.active_ingredient&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Principe actif:"})," ",T.active_ingredient]}),T.frequency&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Fréquence:"})," ",T.frequency]})]})]})},T.id))}),r.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(Gn,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),s.jsx("p",{children:"Aucun protocole configuré"})]})]})]})}),s.jsx(jt,{value:"statistics",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(re,{children:[s.jsx(de,{children:s.jsxs(he,{className:"flex items-center gap-2",children:[s.jsx(dn,{className:"h-5 w-5"}),"Répartition par type de parasite"]})}),s.jsx(se,{children:s.jsx("div",{className:"space-y-3",children:Object.entries(D.parasiteTypes).map(([T,ce])=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:T}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"bg-gray-200 rounded-full h-2 w-20",children:s.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${ce/D.total*100}%`}})}),s.jsx("span",{className:"text-sm font-medium",children:ce})]})]},T))})})]}),s.jsxs(re,{children:[s.jsx(de,{children:s.jsx(he,{children:"Résumé des traitements"})}),s.jsx(se,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:"Total des traitements"}),s.jsx("span",{className:"font-bold",children:D.total})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:"En retard"}),s.jsx("span",{className:"font-bold text-red-600",children:D.overdue})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:"À venir (7 jours)"}),s.jsx("span",{className:"font-bold text-orange-600",children:D.upcoming})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:"Terminés"}),s.jsx("span",{className:"font-bold text-green-600",children:D.completed})]})]})})]})]})})]}),s.jsx(XAe,{open:b,onOpenChange:N}),s.jsx(rke,{open:w,onOpenChange:S,editingProtocol:W}),s.jsx(et,{open:_,onOpenChange:C,children:s.jsxs(Xe,{className:"max-w-2xl",children:[s.jsx(tt,{children:s.jsx(nt,{children:"Détails du traitement"})}),P&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Animal:"}),s.jsx("p",{children:P.petName})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Client:"}),s.jsx("p",{children:P.clientName})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Produit:"}),s.jsx("p",{children:P.product_name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Principe actif:"}),s.jsx("p",{children:P.active_ingredient||"N/A"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Type de parasite:"}),s.jsx("p",{children:P.parasite_type||"N/A"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Voie d'administration:"}),s.jsx("p",{children:P.administration_route||"N/A"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Dosage:"}),s.jsx("p",{children:P.dosage||"N/A"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Date du traitement:"}),s.jsx("p",{children:Ge(new Date(P.treatment_date),"dd/MM/yyyy",{locale:On})})]}),P.next_treatment_date&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Prochain traitement:"}),s.jsx("p",{children:Ge(new Date(P.next_treatment_date),"dd/MM/yyyy",{locale:On})})]}),P.effectiveness_rating&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Efficacité:"}),s.jsxs("p",{children:[P.effectiveness_rating,"/10"]})]})]}),P.notes&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Notes:"}),s.jsx("p",{className:"text-gray-600",children:P.notes})]})]})]})}),s.jsx(et,{open:O,onOpenChange:E,children:s.jsxs(Xe,{className:"max-w-md",children:[s.jsx(tt,{children:s.jsx(nt,{children:"Confirmer la suppression"})}),z&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("p",{className:"text-gray-600",children:["Êtes-vous sûr de vouloir supprimer le traitement ",s.jsx("strong",{children:z.product_name})," pour ",s.jsx("strong",{children:z.petName})," ?"]}),s.jsx("p",{className:"text-sm text-red-600",children:"Cette action est irréversible."}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2",children:[s.jsx(L,{variant:"outline",onClick:()=>E(!1),className:"w-full sm:w-auto",children:"Annuler"}),s.jsx(L,{variant:"destructive",onClick:Q,className:"w-full sm:w-auto",children:"Supprimer"})]})]})]})})]})}const oke=[{value:"medication",label:"Médicaments",icon:"💊"},{value:"vaccine",label:"Vaccins",icon:"💉"},{value:"consumable",label:"Consommables",icon:"🩹"},{value:"equipment",label:"Équipement",icon:"🔧"},{value:"supplement",label:"Suppléments",icon:"🧪"}],lke=[{value:"unit",label:"Unité"},{value:"box",label:"Boîte"},{value:"vial",label:"Flacon"},{value:"bottle",label:"Bouteille"},{value:"pack",label:"Paquet"},{value:"kg",label:"Kilogramme"},{value:"g",label:"Gramme"},{value:"ml",label:"Millilitre"},{value:"l",label:"Litre"}],cke={medication:["Antibiotique","Anti-inflammatoire","Antiparasitaire","Anesthésique","Analgésique","Antihistaminique","Corticoïde","Diurétique","Autre"],vaccine:["Vaccin Core","Vaccin Non-Core","Vaccin Obligatoire","Vaccin Recommandé","Autre"],consumable:["Matériel d'injection","Protection","Pansement","Suture","Autre"],equipment:["Diagnostic","Chirurgie","Monitoring","Stérilisation","Autre"],supplement:["Vitamines","Minéraux","Probiotiques","Acides aminés","Autre"]};function pO({open:e,onOpenChange:t,editingItem:n}){var h;const{addStockItem:r,updateStockItem:a}=wn(),{settings:i}=Pt(),{toast:o}=at(),[l,c]=j.useState({name:"",category:"medication",subcategory:"",description:"",manufacturer:"",batchNumber:"",dosage:"",unit:"unit",currentStock:0,minimumStock:0,maximumStock:0,purchasePrice:0,sellingPrice:0,expirationDate:"",supplier:"",location:"",notes:"",barcode:"",sku:"",isActive:!0});j.useEffect(()=>{c(n?{name:n.name,category:n.category,subcategory:n.subcategory||"",description:n.description||"",manufacturer:n.manufacturer||"",batchNumber:n.batchNumber||"",dosage:n.dosage||"",unit:n.unit,currentStock:n.currentStock,minimumStock:n.minimumStock,maximumStock:n.maximumStock||0,purchasePrice:n.purchasePrice,sellingPrice:n.sellingPrice,expirationDate:n.expirationDate||"",supplier:n.supplier||"",location:n.location||"",notes:n.notes||"",barcode:n.barcode||"",sku:n.sku||"",isActive:n.isActive}:{name:"",category:"medication",subcategory:"",description:"",manufacturer:"",batchNumber:"",dosage:"",unit:"unit",currentStock:0,minimumStock:0,maximumStock:0,purchasePrice:0,sellingPrice:0,expirationDate:"",supplier:"",location:"",notes:"",barcode:"",sku:"",isActive:!0})},[n,e]);const u=f=>{if(f.preventDefault(),!l.name.trim()){o({title:"Erreur",description:"Le nom de l'élément est requis.",variant:"destructive"});return}if(l.currentStock<0||l.minimumStock<0||l.purchasePrice<0||l.sellingPrice<0){o({title:"Erreur",description:"Les valeurs numériques ne peuvent pas être négatives.",variant:"destructive"});return}const m={...l,currentStock:Number(l.currentStock),minimumStock:Number(l.minimumStock),maximumStock:Number(l.maximumStock)||void 0,purchasePrice:Number(l.purchasePrice),sellingPrice:Number(l.sellingPrice),expirationDate:l.expirationDate||void 0,subcategory:l.subcategory||void 0,description:l.description||void 0,manufacturer:l.manufacturer||void 0,batchNumber:l.batchNumber||void 0,dosage:l.dosage||void 0,supplier:l.supplier||void 0,location:l.location||void 0,notes:l.notes||void 0,barcode:l.barcode||void 0,sku:l.sku||void 0};n?(a(n.id,m),o({title:"Élément modifié",description:`"${l.name}" a été modifié avec succès.`})):(r(m),o({title:"Élément ajouté",description:`"${l.name}" a été ajouté au stock.`})),t(!1)},d=(f,m)=>{c(v=>({...v,[f]:m}))};return s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Xe,{className:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[s.jsxs(tt,{children:[s.jsx(nt,{children:n?"Modifier l'élément de stock":"Nouvel élément de stock"}),s.jsx(Dt,{children:n?"Modifiez les informations de l'élément de stock.":"Ajoutez un nouvel élément à votre inventaire."})]}),s.jsxs("form",{onSubmit:u,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Informations de base"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"name",children:"Nom de l'élément *"}),s.jsx(J,{id:"name",value:l.name,onChange:f=>d("name",f.target.value),placeholder:"ex: Amoxicilline 500mg",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"category",children:"Catégorie *"}),s.jsxs(be,{value:l.category,onValueChange:f=>d("category",f),children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Sélectionner une catégorie"})}),s.jsx(ye,{children:oke.map(f=>s.jsxs(q,{value:f.value,children:[f.icon," ",f.label]},f.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"subcategory",children:"Sous-catégorie"}),s.jsxs(be,{value:l.subcategory,onValueChange:f=>d("subcategory",f),children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Sélectionner une sous-catégorie"})}),s.jsx(ye,{children:(h=cke[l.category])==null?void 0:h.map(f=>s.jsx(q,{value:f,children:f},f))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"manufacturer",children:"Fabricant"}),s.jsx(J,{id:"manufacturer",value:l.manufacturer,onChange:f=>d("manufacturer",f.target.value),placeholder:"ex: Boehringer Ingelheim"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"description",children:"Description"}),s.jsx(We,{id:"description",value:l.description,onChange:f=>d("description",f.target.value),placeholder:"Description détaillée de l'élément...",rows:2})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Informations techniques"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"batchNumber",children:"Numéro de lot"}),s.jsx(J,{id:"batchNumber",value:l.batchNumber,onChange:f=>d("batchNumber",f.target.value),placeholder:"ex: AMX2024001"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"dosage",children:"Dosage"}),s.jsx(J,{id:"dosage",value:l.dosage,onChange:f=>d("dosage",f.target.value),placeholder:"ex: 500mg"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"unit",children:"Unité"}),s.jsxs(be,{value:l.unit,onValueChange:f=>d("unit",f),children:[s.jsx(xe,{children:s.jsx(je,{placeholder:"Sélectionner une unité"})}),s.jsx(ye,{children:lke.map(f=>s.jsx(q,{value:f.value,children:f.label},f.value))})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Gestion du stock"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"currentStock",children:"Stock actuel *"}),s.jsx(J,{id:"currentStock",type:"number",min:"0",value:l.currentStock,onChange:f=>d("currentStock",parseInt(f.target.value)||0),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"minimumStock",children:"Stock minimum *"}),s.jsx(J,{id:"minimumStock",type:"number",min:"0",value:l.minimumStock,onChange:f=>d("minimumStock",parseInt(f.target.value)||0),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"maximumStock",children:"Stock maximum"}),s.jsx(J,{id:"maximumStock",type:"number",min:"0",value:l.maximumStock,onChange:f=>d("maximumStock",parseInt(f.target.value)||0)})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(M,{htmlFor:"purchasePrice",children:["Prix d'achat (",i.currency,") *"]}),s.jsx(J,{id:"purchasePrice",type:"number",step:"0.01",min:"0",value:l.purchasePrice,onChange:f=>d("purchasePrice",parseFloat(f.target.value)||0),required:!0}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Prix d'achat au fournisseur"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(M,{htmlFor:"sellingPrice",children:["Prix de vente (",i.currency,") *"]}),s.jsx(J,{id:"sellingPrice",type:"number",step:"0.01",min:"0",value:l.sellingPrice,onChange:f=>d("sellingPrice",parseFloat(f.target.value)||0),required:!0}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Prix de vente au client"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"La valeur totale sera calculée automatiquement : Prix d'achat × Stock actuel"}),l.purchasePrice>0&&l.currentStock>0&&s.jsxs("div",{className:"text-sm font-medium text-primary",children:["Valeur totale : ",(l.purchasePrice*l.currentStock).toFixed(2)," ",i.currency]}),l.purchasePrice>0&&l.sellingPrice>0&&s.jsxs("div",{className:"text-sm font-medium text-green-600",children:["Marge : ",((l.sellingPrice-l.purchasePrice)*l.currentStock).toFixed(2)," ",i.currency]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Informations supplémentaires"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"expirationDate",children:"Date d'expiration"}),s.jsx(J,{id:"expirationDate",type:"date",value:l.expirationDate,onChange:f=>d("expirationDate",f.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"supplier",children:"Fournisseur"}),s.jsx(J,{id:"supplier",value:l.supplier,onChange:f=>d("supplier",f.target.value),placeholder:"ex: Pharmacie Vétérinaire Centrale"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"location",children:"Emplacement"}),s.jsx(J,{id:"location",value:l.location,onChange:f=>d("location",f.target.value),placeholder:"ex: Armoire A - Étagère 1"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"barcode",children:"Code-barres"}),s.jsx(J,{id:"barcode",value:l.barcode,onChange:f=>d("barcode",f.target.value),placeholder:"ex: 1234567890123"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"sku",children:"SKU"}),s.jsx(J,{id:"sku",value:l.sku,onChange:f=>d("sku",f.target.value),placeholder:"ex: MED-AMX-500"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"notes",children:"Notes"}),s.jsx(We,{id:"notes",value:l.notes,onChange:f=>d("notes",f.target.value),placeholder:"Notes supplémentaires...",rows:3})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(L,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsx(L,{type:"submit",children:n?"Modifier":"Ajouter"})]})]})]})})}const uke=[{value:"in",label:"Entrée",icon:dn,description:"Ajout de stock (achat, retour, etc.)"},{value:"out",label:"Sortie",icon:Cu,description:"Utilisation, vente, perte, etc."},{value:"adjustment",label:"Ajustement",icon:yI,description:"Correction d'inventaire"},{value:"transfer",label:"Transfert",icon:rU,description:"Déplacement entre emplacements"}],dke={in:["Achat fournisseur","Retour client","Inventaire initial","Don/échantillon","Transfert entrant","Autre"],out:["Utilisation consultation","Vente client","Périmé/expiré","Cassé/endommagé","Vol/perte","Transfert sortant","Autre"],adjustment:["Correction inventaire","Comptage physique","Erreur saisie","Autre"],transfer:["Changement emplacement","Transfert entre sites","Réorganisation stock","Autre"]};function hke({open:e,onOpenChange:t,item:n}){var v;const{updateStockItem:r,addStockMovement:a}=wn(),{settings:i}=Pt(),{toast:o}=at(),[l,c]=j.useState({type:"out",quantity:0,reason:"",reference:"",performedBy:"",notes:""}),[u,d]=j.useState("");j.useEffect(()=>{n&&(c({type:"out",quantity:0,reason:"",reference:"",performedBy:"",notes:""}),d(""))},[n,e]);const h=p=>{if(p.preventDefault(),!n)return;if(l.quantity<=0){o({title:"Erreur",description:"La quantité doit être supérieure à 0.",variant:"destructive"});return}if(!l.reason.trim()){o({title:"Erreur",description:"La raison du mouvement est requise.",variant:"destructive"});return}let g=n.currentStock;if(l.type==="in")g+=l.quantity;else if(l.type==="out"){if(l.quantity>n.currentStock){o({title:"Erreur",description:`Stock insuffisant. Stock disponible: ${n.currentStock}`,variant:"destructive"});return}g-=l.quantity}else l.type==="adjustment"&&(g=l.quantity);l.type!=="transfer"&&r(n.id,{currentStock:g,lastRestocked:l.type==="in"?new Date().toISOString().split("T")[0]:void 0});const x=l.performedBy==="Autre"?u:l.performedBy,y={itemId:n.id,itemName:n.name,type:l.type,quantity:l.quantity,reason:l.reason,reference:l.reference||void 0,performedBy:x||void 0,date:new Date().toISOString(),notes:l.notes||void 0};a(y),o({title:"Mouvement enregistré",description:`${{in:"Entrée",out:"Sortie",adjustment:"Ajustement",transfer:"Transfert"}[l.type]} de ${l.quantity} ${n.unit} pour "${n.name}" enregistrée.`}),t(!1)},f=(p,g)=>{c(x=>({...x,[p]:g}))},m=()=>{if(!n)return 0;let p=n.currentStock;return l.type==="in"?p+=l.quantity:l.type==="out"?p-=l.quantity:l.type==="adjustment"&&(p=l.quantity),Math.max(0,p)};return n?s.jsx(et,{open:e,onOpenChange:t,children:s.jsxs(Xe,{className:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[s.jsxs(tt,{children:[s.jsxs(nt,{className:"flex items-center gap-2",children:[s.jsx(dn,{className:"h-5 w-5"}),"Mouvement de stock"]}),s.jsxs(Dt,{children:['Enregistrer un mouvement pour "',n.name,'"']})]}),s.jsxs("form",{onSubmit:h,className:"space-y-6",children:[s.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-lg border border-blue-200",children:[s.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[s.jsx(wa,{className:"h-5 w-5 text-blue-600"}),"Élément concerné"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-white p-3 rounded-lg border",children:[s.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Stock actuel"}),s.jsxs("div",{className:"font-semibold text-lg",children:[n.currentStock," ",n.unit]})]}),s.jsxs("div",{className:"bg-white p-3 rounded-lg border",children:[s.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Stock minimum"}),s.jsxs("div",{className:"font-semibold text-lg",children:[n.minimumStock," ",n.unit]})]}),s.jsxs("div",{className:"bg-white p-3 rounded-lg border",children:[s.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Emplacement"}),s.jsxs("div",{className:"font-semibold text-lg flex items-center gap-1",children:[s.jsx(ud,{className:"h-4 w-4"}),n.location||"Non défini"]})]}),s.jsxs("div",{className:"bg-white p-3 rounded-lg border",children:[s.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Prix d'achat"}),s.jsxs("div",{className:"font-semibold text-lg text-blue-600",children:[n.purchasePrice.toFixed(2)," ",i.currency]})]}),s.jsxs("div",{className:"bg-white p-3 rounded-lg border",children:[s.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Prix de vente"}),s.jsxs("div",{className:"font-semibold text-lg text-green-600",children:[n.sellingPrice.toFixed(2)," ",i.currency]})]}),s.jsxs("div",{className:"bg-white p-3 rounded-lg border",children:[s.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Valeur totale"}),s.jsxs("div",{className:"font-semibold text-lg text-purple-600",children:[n.totalValue.toFixed(2)," ",i.currency]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{className:"text-base font-medium",children:"Type de mouvement *"}),s.jsxs(be,{value:l.type,onValueChange:p=>f("type",p),children:[s.jsx(xe,{className:"h-12",children:s.jsx(je,{placeholder:"Sélectionner le type de mouvement"})}),s.jsx(ye,{children:uke.map(p=>{const g=p.icon;return s.jsx(q,{value:p.value,children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(g,{className:"h-5 w-5"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:p.label}),s.jsx("div",{className:"text-xs text-muted-foreground",children:p.description})]})]})},p.value)})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"quantity",className:"text-base font-medium",children:"Quantité *"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(J,{id:"quantity",type:"number",min:"0",step:"0.01",value:l.quantity,onChange:p=>f("quantity",parseFloat(p.target.value)||0),className:"flex-1 h-12 text-lg",required:!0}),s.jsx("div",{className:"bg-muted px-3 py-2 rounded-md text-sm font-medium",children:n.unit})]}),l.quantity>0&&s.jsxs("div",{className:"bg-muted p-3 rounded-lg",children:[s.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Nouveau stock après mouvement:"}),s.jsxs("div",{className:`text-lg font-semibold ${m()<=n.minimumStock?"text-orange-600":"text-green-600"}`,children:[m()," ",n.unit]}),m()<=n.minimumStock&&s.jsxs("div",{className:"text-xs text-orange-600 mt-1 flex items-center gap-1",children:[s.jsx(pn,{className:"h-3 w-3"}),"Stock bas - Seuil minimum atteint"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"reason",className:"text-base font-medium",children:"Raison *"}),s.jsxs(be,{value:l.reason,onValueChange:p=>f("reason",p),children:[s.jsx(xe,{className:"h-12",children:s.jsx(je,{placeholder:"Sélectionner une raison"})}),s.jsx(ye,{children:(v=dke[l.type])==null?void 0:v.map(p=>s.jsx(q,{value:p,children:p},p))})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"reference",className:"text-base font-medium",children:"Référence"}),s.jsx(J,{id:"reference",value:l.reference,onChange:p=>f("reference",p.target.value),placeholder:"ex: Facture #12345, Consultation #678",className:"h-12"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"performedBy",className:"text-base font-medium",children:"Effectué par"}),s.jsxs(be,{value:l.performedBy,onValueChange:p=>f("performedBy",p),children:[s.jsx(xe,{className:"h-12",children:s.jsx(je,{placeholder:"Sélectionner un vétérinaire"})}),s.jsxs(ye,{children:[i.veterinarians.filter(p=>p.isActive).map(p=>s.jsx(q,{value:p.name,children:p.name},p.id)),s.jsx(q,{value:"Autre",children:"Autre (saisie manuelle)"})]})]}),l.performedBy==="Autre"&&s.jsx(J,{placeholder:"Nom du responsable",value:u,onChange:p=>d(p.target.value),className:"h-10 mt-2"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"notes",className:"text-base font-medium",children:"Notes"}),s.jsx(We,{id:"notes",value:l.notes,onChange:p=>f("notes",p.target.value),placeholder:"Notes supplémentaires...",rows:4,className:"resize-none"})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t",children:[s.jsx(L,{type:"button",variant:"outline",onClick:()=>t(!1),className:"h-12 px-6",children:"Annuler"}),s.jsxs(L,{type:"submit",className:"h-12 px-8 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700",children:[s.jsx(dn,{className:"h-4 w-4 mr-2"}),"Enregistrer le mouvement"]})]})]})]})}):null}const dh={medication:{label:"Médicaments",color:"bg-blue-100 text-blue-800",icon:"💊"},vaccine:{label:"Vaccins",color:"bg-green-100 text-green-800",icon:"💉"},consumable:{label:"Consommables",color:"bg-orange-100 text-orange-800",icon:"🩹"},equipment:{label:"Équipement",color:"bg-purple-100 text-purple-800",icon:"🔧"},supplement:{label:"Suppléments",color:"bg-yellow-100 text-yellow-800",icon:"🧪"}},fke=[{value:"unit",label:"Unité"},{value:"box",label:"Boîte"},{value:"vial",label:"Flacon"},{value:"bottle",label:"Bouteille"},{value:"pack",label:"Paquet"},{value:"kg",label:"Kilogramme"},{value:"g",label:"Gramme"},{value:"ml",label:"Millilitre"},{value:"l",label:"Litre"}];function mke(){const{stockItems:e,stockAlerts:t,stockMovements:n,addStockItem:r,updateStockItem:a,deleteStockItem:i,addStockMovement:o,getStockAlerts:l}=wn(),{settings:c}=Pt(),{toast:u}=at(),[d,h]=j.useState(!1),[f,m]=j.useState(!1),[v,p]=j.useState(!1),[g,x]=j.useState(null),[y,b]=j.useState(null),[N,w]=j.useState(""),[S,_]=j.useState("all"),[C,P]=j.useState("all"),[A,O]=j.useState("name"),[E,z]=j.useState("asc"),[I,W]=j.useState(null),[V,H]=j.useState(""),k=j.useMemo(()=>{const Z=e.length,B=e.reduce((fe,Se)=>fe+Se.totalValue,0),oe=e.filter(fe=>fe.currentStock<=fe.minimumStock).length,U=e.filter(fe=>fe.expirationDate&&new Date(fe.expirationDate)<new Date).length,K=e.filter(fe=>fe.expirationDate&&new Date(fe.expirationDate)<=new Date(Date.now()+30*24*60*60*1e3)&&new Date(fe.expirationDate)>new Date).length;return{totalItems:Z,totalValue:B,lowStockItems:oe,expiredItems:U,expiringSoonItems:K}},[e]),D=j.useMemo(()=>{let Z=e.filter(B=>{var fe,Se;const oe=B.name.toLowerCase().includes(N.toLowerCase())||((fe=B.manufacturer)==null?void 0:fe.toLowerCase().includes(N.toLowerCase()))||((Se=B.batchNumber)==null?void 0:Se.toLowerCase().includes(N.toLowerCase())),U=S==="all"||B.category===S;let K=!0;return C==="low_stock"?K=B.currentStock<=B.minimumStock:C==="expired"?K=B.expirationDate&&new Date(B.expirationDate)<new Date:C==="expiring_soon"?K=B.expirationDate&&new Date(B.expirationDate)<=new Date(Date.now()+2592e6)&&new Date(B.expirationDate)>new Date:C==="active"&&(K=B.isActive),oe&&U&&K});return Z.sort((B,oe)=>{let U,K;switch(A){case"name":U=B.name.toLowerCase(),K=oe.name.toLowerCase();break;case"currentStock":U=B.currentStock,K=oe.currentStock;break;case"totalValue":U=B.totalValue,K=oe.totalValue;break;case"expirationDate":U=B.expirationDate||"9999-12-31",K=oe.expirationDate||"9999-12-31";break;default:U=B.name.toLowerCase(),K=oe.name.toLowerCase()}return E==="asc"?U<K?-1:U>K?1:0:U>K?-1:U<K?1:0}),Z},[e,N,S,C,A,E]),X=(Z,B,oe)=>{const U={};switch(B){case"currentStock":U.currentStock=parseInt(oe)||0;break;case"minimumStock":U.minimumStock=parseInt(oe)||0;break;case"purchasePrice":U.purchasePrice=parseFloat(oe)||0;break;case"sellingPrice":U.sellingPrice=parseFloat(oe)||0;break;case"location":U.location=oe;break;case"notes":U.notes=oe;break}a(Z,U),W(null),u({title:"Stock mis à jour",description:"L'élément de stock a été mis à jour avec succès."})},Q=Z=>{b(Z),p(!0)},te=Z=>{p(Z),Z||b(null)},ne=Z=>{confirm(`Êtes-vous sûr de vouloir supprimer "${Z.name}" du stock ?`)&&(i(Z.id),u({title:"Élément supprimé",description:`"${Z.name}" a été supprimé du stock.`}))},T=Z=>{x(Z),m(!0)},ce=()=>{const Z=[["Nom","Catégorie","Sous-catégorie","Fabricant","Numéro de lot","Dosage","Unité","Stock actuel","Stock minimum","Prix d'achat","Prix de vente","Date d'expiration","Fournisseur","Emplacement","Notes","Code-barres","SKU"].join(","),...e.map(K=>[`"${K.name}"`,`"${K.category}"`,`"${K.subcategory||""}"`,`"${K.manufacturer||""}"`,`"${K.batchNumber||""}"`,`"${K.dosage||""}"`,`"${K.unit}"`,K.currentStock,K.minimumStock,K.purchasePrice,K.sellingPrice,`"${K.expirationDate||""}"`,`"${K.supplier||""}"`,`"${K.location||""}"`,`"${K.notes||""}"`,`"${K.barcode||""}"`,`"${K.sku||""}"`].join(","))].join(`
`),B=new Blob([Z],{type:"text/csv;charset=utf-8;"}),oe=document.createElement("a"),U=URL.createObjectURL(B);oe.setAttribute("href",U),oe.setAttribute("download",`stock_${new Date().toISOString().split("T")[0]}.csv`),oe.style.visibility="hidden",document.body.appendChild(oe),oe.click(),document.body.removeChild(oe),u({title:"Export réussi",description:"Le fichier CSV a été téléchargé avec succès."})},me=Z=>{var U;const B=(U=Z.target.files)==null?void 0:U[0];if(!B)return;const oe=new FileReader;oe.onload=K=>{var fe;try{const $e=((fe=K.target)==null?void 0:fe.result).split(`
`),Ue=$e[0].split(",").map(Me=>Me.replace(/"/g,"").trim()),Tt=["Nom","Catégorie","Unité","Stock actuel","Stock minimum","Prix d'achat","Prix de vente"].filter(Me=>!Ue.includes(Me));if(Tt.length>0){u({title:"Erreur d'import",description:`En-têtes manquants: ${Tt.join(", ")}`,variant:"destructive"});return}const Rt=[];let ae=0,Ne=0;for(let Me=1;Me<$e.length;Me++){const He=$e[Me].trim();if(He)try{const dr=He.split(",").map(Be=>Be.replace(/"/g,"").trim()),ct={};if(Ue.forEach((Be,ea)=>{ct[Be]=dr[ea]||""}),!ct.Nom||!ct.Catégorie||!ct.Unité){Ne++;continue}if(!Object.keys(dh).includes(ct.Catégorie)){Ne++;continue}const ie={id:Date.now()+Me,name:ct.Nom,category:ct.Catégorie,subcategory:ct["Sous-catégorie"]||"",manufacturer:ct.Fabricant||"",batchNumber:ct["Numéro de lot"]||"",dosage:ct.Dosage||"",unit:ct.Unité,currentStock:parseInt(ct["Stock actuel"])||0,minimumStock:parseInt(ct["Stock minimum"])||0,purchasePrice:parseFloat(ct["Prix d'achat"])||0,sellingPrice:parseFloat(ct["Prix de vente"])||0,totalValue:(parseInt(ct["Stock actuel"])||0)*(parseFloat(ct["Prix d'achat"])||0),expirationDate:ct["Date d'expiration"]||void 0,supplier:ct.Fournisseur||"",location:ct.Emplacement||"",notes:ct.Notes||"",barcode:ct["Code-barres"]||"",sku:ct.SKU||"",lastUpdated:new Date().toISOString(),isActive:!0};Rt.push(ie),ae++}catch(dr){Ne++,console.error(`Erreur ligne ${Me+1}:`,dr)}}Rt.length>0&&Rt.forEach(Me=>{r(Me)}),u({title:"Import terminé",description:`${ae} éléments importés avec succès${Ne>0?`, ${Ne} erreurs`:""}.`})}catch{u({title:"Erreur d'import",description:"Impossible de lire le fichier CSV.",variant:"destructive"})}},oe.readAsText(B),Z.target.value=""},le=()=>{const Z=[["Nom","Catégorie","Sous-catégorie","Fabricant","Numéro de lot","Dosage","Unité","Stock actuel","Stock minimum","Prix d'achat","Prix de vente","Date d'expiration","Fournisseur","Emplacement","Notes","Code-barres","SKU"].join(","),["Amoxicilline 500mg","medication","Antibiotique","Boehringer Ingelheim","AMX2024001","500mg","box","15","5","20.00","25.50","2025-12-31","Pharmacie Vétérinaire Centrale","Armoire A - Étagère 1","Stockage à température ambiante","1234567890123","MED-AMX-500"].join(","),["Vaccin DHPP","vaccine","Vaccin combiné","Merial","VAC2024001","1ml","vial","25","10","45.00","55.00","2025-06-30","VetoPharma","Réfrigérateur - Étagère 1","Conservation entre 2-8°C","9876543210987","VAC-DHPP-001"].join(","),["Seringues 5ml","consumable","Matériel médical","BD","SYR2024001","5ml","unit","100","20","0.50","0.75","","MedSupply","Armoire B - Étagère 2","Usage unique","5556667778889","CON-SYR-5ML"].join(",")].join(`
`),B=new Blob([Z],{type:"text/csv;charset=utf-8;"}),oe=document.createElement("a"),U=URL.createObjectURL(B);oe.setAttribute("href",U),oe.setAttribute("download","gabarit_import_stock.csv"),oe.style.visibility="hidden",document.body.appendChild(oe),oe.click(),document.body.removeChild(oe),u({title:"Gabarit téléchargé",description:"Le fichier gabarit a été téléchargé avec succès."})};return s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-4 sm:py-8 space-y-4 sm:space-y-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold flex items-center gap-3",children:[s.jsx(wa,{className:"h-6 sm:h-8 w-6 sm:w-8 text-primary"}),"Gestion de Stock"]}),s.jsx("p",{className:"text-muted-foreground mt-2 text-sm sm:text-base",children:"Gérez votre inventaire de médicaments, vaccins et consommables"})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto",children:[s.jsxs(L,{variant:"outline",onClick:ce,className:"gap-2 text-xs sm:text-sm",size:"sm",children:[s.jsx(cx,{className:"h-3 sm:h-4 w-3 sm:w-4"}),"Exporter CSV"]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"file",accept:".csv,.xlsx,.xls",onChange:me,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",id:"import-file"}),s.jsx(L,{variant:"outline",className:"gap-2 text-xs sm:text-sm",size:"sm",asChild:!0,children:s.jsxs("label",{htmlFor:"import-file",className:"cursor-pointer",children:[s.jsx(Nj,{className:"h-3 sm:h-4 w-3 sm:w-4"}),"Importer CSV"]})})]}),s.jsxs(L,{variant:"outline",onClick:le,className:"gap-2 text-xs sm:text-sm",size:"sm",children:[s.jsx(EC,{className:"h-3 sm:h-4 w-3 sm:w-4"}),"Gabarit"]}),s.jsxs(L,{className:"gap-2 medical-glow text-xs sm:text-sm",size:"sm",onClick:()=>h(!0),children:[s.jsx(lt,{className:"h-3 sm:h-4 w-3 sm:w-4"}),"Nouvel Élément"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:[s.jsx(re,{children:s.jsx(se,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Éléments"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold",children:k.totalItems})]}),s.jsx(wa,{className:"h-6 sm:h-8 w-6 sm:w-8 text-muted-foreground"})]})})}),s.jsx(re,{children:s.jsx(se,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Valeur Totale"}),s.jsxs("p",{className:"text-xl sm:text-2xl font-bold",children:[k.totalValue.toFixed(2)," ",c.currency]})]}),s.jsx(cd,{className:"h-6 sm:h-8 w-6 sm:w-8 text-green-600"})]})})}),s.jsx(re,{children:s.jsx(se,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Stock Bas"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-orange-600",children:k.lowStockItems})]}),s.jsx(pn,{className:"h-6 sm:h-8 w-6 sm:w-8 text-orange-600"})]})})}),s.jsx(re,{children:s.jsx(se,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Expirés"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-red-600",children:k.expiredItems})]}),s.jsx(rf,{className:"h-6 sm:h-8 w-6 sm:w-8 text-red-600"})]})})}),s.jsx(re,{children:s.jsx(se,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Expirent Bientôt"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-yellow-600",children:k.expiringSoonItems})]}),s.jsx(tn,{className:"h-6 sm:h-8 w-6 sm:w-8 text-yellow-600"})]})})})]}),s.jsxs(re,{children:[s.jsx(de,{children:s.jsxs(he,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[s.jsx(vI,{className:"h-4 sm:h-5 w-4 sm:w-5"}),"Rechercher et filtrer"]})}),s.jsx(se,{className:"space-y-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-wrap",children:[s.jsx("div",{className:"flex-1 min-w-[250px] sm:min-w-[300px]",children:s.jsx(J,{placeholder:"Rechercher par nom, fabricant, lot...",value:N,onChange:Z=>w(Z.target.value),className:"w-full"})}),s.jsxs(be,{value:S,onValueChange:_,children:[s.jsx(xe,{className:"w-full sm:w-48",children:s.jsx(je,{placeholder:"Catégorie"})}),s.jsxs(ye,{children:[s.jsx(q,{value:"all",children:"Toutes les catégories"}),Object.entries(dh).map(([Z,B])=>s.jsxs(q,{value:Z,children:[B.icon," ",B.label]},Z))]})]}),s.jsxs(be,{value:C,onValueChange:P,children:[s.jsx(xe,{className:"w-full sm:w-48",children:s.jsx(je,{placeholder:"Statut"})}),s.jsxs(ye,{children:[s.jsx(q,{value:"all",children:"Tous les statuts"}),s.jsx(q,{value:"active",children:"Actifs"}),s.jsx(q,{value:"low_stock",children:"Stock bas"}),s.jsx(q,{value:"expired",children:"Expirés"}),s.jsx(q,{value:"expiring_soon",children:"Expirent bientôt"})]})]}),s.jsxs(be,{value:A,onValueChange:O,children:[s.jsx(xe,{className:"w-full sm:w-48",children:s.jsx(je,{placeholder:"Trier par"})}),s.jsxs(ye,{children:[s.jsx(q,{value:"name",children:"Nom"}),s.jsx(q,{value:"currentStock",children:"Stock actuel"}),s.jsx(q,{value:"totalValue",children:"Valeur totale"}),s.jsx(q,{value:"expirationDate",children:"Date d'expiration"})]})]}),s.jsx(L,{variant:"outline",onClick:()=>z(E==="asc"?"desc":"asc"),size:"sm",className:"w-full sm:w-auto",children:E==="asc"?s.jsx(dn,{className:"h-4 w-4"}):s.jsx(Cu,{className:"h-4 w-4"})})]})})]}),s.jsx(re,{className:"bg-blue-50 border-blue-200",children:s.jsx(se,{className:"pt-4 sm:pt-6",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(EC,{className:"h-4 sm:h-5 w-4 sm:w-5 text-blue-600 mt-0.5"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"font-semibold text-blue-900 text-sm sm:text-base",children:"Import en masse"}),s.jsx("p",{className:"text-sm text-blue-700",children:'Utilisez le bouton "Gabarit" pour télécharger un fichier CSV avec le format correct. Les données importées seront ajoutées au stock existant.'}),s.jsxs("div",{className:"text-xs text-blue-600",children:[s.jsx("strong",{children:"Catégories valides :"})," medication, vaccine, consumable, equipment, supplement"]}),s.jsxs("div",{className:"text-xs text-blue-600",children:[s.jsx("strong",{children:"Unités valides :"})," box, vial, unit, ml, mg, g, kg, l, pack, tube, sachet"]})]})]})})}),s.jsxs(re,{children:[s.jsx(de,{children:s.jsxs(he,{className:"text-lg sm:text-xl",children:["Inventaire (",D.length," éléments)"]})}),s.jsxs(se,{children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Rd,{children:[s.jsx(Ld,{children:s.jsxs(Qs,{children:[s.jsx(it,{className:"min-w-[150px]",children:"Nom"}),s.jsx(it,{className:"min-w-[120px]",children:"Catégorie"}),s.jsx(it,{className:"min-w-[100px] hidden sm:table-cell",children:"Fabricant"}),s.jsx(it,{className:"min-w-[100px]",children:"Stock"}),s.jsx(it,{className:"min-w-[100px] hidden md:table-cell",children:"Prix d'achat"}),s.jsx(it,{className:"min-w-[100px] hidden md:table-cell",children:"Prix de vente"}),s.jsx(it,{className:"min-w-[100px] hidden lg:table-cell",children:"Valeur totale"}),s.jsx(it,{className:"min-w-[100px] hidden md:table-cell",children:"Expiration"}),s.jsx(it,{className:"min-w-[120px] hidden lg:table-cell",children:"Emplacement"}),s.jsx(it,{className:"min-w-[120px]",children:"Actions"})]})}),s.jsx(Fd,{children:D.map(Z=>{var K;const B=Z.currentStock<=Z.minimumStock,oe=Z.expirationDate&&new Date(Z.expirationDate)<new Date,U=Z.expirationDate&&new Date(Z.expirationDate)<=new Date(Date.now()+30*24*60*60*1e3)&&new Date(Z.expirationDate)>new Date;return s.jsxs(Qs,{className:Z.isActive?"":"opacity-50",children:[s.jsx(ot,{children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"font-medium text-sm sm:text-base",children:Z.name}),Z.batchNumber&&s.jsxs("div",{className:"text-xs sm:text-sm text-muted-foreground",children:["Lot: ",Z.batchNumber]}),Z.dosage&&s.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:Z.dosage})]})}),s.jsxs(ot,{children:[s.jsxs(ke,{className:`${dh[Z.category].color} text-xs sm:text-sm`,children:[dh[Z.category].icon," ",dh[Z.category].label]}),Z.subcategory&&s.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:Z.subcategory})]}),s.jsx(ot,{className:"hidden sm:table-cell",children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-sm",children:Z.manufacturer||"-"}),Z.supplier&&s.jsx("div",{className:"text-xs text-muted-foreground",children:Z.supplier})]})}),s.jsx(ot,{children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:`font-medium text-sm sm:text-base ${B?"text-orange-600":""}`,children:[Z.currentStock," ",((K=fke.find(fe=>fe.value===Z.unit))==null?void 0:K.label)||Z.unit]}),s.jsxs("div",{className:"text-xs sm:text-sm text-muted-foreground",children:["Min: ",Z.minimumStock]}),s.jsxs("div",{className:"flex items-center gap-2",children:[B&&s.jsx(ke,{variant:"destructive",className:"text-xs",children:"Stock bas"}),Z.lastUpdated&&new Date(Z.lastUpdated).getTime()>Date.now()-24*60*60*1e3&&s.jsx(ke,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700",children:"Mis à jour"})]})]})}),s.jsx(ot,{className:"hidden md:table-cell",children:(I==null?void 0:I.id)===Z.id&&I.field==="purchasePrice"?s.jsx(J,{type:"number",step:"0.01",value:V,onChange:fe=>H(fe.target.value),onBlur:()=>X(Z.id,"purchasePrice",V),onKeyDown:fe=>{fe.key==="Enter"&&X(Z.id,"purchasePrice",V)},autoFocus:!0,className:"w-16 sm:w-20"}):s.jsxs("div",{className:"cursor-pointer hover:bg-muted p-1 rounded text-sm",onClick:()=>{W({id:Z.id,field:"purchasePrice"}),H(Z.purchasePrice.toString())},children:[Z.purchasePrice.toFixed(2)," ",c.currency]})}),s.jsx(ot,{className:"hidden md:table-cell",children:(I==null?void 0:I.id)===Z.id&&I.field==="sellingPrice"?s.jsx(J,{type:"number",step:"0.01",value:V,onChange:fe=>H(fe.target.value),onBlur:()=>X(Z.id,"sellingPrice",V),onKeyDown:fe=>{fe.key==="Enter"&&X(Z.id,"sellingPrice",V)},autoFocus:!0,className:"w-16 sm:w-20"}):s.jsxs("div",{className:"cursor-pointer hover:bg-muted p-1 rounded",onClick:()=>{W({id:Z.id,field:"sellingPrice"}),H(Z.sellingPrice.toString())},children:[s.jsxs("div",{className:"font-medium text-sm",children:[Z.sellingPrice.toFixed(2)," ",c.currency]}),s.jsxs("div",{className:"text-xs text-green-600",children:["Marge: ",((Z.sellingPrice-Z.purchasePrice)*Z.currentStock).toFixed(2)," ",c.currency]})]})}),s.jsx(ot,{className:"hidden lg:table-cell",children:s.jsxs("div",{className:"font-medium text-sm",children:[Z.totalValue.toFixed(2)," ",c.currency]})}),s.jsx(ot,{className:"hidden md:table-cell",children:Z.expirationDate?s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:`text-xs sm:text-sm ${oe?"text-red-600 font-medium":U?"text-yellow-600 font-medium":""}`,children:Ge(new Date(Z.expirationDate),"dd/MM/yyyy",{locale:On})}),oe&&s.jsx(ke,{variant:"destructive",className:"text-xs",children:"Expiré"}),U&&!oe&&s.jsx(ke,{variant:"secondary",className:"text-xs bg-yellow-100 text-yellow-800",children:"Expire bientôt"})]}):s.jsx("span",{className:"text-muted-foreground text-xs sm:text-sm",children:"-"})}),s.jsx(ot,{className:"hidden lg:table-cell",children:(I==null?void 0:I.id)===Z.id&&I.field==="location"?s.jsx(J,{value:V,onChange:fe=>H(fe.target.value),onBlur:()=>X(Z.id,"location",V),onKeyDown:fe=>{fe.key==="Enter"&&X(Z.id,"location",V)},autoFocus:!0,className:"w-24 sm:w-32"}):s.jsxs("div",{className:"cursor-pointer hover:bg-muted p-1 rounded flex items-center gap-1 text-xs sm:text-sm",onClick:()=>{W({id:Z.id,field:"location"}),H(Z.location||"")},children:[s.jsx(ud,{className:"h-3 w-3"}),Z.location||"Non défini"]})}),s.jsx(ot,{children:s.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[s.jsx(L,{size:"sm",variant:"outline",onClick:()=>T(Z),className:"p-1 sm:p-2",children:s.jsx(dn,{className:"h-3 w-3"})}),s.jsx(L,{size:"sm",variant:"outline",onClick:()=>Q(Z),className:"p-1 sm:p-2",children:s.jsx(qt,{className:"h-3 w-3"})}),s.jsx(L,{size:"sm",variant:"outline",onClick:()=>ne(Z),className:"p-1 sm:p-2",children:s.jsx(It,{className:"h-3 w-3"})})]})})]},Z.id)})})]})}),D.length===0&&s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(wa,{className:"h-8 sm:h-12 w-8 sm:w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{className:"text-sm sm:text-base",children:"Aucun élément trouvé"}),s.jsx("p",{className:"text-xs sm:text-sm",children:"Ajustez vos filtres ou ajoutez de nouveaux éléments"})]})]})]}),s.jsxs(re,{children:[s.jsxs(de,{children:[s.jsxs(he,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[s.jsx(tn,{className:"h-4 sm:h-5 w-4 sm:w-5"}),"Historique des Mouvements (",n.length,")"]}),s.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Derniers mouvements de stock (prescriptions, achats, ajustements)"})]}),s.jsx(se,{children:n.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(tn,{className:"h-8 sm:h-12 w-8 sm:w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{className:"text-sm sm:text-base",children:"Aucun mouvement de stock enregistré"})]}):s.jsxs("div",{className:"space-y-4",children:[n.sort((Z,B)=>new Date(B.date).getTime()-new Date(Z.date).getTime()).slice(0,20).map(Z=>{const oe={in:{label:"Entrée",color:"text-green-600",icon:"↗️"},out:{label:Z.reason==="Prescription médicale"?"Prescription":"Sortie",color:Z.reason==="Prescription médicale"?"text-orange-600":"text-red-600",icon:Z.reason==="Prescription médicale"?"💊":"↘️"},adjustment:{label:"Ajustement",color:"text-blue-600",icon:"⚖️"},transfer:{label:"Transfert",color:"text-purple-600",icon:"↔️"}}[Z.type];return s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-3 sm:p-4 border rounded-lg hover:bg-muted/50 gap-2 sm:gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[s.jsx("div",{className:"text-xl sm:text-2xl",children:oe.icon}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-sm sm:text-base",children:Z.itemName}),s.jsxs("div",{className:"text-xs sm:text-sm text-muted-foreground",children:[Z.reason," • ",Z.performedBy||"Non spécifié"]}),Z.reference&&s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Référence: ",Z.reference]})]})]}),s.jsxs("div",{className:"text-right sm:text-left",children:[s.jsxs("div",{className:`font-semibold text-sm sm:text-base ${oe.color}`,children:[Z.type==="in"?"+":Z.type==="out"?"-":"",Z.quantity]}),s.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:Ge(new Date(Z.date),"dd/MM/yyyy HH:mm",{locale:On})})]})]},Z.id)}),n.length>20&&s.jsx("div",{className:"text-center pt-4",children:s.jsxs(L,{variant:"outline",size:"sm",className:"text-xs sm:text-sm",children:["Voir tous les mouvements (",n.length,")"]})})]})})]}),s.jsx(pO,{open:d,onOpenChange:h}),s.jsx(pO,{open:v,onOpenChange:te,editingItem:y}),s.jsx(hke,{open:f,onOpenChange:m,item:g})]})}const pke={monthly:[{description:"Salaire Secrétaire",amount:3e3,type:"expense",frequency:"monthly",source:"salary"},{description:"CNSS Secrétaire",amount:700,type:"expense",frequency:"monthly",source:"insurance"},{description:"CNSS Vétérinaire",amount:1500,type:"expense",frequency:"monthly",source:"insurance"},{description:"Loyer",amount:3e3,type:"expense",frequency:"monthly",source:"rent"},{description:"Eau et Électricité",amount:300,type:"expense",frequency:"monthly",source:"other"}],annual:[{description:"Impôts",amount:3e3,type:"expense",frequency:"annual",source:"tax"},{description:"Cotisation Ordre des Vétérinaires",amount:1200,type:"expense",frequency:"annual",source:"other"}],occasional:[{description:"Maintenance Équipement",amount:500,type:"expense",frequency:"occasional",source:"other"},{description:"Formation Professionnelle",amount:800,type:"expense",frequency:"occasional",source:"other"},{description:"Achat Matériel",amount:1200,type:"expense",frequency:"occasional",source:"other"}]},gke=()=>{const{accountingEntries:e,addAccountingEntry:t,updateAccountingEntry:n,deleteAccountingEntry:r,generateAccountingSummary:a,consultations:i,vaccinations:o,antiparasitics:l,prescriptions:c,stockMovements:u,stockItems:d}=wn(),{settings:h}=Pt();at();const[f,m]=j.useState("month"),[v,p]=j.useState(""),[g,x]=j.useState(""),[y,b]=j.useState(!1),[N,w]=j.useState(null),[S,_]=j.useState(null),[C,P]=j.useState(!1),[A,O]=j.useState(pke),[E,z]=j.useState(!1),[I,W]=j.useState(null),[V,H]=j.useState({description:"",amount:"",type:"expense",frequency:"monthly",source:"other"}),[k,D]=j.useState({type:"revenue",frequency:"occasional",description:"",amount:"",date:"",source:"other",notes:""});j.useEffect(()=>{const U=new Date,K=new Date(U.getFullYear(),U.getMonth(),1),fe=new Date(U.getFullYear(),U.getMonth()+1,0);p(Ge(K,"yyyy-MM-dd")),x(Ge(fe,"yyyy-MM-dd"))},[]),j.useEffect(()=>{if(v&&g){const U=f==="month"?Ge(new Date(v),"yyyy-MM",{locale:On}):f==="year"?Ge(new Date(v),"yyyy",{locale:On}):f==="day"?Ge(new Date(v),"dd/MM/yyyy",{locale:On}):`${Ge(new Date(v),"dd/MM/yyyy")} - ${Ge(new Date(g),"dd/MM/yyyy")}`,K=a(U,v,g);_(K)}},[v,g,f,e,i,o,l,c,u,a]);const X=U=>{m(U);const K=new Date;switch(U){case"day":const fe=Ge(K,"yyyy-MM-dd");p(fe),x(fe);break;case"month":const Se=new Date(K.getFullYear(),K.getMonth(),1),$e=new Date(K.getFullYear(),K.getMonth()+1,0);p(Ge(Se,"yyyy-MM-dd")),x(Ge($e,"yyyy-MM-dd"));break;case"quarter":const Ue=Math.floor(K.getMonth()/3),ft=new Date(K.getFullYear(),Ue*3,1),Tt=new Date(K.getFullYear(),Ue*3+3,0);p(Ge(ft,"yyyy-MM-dd")),x(Ge(Tt,"yyyy-MM-dd"));break;case"year":const Rt=new Date(K.getFullYear(),0,1),ae=new Date(K.getFullYear(),11,31);p(Ge(Rt,"yyyy-MM-dd")),x(Ge(ae,"yyyy-MM-dd"));break}},Q=()=>{if(!k.description||!k.amount||!k.date)return;const U={type:k.type,category:"manual",frequency:k.frequency,description:k.description,amount:parseFloat(k.amount),date:k.date,source:k.source,notes:k.notes};N?(n(N.id,U),w(null)):t(U),D({type:"revenue",frequency:"occasional",description:"",amount:"",date:"",source:"other",notes:""}),b(!1)},te=U=>{w(U),D({type:U.type,frequency:U.frequency,description:U.description,amount:U.amount.toString(),date:U.date,source:U.source||"other",notes:U.notes||""}),b(!0)},ne=U=>{window.confirm("Êtes-vous sûr de vouloir supprimer cette entrée ?")&&r(U)},T=U=>{D({...k,type:U.type,frequency:U.frequency||"occasional",description:U.description,amount:U.amount.toString(),source:U.source,date:k.date||Ge(new Date,"yyyy-MM-dd")}),P(!1)},ce=()=>{if(!V.description||!V.amount)return;const U={description:V.description,amount:parseFloat(V.amount),type:V.type,frequency:V.frequency,source:V.source};if(I){const K={...A},fe=I.frequency,Se=K[fe].findIndex($e=>$e===I);Se!==-1&&(K[fe][Se]=U),O(K),W(null)}else{const K={...A},fe=V.frequency;K[fe].push(U),O(K)}H({description:"",amount:"",type:"expense",frequency:"monthly",source:"other"}),z(!1)},me=U=>{W(U),H({description:U.description,amount:U.amount.toString(),type:U.type,frequency:U.frequency,source:U.source}),z(!0)},le=U=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer cette suggestion ?")){const K={...A},fe=U.frequency;K[fe]=K[fe].filter(Se=>Se!==U),O(K)}},Z=e.filter(U=>{const K=new Date(U.date),fe=new Date(v),Se=new Date(g);return K>=fe&&K<=Se}),B=U=>`${U.toFixed(2)} ${h.currency}`,oe=U=>{switch(U){case"consultation":return"🩺";case"vaccination":return"💉";case"antiparasitic":return"💊";case"prescription":return"📋";case"stock_purchase":return"📦";case"salary":return"👥";case"rent":return"🏢";case"tax":return"📊";case"insurance":return"🛡️";default:return"📄"}};return s.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto p-4 sm:p-6 lg:p-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold flex items-center gap-2",children:[s.jsx(pI,{className:"h-6 w-6 sm:h-8 sm:w-8"}),"Gestion Comptable"]}),s.jsx("p",{className:"text-muted-foreground text-sm sm:text-base",children:"Suivi des recettes et charges de votre clinique vétérinaire"})]}),s.jsx("div",{className:"flex gap-2 w-full sm:w-auto",children:s.jsxs(et,{open:y,onOpenChange:b,children:[s.jsx(jm,{asChild:!0,children:s.jsxs(L,{onClick:()=>{w(null),D({type:"revenue",frequency:"occasional",description:"",amount:"",date:"",source:"other",notes:""})},className:"w-full sm:w-auto",children:[s.jsx(lt,{className:"h-4 w-4 mr-2"}),"Ajouter une entrée"]})}),s.jsxs(Xe,{className:"max-w-2xl max-h-[90vh] overflow-y-auto w-full mx-4",children:[s.jsxs(tt,{children:[s.jsx(nt,{className:"text-lg sm:text-xl",children:N?"Modifier l'entrée comptable":"Ajouter une entrée comptable"}),s.jsx(Dt,{className:"text-sm sm:text-base",children:N?"Modifiez les informations de cette entrée.":"Ajoutez une nouvelle recette ou charge manuelle."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"border rounded-lg p-4 bg-muted/50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(S0,{className:"h-4 w-4 text-yellow-600"}),s.jsx(M,{className:"text-sm font-medium",children:"Suggestions prédéfinies"})]}),s.jsx(L,{variant:"ghost",size:"sm",onClick:()=>P(!C),className:"p-2",children:C?s.jsx(fm,{className:"h-4 w-4"}):s.jsx(S0,{className:"h-4 w-4"})})]}),C&&s.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Charges mensuelles"}),s.jsx("div",{className:"grid grid-cols-1 gap-2",children:A.monthly.map((U,K)=>s.jsx(L,{variant:"outline",size:"sm",className:"justify-start text-left h-auto p-3 text-sm",onClick:()=>T(U),children:s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center w-full gap-1",children:[s.jsx("span",{className:"text-sm",children:U.description}),s.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:[U.amount," ",h.currency]})]})},K))})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Charges annuelles"}),s.jsx("div",{className:"grid grid-cols-1 gap-2",children:A.annual.map((U,K)=>s.jsx(L,{variant:"outline",size:"sm",className:"justify-start text-left h-auto p-3 text-sm",onClick:()=>T(U),children:s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center w-full gap-1",children:[s.jsx("span",{className:"text-sm",children:U.description}),s.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:[U.amount," ",h.currency]})]})},K))})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Charges occasionnelles"}),s.jsx("div",{className:"grid grid-cols-1 gap-2",children:A.occasional.map((U,K)=>s.jsx(L,{variant:"outline",size:"sm",className:"justify-start text-left h-auto p-3 text-sm",onClick:()=>T(U),children:s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center w-full gap-1",children:[s.jsx("span",{className:"text-sm",children:U.description}),s.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:[U.amount," ",h.currency]})]})},K))})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(M,{htmlFor:"type",children:"Type"}),s.jsxs(be,{value:k.type,onValueChange:U=>D({...k,type:U}),children:[s.jsx(xe,{children:s.jsx(je,{})}),s.jsxs(ye,{children:[s.jsx(q,{value:"revenue",children:"Recette"}),s.jsx(q,{value:"expense",children:"Charge"})]})]})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"frequency",children:"Fréquence"}),s.jsxs(be,{value:k.frequency,onValueChange:U=>D({...k,frequency:U}),children:[s.jsx(xe,{children:s.jsx(je,{})}),s.jsxs(ye,{children:[s.jsx(q,{value:"monthly",children:"Mensuel"}),s.jsx(q,{value:"annual",children:"Annuel"}),s.jsx(q,{value:"occasional",children:"Occasionnel"})]})]})]})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"description",children:"Description"}),s.jsx(J,{id:"description",value:k.description,onChange:U=>D({...k,description:U.target.value}),placeholder:"Ex: Salaire employé, Loyer, etc."})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs(M,{htmlFor:"amount",children:["Montant (",h.currency,")"]}),s.jsx(J,{id:"amount",type:"number",step:"0.01",value:k.amount,onChange:U=>D({...k,amount:U.target.value}),placeholder:"0.00"})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"date",children:"Date"}),s.jsx(J,{id:"date",type:"date",value:k.date,onChange:U=>D({...k,date:U.target.value})})]})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"source",children:"Source"}),s.jsxs(be,{value:k.source,onValueChange:U=>D({...k,source:U}),children:[s.jsx(xe,{children:s.jsx(je,{})}),s.jsxs(ye,{children:[s.jsx(q,{value:"salary",children:"Salaire"}),s.jsx(q,{value:"rent",children:"Loyer"}),s.jsx(q,{value:"tax",children:"Impôts"}),s.jsx(q,{value:"insurance",children:"Assurance"}),s.jsx(q,{value:"other",children:"Autre"})]})]})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"notes",children:"Notes (optionnel)"}),s.jsx(We,{id:"notes",value:k.notes,onChange:U=>D({...k,notes:U.target.value}),placeholder:"Informations supplémentaires..."})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2",children:[s.jsx(L,{variant:"outline",onClick:()=>b(!1),className:"w-full sm:w-auto",children:"Annuler"}),s.jsx(L,{onClick:Q,className:"w-full sm:w-auto",children:N?"Modifier":"Ajouter"})]})]})]})]})})]}),s.jsxs(re,{children:[s.jsx(de,{children:s.jsxs(he,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[s.jsx(Ze,{className:"h-5 w-5"}),"Période d'analyse"]})}),s.jsx(se,{children:s.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-end",children:[s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(L,{variant:f==="day"?"default":"outline",onClick:()=>X("day"),size:"sm",className:"flex-1 sm:flex-none",children:"Ce jour"}),s.jsx(L,{variant:f==="month"?"default":"outline",onClick:()=>X("month"),size:"sm",className:"flex-1 sm:flex-none",children:"Ce mois"}),s.jsx(L,{variant:f==="quarter"?"default":"outline",onClick:()=>X("quarter"),size:"sm",className:"flex-1 sm:flex-none",children:"Ce trimestre"}),s.jsx(L,{variant:f==="year"?"default":"outline",onClick:()=>X("year"),size:"sm",className:"flex-1 sm:flex-none",children:"Cette année"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-start sm:items-center w-full lg:w-auto",children:[s.jsx(M,{htmlFor:"startDate",className:"text-sm",children:"Du"}),s.jsx(J,{id:"startDate",type:"date",value:v,onChange:U=>p(U.target.value),className:"w-full sm:w-40"}),s.jsx(M,{htmlFor:"endDate",className:"text-sm",children:"Au"}),s.jsx(J,{id:"endDate",type:"date",value:g,onChange:U=>x(U.target.value),className:"w-full sm:w-40"})]})]})})]}),S&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs(re,{children:[s.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(he,{className:"text-sm font-medium",children:"Total Recettes"}),s.jsx(dn,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(se,{children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:B(S.totalRevenue)}),s.jsxs("div",{className:"text-xs text-muted-foreground mt-1 space-y-1",children:[s.jsxs("div",{children:["Consultations: ",B(S.revenueBreakdown.consultations)]}),s.jsxs("div",{children:["Vaccinations: ",B(S.revenueBreakdown.vaccinations)]}),s.jsxs("div",{children:["Antiparasitaires: ",B(S.revenueBreakdown.antiparasitics)]}),s.jsxs("div",{children:["Prescriptions: ",B(S.revenueBreakdown.prescriptions)]}),s.jsxs("div",{children:["Manuelles: ",B(S.revenueBreakdown.manualEntries)]})]})]})]}),s.jsxs(re,{children:[s.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(he,{className:"text-sm font-medium",children:"Total Charges"}),s.jsx(Cu,{className:"h-4 w-4 text-red-600"})]}),s.jsxs(se,{children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:B(S.totalExpenses)}),s.jsxs("div",{className:"text-xs text-muted-foreground mt-1 space-y-1",children:[s.jsxs("div",{children:["Achats stock: ",B(S.expenseBreakdown.stockPurchases)]}),s.jsxs("div",{children:["Salaires: ",B(S.expenseBreakdown.salaries)]}),s.jsxs("div",{children:["Loyer: ",B(S.expenseBreakdown.rent)]}),s.jsxs("div",{children:["Impôts: ",B(S.expenseBreakdown.taxes)]}),s.jsxs("div",{children:["Autres: ",B(S.expenseBreakdown.other)]})]})]})]}),s.jsxs(re,{children:[s.jsxs(de,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(he,{className:"text-sm font-medium",children:"Résultat Net"}),s.jsx(cd,{className:"h-4 w-4"})]}),s.jsxs(se,{children:[s.jsx("div",{className:`text-2xl font-bold ${S.netIncome>=0?"text-green-600":"text-red-600"}`,children:B(S.netIncome)}),s.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:S.netIncome>=0?"Bénéfice":"Perte"})]})]})]}),s.jsxs(Oa,{defaultValue:"entries",className:"space-y-4",children:[s.jsxs(Ys,{className:"grid w-full grid-cols-2",children:[s.jsx(bt,{value:"entries",children:"Entrées Comptables"}),s.jsx(bt,{value:"configuration",children:"Configuration"})]}),s.jsx(jt,{value:"entries",children:s.jsxs(re,{children:[s.jsxs(de,{children:[s.jsxs(he,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[s.jsx(Xr,{className:"h-5 w-5"}),"Entrées comptables automatiques et manuelles"]}),s.jsx(Ou,{className:"text-sm sm:text-base",children:"Entrées générées automatiquement (consultations, vaccinations, etc.) et entrées manuelles ajoutées"})]}),s.jsxs(se,{children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Rd,{children:[s.jsx(Ld,{children:s.jsxs(Qs,{children:[s.jsx(it,{className:"min-w-[100px]",children:"Date"}),s.jsx(it,{className:"min-w-[80px]",children:"Type"}),s.jsx(it,{className:"min-w-[150px]",children:"Description"}),s.jsx(it,{className:"min-w-[100px]",children:"Source"}),s.jsx(it,{className:"min-w-[100px]",children:"Fréquence"}),s.jsx(it,{className:"min-w-[100px]",children:"Montant"}),s.jsx(it,{className:"min-w-[100px]",children:"Actions"})]})}),s.jsx(Fd,{children:Z.map(U=>s.jsxs(Qs,{children:[s.jsx(ot,{children:Ge(new Date(U.date),"dd/MM/yyyy",{locale:On})}),s.jsx(ot,{children:s.jsx(ke,{variant:U.type==="revenue"?"default":"destructive",className:"text-xs",children:U.type==="revenue"?"Recette":"Charge"})}),s.jsx(ot,{className:"text-sm",children:U.description}),s.jsx(ot,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:oe(U.source||"other")}),s.jsx("span",{className:"text-xs",children:U.category==="automatic"?"Automatique":"Manuel"})]})}),s.jsx(ot,{children:s.jsx(ke,{variant:"outline",className:"text-xs",children:U.frequency==="monthly"?"Mensuel":U.frequency==="annual"?"Annuel":"Occasionnel"})}),s.jsxs(ot,{className:`font-medium text-sm ${U.type==="revenue"?"text-green-600":"text-red-600"}`,children:[U.type==="revenue"?"+":"-",B(U.amount)]}),s.jsx(ot,{children:U.category==="manual"&&s.jsxs("div",{className:"flex gap-1",children:[s.jsx(L,{variant:"outline",size:"sm",onClick:()=>te(U),className:"p-1",children:s.jsx(qt,{className:"h-4 w-4"})}),s.jsx(L,{variant:"outline",size:"sm",onClick:()=>ne(U.id),className:"p-1",children:s.jsx(It,{className:"h-4 w-4"})})]})})]},U.id))})]})}),Z.length===0&&s.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"Aucune entrée comptable pour cette période"})]})]})}),s.jsx(jt,{value:"configuration",children:s.jsxs(re,{children:[s.jsxs(de,{children:[s.jsxs(he,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[s.jsx(S0,{className:"h-5 w-5"}),"Configuration des Suggestions"]}),s.jsx(Ou,{className:"text-sm sm:text-base",children:"Configurez les suggestions prédéfinies pour faciliter la saisie des charges et recettes"})]}),s.jsxs(se,{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Suggestions Mensuelles"}),s.jsxs(L,{onClick:()=>{W(null),H({description:"",amount:"",type:"expense",frequency:"monthly",source:"other"}),z(!0)},className:"w-full sm:w-auto",children:[s.jsx(lt,{className:"h-4 w-4 mr-2"}),"Ajouter"]})]}),s.jsx("div",{className:"grid gap-3",children:A.monthly.map((U,K)=>s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-3 border rounded-lg gap-2",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-sm font-medium",children:U.description}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[U.amount," ",h.currency]})]}),s.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[s.jsx(L,{variant:"outline",size:"sm",onClick:()=>me(U),className:"flex-1 sm:flex-none",children:s.jsx(qt,{className:"h-4 w-4"})}),s.jsx(L,{variant:"outline",size:"sm",onClick:()=>le(U),className:"flex-1 sm:flex-none",children:s.jsx(It,{className:"h-4 w-4"})})]})]},K))}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Suggestions Annuelles"}),s.jsxs(L,{onClick:()=>{W(null),H({description:"",amount:"",type:"expense",frequency:"annual",source:"other"}),z(!0)},className:"w-full sm:w-auto",children:[s.jsx(lt,{className:"h-4 w-4 mr-2"}),"Ajouter"]})]}),s.jsx("div",{className:"grid gap-3",children:A.annual.map((U,K)=>s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-3 border rounded-lg gap-2",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-sm font-medium",children:U.description}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[U.amount," ",h.currency]})]}),s.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[s.jsx(L,{variant:"outline",size:"sm",onClick:()=>me(U),className:"flex-1 sm:flex-none",children:s.jsx(qt,{className:"h-4 w-4"})}),s.jsx(L,{variant:"outline",size:"sm",onClick:()=>le(U),className:"flex-1 sm:flex-none",children:s.jsx(It,{className:"h-4 w-4"})})]})]},K))}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Suggestions Occasionnelles"}),s.jsxs(L,{onClick:()=>{W(null),H({description:"",amount:"",type:"expense",frequency:"occasional",source:"other"}),z(!0)},className:"w-full sm:w-auto",children:[s.jsx(lt,{className:"h-4 w-4 mr-2"}),"Ajouter"]})]}),s.jsx("div",{className:"grid gap-3",children:A.occasional.map((U,K)=>s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-3 border rounded-lg gap-2",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-sm font-medium",children:U.description}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[U.amount," ",h.currency]})]}),s.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[s.jsx(L,{variant:"outline",size:"sm",onClick:()=>me(U),className:"flex-1 sm:flex-none",children:s.jsx(qt,{className:"h-4 w-4"})}),s.jsx(L,{variant:"outline",size:"sm",onClick:()=>le(U),className:"flex-1 sm:flex-none",children:s.jsx(It,{className:"h-4 w-4"})})]})]},K))})]})]})})]}),s.jsx(et,{open:E,onOpenChange:z,children:s.jsxs(Xe,{className:"max-w-2xl max-h-[90vh] overflow-y-auto w-full mx-4",children:[s.jsxs(tt,{children:[s.jsx(nt,{className:"text-lg sm:text-xl",children:I?"Modifier la suggestion":"Ajouter une suggestion"}),s.jsx(Dt,{className:"text-sm sm:text-base",children:I?"Modifiez les informations de cette suggestion.":"Ajoutez une nouvelle suggestion prédéfinie."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(M,{htmlFor:"suggestion-type",children:"Type"}),s.jsxs(be,{value:V.type,onValueChange:U=>H({...V,type:U}),children:[s.jsx(xe,{children:s.jsx(je,{})}),s.jsxs(ye,{children:[s.jsx(q,{value:"revenue",children:"Recette"}),s.jsx(q,{value:"expense",children:"Charge"})]})]})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"suggestion-frequency",children:"Fréquence"}),s.jsxs(be,{value:V.frequency,onValueChange:U=>H({...V,frequency:U}),children:[s.jsx(xe,{children:s.jsx(je,{})}),s.jsxs(ye,{children:[s.jsx(q,{value:"monthly",children:"Mensuel"}),s.jsx(q,{value:"annual",children:"Annuel"}),s.jsx(q,{value:"occasional",children:"Occasionnel"})]})]})]})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"suggestion-description",children:"Description"}),s.jsx(J,{id:"suggestion-description",value:V.description,onChange:U=>H({...V,description:U.target.value}),placeholder:"Ex: Salaire employé, Loyer, etc."})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs(M,{htmlFor:"suggestion-amount",children:["Montant (",h.currency,")"]}),s.jsx(J,{id:"suggestion-amount",type:"number",step:"0.01",value:V.amount,onChange:U=>H({...V,amount:U.target.value}),placeholder:"0.00"})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"suggestion-source",children:"Source"}),s.jsxs(be,{value:V.source,onValueChange:U=>H({...V,source:U}),children:[s.jsx(xe,{children:s.jsx(je,{})}),s.jsxs(ye,{children:[s.jsx(q,{value:"salary",children:"Salaire"}),s.jsx(q,{value:"rent",children:"Loyer"}),s.jsx(q,{value:"tax",children:"Impôts"}),s.jsx(q,{value:"insurance",children:"Assurance"}),s.jsx(q,{value:"other",children:"Autre"})]})]})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2",children:[s.jsx(L,{variant:"outline",onClick:()=>z(!1),className:"w-full sm:w-auto",children:"Annuler"}),s.jsx(L,{onClick:ce,className:"w-full sm:w-auto",children:I?"Modifier":"Ajouter"})]})]})]})})]})},vke=()=>{const{clients:e,consultations:t,vaccinations:n,antiparasitics:r,appointments:a,addConsultation:i,addVaccination:o,addAntiparasitic:l,updateClientStats:c}=wn(),u=()=>{if(e.length>0){const m=e[0],v=m.pets[0];v&&i({clientId:m.id,clientName:m.name,petId:v.id,petName:v.name,date:new Date().toISOString().split("T")[0],symptoms:"Test consultation",diagnosis:"Test diagnosis",treatment:"Test treatment",cost:"50",notes:"Test consultation for stats update",photos:[]})}},d=()=>{if(e.length>0){const m=e[0],v=m.pets[0];v&&o({clientId:m.id,clientName:m.name,petId:v.id,petName:v.name,vaccineName:"Test Vaccine",vaccineType:"Test Type",dateGiven:new Date().toISOString().split("T")[0],nextDueDate:new Date(Date.now()+365*24*60*60*1e3).toISOString().split("T")[0],veterinarian:"Dr. Test",cost:"30",notes:"Test vaccination for stats update",status:"completed"})}},h=()=>{if(e.length>0){const m=e[0],v=m.pets[0];v&&l({clientId:m.id,clientName:m.name,petId:v.id,petName:v.name,productName:"Test Product",productType:"Test Type",dateGiven:new Date().toISOString().split("T")[0],nextDueDate:new Date(Date.now()+90*24*60*60*1e3).toISOString().split("T")[0],targetParasites:"Test Parasites",veterinarian:"Dr. Test",cost:"25",notes:"Test antiparasitic for stats update",status:"completed"})}},f=()=>{e.length>0&&e.forEach(m=>{c(m.id)})};return s.jsxs("div",{className:"container mx-auto px-6 py-8 space-y-6",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Test des Statistiques des Clients"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.jsxs(re,{children:[s.jsx(de,{children:s.jsx(he,{className:"text-lg",children:"Actions de Test"})}),s.jsxs(se,{className:"space-y-3",children:[s.jsxs(L,{onClick:u,className:"w-full",children:[s.jsx(lt,{className:"h-4 w-4 mr-2"}),"Ajouter Consultation Test"]}),s.jsxs(L,{onClick:d,className:"w-full",children:[s.jsx(lt,{className:"h-4 w-4 mr-2"}),"Ajouter Vaccination Test"]}),s.jsxs(L,{onClick:h,className:"w-full",children:[s.jsx(lt,{className:"h-4 w-4 mr-2"}),"Ajouter Antiparasite Test"]}),s.jsx(L,{onClick:f,variant:"outline",className:"w-full",children:"Mettre à jour Stats"})]})]}),s.jsxs(re,{children:[s.jsx(de,{children:s.jsx(he,{className:"text-lg",children:"Statistiques Globales"})}),s.jsxs(se,{className:"space-y-2",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Clients:"})," ",e.length]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Consultations:"})," ",t.length]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Vaccinations:"})," ",n.length]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Antiparasites:"})," ",r.length]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Rendez-vous:"})," ",a.length]})]})]}),s.jsxs(re,{children:[s.jsx(de,{children:s.jsx(he,{className:"text-lg",children:"Détails des Clients"})}),s.jsx(se,{className:"space-y-3",children:e.map(m=>s.jsxs("div",{className:"border-b pb-2",children:[s.jsx("p",{className:"font-medium",children:m.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Total visites: ",m.totalVisits," | Dernière visite: ",new Date(m.lastVisit).toLocaleDateString("fr-FR")]})]},m.id))})]})]})]})},xke=()=>s.jsx(IS,{children:s.jsx(vke,{})}),yke=()=>{const{clients:e,consultations:t,vaccinations:n,antiparasitics:r,appointments:a,addConsultation:i,addVaccination:o,addAntiparasitic:l,updateClientStats:c}=wn(),u=()=>{if(e.length>0){const m=e[0],v=m.pets[0];v&&i({clientId:m.id,clientName:m.name,petId:v.id,petName:v.name,date:new Date().toISOString().split("T")[0],symptoms:"Test consultation",diagnosis:"Test diagnosis",treatment:"Test treatment",cost:"50",notes:"Test consultation for stats update",photos:[]})}},d=()=>{if(e.length>0){const m=e[0],v=m.pets[0];v&&o({clientId:m.id,clientName:m.name,petId:v.id,petName:v.name,vaccineName:"Test Vaccine",vaccineType:"Test Type",dateGiven:new Date().toISOString().split("T")[0],nextDueDate:new Date(Date.now()+365*24*60*60*1e3).toISOString().split("T")[0],veterinarian:"Dr. Test",cost:"30",notes:"Test vaccination for stats update",status:"completed"})}},h=()=>{if(e.length>0){const m=e[0],v=m.pets[0];v&&l({clientId:m.id,clientName:m.name,petId:v.id,petName:v.name,productName:"Test Product",productType:"Test Type",dateGiven:new Date().toISOString().split("T")[0],nextDueDate:new Date(Date.now()+90*24*60*60*1e3).toISOString().split("T")[0],targetParasites:"Test Parasites",veterinarian:"Dr. Test",cost:"25",notes:"Test antiparasitic for stats update",status:"completed"})}},f=()=>{e.length>0&&e.forEach(m=>{c(m.id)})};return s.jsxs("div",{className:"container mx-auto px-6 py-8 space-y-6",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Test Simple des Statistiques"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.jsxs(re,{children:[s.jsx(de,{children:s.jsx(he,{className:"text-lg",children:"Actions de Test"})}),s.jsxs(se,{className:"space-y-3",children:[s.jsxs(L,{onClick:u,className:"w-full",children:[s.jsx(lt,{className:"h-4 w-4 mr-2"}),"Ajouter Consultation Test"]}),s.jsxs(L,{onClick:d,className:"w-full",children:[s.jsx(lt,{className:"h-4 w-4 mr-2"}),"Ajouter Vaccination Test"]}),s.jsxs(L,{onClick:h,className:"w-full",children:[s.jsx(lt,{className:"h-4 w-4 mr-2"}),"Ajouter Antiparasite Test"]}),s.jsx(L,{onClick:f,variant:"outline",className:"w-full",children:"Mettre à jour Stats"})]})]}),s.jsxs(re,{children:[s.jsx(de,{children:s.jsx(he,{className:"text-lg",children:"Statistiques Globales"})}),s.jsxs(se,{className:"space-y-2",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Clients:"})," ",e.length]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Consultations:"})," ",t.length]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Vaccinations:"})," ",n.length]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Antiparasites:"})," ",r.length]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Rendez-vous:"})," ",a.length]})]})]}),s.jsxs(re,{children:[s.jsx(de,{children:s.jsx(he,{className:"text-lg",children:"Détails des Clients"})}),s.jsx(se,{className:"space-y-3",children:e.map(m=>s.jsxs("div",{className:"border-b pb-2",children:[s.jsx("p",{className:"font-medium",children:m.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Total visites: ",m.totalVisits," | Dernière visite: ",new Date(m.lastVisit).toLocaleDateString("fr-FR")]})]},m.id))})]})]})]})},bke=()=>s.jsx(IS,{children:s.jsx(yke,{})}),jke=()=>{const e=ko();return j.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),s.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),s.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})};function wke(){const{user:e,logout:t}=To(),{toast:n}=at();if(!e)return null;const r=l=>l?l.split(" ").map(c=>c.charAt(0)).join("").toUpperCase().slice(0,2):e.profile.username.charAt(0).toUpperCase(),a=l=>{switch(l){case"admin":return"Administrateur";case"assistant":return"Assistant";default:return"Utilisateur"}},i=l=>{switch(l){case"admin":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"assistant":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"}},o=async()=>{await t(),n({title:"Déconnexion réussie",description:"Vous avez été déconnecté avec succès."})};return s.jsxs(re,{children:[s.jsx(de,{children:s.jsxs(he,{className:"flex items-center gap-2",children:[s.jsx(Vn,{className:"h-5 w-5"}),"Profil Utilisateur"]})}),s.jsxs(se,{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(Qn,{className:"h-16 w-16",children:s.jsx(Xn,{className:"bg-primary text-primary-foreground text-lg",children:r(e.profile.full_name||e.profile.username)})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold",children:e.profile.full_name||e.profile.username}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx(ux,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:e.email})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx(Vn,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:["@",e.profile.username]})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.jsx(Gn,{className:"h-4 w-4 text-muted-foreground"}),s.jsx(ke,{className:i(e.profile.role),children:a(e.profile.role)})]})]})]}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsx("h4",{className:"text-sm font-medium mb-3",children:"Informations de session"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"ID Utilisateur:"}),s.jsx("span",{className:"font-mono text-xs",children:e.id})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Nom d'utilisateur:"}),s.jsxs("span",{children:["@",e.profile.username]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Rôle:"}),s.jsx("span",{children:a(e.profile.role)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Statut:"}),s.jsx(ke,{variant:"secondary",className:"bg-green-100 text-green-800",children:"Connecté"})]})]})]}),s.jsx("div",{className:"border-t pt-4",children:s.jsxs(L,{variant:"outline",onClick:o,className:"w-full gap-2 text-red-600 hover:text-red-700 hover:bg-red-50",children:[s.jsx(xI,{className:"h-4 w-4"}),"Se déconnecter"]})})]})]})}const wb=[{key:"animals",label:"Animaux",description:"Configuration des espèces, races et couleurs"},{key:"clients",label:"Clients",description:"Types de clients et paramètres associés"},{key:"consultations",label:"Consultations",description:"Types de consultations disponibles"},{key:"appointments",label:"Rendez-vous",description:"Types de rendez-vous et configurations"},{key:"medications",label:"Médicaments",description:"Catégories de médicaments"},{key:"vaccinations",label:"Vaccinations",description:"Types de vaccinations disponibles"},{key:"parasites",label:"Parasites",description:"Types de parasites et traitements"},{key:"farms",label:"Fermes",description:"Types de fermes et configurations"},{key:"payments",label:"Paiements",description:"Méthodes de paiement acceptées"}],Nke=()=>{var S,_;const[e,t]=j.useState("animals"),[n,r]=j.useState({}),[a,i]=j.useState(!1),[o,l]=j.useState({key:"",description:"",value:""}),{toast:c}=at(),{data:u,isLoading:d}=pee(e),h=H3(),f=vee(),{initializeDefaults:m,isLoading:v}=yee();j.useEffect(()=>{if(u){const C={};u.forEach(P=>{C[P.setting_key]=P.setting_value}),r(C)}},[u]);const p=async()=>{try{await m(),c({title:"Paramètres initialisés",description:"Les paramètres par défaut ont été chargés avec succès"})}catch{c({title:"Erreur",description:"Impossible d'initialiser les paramètres par défaut",variant:"destructive"})}},g=async C=>{try{const P=n[C];await h.mutateAsync({category:e,key:C,value:P,description:`Configuration ${C} pour ${e}`}),c({title:"Paramètre sauvegardé",description:`Le paramètre ${C} a été mis à jour`})}catch{c({title:"Erreur",description:"Impossible de sauvegarder le paramètre",variant:"destructive"})}},x=async C=>{if(confirm(`Êtes-vous sûr de vouloir supprimer le paramètre ${C} ?`))try{await f.mutateAsync({category:e,key:C}),c({title:"Paramètre supprimé",description:`Le paramètre ${C} a été supprimé`})}catch{c({title:"Erreur",description:"Impossible de supprimer le paramètre",variant:"destructive"})}},y=(C,P)=>{if(!P.trim())return;const A=n[C]||[],O=Array.isArray(A)?[...A,P.trim()]:[A,P.trim()];r(E=>({...E,[C]:O}))},b=(C,P)=>{const A=n[C]||[],O=Array.isArray(A)?A.filter(E=>E!==P):[];r(E=>({...E,[C]:O}))},N=async()=>{if(!o.key.trim()){c({title:"Erreur",description:"Le nom du paramètre est obligatoire",variant:"destructive"});return}try{const C=o.value.includes(",")?o.value.split(",").map(P=>P.trim()):o.value;await h.mutateAsync({category:e,key:o.key,value:C,description:o.description||`Paramètre personnalisé ${o.key}`}),i(!1),l({key:"",description:"",value:""}),c({title:"Paramètre ajouté",description:`Le paramètre ${o.key} a été créé`})}catch{c({title:"Erreur",description:"Impossible de créer le paramètre",variant:"destructive"})}},w=(C,P)=>Array.isArray(P)?s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"flex flex-wrap gap-2",children:P.map((A,O)=>s.jsxs(ke,{variant:"secondary",className:"flex items-center gap-1",children:[A,s.jsx(fm,{className:"h-3 w-3 cursor-pointer",onClick:()=>b(C,A)})]},O))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(J,{placeholder:"Ajouter une valeur...",onKeyPress:A=>{A.key==="Enter"&&(y(C,A.target.value),A.target.value="")}}),s.jsx(L,{size:"sm",onClick:A=>{const O=A.target.previousElementSibling;y(C,O.value),O.value=""},children:s.jsx(lt,{className:"h-4 w-4"})})]})]}):typeof P=="object"?s.jsx(We,{value:JSON.stringify(P,null,2),onChange:A=>{try{const O=JSON.parse(A.target.value);r(E=>({...E,[C]:O}))}catch{}},rows:10,className:"font-mono text-sm"}):s.jsx(J,{value:P||"",onChange:A=>r(O=>({...O,[C]:A.target.value}))});return d?s.jsx("div",{className:"flex justify-center p-8",children:"Chargement..."}):s.jsxs("div",{className:"space-y-6 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(GN,{className:"h-8 w-8"}),"Gestion des paramètres"]}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Configurez les valeurs utilisées dans toute l'application"})]}),s.jsx(L,{onClick:p,disabled:v,children:v?"Initialisation...":"Charger les valeurs par défaut"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[s.jsxs(re,{className:"lg:col-span-1",children:[s.jsx(de,{children:s.jsx(he,{children:"Catégories"})}),s.jsx(se,{className:"space-y-2",children:wb.map(C=>s.jsx(L,{variant:e===C.key?"default":"ghost",className:"w-full justify-start",onClick:()=>t(C.key),children:C.label},C.key))})]}),s.jsxs(re,{className:"lg:col-span-3",children:[s.jsx(de,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(he,{children:(S=wb.find(C=>C.key===e))==null?void 0:S.label}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:(_=wb.find(C=>C.key===e))==null?void 0:_.description})]}),s.jsxs(et,{open:a,onOpenChange:i,children:[s.jsx(jm,{asChild:!0,children:s.jsxs(L,{children:[s.jsx(lt,{className:"h-4 w-4 mr-2"}),"Ajouter un paramètre"]})}),s.jsxs(Xe,{children:[s.jsx(tt,{children:s.jsx(nt,{children:"Nouveau paramètre"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(M,{htmlFor:"key",children:"Nom du paramètre"}),s.jsx(J,{id:"key",value:o.key,onChange:C=>l(P=>({...P,key:C.target.value})),placeholder:"ex: types, categories..."})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"description",children:"Description"}),s.jsx(J,{id:"description",value:o.description,onChange:C=>l(P=>({...P,description:C.target.value})),placeholder:"Description du paramètre"})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"value",children:"Valeurs (séparées par des virgules)"}),s.jsx(We,{id:"value",value:o.value,onChange:C=>l(P=>({...P,value:C.target.value})),placeholder:"Valeur1, Valeur2, Valeur3...",rows:4})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(L,{onClick:N,className:"flex-1",children:"Créer"}),s.jsx(L,{variant:"outline",onClick:()=>i(!1),children:"Annuler"})]})]})]})]})]})}),s.jsx(se,{className:"space-y-6",children:(u==null?void 0:u.length)===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx("p",{children:"Aucun paramètre configuré pour cette catégorie."}),s.jsx("p",{className:"text-sm mt-2",children:'Cliquez sur "Charger les valeurs par défaut" pour commencer.'})]}):u==null?void 0:u.map(C=>s.jsxs("div",{className:"border rounded-lg p-4 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:C.setting_key}),C.description&&s.jsx("p",{className:"text-sm text-muted-foreground",children:C.description})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(L,{size:"sm",onClick:()=>g(C.setting_key),disabled:h.isPending,children:s.jsx(Yc,{className:"h-4 w-4"})}),s.jsx(L,{size:"sm",variant:"outline",onClick:()=>x(C.setting_key),disabled:f.isPending,children:s.jsx(It,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{children:[s.jsx(M,{children:"Valeurs"}),w(C.setting_key,n[C.setting_key]||C.setting_value)]})]},C.setting_key))})]})]})]})};function Ske(){const{toast:e}=at(),{settings:t,updateSettings:n}=Pt(),{theme:r,setTheme:a}=k$(),[i,o]=j.useState("general"),{data:l=[],isLoading:c}=gee(),u=xee(),[d,h]=j.useState(!1),[f,m]=j.useState(null),[v,p]=j.useState({name:"",title:"",specialty:"",phone:"",email:"",is_active:!0});j.useState(!1),j.useState(""),j.useState(!1),j.useState(""),j.useState(""),j.useState(!1),j.useState(""),j.useState(!1),j.useState("");const g=l.length>0?l:t.veterinarians,{pets:x}=wn();j.useEffect(()=>{const A=Array.from(new Set([...x.map(E=>E.type)])),O=Array.from(new Set([...t.species.split(",").map(E=>E.trim()),...A]));n({...t,species:O.join(", ")})},[x]);const y=(A,O)=>{n({...t,[A]:O})},b=()=>{e({title:"Paramètres sauvegardés",description:"Informations de la clinique mises à jour."})},N=A=>{var E;const O=(E=A.target.files)==null?void 0:E[0];if(O){const z=new FileReader;z.onload=()=>y("logo",z.result),z.readAsDataURL(O)}},w=(A,O)=>{const E={...t.displayPreferences,[A]:O},z={...t,displayPreferences:E};n(z),e({title:"Préférence d'affichage mise à jour",description:`${A} s'affichera maintenant en ${O==="table"?"tableau":"cartes"}`})},S=()=>{m(null),p({name:"",title:"",specialty:"",phone:"",email:"",is_active:!0}),h(!0)},_=A=>{m(A),p({name:A.name,title:A.title,specialty:A.specialty||"",phone:A.phone||"",email:A.email||"",is_active:A.is_active}),h(!0)},C=()=>{if(!v.name||!v.title){e({title:"Erreur",description:"Nom et titre requis",variant:"destructive"});return}const A=`${v.title} ${v.name}`;let O;if(f)O=l.map(E=>E.id===f.id?{...E,name:A,title:v.title,specialty:v.specialty,phone:v.phone,email:v.email,is_active:v.is_active}:E);else{const E={id:`vet_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:A,title:v.title,specialty:v.specialty,phone:v.phone,email:v.email,is_active:!0};O=[...l,E]}u.mutate(O),e({title:"Vétérinaire enregistré"}),h(!1)},P=A=>{if(!confirm("Supprimer ce vétérinaire ?"))return;const O=l.filter(E=>E.id!==A);u.mutate(O),e({title:"Vétérinaire supprimé"})};return s.jsxs("div",{className:"container mx-auto px-6 py-8 space-y-8",children:[s.jsxs(re,{children:[s.jsxs(de,{children:[s.jsx(he,{children:"Paramètres de l'application"}),s.jsxs("div",{className:"flex items-center gap-4 mt-8 pt-8",children:[s.jsxs(L,{variant:i==="general"?"default":"outline",onClick:()=>o("general"),className:"flex items-center gap-2",children:[s.jsx(bU,{className:"h-4 w-4"}),"Paramètres généraux"]}),s.jsxs(L,{variant:i==="data"?"default":"outline",onClick:()=>o("data"),className:"flex items-center gap-2",children:[s.jsx(Gn,{className:"h-4 w-4"}),"Configuration des données"]})]})]}),s.jsx(se,{children:i==="data"?s.jsx(Nke,{}):s.jsxs("div",{className:"grid gap-8 lg:grid-cols-3",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[s.jsxs(re,{children:[s.jsx(de,{children:s.jsx(he,{children:"Paramètres de la Clinique"})}),s.jsxs(se,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(M,{htmlFor:"logo",children:"Logo de la clinique"}),s.jsx(J,{id:"logo",type:"file",accept:"image/*",onChange:N}),t.logo&&s.jsx("img",{src:t.logo,alt:"Logo",className:"h-24 mt-2"})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"clinicName",children:"Nom de la clinique"}),s.jsx(J,{id:"clinicName",value:t.clinicName,onChange:A=>y("clinicName",A.target.value)})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"address",children:"Adresse"}),s.jsx(J,{id:"address",value:t.address,onChange:A=>y("address",A.target.value)})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"phone",children:"Téléphone"}),s.jsx(J,{id:"phone",value:t.phone,onChange:A=>y("phone",A.target.value)})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"email",children:"Email"}),s.jsx(J,{id:"email",type:"email",value:t.email,onChange:A=>y("email",A.target.value)})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"website",children:"Site web"}),s.jsx(J,{id:"website",value:t.website,onChange:A=>y("website",A.target.value)})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"currency",children:"Devise"}),s.jsx(J,{id:"currency",value:t.currency,onChange:A=>y("currency",A.target.value)})]}),s.jsxs("div",{children:[s.jsxs(M,{htmlFor:"defaultConsultationPrice",children:["Prix de consultation par défaut (",t.currency,")"]}),s.jsx(J,{id:"defaultConsultationPrice",type:"number",step:"0.01",min:"0",value:t.defaultConsultationPrice,onChange:A=>y("defaultConsultationPrice",parseFloat(A.target.value)||0)})]})]}),s.jsx("div",{className:"flex gap-2",children:s.jsx(L,{onClick:b,children:"Enregistrer"})})]})]}),s.jsxs(re,{children:[s.jsx(de,{children:s.jsx(he,{children:"Thème de l'application"})}),s.jsx(se,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Choisissez le thème de l'application pour votre confort visuel."}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(M,{htmlFor:"theme-select",children:"Thème"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:r==="light"?"Mode clair":"Mode sombre"})]}),s.jsxs(be,{value:r,onValueChange:A=>{a(A),e({title:"Thème mis à jour",description:`Thème changé en mode ${A==="light"?"clair":"sombre"}`})},children:[s.jsx(xe,{className:"w-32",children:s.jsx(je,{})}),s.jsxs(ye,{children:[s.jsx(q,{value:"light",children:"Mode clair"}),s.jsx(q,{value:"dark",children:"Mode sombre"})]})]})]})]})})]}),s.jsxs(re,{children:[s.jsx(de,{children:s.jsx(he,{children:"Préférences d'affichage"})}),s.jsx(se,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Choisissez comment vous souhaitez afficher les différentes sections par défaut."}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(t.displayPreferences).map(([A,O])=>s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:`${A}-display`,children:A.charAt(0).toUpperCase()+A.slice(1)}),s.jsxs(be,{value:O,onValueChange:E=>w(A,E),children:[s.jsx(xe,{children:s.jsx(je,{})}),s.jsxs(ye,{children:[s.jsx(q,{value:"table",children:"Tableau"}),s.jsx(q,{value:"cards",children:"Cartes"})]})]})]},A))})]})})]}),s.jsxs(re,{children:[s.jsxs(de,{className:"flex justify-between items-center",children:[s.jsx(he,{children:"Vétérinaires"}),s.jsxs(L,{onClick:S,className:"gap-2",children:[s.jsx(lt,{className:"h-4 w-4"})," Ajouter"]})]}),s.jsx(se,{className:"space-y-2",children:g.length===0?s.jsx("p",{className:"text-muted-foreground",children:"Aucun vétérinaire configuré"}):g.map(A=>s.jsxs("div",{className:"flex justify-between items-center p-2 border rounded",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:A.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:A.specialty}),s.jsxs("p",{className:"text-xs",children:[A.phone," | ",A.email]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(L,{size:"sm",variant:"outline",onClick:()=>_(A),children:s.jsx(qt,{className:"h-4 w-4"})}),s.jsx(L,{size:"sm",variant:"destructive",onClick:()=>P(A.id),children:s.jsx(It,{className:"h-4 w-4"})})]})]},A.id))})]})]}),s.jsx("div",{className:"space-y-6",children:s.jsx(wke,{})})]})})]}),s.jsx(et,{open:d,onOpenChange:h,children:s.jsxs(Xe,{children:[s.jsxs(tt,{children:[s.jsx(nt,{children:f?"Modifier vétérinaire":"Nouveau vétérinaire"}),s.jsx(Dt,{children:"Nom, titre, spécialité, contact"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(M,{htmlFor:"vetName",children:"Nom complet *"}),s.jsx(J,{id:"vetName",value:v.name,onChange:A=>p(O=>({...O,name:A.target.value}))})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"vetTitle",children:"Titre *"}),s.jsx(J,{id:"vetTitle",value:v.title,onChange:A=>p(O=>({...O,title:A.target.value}))})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"vetSpec",children:"Spécialité"}),s.jsx(J,{id:"vetSpec",value:v.specialty,onChange:A=>p(O=>({...O,specialty:A.target.value}))})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"vetPhone",children:"Téléphone"}),s.jsx(J,{id:"vetPhone",value:v.phone,onChange:A=>p(O=>({...O,phone:A.target.value}))})]}),s.jsxs("div",{children:[s.jsx(M,{htmlFor:"vetEmail",children:"Email"}),s.jsx(J,{id:"vetEmail",type:"email",value:v.email,onChange:A=>p(O=>({...O,email:A.target.value}))})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(L,{variant:"outline",onClick:()=>h(!1),children:"Annuler"}),s.jsx(L,{onClick:C,children:f?"Mettre à jour":"Créer"})]})]})]})})]})}var _ke="Separator",gO="horizontal",Cke=["horizontal","vertical"],R8=j.forwardRef((e,t)=>{const{decorative:n,orientation:r=gO,...a}=e,i=Pke(r)?r:gO,l=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return s.jsx(Le.div,{"data-orientation":i,...l,...a,ref:t})});R8.displayName=_ke;function Pke(e){return Cke.includes(e)}var L8=R8;const Vv=j.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},a)=>s.jsx(L8,{ref:a,decorative:n,orientation:t,className:Ee("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));Vv.displayName=L8.displayName;function Ake(){const{user:e,logout:t,refreshProfile:n}=To(),{toast:r}=at(),{data:a,isLoading:i,refetch:o}=dee(),l=hee(),[c,u]=j.useState(!1);j.useState(!1);const[d,h]=j.useState({full_name:"",username:"",email:"",phone:"",address:"",specialty:"",experience:"",bio:"",languages:["Français","Arabe","Anglais"]});j.useEffect(()=>{a&&e&&h(g=>({...g,full_name:a.full_name||"",username:a.username||"",email:e.email||"",phone:a.phone||"",address:a.address||"",specialty:a.specialty||"",experience:a.experience||"",bio:a.bio||""}))},[a,e]),j.useState({currentPassword:"",newPassword:"",confirmPassword:""}),j.useState({notifications:{email:!0,sms:!1,push:!0},privacy:{showEmail:!1,showPhone:!0,showAddress:!1},language:"fr",timezone:"Africa/Casablanca"});const f=async()=>{try{await l.mutateAsync({full_name:d.full_name,username:d.username,phone:d.phone,address:d.address,specialty:d.specialty,experience:d.experience,bio:d.bio}),await Promise.all([o(),n()]),r({title:"Profil mis à jour",description:"Vos informations personnelles ont été sauvegardées avec succès."}),u(!1)}catch(g){r({title:"Erreur",description:g instanceof Error?g.message:"Impossible de sauvegarder le profil.",variant:"destructive"})}},m=g=>g.split(" ").map(x=>x.charAt(0)).join("").toUpperCase().slice(0,2),v=g=>{switch(g){case"admin":return"Administrateur";case"assistant":return"Assistant";default:return"Utilisateur"}},p=g=>{switch(g){case"admin":return"bg-red-100 text-red-800";case"assistant":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return e?i?s.jsx("div",{className:"container mx-auto px-2 sm:px-4 lg:px-6 py-4 sm:py-6 lg:py-8",children:s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx(Mn,{className:"h-8 w-8 animate-spin"}),s.jsx("p",{className:"text-muted-foreground",children:"Chargement du profil..."})]})})}):s.jsxs("div",{className:"container mx-auto px-2 sm:px-4 lg:px-6 py-4 sm:py-6 lg:py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Mon Profil"}),s.jsx("p",{className:"text-muted-foreground text-sm sm:text-base",children:"Gérez vos informations personnelles et préférences"})]}),s.jsx("div",{className:"flex flex-col sm:flex-row gap-2",children:c?s.jsxs(s.Fragment,{children:[s.jsx(L,{variant:"outline",onClick:()=>u(!1),className:"w-full sm:w-auto",children:"Annuler"}),s.jsxs(L,{onClick:f,className:"gap-2 w-full sm:w-auto",disabled:l.isPending,children:[l.isPending?s.jsx(Mn,{className:"h-4 w-4 animate-spin"}):s.jsx(Yc,{className:"h-4 w-4"}),l.isPending?"Sauvegarde...":"Sauvegarder"]})]}):s.jsxs(L,{onClick:()=>u(!0),className:"gap-2 w-full sm:w-auto",children:[s.jsx(qt,{className:"h-4 w-4"}),"Modifier"]})})]}),s.jsxs(re,{children:[s.jsx(de,{children:s.jsxs(he,{className:"flex items-center gap-2",children:[s.jsx(Vn,{className:"h-5 w-5"}),"Informations Personnelles"]})}),s.jsxs(se,{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Qn,{className:"h-16 w-16 sm:h-20 sm:w-20",children:s.jsx(Xn,{className:"bg-primary text-primary-foreground text-lg sm:text-xl",children:m(e.profile.full_name)})}),c&&s.jsx(L,{size:"sm",className:"absolute -bottom-2 -right-2 h-8 w-8 rounded-full",variant:"secondary",children:s.jsx(_u,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[s.jsx("h3",{className:"text-lg sm:text-xl font-semibold",children:e.profile.full_name||e.profile.username}),s.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 mt-1",children:[s.jsx(ux,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:e.email})]}),s.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 mt-2",children:[s.jsx(Gn,{className:"h-4 w-4 text-muted-foreground"}),s.jsx(ke,{className:p(e.profile.role),children:v(e.profile.role)})]})]})]}),s.jsx(Vv,{}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"full_name",children:"Nom complet"}),s.jsx(J,{id:"full_name",value:d.full_name,onChange:g=>h(x=>({...x,full_name:g.target.value})),disabled:!c})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"username",children:"Nom d'utilisateur"}),s.jsx(J,{id:"username",value:d.username,onChange:g=>h(x=>({...x,username:g.target.value})),disabled:!c})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"email",children:"Email"}),s.jsx(J,{id:"email",type:"email",value:d.email,disabled:!0,className:"bg-muted"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"phone",children:"Téléphone"}),s.jsx(J,{id:"phone",value:d.phone,onChange:g=>h(x=>({...x,phone:g.target.value})),disabled:!c})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"address",children:"Adresse"}),s.jsx(J,{id:"address",value:d.address,onChange:g=>h(x=>({...x,address:g.target.value})),disabled:!c})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"specialty",children:"Spécialité"}),s.jsx(J,{id:"specialty",value:d.specialty,onChange:g=>h(x=>({...x,specialty:g.target.value})),disabled:!c})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"experience",children:"Expérience"}),s.jsx(J,{id:"experience",value:d.experience,onChange:g=>h(x=>({...x,experience:g.target.value})),disabled:!c})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"bio",children:"Biographie"}),s.jsx("textarea",{id:"bio",className:"w-full min-h-[100px] px-3 py-2 border border-input bg-background rounded-md text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:d.bio,onChange:g=>h(x=>({...x,bio:g.target.value})),disabled:!c})]})]})]})]}):null}function kke(){const{user:e}=To(),{toast:t}=at(),[n,r]=j.useState({twoFactorAuth:!1,sessionTimeout:30,passwordExpiry:90,loginNotifications:!0,deviceTracking:!0,autoLogout:!0}),[a,i]=j.useState({rememberMe:!0,autoLogin:!1,sessionDuration:8,maxConcurrentSessions:3}),[o,l]=j.useState({loginAlerts:!0,securityAlerts:!0,deviceAlerts:!0,emailNotifications:!0,smsNotifications:!1,pushNotifications:!0});j.useState({dataSharing:!1,analytics:!0,crashReports:!0,marketingEmails:!1,profileVisibility:"private"}),j.useState({language:"fr",timezone:"Africa/Casablanca",dateFormat:"DD/MM/YYYY",timeFormat:"24h",theme:"system"});const[c]=j.useState([{id:1,device:"MacBook Pro",browser:"Chrome",location:"Rabat, Maroc",lastActive:"Maintenant",current:!0,ip:"192.168.1.100"},{id:2,device:"iPhone 14",browser:"Safari",location:"Rabat, Maroc",lastActive:"Il y a 2 heures",current:!1,ip:"192.168.1.101"}]),u=()=>{t({title:"Paramètres de sécurité sauvegardés",description:"Vos paramètres de sécurité ont été mis à jour."})},d=()=>{t({title:"Paramètres de session sauvegardés",description:"Vos paramètres de session ont été mis à jour."})},h=()=>{t({title:"Paramètres de notification sauvegardés",description:"Vos paramètres de notification ont été mis à jour."})},f=p=>{t({title:"Session terminée",description:"La session a été fermée avec succès."})},m=()=>{t({title:"Toutes les sessions terminées",description:"Toutes les autres sessions ont été fermées."})},v=p=>p.includes("iPhone")||p.includes("Android")?s.jsx(jU,{className:"h-4 w-4"}):p.includes("iPad")||p.includes("Tablet")?s.jsx(NU,{className:"h-4 w-4"}):s.jsx(OC,{className:"h-4 w-4"});return e?s.jsxs("div",{className:"container mx-auto px-2 sm:px-4 lg:px-6 py-4 sm:py-6 lg:py-8 space-y-6",children:[s.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Paramètres de Connexion"}),s.jsx("p",{className:"text-muted-foreground text-sm sm:text-base",children:"Gérez vos paramètres de sécurité et de session"})]})}),s.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[s.jsxs(re,{children:[s.jsx(de,{children:s.jsxs(he,{className:"flex items-center gap-2",children:[s.jsx(Gn,{className:"h-5 w-5"}),"Sécurité"]})}),s.jsxs(se,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(M,{children:"Authentification à deux facteurs"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Ajoutez une couche de sécurité supplémentaire"})]}),s.jsx(Pr,{checked:n.twoFactorAuth,onCheckedChange:p=>r(g=>({...g,twoFactorAuth:p}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Délai d'expiration de session (minutes)"}),s.jsxs(be,{value:n.sessionTimeout.toString(),onValueChange:p=>r(g=>({...g,sessionTimeout:parseInt(p)})),children:[s.jsx(xe,{children:s.jsx(je,{})}),s.jsxs(ye,{children:[s.jsx(q,{value:"15",children:"15 minutes"}),s.jsx(q,{value:"30",children:"30 minutes"}),s.jsx(q,{value:"60",children:"1 heure"}),s.jsx(q,{value:"120",children:"2 heures"}),s.jsx(q,{value:"480",children:"8 heures"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Expiration du mot de passe (jours)"}),s.jsxs(be,{value:n.passwordExpiry.toString(),onValueChange:p=>r(g=>({...g,passwordExpiry:parseInt(p)})),children:[s.jsx(xe,{children:s.jsx(je,{})}),s.jsxs(ye,{children:[s.jsx(q,{value:"30",children:"30 jours"}),s.jsx(q,{value:"60",children:"60 jours"}),s.jsx(q,{value:"90",children:"90 jours"}),s.jsx(q,{value:"180",children:"6 mois"}),s.jsx(q,{value:"365",children:"1 an"})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(M,{children:"Notifications de connexion"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevez des alertes pour les nouvelles connexions"})]}),s.jsx(Pr,{checked:n.loginNotifications,onCheckedChange:p=>r(g=>({...g,loginNotifications:p}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(M,{children:"Suivi des appareils"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Surveillez les appareils connectés"})]}),s.jsx(Pr,{checked:n.deviceTracking,onCheckedChange:p=>r(g=>({...g,deviceTracking:p}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(M,{children:"Déconnexion automatique"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Déconnexion après inactivité"})]}),s.jsx(Pr,{checked:n.autoLogout,onCheckedChange:p=>r(g=>({...g,autoLogout:p}))})]})]}),s.jsxs(L,{onClick:u,className:"w-full gap-2",children:[s.jsx(Yc,{className:"h-4 w-4"}),"Sauvegarder les paramètres de sécurité"]})]})]}),s.jsxs(re,{children:[s.jsx(de,{children:s.jsxs(he,{className:"flex items-center gap-2",children:[s.jsx(OC,{className:"h-5 w-5"}),"Sessions Actives"]})}),s.jsxs(se,{className:"space-y-4",children:[s.jsx("div",{className:"space-y-3",children:c.map(p=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[v(p.device),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:p.device}),p.current&&s.jsx(ke,{variant:"secondary",className:"text-xs",children:"Actuel"})]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[p.browser," • ",p.location]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Dernière activité: ",p.lastActive]})]})]}),!p.current&&s.jsx(L,{variant:"outline",size:"sm",onClick:()=>f(p.id),children:"Terminer"})]},p.id))}),s.jsx(Vv,{}),s.jsx(L,{variant:"destructive",onClick:m,className:"w-full",children:"Terminer toutes les autres sessions"})]})]}),s.jsxs(re,{children:[s.jsx(de,{children:s.jsxs(he,{className:"flex items-center gap-2",children:[s.jsx(tn,{className:"h-5 w-5"}),"Gestion des Sessions"]})}),s.jsxs(se,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(M,{children:"Se souvenir de moi"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Restez connecté entre les sessions"})]}),s.jsx(Pr,{checked:a.rememberMe,onCheckedChange:p=>i(g=>({...g,rememberMe:p}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(M,{children:"Connexion automatique"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Connexion automatique au démarrage"})]}),s.jsx(Pr,{checked:a.autoLogin,onCheckedChange:p=>i(g=>({...g,autoLogin:p}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Durée de session (heures)"}),s.jsxs(be,{value:a.sessionDuration.toString(),onValueChange:p=>i(g=>({...g,sessionDuration:parseInt(p)})),children:[s.jsx(xe,{children:s.jsx(je,{})}),s.jsxs(ye,{children:[s.jsx(q,{value:"1",children:"1 heure"}),s.jsx(q,{value:"4",children:"4 heures"}),s.jsx(q,{value:"8",children:"8 heures"}),s.jsx(q,{value:"12",children:"12 heures"}),s.jsx(q,{value:"24",children:"24 heures"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{children:"Sessions simultanées maximum"}),s.jsxs(be,{value:a.maxConcurrentSessions.toString(),onValueChange:p=>i(g=>({...g,maxConcurrentSessions:parseInt(p)})),children:[s.jsx(xe,{children:s.jsx(je,{})}),s.jsxs(ye,{children:[s.jsx(q,{value:"1",children:"1 session"}),s.jsx(q,{value:"2",children:"2 sessions"}),s.jsx(q,{value:"3",children:"3 sessions"}),s.jsx(q,{value:"5",children:"5 sessions"}),s.jsx(q,{value:"10",children:"10 sessions"})]})]})]})]}),s.jsxs(L,{onClick:d,className:"w-full gap-2",children:[s.jsx(Yc,{className:"h-4 w-4"}),"Sauvegarder les paramètres de session"]})]})]}),s.jsxs(re,{children:[s.jsx(de,{children:s.jsxs(he,{className:"flex items-center gap-2",children:[s.jsx(sU,{className:"h-5 w-5"}),"Notifications de Sécurité"]})}),s.jsxs(se,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(M,{children:"Alertes de connexion"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications pour les nouvelles connexions"})]}),s.jsx(Pr,{checked:o.loginAlerts,onCheckedChange:p=>l(g=>({...g,loginAlerts:p}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(M,{children:"Alertes de sécurité"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications pour les événements de sécurité"})]}),s.jsx(Pr,{checked:o.securityAlerts,onCheckedChange:p=>l(g=>({...g,securityAlerts:p}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(M,{children:"Alertes d'appareil"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications pour les nouveaux appareils"})]}),s.jsx(Pr,{checked:o.deviceAlerts,onCheckedChange:p=>l(g=>({...g,deviceAlerts:p}))})]}),s.jsx(Vv,{}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(M,{children:"Notifications par email"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevez les alertes par email"})]}),s.jsx(Pr,{checked:o.emailNotifications,onCheckedChange:p=>l(g=>({...g,emailNotifications:p}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(M,{children:"Notifications SMS"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevez les alertes par SMS"})]}),s.jsx(Pr,{checked:o.smsNotifications,onCheckedChange:p=>l(g=>({...g,smsNotifications:p}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(M,{children:"Notifications push"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevez les alertes push"})]}),s.jsx(Pr,{checked:o.pushNotifications,onCheckedChange:p=>l(g=>({...g,pushNotifications:p}))})]})]}),s.jsxs(L,{onClick:h,className:"w-full gap-2",children:[s.jsx(Yc,{className:"h-4 w-4"}),"Sauvegarder les paramètres de notification"]})]})]})]})]}):null}function Eke(){const[e,t]=j.useState(""),[n,r]=j.useState(""),[a,i]=j.useState(!1),[o,l]=j.useState(!1),[c,u]=j.useState(""),[d,h]=j.useState(!1),[f,m]=j.useState(!1),v=xd(),{toast:p}=at();iK(),j.useEffect(()=>{(async()=>{try{const{data:{session:b},error:N}=await ge.auth.getSession();if(N){u("Lien de réinitialisation invalide ou expiré");return}b?m(!0):u("Lien de réinitialisation invalide ou expiré")}catch{u("Erreur lors de la vérification du lien de réinitialisation")}})()},[]);const g=y=>y.length<8?"Le mot de passe doit contenir au moins 8 caractères":/[A-Z]/.test(y)?/[a-z]/.test(y)?/\d/.test(y)?/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>?]/.test(y)?null:"Le mot de passe doit contenir au moins un caractère spécial":"Le mot de passe doit contenir au moins un chiffre":"Le mot de passe doit contenir au moins une lettre minuscule":"Le mot de passe doit contenir au moins une lettre majuscule",x=async y=>{if(y.preventDefault(),u(""),!e||!n){p({title:"Champs requis",description:"Veuillez remplir tous les champs",variant:"destructive"});return}if(e!==n){p({title:"Erreur",description:"Les mots de passe ne correspondent pas",variant:"destructive"});return}const b=g(e);if(b){p({title:"Mot de passe invalide",description:b,variant:"destructive"});return}h(!0);try{const{error:N}=await ge.auth.updateUser({password:e});if(N)throw N;p({title:"Mot de passe mis à jour",description:"Votre mot de passe a été réinitialisé avec succès."}),v("/login")}catch(N){u(N instanceof Error?N.message:"Une erreur est survenue lors de la mise à jour du mot de passe")}finally{h(!1)}};return!f&&!c?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-green-50 dark:from-gray-900 dark:to-gray-800 px-4",children:s.jsx(re,{className:"w-full max-w-md",children:s.jsxs(se,{className:"pt-6",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx(Mn,{className:"h-8 w-8 animate-spin"})}),s.jsx("p",{className:"text-center mt-4 text-sm text-muted-foreground",children:"Vérification du lien de réinitialisation..."})]})})}):c?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-green-50 dark:from-gray-900 dark:to-gray-800 px-4",children:s.jsxs(re,{className:"w-full max-w-md",children:[s.jsxs(de,{className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:s.jsx(pt,{className:"h-8 w-8 text-red-600"})})}),s.jsx(he,{className:"text-2xl font-bold text-red-600",children:"Lien invalide"})]}),s.jsxs(se,{children:[s.jsx(gf,{className:"mb-4",children:s.jsx(vf,{children:c})}),s.jsx(L,{onClick:()=>v("/login"),className:"w-full",children:"Retour à la connexion"})]})]})}):s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-green-50 dark:from-gray-900 dark:to-gray-800 px-4",children:s.jsxs(re,{className:"w-full max-w-md",children:[s.jsxs(de,{className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"p-3 bg-primary/10 rounded-full",children:s.jsx(pt,{className:"h-8 w-8 text-primary"})})}),s.jsx(he,{className:"text-2xl font-bold",children:"VetPro CRM3"}),s.jsx(Ou,{children:"Définir un nouveau mot de passe"})]}),s.jsx(se,{children:s.jsxs("form",{onSubmit:x,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"password",children:"Nouveau mot de passe"}),s.jsxs("div",{className:"relative",children:[s.jsx(J,{id:"password",type:a?"text":"password",value:e,onChange:y=>t(y.target.value),placeholder:"Votre nouveau mot de passe",required:!0}),s.jsx(L,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>i(!a),children:a?s.jsx(jj,{className:"h-4 w-4"}):s.jsx(Dn,{className:"h-4 w-4"})})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Le mot de passe doit contenir au moins 8 caractères, une majuscule, une minuscule, un chiffre et un caractère spécial."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(M,{htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),s.jsxs("div",{className:"relative",children:[s.jsx(J,{id:"confirmPassword",type:o?"text":"password",value:n,onChange:y=>r(y.target.value),placeholder:"Confirmer votre nouveau mot de passe",required:!0}),s.jsx(L,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>l(!o),children:o?s.jsx(jj,{className:"h-4 w-4"}):s.jsx(Dn,{className:"h-4 w-4"})})]})]}),s.jsx(L,{type:"submit",className:"w-full",disabled:d,children:d?s.jsxs(s.Fragment,{children:[s.jsx(Mn,{className:"mr-2 h-4 w-4 animate-spin"}),"Mise à jour..."]}):"Mettre à jour le mot de passe"})]})})]})})}const Tke=new KW({defaultOptions:{queries:{retry:(e,t)=>(t==null?void 0:t.status)>=400&&(t==null?void 0:t.status)<500?!1:e<2,staleTime:3*60*1e3,gcTime:8*60*1e3,refetchOnWindowFocus:!1,refetchOnReconnect:"always",refetchOnMount:!0,networkMode:"offlineFirst"},mutations:{retry:1,networkMode:"offlineFirst"}}}),Oke=()=>s.jsx(pJ,{children:s.jsx(GW,{client:Tke,children:s.jsxs(NW,{children:[s.jsx(o9,{}),s.jsx(F9,{}),s.jsx(fJ,{children:s.jsx(IS,{children:s.jsx(jee,{children:s.jsx(oK,{children:s.jsx(nK,{children:s.jsx("div",{className:"min-h-screen bg-background w-full text-foreground overflow-x-hidden",children:s.jsxs(GH,{children:[s.jsx(on,{path:"/",element:s.jsx(NJ,{})}),s.jsx(on,{path:"/login",element:s.jsx(wJ,{children:s.jsx(jJ,{})})}),s.jsx(on,{path:"/register",element:s.jsx(SJ,{})}),s.jsx(on,{path:"/dashboard",element:s.jsxs(tr,{children:[s.jsx(er,{}),s.jsx(fCe,{})]})}),s.jsx(on,{path:"/clients",element:s.jsxs(tr,{children:[s.jsx(er,{}),s.jsx(kCe,{})]})}),s.jsx(on,{path:"/pets",element:s.jsxs(tr,{children:[s.jsx(er,{}),s.jsx(ICe,{})]})}),s.jsx(on,{path:"/appointments",element:s.jsxs(tr,{children:[s.jsx(er,{}),s.jsx(NAe,{})]})}),s.jsx(on,{path:"/consultations",element:s.jsxs(tr,{children:[s.jsx(er,{}),s.jsx(AAe,{})]})}),s.jsx(on,{path:"/history",element:s.jsxs(tr,{children:[s.jsx(er,{}),s.jsx($Ae,{})]})}),s.jsx(on,{path:"/farm",element:s.jsxs(tr,{children:[s.jsx(er,{}),s.jsx(HAe,{})]})}),s.jsx(on,{path:"/vaccinations",element:s.jsxs(tr,{children:[s.jsx(er,{}),s.jsx(QAe,{})]})}),s.jsx(on,{path:"/antiparasites",element:s.jsxs(tr,{children:[s.jsx(er,{}),s.jsx(ike,{})]})}),s.jsx(on,{path:"/stock",element:s.jsxs(tr,{children:[s.jsx(er,{}),s.jsx(mke,{})]})}),s.jsx(on,{path:"/accounting",element:s.jsxs(tr,{children:[s.jsx(er,{}),s.jsx(gke,{})]})}),s.jsx(on,{path:"/test-stats",element:s.jsxs(tr,{children:[s.jsx(er,{}),s.jsx(xke,{})]})}),s.jsx(on,{path:"/simple-test",element:s.jsxs(tr,{children:[s.jsx(er,{}),s.jsx(bke,{})]})}),s.jsx(on,{path:"/settings",element:s.jsxs(tr,{children:[s.jsx(er,{}),s.jsx(Ske,{})]})}),s.jsx(on,{path:"/profile",element:s.jsxs(tr,{children:[s.jsx(er,{}),s.jsx(Ake,{})]})}),s.jsx(on,{path:"/auth-settings",element:s.jsxs(tr,{children:[s.jsx(er,{}),s.jsx(kke,{})]})}),s.jsx(on,{path:"/reset-password",element:s.jsx(Eke,{})}),s.jsx(on,{path:"*",element:s.jsx(jke,{})})]})})})})})})})]})})});zM(document.getElementById("root")).render(s.jsx(Oke,{}));
