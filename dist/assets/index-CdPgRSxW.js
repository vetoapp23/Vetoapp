var NC=e=>{throw TypeError(e)};var s0=(e,t,n)=>t.has(e)||NC("Cannot "+n);var J=(e,t,n)=>(s0(e,t,"read from private field"),n?n.call(e):t.get(e)),ze=(e,t,n)=>t.has(e)?NC("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Oe=(e,t,n,r)=>(s0(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),ut=(e,t,n)=>(s0(e,t,"access private method"),n);var Vf=(e,t,n,r)=>({set _(a){Oe(e,t,a,n)},get _(){return J(e,t,r)}});function HB(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var vr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ot(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function KB(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var a=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return e[r]}})}),n}var $O={exports:{}},rx={},RO={exports:{}},yt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ff=Symbol.for("react.element"),GB=Symbol.for("react.portal"),YB=Symbol.for("react.fragment"),QB=Symbol.for("react.strict_mode"),XB=Symbol.for("react.profiler"),JB=Symbol.for("react.provider"),ZB=Symbol.for("react.context"),ez=Symbol.for("react.forward_ref"),tz=Symbol.for("react.suspense"),nz=Symbol.for("react.memo"),rz=Symbol.for("react.lazy"),SC=Symbol.iterator;function sz(e){return e===null||typeof e!="object"?null:(e=SC&&e[SC]||e["@@iterator"],typeof e=="function"?e:null)}var LO={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},FO=Object.assign,BO={};function vd(e,t,n){this.props=e,this.context=t,this.refs=BO,this.updater=n||LO}vd.prototype.isReactComponent={};vd.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};vd.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function zO(){}zO.prototype=vd.prototype;function i1(e,t,n){this.props=e,this.context=t,this.refs=BO,this.updater=n||LO}var o1=i1.prototype=new zO;o1.constructor=i1;FO(o1,vd.prototype);o1.isPureReactComponent=!0;var CC=Array.isArray,VO=Object.prototype.hasOwnProperty,l1={current:null},qO={key:!0,ref:!0,__self:!0,__source:!0};function UO(e,t,n){var r,a={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)VO.call(t,r)&&!qO.hasOwnProperty(r)&&(a[r]=t[r]);var l=arguments.length-2;if(l===1)a.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)a[r]===void 0&&(a[r]=l[r]);return{$$typeof:ff,type:e,key:i,ref:o,props:a,_owner:l1.current}}function az(e,t){return{$$typeof:ff,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function c1(e){return typeof e=="object"&&e!==null&&e.$$typeof===ff}function iz(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var _C=/\/+/g;function a0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?iz(""+e.key):t.toString(36)}function qp(e,t,n,r,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case ff:case GB:o=!0}}if(o)return o=e,a=a(o),e=r===""?"."+a0(o,0):r,CC(a)?(n="",e!=null&&(n=e.replace(_C,"$&/")+"/"),qp(a,t,n,"",function(u){return u})):a!=null&&(c1(a)&&(a=az(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(_C,"$&/")+"/")+e)),t.push(a)),1;if(o=0,r=r===""?".":r+":",CC(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+a0(i,l);o+=qp(i,t,n,c,a)}else if(c=sz(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+a0(i,l++),o+=qp(i,t,n,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function qf(e,t,n){if(e==null)return e;var r=[],a=0;return qp(e,r,"","",function(i){return t.call(n,i,a++)}),r}function oz(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Or={current:null},Up={transition:null},lz={ReactCurrentDispatcher:Or,ReactCurrentBatchConfig:Up,ReactCurrentOwner:l1};function WO(){throw Error("act(...) is not supported in production builds of React.")}yt.Children={map:qf,forEach:function(e,t,n){qf(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return qf(e,function(){t++}),t},toArray:function(e){return qf(e,function(t){return t})||[]},only:function(e){if(!c1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};yt.Component=vd;yt.Fragment=YB;yt.Profiler=XB;yt.PureComponent=i1;yt.StrictMode=QB;yt.Suspense=tz;yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lz;yt.act=WO;yt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=FO({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=l1.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)VO.call(t,c)&&!qO.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:ff,type:e.type,key:a,ref:i,props:r,_owner:o}};yt.createContext=function(e){return e={$$typeof:ZB,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:JB,_context:e},e.Consumer=e};yt.createElement=UO;yt.createFactory=function(e){var t=UO.bind(null,e);return t.type=e,t};yt.createRef=function(){return{current:null}};yt.forwardRef=function(e){return{$$typeof:ez,render:e}};yt.isValidElement=c1;yt.lazy=function(e){return{$$typeof:rz,_payload:{_status:-1,_result:e},_init:oz}};yt.memo=function(e,t){return{$$typeof:nz,type:e,compare:t===void 0?null:t}};yt.startTransition=function(e){var t=Up.transition;Up.transition={};try{e()}finally{Up.transition=t}};yt.unstable_act=WO;yt.useCallback=function(e,t){return Or.current.useCallback(e,t)};yt.useContext=function(e){return Or.current.useContext(e)};yt.useDebugValue=function(){};yt.useDeferredValue=function(e){return Or.current.useDeferredValue(e)};yt.useEffect=function(e,t){return Or.current.useEffect(e,t)};yt.useId=function(){return Or.current.useId()};yt.useImperativeHandle=function(e,t,n){return Or.current.useImperativeHandle(e,t,n)};yt.useInsertionEffect=function(e,t){return Or.current.useInsertionEffect(e,t)};yt.useLayoutEffect=function(e,t){return Or.current.useLayoutEffect(e,t)};yt.useMemo=function(e,t){return Or.current.useMemo(e,t)};yt.useReducer=function(e,t,n){return Or.current.useReducer(e,t,n)};yt.useRef=function(e){return Or.current.useRef(e)};yt.useState=function(e){return Or.current.useState(e)};yt.useSyncExternalStore=function(e,t,n){return Or.current.useSyncExternalStore(e,t,n)};yt.useTransition=function(){return Or.current.useTransition()};yt.version="18.3.1";RO.exports=yt;var j=RO.exports;const L=Ot(j),u1=HB({__proto__:null,default:L},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cz=j,uz=Symbol.for("react.element"),dz=Symbol.for("react.fragment"),hz=Object.prototype.hasOwnProperty,mz=cz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fz={key:!0,ref:!0,__self:!0,__source:!0};function HO(e,t,n){var r,a={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)hz.call(t,r)&&!fz.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:uz,type:e,key:i,ref:o,props:a,_owner:mz.current}}rx.Fragment=dz;rx.jsx=HO;rx.jsxs=HO;$O.exports=rx;var s=$O.exports,KO={exports:{}},fs={},GO={exports:{}},YO={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,$){var G=T.length;T.push($);e:for(;0<G;){var Q=G-1>>>1,ne=T[Q];if(0<a(ne,$))T[Q]=$,T[G]=ne,G=Q;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var $=T[0],G=T.pop();if(G!==$){T[0]=G;e:for(var Q=0,ne=T.length,oe=ne>>>1;Q<oe;){var M=2*(Q+1)-1,ue=T[M],ve=M+1,ce=T[ve];if(0>a(ue,G))ve<ne&&0>a(ce,ue)?(T[Q]=ce,T[ve]=G,Q=ve):(T[Q]=ue,T[M]=G,Q=M);else if(ve<ne&&0>a(ce,G))T[Q]=ce,T[ve]=G,Q=ve;else break e}}return $}function a(T,$){var G=T.sortIndex-$.sortIndex;return G!==0?G:T.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,m=3,f=!1,v=!1,p=!1,g=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(T){for(var $=n(u);$!==null;){if($.callback===null)r(u);else if($.startTime<=T)r(u),$.sortIndex=$.expirationTime,t(c,$);else break;$=n(u)}}function C(T){if(p=!1,b(T),!v)if(n(c)!==null)v=!0,B(w);else{var $=n(u);$!==null&&K(C,$.startTime-T)}}function w(T,$){v=!1,p&&(p=!1,x(_),_=-1),f=!0;var G=m;try{for(b($),h=n(c);h!==null&&(!(h.expirationTime>$)||T&&!E());){var Q=h.callback;if(typeof Q=="function"){h.callback=null,m=h.priorityLevel;var ne=Q(h.expirationTime<=$);$=e.unstable_now(),typeof ne=="function"?h.callback=ne:h===n(c)&&r(c),b($)}else r(c);h=n(c)}if(h!==null)var oe=!0;else{var M=n(u);M!==null&&K(C,M.startTime-$),oe=!1}return oe}finally{h=null,m=G,f=!1}}var N=!1,S=null,_=-1,P=5,A=-1;function E(){return!(e.unstable_now()-A<P)}function k(){if(S!==null){var T=e.unstable_now();A=T;var $=!0;try{$=S(!0,T)}finally{$?I():(N=!1,S=null)}}else N=!1}var I;if(typeof y=="function")I=function(){y(k)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,U=D.port2;D.port1.onmessage=k,I=function(){U.postMessage(null)}}else I=function(){g(k,0)};function B(T){S=T,N||(N=!0,I())}function K(T,$){_=g(function(){T(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){v||f||(v=!0,B(w))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(T){switch(m){case 1:case 2:case 3:var $=3;break;default:$=m}var G=m;m=$;try{return T()}finally{m=G}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,$){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var G=m;m=T;try{return $()}finally{m=G}},e.unstable_scheduleCallback=function(T,$,G){var Q=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?Q+G:Q):G=Q,T){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=G+ne,T={id:d++,callback:$,priorityLevel:T,startTime:G,expirationTime:ne,sortIndex:-1},G>Q?(T.sortIndex=G,t(u,T),n(c)===null&&T===n(u)&&(p?(x(_),_=-1):p=!0,K(C,G-Q))):(T.sortIndex=ne,t(c,T),v||f||(v=!0,B(w))),T},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(T){var $=m;return function(){var G=m;m=$;try{return T.apply(this,arguments)}finally{m=G}}}})(YO);GO.exports=YO;var pz=GO.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gz=j,ms=pz;function Ne(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var QO=new Set,Zh={};function rc(e,t){Pu(e,t),Pu(e+"Capture",t)}function Pu(e,t){for(Zh[e]=t,e=0;e<t.length;e++)QO.add(t[e])}var xi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dj=Object.prototype.hasOwnProperty,vz=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,PC={},AC={};function xz(e){return Dj.call(AC,e)?!0:Dj.call(PC,e)?!1:vz.test(e)?AC[e]=!0:(PC[e]=!0,!1)}function yz(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function jz(e,t,n,r){if(t===null||typeof t>"u"||yz(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Dr(e,t,n,r,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var ar={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ar[e]=new Dr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ar[t]=new Dr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ar[e]=new Dr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ar[e]=new Dr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ar[e]=new Dr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ar[e]=new Dr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ar[e]=new Dr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ar[e]=new Dr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ar[e]=new Dr(e,5,!1,e.toLowerCase(),null,!1,!1)});var d1=/[\-:]([a-z])/g;function h1(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(d1,h1);ar[t]=new Dr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(d1,h1);ar[t]=new Dr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(d1,h1);ar[t]=new Dr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ar[e]=new Dr(e,1,!1,e.toLowerCase(),null,!1,!1)});ar.xlinkHref=new Dr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ar[e]=new Dr(e,1,!1,e.toLowerCase(),null,!0,!0)});function m1(e,t,n,r){var a=ar.hasOwnProperty(t)?ar[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(jz(t,n,a,r)&&(n=null),r||a===null?xz(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Ti=gz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Uf=Symbol.for("react.element"),$c=Symbol.for("react.portal"),Rc=Symbol.for("react.fragment"),f1=Symbol.for("react.strict_mode"),Mj=Symbol.for("react.profiler"),XO=Symbol.for("react.provider"),JO=Symbol.for("react.context"),p1=Symbol.for("react.forward_ref"),Ij=Symbol.for("react.suspense"),$j=Symbol.for("react.suspense_list"),g1=Symbol.for("react.memo"),Gi=Symbol.for("react.lazy"),ZO=Symbol.for("react.offscreen"),kC=Symbol.iterator;function eh(e){return e===null||typeof e!="object"?null:(e=kC&&e[kC]||e["@@iterator"],typeof e=="function"?e:null)}var un=Object.assign,i0;function Sh(e){if(i0===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);i0=t&&t[1]||""}return`
`+i0+e}var o0=!1;function l0(e,t){if(!e||o0)return"";o0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=r.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{o0=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Sh(e):""}function bz(e){switch(e.tag){case 5:return Sh(e.type);case 16:return Sh("Lazy");case 13:return Sh("Suspense");case 19:return Sh("SuspenseList");case 0:case 2:case 15:return e=l0(e.type,!1),e;case 11:return e=l0(e.type.render,!1),e;case 1:return e=l0(e.type,!0),e;default:return""}}function Rj(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Rc:return"Fragment";case $c:return"Portal";case Mj:return"Profiler";case f1:return"StrictMode";case Ij:return"Suspense";case $j:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case JO:return(e.displayName||"Context")+".Consumer";case XO:return(e._context.displayName||"Context")+".Provider";case p1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case g1:return t=e.displayName||null,t!==null?t:Rj(e.type)||"Memo";case Gi:t=e._payload,e=e._init;try{return Rj(e(t))}catch{}}return null}function wz(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rj(t);case 8:return t===f1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ko(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function eD(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Nz(e){var t=eD(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Wf(e){e._valueTracker||(e._valueTracker=Nz(e))}function tD(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=eD(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function lg(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Lj(e,t){var n=t.checked;return un({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function TC(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=ko(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function nD(e,t){t=t.checked,t!=null&&m1(e,"checked",t,!1)}function Fj(e,t){nD(e,t);var n=ko(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Bj(e,t.type,n):t.hasOwnProperty("defaultValue")&&Bj(e,t.type,ko(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function EC(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Bj(e,t,n){(t!=="number"||lg(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ch=Array.isArray;function Zc(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ko(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function zj(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ne(91));return un({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function OC(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Ne(92));if(Ch(n)){if(1<n.length)throw Error(Ne(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ko(n)}}function rD(e,t){var n=ko(t.value),r=ko(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function DC(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function sD(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vj(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?sD(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Hf,aD=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Hf=Hf||document.createElement("div"),Hf.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Hf.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function em(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Dh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sz=["Webkit","ms","Moz","O"];Object.keys(Dh).forEach(function(e){Sz.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Dh[t]=Dh[e]})});function iD(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Dh.hasOwnProperty(e)&&Dh[e]?(""+t).trim():t+"px"}function oD(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=iD(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var Cz=un({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qj(e,t){if(t){if(Cz[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ne(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ne(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ne(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ne(62))}}function Uj(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wj=null;function v1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Hj=null,eu=null,tu=null;function MC(e){if(e=vf(e)){if(typeof Hj!="function")throw Error(Ne(280));var t=e.stateNode;t&&(t=lx(t),Hj(e.stateNode,e.type,t))}}function lD(e){eu?tu?tu.push(e):tu=[e]:eu=e}function cD(){if(eu){var e=eu,t=tu;if(tu=eu=null,MC(e),t)for(e=0;e<t.length;e++)MC(t[e])}}function uD(e,t){return e(t)}function dD(){}var c0=!1;function hD(e,t,n){if(c0)return e(t,n);c0=!0;try{return uD(e,t,n)}finally{c0=!1,(eu!==null||tu!==null)&&(dD(),cD())}}function tm(e,t){var n=e.stateNode;if(n===null)return null;var r=lx(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Ne(231,t,typeof n));return n}var Kj=!1;if(xi)try{var th={};Object.defineProperty(th,"passive",{get:function(){Kj=!0}}),window.addEventListener("test",th,th),window.removeEventListener("test",th,th)}catch{Kj=!1}function _z(e,t,n,r,a,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var Mh=!1,cg=null,ug=!1,Gj=null,Pz={onError:function(e){Mh=!0,cg=e}};function Az(e,t,n,r,a,i,o,l,c){Mh=!1,cg=null,_z.apply(Pz,arguments)}function kz(e,t,n,r,a,i,o,l,c){if(Az.apply(this,arguments),Mh){if(Mh){var u=cg;Mh=!1,cg=null}else throw Error(Ne(198));ug||(ug=!0,Gj=u)}}function sc(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function mD(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function IC(e){if(sc(e)!==e)throw Error(Ne(188))}function Tz(e){var t=e.alternate;if(!t){if(t=sc(e),t===null)throw Error(Ne(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return IC(a),e;if(i===r)return IC(a),t;i=i.sibling}throw Error(Ne(188))}if(n.return!==r.return)n=a,r=i;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o)throw Error(Ne(189))}}if(n.alternate!==r)throw Error(Ne(190))}if(n.tag!==3)throw Error(Ne(188));return n.stateNode.current===n?e:t}function fD(e){return e=Tz(e),e!==null?pD(e):null}function pD(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=pD(e);if(t!==null)return t;e=e.sibling}return null}var gD=ms.unstable_scheduleCallback,$C=ms.unstable_cancelCallback,Ez=ms.unstable_shouldYield,Oz=ms.unstable_requestPaint,yn=ms.unstable_now,Dz=ms.unstable_getCurrentPriorityLevel,x1=ms.unstable_ImmediatePriority,vD=ms.unstable_UserBlockingPriority,dg=ms.unstable_NormalPriority,Mz=ms.unstable_LowPriority,xD=ms.unstable_IdlePriority,sx=null,Da=null;function Iz(e){if(Da&&typeof Da.onCommitFiberRoot=="function")try{Da.onCommitFiberRoot(sx,e,void 0,(e.current.flags&128)===128)}catch{}}var na=Math.clz32?Math.clz32:Lz,$z=Math.log,Rz=Math.LN2;function Lz(e){return e>>>=0,e===0?32:31-($z(e)/Rz|0)|0}var Kf=64,Gf=4194304;function _h(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function hg(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~a;l!==0?r=_h(l):(i&=o,i!==0&&(r=_h(i)))}else o=n&~a,o!==0?r=_h(o):i!==0&&(r=_h(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-na(t),a=1<<n,r|=e[n],t&=~a;return r}function Fz(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bz(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-na(i),l=1<<o,c=a[o];c===-1?(!(l&n)||l&r)&&(a[o]=Fz(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Yj(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function yD(){var e=Kf;return Kf<<=1,!(Kf&4194240)&&(Kf=64),e}function u0(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function pf(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-na(t),e[t]=n}function zz(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-na(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}function y1(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-na(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var Rt=0;function jD(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var bD,j1,wD,ND,SD,Qj=!1,Yf=[],vo=null,xo=null,yo=null,nm=new Map,rm=new Map,Xi=[],Vz="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function RC(e,t){switch(e){case"focusin":case"focusout":vo=null;break;case"dragenter":case"dragleave":xo=null;break;case"mouseover":case"mouseout":yo=null;break;case"pointerover":case"pointerout":nm.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":rm.delete(t.pointerId)}}function nh(e,t,n,r,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},t!==null&&(t=vf(t),t!==null&&j1(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function qz(e,t,n,r,a){switch(t){case"focusin":return vo=nh(vo,e,t,n,r,a),!0;case"dragenter":return xo=nh(xo,e,t,n,r,a),!0;case"mouseover":return yo=nh(yo,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return nm.set(i,nh(nm.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,rm.set(i,nh(rm.get(i)||null,e,t,n,r,a)),!0}return!1}function CD(e){var t=hl(e.target);if(t!==null){var n=sc(t);if(n!==null){if(t=n.tag,t===13){if(t=mD(n),t!==null){e.blockedOn=t,SD(e.priority,function(){wD(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Wp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xj(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Wj=r,n.target.dispatchEvent(r),Wj=null}else return t=vf(n),t!==null&&j1(t),e.blockedOn=n,!1;t.shift()}return!0}function LC(e,t,n){Wp(e)&&n.delete(t)}function Uz(){Qj=!1,vo!==null&&Wp(vo)&&(vo=null),xo!==null&&Wp(xo)&&(xo=null),yo!==null&&Wp(yo)&&(yo=null),nm.forEach(LC),rm.forEach(LC)}function rh(e,t){e.blockedOn===t&&(e.blockedOn=null,Qj||(Qj=!0,ms.unstable_scheduleCallback(ms.unstable_NormalPriority,Uz)))}function sm(e){function t(a){return rh(a,e)}if(0<Yf.length){rh(Yf[0],e);for(var n=1;n<Yf.length;n++){var r=Yf[n];r.blockedOn===e&&(r.blockedOn=null)}}for(vo!==null&&rh(vo,e),xo!==null&&rh(xo,e),yo!==null&&rh(yo,e),nm.forEach(t),rm.forEach(t),n=0;n<Xi.length;n++)r=Xi[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Xi.length&&(n=Xi[0],n.blockedOn===null);)CD(n),n.blockedOn===null&&Xi.shift()}var nu=Ti.ReactCurrentBatchConfig,mg=!0;function Wz(e,t,n,r){var a=Rt,i=nu.transition;nu.transition=null;try{Rt=1,b1(e,t,n,r)}finally{Rt=a,nu.transition=i}}function Hz(e,t,n,r){var a=Rt,i=nu.transition;nu.transition=null;try{Rt=4,b1(e,t,n,r)}finally{Rt=a,nu.transition=i}}function b1(e,t,n,r){if(mg){var a=Xj(e,t,n,r);if(a===null)j0(e,t,r,fg,n),RC(e,r);else if(qz(a,e,t,n,r))r.stopPropagation();else if(RC(e,r),t&4&&-1<Vz.indexOf(e)){for(;a!==null;){var i=vf(a);if(i!==null&&bD(i),i=Xj(e,t,n,r),i===null&&j0(e,t,r,fg,n),i===a)break;a=i}a!==null&&r.stopPropagation()}else j0(e,t,r,null,n)}}var fg=null;function Xj(e,t,n,r){if(fg=null,e=v1(r),e=hl(e),e!==null)if(t=sc(e),t===null)e=null;else if(n=t.tag,n===13){if(e=mD(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return fg=e,null}function _D(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Dz()){case x1:return 1;case vD:return 4;case dg:case Mz:return 16;case xD:return 536870912;default:return 16}default:return 16}}var ho=null,w1=null,Hp=null;function PD(){if(Hp)return Hp;var e,t=w1,n=t.length,r,a="value"in ho?ho.value:ho.textContent,i=a.length;for(e=0;e<n&&t[e]===a[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===a[i-r];r++);return Hp=a.slice(e,1<r?1-r:void 0)}function Kp(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Qf(){return!0}function FC(){return!1}function ps(e){function t(n,r,a,i,o){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Qf:FC,this.isPropagationStopped=FC,this}return un(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Qf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Qf)},persist:function(){},isPersistent:Qf}),t}var xd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},N1=ps(xd),gf=un({},xd,{view:0,detail:0}),Kz=ps(gf),d0,h0,sh,ax=un({},gf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:S1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sh&&(sh&&e.type==="mousemove"?(d0=e.screenX-sh.screenX,h0=e.screenY-sh.screenY):h0=d0=0,sh=e),d0)},movementY:function(e){return"movementY"in e?e.movementY:h0}}),BC=ps(ax),Gz=un({},ax,{dataTransfer:0}),Yz=ps(Gz),Qz=un({},gf,{relatedTarget:0}),m0=ps(Qz),Xz=un({},xd,{animationName:0,elapsedTime:0,pseudoElement:0}),Jz=ps(Xz),Zz=un({},xd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),eV=ps(Zz),tV=un({},xd,{data:0}),zC=ps(tV),nV={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aV(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=sV[e])?!!t[e]:!1}function S1(){return aV}var iV=un({},gf,{key:function(e){if(e.key){var t=nV[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Kp(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?rV[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:S1,charCode:function(e){return e.type==="keypress"?Kp(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Kp(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),oV=ps(iV),lV=un({},ax,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),VC=ps(lV),cV=un({},gf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:S1}),uV=ps(cV),dV=un({},xd,{propertyName:0,elapsedTime:0,pseudoElement:0}),hV=ps(dV),mV=un({},ax,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),fV=ps(mV),pV=[9,13,27,32],C1=xi&&"CompositionEvent"in window,Ih=null;xi&&"documentMode"in document&&(Ih=document.documentMode);var gV=xi&&"TextEvent"in window&&!Ih,AD=xi&&(!C1||Ih&&8<Ih&&11>=Ih),qC=" ",UC=!1;function kD(e,t){switch(e){case"keyup":return pV.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function TD(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Lc=!1;function vV(e,t){switch(e){case"compositionend":return TD(t);case"keypress":return t.which!==32?null:(UC=!0,qC);case"textInput":return e=t.data,e===qC&&UC?null:e;default:return null}}function xV(e,t){if(Lc)return e==="compositionend"||!C1&&kD(e,t)?(e=PD(),Hp=w1=ho=null,Lc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return AD&&t.locale!=="ko"?null:t.data;default:return null}}var yV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function WC(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!yV[e.type]:t==="textarea"}function ED(e,t,n,r){lD(r),t=pg(t,"onChange"),0<t.length&&(n=new N1("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var $h=null,am=null;function jV(e){VD(e,0)}function ix(e){var t=zc(e);if(tD(t))return e}function bV(e,t){if(e==="change")return t}var OD=!1;if(xi){var f0;if(xi){var p0="oninput"in document;if(!p0){var HC=document.createElement("div");HC.setAttribute("oninput","return;"),p0=typeof HC.oninput=="function"}f0=p0}else f0=!1;OD=f0&&(!document.documentMode||9<document.documentMode)}function KC(){$h&&($h.detachEvent("onpropertychange",DD),am=$h=null)}function DD(e){if(e.propertyName==="value"&&ix(am)){var t=[];ED(t,am,e,v1(e)),hD(jV,t)}}function wV(e,t,n){e==="focusin"?(KC(),$h=t,am=n,$h.attachEvent("onpropertychange",DD)):e==="focusout"&&KC()}function NV(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ix(am)}function SV(e,t){if(e==="click")return ix(t)}function CV(e,t){if(e==="input"||e==="change")return ix(t)}function _V(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ia=typeof Object.is=="function"?Object.is:_V;function im(e,t){if(ia(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Dj.call(t,a)||!ia(e[a],t[a]))return!1}return!0}function GC(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function YC(e,t){var n=GC(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=GC(n)}}function MD(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?MD(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ID(){for(var e=window,t=lg();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=lg(e.document)}return t}function _1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function PV(e){var t=ID(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&MD(n.ownerDocument.documentElement,n)){if(r!==null&&_1(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=r.end===void 0?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=YC(n,i);var o=YC(n,r);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var AV=xi&&"documentMode"in document&&11>=document.documentMode,Fc=null,Jj=null,Rh=null,Zj=!1;function QC(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Zj||Fc==null||Fc!==lg(r)||(r=Fc,"selectionStart"in r&&_1(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Rh&&im(Rh,r)||(Rh=r,r=pg(Jj,"onSelect"),0<r.length&&(t=new N1("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Fc)))}function Xf(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Bc={animationend:Xf("Animation","AnimationEnd"),animationiteration:Xf("Animation","AnimationIteration"),animationstart:Xf("Animation","AnimationStart"),transitionend:Xf("Transition","TransitionEnd")},g0={},$D={};xi&&($D=document.createElement("div").style,"AnimationEvent"in window||(delete Bc.animationend.animation,delete Bc.animationiteration.animation,delete Bc.animationstart.animation),"TransitionEvent"in window||delete Bc.transitionend.transition);function ox(e){if(g0[e])return g0[e];if(!Bc[e])return e;var t=Bc[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in $D)return g0[e]=t[n];return e}var RD=ox("animationend"),LD=ox("animationiteration"),FD=ox("animationstart"),BD=ox("transitionend"),zD=new Map,XC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Io(e,t){zD.set(e,t),rc(t,[e])}for(var v0=0;v0<XC.length;v0++){var x0=XC[v0],kV=x0.toLowerCase(),TV=x0[0].toUpperCase()+x0.slice(1);Io(kV,"on"+TV)}Io(RD,"onAnimationEnd");Io(LD,"onAnimationIteration");Io(FD,"onAnimationStart");Io("dblclick","onDoubleClick");Io("focusin","onFocus");Io("focusout","onBlur");Io(BD,"onTransitionEnd");Pu("onMouseEnter",["mouseout","mouseover"]);Pu("onMouseLeave",["mouseout","mouseover"]);Pu("onPointerEnter",["pointerout","pointerover"]);Pu("onPointerLeave",["pointerout","pointerover"]);rc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));rc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));rc("onBeforeInput",["compositionend","keypress","textInput","paste"]);rc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));rc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));rc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ph="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),EV=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ph));function JC(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,kz(r,t,void 0,e),e.currentTarget=null}function VD(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;JC(a,l,u),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;JC(a,l,u),i=c}}}if(ug)throw e=Gj,ug=!1,Gj=null,e}function Jt(e,t){var n=t[sb];n===void 0&&(n=t[sb]=new Set);var r=e+"__bubble";n.has(r)||(qD(t,e,2,!1),n.add(r))}function y0(e,t,n){var r=0;t&&(r|=4),qD(n,e,r,t)}var Jf="_reactListening"+Math.random().toString(36).slice(2);function om(e){if(!e[Jf]){e[Jf]=!0,QO.forEach(function(n){n!=="selectionchange"&&(EV.has(n)||y0(n,!1,e),y0(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Jf]||(t[Jf]=!0,y0("selectionchange",!1,t))}}function qD(e,t,n,r){switch(_D(t)){case 1:var a=Wz;break;case 4:a=Hz;break;default:a=b1}n=a.bind(null,t,n,e),a=void 0,!Kj||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function j0(e,t,n,r,a){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=hl(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}hD(function(){var u=i,d=v1(n),h=[];e:{var m=zD.get(e);if(m!==void 0){var f=N1,v=e;switch(e){case"keypress":if(Kp(n)===0)break e;case"keydown":case"keyup":f=oV;break;case"focusin":v="focus",f=m0;break;case"focusout":v="blur",f=m0;break;case"beforeblur":case"afterblur":f=m0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=BC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Yz;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=uV;break;case RD:case LD:case FD:f=Jz;break;case BD:f=hV;break;case"scroll":f=Kz;break;case"wheel":f=fV;break;case"copy":case"cut":case"paste":f=eV;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=VC}var p=(t&4)!==0,g=!p&&e==="scroll",x=p?m!==null?m+"Capture":null:m;p=[];for(var y=u,b;y!==null;){b=y;var C=b.stateNode;if(b.tag===5&&C!==null&&(b=C,x!==null&&(C=tm(y,x),C!=null&&p.push(lm(y,C,b)))),g)break;y=y.return}0<p.length&&(m=new f(m,v,null,n,d),h.push({event:m,listeners:p}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",m&&n!==Wj&&(v=n.relatedTarget||n.fromElement)&&(hl(v)||v[yi]))break e;if((f||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,f?(v=n.relatedTarget||n.toElement,f=u,v=v?hl(v):null,v!==null&&(g=sc(v),v!==g||v.tag!==5&&v.tag!==6)&&(v=null)):(f=null,v=u),f!==v)){if(p=BC,C="onMouseLeave",x="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(p=VC,C="onPointerLeave",x="onPointerEnter",y="pointer"),g=f==null?m:zc(f),b=v==null?m:zc(v),m=new p(C,y+"leave",f,n,d),m.target=g,m.relatedTarget=b,C=null,hl(d)===u&&(p=new p(x,y+"enter",v,n,d),p.target=b,p.relatedTarget=g,C=p),g=C,f&&v)t:{for(p=f,x=v,y=0,b=p;b;b=xc(b))y++;for(b=0,C=x;C;C=xc(C))b++;for(;0<y-b;)p=xc(p),y--;for(;0<b-y;)x=xc(x),b--;for(;y--;){if(p===x||x!==null&&p===x.alternate)break t;p=xc(p),x=xc(x)}p=null}else p=null;f!==null&&ZC(h,m,f,p,!1),v!==null&&g!==null&&ZC(h,g,v,p,!0)}}e:{if(m=u?zc(u):window,f=m.nodeName&&m.nodeName.toLowerCase(),f==="select"||f==="input"&&m.type==="file")var w=bV;else if(WC(m))if(OD)w=CV;else{w=NV;var N=wV}else(f=m.nodeName)&&f.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(w=SV);if(w&&(w=w(e,u))){ED(h,w,n,d);break e}N&&N(e,m,u),e==="focusout"&&(N=m._wrapperState)&&N.controlled&&m.type==="number"&&Bj(m,"number",m.value)}switch(N=u?zc(u):window,e){case"focusin":(WC(N)||N.contentEditable==="true")&&(Fc=N,Jj=u,Rh=null);break;case"focusout":Rh=Jj=Fc=null;break;case"mousedown":Zj=!0;break;case"contextmenu":case"mouseup":case"dragend":Zj=!1,QC(h,n,d);break;case"selectionchange":if(AV)break;case"keydown":case"keyup":QC(h,n,d)}var S;if(C1)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Lc?kD(e,n)&&(_="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(AD&&n.locale!=="ko"&&(Lc||_!=="onCompositionStart"?_==="onCompositionEnd"&&Lc&&(S=PD()):(ho=d,w1="value"in ho?ho.value:ho.textContent,Lc=!0)),N=pg(u,_),0<N.length&&(_=new zC(_,e,null,n,d),h.push({event:_,listeners:N}),S?_.data=S:(S=TD(n),S!==null&&(_.data=S)))),(S=gV?vV(e,n):xV(e,n))&&(u=pg(u,"onBeforeInput"),0<u.length&&(d=new zC("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=S))}VD(h,t)})}function lm(e,t,n){return{instance:e,listener:t,currentTarget:n}}function pg(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=tm(e,n),i!=null&&r.unshift(lm(e,i,a)),i=tm(e,t),i!=null&&r.push(lm(e,i,a))),e=e.return}return r}function xc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ZC(e,t,n,r,a){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,a?(c=tm(n,i),c!=null&&o.unshift(lm(n,c,l))):a||(c=tm(n,i),c!=null&&o.push(lm(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var OV=/\r\n?/g,DV=/\u0000|\uFFFD/g;function e_(e){return(typeof e=="string"?e:""+e).replace(OV,`
`).replace(DV,"")}function Zf(e,t,n){if(t=e_(t),e_(e)!==t&&n)throw Error(Ne(425))}function gg(){}var eb=null,tb=null;function nb(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var rb=typeof setTimeout=="function"?setTimeout:void 0,MV=typeof clearTimeout=="function"?clearTimeout:void 0,t_=typeof Promise=="function"?Promise:void 0,IV=typeof queueMicrotask=="function"?queueMicrotask:typeof t_<"u"?function(e){return t_.resolve(null).then(e).catch($V)}:rb;function $V(e){setTimeout(function(){throw e})}function b0(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),sm(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);sm(t)}function jo(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function n_(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var yd=Math.random().toString(36).slice(2),Ca="__reactFiber$"+yd,cm="__reactProps$"+yd,yi="__reactContainer$"+yd,sb="__reactEvents$"+yd,RV="__reactListeners$"+yd,LV="__reactHandles$"+yd;function hl(e){var t=e[Ca];if(t)return t;for(var n=e.parentNode;n;){if(t=n[yi]||n[Ca]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=n_(e);e!==null;){if(n=e[Ca])return n;e=n_(e)}return t}e=n,n=e.parentNode}return null}function vf(e){return e=e[Ca]||e[yi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function zc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ne(33))}function lx(e){return e[cm]||null}var ab=[],Vc=-1;function $o(e){return{current:e}}function tn(e){0>Vc||(e.current=ab[Vc],ab[Vc]=null,Vc--)}function Gt(e,t){Vc++,ab[Vc]=e.current,e.current=t}var To={},yr=$o(To),Hr=$o(!1),$l=To;function Au(e,t){var n=e.type.contextTypes;if(!n)return To;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in n)a[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Kr(e){return e=e.childContextTypes,e!=null}function vg(){tn(Hr),tn(yr)}function r_(e,t,n){if(yr.current!==To)throw Error(Ne(168));Gt(yr,t),Gt(Hr,n)}function UD(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(Ne(108,wz(e)||"Unknown",a));return un({},n,r)}function xg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||To,$l=yr.current,Gt(yr,e),Gt(Hr,Hr.current),!0}function s_(e,t,n){var r=e.stateNode;if(!r)throw Error(Ne(169));n?(e=UD(e,t,$l),r.__reactInternalMemoizedMergedChildContext=e,tn(Hr),tn(yr),Gt(yr,e)):tn(Hr),Gt(Hr,n)}var ri=null,cx=!1,w0=!1;function WD(e){ri===null?ri=[e]:ri.push(e)}function FV(e){cx=!0,WD(e)}function Ro(){if(!w0&&ri!==null){w0=!0;var e=0,t=Rt;try{var n=ri;for(Rt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}ri=null,cx=!1}catch(a){throw ri!==null&&(ri=ri.slice(e+1)),gD(x1,Ro),a}finally{Rt=t,w0=!1}}return null}var qc=[],Uc=0,yg=null,jg=0,Ss=[],Cs=0,Rl=null,li=1,ci="";function rl(e,t){qc[Uc++]=jg,qc[Uc++]=yg,yg=e,jg=t}function HD(e,t,n){Ss[Cs++]=li,Ss[Cs++]=ci,Ss[Cs++]=Rl,Rl=e;var r=li;e=ci;var a=32-na(r)-1;r&=~(1<<a),n+=1;var i=32-na(t)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,li=1<<32-na(t)+a|n<<a|r,ci=i+e}else li=1<<i|n<<a|r,ci=e}function P1(e){e.return!==null&&(rl(e,1),HD(e,1,0))}function A1(e){for(;e===yg;)yg=qc[--Uc],qc[Uc]=null,jg=qc[--Uc],qc[Uc]=null;for(;e===Rl;)Rl=Ss[--Cs],Ss[Cs]=null,ci=Ss[--Cs],Ss[Cs]=null,li=Ss[--Cs],Ss[Cs]=null}var cs=null,ls=null,rn=!1,Js=null;function KD(e,t){var n=Ps(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function a_(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,cs=e,ls=jo(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,cs=e,ls=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Rl!==null?{id:li,overflow:ci}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ps(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,cs=e,ls=null,!0):!1;default:return!1}}function ib(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ob(e){if(rn){var t=ls;if(t){var n=t;if(!a_(e,t)){if(ib(e))throw Error(Ne(418));t=jo(n.nextSibling);var r=cs;t&&a_(e,t)?KD(r,n):(e.flags=e.flags&-4097|2,rn=!1,cs=e)}}else{if(ib(e))throw Error(Ne(418));e.flags=e.flags&-4097|2,rn=!1,cs=e}}}function i_(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;cs=e}function ep(e){if(e!==cs)return!1;if(!rn)return i_(e),rn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!nb(e.type,e.memoizedProps)),t&&(t=ls)){if(ib(e))throw GD(),Error(Ne(418));for(;t;)KD(e,t),t=jo(t.nextSibling)}if(i_(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ne(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ls=jo(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ls=null}}else ls=cs?jo(e.stateNode.nextSibling):null;return!0}function GD(){for(var e=ls;e;)e=jo(e.nextSibling)}function ku(){ls=cs=null,rn=!1}function k1(e){Js===null?Js=[e]:Js.push(e)}var BV=Ti.ReactCurrentBatchConfig;function ah(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ne(309));var r=n.stateNode}if(!r)throw Error(Ne(147,e));var a=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(Ne(284));if(!n._owner)throw Error(Ne(290,e))}return e}function tp(e,t){throw e=Object.prototype.toString.call(t),Error(Ne(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function o_(e){var t=e._init;return t(e._payload)}function YD(e){function t(x,y){if(e){var b=x.deletions;b===null?(x.deletions=[y],x.flags|=16):b.push(y)}}function n(x,y){if(!e)return null;for(;y!==null;)t(x,y),y=y.sibling;return null}function r(x,y){for(x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function a(x,y){return x=So(x,y),x.index=0,x.sibling=null,x}function i(x,y,b){return x.index=b,e?(b=x.alternate,b!==null?(b=b.index,b<y?(x.flags|=2,y):b):(x.flags|=2,y)):(x.flags|=1048576,y)}function o(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,y,b,C){return y===null||y.tag!==6?(y=k0(b,x.mode,C),y.return=x,y):(y=a(y,b),y.return=x,y)}function c(x,y,b,C){var w=b.type;return w===Rc?d(x,y,b.props.children,C,b.key):y!==null&&(y.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Gi&&o_(w)===y.type)?(C=a(y,b.props),C.ref=ah(x,y,b),C.return=x,C):(C=eg(b.type,b.key,b.props,null,x.mode,C),C.ref=ah(x,y,b),C.return=x,C)}function u(x,y,b,C){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=T0(b,x.mode,C),y.return=x,y):(y=a(y,b.children||[]),y.return=x,y)}function d(x,y,b,C,w){return y===null||y.tag!==7?(y=Ol(b,x.mode,C,w),y.return=x,y):(y=a(y,b),y.return=x,y)}function h(x,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=k0(""+y,x.mode,b),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Uf:return b=eg(y.type,y.key,y.props,null,x.mode,b),b.ref=ah(x,null,y),b.return=x,b;case $c:return y=T0(y,x.mode,b),y.return=x,y;case Gi:var C=y._init;return h(x,C(y._payload),b)}if(Ch(y)||eh(y))return y=Ol(y,x.mode,b,null),y.return=x,y;tp(x,y)}return null}function m(x,y,b,C){var w=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return w!==null?null:l(x,y,""+b,C);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Uf:return b.key===w?c(x,y,b,C):null;case $c:return b.key===w?u(x,y,b,C):null;case Gi:return w=b._init,m(x,y,w(b._payload),C)}if(Ch(b)||eh(b))return w!==null?null:d(x,y,b,C,null);tp(x,b)}return null}function f(x,y,b,C,w){if(typeof C=="string"&&C!==""||typeof C=="number")return x=x.get(b)||null,l(y,x,""+C,w);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Uf:return x=x.get(C.key===null?b:C.key)||null,c(y,x,C,w);case $c:return x=x.get(C.key===null?b:C.key)||null,u(y,x,C,w);case Gi:var N=C._init;return f(x,y,b,N(C._payload),w)}if(Ch(C)||eh(C))return x=x.get(b)||null,d(y,x,C,w,null);tp(y,C)}return null}function v(x,y,b,C){for(var w=null,N=null,S=y,_=y=0,P=null;S!==null&&_<b.length;_++){S.index>_?(P=S,S=null):P=S.sibling;var A=m(x,S,b[_],C);if(A===null){S===null&&(S=P);break}e&&S&&A.alternate===null&&t(x,S),y=i(A,y,_),N===null?w=A:N.sibling=A,N=A,S=P}if(_===b.length)return n(x,S),rn&&rl(x,_),w;if(S===null){for(;_<b.length;_++)S=h(x,b[_],C),S!==null&&(y=i(S,y,_),N===null?w=S:N.sibling=S,N=S);return rn&&rl(x,_),w}for(S=r(x,S);_<b.length;_++)P=f(S,x,_,b[_],C),P!==null&&(e&&P.alternate!==null&&S.delete(P.key===null?_:P.key),y=i(P,y,_),N===null?w=P:N.sibling=P,N=P);return e&&S.forEach(function(E){return t(x,E)}),rn&&rl(x,_),w}function p(x,y,b,C){var w=eh(b);if(typeof w!="function")throw Error(Ne(150));if(b=w.call(b),b==null)throw Error(Ne(151));for(var N=w=null,S=y,_=y=0,P=null,A=b.next();S!==null&&!A.done;_++,A=b.next()){S.index>_?(P=S,S=null):P=S.sibling;var E=m(x,S,A.value,C);if(E===null){S===null&&(S=P);break}e&&S&&E.alternate===null&&t(x,S),y=i(E,y,_),N===null?w=E:N.sibling=E,N=E,S=P}if(A.done)return n(x,S),rn&&rl(x,_),w;if(S===null){for(;!A.done;_++,A=b.next())A=h(x,A.value,C),A!==null&&(y=i(A,y,_),N===null?w=A:N.sibling=A,N=A);return rn&&rl(x,_),w}for(S=r(x,S);!A.done;_++,A=b.next())A=f(S,x,_,A.value,C),A!==null&&(e&&A.alternate!==null&&S.delete(A.key===null?_:A.key),y=i(A,y,_),N===null?w=A:N.sibling=A,N=A);return e&&S.forEach(function(k){return t(x,k)}),rn&&rl(x,_),w}function g(x,y,b,C){if(typeof b=="object"&&b!==null&&b.type===Rc&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Uf:e:{for(var w=b.key,N=y;N!==null;){if(N.key===w){if(w=b.type,w===Rc){if(N.tag===7){n(x,N.sibling),y=a(N,b.props.children),y.return=x,x=y;break e}}else if(N.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Gi&&o_(w)===N.type){n(x,N.sibling),y=a(N,b.props),y.ref=ah(x,N,b),y.return=x,x=y;break e}n(x,N);break}else t(x,N);N=N.sibling}b.type===Rc?(y=Ol(b.props.children,x.mode,C,b.key),y.return=x,x=y):(C=eg(b.type,b.key,b.props,null,x.mode,C),C.ref=ah(x,y,b),C.return=x,x=C)}return o(x);case $c:e:{for(N=b.key;y!==null;){if(y.key===N)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){n(x,y.sibling),y=a(y,b.children||[]),y.return=x,x=y;break e}else{n(x,y);break}else t(x,y);y=y.sibling}y=T0(b,x.mode,C),y.return=x,x=y}return o(x);case Gi:return N=b._init,g(x,y,N(b._payload),C)}if(Ch(b))return v(x,y,b,C);if(eh(b))return p(x,y,b,C);tp(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(n(x,y.sibling),y=a(y,b),y.return=x,x=y):(n(x,y),y=k0(b,x.mode,C),y.return=x,x=y),o(x)):n(x,y)}return g}var Tu=YD(!0),QD=YD(!1),bg=$o(null),wg=null,Wc=null,T1=null;function E1(){T1=Wc=wg=null}function O1(e){var t=bg.current;tn(bg),e._currentValue=t}function lb(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ru(e,t){wg=e,T1=Wc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ur=!0),e.firstContext=null)}function Es(e){var t=e._currentValue;if(T1!==e)if(e={context:e,memoizedValue:t,next:null},Wc===null){if(wg===null)throw Error(Ne(308));Wc=e,wg.dependencies={lanes:0,firstContext:e}}else Wc=Wc.next=e;return t}var ml=null;function D1(e){ml===null?ml=[e]:ml.push(e)}function XD(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,D1(t)):(n.next=a.next,a.next=n),t.interleaved=n,ji(e,r)}function ji(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Yi=!1;function M1(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function JD(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function mi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function bo(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Nt&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,ji(e,n)}return a=r.interleaved,a===null?(t.next=t,D1(r)):(t.next=a.next,a.next=t),r.interleaved=t,ji(e,n)}function Gp(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,y1(e,n)}}function l_(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?a=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?a=i=t:i=i.next=t}else a=i=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ng(e,t,n,r){var a=e.updateQueue;Yi=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=a.baseState;o=0,d=u=c=null,l=i;do{var m=l.lane,f=l.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,p=l;switch(m=t,f=n,p.tag){case 1:if(v=p.payload,typeof v=="function"){h=v.call(f,h,m);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=p.payload,m=typeof v=="function"?v.call(f,h,m):v,m==null)break e;h=un({},h,m);break e;case 2:Yi=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=a.effects,m===null?a.effects=[l]:m.push(l))}else f={eventTime:f,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=f,c=h):d=d.next=f,o|=m;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;m=l,l=m.next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}while(!0);if(d===null&&(c=h),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Fl|=o,e.lanes=o,e.memoizedState=h}}function c_(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(Ne(191,a));a.call(r)}}}var xf={},Ma=$o(xf),um=$o(xf),dm=$o(xf);function fl(e){if(e===xf)throw Error(Ne(174));return e}function I1(e,t){switch(Gt(dm,t),Gt(um,e),Gt(Ma,xf),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Vj(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Vj(t,e)}tn(Ma),Gt(Ma,t)}function Eu(){tn(Ma),tn(um),tn(dm)}function ZD(e){fl(dm.current);var t=fl(Ma.current),n=Vj(t,e.type);t!==n&&(Gt(um,e),Gt(Ma,n))}function $1(e){um.current===e&&(tn(Ma),tn(um))}var on=$o(0);function Sg(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var N0=[];function R1(){for(var e=0;e<N0.length;e++)N0[e]._workInProgressVersionPrimary=null;N0.length=0}var Yp=Ti.ReactCurrentDispatcher,S0=Ti.ReactCurrentBatchConfig,Ll=0,ln=null,In=null,Wn=null,Cg=!1,Lh=!1,hm=0,zV=0;function lr(){throw Error(Ne(321))}function L1(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ia(e[n],t[n]))return!1;return!0}function F1(e,t,n,r,a,i){if(Ll=i,ln=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Yp.current=e===null||e.memoizedState===null?WV:HV,e=n(r,a),Lh){i=0;do{if(Lh=!1,hm=0,25<=i)throw Error(Ne(301));i+=1,Wn=In=null,t.updateQueue=null,Yp.current=KV,e=n(r,a)}while(Lh)}if(Yp.current=_g,t=In!==null&&In.next!==null,Ll=0,Wn=In=ln=null,Cg=!1,t)throw Error(Ne(300));return e}function B1(){var e=hm!==0;return hm=0,e}function ja(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wn===null?ln.memoizedState=Wn=e:Wn=Wn.next=e,Wn}function Os(){if(In===null){var e=ln.alternate;e=e!==null?e.memoizedState:null}else e=In.next;var t=Wn===null?ln.memoizedState:Wn.next;if(t!==null)Wn=t,In=e;else{if(e===null)throw Error(Ne(310));In=e,e={memoizedState:In.memoizedState,baseState:In.baseState,baseQueue:In.baseQueue,queue:In.queue,next:null},Wn===null?ln.memoizedState=Wn=e:Wn=Wn.next=e}return Wn}function mm(e,t){return typeof t=="function"?t(e):t}function C0(e){var t=Os(),n=t.queue;if(n===null)throw Error(Ne(311));n.lastRenderedReducer=e;var r=In,a=r.baseQueue,i=n.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}r.baseQueue=a=i,n.pending=null}if(a!==null){i=a.next,r=r.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((Ll&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=r):c=c.next=h,ln.lanes|=d,Fl|=d}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=l,ia(r,t.memoizedState)||(Ur=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do i=a.lane,ln.lanes|=i,Fl|=i,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _0(e){var t=Os(),n=t.queue;if(n===null)throw Error(Ne(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);ia(i,t.memoizedState)||(Ur=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function eM(){}function tM(e,t){var n=ln,r=Os(),a=t(),i=!ia(r.memoizedState,a);if(i&&(r.memoizedState=a,Ur=!0),r=r.queue,z1(sM.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Wn!==null&&Wn.memoizedState.tag&1){if(n.flags|=2048,fm(9,rM.bind(null,n,r,a,t),void 0,null),Yn===null)throw Error(Ne(349));Ll&30||nM(n,t,a)}return a}function nM(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ln.updateQueue,t===null?(t={lastEffect:null,stores:null},ln.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function rM(e,t,n,r){t.value=n,t.getSnapshot=r,aM(t)&&iM(e)}function sM(e,t,n){return n(function(){aM(t)&&iM(e)})}function aM(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ia(e,n)}catch{return!0}}function iM(e){var t=ji(e,1);t!==null&&ra(t,e,1,-1)}function u_(e){var t=ja();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mm,lastRenderedState:e},t.queue=e,e=e.dispatch=UV.bind(null,ln,e),[t.memoizedState,e]}function fm(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ln.updateQueue,t===null?(t={lastEffect:null,stores:null},ln.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function oM(){return Os().memoizedState}function Qp(e,t,n,r){var a=ja();ln.flags|=e,a.memoizedState=fm(1|t,n,void 0,r===void 0?null:r)}function ux(e,t,n,r){var a=Os();r=r===void 0?null:r;var i=void 0;if(In!==null){var o=In.memoizedState;if(i=o.destroy,r!==null&&L1(r,o.deps)){a.memoizedState=fm(t,n,i,r);return}}ln.flags|=e,a.memoizedState=fm(1|t,n,i,r)}function d_(e,t){return Qp(8390656,8,e,t)}function z1(e,t){return ux(2048,8,e,t)}function lM(e,t){return ux(4,2,e,t)}function cM(e,t){return ux(4,4,e,t)}function uM(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function dM(e,t,n){return n=n!=null?n.concat([e]):null,ux(4,4,uM.bind(null,t,e),n)}function V1(){}function hM(e,t){var n=Os();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&L1(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function mM(e,t){var n=Os();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&L1(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function fM(e,t,n){return Ll&21?(ia(n,t)||(n=yD(),ln.lanes|=n,Fl|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ur=!0),e.memoizedState=n)}function VV(e,t){var n=Rt;Rt=n!==0&&4>n?n:4,e(!0);var r=S0.transition;S0.transition={};try{e(!1),t()}finally{Rt=n,S0.transition=r}}function pM(){return Os().memoizedState}function qV(e,t,n){var r=No(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},gM(e))vM(t,n);else if(n=XD(e,t,n,r),n!==null){var a=Tr();ra(n,e,r,a),xM(n,t,r)}}function UV(e,t,n){var r=No(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(gM(e))vM(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(a.hasEagerState=!0,a.eagerState=l,ia(l,o)){var c=t.interleaved;c===null?(a.next=a,D1(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}n=XD(e,t,a,r),n!==null&&(a=Tr(),ra(n,e,r,a),xM(n,t,r))}}function gM(e){var t=e.alternate;return e===ln||t!==null&&t===ln}function vM(e,t){Lh=Cg=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function xM(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,y1(e,n)}}var _g={readContext:Es,useCallback:lr,useContext:lr,useEffect:lr,useImperativeHandle:lr,useInsertionEffect:lr,useLayoutEffect:lr,useMemo:lr,useReducer:lr,useRef:lr,useState:lr,useDebugValue:lr,useDeferredValue:lr,useTransition:lr,useMutableSource:lr,useSyncExternalStore:lr,useId:lr,unstable_isNewReconciler:!1},WV={readContext:Es,useCallback:function(e,t){return ja().memoizedState=[e,t===void 0?null:t],e},useContext:Es,useEffect:d_,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Qp(4194308,4,uM.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Qp(4194308,4,e,t)},useInsertionEffect:function(e,t){return Qp(4,2,e,t)},useMemo:function(e,t){var n=ja();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ja();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=qV.bind(null,ln,e),[r.memoizedState,e]},useRef:function(e){var t=ja();return e={current:e},t.memoizedState=e},useState:u_,useDebugValue:V1,useDeferredValue:function(e){return ja().memoizedState=e},useTransition:function(){var e=u_(!1),t=e[0];return e=VV.bind(null,e[1]),ja().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ln,a=ja();if(rn){if(n===void 0)throw Error(Ne(407));n=n()}else{if(n=t(),Yn===null)throw Error(Ne(349));Ll&30||nM(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,d_(sM.bind(null,r,i,e),[e]),r.flags|=2048,fm(9,rM.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=ja(),t=Yn.identifierPrefix;if(rn){var n=ci,r=li;n=(r&~(1<<32-na(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=hm++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=zV++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},HV={readContext:Es,useCallback:hM,useContext:Es,useEffect:z1,useImperativeHandle:dM,useInsertionEffect:lM,useLayoutEffect:cM,useMemo:mM,useReducer:C0,useRef:oM,useState:function(){return C0(mm)},useDebugValue:V1,useDeferredValue:function(e){var t=Os();return fM(t,In.memoizedState,e)},useTransition:function(){var e=C0(mm)[0],t=Os().memoizedState;return[e,t]},useMutableSource:eM,useSyncExternalStore:tM,useId:pM,unstable_isNewReconciler:!1},KV={readContext:Es,useCallback:hM,useContext:Es,useEffect:z1,useImperativeHandle:dM,useInsertionEffect:lM,useLayoutEffect:cM,useMemo:mM,useReducer:_0,useRef:oM,useState:function(){return _0(mm)},useDebugValue:V1,useDeferredValue:function(e){var t=Os();return In===null?t.memoizedState=e:fM(t,In.memoizedState,e)},useTransition:function(){var e=_0(mm)[0],t=Os().memoizedState;return[e,t]},useMutableSource:eM,useSyncExternalStore:tM,useId:pM,unstable_isNewReconciler:!1};function Ws(e,t){if(e&&e.defaultProps){t=un({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function cb(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:un({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var dx={isMounted:function(e){return(e=e._reactInternals)?sc(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Tr(),a=No(e),i=mi(r,a);i.payload=t,n!=null&&(i.callback=n),t=bo(e,i,a),t!==null&&(ra(t,e,a,r),Gp(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Tr(),a=No(e),i=mi(r,a);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=bo(e,i,a),t!==null&&(ra(t,e,a,r),Gp(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Tr(),r=No(e),a=mi(n,r);a.tag=2,t!=null&&(a.callback=t),t=bo(e,a,r),t!==null&&(ra(t,e,r,n),Gp(t,e,r))}};function h_(e,t,n,r,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!im(n,r)||!im(a,i):!0}function yM(e,t,n){var r=!1,a=To,i=t.contextType;return typeof i=="object"&&i!==null?i=Es(i):(a=Kr(t)?$l:yr.current,r=t.contextTypes,i=(r=r!=null)?Au(e,a):To),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=dx,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function m_(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&dx.enqueueReplaceState(t,t.state,null)}function ub(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},M1(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Es(i):(i=Kr(t)?$l:yr.current,a.context=Au(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(cb(e,t,i,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&dx.enqueueReplaceState(a,a.state,null),Ng(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Ou(e,t){try{var n="",r=t;do n+=bz(r),r=r.return;while(r);var a=n}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function P0(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function db(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var GV=typeof WeakMap=="function"?WeakMap:Map;function jM(e,t,n){n=mi(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ag||(Ag=!0,bb=r),db(e,t)},n}function bM(e,t,n){n=mi(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){db(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){db(e,t),typeof r!="function"&&(wo===null?wo=new Set([this]):wo.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function f_(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new GV;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=lq.bind(null,e,t,n),t.then(e,e))}function p_(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function g_(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=mi(-1,1),t.tag=2,bo(n,t,1))),n.lanes|=1),e)}var YV=Ti.ReactCurrentOwner,Ur=!1;function Sr(e,t,n,r){t.child=e===null?QD(t,null,n,r):Tu(t,e.child,n,r)}function v_(e,t,n,r,a){n=n.render;var i=t.ref;return ru(t,a),r=F1(e,t,n,r,i,a),n=B1(),e!==null&&!Ur?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,bi(e,t,a)):(rn&&n&&P1(t),t.flags|=1,Sr(e,t,r,a),t.child)}function x_(e,t,n,r,a){if(e===null){var i=n.type;return typeof i=="function"&&!Q1(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,wM(e,t,i,r,a)):(e=eg(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:im,n(o,r)&&e.ref===t.ref)return bi(e,t,a)}return t.flags|=1,e=So(i,r),e.ref=t.ref,e.return=t,t.child=e}function wM(e,t,n,r,a){if(e!==null){var i=e.memoizedProps;if(im(i,r)&&e.ref===t.ref)if(Ur=!1,t.pendingProps=r=i,(e.lanes&a)!==0)e.flags&131072&&(Ur=!0);else return t.lanes=e.lanes,bi(e,t,a)}return hb(e,t,n,r,a)}function NM(e,t,n){var r=t.pendingProps,a=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Gt(Kc,rs),rs|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Gt(Kc,rs),rs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Gt(Kc,rs),rs|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Gt(Kc,rs),rs|=r;return Sr(e,t,a,n),t.child}function SM(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function hb(e,t,n,r,a){var i=Kr(n)?$l:yr.current;return i=Au(t,i),ru(t,a),n=F1(e,t,n,r,i,a),r=B1(),e!==null&&!Ur?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,bi(e,t,a)):(rn&&r&&P1(t),t.flags|=1,Sr(e,t,n,a),t.child)}function y_(e,t,n,r,a){if(Kr(n)){var i=!0;xg(t)}else i=!1;if(ru(t,a),t.stateNode===null)Xp(e,t),yM(t,n,r),ub(t,n,r,a),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Es(u):(u=Kr(n)?$l:yr.current,u=Au(t,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&m_(t,o,r,u),Yi=!1;var m=t.memoizedState;o.state=m,Ng(t,r,o,a),c=t.memoizedState,l!==r||m!==c||Hr.current||Yi?(typeof d=="function"&&(cb(t,n,d,r),c=t.memoizedState),(l=Yi||h_(t,n,l,r,m,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,JD(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Ws(t.type,l),o.props=u,h=t.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Es(c):(c=Kr(n)?$l:yr.current,c=Au(t,c));var f=n.getDerivedStateFromProps;(d=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||m!==c)&&m_(t,o,r,c),Yi=!1,m=t.memoizedState,o.state=m,Ng(t,r,o,a);var v=t.memoizedState;l!==h||m!==v||Hr.current||Yi?(typeof f=="function"&&(cb(t,n,f,r),v=t.memoizedState),(u=Yi||h_(t,n,u,r,m,v,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),o.props=r,o.state=v,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return mb(e,t,n,r,i,a)}function mb(e,t,n,r,a,i){SM(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return a&&s_(t,n,!1),bi(e,t,i);r=t.stateNode,YV.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Tu(t,e.child,null,i),t.child=Tu(t,null,l,i)):Sr(e,t,l,i),t.memoizedState=r.state,a&&s_(t,n,!0),t.child}function CM(e){var t=e.stateNode;t.pendingContext?r_(e,t.pendingContext,t.pendingContext!==t.context):t.context&&r_(e,t.context,!1),I1(e,t.containerInfo)}function j_(e,t,n,r,a){return ku(),k1(a),t.flags|=256,Sr(e,t,n,r),t.child}var fb={dehydrated:null,treeContext:null,retryLane:0};function pb(e){return{baseLanes:e,cachePool:null,transitions:null}}function _M(e,t,n){var r=t.pendingProps,a=on.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Gt(on,a&1),e===null)return ob(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=fx(o,r,0,null),e=Ol(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=pb(n),t.memoizedState=fb,e):q1(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return QV(e,t,o,r,l,a,n);if(i){i=r.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=So(a,c),r.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=So(l,i):(i=Ol(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?pb(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=fb,r}return i=e.child,e=i.sibling,r=So(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function q1(e,t){return t=fx({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function np(e,t,n,r){return r!==null&&k1(r),Tu(t,e.child,null,n),e=q1(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function QV(e,t,n,r,a,i,o){if(n)return t.flags&256?(t.flags&=-257,r=P0(Error(Ne(422))),np(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=fx({mode:"visible",children:r.children},a,0,null),i=Ol(i,a,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Tu(t,e.child,null,o),t.child.memoizedState=pb(o),t.memoizedState=fb,i);if(!(t.mode&1))return np(e,t,o,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(Ne(419)),r=P0(i,r,void 0),np(e,t,o,r)}if(l=(o&e.childLanes)!==0,Ur||l){if(r=Yn,r!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,ji(e,a),ra(r,e,a,-1))}return Y1(),r=P0(Error(Ne(421))),np(e,t,o,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=cq.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,ls=jo(a.nextSibling),cs=t,rn=!0,Js=null,e!==null&&(Ss[Cs++]=li,Ss[Cs++]=ci,Ss[Cs++]=Rl,li=e.id,ci=e.overflow,Rl=t),t=q1(t,r.children),t.flags|=4096,t)}function b_(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),lb(e.return,t,n)}function A0(e,t,n,r,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function PM(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(Sr(e,t,r.children,n),r=on.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&b_(e,n,t);else if(e.tag===19)b_(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Gt(on,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Sg(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),A0(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Sg(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}A0(t,!0,n,null,i);break;case"together":A0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xp(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function bi(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Fl|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ne(153));if(t.child!==null){for(e=t.child,n=So(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=So(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function XV(e,t,n){switch(t.tag){case 3:CM(t),ku();break;case 5:ZD(t);break;case 1:Kr(t.type)&&xg(t);break;case 4:I1(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Gt(bg,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Gt(on,on.current&1),t.flags|=128,null):n&t.child.childLanes?_M(e,t,n):(Gt(on,on.current&1),e=bi(e,t,n),e!==null?e.sibling:null);Gt(on,on.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return PM(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Gt(on,on.current),r)break;return null;case 22:case 23:return t.lanes=0,NM(e,t,n)}return bi(e,t,n)}var AM,gb,kM,TM;AM=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gb=function(){};kM=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,fl(Ma.current);var i=null;switch(n){case"input":a=Lj(e,a),r=Lj(e,r),i=[];break;case"select":a=un({},a,{value:void 0}),r=un({},r,{value:void 0}),i=[];break;case"textarea":a=zj(e,a),r=zj(e,r),i=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=gg)}qj(n,r);var o;n=null;for(u in a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Zh.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=a!=null?a[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Zh.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Jt("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};TM=function(e,t,n,r){n!==r&&(t.flags|=4)};function ih(e,t){if(!rn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function cr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function JV(e,t,n){var r=t.pendingProps;switch(A1(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cr(t),null;case 1:return Kr(t.type)&&vg(),cr(t),null;case 3:return r=t.stateNode,Eu(),tn(Hr),tn(yr),R1(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ep(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Js!==null&&(Sb(Js),Js=null))),gb(e,t),cr(t),null;case 5:$1(t);var a=fl(dm.current);if(n=t.type,e!==null&&t.stateNode!=null)kM(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Ne(166));return cr(t),null}if(e=fl(Ma.current),ep(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Ca]=t,r[cm]=i,e=(t.mode&1)!==0,n){case"dialog":Jt("cancel",r),Jt("close",r);break;case"iframe":case"object":case"embed":Jt("load",r);break;case"video":case"audio":for(a=0;a<Ph.length;a++)Jt(Ph[a],r);break;case"source":Jt("error",r);break;case"img":case"image":case"link":Jt("error",r),Jt("load",r);break;case"details":Jt("toggle",r);break;case"input":TC(r,i),Jt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Jt("invalid",r);break;case"textarea":OC(r,i),Jt("invalid",r)}qj(n,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Zf(r.textContent,l,e),a=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Zf(r.textContent,l,e),a=["children",""+l]):Zh.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Jt("scroll",r)}switch(n){case"input":Wf(r),EC(r,i,!0);break;case"textarea":Wf(r),DC(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=gg)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=sD(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Ca]=t,e[cm]=r,AM(e,t,!1,!1),t.stateNode=e;e:{switch(o=Uj(n,r),n){case"dialog":Jt("cancel",e),Jt("close",e),a=r;break;case"iframe":case"object":case"embed":Jt("load",e),a=r;break;case"video":case"audio":for(a=0;a<Ph.length;a++)Jt(Ph[a],e);a=r;break;case"source":Jt("error",e),a=r;break;case"img":case"image":case"link":Jt("error",e),Jt("load",e),a=r;break;case"details":Jt("toggle",e),a=r;break;case"input":TC(e,r),a=Lj(e,r),Jt("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=un({},r,{value:void 0}),Jt("invalid",e);break;case"textarea":OC(e,r),a=zj(e,r),Jt("invalid",e);break;default:a=r}qj(n,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?oD(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&aD(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&em(e,c):typeof c=="number"&&em(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Zh.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Jt("scroll",e):c!=null&&m1(e,i,c,o))}switch(n){case"input":Wf(e),EC(e,r,!1);break;case"textarea":Wf(e),DC(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ko(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Zc(e,!!r.multiple,i,!1):r.defaultValue!=null&&Zc(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=gg)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return cr(t),null;case 6:if(e&&t.stateNode!=null)TM(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Ne(166));if(n=fl(dm.current),fl(Ma.current),ep(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ca]=t,(i=r.nodeValue!==n)&&(e=cs,e!==null))switch(e.tag){case 3:Zf(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Zf(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ca]=t,t.stateNode=r}return cr(t),null;case 13:if(tn(on),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(rn&&ls!==null&&t.mode&1&&!(t.flags&128))GD(),ku(),t.flags|=98560,i=!1;else if(i=ep(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(Ne(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ne(317));i[Ca]=t}else ku(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;cr(t),i=!1}else Js!==null&&(Sb(Js),Js=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||on.current&1?Fn===0&&(Fn=3):Y1())),t.updateQueue!==null&&(t.flags|=4),cr(t),null);case 4:return Eu(),gb(e,t),e===null&&om(t.stateNode.containerInfo),cr(t),null;case 10:return O1(t.type._context),cr(t),null;case 17:return Kr(t.type)&&vg(),cr(t),null;case 19:if(tn(on),i=t.memoizedState,i===null)return cr(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)ih(i,!1);else{if(Fn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Sg(e),o!==null){for(t.flags|=128,ih(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Gt(on,on.current&1|2),t.child}e=e.sibling}i.tail!==null&&yn()>Du&&(t.flags|=128,r=!0,ih(i,!1),t.lanes=4194304)}else{if(!r)if(e=Sg(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ih(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!rn)return cr(t),null}else 2*yn()-i.renderingStartTime>Du&&n!==1073741824&&(t.flags|=128,r=!0,ih(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=yn(),t.sibling=null,n=on.current,Gt(on,r?n&1|2:n&1),t):(cr(t),null);case 22:case 23:return G1(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?rs&1073741824&&(cr(t),t.subtreeFlags&6&&(t.flags|=8192)):cr(t),null;case 24:return null;case 25:return null}throw Error(Ne(156,t.tag))}function ZV(e,t){switch(A1(t),t.tag){case 1:return Kr(t.type)&&vg(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Eu(),tn(Hr),tn(yr),R1(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return $1(t),null;case 13:if(tn(on),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ne(340));ku()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return tn(on),null;case 4:return Eu(),null;case 10:return O1(t.type._context),null;case 22:case 23:return G1(),null;case 24:return null;default:return null}}var rp=!1,mr=!1,eq=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function Hc(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){pn(e,t,r)}else n.current=null}function vb(e,t,n){try{n()}catch(r){pn(e,t,r)}}var w_=!1;function tq(e,t){if(eb=mg,e=ID(),_1(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,m=null;t:for(;;){for(var f;h!==n||a!==0&&h.nodeType!==3||(l=o+a),h!==i||r!==0&&h.nodeType!==3||(c=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)m=h,h=f;for(;;){if(h===e)break t;if(m===n&&++u===a&&(l=o),m===i&&++d===r&&(c=o),(f=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=f}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tb={focusedElem:e,selectionRange:n},mg=!1,Ie=t;Ie!==null;)if(t=Ie,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ie=e;else for(;Ie!==null;){t=Ie;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var p=v.memoizedProps,g=v.memoizedState,x=t.stateNode,y=x.getSnapshotBeforeUpdate(t.elementType===t.type?p:Ws(t.type,p),g);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ne(163))}}catch(C){pn(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,Ie=e;break}Ie=t.return}return v=w_,w_=!1,v}function Fh(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&vb(t,n,i)}a=a.next}while(a!==r)}}function hx(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function xb(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function EM(e){var t=e.alternate;t!==null&&(e.alternate=null,EM(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ca],delete t[cm],delete t[sb],delete t[RV],delete t[LV])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function OM(e){return e.tag===5||e.tag===3||e.tag===4}function N_(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||OM(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function yb(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=gg));else if(r!==4&&(e=e.child,e!==null))for(yb(e,t,n),e=e.sibling;e!==null;)yb(e,t,n),e=e.sibling}function jb(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(jb(e,t,n),e=e.sibling;e!==null;)jb(e,t,n),e=e.sibling}var rr=null,Gs=!1;function Fi(e,t,n){for(n=n.child;n!==null;)DM(e,t,n),n=n.sibling}function DM(e,t,n){if(Da&&typeof Da.onCommitFiberUnmount=="function")try{Da.onCommitFiberUnmount(sx,n)}catch{}switch(n.tag){case 5:mr||Hc(n,t);case 6:var r=rr,a=Gs;rr=null,Fi(e,t,n),rr=r,Gs=a,rr!==null&&(Gs?(e=rr,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):rr.removeChild(n.stateNode));break;case 18:rr!==null&&(Gs?(e=rr,n=n.stateNode,e.nodeType===8?b0(e.parentNode,n):e.nodeType===1&&b0(e,n),sm(e)):b0(rr,n.stateNode));break;case 4:r=rr,a=Gs,rr=n.stateNode.containerInfo,Gs=!0,Fi(e,t,n),rr=r,Gs=a;break;case 0:case 11:case 14:case 15:if(!mr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&vb(n,t,o),a=a.next}while(a!==r)}Fi(e,t,n);break;case 1:if(!mr&&(Hc(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){pn(n,t,l)}Fi(e,t,n);break;case 21:Fi(e,t,n);break;case 22:n.mode&1?(mr=(r=mr)||n.memoizedState!==null,Fi(e,t,n),mr=r):Fi(e,t,n);break;default:Fi(e,t,n)}}function S_(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new eq),t.forEach(function(r){var a=uq.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function Bs(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:rr=l.stateNode,Gs=!1;break e;case 3:rr=l.stateNode.containerInfo,Gs=!0;break e;case 4:rr=l.stateNode.containerInfo,Gs=!0;break e}l=l.return}if(rr===null)throw Error(Ne(160));DM(i,o,a),rr=null,Gs=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){pn(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)MM(t,e),t=t.sibling}function MM(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Bs(t,e),ya(e),r&4){try{Fh(3,e,e.return),hx(3,e)}catch(p){pn(e,e.return,p)}try{Fh(5,e,e.return)}catch(p){pn(e,e.return,p)}}break;case 1:Bs(t,e),ya(e),r&512&&n!==null&&Hc(n,n.return);break;case 5:if(Bs(t,e),ya(e),r&512&&n!==null&&Hc(n,n.return),e.flags&32){var a=e.stateNode;try{em(a,"")}catch(p){pn(e,e.return,p)}}if(r&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&nD(a,i),Uj(l,o);var u=Uj(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?oD(a,h):d==="dangerouslySetInnerHTML"?aD(a,h):d==="children"?em(a,h):m1(a,d,h,u)}switch(l){case"input":Fj(a,i);break;case"textarea":rD(a,i);break;case"select":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Zc(a,!!i.multiple,f,!1):m!==!!i.multiple&&(i.defaultValue!=null?Zc(a,!!i.multiple,i.defaultValue,!0):Zc(a,!!i.multiple,i.multiple?[]:"",!1))}a[cm]=i}catch(p){pn(e,e.return,p)}}break;case 6:if(Bs(t,e),ya(e),r&4){if(e.stateNode===null)throw Error(Ne(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(p){pn(e,e.return,p)}}break;case 3:if(Bs(t,e),ya(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{sm(t.containerInfo)}catch(p){pn(e,e.return,p)}break;case 4:Bs(t,e),ya(e);break;case 13:Bs(t,e),ya(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(H1=yn())),r&4&&S_(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(mr=(u=mr)||d,Bs(t,e),mr=u):Bs(t,e),ya(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(Ie=e,d=e.child;d!==null;){for(h=Ie=d;Ie!==null;){switch(m=Ie,f=m.child,m.tag){case 0:case 11:case 14:case 15:Fh(4,m,m.return);break;case 1:Hc(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(p){pn(r,n,p)}}break;case 5:Hc(m,m.return);break;case 22:if(m.memoizedState!==null){__(h);continue}}f!==null?(f.return=m,Ie=f):__(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{a=h.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=iD("display",o))}catch(p){pn(e,e.return,p)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(p){pn(e,e.return,p)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Bs(t,e),ya(e),r&4&&S_(e);break;case 21:break;default:Bs(t,e),ya(e)}}function ya(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(OM(n)){var r=n;break e}n=n.return}throw Error(Ne(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(em(a,""),r.flags&=-33);var i=N_(e);jb(e,i,a);break;case 3:case 4:var o=r.stateNode.containerInfo,l=N_(e);yb(e,l,o);break;default:throw Error(Ne(161))}}catch(c){pn(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function nq(e,t,n){Ie=e,IM(e)}function IM(e,t,n){for(var r=(e.mode&1)!==0;Ie!==null;){var a=Ie,i=a.child;if(a.tag===22&&r){var o=a.memoizedState!==null||rp;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||mr;l=rp;var u=mr;if(rp=o,(mr=c)&&!u)for(Ie=a;Ie!==null;)o=Ie,c=o.child,o.tag===22&&o.memoizedState!==null?P_(a):c!==null?(c.return=o,Ie=c):P_(a);for(;i!==null;)Ie=i,IM(i),i=i.sibling;Ie=a,rp=l,mr=u}C_(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Ie=i):C_(e)}}function C_(e){for(;Ie!==null;){var t=Ie;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:mr||hx(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!mr)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Ws(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&c_(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}c_(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&sm(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ne(163))}mr||t.flags&512&&xb(t)}catch(m){pn(t,t.return,m)}}if(t===e){Ie=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ie=n;break}Ie=t.return}}function __(e){for(;Ie!==null;){var t=Ie;if(t===e){Ie=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ie=n;break}Ie=t.return}}function P_(e){for(;Ie!==null;){var t=Ie;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{hx(4,t)}catch(c){pn(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(c){pn(t,a,c)}}var i=t.return;try{xb(t)}catch(c){pn(t,i,c)}break;case 5:var o=t.return;try{xb(t)}catch(c){pn(t,o,c)}}}catch(c){pn(t,t.return,c)}if(t===e){Ie=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Ie=l;break}Ie=t.return}}var rq=Math.ceil,Pg=Ti.ReactCurrentDispatcher,U1=Ti.ReactCurrentOwner,ks=Ti.ReactCurrentBatchConfig,Nt=0,Yn=null,_n=null,sr=0,rs=0,Kc=$o(0),Fn=0,pm=null,Fl=0,mx=0,W1=0,Bh=null,zr=null,H1=0,Du=1/0,ei=null,Ag=!1,bb=null,wo=null,sp=!1,mo=null,kg=0,zh=0,wb=null,Jp=-1,Zp=0;function Tr(){return Nt&6?yn():Jp!==-1?Jp:Jp=yn()}function No(e){return e.mode&1?Nt&2&&sr!==0?sr&-sr:BV.transition!==null?(Zp===0&&(Zp=yD()),Zp):(e=Rt,e!==0||(e=window.event,e=e===void 0?16:_D(e.type)),e):1}function ra(e,t,n,r){if(50<zh)throw zh=0,wb=null,Error(Ne(185));pf(e,n,r),(!(Nt&2)||e!==Yn)&&(e===Yn&&(!(Nt&2)&&(mx|=n),Fn===4&&Ji(e,sr)),Gr(e,r),n===1&&Nt===0&&!(t.mode&1)&&(Du=yn()+500,cx&&Ro()))}function Gr(e,t){var n=e.callbackNode;Bz(e,t);var r=hg(e,e===Yn?sr:0);if(r===0)n!==null&&$C(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&$C(n),t===1)e.tag===0?FV(A_.bind(null,e)):WD(A_.bind(null,e)),IV(function(){!(Nt&6)&&Ro()}),n=null;else{switch(jD(r)){case 1:n=x1;break;case 4:n=vD;break;case 16:n=dg;break;case 536870912:n=xD;break;default:n=dg}n=qM(n,$M.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function $M(e,t){if(Jp=-1,Zp=0,Nt&6)throw Error(Ne(327));var n=e.callbackNode;if(su()&&e.callbackNode!==n)return null;var r=hg(e,e===Yn?sr:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Tg(e,r);else{t=r;var a=Nt;Nt|=2;var i=LM();(Yn!==e||sr!==t)&&(ei=null,Du=yn()+500,El(e,t));do try{iq();break}catch(l){RM(e,l)}while(!0);E1(),Pg.current=i,Nt=a,_n!==null?t=0:(Yn=null,sr=0,t=Fn)}if(t!==0){if(t===2&&(a=Yj(e),a!==0&&(r=a,t=Nb(e,a))),t===1)throw n=pm,El(e,0),Ji(e,r),Gr(e,yn()),n;if(t===6)Ji(e,r);else{if(a=e.current.alternate,!(r&30)&&!sq(a)&&(t=Tg(e,r),t===2&&(i=Yj(e),i!==0&&(r=i,t=Nb(e,i))),t===1))throw n=pm,El(e,0),Ji(e,r),Gr(e,yn()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(Ne(345));case 2:sl(e,zr,ei);break;case 3:if(Ji(e,r),(r&130023424)===r&&(t=H1+500-yn(),10<t)){if(hg(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){Tr(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=rb(sl.bind(null,e,zr,ei),t);break}sl(e,zr,ei);break;case 4:if(Ji(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-na(r);i=1<<o,o=t[o],o>a&&(a=o),r&=~i}if(r=a,r=yn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*rq(r/1960))-r,10<r){e.timeoutHandle=rb(sl.bind(null,e,zr,ei),r);break}sl(e,zr,ei);break;case 5:sl(e,zr,ei);break;default:throw Error(Ne(329))}}}return Gr(e,yn()),e.callbackNode===n?$M.bind(null,e):null}function Nb(e,t){var n=Bh;return e.current.memoizedState.isDehydrated&&(El(e,t).flags|=256),e=Tg(e,t),e!==2&&(t=zr,zr=n,t!==null&&Sb(t)),e}function Sb(e){zr===null?zr=e:zr.push.apply(zr,e)}function sq(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!ia(i(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ji(e,t){for(t&=~W1,t&=~mx,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-na(t),r=1<<n;e[n]=-1,t&=~r}}function A_(e){if(Nt&6)throw Error(Ne(327));su();var t=hg(e,0);if(!(t&1))return Gr(e,yn()),null;var n=Tg(e,t);if(e.tag!==0&&n===2){var r=Yj(e);r!==0&&(t=r,n=Nb(e,r))}if(n===1)throw n=pm,El(e,0),Ji(e,t),Gr(e,yn()),n;if(n===6)throw Error(Ne(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,sl(e,zr,ei),Gr(e,yn()),null}function K1(e,t){var n=Nt;Nt|=1;try{return e(t)}finally{Nt=n,Nt===0&&(Du=yn()+500,cx&&Ro())}}function Bl(e){mo!==null&&mo.tag===0&&!(Nt&6)&&su();var t=Nt;Nt|=1;var n=ks.transition,r=Rt;try{if(ks.transition=null,Rt=1,e)return e()}finally{Rt=r,ks.transition=n,Nt=t,!(Nt&6)&&Ro()}}function G1(){rs=Kc.current,tn(Kc)}function El(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,MV(n)),_n!==null)for(n=_n.return;n!==null;){var r=n;switch(A1(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&vg();break;case 3:Eu(),tn(Hr),tn(yr),R1();break;case 5:$1(r);break;case 4:Eu();break;case 13:tn(on);break;case 19:tn(on);break;case 10:O1(r.type._context);break;case 22:case 23:G1()}n=n.return}if(Yn=e,_n=e=So(e.current,null),sr=rs=t,Fn=0,pm=null,W1=mx=Fl=0,zr=Bh=null,ml!==null){for(t=0;t<ml.length;t++)if(n=ml[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=a,r.next=o}n.pending=r}ml=null}return e}function RM(e,t){do{var n=_n;try{if(E1(),Yp.current=_g,Cg){for(var r=ln.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Cg=!1}if(Ll=0,Wn=In=ln=null,Lh=!1,hm=0,U1.current=null,n===null||n.return===null){Fn=1,pm=t,_n=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=sr,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=p_(o);if(f!==null){f.flags&=-257,g_(f,o,l,i,t),f.mode&1&&f_(i,u,t),t=f,c=u;var v=t.updateQueue;if(v===null){var p=new Set;p.add(c),t.updateQueue=p}else v.add(c);break e}else{if(!(t&1)){f_(i,u,t),Y1();break e}c=Error(Ne(426))}}else if(rn&&l.mode&1){var g=p_(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),g_(g,o,l,i,t),k1(Ou(c,l));break e}}i=c=Ou(c,l),Fn!==4&&(Fn=2),Bh===null?Bh=[i]:Bh.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var x=jM(i,c,t);l_(i,x);break e;case 1:l=c;var y=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(wo===null||!wo.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var C=bM(i,l,t);l_(i,C);break e}}i=i.return}while(i!==null)}BM(n)}catch(w){t=w,_n===n&&n!==null&&(_n=n=n.return);continue}break}while(!0)}function LM(){var e=Pg.current;return Pg.current=_g,e===null?_g:e}function Y1(){(Fn===0||Fn===3||Fn===2)&&(Fn=4),Yn===null||!(Fl&268435455)&&!(mx&268435455)||Ji(Yn,sr)}function Tg(e,t){var n=Nt;Nt|=2;var r=LM();(Yn!==e||sr!==t)&&(ei=null,El(e,t));do try{aq();break}catch(a){RM(e,a)}while(!0);if(E1(),Nt=n,Pg.current=r,_n!==null)throw Error(Ne(261));return Yn=null,sr=0,Fn}function aq(){for(;_n!==null;)FM(_n)}function iq(){for(;_n!==null&&!Ez();)FM(_n)}function FM(e){var t=VM(e.alternate,e,rs);e.memoizedProps=e.pendingProps,t===null?BM(e):_n=t,U1.current=null}function BM(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=ZV(n,t),n!==null){n.flags&=32767,_n=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Fn=6,_n=null;return}}else if(n=JV(n,t,rs),n!==null){_n=n;return}if(t=t.sibling,t!==null){_n=t;return}_n=t=e}while(t!==null);Fn===0&&(Fn=5)}function sl(e,t,n){var r=Rt,a=ks.transition;try{ks.transition=null,Rt=1,oq(e,t,n,r)}finally{ks.transition=a,Rt=r}return null}function oq(e,t,n,r){do su();while(mo!==null);if(Nt&6)throw Error(Ne(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Ne(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(zz(e,i),e===Yn&&(_n=Yn=null,sr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||sp||(sp=!0,qM(dg,function(){return su(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ks.transition,ks.transition=null;var o=Rt;Rt=1;var l=Nt;Nt|=4,U1.current=null,tq(e,n),MM(n,e),PV(tb),mg=!!eb,tb=eb=null,e.current=n,nq(n),Oz(),Nt=l,Rt=o,ks.transition=i}else e.current=n;if(sp&&(sp=!1,mo=e,kg=a),i=e.pendingLanes,i===0&&(wo=null),Iz(n.stateNode),Gr(e,yn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Ag)throw Ag=!1,e=bb,bb=null,e;return kg&1&&e.tag!==0&&su(),i=e.pendingLanes,i&1?e===wb?zh++:(zh=0,wb=e):zh=0,Ro(),null}function su(){if(mo!==null){var e=jD(kg),t=ks.transition,n=Rt;try{if(ks.transition=null,Rt=16>e?16:e,mo===null)var r=!1;else{if(e=mo,mo=null,kg=0,Nt&6)throw Error(Ne(331));var a=Nt;for(Nt|=4,Ie=e.current;Ie!==null;){var i=Ie,o=i.child;if(Ie.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Ie=u;Ie!==null;){var d=Ie;switch(d.tag){case 0:case 11:case 15:Fh(8,d,i)}var h=d.child;if(h!==null)h.return=d,Ie=h;else for(;Ie!==null;){d=Ie;var m=d.sibling,f=d.return;if(EM(d),d===u){Ie=null;break}if(m!==null){m.return=f,Ie=m;break}Ie=f}}}var v=i.alternate;if(v!==null){var p=v.child;if(p!==null){v.child=null;do{var g=p.sibling;p.sibling=null,p=g}while(p!==null)}}Ie=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ie=o;else e:for(;Ie!==null;){if(i=Ie,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Fh(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,Ie=x;break e}Ie=i.return}}var y=e.current;for(Ie=y;Ie!==null;){o=Ie;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Ie=b;else e:for(o=y;Ie!==null;){if(l=Ie,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:hx(9,l)}}catch(w){pn(l,l.return,w)}if(l===o){Ie=null;break e}var C=l.sibling;if(C!==null){C.return=l.return,Ie=C;break e}Ie=l.return}}if(Nt=a,Ro(),Da&&typeof Da.onPostCommitFiberRoot=="function")try{Da.onPostCommitFiberRoot(sx,e)}catch{}r=!0}return r}finally{Rt=n,ks.transition=t}}return!1}function k_(e,t,n){t=Ou(n,t),t=jM(e,t,1),e=bo(e,t,1),t=Tr(),e!==null&&(pf(e,1,t),Gr(e,t))}function pn(e,t,n){if(e.tag===3)k_(e,e,n);else for(;t!==null;){if(t.tag===3){k_(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(wo===null||!wo.has(r))){e=Ou(n,e),e=bM(t,e,1),t=bo(t,e,1),e=Tr(),t!==null&&(pf(t,1,e),Gr(t,e));break}}t=t.return}}function lq(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Tr(),e.pingedLanes|=e.suspendedLanes&n,Yn===e&&(sr&n)===n&&(Fn===4||Fn===3&&(sr&130023424)===sr&&500>yn()-H1?El(e,0):W1|=n),Gr(e,t)}function zM(e,t){t===0&&(e.mode&1?(t=Gf,Gf<<=1,!(Gf&130023424)&&(Gf=4194304)):t=1);var n=Tr();e=ji(e,t),e!==null&&(pf(e,t,n),Gr(e,n))}function cq(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),zM(e,n)}function uq(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Ne(314))}r!==null&&r.delete(t),zM(e,n)}var VM;VM=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Hr.current)Ur=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ur=!1,XV(e,t,n);Ur=!!(e.flags&131072)}else Ur=!1,rn&&t.flags&1048576&&HD(t,jg,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Xp(e,t),e=t.pendingProps;var a=Au(t,yr.current);ru(t,n),a=F1(null,t,r,e,a,n);var i=B1();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Kr(r)?(i=!0,xg(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,M1(t),a.updater=dx,t.stateNode=a,a._reactInternals=t,ub(t,r,e,n),t=mb(null,t,r,!0,i,n)):(t.tag=0,rn&&i&&P1(t),Sr(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Xp(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=hq(r),e=Ws(r,e),a){case 0:t=hb(null,t,r,e,n);break e;case 1:t=y_(null,t,r,e,n);break e;case 11:t=v_(null,t,r,e,n);break e;case 14:t=x_(null,t,r,Ws(r.type,e),n);break e}throw Error(Ne(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ws(r,a),hb(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ws(r,a),y_(e,t,r,a,n);case 3:e:{if(CM(t),e===null)throw Error(Ne(387));r=t.pendingProps,i=t.memoizedState,a=i.element,JD(e,t),Ng(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Ou(Error(Ne(423)),t),t=j_(e,t,r,n,a);break e}else if(r!==a){a=Ou(Error(Ne(424)),t),t=j_(e,t,r,n,a);break e}else for(ls=jo(t.stateNode.containerInfo.firstChild),cs=t,rn=!0,Js=null,n=QD(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ku(),r===a){t=bi(e,t,n);break e}Sr(e,t,r,n)}t=t.child}return t;case 5:return ZD(t),e===null&&ob(t),r=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,nb(r,a)?o=null:i!==null&&nb(r,i)&&(t.flags|=32),SM(e,t),Sr(e,t,o,n),t.child;case 6:return e===null&&ob(t),null;case 13:return _M(e,t,n);case 4:return I1(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Tu(t,null,r,n):Sr(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ws(r,a),v_(e,t,r,a,n);case 7:return Sr(e,t,t.pendingProps,n),t.child;case 8:return Sr(e,t,t.pendingProps.children,n),t.child;case 12:return Sr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Gt(bg,r._currentValue),r._currentValue=o,i!==null)if(ia(i.value,o)){if(i.children===a.children&&!Hr.current){t=bi(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=mi(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),lb(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Ne(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),lb(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Sr(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,ru(t,n),a=Es(a),r=r(a),t.flags|=1,Sr(e,t,r,n),t.child;case 14:return r=t.type,a=Ws(r,t.pendingProps),a=Ws(r.type,a),x_(e,t,r,a,n);case 15:return wM(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ws(r,a),Xp(e,t),t.tag=1,Kr(r)?(e=!0,xg(t)):e=!1,ru(t,n),yM(t,r,a),ub(t,r,a,n),mb(null,t,r,!0,e,n);case 19:return PM(e,t,n);case 22:return NM(e,t,n)}throw Error(Ne(156,t.tag))};function qM(e,t){return gD(e,t)}function dq(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ps(e,t,n,r){return new dq(e,t,n,r)}function Q1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function hq(e){if(typeof e=="function")return Q1(e)?1:0;if(e!=null){if(e=e.$$typeof,e===p1)return 11;if(e===g1)return 14}return 2}function So(e,t){var n=e.alternate;return n===null?(n=Ps(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function eg(e,t,n,r,a,i){var o=2;if(r=e,typeof e=="function")Q1(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Rc:return Ol(n.children,a,i,t);case f1:o=8,a|=8;break;case Mj:return e=Ps(12,n,t,a|2),e.elementType=Mj,e.lanes=i,e;case Ij:return e=Ps(13,n,t,a),e.elementType=Ij,e.lanes=i,e;case $j:return e=Ps(19,n,t,a),e.elementType=$j,e.lanes=i,e;case ZO:return fx(n,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case XO:o=10;break e;case JO:o=9;break e;case p1:o=11;break e;case g1:o=14;break e;case Gi:o=16,r=null;break e}throw Error(Ne(130,e==null?e:typeof e,""))}return t=Ps(o,n,t,a),t.elementType=e,t.type=r,t.lanes=i,t}function Ol(e,t,n,r){return e=Ps(7,e,r,t),e.lanes=n,e}function fx(e,t,n,r){return e=Ps(22,e,r,t),e.elementType=ZO,e.lanes=n,e.stateNode={isHidden:!1},e}function k0(e,t,n){return e=Ps(6,e,null,t),e.lanes=n,e}function T0(e,t,n){return t=Ps(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function mq(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=u0(0),this.expirationTimes=u0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=u0(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function X1(e,t,n,r,a,i,o,l,c){return e=new mq(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ps(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},M1(i),e}function fq(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$c,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function UM(e){if(!e)return To;e=e._reactInternals;e:{if(sc(e)!==e||e.tag!==1)throw Error(Ne(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Kr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ne(171))}if(e.tag===1){var n=e.type;if(Kr(n))return UD(e,n,t)}return t}function WM(e,t,n,r,a,i,o,l,c){return e=X1(n,r,!0,e,a,i,o,l,c),e.context=UM(null),n=e.current,r=Tr(),a=No(n),i=mi(r,a),i.callback=t??null,bo(n,i,a),e.current.lanes=a,pf(e,a,r),Gr(e,r),e}function px(e,t,n,r){var a=t.current,i=Tr(),o=No(a);return n=UM(n),t.context===null?t.context=n:t.pendingContext=n,t=mi(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=bo(a,t,o),e!==null&&(ra(e,a,o,i),Gp(e,a,o)),o}function Eg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function T_(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function J1(e,t){T_(e,t),(e=e.alternate)&&T_(e,t)}function pq(){return null}var HM=typeof reportError=="function"?reportError:function(e){console.error(e)};function Z1(e){this._internalRoot=e}gx.prototype.render=Z1.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ne(409));px(e,t,null,null)};gx.prototype.unmount=Z1.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Bl(function(){px(null,e,null,null)}),t[yi]=null}};function gx(e){this._internalRoot=e}gx.prototype.unstable_scheduleHydration=function(e){if(e){var t=ND();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Xi.length&&t!==0&&t<Xi[n].priority;n++);Xi.splice(n,0,e),n===0&&CD(e)}};function eS(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function vx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function E_(){}function gq(e,t,n,r,a){if(a){if(typeof r=="function"){var i=r;r=function(){var u=Eg(o);i.call(u)}}var o=WM(t,r,e,0,null,!1,!1,"",E_);return e._reactRootContainer=o,e[yi]=o.current,om(e.nodeType===8?e.parentNode:e),Bl(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var l=r;r=function(){var u=Eg(c);l.call(u)}}var c=X1(e,0,!1,null,null,!1,!1,"",E_);return e._reactRootContainer=c,e[yi]=c.current,om(e.nodeType===8?e.parentNode:e),Bl(function(){px(t,c,n,r)}),c}function xx(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=Eg(o);l.call(c)}}px(t,o,e,a)}else o=gq(n,t,e,a,r);return Eg(o)}bD=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=_h(t.pendingLanes);n!==0&&(y1(t,n|1),Gr(t,yn()),!(Nt&6)&&(Du=yn()+500,Ro()))}break;case 13:Bl(function(){var r=ji(e,1);if(r!==null){var a=Tr();ra(r,e,1,a)}}),J1(e,1)}};j1=function(e){if(e.tag===13){var t=ji(e,134217728);if(t!==null){var n=Tr();ra(t,e,134217728,n)}J1(e,134217728)}};wD=function(e){if(e.tag===13){var t=No(e),n=ji(e,t);if(n!==null){var r=Tr();ra(n,e,t,r)}J1(e,t)}};ND=function(){return Rt};SD=function(e,t){var n=Rt;try{return Rt=e,t()}finally{Rt=n}};Hj=function(e,t,n){switch(t){case"input":if(Fj(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=lx(r);if(!a)throw Error(Ne(90));tD(r),Fj(r,a)}}}break;case"textarea":rD(e,n);break;case"select":t=n.value,t!=null&&Zc(e,!!n.multiple,t,!1)}};uD=K1;dD=Bl;var vq={usingClientEntryPoint:!1,Events:[vf,zc,lx,lD,cD,K1]},oh={findFiberByHostInstance:hl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xq={bundleType:oh.bundleType,version:oh.version,rendererPackageName:oh.rendererPackageName,rendererConfig:oh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ti.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=fD(e),e===null?null:e.stateNode},findFiberByHostInstance:oh.findFiberByHostInstance||pq,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ap=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ap.isDisabled&&ap.supportsFiber)try{sx=ap.inject(xq),Da=ap}catch{}}fs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vq;fs.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!eS(t))throw Error(Ne(200));return fq(e,t,null,n)};fs.createRoot=function(e,t){if(!eS(e))throw Error(Ne(299));var n=!1,r="",a=HM;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=X1(e,1,!1,null,null,n,!1,r,a),e[yi]=t.current,om(e.nodeType===8?e.parentNode:e),new Z1(t)};fs.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ne(188)):(e=Object.keys(e).join(","),Error(Ne(268,e)));return e=fD(t),e=e===null?null:e.stateNode,e};fs.flushSync=function(e){return Bl(e)};fs.hydrate=function(e,t,n){if(!vx(t))throw Error(Ne(200));return xx(null,e,t,!0,n)};fs.hydrateRoot=function(e,t,n){if(!eS(e))throw Error(Ne(405));var r=n!=null&&n.hydratedSources||null,a=!1,i="",o=HM;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=WM(t,null,e,1,n??null,a,!1,i,o),e[yi]=t.current,om(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new gx(t)};fs.render=function(e,t,n){if(!vx(t))throw Error(Ne(200));return xx(null,e,t,!1,n)};fs.unmountComponentAtNode=function(e){if(!vx(e))throw Error(Ne(40));return e._reactRootContainer?(Bl(function(){xx(null,null,e,!1,function(){e._reactRootContainer=null,e[yi]=null})}),!0):!1};fs.unstable_batchedUpdates=K1;fs.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!vx(n))throw Error(Ne(200));if(e==null||e._reactInternals===void 0)throw Error(Ne(38));return xx(e,t,n,!1,r)};fs.version="18.3.1-next-f1338f8080-20240426";function KM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(KM)}catch(e){console.error(e)}}KM(),KO.exports=fs;var ac=KO.exports;const GM=Ot(ac);var YM,O_=ac;YM=O_.createRoot,O_.hydrateRoot;const yq=1,jq=1e6;let E0=0;function bq(){return E0=(E0+1)%Number.MAX_SAFE_INTEGER,E0.toString()}const O0=new Map,D_=e=>{if(O0.has(e))return;const t=setTimeout(()=>{O0.delete(e),Vh({type:"REMOVE_TOAST",toastId:e})},jq);O0.set(e,t)},wq=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,yq)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?D_(n):e.toasts.forEach(r=>{D_(r.id)}),{...e,toasts:e.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},tg=[];let ng={toasts:[]};function Vh(e){ng=wq(ng,e),tg.forEach(t=>{t(ng)})}function Nq({...e}){const t=bq(),n=a=>Vh({type:"UPDATE_TOAST",toast:{...a,id:t}}),r=()=>Vh({type:"DISMISS_TOAST",toastId:t});return Vh({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||r()}}}),{id:t,dismiss:r,update:n}}function it(){const[e,t]=j.useState(ng);return j.useEffect(()=>(tg.push(t),()=>{const n=tg.indexOf(t);n>-1&&tg.splice(n,1)}),[e]),{...e,toast:Nq,dismiss:n=>Vh({type:"DISMISS_TOAST",toastId:n})}}function ke(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function M_(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function yx(...e){return t=>{let n=!1;const r=e.map(a=>{const i=M_(a,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let a=0;a<r.length;a++){const i=r[a];typeof i=="function"?i():M_(e[a],null)}}}}function xt(...e){return j.useCallback(yx(...e),e)}function Sq(e,t){const n=j.createContext(t),r=i=>{const{children:o,...l}=i,c=j.useMemo(()=>l,Object.values(l));return s.jsx(n.Provider,{value:c,children:o})};r.displayName=e+"Provider";function a(i){const o=j.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,a]}function Yr(e,t=[]){let n=[];function r(i,o){const l=j.createContext(o),c=n.length;n=[...n,o];const u=h=>{var x;const{scope:m,children:f,...v}=h,p=((x=m==null?void 0:m[e])==null?void 0:x[c])||l,g=j.useMemo(()=>v,Object.values(v));return s.jsx(p.Provider,{value:g,children:f})};u.displayName=i+"Provider";function d(h,m){var p;const f=((p=m==null?void 0:m[e])==null?void 0:p[c])||l,v=j.useContext(f);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const a=()=>{const i=n.map(o=>j.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return j.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[r,Cq(a,...t)]}function Cq(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const h=c(i)[`__scope${u}`];return{...l,...h}},{});return j.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function zl(e){const t=Pq(e),n=j.forwardRef((r,a)=>{const{children:i,...o}=r,l=j.Children.toArray(i),c=l.find(Aq);if(c){const u=c.props.children,d=l.map(h=>h===c?j.Children.count(u)>1?j.Children.only(null):j.isValidElement(u)?u.props.children:null:h);return s.jsx(t,{...o,ref:a,children:j.isValidElement(u)?j.cloneElement(u,void 0,d):null})}return s.jsx(t,{...o,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}var _q=zl("Slot");function Pq(e){const t=j.forwardRef((n,r)=>{const{children:a,...i}=n;if(j.isValidElement(a)){const o=Tq(a),l=kq(i,a.props);return a.type!==j.Fragment&&(l.ref=r?yx(r,o):o),j.cloneElement(a,l)}return j.Children.count(a)>1?j.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var QM=Symbol("radix.slottable");function XM(e){const t=({children:n})=>s.jsx(s.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=QM,t}function Aq(e){return j.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===QM}function kq(e,t){const n={...t};for(const r in t){const a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(n[r]=a):r==="style"?n[r]={...a,...i}:r==="className"&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function Tq(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function jx(e){const t=e+"CollectionProvider",[n,r]=Yr(t),[a,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=p=>{const{scope:g,children:x}=p,y=L.useRef(null),b=L.useRef(new Map).current;return s.jsx(a,{scope:g,itemMap:b,collectionRef:y,children:x})};o.displayName=t;const l=e+"CollectionSlot",c=zl(l),u=L.forwardRef((p,g)=>{const{scope:x,children:y}=p,b=i(l,x),C=xt(g,b.collectionRef);return s.jsx(c,{ref:C,children:y})});u.displayName=l;const d=e+"CollectionItemSlot",h="data-radix-collection-item",m=zl(d),f=L.forwardRef((p,g)=>{const{scope:x,children:y,...b}=p,C=L.useRef(null),w=xt(g,C),N=i(d,x);return L.useEffect(()=>(N.itemMap.set(C,{ref:C,...b}),()=>void N.itemMap.delete(C))),s.jsx(m,{[h]:"",ref:w,children:y})});f.displayName=d;function v(p){const g=i(e+"CollectionConsumer",p);return L.useCallback(()=>{const y=g.collectionRef.current;if(!y)return[];const b=Array.from(y.querySelectorAll(`[${h}]`));return Array.from(g.itemMap.values()).sort((N,S)=>b.indexOf(N.ref.current)-b.indexOf(S.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:o,Slot:u,ItemSlot:f},v,r]}var Eq=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ve=Eq.reduce((e,t)=>{const n=zl(`Primitive.${t}`),r=j.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function tS(e,t){e&&ac.flushSync(()=>e.dispatchEvent(t))}function Er(e){const t=j.useRef(e);return j.useEffect(()=>{t.current=e}),j.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function Oq(e,t=globalThis==null?void 0:globalThis.document){const n=Er(e);j.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var Dq="DismissableLayer",Cb="dismissableLayer.update",Mq="dismissableLayer.pointerDownOutside",Iq="dismissableLayer.focusOutside",I_,JM=j.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),jd=j.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,u=j.useContext(JM),[d,h]=j.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=j.useState({}),v=xt(t,S=>h(S)),p=Array.from(u.layers),[g]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=p.indexOf(g),y=d?p.indexOf(d):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,C=y>=x,w=Rq(S=>{const _=S.target,P=[...u.branches].some(A=>A.contains(_));!C||P||(a==null||a(S),o==null||o(S),S.defaultPrevented||l==null||l())},m),N=Lq(S=>{const _=S.target;[...u.branches].some(A=>A.contains(_))||(i==null||i(S),o==null||o(S),S.defaultPrevented||l==null||l())},m);return Oq(S=>{y===u.layers.size-1&&(r==null||r(S),!S.defaultPrevented&&l&&(S.preventDefault(),l()))},m),j.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(I_=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),$_(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=I_)}},[d,m,n,u]),j.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),$_())},[d,u]),j.useEffect(()=>{const S=()=>f({});return document.addEventListener(Cb,S),()=>document.removeEventListener(Cb,S)},[]),s.jsx(Ve.div,{...c,ref:v,style:{pointerEvents:b?C?"auto":"none":void 0,...e.style},onFocusCapture:ke(e.onFocusCapture,N.onFocusCapture),onBlurCapture:ke(e.onBlurCapture,N.onBlurCapture),onPointerDownCapture:ke(e.onPointerDownCapture,w.onPointerDownCapture)})});jd.displayName=Dq;var $q="DismissableLayerBranch",ZM=j.forwardRef((e,t)=>{const n=j.useContext(JM),r=j.useRef(null),a=xt(t,r);return j.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),s.jsx(Ve.div,{...e,ref:a})});ZM.displayName=$q;function Rq(e,t=globalThis==null?void 0:globalThis.document){const n=Er(e),r=j.useRef(!1),a=j.useRef(()=>{});return j.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){eI(Mq,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function Lq(e,t=globalThis==null?void 0:globalThis.document){const n=Er(e),r=j.useRef(!1);return j.useEffect(()=>{const a=i=>{i.target&&!r.current&&eI(Iq,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function $_(){const e=new CustomEvent(Cb);document.dispatchEvent(e)}function eI(e,t,n,{discrete:r}){const a=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?tS(a,i):a.dispatchEvent(i)}var Fq=jd,Bq=ZM,Tn=globalThis!=null&&globalThis.document?j.useLayoutEffect:()=>{},zq="Portal",yf=j.forwardRef((e,t)=>{var l;const{container:n,...r}=e,[a,i]=j.useState(!1);Tn(()=>i(!0),[]);const o=n||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?GM.createPortal(s.jsx(Ve.div,{...r,ref:t}),o):null});yf.displayName=zq;function Vq(e,t){return j.useReducer((n,r)=>t[n][r]??n,e)}var Is=e=>{const{present:t,children:n}=e,r=qq(t),a=typeof n=="function"?n({present:r.isPresent}):j.Children.only(n),i=xt(r.ref,Uq(a));return typeof n=="function"||r.isPresent?j.cloneElement(a,{ref:i}):null};Is.displayName="Presence";function qq(e){const[t,n]=j.useState(),r=j.useRef(null),a=j.useRef(e),i=j.useRef("none"),o=e?"mounted":"unmounted",[l,c]=Vq(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return j.useEffect(()=>{const u=ip(r.current);i.current=l==="mounted"?u:"none"},[l]),Tn(()=>{const u=r.current,d=a.current;if(d!==e){const m=i.current,f=ip(u);e?c("MOUNT"):f==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&m!==f?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),Tn(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,h=f=>{const p=ip(r.current).includes(f.animationName);if(f.target===t&&p&&(c("ANIMATION_END"),!a.current)){const g=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=g)})}},m=f=>{f.target===t&&(i.current=ip(r.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:j.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function ip(e){return(e==null?void 0:e.animationName)||"none"}function Uq(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Wq=u1[" useInsertionEffect ".trim().toString()]||Tn;function wi({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[a,i,o]=Hq({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:a;{const d=j.useRef(e!==void 0);j.useEffect(()=>{const h=d.current;h!==l&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,r])}const u=j.useCallback(d=>{var h;if(l){const m=Kq(d)?d(e):d;m!==e&&((h=o.current)==null||h.call(o,m))}else i(d)},[l,e,i,o]);return[c,u]}function Hq({defaultProp:e,onChange:t}){const[n,r]=j.useState(e),a=j.useRef(n),i=j.useRef(t);return Wq(()=>{i.current=t},[t]),j.useEffect(()=>{var o;a.current!==n&&((o=i.current)==null||o.call(i,n),a.current=n)},[n,a]),[n,r,i]}function Kq(e){return typeof e=="function"}var tI=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Gq="VisuallyHidden",bx=j.forwardRef((e,t)=>s.jsx(Ve.span,{...e,ref:t,style:{...tI,...e.style}}));bx.displayName=Gq;var Yq=bx,nS="ToastProvider",[rS,Qq,Xq]=jx("Toast"),[nI,hTe]=Yr("Toast",[Xq]),[Jq,wx]=nI(nS),rI=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=e,[l,c]=j.useState(null),[u,d]=j.useState(0),h=j.useRef(!1),m=j.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${nS}\`. Expected non-empty \`string\`.`),s.jsx(rS.Provider,{scope:t,children:s.jsx(Jq,{scope:t,label:n,duration:r,swipeDirection:a,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:j.useCallback(()=>d(f=>f+1),[]),onToastRemove:j.useCallback(()=>d(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:m,children:o})})};rI.displayName=nS;var sI="ToastViewport",Zq=["F8"],_b="toast.viewportPause",Pb="toast.viewportResume",aI=j.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=Zq,label:a="Notifications ({hotkey})",...i}=e,o=wx(sI,n),l=Qq(n),c=j.useRef(null),u=j.useRef(null),d=j.useRef(null),h=j.useRef(null),m=xt(t,h,o.onViewportChange),f=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=o.toastCount>0;j.useEffect(()=>{const g=x=>{var b;r.length!==0&&r.every(C=>x[C]||x.code===C)&&((b=h.current)==null||b.focus())};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[r]),j.useEffect(()=>{const g=c.current,x=h.current;if(v&&g&&x){const y=()=>{if(!o.isClosePausedRef.current){const N=new CustomEvent(_b);x.dispatchEvent(N),o.isClosePausedRef.current=!0}},b=()=>{if(o.isClosePausedRef.current){const N=new CustomEvent(Pb);x.dispatchEvent(N),o.isClosePausedRef.current=!1}},C=N=>{!g.contains(N.relatedTarget)&&b()},w=()=>{g.contains(document.activeElement)||b()};return g.addEventListener("focusin",y),g.addEventListener("focusout",C),g.addEventListener("pointermove",y),g.addEventListener("pointerleave",w),window.addEventListener("blur",y),window.addEventListener("focus",b),()=>{g.removeEventListener("focusin",y),g.removeEventListener("focusout",C),g.removeEventListener("pointermove",y),g.removeEventListener("pointerleave",w),window.removeEventListener("blur",y),window.removeEventListener("focus",b)}}},[v,o.isClosePausedRef]);const p=j.useCallback(({tabbingDirection:g})=>{const y=l().map(b=>{const C=b.ref.current,w=[C,...hU(C)];return g==="forwards"?w:w.reverse()});return(g==="forwards"?y.reverse():y).flat()},[l]);return j.useEffect(()=>{const g=h.current;if(g){const x=y=>{var w,N,S;const b=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!b){const _=document.activeElement,P=y.shiftKey;if(y.target===g&&P){(w=u.current)==null||w.focus();return}const k=p({tabbingDirection:P?"backwards":"forwards"}),I=k.findIndex(D=>D===_);D0(k.slice(I+1))?y.preventDefault():P?(N=u.current)==null||N.focus():(S=d.current)==null||S.focus()}};return g.addEventListener("keydown",x),()=>g.removeEventListener("keydown",x)}},[l,p]),s.jsxs(Bq,{ref:c,role:"region","aria-label":a.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&s.jsx(Ab,{ref:u,onFocusFromOutsideViewport:()=>{const g=p({tabbingDirection:"forwards"});D0(g)}}),s.jsx(rS.Slot,{scope:n,children:s.jsx(Ve.ol,{tabIndex:-1,...i,ref:m})}),v&&s.jsx(Ab,{ref:d,onFocusFromOutsideViewport:()=>{const g=p({tabbingDirection:"backwards"});D0(g)}})]})});aI.displayName=sI;var iI="ToastFocusProxy",Ab=j.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...a}=e,i=wx(iI,n);return s.jsx(bx,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&r()}})});Ab.displayName=iI;var jf="Toast",eU="toast.swipeStart",tU="toast.swipeMove",nU="toast.swipeCancel",rU="toast.swipeEnd",oI=j.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:a,onOpenChange:i,...o}=e,[l,c]=wi({prop:r,defaultProp:a??!0,onChange:i,caller:jf});return s.jsx(Is,{present:n||l,children:s.jsx(iU,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:Er(e.onPause),onResume:Er(e.onResume),onSwipeStart:ke(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ke(e.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:ke(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ke(e.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});oI.displayName=jf;var[sU,aU]=nI(jf,{onClose(){}}),iU=j.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:m,onSwipeEnd:f,...v}=e,p=wx(jf,n),[g,x]=j.useState(null),y=xt(t,D=>x(D)),b=j.useRef(null),C=j.useRef(null),w=a||p.duration,N=j.useRef(0),S=j.useRef(w),_=j.useRef(0),{onToastAdd:P,onToastRemove:A}=p,E=Er(()=>{var U;(g==null?void 0:g.contains(document.activeElement))&&((U=p.viewport)==null||U.focus()),o()}),k=j.useCallback(D=>{!D||D===1/0||(window.clearTimeout(_.current),N.current=new Date().getTime(),_.current=window.setTimeout(E,D))},[E]);j.useEffect(()=>{const D=p.viewport;if(D){const U=()=>{k(S.current),u==null||u()},B=()=>{const K=new Date().getTime()-N.current;S.current=S.current-K,window.clearTimeout(_.current),c==null||c()};return D.addEventListener(_b,B),D.addEventListener(Pb,U),()=>{D.removeEventListener(_b,B),D.removeEventListener(Pb,U)}}},[p.viewport,w,c,u,k]),j.useEffect(()=>{i&&!p.isClosePausedRef.current&&k(w)},[i,w,p.isClosePausedRef,k]),j.useEffect(()=>(P(),()=>A()),[P,A]);const I=j.useMemo(()=>g?fI(g):null,[g]);return p.viewport?s.jsxs(s.Fragment,{children:[I&&s.jsx(oU,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:I}),s.jsx(sU,{scope:n,onClose:E,children:ac.createPortal(s.jsx(rS.ItemSlot,{scope:n,children:s.jsx(Fq,{asChild:!0,onEscapeKeyDown:ke(l,()=>{p.isFocusedToastEscapeKeyDownRef.current||E(),p.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(Ve.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":p.swipeDirection,...v,ref:y,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:ke(e.onKeyDown,D=>{D.key==="Escape"&&(l==null||l(D.nativeEvent),D.nativeEvent.defaultPrevented||(p.isFocusedToastEscapeKeyDownRef.current=!0,E()))}),onPointerDown:ke(e.onPointerDown,D=>{D.button===0&&(b.current={x:D.clientX,y:D.clientY})}),onPointerMove:ke(e.onPointerMove,D=>{if(!b.current)return;const U=D.clientX-b.current.x,B=D.clientY-b.current.y,K=!!C.current,T=["left","right"].includes(p.swipeDirection),$=["left","up"].includes(p.swipeDirection)?Math.min:Math.max,G=T?$(0,U):0,Q=T?0:$(0,B),ne=D.pointerType==="touch"?10:2,oe={x:G,y:Q},M={originalEvent:D,delta:oe};K?(C.current=oe,op(tU,h,M,{discrete:!1})):R_(oe,p.swipeDirection,ne)?(C.current=oe,op(eU,d,M,{discrete:!1}),D.target.setPointerCapture(D.pointerId)):(Math.abs(U)>ne||Math.abs(B)>ne)&&(b.current=null)}),onPointerUp:ke(e.onPointerUp,D=>{const U=C.current,B=D.target;if(B.hasPointerCapture(D.pointerId)&&B.releasePointerCapture(D.pointerId),C.current=null,b.current=null,U){const K=D.currentTarget,T={originalEvent:D,delta:U};R_(U,p.swipeDirection,p.swipeThreshold)?op(rU,f,T,{discrete:!0}):op(nU,m,T,{discrete:!0}),K.addEventListener("click",$=>$.preventDefault(),{once:!0})}})})})}),p.viewport)})]}):null}),oU=e=>{const{__scopeToast:t,children:n,...r}=e,a=wx(jf,t),[i,o]=j.useState(!1),[l,c]=j.useState(!1);return uU(()=>o(!0)),j.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:s.jsx(yf,{asChild:!0,children:s.jsx(bx,{...r,children:i&&s.jsxs(s.Fragment,{children:[a.label," ",n]})})})},lU="ToastTitle",lI=j.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return s.jsx(Ve.div,{...r,ref:t})});lI.displayName=lU;var cU="ToastDescription",cI=j.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return s.jsx(Ve.div,{...r,ref:t})});cI.displayName=cU;var uI="ToastAction",dI=j.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?s.jsx(mI,{altText:n,asChild:!0,children:s.jsx(sS,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${uI}\`. Expected non-empty \`string\`.`),null)});dI.displayName=uI;var hI="ToastClose",sS=j.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,a=aU(hI,n);return s.jsx(mI,{asChild:!0,children:s.jsx(Ve.button,{type:"button",...r,ref:t,onClick:ke(e.onClick,a.onClose)})})});sS.displayName=hI;var mI=j.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...a}=e;return s.jsx(Ve.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...a,ref:t})});function fI(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),dU(r)){const a=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...fI(r))}}),t}function op(e,t,n,{discrete:r}){const a=n.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?tS(a,i):a.dispatchEvent(i)}var R_=(e,t,n=0)=>{const r=Math.abs(e.x),a=Math.abs(e.y),i=r>a;return t==="left"||t==="right"?i&&r>n:!i&&a>n};function uU(e=()=>{}){const t=Er(e);Tn(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function dU(e){return e.nodeType===e.ELEMENT_NODE}function hU(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function D0(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var mU=rI,pI=aI,gI=oI,vI=lI,xI=cI,yI=dI,jI=sS;function bI(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=bI(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function at(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=bI(e))&&(r&&(r+=" "),r+=t);return r}const L_=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,F_=at,bf=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return F_(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(u=>{const d=n==null?void 0:n[u],h=i==null?void 0:i[u];if(d===null)return null;const m=L_(d)||L_(h);return a[u][m]}),l=n&&Object.entries(n).reduce((u,d)=>{let[h,m]=d;return m===void 0||(u[h]=m),u},{}),c=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:m,...f}=d;return Object.entries(f).every(v=>{let[p,g]=v;return Array.isArray(g)?g.includes({...i,...l}[p]):{...i,...l}[p]===g})?[...u,h,m]:u},[]);return F_(e,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fU=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),wI=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var pU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gU=j.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:o,...l},c)=>j.createElement("svg",{ref:c,...pU,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:wI("lucide",a),...l},[...o.map(([u,d])=>j.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=(e,t)=>{const n=j.forwardRef(({className:r,...a},i)=>j.createElement(gU,{ref:i,iconNode:t,className:wI(`lucide-${fU(e)}`,r),...a}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=Te("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B_=Te("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vU=Te("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kb=Te("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Og=Te("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xU=Te("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yU=Te("Bird",[["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M3.4 18H12a8 8 0 0 0 8-8V7a4 4 0 0 0-7.28-2.3L2 20",key:"oj1oa8"}],["path",{d:"m20 7 2 .5-2 .5",key:"12nv4d"}],["path",{d:"M10 18v3",key:"1yea0a"}],["path",{d:"M14 17.75V21",key:"1pymcb"}],["path",{d:"M7 18a6 6 0 0 0 3.84-10.61",key:"1npnn0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pl=Te("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jU=Te("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NI=Te("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=Te("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mu=Te("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bU=Te("Cat",[["path",{d:"M12 5c.67 0 1.35.09 2 .26 1.78-2 5.03-2.84 6.42-2.26 1.4.58-.42 7-.42 7 .57 1.07 1 2.24 1 3.44C21 17.9 16.97 21 12 21s-9-3-9-7.56c0-1.25.5-2.4 1-3.44 0 0-1.89-6.42-.5-7 1.39-.58 4.72.23 6.5 2.23A9.04 9.04 0 0 1 12 5Z",key:"x6xyqk"}],["path",{d:"M8 14v.5",key:"1nzgdb"}],["path",{d:"M16 14v.5",key:"1lajdz"}],["path",{d:"M11.25 16.25h1.5L12 17l-.75-.75Z",key:"12kq1m"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SI=Te("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=Te("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CI=Te("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wU=Te("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NU=Te("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=Te("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=Te("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gm=Te("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SU=Te("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=Te("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CU=Te("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _U=Te("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PU=Te("Dog",[["path",{d:"M11.25 16.25h1.5L12 17z",key:"w7jh35"}],["path",{d:"M16 14v.5",key:"1lajdz"}],["path",{d:"M4.42 11.247A13.152 13.152 0 0 0 4 14.556C4 18.728 7.582 21 12 21s8-2.272 8-6.444a11.702 11.702 0 0 0-.493-3.309",key:"u7s9ue"}],["path",{d:"M8 14v.5",key:"1nzgdb"}],["path",{d:"M8.5 8.5c-.384 1.05-1.083 2.028-2.344 2.5-1.931.722-3.576-.297-3.656-1-.113-.994 1.177-6.53 4-7 1.923-.321 3.651.845 3.651 2.235A7.497 7.497 0 0 1 14 5.277c0-1.39 1.844-2.598 3.767-2.277 2.823.47 4.113 6.006 4 7-.08.703-1.725 1.722-3.656 1-1.261-.472-1.855-1.45-2.239-2.5",key:"v8hric"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bd=Te("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=Te("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tb=Te("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=Te("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z_=Te("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=Te("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _I=Te("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AU=Te("Fish",[["path",{d:"M6.5 12c.94-3.46 4.94-6 8.5-6 3.56 0 6.06 2.54 7 6-.94 3.47-3.44 6-7 6s-7.56-2.53-8.5-6Z",key:"15baut"}],["path",{d:"M18 12v.5",key:"18hhni"}],["path",{d:"M16 17.93a9.77 9.77 0 0 1 0-11.86",key:"16dt7o"}],["path",{d:"M7 10.67C7 8 5.58 5.97 2.73 5.5c-1 1.5-1 5 .23 6.5-1.24 1.5-1.24 5-.23 6.5C5.58 18.03 7 16 7 13.33",key:"l9di03"}],["path",{d:"M10.46 7.26C10.2 5.88 9.17 4.24 8 3h5.8a2 2 0 0 1 1.98 1.67l.23 1.4",key:"1kjonw"}],["path",{d:"m16.01 17.93-.23 1.4A2 2 0 0 1 13.8 21H9.5a5.96 5.96 0 0 0 1.49-3.98",key:"1zlm23"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=Te("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=Te("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kU=Te("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=Te("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=Te("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=Te("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PI=Te("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wd=Te("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ic=Te("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V_=Te("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TU=Te("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q_=Te("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EU=Te("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=Te("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dg=Te("PawPrint",[["circle",{cx:"11",cy:"4",r:"2",key:"vol9p0"}],["circle",{cx:"18",cy:"8",r:"2",key:"17gozi"}],["circle",{cx:"20",cy:"16",r:"2",key:"1v9bxh"}],["path",{d:"M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z",key:"1ydw1z"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=Te("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zi=Te("Pill",[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=Te("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $u=Te("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AI=Te("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const au=Te("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=Te("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OU=Te("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kI=Te("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=Te("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DU=Te("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MU=Te("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=Te("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=Te("Stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IU=Te("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=Te("Syringe",[["path",{d:"m18 2 4 4",key:"22kx64"}],["path",{d:"m17 7 3-3",key:"1w1zoj"}],["path",{d:"M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5",key:"1exhtz"}],["path",{d:"m9 11 4 4",key:"rovt3i"}],["path",{d:"m5 19-3 3",key:"59f2uf"}],["path",{d:"m14 4 6 6",key:"yqp9t2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $U=Te("Tablet",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["line",{x1:"12",x2:"12.01",y1:"18",y2:"18",key:"1dp563"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vm=Te("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eb=Te("Tractor",[["path",{d:"m10 11 11 .9a1 1 0 0 1 .8 1.1l-.665 4.158a1 1 0 0 1-.988.842H20",key:"she1j9"}],["path",{d:"M16 18h-5",key:"bq60fd"}],["path",{d:"M18 5a1 1 0 0 0-1 1v5.573",key:"1kv8ia"}],["path",{d:"M3 4h8.129a1 1 0 0 1 .99.863L13 11.246",key:"1q1ert"}],["path",{d:"M4 11V4",key:"9ft8pt"}],["path",{d:"M7 15h.01",key:"k5ht0j"}],["path",{d:"M8 10.1V4",key:"1jgyzo"}],["circle",{cx:"18",cy:"18",r:"2",key:"1emm8v"}],["circle",{cx:"7",cy:"15",r:"5",key:"ddtuc"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=Te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=Te("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=Te("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=Te("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ob=Te("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RU=Te("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=Te("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LU=Te("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=Te("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mg=Te("Weight",[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wf=Te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),iS="-",FU=e=>{const t=zU(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const l=o.split(iS);return l[0]===""&&l.length!==1&&l.shift(),TI(l,t)||BU(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},TI=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),a=r?TI(e.slice(1),r):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(iS);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},U_=/^\[(.+)\]$/,BU=e=>{if(U_.test(e)){const t=U_.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},zU=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return qU(Object.entries(e.classGroups),n).forEach(([i,o])=>{Db(o,r,i,t)}),r},Db=(e,t,n,r)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:W_(t,a);i.classGroupId=n;return}if(typeof a=="function"){if(VU(a)){Db(a(r),t,n,r);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([i,o])=>{Db(o,W_(t,i),n,r)})})},W_=(e,t)=>{let n=e;return t.split(iS).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},VU=e=>e.isThemeGetter,qU=(e,t)=>t?e.map(([n,r])=>{const a=r.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[n,a]}):e,UU=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(i,o)=>{n.set(i,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return a(i,o),o},set(i,o){n.has(i)?n.set(i,o):a(i,o)}}},EI="!",WU=e=>{const{separator:t,experimentalParseClassName:n}=e,r=t.length===1,a=t[0],i=t.length,o=l=>{const c=[];let u=0,d=0,h;for(let g=0;g<l.length;g++){let x=l[g];if(u===0){if(x===a&&(r||l.slice(g,g+i)===t)){c.push(l.slice(d,g)),d=g+i;continue}if(x==="/"){h=g;continue}}x==="["?u++:x==="]"&&u--}const m=c.length===0?l:l.substring(d),f=m.startsWith(EI),v=f?m.substring(1):m,p=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:f,baseClassName:v,maybePostfixModifierPosition:p}};return n?l=>n({className:l,parseClassName:o}):o},HU=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(r=>{r[0]==="["?(t.push(...n.sort(),r),n=[]):n.push(r)}),t.push(...n.sort()),t},KU=e=>({cache:UU(e.cacheSize),parseClassName:WU(e),...FU(e)}),GU=/\s+/,YU=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(GU);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:f}=n(u);let v=!!f,p=r(v?m.substring(0,f):m);if(!p){if(!v){l=u+(l.length>0?" "+l:l);continue}if(p=r(m),!p){l=u+(l.length>0?" "+l:l);continue}v=!1}const g=HU(d).join(":"),x=h?g+EI:g,y=x+p;if(i.includes(y))continue;i.push(y);const b=a(p,v);for(let C=0;C<b.length;++C){const w=b[C];i.push(x+w)}l=u+(l.length>0?" "+l:l)}return l};function QU(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=OI(t))&&(r&&(r+=" "),r+=n);return r}const OI=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=OI(e[r]))&&(n&&(n+=" "),n+=t);return n};function XU(e,...t){let n,r,a,i=o;function o(c){const u=t.reduce((d,h)=>h(d),e());return n=KU(u),r=n.cache.get,a=n.cache.set,i=l,l(c)}function l(c){const u=r(c);if(u)return u;const d=YU(c,n);return a(c,d),d}return function(){return i(QU.apply(null,arguments))}}const Xt=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},DI=/^\[(?:([a-z-]+):)?(.+)\]$/i,JU=/^\d+\/\d+$/,ZU=new Set(["px","full","screen"]),e7=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,t7=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,n7=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,r7=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,s7=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Qa=e=>iu(e)||ZU.has(e)||JU.test(e),Bi=e=>Nd(e,"length",h7),iu=e=>!!e&&!Number.isNaN(Number(e)),I0=e=>Nd(e,"number",iu),lh=e=>!!e&&Number.isInteger(Number(e)),a7=e=>e.endsWith("%")&&iu(e.slice(0,-1)),ct=e=>DI.test(e),zi=e=>e7.test(e),i7=new Set(["length","size","percentage"]),o7=e=>Nd(e,i7,MI),l7=e=>Nd(e,"position",MI),c7=new Set(["image","url"]),u7=e=>Nd(e,c7,f7),d7=e=>Nd(e,"",m7),ch=()=>!0,Nd=(e,t,n)=>{const r=DI.exec(e);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):n(r[2]):!1},h7=e=>t7.test(e)&&!n7.test(e),MI=()=>!1,m7=e=>r7.test(e),f7=e=>s7.test(e),p7=()=>{const e=Xt("colors"),t=Xt("spacing"),n=Xt("blur"),r=Xt("brightness"),a=Xt("borderColor"),i=Xt("borderRadius"),o=Xt("borderSpacing"),l=Xt("borderWidth"),c=Xt("contrast"),u=Xt("grayscale"),d=Xt("hueRotate"),h=Xt("invert"),m=Xt("gap"),f=Xt("gradientColorStops"),v=Xt("gradientColorStopPositions"),p=Xt("inset"),g=Xt("margin"),x=Xt("opacity"),y=Xt("padding"),b=Xt("saturate"),C=Xt("scale"),w=Xt("sepia"),N=Xt("skew"),S=Xt("space"),_=Xt("translate"),P=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],E=()=>["auto",ct,t],k=()=>[ct,t],I=()=>["",Qa,Bi],D=()=>["auto",iu,ct],U=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],B=()=>["solid","dashed","dotted","double","none"],K=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],T=()=>["start","end","center","between","around","evenly","stretch"],$=()=>["","0",ct],G=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Q=()=>[iu,ct];return{cacheSize:500,separator:":",theme:{colors:[ch],spacing:[Qa,Bi],blur:["none","",zi,ct],brightness:Q(),borderColor:[e],borderRadius:["none","","full",zi,ct],borderSpacing:k(),borderWidth:I(),contrast:Q(),grayscale:$(),hueRotate:Q(),invert:$(),gap:k(),gradientColorStops:[e],gradientColorStopPositions:[a7,Bi],inset:E(),margin:E(),opacity:Q(),padding:k(),saturate:Q(),scale:Q(),sepia:$(),skew:Q(),space:k(),translate:k()},classGroups:{aspect:[{aspect:["auto","square","video",ct]}],container:["container"],columns:[{columns:[zi]}],"break-after":[{"break-after":G()}],"break-before":[{"break-before":G()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...U(),ct]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",lh,ct]}],basis:[{basis:E()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ct]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",lh,ct]}],"grid-cols":[{"grid-cols":[ch]}],"col-start-end":[{col:["auto",{span:["full",lh,ct]},ct]}],"col-start":[{"col-start":D()}],"col-end":[{"col-end":D()}],"grid-rows":[{"grid-rows":[ch]}],"row-start-end":[{row:["auto",{span:[lh,ct]},ct]}],"row-start":[{"row-start":D()}],"row-end":[{"row-end":D()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ct]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ct]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...T()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...T(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...T(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ct,t]}],"min-w":[{"min-w":[ct,t,"min","max","fit"]}],"max-w":[{"max-w":[ct,t,"none","full","min","max","fit","prose",{screen:[zi]},zi]}],h:[{h:[ct,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ct,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ct,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ct,t,"auto","min","max","fit"]}],"font-size":[{text:["base",zi,Bi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",I0]}],"font-family":[{font:[ch]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ct]}],"line-clamp":[{"line-clamp":["none",iu,I0]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Qa,ct]}],"list-image":[{"list-image":["none",ct]}],"list-style-type":[{list:["none","disc","decimal",ct]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...B(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Qa,Bi]}],"underline-offset":[{"underline-offset":["auto",Qa,ct]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ct]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ct]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...U(),l7]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",o7]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},u7]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...B(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:B()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...B()]}],"outline-offset":[{"outline-offset":[Qa,ct]}],"outline-w":[{outline:[Qa,Bi]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:I()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Qa,Bi]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",zi,d7]}],"shadow-color":[{shadow:[ch]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...K(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":K()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",zi,ct]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[b]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ct]}],duration:[{duration:Q()}],ease:[{ease:["linear","in","out","in-out",ct]}],delay:[{delay:Q()}],animate:[{animate:["none","spin","ping","pulse","bounce",ct]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[lh,ct]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ct]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ct]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ct]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Qa,Bi,I0]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},g7=XU(p7);function De(...e){return g7(at(e))}function Ru(e){if(!e)return"Âge inconnu";const t=new Date(e),n=new Date;if(isNaN(t.getTime()))return"Date invalide";let r=n.getFullYear()-t.getFullYear(),a=n.getMonth()-t.getMonth();if((a<0||a===0&&n.getDate()<t.getDate())&&(r--,a+=12),r===0){if(a===0){const i=Math.floor((n.getTime()-t.getTime())/864e5);return`${i} jour${i>1?"s":""}`}return`${a} mois`}else return a===0?`${r} an${r>1?"s":""}`:`${r} an${r>1?"s":""} et ${a} mois`}function $a(e){if(!e)return"Non renseigné";const t=new Date(e);return isNaN(t.getTime())?"Date invalide":t.toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})}const v7=mU,II=j.forwardRef(({className:e,...t},n)=>s.jsx(pI,{ref:n,className:De("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));II.displayName=pI.displayName;const x7=bf("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),$I=j.forwardRef(({className:e,variant:t,...n},r)=>s.jsx(gI,{ref:r,className:De(x7({variant:t}),e),...n}));$I.displayName=gI.displayName;const y7=j.forwardRef(({className:e,...t},n)=>s.jsx(yI,{ref:n,className:De("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));y7.displayName=yI.displayName;const RI=j.forwardRef(({className:e,...t},n)=>s.jsx(jI,{ref:n,className:De("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(wf,{className:"h-4 w-4"})}));RI.displayName=jI.displayName;const LI=j.forwardRef(({className:e,...t},n)=>s.jsx(vI,{ref:n,className:De("text-sm font-semibold",e),...t}));LI.displayName=vI.displayName;const FI=j.forwardRef(({className:e,...t},n)=>s.jsx(xI,{ref:n,className:De("text-sm opacity-90",e),...t}));FI.displayName=xI.displayName;function j7(){const{toasts:e}=it();return s.jsxs(v7,{children:[e.map(function({id:t,title:n,description:r,action:a,...i}){return s.jsxs($I,{...i,children:[s.jsxs("div",{className:"grid gap-1",children:[n&&s.jsx(LI,{children:n}),r&&s.jsx(FI,{children:r})]}),a,s.jsx(RI,{})]},t)}),s.jsx(II,{})]})}var H_=["light","dark"],b7="(prefers-color-scheme: dark)",w7=j.createContext(void 0),N7={setTheme:e=>{},themes:[]},S7=()=>{var e;return(e=j.useContext(w7))!=null?e:N7};j.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:a,defaultTheme:i,value:o,attrs:l,nonce:c})=>{let u=i==="system",d=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(v=>`'${v}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,h=a?H_.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(v,p=!1,g=!0)=>{let x=o?o[v]:v,y=p?v+"|| ''":`'${x}'`,b="";return a&&g&&!p&&H_.includes(v)&&(b+=`d.style.colorScheme = '${v}';`),n==="class"?p||x?b+=`c.add(${y})`:b+="null":x&&(b+=`d[s](n,${y})`),b},f=e?`!function(){${d}${m(e)}}()`:r?`!function(){try{${d}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${u})){var t='${b7}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}${u?"":"else{"+m(i,!1,!1)+"}"}${h}}catch(e){}}()`:`!function(){try{${d}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}else{${m(i,!1,!1)};}${h}}catch(t){}}();`;return j.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:f}})});var C7=e=>{switch(e){case"success":return A7;case"info":return T7;case"warning":return k7;case"error":return E7;default:return null}},_7=Array(12).fill(0),P7=({visible:e,className:t})=>L.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},L.createElement("div",{className:"sonner-spinner"},_7.map((n,r)=>L.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),A7=L.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},L.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),k7=L.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},L.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),T7=L.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},L.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),E7=L.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},L.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),O7=L.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},L.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),L.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),D7=()=>{let[e,t]=L.useState(document.hidden);return L.useEffect(()=>{let n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e},Mb=1,M7=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:n,...r}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Mb++,i=this.toasts.find(l=>l.id===a),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),i?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...e,id:a,title:n}),{...l,...e,id:a,dismissible:o,title:n}):l):this.addToast({title:n,...r,dismissible:o,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let r=e instanceof Promise?e:e(),a=n!==void 0,i,o=r.then(async c=>{if(i=["resolve",c],L.isValidElement(c))a=!1,this.create({id:n,type:"default",message:c});else if($7(c)&&!c.ok){a=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,d=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:n,type:"error",message:u,description:d})}else if(t.success!==void 0){a=!1;let u=typeof t.success=="function"?await t.success(c):t.success,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"success",message:u,description:d})}}).catch(async c=>{if(i=["reject",c],t.error!==void 0){a=!1;let u=typeof t.error=="function"?await t.error(c):t.error,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:n,type:"error",message:u,description:d})}}).finally(()=>{var c;a&&(this.dismiss(n),n=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,u)=>o.then(()=>i[0]==="reject"?u(i[1]):c(i[1])).catch(u));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(e,t)=>{let n=(t==null?void 0:t.id)||Mb++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Br=new M7,I7=(e,t)=>{let n=(t==null?void 0:t.id)||Mb++;return Br.addToast({title:e,...t,id:n}),n},$7=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",R7=I7,L7=()=>Br.toasts,F7=()=>Br.getActiveToasts();Object.assign(R7,{success:Br.success,info:Br.info,warning:Br.warning,error:Br.error,custom:Br.custom,message:Br.message,promise:Br.promise,dismiss:Br.dismiss,loading:Br.loading},{getHistory:L7,getToasts:F7});function B7(e,{insertAt:t}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}B7(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function lp(e){return e.label!==void 0}var z7=3,V7="32px",q7="16px",K_=4e3,U7=356,W7=14,H7=20,K7=200;function zs(...e){return e.filter(Boolean).join(" ")}function G7(e){let[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}var Y7=e=>{var t,n,r,a,i,o,l,c,u,d,h;let{invert:m,toast:f,unstyled:v,interacting:p,setHeights:g,visibleToasts:x,heights:y,index:b,toasts:C,expanded:w,removeToast:N,defaultRichColors:S,closeButton:_,style:P,cancelButtonStyle:A,actionButtonStyle:E,className:k="",descriptionClassName:I="",duration:D,position:U,gap:B,loadingIcon:K,expandByDefault:T,classNames:$,icons:G,closeButtonAriaLabel:Q="Close toast",pauseWhenPageIsHidden:ne}=e,[oe,M]=L.useState(null),[ue,ve]=L.useState(null),[ce,re]=L.useState(!1),[V,le]=L.useState(!1),[W,X]=L.useState(!1),[pe,fe]=L.useState(!1),[Re,qe]=L.useState(!1),[ot,tt]=L.useState(0),[wt,ae]=L.useState(0),Ee=L.useRef(f.duration||D||K_),nt=L.useRef(null),pt=L.useRef(null),Nn=b===0,dt=b+1<=x,_t=f.type,ie=f.dismissible!==!1,Le=f.className||"",gs=f.descriptionClassName||"",vn=L.useMemo(()=>y.findIndex(rt=>rt.toastId===f.id)||0,[y,f.id]),$i=L.useMemo(()=>{var rt;return(rt=f.closeButton)!=null?rt:_},[f.closeButton,_]),Sn=L.useMemo(()=>f.duration||D||K_,[f.duration,D]),Ls=L.useRef(0),tr=L.useRef(0),vs=L.useRef(0),Xr=L.useRef(null),[H,Ce]=U.split("-"),ge=L.useMemo(()=>y.reduce((rt,kt,Ut)=>Ut>=vn?rt:rt+kt.height,0),[y,vn]),dn=D7(),Ir=f.invert||m,Fs=_t==="loading";tr.current=L.useMemo(()=>vn*B+ge,[vn,ge]),L.useEffect(()=>{Ee.current=Sn},[Sn]),L.useEffect(()=>{re(!0)},[]),L.useEffect(()=>{let rt=pt.current;if(rt){let kt=rt.getBoundingClientRect().height;return ae(kt),g(Ut=>[{toastId:f.id,height:kt,position:f.position},...Ut]),()=>g(Ut=>Ut.filter(Jr=>Jr.toastId!==f.id))}},[g,f.id]),L.useLayoutEffect(()=>{if(!ce)return;let rt=pt.current,kt=rt.style.height;rt.style.height="auto";let Ut=rt.getBoundingClientRect().height;rt.style.height=kt,ae(Ut),g(Jr=>Jr.find(Zr=>Zr.toastId===f.id)?Jr.map(Zr=>Zr.toastId===f.id?{...Zr,height:Ut}:Zr):[{toastId:f.id,height:Ut,position:f.position},...Jr])},[ce,f.title,f.description,g,f.id]);let xs=L.useCallback(()=>{le(!0),tt(tr.current),g(rt=>rt.filter(kt=>kt.toastId!==f.id)),setTimeout(()=>{N(f)},K7)},[f,N,g,tr]);L.useEffect(()=>{if(f.promise&&_t==="loading"||f.duration===1/0||f.type==="loading")return;let rt;return w||p||ne&&dn?(()=>{if(vs.current<Ls.current){let kt=new Date().getTime()-Ls.current;Ee.current=Ee.current-kt}vs.current=new Date().getTime()})():Ee.current!==1/0&&(Ls.current=new Date().getTime(),rt=setTimeout(()=>{var kt;(kt=f.onAutoClose)==null||kt.call(f,f),xs()},Ee.current)),()=>clearTimeout(rt)},[w,p,f,_t,ne,dn,xs]),L.useEffect(()=>{f.delete&&xs()},[xs,f.delete]);function e0(){var rt,kt,Ut;return G!=null&&G.loading?L.createElement("div",{className:zs($==null?void 0:$.loader,(rt=f==null?void 0:f.classNames)==null?void 0:rt.loader,"sonner-loader"),"data-visible":_t==="loading"},G.loading):K?L.createElement("div",{className:zs($==null?void 0:$.loader,(kt=f==null?void 0:f.classNames)==null?void 0:kt.loader,"sonner-loader"),"data-visible":_t==="loading"},K):L.createElement(P7,{className:zs($==null?void 0:$.loader,(Ut=f==null?void 0:f.classNames)==null?void 0:Ut.loader),visible:_t==="loading"})}return L.createElement("li",{tabIndex:0,ref:pt,className:zs(k,Le,$==null?void 0:$.toast,(t=f==null?void 0:f.classNames)==null?void 0:t.toast,$==null?void 0:$.default,$==null?void 0:$[_t],(n=f==null?void 0:f.classNames)==null?void 0:n[_t]),"data-sonner-toast":"","data-rich-colors":(r=f.richColors)!=null?r:S,"data-styled":!(f.jsx||f.unstyled||v),"data-mounted":ce,"data-promise":!!f.promise,"data-swiped":Re,"data-removed":V,"data-visible":dt,"data-y-position":H,"data-x-position":Ce,"data-index":b,"data-front":Nn,"data-swiping":W,"data-dismissible":ie,"data-type":_t,"data-invert":Ir,"data-swipe-out":pe,"data-swipe-direction":ue,"data-expanded":!!(w||T&&ce),style:{"--index":b,"--toasts-before":b,"--z-index":C.length-b,"--offset":`${V?ot:tr.current}px`,"--initial-height":T?"auto":`${wt}px`,...P,...f.style},onDragEnd:()=>{X(!1),M(null),Xr.current=null},onPointerDown:rt=>{Fs||!ie||(nt.current=new Date,tt(tr.current),rt.target.setPointerCapture(rt.pointerId),rt.target.tagName!=="BUTTON"&&(X(!0),Xr.current={x:rt.clientX,y:rt.clientY}))},onPointerUp:()=>{var rt,kt,Ut,Jr;if(pe||!ie)return;Xr.current=null;let Zr=Number(((rt=pt.current)==null?void 0:rt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),va=Number(((kt=pt.current)==null?void 0:kt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Ya=new Date().getTime()-((Ut=nt.current)==null?void 0:Ut.getTime()),es=oe==="x"?Zr:va,xa=Math.abs(es)/Ya;if(Math.abs(es)>=H7||xa>.11){tt(tr.current),(Jr=f.onDismiss)==null||Jr.call(f,f),ve(oe==="x"?Zr>0?"right":"left":va>0?"down":"up"),xs(),fe(!0),qe(!1);return}X(!1),M(null)},onPointerMove:rt=>{var kt,Ut,Jr,Zr;if(!Xr.current||!ie||((kt=window.getSelection())==null?void 0:kt.toString().length)>0)return;let va=rt.clientY-Xr.current.y,Ya=rt.clientX-Xr.current.x,es=(Ut=e.swipeDirections)!=null?Ut:G7(U);!oe&&(Math.abs(Ya)>1||Math.abs(va)>1)&&M(Math.abs(Ya)>Math.abs(va)?"x":"y");let xa={x:0,y:0};oe==="y"?(es.includes("top")||es.includes("bottom"))&&(es.includes("top")&&va<0||es.includes("bottom")&&va>0)&&(xa.y=va):oe==="x"&&(es.includes("left")||es.includes("right"))&&(es.includes("left")&&Ya<0||es.includes("right")&&Ya>0)&&(xa.x=Ya),(Math.abs(xa.x)>0||Math.abs(xa.y)>0)&&qe(!0),(Jr=pt.current)==null||Jr.style.setProperty("--swipe-amount-x",`${xa.x}px`),(Zr=pt.current)==null||Zr.style.setProperty("--swipe-amount-y",`${xa.y}px`)}},$i&&!f.jsx?L.createElement("button",{"aria-label":Q,"data-disabled":Fs,"data-close-button":!0,onClick:Fs||!ie?()=>{}:()=>{var rt;xs(),(rt=f.onDismiss)==null||rt.call(f,f)},className:zs($==null?void 0:$.closeButton,(a=f==null?void 0:f.classNames)==null?void 0:a.closeButton)},(i=G==null?void 0:G.close)!=null?i:O7):null,f.jsx||j.isValidElement(f.title)?f.jsx?f.jsx:typeof f.title=="function"?f.title():f.title:L.createElement(L.Fragment,null,_t||f.icon||f.promise?L.createElement("div",{"data-icon":"",className:zs($==null?void 0:$.icon,(o=f==null?void 0:f.classNames)==null?void 0:o.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||e0():null,f.type!=="loading"?f.icon||(G==null?void 0:G[_t])||C7(_t):null):null,L.createElement("div",{"data-content":"",className:zs($==null?void 0:$.content,(l=f==null?void 0:f.classNames)==null?void 0:l.content)},L.createElement("div",{"data-title":"",className:zs($==null?void 0:$.title,(c=f==null?void 0:f.classNames)==null?void 0:c.title)},typeof f.title=="function"?f.title():f.title),f.description?L.createElement("div",{"data-description":"",className:zs(I,gs,$==null?void 0:$.description,(u=f==null?void 0:f.classNames)==null?void 0:u.description)},typeof f.description=="function"?f.description():f.description):null),j.isValidElement(f.cancel)?f.cancel:f.cancel&&lp(f.cancel)?L.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||A,onClick:rt=>{var kt,Ut;lp(f.cancel)&&ie&&((Ut=(kt=f.cancel).onClick)==null||Ut.call(kt,rt),xs())},className:zs($==null?void 0:$.cancelButton,(d=f==null?void 0:f.classNames)==null?void 0:d.cancelButton)},f.cancel.label):null,j.isValidElement(f.action)?f.action:f.action&&lp(f.action)?L.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||E,onClick:rt=>{var kt,Ut;lp(f.action)&&((Ut=(kt=f.action).onClick)==null||Ut.call(kt,rt),!rt.defaultPrevented&&xs())},className:zs($==null?void 0:$.actionButton,(h=f==null?void 0:f.classNames)==null?void 0:h.actionButton)},f.action.label):null))};function G_(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function Q7(e,t){let n={};return[e,t].forEach((r,a)=>{let i=a===1,o=i?"--mobile-offset":"--offset",l=i?q7:V7;function c(u){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${o}-${u}`]=l:n[`${o}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):c(l)}),n}var X7=j.forwardRef(function(e,t){let{invert:n,position:r="bottom-right",hotkey:a=["altKey","KeyT"],expand:i,closeButton:o,className:l,offset:c,mobileOffset:u,theme:d="light",richColors:h,duration:m,style:f,visibleToasts:v=z7,toastOptions:p,dir:g=G_(),gap:x=W7,loadingIcon:y,icons:b,containerAriaLabel:C="Notifications",pauseWhenPageIsHidden:w}=e,[N,S]=L.useState([]),_=L.useMemo(()=>Array.from(new Set([r].concat(N.filter(ne=>ne.position).map(ne=>ne.position)))),[N,r]),[P,A]=L.useState([]),[E,k]=L.useState(!1),[I,D]=L.useState(!1),[U,B]=L.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),K=L.useRef(null),T=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),$=L.useRef(null),G=L.useRef(!1),Q=L.useCallback(ne=>{S(oe=>{var M;return(M=oe.find(ue=>ue.id===ne.id))!=null&&M.delete||Br.dismiss(ne.id),oe.filter(({id:ue})=>ue!==ne.id)})},[]);return L.useEffect(()=>Br.subscribe(ne=>{if(ne.dismiss){S(oe=>oe.map(M=>M.id===ne.id?{...M,delete:!0}:M));return}setTimeout(()=>{GM.flushSync(()=>{S(oe=>{let M=oe.findIndex(ue=>ue.id===ne.id);return M!==-1?[...oe.slice(0,M),{...oe[M],...ne},...oe.slice(M+1)]:[ne,...oe]})})})}),[]),L.useEffect(()=>{if(d!=="system"){B(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?B("dark"):B("light")),typeof window>"u")return;let ne=window.matchMedia("(prefers-color-scheme: dark)");try{ne.addEventListener("change",({matches:oe})=>{B(oe?"dark":"light")})}catch{ne.addListener(({matches:M})=>{try{B(M?"dark":"light")}catch(ue){console.error(ue)}})}},[d]),L.useEffect(()=>{N.length<=1&&k(!1)},[N]),L.useEffect(()=>{let ne=oe=>{var M,ue;a.every(ve=>oe[ve]||oe.code===ve)&&(k(!0),(M=K.current)==null||M.focus()),oe.code==="Escape"&&(document.activeElement===K.current||(ue=K.current)!=null&&ue.contains(document.activeElement))&&k(!1)};return document.addEventListener("keydown",ne),()=>document.removeEventListener("keydown",ne)},[a]),L.useEffect(()=>{if(K.current)return()=>{$.current&&($.current.focus({preventScroll:!0}),$.current=null,G.current=!1)}},[K.current]),L.createElement("section",{ref:t,"aria-label":`${C} ${T}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},_.map((ne,oe)=>{var M;let[ue,ve]=ne.split("-");return N.length?L.createElement("ol",{key:ne,dir:g==="auto"?G_():g,tabIndex:-1,ref:K,className:l,"data-sonner-toaster":!0,"data-theme":U,"data-y-position":ue,"data-lifted":E&&N.length>1&&!i,"data-x-position":ve,style:{"--front-toast-height":`${((M=P[0])==null?void 0:M.height)||0}px`,"--width":`${U7}px`,"--gap":`${x}px`,...f,...Q7(c,u)},onBlur:ce=>{G.current&&!ce.currentTarget.contains(ce.relatedTarget)&&(G.current=!1,$.current&&($.current.focus({preventScroll:!0}),$.current=null))},onFocus:ce=>{ce.target instanceof HTMLElement&&ce.target.dataset.dismissible==="false"||G.current||(G.current=!0,$.current=ce.relatedTarget)},onMouseEnter:()=>k(!0),onMouseMove:()=>k(!0),onMouseLeave:()=>{I||k(!1)},onDragEnd:()=>k(!1),onPointerDown:ce=>{ce.target instanceof HTMLElement&&ce.target.dataset.dismissible==="false"||D(!0)},onPointerUp:()=>D(!1)},N.filter(ce=>!ce.position&&oe===0||ce.position===ne).map((ce,re)=>{var V,le;return L.createElement(Y7,{key:ce.id,icons:b,index:re,toast:ce,defaultRichColors:h,duration:(V=p==null?void 0:p.duration)!=null?V:m,className:p==null?void 0:p.className,descriptionClassName:p==null?void 0:p.descriptionClassName,invert:n,visibleToasts:v,closeButton:(le=p==null?void 0:p.closeButton)!=null?le:o,interacting:I,position:ne,style:p==null?void 0:p.style,unstyled:p==null?void 0:p.unstyled,classNames:p==null?void 0:p.classNames,cancelButtonStyle:p==null?void 0:p.cancelButtonStyle,actionButtonStyle:p==null?void 0:p.actionButtonStyle,removeToast:Q,toasts:N.filter(W=>W.position==ce.position),heights:P.filter(W=>W.position==ce.position),setHeights:A,expandByDefault:i,gap:x,loadingIcon:y,expanded:E,pauseWhenPageIsHidden:w,swipeDirections:e.swipeDirections})})):null}))});const J7=({...e})=>{const{theme:t="system"}=S7();return s.jsx(X7,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var Z7=u1[" useId ".trim().toString()]||(()=>{}),e9=0;function Ra(e){const[t,n]=j.useState(Z7());return Tn(()=>{n(r=>r??String(e9++))},[e]),t?`radix-${t}`:""}const t9=["top","right","bottom","left"],Oo=Math.min,as=Math.max,Ig=Math.round,cp=Math.floor,La=e=>({x:e,y:e}),n9={left:"right",right:"left",bottom:"top",top:"bottom"},r9={start:"end",end:"start"};function Ib(e,t,n){return as(e,Oo(t,n))}function Si(e,t){return typeof e=="function"?e(t):e}function Ci(e){return e.split("-")[0]}function Sd(e){return e.split("-")[1]}function oS(e){return e==="x"?"y":"x"}function lS(e){return e==="y"?"height":"width"}const s9=new Set(["top","bottom"]);function ka(e){return s9.has(Ci(e))?"y":"x"}function cS(e){return oS(ka(e))}function a9(e,t,n){n===void 0&&(n=!1);const r=Sd(e),a=cS(e),i=lS(a);let o=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=$g(o)),[o,$g(o)]}function i9(e){const t=$g(e);return[$b(e),t,$b(t)]}function $b(e){return e.replace(/start|end/g,t=>r9[t])}const Y_=["left","right"],Q_=["right","left"],o9=["top","bottom"],l9=["bottom","top"];function c9(e,t,n){switch(e){case"top":case"bottom":return n?t?Q_:Y_:t?Y_:Q_;case"left":case"right":return t?o9:l9;default:return[]}}function u9(e,t,n,r){const a=Sd(e);let i=c9(Ci(e),n==="start",r);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map($b)))),i}function $g(e){return e.replace(/left|right|bottom|top/g,t=>n9[t])}function d9(e){return{top:0,right:0,bottom:0,left:0,...e}}function BI(e){return typeof e!="number"?d9(e):{top:e,right:e,bottom:e,left:e}}function Rg(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function X_(e,t,n){let{reference:r,floating:a}=e;const i=ka(t),o=cS(t),l=lS(o),c=Ci(t),u=i==="y",d=r.x+r.width/2-a.width/2,h=r.y+r.height/2-a.height/2,m=r[l]/2-a[l]/2;let f;switch(c){case"top":f={x:d,y:r.y-a.height};break;case"bottom":f={x:d,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:h};break;case"left":f={x:r.x-a.width,y:h};break;default:f={x:r.x,y:r.y}}switch(Sd(t)){case"start":f[o]-=m*(n&&u?-1:1);break;case"end":f[o]+=m*(n&&u?-1:1);break}return f}const h9=async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:i=[],platform:o}=n,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:h}=X_(u,r,c),m=r,f={},v=0;for(let p=0;p<l.length;p++){const{name:g,fn:x}=l[p],{x:y,y:b,data:C,reset:w}=await x({x:d,y:h,initialPlacement:r,placement:m,strategy:a,middlewareData:f,rects:u,platform:o,elements:{reference:e,floating:t}});d=y??d,h=b??h,f={...f,[g]:{...f[g],...C}},w&&v<=50&&(v++,typeof w=="object"&&(w.placement&&(m=w.placement),w.rects&&(u=w.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):w.rects),{x:d,y:h}=X_(u,m,c)),p=-1)}return{x:d,y:h,placement:m,strategy:a,middlewareData:f}};async function xm(e,t){var n;t===void 0&&(t={});const{x:r,y:a,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:m=!1,padding:f=0}=Si(t,e),v=BI(f),g=l[m?h==="floating"?"reference":"floating":h],x=Rg(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(g)))==null||n?g:g.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),y=h==="floating"?{x:r,y:a,width:o.floating.width,height:o.floating.height}:o.reference,b=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),C=await(i.isElement==null?void 0:i.isElement(b))?await(i.getScale==null?void 0:i.getScale(b))||{x:1,y:1}:{x:1,y:1},w=Rg(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:b,strategy:c}):y);return{top:(x.top-w.top+v.top)/C.y,bottom:(w.bottom-x.bottom+v.bottom)/C.y,left:(x.left-w.left+v.left)/C.x,right:(w.right-x.right+v.right)/C.x}}const m9=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=Si(e,t)||{};if(u==null)return{};const h=BI(d),m={x:n,y:r},f=cS(a),v=lS(f),p=await o.getDimensions(u),g=f==="y",x=g?"top":"left",y=g?"bottom":"right",b=g?"clientHeight":"clientWidth",C=i.reference[v]+i.reference[f]-m[f]-i.floating[v],w=m[f]-i.reference[f],N=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let S=N?N[b]:0;(!S||!await(o.isElement==null?void 0:o.isElement(N)))&&(S=l.floating[b]||i.floating[v]);const _=C/2-w/2,P=S/2-p[v]/2-1,A=Oo(h[x],P),E=Oo(h[y],P),k=A,I=S-p[v]-E,D=S/2-p[v]/2+_,U=Ib(k,D,I),B=!c.arrow&&Sd(a)!=null&&D!==U&&i.reference[v]/2-(D<k?A:E)-p[v]/2<0,K=B?D<k?D-k:D-I:0;return{[f]:m[f]+K,data:{[f]:U,centerOffset:D-U-K,...B&&{alignmentOffset:K}},reset:B}}}),f9=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:p=!0,...g}=Si(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const x=Ci(a),y=ka(l),b=Ci(l)===l,C=await(c.isRTL==null?void 0:c.isRTL(u.floating)),w=m||(b||!p?[$g(l)]:i9(l)),N=v!=="none";!m&&N&&w.push(...u9(l,p,v,C));const S=[l,...w],_=await xm(t,g),P=[];let A=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&P.push(_[x]),h){const D=a9(a,o,C);P.push(_[D[0]],_[D[1]])}if(A=[...A,{placement:a,overflows:P}],!P.every(D=>D<=0)){var E,k;const D=(((E=i.flip)==null?void 0:E.index)||0)+1,U=S[D];if(U&&(!(h==="alignment"?y!==ka(U):!1)||A.every(T=>T.overflows[0]>0&&ka(T.placement)===y)))return{data:{index:D,overflows:A},reset:{placement:U}};let B=(k=A.filter(K=>K.overflows[0]<=0).sort((K,T)=>K.overflows[1]-T.overflows[1])[0])==null?void 0:k.placement;if(!B)switch(f){case"bestFit":{var I;const K=(I=A.filter(T=>{if(N){const $=ka(T.placement);return $===y||$==="y"}return!0}).map(T=>[T.placement,T.overflows.filter($=>$>0).reduce(($,G)=>$+G,0)]).sort((T,$)=>T[1]-$[1])[0])==null?void 0:I[0];K&&(B=K);break}case"initialPlacement":B=l;break}if(a!==B)return{reset:{placement:B}}}return{}}}};function J_(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Z_(e){return t9.some(t=>e[t]>=0)}const p9=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...a}=Si(e,t);switch(r){case"referenceHidden":{const i=await xm(t,{...a,elementContext:"reference"}),o=J_(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Z_(o)}}}case"escaped":{const i=await xm(t,{...a,altBoundary:!0}),o=J_(i,n.floating);return{data:{escapedOffsets:o,escaped:Z_(o)}}}default:return{}}}}},zI=new Set(["left","top"]);async function g9(e,t){const{placement:n,platform:r,elements:a}=e,i=await(r.isRTL==null?void 0:r.isRTL(a.floating)),o=Ci(n),l=Sd(n),c=ka(n)==="y",u=zI.has(o)?-1:1,d=i&&c?-1:1,h=Si(t,e);let{mainAxis:m,crossAxis:f,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof v=="number"&&(f=l==="end"?v*-1:v),c?{x:f*d,y:m*u}:{x:m*u,y:f*d}}const v9=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:i,placement:o,middlewareData:l}=t,c=await g9(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},x9=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:g=>{let{x,y}=g;return{x,y}}},...c}=Si(e,t),u={x:n,y:r},d=await xm(t,c),h=ka(Ci(a)),m=oS(h);let f=u[m],v=u[h];if(i){const g=m==="y"?"top":"left",x=m==="y"?"bottom":"right",y=f+d[g],b=f-d[x];f=Ib(y,f,b)}if(o){const g=h==="y"?"top":"left",x=h==="y"?"bottom":"right",y=v+d[g],b=v-d[x];v=Ib(y,v,b)}const p=l.fn({...t,[m]:f,[h]:v});return{...p,data:{x:p.x-n,y:p.y-r,enabled:{[m]:i,[h]:o}}}}}},y9=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:a,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Si(e,t),d={x:n,y:r},h=ka(a),m=oS(h);let f=d[m],v=d[h];const p=Si(l,t),g=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(c){const b=m==="y"?"height":"width",C=i.reference[m]-i.floating[b]+g.mainAxis,w=i.reference[m]+i.reference[b]-g.mainAxis;f<C?f=C:f>w&&(f=w)}if(u){var x,y;const b=m==="y"?"width":"height",C=zI.has(Ci(a)),w=i.reference[h]-i.floating[b]+(C&&((x=o.offset)==null?void 0:x[h])||0)+(C?0:g.crossAxis),N=i.reference[h]+i.reference[b]+(C?0:((y=o.offset)==null?void 0:y[h])||0)-(C?g.crossAxis:0);v<w?v=w:v>N&&(v=N)}return{[m]:f,[h]:v}}}},j9=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...u}=Si(e,t),d=await xm(t,u),h=Ci(a),m=Sd(a),f=ka(a)==="y",{width:v,height:p}=i.floating;let g,x;h==="top"||h==="bottom"?(g=h,x=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(x=h,g=m==="end"?"top":"bottom");const y=p-d.top-d.bottom,b=v-d.left-d.right,C=Oo(p-d[g],y),w=Oo(v-d[x],b),N=!t.middlewareData.shift;let S=C,_=w;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(_=b),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(S=y),N&&!m){const A=as(d.left,0),E=as(d.right,0),k=as(d.top,0),I=as(d.bottom,0);f?_=v-2*(A!==0||E!==0?A+E:as(d.left,d.right)):S=p-2*(k!==0||I!==0?k+I:as(d.top,d.bottom))}await c({...t,availableWidth:_,availableHeight:S});const P=await o.getDimensions(l.floating);return v!==P.width||p!==P.height?{reset:{rects:!0}}:{}}}};function Sx(){return typeof window<"u"}function Cd(e){return VI(e)?(e.nodeName||"").toLowerCase():"#document"}function us(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Wa(e){var t;return(t=(VI(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function VI(e){return Sx()?e instanceof Node||e instanceof us(e).Node:!1}function la(e){return Sx()?e instanceof Element||e instanceof us(e).Element:!1}function qa(e){return Sx()?e instanceof HTMLElement||e instanceof us(e).HTMLElement:!1}function eP(e){return!Sx()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof us(e).ShadowRoot}const b9=new Set(["inline","contents"]);function Nf(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=ca(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!b9.has(a)}const w9=new Set(["table","td","th"]);function N9(e){return w9.has(Cd(e))}const S9=[":popover-open",":modal"];function Cx(e){return S9.some(t=>{try{return e.matches(t)}catch{return!1}})}const C9=["transform","translate","scale","rotate","perspective"],_9=["transform","translate","scale","rotate","perspective","filter"],P9=["paint","layout","strict","content"];function uS(e){const t=dS(),n=la(e)?ca(e):e;return C9.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||_9.some(r=>(n.willChange||"").includes(r))||P9.some(r=>(n.contain||"").includes(r))}function A9(e){let t=Do(e);for(;qa(t)&&!Lu(t);){if(uS(t))return t;if(Cx(t))return null;t=Do(t)}return null}function dS(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const k9=new Set(["html","body","#document"]);function Lu(e){return k9.has(Cd(e))}function ca(e){return us(e).getComputedStyle(e)}function _x(e){return la(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Do(e){if(Cd(e)==="html")return e;const t=e.assignedSlot||e.parentNode||eP(e)&&e.host||Wa(e);return eP(t)?t.host:t}function qI(e){const t=Do(e);return Lu(t)?e.ownerDocument?e.ownerDocument.body:e.body:qa(t)&&Nf(t)?t:qI(t)}function ym(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=qI(e),i=a===((r=e.ownerDocument)==null?void 0:r.body),o=us(a);if(i){const l=Rb(o);return t.concat(o,o.visualViewport||[],Nf(a)?a:[],l&&n?ym(l):[])}return t.concat(a,ym(a,[],n))}function Rb(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function UI(e){const t=ca(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=qa(e),i=a?e.offsetWidth:n,o=a?e.offsetHeight:r,l=Ig(n)!==i||Ig(r)!==o;return l&&(n=i,r=o),{width:n,height:r,$:l}}function hS(e){return la(e)?e:e.contextElement}function ou(e){const t=hS(e);if(!qa(t))return La(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:i}=UI(t);let o=(i?Ig(n.width):n.width)/r,l=(i?Ig(n.height):n.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const T9=La(0);function WI(e){const t=us(e);return!dS()||!t.visualViewport?T9:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function E9(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==us(e)?!1:t}function ql(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),i=hS(e);let o=La(1);t&&(r?la(r)&&(o=ou(r)):o=ou(e));const l=E9(i,n,r)?WI(i):La(0);let c=(a.left+l.x)/o.x,u=(a.top+l.y)/o.y,d=a.width/o.x,h=a.height/o.y;if(i){const m=us(i),f=r&&la(r)?us(r):r;let v=m,p=Rb(v);for(;p&&r&&f!==v;){const g=ou(p),x=p.getBoundingClientRect(),y=ca(p),b=x.left+(p.clientLeft+parseFloat(y.paddingLeft))*g.x,C=x.top+(p.clientTop+parseFloat(y.paddingTop))*g.y;c*=g.x,u*=g.y,d*=g.x,h*=g.y,c+=b,u+=C,v=us(p),p=Rb(v)}}return Rg({width:d,height:h,x:c,y:u})}function mS(e,t){const n=_x(e).scrollLeft;return t?t.left+n:ql(Wa(e)).left+n}function HI(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),a=r.left+t.scrollLeft-(n?0:mS(e,r)),i=r.top+t.scrollTop;return{x:a,y:i}}function O9(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const i=a==="fixed",o=Wa(r),l=t?Cx(t.floating):!1;if(r===o||l&&i)return n;let c={scrollLeft:0,scrollTop:0},u=La(1);const d=La(0),h=qa(r);if((h||!h&&!i)&&((Cd(r)!=="body"||Nf(o))&&(c=_x(r)),qa(r))){const f=ql(r);u=ou(r),d.x=f.x+r.clientLeft,d.y=f.y+r.clientTop}const m=o&&!h&&!i?HI(o,c,!0):La(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+m.x,y:n.y*u.y-c.scrollTop*u.y+d.y+m.y}}function D9(e){return Array.from(e.getClientRects())}function M9(e){const t=Wa(e),n=_x(e),r=e.ownerDocument.body,a=as(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=as(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+mS(e);const l=-n.scrollTop;return ca(r).direction==="rtl"&&(o+=as(t.clientWidth,r.clientWidth)-a),{width:a,height:i,x:o,y:l}}function I9(e,t){const n=us(e),r=Wa(e),a=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const u=dS();(!u||u&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:l,y:c}}const $9=new Set(["absolute","fixed"]);function R9(e,t){const n=ql(e,!0,t==="fixed"),r=n.top+e.clientTop,a=n.left+e.clientLeft,i=qa(e)?ou(e):La(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,u=r*i.y;return{width:o,height:l,x:c,y:u}}function tP(e,t,n){let r;if(t==="viewport")r=I9(e,n);else if(t==="document")r=M9(Wa(e));else if(la(t))r=R9(t,n);else{const a=WI(e);r={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Rg(r)}function KI(e,t){const n=Do(e);return n===t||!la(n)||Lu(n)?!1:ca(n).position==="fixed"||KI(n,t)}function L9(e,t){const n=t.get(e);if(n)return n;let r=ym(e,[],!1).filter(l=>la(l)&&Cd(l)!=="body"),a=null;const i=ca(e).position==="fixed";let o=i?Do(e):e;for(;la(o)&&!Lu(o);){const l=ca(o),c=uS(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&$9.has(a.position)||Nf(o)&&!c&&KI(e,o))?r=r.filter(d=>d!==o):a=l,o=Do(o)}return t.set(e,r),r}function F9(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const o=[...n==="clippingAncestors"?Cx(t)?[]:L9(t,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,d)=>{const h=tP(t,d,a);return u.top=as(h.top,u.top),u.right=Oo(h.right,u.right),u.bottom=Oo(h.bottom,u.bottom),u.left=as(h.left,u.left),u},tP(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function B9(e){const{width:t,height:n}=UI(e);return{width:t,height:n}}function z9(e,t,n){const r=qa(t),a=Wa(t),i=n==="fixed",o=ql(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=La(0);function u(){c.x=mS(a)}if(r||!r&&!i)if((Cd(t)!=="body"||Nf(a))&&(l=_x(t)),r){const f=ql(t,!0,i,t);c.x=f.x+t.clientLeft,c.y=f.y+t.clientTop}else a&&u();i&&!r&&a&&u();const d=a&&!r&&!i?HI(a,l):La(0),h=o.left+l.scrollLeft-c.x-d.x,m=o.top+l.scrollTop-c.y-d.y;return{x:h,y:m,width:o.width,height:o.height}}function $0(e){return ca(e).position==="static"}function nP(e,t){if(!qa(e)||ca(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Wa(e)===n&&(n=n.ownerDocument.body),n}function GI(e,t){const n=us(e);if(Cx(e))return n;if(!qa(e)){let a=Do(e);for(;a&&!Lu(a);){if(la(a)&&!$0(a))return a;a=Do(a)}return n}let r=nP(e,t);for(;r&&N9(r)&&$0(r);)r=nP(r,t);return r&&Lu(r)&&$0(r)&&!uS(r)?n:r||A9(e)||n}const V9=async function(e){const t=this.getOffsetParent||GI,n=this.getDimensions,r=await n(e.floating);return{reference:z9(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function q9(e){return ca(e).direction==="rtl"}const U9={convertOffsetParentRelativeRectToViewportRelativeRect:O9,getDocumentElement:Wa,getClippingRect:F9,getOffsetParent:GI,getElementRects:V9,getClientRects:D9,getDimensions:B9,getScale:ou,isElement:la,isRTL:q9};function YI(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function W9(e,t){let n=null,r;const a=Wa(e);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=e.getBoundingClientRect(),{left:d,top:h,width:m,height:f}=u;if(l||t(),!m||!f)return;const v=cp(h),p=cp(a.clientWidth-(d+m)),g=cp(a.clientHeight-(h+f)),x=cp(d),b={rootMargin:-v+"px "+-p+"px "+-g+"px "+-x+"px",threshold:as(0,Oo(1,c))||1};let C=!0;function w(N){const S=N[0].intersectionRatio;if(S!==c){if(!C)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}S===1&&!YI(u,e.getBoundingClientRect())&&o(),C=!1}try{n=new IntersectionObserver(w,{...b,root:a.ownerDocument})}catch{n=new IntersectionObserver(w,b)}n.observe(e)}return o(!0),i}function H9(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=hS(e),d=a||i?[...u?ym(u):[],...ym(t)]:[];d.forEach(x=>{a&&x.addEventListener("scroll",n,{passive:!0}),i&&x.addEventListener("resize",n)});const h=u&&l?W9(u,n):null;let m=-1,f=null;o&&(f=new ResizeObserver(x=>{let[y]=x;y&&y.target===u&&f&&(f.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var b;(b=f)==null||b.observe(t)})),n()}),u&&!c&&f.observe(u),f.observe(t));let v,p=c?ql(e):null;c&&g();function g(){const x=ql(e);p&&!YI(p,x)&&n(),p=x,v=requestAnimationFrame(g)}return n(),()=>{var x;d.forEach(y=>{a&&y.removeEventListener("scroll",n),i&&y.removeEventListener("resize",n)}),h==null||h(),(x=f)==null||x.disconnect(),f=null,c&&cancelAnimationFrame(v)}}const K9=v9,G9=x9,Y9=f9,Q9=j9,X9=p9,rP=m9,J9=y9,Z9=(e,t,n)=>{const r=new Map,a={platform:U9,...n},i={...a.platform,_c:r};return h9(e,t,{...a,platform:i})};var eW=typeof document<"u",tW=function(){},rg=eW?j.useLayoutEffect:tW;function Lg(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Lg(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;r--!==0;){const i=a[r];if(!(i==="_owner"&&e.$$typeof)&&!Lg(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function QI(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function sP(e,t){const n=QI(e);return Math.round(t*n)/n}function R0(e){const t=j.useRef(e);return rg(()=>{t.current=e}),t}function nW(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,h]=j.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,f]=j.useState(r);Lg(m,r)||f(r);const[v,p]=j.useState(null),[g,x]=j.useState(null),y=j.useCallback(T=>{T!==N.current&&(N.current=T,p(T))},[]),b=j.useCallback(T=>{T!==S.current&&(S.current=T,x(T))},[]),C=i||v,w=o||g,N=j.useRef(null),S=j.useRef(null),_=j.useRef(d),P=c!=null,A=R0(c),E=R0(a),k=R0(u),I=j.useCallback(()=>{if(!N.current||!S.current)return;const T={placement:t,strategy:n,middleware:m};E.current&&(T.platform=E.current),Z9(N.current,S.current,T).then($=>{const G={...$,isPositioned:k.current!==!1};D.current&&!Lg(_.current,G)&&(_.current=G,ac.flushSync(()=>{h(G)}))})},[m,t,n,E,k]);rg(()=>{u===!1&&_.current.isPositioned&&(_.current.isPositioned=!1,h(T=>({...T,isPositioned:!1})))},[u]);const D=j.useRef(!1);rg(()=>(D.current=!0,()=>{D.current=!1}),[]),rg(()=>{if(C&&(N.current=C),w&&(S.current=w),C&&w){if(A.current)return A.current(C,w,I);I()}},[C,w,I,A,P]);const U=j.useMemo(()=>({reference:N,floating:S,setReference:y,setFloating:b}),[y,b]),B=j.useMemo(()=>({reference:C,floating:w}),[C,w]),K=j.useMemo(()=>{const T={position:n,left:0,top:0};if(!B.floating)return T;const $=sP(B.floating,d.x),G=sP(B.floating,d.y);return l?{...T,transform:"translate("+$+"px, "+G+"px)",...QI(B.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:$,top:G}},[n,l,B.floating,d.x,d.y]);return j.useMemo(()=>({...d,update:I,refs:U,elements:B,floatingStyles:K}),[d,I,U,B,K])}const rW=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:a}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?rP({element:r.current,padding:a}).fn(n):{}:r?rP({element:r,padding:a}).fn(n):{}}}},sW=(e,t)=>({...K9(e),options:[e,t]}),aW=(e,t)=>({...G9(e),options:[e,t]}),iW=(e,t)=>({...J9(e),options:[e,t]}),oW=(e,t)=>({...Y9(e),options:[e,t]}),lW=(e,t)=>({...Q9(e),options:[e,t]}),cW=(e,t)=>({...X9(e),options:[e,t]}),uW=(e,t)=>({...rW(e),options:[e,t]});var dW="Arrow",XI=j.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5,...i}=e;return s.jsx(Ve.svg,{...i,ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});XI.displayName=dW;var hW=XI;function fS(e){const[t,n]=j.useState(void 0);return Tn(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;n({width:o,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var pS="Popper",[JI,_d]=Yr(pS),[mW,ZI]=JI(pS),e$=e=>{const{__scopePopper:t,children:n}=e,[r,a]=j.useState(null);return s.jsx(mW,{scope:t,anchor:r,onAnchorChange:a,children:n})};e$.displayName=pS;var t$="PopperAnchor",n$=j.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...a}=e,i=ZI(t$,n),o=j.useRef(null),l=xt(t,o);return j.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:s.jsx(Ve.div,{...a,ref:l})});n$.displayName=t$;var gS="PopperContent",[fW,pW]=JI(gS),r$=j.forwardRef((e,t)=>{var ce,re,V,le,W,X;const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:f="optimized",onPlaced:v,...p}=e,g=ZI(gS,n),[x,y]=j.useState(null),b=xt(t,pe=>y(pe)),[C,w]=j.useState(null),N=fS(C),S=(N==null?void 0:N.width)??0,_=(N==null?void 0:N.height)??0,P=r+(i!=="center"?"-"+i:""),A=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},E=Array.isArray(u)?u:[u],k=E.length>0,I={padding:A,boundary:E.filter(vW),altBoundary:k},{refs:D,floatingStyles:U,placement:B,isPositioned:K,middlewareData:T}=nW({strategy:"fixed",placement:P,whileElementsMounted:(...pe)=>H9(...pe,{animationFrame:f==="always"}),elements:{reference:g.anchor},middleware:[sW({mainAxis:a+_,alignmentAxis:o}),c&&aW({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?iW():void 0,...I}),c&&oW({...I}),lW({...I,apply:({elements:pe,rects:fe,availableWidth:Re,availableHeight:qe})=>{const{width:ot,height:tt}=fe.reference,wt=pe.floating.style;wt.setProperty("--radix-popper-available-width",`${Re}px`),wt.setProperty("--radix-popper-available-height",`${qe}px`),wt.setProperty("--radix-popper-anchor-width",`${ot}px`),wt.setProperty("--radix-popper-anchor-height",`${tt}px`)}}),C&&uW({element:C,padding:l}),xW({arrowWidth:S,arrowHeight:_}),m&&cW({strategy:"referenceHidden",...I})]}),[$,G]=i$(B),Q=Er(v);Tn(()=>{K&&(Q==null||Q())},[K,Q]);const ne=(ce=T.arrow)==null?void 0:ce.x,oe=(re=T.arrow)==null?void 0:re.y,M=((V=T.arrow)==null?void 0:V.centerOffset)!==0,[ue,ve]=j.useState();return Tn(()=>{x&&ve(window.getComputedStyle(x).zIndex)},[x]),s.jsx("div",{ref:D.setFloating,"data-radix-popper-content-wrapper":"",style:{...U,transform:K?U.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ue,"--radix-popper-transform-origin":[(le=T.transformOrigin)==null?void 0:le.x,(W=T.transformOrigin)==null?void 0:W.y].join(" "),...((X=T.hide)==null?void 0:X.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(fW,{scope:n,placedSide:$,onArrowChange:w,arrowX:ne,arrowY:oe,shouldHideArrow:M,children:s.jsx(Ve.div,{"data-side":$,"data-align":G,...p,ref:b,style:{...p.style,animation:K?void 0:"none"}})})})});r$.displayName=gS;var s$="PopperArrow",gW={top:"bottom",right:"left",bottom:"top",left:"right"},a$=j.forwardRef(function(t,n){const{__scopePopper:r,...a}=t,i=pW(s$,r),o=gW[i.placedSide];return s.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:s.jsx(hW,{...a,ref:n,style:{...a.style,display:"block"}})})});a$.displayName=s$;function vW(e){return e!==null}var xW=e=>({name:"transformOrigin",options:e,fn(t){var g,x,y;const{placement:n,rects:r,middlewareData:a}=t,o=((g=a.arrow)==null?void 0:g.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[u,d]=i$(n),h={start:"0%",center:"50%",end:"100%"}[d],m=(((x=a.arrow)==null?void 0:x.x)??0)+l/2,f=(((y=a.arrow)==null?void 0:y.y)??0)+c/2;let v="",p="";return u==="bottom"?(v=o?h:`${m}px`,p=`${-c}px`):u==="top"?(v=o?h:`${m}px`,p=`${r.floating.height+c}px`):u==="right"?(v=`${-c}px`,p=o?h:`${f}px`):u==="left"&&(v=`${r.floating.width+c}px`,p=o?h:`${f}px`),{data:{x:v,y:p}}}});function i$(e){const[t,n="center"]=e.split("-");return[t,n]}var o$=e$,vS=n$,xS=r$,yS=a$,[Px,mTe]=Yr("Tooltip",[_d]),jS=_d(),l$="TooltipProvider",yW=700,aP="tooltip.open",[jW,c$]=Px(l$),u$=e=>{const{__scopeTooltip:t,delayDuration:n=yW,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:i}=e,o=j.useRef(!0),l=j.useRef(!1),c=j.useRef(0);return j.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),s.jsx(jW,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:j.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:j.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:j.useCallback(u=>{l.current=u},[]),disableHoverableContent:a,children:i})};u$.displayName=l$;var d$="Tooltip",[fTe,Ax]=Px(d$),Lb="TooltipTrigger",bW=j.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=Ax(Lb,n),i=c$(Lb,n),o=jS(n),l=j.useRef(null),c=xt(t,l,a.onTriggerChange),u=j.useRef(!1),d=j.useRef(!1),h=j.useCallback(()=>u.current=!1,[]);return j.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),s.jsx(vS,{asChild:!0,...o,children:s.jsx(Ve.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:c,onPointerMove:ke(e.onPointerMove,m=>{m.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),d.current=!0)}),onPointerLeave:ke(e.onPointerLeave,()=>{a.onTriggerLeave(),d.current=!1}),onPointerDown:ke(e.onPointerDown,()=>{a.open&&a.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:ke(e.onFocus,()=>{u.current||a.onOpen()}),onBlur:ke(e.onBlur,a.onClose),onClick:ke(e.onClick,a.onClose)})})});bW.displayName=Lb;var wW="TooltipPortal",[pTe,NW]=Px(wW,{forceMount:void 0}),Fu="TooltipContent",h$=j.forwardRef((e,t)=>{const n=NW(Fu,e.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...i}=e,o=Ax(Fu,e.__scopeTooltip);return s.jsx(Is,{present:r||o.open,children:o.disableHoverableContent?s.jsx(m$,{side:a,...i,ref:t}):s.jsx(SW,{side:a,...i,ref:t})})}),SW=j.forwardRef((e,t)=>{const n=Ax(Fu,e.__scopeTooltip),r=c$(Fu,e.__scopeTooltip),a=j.useRef(null),i=xt(t,a),[o,l]=j.useState(null),{trigger:c,onClose:u}=n,d=a.current,{onPointerInTransitChange:h}=r,m=j.useCallback(()=>{l(null),h(!1)},[h]),f=j.useCallback((v,p)=>{const g=v.currentTarget,x={x:v.clientX,y:v.clientY},y=kW(x,g.getBoundingClientRect()),b=TW(x,y),C=EW(p.getBoundingClientRect()),w=DW([...b,...C]);l(w),h(!0)},[h]);return j.useEffect(()=>()=>m(),[m]),j.useEffect(()=>{if(c&&d){const v=g=>f(g,d),p=g=>f(g,c);return c.addEventListener("pointerleave",v),d.addEventListener("pointerleave",p),()=>{c.removeEventListener("pointerleave",v),d.removeEventListener("pointerleave",p)}}},[c,d,f,m]),j.useEffect(()=>{if(o){const v=p=>{const g=p.target,x={x:p.clientX,y:p.clientY},y=(c==null?void 0:c.contains(g))||(d==null?void 0:d.contains(g)),b=!OW(x,o);y?m():b&&(m(),u())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[c,d,o,u,m]),s.jsx(m$,{...e,ref:i})}),[CW,_W]=Px(d$,{isInside:!1}),PW=XM("TooltipContent"),m$=j.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,c=Ax(Fu,n),u=jS(n),{onClose:d}=c;return j.useEffect(()=>(document.addEventListener(aP,d),()=>document.removeEventListener(aP,d)),[d]),j.useEffect(()=>{if(c.trigger){const h=m=>{const f=m.target;f!=null&&f.contains(c.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,d]),s.jsx(jd,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:s.jsxs(xS,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(PW,{children:r}),s.jsx(CW,{scope:n,isInside:!0,children:s.jsx(Yq,{id:c.contentId,role:"tooltip",children:a||r})})]})})});h$.displayName=Fu;var f$="TooltipArrow",AW=j.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=jS(n);return _W(f$,n).isInside?null:s.jsx(yS,{...a,...r,ref:t})});AW.displayName=f$;function kW(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,a,i)){case i:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function TW(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function EW(e){const{top:t,right:n,bottom:r,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:r},{x:a,y:r}]}function OW(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],u=l.x,d=l.y,h=c.x,m=c.y;d>r!=m>r&&n<(h-u)*(r-d)/(m-d)+u&&(a=!a)}return a}function DW(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),MW(t)}function MW(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const a=e[r];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const a=e[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var IW=u$,p$=h$;const $W=IW,RW=j.forwardRef(({className:e,sideOffset:t=4,...n},r)=>s.jsx(p$,{ref:r,sideOffset:t,className:De("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));RW.displayName=p$.displayName;var Pd=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},LW={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},no,a1,CO,FW=(CO=class{constructor(){ze(this,no,LW);ze(this,a1,!1)}setTimeoutProvider(e){Oe(this,no,e)}setTimeout(e,t){return J(this,no).setTimeout(e,t)}clearTimeout(e){J(this,no).clearTimeout(e)}setInterval(e,t){return J(this,no).setInterval(e,t)}clearInterval(e){J(this,no).clearInterval(e)}},no=new WeakMap,a1=new WeakMap,CO),gl=new FW;function BW(e){setTimeout(e,0)}var Ul=typeof window>"u"||"Deno"in globalThis;function Cr(){}function zW(e,t){return typeof e=="function"?e(t):e}function Fb(e){return typeof e=="number"&&e>=0&&e!==1/0}function g$(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Co(e,t){return typeof e=="function"?e(t):e}function Ns(e,t){return typeof e=="function"?e(t):e}function iP(e,t){const{type:n="all",exact:r,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(r){if(t.queryHash!==bS(o,t.options))return!1}else if(!jm(t.queryKey,o))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function oP(e,t){const{exact:n,status:r,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(Wl(t.options.mutationKey)!==Wl(i))return!1}else if(!jm(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||a&&!a(t))}function bS(e,t){return((t==null?void 0:t.queryKeyHashFn)||Wl)(e)}function Wl(e){return JSON.stringify(e,(t,n)=>Bb(n)?Object.keys(n).sort().reduce((r,a)=>(r[a]=n[a],r),{}):n)}function jm(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>jm(e[n],t[n])):!1}var VW=Object.prototype.hasOwnProperty;function v$(e,t){if(e===t)return e;const n=lP(e)&&lP(t);if(!n&&!(Bb(e)&&Bb(t)))return t;const a=(n?e:Object.keys(e)).length,i=n?t:Object.keys(t),o=i.length,l=n?new Array(o):{};let c=0;for(let u=0;u<o;u++){const d=n?u:i[u],h=e[d],m=t[d];if(h===m){l[d]=h,(n?u<a:VW.call(e,d))&&c++;continue}if(h===null||m===null||typeof h!="object"||typeof m!="object"){l[d]=m;continue}const f=v$(h,m);l[d]=f,f===h&&c++}return a===o&&c===a?e:l}function Fg(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function lP(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Bb(e){if(!cP(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!cP(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function cP(e){return Object.prototype.toString.call(e)==="[object Object]"}function qW(e){return new Promise(t=>{gl.setTimeout(t,e)})}function zb(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?v$(e,t):t}function UW(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function WW(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var wS=Symbol();function x$(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===wS?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function y$(e,t){return typeof e=="function"?e(...t):!!e}var wl,ro,pu,_O,HW=(_O=class extends Pd{constructor(){super();ze(this,wl);ze(this,ro);ze(this,pu);Oe(this,pu,t=>{if(!Ul&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){J(this,ro)||this.setEventListener(J(this,pu))}onUnsubscribe(){var t;this.hasListeners()||((t=J(this,ro))==null||t.call(this),Oe(this,ro,void 0))}setEventListener(t){var n;Oe(this,pu,t),(n=J(this,ro))==null||n.call(this),Oe(this,ro,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){J(this,wl)!==t&&(Oe(this,wl,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof J(this,wl)=="boolean"?J(this,wl):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},wl=new WeakMap,ro=new WeakMap,pu=new WeakMap,_O),NS=new HW;function Vb(){let e,t;const n=new Promise((a,i)=>{e=a,t=i});n.status="pending",n.catch(()=>{});function r(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{r({status:"fulfilled",value:a}),e(a)},n.reject=a=>{r({status:"rejected",reason:a}),t(a)},n}var KW=BW;function GW(){let e=[],t=0,n=l=>{l()},r=l=>{l()},a=KW;const i=l=>{t?e.push(l):a(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{a=l}}}var $n=GW(),gu,so,vu,PO,YW=(PO=class extends Pd{constructor(){super();ze(this,gu,!0);ze(this,so);ze(this,vu);Oe(this,vu,t=>{if(!Ul&&window.addEventListener){const n=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){J(this,so)||this.setEventListener(J(this,vu))}onUnsubscribe(){var t;this.hasListeners()||((t=J(this,so))==null||t.call(this),Oe(this,so,void 0))}setEventListener(t){var n;Oe(this,vu,t),(n=J(this,so))==null||n.call(this),Oe(this,so,t(this.setOnline.bind(this)))}setOnline(t){J(this,gu)!==t&&(Oe(this,gu,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return J(this,gu)}},gu=new WeakMap,so=new WeakMap,vu=new WeakMap,PO),Bg=new YW;function QW(e){return Math.min(1e3*2**e,3e4)}function j$(e){return(e??"online")==="online"?Bg.isOnline():!0}var qb=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function b$(e){let t=!1,n=0,r;const a=Vb(),i=()=>a.status!=="pending",o=p=>{var g;if(!i()){const x=new qb(p);m(x),(g=e.onCancel)==null||g.call(e,x)}},l=()=>{t=!0},c=()=>{t=!1},u=()=>NS.isFocused()&&(e.networkMode==="always"||Bg.isOnline())&&e.canRun(),d=()=>j$(e.networkMode)&&e.canRun(),h=p=>{i()||(r==null||r(),a.resolve(p))},m=p=>{i()||(r==null||r(),a.reject(p))},f=()=>new Promise(p=>{var g;r=x=>{(i()||u())&&p(x)},(g=e.onPause)==null||g.call(e)}).then(()=>{var p;r=void 0,i()||(p=e.onContinue)==null||p.call(e)}),v=()=>{if(i())return;let p;const g=n===0?e.initialPromise:void 0;try{p=g??e.fn()}catch(x){p=Promise.reject(x)}Promise.resolve(p).then(h).catch(x=>{var N;if(i())return;const y=e.retry??(Ul?0:3),b=e.retryDelay??QW,C=typeof b=="function"?b(n,x):b,w=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,x);if(t||!w){m(x);return}n++,(N=e.onFail)==null||N.call(e,n,x),qW(C).then(()=>u()?void 0:f()).then(()=>{t?m(x):v()})})};return{promise:a,status:()=>a.status,cancel:o,continue:()=>(r==null||r(),a),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?v():f().then(v),a)}}var Nl,AO,w$=(AO=class{constructor(){ze(this,Nl)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Fb(this.gcTime)&&Oe(this,Nl,gl.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Ul?1/0:5*60*1e3))}clearGcTimeout(){J(this,Nl)&&(gl.clearTimeout(J(this,Nl)),Oe(this,Nl,void 0))}},Nl=new WeakMap,AO),Sl,xu,ws,Cl,qn,cf,_l,Hs,Ja,kO,XW=(kO=class extends w${constructor(t){super();ze(this,Hs);ze(this,Sl);ze(this,xu);ze(this,ws);ze(this,Cl);ze(this,qn);ze(this,cf);ze(this,_l);Oe(this,_l,!1),Oe(this,cf,t.defaultOptions),this.setOptions(t.options),this.observers=[],Oe(this,Cl,t.client),Oe(this,ws,J(this,Cl).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Oe(this,Sl,uP(this.options)),this.state=t.state??J(this,Sl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=J(this,qn))==null?void 0:t.promise}setOptions(t){if(this.options={...J(this,cf),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=uP(this.options);n.data!==void 0&&(this.setData(n.data,{updatedAt:n.dataUpdatedAt,manual:!0}),Oe(this,Sl,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&J(this,ws).remove(this)}setData(t,n){const r=zb(this.state.data,t,this.options);return ut(this,Hs,Ja).call(this,{data:r,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),r}setState(t,n){ut(this,Hs,Ja).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var r,a;const n=(r=J(this,qn))==null?void 0:r.promise;return(a=J(this,qn))==null||a.cancel(t),n?n.then(Cr).catch(Cr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(J(this,Sl))}isActive(){return this.observers.some(t=>Ns(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===wS||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>Co(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!g$(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=J(this,qn))==null||n.continue()}onOnline(){var n;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=J(this,qn))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),J(this,ws).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(J(this,qn)&&(J(this,_l)?J(this,qn).cancel({revert:!0}):J(this,qn).cancelRetry()),this.scheduleGc()),J(this,ws).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ut(this,Hs,Ja).call(this,{type:"invalidate"})}async fetch(t,n){var c,u,d,h,m,f,v,p,g,x,y,b;if(this.state.fetchStatus!=="idle"&&((c=J(this,qn))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(J(this,qn))return J(this,qn).continueRetry(),J(this,qn).promise}if(t&&this.setOptions(t),!this.options.queryFn){const C=this.observers.find(w=>w.options.queryFn);C&&this.setOptions(C.options)}const r=new AbortController,a=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(Oe(this,_l,!0),r.signal)})},i=()=>{const C=x$(this.options,n),N=(()=>{const S={client:J(this,Cl),queryKey:this.queryKey,meta:this.meta};return a(S),S})();return Oe(this,_l,!1),this.options.persister?this.options.persister(C,N,this):C(N)},l=(()=>{const C={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:J(this,Cl),state:this.state,fetchFn:i};return a(C),C})();(u=this.options.behavior)==null||u.onFetch(l,this),Oe(this,xu,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&ut(this,Hs,Ja).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta}),Oe(this,qn,b$({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,onCancel:C=>{C instanceof qb&&C.revert&&this.setState({...J(this,xu),fetchStatus:"idle"}),r.abort()},onFail:(C,w)=>{ut(this,Hs,Ja).call(this,{type:"failed",failureCount:C,error:w})},onPause:()=>{ut(this,Hs,Ja).call(this,{type:"pause"})},onContinue:()=>{ut(this,Hs,Ja).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const C=await J(this,qn).start();if(C===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(C),(f=(m=J(this,ws).config).onSuccess)==null||f.call(m,C,this),(p=(v=J(this,ws).config).onSettled)==null||p.call(v,C,this.state.error,this),C}catch(C){if(C instanceof qb){if(C.silent)return J(this,qn).promise;if(C.revert){if(this.state.data===void 0)throw C;return this.state.data}}throw ut(this,Hs,Ja).call(this,{type:"error",error:C}),(x=(g=J(this,ws).config).onError)==null||x.call(g,C,this),(b=(y=J(this,ws).config).onSettled)==null||b.call(y,this.state.data,C,this),C}finally{this.scheduleGc()}}},Sl=new WeakMap,xu=new WeakMap,ws=new WeakMap,Cl=new WeakMap,qn=new WeakMap,cf=new WeakMap,_l=new WeakMap,Hs=new WeakSet,Ja=function(t){const n=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...N$(r.data,this.options),fetchMeta:t.meta??null};case"success":const a={...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return Oe(this,xu,t.manual?a:void 0),a;case"error":const i=t.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=n(this.state),$n.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),J(this,ws).notify({query:this,type:"updated",action:t})})},kO);function N$(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:j$(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function uP(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Lr,jt,uf,wr,Pl,yu,si,ao,df,ju,bu,Al,kl,io,wu,Et,Ah,Ub,Wb,Hb,Kb,Gb,Yb,Qb,S$,TO,JW=(TO=class extends Pd{constructor(t,n){super();ze(this,Et);ze(this,Lr);ze(this,jt);ze(this,uf);ze(this,wr);ze(this,Pl);ze(this,yu);ze(this,si);ze(this,ao);ze(this,df);ze(this,ju);ze(this,bu);ze(this,Al);ze(this,kl);ze(this,io);ze(this,wu,new Set);this.options=n,Oe(this,Lr,t),Oe(this,ao,null),Oe(this,si,Vb()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(J(this,jt).addObserver(this),dP(J(this,jt),this.options)?ut(this,Et,Ah).call(this):this.updateResult(),ut(this,Et,Kb).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Xb(J(this,jt),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Xb(J(this,jt),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ut(this,Et,Gb).call(this),ut(this,Et,Yb).call(this),J(this,jt).removeObserver(this)}setOptions(t){const n=this.options,r=J(this,jt);if(this.options=J(this,Lr).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ns(this.options.enabled,J(this,jt))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ut(this,Et,Qb).call(this),J(this,jt).setOptions(this.options),n._defaulted&&!Fg(this.options,n)&&J(this,Lr).getQueryCache().notify({type:"observerOptionsUpdated",query:J(this,jt),observer:this});const a=this.hasListeners();a&&hP(J(this,jt),r,this.options,n)&&ut(this,Et,Ah).call(this),this.updateResult(),a&&(J(this,jt)!==r||Ns(this.options.enabled,J(this,jt))!==Ns(n.enabled,J(this,jt))||Co(this.options.staleTime,J(this,jt))!==Co(n.staleTime,J(this,jt)))&&ut(this,Et,Ub).call(this);const i=ut(this,Et,Wb).call(this);a&&(J(this,jt)!==r||Ns(this.options.enabled,J(this,jt))!==Ns(n.enabled,J(this,jt))||i!==J(this,io))&&ut(this,Et,Hb).call(this,i)}getOptimisticResult(t){const n=J(this,Lr).getQueryCache().build(J(this,Lr),t),r=this.createResult(n,t);return eH(this,r)&&(Oe(this,wr,r),Oe(this,yu,this.options),Oe(this,Pl,J(this,jt).state)),r}getCurrentResult(){return J(this,wr)}trackResult(t,n){return new Proxy(t,{get:(r,a)=>(this.trackProp(a),n==null||n(a),a==="promise"&&!this.options.experimental_prefetchInRender&&J(this,si).status==="pending"&&J(this,si).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(r,a))})}trackProp(t){J(this,wu).add(t)}getCurrentQuery(){return J(this,jt)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=J(this,Lr).defaultQueryOptions(t),r=J(this,Lr).getQueryCache().build(J(this,Lr),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(t){return ut(this,Et,Ah).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),J(this,wr)))}createResult(t,n){var P;const r=J(this,jt),a=this.options,i=J(this,wr),o=J(this,Pl),l=J(this,yu),u=t!==r?t.state:J(this,uf),{state:d}=t;let h={...d},m=!1,f;if(n._optimisticResults){const A=this.hasListeners(),E=!A&&dP(t,n),k=A&&hP(t,r,n,a);(E||k)&&(h={...h,...N$(d.data,t.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:v,errorUpdatedAt:p,status:g}=h;f=h.data;let x=!1;if(n.placeholderData!==void 0&&f===void 0&&g==="pending"){let A;i!=null&&i.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(A=i.data,x=!0):A=typeof n.placeholderData=="function"?n.placeholderData((P=J(this,bu))==null?void 0:P.state.data,J(this,bu)):n.placeholderData,A!==void 0&&(g="success",f=zb(i==null?void 0:i.data,A,n),m=!0)}if(n.select&&f!==void 0&&!x)if(i&&f===(o==null?void 0:o.data)&&n.select===J(this,df))f=J(this,ju);else try{Oe(this,df,n.select),f=n.select(f),f=zb(i==null?void 0:i.data,f,n),Oe(this,ju,f),Oe(this,ao,null)}catch(A){Oe(this,ao,A)}J(this,ao)&&(v=J(this,ao),f=J(this,ju),p=Date.now(),g="error");const y=h.fetchStatus==="fetching",b=g==="pending",C=g==="error",w=b&&y,N=f!==void 0,_={status:g,fetchStatus:h.fetchStatus,isPending:b,isSuccess:g==="success",isError:C,isInitialLoading:w,isLoading:w,data:f,dataUpdatedAt:h.dataUpdatedAt,error:v,errorUpdatedAt:p,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:y,isRefetching:y&&!b,isLoadingError:C&&!N,isPaused:h.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:C&&N,isStale:SS(t,n),refetch:this.refetch,promise:J(this,si),isEnabled:Ns(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const A=I=>{_.status==="error"?I.reject(_.error):_.data!==void 0&&I.resolve(_.data)},E=()=>{const I=Oe(this,si,_.promise=Vb());A(I)},k=J(this,si);switch(k.status){case"pending":t.queryHash===r.queryHash&&A(k);break;case"fulfilled":(_.status==="error"||_.data!==k.value)&&E();break;case"rejected":(_.status!=="error"||_.error!==k.reason)&&E();break}}return _}updateResult(){const t=J(this,wr),n=this.createResult(J(this,jt),this.options);if(Oe(this,Pl,J(this,jt).state),Oe(this,yu,this.options),J(this,Pl).data!==void 0&&Oe(this,bu,J(this,jt)),Fg(n,t))return;Oe(this,wr,n);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!J(this,wu).size)return!0;const o=new Set(i??J(this,wu));return this.options.throwOnError&&o.add("error"),Object.keys(J(this,wr)).some(l=>{const c=l;return J(this,wr)[c]!==t[c]&&o.has(c)})};ut(this,Et,S$).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ut(this,Et,Kb).call(this)}},Lr=new WeakMap,jt=new WeakMap,uf=new WeakMap,wr=new WeakMap,Pl=new WeakMap,yu=new WeakMap,si=new WeakMap,ao=new WeakMap,df=new WeakMap,ju=new WeakMap,bu=new WeakMap,Al=new WeakMap,kl=new WeakMap,io=new WeakMap,wu=new WeakMap,Et=new WeakSet,Ah=function(t){ut(this,Et,Qb).call(this);let n=J(this,jt).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(Cr)),n},Ub=function(){ut(this,Et,Gb).call(this);const t=Co(this.options.staleTime,J(this,jt));if(Ul||J(this,wr).isStale||!Fb(t))return;const r=g$(J(this,wr).dataUpdatedAt,t)+1;Oe(this,Al,gl.setTimeout(()=>{J(this,wr).isStale||this.updateResult()},r))},Wb=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(J(this,jt)):this.options.refetchInterval)??!1},Hb=function(t){ut(this,Et,Yb).call(this),Oe(this,io,t),!(Ul||Ns(this.options.enabled,J(this,jt))===!1||!Fb(J(this,io))||J(this,io)===0)&&Oe(this,kl,gl.setInterval(()=>{(this.options.refetchIntervalInBackground||NS.isFocused())&&ut(this,Et,Ah).call(this)},J(this,io)))},Kb=function(){ut(this,Et,Ub).call(this),ut(this,Et,Hb).call(this,ut(this,Et,Wb).call(this))},Gb=function(){J(this,Al)&&(gl.clearTimeout(J(this,Al)),Oe(this,Al,void 0))},Yb=function(){J(this,kl)&&(gl.clearInterval(J(this,kl)),Oe(this,kl,void 0))},Qb=function(){const t=J(this,Lr).getQueryCache().build(J(this,Lr),this.options);if(t===J(this,jt))return;const n=J(this,jt);Oe(this,jt,t),Oe(this,uf,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},S$=function(t){$n.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(J(this,wr))}),J(this,Lr).getQueryCache().notify({query:J(this,jt),type:"observerResultsUpdated"})})},TO);function ZW(e,t){return Ns(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function dP(e,t){return ZW(e,t)||e.state.data!==void 0&&Xb(e,t,t.refetchOnMount)}function Xb(e,t,n){if(Ns(t.enabled,e)!==!1&&Co(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&SS(e,t)}return!1}function hP(e,t,n,r){return(e!==t||Ns(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&SS(e,n)}function SS(e,t){return Ns(t.enabled,e)!==!1&&e.isStaleByTime(Co(t.staleTime,e))}function eH(e,t){return!Fg(e.getCurrentResult(),t)}function mP(e){return{onFetch:(t,n)=>{var d,h,m,f,v;const r=t.options,a=(m=(h=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:m.direction,i=((f=t.state.data)==null?void 0:f.pages)||[],o=((v=t.state.data)==null?void 0:v.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let p=!1;const g=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?p=!0:t.signal.addEventListener("abort",()=>{p=!0}),t.signal)})},x=x$(t.options,t.fetchOptions),y=async(b,C,w)=>{if(p)return Promise.reject();if(C==null&&b.pages.length)return Promise.resolve(b);const S=(()=>{const E={client:t.client,queryKey:t.queryKey,pageParam:C,direction:w?"backward":"forward",meta:t.options.meta};return g(E),E})(),_=await x(S),{maxPages:P}=t.options,A=w?WW:UW;return{pages:A(b.pages,_,P),pageParams:A(b.pageParams,C,P)}};if(a&&i.length){const b=a==="backward",C=b?tH:fP,w={pages:i,pageParams:o},N=C(r,w);l=await y(w,N,b)}else{const b=e??i.length;do{const C=c===0?o[0]??r.initialPageParam:fP(r,l);if(c>0&&C==null)break;l=await y(l,C),c++}while(c<b)}return l};t.options.persister?t.fetchFn=()=>{var p,g;return(g=(p=t.options).persister)==null?void 0:g.call(p,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=u}}}function fP(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function tH(e,{pages:t,pageParams:n}){var r;return t.length>0?(r=e.getPreviousPageParam)==null?void 0:r.call(e,t[0],t,n[0],n):void 0}var hf,wa,Nr,Tl,Na,Ui,EO,nH=(EO=class extends w${constructor(t){super();ze(this,Na);ze(this,hf);ze(this,wa);ze(this,Nr);ze(this,Tl);Oe(this,hf,t.client),this.mutationId=t.mutationId,Oe(this,Nr,t.mutationCache),Oe(this,wa,[]),this.state=t.state||C$(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){J(this,wa).includes(t)||(J(this,wa).push(t),this.clearGcTimeout(),J(this,Nr).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Oe(this,wa,J(this,wa).filter(n=>n!==t)),this.scheduleGc(),J(this,Nr).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){J(this,wa).length||(this.state.status==="pending"?this.scheduleGc():J(this,Nr).remove(this))}continue(){var t;return((t=J(this,Tl))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,c,u,d,h,m,f,v,p,g,x,y,b,C,w,N,S,_,P;const n=()=>{ut(this,Na,Ui).call(this,{type:"continue"})},r={client:J(this,hf),meta:this.options.meta,mutationKey:this.options.mutationKey};Oe(this,Tl,b$({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(A,E)=>{ut(this,Na,Ui).call(this,{type:"failed",failureCount:A,error:E})},onPause:()=>{ut(this,Na,Ui).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>J(this,Nr).canRun(this)}));const a=this.state.status==="pending",i=!J(this,Tl).canStart();try{if(a)n();else{ut(this,Na,Ui).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(o=J(this,Nr).config).onMutate)==null?void 0:l.call(o,t,this,r));const E=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,t,r));E!==this.state.context&&ut(this,Na,Ui).call(this,{type:"pending",context:E,variables:t,isPaused:i})}const A=await J(this,Tl).start();return await((h=(d=J(this,Nr).config).onSuccess)==null?void 0:h.call(d,A,t,this.state.context,this,r)),await((f=(m=this.options).onSuccess)==null?void 0:f.call(m,A,t,this.state.context,r)),await((p=(v=J(this,Nr).config).onSettled)==null?void 0:p.call(v,A,null,this.state.variables,this.state.context,this,r)),await((x=(g=this.options).onSettled)==null?void 0:x.call(g,A,null,t,this.state.context,r)),ut(this,Na,Ui).call(this,{type:"success",data:A}),A}catch(A){try{throw await((b=(y=J(this,Nr).config).onError)==null?void 0:b.call(y,A,t,this.state.context,this,r)),await((w=(C=this.options).onError)==null?void 0:w.call(C,A,t,this.state.context,r)),await((S=(N=J(this,Nr).config).onSettled)==null?void 0:S.call(N,void 0,A,this.state.variables,this.state.context,this,r)),await((P=(_=this.options).onSettled)==null?void 0:P.call(_,void 0,A,t,this.state.context,r)),A}finally{ut(this,Na,Ui).call(this,{type:"error",error:A})}}finally{J(this,Nr).runNext(this)}}},hf=new WeakMap,wa=new WeakMap,Nr=new WeakMap,Tl=new WeakMap,Na=new WeakSet,Ui=function(t){const n=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),$n.batch(()=>{J(this,wa).forEach(r=>{r.onMutationUpdate(t)}),J(this,Nr).notify({mutation:this,type:"updated",action:t})})},EO);function C$(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ai,Ks,mf,OO,rH=(OO=class extends Pd{constructor(t={}){super();ze(this,ai);ze(this,Ks);ze(this,mf);this.config=t,Oe(this,ai,new Set),Oe(this,Ks,new Map),Oe(this,mf,0)}build(t,n,r){const a=new nH({client:t,mutationCache:this,mutationId:++Vf(this,mf)._,options:t.defaultMutationOptions(n),state:r});return this.add(a),a}add(t){J(this,ai).add(t);const n=up(t);if(typeof n=="string"){const r=J(this,Ks).get(n);r?r.push(t):J(this,Ks).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(J(this,ai).delete(t)){const n=up(t);if(typeof n=="string"){const r=J(this,Ks).get(n);if(r)if(r.length>1){const a=r.indexOf(t);a!==-1&&r.splice(a,1)}else r[0]===t&&J(this,Ks).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=up(t);if(typeof n=="string"){const r=J(this,Ks).get(n),a=r==null?void 0:r.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var r;const n=up(t);if(typeof n=="string"){const a=(r=J(this,Ks).get(n))==null?void 0:r.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){$n.batch(()=>{J(this,ai).forEach(t=>{this.notify({type:"removed",mutation:t})}),J(this,ai).clear(),J(this,Ks).clear()})}getAll(){return Array.from(J(this,ai))}find(t){const n={exact:!0,...t};return this.getAll().find(r=>oP(n,r))}findAll(t={}){return this.getAll().filter(n=>oP(t,n))}notify(t){$n.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return $n.batch(()=>Promise.all(t.map(n=>n.continue().catch(Cr))))}},ai=new WeakMap,Ks=new WeakMap,mf=new WeakMap,OO);function up(e){var t;return(t=e.options.scope)==null?void 0:t.id}var ii,oo,Fr,oi,vi,sg,Jb,DO,sH=(DO=class extends Pd{constructor(n,r){super();ze(this,vi);ze(this,ii);ze(this,oo);ze(this,Fr);ze(this,oi);Oe(this,ii,n),this.setOptions(r),this.bindMethods(),ut(this,vi,sg).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var a;const r=this.options;this.options=J(this,ii).defaultMutationOptions(n),Fg(this.options,r)||J(this,ii).getMutationCache().notify({type:"observerOptionsUpdated",mutation:J(this,Fr),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Wl(r.mutationKey)!==Wl(this.options.mutationKey)?this.reset():((a=J(this,Fr))==null?void 0:a.state.status)==="pending"&&J(this,Fr).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=J(this,Fr))==null||n.removeObserver(this)}onMutationUpdate(n){ut(this,vi,sg).call(this),ut(this,vi,Jb).call(this,n)}getCurrentResult(){return J(this,oo)}reset(){var n;(n=J(this,Fr))==null||n.removeObserver(this),Oe(this,Fr,void 0),ut(this,vi,sg).call(this),ut(this,vi,Jb).call(this)}mutate(n,r){var a;return Oe(this,oi,r),(a=J(this,Fr))==null||a.removeObserver(this),Oe(this,Fr,J(this,ii).getMutationCache().build(J(this,ii),this.options)),J(this,Fr).addObserver(this),J(this,Fr).execute(n)}},ii=new WeakMap,oo=new WeakMap,Fr=new WeakMap,oi=new WeakMap,vi=new WeakSet,sg=function(){var r;const n=((r=J(this,Fr))==null?void 0:r.state)??C$();Oe(this,oo,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Jb=function(n){$n.batch(()=>{var r,a,i,o,l,c,u,d;if(J(this,oi)&&this.hasListeners()){const h=J(this,oo).variables,m=J(this,oo).context,f={client:J(this,ii),meta:this.options.meta,mutationKey:this.options.mutationKey};(n==null?void 0:n.type)==="success"?((a=(r=J(this,oi)).onSuccess)==null||a.call(r,n.data,h,m,f),(o=(i=J(this,oi)).onSettled)==null||o.call(i,n.data,null,h,m,f)):(n==null?void 0:n.type)==="error"&&((c=(l=J(this,oi)).onError)==null||c.call(l,n.error,h,m,f),(d=(u=J(this,oi)).onSettled)==null||d.call(u,void 0,n.error,h,m,f))}this.listeners.forEach(h=>{h(J(this,oo))})})},DO),Sa,MO,aH=(MO=class extends Pd{constructor(t={}){super();ze(this,Sa);this.config=t,Oe(this,Sa,new Map)}build(t,n,r){const a=n.queryKey,i=n.queryHash??bS(a,n);let o=this.get(i);return o||(o=new XW({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(n),state:r,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){J(this,Sa).has(t.queryHash)||(J(this,Sa).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=J(this,Sa).get(t.queryHash);n&&(t.destroy(),n===t&&J(this,Sa).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){$n.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return J(this,Sa).get(t)}getAll(){return[...J(this,Sa).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(r=>iP(n,r))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(r=>iP(t,r)):n}notify(t){$n.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){$n.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){$n.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Sa=new WeakMap,MO),fn,lo,co,Nu,Su,uo,Cu,_u,IO,iH=(IO=class{constructor(e={}){ze(this,fn);ze(this,lo);ze(this,co);ze(this,Nu);ze(this,Su);ze(this,uo);ze(this,Cu);ze(this,_u);Oe(this,fn,e.queryCache||new aH),Oe(this,lo,e.mutationCache||new rH),Oe(this,co,e.defaultOptions||{}),Oe(this,Nu,new Map),Oe(this,Su,new Map),Oe(this,uo,0)}mount(){Vf(this,uo)._++,J(this,uo)===1&&(Oe(this,Cu,NS.subscribe(async e=>{e&&(await this.resumePausedMutations(),J(this,fn).onFocus())})),Oe(this,_u,Bg.subscribe(async e=>{e&&(await this.resumePausedMutations(),J(this,fn).onOnline())})))}unmount(){var e,t;Vf(this,uo)._--,J(this,uo)===0&&((e=J(this,Cu))==null||e.call(this),Oe(this,Cu,void 0),(t=J(this,_u))==null||t.call(this),Oe(this,_u,void 0))}isFetching(e){return J(this,fn).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return J(this,lo).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=J(this,fn).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=J(this,fn).build(this,t),r=n.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(Co(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return J(this,fn).findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),a=J(this,fn).get(r.queryHash),i=a==null?void 0:a.state.data,o=zW(t,i);if(o!==void 0)return J(this,fn).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return $n.batch(()=>J(this,fn).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=J(this,fn).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=J(this,fn);$n.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=J(this,fn);return $n.batch(()=>(n.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=$n.batch(()=>J(this,fn).findAll(e).map(a=>a.cancel(n)));return Promise.all(r).then(Cr).catch(Cr)}invalidateQueries(e,t={}){return $n.batch(()=>(J(this,fn).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=$n.batch(()=>J(this,fn).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,n);return n.throwOnError||(i=i.catch(Cr)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(Cr)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=J(this,fn).build(this,t);return n.isStaleByTime(Co(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Cr).catch(Cr)}fetchInfiniteQuery(e){return e.behavior=mP(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Cr).catch(Cr)}ensureInfiniteQueryData(e){return e.behavior=mP(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Bg.isOnline()?J(this,lo).resumePausedMutations():Promise.resolve()}getQueryCache(){return J(this,fn)}getMutationCache(){return J(this,lo)}getDefaultOptions(){return J(this,co)}setDefaultOptions(e){Oe(this,co,e)}setQueryDefaults(e,t){J(this,Nu).set(Wl(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...J(this,Nu).values()],n={};return t.forEach(r=>{jm(e,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(e,t){J(this,Su).set(Wl(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...J(this,Su).values()],n={};return t.forEach(r=>{jm(e,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...J(this,co).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=bS(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===wS&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...J(this,co).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){J(this,fn).clear(),J(this,lo).clear()}},fn=new WeakMap,lo=new WeakMap,co=new WeakMap,Nu=new WeakMap,Su=new WeakMap,uo=new WeakMap,Cu=new WeakMap,_u=new WeakMap,IO),_$=j.createContext(void 0),Ct=e=>{const t=j.useContext(_$);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},oH=({client:e,children:t})=>(j.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(_$.Provider,{value:e,children:t})),P$=j.createContext(!1),lH=()=>j.useContext(P$);P$.Provider;function cH(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var uH=j.createContext(cH()),dH=()=>j.useContext(uH),hH=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},mH=e=>{j.useEffect(()=>{e.clearReset()},[e])},fH=({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(a&&e.data===void 0||y$(n,[e.error,r])),pH=e=>{if(e.suspense){const n=a=>a==="static"?a:Math.max(a??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...a)=>n(r(...a)):n(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},gH=(e,t)=>e.isLoading&&e.isFetching&&!t,vH=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,pP=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function xH(e,t,n){var h,m,f,v,p;const r=lH(),a=dH(),i=Ct(),o=i.defaultQueryOptions(e);(m=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||m.call(h,o),o._optimisticResults=r?"isRestoring":"optimistic",pH(o),hH(o,a),mH(a);const l=!i.getQueryCache().get(o.queryHash),[c]=j.useState(()=>new t(i,o)),u=c.getOptimisticResult(o),d=!r&&e.subscribed!==!1;if(j.useSyncExternalStore(j.useCallback(g=>{const x=d?c.subscribe($n.batchCalls(g)):Cr;return c.updateResult(),x},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),j.useEffect(()=>{c.setOptions(o)},[o,c]),vH(o,u))throw pP(o,c,a);if(fH({result:u,errorResetBoundary:a,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;if((v=(f=i.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||v.call(f,o,u),o.experimental_prefetchInRender&&!Ul&&gH(u,r)){const g=l?pP(o,c,a):(p=i.getQueryCache().get(o.queryHash))==null?void 0:p.promise;g==null||g.catch(Cr).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?u:c.trackResult(u)}function an(e,t){return xH(e,JW)}function Pt(e,t){const n=Ct(),[r]=j.useState(()=>new sH(n,e));j.useEffect(()=>{r.setOptions(e)},[r,e]);const a=j.useSyncExternalStore(j.useCallback(o=>r.subscribe($n.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=j.useCallback((o,l)=>{r.mutate(o,l).catch(Cr)},[r]);if(a.error&&y$(r.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bm(){return bm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bm.apply(this,arguments)}var fo;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(fo||(fo={}));const gP="popstate";function yH(e){e===void 0&&(e={});function t(r,a){let{pathname:i,search:o,hash:l}=r.location;return Zb("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:zg(a)}return bH(t,n,null,e)}function wn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function A$(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function jH(){return Math.random().toString(36).substr(2,8)}function vP(e,t){return{usr:e.state,key:e.key,idx:t}}function Zb(e,t,n,r){return n===void 0&&(n=null),bm({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Ad(t):t,{state:n,key:t&&t.key||r||jH()})}function zg(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Ad(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function bH(e,t,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:i=!1}=r,o=a.history,l=fo.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(bm({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=fo.Pop;let g=d(),x=g==null?null:g-u;u=g,c&&c({action:l,location:p.location,delta:x})}function m(g,x){l=fo.Push;let y=Zb(p.location,g,x);u=d()+1;let b=vP(y,u),C=p.createHref(y);try{o.pushState(b,"",C)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;a.location.assign(C)}i&&c&&c({action:l,location:p.location,delta:1})}function f(g,x){l=fo.Replace;let y=Zb(p.location,g,x);u=d();let b=vP(y,u),C=p.createHref(y);o.replaceState(b,"",C),i&&c&&c({action:l,location:p.location,delta:0})}function v(g){let x=a.location.origin!=="null"?a.location.origin:a.location.href,y=typeof g=="string"?g:zg(g);return y=y.replace(/ $/,"%20"),wn(x,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,x)}let p={get action(){return l},get location(){return e(a,o)},listen(g){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(gP,h),c=g,()=>{a.removeEventListener(gP,h),c=null}},createHref(g){return t(a,g)},createURL:v,encodeLocation(g){let x=v(g);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:f,go(g){return o.go(g)}};return p}var xP;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(xP||(xP={}));function wH(e,t,n){return n===void 0&&(n="/"),NH(e,t,n,!1)}function NH(e,t,n,r){let a=typeof t=="string"?Ad(t):t,i=CS(a.pathname||"/",n);if(i==null)return null;let o=k$(e);SH(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=IH(i);l=DH(o[c],u,r)}return l}function k$(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(wn(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=_o([r,c.relativePath]),d=n.concat(c);i.children&&i.children.length>0&&(wn(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),k$(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:EH(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of T$(i.path))a(i,o,c)}),t}function T$(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return a?[i,""]:[i];let o=T$(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function SH(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:OH(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const CH=/^:[\w-]+$/,_H=3,PH=2,AH=1,kH=10,TH=-2,yP=e=>e==="*";function EH(e,t){let n=e.split("/"),r=n.length;return n.some(yP)&&(r+=TH),t&&(r+=PH),n.filter(a=>!yP(a)).reduce((a,i)=>a+(CH.test(i)?_H:i===""?AH:kH),r)}function OH(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function DH(e,t,n){let{routesMeta:r}=e,a={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=jP({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!h&&u&&n&&!r[r.length-1].route.index&&(h=jP({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(a,h.params),o.push({params:a,pathname:_o([i,h.pathname]),pathnameBase:FH(_o([i,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(i=_o([i,h.pathnameBase]))}return o}function jP(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=MH(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:r.reduce((u,d,h)=>{let{paramName:m,isOptional:f}=d;if(m==="*"){let p=l[h]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const v=l[h];return f&&!v?u[m]=void 0:u[m]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function MH(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),A$(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function IH(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return A$(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function CS(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function $H(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?Ad(e):e;return{pathname:n?n.startsWith("/")?n:RH(n,t):t,search:BH(r),hash:zH(a)}}function RH(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function L0(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function LH(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function _S(e,t){let n=LH(e);return t?n.map((r,a)=>a===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function PS(e,t,n,r){r===void 0&&(r=!1);let a;typeof e=="string"?a=Ad(e):(a=bm({},e),wn(!a.pathname||!a.pathname.includes("?"),L0("?","pathname","search",a)),wn(!a.pathname||!a.pathname.includes("#"),L0("#","pathname","hash",a)),wn(!a.search||!a.search.includes("#"),L0("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=n;else{let h=t.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;a.pathname=m.join("/")}l=h>=0?t[h]:"/"}let c=$H(a,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const _o=e=>e.join("/").replace(/\/\/+/g,"/"),FH=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),BH=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,zH=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function VH(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const E$=["post","put","patch","delete"];new Set(E$);const qH=["get",...E$];new Set(qH);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wm(){return wm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wm.apply(this,arguments)}const AS=j.createContext(null),UH=j.createContext(null),Fo=j.createContext(null),kx=j.createContext(null),Bo=j.createContext({outlet:null,matches:[],isDataRoute:!1}),O$=j.createContext(null);function WH(e,t){let{relative:n}=t===void 0?{}:t;kd()||wn(!1);let{basename:r,navigator:a}=j.useContext(Fo),{hash:i,pathname:o,search:l}=M$(e,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:_o([r,o])),a.createHref({pathname:c,search:l,hash:i})}function kd(){return j.useContext(kx)!=null}function zo(){return kd()||wn(!1),j.useContext(kx).location}function D$(e){j.useContext(Fo).static||j.useLayoutEffect(e)}function Td(){let{isDataRoute:e}=j.useContext(Bo);return e?sK():HH()}function HH(){kd()||wn(!1);let e=j.useContext(AS),{basename:t,future:n,navigator:r}=j.useContext(Fo),{matches:a}=j.useContext(Bo),{pathname:i}=zo(),o=JSON.stringify(_S(a,n.v7_relativeSplatPath)),l=j.useRef(!1);return D$(()=>{l.current=!0}),j.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let h=PS(u,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:_o([t,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[t,r,o,i,e])}function M$(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=j.useContext(Fo),{matches:a}=j.useContext(Bo),{pathname:i}=zo(),o=JSON.stringify(_S(a,r.v7_relativeSplatPath));return j.useMemo(()=>PS(e,JSON.parse(o),i,n==="path"),[e,o,i,n])}function KH(e,t){return GH(e,t)}function GH(e,t,n,r){kd()||wn(!1);let{navigator:a}=j.useContext(Fo),{matches:i}=j.useContext(Bo),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=zo(),d;if(t){var h;let g=typeof t=="string"?Ad(t):t;c==="/"||(h=g.pathname)!=null&&h.startsWith(c)||wn(!1),d=g}else d=u;let m=d.pathname||"/",f=m;if(c!=="/"){let g=c.replace(/^\//,"").split("/");f="/"+m.replace(/^\//,"").split("/").slice(g.length).join("/")}let v=wH(e,{pathname:f}),p=ZH(v&&v.map(g=>Object.assign({},g,{params:Object.assign({},l,g.params),pathname:_o([c,a.encodeLocation?a.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?c:_o([c,a.encodeLocation?a.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),i,n,r);return t&&p?j.createElement(kx.Provider,{value:{location:wm({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:fo.Pop}},p):p}function YH(){let e=rK(),t=VH(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),n?j.createElement("pre",{style:a},n):null,null)}const QH=j.createElement(YH,null);class XH extends j.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?j.createElement(Bo.Provider,{value:this.props.routeContext},j.createElement(O$.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function JH(e){let{routeContext:t,match:n,children:r}=e,a=j.useContext(AS);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(Bo.Provider,{value:t},r)}function ZH(e,t,n,r){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(a=n)==null?void 0:a.errors;if(l!=null){let d=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);d>=0||wn(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let h=o[d];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=d),h.route.id){let{loaderData:m,errors:f}=n,v=h.route.loader&&m[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||v){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,h,m)=>{let f,v=!1,p=null,g=null;n&&(f=l&&h.route.id?l[h.route.id]:void 0,p=h.route.errorElement||QH,c&&(u<0&&m===0?(v=!0,g=null):u===m&&(v=!0,g=h.route.hydrateFallbackElement||null)));let x=t.concat(o.slice(0,m+1)),y=()=>{let b;return f?b=p:v?b=g:h.route.Component?b=j.createElement(h.route.Component,null):h.route.element?b=h.route.element:b=d,j.createElement(JH,{match:h,routeContext:{outlet:d,matches:x,isDataRoute:n!=null},children:b})};return n&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?j.createElement(XH,{location:n.location,revalidation:n.revalidation,component:p,error:f,children:y(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):y()},null)}var I$=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(I$||{}),Vg=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Vg||{});function eK(e){let t=j.useContext(AS);return t||wn(!1),t}function tK(e){let t=j.useContext(UH);return t||wn(!1),t}function nK(e){let t=j.useContext(Bo);return t||wn(!1),t}function $$(e){let t=nK(),n=t.matches[t.matches.length-1];return n.route.id||wn(!1),n.route.id}function rK(){var e;let t=j.useContext(O$),n=tK(Vg.UseRouteError),r=$$(Vg.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function sK(){let{router:e}=eK(I$.UseNavigateStable),t=$$(Vg.UseNavigateStable),n=j.useRef(!1);return D$(()=>{n.current=!0}),j.useCallback(function(a,i){i===void 0&&(i={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,wm({fromRouteId:t},i)))},[e,t])}function aK(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function ew(e){let{to:t,replace:n,state:r,relative:a}=e;kd()||wn(!1);let{future:i,static:o}=j.useContext(Fo),{matches:l}=j.useContext(Bo),{pathname:c}=zo(),u=Td(),d=PS(t,_S(l,i.v7_relativeSplatPath),c,a==="path"),h=JSON.stringify(d);return j.useEffect(()=>u(JSON.parse(h),{replace:n,state:r,relative:a}),[u,h,a,n,r]),null}function mn(e){wn(!1)}function iK(e){let{basename:t="/",children:n=null,location:r,navigationType:a=fo.Pop,navigator:i,static:o=!1,future:l}=e;kd()&&wn(!1);let c=t.replace(/^\/*/,"/"),u=j.useMemo(()=>({basename:c,navigator:i,static:o,future:wm({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof r=="string"&&(r=Ad(r));let{pathname:d="/",search:h="",hash:m="",state:f=null,key:v="default"}=r,p=j.useMemo(()=>{let g=CS(d,c);return g==null?null:{location:{pathname:g,search:h,hash:m,state:f,key:v},navigationType:a}},[c,d,h,m,f,v,a]);return p==null?null:j.createElement(Fo.Provider,{value:u},j.createElement(kx.Provider,{children:n,value:p}))}function oK(e){let{children:t,location:n}=e;return KH(tw(t),n)}new Promise(()=>{});function tw(e,t){t===void 0&&(t=[]);let n=[];return j.Children.forEach(e,(r,a)=>{if(!j.isValidElement(r))return;let i=[...t,a];if(r.type===j.Fragment){n.push.apply(n,tw(r.props.children,i));return}r.type!==mn&&wn(!1),!r.props.index||!r.props.children||wn(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=tw(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nw(){return nw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nw.apply(this,arguments)}function lK(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function cK(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function uK(e,t){return e.button===0&&(!t||t==="_self")&&!cK(e)}function rw(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(a=>[n,a]):[[n,r]])},[]))}function dK(e,t){let n=rw(e);return t&&t.forEach((r,a)=>{n.has(a)||t.getAll(a).forEach(i=>{n.append(a,i)})}),n}const hK=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],mK="6";try{window.__reactRouterVersion=mK}catch{}const fK="startTransition",bP=u1[fK];function pK(e){let{basename:t,children:n,future:r,window:a}=e,i=j.useRef();i.current==null&&(i.current=yH({window:a,v5Compat:!0}));let o=i.current,[l,c]=j.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=j.useCallback(h=>{u&&bP?bP(()=>c(h)):c(h)},[c,u]);return j.useLayoutEffect(()=>o.listen(d),[o,d]),j.useEffect(()=>aK(r),[r]),j.createElement(iK,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const gK=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",vK=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zs=j.forwardRef(function(t,n){let{onClick:r,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h}=t,m=lK(t,hK),{basename:f}=j.useContext(Fo),v,p=!1;if(typeof u=="string"&&vK.test(u)&&(v=u,gK))try{let b=new URL(window.location.href),C=u.startsWith("//")?new URL(b.protocol+u):new URL(u),w=CS(C.pathname,f);C.origin===b.origin&&w!=null?u=w+C.search+C.hash:p=!0}catch{}let g=WH(u,{relative:a}),x=xK(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:h});function y(b){r&&r(b),b.defaultPrevented||x(b)}return j.createElement("a",nw({},m,{href:v||g,onClick:p||i?r:y,ref:n,target:c}))});var wP;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(wP||(wP={}));var NP;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(NP||(NP={}));function xK(e,t){let{target:n,replace:r,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=Td(),u=zo(),d=M$(e,{relative:o});return j.useCallback(h=>{if(uK(h,n)){h.preventDefault();let m=r!==void 0?r:zg(u)===zg(d);c(e,{replace:m,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,r,a,n,e,i,o,l])}function yK(e){let t=j.useRef(rw(e)),n=j.useRef(!1),r=zo(),a=j.useMemo(()=>dK(r.search,n.current?null:t.current),[r.search]),i=Td(),o=j.useCallback((l,c)=>{const u=rw(typeof l=="function"?l(a):l);n.current=!0,i("?"+u,c)},[i,a]);return[a,o]}const kS=bf("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),R=j.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...a},i)=>{const o=r?_q:"button";return s.jsx(o,{className:De(kS({variant:t,size:n,className:e})),ref:i,...a})});R.displayName="Button";const R$=j.createContext(void 0);function jK({children:e}){const[t,n]=j.useState(()=>{const a=localStorage.getItem("theme");return a||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});j.useEffect(()=>{localStorage.setItem("theme",t);const a=document.documentElement;t==="dark"?a.classList.add("dark"):a.classList.remove("dark")},[t]);const r=()=>{n(a=>a==="light"?"dark":"light")};return s.jsx(R$.Provider,{value:{theme:t,setTheme:n,toggleTheme:r},children:e})}function L$(){const e=j.useContext(R$);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e}function SP(){const{theme:e,toggleTheme:t}=L$();return s.jsxs(R,{variant:"outline",size:"sm",onClick:t,className:"h-9 w-9 p-0",title:e==="light"?"Activer le mode sombre":"Activer le mode clair",children:[e==="light"?s.jsx(EU,{className:"h-4 w-4"}):s.jsx(IU,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:e==="light"?"Activer le mode sombre":"Activer le mode clair"})]})}var bK=j.createContext(void 0);function Tx(e){const t=j.useContext(bK);return e||t||"ltr"}var F0=0;function TS(){j.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??CP()),document.body.insertAdjacentElement("beforeend",e[1]??CP()),F0++,()=>{F0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),F0--}},[])}function CP(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var B0="focusScope.autoFocusOnMount",z0="focusScope.autoFocusOnUnmount",_P={bubbles:!1,cancelable:!0},wK="FocusScope",Ex=j.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=j.useState(null),u=Er(a),d=Er(i),h=j.useRef(null),m=xt(t,p=>c(p)),f=j.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;j.useEffect(()=>{if(r){let p=function(b){if(f.paused||!l)return;const C=b.target;l.contains(C)?h.current=C:Wi(h.current,{select:!0})},g=function(b){if(f.paused||!l)return;const C=b.relatedTarget;C!==null&&(l.contains(C)||Wi(h.current,{select:!0}))},x=function(b){if(document.activeElement===document.body)for(const w of b)w.removedNodes.length>0&&Wi(l)};document.addEventListener("focusin",p),document.addEventListener("focusout",g);const y=new MutationObserver(x);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",g),y.disconnect()}}},[r,l,f.paused]),j.useEffect(()=>{if(l){AP.add(f);const p=document.activeElement;if(!l.contains(p)){const x=new CustomEvent(B0,_P);l.addEventListener(B0,u),l.dispatchEvent(x),x.defaultPrevented||(NK(AK(F$(l)),{select:!0}),document.activeElement===p&&Wi(l))}return()=>{l.removeEventListener(B0,u),setTimeout(()=>{const x=new CustomEvent(z0,_P);l.addEventListener(z0,d),l.dispatchEvent(x),x.defaultPrevented||Wi(p??document.body,{select:!0}),l.removeEventListener(z0,d),AP.remove(f)},0)}}},[l,u,d,f]);const v=j.useCallback(p=>{if(!n&&!r||f.paused)return;const g=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,x=document.activeElement;if(g&&x){const y=p.currentTarget,[b,C]=SK(y);b&&C?!p.shiftKey&&x===C?(p.preventDefault(),n&&Wi(b,{select:!0})):p.shiftKey&&x===b&&(p.preventDefault(),n&&Wi(C,{select:!0})):x===y&&p.preventDefault()}},[n,r,f.paused]);return s.jsx(Ve.div,{tabIndex:-1,...o,ref:m,onKeyDown:v})});Ex.displayName=wK;function NK(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Wi(r,{select:t}),document.activeElement!==n)return}function SK(e){const t=F$(e),n=PP(t,e),r=PP(t.reverse(),e);return[n,r]}function F$(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function PP(e,t){for(const n of e)if(!CK(n,{upTo:t}))return n}function CK(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function _K(e){return e instanceof HTMLInputElement&&"select"in e}function Wi(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&_K(e)&&t&&e.select()}}var AP=PK();function PK(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=kP(e,t),e.unshift(t)},remove(t){var n;e=kP(e,t),(n=e[0])==null||n.resume()}}}function kP(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function AK(e){return e.filter(t=>t.tagName!=="A")}var V0="rovingFocusGroup.onEntryFocus",kK={bubbles:!1,cancelable:!0},Sf="RovingFocusGroup",[sw,B$,TK]=jx(Sf),[EK,Ox]=Yr(Sf,[TK]),[OK,DK]=EK(Sf),z$=j.forwardRef((e,t)=>s.jsx(sw.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(sw.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(MK,{...e,ref:t})})}));z$.displayName=Sf;var MK=j.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=e,m=j.useRef(null),f=xt(t,m),v=Tx(i),[p,g]=wi({prop:o,defaultProp:l??null,onChange:c,caller:Sf}),[x,y]=j.useState(!1),b=Er(u),C=B$(n),w=j.useRef(!1),[N,S]=j.useState(0);return j.useEffect(()=>{const _=m.current;if(_)return _.addEventListener(V0,b),()=>_.removeEventListener(V0,b)},[b]),s.jsx(OK,{scope:n,orientation:r,dir:v,loop:a,currentTabStopId:p,onItemFocus:j.useCallback(_=>g(_),[g]),onItemShiftTab:j.useCallback(()=>y(!0),[]),onFocusableItemAdd:j.useCallback(()=>S(_=>_+1),[]),onFocusableItemRemove:j.useCallback(()=>S(_=>_-1),[]),children:s.jsx(Ve.div,{tabIndex:x||N===0?-1:0,"data-orientation":r,...h,ref:f,style:{outline:"none",...e.style},onMouseDown:ke(e.onMouseDown,()=>{w.current=!0}),onFocus:ke(e.onFocus,_=>{const P=!w.current;if(_.target===_.currentTarget&&P&&!x){const A=new CustomEvent(V0,kK);if(_.currentTarget.dispatchEvent(A),!A.defaultPrevented){const E=C().filter(B=>B.focusable),k=E.find(B=>B.active),I=E.find(B=>B.id===p),U=[k,I,...E].filter(Boolean).map(B=>B.ref.current);U$(U,d)}}w.current=!1}),onBlur:ke(e.onBlur,()=>y(!1))})})}),V$="RovingFocusGroupItem",q$=j.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:i,children:o,...l}=e,c=Ra(),u=i||c,d=DK(V$,n),h=d.currentTabStopId===u,m=B$(n),{onFocusableItemAdd:f,onFocusableItemRemove:v,currentTabStopId:p}=d;return j.useEffect(()=>{if(r)return f(),()=>v()},[r,f,v]),s.jsx(sw.ItemSlot,{scope:n,id:u,focusable:r,active:a,children:s.jsx(Ve.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:ke(e.onMouseDown,g=>{r?d.onItemFocus(u):g.preventDefault()}),onFocus:ke(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:ke(e.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){d.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const x=RK(g,d.orientation,d.dir);if(x!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let b=m().filter(C=>C.focusable).map(C=>C.ref.current);if(x==="last")b.reverse();else if(x==="prev"||x==="next"){x==="prev"&&b.reverse();const C=b.indexOf(g.currentTarget);b=d.loop?LK(b,C+1):b.slice(C+1)}setTimeout(()=>U$(b))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:p!=null}):o})})});q$.displayName=V$;var IK={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function $K(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function RK(e,t,n){const r=$K(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return IK[r]}function U$(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function LK(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var W$=z$,H$=q$,FK=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},yc=new WeakMap,dp=new WeakMap,hp={},q0=0,K$=function(e){return e&&(e.host||K$(e.parentNode))},BK=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=K$(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},zK=function(e,t,n,r){var a=BK(t,Array.isArray(e)?e:[e]);hp[n]||(hp[n]=new WeakMap);var i=hp[n],o=[],l=new Set,c=new Set(a),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};a.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(m){if(l.has(m))d(m);else try{var f=m.getAttribute(r),v=f!==null&&f!=="false",p=(yc.get(m)||0)+1,g=(i.get(m)||0)+1;yc.set(m,p),i.set(m,g),o.push(m),p===1&&v&&dp.set(m,!0),g===1&&m.setAttribute(n,"true"),v||m.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",m,x)}})};return d(t),l.clear(),q0++,function(){o.forEach(function(h){var m=yc.get(h)-1,f=i.get(h)-1;yc.set(h,m),i.set(h,f),m||(dp.has(h)||h.removeAttribute(r),dp.delete(h)),f||h.removeAttribute(n)}),q0--,q0||(yc=new WeakMap,yc=new WeakMap,dp=new WeakMap,hp={})}},ES=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=FK(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),zK(r,a,n,"aria-hidden")):function(){return null}},_a=function(){return _a=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_a.apply(this,arguments)};function G$(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function VK(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var ag="right-scroll-bar-position",ig="width-before-scroll-bar",qK="with-scroll-bars-hidden",UK="--removed-body-scroll-bar-size";function U0(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function WK(e,t){var n=j.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=t,n.facade}var HK=typeof window<"u"?j.useLayoutEffect:j.useEffect,TP=new WeakMap;function KK(e,t){var n=WK(null,function(r){return e.forEach(function(a){return U0(a,r)})});return HK(function(){var r=TP.get(n);if(r){var a=new Set(r),i=new Set(e),o=n.current;a.forEach(function(l){i.has(l)||U0(l,null)}),i.forEach(function(l){a.has(l)||U0(l,o)})}TP.set(n,e)},[e]),n}function GK(e){return e}function YK(e,t){t===void 0&&(t=GK);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var o=t(i,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(i),o=n}var c=function(){var d=o;o=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),n}}}};return a}function QK(e){e===void 0&&(e={});var t=YK(null);return t.options=_a({async:!0,ssr:!1},e),t}var Y$=function(e){var t=e.sideCar,n=G$(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return j.createElement(r,_a({},n))};Y$.isSideCarExport=!0;function XK(e,t){return e.useMedium(t),Y$}var Q$=QK(),W0=function(){},Dx=j.forwardRef(function(e,t){var n=j.useRef(null),r=j.useState({onScrollCapture:W0,onWheelCapture:W0,onTouchMoveCapture:W0}),a=r[0],i=r[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,h=e.shards,m=e.sideCar,f=e.noRelative,v=e.noIsolation,p=e.inert,g=e.allowPinchZoom,x=e.as,y=x===void 0?"div":x,b=e.gapMode,C=G$(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=m,N=KK([n,t]),S=_a(_a({},C),a);return j.createElement(j.Fragment,null,d&&j.createElement(w,{sideCar:Q$,removeScrollBar:u,shards:h,noRelative:f,noIsolation:v,inert:p,setCallbacks:i,allowPinchZoom:!!g,lockRef:n,gapMode:b}),o?j.cloneElement(j.Children.only(l),_a(_a({},S),{ref:N})):j.createElement(y,_a({},S,{className:c,ref:N}),l))});Dx.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Dx.classNames={fullWidth:ig,zeroRight:ag};var JK=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function ZK(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=JK();return t&&e.setAttribute("nonce",t),e}function eG(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function tG(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var nG=function(){var e=0,t=null;return{add:function(n){e==0&&(t=ZK())&&(eG(t,n),tG(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},rG=function(){var e=nG();return function(t,n){j.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},X$=function(){var e=rG(),t=function(n){var r=n.styles,a=n.dynamic;return e(r,a),null};return t},sG={left:0,top:0,right:0,gap:0},H0=function(e){return parseInt(e||"",10)||0},aG=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[H0(n),H0(r),H0(a)]},iG=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return sG;var t=aG(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},oG=X$(),lu="data-scroll-locked",lG=function(e,t,n,r){var a=e.left,i=e.top,o=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(qK,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(lu,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ag,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(ig,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(ag," .").concat(ag,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(ig," .").concat(ig,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(lu,`] {
    `).concat(UK,": ").concat(l,`px;
  }
`)},EP=function(){var e=parseInt(document.body.getAttribute(lu)||"0",10);return isFinite(e)?e:0},cG=function(){j.useEffect(function(){return document.body.setAttribute(lu,(EP()+1).toString()),function(){var e=EP()-1;e<=0?document.body.removeAttribute(lu):document.body.setAttribute(lu,e.toString())}},[])},uG=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,a=r===void 0?"margin":r;cG();var i=j.useMemo(function(){return iG(a)},[a]);return j.createElement(oG,{styles:lG(i,!t,a,n?"":"!important")})},aw=!1;if(typeof window<"u")try{var mp=Object.defineProperty({},"passive",{get:function(){return aw=!0,!0}});window.addEventListener("test",mp,mp),window.removeEventListener("test",mp,mp)}catch{aw=!1}var jc=aw?{passive:!1}:!1,dG=function(e){return e.tagName==="TEXTAREA"},J$=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!dG(e)&&n[t]==="visible")},hG=function(e){return J$(e,"overflowY")},mG=function(e){return J$(e,"overflowX")},OP=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=Z$(e,r);if(a){var i=e4(e,r),o=i[1],l=i[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},fG=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},pG=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Z$=function(e,t){return e==="v"?hG(t):mG(t)},e4=function(e,t){return e==="v"?fG(t):pG(t)},gG=function(e,t){return e==="h"&&t==="rtl"?-1:1},vG=function(e,t,n,r,a){var i=gG(e,window.getComputedStyle(t).direction),o=i*r,l=n.target,c=t.contains(l),u=!1,d=o>0,h=0,m=0;do{if(!l)break;var f=e4(e,l),v=f[0],p=f[1],g=f[2],x=p-g-i*v;(v||x)&&Z$(e,l)&&(h+=x,m+=v);var y=l.parentNode;l=y&&y.nodeType===Node.DOCUMENT_FRAGMENT_NODE?y.host:y}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&(Math.abs(h)<1||!a)||!d&&(Math.abs(m)<1||!a))&&(u=!0),u},fp=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},DP=function(e){return[e.deltaX,e.deltaY]},MP=function(e){return e&&"current"in e?e.current:e},xG=function(e,t){return e[0]===t[0]&&e[1]===t[1]},yG=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},jG=0,bc=[];function bG(e){var t=j.useRef([]),n=j.useRef([0,0]),r=j.useRef(),a=j.useState(jG++)[0],i=j.useState(X$)[0],o=j.useRef(e);j.useEffect(function(){o.current=e},[e]),j.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var p=VK([e.lockRef.current],(e.shards||[]).map(MP),!0).filter(Boolean);return p.forEach(function(g){return g.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),p.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=j.useCallback(function(p,g){if("touches"in p&&p.touches.length===2||p.type==="wheel"&&p.ctrlKey)return!o.current.allowPinchZoom;var x=fp(p),y=n.current,b="deltaX"in p?p.deltaX:y[0]-x[0],C="deltaY"in p?p.deltaY:y[1]-x[1],w,N=p.target,S=Math.abs(b)>Math.abs(C)?"h":"v";if("touches"in p&&S==="h"&&N.type==="range")return!1;var _=OP(S,N);if(!_)return!0;if(_?w=S:(w=S==="v"?"h":"v",_=OP(S,N)),!_)return!1;if(!r.current&&"changedTouches"in p&&(b||C)&&(r.current=w),!w)return!0;var P=r.current||w;return vG(P,g,p,P==="h"?b:C,!0)},[]),c=j.useCallback(function(p){var g=p;if(!(!bc.length||bc[bc.length-1]!==i)){var x="deltaY"in g?DP(g):fp(g),y=t.current.filter(function(w){return w.name===g.type&&(w.target===g.target||g.target===w.shadowParent)&&xG(w.delta,x)})[0];if(y&&y.should){g.cancelable&&g.preventDefault();return}if(!y){var b=(o.current.shards||[]).map(MP).filter(Boolean).filter(function(w){return w.contains(g.target)}),C=b.length>0?l(g,b[0]):!o.current.noIsolation;C&&g.cancelable&&g.preventDefault()}}},[]),u=j.useCallback(function(p,g,x,y){var b={name:p,delta:g,target:x,should:y,shadowParent:wG(x)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(C){return C!==b})},1)},[]),d=j.useCallback(function(p){n.current=fp(p),r.current=void 0},[]),h=j.useCallback(function(p){u(p.type,DP(p),p.target,l(p,e.lockRef.current))},[]),m=j.useCallback(function(p){u(p.type,fp(p),p.target,l(p,e.lockRef.current))},[]);j.useEffect(function(){return bc.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",c,jc),document.addEventListener("touchmove",c,jc),document.addEventListener("touchstart",d,jc),function(){bc=bc.filter(function(p){return p!==i}),document.removeEventListener("wheel",c,jc),document.removeEventListener("touchmove",c,jc),document.removeEventListener("touchstart",d,jc)}},[]);var f=e.removeScrollBar,v=e.inert;return j.createElement(j.Fragment,null,v?j.createElement(i,{styles:yG(a)}):null,f?j.createElement(uG,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function wG(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const NG=XK(Q$,bG);var Mx=j.forwardRef(function(e,t){return j.createElement(Dx,_a({},e,{ref:t,sideCar:NG}))});Mx.classNames=Dx.classNames;var iw=["Enter"," "],SG=["ArrowDown","PageUp","Home"],t4=["ArrowUp","PageDown","End"],CG=[...SG,...t4],_G={ltr:[...iw,"ArrowRight"],rtl:[...iw,"ArrowLeft"]},PG={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Cf="Menu",[Nm,AG,kG]=jx(Cf),[oc,n4]=Yr(Cf,[kG,_d,Ox]),Ix=_d(),r4=Ox(),[TG,lc]=oc(Cf),[EG,_f]=oc(Cf),s4=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:a,onOpenChange:i,modal:o=!0}=e,l=Ix(t),[c,u]=j.useState(null),d=j.useRef(!1),h=Er(i),m=Tx(a);return j.useEffect(()=>{const f=()=>{d.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>d.current=!1;return document.addEventListener("keydown",f,{capture:!0}),()=>{document.removeEventListener("keydown",f,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),s.jsx(o$,{...l,children:s.jsx(TG,{scope:t,open:n,onOpenChange:h,content:c,onContentChange:u,children:s.jsx(EG,{scope:t,onClose:j.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:m,modal:o,children:r})})})};s4.displayName=Cf;var OG="MenuAnchor",OS=j.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=Ix(n);return s.jsx(vS,{...a,...r,ref:t})});OS.displayName=OG;var DS="MenuPortal",[DG,a4]=oc(DS,{forceMount:void 0}),i4=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:a}=e,i=lc(DS,t);return s.jsx(DG,{scope:t,forceMount:n,children:s.jsx(Is,{present:n||i.open,children:s.jsx(yf,{asChild:!0,container:a,children:r})})})};i4.displayName=DS;var Ts="MenuContent",[MG,MS]=oc(Ts),o4=j.forwardRef((e,t)=>{const n=a4(Ts,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=lc(Ts,e.__scopeMenu),o=_f(Ts,e.__scopeMenu);return s.jsx(Nm.Provider,{scope:e.__scopeMenu,children:s.jsx(Is,{present:r||i.open,children:s.jsx(Nm.Slot,{scope:e.__scopeMenu,children:o.modal?s.jsx(IG,{...a,ref:t}):s.jsx($G,{...a,ref:t})})})})}),IG=j.forwardRef((e,t)=>{const n=lc(Ts,e.__scopeMenu),r=j.useRef(null),a=xt(t,r);return j.useEffect(()=>{const i=r.current;if(i)return ES(i)},[]),s.jsx(IS,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ke(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),$G=j.forwardRef((e,t)=>{const n=lc(Ts,e.__scopeMenu);return s.jsx(IS,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),RG=zl("MenuContent.ScrollLock"),IS=j.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:f,disableOutsideScroll:v,...p}=e,g=lc(Ts,n),x=_f(Ts,n),y=Ix(n),b=r4(n),C=AG(n),[w,N]=j.useState(null),S=j.useRef(null),_=xt(t,S,g.onContentChange),P=j.useRef(0),A=j.useRef(""),E=j.useRef(0),k=j.useRef(null),I=j.useRef("right"),D=j.useRef(0),U=v?Mx:j.Fragment,B=v?{as:RG,allowPinchZoom:!0}:void 0,K=$=>{var ce,re;const G=A.current+$,Q=C().filter(V=>!V.disabled),ne=document.activeElement,oe=(ce=Q.find(V=>V.ref.current===ne))==null?void 0:ce.textValue,M=Q.map(V=>V.textValue),ue=YG(M,G,oe),ve=(re=Q.find(V=>V.textValue===ue))==null?void 0:re.ref.current;(function V(le){A.current=le,window.clearTimeout(P.current),le!==""&&(P.current=window.setTimeout(()=>V(""),1e3))})(G),ve&&setTimeout(()=>ve.focus())};j.useEffect(()=>()=>window.clearTimeout(P.current),[]),TS();const T=j.useCallback($=>{var Q,ne;return I.current===((Q=k.current)==null?void 0:Q.side)&&XG($,(ne=k.current)==null?void 0:ne.area)},[]);return s.jsx(MG,{scope:n,searchRef:A,onItemEnter:j.useCallback($=>{T($)&&$.preventDefault()},[T]),onItemLeave:j.useCallback($=>{var G;T($)||((G=S.current)==null||G.focus(),N(null))},[T]),onTriggerLeave:j.useCallback($=>{T($)&&$.preventDefault()},[T]),pointerGraceTimerRef:E,onPointerGraceIntentChange:j.useCallback($=>{k.current=$},[]),children:s.jsx(U,{...B,children:s.jsx(Ex,{asChild:!0,trapped:a,onMountAutoFocus:ke(i,$=>{var G;$.preventDefault(),(G=S.current)==null||G.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:s.jsx(jd,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:f,children:s.jsx(W$,{asChild:!0,...b,dir:x.dir,orientation:"vertical",loop:r,currentTabStopId:w,onCurrentTabStopIdChange:N,onEntryFocus:ke(c,$=>{x.isUsingKeyboardRef.current||$.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(xS,{role:"menu","aria-orientation":"vertical","data-state":N4(g.open),"data-radix-menu-content":"",dir:x.dir,...y,...p,ref:_,style:{outline:"none",...p.style},onKeyDown:ke(p.onKeyDown,$=>{const Q=$.target.closest("[data-radix-menu-content]")===$.currentTarget,ne=$.ctrlKey||$.altKey||$.metaKey,oe=$.key.length===1;Q&&($.key==="Tab"&&$.preventDefault(),!ne&&oe&&K($.key));const M=S.current;if($.target!==M||!CG.includes($.key))return;$.preventDefault();const ve=C().filter(ce=>!ce.disabled).map(ce=>ce.ref.current);t4.includes($.key)&&ve.reverse(),KG(ve)}),onBlur:ke(e.onBlur,$=>{$.currentTarget.contains($.target)||(window.clearTimeout(P.current),A.current="")}),onPointerMove:ke(e.onPointerMove,Sm($=>{const G=$.target,Q=D.current!==$.clientX;if($.currentTarget.contains(G)&&Q){const ne=$.clientX>D.current?"right":"left";I.current=ne,D.current=$.clientX}}))})})})})})})});o4.displayName=Ts;var LG="MenuGroup",$S=j.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(Ve.div,{role:"group",...r,ref:t})});$S.displayName=LG;var FG="MenuLabel",l4=j.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(Ve.div,{...r,ref:t})});l4.displayName=FG;var qg="MenuItem",IP="menu.itemSelect",$x=j.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...a}=e,i=j.useRef(null),o=_f(qg,e.__scopeMenu),l=MS(qg,e.__scopeMenu),c=xt(t,i),u=j.useRef(!1),d=()=>{const h=i.current;if(!n&&h){const m=new CustomEvent(IP,{bubbles:!0,cancelable:!0});h.addEventListener(IP,f=>r==null?void 0:r(f),{once:!0}),tS(h,m),m.defaultPrevented?u.current=!1:o.onClose()}};return s.jsx(c4,{...a,ref:c,disabled:n,onClick:ke(e.onClick,d),onPointerDown:h=>{var m;(m=e.onPointerDown)==null||m.call(e,h),u.current=!0},onPointerUp:ke(e.onPointerUp,h=>{var m;u.current||(m=h.currentTarget)==null||m.click()}),onKeyDown:ke(e.onKeyDown,h=>{const m=l.searchRef.current!=="";n||m&&h.key===" "||iw.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});$x.displayName=qg;var c4=j.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...i}=e,o=MS(qg,n),l=r4(n),c=j.useRef(null),u=xt(t,c),[d,h]=j.useState(!1),[m,f]=j.useState("");return j.useEffect(()=>{const v=c.current;v&&f((v.textContent??"").trim())},[i.children]),s.jsx(Nm.ItemSlot,{scope:n,disabled:r,textValue:a??m,children:s.jsx(H$,{asChild:!0,...l,focusable:!r,children:s.jsx(Ve.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:u,onPointerMove:ke(e.onPointerMove,Sm(v=>{r?o.onItemLeave(v):(o.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ke(e.onPointerLeave,Sm(v=>o.onItemLeave(v))),onFocus:ke(e.onFocus,()=>h(!0)),onBlur:ke(e.onBlur,()=>h(!1))})})})}),BG="MenuCheckboxItem",u4=j.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...a}=e;return s.jsx(p4,{scope:e.__scopeMenu,checked:n,children:s.jsx($x,{role:"menuitemcheckbox","aria-checked":Ug(n)?"mixed":n,...a,ref:t,"data-state":LS(n),onSelect:ke(a.onSelect,()=>r==null?void 0:r(Ug(n)?!0:!n),{checkForDefaultPrevented:!1})})})});u4.displayName=BG;var d4="MenuRadioGroup",[zG,VG]=oc(d4,{value:void 0,onValueChange:()=>{}}),h4=j.forwardRef((e,t)=>{const{value:n,onValueChange:r,...a}=e,i=Er(r);return s.jsx(zG,{scope:e.__scopeMenu,value:n,onValueChange:i,children:s.jsx($S,{...a,ref:t})})});h4.displayName=d4;var m4="MenuRadioItem",f4=j.forwardRef((e,t)=>{const{value:n,...r}=e,a=VG(m4,e.__scopeMenu),i=n===a.value;return s.jsx(p4,{scope:e.__scopeMenu,checked:i,children:s.jsx($x,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":LS(i),onSelect:ke(r.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,n)},{checkForDefaultPrevented:!1})})})});f4.displayName=m4;var RS="MenuItemIndicator",[p4,qG]=oc(RS,{checked:!1}),g4=j.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...a}=e,i=qG(RS,n);return s.jsx(Is,{present:r||Ug(i.checked)||i.checked===!0,children:s.jsx(Ve.span,{...a,ref:t,"data-state":LS(i.checked)})})});g4.displayName=RS;var UG="MenuSeparator",v4=j.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(Ve.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});v4.displayName=UG;var WG="MenuArrow",x4=j.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=Ix(n);return s.jsx(yS,{...a,...r,ref:t})});x4.displayName=WG;var HG="MenuSub",[vTe,y4]=oc(HG),kh="MenuSubTrigger",j4=j.forwardRef((e,t)=>{const n=lc(kh,e.__scopeMenu),r=_f(kh,e.__scopeMenu),a=y4(kh,e.__scopeMenu),i=MS(kh,e.__scopeMenu),o=j.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,u={__scopeMenu:e.__scopeMenu},d=j.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return j.useEffect(()=>d,[d]),j.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),s.jsx(OS,{asChild:!0,...u,children:s.jsx(c4,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":N4(n.open),...e,ref:yx(t,a.onTriggerChange),onClick:h=>{var m;(m=e.onClick)==null||m.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ke(e.onPointerMove,Sm(h=>{i.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:ke(e.onPointerLeave,Sm(h=>{var f,v;d();const m=(f=n.content)==null?void 0:f.getBoundingClientRect();if(m){const p=(v=n.content)==null?void 0:v.dataset.side,g=p==="right",x=g?-5:5,y=m[g?"left":"right"],b=m[g?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+x,y:h.clientY},{x:y,y:m.top},{x:b,y:m.top},{x:b,y:m.bottom},{x:y,y:m.bottom}],side:p}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:ke(e.onKeyDown,h=>{var f;const m=i.searchRef.current!=="";e.disabled||m&&h.key===" "||_G[r.dir].includes(h.key)&&(n.onOpenChange(!0),(f=n.content)==null||f.focus(),h.preventDefault())})})})});j4.displayName=kh;var b4="MenuSubContent",w4=j.forwardRef((e,t)=>{const n=a4(Ts,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=lc(Ts,e.__scopeMenu),o=_f(Ts,e.__scopeMenu),l=y4(b4,e.__scopeMenu),c=j.useRef(null),u=xt(t,c);return s.jsx(Nm.Provider,{scope:e.__scopeMenu,children:s.jsx(Is,{present:r||i.open,children:s.jsx(Nm.Slot,{scope:e.__scopeMenu,children:s.jsx(IS,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:ke(e.onFocusOutside,d=>{d.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:ke(e.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:ke(e.onKeyDown,d=>{var f;const h=d.currentTarget.contains(d.target),m=PG[o.dir].includes(d.key);h&&m&&(i.onOpenChange(!1),(f=l.trigger)==null||f.focus(),d.preventDefault())})})})})})});w4.displayName=b4;function N4(e){return e?"open":"closed"}function Ug(e){return e==="indeterminate"}function LS(e){return Ug(e)?"indeterminate":e?"checked":"unchecked"}function KG(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function GG(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function YG(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=GG(e,Math.max(i,0));a.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function QG(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],u=l.x,d=l.y,h=c.x,m=c.y;d>r!=m>r&&n<(h-u)*(r-d)/(m-d)+u&&(a=!a)}return a}function XG(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return QG(n,t)}function Sm(e){return t=>t.pointerType==="mouse"?e(t):void 0}var JG=s4,ZG=OS,eY=i4,tY=o4,nY=$S,rY=l4,sY=$x,aY=u4,iY=h4,oY=f4,lY=g4,cY=v4,uY=x4,dY=j4,hY=w4,Rx="DropdownMenu",[mY,xTe]=Yr(Rx,[n4]),Mr=n4(),[fY,S4]=mY(Rx),C4=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:a,defaultOpen:i,onOpenChange:o,modal:l=!0}=e,c=Mr(t),u=j.useRef(null),[d,h]=wi({prop:a,defaultProp:i??!1,onChange:o,caller:Rx});return s.jsx(fY,{scope:t,triggerId:Ra(),triggerRef:u,contentId:Ra(),open:d,onOpenChange:h,onOpenToggle:j.useCallback(()=>h(m=>!m),[h]),modal:l,children:s.jsx(JG,{...c,open:d,onOpenChange:h,dir:r,modal:l,children:n})})};C4.displayName=Rx;var _4="DropdownMenuTrigger",P4=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...a}=e,i=S4(_4,n),o=Mr(n);return s.jsx(ZG,{asChild:!0,...o,children:s.jsx(Ve.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:yx(t,i.triggerRef),onPointerDown:ke(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:ke(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});P4.displayName=_4;var pY="DropdownMenuPortal",A4=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Mr(t);return s.jsx(eY,{...r,...n})};A4.displayName=pY;var k4="DropdownMenuContent",T4=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=S4(k4,n),i=Mr(n),o=j.useRef(!1);return s.jsx(tY,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...r,ref:t,onCloseAutoFocus:ke(e.onCloseAutoFocus,l=>{var c;o.current||(c=a.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:ke(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!a.modal||d)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});T4.displayName=k4;var gY="DropdownMenuGroup",vY=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Mr(n);return s.jsx(nY,{...a,...r,ref:t})});vY.displayName=gY;var xY="DropdownMenuLabel",E4=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Mr(n);return s.jsx(rY,{...a,...r,ref:t})});E4.displayName=xY;var yY="DropdownMenuItem",O4=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Mr(n);return s.jsx(sY,{...a,...r,ref:t})});O4.displayName=yY;var jY="DropdownMenuCheckboxItem",D4=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Mr(n);return s.jsx(aY,{...a,...r,ref:t})});D4.displayName=jY;var bY="DropdownMenuRadioGroup",wY=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Mr(n);return s.jsx(iY,{...a,...r,ref:t})});wY.displayName=bY;var NY="DropdownMenuRadioItem",M4=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Mr(n);return s.jsx(oY,{...a,...r,ref:t})});M4.displayName=NY;var SY="DropdownMenuItemIndicator",I4=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Mr(n);return s.jsx(lY,{...a,...r,ref:t})});I4.displayName=SY;var CY="DropdownMenuSeparator",$4=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Mr(n);return s.jsx(cY,{...a,...r,ref:t})});$4.displayName=CY;var _Y="DropdownMenuArrow",PY=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Mr(n);return s.jsx(uY,{...a,...r,ref:t})});PY.displayName=_Y;var AY="DropdownMenuSubTrigger",R4=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Mr(n);return s.jsx(dY,{...a,...r,ref:t})});R4.displayName=AY;var kY="DropdownMenuSubContent",L4=j.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Mr(n);return s.jsx(hY,{...a,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});L4.displayName=kY;var TY=C4,EY=P4,OY=A4,F4=T4,B4=E4,z4=O4,V4=D4,q4=M4,U4=I4,W4=$4,H4=R4,K4=L4;const DY=TY,MY=EY,IY=j.forwardRef(({className:e,inset:t,children:n,...r},a)=>s.jsxs(H4,{ref:a,className:De("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[n,s.jsx(wU,{className:"ml-auto h-4 w-4"})]}));IY.displayName=H4.displayName;const $Y=j.forwardRef(({className:e,...t},n)=>s.jsx(K4,{ref:n,className:De("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));$Y.displayName=K4.displayName;const G4=j.forwardRef(({className:e,sideOffset:t=4,...n},r)=>s.jsx(OY,{children:s.jsx(F4,{ref:r,sideOffset:t,className:De("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));G4.displayName=F4.displayName;const ow=j.forwardRef(({className:e,inset:t,...n},r)=>s.jsx(z4,{ref:r,className:De("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));ow.displayName=z4.displayName;const RY=j.forwardRef(({className:e,children:t,checked:n,...r},a)=>s.jsxs(V4,{ref:a,className:De("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(U4,{children:s.jsx(aS,{className:"h-4 w-4"})})}),t]}));RY.displayName=V4.displayName;const LY=j.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(q4,{ref:r,className:De("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(U4,{children:s.jsx(SU,{className:"h-2 w-2 fill-current"})})}),t]}));LY.displayName=q4.displayName;const Y4=j.forwardRef(({className:e,inset:t,...n},r)=>s.jsx(B4,{ref:r,className:De("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));Y4.displayName=B4.displayName;const lw=j.forwardRef(({className:e,...t},n)=>s.jsx(W4,{ref:n,className:De("-mx-1 my-1 h-px bg-muted",e),...t}));lw.displayName=W4.displayName;var Q4={exports:{}},X4={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bu=j;function FY(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var BY=typeof Object.is=="function"?Object.is:FY,zY=Bu.useState,VY=Bu.useEffect,qY=Bu.useLayoutEffect,UY=Bu.useDebugValue;function WY(e,t){var n=t(),r=zY({inst:{value:n,getSnapshot:t}}),a=r[0].inst,i=r[1];return qY(function(){a.value=n,a.getSnapshot=t,K0(a)&&i({inst:a})},[e,n,t]),VY(function(){return K0(a)&&i({inst:a}),e(function(){K0(a)&&i({inst:a})})},[e]),UY(n),n}function K0(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!BY(e,n)}catch{return!0}}function HY(e,t){return t()}var KY=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?HY:WY;X4.useSyncExternalStore=Bu.useSyncExternalStore!==void 0?Bu.useSyncExternalStore:KY;Q4.exports=X4;var GY=Q4.exports;function YY(){return GY.useSyncExternalStore(QY,()=>!0,()=>!1)}function QY(){return()=>{}}var FS="Avatar",[XY,yTe]=Yr(FS),[JY,J4]=XY(FS),Z4=j.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[a,i]=j.useState("idle");return s.jsx(JY,{scope:n,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:s.jsx(Ve.span,{...r,ref:t})})});Z4.displayName=FS;var eR="AvatarImage",tR=j.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:a=()=>{},...i}=e,o=J4(eR,n),l=ZY(r,i),c=Er(u=>{a(u),o.onImageLoadingStatusChange(u)});return Tn(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?s.jsx(Ve.img,{...i,ref:t,src:r}):null});tR.displayName=eR;var nR="AvatarFallback",rR=j.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...a}=e,i=J4(nR,n),[o,l]=j.useState(r===void 0);return j.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&i.imageLoadingStatus!=="loaded"?s.jsx(Ve.span,{...a,ref:t}):null});rR.displayName=nR;function $P(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function ZY(e,{referrerPolicy:t,crossOrigin:n}){const r=YY(),a=j.useRef(null),i=r?(a.current||(a.current=new window.Image),a.current):null,[o,l]=j.useState(()=>$P(i,e));return Tn(()=>{l($P(i,e))},[i,e]),Tn(()=>{const c=h=>()=>{l(h)};if(!i)return;const u=c("loaded"),d=c("error");return i.addEventListener("load",u),i.addEventListener("error",d),t&&(i.referrerPolicy=t),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",u),i.removeEventListener("error",d)}},[i,n,t]),o}var sR=Z4,aR=tR,iR=rR;const Jn=j.forwardRef(({className:e,...t},n)=>s.jsx(sR,{ref:n,className:De("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));Jn.displayName=sR.displayName;const zu=j.forwardRef(({className:e,...t},n)=>s.jsx(aR,{ref:n,className:De("aspect-square h-full w-full",e),...t}));zu.displayName=aR.displayName;const Zn=j.forwardRef(({className:e,...t},n)=>s.jsx(iR,{ref:n,className:De("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));Zn.displayName=iR.displayName;const eQ="modulepreload",tQ=function(e){return"/"+e},RP={},Pf=function(t,n,r){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(n.map(c=>{if(c=tQ(c),c in RP)return;RP[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":eQ,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((m,f)=>{h.addEventListener("load",m),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},nQ=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Pf(async()=>{const{default:r}=await Promise.resolve().then(()=>Ed);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class BS extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class rQ extends BS{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class LP extends BS{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class FP extends BS{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var cw;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(cw||(cw={}));var sQ=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class aQ{constructor(t,{headers:n={},customFetch:r,region:a=cw.Any}={}){this.url=t,this.headers=n,this.region=a,this.fetch=nQ(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return sQ(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:o}=n;let l={},{region:c}=n;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const h=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:d}).catch(p=>{throw new rQ(p)}),m=h.headers.get("x-relay-error");if(m&&m==="true")throw new LP(h);if(!h.ok)throw new FP(h);let f=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),v;return f==="application/json"?v=yield h.json():f==="application/octet-stream"?v=yield h.blob():f==="text/event-stream"?v=h:f==="multipart/form-data"?v=yield h.formData():v=yield h.text(),{data:v,error:null,response:h}}catch(a){return{data:null,error:a,response:a instanceof FP||a instanceof LP?a.context:void 0}}})}}var qr={},zS={},Lx={},Af={},Fx={},Bx={},iQ=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Vu=iQ();const oQ=Vu.fetch,oR=Vu.fetch.bind(Vu),lR=Vu.Headers,lQ=Vu.Request,cQ=Vu.Response,Ed=Object.freeze(Object.defineProperty({__proto__:null,Headers:lR,Request:lQ,Response:cQ,default:oR,fetch:oQ},Symbol.toStringTag,{value:"Module"})),uQ=KB(Ed);var zx={};Object.defineProperty(zx,"__esModule",{value:!0});let dQ=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};zx.default=dQ;var cR=vr&&vr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bx,"__esModule",{value:!0});const hQ=cR(uQ),mQ=cR(zx);let fQ=class{constructor(t){var n,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(n=t.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=hQ.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=new Headers(this.headers),this.headers.set(t,n),this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let a=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c,u;let d=null,h=null,m=null,f=i.status,v=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=y:h=JSON.parse(y))}const g=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),x=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");g&&x&&x.length>1&&(m=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,m=null,f=406,v="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const g=await i.text();try{d=JSON.parse(g),Array.isArray(d)&&i.status===404&&(h=[],d=null,f=200,v="OK")}catch{i.status===404&&g===""?(f=204,v="No Content"):d={message:g}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,f=200,v="OK"),d&&this.shouldThrowOnError)throw new mQ.default(d)}return{error:d,data:h,count:m,status:f,statusText:v}});return this.shouldThrowOnError||(a=a.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,n)}returns(){return this}overrideTypes(){return this}};Bx.default=fQ;var pQ=vr&&vr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fx,"__esModule",{value:!0});const gQ=pQ(Bx);let vQ=class extends gQ.default{select(t){let n=!1;const r=(t??"*").split("").map(a=>/\s/.test(a)&&!n?"":(a==='"'&&(n=!n),a)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:a,referencedTable:i=a}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:a=r}={}){const i=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:a=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Fx.default=vQ;var xQ=vr&&vr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Af,"__esModule",{value:!0});const yQ=xQ(Fx);let jQ=class extends yQ.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${o}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const a=r?`${r}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};Af.default=jQ;var bQ=vr&&vr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Lx,"__esModule",{value:!0});const uh=bQ(Af);let wQ=class{constructor(t,{headers:n={},schema:r,fetch:a}){this.url=t,this.headers=new Headers(n),this.schema=r,this.fetch=a}select(t,{head:n=!1,count:r}={}){const a=n?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new uh.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:n,defaultToNull:r=!0}={}){var a;const i="POST";if(n&&this.headers.append("Prefer",`count=${n}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new uh.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:a,defaultToNull:i=!0}={}){var o;const l="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),n!==void 0&&this.url.searchParams.set("on_conflict",n),a&&this.headers.append("Prefer",`count=${a}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new uh.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:n}={}){var r;const a="PATCH";return n&&this.headers.append("Prefer",`count=${n}`),new uh.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var n;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new uh.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};Lx.default=wQ;var uR=vr&&vr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zS,"__esModule",{value:!0});const NQ=uR(Lx),SQ=uR(Af);let CQ=class dR{constructor(t,{headers:n={},schema:r,fetch:a}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=a}from(t){const n=new URL(`${this.url}/${t}`);return new NQ.default(n,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new dR(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:a=!1,count:i}={}){var o;let l;const c=new URL(`${this.url}/rpc/${t}`);let u;r||a?(l=r?"HEAD":"GET",Object.entries(n).filter(([h,m])=>m!==void 0).map(([h,m])=>[h,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([h,m])=>{c.searchParams.append(h,m)})):(l="POST",u=n);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new SQ.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};zS.default=CQ;var Od=vr&&vr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qr,"__esModule",{value:!0});qr.PostgrestError=qr.PostgrestBuilder=qr.PostgrestTransformBuilder=qr.PostgrestFilterBuilder=qr.PostgrestQueryBuilder=qr.PostgrestClient=void 0;const hR=Od(zS);qr.PostgrestClient=hR.default;const mR=Od(Lx);qr.PostgrestQueryBuilder=mR.default;const fR=Od(Af);qr.PostgrestFilterBuilder=fR.default;const pR=Od(Fx);qr.PostgrestTransformBuilder=pR.default;const gR=Od(Bx);qr.PostgrestBuilder=gR.default;const vR=Od(zx);qr.PostgrestError=vR.default;var _Q=qr.default={PostgrestClient:hR.default,PostgrestQueryBuilder:mR.default,PostgrestFilterBuilder:fR.default,PostgrestTransformBuilder:pR.default,PostgrestBuilder:gR.default,PostgrestError:vR.default};const{PostgrestClient:PQ,PostgrestQueryBuilder:CTe,PostgrestFilterBuilder:_Te,PostgrestTransformBuilder:PTe,PostgrestBuilder:ATe,PostgrestError:kTe}=_Q;class AQ{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,a=parseInt(r.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){const r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const kQ="2.15.5",TQ=`realtime-js/${kQ}`,EQ="1.0.0",uw=1e4,OQ=1e3,DQ=100;var qh;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(qh||(qh={}));var Dn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Dn||(Dn={}));var Ys;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ys||(Ys={}));var dw;(function(e){e.websocket="websocket"})(dw||(dw={}));var ul;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ul||(ul={}));class MQ{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const a=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const l=r.decode(t.slice(o,o+a));o=o+a;const c=r.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class xR{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Wt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Wt||(Wt={}));const BP=(e,t,n={})=>{var r;const a=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((i,o)=>(i[o]=IQ(o,e,t,a),i),{})},IQ=(e,t,n,r)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,o=n[e];return i&&!r.includes(i)?yR(i,o):hw(o)},yR=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return FQ(t,n)}switch(e){case Wt.bool:return $Q(t);case Wt.float4:case Wt.float8:case Wt.int2:case Wt.int4:case Wt.int8:case Wt.numeric:case Wt.oid:return RQ(t);case Wt.json:case Wt.jsonb:return LQ(t);case Wt.timestamp:return BQ(t);case Wt.abstime:case Wt.date:case Wt.daterange:case Wt.int4range:case Wt.int8range:case Wt.money:case Wt.reltime:case Wt.text:case Wt.time:case Wt.timestamptz:case Wt.timetz:case Wt.tsrange:case Wt.tstzrange:return hw(t);default:return hw(t)}},hw=e=>e,$Q=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},RQ=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},LQ=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},FQ=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const o=e.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>yR(t,l))}return e},BQ=e=>typeof e=="string"?e.replace(" ","T"):e,jR=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class G0{constructor(t,n,r={},a=uw){this.channel=t,this.event=n,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var zP;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(zP||(zP={}));class Uh{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Uh.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=Uh.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Uh.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,a){const i=this.cloneDeep(t),o=this.transformState(n),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const m=d.map(g=>g.presence_ref),f=h.map(g=>g.presence_ref),v=d.filter(g=>f.indexOf(g.presence_ref)<0),p=h.filter(g=>m.indexOf(g.presence_ref)<0);v.length>0&&(l[u]=v),p.length>0&&(c[u]=p)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},r,a)}static syncDiff(t,n,r,a){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(f=>f.presence_ref),m=d.filter(f=>h.indexOf(f.presence_ref)<0);t[l].unshift(...m)}r(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,a(l,u,c),u.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const a=t[r];return"metas"in a?n[r]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=a,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var VP;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(VP||(VP={}));var Wh;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Wh||(Wh={}));var ti;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ti||(ti={}));class VS{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Dn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new G0(this,Ys.join,this.params,this.timeout),this.rejoinTimer=new xR(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Dn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Dn.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Dn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Dn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Dn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ys.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new Uh(this),this.broadcastEndpointURL=jR(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Dn.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&a!==void 0?a:[],d=!!this.bindings[Wh.PRESENCE]&&this.bindings[Wh.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},m={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(f=>t==null?void 0:t(ti.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(ti.CLOSED)),this.updateJoinPayload(Object.assign({config:m},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:f})=>{var v;if(this.socket.setAuth(),f===void 0){t==null||t(ti.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,g=(v=p==null?void 0:p.length)!==null&&v!==void 0?v:0,x=[];for(let y=0;y<g;y++){const b=p[y],{filter:{event:C,schema:w,table:N,filter:S}}=b,_=f&&f[y];if(_&&_.event===C&&_.schema===w&&_.table===N&&_.filter===S)x.push(Object.assign(Object.assign({},b),{id:_.id}));else{this.unsubscribe(),this.state=Dn.errored,t==null||t(ti.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(ti.SUBSCRIBED);return}}).receive("error",f=>{this.state=Dn.errored,t==null||t(ti.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ti.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===Dn.joined&&t===Wh.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,n,r)}async send(t,n={}){var r,a;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Dn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ys.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(a=>{r=new G0(this,Ys.leave,{},t),r.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Dn.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){const a=new AbortController,i=setTimeout(()=>a.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(i),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new G0(this,t,n,r);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>DQ){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Ys;if(r&&[l,c,u,d].indexOf(o)>=0&&r!==this._joinRef())return;let m=this._onMessage(o,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(f=>{var v,p,g;return((v=f.filter)===null||v===void 0?void 0:v.event)==="*"||((g=(p=f.filter)===null||p===void 0?void 0:p.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===o}).map(f=>f.callback(m,r)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var v,p,g,x,y,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const C=f.id,w=(v=f.filter)===null||v===void 0?void 0:v.event;return C&&((p=n.ids)===null||p===void 0?void 0:p.includes(C))&&(w==="*"||(w==null?void 0:w.toLocaleLowerCase())===((g=n.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const C=(y=(x=f==null?void 0:f.filter)===null||x===void 0?void 0:x.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return C==="*"||C===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof m=="object"&&"ids"in m){const v=m.data,{schema:p,table:g,commit_timestamp:x,type:y,errors:b}=v;m=Object.assign(Object.assign({},{schema:p,table:g,commit_timestamp:x,eventType:y,new:{},old:{},errors:b}),this._getPayloadRecords(v))}f.callback(m,r)})}_isClosed(){return this.state===Dn.closed}_isJoined(){return this.state===Dn.joined}_isJoining(){return this.state===Dn.joining}_isLeaving(){return this.state===Dn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const a=t.toLocaleLowerCase(),i={type:a,filter:n,callback:r};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&VS.isEqual(a.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ys.close,{},t)}_onError(t){this._on(Ys.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Dn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=BP(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=BP(t.columns,t.old_record)),n}}const Y0=()=>{},pp={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},zQ=[1e3,2e3,5e3,1e4],VQ=1e4,qQ=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class UQ{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=uw,this.transport=null,this.heartbeatIntervalMs=pp.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Y0,this.ref=0,this.reconnectTimer=null,this.logger=Y0,this.conn=null,this.sendBuffer=[],this.serializer=new MQ,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let i;return a?i=a:typeof fetch>"u"?i=(...o)=>Pf(async()=>{const{default:l}=await Promise.resolve().then(()=>Ed);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${dw.websocket}`,this.httpEndpoint=jR(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=AQ.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:EQ}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case qh.connecting:return ul.Connecting;case qh.open:return ul.Open;case qh.closing:return ul.Closing;default:return ul.Closed}}isConnected(){return this.connectionState()===ul.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){const r=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===r);if(a)return a;{const i=new VS(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(OQ,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},pp.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:a,payload:i,ref:o}=n,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${a} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(a,i,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ys.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${t}${r}${a}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([qQ],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n;t?n=t:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const a={access_token:n,version:TQ};n&&r.updateJoinPayload(a),r.joinedOnce&&r._isJoined()&&r._push(Ys.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new xR(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},pp.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,a,i,o,l,c,u,d;if(this.transport=(n=t==null?void 0:t.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:uw,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:pp.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Y0,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:h=>zQ[h-1]||VQ,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(h,m)=>m(JSON.stringify(h)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class qS extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Mn(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class WQ extends qS{constructor(t,n,r){super(t),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class mw extends qS{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var HQ=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const bR=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Pf(async()=>{const{default:r}=await Promise.resolve().then(()=>Ed);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},KQ=()=>HQ(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Pf(()=>Promise.resolve().then(()=>Ed),void 0)).Response:Response}),fw=e=>{if(Array.isArray(e))return e.map(n=>fw(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const a=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=fw(r)}),t},GQ=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var cc=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const Q0=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),YQ=(e,t,n)=>cc(void 0,void 0,void 0,function*(){const r=yield KQ();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(a=>{const i=e.status||500,o=(a==null?void 0:a.statusCode)||i+"";t(new WQ(Q0(a),i,o))}).catch(a=>{t(new mw(Q0(a),a))}):t(new mw(Q0(e),e))}),QQ=(e,t,n,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!r?a:(GQ(r)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(r)):a.body=r,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),n))};function kf(e,t,n,r,a,i){return cc(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(n,QQ(t,r,a,i)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>YQ(c,l,r))})})}function Wg(e,t,n,r){return cc(this,void 0,void 0,function*(){return kf(e,"GET",t,n,r)})}function ba(e,t,n,r,a){return cc(this,void 0,void 0,function*(){return kf(e,"POST",t,r,a,n)})}function pw(e,t,n,r,a){return cc(this,void 0,void 0,function*(){return kf(e,"PUT",t,r,a,n)})}function XQ(e,t,n,r){return cc(this,void 0,void 0,function*(){return kf(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function wR(e,t,n,r,a){return cc(this,void 0,void 0,function*(){return kf(e,"DELETE",t,r,a,n)})}var br=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const JQ={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},qP={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ZQ{constructor(t,n={},r,a){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.bucketId=r,this.fetch=bR(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,n,r,a){return br(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},qP),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),h=yield(t=="PUT"?pw:ba)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Mn(i))return{data:null,error:i};throw i}})}upload(t,n,r){return br(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,a){return br(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",n);try{let c;const u=Object.assign({upsert:qP.upsert},a),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl)):(c=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield pw(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Mn(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return br(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const a=Object.assign({},this.headers);n!=null&&n.upsert&&(a["x-upsert"]="true");const i=yield ba(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new qS("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mn(r))return{data:null,error:r};throw r}})}update(t,n,r){return br(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return br(this,void 0,void 0,function*(){try{return{data:yield ba(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Mn(a))return{data:null,error:a};throw a}})}copy(t,n,r){return br(this,void 0,void 0,function*(){try{return{data:{path:(yield ba(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Mn(a))return{data:null,error:a};throw a}})}createSignedUrl(t,n,r){return br(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield ba(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Mn(a))return{data:null,error:a};throw a}})}createSignedUrls(t,n,r){return br(this,void 0,void 0,function*(){try{const a=yield ba(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Mn(a))return{data:null,error:a};throw a}})}download(t,n){return br(this,void 0,void 0,function*(){const a=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield Wg(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Mn(l))return{data:null,error:l};throw l}})}info(t){return br(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Wg(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:fw(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mn(r))return{data:null,error:r};throw r}})}exists(t){return br(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield XQ(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mn(r)&&r instanceof mw){const a=r.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),a=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&a.push(i);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&a.push(c);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${u}`)}}}remove(t){return br(this,void 0,void 0,function*(){try{return{data:yield wR(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mn(n))return{data:null,error:n};throw n}})}list(t,n,r){return br(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},JQ),n),{prefix:t||""});return{data:yield ba(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Mn(a))return{data:null,error:a};throw a}})}listV2(t,n){return br(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield ba(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mn(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const eX="2.12.1",tX={"X-Client-Info":`storage-js/${eX}`};var wc=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class nX{constructor(t,n={},r,a){this.shouldThrowOnError=!1;const i=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},tX),n),this.fetch=bR(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return wc(this,void 0,void 0,function*(){try{return{data:yield Wg(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Mn(t))return{data:null,error:t};throw t}})}getBucket(t){return wc(this,void 0,void 0,function*(){try{return{data:yield Wg(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mn(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return wc(this,void 0,void 0,function*(){try{return{data:yield ba(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mn(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return wc(this,void 0,void 0,function*(){try{return{data:yield pw(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Mn(r))return{data:null,error:r};throw r}})}emptyBucket(t){return wc(this,void 0,void 0,function*(){try{return{data:yield ba(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mn(n))return{data:null,error:n};throw n}})}deleteBucket(t){return wc(this,void 0,void 0,function*(){try{return{data:yield wR(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Mn(n))return{data:null,error:n};throw n}})}}class rX extends nX{constructor(t,n={},r,a){super(t,n,r,a)}from(t){return new ZQ(this.url,this.headers,t,this.fetch)}}const sX="2.57.4";let Th="";typeof Deno<"u"?Th="deno":typeof document<"u"?Th="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Th="react-native":Th="node";const aX={"X-Client-Info":`supabase-js-${Th}/${sX}`},iX={headers:aX},oX={schema:"public"},lX={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},cX={};var uX=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};const dX=e=>{let t;return e?t=e:typeof fetch>"u"?t=oR:t=fetch,(...n)=>t(...n)},hX=()=>typeof Headers>"u"?lR:Headers,mX=(e,t,n)=>{const r=dX(n),a=hX();return(i,o)=>uX(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new a(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},o),{headers:u}))})};var fX=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};function pX(e){return e.endsWith("/")?e:e+"/"}function gX(e,t){var n,r;const{db:a,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,m={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>fX(this,void 0,void 0,function*(){return""})};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}function vX(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(pX(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const NR="2.71.1",Mc=30*1e3,gw=3,X0=gw*Mc,xX="http://localhost:9999",yX="supabase.auth.token",jX={"X-Client-Info":`gotrue-js/${NR}`},vw="X-Supabase-Api-Version",SR={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},bX=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,wX=10*60*1e3;class US extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function lt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class NX extends US{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function SX(e){return lt(e)&&e.name==="AuthApiError"}class CR extends US{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Vo extends US{constructor(t,n,r,a){super(t,r,a),this.name=n,this.status=r}}class Hi extends Vo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function CX(e){return lt(e)&&e.name==="AuthSessionMissingError"}class gp extends Vo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class vp extends Vo{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class xp extends Vo{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function _X(e){return lt(e)&&e.name==="AuthImplicitGrantRedirectError"}class UP extends Vo{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class xw extends Vo{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function J0(e){return lt(e)&&e.name==="AuthRetryableFetchError"}class WP extends Vo{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class yw extends Vo{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Hg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),HP=` 	
\r=`.split(""),PX=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<HP.length;t+=1)e[HP[t].charCodeAt(0)]=-2;for(let t=0;t<Hg.length;t+=1)e[Hg[t].charCodeAt(0)]=t;return e})();function KP(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Hg[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Hg[r]),t.queuedBits-=6}}function _R(e,t,n){const r=PX[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function GP(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{TX(o,r,n)};for(let o=0;o<e.length;o+=1)_R(e.charCodeAt(o),a,i);return t.join("")}function AX(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function kX(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const a=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}AX(r,t)}}function TX(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function EX(e){const t=[],n={queue:0,queuedBits:0},r=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)_R(e.charCodeAt(a),n,r);return new Uint8Array(t)}function OX(e){const t=[];return kX(e,n=>t.push(n)),new Uint8Array(t)}function DX(e){const t=[],n={queue:0,queuedBits:0},r=a=>{t.push(a)};return e.forEach(a=>KP(a,n,r)),KP(null,n,r),t.join("")}function MX(e){return Math.round(Date.now()/1e3)+e}function IX(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const qs=()=>typeof window<"u"&&typeof document<"u",Jo={tested:!1,writable:!1},PR=()=>{if(!qs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Jo.tested)return Jo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Jo.tested=!0,Jo.writable=!0}catch{Jo.tested=!0,Jo.writable=!1}return Jo.writable};function $X(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return n.searchParams.forEach((r,a)=>{t[a]=r}),t}const AR=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Pf(async()=>{const{default:r}=await Promise.resolve().then(()=>Ed);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},RX=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Ic=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Zo=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Vi=async(e,t)=>{await e.removeItem(t)};class Vx{constructor(){this.promise=new Vx.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Vx.promiseConstructor=Promise;function Z0(e){const t=e.split(".");if(t.length!==3)throw new yw("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!bX.test(t[r]))throw new yw("JWT not in base64url format");return{header:JSON.parse(GP(t[0])),payload:JSON.parse(GP(t[1])),signature:EX(t[2]),raw:{header:t[0],payload:t[1]}}}async function LX(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function FX(e,t){return new Promise((r,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){r(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function BX(e){return("0"+e.toString(16)).substr(-2)}function zX(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let a="";for(let i=0;i<56;i++)a+=n.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(t),Array.from(t,BX).join("")}async function VX(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(r);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function qX(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await VX(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Nc(e,t,n=!1){const r=zX();let a=r;n&&(a+="/PASSWORD_RECOVERY"),await Ic(e,`${t}-code-verifier`,a);const i=await qX(r);return[i,r===i?"plain":"s256"]}const UX=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function WX(e){const t=e.headers.get(vw);if(!t||!t.match(UX))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function HX(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function KX(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const GX=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Sc(e){if(!GX.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ej(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function YP(e){return JSON.parse(JSON.stringify(e))}var YX=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};const al=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),QX=[502,503,504];async function QP(e){var t;if(!RX(e))throw new xw(al(e),0);if(QX.includes(e.status))throw new xw(al(e),e.status);let n;try{n=await e.json()}catch(i){throw new CR(al(i),i)}let r;const a=WX(e);if(a&&a.getTime()>=SR["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new WP(al(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Hi}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new WP(al(n),e.status,n.weak_password.reasons);throw new NX(al(n),e.status||500,r)}const XX=(e,t,n,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),n))};async function gt(e,t,n,r){var a;const i=Object.assign({},r==null?void 0:r.headers);i[vw]||(i[vw]=SR["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(a=r==null?void 0:r.query)!==null&&a!==void 0?a:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await JX(e,t,n+l,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function JX(e,t,n,r,a,i){const o=XX(t,r,a,i);let l;try{l=await e(n,Object.assign({},o))}catch(c){throw console.error(c),new xw(al(c),0)}if(l.ok||await QP(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await QP(c)}}function Za(e){var t;let n=null;nJ(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=MX(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function XP(e){const t=Za(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function eo(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function ZX(e){return{data:e,error:null}}function eJ(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:i}=e,o=YX(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function tJ(e){return e}function nJ(e){return e.access_token&&e.refresh_token&&e.expires_in}const tj=["global","local","others"];var rJ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};class sJ{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=AR(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=tj[0]){if(tj.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${tj.join(", ")}`);try{return await gt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(lt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await gt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:eo})}catch(r){if(lt(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=rJ(t,["options"]),a=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(a.new_email=r==null?void 0:r.newEmail,delete a.newEmail),await gt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:eJ,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(lt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await gt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:eo})}catch(n){if(lt(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,a,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await gt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:tJ});if(d.error)throw d.error;const h=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(v=>{const p=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(v.split(";")[1].split("=")[1]);u[`${g}Page`]=p}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(lt(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Sc(t);try{return await gt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:eo})}catch(n){if(lt(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Sc(t);try{return await gt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:eo})}catch(r){if(lt(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Sc(t);try{return await gt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:eo})}catch(r){if(lt(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Sc(t.userId);try{const{data:n,error:r}=await gt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:r}}catch(n){if(lt(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Sc(t.userId),Sc(t.id);try{return{data:await gt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(lt(n))return{data:null,error:n};throw n}}}function JP(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function aJ(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Cc={debug:!!(globalThis&&PR()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class kR extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class iJ extends kR{}async function oJ(e,t,n){Cc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Cc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){Cc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await n()}finally{Cc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Cc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new iJ(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Cc.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}aJ();const lJ={url:xX,storageKey:yX,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:jX,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ZP(e,t,n){return await n()}const _c={};class Cm{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Cm.nextInstanceID,Cm.nextInstanceID+=1,this.instanceID>0&&qs()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},lJ),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new sJ({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=AR(a.fetch),this.lock=a.lock||ZP,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:qs()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=oJ:this.lock=ZP,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:PR()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=JP(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=JP(this.memoryStorage)),qs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=_c[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){_c[this.storageKey]=Object.assign(Object.assign({},_c[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=_c[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){_c[this.storageKey]=Object.assign(Object.assign({},_c[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${NR}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=$X(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),qs()&&this.detectSessionInUrl&&r!=="none"){const{data:a,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),_X(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return lt(n)?{error:n}:{error:new CR("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,a;try{const i=await gt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Za}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(lt(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,a;try{let i;if("email"in t){const{email:d,password:h,options:m}=t;let f=null,v=null;this.flowType==="pkce"&&([f,v]=await Nc(this.storage,this.storageKey)),i=await gt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:f,code_challenge_method:v},xform:Za})}else if("phone"in t){const{phone:d,password:h,options:m}=t;i=await gt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(a=m==null?void 0:m.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Za})}else throw new vp("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(lt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:o,options:l}=t;n=await gt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:XP})}else if("phone"in t){const{phone:i,password:o,options:l}=t;n=await gt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:XP})}else throw new vp("You must provide either an email or phone number and a password");const{data:r,error:a}=n;return a?{data:{user:null,session:null},error:a}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new gp}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(n){if(lt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,a,i,o,l,c,u,d,h,m,f;let v,p;if("message"in t)v=t.message,p=t.signature;else{const{chain:g,wallet:x,statement:y,options:b}=t;let C;if(qs())if(typeof x=="object")C=x;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))C=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=x}const w=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in C&&C.signIn){const N=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:w.host,uri:w.href}),y?{statement:y}:null));let S;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")S=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)S=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)v=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),p=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${w.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${w.href}`,`Issued At: ${(a=(r=b==null?void 0:b.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((h=(d=b==null?void 0:b.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...b.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const N=await C.signMessage(new TextEncoder().encode(v),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=N}}try{const{data:g,error:x}=await gt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:DX(p)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Za});if(x)throw x;return!g||!g.session||!g.user?{data:{user:null,session:null},error:new gp}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:Object.assign({},g),error:x})}catch(g){if(lt(g))return{data:{user:null,session:null},error:g};throw g}}async _exchangeCodeForSession(t){const n=await Zo(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(n??"").split("/");try{const{data:i,error:o}=await gt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Za});if(await Vi(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new gp}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(lt(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:a,access_token:i,nonce:o}=t,l=await gt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Za}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new gp}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(lt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,a,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Nc(this.storage,this.storageKey));const{error:h}=await gt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await gt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new vp("You must provide either an email or phone number.")}catch(l){if(lt(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let a,i;"options"in t&&(a=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:l}=await gt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Za});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(lt(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var n,r,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Nc(this.storage,this.storageKey)),await gt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:ZX})}catch(i){if(lt(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Hi;const{error:a}=await gt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(lt(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:a,options:i}=t,{error:o}=await gt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:a,options:i}=t,{data:o,error:l}=await gt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new vp("You must provide either an email or phone number and a type")}catch(n){if(lt(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Zo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<X0:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await Zo(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=ej()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await gt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:eo}):await this._useSession(async n=>{var r,a,i;const{data:o,error:l}=n;if(l)throw l;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Hi}:await gt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:eo})})}catch(n){if(lt(n))return CX(n)&&(await this._removeSession(),await Vi(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:a,error:i}=r;if(i)throw i;if(!a.session)throw new Hi;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Nc(this.storage,this.storageKey));const{data:u,error:d}=await gt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:eo});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(lt(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Hi;const n=Date.now()/1e3;let r=n,a=!0,i=null;const{payload:o}=Z0(t.access_token);if(o.exp&&(r=o.exp,a=r<=n),a){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(lt(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:l}=n;if(l)throw l;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Hi;const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(lt(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!qs())throw new xp("No browser detected.");if(t.error||t.error_description||t.error_code)throw new xp(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new UP("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new xp("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new UP("No code detected.");const{data:y,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new xp("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let m=d+h;c&&(m=parseInt(c));const f=m-d;f*1e3<=Mc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const v=m-h;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,m,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,m,d);const{data:p,error:g}=await this._getUser(i);if(g)throw g;const x={provider_token:r,provider_refresh_token:a,access_token:i,expires_in:h,expires_at:m,refresh_token:o,token_type:u,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(r){if(lt(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Zo(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:a,error:i}=n;if(i)return{error:i};const o=(r=a.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(SX(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Vi(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=IX(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,a;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await Nc(this.storage,this.storageKey,!0));try{return await gt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(lt(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(lt(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:a}=await this._useSession(async i=>{var o,l,c,u,d;const{data:h,error:m}=i;if(m)throw m;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await gt(this.fetch,"GET",f,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return qs()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(lt(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,a;const{data:i,error:o}=n;if(o)throw o;return await gt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(lt(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await FX(async a=>(a>0&&await LX(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await gt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Za})),(a,i)=>{const o=200*Math.pow(2,a);return i&&J0(i)&&Date.now()+o-r<Mc})}catch(r){if(this._debug(n,"error",r),lt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),qs()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await Zo(this.storage,this.storageKey);if(a&&this.userStorage){let o=await Zo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await Ic(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:ej()}else if(a&&!a.user&&!a.user){const o=await Zo(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await Vi(this.storage,this.storageKey+"-user"),await Ic(this.storage,this.storageKey,a)):a.user=ej()}if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const i=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<X0;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${X0}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),J0(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Hi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Vx;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Hi;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),lt(i)){const o={session:null,error:i};return J0(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,n,r=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Ic(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const i=YP(a);await Ic(this.storage,this.storageKey,i)}else{const a=YP(n);await Ic(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Vi(this.storage,this.storageKey),await Vi(this.storage,this.storageKey+"-code-verifier"),await Vi(this.storage,this.storageKey+"-user"),this.userStorage&&await Vi(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&qs()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Mc);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-t)/Mc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Mc}ms, refresh threshold is ${gw} ticks`),a<=gw&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof kR)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!qs()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const a=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Nc(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);a.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:a,error:i}=n;return i?{data:null,error:i}:await gt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(lt(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,a;const{data:i,error:o}=n;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await gt(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(lt(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:l}=await gt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(n){if(lt(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:i}=n;return i?{data:null,error:i}:await gt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(lt(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],a=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:a},error:i}=t;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Z0(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((r=(n=a.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const a=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+wX>a)return r;const{data:i,error:o}=await gt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,r=i.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:f,error:v}=await this.getSession();if(v||!f.session)return{data:null,error:v};r=f.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=Z0(r);n!=null&&n.allowExpired||HX(i.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!u){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:i,header:a,signature:o},error:null}}const d=KX(a.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,OX(`${l}.${c}`)))throw new yw("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(r){if(lt(r))return{data:null,error:r};throw r}}}Cm.nextInstanceID=0;const cJ=Cm;class uJ extends cJ{constructor(t){super(t)}}var dJ=function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(d){try{u(r.next(d))}catch(h){o(h)}}function c(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((r=r.apply(e,t||[])).next())})};class hJ{constructor(t,n,r){var a,i,o;this.supabaseUrl=t,this.supabaseKey=n;const l=vX(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:oX,realtime:cX,auth:Object.assign(Object.assign({},lX),{storageKey:c}),global:iX},d=gX(r??{},u);this.storageKey=(a=d.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=mX(n,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new PQ(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new rX(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new aQ(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return dJ(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:a,userStorage:i,storageKey:o,flowType:l,lock:c,debug:u},d,h){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new uJ({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),d),storageKey:o,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:a,userStorage:i,flowType:l,lock:c,debug:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>f.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new UQ(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const mJ=(e,t,n)=>new hJ(e,t,n);function fJ(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}fJ()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const TR="https://fqmeqckchbppabetefuk.supabase.co",pJ="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZxbWVxY2tjaGJwcGFiZXRlZnVrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY2NzUzODYsImV4cCI6MjA3MjI1MTM4Nn0.MkyVvQVmqUXShrHXHTpHib0Dyq39ZB47KhGZZgBlF-o",Se=mJ(TR,pJ,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),ER=async()=>{const{data:{user:e},error:t}=await Se.auth.getUser();if(t)throw t;return e},qx=async()=>{const e=await ER();if(!e)return null;const{data:t,error:n}=await Se.from("user_profiles").select("*").eq("id",e.id).single();if(n)throw n;return t},gJ=async(e,t,n,r,a="assistant")=>{const{data:i,error:o}=await Se.auth.signUp({email:e,password:t,options:{data:{username:n,full_name:r,role:a}}});if(o)throw o;return i},vJ=async()=>{const{error:e}=await Se.auth.signOut();if(e)throw e;try{localStorage.removeItem("supabase.auth.token"),localStorage.removeItem("sb-"+TR.split("//")[1].split(".")[0]+"-auth-token"),document.cookie.split(";").forEach(t=>{document.cookie=t.replace(/^ +/,"").replace(/=.*/,"=;expires="+new Date().toUTCString()+";path=/")})}catch(t){console.warn("Error clearing auth storage:",t)}},xJ=async e=>{const t=await ER();if(!t)throw new Error("No authenticated user");const{data:n,error:r}=await Se.from("user_profiles").select("*").eq("id",t.id).single();n||await OR(t);const a=Object.entries({...e,updated_at:new Date().toISOString()}).reduce((l,[c,u])=>(u!=null&&u!==""&&(l[c]=u),l),{}),{data:i,error:o}=await Se.from("user_profiles").update(a).eq("id",t.id).select().single();if(o){const l=t.user_metadata||{},c=l.full_name||l.name||"",u=(n==null?void 0:n.username)||l.username||t.email.split("@")[0],d=(n==null?void 0:n.role)||l.role||"assistant",h={id:t.id,email:t.email,username:u,full_name:c,role:d,...a},{data:m,error:f}=await Se.from("user_profiles").upsert(h).select().single();if(f)throw new Error(`Profile update failed: ${f.message}`);return m}return i},OR=async e=>{const t=await qx();if(t)return t;const n=e.user_metadata||{},r=n.full_name||n.name||"",a=n.username||e.email.split("@")[0],i=n.role||"assistant",{data:o,error:l}=await Se.from("user_profiles").insert({id:e.id,email:e.email,username:a,full_name:r,role:i}).select().single();if(l)throw l;return o},yJ=async e=>{const{data:t,error:n}=await Se.auth.resetPasswordForEmail(e,{redirectTo:"https://vetoapp-six.vercel.app//reset-password"});if(n)throw n;return t},ta={all:["auth"],session:()=>[...ta.all,"session"]},jJ=async()=>{try{const{data:{session:e},error:t}=await Se.auth.getSession();if(t||!(e!=null&&e.user))return null;let n=null;try{n=await qx()}catch{try{n=await OR(e.user)}catch(a){console.error("Failed to create user profile:",a);const i=e.user.user_metadata||{},o=i.full_name||i.name||"",l=i.username||e.user.email.split("@")[0];n={id:e.user.id,email:e.user.email,username:l,full_name:o,role:"assistant",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),avatar_url:i.avatar_url||i.picture||null}}}return n?{id:e.user.id,email:e.user.email,profile:n}:null}catch{return null}},bJ=()=>an({queryKey:ta.session(),queryFn:jJ,staleTime:5*60*1e3,gcTime:10*60*1e3,retry:!1,refetchOnWindowFocus:!1,refetchOnMount:"always",refetchOnReconnect:!1,networkMode:"offlineFirst"}),DR=()=>{const e=Ct();return Pt({mutationFn:async({email:t,password:n})=>{const{data:r,error:a}=await Se.auth.signInWithPassword({email:t,password:n});if(a){const o={"Invalid login credentials":"Email ou mot de passe incorrect","Email not confirmed":"Veuillez confirmer votre email avant de vous connecter","Too many requests":"Trop de tentatives de connexion. Veuillez réessayer plus tard"}[a.message]||a.message;throw new Error(o)}if(!r.user||!r.session)throw new Error("Échec de connexion - session invalide");return r.user},onSuccess:async()=>{await new Promise(t=>setTimeout(t,100)),e.refetchQueries({queryKey:ta.session()})},onError:()=>{e.setQueryData(ta.session(),null)}})},wJ=()=>{const e=Ct();return Pt({mutationFn:async()=>{await vJ()},onSuccess:()=>{e.setQueryData(ta.session(),null),e.removeQueries({queryKey:ta.session()})}})},NJ=()=>{const e=Ct();return Pt({mutationFn:async()=>{const t=await qx();if(!t)throw new Error("Could not refresh profile");return t},onSuccess:()=>{e.invalidateQueries({queryKey:ta.session()})}})},SJ=()=>Pt({mutationFn:async()=>{const{data:e,error:t}=await Se.auth.signInWithOAuth({provider:"google",options:{redirectTo:"https://vetoapp-six.vercel.app//dashboard"}});if(t)throw t;return e}}),CJ=()=>Pt({mutationFn:async e=>{await yJ(e)}}),MR=j.createContext(void 0);function _J({children:e}){const{data:t,isLoading:n,error:r}=bJ(),a=DR(),i=wJ(),o=NJ(),l=Ct(),[c,u]=j.useState(!1),d=j.useRef(!1);j.useEffect(()=>{if(d.current)return;d.current=!0;const{data:{subscription:x}}=Se.auth.onAuthStateChange((b,C)=>{b==="SIGNED_OUT"?(l.setQueryData(ta.session(),null),l.removeQueries({queryKey:ta.session()})):b==="TOKEN_REFRESHED"&&C&&l.invalidateQueries({queryKey:ta.session()}),c||u(!0)}),y=setTimeout(()=>{c||u(!0)},2e3);return()=>{x.unsubscribe(),clearTimeout(y),d.current=!1}},[l,c]);const h=async(x,y)=>{try{return await a.mutateAsync({email:x,password:y}),!0}catch(b){return console.error("Login error:",b),!1}},m=async()=>{try{await i.mutateAsync()}catch(x){console.error("Logout error:",x),l.setQueryData(ta.session(),null)}},f=async()=>{await o.mutateAsync()},v=!c||n&&!r&&t===void 0,p=a.isPending||i.isPending,g={user:t||null,isAuthenticated:!!t&&c,isLoading:v||p,login:h,logout:m,refreshProfile:f};return s.jsx(MR.Provider,{value:g,children:e})}function qo(){const e=j.useContext(MR);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}function eA(){const{user:e,logout:t}=qo(),{toast:n}=it(),r=Td(),[a,i]=j.useState(!1),o=async()=>{i(!0),await new Promise(d=>setTimeout(d,500)),t(),n({title:"Déconnexion réussie",description:"Vous avez été déconnecté avec succès."}),i(!1)};if(!e)return null;const l=d=>d?d.split(" ").map(h=>h.charAt(0)).join("").toUpperCase().slice(0,2):e.profile.username.charAt(0).toUpperCase(),c=d=>{switch(d){case"admin":return"Administrateur";case"assistant":return"Assistant";default:return"Utilisateur"}},u=d=>{switch(d){case"admin":return s.jsx(xr,{className:"h-3 w-3"});case"assistant":return s.jsx(Xn,{className:"h-3 w-3"});default:return s.jsx(Xn,{className:"h-3 w-3"})}};return s.jsxs(DY,{children:[s.jsx(MY,{asChild:!0,children:s.jsx(R,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:s.jsx(Jn,{className:"h-8 w-8",children:s.jsx(Zn,{className:"bg-primary text-primary-foreground text-sm",children:l(e.profile.full_name)})})})}),s.jsxs(G4,{className:"w-56",align:"end",forceMount:!0,children:[s.jsx(Y4,{className:"font-normal",children:s.jsxs("div",{className:"flex flex-col space-y-1",children:[s.jsx("p",{className:"text-sm font-medium leading-none",children:e.profile.full_name||e.profile.username}),s.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:e.email}),s.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[u(e.profile.role),s.jsx("span",{className:"text-xs text-muted-foreground",children:c(e.profile.role)})]})]})}),s.jsx(lw,{}),s.jsxs(ow,{className:"cursor-pointer",onClick:()=>r("/profile"),children:[s.jsx(Xn,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Profil"})]}),s.jsx(lw,{}),s.jsxs(ow,{className:"cursor-pointer text-red-600 focus:text-red-600",onClick:o,disabled:a,children:[s.jsx(PI,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:a?"Déconnexion...":"Se déconnecter"})]})]})]})}const IR=[{icon:kU,label:"Dashboard",path:"/dashboard"},{icon:Va,label:"Clients",path:"/clients"},{icon:ft,label:"Animaux",path:"/pets"},{icon:Ge,label:"RDV",path:"/appointments"},{icon:_r,label:"Consultations",path:"/consultations"},{icon:Vr,label:"Vaccinations",path:"/vaccinations"},{icon:pl,label:"Antiparasites",path:"/antiparasites"},{icon:SI,label:"Historiques",path:"/history"},{icon:Eb,label:"Farm Mgmt",path:"/farm"}],$R=[{icon:Ia,label:"Stock",path:"/stock"},{icon:NI,label:"Comptabilité",path:"/accounting"},{icon:CU,label:"Paramètres",path:"/settings"}],PJ=[...IR,...$R];function ur(){const e=zo(),[t,n]=j.useState(!1);return s.jsx("nav",{className:"bg-card border-b shadow-card",children:s.jsxs("div",{className:"container mx-auto px-2 sm:px-4 py-2 sm:py-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-shrink-0",children:[s.jsxs(Zs,{to:"/dashboard",className:"flex items-center gap-1 sm:gap-2",children:[s.jsx(ft,{className:"h-6 w-6 sm:h-7 sm:w-7 text-primary"}),s.jsx("h1",{className:"text-lg sm:text-xl font-bold gradient-primary bg-clip-text text-transparent hidden sm:block",children:"VetPro CRM"}),s.jsx("h1",{className:"text-base sm:text-lg font-bold gradient-primary bg-clip-text text-transparent sm:hidden",children:"VetPro"})]}),s.jsx("div",{className:"hidden sm:block",children:s.jsx(SP,{})})]}),s.jsxs("div",{className:"hidden lg:flex items-center gap-1",children:[IR.map(r=>s.jsx(R,{variant:e.pathname===r.path?"default":"ghost",size:"sm",className:"gap-1 px-3 transition-all hover:medical-glow",asChild:!0,children:s.jsxs(Zs,{to:r.path,children:[s.jsx(r.icon,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden xl:inline",children:r.label})]})},r.path)),s.jsxs("div",{className:"relative group",children:[s.jsxs(R,{variant:"ghost",size:"sm",className:"gap-1 px-3 transition-all hover:medical-glow",children:[s.jsx(V_,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden xl:inline",children:"Plus"})]}),s.jsx("div",{className:"absolute right-0 top-full mt-1 w-40 bg-card border rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:s.jsx("div",{className:"py-1",children:$R.map(r=>s.jsxs(Zs,{to:r.path,className:`flex items-center gap-2 px-4 py-2 text-sm transition-colors hover:bg-muted ${e.pathname===r.path?"bg-primary text-primary-foreground":""}`,children:[s.jsx(r.icon,{className:"h-4 w-4"}),r.label]},r.path))})})]})]}),s.jsx("div",{className:"hidden lg:flex items-center gap-2",children:s.jsx(eA,{})}),s.jsxs("div",{className:"lg:hidden flex items-center gap-2",children:[s.jsx("div",{className:"sm:hidden",children:s.jsx(SP,{})}),s.jsx(eA,{}),s.jsx(R,{variant:"ghost",size:"sm",onClick:()=>n(!t),className:"gap-1 p-2",children:t?s.jsx(wf,{className:"h-4 w-4"}):s.jsx(V_,{className:"h-4 w-4"})})]})]}),t&&s.jsx("div",{className:"lg:hidden mt-2 pt-2 border-t",children:s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1",children:PJ.map(r=>s.jsx(R,{variant:e.pathname===r.path?"default":"ghost",size:"sm",className:"gap-2 justify-start text-xs sm:text-sm",asChild:!0,onClick:()=>n(!1),children:s.jsxs(Zs,{to:r.path,children:[s.jsx(r.icon,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{className:"truncate",children:r.label})]})},r.path))})})]})})}class AJ extends j.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){console.error("ErrorBoundary caught an error:",t,n),this.setState({error:t,errorInfo:n})}render(){var t,n;return this.state.hasError?s.jsx("div",{className:"min-h-screen bg-red-50 flex items-center justify-center p-8",children:s.jsxs("div",{className:"max-w-2xl bg-white p-8 rounded-lg shadow-lg border border-red-200",children:[s.jsx("h1",{className:"text-2xl font-bold text-red-800 mb-4",children:"🚨 Erreur dans l'application"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-red-700 mb-2",children:"Erreur :"}),s.jsx("pre",{className:"bg-red-100 p-4 rounded text-sm text-red-800 overflow-auto",children:(t=this.state.error)==null?void 0:t.toString()})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-red-700 mb-2",children:"Stack Trace :"}),s.jsx("pre",{className:"bg-gray-100 p-4 rounded text-sm text-gray-800 overflow-auto max-h-64",children:(n=this.state.errorInfo)==null?void 0:n.componentStack})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Recharger la page"}),s.jsx("button",{onClick:()=>window.history.back(),className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"Retour"})]})]})]})}):this.props.children}}const RR=j.createContext(void 0),tA=[{id:1,name:"Marie Dubois",firstName:"Marie",lastName:"Dubois",email:"marie.dubois@email.com",phone:"06 12 34 56 78",address:"123 Rue de la Paix",city:"Paris",postalCode:"75001",idNumber:"1234567890123",pets:[{id:1,name:"Bella",type:"Chien",breed:"Golden Retriever",gender:"female",birthDate:"2021-03-15",weight:"28 kg",color:"Doré",ownerId:1,owner:"Marie Dubois",status:"healthy",lastVisit:"2024-01-15",nextAppointment:"2024-01-25",microchip:"982000123456789",vaccinations:["Rage","DHPP","Lyme"]},{id:4,name:"Luna",type:"Chat",breed:"Siamois",gender:"female",birthDate:"2022-05-12",weight:"3.8 kg",color:"Crème et marron",ownerId:1,owner:"Marie Dubois",status:"healthy",lastVisit:"2024-01-08",nextAppointment:"2024-02-08",microchip:"982000111222333",vaccinations:["Rage","FVRCP","FeLV"]}],lastVisit:"2024-01-15",totalVisits:12},{id:2,name:"Jean Martin",firstName:"Jean",lastName:"Martin",email:"jean.martin@email.com",phone:"06 98 76 54 32",address:"45 Avenue des Roses",city:"Lyon",postalCode:"69000",idNumber:"9876543210987",pets:[{id:2,name:"Whiskers",type:"Chat",breed:"Persan",gender:"male",birthDate:"2019-08-22",weight:"4.5 kg",color:"Blanc",ownerId:2,owner:"Jean Martin",status:"treatment",lastVisit:"2024-01-10",nextAppointment:"2024-01-22",microchip:"982000987654321",vaccinations:["Rage","FVRCP"]}],lastVisit:"2024-01-10",totalVisits:8},{id:3,name:"Sophie Leroux",firstName:"Sophie",lastName:"Leroux",email:"sophie.leroux@email.com",phone:"06 45 67 89 12",address:"78 Boulevard Maritime",city:"Marseille",postalCode:"13000",idNumber:"4567891234567",pets:[{id:3,name:"Rex",type:"Chien",breed:"Berger Allemand",gender:"male",birthDate:"2017-11-10",weight:"32 kg",color:"Noir et feu",ownerId:3,owner:"Sophie Leroux",status:"healthy",lastVisit:"2024-01-18",nextAppointment:"2024-02-01",microchip:"982000555444333",vaccinations:["Rage","DHPP","Bordetella"]},{id:5,name:"Max",type:"Chien",breed:"Labrador",gender:"male",birthDate:"2020-09-03",weight:"30 kg",color:"Noir",ownerId:3,owner:"Sophie Leroux",status:"healthy",lastVisit:"2024-01-22",nextAppointment:"2024-02-22",microchip:"982000444555666",vaccinations:["Rage","DHPP","Lyme","Bordetella"]}],lastVisit:"2024-01-18",totalVisits:15}],dh=[{id:1,name:"Bella",type:"Chien",breed:"Golden Retriever",birthDate:"2021-03-15",weight:"28 kg",color:"Doré",ownerId:1,owner:"Marie Dubois",status:"healthy",lastVisit:"2024-01-15",nextAppointment:"2024-01-25",microchip:"982000123456789",vaccinations:["Rage","DHPP","Lyme"]},{id:2,name:"Whiskers",type:"Chat",breed:"Persan",birthDate:"2019-08-22",weight:"4.5 kg",color:"Blanc",ownerId:2,owner:"Jean Martin",status:"treatment",lastVisit:"2024-01-10",nextAppointment:"2024-01-22",microchip:"982000987654321",vaccinations:["Rage","FVRCP"]},{id:3,name:"Rex",type:"Chien",breed:"Berger Allemand",birthDate:"2017-11-10",weight:"32 kg",color:"Noir et feu",ownerId:3,owner:"Sophie Leroux",status:"healthy",lastVisit:"2024-01-18",nextAppointment:"2024-02-01",microchip:"982000555444333",vaccinations:["Rage","DHPP","Bordetella"]}],yp=[{id:1,clientId:1,clientName:"Marie Dubois",petId:1,petName:"Bella",date:"2024-01-15",weight:"28.2 kg",temperature:"38.5",symptoms:"Contrôle annuel, bonne santé générale",diagnosis:"Aucun problème détecté",treatment:"Vaccination annuelle",medications:"Rappel vaccin DHPP",followUp:"Contrôle dans 1 an",cost:"85.00",notes:"Animal en excellente santé",photos:[],createdAt:"2024-01-15T10:30:00Z"},{id:2,clientId:2,clientName:"Jean Martin",petId:2,petName:"Whiskers",date:"2024-01-10",weight:"4.3 kg",temperature:"39.2",symptoms:"Perte d'appétit, léthargie",diagnosis:"Infection urinaire",treatment:"Antibiotiques",medications:"Amoxicilline 50mg 2x/jour pendant 7 jours",followUp:"Contrôle dans 1 semaine",cost:"120.00",notes:"Surveiller la consommation d'eau",photos:[],createdAt:"2024-01-10T14:15:00Z"}],jp=[{id:1,clientId:1,clientName:"Marie Dubois",petId:1,petName:"Bella",date:"2024-01-25",time:"14:30",type:"vaccination",duration:30,reason:"Vaccination annuelle",notes:"Rappel vaccinal complet",status:"scheduled",reminderSent:!1,createdAt:"2024-01-20T09:00:00Z"},{id:2,clientId:2,clientName:"Jean Martin",petId:2,petName:"Whiskers",date:"2024-01-22",time:"10:00",type:"controle",duration:45,reason:"Contrôle post-traitement",notes:"Vérifier l'amélioration de l'appétit",status:"confirmed",reminderSent:!0,createdAt:"2024-01-18T16:30:00Z"},{id:3,clientId:3,clientName:"Sophie Leroux",petId:3,petName:"Rex",date:"2024-01-26",time:"16:00",type:"sterilisation",duration:60,reason:"Stérilisation",notes:"Jeûne 12h avant l'intervention",status:"scheduled",reminderSent:!1,createdAt:"2024-01-19T11:15:00Z"}],bp=[{id:1,consultationId:1,clientId:1,clientName:"Marie Dubois",petId:1,petName:"Bella",date:"2024-01-15",prescribedBy:"Dr. Martin",diagnosis:"Trachéobronchite",medications:[{id:1,name:"Doxycycline",dosage:"100mg",frequency:"2x/jour",duration:"7 jours",instructions:"Donner avec de la nourriture",quantity:14,unit:"comprimés",refills:0,cost:25.5},{id:2,name:"Sirop antitussif",dosage:"5ml",frequency:"3x/jour",duration:"5 jours",instructions:"Donner 30 minutes avant les repas",quantity:75,unit:"ml",refills:1,cost:15}],instructions:"Surveiller la température et l'appétit. Retour en cas d'aggravation.",duration:"7 jours",followUpDate:"2024-01-22",status:"active",notes:"Patient calme, bon appétit maintenu",createdAt:"2024-01-15T10:30:00Z"},{id:2,consultationId:2,clientId:2,clientName:"Jean Martin",petId:2,petName:"Whiskers",date:"2024-01-10",prescribedBy:"Dr. Martin",diagnosis:"Infection urinaire",medications:[{id:3,name:"Amoxicilline",dosage:"50mg",frequency:"2x/jour",duration:"7 jours",instructions:"Donner avec de la nourriture",quantity:14,unit:"comprimés",refills:0,cost:18}],instructions:"Augmenter la consommation d'eau. Surveiller les urines.",duration:"7 jours",followUpDate:"2024-01-17",status:"completed",notes:"Amélioration progressive",createdAt:"2024-01-10T14:15:00Z"}],wp=[{id:1,name:"Ferme des Prairies",owner:"Pierre Durand",address:"123 Route de la Campagne, 45000 Orléans",coordinates:{latitude:47.9056,longitude:1.919},phone:"02 38 45 67 89",email:"p.durand@fermedespra.fr",types:["Bovin laitier"],totalAnimals:85,animalDetails:[{category:"Bovins laitiers",maleCount:3,femaleCount:82,breeds:["Holstein","Prim'Holstein"],ageGroups:["Veaux (0-6 mois)","Génisses (6-24 mois)","Vaches adultes"]}],lastVisit:"2024-01-15",status:"active",veterinarian:"Dr. Dupont",notes:"Exploitation bien gérée, animaux en bonne santé",registrationNumber:"FR45123456789",surfaceArea:45.5,buildingDetails:"Étable moderne 850m², stabulation libre, salle de traite 2x8",equipmentDetails:"Tracteur John Deere, Tank à lait 2000L, Système de ventilation automatique",certifications:["Agriculture Biologique","Haute Valeur Environnementale"],insuranceDetails:"Groupama - Police n°123456789",emergencyContact:{name:"Marie Durand",phone:"06 12 34 56 78",relation:"Épouse"},photos:[{id:"photo_1",url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgdmlld0JveD0iMCAwIDQwMCA0MDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iNDAwIiBmaWxsPSIjRjNGNEY2Ii8+Cjx0ZXh0IHg9IjIwMCIgeT0iMjAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IiM2QjcyODAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5QaG90byBDaGVwdGVsPC90ZXh0Pgo8L3N2Zz4K",description:"Vaches Holstein dans le pré",category:"cheptel",uploadedAt:"2024-01-15T10:00:00Z"},{id:"photo_2",url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgdmlld0JveD0iMCAwIDQwMCA0MDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iNDAwIiBmaWxsPSIjRjNGNEY2Ii8+Cjx0ZXh0IHg9IjIwMCIgeT0iMjAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjQiIGZpbGw9IiM2QjcyODAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5QaG90byBCw6J0aW1lbnRzPC90ZXh0Pgo8L3N2Zz4K",description:"Étable moderne avec salle de traite",category:"batiments",uploadedAt:"2024-01-15T10:00:00Z"}],createdAt:"2024-01-01T09:00:00Z"},{id:2,name:"Élevage Martin",owner:"Jean-Luc Martin",address:"456 Chemin des Champs, 41000 Blois",coordinates:{latitude:47.5886,longitude:1.334},phone:"02 54 78 90 12",email:"jl.martin@elevagemartin.fr",types:["Porcin"],totalAnimals:150,animalDetails:[{category:"Porcs",maleCount:75,femaleCount:75,breeds:["Large White","Landrace"],ageGroups:["Porcelets (0-2 mois)","Porcs en croissance (2-6 mois)"]}],lastVisit:"2024-01-10",status:"active",veterinarian:"Dr. Martin",notes:"Nouveau système de ventilation installé",registrationNumber:"FR41987654321",surfaceArea:28.3,buildingDetails:"Porcherie 600m², nurserie 200m², système de ventilation automatique",equipmentDetails:"Système d'alimentation automatique, Pompe à lisier, Générateur de secours",certifications:["Label Rouge"],insuranceDetails:"Crédit Agricole Assurances - Police n°987654321",emergencyContact:{name:"Sophie Martin",phone:"06 98 76 54 32",relation:"Sœur"},createdAt:"2024-01-02T10:30:00Z"},{id:3,name:"Ferme Avicole Leroux",owner:"Marie Leroux",address:"789 Avenue des Volailles, 37000 Tours",coordinates:{latitude:47.3936,longitude:.6848},phone:"02 47 12 34 56",email:"m.leroux@avicole-leroux.fr",types:["Avicole"],totalAnimals:2500,animalDetails:[{category:"Poules pondeuses",maleCount:50,femaleCount:2e3,breeds:["ISA Brown","Lohmann Brown"],ageGroups:["Poussins (0-18 semaines)","Pondeuses (18+ semaines)"]},{category:"Poulets de chair",maleCount:225,femaleCount:225,breeds:["Cobb 500","Ross 308"],ageGroups:["0-6 semaines"]}],lastVisit:"2024-01-18",status:"attention",veterinarian:"Dr. Dupont",notes:"Problème de ventilation détecté, surveillance renforcée",registrationNumber:"FR37555666777",surfaceArea:12.8,buildingDetails:"Poulailler automatisé 1200m², aire de parcours 5000m²",equipmentDetails:"Système de ramassage automatique des œufs, Ventilation programmable, Éclairage LED",certifications:["Œufs de France","Bien-être animal"],insuranceDetails:"MMA - Police n°555666777",emergencyContact:{name:"Paul Leroux",phone:"06 47 12 34 56",relation:"Fils"},createdAt:"2024-01-03T14:15:00Z"},{id:4,name:"Ferme Équine du Val",owner:"Sophie Moreau",address:"12 Chemin des Écuries, 78000 Versailles",coordinates:{latitude:48.8044,longitude:2.1232},phone:"01 39 50 12 34",email:"s.moreau@fermeequine.fr",types:["Équin"],totalAnimals:25,animalDetails:[{category:"Chevaux",maleCount:8,femaleCount:17,breeds:["Pur-sang","Selle français","Arabe"],ageGroups:["Poulains (0-3 ans)","Jeunes chevaux (3-7 ans)","Chevaux adultes (7+ ans)"]}],lastVisit:"2024-01-20",status:"active",veterinarian:"Dr. Martin",notes:"Écurie de prestige, chevaux de compétition",registrationNumber:"FR78123456789",surfaceArea:15.2,buildingDetails:"Écuries 800m², manège couvert 1200m², carrière extérieure 2000m²",equipmentDetails:"Tracteur, Système d'arrosage automatique, Éclairage LED, Système de sécurité",certifications:["Bien-être animal","Équitation de tradition française"],insuranceDetails:"Allianz - Police n°781234567",emergencyContact:{name:"Marc Moreau",phone:"06 12 34 56 78",relation:"Époux"},createdAt:"2024-01-04T08:30:00Z"},{id:5,name:"Rucher des Fleurs",owner:"Jean Dupuis",address:"45 Route des Champs, 13000 Marseille",coordinates:{latitude:43.2965,longitude:5.3698},phone:"04 91 23 45 67",email:"j.dupuis@rucherdesfleurs.fr",types:["Apiculture"],totalAnimals:120,animalDetails:[{category:"Abeilles",maleCount:0,femaleCount:120,breeds:["Abeille noire","Buckfast"],ageGroups:["Reines (1-3 ans)","Ouvrières (6 semaines)","Faux-bourdons (3 mois)"]}],lastVisit:"2024-01-12",status:"active",veterinarian:"Dr. Dupont",notes:"Production de miel de qualité, apiculture biologique",registrationNumber:"FR13123456789",surfaceArea:8.5,buildingDetails:"Miellerie 200m², entrepôt 150m², zone de conditionnement 100m²",equipmentDetails:"Extracteur de miel, Centrifugeuse, Filtres, Matériel de conditionnement",certifications:["Agriculture Biologique","Miel de France"],insuranceDetails:"MAIF - Police n°131234567",emergencyContact:{name:"Marie Dupuis",phone:"06 91 23 45 67",relation:"Épouse"},createdAt:"2024-01-05T11:15:00Z"}],Np=[{id:1,date:"2024-01-20",farmId:1,farmName:"Ferme des Prairies",type:"vaccination",animals:"15 bovins",veterinarian:"Dr. Dupont",description:"Vaccination contre la fièvre aphteuse",status:"completed",followUp:"Contrôle dans 6 mois",cost:450,notes:"Intervention réussie, aucun effet secondaire",createdAt:"2024-01-20T08:00:00Z"},{id:2,date:"2024-01-18",farmId:3,farmName:"Ferme Avicole Leroux",type:"urgence",animals:"50 poules",veterinarian:"Dr. Dupont",description:"Traitement infection respiratoire",status:"ongoing",followUp:"Suivi hebdomadaire",cost:320,notes:"Traitement antibiotique en cours",createdAt:"2024-01-18T14:30:00Z"},{id:3,date:"2024-01-15",farmId:2,farmName:"Élevage Martin",type:"controle",animals:"Tous les porcins",veterinarian:"Dr. Martin",description:"Contrôle sanitaire trimestriel",status:"completed",followUp:"Prochain contrôle en avril",cost:280,notes:"Tous les paramètres dans les normes",createdAt:"2024-01-15T10:00:00Z"}],Sp=[{id:1,petId:1,petName:"Bella",clientId:1,clientName:"Marie Dubois",vaccineName:"DHPP",vaccineType:"core",vaccinationCategory:"new",dateGiven:"2024-01-15",nextDueDate:"2025-01-15",batchNumber:"VAC2024-001",veterinarian:"Dr. Martin",notes:"Première vaccination annuelle",status:"completed",cost:"45.00",location:"left_shoulder",manufacturer:"Zoetis",expirationDate:"2025-12-31",createdAt:"2024-01-15T10:30:00Z",isInStock:!1,stockQuantity:0,stockDeducted:!1},{id:2,petId:1,petName:"Bella",clientId:1,clientName:"Marie Dubois",vaccineName:"Rage",vaccineType:"rabies",vaccinationCategory:"new",dateGiven:"2024-01-15",nextDueDate:"2027-01-15",batchNumber:"RAB2024-005",veterinarian:"Dr. Martin",notes:"Vaccination antirabique obligatoire",status:"completed",cost:"35.00",location:"right_shoulder",manufacturer:"Merial",expirationDate:"2026-08-15",createdAt:"2024-01-15T10:45:00Z",isInStock:!1,stockQuantity:0,stockDeducted:!1},{id:3,petId:2,petName:"Whiskers",clientId:2,clientName:"Jean Martin",vaccineName:"FVRCP",vaccineType:"core",vaccinationCategory:"new",dateGiven:"2023-08-22",nextDueDate:"2024-08-22",batchNumber:"CAT2023-012",veterinarian:"Dr. Dupont",notes:"Vaccination de base pour chat",status:"overdue",cost:"40.00",location:"subcutaneous",manufacturer:"Virbac",expirationDate:"2025-06-30",createdAt:"2023-08-22T14:20:00Z",isInStock:!1,stockQuantity:0,stockDeducted:!1},{id:4,petId:3,petName:"Rex",clientId:3,clientName:"Sophie Leroux",vaccineName:"Bordetella",vaccineType:"non-core",vaccinationCategory:"new",dateGiven:"2024-01-18",nextDueDate:"2025-01-18",batchNumber:"BOR2024-008",veterinarian:"Dr. Martin",notes:"Vaccination contre la toux de chenil",status:"completed",cost:"30.00",location:"left_shoulder",manufacturer:"Zoetis",expirationDate:"2025-09-30",createdAt:"2024-01-18T16:15:00Z",isInStock:!1,stockQuantity:0,stockDeducted:!1},{id:5,petId:1,petName:"Bella",clientId:1,clientName:"Marie Dubois",vaccineName:"Lyme",vaccineType:"non-core",vaccinationCategory:"new",dateGiven:"2024-01-25",nextDueDate:"2024-04-25",batchNumber:"LYM2024-003",veterinarian:"Dr. Martin",notes:"Vaccination contre la maladie de Lyme",status:"scheduled",cost:"50.00",location:"left_hip",manufacturer:"Boehringer Ingelheim",expirationDate:"2025-11-20",createdAt:"2024-01-25T09:00:00Z",isInStock:!1,stockQuantity:0,stockDeducted:!1}],Pc=[{id:1,petId:1,petName:"Bella",clientId:1,clientName:"Marie Dubois",productName:"Frontline Combo Spot-On",productType:"flea_tick",targetParasites:"Puces, Tiques, Poux broyeurs",dateGiven:"2024-01-10",nextDueDate:"2024-02-10",dosage:"1 pipette",administrationRoute:"topical",veterinarian:"Dr. Martin",notes:"Application entre les omoplates",batchNumber:"FRC2024-001",manufacturer:"Boehringer Ingelheim",weight:"28kg",status:"completed",cost:"25.50",sideEffects:"",createdAt:new Date().toISOString(),isInStock:!1,stockQuantity:0,stockDeducted:!1},{id:2,petId:2,petName:"Whiskers",clientId:2,clientName:"Jean Martin",productName:"Milbemax Chat",productType:"worming",targetParasites:"Vers ronds, Vers plats, Vers du cœur",dateGiven:"2024-01-05",nextDueDate:"2024-04-05",dosage:"1/2 comprimé",administrationRoute:"oral",veterinarian:"Dr. Dupont",notes:"Donné avec la nourriture",batchNumber:"MLX2024-008",manufacturer:"Novartis",weight:"4.5kg",status:"completed",cost:"18.00",sideEffects:"",createdAt:new Date().toISOString(),isInStock:!1,stockQuantity:0,stockDeducted:!1}],hh=[{id:1,name:"Frontline Combo Spot-On",species:"Chien",productType:"flea_tick",targetParasites:"Puces, Tiques, Poux broyeurs",description:"Protection complète contre puces et tiques pendant 8 semaines",manufacturer:"Boehringer Ingelheim",intervals:[{offsetDays:0,label:"Application initiale"},{offsetDays:28,label:"Rappel mensuel"}],weightRange:"2-60kg",ageRequirement:"Dès 8 semaines",seasonalTreatment:!0,notes:"Éviter le bain 48h avant et après application",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:2,name:"NexGard Spectra",species:"Chien",productType:"combined",targetParasites:"Puces, Tiques, Vers du cœur, Vers ronds, Vers plats",description:"Protection combinée externe et interne mensuelle",manufacturer:"Boehringer Ingelheim",intervals:[{offsetDays:0,label:"Première dose"},{offsetDays:30,label:"Dose mensuelle"}],weightRange:"2-60kg",ageRequirement:"Dès 8 semaines",seasonalTreatment:!1,notes:"Donner avec la nourriture pour une meilleure absorption",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:3,name:"Drontal Plus",species:"Chien",productType:"worming",targetParasites:"Vers ronds, Vers plats, Ankylostomes, Trichures",description:"Vermifugation large spectre",manufacturer:"Bayer",intervals:[{offsetDays:0,label:"Première vermifugation"},{offsetDays:90,label:"Rappel trimestriel"},{offsetDays:180,label:"Rappel semestriel"}],weightRange:"2-35kg",ageRequirement:"Dès 2 semaines",seasonalTreatment:!1,notes:"Administrer le matin à jeun, répéter selon exposition aux parasites",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:4,name:"Advocate Spot-On",species:"Chien",productType:"combined",targetParasites:"Puces, Vers du cœur, Vers ronds, Ankylostomes, Gale sarcoptique",description:"Protection topique combinée mensuelle",manufacturer:"Bayer",intervals:[{offsetDays:0,label:"Application initiale"},{offsetDays:30,label:"Application mensuelle"}],weightRange:"1-40kg",ageRequirement:"Dès 7 semaines",seasonalTreatment:!1,notes:"Appliquer sur peau sèche entre les omoplates",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:5,name:"Frontline Combo Chat",species:"Chat",productType:"flea_tick",targetParasites:"Puces, Tiques",description:"Protection mensuelle contre puces et tiques chez le chat",manufacturer:"Boehringer Ingelheim",intervals:[{offsetDays:0,label:"Application initiale"},{offsetDays:28,label:"Rappel mensuel"}],weightRange:"1-8kg",ageRequirement:"Dès 8 semaines",seasonalTreatment:!0,notes:"Attention aux réactions cutanées, surveiller 24h après application",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:6,name:"Stronghold Plus",species:"Chat",productType:"combined",targetParasites:"Puces, Vers du cœur, Vers ronds, Ankylostomes, Gale des oreilles",description:"Protection combinée mensuelle pour chats",manufacturer:"Zoetis",intervals:[{offsetDays:0,label:"Application initiale"},{offsetDays:30,label:"Application mensuelle"}],weightRange:"0.5-8kg",ageRequirement:"Dès 6 semaines",seasonalTreatment:!1,notes:"Efficace contre gale des oreilles en 1 application",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:7,name:"Milbemax Chat",species:"Chat",productType:"worming",targetParasites:"Vers ronds, Vers plats, Vers du cœur",description:"Vermifugation complète pour chats",manufacturer:"Novartis",intervals:[{offsetDays:0,label:"Première vermifugation"},{offsetDays:90,label:"Rappel trimestriel"}],weightRange:"0.5-8kg",ageRequirement:"Dès 6 semaines",seasonalTreatment:!1,notes:"Comprimés appétents, peut être donné avec ou sans nourriture",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:8,name:"Eprinex Pour-On",species:"Bovins",productType:"external",targetParasites:"Mouches, Poux, Gales, Vers gastro-intestinaux",description:"Traitement pour-on systémique pour bovins",manufacturer:"Boehringer Ingelheim",intervals:[{offsetDays:0,label:"Application unique"},{offsetDays:84,label:"Rappel saisonnier"}],weightRange:"50-800kg",ageRequirement:"Tous âges",seasonalTreatment:!0,notes:"Temps d'attente viande: 15 jours, lait: 0 jour",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:9,name:"Panacur 100",species:"Bovins",productType:"worming",targetParasites:"Vers gastro-intestinaux, Vers pulmonaires",description:"Vermifuge oral pour bovins",manufacturer:"MSD",intervals:[{offsetDays:0,label:"Traitement initial"},{offsetDays:120,label:"Rappel saisonnier"}],weightRange:"50-800kg",ageRequirement:"Dès 2 semaines",seasonalTreatment:!1,notes:"Temps d'attente viande: 14 jours, lait: 3 jours",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:10,name:"Cydectin 0.1%",species:"Ovins",productType:"combined",targetParasites:"Vers gastro-intestinaux, Vers pulmonaires, Gales",description:"Traitement injectable pour ovins et caprins",manufacturer:"Boehringer Ingelheim",intervals:[{offsetDays:0,label:"Injection unique"},{offsetDays:90,label:"Rappel saisonnier"}],weightRange:"10-100kg",ageRequirement:"Dès 4 semaines",seasonalTreatment:!0,notes:"Temps d'attente viande: 35 jours",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}],nA=[{id:1,name:"Amoxicilline 500mg",category:"medication",subcategory:"Antibiotique",description:"Antibiotique à large spectre",manufacturer:"Boehringer Ingelheim",batchNumber:"AMX2024001",dosage:"500mg",unit:"box",currentStock:15,minimumStock:5,maximumStock:50,purchasePrice:20,sellingPrice:25.5,totalValue:300,expirationDate:"2025-12-31",supplier:"Pharmacie Vétérinaire Centrale",location:"Armoire A - Étagère 1",notes:"Stockage à température ambiante",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-15",isActive:!0,barcode:"1234567890123",sku:"MED-AMX-500"},{id:2,name:"Frontline Combo Spot-On",category:"medication",subcategory:"Antiparasitaire",description:"Traitement contre puces et tiques",manufacturer:"Boehringer Ingelheim",batchNumber:"FRC2024001",dosage:"1 pipette",unit:"pack",currentStock:8,minimumStock:10,maximumStock:100,purchasePrice:15,sellingPrice:18.75,totalValue:120,expirationDate:"2026-06-30",supplier:"VetoSupply Maroc",location:"Armoire B - Étagère 2",notes:"Pour chiens 20-40kg",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-10",isActive:!0,barcode:"2345678901234",sku:"ANT-FRONT-20-40"},{id:3,name:"DHPP Canine",category:"vaccine",subcategory:"Vaccin Core",description:"Vaccin contre Distemper, Hépatite, Parvovirus, Parainfluenza",manufacturer:"Merial",batchNumber:"DHPP2024001",dosage:"1 dose",unit:"vial",currentStock:25,minimumStock:10,maximumStock:100,purchasePrice:9.5,sellingPrice:12,totalValue:237.5,expirationDate:"2025-08-15",supplier:"Vaccins Vétérinaires SA",location:"Réfrigérateur - Étagère 1",notes:"Conservation 2-8°C",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-20",isActive:!0,barcode:"3456789012345",sku:"VAC-DHPP-001"},{id:4,name:"Rage Canine",category:"vaccine",subcategory:"Vaccin Obligatoire",description:"Vaccin antirabique obligatoire",manufacturer:"Merial",batchNumber:"RAB2024001",dosage:"1 dose",unit:"vial",currentStock:12,minimumStock:5,maximumStock:50,purchasePrice:12,sellingPrice:15,totalValue:144,expirationDate:"2025-10-20",supplier:"Vaccins Vétérinaires SA",location:"Réfrigérateur - Étagère 2",notes:"Conservation 2-8°C - Obligatoire",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-18",isActive:!0,barcode:"4567890123456",sku:"VAC-RAB-001"},{id:5,name:"Seringues 5ml",category:"consumable",subcategory:"Matériel d'injection",description:"Seringues stériles 5ml avec aiguilles",manufacturer:"BD Medical",batchNumber:"SYR2024001",dosage:"5ml",unit:"box",currentStock:50,minimumStock:20,maximumStock:200,purchasePrice:.35,sellingPrice:.45,totalValue:17.5,expirationDate:"2027-03-15",supplier:"Matériel Médical Pro",location:"Armoire C - Étagère 1",notes:"Stériles, usage unique",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-12",isActive:!0,barcode:"5678901234567",sku:"CON-SYR-5ML"},{id:6,name:"Masques chirurgicaux",category:"consumable",subcategory:"Protection",description:"Masques chirurgicaux jetables",manufacturer:"3M",batchNumber:"MSK2024001",dosage:"1 unité",unit:"box",currentStock:200,minimumStock:50,maximumStock:500,purchasePrice:.12,sellingPrice:.15,totalValue:24,expirationDate:"2026-12-31",supplier:"Protection Médicale",location:"Armoire D - Étagère 1",notes:"Type IIR, boîte de 50",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-08",isActive:!0,barcode:"6789012345678",sku:"CON-MSK-50"},{id:7,name:"Gants nitrile",category:"consumable",subcategory:"Protection",description:"Gants nitrile non poudrés",manufacturer:"Ansell",batchNumber:"GNT2024001",dosage:"1 paire",unit:"box",currentStock:30,minimumStock:10,maximumStock:100,purchasePrice:.2,sellingPrice:.25,totalValue:6,expirationDate:"2026-08-20",supplier:"Protection Médicale",location:"Armoire D - Étagère 2",notes:"Taille M, boîte de 100",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-05",isActive:!0,barcode:"7890123456789",sku:"CON-GNT-M-100"},{id:8,name:"Thermomètre digital",category:"equipment",subcategory:"Diagnostic",description:"Thermomètre digital vétérinaire",manufacturer:"Gima",batchNumber:"THM2024001",dosage:"1 unité",unit:"unit",currentStock:3,minimumStock:2,maximumStock:10,purchasePrice:35,sellingPrice:45,totalValue:105,expirationDate:void 0,supplier:"Équipement Vétérinaire",location:"Bureau - Tiroir 1",notes:"Résistant à l'eau, écran LCD",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-03",isActive:!0,barcode:"8901234567890",sku:"EQP-THM-DIG"},{id:9,name:"Vitamines B Complex",category:"supplement",subcategory:"Vitamines",description:"Complexe vitaminique B pour animaux",manufacturer:"Virbac",batchNumber:"VIT2024001",dosage:"1ml",unit:"bottle",currentStock:5,minimumStock:3,maximumStock:20,purchasePrice:6.5,sellingPrice:8.5,totalValue:32.5,expirationDate:"2025-11-30",supplier:"Suppléments Vétérinaires",location:"Armoire A - Étagère 3",notes:"Flacon 50ml",lastUpdated:new Date().toISOString(),lastRestocked:"2024-01-14",isActive:!0,barcode:"9012345678901",sku:"SUP-VIT-B-50"}],Cp=[{id:1,name:"DAPP (DHPP)",species:"Chien",vaccineType:"core",description:"Distemper, Adénovirus, Parvovirus, Parainfluenza - Vaccination essentielle",manufacturer:"Zoetis",intervals:[{offsetDays:0,label:"J0 (première injection)"},{offsetDays:21,label:"21 jours (2e injection)"},{offsetDays:42,label:"42 jours (3e injection)"},{offsetDays:365,label:"1 an (rappel)"}],ageRequirement:"6-8 semaines (renforcer jusqu'à 16 semaines)",notes:"Protocole d'initiation à 6-8-12-16 semaines puis rappel à 1 an, puis triennal",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"},{id:2,name:"Rage (Rabies)",species:"Chien",vaccineType:"rabies",description:"Vaccination antirabique obligatoire selon la législation locale",manufacturer:"Merial",intervals:[{offsetDays:0,label:"À l'âge de 12 semaines minimum"},{offsetDays:365,label:"1 an (rappel)"}],ageRequirement:"12 semaines minimum",notes:"Rappel annuel ou biennal selon réglementation",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"},{id:3,name:"Bordetella bronchiseptica",species:"Chien",vaccineType:"non-core",description:"Protection contre la toux de chenil",manufacturer:"Zoetis",intervals:[{offsetDays:8,label:"8 semaines"}],ageRequirement:"8 semaines",notes:"Vaccination intracellulaire recommandée pour chiens en collectivité",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"},{id:4,name:"Leptospirose",species:"Chien",vaccineType:"non-core",description:"Protection contre les sérovars pathogènes de Leptospira",manufacturer:"Virbac",intervals:[{offsetDays:12,label:"12 semaines"}],ageRequirement:"12 semaines",notes:"Double sérovariels recommandé",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"},{id:5,name:"RCP (FVRCP)",species:"Chat",vaccineType:"core",description:"Calicivirose, Panleucopénie, Rhinotrachéite virale féline",manufacturer:"Virbac",intervals:[{offsetDays:0,label:"6 semaines"},{offsetDays:21,label:"12 semaines"},{offsetDays:28,label:"1 an"}],ageRequirement:"6-8-12 semaines",notes:"Renforcement à 1 an puis rappel triennal ou annuel selon protocole",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"},{id:6,name:"Rage (Rabies)",species:"Chat",vaccineType:"rabies",description:"Vaccination antirabique selon réglementation voyage",manufacturer:"Merial",intervals:[{offsetDays:365,label:"1 an"},{offsetDays:730,label:"2 ans"}],ageRequirement:"12 semaines",notes:"Rappel annuel ou biennal selon réglementation",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"},{id:7,name:"Distemper furet (Maladie de Carré)",species:"Furet",vaccineType:"core",description:"Protection contre le morbillivirus (Carré)",manufacturer:"Merial",intervals:[{offsetDays:6,label:"6 semaines"},{offsetDays:12,label:"8 semaines"}],ageRequirement:"6-8 semaines",notes:"Protocole similaire à celui des chiens",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"},{id:8,name:"Myxomatose",species:"Lapin",vaccineType:"core",description:"Protection contre la myxomatose",manufacturer:"Virbac",intervals:[{offsetDays:180,label:"180 jours"}],ageRequirement:"5-6 semaines",notes:"Vaccination semestrielle",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"},{id:9,name:"VHD (Maladie hémorragique virale)",species:"Lapin",vaccineType:"core",description:"Protection contre VHD de type 1 et 2",manufacturer:"Virbac",intervals:[{offsetDays:6,label:"6 semaines"}],ageRequirement:"6 semaines",notes:"Rappel annuel",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2025-09-01T00:00:00Z"}];function WS({children:e}){const t=()=>{try{const F=localStorage.getItem("vetpro-clients"),Z=localStorage.getItem("vetpro-pets"),se=localStorage.getItem("vetpro-consultations"),Ae=localStorage.getItem("vetpro-appointments"),Me=localStorage.getItem("vetpro-prescriptions"),_e=localStorage.getItem("vetpro-farms"),Fe=localStorage.getItem("vetpro-farmInterventions"),nn=localStorage.getItem("vetpro-vaccinations"),zt=localStorage.getItem("vetpro-vaccinationProtocols"),We=localStorage.getItem("vetpro-antiparasitics"),hn=localStorage.getItem("vetpro-antiparasiticProtocols"),$r=localStorage.getItem("vetpro-stockItems"),Ri=localStorage.getItem("vetpro-stockAlerts"),Li=localStorage.getItem("vetpro-stockMovements"),zf=localStorage.getItem("vetpro-accountingEntries");if(F&&Z){const EB=JSON.parse(F),bC=JSON.parse(Z),OB=se?JSON.parse(se):yp,DB=Ae?JSON.parse(Ae):jp,MB=Me?JSON.parse(Me):bp,IB=_e?JSON.parse(_e):wp,$B=Fe?JSON.parse(Fe):Np,RB=nn?JSON.parse(nn):Sp,LB=zt?JSON.parse(zt):Cp,FB=We?JSON.parse(We):Pc,BB=hn?JSON.parse(hn):hh,zB=$r?JSON.parse($r):nA,VB=Ri?JSON.parse(Ri):[],qB=Li?JSON.parse(Li):[],UB=zf?JSON.parse(zf):[];return{clients:EB.map(wC=>({...wC,pets:bC.filter(WB=>WB.ownerId===wC.id)})),pets:bC,consultations:OB,appointments:DB,prescriptions:MB,farms:IB,farmInterventions:$B,vaccinations:RB,vaccinationProtocols:LB,antiparasitics:FB,antiparasiticProtocols:BB,stockItems:zB,stockAlerts:VB,stockMovements:qB,accountingEntries:UB}}}catch(F){console.error("Erreur lors du chargement des données:",F)}return{clients:tA.map(F=>({...F,pets:dh.filter(Z=>Z.ownerId===F.id)})),pets:dh,consultations:yp,appointments:jp,prescriptions:bp,farms:wp,farmInterventions:Np,vaccinations:Sp,vaccinationProtocols:Cp,antiparasitics:Pc,antiparasiticProtocols:hh,stockItems:nA,stockAlerts:[],stockMovements:[],accountingEntries:[]}},n=(q,F,Z,se=d,Ae=m,Me=v,_e=g,Fe=y,nn=C,zt=N,We=_,hn=A,$r=k,Ri=D,Li=B)=>{try{localStorage.setItem("vetpro-clients",JSON.stringify(q)),localStorage.setItem("vetpro-pets",JSON.stringify(F)),localStorage.setItem("vetpro-consultations",JSON.stringify(Z)),localStorage.setItem("vetpro-appointments",JSON.stringify(se)),localStorage.setItem("vetpro-prescriptions",JSON.stringify(Ae)),localStorage.setItem("vetpro-farms",JSON.stringify(Me)),localStorage.setItem("vetpro-farmInterventions",JSON.stringify(_e)),localStorage.setItem("vetpro-vaccinations",JSON.stringify(Fe)),localStorage.setItem("vetpro-vaccinationProtocols",JSON.stringify(nn)),localStorage.setItem("vetpro-antiparasitics",JSON.stringify(zt)),localStorage.setItem("vetpro-antiparasiticProtocols",JSON.stringify(We)),localStorage.setItem("vetpro-stockItems",JSON.stringify(hn)),localStorage.setItem("vetpro-stockAlerts",JSON.stringify($r)),localStorage.setItem("vetpro-stockMovements",JSON.stringify(Ri)),localStorage.setItem("vetpro-accountingEntries",JSON.stringify(Li))}catch(zf){console.error("Erreur lors de la sauvegarde des données:",zf)}},r=t(),[a,i]=j.useState(r.clients),[o,l]=j.useState(r.pets),[c,u]=j.useState(r.consultations),[d,h]=j.useState(r.appointments),[m,f]=j.useState(r.prescriptions),[v,p]=j.useState(r.farms),[g,x]=j.useState(r.farmInterventions),[y,b]=j.useState(r.vaccinations),[C,w]=j.useState(r.vaccinationProtocols),[N,S]=j.useState(r.antiparasitics),[_,P]=j.useState(r.antiparasiticProtocols),[A,E]=j.useState(r.stockItems||[]),[k,I]=j.useState(r.stockAlerts||[]),[D,U]=j.useState(r.stockMovements||[]),[B,K]=j.useState(r.accountingEntries||[]);j.useEffect(()=>{localStorage.getItem("vetpro-antiparasiticProtocols")||localStorage.setItem("vetpro-antiparasiticProtocols",JSON.stringify(hh)),localStorage.getItem("vetpro-antiparasitics")||(localStorage.setItem("vetpro-antiparasitics",JSON.stringify(Pc)),S(Pc))},[]),j.useEffect(()=>{const q=new Date;new Date(q.getFullYear(),q.getMonth(),1),new Date(q.getFullYear(),q.getMonth()+1,0)},[]),j.useEffect(()=>{const q=new Date,F=new Date(q.getFullYear(),q.getMonth(),1),Z=new Date(q.getFullYear(),q.getMonth()+1,0);n0(F.toISOString().split("T")[0],Z.toISOString().split("T")[0]),r0(F.toISOString().split("T")[0],Z.toISOString().split("T")[0])},[c,y,N,m,D]),j.useEffect(()=>{},[N]),j.useEffect(()=>{a.length>0&&c.length>=0&&y.length>=0&&N.length>=0&&d.length>=0&&a.forEach(q=>{ne(q.id)})},[a.length,c.length,y.length,N.length,d.length]);const T=q=>{const F={...q,name:`${q.firstName} ${q.lastName}`,id:Math.max(...a.map(se=>se.id),0)+1,pets:[],lastVisit:new Date().toISOString().split("T")[0],totalVisits:0},Z=[...a,F];i(Z),n(Z,o,c,d,m,v,g,y)},$=q=>{const F={...q,id:Math.max(...o.map(Ae=>Ae.id),0)+1,status:q.status||"healthy",lastVisit:new Date().toISOString().split("T")[0]},Z=[...o,F];l(Z);const se=a.map(Ae=>Ae.id===q.ownerId?{...Ae,pets:[...Ae.pets,{id:F.id,name:F.name,type:F.type,breed:F.breed,birthDate:F.birthDate,weight:F.weight,color:F.color,microchip:F.microchip,medicalNotes:F.medicalNotes,photo:F.photo,ownerId:F.ownerId,owner:F.owner,status:F.status,lastVisit:F.lastVisit,nextAppointment:F.nextAppointment,vaccinations:F.vaccinations}]}:Ae);i(se),n(se,Z,c,d,m,v,g,y)},G=(q,F)=>{const Z=a.map(se=>se.id===q?{...se,...F,name:F.firstName&&F.lastName?`${F.firstName} ${F.lastName}`:se.name}:se);i(Z),n(Z,o,c,d,m,v,g,y)},Q=(q,F)=>{({...o.find(Ae=>Ae.id===q),...F});const Z=o.map(Ae=>Ae.id===q?{...Ae,...F}:Ae);l(Z);const se=a.map(Ae=>({...Ae,pets:Ae.pets.map(Me=>Me.id===q?{...Me,...F}:Me)}));i(se),n(se,Z,c)},ne=q=>{const F=a.find(We=>We.id===q);if(!F)return;const Z=c.filter(We=>We.clientId===q),se=y.filter(We=>We.clientId===q),Ae=N.filter(We=>We.clientId===q),Me=d.filter(We=>We.clientId===q&&We.status==="completed"),_e=Z.length+se.length+Ae.length+Me.length,Fe=[...Z.map(We=>({date:We.date,type:"consultation"})),...se.map(We=>({date:We.dateGiven,type:"vaccination"})),...Ae.map(We=>({date:We.dateGiven,type:"antiparasitic"})),...Me.map(We=>({date:We.date,type:"appointment"}))],nn=Fe.length>0?Fe.reduce((We,hn)=>new Date(hn.date)>new Date(We.date)?hn:We).date:F.lastVisit,zt=a.map(We=>We.id===q?{...We,totalVisits:_e,lastVisit:nn}:We);return i(zt),{totalVisits:_e,lastVisit:nn}},oe=q=>{const F={...q,id:Math.max(...A.map(se=>se.id),0)+1,lastUpdated:new Date().toISOString(),totalValue:q.currentStock*q.purchasePrice},Z=[...A,F];return E(Z),n(a,o,c,d,m,v,g,y,C,N,_,Z,k,D),F},M=(q,F)=>{const Z=A.map(se=>{if(se.id===q){const Ae={...se,...F};return(F.currentStock!==void 0||F.purchasePrice!==void 0)&&(Ae.totalValue=Ae.currentStock*Ae.purchasePrice),Ae.lastUpdated=new Date().toISOString(),Ae}return se});return E(Z),n(a,o,c,d,m,v,g,y,C,N,_,Z,k,D),Z.find(se=>se.id===q)},ue=q=>{const F=A.filter(Z=>Z.id!==q);E(F),n(a,o,c,d,m,v,g,y,C,N,_,F,k,D)},ve=q=>{const F={...q,id:Math.max(...D.map(se=>se.id),0)+1},Z=[...D,F];return U(Z),n(a,o,c,d,m,v,g,y,C,N,_,A,k,Z),F},ce=()=>{const q=[],F=new Date().toISOString().split("T")[0],Z=new Date(Date.now()+30*24*60*60*1e3).toISOString().split("T")[0];return A.forEach(se=>{se.currentStock<=se.minimumStock&&q.push({id:q.length+1,itemId:se.id,itemName:se.name,type:"low_stock",message:`Stock bas: ${se.currentStock} ${se.unit} restant(s)`,severity:se.currentStock===0?"critical":"high",createdAt:new Date().toISOString(),isRead:!1}),se.expirationDate&&(se.expirationDate<F?q.push({id:q.length+1,itemId:se.id,itemName:se.name,type:"expired",message:`Expiré le ${se.expirationDate}`,severity:"critical",createdAt:new Date().toISOString(),isRead:!1}):se.expirationDate<=Z&&q.push({id:q.length+1,itemId:se.id,itemName:se.name,type:"expiring_soon",message:`Expire le ${se.expirationDate}`,severity:"medium",createdAt:new Date().toISOString(),isRead:!1}))}),q},re=q=>{const F={...q,id:Math.max(...c.map(Me=>Me.id),0)+1,createdAt:new Date().toISOString(),photos:q.photos||[]},Z=[...c,F];u(Z);const se=o.map(Me=>Me.id===q.petId?{...Me,lastVisit:q.date}:Me);l(se);const Ae=a.map(Me=>({...Me,pets:Me.pets.map(_e=>_e.id===q.petId?{..._e,lastVisit:q.date}:_e)}));i(Ae),ne(q.clientId),n(Ae,se,Z)},V=q=>{if(!o.find(Ae=>Ae.id===q))return;const Z=o.filter(Ae=>Ae.id!==q);l(Z);const se=a.map(Ae=>({...Ae,pets:Ae.pets.filter(Me=>Me.id!==q)}));i(se),n(se,Z,c)},le=()=>{localStorage.removeItem("vetpro-clients"),localStorage.removeItem("vetpro-pets"),localStorage.removeItem("vetpro-consultations"),localStorage.removeItem("vetpro-appointments"),localStorage.removeItem("vetpro-prescriptions"),localStorage.removeItem("vetpro-farms"),localStorage.removeItem("vetpro-farmInterventions"),localStorage.removeItem("vetpro-vaccinations"),localStorage.removeItem("vetpro-vaccinationProtocols"),localStorage.removeItem("vetpro-antiparasitics"),localStorage.removeItem("vetpro-antiparasiticProtocols");const q=tA.map(F=>({...F,pets:dh.filter(Z=>Z.ownerId===F.id)}));i(q),l(dh),u(yp),h(jp),f(bp),p(wp),x(Np),b(Sp),w(Cp),S(Pc),P(hh),n(q,dh,yp,jp,bp,wp,Np,Sp,Cp,Pc,hh)},W=()=>{const q={clients:a,pets:o,consultations:c,appointments:d,prescriptions:m,farms:v,farmInterventions:g,vaccinations:y,vaccinationProtocols:C,antiparasitics:N,antiparasiticProtocols:_},F=new Blob([JSON.stringify(q,null,2)],{type:"application/json"}),Z=URL.createObjectURL(F),se=document.createElement("a");se.href=Z,se.download=`vetpro-data-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(se),se.click(),document.body.removeChild(se),URL.revokeObjectURL(Z)},X=q=>{const F=q.clients.map(Z=>({...Z,pets:q.pets.filter(se=>se.ownerId===Z.id)}));i(F),l(q.pets),u(q.consultations||[]),h(q.appointments||[]),f(q.prescriptions||[]),p(q.farms||[]),x(q.farmInterventions||[]),b(q.vaccinations||[]),w(q.vaccinationProtocols||[]),S(q.antiparasitics||[]),P(q.antiparasiticProtocols||[]),n(F,q.pets,q.consultations||[],q.appointments||[],q.prescriptions||[],q.farms||[],q.farmInterventions||[],q.vaccinations||[],q.vaccinationProtocols||[],q.antiparasitics||[],q.antiparasiticProtocols||[])},pe=(q,F)=>{const Z=c.map(se=>se.id===q?{...se,...F}:se);u(Z),n(a,o,Z)},fe=q=>{const F=c.filter(Z=>Z.id!==q);u(F),n(a,o,F)},Re=q=>{const F=A.find(Z=>Z.name.toLowerCase()===q.productName.toLowerCase()&&Z.category==="medication"&&Z.isActive);return F&&F.currentStock>=1?{...q,stockItemId:F.id,isInStock:!0,stockQuantity:F.currentStock,stockDeducted:!0}:F&&F.currentStock>0?{...q,stockItemId:F.id,isInStock:!0,stockQuantity:F.currentStock,stockDeducted:!1}:{...q,isInStock:!1,stockQuantity:0,stockDeducted:!1}},qe=q=>{const F=Re(q);let Z=[...A];if(F.stockDeducted&&F.stockItemId){const Me=Z.findIndex(_e=>_e.id===F.stockItemId);if(Me!==-1){const _e=Z[Me];Z[Me]={..._e,currentStock:_e.currentStock-1,lastUpdated:new Date().toISOString()},ve({itemId:F.stockItemId,itemName:F.productName,type:"out",quantity:1,reason:"Traitement antiparasitaire",reference:`Antiparasitaire #${Math.max(0,...N.map(Fe=>Fe.id))+1}`,performedBy:F.veterinarian,date:new Date().toISOString(),notes:`Traitement antiparasitaire de ${F.petName} - ${F.productName}`})}}const se={...F,id:Math.max(0,...N.map(Me=>Me.id))+1,createdAt:new Date().toISOString()},Ae=[...N,se];S(Ae),E(Z),ne(q.clientId),n(a,o,c,d,m,v,g,y,C,Ae,_,Z,k,D),localStorage.getItem("vetpro-antiparasitics")},ot=(q,F)=>{const Z=N.map(se=>se.id===q?{...se,...F}:se);S(Z),n(a,o,c,d,m,v,g,y,C,Z,_)},tt=q=>{const F=N.filter(Z=>Z.id!==q);S(F),n(a,o,c,d,m,v,g,y,C,F,_)},wt=q=>{const F={...q,id:Math.max(0,..._.map(se=>se.id))+1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},Z=[..._,F];P(Z),localStorage.setItem("vetpro-antiparasiticProtocols",JSON.stringify(Z))},ae=(q,F)=>{const Z=_.map(se=>se.id===q?{...se,...F,updatedAt:new Date().toISOString()}:se);P(Z),localStorage.setItem("vetpro-antiparasiticProtocols",JSON.stringify(Z))},Ee=q=>{const F=_.filter(Z=>Z.id!==q);P(F),localStorage.setItem("vetpro-antiparasiticProtocols",JSON.stringify(F))},nt=q=>N.find(F=>F.id===q),pt=q=>N.filter(Z=>Z.petId===q),Nn=q=>N.filter(F=>F.clientId===q),dt=()=>{const q=new Date().toISOString().split("T")[0];return N.filter(F=>F.nextDueDate&&F.nextDueDate<q&&F.status!=="completed")},_t=(q=7)=>{const F=new Date,Z=new Date(F.getTime()+q*24*60*60*1e3);return N.filter(se=>{if(!se.nextDueDate)return!1;const Ae=new Date(se.nextDueDate);return Ae>=F&&Ae<=Z})},ie=q=>N.filter(F=>F.status===q),Le=q=>_.find(F=>F.id===q),gs=q=>_.filter(F=>F.species===q&&F.isActive),vn=()=>_.filter(q=>q.isActive),$i=q=>a.find(F=>F.id===q),Sn=q=>o.find(F=>F.id===q),Ls=q=>c.find(F=>F.id===q),tr=q=>o.filter(F=>F.ownerId===q),vs=q=>c.filter(F=>F.petId===q),Xr=q=>c.filter(F=>F.clientId===q),H=q=>{const F={...q,id:Math.max(...d.map(se=>se.id),0)+1,createdAt:new Date().toISOString()},Z=[...d,F];h(Z),ne(q.clientId),n(a,o,c,Z,m)},Ce=(q,F)=>{const Z=d.map(se=>se.id===q?{...se,...F}:se);h(Z),n(a,o,c,Z,m)},ge=q=>{const F=d.filter(Z=>Z.id!==q);h(F),n(a,o,c,F,m)},dn=q=>d.find(F=>F.id===q),Ir=q=>d.filter(F=>F.clientId===q),Fs=q=>d.filter(F=>F.petId===q),xs=q=>d.filter(F=>F.date===q),e0=()=>{const q=new Date().toISOString().split("T")[0];return d.filter(F=>F.date>=q&&F.status!=="cancelled"&&F.status!=="completed").sort((F,Z)=>new Date(F.date+"T"+F.time).getTime()-new Date(Z.date+"T"+Z.time).getTime())},rt=()=>{const q=new Date().toISOString().split("T")[0];return d.filter(F=>F.date<q&&F.status==="scheduled").sort((F,Z)=>new Date(F.date+"T"+F.time).getTime()-new Date(Z.date+"T"+Z.time).getTime())},kt=q=>q.map(F=>{const Z=A.find(se=>se.name.toLowerCase()===F.name.toLowerCase()&&se.category==="medication"&&se.isActive);return Z&&Z.currentStock>=F.quantity?{...F,stockItemId:Z.id,isInStock:!0,stockQuantity:Z.currentStock,stockDeducted:!0}:Z&&Z.currentStock>0?{...F,stockItemId:Z.id,isInStock:!0,stockQuantity:Z.currentStock,stockDeducted:!1}:{...F,isInStock:!1,stockQuantity:0,stockDeducted:!1}}),Ut=q=>{const F=kt(q.medications);let Z=[...A];F.forEach(Me=>{if(Me.stockDeducted&&Me.stockItemId){const _e=Z.findIndex(Fe=>Fe.id===Me.stockItemId);if(_e!==-1){const Fe=Z[_e];Z[_e]={...Fe,currentStock:Fe.currentStock-Me.quantity,lastUpdated:new Date().toISOString()},ve({itemId:Me.stockItemId,itemName:Me.name,type:"out",quantity:Me.quantity,reason:"Prescription médicale",reference:`Prescription #${Math.max(...m.map(nn=>nn.id),0)+1}`,performedBy:q.prescribedBy,date:new Date().toISOString(),notes:`Prescription pour ${q.petName} - ${q.diagnosis}`})}}});const se={...q,medications:F,id:Math.max(...m.map(Me=>Me.id),0)+1,createdAt:new Date().toISOString()},Ae=[...m,se];f(Ae),E(Z),n(a,o,c,d,Ae,v,g,y,C,N,_,Z,k,D,B)},Jr=(q,F)=>{const Z=m.map(se=>se.id===q?{...se,...F}:se);f(Z),n(a,o,c,d,Z,v,g,y,C,N,_,A,k,D,B)},Zr=q=>{const F=m.filter(Z=>Z.id!==q);f(F),n(a,o,c,d,F,v,g,y,C,N,_,A,k,D,B)},va=q=>m.find(F=>F.id===q),Ya=q=>m.filter(F=>F.petId===q),es=q=>m.filter(F=>F.consultationId===q),xa=()=>m.filter(q=>q.status==="active").sort((q,F)=>new Date(F.date).getTime()-new Date(q.date).getTime()),Z8=q=>{const F={...q,id:Math.max(...v.map(se=>se.id),0)+1,createdAt:new Date().toISOString()},Z=[...v,F];p(Z),n(a,o,c,d,m,Z,g)},eB=(q,F)=>{const Z=v.map(se=>se.id===q?{...se,...F}:se);p(Z),n(a,o,c,d,m,Z,g)},tB=q=>{const F=v.filter(Z=>Z.id!==q);p(F),n(a,o,c,d,m,F,g)},nB=q=>{const F={...q,id:Math.max(...g.map(se=>se.id),0)+1,createdAt:new Date().toISOString()},Z=[...g,F];x(Z),n(a,o,c,d,m,v,Z)},rB=(q,F)=>{const Z=g.map(se=>se.id===q?{...se,...F}:se);x(Z),n(a,o,c,d,m,v,Z)},sB=q=>{const F=g.filter(Z=>Z.id!==q);x(F),n(a,o,c,d,m,v,F)},aB=q=>v.find(F=>F.id===q),iB=q=>g.find(F=>F.id===q),oB=q=>g.filter(F=>F.farmId===q),lB=()=>{const q=new Date().toISOString().split("T")[0];return g.filter(F=>F.date>=q&&F.status!=="cancelled").sort((F,Z)=>new Date(F.date).getTime()-new Date(Z.date).getTime())},cB=q=>v.filter(F=>F.status===q),uB=q=>{const F=A.find(Z=>Z.name.toLowerCase()===q.vaccineName.toLowerCase()&&Z.category==="vaccine"&&Z.isActive);return F&&F.currentStock>=1?{...q,stockItemId:F.id,isInStock:!0,stockQuantity:F.currentStock,stockDeducted:!0}:F&&F.currentStock>0?{...q,stockItemId:F.id,isInStock:!0,stockQuantity:F.currentStock,stockDeducted:!1}:{...q,isInStock:!1,stockQuantity:0,stockDeducted:!1}},t0=q=>{const F=uB(q);let Z=[...A];if(F.stockDeducted&&F.stockItemId){const Ae=Z.findIndex(Me=>Me.id===F.stockItemId);if(Ae!==-1){const Me=Z[Ae];Z[Ae]={...Me,currentStock:Me.currentStock-1,lastUpdated:new Date().toISOString()},ve({itemId:F.stockItemId,itemName:F.vaccineName,type:"out",quantity:1,reason:"Vaccination",reference:`Vaccination #${Math.max(...y.map(_e=>_e.id),0)+1}`,performedBy:F.veterinarian,date:new Date().toISOString(),notes:`Vaccination de ${F.petName} - ${F.vaccineName}`})}}const se={...F,id:Math.max(...y.map(Ae=>Ae.id),0)+1,createdAt:new Date().toISOString()};return b(Ae=>{const Me=[...Ae,se];return ne(q.clientId),n(a,o,c,d,m,v,g,Me,C,N,_,Z,k,D),Me}),E(Z),se.id},Ff=(q,F)=>{const Z=y.map(se=>se.id===q?{...se,...F}:se);b(Z),n(a,o,c,d,m,v,g,Z)},dB=q=>{const F=y.find(se=>se.id===q);if(!F)return;let Z=[...y];F.vaccinationCategory==="new"?(y.filter(se=>se.originalVaccinationId===q),Z=y.filter(se=>se.id!==q&&se.originalVaccinationId!==q)):Z=y.filter(se=>se.id!==q),b(Z),n(a,o,c,d,m,v,g,Z)},Bf=q=>y.find(F=>F.id===q),hB=q=>y.filter(F=>F.petId===q),mB=q=>y.filter(F=>F.clientId===q),fB=()=>{const q=new Date().toISOString().split("T")[0];return y.filter(F=>F.nextDueDate<q&&F.status!=="completed").sort((F,Z)=>new Date(F.nextDueDate).getTime()-new Date(Z.nextDueDate).getTime())},pB=()=>{const q=new Date,F=new Date(q.getTime()+30*24*60*60*1e3).toISOString().split("T")[0],Z=q.toISOString().split("T")[0];return y.filter(se=>se.nextDueDate>=Z&&se.nextDueDate<=F&&se.status!=="completed").sort((se,Ae)=>new Date(se.nextDueDate).getTime()-new Date(Ae.nextDueDate).getTime())},gB=q=>y.filter(F=>F.status===q),vB=()=>{const q=new Date().toISOString().split("T")[0];let F=!1;const Z=y.map(se=>se.status==="completed"?se:se.nextDueDate<q&&se.status!=="overdue"?(F=!0,{...se,status:"overdue"}):se.nextDueDate>=q&&se.status!=="scheduled"?(F=!0,{...se,status:"scheduled"}):se);return F&&(b(Z),n(a,o,c,d,m,v,g,Z)),Z},xB=q=>{const F={...q,id:Math.max(...C.map(se=>se.id),0)+1,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},Z=[...C,F];w(Z),n(a,o,c,d,m,v,g,y,Z)},yB=(q,F)=>{const Z=C.map(se=>se.id===q?{...se,...F,updatedAt:new Date().toISOString()}:se);w(Z),n(a,o,c,d,m,v,g,y,Z)},jB=q=>{const F=C.filter(Z=>Z.id!==q);w(F),n(a,o,c,d,m,v,g,y,F)},bB=q=>C.find(F=>F.id===q),wB=q=>C.filter(F=>F.species===q&&F.isActive),NB=()=>C.filter(q=>q.isActive),SB=(q,F,Z)=>{const se=C.find(_e=>_e.name===q&&_e.species===F&&_e.isActive);if(!se||!se.intervals.length)return null;const Ae=se.intervals[se.intervals.length-1],Me=new Date(Z);return Me.setDate(Me.getDate()+Ae.offsetDays),Me.toISOString().split("T")[0]},CB=(q,F,Z)=>{var zt;const se=Bf(q);if(!se)return;const Ae={clientId:se.clientId,clientName:se.clientName,petId:se.petId,petName:se.petName,date:F,time:Z,type:"vaccination",duration:30,reason:`Rappel vaccinal - ${se.vaccineName}`,notes:`Rappel pour ${se.vaccineName} (vaccination originale ID: ${q})`,status:"scheduled",reminderSent:!1};H(Ae);const Me=Math.max(...d.map(We=>We.id),0)+1,_e={petId:se.petId,petName:se.petName,clientId:se.clientId,clientName:se.clientName,vaccineName:se.vaccineName,vaccineType:se.vaccineType,vaccinationCategory:"reminder",dateGiven:F,nextDueDate:se.nextDueDate,batchNumber:se.batchNumber,veterinarian:se.veterinarian,notes:`Rappel de ${se.vaccineName} (original: ${q})`,status:"scheduled",cost:se.cost,location:se.location,manufacturer:se.manufacturer,originalVaccinationId:q,reminderAppointmentId:Me,isReminder:!0};t0(_e);const Fe={id:Math.max(...((zt=se.reminderHistory)==null?void 0:zt.map(We=>We.id))||[0],0)+1,vaccinationId:q,appointmentId:Me,scheduledDate:F,status:"scheduled",notes:`Rappel programmé pour ${se.vaccineName}`,createdAt:new Date().toISOString()},nn=[...se.reminderHistory||[],Fe];return Ff(q,{reminderHistory:nn}),{appointment:Ae,reminderVaccination:_e,reminder:Fe}},_B=(q,F,Z)=>{var _e;const se=Bf(q);if(!se)return;const Me={status:"completed",reminderHistory:((_e=se.reminderHistory)==null?void 0:_e.map(Fe=>Fe.appointmentId===F?{...Fe,status:"completed"}:Fe))||[],reminderAppointmentId:void 0};return Z&&(Me.nextDueDate=Z),Ff(q,Me),Ce(F,{status:"completed"}),se},PB=(q,F)=>{const Z=Bf(q);if(!Z)return null;const se={petId:Z.petId,petName:Z.petName,clientId:Z.clientId,clientName:Z.clientName,vaccineName:Z.vaccineName,vaccineType:Z.vaccineType,vaccinationCategory:"reminder",dateGiven:F.datePerformed,nextDueDate:F.newNextDueDate||Z.nextDueDate,calculatedDueDate:Z.calculatedDueDate,batchNumber:F.batchNumber||Z.batchNumber,veterinarian:F.veterinarian,notes:F.notes||`Rappel effectué - ${Z.vaccineName}`,status:"completed",cost:Z.cost,location:Z.location,manufacturer:Z.manufacturer,expirationDate:Z.expirationDate,adverseReactions:Z.adverseReactions,originalVaccinationId:q,isReminder:!0};t0(se);const Ae={status:"completed",reminderAppointmentId:void 0};return F.newNextDueDate&&(Ae.nextDueDate=F.newNextDueDate),Ff(q,Ae),se},vc=q=>{const F={...q,id:Math.max(...B.map(se=>se.id),0)+1,createdAt:new Date().toISOString()},Z=[...B,F];return K(Z),n(a,o,c,d,m,v,g,y,C,N,_,A,k,D,Z),F},AB=(q,F)=>{const Z=B.map(se=>se.id===q?{...se,...F}:se);K(Z),n(a,o,c,d,m,v,g,y,C,N,_,A,k,D,Z)},kB=q=>{const F=B.filter(Z=>Z.id!==q);K(F),n(a,o,c,d,m,v,g,y,C,N,_,A,k,D,F)},n0=(q,F)=>{const Z=new Date(q),se=new Date(F);let Ae=0;const Me={consultations:0,vaccinations:0,antiparasitics:0,prescriptions:0,stockSales:0,manualEntries:0,recurringCharges:0};return c.filter(_e=>{const Fe=new Date(_e.date);return Fe>=Z&&Fe<=se}).forEach(_e=>{var zt;const Fe=parseFloat(((zt=_e.cost)==null?void 0:zt.toString())||"0");Ae+=Fe,Me.consultations+=Fe,B.find(We=>We.source==="consultation"&&We.sourceId===_e.id)||vc({type:"revenue",category:"automatic",frequency:"occasional",description:`Consultation - ${_e.petName}`,amount:Fe,date:_e.date,reference:`Consultation #${_e.id}`,source:"consultation",sourceId:_e.id,notes:`Consultation automatique pour ${_e.petName}`})}),y.filter(_e=>{const Fe=new Date(_e.dateGiven);return Fe>=Z&&Fe<=se}).forEach(_e=>{var zt;const Fe=parseFloat(((zt=_e.cost)==null?void 0:zt.toString())||"0");Ae+=Fe,Me.vaccinations+=Fe,B.find(We=>We.source==="vaccination"&&We.sourceId===_e.id)||vc({type:"revenue",category:"automatic",frequency:"occasional",description:`Vaccination - ${_e.vaccineName}`,amount:Fe,date:_e.dateGiven,reference:`Vaccination #${_e.id}`,source:"vaccination",sourceId:_e.id,notes:`Vaccination automatique pour ${_e.petName}`})}),N.filter(_e=>{const Fe=new Date(_e.dateGiven);return Fe>=Z&&Fe<=se}).forEach(_e=>{var zt;const Fe=parseFloat(((zt=_e.cost)==null?void 0:zt.toString())||"0");Ae+=Fe,Me.antiparasitics+=Fe,B.find(We=>We.source==="antiparasitic"&&We.sourceId===_e.id)||vc({type:"revenue",category:"automatic",frequency:"occasional",description:`Antiparasitaire - ${_e.productName}`,amount:Fe,date:_e.dateGiven,reference:`Antiparasitaire #${_e.id}`,source:"antiparasitic",sourceId:_e.id,notes:`Antiparasitaire automatique pour ${_e.petName}`})}),m.filter(_e=>{const Fe=new Date(_e.createdAt);return Fe>=Z&&Fe<=se}).forEach(_e=>{const Fe=_e.medications.reduce((zt,We)=>{var hn;return zt+parseFloat(((hn=We.cost)==null?void 0:hn.toString())||"0")*We.quantity},0);Ae+=Fe,Me.prescriptions+=Fe,!B.find(zt=>zt.source==="prescription"&&zt.sourceId===_e.id)&&Fe>0&&vc({type:"revenue",category:"automatic",frequency:"occasional",description:`Prescription - ${_e.petName}`,amount:Fe,date:_e.createdAt,reference:`Prescription #${_e.id}`,source:"prescription",sourceId:_e.id,notes:`Prescription automatique pour ${_e.petName}`})}),{totalRevenue:Ae,revenueBreakdown:Me}},r0=(q,F)=>{const Z=new Date(q),se=new Date(F);let Ae=0;const Me={stockPurchases:0,salaries:0,rent:0,taxes:0,insurance:0,other:0,manualEntries:0,recurringCharges:0};return D.filter(_e=>{const Fe=new Date(_e.date);return Fe>=Z&&Fe<=se&&_e.type==="in"&&_e.reason==="Achat fournisseur"}).forEach(_e=>{const Fe=A.find(nn=>nn.id===_e.itemId);if(Fe){const nn=Fe.purchasePrice*_e.quantity;Ae+=nn,Me.stockPurchases+=nn,B.find(We=>We.source==="stock_purchase"&&We.reference===_e.reference)||vc({type:"expense",category:"automatic",frequency:"occasional",description:`Achat stock - ${_e.itemName}`,amount:nn,date:_e.date,reference:_e.reference,source:"stock_purchase",notes:`Achat automatique de ${_e.quantity} ${_e.itemName}`})}}),{totalExpenses:Ae,expenseBreakdown:Me}},TB=(q,F,Z)=>{const{totalRevenue:se,revenueBreakdown:Ae}=n0(F,Z),{totalExpenses:Me,expenseBreakdown:_e}=r0(F,Z),Fe=B.filter(hn=>{const $r=new Date(hn.date),Ri=new Date(F),Li=new Date(Z);return $r>=Ri&&$r<=Li&&hn.category==="manual"&&hn.type==="revenue"}).reduce((hn,$r)=>hn+$r.amount,0),nn=B.filter(hn=>{const $r=new Date(hn.date),Ri=new Date(F),Li=new Date(Z);return $r>=Ri&&$r<=Li&&hn.category==="manual"&&hn.type==="expense"}).reduce((hn,$r)=>hn+$r.amount,0);Ae.manualEntries=Fe,_e.manualEntries=nn;const zt=se+Fe,We=Me+nn;return{period:q,totalRevenue:zt,totalExpenses:We,netIncome:zt-We,revenueBreakdown:Ae,expenseBreakdown:_e}};return s.jsx(RR.Provider,{value:{clients:a,pets:o,consultations:c,appointments:d,prescriptions:m,farms:v,farmInterventions:g,vaccinations:y,vaccinationProtocols:C,antiparasitics:N,antiparasiticProtocols:_,stockItems:A,stockAlerts:k,stockMovements:D,accountingEntries:B,addClient:T,addPet:$,addConsultation:re,addAppointment:H,addPrescription:Ut,addFarm:Z8,addFarmIntervention:nB,addVaccination:t0,addVaccinationProtocol:xB,addAntiparasitic:qe,addAntiparasiticProtocol:wt,addStockItem:oe,addStockMovement:ve,addAccountingEntry:vc,updateAccountingEntry:AB,deleteAccountingEntry:kB,calculateAutomaticRevenue:n0,calculateAutomaticExpenses:r0,generateAccountingSummary:TB,updateClient:G,updatePet:Q,updateConsultation:pe,updateAppointment:Ce,updatePrescription:Jr,updateFarm:eB,updateFarmIntervention:rB,updateVaccination:Ff,updateVaccinationProtocol:yB,updateAntiparasitic:ot,updateAntiparasiticProtocol:ae,updateStockItem:M,deletePet:V,deleteConsultation:fe,deleteAppointment:ge,deletePrescription:Zr,deleteFarm:tB,deleteFarmIntervention:sB,deleteVaccination:dB,deleteVaccinationProtocol:jB,deleteAntiparasitic:tt,deleteAntiparasiticProtocol:Ee,deleteStockItem:ue,resetData:le,exportData:W,importData:X,getClientById:$i,getPetById:Sn,getConsultationById:Ls,getAppointmentById:dn,getPrescriptionById:va,getFarmById:aB,getFarmInterventionById:iB,getVaccinationById:Bf,getVaccinationProtocolById:bB,getVaccinationProtocolsBySpecies:wB,getActiveVaccinationProtocols:NB,getAntiparasiticById:nt,getAntiparasiticsByPetId:pt,getAntiparasiticsByClientId:Nn,getOverdueAntiparasitics:dt,getUpcomingAntiparasitics:_t,getAntiparasiticsByStatus:ie,getAntiparasiticProtocolById:Le,getAntiparasiticProtocolsBySpecies:gs,getActiveAntiparasiticProtocols:vn,getPetsByOwnerId:tr,getConsultationsByPetId:vs,getConsultationsByClientId:Xr,getAppointmentsByClientId:Ir,getAppointmentsByPetId:Fs,getAppointmentsByDate:xs,getUpcomingAppointments:e0,getOverdueAppointments:rt,getPrescriptionsByPetId:Ya,getPrescriptionsByConsultationId:es,getActivePrescriptions:xa,getFarmInterventionsByFarmId:oB,getUpcomingFarmInterventions:lB,getFarmsByStatus:cB,getVaccinationsByPetId:hB,getVaccinationsByClientId:mB,getOverdueVaccinations:fB,getUpcomingVaccinations:pB,getVaccinationsByStatus:gB,createVaccinationReminder:CB,completeVaccinationReminder:_B,confirmVaccinationReminder:PB,updateVaccinationStatuses:vB,calculateDueDateFromProtocol:SB,updateClientStats:ne,getStockAlerts:ce},children:e})}const bt=()=>{const e=j.useContext(RR);if(e===void 0)throw new Error("useClients must be used within a ClientProvider");return e},Y=j.forwardRef(({className:e,type:t,...n},r)=>s.jsx("input",{type:t,className:De("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));Y.displayName="Input";var kJ="Label",LR=j.forwardRef((e,t)=>s.jsx(Ve.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));LR.displayName=kJ;var FR=LR;const TJ=bf("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),O=j.forwardRef(({className:e,...t},n)=>s.jsx(FR,{ref:n,className:De(TJ(),e),...t}));O.displayName=FR.displayName;const ee=j.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:De("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));ee.displayName="Card";const he=j.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:De("flex flex-col space-y-1.5 p-6",e),...t}));he.displayName="CardHeader";const me=j.forwardRef(({className:e,...t},n)=>s.jsx("h3",{ref:n,className:De("text-2xl font-semibold leading-none tracking-tight",e),...t}));me.displayName="CardTitle";const qu=j.forwardRef(({className:e,...t},n)=>s.jsx("p",{ref:n,className:De("text-sm text-muted-foreground",e),...t}));qu.displayName="CardDescription";const te=j.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:De("p-6 pt-0",e),...t}));te.displayName="CardContent";const EJ=j.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:De("flex items-center p-6 pt-0",e),...t}));EJ.displayName="CardFooter";const OJ=bf("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Kg=j.forwardRef(({className:e,variant:t,...n},r)=>s.jsx("div",{ref:r,role:"alert",className:De(OJ({variant:t}),e),...n}));Kg.displayName="Alert";const DJ=j.forwardRef(({className:e,...t},n)=>s.jsx("h5",{ref:n,className:De("mb-1 font-medium leading-none tracking-tight",e),...t}));DJ.displayName="AlertTitle";const Gg=j.forwardRef(({className:e,...t},n)=>s.jsx("div",{ref:n,className:De("text-sm [&_p]:leading-relaxed",e),...t}));Gg.displayName="AlertDescription";function MJ(){const[e,t]=j.useState(""),[n,r]=j.useState(""),[a,i]=j.useState(!1),[o,l]=j.useState(""),[c,u]=j.useState(!1),[d,h]=j.useState(!1);qo();const m=DR(),f=SJ(),v=CJ(),p=async b=>{if(b.preventDefault(),l(""),!e||!n){l("Veuillez remplir tous les champs");return}try{await m.mutateAsync({email:e,password:n})}catch(C){l(C instanceof Error?C.message:"Une erreur inattendue est survenue")}},g=async()=>{l("");try{await f.mutateAsync()}catch{l("Erreur lors de la connexion avec Google")}},x=async b=>{if(b.preventDefault(),l(""),!e){l("Veuillez saisir votre email");return}try{await v.mutateAsync(e),h(!0)}catch(C){l(C instanceof Error?C.message:"Une erreur est survenue")}},y=()=>{u(!1),h(!1),l(""),r("")};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-green-50 dark:from-gray-900 dark:to-gray-800 px-4",children:s.jsxs(ee,{className:"w-full max-w-md",children:[s.jsxs(he,{className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"p-3 bg-primary/10 rounded-full",children:s.jsx(ft,{className:"h-8 w-8 text-primary"})})}),s.jsx(me,{className:"text-2xl font-bold",children:"VetPro CRM3"}),s.jsx(qu,{children:c?d?"Vérifiez votre email":"Réinitialiser votre mot de passe":"Connectez-vous à votre espace vétérinaire"})]}),s.jsx(te,{children:d?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Nous avons envoyé un lien de réinitialisation à ",s.jsx("strong",{children:e})]}),s.jsx("p",{className:"text-xs text-muted-foreground mb-6",children:"Cliquez sur le lien dans l'email pour réinitialiser votre mot de passe. Si vous ne voyez pas l'email, vérifiez votre dossier spam."})]}),s.jsxs(R,{onClick:y,className:"w-full",children:[s.jsx(B_,{className:"mr-2 h-4 w-4"}),"Retour à la connexion"]})]}):c?s.jsxs("form",{onSubmit:x,className:"space-y-4",children:[o&&s.jsx(Kg,{variant:"destructive",children:s.jsx(Gg,{children:o})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"reset-email",children:"Email"}),s.jsx(Y,{id:"reset-email",type:"email",placeholder:"votre.email@example.com",value:e,onChange:b=>t(b.target.value),disabled:v.isPending,required:!0}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Entrez l'adresse email associée à votre compte"})]}),s.jsx(R,{type:"submit",className:"w-full",disabled:v.isPending,children:v.isPending?s.jsxs(s.Fragment,{children:[s.jsx(Qn,{className:"mr-2 h-4 w-4 animate-spin"}),"Envoi en cours..."]}):"Envoyer le lien de réinitialisation"}),s.jsx("div",{className:"text-center",children:s.jsxs(R,{type:"button",variant:"link",onClick:y,className:"text-sm",children:[s.jsx(B_,{className:"mr-1 h-4 w-4"}),"Retour à la connexion"]})})]}):s.jsxs(s.Fragment,{children:[s.jsxs("form",{onSubmit:p,className:"space-y-4",children:[o&&s.jsx(Kg,{variant:"destructive",children:s.jsx(Gg,{children:o})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"email",children:"Email"}),s.jsx(Y,{id:"email",type:"email",placeholder:"vet@vetpro.com",value:e,onChange:b=>t(b.target.value),disabled:m.isPending,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"password",children:"Mot de passe"}),s.jsxs("div",{className:"relative",children:[s.jsx(Y,{id:"password",type:a?"text":"password",placeholder:"••••••••",value:n,onChange:b=>r(b.target.value),disabled:m.isPending,required:!0}),s.jsx(R,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>i(!a),disabled:m.isPending,children:a?s.jsx(Tb,{className:"h-4 w-4"}):s.jsx(An,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"flex justify-end",children:s.jsx(R,{type:"button",variant:"link",className:"text-xs p-0 h-auto",onClick:()=>u(!0),children:"Mot de passe oublié ?"})})]}),s.jsx(R,{type:"submit",className:"w-full",disabled:m.isPending,children:m.isPending?s.jsxs(s.Fragment,{children:[s.jsx(Qn,{className:"mr-2 h-4 w-4 animate-spin"}),"Connexion..."]}):"Se connecter"})]}),s.jsxs("div",{className:"relative my-6",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("span",{className:"w-full border-t"})}),s.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:s.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Ou continuer avec"})})]}),s.jsx(R,{type:"button",variant:"outline",className:"w-full",onClick:g,disabled:m.isPending||f.isPending,children:f.isPending?s.jsxs(s.Fragment,{children:[s.jsx(Qn,{className:"mr-2 h-4 w-4 animate-spin"}),"Connexion avec Google..."]}):s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"mr-2 h-4 w-4",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continuer avec Google"]})}),s.jsx("div",{className:"mt-6 text-center",children:s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Pas encore de compte ?"," ",s.jsx("a",{href:"/register",className:"text-primary hover:underline",children:"S'inscrire"})]})})]})})]})})}function dr({children:e}){const{isAuthenticated:t,isLoading:n,user:r}=qo(),[a,i]=j.useState(!1);return j.useEffect(()=>{if(n){const o=setTimeout(()=>{i(!0)},3e3);return()=>clearTimeout(o)}else i(!1)},[n]),a?s.jsx(ew,{to:"/login",replace:!0}):n&&!a?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Vérification de l'authentification..."})]})}):!t||!r?s.jsx(ew,{to:"/login",replace:!0}):s.jsx(s.Fragment,{children:e})}function IJ({children:e,redirectTo:t="/dashboard"}){const{isAuthenticated:n,isLoading:r,user:a}=qo(),[i,o]=j.useState(!1);return j.useEffect(()=>{if(r){const l=setTimeout(()=>{o(!0)},2e3);return()=>clearTimeout(l)}else o(!1)},[r]),i?s.jsx(s.Fragment,{children:e}):r&&!i?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Chargement..."})]})}):n&&a?s.jsx(ew,{to:t,replace:!0}):s.jsx(s.Fragment,{children:e})}const BR="/assets/vet-hero-UFBVcjRL.jpg";function $J(){return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("header",{className:"border-b",children:s.jsxs("div",{className:"container mx-auto px-6 py-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ft,{className:"h-8 w-8 text-primary"}),s.jsx("span",{className:"text-xl font-bold",children:"VetPro"})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx(R,{variant:"ghost",asChild:!0,children:s.jsx(Zs,{to:"/login",children:"Se connecter"})}),s.jsx(R,{asChild:!0,children:s.jsx(Zs,{to:"/register",children:"Commencer"})})]})]})}),s.jsx("section",{className:"py-20",children:s.jsx("div",{className:"container mx-auto px-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1 space-y-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ft,{className:"h-8 w-8 text-primary"}),s.jsx("span",{className:"text-sm font-medium text-primary",children:"Solution CRM Vétérinaire Complète"})]}),s.jsxs("h1",{className:"text-5xl font-bold leading-tight",children:["Gérez votre pratique",s.jsx("span",{className:"gradient-primary bg-clip-text text-transparent block",children:"vétérinaire efficacement"})]}),s.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl",children:"VetPro vous aide à gérer vos clients, leurs animaux, les rendez-vous, consultations et l'historique médical. Optimisez votre pratique avec notre solution tout-en-un."})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx(R,{size:"lg",className:"gap-2 medical-glow",asChild:!0,children:s.jsxs(Zs,{to:"/register",children:["Commencer gratuitement",s.jsx(kb,{className:"h-4 w-4"})]})}),s.jsx(R,{variant:"outline",size:"lg",className:"gap-2",asChild:!0,children:s.jsx(Zs,{to:"/login",children:"Voir la démo"})})]})]}),s.jsx("div",{className:"hidden lg:block",children:s.jsx("img",{src:BR,alt:"Vétérinaire professionnel",className:"w-96 h-64 object-cover rounded-xl shadow-medical"})})]})})}),s.jsx("section",{className:"py-20 bg-muted/30",children:s.jsxs("div",{className:"container mx-auto px-6",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Tout ce dont vous avez besoin pour votre clinique"}),s.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Une solution complète pour moderniser et optimiser votre pratique vétérinaire"})]}),s.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"bg-card p-6 rounded-xl border shadow-sm",children:[s.jsx(Va,{className:"h-12 w-12 text-primary mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Gestion des Clients"}),s.jsx("p",{className:"text-muted-foreground",children:"Gérez facilement vos clients et leurs animaux avec un système intuitif et complet."})]}),s.jsxs("div",{className:"bg-card p-6 rounded-xl border shadow-sm",children:[s.jsx(Ge,{className:"h-12 w-12 text-primary mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Rendez-vous"}),s.jsx("p",{className:"text-muted-foreground",children:"Planifiez et gérez vos rendez-vous avec un calendrier intelligent et flexible."})]}),s.jsxs("div",{className:"bg-card p-6 rounded-xl border shadow-sm",children:[s.jsx(_r,{className:"h-12 w-12 text-primary mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Consultations"}),s.jsx("p",{className:"text-muted-foreground",children:"Documentez vos consultations et maintenez un historique médical détaillé."})]}),s.jsxs("div",{className:"bg-card p-6 rounded-xl border shadow-sm",children:[s.jsx(SI,{className:"h-12 w-12 text-primary mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Statistiques"}),s.jsx("p",{className:"text-muted-foreground",children:"Analysez votre activité avec des rapports détaillés et des tableaux de bord."})]}),s.jsxs("div",{className:"bg-card p-6 rounded-xl border shadow-sm",children:[s.jsx(xr,{className:"h-12 w-12 text-primary mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Sécurisé"}),s.jsx("p",{className:"text-muted-foreground",children:"Vos données sont protégées avec les plus hauts standards de sécurité."})]}),s.jsxs("div",{className:"bg-card p-6 rounded-xl border shadow-sm",children:[s.jsx(ft,{className:"h-12 w-12 text-primary mb-4"}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Farm Management"}),s.jsx("p",{className:"text-muted-foreground",children:"Gérez les exploitations agricoles et suivez la santé des troupeaux."})]})]})]})}),s.jsx("section",{className:"py-20",children:s.jsx("div",{className:"container mx-auto px-6 text-center",children:s.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[s.jsx("h2",{className:"text-3xl font-bold",children:"Prêt à moderniser votre pratique ?"}),s.jsx("p",{className:"text-lg text-muted-foreground",children:"Rejoignez des centaines de vétérinaires qui font confiance à VetPro pour gérer leur clinique efficacement."}),s.jsx("div",{className:"flex gap-4 justify-center",children:s.jsx(R,{size:"lg",className:"gap-2 medical-glow",asChild:!0,children:s.jsxs(Zs,{to:"/register",children:["Commencer maintenant",s.jsx(kb,{className:"h-4 w-4"})]})})})]})})}),s.jsx("footer",{className:"border-t py-8",children:s.jsx("div",{className:"container mx-auto px-6 text-center text-muted-foreground",children:s.jsxs("p",{children:["© ",new Date().getFullYear()," VetPro. Tous droits réservés."]})})})]})}const RJ=()=>{const e=Td(),{toast:t}=it(),[n,r]=j.useState(!1),[a,i]=j.useState({username:"",fullName:"",email:"",password:"",confirmPassword:""}),o=u=>u.length<8?"Le mot de passe doit contenir au moins 8 caractères":/[A-Z]/.test(u)?/[a-z]/.test(u)?/\d/.test(u)?/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>?]/.test(u)?null:"Le mot de passe doit contenir au moins un caractère spécial":"Le mot de passe doit contenir au moins un chiffre":"Le mot de passe doit contenir au moins une lettre minuscule":"Le mot de passe doit contenir au moins une lettre majuscule",l=u=>{i(d=>({...d,[u.target.id]:u.target.value}))},c=async u=>{if(u.preventDefault(),r(!0),a.password!==a.confirmPassword){t({title:"Erreur",description:"Les mots de passe ne correspondent pas",variant:"destructive"}),r(!1);return}const d=o(a.password);if(d){t({title:"Erreur",description:d,variant:"destructive"}),r(!1);return}try{await gJ(a.email,a.password,a.username,a.fullName,"assistant"),t({title:"Inscription réussie",description:"Votre compte a été créé avec succès. Veuillez vérifier votre email et cliquer sur le lien de confirmation pour pouvoir vous connecter."}),e("/login")}catch(h){const m=h instanceof Error?h.message:"Une erreur est survenue lors de l'inscription";t({title:"Erreur d'inscription",description:m,variant:"destructive"})}finally{r(!1)}};return s.jsx("div",{className:"min-h-screen bg-gradient-hero flex items-center justify-center p-6",children:s.jsxs(ee,{className:"w-full max-w-md",children:[s.jsxs(he,{className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx(ft,{className:"h-12 w-12 text-primary"})}),s.jsx(me,{className:"text-2xl gradient-primary bg-clip-text text-transparent",children:"VetPro CRM"}),s.jsx(qu,{children:"Créez votre compte vétérinaire"})]}),s.jsxs(te,{children:[s.jsxs("form",{onSubmit:c,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"username",children:"Nom d'utilisateur"}),s.jsx(Y,{id:"username",placeholder:"martin.dubois",value:a.username,onChange:l,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"fullName",children:"Nom complet"}),s.jsx(Y,{id:"fullName",placeholder:"Dr. Martin Dubois",value:a.fullName,onChange:l,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"email",children:"Email"}),s.jsx(Y,{id:"email",type:"email",placeholder:"votre.email@example.com",value:a.email,onChange:l,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"password",children:"Mot de passe"}),s.jsx(Y,{id:"password",type:"password",placeholder:"Votre mot de passe sécurisé",value:a.password,onChange:l,required:!0,minLength:8}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Le mot de passe doit contenir au moins 8 caractères, une majuscule, une minuscule, un chiffre et un caractère spécial."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),s.jsx(Y,{id:"confirmPassword",type:"password",placeholder:"Confirmer votre mot de passe",value:a.confirmPassword,onChange:l,required:!0,minLength:8})]}),s.jsx(R,{type:"submit",className:"w-full",disabled:n,children:n?s.jsxs(s.Fragment,{children:[s.jsx(Qn,{className:"mr-2 h-4 w-4 animate-spin"}),"Création en cours..."]}):"Créer le compte"})]}),s.jsxs("div",{className:"mt-6 text-center",children:[s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Déjà un compte ?"," ",s.jsx(Zs,{to:"/login",className:"text-primary hover:underline",children:"Se connecter"})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:s.jsx(Zs,{to:"/",className:"hover:underline",children:"Retour à l'accueil"})})]})]})]})})};var Ux="Dialog",[zR,VR]=Yr(Ux),[LJ,fa]=zR(Ux),qR=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=j.useRef(null),c=j.useRef(null),[u,d]=wi({prop:r,defaultProp:a??!1,onChange:i,caller:Ux});return s.jsx(LJ,{scope:t,triggerRef:l,contentRef:c,contentId:Ra(),titleId:Ra(),descriptionId:Ra(),open:u,onOpenChange:d,onOpenToggle:j.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};qR.displayName=Ux;var UR="DialogTrigger",WR=j.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=fa(UR,n),i=xt(t,a.triggerRef);return s.jsx(Ve.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":GS(a.open),...r,ref:i,onClick:ke(e.onClick,a.onOpenToggle)})});WR.displayName=UR;var HS="DialogPortal",[FJ,HR]=zR(HS,{forceMount:void 0}),KR=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:a}=e,i=fa(HS,t);return s.jsx(FJ,{scope:t,forceMount:n,children:j.Children.map(r,o=>s.jsx(Is,{present:n||i.open,children:s.jsx(yf,{asChild:!0,container:a,children:o})}))})};KR.displayName=HS;var Yg="DialogOverlay",GR=j.forwardRef((e,t)=>{const n=HR(Yg,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=fa(Yg,e.__scopeDialog);return i.modal?s.jsx(Is,{present:r||i.open,children:s.jsx(zJ,{...a,ref:t})}):null});GR.displayName=Yg;var BJ=zl("DialogOverlay.RemoveScroll"),zJ=j.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=fa(Yg,n);return s.jsx(Mx,{as:BJ,allowPinchZoom:!0,shards:[a.contentRef],children:s.jsx(Ve.div,{"data-state":GS(a.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Hl="DialogContent",YR=j.forwardRef((e,t)=>{const n=HR(Hl,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=fa(Hl,e.__scopeDialog);return s.jsx(Is,{present:r||i.open,children:i.modal?s.jsx(VJ,{...a,ref:t}):s.jsx(qJ,{...a,ref:t})})});YR.displayName=Hl;var VJ=j.forwardRef((e,t)=>{const n=fa(Hl,e.__scopeDialog),r=j.useRef(null),a=xt(t,n.contentRef,r);return j.useEffect(()=>{const i=r.current;if(i)return ES(i)},[]),s.jsx(QR,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ke(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ke(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:ke(e.onFocusOutside,i=>i.preventDefault())})}),qJ=j.forwardRef((e,t)=>{const n=fa(Hl,e.__scopeDialog),r=j.useRef(!1),a=j.useRef(!1);return s.jsx(QR,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),QR=j.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,l=fa(Hl,n),c=j.useRef(null),u=xt(t,c);return TS(),s.jsxs(s.Fragment,{children:[s.jsx(Ex,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(jd,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":GS(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(WJ,{titleId:l.titleId}),s.jsx(KJ,{contentRef:c,descriptionId:l.descriptionId})]})]})}),KS="DialogTitle",XR=j.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=fa(KS,n);return s.jsx(Ve.h2,{id:a.titleId,...r,ref:t})});XR.displayName=KS;var JR="DialogDescription",ZR=j.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=fa(JR,n);return s.jsx(Ve.p,{id:a.descriptionId,...r,ref:t})});ZR.displayName=JR;var e3="DialogClose",t3=j.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=fa(e3,n);return s.jsx(Ve.button,{type:"button",...r,ref:t,onClick:ke(e.onClick,()=>a.onOpenChange(!1))})});t3.displayName=e3;function GS(e){return e?"open":"closed"}var n3="DialogTitleWarning",[UJ,r3]=Sq(n3,{contentName:Hl,titleName:KS,docsSlug:"dialog"}),WJ=({titleId:e})=>{const t=r3(n3),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return j.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},HJ="DialogDescriptionWarning",KJ=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${r3(HJ).contentName}}.`;return j.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},s3=qR,a3=WR,i3=KR,YS=GR,QS=YR,XS=XR,JS=ZR,ZS=t3;const Qe=s3,Tf=a3,GJ=i3,o3=j.forwardRef(({className:e,...t},n)=>s.jsx(YS,{ref:n,className:De("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));o3.displayName=YS.displayName;const Ye=j.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(GJ,{children:[s.jsx(o3,{}),s.jsxs(QS,{ref:r,className:De("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,s.jsxs(ZS,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(wf,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ye.displayName=QS.displayName;const Xe=({className:e,...t})=>s.jsx("div",{className:De("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Xe.displayName="DialogHeader";const Je=j.forwardRef(({className:e,...t},n)=>s.jsx(XS,{ref:n,className:De("text-lg font-semibold leading-none tracking-tight",e),...t}));Je.displayName=XS.displayName;const Bt=j.forwardRef(({className:e,...t},n)=>s.jsx(JS,{ref:n,className:De("text-sm text-muted-foreground",e),...t}));Bt.displayName=JS.displayName;const Ue=j.forwardRef(({className:e,...t},n)=>s.jsx("textarea",{className:De("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...t}));Ue.displayName="Textarea";function rA(e,[t,n]){return Math.min(n,Math.max(t,e))}function e2(e){const t=j.useRef({value:e,previous:e});return j.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var YJ=[" ","Enter","ArrowUp","ArrowDown"],QJ=[" ","Enter"],Kl="Select",[Wx,Hx,XJ]=jx(Kl),[Dd,TTe]=Yr(Kl,[XJ,_d]),Kx=_d(),[JJ,Uo]=Dd(Kl),[ZJ,eZ]=Dd(Kl),l3=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:m,required:f,form:v}=e,p=Kx(t),[g,x]=j.useState(null),[y,b]=j.useState(null),[C,w]=j.useState(!1),N=Tx(u),[S,_]=wi({prop:r,defaultProp:a??!1,onChange:i,caller:Kl}),[P,A]=wi({prop:o,defaultProp:l,onChange:c,caller:Kl}),E=j.useRef(null),k=g?v||!!g.closest("form"):!0,[I,D]=j.useState(new Set),U=Array.from(I).map(B=>B.props.value).join(";");return s.jsx(o$,{...p,children:s.jsxs(JJ,{required:f,scope:t,trigger:g,onTriggerChange:x,valueNode:y,onValueNodeChange:b,valueNodeHasChildren:C,onValueNodeHasChildrenChange:w,contentId:Ra(),value:P,onValueChange:A,open:S,onOpenChange:_,dir:N,triggerPointerDownPosRef:E,disabled:m,children:[s.jsx(Wx.Provider,{scope:t,children:s.jsx(ZJ,{scope:e.__scopeSelect,onNativeOptionAdd:j.useCallback(B=>{D(K=>new Set(K).add(B))},[]),onNativeOptionRemove:j.useCallback(B=>{D(K=>{const T=new Set(K);return T.delete(B),T})},[]),children:n})}),k?s.jsxs(O3,{"aria-hidden":!0,required:f,tabIndex:-1,name:d,autoComplete:h,value:P,onChange:B=>A(B.target.value),disabled:m,form:v,children:[P===void 0?s.jsx("option",{value:""}):null,Array.from(I)]},U):null]})})};l3.displayName=Kl;var c3="SelectTrigger",u3=j.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...a}=e,i=Kx(n),o=Uo(c3,n),l=o.disabled||r,c=xt(t,o.onTriggerChange),u=Hx(n),d=j.useRef("touch"),[h,m,f]=M3(p=>{const g=u().filter(b=>!b.disabled),x=g.find(b=>b.value===o.value),y=I3(g,p,x);y!==void 0&&o.onValueChange(y.value)}),v=p=>{l||(o.onOpenChange(!0),f()),p&&(o.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return s.jsx(vS,{asChild:!0,...i,children:s.jsx(Ve.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":D3(o.value)?"":void 0,...a,ref:c,onClick:ke(a.onClick,p=>{p.currentTarget.focus(),d.current!=="mouse"&&v(p)}),onPointerDown:ke(a.onPointerDown,p=>{d.current=p.pointerType;const g=p.target;g.hasPointerCapture(p.pointerId)&&g.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(v(p),p.preventDefault())}),onKeyDown:ke(a.onKeyDown,p=>{const g=h.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&m(p.key),!(g&&p.key===" ")&&YJ.includes(p.key)&&(v(),p.preventDefault())})})})});u3.displayName=c3;var d3="SelectValue",h3=j.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:i,placeholder:o="",...l}=e,c=Uo(d3,n),{onValueNodeHasChildrenChange:u}=c,d=i!==void 0,h=xt(t,c.onValueNodeChange);return Tn(()=>{u(d)},[u,d]),s.jsx(Ve.span,{...l,ref:h,style:{pointerEvents:"none"},children:D3(c.value)?s.jsx(s.Fragment,{children:o}):i})});h3.displayName=d3;var tZ="SelectIcon",m3=j.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...a}=e;return s.jsx(Ve.span,{"aria-hidden":!0,...a,ref:t,children:r||"▼"})});m3.displayName=tZ;var nZ="SelectPortal",f3=e=>s.jsx(yf,{asChild:!0,...e});f3.displayName=nZ;var Gl="SelectContent",p3=j.forwardRef((e,t)=>{const n=Uo(Gl,e.__scopeSelect),[r,a]=j.useState();if(Tn(()=>{a(new DocumentFragment)},[]),!n.open){const i=r;return i?ac.createPortal(s.jsx(g3,{scope:e.__scopeSelect,children:s.jsx(Wx.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),i):null}return s.jsx(v3,{...e,ref:t})});p3.displayName=Gl;var Us=10,[g3,Wo]=Dd(Gl),rZ="SelectContentImpl",sZ=zl("SelectContent.RemoveScroll"),v3=j.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:f,sticky:v,hideWhenDetached:p,avoidCollisions:g,...x}=e,y=Uo(Gl,n),[b,C]=j.useState(null),[w,N]=j.useState(null),S=xt(t,ce=>C(ce)),[_,P]=j.useState(null),[A,E]=j.useState(null),k=Hx(n),[I,D]=j.useState(!1),U=j.useRef(!1);j.useEffect(()=>{if(b)return ES(b)},[b]),TS();const B=j.useCallback(ce=>{const[re,...V]=k().map(X=>X.ref.current),[le]=V.slice(-1),W=document.activeElement;for(const X of ce)if(X===W||(X==null||X.scrollIntoView({block:"nearest"}),X===re&&w&&(w.scrollTop=0),X===le&&w&&(w.scrollTop=w.scrollHeight),X==null||X.focus(),document.activeElement!==W))return},[k,w]),K=j.useCallback(()=>B([_,b]),[B,_,b]);j.useEffect(()=>{I&&K()},[I,K]);const{onOpenChange:T,triggerPointerDownPosRef:$}=y;j.useEffect(()=>{if(b){let ce={x:0,y:0};const re=le=>{var W,X;ce={x:Math.abs(Math.round(le.pageX)-(((W=$.current)==null?void 0:W.x)??0)),y:Math.abs(Math.round(le.pageY)-(((X=$.current)==null?void 0:X.y)??0))}},V=le=>{ce.x<=10&&ce.y<=10?le.preventDefault():b.contains(le.target)||T(!1),document.removeEventListener("pointermove",re),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",re),document.addEventListener("pointerup",V,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",re),document.removeEventListener("pointerup",V,{capture:!0})}}},[b,T,$]),j.useEffect(()=>{const ce=()=>T(!1);return window.addEventListener("blur",ce),window.addEventListener("resize",ce),()=>{window.removeEventListener("blur",ce),window.removeEventListener("resize",ce)}},[T]);const[G,Q]=M3(ce=>{const re=k().filter(W=>!W.disabled),V=re.find(W=>W.ref.current===document.activeElement),le=I3(re,ce,V);le&&setTimeout(()=>le.ref.current.focus())}),ne=j.useCallback((ce,re,V)=>{const le=!U.current&&!V;(y.value!==void 0&&y.value===re||le)&&(P(ce),le&&(U.current=!0))},[y.value]),oe=j.useCallback(()=>b==null?void 0:b.focus(),[b]),M=j.useCallback((ce,re,V)=>{const le=!U.current&&!V;(y.value!==void 0&&y.value===re||le)&&E(ce)},[y.value]),ue=r==="popper"?jw:x3,ve=ue===jw?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:f,sticky:v,hideWhenDetached:p,avoidCollisions:g}:{};return s.jsx(g3,{scope:n,content:b,viewport:w,onViewportChange:N,itemRefCallback:ne,selectedItem:_,onItemLeave:oe,itemTextRefCallback:M,focusSelectedItem:K,selectedItemText:A,position:r,isPositioned:I,searchRef:G,children:s.jsx(Mx,{as:sZ,allowPinchZoom:!0,children:s.jsx(Ex,{asChild:!0,trapped:y.open,onMountAutoFocus:ce=>{ce.preventDefault()},onUnmountAutoFocus:ke(a,ce=>{var re;(re=y.trigger)==null||re.focus({preventScroll:!0}),ce.preventDefault()}),children:s.jsx(jd,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:ce=>ce.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:s.jsx(ue,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:ce=>ce.preventDefault(),...x,...ve,onPlaced:()=>D(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:ke(x.onKeyDown,ce=>{const re=ce.ctrlKey||ce.altKey||ce.metaKey;if(ce.key==="Tab"&&ce.preventDefault(),!re&&ce.key.length===1&&Q(ce.key),["ArrowUp","ArrowDown","Home","End"].includes(ce.key)){let le=k().filter(W=>!W.disabled).map(W=>W.ref.current);if(["ArrowUp","End"].includes(ce.key)&&(le=le.slice().reverse()),["ArrowUp","ArrowDown"].includes(ce.key)){const W=ce.target,X=le.indexOf(W);le=le.slice(X+1)}setTimeout(()=>B(le)),ce.preventDefault()}})})})})})})});v3.displayName=rZ;var aZ="SelectItemAlignedPosition",x3=j.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...a}=e,i=Uo(Gl,n),o=Wo(Gl,n),[l,c]=j.useState(null),[u,d]=j.useState(null),h=xt(t,S=>d(S)),m=Hx(n),f=j.useRef(!1),v=j.useRef(!0),{viewport:p,selectedItem:g,selectedItemText:x,focusSelectedItem:y}=o,b=j.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&p&&g&&x){const S=i.trigger.getBoundingClientRect(),_=u.getBoundingClientRect(),P=i.valueNode.getBoundingClientRect(),A=x.getBoundingClientRect();if(i.dir!=="rtl"){const W=A.left-_.left,X=P.left-W,pe=S.left-X,fe=S.width+pe,Re=Math.max(fe,_.width),qe=window.innerWidth-Us,ot=rA(X,[Us,Math.max(Us,qe-Re)]);l.style.minWidth=fe+"px",l.style.left=ot+"px"}else{const W=_.right-A.right,X=window.innerWidth-P.right-W,pe=window.innerWidth-S.right-X,fe=S.width+pe,Re=Math.max(fe,_.width),qe=window.innerWidth-Us,ot=rA(X,[Us,Math.max(Us,qe-Re)]);l.style.minWidth=fe+"px",l.style.right=ot+"px"}const E=m(),k=window.innerHeight-Us*2,I=p.scrollHeight,D=window.getComputedStyle(u),U=parseInt(D.borderTopWidth,10),B=parseInt(D.paddingTop,10),K=parseInt(D.borderBottomWidth,10),T=parseInt(D.paddingBottom,10),$=U+B+I+T+K,G=Math.min(g.offsetHeight*5,$),Q=window.getComputedStyle(p),ne=parseInt(Q.paddingTop,10),oe=parseInt(Q.paddingBottom,10),M=S.top+S.height/2-Us,ue=k-M,ve=g.offsetHeight/2,ce=g.offsetTop+ve,re=U+B+ce,V=$-re;if(re<=M){const W=E.length>0&&g===E[E.length-1].ref.current;l.style.bottom="0px";const X=u.clientHeight-p.offsetTop-p.offsetHeight,pe=Math.max(ue,ve+(W?oe:0)+X+K),fe=re+pe;l.style.height=fe+"px"}else{const W=E.length>0&&g===E[0].ref.current;l.style.top="0px";const pe=Math.max(M,U+p.offsetTop+(W?ne:0)+ve)+V;l.style.height=pe+"px",p.scrollTop=re-M+p.offsetTop}l.style.margin=`${Us}px 0`,l.style.minHeight=G+"px",l.style.maxHeight=k+"px",r==null||r(),requestAnimationFrame(()=>f.current=!0)}},[m,i.trigger,i.valueNode,l,u,p,g,x,i.dir,r]);Tn(()=>b(),[b]);const[C,w]=j.useState();Tn(()=>{u&&w(window.getComputedStyle(u).zIndex)},[u]);const N=j.useCallback(S=>{S&&v.current===!0&&(b(),y==null||y(),v.current=!1)},[b,y]);return s.jsx(oZ,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:f,onScrollButtonChange:N,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:s.jsx(Ve.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});x3.displayName=aZ;var iZ="SelectPopperPosition",jw=j.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=Us,...i}=e,o=Kx(n);return s.jsx(xS,{...o,...i,ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});jw.displayName=iZ;var[oZ,t2]=Dd(Gl,{}),bw="SelectViewport",y3=j.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...a}=e,i=Wo(bw,n),o=t2(bw,n),l=xt(t,i.onViewportChange),c=j.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),s.jsx(Wx.Slot,{scope:n,children:s.jsx(Ve.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:ke(a.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&h){const f=Math.abs(c.current-d.scrollTop);if(f>0){const v=window.innerHeight-Us*2,p=parseFloat(h.style.minHeight),g=parseFloat(h.style.height),x=Math.max(p,g);if(x<v){const y=x+f,b=Math.min(v,y),C=y-b;h.style.height=b+"px",h.style.bottom==="0px"&&(d.scrollTop=C>0?C:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});y3.displayName=bw;var j3="SelectGroup",[lZ,cZ]=Dd(j3),uZ=j.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Ra();return s.jsx(lZ,{scope:n,id:a,children:s.jsx(Ve.div,{role:"group","aria-labelledby":a,...r,ref:t})})});uZ.displayName=j3;var b3="SelectLabel",w3=j.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=cZ(b3,n);return s.jsx(Ve.div,{id:a.id,...r,ref:t})});w3.displayName=b3;var Qg="SelectItem",[dZ,N3]=Dd(Qg),S3=j.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:i,...o}=e,l=Uo(Qg,n),c=Wo(Qg,n),u=l.value===r,[d,h]=j.useState(i??""),[m,f]=j.useState(!1),v=xt(t,y=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,y,r,a)}),p=Ra(),g=j.useRef("touch"),x=()=>{a||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(dZ,{scope:n,value:r,disabled:a,textId:p,isSelected:u,onItemTextChange:j.useCallback(y=>{h(b=>b||((y==null?void 0:y.textContent)??"").trim())},[]),children:s.jsx(Wx.ItemSlot,{scope:n,value:r,disabled:a,textValue:d,children:s.jsx(Ve.div,{role:"option","aria-labelledby":p,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:v,onFocus:ke(o.onFocus,()=>f(!0)),onBlur:ke(o.onBlur,()=>f(!1)),onClick:ke(o.onClick,()=>{g.current!=="mouse"&&x()}),onPointerUp:ke(o.onPointerUp,()=>{g.current==="mouse"&&x()}),onPointerDown:ke(o.onPointerDown,y=>{g.current=y.pointerType}),onPointerMove:ke(o.onPointerMove,y=>{var b;g.current=y.pointerType,a?(b=c.onItemLeave)==null||b.call(c):g.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ke(o.onPointerLeave,y=>{var b;y.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:ke(o.onKeyDown,y=>{var C;((C=c.searchRef)==null?void 0:C.current)!==""&&y.key===" "||(QJ.includes(y.key)&&x(),y.key===" "&&y.preventDefault())})})})})});S3.displayName=Qg;var Eh="SelectItemText",C3=j.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,...i}=e,o=Uo(Eh,n),l=Wo(Eh,n),c=N3(Eh,n),u=eZ(Eh,n),[d,h]=j.useState(null),m=xt(t,x=>h(x),c.onItemTextChange,x=>{var y;return(y=l.itemTextRefCallback)==null?void 0:y.call(l,x,c.value,c.disabled)}),f=d==null?void 0:d.textContent,v=j.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:f},c.value),[c.disabled,c.value,f]),{onNativeOptionAdd:p,onNativeOptionRemove:g}=u;return Tn(()=>(p(v),()=>g(v)),[p,g,v]),s.jsxs(s.Fragment,{children:[s.jsx(Ve.span,{id:c.textId,...i,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?ac.createPortal(i.children,o.valueNode):null]})});C3.displayName=Eh;var _3="SelectItemIndicator",P3=j.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return N3(_3,n).isSelected?s.jsx(Ve.span,{"aria-hidden":!0,...r,ref:t}):null});P3.displayName=_3;var ww="SelectScrollUpButton",A3=j.forwardRef((e,t)=>{const n=Wo(ww,e.__scopeSelect),r=t2(ww,e.__scopeSelect),[a,i]=j.useState(!1),o=xt(t,r.onScrollButtonChange);return Tn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?s.jsx(T3,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});A3.displayName=ww;var Nw="SelectScrollDownButton",k3=j.forwardRef((e,t)=>{const n=Wo(Nw,e.__scopeSelect),r=t2(Nw,e.__scopeSelect),[a,i]=j.useState(!1),o=xt(t,r.onScrollButtonChange);return Tn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;i(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),a?s.jsx(T3,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});k3.displayName=Nw;var T3=j.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=e,i=Wo("SelectScrollButton",n),o=j.useRef(null),l=Hx(n),c=j.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return j.useEffect(()=>()=>c(),[c]),Tn(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),s.jsx(Ve.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:ke(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:ke(a.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:ke(a.onPointerLeave,()=>{c()})})}),hZ="SelectSeparator",E3=j.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return s.jsx(Ve.div,{"aria-hidden":!0,...r,ref:t})});E3.displayName=hZ;var Sw="SelectArrow",mZ=j.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Kx(n),i=Uo(Sw,n),o=Wo(Sw,n);return i.open&&o.position==="popper"?s.jsx(yS,{...a,...r,ref:t}):null});mZ.displayName=Sw;var fZ="SelectBubbleInput",O3=j.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const a=j.useRef(null),i=xt(r,a),o=e2(t);return j.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&d){const h=new Event("change",{bubbles:!0});d.call(l,t),l.dispatchEvent(h)}},[o,t]),s.jsx(Ve.select,{...n,style:{...tI,...n.style},ref:i,defaultValue:t})});O3.displayName=fZ;function D3(e){return e===""||e===void 0}function M3(e){const t=Er(e),n=j.useRef(""),r=j.useRef(0),a=j.useCallback(o=>{const l=n.current+o;t(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=j.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return j.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,i]}function I3(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=pZ(e,Math.max(i,0));a.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==n?c:void 0}function pZ(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var gZ=l3,$3=u3,vZ=h3,xZ=m3,yZ=f3,R3=p3,jZ=y3,L3=w3,F3=S3,bZ=C3,wZ=P3,B3=A3,z3=k3,V3=E3;const je=gZ,be=vZ,xe=j.forwardRef(({className:e,children:t,...n},r)=>s.jsxs($3,{ref:r,className:De("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,s.jsx(xZ,{asChild:!0,children:s.jsx(CI,{className:"h-4 w-4 opacity-50"})})]}));xe.displayName=$3.displayName;const q3=j.forwardRef(({className:e,...t},n)=>s.jsx(B3,{ref:n,className:De("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(NU,{className:"h-4 w-4"})}));q3.displayName=B3.displayName;const U3=j.forwardRef(({className:e,...t},n)=>s.jsx(z3,{ref:n,className:De("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(CI,{className:"h-4 w-4"})}));U3.displayName=z3.displayName;const ye=j.forwardRef(({className:e,children:t,position:n="popper",...r},a)=>s.jsx(yZ,{children:s.jsxs(R3,{ref:a,className:De("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[s.jsx(q3,{}),s.jsx(jZ,{className:De("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(U3,{})]})}));ye.displayName=R3.displayName;const NZ=j.forwardRef(({className:e,...t},n)=>s.jsx(L3,{ref:n,className:De("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));NZ.displayName=L3.displayName;const z=j.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(F3,{ref:r,className:De("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(wZ,{children:s.jsx(aS,{className:"h-4 w-4"})})}),s.jsx(bZ,{children:t})]}));z.displayName=F3.displayName;const SZ=j.forwardRef(({className:e,...t},n)=>s.jsx(V3,{ref:n,className:De("-mx-1 my-1 h-px bg-muted",e),...t}));SZ.displayName=V3.displayName;const CZ=async()=>{const{data:{user:e}}=await Se.auth.getUser();if(!e)throw new Error("User must be authenticated to fetch clients");const{data:t,error:n}=await Se.from("clients").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(n)throw new Error(`Error fetching clients: ${n.message}`);return t||[]},_Z=async e=>{const{data:{user:t}}=await Se.auth.getUser();if(!t)throw new Error("User not authenticated");const{data:n,error:r}=await Se.from("clients").insert({...e,user_id:t.id,city:e.city||"Rabat",country:e.country||"Maroc",client_type:e.client_type||"particulier"}).select().single();if(r)throw new Error(`Error creating client: ${r.message}`);return n},PZ=async(e,t)=>{const{data:n,error:r}=await Se.from("clients").update(t).eq("id",e).select().single();if(r)throw new Error(`Error updating client: ${r.message}`);return n},AZ=async e=>{const{error:t}=await Se.from("clients").delete().eq("id",e);if(t)throw new Error(`Error deleting client: ${t.message}`)},kZ=async()=>{const{data:{user:e}}=await Se.auth.getUser();if(!e)throw new Error("User must be authenticated to fetch animals");const{data:t,error:n}=await Se.from("animals").select(`
      *,
      client:clients(*)
    `).eq("user_id",e.id).order("created_at",{ascending:!1});if(n)throw new Error(`Error fetching animals: ${n.message}`);return t||[]},TZ=async e=>{var o,l,c;const{data:{user:t}}=await Se.auth.getUser();if(!t)throw new Error("User not authenticated");const n={...e};"microchip_number"in n&&!((o=n.microchip_number)!=null&&o.trim())&&delete n.microchip_number,"birth_date"in n&&!((l=n.birth_date)!=null&&l.trim())&&delete n.birth_date,"sterilization_date"in n&&!((c=n.sterilization_date)!=null&&c.trim())&&delete n.sterilization_date;const r=u=>{switch(u){case"healthy":return"vivant";case"urgent":return"décédé";case"treatment":return"perdu";default:return"vivant"}},{data:a,error:i}=await Se.from("animals").insert({...n,user_id:t.id,sterilized:n.sterilized||!1,status:r(n.status)}).select(`
      *,
      client:clients(*)
    `).single();if(i)throw new Error(`Error creating animal: ${i.message}`);return a},EZ=async(e,t)=>{var i,o,l;const n={...t};"microchip_number"in n&&!((i=n.microchip_number)!=null&&i.trim())&&(n.microchip_number=null),"birth_date"in n&&!((o=n.birth_date)!=null&&o.trim())&&(n.birth_date=null),"sterilization_date"in n&&!((l=n.sterilization_date)!=null&&l.trim())&&(n.sterilization_date=null);const{data:r,error:a}=await Se.from("animals").update(n).eq("id",e).select(`
      *,
      client:clients(*)
    `).single();if(a)throw new Error(`Error updating animal: ${a.message}`);return r},OZ=async e=>{const{error:t}=await Se.from("animals").delete().eq("id",e);if(t)throw new Error(`Error deleting animal: ${t.message}`)},DZ=async()=>{const{data:{user:e}}=await Se.auth.getUser();if(!e)throw new Error("User must be authenticated to fetch vaccinations");const{data:t,error:n}=await Se.from("animals").select("id").eq("user_id",e.id);if(n)throw new Error(`Error fetching user animals: ${n.message}`);const r=(t==null?void 0:t.map(o=>o.id))||[];if(r.length===0)return[];const{data:a,error:i}=await Se.from("vaccinations").select(`
      *,
      animal:animals(*)
    `).in("animal_id",r).order("vaccination_date",{ascending:!1});if(i)throw new Error(`Error fetching vaccinations: ${i.message}`);return a||[]},MZ=async e=>{const{data:{user:t}}=await Se.auth.getUser();if(!t)throw new Error("User not authenticated");let n=e.administered_by;if(!n||n.trim()===""){const{data:i}=await Se.from("user_profiles").select("id").eq("id",t.id).single();n=i?t.id:null}const{data:r,error:a}=await Se.from("vaccinations").insert({...e,administered_by:n}).select(`
      *,
      animal:animals(*)
    `).single();if(a)throw new Error(`Error creating vaccination: ${a.message}`);return r},IZ=async(e,t)=>{const{data:n,error:r}=await Se.from("vaccinations").update(t).eq("id",e).select(`
      *,
      animal:animals(*)
    `).single();if(r)throw new Error(`Error updating vaccination: ${r.message}`);return n},$Z=async e=>{const{error:t}=await Se.from("vaccinations").delete().eq("id",e);if(t)throw new Error(`Error deleting vaccination: ${t.message}`)},RZ=async()=>{const{data:e,error:t}=await Se.from("vaccination_protocols").select("*").order("species",{ascending:!0}).order("vaccine_name",{ascending:!0});if(t)throw new Error(`Error fetching vaccination protocols: ${t.message}`);return e||[]},LZ=async e=>{const{data:t,error:n}=await Se.from("vaccination_protocols").insert(e).select().single();if(n)throw new Error(`Error creating vaccination protocol: ${n.message}`);return t},FZ=async(e,t)=>{const{data:n,error:r}=await Se.from("vaccination_protocols").update(t).eq("id",e).select().single();if(r)throw new Error(`Error updating vaccination protocol: ${r.message}`);return n},BZ=async()=>{const{data:e,error:t}=await Se.from("antiparasitics").select(`
      *,
      animal:animals(*)
    `).order("treatment_date",{ascending:!1});if(t)throw new Error(`Error fetching antiparasitics: ${t.message}`);return e||[]},zZ=async e=>{const{data:{user:t}}=await Se.auth.getUser();if(!t)throw new Error("User must be authenticated to create antiparasitic");const n={...e};if(n.effectiveness_rating!==void 0){const i=n.effectiveness_rating;(typeof i!="number"||i<1||i>5||isNaN(i))&&(console.warn("Invalid effectiveness_rating detected, removing from data:",i),delete n.effectiveness_rating)}if(console.log("Final antiparasitic data being sent to database:",n),n.administered_by){const{data:i}=await Se.from("user_profiles").select("id").eq("id",n.administered_by).single();i||(console.warn("administered_by user not found, removing field"),delete n.administered_by)}const{data:r,error:a}=await Se.from("antiparasitics").insert([n]).select(`
      *,
      animal:animals(*)
    `).single();if(a)throw console.error("Database error details:",{code:a.code,message:a.message,details:a.details,hint:a.hint,data:n}),new Error(`Error creating antiparasitic: ${a.message} (Code: ${a.code})`);return r},VZ=async e=>{const{error:t}=await Se.from("antiparasitics").delete().eq("id",e);if(t)throw new Error(`Error deleting antiparasitic: ${t.message}`)},qZ=async()=>{const{data:{user:e}}=await Se.auth.getUser();if(!e)throw new Error("User must be authenticated to fetch antiparasitic protocols");const{data:t,error:n}=await Se.from("antiparasitic_protocols").select("*").eq("user_id",e.id).order("species",{ascending:!0});if(n)throw new Error(`Error fetching antiparasitic protocols: ${n.message}`);return t||[]},UZ=async e=>{const{data:{user:t}}=await Se.auth.getUser();if(!t)throw new Error("User must be authenticated to fetch antiparasitic protocols");const{data:n,error:r}=await Se.from("antiparasitic_protocols").select("*").eq("user_id",t.id).eq("species",e).eq("active",!0).order("parasite_type",{ascending:!0});if(r)throw new Error(`Error fetching antiparasitic protocols for species: ${r.message}`);return n||[]},WZ=async e=>{const{data:{user:t}}=await Se.auth.getUser();if(!t)throw new Error("User must be authenticated to create antiparasitic protocol");const n={...e,user_id:t.id},{data:r,error:a}=await Se.from("antiparasitic_protocols").insert([n]).select("*").single();if(a)throw new Error(`Error creating antiparasitic protocol: ${a.message}`);return r},HZ=async(e,t)=>{const{data:{user:n}}=await Se.auth.getUser();if(!n)throw new Error("User must be authenticated to update antiparasitic protocol");const{data:r,error:a}=await Se.from("antiparasitic_protocols").update(t).eq("id",e).select("*").single();if(a)throw new Error(`Error updating antiparasitic protocol: ${a.message}`);return r},KZ=async()=>{const{data:{user:e}}=await Se.auth.getUser();if(!e)throw new Error("User must be authenticated to fetch appointments");const{data:t,error:n}=await Se.from("clients").select("id").eq("user_id",e.id);if(n)throw new Error(`Error fetching user clients: ${n.message}`);const r=(t==null?void 0:t.map(o=>o.id))||[];if(r.length===0)return[];const{data:a,error:i}=await Se.from("appointments").select(`
      *,
      client:clients(*),
      animal:animals(*)
    `).in("client_id",r).order("appointment_date",{ascending:!0});if(i)throw new Error(`Error fetching appointments: ${i.message}`);return a||[]},GZ=async e=>{const{data:{user:t}}=await Se.auth.getUser();if(!t)throw new Error("User not authenticated");const{data:n,error:r}=await Se.from("appointments").insert({...e,veterinarian_id:e.veterinarian_id||t.id,duration_minutes:e.duration_minutes||30}).select(`
      *,
      client:clients(*),
      animal:animals(*)
    `).single();if(r)throw new Error(`Error creating appointment: ${r.message}`);return n},YZ=async(e,t)=>{const{data:n,error:r}=await Se.from("appointments").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select(`
      *,
      client:clients(*),
      animal:animals(*)
    `).single();if(r)throw new Error(`Error updating appointment: ${r.message}`);return n},QZ=async e=>{const{error:t}=await Se.from("appointments").delete().eq("id",e);if(t)throw new Error(`Error deleting appointment: ${t.message}`)},XZ=async e=>{const{data:{user:t}}=await Se.auth.getUser();if(!t)throw new Error("User must be authenticated to fetch app settings");const{data:n,error:r}=await Se.from("app_settings").select("*").eq("user_id",t.id).eq("setting_category",e).eq("is_active",!0).order("setting_key",{ascending:!0});if(r)throw new Error(`Error fetching app settings for category: ${r.message}`);return n||[]},Ho=async(e,t)=>{const{data:{user:n}}=await Se.auth.getUser();if(!n)throw new Error("User must be authenticated to fetch app setting");const{data:r,error:a}=await Se.from("app_settings").select("*").eq("user_id",n.id).eq("setting_category",e).eq("setting_key",t).eq("is_active",!0).single();if(a){if(a.code==="PGRST116")return null;throw new Error(`Error fetching app setting: ${a.message}`)}return r},W3=async(e,t,n,r)=>{const{data:{user:a}}=await Se.auth.getUser();if(!a)throw new Error("User must be authenticated to create/update app setting");const{data:i,error:o}=await Se.from("app_settings").update({setting_value:n,description:r,updated_at:new Date().toISOString()}).eq("user_id",a.id).eq("setting_category",e).eq("setting_key",t).select().single();if(!o&&i)return i;const{data:l,error:c}=await Se.from("app_settings").insert([{user_id:a.id,setting_category:e,setting_key:t,setting_value:n,description:r,is_active:!0}]).select().single();if(c)throw new Error(`Error creating app setting: ${c.message}`);return l},JZ=async(e,t)=>{const{data:{user:n}}=await Se.auth.getUser();if(!n)throw new Error("User must be authenticated to delete app setting");const{error:r}=await Se.from("app_settings").update({is_active:!1}).eq("user_id",n.id).eq("setting_category",e).eq("setting_key",t);if(r)throw new Error(`Error deleting app setting: ${r.message}`)},ZZ=async()=>{const e=await Ho("clinic","veterinarians");return(e==null?void 0:e.setting_value)||[]},eee=async e=>{await W3("clinic","veterinarians",e,"List of veterinarians")},is={all:["clients"],lists:()=>[...is.all,"list"],list:e=>[...is.lists(),{filters:e}],details:()=>[...is.all,"detail"],detail:e=>[...is.details(),e],search:e=>[...is.all,"search",e]},fr={all:["animals"],lists:()=>[...fr.all,"list"],list:e=>[...fr.lists(),{filters:e}],details:()=>[...fr.all,"detail"],detail:e=>[...fr.details(),e],byClient:e=>[...fr.all,"client",e],search:e=>[...fr.all,"search",e]},pr={all:["appointments"],lists:()=>[...pr.all,"list"],list:e=>[...pr.lists(),{filters:e}],details:()=>[...pr.all,"detail"],detail:e=>[...pr.details(),e],byAnimal:e=>[...pr.all,"animal",e],byClient:e=>[...pr.all,"client",e]},uc={all:["stats"],clients:()=>[...uc.all,"clients"]},n2={all:["userProfile"],profile:()=>[...n2.all,"profile"]},ir=()=>an({queryKey:is.lists(),queryFn:CZ,staleTime:5*60*1e3}),tee=()=>{const e=Ct();return Pt({mutationFn:_Z,onSuccess:t=>{e.invalidateQueries({queryKey:is.lists()}),e.setQueryData(is.detail(t.id),t),e.invalidateQueries({queryKey:uc.clients()})}})},nee=()=>{const e=Ct();return Pt({mutationFn:({id:t,data:n})=>PZ(t,n),onSuccess:t=>{e.setQueryData(is.detail(t.id),t),e.invalidateQueries({queryKey:is.lists()})}})},ree=()=>{const e=Ct();return Pt({mutationFn:AZ,onSuccess:(t,n)=>{e.removeQueries({queryKey:is.detail(n)}),e.invalidateQueries({queryKey:is.lists()}),e.invalidateQueries({queryKey:fr.byClient(n)}),e.invalidateQueries({queryKey:uc.clients()})}})},or=()=>an({queryKey:fr.lists(),queryFn:kZ,staleTime:5*60*1e3}),see=()=>{const e=Ct();return Pt({mutationFn:TZ,onSuccess:t=>{e.invalidateQueries({queryKey:fr.lists()}),e.setQueryData(fr.detail(t.id),t),e.invalidateQueries({queryKey:fr.byClient(t.client_id)}),e.invalidateQueries({queryKey:uc.clients()})}})},aee=()=>{const e=Ct();return Pt({mutationFn:({id:t,data:n})=>EZ(t,n),onSuccess:t=>{e.setQueryData(fr.detail(t.id),t),e.invalidateQueries({queryKey:fr.lists()}),e.invalidateQueries({queryKey:fr.byClient(t.client_id)})}})},iee=()=>{const e=Ct();return Pt({mutationFn:OZ,onSuccess:(t,n)=>{e.removeQueries({queryKey:fr.detail(n)}),e.invalidateQueries({queryKey:fr.lists()}),e.invalidateQueries({queryKey:uc.clients()})}})},Md=()=>an({queryKey:["consultations"],queryFn:async()=>{try{const{data:e,error:t}=await Se.from("consultations").select(`
            id,
            animal_id,
            client_id,
            veterinarian_id,
            consultation_date,
            consultation_type,
            symptoms,
            diagnosis,
            treatment,
            notes,
            weight,
            temperature,
            heart_rate,
            respiratory_rate,
            photos,
            follow_up_date,
            follow_up_notes,
            status,
            created_at,
            updated_at,
            animal:animals(
              id,
              name,
              species,
              breed,
              color,
              sex,
              weight,
              birth_date,
              microchip_number,
              status
            ),
            client:clients(
              id,
              first_name,
              last_name,
              email,
              phone,
              mobile_phone,
              address,
              city,
              client_type
            )
          `).order("consultation_date",{ascending:!1});if(t)throw console.error("Error fetching consultations:",t),t;return(e||[]).map(n=>({...n,followUp:n.follow_up_notes||null,cost:null,animal:Array.isArray(n.animal)?n.animal[0]:n.animal,client:Array.isArray(n.client)?n.client[0]:n.client}))}catch(e){throw console.error("Failed to fetch consultations:",e),e}},staleTime:5*60*1e3,retry:3,retryDelay:e=>Math.min(1e3*2**e,3e4)}),H3=()=>{const e=Ct();return Pt({mutationFn:async t=>{try{const{data:{user:n}}=await Se.auth.getUser();if(!n)throw new Error("User not authenticated");const r={animal_id:t.animal_id,client_id:t.client_id,veterinarian_id:n.id,consultation_date:t.consultation_date||new Date().toISOString(),consultation_type:t.consultation_type,symptoms:t.symptoms||null,diagnosis:t.diagnosis||null,treatment:t.treatment||null,notes:t.notes||null,weight:t.weight||null,temperature:t.temperature||null,heart_rate:t.heart_rate||null,respiratory_rate:t.respiratory_rate||null,photos:t.photos||null,follow_up_date:t.follow_up_date||null,follow_up_notes:t.follow_up_notes||null,status:t.status||"completed"},{data:a,error:i}=await Se.from("consultations").insert(r).select(`
            id,
            animal_id,
            client_id,
            veterinarian_id,
            consultation_date,
            consultation_type,
            symptoms,
            diagnosis,
            treatment,
            notes,
            weight,
            temperature,
            heart_rate,
            respiratory_rate,
            photos,
            follow_up_date,
            follow_up_notes,
            status,
            created_at,
            updated_at,
            animal:animals(
              id,
              name,
              species,
              breed,
              color,
              sex,
              weight,
              birth_date,
              microchip_number,
              status
            ),
            client:clients(
              id,
              first_name,
              last_name,
              email,
              phone,
              mobile_phone,
              address,
              city,
              client_type
            )
          `).single();if(i)throw console.error("Error creating consultation:",i),i;return{...a,followUp:a.follow_up_notes||null,cost:null}}catch(n){throw console.error("Failed to create consultation:",n),n}},onSuccess:()=>{e.invalidateQueries({queryKey:["consultations"]}),e.invalidateQueries({queryKey:["dashboard-stats"]})}})},K3=()=>{const e=Ct();return Pt({mutationFn:async({id:t,data:n})=>{const{data:r,error:a}=await Se.from("consultations").update(n).eq("id",t).select(`
          *,
          animal:animals(*),
          client:clients(*)
        `).single();if(a)throw a;return r},onSuccess:()=>{e.invalidateQueries({queryKey:["consultations"]}),e.invalidateQueries({queryKey:["dashboard-stats"]})}})},oee=()=>{const e=Ct();return Pt({mutationFn:async t=>{try{const n=[{table:"prescriptions",field:"consultation_id"},{table:"vaccinations",field:"consultation_id"},{table:"lab_results",field:"consultation_id"},{table:"antiparasitics",field:"consultation_id"}];for(const a of n)try{const{data:i,error:o}=await Se.from(a.table).select("id").eq(a.field,t);if(o){console.warn(`Could not check ${a.table}: ${o.message}`);continue}if(i&&i.length>0){if(a.table==="prescriptions")for(const c of i){const{error:u}=await Se.from("prescription_medications").delete().eq("prescription_id",c.id);u&&console.warn(`Could not delete prescription medications: ${u.message}`)}const{error:l}=await Se.from(a.table).delete().eq(a.field,t);l&&console.warn(`Could not delete from ${a.table}: ${l.message}`)}}catch(i){console.warn(`Error handling ${a.table}:`,i)}const{error:r}=await Se.from("consultations").delete().eq("id",t);if(r)throw console.error(`Database error during consultation deletion: ${r.message}`),new Error(`Failed to delete consultation: ${r.message}`);return{success:!0,id:t}}catch(n){throw console.error("Dynamic deletion failed:",n),new Error(`Deletion failed: ${n.message||"Unknown error"}`)}},onSuccess:()=>{e.invalidateQueries({queryKey:["consultations"]}),e.invalidateQueries({queryKey:["prescriptions"]}),e.invalidateQueries({queryKey:["dashboard-stats"]}),e.invalidateQueries({queryKey:["vaccinations"]}),e.invalidateQueries({queryKey:["lab-results"]})},retry:1})},Id=()=>an({queryKey:["vaccinations"],queryFn:()=>DZ()}),lee=()=>{const e=Ct();return Pt({mutationFn:MZ,onSuccess:()=>{e.invalidateQueries({queryKey:["vaccinations"]}),e.invalidateQueries({queryKey:["animals"]})}})},cee=()=>{const e=Ct();return Pt({mutationFn:({id:t,data:n})=>IZ(t,n),onSuccess:()=>{e.invalidateQueries({queryKey:["vaccinations"]}),e.invalidateQueries({queryKey:["animals"]})}})},uee=()=>{const e=Ct();return Pt({mutationFn:$Z,onSuccess:()=>{e.invalidateQueries({queryKey:["vaccinations"]}),e.invalidateQueries({queryKey:["animals"]})}})},dee=()=>an({queryKey:["vaccination-protocols"],queryFn:()=>RZ()}),hee=()=>{const e=Ct();return Pt({mutationFn:LZ,onSuccess:()=>{e.invalidateQueries({queryKey:["vaccination-protocols"]})}})},mee=()=>{const e=Ct();return Pt({mutationFn:({id:t,data:n})=>FZ(t,n),onSuccess:()=>{e.invalidateQueries({queryKey:["vaccination-protocols"]})}})},Gx=()=>an({queryKey:["antiparasitics"],queryFn:BZ}),fee=()=>{const e=Ct();return Pt({mutationFn:zZ,onSuccess:()=>{e.invalidateQueries({queryKey:["antiparasitics"]})}})},pee=()=>{const e=Ct();return Pt({mutationFn:VZ,onSuccess:()=>{e.invalidateQueries({queryKey:["antiparasitics"]})}})},gee=()=>an({queryKey:["antiparasitic-protocols"],queryFn:qZ}),vee=e=>an({queryKey:["antiparasitic-protocols","by-species",e],queryFn:()=>e?UZ(e):Promise.resolve([]),enabled:!!e}),xee=()=>{const e=Ct();return Pt({mutationFn:WZ,onSuccess:()=>{e.invalidateQueries({queryKey:["antiparasitic-protocols"]})}})},yee=()=>{const e=Ct();return Pt({mutationFn:({id:t,updates:n})=>HZ(t,n),onSuccess:()=>{e.invalidateQueries({queryKey:["antiparasitic-protocols"]})}})},jee=()=>an({queryKey:["client-stats"],queryFn:async()=>{var i,o,l,c;const[e,t]=await Promise.all([Se.from("clients").select("id, status"),Se.from("animals").select("id, status")]);if(e.error||t.error)throw new Error("Failed to fetch client stats");const n=((i=e.data)==null?void 0:i.filter(u=>u.status==="actif").length)||0;(o=e.data)!=null&&o.length;const r=((l=t.data)==null?void 0:l.length)||0,a=((c=t.data)==null?void 0:c.reduce((u,d)=>(u[d.status]=(u[d.status]||0)+1,u),{}))||{};return{totalClients:n,totalAnimals:r,animalsByStatus:a}},staleTime:5*60*1e3}),Yx=()=>an({queryKey:["prescriptions"],queryFn:async()=>{try{const{data:e,error:t}=await Se.from("prescriptions").select(`
            id,
            consultation_id,
            animal_id,
            client_id,
            veterinarian_id,
            prescription_date,
            diagnosis,
            notes,
            status,
            refill_count,
            valid_until,
            created_at,
            updated_at,
            animal:animals(
              id,
              name,
              species,
              breed,
              color,
              sex,
              weight,
              birth_date,
              microchip_number,
              status
            ),
            client:clients(
              id,
              first_name,
              last_name,
              email,
              phone,
              mobile_phone,
              address,
              city,
              client_type
            ),
            medications:prescription_medications(
              id,
              prescription_id,
              stock_item_id,
              medication_name,
              dosage,
              frequency,
              duration,
              quantity,
              instructions,
              route,
              created_at
            )
          `).order("prescription_date",{ascending:!1});if(t)throw console.error("Error fetching prescriptions:",t),t;return(e||[]).map(n=>({...n,animal:Array.isArray(n.animal)?n.animal[0]:n.animal,client:Array.isArray(n.client)?n.client[0]:n.client}))}catch(e){throw console.error("Dynamic prescription fetch failed:",e),e}},staleTime:5*60*1e3,retry:3,retryDelay:e=>Math.min(1e3*2**e,3e4)}),bee=e=>an({queryKey:["prescriptions","animal",e],queryFn:async()=>{try{const{data:t,error:n}=await Se.from("prescriptions").select(`
            id,
            consultation_id,
            animal_id,
            client_id,
            veterinarian_id,
            prescription_date,
            diagnosis,
            notes,
            status,
            refill_count,
            valid_until,
            created_at,
            updated_at,
            animal:animals(
              id,
              name,
              species,
              breed,
              color,
              sex,
              weight,
              birth_date,
              microchip_number,
              status
            ),
            client:clients(
              id,
              first_name,
              last_name,
              email,
              phone,
              mobile_phone,
              address,
              city,
              client_type
            ),
            medications:prescription_medications(
              id,
              prescription_id,
              stock_item_id,
              medication_name,
              dosage,
              frequency,
              duration,
              quantity,
              instructions,
              route,
              created_at
            )
          `).eq("animal_id",e).order("prescription_date",{ascending:!1});if(n)throw console.error("Error fetching prescriptions by animal:",n),n;return t||[]}catch(t){throw console.error("Dynamic prescription fetch by animal failed:",t),t}},enabled:!!e,staleTime:5*60*1e3,retry:2}),wee=()=>{const e=Ct();return Pt({mutationFn:async t=>{try{const{data:{user:n}}=await Se.auth.getUser();if(!n)throw new Error("User not authenticated");const{medications:r,...a}=t,i={consultation_id:a.consultation_id,animal_id:a.animal_id,client_id:a.client_id,veterinarian_id:a.veterinarian_id||n.id,prescription_date:a.prescription_date||new Date().toISOString(),diagnosis:a.diagnosis||null,notes:a.notes||null,status:a.status||"active",refill_count:a.refill_count||0,valid_until:a.valid_until||null},{data:o,error:l}=await Se.from("prescriptions").insert(i).select(`
            id,
            consultation_id,
            animal_id,
            client_id,
            veterinarian_id,
            prescription_date,
            diagnosis,
            notes,
            status,
            refill_count,
            valid_until,
            created_at,
            updated_at,
            animal:animals(
              id,
              name,
              species,
              breed,
              color,
              sex,
              weight,
              birth_date,
              microchip_number,
              status
            ),
            client:clients(
              id,
              first_name,
              last_name,
              email,
              phone,
              mobile_phone,
              address,
              city,
              client_type
            )
          `).single();if(l)throw console.error("Error creating prescription:",l),new Error(`Error creating prescription: ${l.message}`);if(r&&r.length>0){const c=r.map(h=>({prescription_id:o.id,stock_item_id:h.stock_item_id||null,medication_name:h.medication_name,dosage:h.dosage||null,frequency:h.frequency||null,duration:h.duration||null,quantity:h.quantity||1,instructions:h.instructions||null,route:h.route||null})),{data:u,error:d}=await Se.from("prescription_medications").insert(c).select();if(d)throw console.error("Error creating prescription medications:",d),await Se.from("prescriptions").delete().eq("id",o.id),new Error(`Error creating prescription medications: ${d.message}`)}return{...o,medications:r||[]}}catch(n){throw console.error("Dynamic prescription creation failed:",n),n}},onSuccess:()=>{e.invalidateQueries({queryKey:["prescriptions"]}),e.invalidateQueries({queryKey:["consultations"]}),e.invalidateQueries({queryKey:["dashboard-stats"]}),e.invalidateQueries({queryKey:["stock-items"]})},retry:1})},r2=()=>an({queryKey:["stock-items"],queryFn:async()=>{try{const{data:e,error:t}=await Se.from("stock_items").select(`
            id,
            name,
            description,
            category,
            unit,
            current_quantity,
            minimum_quantity,
            maximum_quantity,
            unit_cost,
            selling_price,
            supplier,
            batch_number,
            expiration_date,
            location,
            requires_prescription,
            active,
            created_at,
            updated_at
          `).eq("active",!0).order("name");if(t)throw console.error("Error fetching stock items:",t),t;return e||[]}catch(e){throw console.error("Dynamic stock items fetch failed:",e),e}},staleTime:5*60*1e3,retry:3,retryDelay:e=>Math.min(1e3*2**e,3e4)}),Nee=()=>an({queryKey:n2.profile(),queryFn:qx,staleTime:5*60*1e3}),See=()=>{const e=Ct();return Pt({mutationFn:t=>xJ(t),onSuccess:t=>{e.setQueryData(n2.profile(),t),e.invalidateQueries({queryKey:["auth","session"]})}})},s2=()=>an({queryKey:pr.lists(),queryFn:KZ,staleTime:2*60*1e3}),G3=()=>{const e=Ct();return Pt({mutationFn:GZ,onSuccess:t=>{e.invalidateQueries({queryKey:pr.lists()}),t.animal_id&&e.invalidateQueries({queryKey:pr.byAnimal(t.animal_id)}),t.client_id&&(e.invalidateQueries({queryKey:pr.byClient(t.client_id)}),e.invalidateQueries({queryKey:is.detail(t.client_id)})),e.invalidateQueries({queryKey:uc.clients()})}})},Cee=()=>{const e=Ct();return Pt({mutationFn:({id:t,data:n})=>YZ(t,n),onSuccess:t=>{e.invalidateQueries({queryKey:pr.lists()}),e.setQueryData(pr.lists(),n=>n?n.map(r=>r.id===t.id?t:r):[]),t.animal_id&&e.invalidateQueries({queryKey:pr.byAnimal(t.animal_id)}),t.client_id&&e.invalidateQueries({queryKey:pr.byClient(t.client_id)})}})},_ee=()=>{const e=Ct();return Pt({mutationFn:QZ,onSuccess:(t,n)=>{e.setQueryData(pr.lists(),r=>r?r.filter(a=>a.id!==n):[]),e.invalidateQueries({queryKey:pr.lists()}),e.invalidateQueries({queryKey:uc.clients()})}})},xn={animal_species:["Chien","Chat","Oiseau","Lapin","Furet","Bovin","Ovin","Caprin","Porc","Cheval","Âne","Autre"],animal_breeds:{Chien:["Labrador","Golden Retriever","Berger Allemand","Bulldog","Yorkshire Terrier","Chihuahua","Rottweiler","Poodle","Boxer","Husky"],Chat:["Persan","Siamois","Maine Coon","British Shorthair","Ragdoll","Bengal","Abyssin","Sphinx","Scottish Fold","Chartreux"],Oiseau:["Canari","Perruche","Cockatiel","Inséparable","Perroquet","Cacatoès","Conure","Calopsitte"],Lapin:["Nain","Bélier","Angora","Rex","Géant des Flandres","Hollandais"],Bovin:["Holstein","Montbéliarde","Charolaise","Limousine","Blonde d'Aquitaine","Normande"],Ovin:["Lacaune","Île-de-France","Texel","Suffolk","Mérinos","Dorper"],Caprin:["Saanen","Alpine","Poitevine","Boer","Angora","Nubienne"],Cheval:["Pur-sang","Arabe","Quarter Horse","Frison","Andalou","Trotteur"]},animal_colors:["Noir","Blanc","Marron","Gris","Roux","Crème","Tacheté","Tricolore","Bringé","Fauve"],client_types:["Particulier","Éleveur","Ferme","Refuge","Clinique","Zoo"],consultation_types:["Consultation générale","Vaccination","Chirurgie","Urgence","Contrôle post-opératoire","Examen de santé","Stérilisation","Dentaire","Dermatologie","Cardiologie","Ophtalmologie","Orthopédie"],appointment_types:["Consultation","Vaccination","Chirurgie","Urgence","Contrôle","Toilettage","Radiographie","Échographie","Analyses"],medication_categories:["Antibiotiques","Anti-inflammatoires","Antiparasitaires","Vaccins","Anesthésiques","Vitamines","Compléments","Dermatologie","Cardiologie","Neurologie"],vaccination_types:["CHPPI-L (Chien)","Rage","Toux du chenil","TCL (Chat)","Leucose féline","FIV","Myxomatose (Lapin)","VHD (Lapin)"],parasite_types:["Puces","Tiques","Vers ronds","Vers plats","Giardia","Coccidies","Acariens","Poux"],farm_types:["Bovin laitier","Bovin viande","Porcin","Avicole","Ovin","Caprin","Équin","Apiculture","Aquaculture","Cuniculture","Mixte"],payment_methods:["Espèces","Carte bancaire","Chèque","Virement","Autre"],currencies:["MAD","EUR","USD"],countries:["Maroc","France","Espagne","Algérie","Tunisie"],cities_morocco:["Rabat","Casablanca","Fès","Marrakech","Agadir","Tanger","Meknès","Oujda","Kenitra","Tétouan"]},Pee=e=>an({queryKey:["app-settings",e],queryFn:()=>XZ(e),enabled:!!e}),Ko=()=>an({queryKey:["app-setting","animals","species"],queryFn:()=>Ho("animals","species"),select:e=>(e==null?void 0:e.setting_value)||xn.animal_species}),Y3=e=>an({queryKey:["app-setting","animals","breeds"],queryFn:()=>Ho("animals","breeds"),select:t=>(t==null?void 0:t.setting_value)||xn.animal_breeds}),Q3=()=>an({queryKey:["app-setting","animals","colors"],queryFn:()=>Ho("animals","colors"),select:e=>(e==null?void 0:e.setting_value)||xn.animal_colors}),X3=()=>an({queryKey:["app-setting","clients","types"],queryFn:()=>Ho("clients","types"),select:e=>(e==null?void 0:e.setting_value)||xn.client_types}),a2=()=>an({queryKey:["app-setting","appointments","types"],queryFn:()=>Ho("appointments","types"),select:e=>(e==null?void 0:e.setting_value)||xn.appointment_types}),J3=()=>an({queryKey:["app-setting","vaccinations","types"],queryFn:()=>Ho("vaccinations","types"),select:e=>(e==null?void 0:e.setting_value)||xn.vaccination_types}),Z3=()=>an({queryKey:["app-setting","parasites","types"],queryFn:()=>Ho("parasites","types"),select:e=>(e==null?void 0:e.setting_value)||xn.parasite_types}),Aee=()=>an({queryKey:["veterinarian-settings"],queryFn:ZZ}),eL=()=>{const e=Ct();return Pt({mutationFn:async({category:t,key:n,value:r,description:a})=>W3(t,n,r,a),onSuccess:(t,n)=>{e.invalidateQueries({queryKey:["app-setting",n.category,n.key]}),e.invalidateQueries({queryKey:["app-settings",n.category]}),e.invalidateQueries({queryKey:["app-settings"]})}})},kee=()=>{const e=Ct();return Pt({mutationFn:({category:t,key:n})=>JZ(t,n),onSuccess:()=>{e.invalidateQueries({queryKey:["app-settings"]})}})},Tee=()=>{const e=Ct();return Pt({mutationFn:eee,onSuccess:()=>{e.invalidateQueries({queryKey:["veterinarian-settings"]})}})},Eee=()=>{const e=eL();return{initializeDefaults:async()=>{const n=[{category:"animals",key:"species",value:xn.animal_species,description:"Types d'espèces animales"},{category:"animals",key:"breeds",value:xn.animal_breeds,description:"Races par espèce"},{category:"animals",key:"colors",value:xn.animal_colors,description:"Couleurs des animaux"},{category:"clients",key:"types",value:xn.client_types,description:"Types de clients"},{category:"consultations",key:"types",value:xn.consultation_types,description:"Types de consultations"},{category:"appointments",key:"types",value:xn.appointment_types,description:"Types de rendez-vous"},{category:"medications",key:"categories",value:xn.medication_categories,description:"Catégories de médicaments"},{category:"vaccinations",key:"types",value:xn.vaccination_types,description:"Types de vaccinations"},{category:"parasites",key:"types",value:xn.parasite_types,description:"Types de parasites"},{category:"farms",key:"types",value:xn.farm_types,description:"Types de fermes"},{category:"payments",key:"methods",value:xn.payment_methods,description:"Méthodes de paiement"}];for(const r of n)try{await e.mutateAsync(r)}catch(a){console.error(`Failed to initialize setting ${r.category}.${r.key}:`,a)}},isLoading:e.isPending}};function Qx({open:e,onOpenChange:t}){const n=tee(),{toast:r}=it(),{data:a=[],isLoading:i}=X3(),[o,l]=j.useState({first_name:"",last_name:"",email:"",phone:"",mobile_phone:"",address:"",city:"",postal_code:"",country:"Maroc",notes:"",client_type:"particulier"}),c=h=>{const{id:m,value:f}=h.target;l(v=>({...v,[m]:f}))},u=(h,m)=>{l(f=>({...f,[h]:m}))},d=async h=>{h.preventDefault();try{await n.mutateAsync(o),r({title:"Client ajouté",description:`${o.first_name} ${o.last_name} a été ajouté et sauvegardé avec succès.`}),l({first_name:"",last_name:"",email:"",phone:"",mobile_phone:"",address:"",city:"",postal_code:"",country:"Maroc",notes:"",client_type:a.length>0?a[0].toLowerCase():"particulier"}),t(!1)}catch{r({title:"Erreur",description:"Une erreur s'est produite lors de l'ajout du client.",variant:"destructive"})}};return s.jsx(Qe,{open:e,onOpenChange:t,children:s.jsxs(Ye,{className:"sm:max-w-[500px]",children:[s.jsxs(Xe,{children:[s.jsx(Je,{children:"Nouveau Client"}),s.jsx(Bt,{children:"Ajoutez un nouveau client à votre base de données."})]}),s.jsxs("form",{onSubmit:d,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"first_name",children:"Prénom *"}),s.jsx(Y,{id:"first_name",value:o.first_name,onChange:c,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"last_name",children:"Nom *"}),s.jsx(Y,{id:"last_name",value:o.last_name,onChange:c,required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"email",children:"Email"}),s.jsx(Y,{id:"email",type:"email",value:o.email||"",onChange:c})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"phone",children:"Téléphone *"}),s.jsx(Y,{id:"phone",value:o.phone||"",onChange:c,required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"address",children:"Adresse"}),s.jsx(Y,{id:"address",value:o.address||"",onChange:c})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"city",children:"Ville"}),s.jsx(Y,{id:"city",value:o.city||"",onChange:c})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"postal_code",children:"Code postal"}),s.jsx(Y,{id:"postal_code",value:o.postal_code||"",onChange:c})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"mobile_phone",children:"Téléphone portable"}),s.jsx(Y,{id:"mobile_phone",value:o.mobile_phone||"",onChange:c,placeholder:"Numéro de téléphone portable"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"client_type",children:"Type de client"}),s.jsxs(je,{value:o.client_type,onValueChange:h=>u("client_type",h),children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Sélectionner le type"})}),s.jsx(ye,{children:a.map(h=>s.jsx(z,{value:h.toLowerCase(),children:h},h))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"notes",children:"Notes"}),s.jsx(Ue,{id:"notes",value:o.notes||"",onChange:c,placeholder:"Notes additionnelles..."})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(R,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsxs(R,{type:"submit",disabled:n.isPending,children:[n.isPending&&s.jsx(Qn,{className:"mr-2 h-4 w-4 animate-spin"}),"Ajouter Client"]})]})]})]})})}function tL({open:e,onOpenChange:t,prefillClientId:n,prefillPetId:r,prefillType:a,prefillReason:i}){const{data:o=[]}=ir(),{data:l=[]}=or(),c=G3(),{toast:u}=it(),{data:d=[],isLoading:h}=a2(),[m,f]=j.useState({clientId:n||"",animalId:r||"",date:"",time:"",appointmentType:a||"consultation",notes:i||""}),[v,p]=j.useState([]);j.useEffect(()=>{if(n&&e){const N=l.filter(S=>S.client_id===n);p(N)}},[n,e,l]);const g=async N=>{if(N.preventDefault(),!m.clientId||!m.animalId||!m.date||!m.time){u({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires",variant:"destructive"});return}try{const S=new Date(`${m.date}T${m.time}:00`);await c.mutateAsync({client_id:m.clientId,animal_id:m.animalId,appointment_date:S.toISOString(),appointment_type:m.appointmentType,notes:m.notes||void 0,duration_minutes:30}),u({title:"Succès",description:"Rendez-vous créé avec succès"}),f({clientId:"",animalId:"",date:"",time:"",appointmentType:"consultation",notes:""}),p([]),t(!1)}catch(S){console.error("Error creating appointment:",S),u({title:"Erreur",description:"Impossible de créer le rendez-vous",variant:"destructive"})}},x=N=>{f(_=>({..._,clientId:N,animalId:""}));const S=l.filter(_=>_.client_id===N);p(S)},y=N=>`${N.first_name} ${N.last_name}`,b=N=>`${N.name} (${N.species})`,C=()=>new Date().toISOString().split("T")[0],w=()=>{const N=new Date;return N.setHours(N.getHours()+1,0,0,0),N.toTimeString().slice(0,5)};return s.jsx(Qe,{open:e,onOpenChange:t,children:s.jsxs(Ye,{className:"sm:max-w-[500px] max-h-[90vh] overflow-y-auto",children:[s.jsxs(Xe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(Ge,{className:"h-5 w-5"}),"Nouveau Rendez-vous"]}),s.jsx(Bt,{children:"Planifiez un nouveau rendez-vous pour un animal"})]}),s.jsxs("form",{onSubmit:g,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(O,{htmlFor:"client",className:"flex items-center gap-2",children:[s.jsx(Xn,{className:"h-4 w-4"}),"Client *"]}),s.jsxs(je,{value:m.clientId,onValueChange:x,required:!0,children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Sélectionner un client"})}),s.jsx(ye,{children:o.map(N=>s.jsx(z,{value:N.id,children:y(N)},N.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(O,{htmlFor:"animal",className:"flex items-center gap-2",children:[s.jsx(ft,{className:"h-4 w-4"}),"Animal *"]}),s.jsxs(je,{value:m.animalId,onValueChange:N=>f(S=>({...S,animalId:N})),disabled:!m.clientId,required:!0,children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Sélectionner un animal"})}),s.jsx(ye,{children:v.map(N=>s.jsx(z,{value:N.id,children:b(N)},N.id))})]}),!m.clientId&&s.jsx("p",{className:"text-sm text-muted-foreground",children:"Sélectionnez d'abord un client"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(O,{htmlFor:"date",className:"flex items-center gap-2",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Date *"]}),s.jsx(Y,{id:"date",type:"date",value:m.date||C(),onChange:N=>f(S=>({...S,date:N.target.value})),min:new Date().toISOString().split("T")[0],required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(O,{htmlFor:"time",className:"flex items-center gap-2",children:[s.jsx(Qt,{className:"h-4 w-4"}),"Heure *"]}),s.jsx(Y,{id:"time",type:"time",value:m.time||w(),onChange:N=>f(S=>({...S,time:N.target.value})),required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"appointmentType",children:"Type de rendez-vous"}),s.jsxs(je,{value:m.appointmentType,onValueChange:N=>f(S=>({...S,appointmentType:N})),children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Type de rendez-vous"})}),s.jsx(ye,{children:d.map(N=>s.jsx(z,{value:N.toLowerCase().replace(/\s+/g,"-"),children:N},N))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"notes",children:"Notes (optionnel)"}),s.jsx(Ue,{id:"notes",placeholder:"Notes additionnelles sur le rendez-vous...",value:m.notes,onChange:N=>f(S=>({...S,notes:N.target.value})),rows:3})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[s.jsx(R,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:c.isPending,children:"Annuler"}),s.jsx(R,{type:"submit",disabled:c.isPending,className:"gap-2",children:c.isPending?s.jsxs(s.Fragment,{children:[s.jsx(Qn,{className:"h-4 w-4 animate-spin"}),"Création..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ge,{className:"h-4 w-4"}),"Créer le rendez-vous"]})})]})]})]})})}function Xx({open:e,onOpenChange:t}){const{data:n=[]}=ir(),{data:r=[]}=or(),a=see(),{toast:i}=it(),{data:o=[]}=Ko(),{data:l={}}=Y3(),{data:c=[]}=Q3(),[u,d]=j.useState({name:"",type:"",breed:"",gender:"",birthDate:"",weight:"",color:"",ownerId:"",microchip:"",medicalNotes:"",photo:"",status:"vivant",hasPedigree:!1,officialName:"",pedigreeNumber:"",breeder:"",fatherName:"",fatherPedigree:"",fatherBreed:"",fatherTitles:"",motherName:"",motherPedigree:"",motherBreed:"",motherTitles:"",pedigreePhoto:""}),h=u.type&&l[u.type]?l[u.type]:[],m=p=>{d(g=>({...g,[p.target.id]:p.target.value}))},f=(p,g)=>{d(x=>({...x,[p]:g}))},v=async p=>{if(p.preventDefault(),!n.find(x=>x.id===u.ownerId)){i({title:"Erreur",description:"Veuillez sélectionner un propriétaire valide."});return}if(u.microchip&&u.microchip.trim()&&r.find(y=>y.microchip_number===u.microchip.trim())){i({title:"Erreur",description:"Un animal avec ce numéro de puce existe déjà.",variant:"destructive"});return}try{const x={client_id:u.ownerId,name:u.name,species:u.type,breed:u.breed||void 0,color:u.color||void 0,sex:u.gender==="male"?"Mâle":u.gender==="female"?"Femelle":"Inconnu",weight:u.weight?Number(u.weight):void 0,birth_date:u.birthDate||void 0,...u.microchip&&u.microchip.trim()?{microchip_number:u.microchip.trim()}:{},notes:u.medicalNotes||void 0,photo_url:u.photo||void 0,status:u.status==="healthy"?"vivant":u.status==="urgent"?"décédé":"perdu"};await a.mutateAsync(x),i({title:"Animal ajouté",description:`${u.name} a été ajouté et sauvegardé avec succès.`}),d({name:"",type:"",breed:"",gender:"",birthDate:"",weight:"",color:"",ownerId:"",microchip:"",medicalNotes:"",photo:"",status:"vivant",hasPedigree:!1,officialName:"",pedigreeNumber:"",breeder:"",fatherName:"",fatherPedigree:"",fatherBreed:"",fatherTitles:"",motherName:"",motherPedigree:"",motherBreed:"",motherTitles:"",pedigreePhoto:""}),t(!1)}catch{i({title:"Erreur",description:"Erreur lors de l'ajout de l'animal",variant:"destructive"})}};return s.jsx(Qe,{open:e,onOpenChange:t,children:s.jsxs(Ye,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto",children:[s.jsxs(Xe,{children:[s.jsx(Je,{children:"Nouvel Animal"}),s.jsx(Bt,{children:"Ajoutez un nouvel animal à votre base de données."})]}),s.jsxs("form",{onSubmit:v,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"name",children:"Nom de l'animal *"}),s.jsx(Y,{id:"name",value:u.name,onChange:m,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{children:"Type d'animal *"}),s.jsxs(je,{value:u.type,onValueChange:p=>f("type",p),children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Sélectionner le type"})}),s.jsx(ye,{children:o.map(p=>s.jsx(z,{value:p,children:p},p))})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"breed",children:"Race"}),s.jsxs(je,{value:u.breed,onValueChange:p=>f("breed",p),children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Sélectionner la race"})}),s.jsx(ye,{children:h.length>0?h.map(p=>s.jsx(z,{value:p,children:p},p)):s.jsx(z,{value:"not-available",disabled:!0,children:u.type?"Aucune race disponible":"Sélectionnez d'abord un type"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{children:"Sexe"}),s.jsxs(je,{value:u.gender,onValueChange:p=>f("gender",p),children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Sélectionner le sexe"})}),s.jsxs(ye,{children:[s.jsx(z,{value:"male",children:"Mâle"}),s.jsx(z,{value:"female",children:"Femelle"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"birthDate",children:"Date de naissance"}),s.jsx(Y,{id:"birthDate",type:"date",value:u.birthDate,onChange:m,max:new Date().toISOString().split("T")[0]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"weight",children:"Poids (kg)"}),s.jsx(Y,{id:"weight",value:u.weight,onChange:m})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"color",children:"Couleur"}),s.jsxs(je,{value:u.color,onValueChange:p=>f("color",p),children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Sélectionner la couleur"})}),s.jsx(ye,{children:c.map(p=>s.jsx(z,{value:p,children:p},p))})]})]}),s.jsx("div",{className:"space-y-2"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{children:"Propriétaire *"}),n.length===0?s.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:s.jsx("p",{className:"text-yellow-800 text-sm",children:"Aucun client disponible. Veuillez d'abord ajouter un client."})}):s.jsxs(je,{value:u.ownerId.toString(),onValueChange:p=>f("ownerId",p),children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Sélectionner le propriétaire"})}),s.jsx(ye,{children:n.map(p=>s.jsxs(z,{value:p.id.toString(),children:[p.first_name," ",p.last_name," - ",p.email]},p.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"microchip",children:"Numéro de puce électronique"}),s.jsx(Y,{id:"microchip",value:u.microchip,onChange:m})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"medicalNotes",children:"Notes médicales"}),s.jsx(Ue,{id:"medicalNotes",value:u.medicalNotes,onChange:m,placeholder:"Allergies, conditions médicales, notes importantes..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{children:"État de santé"}),s.jsxs(je,{value:u.status,onValueChange:p=>f("status",p),children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Sélectionner l'état de santé"})}),s.jsxs(ye,{children:[s.jsx(z,{value:"healthy",children:"En bonne santé"}),s.jsx(z,{value:"treatment",children:"En traitement"}),s.jsx(z,{value:"urgent",children:"Urgent"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{children:"Photo de l'animal"}),s.jsx("input",{type:"file",accept:"image/*",onChange:async p=>{var y;const g=(y=p.target.files)==null?void 0:y[0];if(!g)return;const x=new FileReader;x.onload=()=>d(b=>({...b,photo:x.result})),x.readAsDataURL(g)}}),u.photo&&s.jsx("img",{src:u.photo,alt:"preview",className:"h-24 w-24 object-cover rounded"})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(R,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsx(R,{type:"submit",children:"Ajouter Animal"})]})]})]})})}const _p="vetpro-clinicSettings",nL={farmTypes:["Bovin laitier","Bovin viande","Porcin","Avicole","Ovin","Caprin","Équin","Apiculture","Aquaculture","Cuniculture","Mixte"],animalCategories:["Bovins laitiers","Bovins à viande","Porcs","Poules pondeuses","Poulets de chair","Ovins","Caprins","Chevaux","Lapins","Abeilles","Poissons"],breedsByCategory:{"Bovins laitiers":["Holstein","Prim'Holstein","Montbéliarde","Normande","Simmental"],"Bovins à viande":["Charolaise","Limousine","Blonde d'Aquitaine","Angus","Salers"],Porcs:["Large White","Landrace","Piétrain","Duroc","Hampshire"],"Poules pondeuses":["ISA Brown","Lohmann Brown","Hy-Line","Novogen","Dekalb"],"Poulets de chair":["Cobb 500","Ross 308","Hubbard","Arbor Acres"],Ovins:["Lacaune","Brebis laitière","Ile-de-France","Texel","Suffolk"],Caprins:["Saanen","Alpine","Poitevine","Boer","Angora"],Chevaux:["Pur-sang","Trotteur","Selle français","Arabe","Quarter Horse"],Lapins:["Néo-Zélandais","Californien","Fauve de Bourgogne","Géant des Flandres"],Abeilles:["Abeille noire","Buckfast","Carnica","Caucasienne"],Poissons:["Truite arc-en-ciel","Saumon","Carpe","Bar","Daurade"]},certificationTypes:["Agriculture Biologique","Label Rouge","AOC/AOP","IGP","Haute Valeur Environnementale","Bien-être animal","Global GAP","IFS Food","BRC Food","Œufs de France"],equipmentTypes:["Tracteur","Moissonneuse","Épandeur","Charrue","Système de traite","Tank à lait","Système d'alimentation automatique","Ventilation","Générateur","Système d'irrigation","Matériel de récolte"],defaultSurfaceUnit:"hectares",defaultCoordinateFormat:"decimal"},rL={clients:"table",pets:"cards",consultations:"table",appointments:"table",prescriptions:"table",farms:"cards",vaccinations:"table",antiparasitics:"table"},sL={openingTime:"08:00",closingTime:"18:00",slotDuration:30,lunchBreakStart:"12:00",lunchBreakEnd:"13:00",workingDays:["monday","tuesday","wednesday","thursday","friday","saturday"]},Cw=[{id:1,name:"Dr. Jean Dupont",isActive:!0},{id:2,name:"Dr. Marie Martin",isActive:!0},{id:3,name:"Pr. Ahmed El Alaoui",isActive:!0}],Pp={clinicName:"",address:"",phone:"",email:"",website:"",footerText:"",logo:"/placeholder.svg",currency:"MAD",species:"",showClinicInfo:!0,showVetsInfo:!0,veterinarians:Cw,farmManagement:nL,displayPreferences:rL,defaultConsultationPrice:150,scheduleSettings:sL},aL=j.createContext(void 0),Oee=({children:e})=>{const[t,n]=j.useState(Pp);j.useEffect(()=>{const a=localStorage.getItem(_p);if(a)try{const i=JSON.parse(a),o={...Pp,...i,veterinarians:i.veterinarians&&i.veterinarians.some(l=>l.name==="Dr. Martin"||l.name==="Dr. Dupont")?Cw:i.veterinarians||Cw,farmManagement:{...nL,...i.farmManagement},displayPreferences:{...rL,...i.displayPreferences},scheduleSettings:{...sL,...i.scheduleSettings}};n(o),localStorage.setItem(_p,JSON.stringify(o))}catch(i){console.error("Erreur lors du chargement des paramètres:",i),n(Pp)}else localStorage.setItem(_p,JSON.stringify(Pp))},[]);const r=a=>{n(a),localStorage.setItem(_p,JSON.stringify(a))};return s.jsx(aL.Provider,{value:{settings:t,updateSettings:r},children:e})};//!/ note: AD - not important
const At=()=>{const e=j.useContext(aL);if(!e)throw new Error("useSettings must be used within SettingsProvider");return e};function $d({open:e,onOpenChange:t,prefillData:n}){var C,w;const{data:r=[],isLoading:a}=ir(),{data:i=[],isLoading:o}=or(),l=H3(),{toast:c}=it();At();const[u,d]=j.useState(!1),[h,m]=j.useState(!1),[f,v]=j.useState({clientId:(n==null?void 0:n.clientId)||"",clientName:"",animalId:(n==null?void 0:n.animalId)||"",animalName:"",date:n!=null&&n.consultation_date?new Date(n.consultation_date).toISOString().split("T")[0]:"",weight:((C=n==null?void 0:n.weight)==null?void 0:C.toString())||"",temperature:((w=n==null?void 0:n.temperature)==null?void 0:w.toString())||"",symptoms:(n==null?void 0:n.symptoms)||"",diagnosis:(n==null?void 0:n.diagnosis)||"",treatment:(n==null?void 0:n.treatment)||"",followUp:(n==null?void 0:n.follow_up_notes)||"",notes:(n==null?void 0:n.notes)||"",photos:(n==null?void 0:n.photos)||[]}),p=i.filter(N=>N.client_id===f.clientId),g=new Date().toISOString().split("T")[0],x=N=>{v(S=>({...S,[N.target.id]:N.target.value}))},y=(N,S)=>{if(N==="clientId"){const _=r.find(P=>P.id===S);v(P=>({...P,clientId:S,clientName:_?`${_.first_name} ${_.last_name}`:"",animalId:"",animalName:""}))}else if(N==="animalId"){const _=i.find(P=>P.id===S);v(P=>({...P,animalId:S,animalName:(_==null?void 0:_.name)||""}))}else v(_=>({..._,[N]:S}))},b=async N=>{N.preventDefault();const S=[];if(f.clientId||S.push("Veuillez sélectionner un client"),f.animalId||S.push("Veuillez sélectionner un animal"),!f.date)S.push("Veuillez sélectionner une date de consultation");else{const _=new Date(f.date),P=new Date;P.setFullYear(P.getFullYear()+1),_>P&&S.push("La date de consultation ne peut pas être plus d'un an dans le futur")}if(f.weight){const _=parseFloat(f.weight);(isNaN(_)||_<=0||_>999.9)&&S.push("Le poids doit être un nombre valide entre 0.1 et 999.9 kg")}if(f.temperature){const _=parseFloat(f.temperature);(isNaN(_)||_<30||_>50)&&S.push("La température doit être un nombre valide entre 30°C et 50°C")}if(f.symptoms&&f.symptoms.length>1e3&&S.push("Les symptômes ne peuvent pas dépasser 1000 caractères"),f.diagnosis&&f.diagnosis.length>1e3&&S.push("Le diagnostic ne peut pas dépasser 1000 caractères"),f.treatment&&f.treatment.length>1e3&&S.push("Le traitement ne peut pas dépasser 1000 caractères"),f.notes&&f.notes.length>2e3&&S.push("Les notes ne peuvent pas dépasser 2000 caractères"),f.followUp&&f.followUp.length>500&&S.push("Les notes de suivi ne peuvent pas dépasser 500 caractères"),S.length>0){c({title:"Erreurs de validation",description:S.join(". "),variant:"destructive"});return}try{const _={client_id:f.clientId,animal_id:f.animalId,consultation_type:"routine",consultation_date:f.date||g,weight:f.weight?Math.min(parseFloat(f.weight),999.9):void 0,temperature:f.temperature?Math.min(parseFloat(f.temperature),99.9):void 0,symptoms:f.symptoms.trim()||void 0,diagnosis:f.diagnosis.trim()||void 0,treatment:f.treatment.trim()||void 0,follow_up_notes:f.followUp.trim()||void 0,notes:f.notes.trim()||void 0};await l.mutateAsync(_),c({title:"Consultation enregistrée",description:`Consultation pour ${f.animalName} (${f.clientName}) a été enregistrée avec succès.`}),v({clientId:"",clientName:"",animalId:"",animalName:"",date:g,weight:"",temperature:"",symptoms:"",diagnosis:"",treatment:"",followUp:"",notes:"",photos:[]}),t(!1)}catch(_){console.error("Error creating consultation:",_);let P="Impossible d'enregistrer la consultation. Veuillez réessayer.";_!=null&&_.message&&(_.message.includes("foreign key constraint")?P="Erreur: Le client ou l'animal sélectionné n'existe plus. Veuillez actualiser la page.":_.message.includes("network")?P="Erreur de connexion. Vérifiez votre connexion internet et réessayez.":_.message.includes("permission")||_.message.includes("unauthorized")?P="Vous n'avez pas les permissions nécessaires pour créer une consultation.":(_.message.includes("duplicate")||_.message.includes("already exists"))&&(P="Une consultation similaire existe déjà pour cette date.")),c({title:"Erreur lors de la création",description:P,variant:"destructive"})}};return j.useEffect(()=>{e&&v({clientId:"",clientName:"",animalId:"",animalName:"",date:g,weight:"",temperature:"",symptoms:"",diagnosis:"",treatment:"",followUp:"",notes:"",photos:[]})},[e,g]),s.jsxs(s.Fragment,{children:[s.jsx(Qe,{open:e,onOpenChange:t,children:s.jsxs(Ye,{className:"sm:max-w-[700px] max-h-[80vh] overflow-y-auto",children:[s.jsxs(Xe,{children:[s.jsx(Je,{children:"Nouvelle Consultation"}),s.jsx(Bt,{children:"Enregistrez une nouvelle consultation vétérinaire."})]}),s.jsxs("form",{onSubmit:b,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{children:"Client *"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(je,{value:f.clientId.toString(),onValueChange:N=>y("clientId",N),disabled:a,children:[s.jsx(xe,{className:"flex-1",children:s.jsx(be,{placeholder:a?"Chargement des clients...":"Sélectionner le client"})}),s.jsx(ye,{children:r.length===0&&!a?s.jsx(z,{value:"",disabled:!0,children:"Aucun client disponible"}):r.map(N=>s.jsxs(z,{value:N.id,children:[N.first_name," ",N.last_name]},N.id))})]}),s.jsx(R,{type:"button",size:"sm",variant:"outline",onClick:()=>d(!0),className:"px-2",disabled:a,children:s.jsx(Ze,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{children:"Animal *"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(je,{value:f.animalId,onValueChange:N=>y("animalId",N),disabled:!f.clientId||o,children:[s.jsx(xe,{className:"flex-1",children:s.jsx(be,{placeholder:f.clientId?o?"Chargement des animaux...":p.length===0?"Aucun animal pour ce client":"Sélectionner l'animal":"Sélectionnez d'abord un client"})}),s.jsx(ye,{children:p.length===0&&f.clientId&&!o?s.jsx(z,{value:"",disabled:!0,children:"Aucun animal pour ce client"}):p.map(N=>s.jsxs(z,{value:N.id,children:[N.name," (",N.species,")"]},N.id))})]}),s.jsx(R,{type:"button",size:"sm",variant:"outline",onClick:()=>m(!0),className:"px-2",disabled:!f.clientId||o,children:s.jsx(Ze,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"date",children:"Date *"}),s.jsx(Y,{id:"date",type:"date",value:f.date||g,onChange:x,required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"weight",children:"Poids (kg)"}),s.jsx(Y,{id:"weight",type:"number",step:"0.1",min:"0.1",max:"999.9",value:f.weight,onChange:x,placeholder:"ex: 25.5",title:"Poids en kilogrammes (0.1 à 999.9 kg)"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"temperature",children:"Température (°C)"}),s.jsx(Y,{id:"temperature",type:"number",step:"0.1",min:"30",max:"50",value:f.temperature,onChange:x,placeholder:"ex: 38.5",title:"Température corporelle (30°C à 50°C)"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"symptoms",children:"Symptômes observés"}),s.jsx(Ue,{id:"symptoms",value:f.symptoms,onChange:x,placeholder:"Symptômes observés, comportement anormal...",rows:3,maxLength:1e3,title:"Maximum 1000 caractères"}),s.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[f.symptoms.length,"/1000 caractères"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"diagnosis",children:"Diagnostic"}),s.jsx(Ue,{id:"diagnosis",value:f.diagnosis,onChange:x,placeholder:"Diagnostic établi...",rows:3,maxLength:1e3,title:"Maximum 1000 caractères"}),s.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[f.diagnosis.length,"/1000 caractères"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"treatment",children:"Traitement administré"}),s.jsx(Ue,{id:"treatment",value:f.treatment,onChange:x,placeholder:"Traitements, injections, interventions...",rows:3,maxLength:1e3,title:"Maximum 1000 caractères"}),s.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[f.treatment.length,"/1000 caractères"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"followUp",children:"Suivi recommandé"}),s.jsx(Y,{id:"followUp",value:f.followUp,onChange:x,placeholder:"ex: Contrôle dans 1 semaine",maxLength:500,title:"Maximum 500 caractères"}),s.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[f.followUp.length,"/500 caractères"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"notes",children:"Notes additionnelles"}),s.jsx(Ue,{id:"notes",value:f.notes,onChange:x,placeholder:"Notes diverses, recommandations...",rows:3,maxLength:2e3,title:"Maximum 2000 caractères"}),s.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[f.notes.length,"/2000 caractères"]})]}),s.jsxs("div",{className:"space-y-2 col-span-2",children:[s.jsx(O,{children:"Photos de la consultation"}),s.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:async N=>{const S=Array.from(N.target.files||[]),_=await Promise.all(S.map(P=>new Promise((A,E)=>{const k=new FileReader;k.onload=()=>A(k.result),k.onerror=()=>E(),k.readAsDataURL(P)})));v(P=>({...P,photos:[...P.photos,..._]}))},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary file:text-primary-foreground hover:file:bg-primary/90"}),f.photos.length>0&&s.jsx("div",{className:"flex gap-2 overflow-x-auto pt-2",children:f.photos.map((N,S)=>s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:N,alt:`photo-${S}`,className:"h-24 w-24 object-cover rounded"}),s.jsx("button",{type:"button",onClick:()=>v(_=>({..._,photos:_.photos.filter((P,A)=>A!==S)})),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600",children:"×"})]},S))})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(R,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:l.isPending,children:"Annuler"}),s.jsx(R,{type:"submit",disabled:!f.clientId||!f.animalId||l.isPending||a||o,children:l.isPending?"Enregistrement...":"Enregistrer Consultation"})]})]})]})}),s.jsx(Qx,{open:u,onOpenChange:d}),s.jsx(Xx,{open:h,onOpenChange:m})]})}const Dee=({children:e,allowedRoles:t,fallback:n=null})=>{const{user:r}=qo();return!r||!t.includes(r.profile.role)?s.jsx(s.Fragment,{children:n}):s.jsx(s.Fragment,{children:e})},_w=({children:e,fallback:t=null})=>s.jsx(Dee,{allowedRoles:["admin"],fallback:t,children:e});function Mee(){const{data:e=[]}=ir(),{data:t=[]}=or(),{data:n=[]}=Md(),{data:r=[]}=Id(),{data:a=[]}=Gx(),{settings:i}=At(),o=JSON.parse(localStorage.getItem("vetpro-veterinarians")||"[]"),l=o.length===1?`Bienvenue ${o[0].title} ${o[0].name}`:`Bienvenue à ${i.clinicName}`,[c,u]=j.useState(!1),[d,h]=j.useState(!1),[m,f]=j.useState(!1),[v,p]=j.useState(!1),g=e.length,x=t.length,y=r.length,b=a.length,C=new Date().toISOString().split("T")[0],w=n.filter(S=>S.consultation_date.split("T")[0]===C).length,N={totalRevenue:0,totalExpenses:0,netIncome:0,revenueBreakdown:{consultations:0,vaccinations:0,antiparasitics:0,prescriptions:0,manualEntries:0},expenseBreakdown:{stockPurchases:0,salaries:0,rent:0,taxes:0,other:0}};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"relative overflow-hidden gradient-hero rounded-2xl p-4 md:p-8 mb-8",children:s.jsxs("div",{className:"flex flex-col lg:flex-row items-start lg:items-center gap-6 md:gap-8",children:[i.logo&&s.jsx("img",{src:i.logo,alt:"Logo clinique",className:"h-16 w-16 md:h-20 md:w-20 object-contain rounded"}),s.jsxs("div",{className:"flex-1 space-y-4 md:space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ft,{className:"h-6 w-6 md:h-8 md:w-8 text-primary"}),s.jsx("span",{className:"text-xs md:text-sm font-medium text-primary",children:"Gestion Vétérinaire Complète"})]}),s.jsxs("h1",{className:"text-2xl md:text-4xl font-bold leading-tight max-w-3xl",children:[l,", ",s.jsx("span",{className:"gradient-primary bg-clip-text text-transparent block",children:"Dashboard VetPro"})]}),s.jsx("p",{className:"text-base md:text-lg text-muted-foreground max-w-3xl",children:"Gérez efficacement vos clients, leurs animaux, les rendez-vous et consultations. Votre pratique vétérinaire optimisée en un seul endroit."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 md:gap-4 pt-4",children:[s.jsxs(R,{size:"lg",className:"gap-2 medical-glow w-full sm:w-auto",onClick:()=>u(!0),children:[s.jsx(Va,{className:"h-5 w-5"}),"Nouveau Client",s.jsx(kb,{className:"h-4 w-4"})]}),s.jsxs(R,{variant:"outline",size:"lg",className:"gap-2 w-full sm:w-auto",onClick:()=>f(!0),children:[s.jsx(ft,{className:"h-5 w-5"}),"Nouvel Animal"]}),s.jsxs(R,{variant:"outline",size:"lg",className:"gap-2 w-full sm:w-auto",onClick:()=>h(!0),children:[s.jsx(Ge,{className:"h-5 w-5"}),"Planifier RDV"]}),s.jsxs(R,{variant:"outline",size:"lg",className:"gap-2 w-full sm:w-auto",onClick:()=>p(!0),children:[s.jsx(Pn,{className:"h-5 w-5"}),"Nouvelle Consultation"]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 md:gap-6 pt-6 md:pt-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl md:text-2xl font-bold text-primary",children:g}),s.jsx("div",{className:"text-xs md:text-sm text-muted-foreground",children:"Clients actifs"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl md:text-2xl font-bold text-secondary",children:x}),s.jsx("div",{className:"text-xs md:text-sm text-muted-foreground",children:"Animaux suivis"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl md:text-2xl font-bold text-accent",children:w}),s.jsx("div",{className:"text-xs md:text-sm text-muted-foreground",children:"Consultations aujourd'hui"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl md:text-2xl font-bold text-blue-600",children:y}),s.jsx("div",{className:"text-xs md:text-sm text-muted-foreground",children:"Vaccinations"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl md:text-2xl font-bold text-purple-600",children:b}),s.jsx("div",{className:"text-xs md:text-sm text-muted-foreground",children:"Antiparasitaires"})]}),s.jsx(_w,{children:s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-xl md:text-2xl font-bold text-emerald-600",children:[N.totalRevenue.toFixed(2)," ",i.currency||"€"]}),s.jsx("div",{className:"text-xs md:text-sm text-muted-foreground",children:"Revenus ce mois"})]})})]})]}),s.jsx("div",{className:"hidden lg:block",children:s.jsx("img",{src:BR,alt:"Vétérinaire professionnel examinant un chien",className:"w-96 h-64 object-cover rounded-xl shadow-medical"})})]})}),s.jsx(Qx,{open:c,onOpenChange:u}),s.jsx(tL,{open:d,onOpenChange:h}),s.jsx(Xx,{open:m,onOpenChange:f}),s.jsx($d,{open:v,onOpenChange:p})]})}function Iee(){const{data:e=[]}=ir(),{data:t=[]}=or(),{data:n=[]}=Md(),{data:r=[]}=s2(),{data:a=[]}=Yx(),{data:i=[]}=Id(),{data:o=[]}=Gx(),{data:l=[]}=r2(),{settings:c}=At(),u=e.length,d=t.length;n.length,r.length,a.length;const h=0,m=i.length,f=o.length,v=l.length,p=new Date().getMonth(),g=new Date().getFullYear(),x=n.filter(G=>{const Q=new Date(G.consultation_date);return Q.getMonth()===p&&Q.getFullYear()===g}).length,y=i.filter(G=>{const Q=new Date(G.vaccination_date);return Q.getMonth()===p&&Q.getFullYear()===g}).length,b=o.filter(G=>{const Q=new Date(G.treatment_date);return Q.getMonth()===p&&Q.getFullYear()===g}).length,C=new Date().toISOString().split("T")[0],w=n.filter(G=>G.consultation_date.split("T")[0]===C).length,N=r.filter(G=>G.appointment_date.split("T")[0]===C&&G.status!=="cancelled"&&G.status!=="completed").length,S=[],_=l.filter(G=>G.current_quantity<=G.minimum_quantity).length,P=l.filter(G=>G.current_quantity===0).length;l.reduce((G,Q)=>G+Q.current_quantity*(Q.unit_cost||0),0),new Date(g,p,1).toISOString().split("T")[0],new Date(g,p+1,0).toISOString().split("T")[0];const A={totalRevenue:0,totalExpenses:0,netIncome:0,revenueBreakdown:{consultations:0,vaccinations:0,antiparasitics:0,prescriptions:0,manualEntries:0},expenseBreakdown:{stockPurchases:0,salaries:0,rent:0,taxes:0,other:0}},E=A.totalRevenue,k=A.netIncome,I=(G,Q)=>{if(Q===0)return G>0?"+100%":"0%";const ne=(G-Q)/Q*100;return ne>=0?`+${Math.round(ne)}%`:`${Math.round(ne)}%`},D=p===0?11:p-1,U=p===0?g-1:g,B=n.filter(G=>{const Q=new Date(G.consultation_date);return Q.getMonth()===D&&Q.getFullYear()===U}).length,K=0,T=0;r.filter(G=>{const Q=new Date(G.appointment_date);return Q.getMonth()===D&&Q.getFullYear()===U}).length;const $=[{title:"Clients Total",value:u.toString(),change:I(u,K),icon:Va,color:"text-blue-600",bgColor:"bg-blue-50",description:`${u>0?Math.round(u/10):0} nouveaux ce mois`},{title:"Animaux Suivis",value:d.toString(),change:I(d,T),icon:ft,color:"text-red-600",bgColor:"bg-red-50",description:`${d>0?Math.round(d/8):0} nouveaux ce mois`},{title:"RDV Aujourd'hui",value:N.toString(),change:N>0?"+"+Math.min(20,Math.floor(N*.3))+"%":"0%",icon:Ge,color:"text-purple-600",bgColor:"bg-purple-50",description:`${S.length} à venir cette semaine`},{title:"Consultations",value:x.toString(),change:I(x,B),icon:Pn,color:"text-green-600",bgColor:"bg-green-50",description:`${w} aujourd'hui`},{title:"Revenus Réels",value:`${E.toFixed(0)} ${c.currency||"€"}`,change:"0%",icon:bd,color:"text-emerald-600",bgColor:"bg-emerald-50",description:`Bénéfice: ${k.toFixed(0)} ${c.currency||"€"}`},{title:"Activité Ferme",value:h.toString(),change:"0%",icon:oa,color:"text-orange-600",bgColor:"bg-orange-50",description:`${h} exploitations actives`},{title:"Vaccinations",value:y.toString(),change:y>0?"+"+Math.min(25,Math.floor(y*.3))+"%":"0%",icon:Vr,color:"text-blue-600",bgColor:"bg-blue-50",description:`${m} total ce mois`},{title:"Antiparasitaires",value:b.toString(),change:b>0?"+"+Math.min(20,Math.floor(b*.25))+"%":"0%",icon:xr,color:"text-purple-600",bgColor:"bg-purple-50",description:`${f} total ce mois`},{title:"Stock",value:v.toString(),change:_>0?"-"+Math.min(15,Math.floor(_*.2))+"%":"0%",icon:_>0?bn:Ia,color:_>0?"text-red-600":"text-green-600",bgColor:_>0?"bg-red-50":"bg-green-50",description:`${_} en rupture, ${P} épuisés`}];return s.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:$.map(G=>s.jsxs(ee,{className:"card-hover",children:[s.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(me,{className:"text-sm font-medium text-muted-foreground",children:G.title}),s.jsx("div",{className:`p-2 rounded-lg ${G.bgColor}`,children:s.jsx(G.icon,{className:`h-4 w-4 ${G.color}`})})]}),s.jsxs(te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:G.value}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[s.jsx("span",{className:"text-secondary font-medium",children:G.change})," vs mois dernier"]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:G.description})]})]},G.title))})}const $ee=bf("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Pe({className:e,variant:t,...n}){return s.jsx("div",{className:De($ee({variant:t}),e),...n})}function Ree({open:e,onOpenChange:t,client:n,onEdit:r}){return n?s.jsx(Qe,{open:e,onOpenChange:t,children:s.jsxs(Ye,{className:"sm:max-w-[600px]",children:[s.jsx(Xe,{children:s.jsx(Je,{children:"Profil Client"})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(Jn,{className:"h-20 w-20",children:s.jsx(Zn,{className:"bg-primary text-primary-foreground text-xl",children:n.name.split(" ").map(a=>a[0]).join("")})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h2",{className:"text-2xl font-semibold",children:n.name}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(wd,{className:"h-3 w-3"}),n.email]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Iu,{className:"h-3 w-3"}),n.phone]})]})]})]}),n.address&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"font-semibold",children:"Adresse"}),s.jsxs("div",{className:"flex items-start gap-2 text-muted-foreground",children:[s.jsx(ic,{className:"h-4 w-4 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{children:n.address}),s.jsxs("p",{children:[n.postalCode," ",n.city]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[s.jsx(ft,{className:"h-4 w-4 text-primary"}),"Animaux (",n.pets.length,")"]}),n.pets.length>0?s.jsx("div",{className:"space-y-2",children:n.pets.map((a,i)=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:a.name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.type," • ",a.breed]})]}),s.jsx(Pe,{variant:"outline",children:a.status==="healthy"?"En bonne santé":a.status==="treatment"?"En traitement":"Urgent"})]},i))}):s.jsx("p",{className:"text-muted-foreground",children:"Aucun animal enregistré"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-muted/30 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Dernière visite:"}),s.jsx("p",{children:new Date(n.lastVisit).toLocaleDateString("fr-FR")})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Total visites:"}),s.jsx("p",{children:n.totalVisits})]})]}),n.notes&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"font-semibold",children:"Notes"}),s.jsx("p",{className:"text-muted-foreground",children:n.notes})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(R,{variant:"outline",onClick:()=>t(!1),children:"Fermer"}),s.jsxs(R,{onClick:r,className:"gap-2",children:[s.jsx($t,{className:"h-4 w-4"}),"Modifier"]})]})]})]})}):null}function Lee({open:e,onOpenChange:t,client:n}){const{updateClient:r}=bt(),{toast:a}=it(),[i,o]=j.useState({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",postalCode:"",idNumber:"",notes:""});j.useEffect(()=>{n&&o({firstName:n.firstName,lastName:n.lastName,email:n.email,phone:n.phone,address:n.address||"",city:n.city||"",postalCode:n.postalCode||"",idNumber:n.idNumber||"",notes:n.notes||""})},[n]);const l=u=>{o(d=>({...d,[u.target.id]:u.target.value}))},c=u=>{u.preventDefault(),n&&(r(n.id,i),a({title:"Client modifié",description:`Les informations de ${i.firstName} ${i.lastName} ont été mises à jour.`}),t(!1))};return n?s.jsx(Qe,{open:e,onOpenChange:t,children:s.jsxs(Ye,{className:"sm:max-w-[500px]",children:[s.jsx(Xe,{children:s.jsx(Je,{children:"Modifier Client"})}),s.jsxs("form",{onSubmit:c,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"firstName",children:"Prénom *"}),s.jsx(Y,{id:"firstName",value:i.firstName,onChange:l,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"lastName",children:"Nom *"}),s.jsx(Y,{id:"lastName",value:i.lastName,onChange:l,required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"email",children:"Email"}),s.jsx(Y,{id:"email",type:"email",value:i.email,onChange:l})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"phone",children:"Téléphone *"}),s.jsx(Y,{id:"phone",value:i.phone,onChange:l,required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"address",children:"Adresse"}),s.jsx(Y,{id:"address",value:i.address,onChange:l})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"city",children:"Ville"}),s.jsx(Y,{id:"city",value:i.city,onChange:l})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"postalCode",children:"Code postal"}),s.jsx(Y,{id:"postalCode",value:i.postalCode,onChange:l})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"idNumber",children:"N° pièce d'identité"}),s.jsx(Y,{id:"idNumber",value:i.idNumber,onChange:l,placeholder:"Numéro de carte d'identité, passeport, etc."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"notes",children:"Notes"}),s.jsx(Ue,{id:"notes",value:i.notes,onChange:l,placeholder:"Notes additionnelles..."})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(R,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsx(R,{type:"submit",children:"Sauvegarder"})]})]})]})}):null}function Fee(){const{clients:e,pets:t,consultations:n,appointments:r}=bt();At();const[a,i]=j.useState(!1),[o,l]=j.useState(!1),[c,u]=j.useState(!1),[d,h]=j.useState(null),f=[...e].sort((S,_)=>new Date(_.lastVisit).getTime()-new Date(S.lastVisit).getTime()).slice(0,5),v=e.length,p=e.filter(S=>{const _=new Date(S.lastVisit),P=new Date;return P.setDate(P.getDate()-30),_>=P}).length,g=e.filter(S=>{const _=new Date(S.lastVisit),P=new Date().getMonth(),A=new Date().getFullYear();return _.getMonth()===P&&_.getFullYear()===A}).length,x=v>0?(t.length/v).toFixed(1):"0",y=S=>{h(S),l(!0)},b=S=>{h(S),u(!0)},C=()=>{l(!1),u(!0)},w=S=>{const _=new Date(S),A=Math.abs(new Date().getTime()-_.getTime()),E=Math.ceil(A/(1e3*60*60*24));return E===0?"Aujourd'hui":E===1?"Hier":E<7?`Il y a ${E} jours`:E<30?`Il y a ${Math.floor(E/7)} semaine${Math.floor(E/7)>1?"s":""}`:`Il y a ${Math.floor(E/30)} mois`},N=S=>{const _=t.filter(E=>E.ownerId===S.id),P=n.filter(E=>E.clientId===S.id),A=r.filter(E=>E.clientId===S.id);return{pets:_.length,consultations:P.length,appointments:A.length,lastActivity:P.length>0?Math.max(...P.map(E=>new Date(E.date).getTime())):new Date(S.lastVisit).getTime()}};return s.jsxs(s.Fragment,{children:[s.jsxs(ee,{className:"card-hover",children:[s.jsxs(he,{className:"flex flex-row items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(me,{className:"text-lg font-semibold",children:"Clients Récents"}),s.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Va,{className:"h-3 w-3"}),s.jsxs("span",{children:[v," total"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(oa,{className:"h-3 w-3"}),s.jsxs("span",{children:[p," actifs"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(cn,{className:"h-3 w-3"}),s.jsxs("span",{children:["+",g," ce mois"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Qt,{className:"h-3 w-3"}),s.jsxs("span",{children:["Ø ",x," animaux"]})]})]})]}),s.jsxs(R,{size:"sm",className:"gap-2",onClick:()=>i(!0),children:[s.jsx(Ze,{className:"h-4 w-4"}),"Nouveau Client"]})]}),s.jsx(te,{className:"space-y-4",children:f.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Va,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"Aucun client enregistré"}),s.jsx("p",{className:"text-sm",children:"Commencez par créer votre premier client"})]}):f.map(S=>{const _=N(S);return s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(Jn,{children:s.jsx(Zn,{className:"bg-primary text-primary-foreground",children:S.name.split(" ").map(P=>P[0]).join("")})}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h4",{className:"font-medium",children:S.name}),s.jsxs(Pe,{variant:"outline",className:"text-xs",children:[_.pets," animal",_.pets>1?"s":""]})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(wd,{className:"h-3 w-3"}),S.email]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Iu,{className:"h-3 w-3"}),S.phone]}),S.city&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ic,{className:"h-3 w-3"}),S.city]})]}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[s.jsxs("span",{children:["Dernière visite: ",w(S.lastVisit)]}),s.jsxs("span",{children:["Total visites: ",S.totalVisits]}),s.jsxs("span",{children:["Consultations: ",_.consultations]}),s.jsxs("span",{children:["RDV: ",_.appointments]})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(R,{size:"sm",variant:"outline",className:"gap-2",onClick:()=>y(S),children:[s.jsx(An,{className:"h-4 w-4"}),"Voir"]}),s.jsxs(R,{size:"sm",variant:"outline",className:"gap-2",onClick:()=>b(S),children:[s.jsx($t,{className:"h-4 w-4"}),"Modifier"]})]})]},S.id)})})]}),s.jsx(Qx,{open:a,onOpenChange:i}),s.jsx(Ree,{open:o,onOpenChange:l,client:d,onEdit:C}),s.jsx(Lee,{open:c,onOpenChange:u,client:d})]})}function iL({open:e,onOpenChange:t,pet:n,onEdit:r,onShowDossier:a,onDelete:i}){const{updatePet:o}=bt(),[l,c]=j.useState(null);j.useEffect(()=>{e&&c((n==null?void 0:n.photo)||null)},[e,n]);const u=j.useRef(null),d=h=>{var f;const m=(f=h.target.files)==null?void 0:f[0];if(m){const v=new FileReader;v.onload=p=>{var x;const g=(x=p.target)==null?void 0:x.result;c(g),o(n.id,{photo:g})},v.readAsDataURL(m)}};return n?s.jsx(Qe,{open:e,onOpenChange:t,children:s.jsxs(Ye,{className:"sm:max-w-[700px] max-h-[80vh] overflow-y-auto",children:[s.jsx(Xe,{children:s.jsx(Je,{children:"Profil Animal"})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-start gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx(Jn,{className:"h-24 w-24",children:l?s.jsx(zu,{src:l,alt:n.name,className:"h-full w-full object-cover rounded-full"}):s.jsx(Zn,{className:"bg-primary-glow text-primary-foreground",children:s.jsx(ft,{className:"h-12 w-12"})})}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(R,{size:"sm",variant:"outline",className:"gap-2 w-full flex items-center justify-center",onClick:()=>{var h;return(h=u.current)==null?void 0:h.click()},children:[s.jsx(Mu,{className:"h-4 w-4"}),l?"Changer photo":"Ajouter photo"]}),l&&s.jsx(R,{size:"sm",variant:"destructive",className:"gap-2 w-full",onClick:()=>{c(null),o(n.id,{photo:void 0})},children:"Supprimer photo"}),s.jsx("input",{ref:u,type:"file",accept:"image/*",onChange:d,className:"hidden"})]})]}),s.jsxs("div",{className:"flex-1 space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("h2",{className:"text-2xl font-semibold",children:n.name}),s.jsx(Pe,{variant:"outline",className:n.status==="healthy"?"bg-secondary text-secondary-foreground":n.status==="treatment"?"bg-accent text-accent-foreground":"bg-destructive text-destructive-foreground",children:n.status==="healthy"?"En bonne santé":n.status==="treatment"?"En traitement":"Urgent"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Type:"}),s.jsx("p",{className:"text-muted-foreground",children:n.type})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Race:"}),s.jsx("p",{className:"text-muted-foreground",children:n.breed||"Non spécifiée"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Âge:"}),s.jsx("p",{className:"text-muted-foreground",children:n.birthDate?s.jsxs(s.Fragment,{children:[Ru(n.birthDate),s.jsx("br",{}),s.jsxs("span",{className:"text-xs",children:["Né(e) le ",$a(n.birthDate)]})]}):"Non spécifié"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Poids:"}),s.jsx("p",{className:"text-muted-foreground",children:n.weight||"Non spécifié"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Couleur:"}),s.jsx("p",{className:"text-muted-foreground",children:n.color||"Non spécifiée"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Xn,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Propriétaire:"}),s.jsx("p",{className:"text-muted-foreground",children:n.owner})]})]}),n.microchip&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Puce électronique:"}),s.jsx("p",{className:"text-muted-foreground font-mono",children:n.microchip})]})]}),s.jsxs("div",{className:"space-y-4",children:[n.lastVisit&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ge,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Dernière visite:"}),s.jsx("p",{className:"text-muted-foreground",children:new Date(n.lastVisit).toLocaleDateString("fr-FR")})]})]}),n.nextAppointment&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ge,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Prochain RDV:"}),s.jsx("p",{className:"text-muted-foreground",children:new Date(n.nextAppointment).toLocaleDateString("fr-FR")})]})]})]})]}),n.vaccinations&&n.vaccinations.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"font-semibold",children:"Vaccinations"}),s.jsx("div",{className:"flex gap-2 flex-wrap",children:n.vaccinations.map((h,m)=>s.jsx(Pe,{variant:"outline",children:h},m))})]}),n.medicalNotes&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"font-semibold",children:"Notes médicales"}),s.jsx("p",{className:"text-muted-foreground p-3 bg-muted/30 rounded-lg",children:n.medicalNotes})]}),s.jsxs("div",{className:"flex justify-between gap-2 pt-4 border-t",children:[s.jsxs(R,{variant:"outline",onClick:a,className:"gap-2",children:[s.jsx(_r,{className:"h-4 w-4"}),"Voir Dossier Médical"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(R,{variant:"outline",onClick:()=>t(!1),children:"Fermer"}),i&&s.jsxs(R,{variant:"outline",onClick:()=>{t(!1),i()},className:"text-destructive hover:text-destructive-foreground hover:bg-destructive",children:[s.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Supprimer"]}),s.jsxs(R,{onClick:r,className:"gap-2",children:[s.jsx($t,{className:"h-4 w-4"}),"Modifier"]})]})]})]})]})}):null}var Jx="Checkbox",[Bee,ETe]=Yr(Jx),[zee,i2]=Bee(Jx);function Vee(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:a,disabled:i,form:o,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:h}=e,[m,f]=wi({prop:n,defaultProp:a??!1,onChange:c,caller:Jx}),[v,p]=j.useState(null),[g,x]=j.useState(null),y=j.useRef(!1),b=v?!!o||!!v.closest("form"):!0,C={checked:m,disabled:i,setChecked:f,control:v,setControl:p,name:l,form:o,value:d,hasConsumerStoppedPropagationRef:y,required:u,defaultChecked:Po(a)?!1:a,isFormControl:b,bubbleInput:g,setBubbleInput:x};return s.jsx(zee,{scope:t,...C,children:qee(h)?h(C):r})}var oL="CheckboxTrigger",lL=j.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},a)=>{const{control:i,value:o,disabled:l,checked:c,required:u,setControl:d,setChecked:h,hasConsumerStoppedPropagationRef:m,isFormControl:f,bubbleInput:v}=i2(oL,e),p=xt(a,d),g=j.useRef(c);return j.useEffect(()=>{const x=i==null?void 0:i.form;if(x){const y=()=>h(g.current);return x.addEventListener("reset",y),()=>x.removeEventListener("reset",y)}},[i,h]),s.jsx(Ve.button,{type:"button",role:"checkbox","aria-checked":Po(c)?"mixed":c,"aria-required":u,"data-state":mL(c),"data-disabled":l?"":void 0,disabled:l,value:o,...r,ref:p,onKeyDown:ke(t,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:ke(n,x=>{h(y=>Po(y)?!0:!y),v&&f&&(m.current=x.isPropagationStopped(),m.current||x.stopPropagation())})})});lL.displayName=oL;var o2=j.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:u,form:d,...h}=e;return s.jsx(Vee,{__scopeCheckbox:n,checked:a,defaultChecked:i,disabled:l,required:o,onCheckedChange:u,name:r,form:d,value:c,internal_do_not_use_render:({isFormControl:m})=>s.jsxs(s.Fragment,{children:[s.jsx(lL,{...h,ref:t,__scopeCheckbox:n}),m&&s.jsx(hL,{__scopeCheckbox:n})]})})});o2.displayName=Jx;var cL="CheckboxIndicator",uL=j.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...a}=e,i=i2(cL,n);return s.jsx(Is,{present:r||Po(i.checked)||i.checked===!0,children:s.jsx(Ve.span,{"data-state":mL(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});uL.displayName=cL;var dL="CheckboxBubbleInput",hL=j.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:o,required:l,disabled:c,name:u,value:d,form:h,bubbleInput:m,setBubbleInput:f}=i2(dL,e),v=xt(n,f),p=e2(i),g=fS(r);j.useEffect(()=>{const y=m;if(!y)return;const b=window.HTMLInputElement.prototype,w=Object.getOwnPropertyDescriptor(b,"checked").set,N=!a.current;if(p!==i&&w){const S=new Event("click",{bubbles:N});y.indeterminate=Po(i),w.call(y,Po(i)?!1:i),y.dispatchEvent(S)}},[m,p,i,a]);const x=j.useRef(Po(i)?!1:i);return s.jsx(Ve.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??x.current,required:l,disabled:c,name:u,value:d,form:h,...t,tabIndex:-1,ref:v,style:{...t.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});hL.displayName=dL;function qee(e){return typeof e=="function"}function Po(e){return e==="indeterminate"}function mL(e){return Po(e)?"indeterminate":e?"checked":"unchecked"}const fi=j.forwardRef(({className:e,...t},n)=>s.jsx(o2,{ref:n,className:De("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(uL,{className:De("flex items-center justify-center text-current"),children:s.jsx(aS,{className:"h-4 w-4"})})}));fi.displayName=o2.displayName;function Uee({open:e,onOpenChange:t,pet:n}){const{updatePet:r,clients:a}=bt();At();const{toast:i}=it(),[o,l]=j.useState({name:"",type:"",breed:"",gender:"",birthDate:"",weight:"",color:"",ownerId:0,microchip:"",medicalNotes:"",status:"vivant",hasPedigree:!1,officialName:"",pedigreeNumber:"",breeder:"",fatherName:"",fatherPedigree:"",fatherBreed:"",fatherTitles:"",motherName:"",motherPedigree:"",motherBreed:"",motherTitles:"",pedigreePhoto:""});j.useEffect(()=>{n&&l({name:n.name,type:n.type,breed:n.breed||"",gender:n.gender||"",birthDate:n.birthDate||"",weight:n.weight||"",color:n.color||"",ownerId:n.ownerId,microchip:n.microchip||"",medicalNotes:n.medicalNotes||"",status:n.status,hasPedigree:n.hasPedigree||!1,officialName:n.officialName||"",pedigreeNumber:n.pedigreeNumber||"",breeder:n.breeder||"",fatherName:n.fatherName||"",fatherPedigree:n.fatherPedigree||"",fatherBreed:n.fatherBreed||"",fatherTitles:n.fatherTitles||"",motherName:n.motherName||"",motherPedigree:n.motherPedigree||"",motherBreed:n.motherBreed||"",motherTitles:n.motherTitles||"",pedigreePhoto:n.pedigreePhoto||""})},[n]);const c=h=>{l(m=>({...m,[h.target.id]:h.target.value}))},u=(h,m)=>{l(f=>({...f,[h]:h==="ownerId"?parseInt(m):m}))},d=h=>{if(h.preventDefault(),!n)return;const m=a.find(f=>f.id===o.ownerId);r(n.id,{...o,owner:(m==null?void 0:m.name)||n.owner}),i({title:"Animal modifié",description:`Les informations de ${o.name} ont été mises à jour.`}),t(!1)};return n?s.jsx(Qe,{open:e,onOpenChange:t,children:s.jsxs(Ye,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto",children:[s.jsx(Xe,{children:s.jsx(Je,{children:"Modifier Animal"})}),s.jsxs("form",{onSubmit:d,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"name",children:"Nom de l'animal *"}),s.jsx(Y,{id:"name",value:o.name,onChange:c,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{children:"Type d'animal *"}),s.jsxs(je,{value:o.type,onValueChange:h=>u("type",h),children:[s.jsx(xe,{children:s.jsx(be,{})}),s.jsx(ye,{children:s.jsxs(s.Fragment,{children:[s.jsx(z,{value:"Chien",children:"Chien"}),s.jsx(z,{value:"Chat",children:"Chat"}),s.jsx(z,{value:"Oiseau",children:"Oiseau"}),s.jsx(z,{value:"Lapin",children:"Lapin"}),s.jsx(z,{value:"Furet",children:"Furet"}),s.jsx(z,{value:"Souris",children:"Souris"}),s.jsx(z,{value:"Hamster",children:"Hamster"}),s.jsx(z,{value:"Reptile",children:"Reptile"}),s.jsx(z,{value:"Autre",children:"Autre"})]})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"breed",children:"Race"}),s.jsx(Y,{id:"breed",value:o.breed,onChange:c})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{children:"Sexe"}),s.jsxs(je,{value:o.gender,onValueChange:h=>u("gender",h),children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Sélectionner le sexe"})}),s.jsxs(ye,{children:[s.jsx(z,{value:"male",children:"Mâle"}),s.jsx(z,{value:"female",children:"Femelle"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"birthDate",children:"Date de naissance"}),s.jsx(Y,{id:"birthDate",type:"date",value:o.birthDate,onChange:c,max:new Date().toISOString().split("T")[0]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"weight",children:"Poids (kg)"}),s.jsx(Y,{id:"weight",value:o.weight,onChange:c})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"color",children:"Couleur"}),s.jsx(Y,{id:"color",value:o.color,onChange:c})]}),s.jsx("div",{className:"space-y-2"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{children:"Propriétaire *"}),s.jsxs(je,{value:o.ownerId.toString(),onValueChange:h=>u("ownerId",h),children:[s.jsx(xe,{children:s.jsx(be,{})}),s.jsx(ye,{children:a.map(h=>s.jsx(z,{value:h.id.toString(),children:h.name},h.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{children:"Statut de santé"}),s.jsxs(je,{value:o.status,onValueChange:h=>u("status",h),children:[s.jsx(xe,{children:s.jsx(be,{})}),s.jsxs(ye,{children:[s.jsx(z,{value:"healthy",children:"En bonne santé"}),s.jsx(z,{value:"treatment",children:"En traitement"}),s.jsx(z,{value:"urgent",children:"Urgent"})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"microchip",children:"Numéro de puce électronique"}),s.jsx(Y,{id:"microchip",value:o.microchip,onChange:c})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"medicalNotes",children:"Notes médicales"}),s.jsx(Ue,{id:"medicalNotes",value:o.medicalNotes,onChange:c,placeholder:"Allergies, conditions médicales, notes importantes..."})]}),s.jsxs("div",{className:"space-y-4 border-t pt-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(fi,{id:"hasPedigree",checked:o.hasPedigree,onCheckedChange:h=>l(m=>({...m,hasPedigree:h}))}),s.jsx(O,{htmlFor:"hasPedigree",className:"text-lg font-medium",children:"Cet animal a un pedigree officiel"})]}),o.hasPedigree&&s.jsxs("div",{className:"space-y-4 pl-6 border-l-2 border-primary/20",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"officialName",children:"Nom officiel"}),s.jsx(Y,{id:"officialName",value:o.officialName,onChange:c,placeholder:"Nom officiel du pedigree"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"pedigreeNumber",children:"N° pedigree/LOF"}),s.jsx(Y,{id:"pedigreeNumber",value:o.pedigreeNumber,onChange:c,placeholder:"Numéro de pedigree"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"breeder",children:"Éleveur"}),s.jsx(Y,{id:"breeder",value:o.breeder,onChange:c,placeholder:"Nom de l'éleveur"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-medium text-sm",children:"Père"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Y,{placeholder:"Nom du père",value:o.fatherName,onChange:c}),s.jsx(Y,{placeholder:"N° pedigree du père",value:o.fatherPedigree,onChange:c}),s.jsx(Y,{placeholder:"Race du père",value:o.fatherBreed,onChange:c}),s.jsx(Ue,{placeholder:"Titres du père",value:o.fatherTitles,onChange:c,rows:2})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-medium text-sm",children:"Mère"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Y,{placeholder:"Nom de la mère",value:o.motherName,onChange:c}),s.jsx(Y,{placeholder:"N° pedigree de la mère",value:o.motherPedigree,onChange:c}),s.jsx(Y,{placeholder:"Race de la mère",value:o.motherBreed,onChange:c}),s.jsx(Ue,{placeholder:"Titres de la mère",value:o.motherTitles,onChange:c,rows:2})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{children:"Document pedigree"}),s.jsx("input",{type:"file",accept:"image/*",onChange:async h=>{var v;const m=(v=h.target.files)==null?void 0:v[0];if(!m)return;const f=new FileReader;f.onload=()=>l(p=>({...p,pedigreePhoto:f.result})),f.readAsDataURL(m)}}),o.pedigreePhoto&&s.jsx("img",{src:o.pedigreePhoto,alt:"Document pedigree",className:"h-32 w-auto object-contain rounded border"})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(R,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsx(R,{type:"submit",children:"Sauvegarder"})]})]})]})}):null}var Zx="Tabs",[Wee,OTe]=Yr(Zx,[Ox]),fL=Ox(),[Hee,l2]=Wee(Zx),pL=j.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=Tx(l),[h,m]=wi({prop:r,onChange:a,defaultProp:i??"",caller:Zx});return s.jsx(Hee,{scope:n,baseId:Ra(),value:h,onValueChange:m,orientation:o,dir:d,activationMode:c,children:s.jsx(Ve.div,{dir:d,"data-orientation":o,...u,ref:t})})});pL.displayName=Zx;var gL="TabsList",vL=j.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...a}=e,i=l2(gL,n),o=fL(n);return s.jsx(W$,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:s.jsx(Ve.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});vL.displayName=gL;var xL="TabsTrigger",yL=j.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...i}=e,o=l2(xL,n),l=fL(n),c=wL(o.baseId,r),u=NL(o.baseId,r),d=r===o.value;return s.jsx(H$,{asChild:!0,...l,focusable:!a,active:d,children:s.jsx(Ve.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:ke(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:ke(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:ke(e.onFocus,()=>{const h=o.activationMode!=="manual";!d&&!a&&h&&o.onValueChange(r)})})})});yL.displayName=xL;var jL="TabsContent",bL=j.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:a,children:i,...o}=e,l=l2(jL,n),c=wL(l.baseId,r),u=NL(l.baseId,r),d=r===l.value,h=j.useRef(d);return j.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),s.jsx(Is,{present:a||d,children:({present:m})=>s.jsx(Ve.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:m&&i})})});bL.displayName=jL;function wL(e,t){return`${e}-trigger-${t}`}function NL(e,t){return`${e}-content-${t}`}var Kee=pL,SL=vL,CL=yL,_L=bL;const Ei=Kee,Ha=j.forwardRef(({className:e,...t},n)=>s.jsx(SL,{ref:n,className:De("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Ha.displayName=SL.displayName;const Mt=j.forwardRef(({className:e,...t},n)=>s.jsx(CL,{ref:n,className:De("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Mt.displayName=CL.displayName;const It=j.forwardRef(({className:e,...t},n)=>s.jsx(_L,{ref:n,className:De("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));It.displayName=_L.displayName;function jr(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Mo(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function c2(e,t){const n=jr(e);return isNaN(t)?Mo(e,NaN):(t&&n.setDate(n.getDate()+t),n)}const PL=6048e5,Gee=864e5;let Yee={};function ey(){return Yee}function _m(e,t){var l,c,u,d;const n=ey(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=jr(e),i=a.getDay(),o=(i<r?7:0)+i-r;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function Xg(e){return _m(e,{weekStartsOn:1})}function AL(e){const t=jr(e),n=t.getFullYear(),r=Mo(e,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const a=Xg(r),i=Mo(e,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const o=Xg(i);return t.getTime()>=a.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function Jg(e){const t=jr(e);return t.setHours(0,0,0,0),t}function sA(e){const t=jr(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Qee(e,t){const n=Jg(e),r=Jg(t),a=+n-sA(n),i=+r-sA(r);return Math.round((a-i)/Gee)}function Xee(e){const t=AL(e),n=Mo(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Xg(n)}function Jee(e,t){const n=Jg(e),r=Jg(t);return+n==+r}function Zee(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function ete(e){if(!Zee(e)&&typeof e!="number")return!1;const t=jr(e);return!isNaN(Number(t))}function tte(e){const t=jr(e),n=Mo(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}const nte={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},rte=(e,t,n)=>{let r;const a=nte[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function cu(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const ste={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ate={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ite={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ote={date:cu({formats:ste,defaultWidth:"full"}),time:cu({formats:ate,defaultWidth:"full"}),dateTime:cu({formats:ite,defaultWidth:"full"})},lte={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},cte=(e,t,n,r)=>lte[e];function Pa(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const ute={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},dte={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},hte={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},mte={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},fte={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},pte={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},gte=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},vte={ordinalNumber:gte,era:Pa({values:ute,defaultWidth:"wide"}),quarter:Pa({values:dte,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Pa({values:hte,defaultWidth:"wide"}),day:Pa({values:mte,defaultWidth:"wide"}),dayPeriod:Pa({values:fte,defaultWidth:"wide",formattingValues:pte,defaultFormattingWidth:"wide"})};function Aa(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?yte(l,h=>h.test(o)):xte(l,h=>h.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=t.slice(o.length);return{value:u,rest:d}}}function xte(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function yte(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function kL(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const a=r[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const jte=/^(\d+)(th|st|nd|rd)?/i,bte=/\d+/i,wte={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Nte={any:[/^b/i,/^(a|c)/i]},Ste={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Cte={any:[/1/i,/2/i,/3/i,/4/i]},_te={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Pte={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Ate={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},kte={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Tte={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ete={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Ote={ordinalNumber:kL({matchPattern:jte,parsePattern:bte,valueCallback:e=>parseInt(e,10)}),era:Aa({matchPatterns:wte,defaultMatchWidth:"wide",parsePatterns:Nte,defaultParseWidth:"any"}),quarter:Aa({matchPatterns:Ste,defaultMatchWidth:"wide",parsePatterns:Cte,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Aa({matchPatterns:_te,defaultMatchWidth:"wide",parsePatterns:Pte,defaultParseWidth:"any"}),day:Aa({matchPatterns:Ate,defaultMatchWidth:"wide",parsePatterns:kte,defaultParseWidth:"any"}),dayPeriod:Aa({matchPatterns:Tte,defaultMatchWidth:"any",parsePatterns:Ete,defaultParseWidth:"any"})},Dte={code:"en-US",formatDistance:rte,formatLong:ote,formatRelative:cte,localize:vte,match:Ote,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Mte(e){const t=jr(e);return Qee(t,tte(t))+1}function Ite(e){const t=jr(e),n=+Xg(t)-+Xee(t);return Math.round(n/PL)+1}function TL(e,t){var d,h,m,f;const n=jr(e),r=n.getFullYear(),a=ey(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??a.firstWeekContainsDate??((f=(m=a.locale)==null?void 0:m.options)==null?void 0:f.firstWeekContainsDate)??1,o=Mo(e,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const l=_m(o,t),c=Mo(e,0);c.setFullYear(r,0,i),c.setHours(0,0,0,0);const u=_m(c,t);return n.getTime()>=l.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function $te(e,t){var l,c,u,d;const n=ey(),r=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=TL(e,t),i=Mo(e,0);return i.setFullYear(a,0,r),i.setHours(0,0,0,0),_m(i,t)}function Rte(e,t){const n=jr(e),r=+_m(n,t)-+$te(n,t);return Math.round(r/PL)+1}function Dt(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const qi={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return Dt(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):Dt(n+1,2)},d(e,t){return Dt(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return Dt(e.getHours()%12||12,t.length)},H(e,t){return Dt(e.getHours(),t.length)},m(e,t){return Dt(e.getMinutes(),t.length)},s(e,t){return Dt(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return Dt(a,t.length)}},Ac={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},aA={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return qi.y(e,t)},Y:function(e,t,n,r){const a=TL(e,r),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return Dt(o,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):Dt(i,t.length)},R:function(e,t){const n=AL(e);return Dt(n,t.length)},u:function(e,t){const n=e.getFullYear();return Dt(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Dt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Dt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return qi.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return Dt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=Rte(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):Dt(a,t.length)},I:function(e,t,n){const r=Ite(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):Dt(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):qi.d(e,t)},D:function(e,t,n){const r=Mte(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Dt(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Dt(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Dt(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return Dt(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(r===12?a=Ac.noon:r===0?a=Ac.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(r>=17?a=Ac.evening:r>=12?a=Ac.afternoon:r>=4?a=Ac.morning:a=Ac.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return qi.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):qi.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Dt(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):Dt(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):qi.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):qi.s(e,t)},S:function(e,t){return qi.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return oA(r);case"XXXX":case"XX":return il(r);case"XXXXX":case"XXX":default:return il(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return oA(r);case"xxxx":case"xx":return il(r);case"xxxxx":case"xxx":default:return il(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+iA(r,":");case"OOOO":default:return"GMT"+il(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+iA(r,":");case"zzzz":default:return"GMT"+il(r,":")}},t:function(e,t,n){const r=Math.trunc(e.getTime()/1e3);return Dt(r,t.length)},T:function(e,t,n){const r=e.getTime();return Dt(r,t.length)}};function iA(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),i=r%60;return i===0?n+String(a):n+String(a)+t+Dt(i,2)}function oA(e,t){return e%60===0?(e>0?"-":"+")+Dt(Math.abs(e)/60,2):il(e,t)}function il(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Dt(Math.trunc(r/60),2),i=Dt(r%60,2);return n+a+t+i}const lA=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},EL=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Lte=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return lA(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",lA(r,t)).replace("{{time}}",EL(a,t))},Fte={p:EL,P:Lte},Bte=/^D+$/,zte=/^Y+$/,Vte=["D","DD","YY","YYYY"];function qte(e){return Bte.test(e)}function Ute(e){return zte.test(e)}function Wte(e,t,n){const r=Hte(e,t,n);if(console.warn(r),Vte.includes(e))throw new RangeError(r)}function Hte(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Kte=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Gte=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Yte=/^'([^]*?)'?$/,Qte=/''/g,Xte=/[a-zA-Z]/;function st(e,t,n){var d,h,m,f,v,p,g,x;const r=ey(),a=(n==null?void 0:n.locale)??r.locale??Dte,i=(n==null?void 0:n.firstWeekContainsDate)??((h=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??r.firstWeekContainsDate??((f=(m=r.locale)==null?void 0:m.options)==null?void 0:f.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((p=(v=n==null?void 0:n.locale)==null?void 0:v.options)==null?void 0:p.weekStartsOn)??r.weekStartsOn??((x=(g=r.locale)==null?void 0:g.options)==null?void 0:x.weekStartsOn)??0,l=jr(e);if(!ete(l))throw new RangeError("Invalid time value");let c=t.match(Gte).map(y=>{const b=y[0];if(b==="p"||b==="P"){const C=Fte[b];return C(y,a.formatLong)}return y}).join("").match(Kte).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const b=y[0];if(b==="'")return{isToken:!1,value:Jte(y)};if(aA[b])return{isToken:!0,value:y};if(b.match(Xte))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:y}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return c.map(y=>{if(!y.isToken)return y.value;const b=y.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&Ute(b)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&qte(b))&&Wte(b,t,String(e));const C=aA[b[0]];return C(l,b,a.localize,u)}).join("")}function Jte(e){const t=e.match(Yte);return t?t[1].replace(Qte,"'"):e}function Zte(e,t){const n=jr(e),r=jr(t);return n.getTime()>r.getTime()}function Zg(e,t){const n=jr(e),r=jr(t);return+n<+r}function ene({open:e,onOpenChange:t,vaccination:n}){const{confirmVaccinationReminder:r,calculateDueDateFromProtocol:a}=bt(),{toast:i}=it(),[o,l]=j.useState({datePerformed:st(new Date,"yyyy-MM-dd"),veterinarian:"",batchNumber:"",notes:"",newNextDueDate:""}),c=d=>{if(d.preventDefault(),!o.veterinarian){i({title:"Erreur",description:"Le nom du vétérinaire est requis",variant:"destructive"});return}let h=o.newNextDueDate;!h&&n&&(h=a(n.vaccineName,"chien",o.datePerformed)||""),r(n.id,{datePerformed:o.datePerformed,veterinarian:o.veterinarian,batchNumber:o.batchNumber,notes:o.notes,newNextDueDate:h})&&(i({title:"Rappel confirmé",description:`Le rappel de ${n.vaccineName} a été confirmé et enregistré`}),l({datePerformed:st(new Date,"yyyy-MM-dd"),veterinarian:"",batchNumber:"",notes:"",newNextDueDate:""}),t(!1))},u=d=>{l(h=>({...h,[d.target.name]:d.target.value}))};return n?s.jsx(Qe,{open:e,onOpenChange:t,children:s.jsxs(Ye,{className:"sm:max-w-[500px]",children:[s.jsx(Xe,{children:s.jsx(Je,{children:"Confirmer le rappel de vaccination"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-sm mb-2",children:"Vaccination à confirmer :"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.jsx("strong",{children:n.vaccineName})," pour ",n.petName]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Rappel prévu le : ",new Date(n.nextDueDate).toLocaleDateString("fr-FR")]})]}),s.jsxs("form",{onSubmit:c,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(O,{htmlFor:"datePerformed",children:"Date d'administration *"}),s.jsx(Y,{id:"datePerformed",name:"datePerformed",type:"date",value:o.datePerformed,onChange:u,required:!0})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"veterinarian",children:"Vétérinaire *"}),s.jsx(Y,{id:"veterinarian",name:"veterinarian",value:o.veterinarian,onChange:u,placeholder:"Nom du vétérinaire",required:!0})]})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"batchNumber",children:"Numéro de lot"}),s.jsx(Y,{id:"batchNumber",name:"batchNumber",value:o.batchNumber,onChange:u,placeholder:"Numéro de lot du vaccin"})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"newNextDueDate",children:"Nouvelle date de rappel"}),s.jsx(Y,{id:"newNextDueDate",name:"newNextDueDate",type:"date",value:o.newNextDueDate,onChange:u,placeholder:"Date du prochain rappel"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Laissez vide pour utiliser la date calculée selon le protocole"})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"notes",children:"Notes"}),s.jsx(Ue,{id:"notes",name:"notes",value:o.notes,onChange:u,placeholder:"Notes sur l'administration du vaccin",rows:3})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(R,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsx(R,{type:"submit",children:"Confirmer le rappel"})]})]})]})]})}):null}var tne=Array.isArray,Qr=tne,nne=typeof vr=="object"&&vr&&vr.Object===Object&&vr,OL=nne,rne=OL,sne=typeof self=="object"&&self&&self.Object===Object&&self,ane=rne||sne||Function("return this")(),Ka=ane,ine=Ka,one=ine.Symbol,Ef=one,cA=Ef,DL=Object.prototype,lne=DL.hasOwnProperty,cne=DL.toString,mh=cA?cA.toStringTag:void 0;function une(e){var t=lne.call(e,mh),n=e[mh];try{e[mh]=void 0;var r=!0}catch{}var a=cne.call(e);return r&&(t?e[mh]=n:delete e[mh]),a}var dne=une,hne=Object.prototype,mne=hne.toString;function fne(e){return mne.call(e)}var pne=fne,uA=Ef,gne=dne,vne=pne,xne="[object Null]",yne="[object Undefined]",dA=uA?uA.toStringTag:void 0;function jne(e){return e==null?e===void 0?yne:xne:dA&&dA in Object(e)?gne(e):vne(e)}var Oi=jne;function bne(e){return e!=null&&typeof e=="object"}var Di=bne,wne=Oi,Nne=Di,Sne="[object Symbol]";function Cne(e){return typeof e=="symbol"||Nne(e)&&wne(e)==Sne}var Rd=Cne,_ne=Qr,Pne=Rd,Ane=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kne=/^\w*$/;function Tne(e,t){if(_ne(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||Pne(e)?!0:kne.test(e)||!Ane.test(e)||t!=null&&e in Object(t)}var u2=Tne;function Ene(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Go=Ene;const Ld=Ot(Go);var One=Oi,Dne=Go,Mne="[object AsyncFunction]",Ine="[object Function]",$ne="[object GeneratorFunction]",Rne="[object Proxy]";function Lne(e){if(!Dne(e))return!1;var t=One(e);return t==Ine||t==$ne||t==Mne||t==Rne}var d2=Lne;const Ke=Ot(d2);var Fne=Ka,Bne=Fne["__core-js_shared__"],zne=Bne,nj=zne,hA=function(){var e=/[^.]+$/.exec(nj&&nj.keys&&nj.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Vne(e){return!!hA&&hA in e}var qne=Vne,Une=Function.prototype,Wne=Une.toString;function Hne(e){if(e!=null){try{return Wne.call(e)}catch{}try{return e+""}catch{}}return""}var ML=Hne,Kne=d2,Gne=qne,Yne=Go,Qne=ML,Xne=/[\\^$.*+?()[\]{}|]/g,Jne=/^\[object .+?Constructor\]$/,Zne=Function.prototype,ere=Object.prototype,tre=Zne.toString,nre=ere.hasOwnProperty,rre=RegExp("^"+tre.call(nre).replace(Xne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function sre(e){if(!Yne(e)||Gne(e))return!1;var t=Kne(e)?rre:Jne;return t.test(Qne(e))}var are=sre;function ire(e,t){return e==null?void 0:e[t]}var ore=ire,lre=are,cre=ore;function ure(e,t){var n=cre(e,t);return lre(n)?n:void 0}var dc=ure,dre=dc,hre=dre(Object,"create"),ty=hre,mA=ty;function mre(){this.__data__=mA?mA(null):{},this.size=0}var fre=mre;function pre(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var gre=pre,vre=ty,xre="__lodash_hash_undefined__",yre=Object.prototype,jre=yre.hasOwnProperty;function bre(e){var t=this.__data__;if(vre){var n=t[e];return n===xre?void 0:n}return jre.call(t,e)?t[e]:void 0}var wre=bre,Nre=ty,Sre=Object.prototype,Cre=Sre.hasOwnProperty;function _re(e){var t=this.__data__;return Nre?t[e]!==void 0:Cre.call(t,e)}var Pre=_re,Are=ty,kre="__lodash_hash_undefined__";function Tre(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Are&&t===void 0?kre:t,this}var Ere=Tre,Ore=fre,Dre=gre,Mre=wre,Ire=Pre,$re=Ere;function Fd(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Fd.prototype.clear=Ore;Fd.prototype.delete=Dre;Fd.prototype.get=Mre;Fd.prototype.has=Ire;Fd.prototype.set=$re;var Rre=Fd;function Lre(){this.__data__=[],this.size=0}var Fre=Lre;function Bre(e,t){return e===t||e!==e&&t!==t}var h2=Bre,zre=h2;function Vre(e,t){for(var n=e.length;n--;)if(zre(e[n][0],t))return n;return-1}var ny=Vre,qre=ny,Ure=Array.prototype,Wre=Ure.splice;function Hre(e){var t=this.__data__,n=qre(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Wre.call(t,n,1),--this.size,!0}var Kre=Hre,Gre=ny;function Yre(e){var t=this.__data__,n=Gre(t,e);return n<0?void 0:t[n][1]}var Qre=Yre,Xre=ny;function Jre(e){return Xre(this.__data__,e)>-1}var Zre=Jre,ese=ny;function tse(e,t){var n=this.__data__,r=ese(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var nse=tse,rse=Fre,sse=Kre,ase=Qre,ise=Zre,ose=nse;function Bd(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Bd.prototype.clear=rse;Bd.prototype.delete=sse;Bd.prototype.get=ase;Bd.prototype.has=ise;Bd.prototype.set=ose;var ry=Bd,lse=dc,cse=Ka,use=lse(cse,"Map"),m2=use,fA=Rre,dse=ry,hse=m2;function mse(){this.size=0,this.__data__={hash:new fA,map:new(hse||dse),string:new fA}}var fse=mse;function pse(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var gse=pse,vse=gse;function xse(e,t){var n=e.__data__;return vse(t)?n[typeof t=="string"?"string":"hash"]:n.map}var sy=xse,yse=sy;function jse(e){var t=yse(this,e).delete(e);return this.size-=t?1:0,t}var bse=jse,wse=sy;function Nse(e){return wse(this,e).get(e)}var Sse=Nse,Cse=sy;function _se(e){return Cse(this,e).has(e)}var Pse=_se,Ase=sy;function kse(e,t){var n=Ase(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var Tse=kse,Ese=fse,Ose=bse,Dse=Sse,Mse=Pse,Ise=Tse;function zd(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}zd.prototype.clear=Ese;zd.prototype.delete=Ose;zd.prototype.get=Dse;zd.prototype.has=Mse;zd.prototype.set=Ise;var f2=zd,IL=f2,$se="Expected a function";function p2(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError($se);var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],i=n.cache;if(i.has(a))return i.get(a);var o=e.apply(this,r);return n.cache=i.set(a,o)||i,o};return n.cache=new(p2.Cache||IL),n}p2.Cache=IL;var $L=p2;const Rse=Ot($L);var Lse=$L,Fse=500;function Bse(e){var t=Lse(e,function(r){return n.size===Fse&&n.clear(),r}),n=t.cache;return t}var zse=Bse,Vse=zse,qse=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Use=/\\(\\)?/g,Wse=Vse(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(qse,function(n,r,a,i){t.push(a?i.replace(Use,"$1"):r||n)}),t}),Hse=Wse;function Kse(e,t){for(var n=-1,r=e==null?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}var g2=Kse,pA=Ef,Gse=g2,Yse=Qr,Qse=Rd,Xse=1/0,gA=pA?pA.prototype:void 0,vA=gA?gA.toString:void 0;function RL(e){if(typeof e=="string")return e;if(Yse(e))return Gse(e,RL)+"";if(Qse(e))return vA?vA.call(e):"";var t=e+"";return t=="0"&&1/e==-Xse?"-0":t}var Jse=RL,Zse=Jse;function eae(e){return e==null?"":Zse(e)}var LL=eae,tae=Qr,nae=u2,rae=Hse,sae=LL;function aae(e,t){return tae(e)?e:nae(e,t)?[e]:rae(sae(e))}var FL=aae,iae=Rd,oae=1/0;function lae(e){if(typeof e=="string"||iae(e))return e;var t=e+"";return t=="0"&&1/e==-oae?"-0":t}var ay=lae,cae=FL,uae=ay;function dae(e,t){t=cae(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[uae(t[n++])];return n&&n==r?e:void 0}var v2=dae,hae=v2;function mae(e,t,n){var r=e==null?void 0:hae(e,t);return r===void 0?n:r}var BL=mae;const ds=Ot(BL);function fae(e){return e==null}var pae=fae;const et=Ot(pae);var gae=Oi,vae=Qr,xae=Di,yae="[object String]";function jae(e){return typeof e=="string"||!vae(e)&&xae(e)&&gae(e)==yae}var bae=jae;const Yl=Ot(bae);var zL={exports:{}},Lt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x2=Symbol.for("react.element"),y2=Symbol.for("react.portal"),iy=Symbol.for("react.fragment"),oy=Symbol.for("react.strict_mode"),ly=Symbol.for("react.profiler"),cy=Symbol.for("react.provider"),uy=Symbol.for("react.context"),wae=Symbol.for("react.server_context"),dy=Symbol.for("react.forward_ref"),hy=Symbol.for("react.suspense"),my=Symbol.for("react.suspense_list"),fy=Symbol.for("react.memo"),py=Symbol.for("react.lazy"),Nae=Symbol.for("react.offscreen"),VL;VL=Symbol.for("react.module.reference");function $s(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case x2:switch(e=e.type,e){case iy:case ly:case oy:case hy:case my:return e;default:switch(e=e&&e.$$typeof,e){case wae:case uy:case dy:case py:case fy:case cy:return e;default:return t}}case y2:return t}}}Lt.ContextConsumer=uy;Lt.ContextProvider=cy;Lt.Element=x2;Lt.ForwardRef=dy;Lt.Fragment=iy;Lt.Lazy=py;Lt.Memo=fy;Lt.Portal=y2;Lt.Profiler=ly;Lt.StrictMode=oy;Lt.Suspense=hy;Lt.SuspenseList=my;Lt.isAsyncMode=function(){return!1};Lt.isConcurrentMode=function(){return!1};Lt.isContextConsumer=function(e){return $s(e)===uy};Lt.isContextProvider=function(e){return $s(e)===cy};Lt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===x2};Lt.isForwardRef=function(e){return $s(e)===dy};Lt.isFragment=function(e){return $s(e)===iy};Lt.isLazy=function(e){return $s(e)===py};Lt.isMemo=function(e){return $s(e)===fy};Lt.isPortal=function(e){return $s(e)===y2};Lt.isProfiler=function(e){return $s(e)===ly};Lt.isStrictMode=function(e){return $s(e)===oy};Lt.isSuspense=function(e){return $s(e)===hy};Lt.isSuspenseList=function(e){return $s(e)===my};Lt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===iy||e===ly||e===oy||e===hy||e===my||e===Nae||typeof e=="object"&&e!==null&&(e.$$typeof===py||e.$$typeof===fy||e.$$typeof===cy||e.$$typeof===uy||e.$$typeof===dy||e.$$typeof===VL||e.getModuleId!==void 0)};Lt.typeOf=$s;zL.exports=Lt;var Sae=zL.exports,Cae=Oi,_ae=Di,Pae="[object Number]";function Aae(e){return typeof e=="number"||_ae(e)&&Cae(e)==Pae}var qL=Aae;const kae=Ot(qL);var Tae=qL;function Eae(e){return Tae(e)&&e!=+e}var Oae=Eae;const Vd=Ot(Oae);var Pr=function(t){return t===0?0:t>0?1:-1},vl=function(t){return Yl(t)&&t.indexOf("%")===t.length-1},we=function(t){return kae(t)&&!Vd(t)},Dae=function(t){return et(t)},Bn=function(t){return we(t)||Yl(t)},Mae=0,hc=function(t){var n=++Mae;return"".concat(t||"").concat(n)},Ar=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!we(t)&&!Yl(t))return r;var i;if(vl(t)){var o=t.indexOf("%");i=n*parseFloat(t.slice(0,o))/100}else i=+t;return Vd(i)&&(i=r),a&&i>n&&(i=n),i},to=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},Iae=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,r={},a=0;a<n;a++)if(!r[t[a]])r[t[a]]=!0;else return!0;return!1},Rn=function(t,n){return we(t)&&we(n)?function(r){return t+r*(n-t)}:function(){return n}};function ev(e,t,n){return!e||!e.length?null:e.find(function(r){return r&&(typeof t=="function"?t(r):ds(r,t))===n})}var $ae=function(t,n){return we(t)&&we(n)?t-n:Yl(t)&&Yl(n)?t.localeCompare(n):t instanceof Date&&n instanceof Date?t.getTime()-n.getTime():String(t).localeCompare(String(n))};function uu(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function Pw(e){"@babel/helpers - typeof";return Pw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pw(e)}var Rae=["viewBox","children"],Lae=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],xA=["points","pathLength"],rj={svg:Rae,polygon:xA,polyline:xA},j2=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],tv=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(j.isValidElement(t)&&(r=t.props),!Ld(r))return null;var a={};return Object.keys(r).forEach(function(i){j2.includes(i)&&(a[i]=n||function(o){return r[i](r,o)})}),a},Fae=function(t,n,r){return function(a){return t(n,r,a),null}},Ql=function(t,n,r){if(!Ld(t)||Pw(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var o=t[i];j2.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=Fae(o,n,r))}),a},Bae=["children"],zae=["children"];function yA(e,t){if(e==null)return{};var n=Vae(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Vae(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Aw(e){"@babel/helpers - typeof";return Aw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Aw(e)}var jA={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},pi=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},bA=null,sj=null,b2=function e(t){if(t===bA&&Array.isArray(sj))return sj;var n=[];return j.Children.forEach(t,function(r){et(r)||(Sae.isFragment(r)?n=n.concat(e(r.props.children)):n.push(r))}),sj=n,bA=t,n};function hs(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(function(a){return pi(a)}):r=[pi(t)],b2(e).forEach(function(a){var i=ds(a,"type.displayName")||ds(a,"type.name");r.indexOf(i)!==-1&&n.push(a)}),n}function ss(e,t){var n=hs(e,t);return n&&n[0]}var wA=function(t){if(!t||!t.props)return!1;var n=t.props,r=n.width,a=n.height;return!(!we(r)||r<=0||!we(a)||a<=0)},qae=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Uae=function(t){return t&&t.type&&Yl(t.type)&&qae.indexOf(t.type)>=0},UL=function(t){return t&&Aw(t)==="object"&&"clipDot"in t},Wae=function(t,n,r,a){var i,o=(i=rj==null?void 0:rj[a])!==null&&i!==void 0?i:[];return n.startsWith("data-")||!Ke(t)&&(a&&o.includes(n)||Lae.includes(n))||r&&j2.includes(n)},Be=function(t,n,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(j.isValidElement(t)&&(a=t.props),!Ld(a))return null;var i={};return Object.keys(a).forEach(function(o){var l;Wae((l=a)===null||l===void 0?void 0:l[o],o,n,r)&&(i[o]=a[o])}),i},kw=function e(t,n){if(t===n)return!0;var r=j.Children.count(t);if(r!==j.Children.count(n))return!1;if(r===0)return!0;if(r===1)return NA(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var a=0;a<r;a++){var i=t[a],o=n[a];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!NA(i,o))return!1}return!0},NA=function(t,n){if(et(t)&&et(n))return!0;if(!et(t)&&!et(n)){var r=t.props||{},a=r.children,i=yA(r,Bae),o=n.props||{},l=o.children,c=yA(o,zae);return a&&l?uu(i,c)&&kw(a,l):!a&&!l?uu(i,c):!1}return!1},SA=function(t,n){var r=[],a={};return b2(t).forEach(function(i,o){if(Uae(i))r.push(i);else if(i){var l=pi(i.type),c=n[l]||{},u=c.handler,d=c.once;if(u&&(!d||!a[l])){var h=u(i,l,o);r.push(h),a[l]=!0}}}),r},Hae=function(t){var n=t&&t.type;return n&&jA[n]?jA[n]:null},Kae=function(t,n){return b2(n).indexOf(t)},Gae=["children","width","height","viewBox","className","style","title","desc"];function Tw(){return Tw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tw.apply(this,arguments)}function Yae(e,t){if(e==null)return{};var n=Qae(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Qae(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Ew(e){var t=e.children,n=e.width,r=e.height,a=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,u=Yae(e,Gae),d=a||{width:n,height:r,x:0,y:0},h=at("recharts-surface",i);return L.createElement("svg",Tw({},Be(u,!0,"svg"),{className:h,width:n,height:r,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),L.createElement("title",null,l),L.createElement("desc",null,c),t)}var Xae=["children","className"];function Ow(){return Ow=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ow.apply(this,arguments)}function Jae(e,t){if(e==null)return{};var n=Zae(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Zae(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var vt=L.forwardRef(function(e,t){var n=e.children,r=e.className,a=Jae(e,Xae),i=at("recharts-layer",r);return L.createElement("g",Ow({className:i},Be(a,!0),{ref:t}),n)}),sa=function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i]};function eie(e,t,n){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),n=n>a?a:n,n<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(a);++r<a;)i[r]=e[r+t];return i}var tie=eie,nie=tie;function rie(e,t,n){var r=e.length;return n=n===void 0?r:n,!t&&n>=r?e:nie(e,t,n)}var sie=rie,aie="\\ud800-\\udfff",iie="\\u0300-\\u036f",oie="\\ufe20-\\ufe2f",lie="\\u20d0-\\u20ff",cie=iie+oie+lie,uie="\\ufe0e\\ufe0f",die="\\u200d",hie=RegExp("["+die+aie+cie+uie+"]");function mie(e){return hie.test(e)}var WL=mie;function fie(e){return e.split("")}var pie=fie,HL="\\ud800-\\udfff",gie="\\u0300-\\u036f",vie="\\ufe20-\\ufe2f",xie="\\u20d0-\\u20ff",yie=gie+vie+xie,jie="\\ufe0e\\ufe0f",bie="["+HL+"]",Dw="["+yie+"]",Mw="\\ud83c[\\udffb-\\udfff]",wie="(?:"+Dw+"|"+Mw+")",KL="[^"+HL+"]",GL="(?:\\ud83c[\\udde6-\\uddff]){2}",YL="[\\ud800-\\udbff][\\udc00-\\udfff]",Nie="\\u200d",QL=wie+"?",XL="["+jie+"]?",Sie="(?:"+Nie+"(?:"+[KL,GL,YL].join("|")+")"+XL+QL+")*",Cie=XL+QL+Sie,_ie="(?:"+[KL+Dw+"?",Dw,GL,YL,bie].join("|")+")",Pie=RegExp(Mw+"(?="+Mw+")|"+_ie+Cie,"g");function Aie(e){return e.match(Pie)||[]}var kie=Aie,Tie=pie,Eie=WL,Oie=kie;function Die(e){return Eie(e)?Oie(e):Tie(e)}var Mie=Die,Iie=sie,$ie=WL,Rie=Mie,Lie=LL;function Fie(e){return function(t){t=Lie(t);var n=$ie(t)?Rie(t):void 0,r=n?n[0]:t.charAt(0),a=n?Iie(n,1).join(""):t.slice(1);return r[e]()+a}}var Bie=Fie,zie=Bie,Vie=zie("toUpperCase"),qie=Vie;const gy=Ot(qie);function Kt(e){return function(){return e}}const JL=Math.cos,nv=Math.sin,pa=Math.sqrt,rv=Math.PI,vy=2*rv,Iw=Math.PI,$w=2*Iw,ol=1e-6,Uie=$w-ol;function ZL(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Wie(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return ZL;const n=10**t;return function(r){this._+=r[0];for(let a=1,i=r.length;a<i;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}class Hie{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?ZL:Wie(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,a){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+a}`}bezierCurveTo(t,n,r,a,i,o){this._append`C${+t},${+n},${+r},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,n,r,a,i){if(t=+t,n=+n,r=+r,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=r-t,u=a-n,d=o-t,h=l-n,m=d*d+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(m>ol)if(!(Math.abs(h*c-u*d)>ol)||!i)this._append`L${this._x1=t},${this._y1=n}`;else{let f=r-o,v=a-l,p=c*c+u*u,g=f*f+v*v,x=Math.sqrt(p),y=Math.sqrt(m),b=i*Math.tan((Iw-Math.acos((p+m-g)/(2*x*y)))/2),C=b/y,w=b/x;Math.abs(C-1)>ol&&this._append`L${t+C*d},${n+C*h}`,this._append`A${i},${i},0,0,${+(h*f>d*v)},${this._x1=t+w*c},${this._y1=n+w*u}`}}arc(t,n,r,a,i,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(a),c=r*Math.sin(a),u=t+l,d=n+c,h=1^o,m=o?a-i:i-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>ol||Math.abs(this._y1-d)>ol)&&this._append`L${u},${d}`,r&&(m<0&&(m=m%$w+$w),m>Uie?this._append`A${r},${r},0,1,${h},${t-l},${n-c}A${r},${r},0,1,${h},${this._x1=u},${this._y1=d}`:m>ol&&this._append`A${r},${r},0,${+(m>=Iw)},${h},${this._x1=t+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(t,n,r,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+a}h${-r}Z`}toString(){return this._}}function w2(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new Hie(t)}function N2(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function eF(e){this._context=e}eF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function xy(e){return new eF(e)}function tF(e){return e[0]}function nF(e){return e[1]}function rF(e,t){var n=Kt(!0),r=null,a=xy,i=null,o=w2(l);e=typeof e=="function"?e:e===void 0?tF:Kt(e),t=typeof t=="function"?t:t===void 0?nF:Kt(t);function l(c){var u,d=(c=N2(c)).length,h,m=!1,f;for(r==null&&(i=a(f=o())),u=0;u<=d;++u)!(u<d&&n(h=c[u],u,c))===m&&((m=!m)?i.lineStart():i.lineEnd()),m&&i.point(+e(h,u,c),+t(h,u,c));if(f)return i=null,f+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Kt(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Kt(+c),l):t},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Kt(!!c),l):n},l.curve=function(c){return arguments.length?(a=c,r!=null&&(i=a(r)),l):a},l.context=function(c){return arguments.length?(c==null?r=i=null:i=a(r=c),l):r},l}function Ap(e,t,n){var r=null,a=Kt(!0),i=null,o=xy,l=null,c=w2(u);e=typeof e=="function"?e:e===void 0?tF:Kt(+e),t=typeof t=="function"?t:Kt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?nF:Kt(+n);function u(h){var m,f,v,p=(h=N2(h)).length,g,x=!1,y,b=new Array(p),C=new Array(p);for(i==null&&(l=o(y=c())),m=0;m<=p;++m){if(!(m<p&&a(g=h[m],m,h))===x)if(x=!x)f=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=m-1;v>=f;--v)l.point(b[v],C[v]);l.lineEnd(),l.areaEnd()}x&&(b[m]=+e(g,m,h),C[m]=+t(g,m,h),l.point(r?+r(g,m,h):b[m],n?+n(g,m,h):C[m]))}if(y)return l=null,y+""||null}function d(){return rF().defined(a).curve(o).context(i)}return u.x=function(h){return arguments.length?(e=typeof h=="function"?h:Kt(+h),r=null,u):e},u.x0=function(h){return arguments.length?(e=typeof h=="function"?h:Kt(+h),u):e},u.x1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:Kt(+h),u):r},u.y=function(h){return arguments.length?(t=typeof h=="function"?h:Kt(+h),n=null,u):t},u.y0=function(h){return arguments.length?(t=typeof h=="function"?h:Kt(+h),u):t},u.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Kt(+h),u):n},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(n)},u.lineX1=function(){return d().x(r).y(t)},u.defined=function(h){return arguments.length?(a=typeof h=="function"?h:Kt(!!h),u):a},u.curve=function(h){return arguments.length?(o=h,i!=null&&(l=o(i)),u):o},u.context=function(h){return arguments.length?(h==null?i=l=null:l=o(i=h),u):i},u}class sF{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function Kie(e){return new sF(e,!0)}function Gie(e){return new sF(e,!1)}const S2={draw(e,t){const n=pa(t/rv);e.moveTo(n,0),e.arc(0,0,n,0,vy)}},Yie={draw(e,t){const n=pa(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},aF=pa(1/3),Qie=aF*2,Xie={draw(e,t){const n=pa(t/Qie),r=n*aF;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},Jie={draw(e,t){const n=pa(t),r=-n/2;e.rect(r,r,n,n)}},Zie=.8908130915292852,iF=nv(rv/10)/nv(7*rv/10),eoe=nv(vy/10)*iF,toe=-JL(vy/10)*iF,noe={draw(e,t){const n=pa(t*Zie),r=eoe*n,a=toe*n;e.moveTo(0,-n),e.lineTo(r,a);for(let i=1;i<5;++i){const o=vy*i/5,l=JL(o),c=nv(o);e.lineTo(c*n,-l*n),e.lineTo(l*r-c*a,c*r+l*a)}e.closePath()}},aj=pa(3),roe={draw(e,t){const n=-pa(t/(aj*3));e.moveTo(0,n*2),e.lineTo(-aj*n,-n),e.lineTo(aj*n,-n),e.closePath()}},ys=-.5,js=pa(3)/2,Rw=1/pa(12),soe=(Rw/2+1)*3,aoe={draw(e,t){const n=pa(t/soe),r=n/2,a=n*Rw,i=r,o=n*Rw+n,l=-i,c=o;e.moveTo(r,a),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(ys*r-js*a,js*r+ys*a),e.lineTo(ys*i-js*o,js*i+ys*o),e.lineTo(ys*l-js*c,js*l+ys*c),e.lineTo(ys*r+js*a,ys*a-js*r),e.lineTo(ys*i+js*o,ys*o-js*i),e.lineTo(ys*l+js*c,ys*c-js*l),e.closePath()}};function ioe(e,t){let n=null,r=w2(a);e=typeof e=="function"?e:Kt(e||S2),t=typeof t=="function"?t:Kt(t===void 0?64:+t);function a(){let i;if(n||(n=i=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:Kt(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:Kt(+i),a):t},a.context=function(i){return arguments.length?(n=i??null,a):n},a}function sv(){}function av(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function oF(e){this._context=e}oF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:av(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:av(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ooe(e){return new oF(e)}function lF(e){this._context=e}lF.prototype={areaStart:sv,areaEnd:sv,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:av(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function loe(e){return new lF(e)}function cF(e){this._context=e}cF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:av(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function coe(e){return new cF(e)}function uF(e){this._context=e}uF.prototype={areaStart:sv,areaEnd:sv,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function uoe(e){return new uF(e)}function CA(e){return e<0?-1:1}function _A(e,t,n){var r=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(r||a<0&&-0),o=(n-e._y1)/(a||r<0&&-0),l=(i*a+o*r)/(r+a);return(CA(i)+CA(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function PA(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function ij(e,t,n){var r=e._x0,a=e._y0,i=e._x1,o=e._y1,l=(i-r)/3;e._context.bezierCurveTo(r+l,a+l*t,i-l,o-l*n,i,o)}function iv(e){this._context=e}iv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ij(this,this._t0,PA(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,ij(this,PA(this,n=_A(this,e,t)),n);break;default:ij(this,this._t0,n=_A(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function dF(e){this._context=new hF(e)}(dF.prototype=Object.create(iv.prototype)).point=function(e,t){iv.prototype.point.call(this,t,e)};function hF(e){this._context=e}hF.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,a,i){this._context.bezierCurveTo(t,e,r,n,i,a)}};function doe(e){return new iv(e)}function hoe(e){return new dF(e)}function mF(e){this._context=e}mF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=AA(e),a=AA(t),i=0,o=1;o<n;++i,++o)this._context.bezierCurveTo(r[0][i],a[0][i],r[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function AA(e){var t,n=e.length-1,r,a=new Array(n),i=new Array(n),o=new Array(n);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[n-1]=2,i[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=a[t]/i[t-1],i[t]-=r,o[t]-=r*o[t-1];for(a[n-1]=o[n-1]/i[n-1],t=n-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[n-1]=(e[n]+a[n-1])/2,t=0;t<n-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function moe(e){return new mF(e)}function yy(e,t){this._context=e,this._t=t}yy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function foe(e){return new yy(e,.5)}function poe(e){return new yy(e,0)}function goe(e){return new yy(e,1)}function Uu(e,t){if((o=e.length)>1)for(var n=1,r,a,i=e[t[0]],o,l=i.length;n<o;++n)for(a=i,i=e[t[n]],r=0;r<l;++r)i[r][1]+=i[r][0]=isNaN(a[r][1])?a[r][0]:a[r][1]}function Lw(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function voe(e,t){return e[t]}function xoe(e){const t=[];return t.key=e,t}function yoe(){var e=Kt([]),t=Lw,n=Uu,r=voe;function a(i){var o=Array.from(e.apply(this,arguments),xoe),l,c=o.length,u=-1,d;for(const h of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+r(h,o[l].key,u,i)]).data=h;for(l=0,d=N2(t(o));l<c;++l)o[d[l]].index=l;return n(o,d),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Kt(Array.from(i)),a):e},a.value=function(i){return arguments.length?(r=typeof i=="function"?i:Kt(+i),a):r},a.order=function(i){return arguments.length?(t=i==null?Lw:typeof i=="function"?i:Kt(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(n=i??Uu,a):n},a}function joe(e,t){if((r=e.length)>0){for(var n,r,a=0,i=e[0].length,o;a<i;++a){for(o=n=0;n<r;++n)o+=e[n][a][1]||0;if(o)for(n=0;n<r;++n)e[n][a][1]/=o}Uu(e,t)}}function boe(e,t){if((a=e.length)>0){for(var n=0,r=e[t[0]],a,i=r.length;n<i;++n){for(var o=0,l=0;o<a;++o)l+=e[o][n][1]||0;r[n][1]+=r[n][0]=-l/2}Uu(e,t)}}function woe(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var n=0,r=1,a,i,o;r<i;++r){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],h=d[r][1]||0,m=d[r-1][1]||0,f=(h-m)/2,v=0;v<l;++v){var p=e[t[v]],g=p[r][1]||0,x=p[r-1][1]||0;f+=g-x}c+=h,u+=f*h}a[r-1][1]+=a[r-1][0]=n,c&&(n-=u/c)}a[r-1][1]+=a[r-1][0]=n,Uu(e,t)}}function Pm(e){"@babel/helpers - typeof";return Pm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pm(e)}var Noe=["type","size","sizeType"];function Fw(){return Fw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fw.apply(this,arguments)}function kA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function TA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kA(Object(n),!0).forEach(function(r){Soe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Soe(e,t,n){return t=Coe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Coe(e){var t=_oe(e,"string");return Pm(t)=="symbol"?t:t+""}function _oe(e,t){if(Pm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Pm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Poe(e,t){if(e==null)return{};var n=Aoe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Aoe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var fF={symbolCircle:S2,symbolCross:Yie,symbolDiamond:Xie,symbolSquare:Jie,symbolStar:noe,symbolTriangle:roe,symbolWye:aoe},koe=Math.PI/180,Toe=function(t){var n="symbol".concat(gy(t));return fF[n]||S2},Eoe=function(t,n,r){if(n==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*koe;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Ooe=function(t,n){fF["symbol".concat(gy(t))]=n},C2=function(t){var n=t.type,r=n===void 0?"circle":n,a=t.size,i=a===void 0?64:a,o=t.sizeType,l=o===void 0?"area":o,c=Poe(t,Noe),u=TA(TA({},c),{},{type:r,size:i,sizeType:l}),d=function(){var g=Toe(r),x=ioe().type(g).size(Eoe(i,l,r));return x()},h=u.className,m=u.cx,f=u.cy,v=Be(u,!0);return m===+m&&f===+f&&i===+i?L.createElement("path",Fw({},v,{className:at("recharts-symbols",h),transform:"translate(".concat(m,", ").concat(f,")"),d:d()})):null};C2.registerSymbol=Ooe;function Wu(e){"@babel/helpers - typeof";return Wu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wu(e)}function Bw(){return Bw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bw.apply(this,arguments)}function EA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Doe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EA(Object(n),!0).forEach(function(r){Am(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Moe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ioe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,gF(r.key),r)}}function $oe(e,t,n){return t&&Ioe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Roe(e,t,n){return t=ov(t),Loe(e,pF()?Reflect.construct(t,n||[],ov(e).constructor):t.apply(e,n))}function Loe(e,t){if(t&&(Wu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Foe(e)}function Foe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pF=function(){return!!e})()}function ov(e){return ov=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ov(e)}function Boe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zw(e,t)}function zw(e,t){return zw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},zw(e,t)}function Am(e,t,n){return t=gF(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gF(e){var t=zoe(e,"string");return Wu(t)=="symbol"?t:t+""}function zoe(e,t){if(Wu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Wu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bs=32,_2=function(e){function t(){return Moe(this,t),Roe(this,t,arguments)}return Boe(t,e),$oe(t,[{key:"renderIcon",value:function(r){var a=this.props.inactiveColor,i=bs/2,o=bs/6,l=bs/3,c=r.inactive?a:r.color;if(r.type==="plainline")return L.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:i,x2:bs,y2:i,className:"recharts-legend-icon"});if(r.type==="line")return L.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(bs,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(r.type==="rect")return L.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(bs/8,"h").concat(bs,"v").concat(bs*3/4,"h").concat(-bs,"z"),className:"recharts-legend-icon"});if(L.isValidElement(r.legendIcon)){var u=Doe({},r);return delete u.legendIcon,L.cloneElement(r.legendIcon,u)}return L.createElement(C2,{fill:c,cx:i,cy:i,size:bs,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,a=this.props,i=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,u=a.inactiveColor,d={x:0,y:0,width:bs,height:bs},h={display:l==="horizontal"?"inline-block":"block",marginRight:10},m={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(f,v){var p=f.formatter||c,g=at(Am(Am({"recharts-legend-item":!0},"legend-item-".concat(v),!0),"inactive",f.inactive));if(f.type==="none")return null;var x=Ke(f.value)?null:f.value;sa(!Ke(f.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var y=f.inactive?u:f.color;return L.createElement("li",Bw({className:g,style:h,key:"legend-item-".concat(v)},Ql(r.props,f,v)),L.createElement(Ew,{width:o,height:o,viewBox:d,style:m},r.renderIcon(f)),L.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},p?p(x,f,v):x))})}},{key:"render",value:function(){var r=this.props,a=r.payload,i=r.layout,o=r.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return L.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(j.PureComponent);Am(_2,"displayName","Legend");Am(_2,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Voe=ry;function qoe(){this.__data__=new Voe,this.size=0}var Uoe=qoe;function Woe(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var Hoe=Woe;function Koe(e){return this.__data__.get(e)}var Goe=Koe;function Yoe(e){return this.__data__.has(e)}var Qoe=Yoe,Xoe=ry,Joe=m2,Zoe=f2,ele=200;function tle(e,t){var n=this.__data__;if(n instanceof Xoe){var r=n.__data__;if(!Joe||r.length<ele-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Zoe(r)}return n.set(e,t),this.size=n.size,this}var nle=tle,rle=ry,sle=Uoe,ale=Hoe,ile=Goe,ole=Qoe,lle=nle;function qd(e){var t=this.__data__=new rle(e);this.size=t.size}qd.prototype.clear=sle;qd.prototype.delete=ale;qd.prototype.get=ile;qd.prototype.has=ole;qd.prototype.set=lle;var vF=qd,cle="__lodash_hash_undefined__";function ule(e){return this.__data__.set(e,cle),this}var dle=ule;function hle(e){return this.__data__.has(e)}var mle=hle,fle=f2,ple=dle,gle=mle;function lv(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new fle;++t<n;)this.add(e[t])}lv.prototype.add=lv.prototype.push=ple;lv.prototype.has=gle;var xF=lv;function vle(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var yF=vle;function xle(e,t){return e.has(t)}var jF=xle,yle=xF,jle=yF,ble=jF,wle=1,Nle=2;function Sle(e,t,n,r,a,i){var o=n&wle,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var u=i.get(e),d=i.get(t);if(u&&d)return u==t&&d==e;var h=-1,m=!0,f=n&Nle?new yle:void 0;for(i.set(e,t),i.set(t,e);++h<l;){var v=e[h],p=t[h];if(r)var g=o?r(p,v,h,t,e,i):r(v,p,h,e,t,i);if(g!==void 0){if(g)continue;m=!1;break}if(f){if(!jle(t,function(x,y){if(!ble(f,y)&&(v===x||a(v,x,n,r,i)))return f.push(y)})){m=!1;break}}else if(!(v===p||a(v,p,n,r,i))){m=!1;break}}return i.delete(e),i.delete(t),m}var bF=Sle,Cle=Ka,_le=Cle.Uint8Array,Ple=_le;function Ale(e){var t=-1,n=Array(e.size);return e.forEach(function(r,a){n[++t]=[a,r]}),n}var kle=Ale;function Tle(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var P2=Tle,OA=Ef,DA=Ple,Ele=h2,Ole=bF,Dle=kle,Mle=P2,Ile=1,$le=2,Rle="[object Boolean]",Lle="[object Date]",Fle="[object Error]",Ble="[object Map]",zle="[object Number]",Vle="[object RegExp]",qle="[object Set]",Ule="[object String]",Wle="[object Symbol]",Hle="[object ArrayBuffer]",Kle="[object DataView]",MA=OA?OA.prototype:void 0,oj=MA?MA.valueOf:void 0;function Gle(e,t,n,r,a,i,o){switch(n){case Kle:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Hle:return!(e.byteLength!=t.byteLength||!i(new DA(e),new DA(t)));case Rle:case Lle:case zle:return Ele(+e,+t);case Fle:return e.name==t.name&&e.message==t.message;case Vle:case Ule:return e==t+"";case Ble:var l=Dle;case qle:var c=r&Ile;if(l||(l=Mle),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;r|=$le,o.set(e,t);var d=Ole(l(e),l(t),r,a,i,o);return o.delete(e),d;case Wle:if(oj)return oj.call(e)==oj.call(t)}return!1}var Yle=Gle;function Qle(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}var wF=Qle,Xle=wF,Jle=Qr;function Zle(e,t,n){var r=t(e);return Jle(e)?r:Xle(r,n(e))}var ece=Zle;function tce(e,t){for(var n=-1,r=e==null?0:e.length,a=0,i=[];++n<r;){var o=e[n];t(o,n,e)&&(i[a++]=o)}return i}var nce=tce;function rce(){return[]}var sce=rce,ace=nce,ice=sce,oce=Object.prototype,lce=oce.propertyIsEnumerable,IA=Object.getOwnPropertySymbols,cce=IA?function(e){return e==null?[]:(e=Object(e),ace(IA(e),function(t){return lce.call(e,t)}))}:ice,uce=cce;function dce(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var hce=dce,mce=Oi,fce=Di,pce="[object Arguments]";function gce(e){return fce(e)&&mce(e)==pce}var vce=gce,$A=vce,xce=Di,NF=Object.prototype,yce=NF.hasOwnProperty,jce=NF.propertyIsEnumerable,bce=$A(function(){return arguments}())?$A:function(e){return xce(e)&&yce.call(e,"callee")&&!jce.call(e,"callee")},A2=bce,cv={exports:{}};function wce(){return!1}var Nce=wce;cv.exports;(function(e,t){var n=Ka,r=Nce,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||r;e.exports=u})(cv,cv.exports);var SF=cv.exports,Sce=9007199254740991,Cce=/^(?:0|[1-9]\d*)$/;function _ce(e,t){var n=typeof e;return t=t??Sce,!!t&&(n=="number"||n!="symbol"&&Cce.test(e))&&e>-1&&e%1==0&&e<t}var k2=_ce,Pce=9007199254740991;function Ace(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Pce}var T2=Ace,kce=Oi,Tce=T2,Ece=Di,Oce="[object Arguments]",Dce="[object Array]",Mce="[object Boolean]",Ice="[object Date]",$ce="[object Error]",Rce="[object Function]",Lce="[object Map]",Fce="[object Number]",Bce="[object Object]",zce="[object RegExp]",Vce="[object Set]",qce="[object String]",Uce="[object WeakMap]",Wce="[object ArrayBuffer]",Hce="[object DataView]",Kce="[object Float32Array]",Gce="[object Float64Array]",Yce="[object Int8Array]",Qce="[object Int16Array]",Xce="[object Int32Array]",Jce="[object Uint8Array]",Zce="[object Uint8ClampedArray]",eue="[object Uint16Array]",tue="[object Uint32Array]",Zt={};Zt[Kce]=Zt[Gce]=Zt[Yce]=Zt[Qce]=Zt[Xce]=Zt[Jce]=Zt[Zce]=Zt[eue]=Zt[tue]=!0;Zt[Oce]=Zt[Dce]=Zt[Wce]=Zt[Mce]=Zt[Hce]=Zt[Ice]=Zt[$ce]=Zt[Rce]=Zt[Lce]=Zt[Fce]=Zt[Bce]=Zt[zce]=Zt[Vce]=Zt[qce]=Zt[Uce]=!1;function nue(e){return Ece(e)&&Tce(e.length)&&!!Zt[kce(e)]}var rue=nue;function sue(e){return function(t){return e(t)}}var CF=sue,uv={exports:{}};uv.exports;(function(e,t){var n=OL,r=t&&!t.nodeType&&t,a=r&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===r,o=i&&n.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(uv,uv.exports);var aue=uv.exports,iue=rue,oue=CF,RA=aue,LA=RA&&RA.isTypedArray,lue=LA?oue(LA):iue,_F=lue,cue=hce,uue=A2,due=Qr,hue=SF,mue=k2,fue=_F,pue=Object.prototype,gue=pue.hasOwnProperty;function vue(e,t){var n=due(e),r=!n&&uue(e),a=!n&&!r&&hue(e),i=!n&&!r&&!a&&fue(e),o=n||r||a||i,l=o?cue(e.length,String):[],c=l.length;for(var u in e)(t||gue.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||mue(u,c)))&&l.push(u);return l}var xue=vue,yue=Object.prototype;function jue(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||yue;return e===n}var bue=jue;function wue(e,t){return function(n){return e(t(n))}}var PF=wue,Nue=PF,Sue=Nue(Object.keys,Object),Cue=Sue,_ue=bue,Pue=Cue,Aue=Object.prototype,kue=Aue.hasOwnProperty;function Tue(e){if(!_ue(e))return Pue(e);var t=[];for(var n in Object(e))kue.call(e,n)&&n!="constructor"&&t.push(n);return t}var Eue=Tue,Oue=d2,Due=T2;function Mue(e){return e!=null&&Due(e.length)&&!Oue(e)}var Of=Mue,Iue=xue,$ue=Eue,Rue=Of;function Lue(e){return Rue(e)?Iue(e):$ue(e)}var jy=Lue,Fue=ece,Bue=uce,zue=jy;function Vue(e){return Fue(e,zue,Bue)}var que=Vue,FA=que,Uue=1,Wue=Object.prototype,Hue=Wue.hasOwnProperty;function Kue(e,t,n,r,a,i){var o=n&Uue,l=FA(e),c=l.length,u=FA(t),d=u.length;if(c!=d&&!o)return!1;for(var h=c;h--;){var m=l[h];if(!(o?m in t:Hue.call(t,m)))return!1}var f=i.get(e),v=i.get(t);if(f&&v)return f==t&&v==e;var p=!0;i.set(e,t),i.set(t,e);for(var g=o;++h<c;){m=l[h];var x=e[m],y=t[m];if(r)var b=o?r(y,x,m,t,e,i):r(x,y,m,e,t,i);if(!(b===void 0?x===y||a(x,y,n,r,i):b)){p=!1;break}g||(g=m=="constructor")}if(p&&!g){var C=e.constructor,w=t.constructor;C!=w&&"constructor"in e&&"constructor"in t&&!(typeof C=="function"&&C instanceof C&&typeof w=="function"&&w instanceof w)&&(p=!1)}return i.delete(e),i.delete(t),p}var Gue=Kue,Yue=dc,Que=Ka,Xue=Yue(Que,"DataView"),Jue=Xue,Zue=dc,ede=Ka,tde=Zue(ede,"Promise"),nde=tde,rde=dc,sde=Ka,ade=rde(sde,"Set"),AF=ade,ide=dc,ode=Ka,lde=ide(ode,"WeakMap"),cde=lde,Vw=Jue,qw=m2,Uw=nde,Ww=AF,Hw=cde,kF=Oi,Ud=ML,BA="[object Map]",ude="[object Object]",zA="[object Promise]",VA="[object Set]",qA="[object WeakMap]",UA="[object DataView]",dde=Ud(Vw),hde=Ud(qw),mde=Ud(Uw),fde=Ud(Ww),pde=Ud(Hw),ll=kF;(Vw&&ll(new Vw(new ArrayBuffer(1)))!=UA||qw&&ll(new qw)!=BA||Uw&&ll(Uw.resolve())!=zA||Ww&&ll(new Ww)!=VA||Hw&&ll(new Hw)!=qA)&&(ll=function(e){var t=kF(e),n=t==ude?e.constructor:void 0,r=n?Ud(n):"";if(r)switch(r){case dde:return UA;case hde:return BA;case mde:return zA;case fde:return VA;case pde:return qA}return t});var gde=ll,lj=vF,vde=bF,xde=Yle,yde=Gue,WA=gde,HA=Qr,KA=SF,jde=_F,bde=1,GA="[object Arguments]",YA="[object Array]",kp="[object Object]",wde=Object.prototype,QA=wde.hasOwnProperty;function Nde(e,t,n,r,a,i){var o=HA(e),l=HA(t),c=o?YA:WA(e),u=l?YA:WA(t);c=c==GA?kp:c,u=u==GA?kp:u;var d=c==kp,h=u==kp,m=c==u;if(m&&KA(e)){if(!KA(t))return!1;o=!0,d=!1}if(m&&!d)return i||(i=new lj),o||jde(e)?vde(e,t,n,r,a,i):xde(e,t,c,n,r,a,i);if(!(n&bde)){var f=d&&QA.call(e,"__wrapped__"),v=h&&QA.call(t,"__wrapped__");if(f||v){var p=f?e.value():e,g=v?t.value():t;return i||(i=new lj),a(p,g,n,r,i)}}return m?(i||(i=new lj),yde(e,t,n,r,a,i)):!1}var Sde=Nde,Cde=Sde,XA=Di;function TF(e,t,n,r,a){return e===t?!0:e==null||t==null||!XA(e)&&!XA(t)?e!==e&&t!==t:Cde(e,t,n,r,TF,a)}var E2=TF,_de=vF,Pde=E2,Ade=1,kde=2;function Tde(e,t,n,r){var a=n.length,i=a,o=!r;if(e==null)return!i;for(e=Object(e);a--;){var l=n[a];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<i;){l=n[a];var c=l[0],u=e[c],d=l[1];if(o&&l[2]){if(u===void 0&&!(c in e))return!1}else{var h=new _de;if(r)var m=r(u,d,c,e,t,h);if(!(m===void 0?Pde(d,u,Ade|kde,r,h):m))return!1}}return!0}var Ede=Tde,Ode=Go;function Dde(e){return e===e&&!Ode(e)}var EF=Dde,Mde=EF,Ide=jy;function $de(e){for(var t=Ide(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,Mde(a)]}return t}var Rde=$de;function Lde(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var OF=Lde,Fde=Ede,Bde=Rde,zde=OF;function Vde(e){var t=Bde(e);return t.length==1&&t[0][2]?zde(t[0][0],t[0][1]):function(n){return n===e||Fde(n,e,t)}}var qde=Vde;function Ude(e,t){return e!=null&&t in Object(e)}var Wde=Ude,Hde=FL,Kde=A2,Gde=Qr,Yde=k2,Qde=T2,Xde=ay;function Jde(e,t,n){t=Hde(t,e);for(var r=-1,a=t.length,i=!1;++r<a;){var o=Xde(t[r]);if(!(i=e!=null&&n(e,o)))break;e=e[o]}return i||++r!=a?i:(a=e==null?0:e.length,!!a&&Qde(a)&&Yde(o,a)&&(Gde(e)||Kde(e)))}var Zde=Jde,ehe=Wde,the=Zde;function nhe(e,t){return e!=null&&the(e,t,ehe)}var rhe=nhe,she=E2,ahe=BL,ihe=rhe,ohe=u2,lhe=EF,che=OF,uhe=ay,dhe=1,hhe=2;function mhe(e,t){return ohe(e)&&lhe(t)?che(uhe(e),t):function(n){var r=ahe(n,e);return r===void 0&&r===t?ihe(n,e):she(t,r,dhe|hhe)}}var fhe=mhe;function phe(e){return e}var Wd=phe;function ghe(e){return function(t){return t==null?void 0:t[e]}}var vhe=ghe,xhe=v2;function yhe(e){return function(t){return xhe(t,e)}}var jhe=yhe,bhe=vhe,whe=jhe,Nhe=u2,She=ay;function Che(e){return Nhe(e)?bhe(She(e)):whe(e)}var _he=Che,Phe=qde,Ahe=fhe,khe=Wd,The=Qr,Ehe=_he;function Ohe(e){return typeof e=="function"?e:e==null?khe:typeof e=="object"?The(e)?Ahe(e[0],e[1]):Phe(e):Ehe(e)}var Ga=Ohe;function Dhe(e,t,n,r){for(var a=e.length,i=n+(r?1:-1);r?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var DF=Dhe;function Mhe(e){return e!==e}var Ihe=Mhe;function $he(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}var Rhe=$he,Lhe=DF,Fhe=Ihe,Bhe=Rhe;function zhe(e,t,n){return t===t?Bhe(e,t,n):Lhe(e,Fhe,n)}var Vhe=zhe,qhe=Vhe;function Uhe(e,t){var n=e==null?0:e.length;return!!n&&qhe(e,t,0)>-1}var Whe=Uhe;function Hhe(e,t,n){for(var r=-1,a=e==null?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}var Khe=Hhe;function Ghe(){}var Yhe=Ghe,cj=AF,Qhe=Yhe,Xhe=P2,Jhe=1/0,Zhe=cj&&1/Xhe(new cj([,-0]))[1]==Jhe?function(e){return new cj(e)}:Qhe,eme=Zhe,tme=xF,nme=Whe,rme=Khe,sme=jF,ame=eme,ime=P2,ome=200;function lme(e,t,n){var r=-1,a=nme,i=e.length,o=!0,l=[],c=l;if(n)o=!1,a=rme;else if(i>=ome){var u=t?null:ame(e);if(u)return ime(u);o=!1,a=sme,c=new tme}else c=t?[]:l;e:for(;++r<i;){var d=e[r],h=t?t(d):d;if(d=n||d!==0?d:0,o&&h===h){for(var m=c.length;m--;)if(c[m]===h)continue e;t&&c.push(h),l.push(d)}else a(c,h,n)||(c!==l&&c.push(h),l.push(d))}return l}var cme=lme,ume=Ga,dme=cme;function hme(e,t){return e&&e.length?dme(e,ume(t)):[]}var mme=hme;const JA=Ot(mme);function MF(e,t,n){return t===!0?JA(e,n):Ke(t)?JA(e,t):e}function Hu(e){"@babel/helpers - typeof";return Hu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hu(e)}var fme=["ref"];function ZA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Xa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZA(Object(n),!0).forEach(function(r){by(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ek(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$F(r.key),r)}}function gme(e,t,n){return t&&ek(e.prototype,t),n&&ek(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function vme(e,t,n){return t=dv(t),xme(e,IF()?Reflect.construct(t,n||[],dv(e).constructor):t.apply(e,n))}function xme(e,t){if(t&&(Hu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yme(e)}function yme(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IF=function(){return!!e})()}function dv(e){return dv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},dv(e)}function jme(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kw(e,t)}function Kw(e,t){return Kw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Kw(e,t)}function by(e,t,n){return t=$F(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $F(e){var t=bme(e,"string");return Hu(t)=="symbol"?t:t+""}function bme(e,t){if(Hu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Hu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wme(e,t){if(e==null)return{};var n=Nme(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Nme(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Sme(e){return e.value}function Cme(e,t){if(L.isValidElement(e))return L.cloneElement(e,t);if(typeof e=="function")return L.createElement(e,t);t.ref;var n=wme(t,fme);return L.createElement(_2,n)}var tk=1,du=function(e){function t(){var n;pme(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=vme(this,t,[].concat(a)),by(n,"lastBoundingBox",{width:-1,height:-1}),n}return jme(t,e),gme(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>tk||Math.abs(a.height-this.lastBoundingBox.height)>tk)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,r&&r(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Xa({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var a=this.props,i=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,u=a.chartWidth,d=a.chartHeight,h,m;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(o==="center"&&i==="vertical"){var f=this.getBBoxSnapshot();h={left:((u||0)-f.width)/2}}else h=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(l==="middle"){var v=this.getBBoxSnapshot();m={top:((d||0)-v.height)/2}}else m=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Xa(Xa({},h),m)}},{key:"render",value:function(){var r=this,a=this.props,i=a.content,o=a.width,l=a.height,c=a.wrapperStyle,u=a.payloadUniqBy,d=a.payload,h=Xa(Xa({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return L.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(f){r.wrapperNode=f}},Cme(i,Xa(Xa({},this.props),{},{payload:MF(d,u,Sme)})))}}],[{key:"getWithHeight",value:function(r,a){var i=Xa(Xa({},this.defaultProps),r.props),o=i.layout;return o==="vertical"&&we(r.props.height)?{height:r.props.height}:o==="horizontal"?{width:r.props.width||a}:null}}])}(j.PureComponent);by(du,"displayName","Legend");by(du,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var nk=Ef,_me=A2,Pme=Qr,rk=nk?nk.isConcatSpreadable:void 0;function Ame(e){return Pme(e)||_me(e)||!!(rk&&e&&e[rk])}var kme=Ame,Tme=wF,Eme=kme;function RF(e,t,n,r,a){var i=-1,o=e.length;for(n||(n=Eme),a||(a=[]);++i<o;){var l=e[i];t>0&&n(l)?t>1?RF(l,t-1,n,r,a):Tme(a,l):r||(a[a.length]=l)}return a}var LF=RF;function Ome(e){return function(t,n,r){for(var a=-1,i=Object(t),o=r(t),l=o.length;l--;){var c=o[e?l:++a];if(n(i[c],c,i)===!1)break}return t}}var Dme=Ome,Mme=Dme,Ime=Mme(),$me=Ime,Rme=$me,Lme=jy;function Fme(e,t){return e&&Rme(e,t,Lme)}var FF=Fme,Bme=Of;function zme(e,t){return function(n,r){if(n==null)return n;if(!Bme(n))return e(n,r);for(var a=n.length,i=t?a:-1,o=Object(n);(t?i--:++i<a)&&r(o[i],i,o)!==!1;);return n}}var Vme=zme,qme=FF,Ume=Vme,Wme=Ume(qme),O2=Wme,Hme=O2,Kme=Of;function Gme(e,t){var n=-1,r=Kme(e)?Array(e.length):[];return Hme(e,function(a,i,o){r[++n]=t(a,i,o)}),r}var BF=Gme;function Yme(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}var Qme=Yme,sk=Rd;function Xme(e,t){if(e!==t){var n=e!==void 0,r=e===null,a=e===e,i=sk(e),o=t!==void 0,l=t===null,c=t===t,u=sk(t);if(!l&&!u&&!i&&e>t||i&&o&&c&&!l&&!u||r&&o&&c||!n&&c||!a)return 1;if(!r&&!i&&!u&&e<t||u&&n&&a&&!r&&!i||l&&n&&a||!o&&a||!c)return-1}return 0}var Jme=Xme,Zme=Jme;function efe(e,t,n){for(var r=-1,a=e.criteria,i=t.criteria,o=a.length,l=n.length;++r<o;){var c=Zme(a[r],i[r]);if(c){if(r>=l)return c;var u=n[r];return c*(u=="desc"?-1:1)}}return e.index-t.index}var tfe=efe,uj=g2,nfe=v2,rfe=Ga,sfe=BF,afe=Qme,ife=CF,ofe=tfe,lfe=Wd,cfe=Qr;function ufe(e,t,n){t.length?t=uj(t,function(i){return cfe(i)?function(o){return nfe(o,i.length===1?i[0]:i)}:i}):t=[lfe];var r=-1;t=uj(t,ife(rfe));var a=sfe(e,function(i,o,l){var c=uj(t,function(u){return u(i)});return{criteria:c,index:++r,value:i}});return afe(a,function(i,o){return ofe(i,o,n)})}var dfe=ufe;function hfe(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var mfe=hfe,ffe=mfe,ak=Math.max;function pfe(e,t,n){return t=ak(t===void 0?e.length-1:t,0),function(){for(var r=arguments,a=-1,i=ak(r.length-t,0),o=Array(i);++a<i;)o[a]=r[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=r[a];return l[t]=n(o),ffe(e,this,l)}}var gfe=pfe;function vfe(e){return function(){return e}}var xfe=vfe,yfe=dc,jfe=function(){try{var e=yfe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),zF=jfe,bfe=xfe,ik=zF,wfe=Wd,Nfe=ik?function(e,t){return ik(e,"toString",{configurable:!0,enumerable:!1,value:bfe(t),writable:!0})}:wfe,Sfe=Nfe,Cfe=800,_fe=16,Pfe=Date.now;function Afe(e){var t=0,n=0;return function(){var r=Pfe(),a=_fe-(r-n);if(n=r,a>0){if(++t>=Cfe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var kfe=Afe,Tfe=Sfe,Efe=kfe,Ofe=Efe(Tfe),Dfe=Ofe,Mfe=Wd,Ife=gfe,$fe=Dfe;function Rfe(e,t){return $fe(Ife(e,t,Mfe),e+"")}var Lfe=Rfe,Ffe=h2,Bfe=Of,zfe=k2,Vfe=Go;function qfe(e,t,n){if(!Vfe(n))return!1;var r=typeof t;return(r=="number"?Bfe(n)&&zfe(t,n.length):r=="string"&&t in n)?Ffe(n[t],e):!1}var wy=qfe,Ufe=LF,Wfe=dfe,Hfe=Lfe,ok=wy,Kfe=Hfe(function(e,t){if(e==null)return[];var n=t.length;return n>1&&ok(e,t[0],t[1])?t=[]:n>2&&ok(t[0],t[1],t[2])&&(t=[t[0]]),Wfe(e,Ufe(t,1),[])}),Gfe=Kfe;const D2=Ot(Gfe);function km(e){"@babel/helpers - typeof";return km=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},km(e)}function Gw(){return Gw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gw.apply(this,arguments)}function Yfe(e,t){return Zfe(e)||Jfe(e,t)||Xfe(e,t)||Qfe()}function Qfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xfe(e,t){if(e){if(typeof e=="string")return lk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lk(e,t)}}function lk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jfe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Zfe(e){if(Array.isArray(e))return e}function ck(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function dj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ck(Object(n),!0).forEach(function(r){epe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ck(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function epe(e,t,n){return t=tpe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tpe(e){var t=npe(e,"string");return km(t)=="symbol"?t:t+""}function npe(e,t){if(km(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(km(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rpe(e){return Array.isArray(e)&&Bn(e[0])&&Bn(e[1])?e.join(" ~ "):e}var spe=function(t){var n=t.separator,r=n===void 0?" : ":n,a=t.contentStyle,i=a===void 0?{}:a,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,d=t.payload,h=t.formatter,m=t.itemSorter,f=t.wrapperClassName,v=t.labelClassName,p=t.label,g=t.labelFormatter,x=t.accessibilityLayer,y=x===void 0?!1:x,b=function(){if(d&&d.length){var k={padding:0,margin:0},I=(m?D2(d,m):d).map(function(D,U){if(D.type==="none")return null;var B=dj({display:"block",paddingTop:4,paddingBottom:4,color:D.color||"#000"},l),K=D.formatter||h||rpe,T=D.value,$=D.name,G=T,Q=$;if(K&&G!=null&&Q!=null){var ne=K(T,$,D,U,d);if(Array.isArray(ne)){var oe=Yfe(ne,2);G=oe[0],Q=oe[1]}else G=ne}return L.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(U),style:B},Bn(Q)?L.createElement("span",{className:"recharts-tooltip-item-name"},Q):null,Bn(Q)?L.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,L.createElement("span",{className:"recharts-tooltip-item-value"},G),L.createElement("span",{className:"recharts-tooltip-item-unit"},D.unit||""))});return L.createElement("ul",{className:"recharts-tooltip-item-list",style:k},I)}return null},C=dj({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),w=dj({margin:0},u),N=!et(p),S=N?p:"",_=at("recharts-default-tooltip",f),P=at("recharts-tooltip-label",v);N&&g&&d!==void 0&&d!==null&&(S=g(p,d));var A=y?{role:"status","aria-live":"assertive"}:{};return L.createElement("div",Gw({className:_,style:C},A),L.createElement("p",{className:P,style:w},L.isValidElement(S)?S:"".concat(S)),b())};function Tm(e){"@babel/helpers - typeof";return Tm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tm(e)}function Tp(e,t,n){return t=ape(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ape(e){var t=ipe(e,"string");return Tm(t)=="symbol"?t:t+""}function ipe(e,t){if(Tm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Tm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fh="recharts-tooltip-wrapper",ope={visibility:"hidden"};function lpe(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return at(fh,Tp(Tp(Tp(Tp({},"".concat(fh,"-right"),we(n)&&t&&we(t.x)&&n>=t.x),"".concat(fh,"-left"),we(n)&&t&&we(t.x)&&n<t.x),"".concat(fh,"-bottom"),we(r)&&t&&we(t.y)&&r>=t.y),"".concat(fh,"-top"),we(r)&&t&&we(t.y)&&r<t.y))}function uk(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,a=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(i&&we(i[r]))return i[r];var d=n[r]-l-a,h=n[r]+a;if(t[r])return o[r]?d:h;if(o[r]){var m=d,f=c[r];return m<f?Math.max(h,c[r]):Math.max(d,c[r])}var v=h+l,p=c[r]+u;return v>p?Math.max(d,c[r]):Math.max(h,c[r])}function cpe(e){var t=e.translateX,n=e.translateY,r=e.useTranslate3d;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function upe(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.offsetTopLeft,a=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,d,h;return o.height>0&&o.width>0&&n?(d=uk({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=uk({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=cpe({translateX:d,translateY:h,useTranslate3d:l})):u=ope,{cssProperties:u,cssClasses:lpe({translateX:d,translateY:h,coordinate:n})}}function Ku(e){"@babel/helpers - typeof";return Ku=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ku(e)}function dk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function hk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dk(Object(n),!0).forEach(function(r){Qw(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dk(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dpe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hpe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qF(r.key),r)}}function mpe(e,t,n){return t&&hpe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function fpe(e,t,n){return t=hv(t),ppe(e,VF()?Reflect.construct(t,n||[],hv(e).constructor):t.apply(e,n))}function ppe(e,t){if(t&&(Ku(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gpe(e)}function gpe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VF=function(){return!!e})()}function hv(e){return hv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},hv(e)}function vpe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yw(e,t)}function Yw(e,t){return Yw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Yw(e,t)}function Qw(e,t,n){return t=qF(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qF(e){var t=xpe(e,"string");return Ku(t)=="symbol"?t:t+""}function xpe(e,t){if(Ku(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ku(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mk=1,ype=function(e){function t(){var n;dpe(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=fpe(this,t,[].concat(a)),Qw(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Qw(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,d;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=n.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),n}return vpe(t,e),mpe(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>mk||Math.abs(r.height-this.state.lastBoundingBox.height)>mk)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.children,d=a.coordinate,h=a.hasPayload,m=a.isAnimationActive,f=a.offset,v=a.position,p=a.reverseDirection,g=a.useTranslate3d,x=a.viewBox,y=a.wrapperStyle,b=upe({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:f,position:v,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:g,viewBox:x}),C=b.cssClasses,w=b.cssProperties,N=hk(hk({transition:m&&i?"transform ".concat(l,"ms ").concat(c):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&h?"visible":"hidden",position:"absolute",top:0,left:0},y);return L.createElement("div",{tabIndex:-1,className:C,style:N,ref:function(_){r.wrapperNode=_}},u)}}])}(j.PureComponent),jpe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},aa={isSsr:jpe(),get:function(t){return aa[t]},set:function(t,n){if(typeof t=="string")aa[t]=n;else{var r=Object.keys(t);r&&r.length&&r.forEach(function(a){aa[a]=t[a]})}}};function Gu(e){"@babel/helpers - typeof";return Gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gu(e)}function fk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function pk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fk(Object(n),!0).forEach(function(r){M2(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fk(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bpe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wpe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,WF(r.key),r)}}function Npe(e,t,n){return t&&wpe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Spe(e,t,n){return t=mv(t),Cpe(e,UF()?Reflect.construct(t,n||[],mv(e).constructor):t.apply(e,n))}function Cpe(e,t){if(t&&(Gu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _pe(e)}function _pe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UF=function(){return!!e})()}function mv(e){return mv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},mv(e)}function Ppe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xw(e,t)}function Xw(e,t){return Xw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Xw(e,t)}function M2(e,t,n){return t=WF(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WF(e){var t=Ape(e,"string");return Gu(t)=="symbol"?t:t+""}function Ape(e,t){if(Gu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Gu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kpe(e){return e.dataKey}function Tpe(e,t){return L.isValidElement(e)?L.cloneElement(e,t):typeof e=="function"?L.createElement(e,t):L.createElement(spe,t)}var Kn=function(e){function t(){return bpe(this,t),Spe(this,t,arguments)}return Ppe(t,e),Npe(t,[{key:"render",value:function(){var r=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.content,d=a.coordinate,h=a.filterNull,m=a.isAnimationActive,f=a.offset,v=a.payload,p=a.payloadUniqBy,g=a.position,x=a.reverseDirection,y=a.useTranslate3d,b=a.viewBox,C=a.wrapperStyle,w=v??[];h&&w.length&&(w=MF(v.filter(function(S){return S.value!=null&&(S.hide!==!0||r.props.includeHidden)}),p,kpe));var N=w.length>0;return L.createElement(ype,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:m,active:i,coordinate:d,hasPayload:N,offset:f,position:g,reverseDirection:x,useTranslate3d:y,viewBox:b,wrapperStyle:C},Tpe(u,pk(pk({},this.props),{},{payload:w})))}}])}(j.PureComponent);M2(Kn,"displayName","Tooltip");M2(Kn,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!aa.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Epe=Ka,Ope=function(){return Epe.Date.now()},Dpe=Ope,Mpe=/\s/;function Ipe(e){for(var t=e.length;t--&&Mpe.test(e.charAt(t)););return t}var $pe=Ipe,Rpe=$pe,Lpe=/^\s+/;function Fpe(e){return e&&e.slice(0,Rpe(e)+1).replace(Lpe,"")}var Bpe=Fpe,zpe=Bpe,gk=Go,Vpe=Rd,vk=NaN,qpe=/^[-+]0x[0-9a-f]+$/i,Upe=/^0b[01]+$/i,Wpe=/^0o[0-7]+$/i,Hpe=parseInt;function Kpe(e){if(typeof e=="number")return e;if(Vpe(e))return vk;if(gk(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=gk(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=zpe(e);var n=Upe.test(e);return n||Wpe.test(e)?Hpe(e.slice(2),n?2:8):qpe.test(e)?vk:+e}var HF=Kpe,Gpe=Go,hj=Dpe,xk=HF,Ype="Expected a function",Qpe=Math.max,Xpe=Math.min;function Jpe(e,t,n){var r,a,i,o,l,c,u=0,d=!1,h=!1,m=!0;if(typeof e!="function")throw new TypeError(Ype);t=xk(t)||0,Gpe(n)&&(d=!!n.leading,h="maxWait"in n,i=h?Qpe(xk(n.maxWait)||0,t):i,m="trailing"in n?!!n.trailing:m);function f(N){var S=r,_=a;return r=a=void 0,u=N,o=e.apply(_,S),o}function v(N){return u=N,l=setTimeout(x,t),d?f(N):o}function p(N){var S=N-c,_=N-u,P=t-S;return h?Xpe(P,i-_):P}function g(N){var S=N-c,_=N-u;return c===void 0||S>=t||S<0||h&&_>=i}function x(){var N=hj();if(g(N))return y(N);l=setTimeout(x,p(N))}function y(N){return l=void 0,m&&r?f(N):(r=a=void 0,o)}function b(){l!==void 0&&clearTimeout(l),u=0,r=c=a=l=void 0}function C(){return l===void 0?o:y(hj())}function w(){var N=hj(),S=g(N);if(r=arguments,a=this,c=N,S){if(l===void 0)return v(c);if(h)return clearTimeout(l),l=setTimeout(x,t),f(c)}return l===void 0&&(l=setTimeout(x,t)),o}return w.cancel=b,w.flush=C,w}var Zpe=Jpe,ege=Zpe,tge=Go,nge="Expected a function";function rge(e,t,n){var r=!0,a=!0;if(typeof e!="function")throw new TypeError(nge);return tge(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),ege(e,t,{leading:r,maxWait:t,trailing:a})}var sge=rge;const KF=Ot(sge);function Em(e){"@babel/helpers - typeof";return Em=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Em(e)}function yk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ep(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yk(Object(n),!0).forEach(function(r){age(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yk(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function age(e,t,n){return t=ige(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ige(e){var t=oge(e,"string");return Em(t)=="symbol"?t:t+""}function oge(e,t){if(Em(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Em(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lge(e,t){return hge(e)||dge(e,t)||uge(e,t)||cge()}function cge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uge(e,t){if(e){if(typeof e=="string")return jk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jk(e,t)}}function jk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function dge(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function hge(e){if(Array.isArray(e))return e}var _i=j.forwardRef(function(e,t){var n=e.aspect,r=e.initialDimension,a=r===void 0?{width:-1,height:-1}:r,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,d=u===void 0?0:u,h=e.minHeight,m=e.maxHeight,f=e.children,v=e.debounce,p=v===void 0?0:v,g=e.id,x=e.className,y=e.onResize,b=e.style,C=b===void 0?{}:b,w=j.useRef(null),N=j.useRef();N.current=y,j.useImperativeHandle(t,function(){return Object.defineProperty(w.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),w.current},configurable:!0})});var S=j.useState({containerWidth:a.width,containerHeight:a.height}),_=lge(S,2),P=_[0],A=_[1],E=j.useCallback(function(I,D){A(function(U){var B=Math.round(I),K=Math.round(D);return U.containerWidth===B&&U.containerHeight===K?U:{containerWidth:B,containerHeight:K}})},[]);j.useEffect(function(){var I=function($){var G,Q=$[0].contentRect,ne=Q.width,oe=Q.height;E(ne,oe),(G=N.current)===null||G===void 0||G.call(N,ne,oe)};p>0&&(I=KF(I,p,{trailing:!0,leading:!1}));var D=new ResizeObserver(I),U=w.current.getBoundingClientRect(),B=U.width,K=U.height;return E(B,K),D.observe(w.current),function(){D.disconnect()}},[E,p]);var k=j.useMemo(function(){var I=P.containerWidth,D=P.containerHeight;if(I<0||D<0)return null;sa(vl(o)||vl(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),sa(!n||n>0,"The aspect(%s) must be greater than zero.",n);var U=vl(o)?I:o,B=vl(c)?D:c;n&&n>0&&(U?B=U/n:B&&(U=B*n),m&&B>m&&(B=m)),sa(U>0||B>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,U,B,o,c,d,h,n);var K=!Array.isArray(f)&&pi(f.type).endsWith("Chart");return L.Children.map(f,function(T){return L.isValidElement(T)?j.cloneElement(T,Ep({width:U,height:B},K?{style:Ep({height:"100%",width:"100%",maxHeight:B,maxWidth:U},T.props.style)}:{})):T})},[n,f,c,m,h,d,P,o]);return L.createElement("div",{id:g?"".concat(g):void 0,className:at("recharts-responsive-container",x),style:Ep(Ep({},C),{},{width:o,height:c,minWidth:d,minHeight:h,maxHeight:m}),ref:w},k)}),Hd=function(t){return null};Hd.displayName="Cell";function Om(e){"@babel/helpers - typeof";return Om=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Om(e)}function bk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Jw(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bk(Object(n),!0).forEach(function(r){mge(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bk(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mge(e,t,n){return t=fge(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fge(e){var t=pge(e,"string");return Om(t)=="symbol"?t:t+""}function pge(e,t){if(Om(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Om(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kc={widthCache:{},cacheCount:0},gge=2e3,vge={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},wk="recharts_measurement_span";function xge(e){var t=Jw({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var Hh=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||aa.isSsr)return{width:0,height:0};var r=xge(n),a=JSON.stringify({text:t,copyStyle:r});if(kc.widthCache[a])return kc.widthCache[a];try{var i=document.getElementById(wk);i||(i=document.createElement("span"),i.setAttribute("id",wk),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=Jw(Jw({},vge),r);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return kc.widthCache[a]=c,++kc.cacheCount>gge&&(kc.cacheCount=0,kc.widthCache={}),c}catch{return{width:0,height:0}}},yge=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Dm(e){"@babel/helpers - typeof";return Dm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dm(e)}function fv(e,t){return Nge(e)||wge(e,t)||bge(e,t)||jge()}function jge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bge(e,t){if(e){if(typeof e=="string")return Nk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nk(e,t)}}function Nk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wge(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Nge(e){if(Array.isArray(e))return e}function Sge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_ge(r.key),r)}}function Cge(e,t,n){return t&&Sk(e.prototype,t),n&&Sk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _ge(e){var t=Pge(e,"string");return Dm(t)=="symbol"?t:t+""}function Pge(e,t){if(Dm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Dm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ck=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,_k=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Age=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,kge=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,GF={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Tge=Object.keys(GF),Gc="NaN";function Ege(e,t){return e*GF[t]}var Op=function(){function e(t,n){Sge(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!Age.test(n)&&(this.num=NaN,this.unit=""),Tge.includes(n)&&(this.num=Ege(t,n),this.unit="px")}return Cge(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,a=(r=kge.exec(n))!==null&&r!==void 0?r:[],i=fv(a,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])}();function YF(e){if(e.includes(Gc))return Gc;for(var t=e;t.includes("*")||t.includes("/");){var n,r=(n=Ck.exec(t))!==null&&n!==void 0?n:[],a=fv(r,4),i=a[1],o=a[2],l=a[3],c=Op.parse(i??""),u=Op.parse(l??""),d=o==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return Gc;t=t.replace(Ck,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,m=(h=_k.exec(t))!==null&&h!==void 0?h:[],f=fv(m,4),v=f[1],p=f[2],g=f[3],x=Op.parse(v??""),y=Op.parse(g??""),b=p==="+"?x.add(y):x.subtract(y);if(b.isNaN())return Gc;t=t.replace(_k,b.toString())}return t}var Pk=/\(([^()]*)\)/;function Oge(e){for(var t=e;t.includes("(");){var n=Pk.exec(t),r=fv(n,2),a=r[1];t=t.replace(Pk,YF(a))}return t}function Dge(e){var t=e.replace(/\s+/g,"");return t=Oge(t),t=YF(t),t}function Mge(e){try{return Dge(e)}catch{return Gc}}function mj(e){var t=Mge(e.slice(5,-1));return t===Gc?"":t}var Ige=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],$ge=["dx","dy","angle","className","breakAll"];function Zw(){return Zw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zw.apply(this,arguments)}function Ak(e,t){if(e==null)return{};var n=Rge(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Rge(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function kk(e,t){return zge(e)||Bge(e,t)||Fge(e,t)||Lge()}function Lge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fge(e,t){if(e){if(typeof e=="string")return Tk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tk(e,t)}}function Tk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bge(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function zge(e){if(Array.isArray(e))return e}var QF=/[ \f\n\r\t\v\u2028\u2029]+/,XF=function(t){var n=t.children,r=t.breakAll,a=t.style;try{var i=[];et(n)||(r?i=n.toString().split(""):i=n.toString().split(QF));var o=i.map(function(c){return{word:c,width:Hh(c,a).width}}),l=r?0:Hh(" ",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},Vge=function(t,n,r,a,i){var o=t.maxLines,l=t.children,c=t.style,u=t.breakAll,d=we(o),h=l,m=function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return U.reduce(function(B,K){var T=K.word,$=K.width,G=B[B.length-1];if(G&&(a==null||i||G.width+$+r<Number(a)))G.words.push(T),G.width+=$+r;else{var Q={words:[T],width:$};B.push(Q)}return B},[])},f=m(n),v=function(U){return U.reduce(function(B,K){return B.width>K.width?B:K})};if(!d)return f;for(var p="…",g=function(U){var B=h.slice(0,U),K=XF({breakAll:u,style:c,children:B+p}).wordsWithComputedWidth,T=m(K),$=T.length>o||v(T).width>Number(a);return[$,T]},x=0,y=h.length-1,b=0,C;x<=y&&b<=h.length-1;){var w=Math.floor((x+y)/2),N=w-1,S=g(N),_=kk(S,2),P=_[0],A=_[1],E=g(w),k=kk(E,1),I=k[0];if(!P&&!I&&(x=w+1),P&&I&&(y=w-1),!P&&I){C=A;break}b++}return C||f},Ek=function(t){var n=et(t)?[]:t.toString().split(QF);return[{words:n}]},qge=function(t){var n=t.width,r=t.scaleToFit,a=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((n||r)&&!aa.isSsr){var c,u,d=XF({breakAll:o,children:a,style:i});if(d){var h=d.wordsWithComputedWidth,m=d.spaceWidth;c=h,u=m}else return Ek(a);return Vge({breakAll:o,children:a,maxLines:l,style:i},c,u,n,r)}return Ek(a)},Ok="#808080",Xl=function(t){var n=t.x,r=n===void 0?0:n,a=t.y,i=a===void 0?0:a,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,d=t.scaleToFit,h=d===void 0?!1:d,m=t.textAnchor,f=m===void 0?"start":m,v=t.verticalAnchor,p=v===void 0?"end":v,g=t.fill,x=g===void 0?Ok:g,y=Ak(t,Ige),b=j.useMemo(function(){return qge({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:h,style:y.style,width:y.width})},[y.breakAll,y.children,y.maxLines,h,y.style,y.width]),C=y.dx,w=y.dy,N=y.angle,S=y.className,_=y.breakAll,P=Ak(y,$ge);if(!Bn(r)||!Bn(i))return null;var A=r+(we(C)?C:0),E=i+(we(w)?w:0),k;switch(p){case"start":k=mj("calc(".concat(u,")"));break;case"middle":k=mj("calc(".concat((b.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:k=mj("calc(".concat(b.length-1," * -").concat(l,")"));break}var I=[];if(h){var D=b[0].width,U=y.width;I.push("scale(".concat((we(U)?U/D:1)/D,")"))}return N&&I.push("rotate(".concat(N,", ").concat(A,", ").concat(E,")")),I.length&&(P.transform=I.join(" ")),L.createElement("text",Zw({},Be(P,!0),{x:A,y:E,className:at("recharts-text",S),textAnchor:f,fill:x.includes("url")?Ok:x}),b.map(function(B,K){var T=B.words.join(_?"":" ");return L.createElement("tspan",{x:A,dy:K===0?k:l,key:"".concat(T,"-").concat(K)},T)}))};function Ao(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Uge(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function I2(e){let t,n,r;e.length!==2?(t=Ao,n=(l,c)=>Ao(e(l),c),r=(l,c)=>e(l)-c):(t=e===Ao||e===Uge?e:Wge,n=e,r=e);function a(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const h=u+d>>>1;n(l[h],c)<0?u=h+1:d=h}while(u<d)}return u}function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const h=u+d>>>1;n(l[h],c)<=0?u=h+1:d=h}while(u<d)}return u}function o(l,c,u=0,d=l.length){const h=a(l,c,u,d-1);return h>u&&r(l[h-1],c)>-r(l[h],c)?h-1:h}return{left:a,center:o,right:i}}function Wge(){return 0}function JF(e){return e===null?NaN:+e}function*Hge(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const Kge=I2(Ao),Df=Kge.right;I2(JF).center;class Dk extends Map{constructor(t,n=Qge){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,a]of t)this.set(r,a)}get(t){return super.get(Mk(this,t))}has(t){return super.has(Mk(this,t))}set(t,n){return super.set(Gge(this,t),n)}delete(t){return super.delete(Yge(this,t))}}function Mk({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Gge({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Yge({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Qge(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Xge(e=Ao){if(e===Ao)return ZF;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function ZF(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Jge=Math.sqrt(50),Zge=Math.sqrt(10),eve=Math.sqrt(2);function pv(e,t,n){const r=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(r)),i=r/Math.pow(10,a),o=i>=Jge?10:i>=Zge?5:i>=eve?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=n&&n<2?pv(e,t,n*2):[l,c,u]}function eN(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[a,i,o]=r?pv(t,e,n):pv(e,t,n);if(!(i>=a))return[];const l=i-a+1,c=new Array(l);if(r)if(o<0)for(let u=0;u<l;++u)c[u]=(i-u)/-o;else for(let u=0;u<l;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function tN(e,t,n){return t=+t,e=+e,n=+n,pv(e,t,n)[2]}function nN(e,t,n){t=+t,e=+e,n=+n;const r=t<e,a=r?tN(t,e,n):tN(e,t,n);return(r?-1:1)*(a<0?1/-a:a)}function Ik(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function $k(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function e5(e,t,n=0,r=1/0,a){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(a=a===void 0?ZF:Xge(a);r>n;){if(r-n>600){const c=r-n+1,u=t-n+1,d=Math.log(c),h=.5*Math.exp(2*d/3),m=.5*Math.sqrt(d*h*(c-h)/c)*(u-c/2<0?-1:1),f=Math.max(n,Math.floor(t-u*h/c+m)),v=Math.min(r,Math.floor(t+(c-u)*h/c+m));e5(e,t,f,v,a)}const i=e[t];let o=n,l=r;for(ph(e,n,t),a(e[r],i)>0&&ph(e,n,r);o<l;){for(ph(e,o,l),++o,--l;a(e[o],i)<0;)++o;for(;a(e[l],i)>0;)--l}a(e[n],i)===0?ph(e,n,l):(++l,ph(e,l,r)),l<=t&&(n=l+1),t<=l&&(r=l-1)}return e}function ph(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function tve(e,t,n){if(e=Float64Array.from(Hge(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return $k(e);if(t>=1)return Ik(e);var r,a=(r-1)*t,i=Math.floor(a),o=Ik(e5(e,i).subarray(0,i+1)),l=$k(e.subarray(i+1));return o+(l-o)*(a-i)}}function nve(e,t,n=JF){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,a=(r-1)*t,i=Math.floor(a),o=+n(e[i],i,e),l=+n(e[i+1],i+1,e);return o+(l-o)*(a-i)}}function rve(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=Math.max(0,Math.ceil((t-e)/n))|0,i=new Array(a);++r<a;)i[r]=e+r*n;return i}function Rs(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Mi(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const rN=Symbol("implicit");function $2(){var e=new Dk,t=[],n=[],r=rN;function a(i){let o=e.get(i);if(o===void 0){if(r!==rN)return r;e.set(i,o=t.push(i)-1)}return n[o%n.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new Dk;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(n=Array.from(i),a):n.slice()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return $2(t,n).unknown(r)},Rs.apply(a,arguments),a}function Mm(){var e=$2().unknown(void 0),t=e.domain,n=e.range,r=0,a=1,i,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function h(){var m=t().length,f=a<r,v=f?a:r,p=f?r:a;i=(p-v)/Math.max(1,m-c+u*2),l&&(i=Math.floor(i)),v+=(p-v-i*(m-c))*d,o=i*(1-c),l&&(v=Math.round(v),o=Math.round(o));var g=rve(m).map(function(x){return v+i*x});return n(f?g.reverse():g)}return e.domain=function(m){return arguments.length?(t(m),h()):t()},e.range=function(m){return arguments.length?([r,a]=m,r=+r,a=+a,h()):[r,a]},e.rangeRound=function(m){return[r,a]=m,r=+r,a=+a,l=!0,h()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(m){return arguments.length?(l=!!m,h()):l},e.padding=function(m){return arguments.length?(c=Math.min(1,u=+m),h()):c},e.paddingInner=function(m){return arguments.length?(c=Math.min(1,m),h()):c},e.paddingOuter=function(m){return arguments.length?(u=+m,h()):u},e.align=function(m){return arguments.length?(d=Math.max(0,Math.min(1,m)),h()):d},e.copy=function(){return Mm(t(),[r,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},Rs.apply(h(),arguments)}function t5(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return t5(t())},e}function Kh(){return t5(Mm.apply(null,arguments).paddingInner(1))}function R2(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function n5(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Mf(){}var Im=.7,gv=1/Im,hu="\\s*([+-]?\\d+)\\s*",$m="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sve=/^#([0-9a-f]{3,8})$/,ave=new RegExp(`^rgb\\(${hu},${hu},${hu}\\)$`),ive=new RegExp(`^rgb\\(${Fa},${Fa},${Fa}\\)$`),ove=new RegExp(`^rgba\\(${hu},${hu},${hu},${$m}\\)$`),lve=new RegExp(`^rgba\\(${Fa},${Fa},${Fa},${$m}\\)$`),cve=new RegExp(`^hsl\\(${$m},${Fa},${Fa}\\)$`),uve=new RegExp(`^hsla\\(${$m},${Fa},${Fa},${$m}\\)$`),Rk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};R2(Mf,Rm,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Lk,formatHex:Lk,formatHex8:dve,formatHsl:hve,formatRgb:Fk,toString:Fk});function Lk(){return this.rgb().formatHex()}function dve(){return this.rgb().formatHex8()}function hve(){return r5(this).formatHsl()}function Fk(){return this.rgb().formatRgb()}function Rm(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=sve.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Bk(t):n===3?new Wr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Dp(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Dp(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ave.exec(e))?new Wr(t[1],t[2],t[3],1):(t=ive.exec(e))?new Wr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ove.exec(e))?Dp(t[1],t[2],t[3],t[4]):(t=lve.exec(e))?Dp(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=cve.exec(e))?qk(t[1],t[2]/100,t[3]/100,1):(t=uve.exec(e))?qk(t[1],t[2]/100,t[3]/100,t[4]):Rk.hasOwnProperty(e)?Bk(Rk[e]):e==="transparent"?new Wr(NaN,NaN,NaN,0):null}function Bk(e){return new Wr(e>>16&255,e>>8&255,e&255,1)}function Dp(e,t,n,r){return r<=0&&(e=t=n=NaN),new Wr(e,t,n,r)}function mve(e){return e instanceof Mf||(e=Rm(e)),e?(e=e.rgb(),new Wr(e.r,e.g,e.b,e.opacity)):new Wr}function sN(e,t,n,r){return arguments.length===1?mve(e):new Wr(e,t,n,r??1)}function Wr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}R2(Wr,sN,n5(Mf,{brighter(e){return e=e==null?gv:Math.pow(gv,e),new Wr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Im:Math.pow(Im,e),new Wr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Wr(Dl(this.r),Dl(this.g),Dl(this.b),vv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zk,formatHex:zk,formatHex8:fve,formatRgb:Vk,toString:Vk}));function zk(){return`#${xl(this.r)}${xl(this.g)}${xl(this.b)}`}function fve(){return`#${xl(this.r)}${xl(this.g)}${xl(this.b)}${xl((isNaN(this.opacity)?1:this.opacity)*255)}`}function Vk(){const e=vv(this.opacity);return`${e===1?"rgb(":"rgba("}${Dl(this.r)}, ${Dl(this.g)}, ${Dl(this.b)}${e===1?")":`, ${e})`}`}function vv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Dl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function xl(e){return e=Dl(e),(e<16?"0":"")+e.toString(16)}function qk(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ea(e,t,n,r)}function r5(e){if(e instanceof ea)return new ea(e.h,e.s,e.l,e.opacity);if(e instanceof Mf||(e=Rm(e)),!e)return new ea;if(e instanceof ea)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,l=i-a,c=(i+a)/2;return l?(t===i?o=(n-r)/l+(n<r)*6:n===i?o=(r-t)/l+2:o=(t-n)/l+4,l/=c<.5?i+a:2-i-a,o*=60):l=c>0&&c<1?0:o,new ea(o,l,c,e.opacity)}function pve(e,t,n,r){return arguments.length===1?r5(e):new ea(e,t,n,r??1)}function ea(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}R2(ea,pve,n5(Mf,{brighter(e){return e=e==null?gv:Math.pow(gv,e),new ea(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Im:Math.pow(Im,e),new ea(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new Wr(fj(e>=240?e-240:e+120,a,r),fj(e,a,r),fj(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new ea(Uk(this.h),Mp(this.s),Mp(this.l),vv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=vv(this.opacity);return`${e===1?"hsl(":"hsla("}${Uk(this.h)}, ${Mp(this.s)*100}%, ${Mp(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Uk(e){return e=(e||0)%360,e<0?e+360:e}function Mp(e){return Math.max(0,Math.min(1,e||0))}function fj(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const L2=e=>()=>e;function gve(e,t){return function(n){return e+n*t}}function vve(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function xve(e){return(e=+e)==1?s5:function(t,n){return n-t?vve(t,n,e):L2(isNaN(t)?n:t)}}function s5(e,t){var n=t-e;return n?gve(e,n):L2(isNaN(e)?t:e)}const Wk=function e(t){var n=xve(t);function r(a,i){var o=n((a=sN(a)).r,(i=sN(i)).r),l=n(a.g,i.g),c=n(a.b,i.b),u=s5(a.opacity,i.opacity);return function(d){return a.r=o(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return r.gamma=e,r}(1);function yve(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),a;return function(i){for(a=0;a<n;++a)r[a]=e[a]*(1-i)+t[a]*i;return r}}function jve(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function bve(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,a=new Array(r),i=new Array(n),o;for(o=0;o<r;++o)a[o]=Kd(e[o],t[o]);for(;o<n;++o)i[o]=t[o];return function(l){for(o=0;o<r;++o)i[o]=a[o](l);return i}}function wve(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function xv(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Nve(e,t){var n={},r={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=Kd(e[a],t[a]):r[a]=t[a];return function(i){for(a in n)r[a]=n[a](i);return r}}var aN=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pj=new RegExp(aN.source,"g");function Sve(e){return function(){return e}}function Cve(e){return function(t){return e(t)+""}}function _ve(e,t){var n=aN.lastIndex=pj.lastIndex=0,r,a,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(r=aN.exec(e))&&(a=pj.exec(t));)(i=a.index)>n&&(i=t.slice(n,i),l[o]?l[o]+=i:l[++o]=i),(r=r[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:xv(r,a)})),n=pj.lastIndex;return n<t.length&&(i=t.slice(n),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?Cve(c[0].x):Sve(t):(t=c.length,function(u){for(var d=0,h;d<t;++d)l[(h=c[d]).i]=h.x(u);return l.join("")})}function Kd(e,t){var n=typeof t,r;return t==null||n==="boolean"?L2(t):(n==="number"?xv:n==="string"?(r=Rm(t))?(t=r,Wk):_ve:t instanceof Rm?Wk:t instanceof Date?wve:jve(t)?yve:Array.isArray(t)?bve:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Nve:xv)(e,t)}function F2(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Pve(e,t){t===void 0&&(t=e,e=Kd);for(var n=0,r=t.length-1,a=t[0],i=new Array(r<0?0:r);n<r;)i[n]=e(a,a=t[++n]);return function(o){var l=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return i[l](o-l)}}function Ave(e){return function(){return e}}function yv(e){return+e}var Hk=[0,1];function kr(e){return e}function iN(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Ave(isNaN(t)?NaN:.5)}function kve(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Tve(e,t,n){var r=e[0],a=e[1],i=t[0],o=t[1];return a<r?(r=iN(a,r),i=n(o,i)):(r=iN(r,a),i=n(i,o)),function(l){return i(r(l))}}function Eve(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),i=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)a[o]=iN(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(l){var c=Df(e,l,1,r)-1;return i[c](a[c](l))}}function If(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Ny(){var e=Hk,t=Hk,n=Kd,r,a,i,o=kr,l,c,u;function d(){var m=Math.min(e.length,t.length);return o!==kr&&(o=kve(e[0],e[m-1])),l=m>2?Eve:Tve,c=u=null,h}function h(m){return m==null||isNaN(m=+m)?i:(c||(c=l(e.map(r),t,n)))(r(o(m)))}return h.invert=function(m){return o(a((u||(u=l(t,e.map(r),xv)))(m)))},h.domain=function(m){return arguments.length?(e=Array.from(m,yv),d()):e.slice()},h.range=function(m){return arguments.length?(t=Array.from(m),d()):t.slice()},h.rangeRound=function(m){return t=Array.from(m),n=F2,d()},h.clamp=function(m){return arguments.length?(o=m?!0:kr,d()):o!==kr},h.interpolate=function(m){return arguments.length?(n=m,d()):n},h.unknown=function(m){return arguments.length?(i=m,h):i},function(m,f){return r=m,a=f,d()}}function B2(){return Ny()(kr,kr)}function Ove(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function jv(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Yu(e){return e=jv(Math.abs(e)),e?e[1]:NaN}function Dve(e,t){return function(n,r){for(var a=n.length,i=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),i.push(n.substring(a-=l,a+l)),!((c+=l+1)>r));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function Mve(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Ive=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Lm(e){if(!(t=Ive.exec(e)))throw new Error("invalid format: "+e);var t;return new z2({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Lm.prototype=z2.prototype;function z2(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}z2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function $ve(e){e:for(var t=e.length,n=1,r=-1,a;n<t;++n)switch(e[n]){case".":r=a=n;break;case"0":r===0&&(r=n),a=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(a+1):e}var a5;function Rve(e,t){var n=jv(e,t);if(!n)return e+"";var r=n[0],a=n[1],i=a-(a5=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+jv(e,Math.max(0,t+i-1))[0]}function Kk(e,t){var n=jv(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const Gk={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Ove,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Kk(e*100,t),r:Kk,s:Rve,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Yk(e){return e}var Qk=Array.prototype.map,Xk=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Lve(e){var t=e.grouping===void 0||e.thousands===void 0?Yk:Dve(Qk.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?Yk:Mve(Qk.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(h){h=Lm(h);var m=h.fill,f=h.align,v=h.sign,p=h.symbol,g=h.zero,x=h.width,y=h.comma,b=h.precision,C=h.trim,w=h.type;w==="n"?(y=!0,w="g"):Gk[w]||(b===void 0&&(b=12),C=!0,w="g"),(g||m==="0"&&f==="=")&&(g=!0,m="0",f="=");var N=p==="$"?n:p==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",S=p==="$"?r:/[%p]/.test(w)?o:"",_=Gk[w],P=/[defgprs%]/.test(w);b=b===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function A(E){var k=N,I=S,D,U,B;if(w==="c")I=_(E)+I,E="";else{E=+E;var K=E<0||1/E<0;if(E=isNaN(E)?c:_(Math.abs(E),b),C&&(E=$ve(E)),K&&+E==0&&v!=="+"&&(K=!1),k=(K?v==="("?v:l:v==="-"||v==="("?"":v)+k,I=(w==="s"?Xk[8+a5/3]:"")+I+(K&&v==="("?")":""),P){for(D=-1,U=E.length;++D<U;)if(B=E.charCodeAt(D),48>B||B>57){I=(B===46?a+E.slice(D+1):E.slice(D))+I,E=E.slice(0,D);break}}}y&&!g&&(E=t(E,1/0));var T=k.length+E.length+I.length,$=T<x?new Array(x-T+1).join(m):"";switch(y&&g&&(E=t($+E,$.length?x-I.length:1/0),$=""),f){case"<":E=k+E+I+$;break;case"=":E=k+$+E+I;break;case"^":E=$.slice(0,T=$.length>>1)+k+E+I+$.slice(T);break;default:E=$+k+E+I;break}return i(E)}return A.toString=function(){return h+""},A}function d(h,m){var f=u((h=Lm(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(Yu(m)/3)))*3,p=Math.pow(10,-v),g=Xk[8+v/3];return function(x){return f(p*x)+g}}return{format:u,formatPrefix:d}}var Ip,V2,i5;Fve({thousands:",",grouping:[3],currency:["$",""]});function Fve(e){return Ip=Lve(e),V2=Ip.format,i5=Ip.formatPrefix,Ip}function Bve(e){return Math.max(0,-Yu(Math.abs(e)))}function zve(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Yu(t)/3)))*3-Yu(Math.abs(e)))}function Vve(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Yu(t)-Yu(e))+1}function o5(e,t,n,r){var a=nN(e,t,n),i;switch(r=Lm(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(i=zve(a,o))&&(r.precision=i),i5(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=Vve(a,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=Bve(a))&&(r.precision=i-(r.type==="%")*2);break}}return V2(r)}function Yo(e){var t=e.domain;return e.ticks=function(n){var r=t();return eN(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var a=t();return o5(a[0],a[a.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),a=0,i=r.length-1,o=r[a],l=r[i],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=a,a=i,i=u);d-- >0;){if(u=tN(o,l,n),u===c)return r[a]=o,r[i]=l,t(r);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function bv(){var e=B2();return e.copy=function(){return If(e,bv())},Rs.apply(e,arguments),Yo(e)}function l5(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,yv),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return l5(e).unknown(t)},e=arguments.length?Array.from(e,yv):[0,1],Yo(n)}function c5(e,t){e=e.slice();var n=0,r=e.length-1,a=e[n],i=e[r],o;return i<a&&(o=n,n=r,r=o,o=a,a=i,i=o),e[n]=t.floor(a),e[r]=t.ceil(i),e}function Jk(e){return Math.log(e)}function Zk(e){return Math.exp(e)}function qve(e){return-Math.log(-e)}function Uve(e){return-Math.exp(-e)}function Wve(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Hve(e){return e===10?Wve:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Kve(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function eT(e){return(t,n)=>-e(-t,n)}function q2(e){const t=e(Jk,Zk),n=t.domain;let r=10,a,i;function o(){return a=Kve(r),i=Hve(r),n()[0]<0?(a=eT(a),i=eT(i),e(qve,Uve)):e(Jk,Zk),t}return t.base=function(l){return arguments.length?(r=+l,o()):r},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const c=n();let u=c[0],d=c[c.length-1];const h=d<u;h&&([u,d]=[d,u]);let m=a(u),f=a(d),v,p;const g=l==null?10:+l;let x=[];if(!(r%1)&&f-m<g){if(m=Math.floor(m),f=Math.ceil(f),u>0){for(;m<=f;++m)for(v=1;v<r;++v)if(p=m<0?v/i(-m):v*i(m),!(p<u)){if(p>d)break;x.push(p)}}else for(;m<=f;++m)for(v=r-1;v>=1;--v)if(p=m>0?v/i(-m):v*i(m),!(p<u)){if(p>d)break;x.push(p)}x.length*2<g&&(x=eN(u,d,g))}else x=eN(m,f,Math.min(f-m,g)).map(i);return h?x.reverse():x},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=Lm(c)).precision==null&&(c.trim=!0),c=V2(c)),l===1/0)return c;const u=Math.max(1,r*l/t.ticks().length);return d=>{let h=d/i(Math.round(a(d)));return h*r<r-.5&&(h*=r),h<=u?c(d):""}},t.nice=()=>n(c5(n(),{floor:l=>i(Math.floor(a(l))),ceil:l=>i(Math.ceil(a(l)))})),t}function u5(){const e=q2(Ny()).domain([1,10]);return e.copy=()=>If(e,u5()).base(e.base()),Rs.apply(e,arguments),e}function tT(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function nT(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function U2(e){var t=1,n=e(tT(t),nT(t));return n.constant=function(r){return arguments.length?e(tT(t=+r),nT(t)):t},Yo(n)}function d5(){var e=U2(Ny());return e.copy=function(){return If(e,d5()).constant(e.constant())},Rs.apply(e,arguments)}function rT(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Gve(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Yve(e){return e<0?-e*e:e*e}function W2(e){var t=e(kr,kr),n=1;function r(){return n===1?e(kr,kr):n===.5?e(Gve,Yve):e(rT(n),rT(1/n))}return t.exponent=function(a){return arguments.length?(n=+a,r()):n},Yo(t)}function H2(){var e=W2(Ny());return e.copy=function(){return If(e,H2()).exponent(e.exponent())},Rs.apply(e,arguments),e}function Qve(){return H2.apply(null,arguments).exponent(.5)}function sT(e){return Math.sign(e)*e*e}function Xve(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function h5(){var e=B2(),t=[0,1],n=!1,r;function a(i){var o=Xve(e(i));return isNaN(o)?r:n?Math.round(o):o}return a.invert=function(i){return e.invert(sT(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,yv)).map(sT)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(n=!!i,a):n},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return h5(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Rs.apply(a,arguments),Yo(a)}function m5(){var e=[],t=[],n=[],r;function a(){var o=0,l=Math.max(1,t.length);for(n=new Array(l-1);++o<l;)n[o-1]=nve(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?r:t[Df(n,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Ao),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.quantiles=function(){return n.slice()},i.copy=function(){return m5().domain(e).range(t).unknown(r)},Rs.apply(i,arguments)}function f5(){var e=0,t=1,n=1,r=[.5],a=[0,1],i;function o(c){return c!=null&&c<=c?a[Df(r,c,0,n)]:i}function l(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*t-(c-n)*e)/(n+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(n=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return r.slice()},o.copy=function(){return f5().domain([e,t]).range(a).unknown(i)},Rs.apply(Yo(o),arguments)}function p5(){var e=[.5],t=[0,1],n,r=1;function a(i){return i!=null&&i<=i?t[Df(e,i,0,r)]:n}return a.domain=function(i){return arguments.length?(e=Array.from(i),r=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),r=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return p5().domain(e).range(t).unknown(n)},Rs.apply(a,arguments)}const gj=new Date,vj=new Date;function Vn(e,t,n,r){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),l=a.ceil(i);return i-o<l-i?o:l},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,l)=>{const c=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return c},a.filter=i=>Vn(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),n&&(a.count=(i,o)=>(gj.setTime(+i),vj.setTime(+o),e(gj),e(vj),Math.floor(n(gj,vj))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(r?o=>r(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const wv=Vn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);wv.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Vn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):wv);wv.range;const ui=1e3,As=ui*60,di=As*60,Pi=di*24,K2=Pi*7,aT=Pi*30,xj=Pi*365,yl=Vn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ui)},(e,t)=>(t-e)/ui,e=>e.getUTCSeconds());yl.range;const G2=Vn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ui)},(e,t)=>{e.setTime(+e+t*As)},(e,t)=>(t-e)/As,e=>e.getMinutes());G2.range;const Y2=Vn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*As)},(e,t)=>(t-e)/As,e=>e.getUTCMinutes());Y2.range;const Q2=Vn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ui-e.getMinutes()*As)},(e,t)=>{e.setTime(+e+t*di)},(e,t)=>(t-e)/di,e=>e.getHours());Q2.range;const X2=Vn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*di)},(e,t)=>(t-e)/di,e=>e.getUTCHours());X2.range;const $f=Vn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*As)/Pi,e=>e.getDate()-1);$f.range;const Sy=Vn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Pi,e=>e.getUTCDate()-1);Sy.range;const g5=Vn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Pi,e=>Math.floor(e/Pi));g5.range;function mc(e){return Vn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*As)/K2)}const Cy=mc(0),Nv=mc(1),Jve=mc(2),Zve=mc(3),Qu=mc(4),exe=mc(5),txe=mc(6);Cy.range;Nv.range;Jve.range;Zve.range;Qu.range;exe.range;txe.range;function fc(e){return Vn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/K2)}const _y=fc(0),Sv=fc(1),nxe=fc(2),rxe=fc(3),Xu=fc(4),sxe=fc(5),axe=fc(6);_y.range;Sv.range;nxe.range;rxe.range;Xu.range;sxe.range;axe.range;const J2=Vn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());J2.range;const Z2=Vn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Z2.range;const Ai=Vn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ai.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Vn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Ai.range;const ki=Vn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ki.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Vn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});ki.range;function v5(e,t,n,r,a,i){const o=[[yl,1,ui],[yl,5,5*ui],[yl,15,15*ui],[yl,30,30*ui],[i,1,As],[i,5,5*As],[i,15,15*As],[i,30,30*As],[a,1,di],[a,3,3*di],[a,6,6*di],[a,12,12*di],[r,1,Pi],[r,2,2*Pi],[n,1,K2],[t,1,aT],[t,3,3*aT],[e,1,xj]];function l(u,d,h){const m=d<u;m&&([u,d]=[d,u]);const f=h&&typeof h.range=="function"?h:c(u,d,h),v=f?f.range(u,+d+1):[];return m?v.reverse():v}function c(u,d,h){const m=Math.abs(d-u)/h,f=I2(([,,g])=>g).right(o,m);if(f===o.length)return e.every(nN(u/xj,d/xj,h));if(f===0)return wv.every(Math.max(nN(u,d,h),1));const[v,p]=o[m/o[f-1][2]<o[f][2]/m?f-1:f];return v.every(p)}return[l,c]}const[ixe,oxe]=v5(ki,Z2,_y,g5,X2,Y2),[lxe,cxe]=v5(Ai,J2,Cy,$f,Q2,G2);function yj(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function jj(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function gh(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function uxe(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=vh(a),d=xh(a),h=vh(i),m=xh(i),f=vh(o),v=xh(o),p=vh(l),g=xh(l),x=vh(c),y=xh(c),b={a:K,A:T,b:$,B:G,c:null,d:dT,e:dT,f:Dxe,g:qxe,G:Wxe,H:Txe,I:Exe,j:Oxe,L:x5,m:Mxe,M:Ixe,p:Q,q:ne,Q:fT,s:pT,S:$xe,u:Rxe,U:Lxe,V:Fxe,w:Bxe,W:zxe,x:null,X:null,y:Vxe,Y:Uxe,Z:Hxe,"%":mT},C={a:oe,A:M,b:ue,B:ve,c:null,d:hT,e:hT,f:Qxe,g:iye,G:lye,H:Kxe,I:Gxe,j:Yxe,L:j5,m:Xxe,M:Jxe,p:ce,q:re,Q:fT,s:pT,S:Zxe,u:eye,U:tye,V:nye,w:rye,W:sye,x:null,X:null,y:aye,Y:oye,Z:cye,"%":mT},w={a:A,A:E,b:k,B:I,c:D,d:cT,e:cT,f:_xe,g:lT,G:oT,H:uT,I:uT,j:wxe,L:Cxe,m:bxe,M:Nxe,p:P,q:jxe,Q:Axe,s:kxe,S:Sxe,u:pxe,U:gxe,V:vxe,w:fxe,W:xxe,x:U,X:B,y:lT,Y:oT,Z:yxe,"%":Pxe};b.x=N(n,b),b.X=N(r,b),b.c=N(t,b),C.x=N(n,C),C.X=N(r,C),C.c=N(t,C);function N(V,le){return function(W){var X=[],pe=-1,fe=0,Re=V.length,qe,ot,tt;for(W instanceof Date||(W=new Date(+W));++pe<Re;)V.charCodeAt(pe)===37&&(X.push(V.slice(fe,pe)),(ot=iT[qe=V.charAt(++pe)])!=null?qe=V.charAt(++pe):ot=qe==="e"?" ":"0",(tt=le[qe])&&(qe=tt(W,ot)),X.push(qe),fe=pe+1);return X.push(V.slice(fe,pe)),X.join("")}}function S(V,le){return function(W){var X=gh(1900,void 0,1),pe=_(X,V,W+="",0),fe,Re;if(pe!=W.length)return null;if("Q"in X)return new Date(X.Q);if("s"in X)return new Date(X.s*1e3+("L"in X?X.L:0));if(le&&!("Z"in X)&&(X.Z=0),"p"in X&&(X.H=X.H%12+X.p*12),X.m===void 0&&(X.m="q"in X?X.q:0),"V"in X){if(X.V<1||X.V>53)return null;"w"in X||(X.w=1),"Z"in X?(fe=jj(gh(X.y,0,1)),Re=fe.getUTCDay(),fe=Re>4||Re===0?Sv.ceil(fe):Sv(fe),fe=Sy.offset(fe,(X.V-1)*7),X.y=fe.getUTCFullYear(),X.m=fe.getUTCMonth(),X.d=fe.getUTCDate()+(X.w+6)%7):(fe=yj(gh(X.y,0,1)),Re=fe.getDay(),fe=Re>4||Re===0?Nv.ceil(fe):Nv(fe),fe=$f.offset(fe,(X.V-1)*7),X.y=fe.getFullYear(),X.m=fe.getMonth(),X.d=fe.getDate()+(X.w+6)%7)}else("W"in X||"U"in X)&&("w"in X||(X.w="u"in X?X.u%7:"W"in X?1:0),Re="Z"in X?jj(gh(X.y,0,1)).getUTCDay():yj(gh(X.y,0,1)).getDay(),X.m=0,X.d="W"in X?(X.w+6)%7+X.W*7-(Re+5)%7:X.w+X.U*7-(Re+6)%7);return"Z"in X?(X.H+=X.Z/100|0,X.M+=X.Z%100,jj(X)):yj(X)}}function _(V,le,W,X){for(var pe=0,fe=le.length,Re=W.length,qe,ot;pe<fe;){if(X>=Re)return-1;if(qe=le.charCodeAt(pe++),qe===37){if(qe=le.charAt(pe++),ot=w[qe in iT?le.charAt(pe++):qe],!ot||(X=ot(V,W,X))<0)return-1}else if(qe!=W.charCodeAt(X++))return-1}return X}function P(V,le,W){var X=u.exec(le.slice(W));return X?(V.p=d.get(X[0].toLowerCase()),W+X[0].length):-1}function A(V,le,W){var X=f.exec(le.slice(W));return X?(V.w=v.get(X[0].toLowerCase()),W+X[0].length):-1}function E(V,le,W){var X=h.exec(le.slice(W));return X?(V.w=m.get(X[0].toLowerCase()),W+X[0].length):-1}function k(V,le,W){var X=x.exec(le.slice(W));return X?(V.m=y.get(X[0].toLowerCase()),W+X[0].length):-1}function I(V,le,W){var X=p.exec(le.slice(W));return X?(V.m=g.get(X[0].toLowerCase()),W+X[0].length):-1}function D(V,le,W){return _(V,t,le,W)}function U(V,le,W){return _(V,n,le,W)}function B(V,le,W){return _(V,r,le,W)}function K(V){return o[V.getDay()]}function T(V){return i[V.getDay()]}function $(V){return c[V.getMonth()]}function G(V){return l[V.getMonth()]}function Q(V){return a[+(V.getHours()>=12)]}function ne(V){return 1+~~(V.getMonth()/3)}function oe(V){return o[V.getUTCDay()]}function M(V){return i[V.getUTCDay()]}function ue(V){return c[V.getUTCMonth()]}function ve(V){return l[V.getUTCMonth()]}function ce(V){return a[+(V.getUTCHours()>=12)]}function re(V){return 1+~~(V.getUTCMonth()/3)}return{format:function(V){var le=N(V+="",b);return le.toString=function(){return V},le},parse:function(V){var le=S(V+="",!1);return le.toString=function(){return V},le},utcFormat:function(V){var le=N(V+="",C);return le.toString=function(){return V},le},utcParse:function(V){var le=S(V+="",!0);return le.toString=function(){return V},le}}}var iT={"-":"",_:" ",0:"0"},er=/^\s*\d+/,dxe=/^%/,hxe=/[\\^$*+?|[\]().{}]/g;function St(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",i=a.length;return r+(i<n?new Array(n-i+1).join(t)+a:a)}function mxe(e){return e.replace(hxe,"\\$&")}function vh(e){return new RegExp("^(?:"+e.map(mxe).join("|")+")","i")}function xh(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function fxe(e,t,n){var r=er.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function pxe(e,t,n){var r=er.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function gxe(e,t,n){var r=er.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function vxe(e,t,n){var r=er.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function xxe(e,t,n){var r=er.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function oT(e,t,n){var r=er.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function lT(e,t,n){var r=er.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function yxe(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function jxe(e,t,n){var r=er.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function bxe(e,t,n){var r=er.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function cT(e,t,n){var r=er.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function wxe(e,t,n){var r=er.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function uT(e,t,n){var r=er.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Nxe(e,t,n){var r=er.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Sxe(e,t,n){var r=er.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Cxe(e,t,n){var r=er.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function _xe(e,t,n){var r=er.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Pxe(e,t,n){var r=dxe.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Axe(e,t,n){var r=er.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function kxe(e,t,n){var r=er.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function dT(e,t){return St(e.getDate(),t,2)}function Txe(e,t){return St(e.getHours(),t,2)}function Exe(e,t){return St(e.getHours()%12||12,t,2)}function Oxe(e,t){return St(1+$f.count(Ai(e),e),t,3)}function x5(e,t){return St(e.getMilliseconds(),t,3)}function Dxe(e,t){return x5(e,t)+"000"}function Mxe(e,t){return St(e.getMonth()+1,t,2)}function Ixe(e,t){return St(e.getMinutes(),t,2)}function $xe(e,t){return St(e.getSeconds(),t,2)}function Rxe(e){var t=e.getDay();return t===0?7:t}function Lxe(e,t){return St(Cy.count(Ai(e)-1,e),t,2)}function y5(e){var t=e.getDay();return t>=4||t===0?Qu(e):Qu.ceil(e)}function Fxe(e,t){return e=y5(e),St(Qu.count(Ai(e),e)+(Ai(e).getDay()===4),t,2)}function Bxe(e){return e.getDay()}function zxe(e,t){return St(Nv.count(Ai(e)-1,e),t,2)}function Vxe(e,t){return St(e.getFullYear()%100,t,2)}function qxe(e,t){return e=y5(e),St(e.getFullYear()%100,t,2)}function Uxe(e,t){return St(e.getFullYear()%1e4,t,4)}function Wxe(e,t){var n=e.getDay();return e=n>=4||n===0?Qu(e):Qu.ceil(e),St(e.getFullYear()%1e4,t,4)}function Hxe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+St(t/60|0,"0",2)+St(t%60,"0",2)}function hT(e,t){return St(e.getUTCDate(),t,2)}function Kxe(e,t){return St(e.getUTCHours(),t,2)}function Gxe(e,t){return St(e.getUTCHours()%12||12,t,2)}function Yxe(e,t){return St(1+Sy.count(ki(e),e),t,3)}function j5(e,t){return St(e.getUTCMilliseconds(),t,3)}function Qxe(e,t){return j5(e,t)+"000"}function Xxe(e,t){return St(e.getUTCMonth()+1,t,2)}function Jxe(e,t){return St(e.getUTCMinutes(),t,2)}function Zxe(e,t){return St(e.getUTCSeconds(),t,2)}function eye(e){var t=e.getUTCDay();return t===0?7:t}function tye(e,t){return St(_y.count(ki(e)-1,e),t,2)}function b5(e){var t=e.getUTCDay();return t>=4||t===0?Xu(e):Xu.ceil(e)}function nye(e,t){return e=b5(e),St(Xu.count(ki(e),e)+(ki(e).getUTCDay()===4),t,2)}function rye(e){return e.getUTCDay()}function sye(e,t){return St(Sv.count(ki(e)-1,e),t,2)}function aye(e,t){return St(e.getUTCFullYear()%100,t,2)}function iye(e,t){return e=b5(e),St(e.getUTCFullYear()%100,t,2)}function oye(e,t){return St(e.getUTCFullYear()%1e4,t,4)}function lye(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Xu(e):Xu.ceil(e),St(e.getUTCFullYear()%1e4,t,4)}function cye(){return"+0000"}function mT(){return"%"}function fT(e){return+e}function pT(e){return Math.floor(+e/1e3)}var Tc,w5,N5;uye({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function uye(e){return Tc=uxe(e),w5=Tc.format,Tc.parse,N5=Tc.utcFormat,Tc.utcParse,Tc}function dye(e){return new Date(e)}function hye(e){return e instanceof Date?+e:+new Date(+e)}function eC(e,t,n,r,a,i,o,l,c,u){var d=B2(),h=d.invert,m=d.domain,f=u(".%L"),v=u(":%S"),p=u("%I:%M"),g=u("%I %p"),x=u("%a %d"),y=u("%b %d"),b=u("%B"),C=u("%Y");function w(N){return(c(N)<N?f:l(N)<N?v:o(N)<N?p:i(N)<N?g:r(N)<N?a(N)<N?x:y:n(N)<N?b:C)(N)}return d.invert=function(N){return new Date(h(N))},d.domain=function(N){return arguments.length?m(Array.from(N,hye)):m().map(dye)},d.ticks=function(N){var S=m();return e(S[0],S[S.length-1],N??10)},d.tickFormat=function(N,S){return S==null?w:u(S)},d.nice=function(N){var S=m();return(!N||typeof N.range!="function")&&(N=t(S[0],S[S.length-1],N??10)),N?m(c5(S,N)):d},d.copy=function(){return If(d,eC(e,t,n,r,a,i,o,l,c,u))},d}function mye(){return Rs.apply(eC(lxe,cxe,Ai,J2,Cy,$f,Q2,G2,yl,w5).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function fye(){return Rs.apply(eC(ixe,oxe,ki,Z2,_y,Sy,X2,Y2,yl,N5).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Py(){var e=0,t=1,n,r,a,i,o=kr,l=!1,c;function u(h){return h==null||isNaN(h=+h)?c:o(a===0?.5:(h=(i(h)-n)*a,l?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([e,t]=h,n=i(e=+e),r=i(t=+t),a=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(h){return arguments.length?(l=!!h,u):l},u.interpolator=function(h){return arguments.length?(o=h,u):o};function d(h){return function(m){var f,v;return arguments.length?([f,v]=m,o=h(f,v),u):[o(0),o(1)]}}return u.range=d(Kd),u.rangeRound=d(F2),u.unknown=function(h){return arguments.length?(c=h,u):c},function(h){return i=h,n=h(e),r=h(t),a=n===r?0:1/(r-n),u}}function Qo(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function S5(){var e=Yo(Py()(kr));return e.copy=function(){return Qo(e,S5())},Mi.apply(e,arguments)}function C5(){var e=q2(Py()).domain([1,10]);return e.copy=function(){return Qo(e,C5()).base(e.base())},Mi.apply(e,arguments)}function _5(){var e=U2(Py());return e.copy=function(){return Qo(e,_5()).constant(e.constant())},Mi.apply(e,arguments)}function tC(){var e=W2(Py());return e.copy=function(){return Qo(e,tC()).exponent(e.exponent())},Mi.apply(e,arguments)}function pye(){return tC.apply(null,arguments).exponent(.5)}function P5(){var e=[],t=kr;function n(r){if(r!=null&&!isNaN(r=+r))return t((Df(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let a of r)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Ao),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,a)=>t(a/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(a,i)=>tve(e,i/r))},n.copy=function(){return P5(t).domain(e)},Mi.apply(n,arguments)}function Ay(){var e=0,t=.5,n=1,r=1,a,i,o,l,c,u=kr,d,h=!1,m;function f(p){return isNaN(p=+p)?m:(p=.5+((p=+d(p))-i)*(r*p<r*i?l:c),u(h?Math.max(0,Math.min(1,p)):p))}f.domain=function(p){return arguments.length?([e,t,n]=p,a=d(e=+e),i=d(t=+t),o=d(n=+n),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),r=i<a?-1:1,f):[e,t,n]},f.clamp=function(p){return arguments.length?(h=!!p,f):h},f.interpolator=function(p){return arguments.length?(u=p,f):u};function v(p){return function(g){var x,y,b;return arguments.length?([x,y,b]=g,u=Pve(p,[x,y,b]),f):[u(0),u(.5),u(1)]}}return f.range=v(Kd),f.rangeRound=v(F2),f.unknown=function(p){return arguments.length?(m=p,f):m},function(p){return d=p,a=p(e),i=p(t),o=p(n),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),r=i<a?-1:1,f}}function A5(){var e=Yo(Ay()(kr));return e.copy=function(){return Qo(e,A5())},Mi.apply(e,arguments)}function k5(){var e=q2(Ay()).domain([.1,1,10]);return e.copy=function(){return Qo(e,k5()).base(e.base())},Mi.apply(e,arguments)}function T5(){var e=U2(Ay());return e.copy=function(){return Qo(e,T5()).constant(e.constant())},Mi.apply(e,arguments)}function nC(){var e=W2(Ay());return e.copy=function(){return Qo(e,nC()).exponent(e.exponent())},Mi.apply(e,arguments)}function gye(){return nC.apply(null,arguments).exponent(.5)}const gT=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Mm,scaleDiverging:A5,scaleDivergingLog:k5,scaleDivergingPow:nC,scaleDivergingSqrt:gye,scaleDivergingSymlog:T5,scaleIdentity:l5,scaleImplicit:rN,scaleLinear:bv,scaleLog:u5,scaleOrdinal:$2,scalePoint:Kh,scalePow:H2,scaleQuantile:m5,scaleQuantize:f5,scaleRadial:h5,scaleSequential:S5,scaleSequentialLog:C5,scaleSequentialPow:tC,scaleSequentialQuantile:P5,scaleSequentialSqrt:pye,scaleSequentialSymlog:_5,scaleSqrt:Qve,scaleSymlog:d5,scaleThreshold:p5,scaleTime:mye,scaleUtc:fye,tickFormat:o5},Symbol.toStringTag,{value:"Module"}));var vye=Rd;function xye(e,t,n){for(var r=-1,a=e.length;++r<a;){var i=e[r],o=t(i);if(o!=null&&(l===void 0?o===o&&!vye(o):n(o,l)))var l=o,c=i}return c}var ky=xye;function yye(e,t){return e>t}var E5=yye,jye=ky,bye=E5,wye=Wd;function Nye(e){return e&&e.length?jye(e,wye,bye):void 0}var Sye=Nye;const po=Ot(Sye);function Cye(e,t){return e<t}var O5=Cye,_ye=ky,Pye=O5,Aye=Wd;function kye(e){return e&&e.length?_ye(e,Aye,Pye):void 0}var Tye=kye;const Ty=Ot(Tye);var Eye=g2,Oye=Ga,Dye=BF,Mye=Qr;function Iye(e,t){var n=Mye(e)?Eye:Dye;return n(e,Oye(t))}var $ye=Iye,Rye=LF,Lye=$ye;function Fye(e,t){return Rye(Lye(e,t),1)}var Bye=Fye;const zye=Ot(Bye);var Vye=E2;function qye(e,t){return Vye(e,t)}var Uye=qye;const Jl=Ot(Uye);var Gd=1e9,Wye={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},sC,sn=!0,Ds="[DecimalError] ",Ml=Ds+"Invalid argument: ",rC=Ds+"Exponent out of range: ",Yd=Math.floor,cl=Math.pow,Hye=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,os,Un=1e7,en=7,D5=9007199254740991,Cv=Yd(D5/en),$e={};$e.absoluteValue=$e.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};$e.comparedTo=$e.cmp=function(e){var t,n,r,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(r=i.d.length,a=e.d.length,t=0,n=r<a?r:a;t<n;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return r===a?0:r>a^i.s<0?1:-1};$e.decimalPlaces=$e.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*en;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};$e.dividedBy=$e.div=function(e){return gi(this,new this.constructor(e))};$e.dividedToIntegerBy=$e.idiv=function(e){var t=this,n=t.constructor;return qt(gi(t,new n(e),0,1),n.precision)};$e.equals=$e.eq=function(e){return!this.cmp(e)};$e.exponent=function(){return kn(this)};$e.greaterThan=$e.gt=function(e){return this.cmp(e)>0};$e.greaterThanOrEqualTo=$e.gte=function(e){return this.cmp(e)>=0};$e.isInteger=$e.isint=function(){return this.e>this.d.length-2};$e.isNegative=$e.isneg=function(){return this.s<0};$e.isPositive=$e.ispos=function(){return this.s>0};$e.isZero=function(){return this.s===0};$e.lessThan=$e.lt=function(e){return this.cmp(e)<0};$e.lessThanOrEqualTo=$e.lte=function(e){return this.cmp(e)<1};$e.logarithm=$e.log=function(e){var t,n=this,r=n.constructor,a=r.precision,i=a+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(os))throw Error(Ds+"NaN");if(n.s<1)throw Error(Ds+(n.s?"NaN":"-Infinity"));return n.eq(os)?new r(0):(sn=!1,t=gi(Fm(n,i),Fm(e,i),i),sn=!0,qt(t,a))};$e.minus=$e.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?$5(t,e):M5(t,(e.s=-e.s,e))};$e.modulo=$e.mod=function(e){var t,n=this,r=n.constructor,a=r.precision;if(e=new r(e),!e.s)throw Error(Ds+"NaN");return n.s?(sn=!1,t=gi(n,e,0,1).times(e),sn=!0,n.minus(t)):qt(new r(n),a)};$e.naturalExponential=$e.exp=function(){return I5(this)};$e.naturalLogarithm=$e.ln=function(){return Fm(this)};$e.negated=$e.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};$e.plus=$e.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?M5(t,e):$5(t,(e.s=-e.s,e))};$e.precision=$e.sd=function(e){var t,n,r,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Ml+e);if(t=kn(a)+1,r=a.d.length-1,n=r*en+1,r=a.d[r],r){for(;r%10==0;r/=10)n--;for(r=a.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};$e.squareRoot=$e.sqrt=function(){var e,t,n,r,a,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Ds+"NaN")}for(e=kn(l),sn=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=Ta(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Yd((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new c(t)):r=new c(a.toString()),n=c.precision,a=o=n+3;;)if(i=r,r=i.plus(gi(l,i,o+2)).times(.5),Ta(i.d).slice(0,o)===(t=Ta(r.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(qt(i,n+1,0),i.times(i).eq(l)){r=i;break}}else if(t!="9999")break;o+=4}return sn=!0,qt(r,n)};$e.times=$e.mul=function(e){var t,n,r,a,i,o,l,c,u,d=this,h=d.constructor,m=d.d,f=(e=new h(e)).d;if(!d.s||!e.s)return new h(0);for(e.s*=d.s,n=d.e+e.e,c=m.length,u=f.length,c<u&&(i=m,m=f,f=i,o=c,c=u,u=o),i=[],o=c+u,r=o;r--;)i.push(0);for(r=u;--r>=0;){for(t=0,a=c+r;a>r;)l=i[a]+f[r]*m[a-r-1]+t,i[a--]=l%Un|0,t=l/Un|0;i[a]=(i[a]+t)%Un|0}for(;!i[--o];)i.pop();return t?++n:i.shift(),e.d=i,e.e=n,sn?qt(e,h.precision):e};$e.toDecimalPlaces=$e.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(Ua(e,0,Gd),t===void 0?t=r.rounding:Ua(t,0,8),qt(n,e+kn(n)+1,t))};$e.toExponential=function(e,t){var n,r=this,a=r.constructor;return e===void 0?n=Zl(r,!0):(Ua(e,0,Gd),t===void 0?t=a.rounding:Ua(t,0,8),r=qt(new a(r),e+1,t),n=Zl(r,!0,e+1)),n};$e.toFixed=function(e,t){var n,r,a=this,i=a.constructor;return e===void 0?Zl(a):(Ua(e,0,Gd),t===void 0?t=i.rounding:Ua(t,0,8),r=qt(new i(a),e+kn(a)+1,t),n=Zl(r.abs(),!1,e+kn(r)+1),a.isneg()&&!a.isZero()?"-"+n:n)};$e.toInteger=$e.toint=function(){var e=this,t=e.constructor;return qt(new t(e),kn(e)+1,t.rounding)};$e.toNumber=function(){return+this};$e.toPower=$e.pow=function(e){var t,n,r,a,i,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(os);if(l=new c(l),!l.s){if(e.s<1)throw Error(Ds+"Infinity");return l}if(l.eq(os))return l;if(r=c.precision,e.eq(os))return qt(l,r);if(t=e.e,n=e.d.length-1,o=t>=n,i=l.s,o){if((n=d<0?-d:d)<=D5){for(a=new c(os),t=Math.ceil(r/en+4),sn=!1;n%2&&(a=a.times(l),xT(a.d,t)),n=Yd(n/2),n!==0;)l=l.times(l),xT(l.d,t);return sn=!0,e.s<0?new c(os).div(a):qt(a,r)}}else if(i<0)throw Error(Ds+"NaN");return i=i<0&&e.d[Math.max(t,n)]&1?-1:1,l.s=1,sn=!1,a=e.times(Fm(l,r+u)),sn=!0,a=I5(a),a.s=i,a};$e.toPrecision=function(e,t){var n,r,a=this,i=a.constructor;return e===void 0?(n=kn(a),r=Zl(a,n<=i.toExpNeg||n>=i.toExpPos)):(Ua(e,1,Gd),t===void 0?t=i.rounding:Ua(t,0,8),a=qt(new i(a),e,t),n=kn(a),r=Zl(a,e<=n||n<=i.toExpNeg,e)),r};$e.toSignificantDigits=$e.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(Ua(e,1,Gd),t===void 0?t=r.rounding:Ua(t,0,8)),qt(new r(n),e,t)};$e.toString=$e.valueOf=$e.val=$e.toJSON=$e[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=kn(e),n=e.constructor;return Zl(e,t<=n.toExpNeg||t>=n.toExpPos)};function M5(e,t){var n,r,a,i,o,l,c,u,d=e.constructor,h=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),sn?qt(t,h):t;if(c=e.d,u=t.d,o=e.e,a=t.e,c=c.slice(),i=o-a,i){for(i<0?(r=c,i=-i,l=u.length):(r=u,a=o,l=c.length),o=Math.ceil(h/en),l=o>l?o+1:l+1,i>l&&(i=l,r.length=1),r.reverse();i--;)r.push(0);r.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,r=u,u=c,c=r),n=0;i;)n=(c[--i]=c[i]+u[i]+n)/Un|0,c[i]%=Un;for(n&&(c.unshift(n),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,sn?qt(t,h):t}function Ua(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Ml+e)}function Ta(e){var t,n,r,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)r=e[t]+"",n=en-r.length,n&&(i+=Qi(n)),i+=r;o=e[t],r=o+"",n=en-r.length,n&&(i+=Qi(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var gi=function(){function e(r,a){var i,o=0,l=r.length;for(r=r.slice();l--;)i=r[l]*a+o,r[l]=i%Un|0,o=i/Un|0;return o&&r.unshift(o),r}function t(r,a,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(r[l]!=a[l]){c=r[l]>a[l]?1:-1;break}return c}function n(r,a,i){for(var o=0;i--;)r[i]-=o,o=r[i]<a[i]?1:0,r[i]=o*Un+r[i]-a[i];for(;!r[0]&&r.length>1;)r.shift()}return function(r,a,i,o){var l,c,u,d,h,m,f,v,p,g,x,y,b,C,w,N,S,_,P=r.constructor,A=r.s==a.s?1:-1,E=r.d,k=a.d;if(!r.s)return new P(r);if(!a.s)throw Error(Ds+"Division by zero");for(c=r.e-a.e,S=k.length,w=E.length,f=new P(A),v=f.d=[],u=0;k[u]==(E[u]||0);)++u;if(k[u]>(E[u]||0)&&--c,i==null?y=i=P.precision:o?y=i+(kn(r)-kn(a))+1:y=i,y<0)return new P(0);if(y=y/en+2|0,u=0,S==1)for(d=0,k=k[0],y++;(u<w||d)&&y--;u++)b=d*Un+(E[u]||0),v[u]=b/k|0,d=b%k|0;else{for(d=Un/(k[0]+1)|0,d>1&&(k=e(k,d),E=e(E,d),S=k.length,w=E.length),C=S,p=E.slice(0,S),g=p.length;g<S;)p[g++]=0;_=k.slice(),_.unshift(0),N=k[0],k[1]>=Un/2&&++N;do d=0,l=t(k,p,S,g),l<0?(x=p[0],S!=g&&(x=x*Un+(p[1]||0)),d=x/N|0,d>1?(d>=Un&&(d=Un-1),h=e(k,d),m=h.length,g=p.length,l=t(h,p,m,g),l==1&&(d--,n(h,S<m?_:k,m))):(d==0&&(l=d=1),h=k.slice()),m=h.length,m<g&&h.unshift(0),n(p,h,g),l==-1&&(g=p.length,l=t(k,p,S,g),l<1&&(d++,n(p,S<g?_:k,g))),g=p.length):l===0&&(d++,p=[0]),v[u++]=d,l&&p[0]?p[g++]=E[C]||0:(p=[E[C]],g=1);while((C++<w||p[0]!==void 0)&&y--)}return v[0]||v.shift(),f.e=c,qt(f,o?i+kn(f)+1:i)}}();function I5(e,t){var n,r,a,i,o,l,c=0,u=0,d=e.constructor,h=d.precision;if(kn(e)>16)throw Error(rC+kn(e));if(!e.s)return new d(os);for(t==null?(sn=!1,l=h):l=t,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(r=Math.log(cl(2,u))/Math.LN10*2+5|0,l+=r,n=a=i=new d(os),d.precision=l;;){if(a=qt(a.times(e),l),n=n.times(++c),o=i.plus(gi(a,n,l)),Ta(o.d).slice(0,l)===Ta(i.d).slice(0,l)){for(;u--;)i=qt(i.times(i),l);return d.precision=h,t==null?(sn=!0,qt(i,h)):i}i=o}}function kn(e){for(var t=e.e*en,n=e.d[0];n>=10;n/=10)t++;return t}function bj(e,t,n){if(t>e.LN10.sd())throw sn=!0,n&&(e.precision=n),Error(Ds+"LN10 precision limit exceeded");return qt(new e(e.LN10),t)}function Qi(e){for(var t="";e--;)t+="0";return t}function Fm(e,t){var n,r,a,i,o,l,c,u,d,h=1,m=10,f=e,v=f.d,p=f.constructor,g=p.precision;if(f.s<1)throw Error(Ds+(f.s?"NaN":"-Infinity"));if(f.eq(os))return new p(0);if(t==null?(sn=!1,u=g):u=t,f.eq(10))return t==null&&(sn=!0),bj(p,u);if(u+=m,p.precision=u,n=Ta(v),r=n.charAt(0),i=kn(f),Math.abs(i)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)f=f.times(e),n=Ta(f.d),r=n.charAt(0),h++;i=kn(f),r>1?(f=new p("0."+n),i++):f=new p(r+"."+n.slice(1))}else return c=bj(p,u+2,g).times(i+""),f=Fm(new p(r+"."+n.slice(1)),u-m).plus(c),p.precision=g,t==null?(sn=!0,qt(f,g)):f;for(l=o=f=gi(f.minus(os),f.plus(os),u),d=qt(f.times(f),u),a=3;;){if(o=qt(o.times(d),u),c=l.plus(gi(o,new p(a),u)),Ta(c.d).slice(0,u)===Ta(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(bj(p,u+2,g).times(i+""))),l=gi(l,new p(h),u),p.precision=g,t==null?(sn=!0,qt(l,g)):l;l=c,a+=2}}function vT(e,t){var n,r,a;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(r,a),t){if(a-=r,n=n-r-1,e.e=Yd(n/en),e.d=[],r=(n+1)%en,n<0&&(r+=en),r<a){for(r&&e.d.push(+t.slice(0,r)),a-=en;r<a;)e.d.push(+t.slice(r,r+=en));t=t.slice(r),r=en-t.length}else r-=a;for(;r--;)t+="0";if(e.d.push(+t),sn&&(e.e>Cv||e.e<-Cv))throw Error(rC+n)}else e.s=0,e.e=0,e.d=[0];return e}function qt(e,t,n){var r,a,i,o,l,c,u,d,h=e.d;for(o=1,i=h[0];i>=10;i/=10)o++;if(r=t-o,r<0)r+=en,a=t,u=h[d=0];else{if(d=Math.ceil((r+1)/en),i=h.length,d>=i)return e;for(u=i=h[d],o=1;i>=10;i/=10)o++;r%=en,a=r-en+o}if(n!==void 0&&(i=cl(10,o-a-1),l=u/i%10|0,c=t<0||h[d+1]!==void 0||u%i,c=n<4?(l||c)&&(n==0||n==(e.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(r>0?a>0?u/cl(10,o-a):0:h[d-1])%10&1||n==(e.s<0?8:7))),t<1||!h[0])return c?(i=kn(e),h.length=1,t=t-i-1,h[0]=cl(10,(en-t%en)%en),e.e=Yd(-t/en)||0):(h.length=1,h[0]=e.e=e.s=0),e;if(r==0?(h.length=d,i=1,d--):(h.length=d+1,i=cl(10,en-r),h[d]=a>0?(u/cl(10,o-a)%cl(10,a)|0)*i:0),c)for(;;)if(d==0){(h[0]+=i)==Un&&(h[0]=1,++e.e);break}else{if(h[d]+=i,h[d]!=Un)break;h[d--]=0,i=1}for(r=h.length;h[--r]===0;)h.pop();if(sn&&(e.e>Cv||e.e<-Cv))throw Error(rC+kn(e));return e}function $5(e,t){var n,r,a,i,o,l,c,u,d,h,m=e.constructor,f=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),sn?qt(t,f):t;if(c=e.d,h=t.d,r=t.e,u=e.e,c=c.slice(),o=u-r,o){for(d=o<0,d?(n=c,o=-o,l=h.length):(n=h,r=u,l=c.length),a=Math.max(Math.ceil(f/en),l)+2,o>a&&(o=a,n.length=1),n.reverse(),a=o;a--;)n.push(0);n.reverse()}else{for(a=c.length,l=h.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=h[a]){d=c[a]<h[a];break}o=0}for(d&&(n=c,c=h,h=n,t.s=-t.s),l=c.length,a=h.length-l;a>0;--a)c[l++]=0;for(a=h.length;a>o;){if(c[--a]<h[a]){for(i=a;i&&c[--i]===0;)c[i]=Un-1;--c[i],c[a]+=Un}c[a]-=h[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(t.d=c,t.e=r,sn?qt(t,f):t):new m(0)}function Zl(e,t,n){var r,a=kn(e),i=Ta(e.d),o=i.length;return t?(n&&(r=n-o)>0?i=i.charAt(0)+"."+i.slice(1)+Qi(r):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Qi(-a-1)+i,n&&(r=n-o)>0&&(i+=Qi(r))):a>=o?(i+=Qi(a+1-o),n&&(r=n-a-1)>0&&(i=i+"."+Qi(r))):((r=a+1)<o&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-o)>0&&(a+1===o&&(i+="."),i+=Qi(r))),e.s<0?"-"+i:i}function xT(e,t){if(e.length>t)return e.length=t,!0}function R5(e){var t,n,r;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Ml+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return vT(o,i.toString())}else if(typeof i!="string")throw Error(Ml+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,Hye.test(i))vT(o,i);else throw Error(Ml+i)}if(a.prototype=$e,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=R5,a.config=a.set=Kye,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return a.config(e),a}function Kye(e){if(!e||typeof e!="object")throw Error(Ds+"Object expected");var t,n,r,a=["precision",1,Gd,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((r=e[n=a[t]])!==void 0)if(Yd(r)===r&&r>=a[t+1]&&r<=a[t+2])this[n]=r;else throw Error(Ml+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Ml+n+": "+r);return this}var sC=R5(Wye);os=new sC(1);const Ft=sC;function Gye(e){return Jye(e)||Xye(e)||Qye(e)||Yye()}function Yye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qye(e,t){if(e){if(typeof e=="string")return oN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oN(e,t)}}function Xye(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Jye(e){if(Array.isArray(e))return oN(e)}function oN(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Zye=function(t){return t},L5={"@@functional/placeholder":!0},F5=function(t){return t===L5},yT=function(t){return function n(){return arguments.length===0||arguments.length===1&&F5(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},e0e=function e(t,n){return t===1?n:yT(function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];var o=a.filter(function(l){return l!==L5}).length;return o>=t?n.apply(void 0,a):e(t-o,yT(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=a.map(function(h){return F5(h)?c.shift():h});return n.apply(void 0,Gye(d).concat(c))}))})},Ey=function(t){return e0e(t.length,t)},lN=function(t,n){for(var r=[],a=t;a<n;++a)r[a-t]=a;return r},t0e=Ey(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),n0e=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return Zye;var a=n.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},cN=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},B5=function(t){var n=null,r=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n&&i.every(function(l,c){return l===n[c]})||(n=i,r=t.apply(void 0,i)),r}};function r0e(e){var t;return e===0?t=1:t=Math.floor(new Ft(e).abs().log(10).toNumber())+1,t}function s0e(e,t,n){for(var r=new Ft(e),a=0,i=[];r.lt(t)&&a<1e5;)i.push(r.toNumber()),r=r.add(n),a++;return i}var a0e=Ey(function(e,t,n){var r=+e,a=+t;return r+n*(a-r)}),i0e=Ey(function(e,t,n){var r=t-+e;return r=r||1/0,(n-e)/r}),o0e=Ey(function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});const Oy={rangeStep:s0e,getDigitCount:r0e,interpolateNumber:a0e,uninterpolateNumber:i0e,uninterpolateTruncation:o0e};function uN(e){return u0e(e)||c0e(e)||z5(e)||l0e()}function l0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c0e(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function u0e(e){if(Array.isArray(e))return dN(e)}function Bm(e,t){return m0e(e)||h0e(e,t)||z5(e,t)||d0e()}function d0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z5(e,t){if(e){if(typeof e=="string")return dN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dN(e,t)}}function dN(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h0e(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,a=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(r=(l=o.next()).done)&&(n.push(l.value),!(t&&n.length===t));r=!0);}catch(c){a=!0,i=c}finally{try{!r&&o.return!=null&&o.return()}finally{if(a)throw i}}return n}}function m0e(e){if(Array.isArray(e))return e}function V5(e){var t=Bm(e,2),n=t[0],r=t[1],a=n,i=r;return n>r&&(a=r,i=n),[a,i]}function q5(e,t,n){if(e.lte(0))return new Ft(0);var r=Oy.getDigitCount(e.toNumber()),a=new Ft(10).pow(r),i=e.div(a),o=r!==1?.05:.1,l=new Ft(Math.ceil(i.div(o).toNumber())).add(n).mul(o),c=l.mul(a);return t?c:new Ft(Math.ceil(c))}function f0e(e,t,n){var r=1,a=new Ft(e);if(!a.isint()&&n){var i=Math.abs(e);i<1?(r=new Ft(10).pow(Oy.getDigitCount(e)-1),a=new Ft(Math.floor(a.div(r).toNumber())).mul(r)):i>1&&(a=new Ft(Math.floor(e)))}else e===0?a=new Ft(Math.floor((t-1)/2)):n||(a=new Ft(Math.floor(e)));var o=Math.floor((t-1)/2),l=n0e(t0e(function(c){return a.add(new Ft(c-o).mul(r)).toNumber()}),lN);return l(0,t)}function U5(e,t,n,r){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new Ft(0),tickMin:new Ft(0),tickMax:new Ft(0)};var i=q5(new Ft(t).sub(e).div(n-1),r,a),o;e<=0&&t>=0?o=new Ft(0):(o=new Ft(e).add(t).div(2),o=o.sub(new Ft(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new Ft(t).sub(o).div(i).toNumber()),u=l+c+1;return u>n?U5(e,t,n,r,a+1):(u<n&&(c=t>0?c+(n-u):c,l=t>0?l:l+(n-u)),{step:i,tickMin:o.sub(new Ft(l).mul(i)),tickMax:o.add(new Ft(c).mul(i))})}function p0e(e){var t=Bm(e,2),n=t[0],r=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=V5([n,r]),c=Bm(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var h=d===1/0?[u].concat(uN(lN(0,a-1).map(function(){return 1/0}))):[].concat(uN(lN(0,a-1).map(function(){return-1/0})),[d]);return n>r?cN(h):h}if(u===d)return f0e(u,a,i);var m=U5(u,d,o,i),f=m.step,v=m.tickMin,p=m.tickMax,g=Oy.rangeStep(v,p.add(new Ft(.1).mul(f)),f);return n>r?cN(g):g}function g0e(e,t){var n=Bm(e,2),r=n[0],a=n[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=V5([r,a]),l=Bm(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[r,a];if(c===u)return[c];var d=Math.max(t,2),h=q5(new Ft(u).sub(c).div(d-1),i,0),m=[].concat(uN(Oy.rangeStep(new Ft(c),new Ft(u).sub(new Ft(.99).mul(h)),h)),[u]);return r>a?cN(m):m}var v0e=B5(p0e),x0e=B5(g0e),y0e="Invariant failed";function ec(e,t){throw new Error(y0e)}var j0e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Ju(e){"@babel/helpers - typeof";return Ju=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ju(e)}function _v(){return _v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_v.apply(this,arguments)}function b0e(e,t){return C0e(e)||S0e(e,t)||N0e(e,t)||w0e()}function w0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function N0e(e,t){if(e){if(typeof e=="string")return jT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jT(e,t)}}function jT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S0e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function C0e(e){if(Array.isArray(e))return e}function _0e(e,t){if(e==null)return{};var n=P0e(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function P0e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function A0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k0e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,K5(r.key),r)}}function T0e(e,t,n){return t&&k0e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function E0e(e,t,n){return t=Pv(t),O0e(e,W5()?Reflect.construct(t,n||[],Pv(e).constructor):t.apply(e,n))}function O0e(e,t){if(t&&(Ju(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return D0e(e)}function D0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W5(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(W5=function(){return!!e})()}function Pv(e){return Pv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Pv(e)}function M0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hN(e,t)}function hN(e,t){return hN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},hN(e,t)}function H5(e,t,n){return t=K5(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K5(e){var t=I0e(e,"string");return Ju(t)=="symbol"?t:t+""}function I0e(e,t){if(Ju(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ju(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Rf=function(e){function t(){return A0e(this,t),E0e(this,t,arguments)}return M0e(t,e),T0e(t,[{key:"render",value:function(){var r=this.props,a=r.offset,i=r.layout,o=r.width,l=r.dataKey,c=r.data,u=r.dataPointFormatter,d=r.xAxis,h=r.yAxis,m=_0e(r,j0e),f=Be(m,!1);this.props.direction==="x"&&d.type!=="number"&&ec();var v=c.map(function(p){var g=u(p,l),x=g.x,y=g.y,b=g.value,C=g.errorVal;if(!C)return null;var w=[],N,S;if(Array.isArray(C)){var _=b0e(C,2);N=_[0],S=_[1]}else N=S=C;if(i==="vertical"){var P=d.scale,A=y+a,E=A+o,k=A-o,I=P(b-N),D=P(b+S);w.push({x1:D,y1:E,x2:D,y2:k}),w.push({x1:I,y1:A,x2:D,y2:A}),w.push({x1:I,y1:E,x2:I,y2:k})}else if(i==="horizontal"){var U=h.scale,B=x+a,K=B-o,T=B+o,$=U(b-N),G=U(b+S);w.push({x1:K,y1:G,x2:T,y2:G}),w.push({x1:B,y1:$,x2:B,y2:G}),w.push({x1:K,y1:$,x2:T,y2:$})}return L.createElement(vt,_v({className:"recharts-errorBar",key:"bar-".concat(w.map(function(Q){return"".concat(Q.x1,"-").concat(Q.x2,"-").concat(Q.y1,"-").concat(Q.y2)}))},f),w.map(function(Q){return L.createElement("line",_v({},Q,{key:"line-".concat(Q.x1,"-").concat(Q.x2,"-").concat(Q.y1,"-").concat(Q.y2)}))}))});return L.createElement(vt,{className:"recharts-errorBars"},v)}}])}(L.Component);H5(Rf,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});H5(Rf,"displayName","ErrorBar");function zm(e){"@babel/helpers - typeof";return zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zm(e)}function bT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function el(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bT(Object(n),!0).forEach(function(r){$0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $0e(e,t,n){return t=R0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R0e(e){var t=L0e(e,"string");return zm(t)=="symbol"?t:t+""}function L0e(e,t){if(zm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(zm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var G5=function(t){var n=t.children,r=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,o=ss(n,du);if(!o)return null;var l=du.defaultProps,c=l!==void 0?el(el({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(r||[]).reduce(function(d,h){var m=h.item,f=h.props,v=f.sectors||f.data||[];return d.concat(v.map(function(p){return{type:o.props.iconType||m.props.legendType,value:p.name,color:p.fill,payload:p}}))},[]):u=(r||[]).map(function(d){var h=d.item,m=h.type.defaultProps,f=m!==void 0?el(el({},m),h.props):{},v=f.dataKey,p=f.name,g=f.legendType,x=f.hide;return{inactive:x,dataKey:v,type:c.iconType||g||"square",color:aC(h),value:p||v,payload:f}}),el(el(el({},c),du.getWithHeight(o,a)),{},{payload:u,item:o})};function Vm(e){"@babel/helpers - typeof";return Vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vm(e)}function wT(e){return V0e(e)||z0e(e)||B0e(e)||F0e()}function F0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B0e(e,t){if(e){if(typeof e=="string")return mN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mN(e,t)}}function z0e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function V0e(e){if(Array.isArray(e))return mN(e)}function mN(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function NT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function gn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NT(Object(n),!0).forEach(function(r){mu(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mu(e,t,n){return t=q0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q0e(e){var t=U0e(e,"string");return Vm(t)=="symbol"?t:t+""}function U0e(e,t){if(Vm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Vm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jn(e,t,n){return et(e)||et(t)?n:Bn(t)?ds(e,t,n):Ke(t)?t(e):n}function Gh(e,t,n,r){var a=zye(e,function(l){return jn(l,t)});if(n==="number"){var i=a.filter(function(l){return we(l)||parseFloat(l)});return i.length?[Ty(i),po(i)]:[1/0,-1/0]}var o=r?a.filter(function(l){return!et(l)}):a;return o.map(function(l){return Bn(l)||l instanceof Date?l:""})}var W0e=function(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,u=0;u<l;u++){var d=u>0?a[u-1].coordinate:a[l-1].coordinate,h=a[u].coordinate,m=u>=l-1?a[0].coordinate:a[u+1].coordinate,f=void 0;if(Pr(h-d)!==Pr(m-h)){var v=[];if(Pr(m-h)===Pr(c[1]-c[0])){f=m;var p=h+c[1]-c[0];v[0]=Math.min(p,(p+d)/2),v[1]=Math.max(p,(p+d)/2)}else{f=d;var g=m+c[1]-c[0];v[0]=Math.min(h,(g+h)/2),v[1]=Math.max(h,(g+h)/2)}var x=[Math.min(h,(f+h)/2),Math.max(h,(f+h)/2)];if(t>x[0]&&t<=x[1]||t>=v[0]&&t<=v[1]){o=a[u].index;break}}else{var y=Math.min(d,m),b=Math.max(d,m);if(t>(y+h)/2&&t<=(b+h)/2){o=a[u].index;break}}}else for(var C=0;C<l;C++)if(C===0&&t<=(r[C].coordinate+r[C+1].coordinate)/2||C>0&&C<l-1&&t>(r[C].coordinate+r[C-1].coordinate)/2&&t<=(r[C].coordinate+r[C+1].coordinate)/2||C===l-1&&t>(r[C].coordinate+r[C-1].coordinate)/2){o=r[C].index;break}return o},aC=function(t){var n,r=t,a=r.type.displayName,i=(n=t.type)!==null&&n!==void 0&&n.defaultProps?gn(gn({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},H0e=function(t){var n=t.barSize,r=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},l=Object.keys(i),c=0,u=l.length;c<u;c++)for(var d=i[l[c]].stackGroups,h=Object.keys(d),m=0,f=h.length;m<f;m++){var v=d[h[m]],p=v.items,g=v.cateAxisId,x=p.filter(function(S){return pi(S.type).indexOf("Bar")>=0});if(x&&x.length){var y=x[0].type.defaultProps,b=y!==void 0?gn(gn({},y),x[0].props):x[0].props,C=b.barSize,w=b[g];o[w]||(o[w]=[]);var N=et(C)?n:C;o[w].push({item:x[0],stackList:x.slice(1),barSize:et(N)?void 0:Ar(N,r,0)})}}return o},K0e=function(t){var n=t.barGap,r=t.barCategoryGap,a=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var u=Ar(n,a,0,!0),d,h=[];if(o[0].barSize===+o[0].barSize){var m=!1,f=a/c,v=o.reduce(function(C,w){return C+w.barSize||0},0);v+=(c-1)*u,v>=a&&(v-=(c-1)*u,u=0),v>=a&&f>0&&(m=!0,f*=.9,v=c*f);var p=(a-v)/2>>0,g={offset:p-u,size:0};d=o.reduce(function(C,w){var N={item:w.item,position:{offset:g.offset+g.size+u,size:m?f:w.barSize}},S=[].concat(wT(C),[N]);return g=S[S.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function(_){S.push({item:_,position:g})}),S},h)}else{var x=Ar(r,a,0,!0);a-2*x-(c-1)*u<=0&&(u=0);var y=(a-2*x-(c-1)*u)/c;y>1&&(y>>=0);var b=l===+l?Math.min(y,l):y;d=o.reduce(function(C,w,N){var S=[].concat(wT(C),[{item:w.item,position:{offset:x+(y+u)*N+(y-b)/2,size:b}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function(_){S.push({item:_,position:S[S.length-1].position})}),S},h)}return d},G0e=function(t,n,r,a){var i=r.children,o=r.width,l=r.margin,c=o-(l.left||0)-(l.right||0),u=G5({children:i,legendWidth:c});if(u){var d=a||{},h=d.width,m=d.height,f=u.align,v=u.verticalAlign,p=u.layout;if((p==="vertical"||p==="horizontal"&&v==="middle")&&f!=="center"&&we(t[f]))return gn(gn({},t),{},mu({},f,t[f]+(h||0)));if((p==="horizontal"||p==="vertical"&&f==="center")&&v!=="middle"&&we(t[v]))return gn(gn({},t),{},mu({},v,t[v]+(m||0)))}return t},Y0e=function(t,n,r){return et(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},Y5=function(t,n,r,a,i){var o=n.props.children,l=hs(o,Rf).filter(function(u){return Y0e(a,i,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var h=jn(d,r);if(et(h))return u;var m=Array.isArray(h)?[Ty(h),po(h)]:[h,h],f=c.reduce(function(v,p){var g=jn(d,p,0),x=m[0]-Math.abs(Array.isArray(g)?g[0]:g),y=m[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(x,v[0]),Math.max(y,v[1])]},[1/0,-1/0]);return[Math.min(f[0],u[0]),Math.max(f[1],u[1])]},[1/0,-1/0])}return null},Q0e=function(t,n,r,a,i){var o=n.map(function(l){return Y5(t,l,r,i,a)}).filter(function(l){return!et(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},Q5=function(t,n,r,a,i){var o=n.map(function(c){var u=c.props.dataKey;return r==="number"&&u&&Y5(t,c,u,a)||Gh(t,u,r,i)});if(r==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var d=0,h=u.length;d<h;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},X5=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},J5=function(t,n,r,a){if(a)return t.map(function(c){return c.coordinate});var i,o,l=t.map(function(c){return c.coordinate===n&&(i=!0),c.coordinate===r&&(o=!0),c.coordinate});return i||l.push(n),o||l.push(r),l},hi=function(t,n,r){if(!t)return null;var a=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(n||r)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Pr(l[0]-l[1])*2*u:u,n&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(h){var m=i?i.indexOf(h):h;return{coordinate:a(m)+u,value:h,offset:u}});return d.filter(function(h){return!Vd(h.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(h,m){return{coordinate:a(h)+u,value:h,index:m,offset:u}}):a.ticks&&!r?a.ticks(t.tickCount).map(function(h){return{coordinate:a(h)+u,value:h,offset:u}}):a.domain().map(function(h,m){return{coordinate:a(h)+u,value:i?i[h]:h,index:m,offset:u}})},wj=new WeakMap,$p=function(t,n){if(typeof n!="function")return t;wj.has(t)||wj.set(t,new WeakMap);var r=wj.get(t);if(r.has(n))return r.get(n);var a=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,a),a},Z5=function(t,n,r){var a=t.scale,i=t.type,o=t.layout,l=t.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Mm(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:bv(),realScaleType:"linear"}:i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:Kh(),realScaleType:"point"}:i==="category"?{scale:Mm(),realScaleType:"band"}:{scale:bv(),realScaleType:"linear"};if(Yl(a)){var c="scale".concat(gy(a));return{scale:(gT[c]||Kh)(),realScaleType:gT[c]?c:"point"}}return Ke(a)?{scale:a}:{scale:Kh(),realScaleType:"point"}},ST=1e-4,e6=function(t){var n=t.domain();if(!(!n||n.length<=2)){var r=n.length,a=t.range(),i=Math.min(a[0],a[1])-ST,o=Math.max(a[0],a[1])+ST,l=t(n[0]),c=t(n[r-1]);(l<i||l>o||c<i||c>o)&&t.domain([n[0],n[r-1]])}},X0e=function(t,n){if(!t)return null;for(var r=0,a=t.length;r<a;r++)if(t[r].item===n)return t[r].position;return null},J0e=function(t,n){if(!n||n.length!==2||!we(n[0])||!we(n[1]))return t;var r=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]),i=[t[0],t[1]];return(!we(t[0])||t[0]<r)&&(i[0]=r),(!we(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<r&&(i[1]=r),i},Z0e=function(t){var n=t.length;if(!(n<=0))for(var r=0,a=t[0].length;r<a;++r)for(var i=0,o=0,l=0;l<n;++l){var c=Vd(t[l][r][1])?t[l][r][0]:t[l][r][1];c>=0?(t[l][r][0]=i,t[l][r][1]=i+c,i=t[l][r][1]):(t[l][r][0]=o,t[l][r][1]=o+c,o=t[l][r][1])}},eje=function(t){var n=t.length;if(!(n<=0))for(var r=0,a=t[0].length;r<a;++r)for(var i=0,o=0;o<n;++o){var l=Vd(t[o][r][1])?t[o][r][0]:t[o][r][1];l>=0?(t[o][r][0]=i,t[o][r][1]=i+l,i=t[o][r][1]):(t[o][r][0]=0,t[o][r][1]=0)}},tje={sign:Z0e,expand:joe,none:Uu,silhouette:boe,wiggle:woe,positive:eje},nje=function(t,n,r){var a=n.map(function(l){return l.props.dataKey}),i=tje[r],o=yoe().keys(a).value(function(l,c){return+jn(l,c,0)}).order(Lw).offset(i);return o(t)},rje=function(t,n,r,a,i,o){if(!t)return null;var l=o?n.reverse():n,c={},u=l.reduce(function(h,m){var f,v=(f=m.type)!==null&&f!==void 0&&f.defaultProps?gn(gn({},m.type.defaultProps),m.props):m.props,p=v.stackId,g=v.hide;if(g)return h;var x=v[r],y=h[x]||{hasStack:!1,stackGroups:{}};if(Bn(p)){var b=y.stackGroups[p]||{numericAxisId:r,cateAxisId:a,items:[]};b.items.push(m),y.hasStack=!0,y.stackGroups[p]=b}else y.stackGroups[hc("_stackId_")]={numericAxisId:r,cateAxisId:a,items:[m]};return gn(gn({},h),{},mu({},x,y))},c),d={};return Object.keys(u).reduce(function(h,m){var f=u[m];if(f.hasStack){var v={};f.stackGroups=Object.keys(f.stackGroups).reduce(function(p,g){var x=f.stackGroups[g];return gn(gn({},p),{},mu({},g,{numericAxisId:r,cateAxisId:a,items:x.items,stackedData:nje(t,x.items,i)}))},v)}return gn(gn({},h),{},mu({},m,f))},d)},t6=function(t,n){var r=n.realScaleType,a=n.type,i=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=r||n.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=v0e(u,i,l);return t.domain([Ty(d),po(d)]),{niceTicks:d}}if(i&&a==="number"){var h=t.domain(),m=x0e(h,i,l);return{niceTicks:m}}return null};function Av(e){var t=e.axis,n=e.ticks,r=e.bandSize,a=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!et(a[t.dataKey])){var l=ev(n,"value",a[t.dataKey]);if(l)return l.coordinate+r/2}return n[i]?n[i].coordinate+r/2:null}var c=jn(a,et(o)?t.dataKey:o);return et(c)?null:t.scale(c)}var CT=function(t){var n=t.axis,r=t.ticks,a=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(n.type==="category")return r[l]?r[l].coordinate+a:null;var c=jn(o,n.dataKey,n.domain[l]);return et(c)?null:n.scale(c)-i/2+a},sje=function(t){var n=t.numericAxis,r=n.scale.domain();if(n.type==="number"){var a=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return a<=0&&i>=0?0:i<0?i:a}return r[0]},aje=function(t,n){var r,a=(r=t.type)!==null&&r!==void 0&&r.defaultProps?gn(gn({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(Bn(i)){var o=n[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},ije=function(t){return t.reduce(function(n,r){return[Ty(r.concat([n[0]]).filter(we)),po(r.concat([n[1]]).filter(we))]},[1/0,-1/0])},n6=function(t,n,r){return Object.keys(t).reduce(function(a,i){var o=t[i],l=o.stackedData,c=l.reduce(function(u,d){var h=ije(d.slice(n,r+1));return[Math.min(u[0],h[0]),Math.max(u[1],h[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},_T=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,PT=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,fN=function(t,n,r){if(Ke(t))return t(n,r);if(!Array.isArray(t))return n;var a=[];if(we(t[0]))a[0]=r?t[0]:Math.min(t[0],n[0]);else if(_T.test(t[0])){var i=+_T.exec(t[0])[1];a[0]=n[0]-i}else Ke(t[0])?a[0]=t[0](n[0]):a[0]=n[0];if(we(t[1]))a[1]=r?t[1]:Math.max(t[1],n[1]);else if(PT.test(t[1])){var o=+PT.exec(t[1])[1];a[1]=n[1]+o}else Ke(t[1])?a[1]=t[1](n[1]):a[1]=n[1];return a},kv=function(t,n,r){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!r||a>0)return a}if(t&&n&&n.length>=2){for(var i=D2(n,function(h){return h.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var u=i[l],d=i[l-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},AT=function(t,n,r){return!t||!t.length||Jl(t,ds(r,"type.defaultProps.domain"))?n:t},r6=function(t,n){var r=t.type.defaultProps?gn(gn({},t.type.defaultProps),t.props):t.props,a=r.dataKey,i=r.name,o=r.unit,l=r.formatter,c=r.tooltipType,u=r.chartType,d=r.hide;return gn(gn({},Be(t,!1)),{},{dataKey:a,unit:o,formatter:l,name:i||a,color:aC(t),value:jn(n,a),type:c,payload:n,chartType:u,hide:d})};function qm(e){"@babel/helpers - typeof";return qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qm(e)}function kT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ni(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kT(Object(n),!0).forEach(function(r){s6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function s6(e,t,n){return t=oje(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oje(e){var t=lje(e,"string");return qm(t)=="symbol"?t:t+""}function lje(e,t){if(qm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(qm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cje(e,t){return mje(e)||hje(e,t)||dje(e,t)||uje()}function uje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dje(e,t){if(e){if(typeof e=="string")return TT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return TT(e,t)}}function TT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hje(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function mje(e){if(Array.isArray(e))return e}var Tv=Math.PI/180,fje=function(t){return t*180/Math.PI},Yt=function(t,n,r,a){return{x:t+Math.cos(-Tv*a)*r,y:n+Math.sin(-Tv*a)*r}},a6=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},pje=function(t,n,r,a,i){var o=t.width,l=t.height,c=t.startAngle,u=t.endAngle,d=Ar(t.cx,o,o/2),h=Ar(t.cy,l,l/2),m=a6(o,l,r),f=Ar(t.innerRadius,m,0),v=Ar(t.outerRadius,m,m*.8),p=Object.keys(n);return p.reduce(function(g,x){var y=n[x],b=y.domain,C=y.reversed,w;if(et(y.range))a==="angleAxis"?w=[c,u]:a==="radiusAxis"&&(w=[f,v]),C&&(w=[w[1],w[0]]);else{w=y.range;var N=w,S=cje(N,2);c=S[0],u=S[1]}var _=Z5(y,i),P=_.realScaleType,A=_.scale;A.domain(b).range(w),e6(A);var E=t6(A,ni(ni({},y),{},{realScaleType:P})),k=ni(ni(ni({},y),E),{},{range:w,radius:v,realScaleType:P,scale:A,cx:d,cy:h,innerRadius:f,outerRadius:v,startAngle:c,endAngle:u});return ni(ni({},g),{},s6({},x,k))},{})},gje=function(t,n){var r=t.x,a=t.y,i=n.x,o=n.y;return Math.sqrt(Math.pow(r-i,2)+Math.pow(a-o,2))},vje=function(t,n){var r=t.x,a=t.y,i=n.cx,o=n.cy,l=gje({x:r,y:a},{x:i,y:o});if(l<=0)return{radius:l};var c=(r-i)/l,u=Math.acos(c);return a>o&&(u=2*Math.PI-u),{radius:l,angle:fje(u),angleInRadian:u}},xje=function(t){var n=t.startAngle,r=t.endAngle,a=Math.floor(n/360),i=Math.floor(r/360),o=Math.min(a,i);return{startAngle:n-o*360,endAngle:r-o*360}},yje=function(t,n){var r=n.startAngle,a=n.endAngle,i=Math.floor(r/360),o=Math.floor(a/360),l=Math.min(i,o);return t+l*360},ET=function(t,n){var r=t.x,a=t.y,i=vje({x:r,y:a},n),o=i.radius,l=i.angle,c=n.innerRadius,u=n.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var d=xje(n),h=d.startAngle,m=d.endAngle,f=l,v;if(h<=m){for(;f>m;)f-=360;for(;f<h;)f+=360;v=f>=h&&f<=m}else{for(;f>h;)f-=360;for(;f<m;)f+=360;v=f>=m&&f<=h}return v?ni(ni({},n),{},{radius:o,angle:yje(f,n)}):null},i6=function(t){return!j.isValidElement(t)&&!Ke(t)&&typeof t!="boolean"?t.className:""};function Um(e){"@babel/helpers - typeof";return Um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Um(e)}var jje=["offset"];function bje(e){return Cje(e)||Sje(e)||Nje(e)||wje()}function wje(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nje(e,t){if(e){if(typeof e=="string")return pN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pN(e,t)}}function Sje(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Cje(e){if(Array.isArray(e))return pN(e)}function pN(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _je(e,t){if(e==null)return{};var n=Pje(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Pje(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function OT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function On(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OT(Object(n),!0).forEach(function(r){Aje(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Aje(e,t,n){return t=kje(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kje(e){var t=Tje(e,"string");return Um(t)=="symbol"?t:t+""}function Tje(e,t){if(Um(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Um(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wm(){return Wm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wm.apply(this,arguments)}var Eje=function(t){var n=t.value,r=t.formatter,a=et(t.children)?n:t.children;return Ke(r)?r(a):a},Oje=function(t,n){var r=Pr(n-t),a=Math.min(Math.abs(n-t),360);return r*a},Dje=function(t,n,r){var a=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,u=c.cx,d=c.cy,h=c.innerRadius,m=c.outerRadius,f=c.startAngle,v=c.endAngle,p=c.clockWise,g=(h+m)/2,x=Oje(f,v),y=x>=0?1:-1,b,C;a==="insideStart"?(b=f+y*o,C=p):a==="insideEnd"?(b=v-y*o,C=!p):a==="end"&&(b=v+y*o,C=p),C=x<=0?C:!C;var w=Yt(u,d,g,b),N=Yt(u,d,g,b+(C?1:-1)*359),S="M".concat(w.x,",").concat(w.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(C?0:1,`,
    `).concat(N.x,",").concat(N.y),_=et(t.id)?hc("recharts-radial-line-"):t.id;return L.createElement("text",Wm({},r,{dominantBaseline:"central",className:at("recharts-radial-bar-label",l)}),L.createElement("defs",null,L.createElement("path",{id:_,d:S})),L.createElement("textPath",{xlinkHref:"#".concat(_)},n))},Mje=function(t){var n=t.viewBox,r=t.offset,a=t.position,i=n,o=i.cx,l=i.cy,c=i.innerRadius,u=i.outerRadius,d=i.startAngle,h=i.endAngle,m=(d+h)/2;if(a==="outside"){var f=Yt(o,l,u+r,m),v=f.x,p=f.y;return{x:v,y:p,textAnchor:v>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var g=(c+u)/2,x=Yt(o,l,g,m),y=x.x,b=x.y;return{x:y,y:b,textAnchor:"middle",verticalAnchor:"middle"}},Ije=function(t){var n=t.viewBox,r=t.parentViewBox,a=t.offset,i=t.position,o=n,l=o.x,c=o.y,u=o.width,d=o.height,h=d>=0?1:-1,m=h*a,f=h>0?"end":"start",v=h>0?"start":"end",p=u>=0?1:-1,g=p*a,x=p>0?"end":"start",y=p>0?"start":"end";if(i==="top"){var b={x:l+u/2,y:c-h*a,textAnchor:"middle",verticalAnchor:f};return On(On({},b),r?{height:Math.max(c-r.y,0),width:u}:{})}if(i==="bottom"){var C={x:l+u/2,y:c+d+m,textAnchor:"middle",verticalAnchor:v};return On(On({},C),r?{height:Math.max(r.y+r.height-(c+d),0),width:u}:{})}if(i==="left"){var w={x:l-g,y:c+d/2,textAnchor:x,verticalAnchor:"middle"};return On(On({},w),r?{width:Math.max(w.x-r.x,0),height:d}:{})}if(i==="right"){var N={x:l+u+g,y:c+d/2,textAnchor:y,verticalAnchor:"middle"};return On(On({},N),r?{width:Math.max(r.x+r.width-N.x,0),height:d}:{})}var S=r?{width:u,height:d}:{};return i==="insideLeft"?On({x:l+g,y:c+d/2,textAnchor:y,verticalAnchor:"middle"},S):i==="insideRight"?On({x:l+u-g,y:c+d/2,textAnchor:x,verticalAnchor:"middle"},S):i==="insideTop"?On({x:l+u/2,y:c+m,textAnchor:"middle",verticalAnchor:v},S):i==="insideBottom"?On({x:l+u/2,y:c+d-m,textAnchor:"middle",verticalAnchor:f},S):i==="insideTopLeft"?On({x:l+g,y:c+m,textAnchor:y,verticalAnchor:v},S):i==="insideTopRight"?On({x:l+u-g,y:c+m,textAnchor:x,verticalAnchor:v},S):i==="insideBottomLeft"?On({x:l+g,y:c+d-m,textAnchor:y,verticalAnchor:f},S):i==="insideBottomRight"?On({x:l+u-g,y:c+d-m,textAnchor:x,verticalAnchor:f},S):Ld(i)&&(we(i.x)||vl(i.x))&&(we(i.y)||vl(i.y))?On({x:l+Ar(i.x,u),y:c+Ar(i.y,d),textAnchor:"end",verticalAnchor:"end"},S):On({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},S)},$je=function(t){return"cx"in t&&we(t.cx)};function Gn(e){var t=e.offset,n=t===void 0?5:t,r=_je(e,jje),a=On({offset:n},r),i=a.viewBox,o=a.position,l=a.value,c=a.children,u=a.content,d=a.className,h=d===void 0?"":d,m=a.textBreakAll;if(!i||et(l)&&et(c)&&!j.isValidElement(u)&&!Ke(u))return null;if(j.isValidElement(u))return j.cloneElement(u,a);var f;if(Ke(u)){if(f=j.createElement(u,a),j.isValidElement(f))return f}else f=Eje(a);var v=$je(i),p=Be(a,!0);if(v&&(o==="insideStart"||o==="insideEnd"||o==="end"))return Dje(a,f,p);var g=v?Mje(a):Ije(a);return L.createElement(Xl,Wm({className:at("recharts-label",h)},p,g,{breakAll:m}),f)}Gn.displayName="Label";var o6=function(t){var n=t.cx,r=t.cy,a=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,d=t.outerRadius,h=t.x,m=t.y,f=t.top,v=t.left,p=t.width,g=t.height,x=t.clockWise,y=t.labelViewBox;if(y)return y;if(we(p)&&we(g)){if(we(h)&&we(m))return{x:h,y:m,width:p,height:g};if(we(f)&&we(v))return{x:f,y:v,width:p,height:g}}return we(h)&&we(m)?{x:h,y:m,width:0,height:0}:we(n)&&we(r)?{cx:n,cy:r,startAngle:i||a||0,endAngle:o||a||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:x}:t.viewBox?t.viewBox:{}},Rje=function(t,n){return t?t===!0?L.createElement(Gn,{key:"label-implicit",viewBox:n}):Bn(t)?L.createElement(Gn,{key:"label-implicit",viewBox:n,value:t}):j.isValidElement(t)?t.type===Gn?j.cloneElement(t,{key:"label-implicit",viewBox:n}):L.createElement(Gn,{key:"label-implicit",content:t,viewBox:n}):Ke(t)?L.createElement(Gn,{key:"label-implicit",content:t,viewBox:n}):Ld(t)?L.createElement(Gn,Wm({viewBox:n},t,{key:"label-implicit"})):null:null},Lje=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var a=t.children,i=o6(t),o=hs(a,Gn).map(function(c,u){return j.cloneElement(c,{viewBox:n||i,key:"label-".concat(u)})});if(!r)return o;var l=Rje(t.label,n||i);return[l].concat(bje(o))};Gn.parseViewBox=o6;Gn.renderCallByParent=Lje;function Fje(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Bje=Fje;const zje=Ot(Bje);function Hm(e){"@babel/helpers - typeof";return Hm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hm(e)}var Vje=["valueAccessor"],qje=["data","dataKey","clockWise","id","textBreakAll"];function Uje(e){return Gje(e)||Kje(e)||Hje(e)||Wje()}function Wje(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hje(e,t){if(e){if(typeof e=="string")return gN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gN(e,t)}}function Kje(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Gje(e){if(Array.isArray(e))return gN(e)}function gN(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ev(){return Ev=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ev.apply(this,arguments)}function DT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function MT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DT(Object(n),!0).forEach(function(r){Yje(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Yje(e,t,n){return t=Qje(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qje(e){var t=Xje(e,"string");return Hm(t)=="symbol"?t:t+""}function Xje(e,t){if(Hm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Hm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function IT(e,t){if(e==null)return{};var n=Jje(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Jje(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Zje=function(t){return Array.isArray(t.value)?zje(t.value):t.value};function Ba(e){var t=e.valueAccessor,n=t===void 0?Zje:t,r=IT(e,Vje),a=r.data,i=r.dataKey,o=r.clockWise,l=r.id,c=r.textBreakAll,u=IT(r,qje);return!a||!a.length?null:L.createElement(vt,{className:"recharts-label-list"},a.map(function(d,h){var m=et(i)?n(d,h):jn(d&&d.payload,i),f=et(l)?{}:{id:"".concat(l,"-").concat(h)};return L.createElement(Gn,Ev({},Be(d,!0),u,f,{parentViewBox:d.parentViewBox,value:m,textBreakAll:c,viewBox:Gn.parseViewBox(et(o)?d:MT(MT({},d),{},{clockWise:o})),key:"label-".concat(h),index:h}))}))}Ba.displayName="LabelList";function ebe(e,t){return e?e===!0?L.createElement(Ba,{key:"labelList-implicit",data:t}):L.isValidElement(e)||Ke(e)?L.createElement(Ba,{key:"labelList-implicit",data:t,content:e}):Ld(e)?L.createElement(Ba,Ev({data:t},e,{key:"labelList-implicit"})):null:null}function tbe(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var r=e.children,a=hs(r,Ba).map(function(o,l){return j.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!n)return a;var i=ebe(e.label,t);return[i].concat(Uje(a))}Ba.renderCallByParent=tbe;function Km(e){"@babel/helpers - typeof";return Km=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Km(e)}function vN(){return vN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vN.apply(this,arguments)}function $T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function RT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$T(Object(n),!0).forEach(function(r){nbe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$T(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function nbe(e,t,n){return t=rbe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rbe(e){var t=sbe(e,"string");return Km(t)=="symbol"?t:t+""}function sbe(e,t){if(Km(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Km(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var abe=function(t,n){var r=Pr(n-t),a=Math.min(Math.abs(n-t),359.999);return r*a},Rp=function(t){var n=t.cx,r=t.cy,a=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,d=c*(l?1:-1)+a,h=Math.asin(c/d)/Tv,m=u?i:i+o*h,f=Yt(n,r,d,m),v=Yt(n,r,a,m),p=u?i-o*h:i,g=Yt(n,r,d*Math.cos(h*Tv),p);return{center:f,circleTangency:v,lineTangency:g,theta:h}},l6=function(t){var n=t.cx,r=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=abe(o,l),u=o+c,d=Yt(n,r,i,o),h=Yt(n,r,i,u),m="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(a>0){var f=Yt(n,r,a,o),v=Yt(n,r,a,u);m+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(f.x,",").concat(f.y," Z")}else m+="L ".concat(n,",").concat(r," Z");return m},ibe=function(t){var n=t.cx,r=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,h=Pr(d-u),m=Rp({cx:n,cy:r,radius:i,angle:u,sign:h,cornerRadius:o,cornerIsExternal:c}),f=m.circleTangency,v=m.lineTangency,p=m.theta,g=Rp({cx:n,cy:r,radius:i,angle:d,sign:-h,cornerRadius:o,cornerIsExternal:c}),x=g.circleTangency,y=g.lineTangency,b=g.theta,C=c?Math.abs(u-d):Math.abs(u-d)-p-b;if(C<0)return l?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):l6({cx:n,cy:r,innerRadius:a,outerRadius:i,startAngle:u,endAngle:d});var w="M ".concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(C>180),",").concat(+(h<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(y.x,",").concat(y.y,`
  `);if(a>0){var N=Rp({cx:n,cy:r,radius:a,angle:u,sign:h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),S=N.circleTangency,_=N.lineTangency,P=N.theta,A=Rp({cx:n,cy:r,radius:a,angle:d,sign:-h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),E=A.circleTangency,k=A.lineTangency,I=A.theta,D=c?Math.abs(u-d):Math.abs(u-d)-P-I;if(D<0&&o===0)return"".concat(w,"L").concat(n,",").concat(r,"Z");w+="L".concat(k.x,",").concat(k.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(E.x,",").concat(E.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(D>180),",").concat(+(h>0),",").concat(S.x,",").concat(S.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(_.x,",").concat(_.y,"Z")}else w+="L".concat(n,",").concat(r,"Z");return w},obe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},c6=function(t){var n=RT(RT({},obe),t),r=n.cx,a=n.cy,i=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,u=n.cornerIsExternal,d=n.startAngle,h=n.endAngle,m=n.className;if(o<i||d===h)return null;var f=at("recharts-sector",m),v=o-i,p=Ar(l,v,0,!0),g;return p>0&&Math.abs(d-h)<360?g=ibe({cx:r,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(p,v/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:h}):g=l6({cx:r,cy:a,innerRadius:i,outerRadius:o,startAngle:d,endAngle:h}),L.createElement("path",vN({},Be(n,!0),{className:f,d:g,role:"img"}))};function Gm(e){"@babel/helpers - typeof";return Gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gm(e)}function xN(){return xN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xN.apply(this,arguments)}function LT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function FT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LT(Object(n),!0).forEach(function(r){lbe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function lbe(e,t,n){return t=cbe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cbe(e){var t=ube(e,"string");return Gm(t)=="symbol"?t:t+""}function ube(e,t){if(Gm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Gm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var BT={curveBasisClosed:loe,curveBasisOpen:coe,curveBasis:ooe,curveBumpX:Kie,curveBumpY:Gie,curveLinearClosed:uoe,curveLinear:xy,curveMonotoneX:doe,curveMonotoneY:hoe,curveNatural:moe,curveStep:foe,curveStepAfter:goe,curveStepBefore:poe},Lp=function(t){return t.x===+t.x&&t.y===+t.y},yh=function(t){return t.x},jh=function(t){return t.y},dbe=function(t,n){if(Ke(t))return t;var r="curve".concat(gy(t));return(r==="curveMonotone"||r==="curveBump")&&n?BT["".concat(r).concat(n==="vertical"?"Y":"X")]:BT[r]||xy},hbe=function(t){var n=t.type,r=n===void 0?"linear":n,a=t.points,i=a===void 0?[]:a,o=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,d=dbe(r,l),h=u?i.filter(function(p){return Lp(p)}):i,m;if(Array.isArray(o)){var f=u?o.filter(function(p){return Lp(p)}):o,v=h.map(function(p,g){return FT(FT({},p),{},{base:f[g]})});return l==="vertical"?m=Ap().y(jh).x1(yh).x0(function(p){return p.base.x}):m=Ap().x(yh).y1(jh).y0(function(p){return p.base.y}),m.defined(Lp).curve(d),m(v)}return l==="vertical"&&we(o)?m=Ap().y(jh).x1(yh).x0(o):we(o)?m=Ap().x(yh).y1(jh).y0(o):m=rF().x(yh).y(jh),m.defined(Lp).curve(d),m(h)},Il=function(t){var n=t.className,r=t.points,a=t.path,i=t.pathRef;if((!r||!r.length)&&!a)return null;var o=r&&r.length?hbe(t):a;return j.createElement("path",xN({},Be(t,!1),tv(t),{className:at("recharts-curve",n),d:o,ref:i}))},u6={exports:{}},mbe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",fbe=mbe,pbe=fbe;function d6(){}function h6(){}h6.resetWarningCache=d6;var gbe=function(){function e(r,a,i,o,l,c){if(c!==pbe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:h6,resetWarningCache:d6};return n.PropTypes=n,n};u6.exports=gbe();var vbe=u6.exports;const Tt=Ot(vbe);var xbe=Object.getOwnPropertyNames,ybe=Object.getOwnPropertySymbols,jbe=Object.prototype.hasOwnProperty;function zT(e,t){return function(r,a,i){return e(r,a,i)&&t(r,a,i)}}function Fp(e){return function(n,r,a){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,a);var i=a.cache,o=i.get(n),l=i.get(r);if(o&&l)return o===r&&l===n;i.set(n,r),i.set(r,n);var c=e(n,r,a);return i.delete(n),i.delete(r),c}}function VT(e){return xbe(e).concat(ybe(e))}var bbe=Object.hasOwn||function(e,t){return jbe.call(e,t)};function pc(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var wbe="__v",Nbe="__o",Sbe="_owner",qT=Object.getOwnPropertyDescriptor,UT=Object.keys;function Cbe(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function _be(e,t){return pc(e.getTime(),t.getTime())}function Pbe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function Abe(e,t){return e===t}function WT(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var a=new Array(r),i=e.entries(),o,l,c=0;(o=i.next())&&!o.done;){for(var u=t.entries(),d=!1,h=0;(l=u.next())&&!l.done;){if(a[h]){h++;continue}var m=o.value,f=l.value;if(n.equals(m[0],f[0],c,h,e,t,n)&&n.equals(m[1],f[1],m[0],f[0],e,t,n)){d=a[h]=!0;break}h++}if(!d)return!1;c++}return!0}var kbe=pc;function Tbe(e,t,n){var r=UT(e),a=r.length;if(UT(t).length!==a)return!1;for(;a-- >0;)if(!m6(e,t,n,r[a]))return!1;return!0}function bh(e,t,n){var r=VT(e),a=r.length;if(VT(t).length!==a)return!1;for(var i,o,l;a-- >0;)if(i=r[a],!m6(e,t,n,i)||(o=qT(e,i),l=qT(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function Ebe(e,t){return pc(e.valueOf(),t.valueOf())}function Obe(e,t){return e.source===t.source&&e.flags===t.flags}function HT(e,t,n){var r=e.size;if(r!==t.size)return!1;if(!r)return!0;for(var a=new Array(r),i=e.values(),o,l;(o=i.next())&&!o.done;){for(var c=t.values(),u=!1,d=0;(l=c.next())&&!l.done;){if(!a[d]&&n.equals(o.value,l.value,o.value,l.value,e,t,n)){u=a[d]=!0;break}d++}if(!u)return!1}return!0}function Dbe(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function Mbe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function m6(e,t,n,r){return(r===Sbe||r===Nbe||r===wbe)&&(e.$$typeof||t.$$typeof)?!0:bbe(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}var Ibe="[object Arguments]",$be="[object Boolean]",Rbe="[object Date]",Lbe="[object Error]",Fbe="[object Map]",Bbe="[object Number]",zbe="[object Object]",Vbe="[object RegExp]",qbe="[object Set]",Ube="[object String]",Wbe="[object URL]",Hbe=Array.isArray,KT=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,GT=Object.assign,Kbe=Object.prototype.toString.call.bind(Object.prototype.toString);function Gbe(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areErrorsEqual,a=e.areFunctionsEqual,i=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,d=e.areSetsEqual,h=e.areTypedArraysEqual,m=e.areUrlsEqual;return function(v,p,g){if(v===p)return!0;if(v==null||p==null)return!1;var x=typeof v;if(x!==typeof p)return!1;if(x!=="object")return x==="number"?o(v,p,g):x==="function"?a(v,p,g):!1;var y=v.constructor;if(y!==p.constructor)return!1;if(y===Object)return l(v,p,g);if(Hbe(v))return t(v,p,g);if(KT!=null&&KT(v))return h(v,p,g);if(y===Date)return n(v,p,g);if(y===RegExp)return u(v,p,g);if(y===Map)return i(v,p,g);if(y===Set)return d(v,p,g);var b=Kbe(v);return b===Rbe?n(v,p,g):b===Vbe?u(v,p,g):b===Fbe?i(v,p,g):b===qbe?d(v,p,g):b===zbe?typeof v.then!="function"&&typeof p.then!="function"&&l(v,p,g):b===Wbe?m(v,p,g):b===Lbe?r(v,p,g):b===Ibe?l(v,p,g):b===$be||b===Bbe||b===Ube?c(v,p,g):!1}}function Ybe(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,a={areArraysEqual:r?bh:Cbe,areDatesEqual:_be,areErrorsEqual:Pbe,areFunctionsEqual:Abe,areMapsEqual:r?zT(WT,bh):WT,areNumbersEqual:kbe,areObjectsEqual:r?bh:Tbe,arePrimitiveWrappersEqual:Ebe,areRegExpsEqual:Obe,areSetsEqual:r?zT(HT,bh):HT,areTypedArraysEqual:r?bh:Dbe,areUrlsEqual:Mbe};if(n&&(a=GT({},a,n(a))),t){var i=Fp(a.areArraysEqual),o=Fp(a.areMapsEqual),l=Fp(a.areObjectsEqual),c=Fp(a.areSetsEqual);a=GT({},a,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return a}function Qbe(e){return function(t,n,r,a,i,o,l){return e(t,n,l)}}function Xbe(e){var t=e.circular,n=e.comparator,r=e.createState,a=e.equals,i=e.strict;if(r)return function(c,u){var d=r(),h=d.cache,m=h===void 0?t?new WeakMap:void 0:h,f=d.meta;return n(c,u,{cache:m,equals:a,meta:f,strict:i})};if(t)return function(c,u){return n(c,u,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var o={cache:void 0,equals:a,meta:void 0,strict:i};return function(c,u){return n(c,u,o)}}var Jbe=Xo();Xo({strict:!0});Xo({circular:!0});Xo({circular:!0,strict:!0});Xo({createInternalComparator:function(){return pc}});Xo({strict:!0,createInternalComparator:function(){return pc}});Xo({circular:!0,createInternalComparator:function(){return pc}});Xo({circular:!0,createInternalComparator:function(){return pc},strict:!0});function Xo(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,r=e.createInternalComparator,a=e.createState,i=e.strict,o=i===void 0?!1:i,l=Ybe(e),c=Gbe(l),u=r?r(c):Qbe(c);return Xbe({circular:n,comparator:c,createState:a,equals:u,strict:o})}function Zbe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function YT(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function a(i){n<0&&(n=i),i-n>t?(e(i),n=-1):Zbe(a)};requestAnimationFrame(r)}function yN(e){"@babel/helpers - typeof";return yN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yN(e)}function ewe(e){return swe(e)||rwe(e)||nwe(e)||twe()}function twe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nwe(e,t){if(e){if(typeof e=="string")return QT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QT(e,t)}}function QT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rwe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function swe(e){if(Array.isArray(e))return e}function awe(){var e={},t=function(){return null},n=!1,r=function a(i){if(!n){if(Array.isArray(i)){if(!i.length)return;var o=i,l=ewe(o),c=l[0],u=l.slice(1);if(typeof c=="number"){YT(a.bind(null,u),c);return}a(c),YT(a.bind(null,u));return}yN(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){n=!0},start:function(i){n=!1,r(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function Ym(e){"@babel/helpers - typeof";return Ym=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ym(e)}function XT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function JT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XT(Object(n),!0).forEach(function(r){f6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function f6(e,t,n){return t=iwe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iwe(e){var t=owe(e,"string");return Ym(t)==="symbol"?t:String(t)}function owe(e,t){if(Ym(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ym(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lwe=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(r,a){return r.filter(function(i){return a.includes(i)})})},cwe=function(t){return t},uwe=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Yh=function(t,n){return Object.keys(n).reduce(function(r,a){return JT(JT({},r),{},f6({},a,t(a,n[a])))},{})},ZT=function(t,n,r){return t.map(function(a){return"".concat(uwe(a)," ").concat(n,"ms ").concat(r)}).join(",")};function dwe(e,t){return fwe(e)||mwe(e,t)||p6(e,t)||hwe()}function hwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mwe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function fwe(e){if(Array.isArray(e))return e}function pwe(e){return xwe(e)||vwe(e)||p6(e)||gwe()}function gwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p6(e,t){if(e){if(typeof e=="string")return jN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jN(e,t)}}function vwe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function xwe(e){if(Array.isArray(e))return jN(e)}function jN(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ov=1e-4,g6=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},v6=function(t,n){return t.map(function(r,a){return r*Math.pow(n,a)}).reduce(function(r,a){return r+a})},eE=function(t,n){return function(r){var a=g6(t,n);return v6(a,r)}},ywe=function(t,n){return function(r){var a=g6(t,n),i=[].concat(pwe(a.map(function(o,l){return o*l}).slice(1)),[0]);return v6(i,r)}},tE=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[0],i=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":a=0,i=0,o=1,l=1;break;case"ease":a=.25,i=.1,o=.25,l=1;break;case"ease-in":a=.42,i=0,o=1,l=1;break;case"ease-out":a=.42,i=0,o=.58,l=1;break;case"ease-in-out":a=0,i=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),d=dwe(u,4);a=d[0],i=d[1],o=d[2],l=d[3]}}}var h=eE(a,o),m=eE(i,l),f=ywe(a,o),v=function(x){return x>1?1:x<0?0:x},p=function(x){for(var y=x>1?1:x,b=y,C=0;C<8;++C){var w=h(b)-y,N=f(b);if(Math.abs(w-y)<Ov||N<Ov)return m(b);b=v(b-w/N)}return m(b)};return p.isStepper=!1,p},jwe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,r=n===void 0?100:n,a=t.damping,i=a===void 0?8:a,o=t.dt,l=o===void 0?17:o,c=function(d,h,m){var f=-(d-h)*r,v=m*i,p=m+(f-v)*l/1e3,g=m*l/1e3+d;return Math.abs(g-h)<Ov&&Math.abs(p)<Ov?[h,0]:[g,p]};return c.isStepper=!0,c.dt=l,c},bwe=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=n[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return tE(a);case"spring":return jwe();default:if(a.split("(")[0]==="cubic-bezier")return tE(a)}return typeof a=="function"?a:null};function Qm(e){"@babel/helpers - typeof";return Qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qm(e)}function nE(e){return Swe(e)||Nwe(e)||x6(e)||wwe()}function wwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nwe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Swe(e){if(Array.isArray(e))return wN(e)}function rE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function nr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rE(Object(n),!0).forEach(function(r){bN(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function bN(e,t,n){return t=Cwe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cwe(e){var t=_we(e,"string");return Qm(t)==="symbol"?t:String(t)}function _we(e,t){if(Qm(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Qm(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pwe(e,t){return Twe(e)||kwe(e,t)||x6(e,t)||Awe()}function Awe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function x6(e,t){if(e){if(typeof e=="string")return wN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wN(e,t)}}function wN(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function kwe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Twe(e){if(Array.isArray(e))return e}var Dv=function(t,n,r){return t+(n-t)*r},NN=function(t){var n=t.from,r=t.to;return n!==r},Ewe=function e(t,n,r){var a=Yh(function(i,o){if(NN(o)){var l=t(o.from,o.to,o.velocity),c=Pwe(l,2),u=c[0],d=c[1];return nr(nr({},o),{},{from:u,velocity:d})}return o},n);return r<1?Yh(function(i,o){return NN(o)?nr(nr({},o),{},{velocity:Dv(o.velocity,a[i].velocity,r),from:Dv(o.from,a[i].from,r)}):o},n):e(t,a,r-1)};const Owe=function(e,t,n,r,a){var i=lwe(e,t),o=i.reduce(function(g,x){return nr(nr({},g),{},bN({},x,[e[x],t[x]]))},{}),l=i.reduce(function(g,x){return nr(nr({},g),{},bN({},x,{from:e[x],velocity:0,to:t[x]}))},{}),c=-1,u,d,h=function(){return null},m=function(){return Yh(function(x,y){return y.from},l)},f=function(){return!Object.values(l).filter(NN).length},v=function(x){u||(u=x);var y=x-u,b=y/n.dt;l=Ewe(n,l,b),a(nr(nr(nr({},e),t),m())),u=x,f()||(c=requestAnimationFrame(h))},p=function(x){d||(d=x);var y=(x-d)/r,b=Yh(function(w,N){return Dv.apply(void 0,nE(N).concat([n(y)]))},o);if(a(nr(nr(nr({},e),t),b)),y<1)c=requestAnimationFrame(h);else{var C=Yh(function(w,N){return Dv.apply(void 0,nE(N).concat([n(1)]))},o);a(nr(nr(nr({},e),t),C))}};return h=n.isStepper?v:p,function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(c)}}};function Zu(e){"@babel/helpers - typeof";return Zu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zu(e)}var Dwe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Mwe(e,t){if(e==null)return{};var n=Iwe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Iwe(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function Nj(e){return Fwe(e)||Lwe(e)||Rwe(e)||$we()}function $we(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rwe(e,t){if(e){if(typeof e=="string")return SN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return SN(e,t)}}function Lwe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Fwe(e){if(Array.isArray(e))return SN(e)}function SN(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Vs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sE(Object(n),!0).forEach(function(r){Oh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Oh(e,t,n){return t=y6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zwe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y6(r.key),r)}}function Vwe(e,t,n){return t&&zwe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function y6(e){var t=qwe(e,"string");return Zu(t)==="symbol"?t:String(t)}function qwe(e,t){if(Zu(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Zu(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uwe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&CN(e,t)}function CN(e,t){return CN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},CN(e,t)}function Wwe(e){var t=Hwe();return function(){var r=Mv(e),a;if(t){var i=Mv(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return _N(this,a)}}function _N(e,t){if(t&&(Zu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PN(e)}function PN(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hwe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Mv(e){return Mv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Mv(e)}var ua=function(e){Uwe(n,e);var t=Wwe(n);function n(r,a){var i;Bwe(this,n),i=t.call(this,r,a);var o=i.props,l=o.isActive,c=o.attributeName,u=o.from,d=o.to,h=o.steps,m=o.children,f=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(PN(i)),i.changeStyle=i.changeStyle.bind(PN(i)),!l||f<=0)return i.state={style:{}},typeof m=="function"&&(i.state={style:d}),_N(i);if(h&&h.length)i.state={style:h[0].style};else if(u){if(typeof m=="function")return i.state={style:u},_N(i);i.state={style:c?Oh({},c,u):u}}else i.state={style:{}};return i}return Vwe(n,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,u=i.shouldReAnimate,d=i.to,h=i.from,m=this.state.style;if(l){if(!o){var f={style:c?Oh({},c,d):d};this.state&&m&&(c&&m[c]!==d||!c&&m!==d)&&this.setState(f);return}if(!(Jbe(a.to,d)&&a.canBegin&&a.isActive)){var v=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=v||u?h:a.to;if(this.state&&m){var g={style:c?Oh({},c,p):p};(c&&m[c]!==p||!c&&m!==p)&&this.setState(g)}this.runAnimation(Vs(Vs({},this.props),{},{from:p,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,l=a.to,c=a.duration,u=a.easing,d=a.begin,h=a.onAnimationEnd,m=a.onAnimationStart,f=Owe(o,l,bwe(u),c,this.changeStyle),v=function(){i.stopJSAnimation=f()};this.manager.start([m,d,v,c,h])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,l=a.begin,c=a.onAnimationStart,u=o[0],d=u.style,h=u.duration,m=h===void 0?0:h,f=function(p,g,x){if(x===0)return p;var y=g.duration,b=g.easing,C=b===void 0?"ease":b,w=g.style,N=g.properties,S=g.onAnimationEnd,_=x>0?o[x-1]:g,P=N||Object.keys(w);if(typeof C=="function"||C==="spring")return[].concat(Nj(p),[i.runJSAnimation.bind(i,{from:_.style,to:w,duration:y,easing:C}),y]);var A=ZT(P,y,C),E=Vs(Vs(Vs({},_.style),w),{},{transition:A});return[].concat(Nj(p),[E,y,S]).filter(cwe)};return this.manager.start([c].concat(Nj(o.reduce(f,[d,Math.max(m,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=awe());var i=a.begin,o=a.duration,l=a.attributeName,c=a.to,u=a.easing,d=a.onAnimationStart,h=a.onAnimationEnd,m=a.steps,f=a.children,v=this.manager;if(this.unSubscribe=v.subscribe(this.handleStyleChange),typeof u=="function"||typeof f=="function"||u==="spring"){this.runJSAnimation(a);return}if(m.length>1){this.runStepAnimation(a);return}var p=l?Oh({},l,c):c,g=ZT(Object.keys(p),o,u);v.start([d,i,Vs(Vs({},p),{},{transition:g}),o,h])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=Mwe(a,Dwe),u=j.Children.count(i),d=this.state.style;if(typeof i=="function")return i(d);if(!l||u===0||o<=0)return i;var h=function(f){var v=f.props,p=v.style,g=p===void 0?{}:p,x=v.className,y=j.cloneElement(f,Vs(Vs({},c),{},{style:Vs(Vs({},g),d),className:x}));return y};return u===1?h(j.Children.only(i)):L.createElement("div",null,j.Children.map(i,function(m){return h(m)}))}}]),n}(j.PureComponent);ua.displayName="Animate";ua.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};ua.propTypes={from:Tt.oneOfType([Tt.object,Tt.string]),to:Tt.oneOfType([Tt.object,Tt.string]),attributeName:Tt.string,duration:Tt.number,begin:Tt.number,easing:Tt.oneOfType([Tt.string,Tt.func]),steps:Tt.arrayOf(Tt.shape({duration:Tt.number.isRequired,style:Tt.object.isRequired,easing:Tt.oneOfType([Tt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Tt.func]),properties:Tt.arrayOf("string"),onAnimationEnd:Tt.func})),children:Tt.oneOfType([Tt.node,Tt.func]),isActive:Tt.bool,canBegin:Tt.bool,onAnimationEnd:Tt.func,shouldReAnimate:Tt.bool,onAnimationStart:Tt.func,onAnimationReStart:Tt.func};function Xm(e){"@babel/helpers - typeof";return Xm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xm(e)}function Iv(){return Iv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Iv.apply(this,arguments)}function Kwe(e,t){return Xwe(e)||Qwe(e,t)||Ywe(e,t)||Gwe()}function Gwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ywe(e,t){if(e){if(typeof e=="string")return aE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aE(e,t)}}function aE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qwe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Xwe(e){if(Array.isArray(e))return e}function iE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function oE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iE(Object(n),!0).forEach(function(r){Jwe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Jwe(e,t,n){return t=Zwe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zwe(e){var t=eNe(e,"string");return Xm(t)=="symbol"?t:t+""}function eNe(e,t){if(Xm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Xm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lE=function(t,n,r,a,i){var o=Math.min(Math.abs(r)/2,Math.abs(a)/2),l=a>=0?1:-1,c=r>=0?1:-1,u=a>=0&&r>=0||a<0&&r<0?1:0,d;if(o>0&&i instanceof Array){for(var h=[0,0,0,0],m=0,f=4;m<f;m++)h[m]=i[m]>o?o:i[m];d="M".concat(t,",").concat(n+l*h[0]),h[0]>0&&(d+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(u,",").concat(t+c*h[0],",").concat(n)),d+="L ".concat(t+r-c*h[1],",").concat(n),h[1]>0&&(d+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(u,`,
        `).concat(t+r,",").concat(n+l*h[1])),d+="L ".concat(t+r,",").concat(n+a-l*h[2]),h[2]>0&&(d+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(u,`,
        `).concat(t+r-c*h[2],",").concat(n+a)),d+="L ".concat(t+c*h[3],",").concat(n+a),h[3]>0&&(d+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(n+a-l*h[3])),d+="Z"}else if(o>0&&i===+i&&i>0){var v=Math.min(o,i);d="M ".concat(t,",").concat(n+l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t+c*v,",").concat(n,`
            L `).concat(t+r-c*v,",").concat(n,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t+r,",").concat(n+l*v,`
            L `).concat(t+r,",").concat(n+a-l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t+r-c*v,",").concat(n+a,`
            L `).concat(t+c*v,",").concat(n+a,`
            A `).concat(v,",").concat(v,",0,0,").concat(u,",").concat(t,",").concat(n+a-l*v," Z")}else d="M ".concat(t,",").concat(n," h ").concat(r," v ").concat(a," h ").concat(-r," Z");return d},tNe=function(t,n){if(!t||!n)return!1;var r=t.x,a=t.y,i=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(i,i+l),d=Math.max(i,i+l),h=Math.min(o,o+c),m=Math.max(o,o+c);return r>=u&&r<=d&&a>=h&&a<=m}return!1},nNe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},iC=function(t){var n=oE(oE({},nNe),t),r=j.useRef(),a=j.useState(-1),i=Kwe(a,2),o=i[0],l=i[1];j.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var C=r.current.getTotalLength();C&&l(C)}catch{}},[]);var c=n.x,u=n.y,d=n.width,h=n.height,m=n.radius,f=n.className,v=n.animationEasing,p=n.animationDuration,g=n.animationBegin,x=n.isAnimationActive,y=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||h!==+h||d===0||h===0)return null;var b=at("recharts-rectangle",f);return y?L.createElement(ua,{canBegin:o>0,from:{width:d,height:h,x:c,y:u},to:{width:d,height:h,x:c,y:u},duration:p,animationEasing:v,isActive:y},function(C){var w=C.width,N=C.height,S=C.x,_=C.y;return L.createElement(ua,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:p,isActive:x,easing:v},L.createElement("path",Iv({},Be(n,!0),{className:b,d:lE(S,_,w,N,m),ref:r})))}):L.createElement("path",Iv({},Be(n,!0),{className:b,d:lE(c,u,d,h,m)}))},rNe=["points","className","baseLinePoints","connectNulls"];function Yc(){return Yc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yc.apply(this,arguments)}function sNe(e,t){if(e==null)return{};var n=aNe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function aNe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function cE(e){return cNe(e)||lNe(e)||oNe(e)||iNe()}function iNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oNe(e,t){if(e){if(typeof e=="string")return AN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AN(e,t)}}function lNe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function cNe(e){if(Array.isArray(e))return AN(e)}function AN(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var uE=function(t){return t&&t.x===+t.x&&t.y===+t.y},uNe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return t.forEach(function(r){uE(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),uE(t[0])&&n[n.length-1].push(t[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},Qh=function(t,n){var r=uNe(t);n&&(r=[r.reduce(function(i,o){return[].concat(cE(i),cE(o))},[])]);var a=r.map(function(i){return i.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return r.length===1?"".concat(a,"Z"):a},dNe=function(t,n,r){var a=Qh(t,r);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(Qh(n.reverse(),r).slice(1))},hNe=function(t){var n=t.points,r=t.className,a=t.baseLinePoints,i=t.connectNulls,o=sNe(t,rNe);if(!n||!n.length)return null;var l=at("recharts-polygon",r);if(a&&a.length){var c=o.stroke&&o.stroke!=="none",u=dNe(n,a,i);return L.createElement("g",{className:l},L.createElement("path",Yc({},Be(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),c?L.createElement("path",Yc({},Be(o,!0),{fill:"none",d:Qh(n,i)})):null,c?L.createElement("path",Yc({},Be(o,!0),{fill:"none",d:Qh(a,i)})):null)}var d=Qh(n,i);return L.createElement("path",Yc({},Be(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",className:l,d}))};function kN(){return kN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kN.apply(this,arguments)}var Lf=function(t){var n=t.cx,r=t.cy,a=t.r,i=t.className,o=at("recharts-dot",i);return n===+n&&r===+r&&a===+a?j.createElement("circle",kN({},Be(t,!1),tv(t),{className:o,cx:n,cy:r,r:a})):null};function Jm(e){"@babel/helpers - typeof";return Jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jm(e)}var mNe=["x","y","top","left","width","height","className"];function TN(){return TN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},TN.apply(this,arguments)}function dE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function fNe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dE(Object(n),!0).forEach(function(r){pNe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pNe(e,t,n){return t=gNe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gNe(e){var t=vNe(e,"string");return Jm(t)=="symbol"?t:t+""}function vNe(e,t){if(Jm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Jm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xNe(e,t){if(e==null)return{};var n=yNe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function yNe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var jNe=function(t,n,r,a,i,o){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(o,",").concat(n,"h").concat(r)},bNe=function(t){var n=t.x,r=n===void 0?0:n,a=t.y,i=a===void 0?0:a,o=t.top,l=o===void 0?0:o,c=t.left,u=c===void 0?0:c,d=t.width,h=d===void 0?0:d,m=t.height,f=m===void 0?0:m,v=t.className,p=xNe(t,mNe),g=fNe({x:r,y:i,top:l,left:u,width:h,height:f},p);return!we(r)||!we(i)||!we(h)||!we(f)||!we(l)||!we(u)?null:L.createElement("path",TN({},Be(g,!0),{className:at("recharts-cross",v),d:jNe(r,i,h,f,l,u)}))},wNe=ky,NNe=E5,SNe=Ga;function CNe(e,t){return e&&e.length?wNe(e,SNe(t),NNe):void 0}var _Ne=CNe;const PNe=Ot(_Ne);var ANe=ky,kNe=Ga,TNe=O5;function ENe(e,t){return e&&e.length?ANe(e,kNe(t),TNe):void 0}var ONe=ENe;const DNe=Ot(ONe);var MNe=["cx","cy","angle","ticks","axisLine"],INe=["ticks","tick","angle","tickFormatter","stroke"];function ed(e){"@babel/helpers - typeof";return ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ed(e)}function Xh(){return Xh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xh.apply(this,arguments)}function hE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function tl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hE(Object(n),!0).forEach(function(r){Dy(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mE(e,t){if(e==null)return{};var n=$Ne(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function $Ne(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function RNe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b6(r.key),r)}}function LNe(e,t,n){return t&&fE(e.prototype,t),n&&fE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function FNe(e,t,n){return t=$v(t),BNe(e,j6()?Reflect.construct(t,n||[],$v(e).constructor):t.apply(e,n))}function BNe(e,t){if(t&&(ed(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zNe(e)}function zNe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(j6=function(){return!!e})()}function $v(e){return $v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$v(e)}function VNe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&EN(e,t)}function EN(e,t){return EN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},EN(e,t)}function Dy(e,t,n){return t=b6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b6(e){var t=qNe(e,"string");return ed(t)=="symbol"?t:t+""}function qNe(e,t){if(ed(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ed(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var My=function(e){function t(){return RNe(this,t),FNe(this,t,arguments)}return VNe(t,e),LNe(t,[{key:"getTickValueCoord",value:function(r){var a=r.coordinate,i=this.props,o=i.angle,l=i.cx,c=i.cy;return Yt(l,c,a,o)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,a;switch(r){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var r=this.props,a=r.cx,i=r.cy,o=r.angle,l=r.ticks,c=PNe(l,function(d){return d.coordinate||0}),u=DNe(l,function(d){return d.coordinate||0});return{cx:a,cy:i,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,a=r.cx,i=r.cy,o=r.angle,l=r.ticks,c=r.axisLine,u=mE(r,MNe),d=l.reduce(function(v,p){return[Math.min(v[0],p.coordinate),Math.max(v[1],p.coordinate)]},[1/0,-1/0]),h=Yt(a,i,d[0],o),m=Yt(a,i,d[1],o),f=tl(tl(tl({},Be(u,!1)),{},{fill:"none"},Be(c,!1)),{},{x1:h.x,y1:h.y,x2:m.x,y2:m.y});return L.createElement("line",Xh({className:"recharts-polar-radius-axis-line"},f))}},{key:"renderTicks",value:function(){var r=this,a=this.props,i=a.ticks,o=a.tick,l=a.angle,c=a.tickFormatter,u=a.stroke,d=mE(a,INe),h=this.getTickTextAnchor(),m=Be(d,!1),f=Be(o,!1),v=i.map(function(p,g){var x=r.getTickValueCoord(p),y=tl(tl(tl(tl({textAnchor:h,transform:"rotate(".concat(90-l,", ").concat(x.x,", ").concat(x.y,")")},m),{},{stroke:"none",fill:u},f),{},{index:g},x),{},{payload:p});return L.createElement(vt,Xh({className:at("recharts-polar-radius-axis-tick",i6(o)),key:"tick-".concat(p.coordinate)},Ql(r.props,p,g)),t.renderTickItem(o,y,c?c(p.value,g):p.value))});return L.createElement(vt,{className:"recharts-polar-radius-axis-ticks"},v)}},{key:"render",value:function(){var r=this.props,a=r.ticks,i=r.axisLine,o=r.tick;return!a||!a.length?null:L.createElement(vt,{className:at("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),Gn.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,a,i){var o;return L.isValidElement(r)?o=L.cloneElement(r,a):Ke(r)?o=r(a):o=L.createElement(Xl,Xh({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])}(j.PureComponent);Dy(My,"displayName","PolarRadiusAxis");Dy(My,"axisType","radiusAxis");Dy(My,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function td(e){"@babel/helpers - typeof";return td=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},td(e)}function dl(){return dl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dl.apply(this,arguments)}function pE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function nl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pE(Object(n),!0).forEach(function(r){Iy(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function UNe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,N6(r.key),r)}}function WNe(e,t,n){return t&&gE(e.prototype,t),n&&gE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function HNe(e,t,n){return t=Rv(t),KNe(e,w6()?Reflect.construct(t,n||[],Rv(e).constructor):t.apply(e,n))}function KNe(e,t){if(t&&(td(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return GNe(e)}function GNe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(w6=function(){return!!e})()}function Rv(e){return Rv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Rv(e)}function YNe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ON(e,t)}function ON(e,t){return ON=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},ON(e,t)}function Iy(e,t,n){return t=N6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N6(e){var t=QNe(e,"string");return td(t)=="symbol"?t:t+""}function QNe(e,t){if(td(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(td(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var XNe=Math.PI/180,vE=1e-5,$y=function(e){function t(){return UNe(this,t),HNe(this,t,arguments)}return YNe(t,e),WNe(t,[{key:"getTickLineCoord",value:function(r){var a=this.props,i=a.cx,o=a.cy,l=a.radius,c=a.orientation,u=a.tickSize,d=u||8,h=Yt(i,o,l,r.coordinate),m=Yt(i,o,l+(c==="inner"?-1:1)*d,r.coordinate);return{x1:h.x,y1:h.y,x2:m.x,y2:m.y}}},{key:"getTickTextAnchor",value:function(r){var a=this.props.orientation,i=Math.cos(-r.coordinate*XNe),o;return i>vE?o=a==="outer"?"start":"end":i<-vE?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var r=this.props,a=r.cx,i=r.cy,o=r.radius,l=r.axisLine,c=r.axisLineType,u=nl(nl({},Be(this.props,!1)),{},{fill:"none"},Be(l,!1));if(c==="circle")return L.createElement(Lf,dl({className:"recharts-polar-angle-axis-line"},u,{cx:a,cy:i,r:o}));var d=this.props.ticks,h=d.map(function(m){return Yt(a,i,o,m.coordinate)});return L.createElement(hNe,dl({className:"recharts-polar-angle-axis-line"},u,{points:h}))}},{key:"renderTicks",value:function(){var r=this,a=this.props,i=a.ticks,o=a.tick,l=a.tickLine,c=a.tickFormatter,u=a.stroke,d=Be(this.props,!1),h=Be(o,!1),m=nl(nl({},d),{},{fill:"none"},Be(l,!1)),f=i.map(function(v,p){var g=r.getTickLineCoord(v),x=r.getTickTextAnchor(v),y=nl(nl(nl({textAnchor:x},d),{},{stroke:"none",fill:u},h),{},{index:p,payload:v,x:g.x2,y:g.y2});return L.createElement(vt,dl({className:at("recharts-polar-angle-axis-tick",i6(o)),key:"tick-".concat(v.coordinate)},Ql(r.props,v,p)),l&&L.createElement("line",dl({className:"recharts-polar-angle-axis-tick-line"},m,g)),o&&t.renderTickItem(o,y,c?c(v.value,p):v.value))});return L.createElement(vt,{className:"recharts-polar-angle-axis-ticks"},f)}},{key:"render",value:function(){var r=this.props,a=r.ticks,i=r.radius,o=r.axisLine;return i<=0||!a||!a.length?null:L.createElement(vt,{className:at("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,a,i){var o;return L.isValidElement(r)?o=L.cloneElement(r,a):Ke(r)?o=r(a):o=L.createElement(Xl,dl({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])}(j.PureComponent);Iy($y,"displayName","PolarAngleAxis");Iy($y,"axisType","angleAxis");Iy($y,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var JNe=PF,ZNe=JNe(Object.getPrototypeOf,Object),e1e=ZNe,t1e=Oi,n1e=e1e,r1e=Di,s1e="[object Object]",a1e=Function.prototype,i1e=Object.prototype,S6=a1e.toString,o1e=i1e.hasOwnProperty,l1e=S6.call(Object);function c1e(e){if(!r1e(e)||t1e(e)!=s1e)return!1;var t=n1e(e);if(t===null)return!0;var n=o1e.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&S6.call(n)==l1e}var u1e=c1e;const d1e=Ot(u1e);var h1e=Oi,m1e=Di,f1e="[object Boolean]";function p1e(e){return e===!0||e===!1||m1e(e)&&h1e(e)==f1e}var g1e=p1e;const v1e=Ot(g1e);function Zm(e){"@babel/helpers - typeof";return Zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zm(e)}function Lv(){return Lv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lv.apply(this,arguments)}function x1e(e,t){return w1e(e)||b1e(e,t)||j1e(e,t)||y1e()}function y1e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j1e(e,t){if(e){if(typeof e=="string")return xE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xE(e,t)}}function xE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b1e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function w1e(e){if(Array.isArray(e))return e}function yE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function jE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yE(Object(n),!0).forEach(function(r){N1e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function N1e(e,t,n){return t=S1e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S1e(e){var t=C1e(e,"string");return Zm(t)=="symbol"?t:t+""}function C1e(e,t){if(Zm(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Zm(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bE=function(t,n,r,a,i){var o=r-a,l;return l="M ".concat(t,",").concat(n),l+="L ".concat(t+r,",").concat(n),l+="L ".concat(t+r-o/2,",").concat(n+i),l+="L ".concat(t+r-o/2-a,",").concat(n+i),l+="L ".concat(t,",").concat(n," Z"),l},_1e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},P1e=function(t){var n=jE(jE({},_1e),t),r=j.useRef(),a=j.useState(-1),i=x1e(a,2),o=i[0],l=i[1];j.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var b=r.current.getTotalLength();b&&l(b)}catch{}},[]);var c=n.x,u=n.y,d=n.upperWidth,h=n.lowerWidth,m=n.height,f=n.className,v=n.animationEasing,p=n.animationDuration,g=n.animationBegin,x=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||h!==+h||m!==+m||d===0&&h===0||m===0)return null;var y=at("recharts-trapezoid",f);return x?L.createElement(ua,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:m,x:c,y:u},to:{upperWidth:d,lowerWidth:h,height:m,x:c,y:u},duration:p,animationEasing:v,isActive:x},function(b){var C=b.upperWidth,w=b.lowerWidth,N=b.height,S=b.x,_=b.y;return L.createElement(ua,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:p,easing:v},L.createElement("path",Lv({},Be(n,!0),{className:y,d:bE(S,_,C,w,N),ref:r})))}):L.createElement("g",null,L.createElement("path",Lv({},Be(n,!0),{className:y,d:bE(c,u,d,h,m)})))},A1e=["option","shapeType","propTransformer","activeClassName","isActive"];function ef(e){"@babel/helpers - typeof";return ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ef(e)}function k1e(e,t){if(e==null)return{};var n=T1e(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function T1e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function wE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Fv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wE(Object(n),!0).forEach(function(r){E1e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function E1e(e,t,n){return t=O1e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O1e(e){var t=D1e(e,"string");return ef(t)=="symbol"?t:t+""}function D1e(e,t){if(ef(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ef(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function M1e(e,t){return Fv(Fv({},t),e)}function I1e(e,t){return e==="symbols"}function NE(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return L.createElement(iC,n);case"trapezoid":return L.createElement(P1e,n);case"sector":return L.createElement(c6,n);case"symbols":if(I1e(t))return L.createElement(C2,n);break;default:return null}}function $1e(e){return j.isValidElement(e)?e.props:e}function C6(e){var t=e.option,n=e.shapeType,r=e.propTransformer,a=r===void 0?M1e:r,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=k1e(e,A1e),u;if(j.isValidElement(t))u=j.cloneElement(t,Fv(Fv({},c),$1e(t)));else if(Ke(t))u=t(c);else if(d1e(t)&&!v1e(t)){var d=a(t,c);u=L.createElement(NE,{shapeType:n,elementProps:d})}else{var h=c;u=L.createElement(NE,{shapeType:n,elementProps:h})}return l?L.createElement(vt,{className:o},u):u}function Ry(e,t){return t!=null&&"trapezoids"in e.props}function Ly(e,t){return t!=null&&"sectors"in e.props}function tf(e,t){return t!=null&&"points"in e.props}function R1e(e,t){var n,r,a=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,i=e.y===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.y)||e.y===t.y;return a&&i}function L1e(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function F1e(e,t){var n=e.x===t.x,r=e.y===t.y,a=e.z===t.z;return n&&r&&a}function B1e(e,t){var n;return Ry(e,t)?n=R1e:Ly(e,t)?n=L1e:tf(e,t)&&(n=F1e),n}function z1e(e,t){var n;return Ry(e,t)?n="trapezoids":Ly(e,t)?n="sectors":tf(e,t)&&(n="points"),n}function V1e(e,t){if(Ry(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(Ly(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return tf(e,t)?t.payload:{}}function q1e(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,a=z1e(n,t),i=V1e(n,t),o=r.filter(function(c,u){var d=Jl(i,c),h=n.props[a].filter(function(v){var p=B1e(n,t);return p(v,t)}),m=n.props[a].indexOf(h[h.length-1]),f=u===m;return d&&f}),l=r.indexOf(o[o.length-1]);return l}var og;function nd(e){"@babel/helpers - typeof";return nd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nd(e)}function Qc(){return Qc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qc.apply(this,arguments)}function SE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ht(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SE(Object(n),!0).forEach(function(r){_s(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function U1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,P6(r.key),r)}}function W1e(e,t,n){return t&&CE(e.prototype,t),n&&CE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function H1e(e,t,n){return t=Bv(t),K1e(e,_6()?Reflect.construct(t,n||[],Bv(e).constructor):t.apply(e,n))}function K1e(e,t){if(t&&(nd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return G1e(e)}function G1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_6=function(){return!!e})()}function Bv(e){return Bv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Bv(e)}function Y1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&DN(e,t)}function DN(e,t){return DN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},DN(e,t)}function _s(e,t,n){return t=P6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P6(e){var t=Q1e(e,"string");return nd(t)=="symbol"?t:t+""}function Q1e(e,t){if(nd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(nd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ga=function(e){function t(n){var r;return U1e(this,t),r=H1e(this,t,[n]),_s(r,"pieRef",null),_s(r,"sectorRefs",[]),_s(r,"id",hc("recharts-pie-")),_s(r,"handleAnimationEnd",function(){var a=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Ke(a)&&a()}),_s(r,"handleAnimationStart",function(){var a=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Ke(a)&&a()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return Y1e(t,e),W1e(t,[{key:"isActiveIndex",value:function(r){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(r)!==-1:r===a}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,l=i.labelLine,c=i.dataKey,u=i.valueKey,d=Be(this.props,!1),h=Be(o,!1),m=Be(l,!1),f=o&&o.offsetRadius||20,v=r.map(function(p,g){var x=(p.startAngle+p.endAngle)/2,y=Yt(p.cx,p.cy,p.outerRadius+f,x),b=Ht(Ht(Ht(Ht({},d),p),{},{stroke:"none"},h),{},{index:g,textAnchor:t.getTextAnchor(y.x,p.cx)},y),C=Ht(Ht(Ht(Ht({},d),p),{},{fill:"none",stroke:p.fill},m),{},{index:g,points:[Yt(p.cx,p.cy,p.outerRadius,x),y]}),w=c;return et(c)&&et(u)?w="value":et(c)&&(w=u),L.createElement(vt,{key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(g)},l&&t.renderLabelLineItem(l,C,"line"),t.renderLabelItem(o,b,jn(p,w)))});return L.createElement(vt,{className:"recharts-pie-labels"},v)}},{key:"renderSectorsStatically",value:function(r){var a=this,i=this.props,o=i.activeShape,l=i.blendStroke,c=i.inactiveShape;return r.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&r.length!==1)return null;var h=a.isActiveIndex(d),m=c&&a.hasActiveIndex()?c:null,f=h?o:m,v=Ht(Ht({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return L.createElement(vt,Qc({ref:function(g){g&&!a.sectorRefs.includes(g)&&a.sectorRefs.push(g)},tabIndex:-1,className:"recharts-pie-sector"},Ql(a.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),L.createElement(C6,Qc({option:f,isActive:h,shapeType:"sector"},v)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,a=this.props,i=a.sectors,o=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,u=a.animationEasing,d=a.animationId,h=this.state,m=h.prevSectors,f=h.prevIsAnimationActive;return L.createElement(ua,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(f),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(v){var p=v.t,g=[],x=i&&i[0],y=x.startAngle;return i.forEach(function(b,C){var w=m&&m[C],N=C>0?ds(b,"paddingAngle",0):0;if(w){var S=Rn(w.endAngle-w.startAngle,b.endAngle-b.startAngle),_=Ht(Ht({},b),{},{startAngle:y+N,endAngle:y+S(p)+N});g.push(_),y=_.endAngle}else{var P=b.endAngle,A=b.startAngle,E=Rn(0,P-A),k=E(p),I=Ht(Ht({},b),{},{startAngle:y+N,endAngle:y+k+N});g.push(I),y=I.endAngle}}),L.createElement(vt,null,r.renderSectorsStatically(g))})}},{key:"attachKeyboardHandlers",value:function(r){var a=this;r.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,a=r.sectors,i=r.isAnimationActive,o=this.state.prevSectors;return i&&a&&a.length&&(!o||!Jl(o,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,a=this.props,i=a.hide,o=a.sectors,l=a.className,c=a.label,u=a.cx,d=a.cy,h=a.innerRadius,m=a.outerRadius,f=a.isAnimationActive,v=this.state.isAnimationFinished;if(i||!o||!o.length||!we(u)||!we(d)||!we(h)||!we(m))return null;var p=at("recharts-pie",l);return L.createElement(vt,{tabIndex:this.props.rootTabIndex,className:p,ref:function(x){r.pieRef=x}},this.renderSectors(),c&&this.renderLabels(o),Gn.renderCallByParent(this.props,null,!1),(!f||v)&&Ba.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,a){return a.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==a.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:r.sectors!==a.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,a){return r>a?"start":r<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,a,i){if(L.isValidElement(r))return L.cloneElement(r,a);if(Ke(r))return r(a);var o=at("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return L.createElement(Il,Qc({},a,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(r,a,i){if(L.isValidElement(r))return L.cloneElement(r,a);var o=i;if(Ke(r)&&(o=r(a),L.isValidElement(o)))return o;var l=at("recharts-pie-label-text",typeof r!="boolean"&&!Ke(r)?r.className:"");return L.createElement(Xl,Qc({},a,{alignmentBaseline:"middle",className:l}),o)}}])}(j.PureComponent);og=ga;_s(ga,"displayName","Pie");_s(ga,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!aa.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});_s(ga,"parseDeltaAngle",function(e,t){var n=Pr(t-e),r=Math.min(Math.abs(t-e),360);return n*r});_s(ga,"getRealPieData",function(e){var t=e.data,n=e.children,r=Be(e,!1),a=hs(n,Hd);return t&&t.length?t.map(function(i,o){return Ht(Ht(Ht({payload:i},r),i),a&&a[o]&&a[o].props)}):a&&a.length?a.map(function(i){return Ht(Ht({},r),i.props)}):[]});_s(ga,"parseCoordinateOfPie",function(e,t){var n=t.top,r=t.left,a=t.width,i=t.height,o=a6(a,i),l=r+Ar(e.cx,a,a/2),c=n+Ar(e.cy,i,i/2),u=Ar(e.innerRadius,o,0),d=Ar(e.outerRadius,o,o*.8),h=e.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:h}});_s(ga,"getComposedData",function(e){var t=e.item,n=e.offset,r=t.type.defaultProps!==void 0?Ht(Ht({},t.type.defaultProps),t.props):t.props,a=og.getRealPieData(r);if(!a||!a.length)return null;var i=r.cornerRadius,o=r.startAngle,l=r.endAngle,c=r.paddingAngle,u=r.dataKey,d=r.nameKey,h=r.valueKey,m=r.tooltipType,f=Math.abs(r.minAngle),v=og.parseCoordinateOfPie(r,n),p=og.parseDeltaAngle(o,l),g=Math.abs(p),x=u;et(u)&&et(h)?(sa(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x="value"):et(u)&&(sa(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x=h);var y=a.filter(function(_){return jn(_,x,0)!==0}).length,b=(g>=360?y:y-1)*c,C=g-y*f-b,w=a.reduce(function(_,P){var A=jn(P,x,0);return _+(we(A)?A:0)},0),N;if(w>0){var S;N=a.map(function(_,P){var A=jn(_,x,0),E=jn(_,d,P),k=(we(A)?A:0)/w,I;P?I=S.endAngle+Pr(p)*c*(A!==0?1:0):I=o;var D=I+Pr(p)*((A!==0?f:0)+k*C),U=(I+D)/2,B=(v.innerRadius+v.outerRadius)/2,K=[{name:E,value:A,payload:_,dataKey:x,type:m}],T=Yt(v.cx,v.cy,B,U);return S=Ht(Ht(Ht({percent:k,cornerRadius:i,name:E,tooltipPayload:K,midAngle:U,middleRadius:B,tooltipPosition:T},_),v),{},{value:jn(_,x),startAngle:I,endAngle:D,payload:_,paddingAngle:Pr(p)*c}),S})}return Ht(Ht({},v),{},{sectors:N,data:a})});var X1e=Math.ceil,J1e=Math.max;function Z1e(e,t,n,r){for(var a=-1,i=J1e(X1e((t-e)/(n||1)),0),o=Array(i);i--;)o[r?i:++a]=e,e+=n;return o}var eSe=Z1e,tSe=HF,_E=1/0,nSe=17976931348623157e292;function rSe(e){if(!e)return e===0?e:0;if(e=tSe(e),e===_E||e===-_E){var t=e<0?-1:1;return t*nSe}return e===e?e:0}var A6=rSe,sSe=eSe,aSe=wy,Sj=A6;function iSe(e){return function(t,n,r){return r&&typeof r!="number"&&aSe(t,n,r)&&(n=r=void 0),t=Sj(t),n===void 0?(n=t,t=0):n=Sj(n),r=r===void 0?t<n?1:-1:Sj(r),sSe(t,n,r,e)}}var oSe=iSe,lSe=oSe,cSe=lSe(),uSe=cSe;const zv=Ot(uSe);function nf(e){"@babel/helpers - typeof";return nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nf(e)}function PE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function AE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?PE(Object(n),!0).forEach(function(r){k6(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function k6(e,t,n){return t=dSe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dSe(e){var t=hSe(e,"string");return nf(t)=="symbol"?t:t+""}function hSe(e,t){if(nf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(nf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mSe=["Webkit","Moz","O","ms"],fSe=function(t,n){var r=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=mSe.reduce(function(i,o){return AE(AE({},i),{},k6({},o+r,n))},{});return a[t]=n,a};function rd(e){"@babel/helpers - typeof";return rd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rd(e)}function Vv(){return Vv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vv.apply(this,arguments)}function kE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Cj(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kE(Object(n),!0).forEach(function(r){ns(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,E6(r.key),r)}}function gSe(e,t,n){return t&&TE(e.prototype,t),n&&TE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function vSe(e,t,n){return t=qv(t),xSe(e,T6()?Reflect.construct(t,n||[],qv(e).constructor):t.apply(e,n))}function xSe(e,t){if(t&&(rd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ySe(e)}function ySe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(T6=function(){return!!e})()}function qv(e){return qv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qv(e)}function jSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&MN(e,t)}function MN(e,t){return MN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},MN(e,t)}function ns(e,t,n){return t=E6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E6(e){var t=bSe(e,"string");return rd(t)=="symbol"?t:t+""}function bSe(e,t){if(rd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(rd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wSe=function(t){var n=t.data,r=t.startIndex,a=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!n||!n.length)return{};var c=n.length,u=Kh().domain(zv(0,c)).range([i,i+o-l]),d=u.domain().map(function(h){return u(h)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(a),scale:u,scaleValues:d}},EE=function(t){return t.changedTouches&&!!t.changedTouches.length},sd=function(e){function t(n){var r;return pSe(this,t),r=vSe(this,t,[n]),ns(r,"handleDrag",function(a){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(a):r.state.isSlideMoving&&r.handleSlideDrag(a)}),ns(r,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&r.handleDrag(a.changedTouches[0])}),ns(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=r.props,i=a.endIndex,o=a.onDragEnd,l=a.startIndex;o==null||o({endIndex:i,startIndex:l})}),r.detachDragEndListener()}),ns(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),ns(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),ns(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),ns(r,"handleSlideDragStart",function(a){var i=EE(a)?a.changedTouches[0]:a;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return jSe(t,e),gSe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var a=r.startX,i=r.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,h=Math.min(a,i),m=Math.max(a,i),f=t.getIndexInRange(o,h),v=t.getIndexInRange(o,m);return{startIndex:f-f%c,endIndex:v===d?d:v-v%c}}},{key:"getTextOfTick",value:function(r){var a=this.props,i=a.data,o=a.tickFormatter,l=a.dataKey,c=jn(i[r],l,r);return Ke(o)?o(c,r):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var a=this.state,i=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,u=c.x,d=c.width,h=c.travellerWidth,m=c.startIndex,f=c.endIndex,v=c.onChange,p=r.pageX-i;p>0?p=Math.min(p,u+d-h-l,u+d-h-o):p<0&&(p=Math.max(p,u-o,u-l));var g=this.getIndex({startX:o+p,endX:l+p});(g.startIndex!==m||g.endIndex!==f)&&v&&v(g),this.setState({startX:o+p,endX:l+p,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,a){var i=EE(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,u=this.state[o],d=this.props,h=d.x,m=d.width,f=d.travellerWidth,v=d.onChange,p=d.gap,g=d.data,x={startX:this.state.startX,endX:this.state.endX},y=r.pageX-i;y>0?y=Math.min(y,h+m-f-u):y<0&&(y=Math.max(y,h-u)),x[o]=u+y;var b=this.getIndex(x),C=b.startIndex,w=b.endIndex,N=function(){var _=g.length-1;return o==="startX"&&(l>c?C%p===0:w%p===0)||l<c&&w===_||o==="endX"&&(l>c?w%p===0:C%p===0)||l>c&&w===_};this.setState(ns(ns({},o,u+y),"brushMoveStartX",r.pageX),function(){v&&N()&&v(b)})}},{key:"handleTravellerMoveKeyboard",value:function(r,a){var i=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,d=this.state[a],h=l.indexOf(d);if(h!==-1){var m=h+r;if(!(m===-1||m>=l.length)){var f=l[m];a==="startX"&&f>=u||a==="endX"&&f<=c||this.setState(ns({},a,f),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,a=r.x,i=r.y,o=r.width,l=r.height,c=r.fill,u=r.stroke;return L.createElement("rect",{stroke:u,fill:c,x:a,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var r=this.props,a=r.x,i=r.y,o=r.width,l=r.height,c=r.data,u=r.children,d=r.padding,h=j.Children.only(u);return h?L.cloneElement(h,{x:a,y:i,width:o,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(r,a){var i,o,l=this,c=this.props,u=c.y,d=c.travellerWidth,h=c.height,m=c.traveller,f=c.ariaLabel,v=c.data,p=c.startIndex,g=c.endIndex,x=Math.max(r,this.props.x),y=Cj(Cj({},Be(this.props,!1)),{},{x,y:u,width:d,height:h}),b=f||"Min value: ".concat((i=v[p])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=v[g])===null||o===void 0?void 0:o.name);return L.createElement(vt,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(w){["ArrowLeft","ArrowRight"].includes(w.key)&&(w.preventDefault(),w.stopPropagation(),l.handleTravellerMoveKeyboard(w.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(m,y))}},{key:"renderSlide",value:function(r,a){var i=this.props,o=i.y,l=i.height,c=i.stroke,u=i.travellerWidth,d=Math.min(r,a)+u,h=Math.max(Math.abs(a-r)-u,0);return L.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:o,width:h,height:l})}},{key:"renderText",value:function(){var r=this.props,a=r.startIndex,i=r.endIndex,o=r.y,l=r.height,c=r.travellerWidth,u=r.stroke,d=this.state,h=d.startX,m=d.endX,f=5,v={pointerEvents:"none",fill:u};return L.createElement(vt,{className:"recharts-brush-texts"},L.createElement(Xl,Vv({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,m)-f,y:o+l/2},v),this.getTextOfTick(a)),L.createElement(Xl,Vv({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,m)+c+f,y:o+l/2},v),this.getTextOfTick(i)))}},{key:"render",value:function(){var r=this.props,a=r.data,i=r.className,o=r.children,l=r.x,c=r.y,u=r.width,d=r.height,h=r.alwaysShowText,m=this.state,f=m.startX,v=m.endX,p=m.isTextActive,g=m.isSlideMoving,x=m.isTravellerMoving,y=m.isTravellerFocused;if(!a||!a.length||!we(l)||!we(c)||!we(u)||!we(d)||u<=0||d<=0)return null;var b=at("recharts-brush",i),C=L.Children.count(o)===1,w=fSe("userSelect","none");return L.createElement(vt,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),C&&this.renderPanorama(),this.renderSlide(f,v),this.renderTravellerLayer(f,"startX"),this.renderTravellerLayer(v,"endX"),(p||g||x||y||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var a=r.x,i=r.y,o=r.width,l=r.height,c=r.stroke,u=Math.floor(i+l/2)-1;return L.createElement(L.Fragment,null,L.createElement("rect",{x:a,y:i,width:o,height:l,fill:c,stroke:"none"}),L.createElement("line",{x1:a+1,y1:u,x2:a+o-1,y2:u,fill:"none",stroke:"#fff"}),L.createElement("line",{x1:a+1,y1:u+2,x2:a+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,a){var i;return L.isValidElement(r)?i=L.cloneElement(r,a):Ke(r)?i=r(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(r,a){var i=r.data,o=r.width,l=r.x,c=r.travellerWidth,u=r.updateId,d=r.startIndex,h=r.endIndex;if(i!==a.prevData||u!==a.prevUpdateId)return Cj({prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},i&&i.length?wSe({data:i,width:o,x:l,travellerWidth:c,startIndex:d,endIndex:h}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var m=a.scale.domain().map(function(f){return a.scale(f)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:a.scale(r.startIndex),endX:a.scale(r.endIndex),scaleValues:m}}return null}},{key:"getIndexInRange",value:function(r,a){for(var i=r.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);r[c]>a?l=c:o=c}return a>=r[l]?l:o}}])}(j.PureComponent);ns(sd,"displayName","Brush");ns(sd,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var NSe=O2;function SSe(e,t){var n;return NSe(e,function(r,a,i){return n=t(r,a,i),!n}),!!n}var CSe=SSe,_Se=yF,PSe=Ga,ASe=CSe,kSe=Qr,TSe=wy;function ESe(e,t,n){var r=kSe(e)?_Se:ASe;return n&&TSe(e,t,n)&&(t=void 0),r(e,PSe(t))}var OSe=ESe;const DSe=Ot(OSe);var za=function(t,n){var r=t.alwaysShow,a=t.ifOverflow;return r&&(a="extendDomain"),a===n},OE=zF;function MSe(e,t,n){t=="__proto__"&&OE?OE(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var ISe=MSe,$Se=ISe,RSe=FF,LSe=Ga;function FSe(e,t){var n={};return t=LSe(t),RSe(e,function(r,a,i){$Se(n,a,t(r,a,i))}),n}var BSe=FSe;const zSe=Ot(BSe);function VSe(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}var qSe=VSe,USe=O2;function WSe(e,t){var n=!0;return USe(e,function(r,a,i){return n=!!t(r,a,i),n}),n}var HSe=WSe,KSe=qSe,GSe=HSe,YSe=Ga,QSe=Qr,XSe=wy;function JSe(e,t,n){var r=QSe(e)?KSe:GSe;return n&&XSe(e,t,n)&&(t=void 0),r(e,YSe(t))}var ZSe=JSe;const O6=Ot(ZSe);var e2e=["x","y"];function rf(e){"@babel/helpers - typeof";return rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rf(e)}function IN(){return IN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IN.apply(this,arguments)}function DE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function wh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DE(Object(n),!0).forEach(function(r){t2e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function t2e(e,t,n){return t=n2e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n2e(e){var t=r2e(e,"string");return rf(t)=="symbol"?t:t+""}function r2e(e,t){if(rf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(rf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function s2e(e,t){if(e==null)return{};var n=a2e(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function a2e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function i2e(e,t){var n=e.x,r=e.y,a=s2e(e,e2e),i="".concat(n),o=parseInt(i,10),l="".concat(r),c=parseInt(l,10),u="".concat(t.height||a.height),d=parseInt(u,10),h="".concat(t.width||a.width),m=parseInt(h,10);return wh(wh(wh(wh(wh({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:m,name:t.name,radius:t.radius})}function ME(e){return L.createElement(C6,IN({shapeType:"rectangle",propTransformer:i2e,activeClassName:"recharts-active-bar"},e))}var o2e=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,a){if(typeof t=="number")return t;var i=we(r)||Dae(r);return i?t(r,a):(i||ec(),n)}},l2e=["value","background"],D6;function ad(e){"@babel/helpers - typeof";return ad=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ad(e)}function c2e(e,t){if(e==null)return{};var n=u2e(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function u2e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Uv(){return Uv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Uv.apply(this,arguments)}function IE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Cn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IE(Object(n),!0).forEach(function(r){go(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function d2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,I6(r.key),r)}}function h2e(e,t,n){return t&&$E(e.prototype,t),n&&$E(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function m2e(e,t,n){return t=Wv(t),f2e(e,M6()?Reflect.construct(t,n||[],Wv(e).constructor):t.apply(e,n))}function f2e(e,t){if(t&&(ad(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p2e(e)}function p2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(M6=function(){return!!e})()}function Wv(e){return Wv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Wv(e)}function g2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$N(e,t)}function $N(e,t){return $N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},$N(e,t)}function go(e,t,n){return t=I6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I6(e){var t=v2e(e,"string");return ad(t)=="symbol"?t:t+""}function v2e(e,t){if(ad(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ad(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ea=function(e){function t(){var n;d2e(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=m2e(this,t,[].concat(a)),go(n,"state",{isAnimationFinished:!1}),go(n,"id",hc("recharts-bar-")),go(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),go(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return g2e(t,e),h2e(t,[{key:"renderRectanglesStatically",value:function(r){var a=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,u=i.activeBar,d=Be(this.props,!1);return r&&r.map(function(h,m){var f=m===c,v=f?u:o,p=Cn(Cn(Cn({},d),h),{},{isActive:f,option:v,index:m,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return L.createElement(vt,Uv({className:"recharts-bar-rectangle"},Ql(a.props,h,m),{key:"rectangle-".concat(h==null?void 0:h.x,"-").concat(h==null?void 0:h.y,"-").concat(h==null?void 0:h.value,"-").concat(m)}),L.createElement(ME,p))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,a=this.props,i=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,u=a.animationDuration,d=a.animationEasing,h=a.animationId,m=this.state.prevData;return L.createElement(ua,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(f){var v=f.t,p=i.map(function(g,x){var y=m&&m[x];if(y){var b=Rn(y.x,g.x),C=Rn(y.y,g.y),w=Rn(y.width,g.width),N=Rn(y.height,g.height);return Cn(Cn({},g),{},{x:b(v),y:C(v),width:w(v),height:N(v)})}if(o==="horizontal"){var S=Rn(0,g.height),_=S(v);return Cn(Cn({},g),{},{y:g.y+g.height-_,height:_})}var P=Rn(0,g.width),A=P(v);return Cn(Cn({},g),{},{width:A})});return L.createElement(vt,null,r.renderRectanglesStatically(p))})}},{key:"renderRectangles",value:function(){var r=this.props,a=r.data,i=r.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!Jl(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var r=this,a=this.props,i=a.data,o=a.dataKey,l=a.activeIndex,c=Be(this.props.background,!1);return i.map(function(u,d){u.value;var h=u.background,m=c2e(u,l2e);if(!h)return null;var f=Cn(Cn(Cn(Cn(Cn({},m),{},{fill:"#eee"},h),c),Ql(r.props,u,d)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return L.createElement(ME,Uv({key:"background-bar-".concat(d),option:r.props.background,isActive:d===l},f))})}},{key:"renderErrorBar",value:function(r,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,h=hs(d,Rf);if(!h)return null;var m=u==="vertical"?o[0].height/2:o[0].width/2,f=function(g,x){var y=Array.isArray(g.value)?g.value[1]:g.value;return{x:g.x,y:g.y,value:y,errorVal:jn(g,x)}},v={clipPath:r?"url(#clipPath-".concat(a,")"):null};return L.createElement(vt,v,h.map(function(p){return L.cloneElement(p,{key:"error-bar-".concat(a,"-").concat(p.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:m,dataPointFormatter:f})}))}},{key:"render",value:function(){var r=this.props,a=r.hide,i=r.data,o=r.className,l=r.xAxis,c=r.yAxis,u=r.left,d=r.top,h=r.width,m=r.height,f=r.isAnimationActive,v=r.background,p=r.id;if(a||!i||!i.length)return null;var g=this.state.isAnimationFinished,x=at("recharts-bar",o),y=l&&l.allowDataOverflow,b=c&&c.allowDataOverflow,C=y||b,w=et(p)?this.id:p;return L.createElement(vt,{className:x},y||b?L.createElement("defs",null,L.createElement("clipPath",{id:"clipPath-".concat(w)},L.createElement("rect",{x:y?u:u-h/2,y:b?d:d-m/2,width:y?h:h*2,height:b?m:m*2}))):null,L.createElement(vt,{className:"recharts-bar-rectangles",clipPath:C?"url(#clipPath-".concat(w,")"):null},v?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(C,w),(!f||g)&&Ba.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(r,a){return r.animationId!==a.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:a.curData}:r.data!==a.curData?{curData:r.data}:null}}])}(j.PureComponent);D6=Ea;go(Ea,"displayName","Bar");go(Ea,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!aa.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});go(Ea,"getComposedData",function(e){var t=e.props,n=e.item,r=e.barPosition,a=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,h=e.displayedData,m=e.offset,f=X0e(r,n);if(!f)return null;var v=t.layout,p=n.type.defaultProps,g=p!==void 0?Cn(Cn({},p),n.props):n.props,x=g.dataKey,y=g.children,b=g.minPointSize,C=v==="horizontal"?o:i,w=u?C.scale.domain():null,N=sje({numericAxis:C}),S=hs(y,Hd),_=h.map(function(P,A){var E,k,I,D,U,B;u?E=J0e(u[d+A],w):(E=jn(P,x),Array.isArray(E)||(E=[N,E]));var K=o2e(b,D6.defaultProps.minPointSize)(E[1],A);if(v==="horizontal"){var T,$=[o.scale(E[0]),o.scale(E[1])],G=$[0],Q=$[1];k=CT({axis:i,ticks:l,bandSize:a,offset:f.offset,entry:P,index:A}),I=(T=Q??G)!==null&&T!==void 0?T:void 0,D=f.size;var ne=G-Q;if(U=Number.isNaN(ne)?0:ne,B={x:k,y:o.y,width:D,height:o.height},Math.abs(K)>0&&Math.abs(U)<Math.abs(K)){var oe=Pr(U||K)*(Math.abs(K)-Math.abs(U));I-=oe,U+=oe}}else{var M=[i.scale(E[0]),i.scale(E[1])],ue=M[0],ve=M[1];if(k=ue,I=CT({axis:o,ticks:c,bandSize:a,offset:f.offset,entry:P,index:A}),D=ve-ue,U=f.size,B={x:i.x,y:I,width:i.width,height:U},Math.abs(K)>0&&Math.abs(D)<Math.abs(K)){var ce=Pr(D||K)*(Math.abs(K)-Math.abs(D));D+=ce}}return Cn(Cn(Cn({},P),{},{x:k,y:I,width:D,height:U,value:u?E:E[1],payload:P,background:B},S&&S[A]&&S[A].props),{},{tooltipPayload:[r6(n,P)],tooltipPosition:{x:k+D/2,y:I+U/2}})});return Cn({data:_,layout:v},m)});function sf(e){"@babel/helpers - typeof";return sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sf(e)}function x2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,$6(r.key),r)}}function y2e(e,t,n){return t&&RE(e.prototype,t),n&&RE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function LE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Qs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LE(Object(n),!0).forEach(function(r){Fy(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Fy(e,t,n){return t=$6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $6(e){var t=j2e(e,"string");return sf(t)=="symbol"?t:t+""}function j2e(e,t){if(sf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(sf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oC=function(t,n,r,a,i){var o=t.width,l=t.height,c=t.layout,u=t.children,d=Object.keys(n),h={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:l-r.bottom,bottomMirror:l-r.bottom},m=!!ss(u,Ea);return d.reduce(function(f,v){var p=n[v],g=p.orientation,x=p.domain,y=p.padding,b=y===void 0?{}:y,C=p.mirror,w=p.reversed,N="".concat(g).concat(C?"Mirror":""),S,_,P,A,E;if(p.type==="number"&&(p.padding==="gap"||p.padding==="no-gap")){var k=x[1]-x[0],I=1/0,D=p.categoricalDomain.sort($ae);if(D.forEach(function(M,ue){ue>0&&(I=Math.min((M||0)-(D[ue-1]||0),I))}),Number.isFinite(I)){var U=I/k,B=p.layout==="vertical"?r.height:r.width;if(p.padding==="gap"&&(S=U*B/2),p.padding==="no-gap"){var K=Ar(t.barCategoryGap,U*B),T=U*B/2;S=T-K-(T-K)/B*K}}}a==="xAxis"?_=[r.left+(b.left||0)+(S||0),r.left+r.width-(b.right||0)-(S||0)]:a==="yAxis"?_=c==="horizontal"?[r.top+r.height-(b.bottom||0),r.top+(b.top||0)]:[r.top+(b.top||0)+(S||0),r.top+r.height-(b.bottom||0)-(S||0)]:_=p.range,w&&(_=[_[1],_[0]]);var $=Z5(p,i,m),G=$.scale,Q=$.realScaleType;G.domain(x).range(_),e6(G);var ne=t6(G,Qs(Qs({},p),{},{realScaleType:Q}));a==="xAxis"?(E=g==="top"&&!C||g==="bottom"&&C,P=r.left,A=h[N]-E*p.height):a==="yAxis"&&(E=g==="left"&&!C||g==="right"&&C,P=h[N]-E*p.width,A=r.top);var oe=Qs(Qs(Qs({},p),ne),{},{realScaleType:Q,x:P,y:A,scale:G,width:a==="xAxis"?r.width:p.width,height:a==="yAxis"?r.height:p.height});return oe.bandSize=kv(oe,ne),!p.hide&&a==="xAxis"?h[N]+=(E?-1:1)*oe.height:p.hide||(h[N]+=(E?-1:1)*oe.width),Qs(Qs({},f),{},Fy({},v,oe))},{})},R6=function(t,n){var r=t.x,a=t.y,i=n.x,o=n.y;return{x:Math.min(r,i),y:Math.min(a,o),width:Math.abs(i-r),height:Math.abs(o-a)}},b2e=function(t){var n=t.x1,r=t.y1,a=t.x2,i=t.y2;return R6({x:n,y:r},{x:a,y:i})},L6=function(){function e(t){x2e(this,e),this.scale=t}return y2e(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=r.bandAware,i=r.position;if(n!==void 0){if(i)switch(i){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),a=r[0],i=r[r.length-1];return a<=i?n>=a&&n<=i:n>=i&&n<=a}}],[{key:"create",value:function(n){return new e(n)}}])}();Fy(L6,"EPS",1e-4);var lC=function(t){var n=Object.keys(t).reduce(function(r,a){return Qs(Qs({},r),{},Fy({},a,L6.create(t[a])))},{});return Qs(Qs({},n),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return zSe(a,function(c,u){return n[u].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return O6(a,function(i,o){return n[o].isInRange(i)})}})};function w2e(e){return(e%180+180)%180}var N2e=function(t){var n=t.width,r=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=w2e(a),o=i*Math.PI/180,l=Math.atan(r/n),c=o>l&&o<Math.PI-l?r/Math.sin(o):n/Math.cos(o);return Math.abs(c)},S2e=Ga,C2e=Of,_2e=jy;function P2e(e){return function(t,n,r){var a=Object(t);if(!C2e(t)){var i=S2e(n);t=_2e(t),n=function(l){return i(a[l],l,a)}}var o=e(t,n,r);return o>-1?a[i?t[o]:o]:void 0}}var A2e=P2e,k2e=A6;function T2e(e){var t=k2e(e),n=t%1;return t===t?n?t-n:t:0}var E2e=T2e,O2e=DF,D2e=Ga,M2e=E2e,I2e=Math.max;function $2e(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var a=n==null?0:M2e(n);return a<0&&(a=I2e(r+a,0)),O2e(e,D2e(t),a)}var R2e=$2e,L2e=A2e,F2e=R2e,B2e=L2e(F2e),z2e=B2e;const V2e=Ot(z2e);var q2e=Rse(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),cC=j.createContext(void 0),uC=j.createContext(void 0),F6=j.createContext(void 0),B6=j.createContext({}),z6=j.createContext(void 0),V6=j.createContext(0),q6=j.createContext(0),FE=function(t){var n=t.state,r=n.xAxisMap,a=n.yAxisMap,i=n.offset,o=t.clipPathId,l=t.children,c=t.width,u=t.height,d=q2e(i);return L.createElement(cC.Provider,{value:r},L.createElement(uC.Provider,{value:a},L.createElement(B6.Provider,{value:i},L.createElement(F6.Provider,{value:d},L.createElement(z6.Provider,{value:o},L.createElement(V6.Provider,{value:u},L.createElement(q6.Provider,{value:c},l)))))))},U2e=function(){return j.useContext(z6)},U6=function(t){var n=j.useContext(cC);n==null&&ec();var r=n[t];return r==null&&ec(),r},W2e=function(){var t=j.useContext(cC);return to(t)},H2e=function(){var t=j.useContext(uC),n=V2e(t,function(r){return O6(r.domain,Number.isFinite)});return n||to(t)},W6=function(t){var n=j.useContext(uC);n==null&&ec();var r=n[t];return r==null&&ec(),r},K2e=function(){var t=j.useContext(F6);return t},G2e=function(){return j.useContext(B6)},dC=function(){return j.useContext(q6)},hC=function(){return j.useContext(V6)};function id(e){"@babel/helpers - typeof";return id=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},id(e)}function Y2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q2e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,K6(r.key),r)}}function X2e(e,t,n){return t&&Q2e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function J2e(e,t,n){return t=Hv(t),Z2e(e,H6()?Reflect.construct(t,n||[],Hv(e).constructor):t.apply(e,n))}function Z2e(e,t){if(t&&(id(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eCe(e)}function eCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(H6=function(){return!!e})()}function Hv(e){return Hv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Hv(e)}function tCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&RN(e,t)}function RN(e,t){return RN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},RN(e,t)}function BE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function zE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BE(Object(n),!0).forEach(function(r){mC(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mC(e,t,n){return t=K6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K6(e){var t=nCe(e,"string");return id(t)=="symbol"?t:t+""}function nCe(e,t){if(id(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(id(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rCe(e,t){return oCe(e)||iCe(e,t)||aCe(e,t)||sCe()}function sCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aCe(e,t){if(e){if(typeof e=="string")return VE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VE(e,t)}}function VE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function iCe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function oCe(e){if(Array.isArray(e))return e}function LN(){return LN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},LN.apply(this,arguments)}var lCe=function(t,n){var r;return L.isValidElement(t)?r=L.cloneElement(t,n):Ke(t)?r=t(n):r=L.createElement("line",LN({},n,{className:"recharts-reference-line-line"})),r},cCe=function(t,n,r,a,i,o,l,c,u){var d=i.x,h=i.y,m=i.width,f=i.height;if(r){var v=u.y,p=t.y.apply(v,{position:o});if(za(u,"discard")&&!t.y.isInRange(p))return null;var g=[{x:d+m,y:p},{x:d,y:p}];return c==="left"?g.reverse():g}if(n){var x=u.x,y=t.x.apply(x,{position:o});if(za(u,"discard")&&!t.x.isInRange(y))return null;var b=[{x:y,y:h+f},{x:y,y:h}];return l==="top"?b.reverse():b}if(a){var C=u.segment,w=C.map(function(N){return t.apply(N,{position:o})});return za(u,"discard")&&DSe(w,function(N){return!t.isInRange(N)})?null:w}return null};function uCe(e){var t=e.x,n=e.y,r=e.segment,a=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=U2e(),d=U6(a),h=W6(i),m=K2e();if(!u||!m)return null;sa(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=lC({x:d.scale,y:h.scale}),v=Bn(t),p=Bn(n),g=r&&r.length===2,x=cCe(f,v,p,g,m,e.position,d.orientation,h.orientation,e);if(!x)return null;var y=rCe(x,2),b=y[0],C=b.x,w=b.y,N=y[1],S=N.x,_=N.y,P=za(e,"hidden")?"url(#".concat(u,")"):void 0,A=zE(zE({clipPath:P},Be(e,!0)),{},{x1:C,y1:w,x2:S,y2:_});return L.createElement(vt,{className:at("recharts-reference-line",l)},lCe(o,A),Gn.renderCallByParent(e,b2e({x1:C,y1:w,x2:S,y2:_})))}var fC=function(e){function t(){return Y2e(this,t),J2e(this,t,arguments)}return tCe(t,e),X2e(t,[{key:"render",value:function(){return L.createElement(uCe,this.props)}}])}(L.Component);mC(fC,"displayName","ReferenceLine");mC(fC,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function FN(){return FN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},FN.apply(this,arguments)}function od(e){"@babel/helpers - typeof";return od=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},od(e)}function qE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function UE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qE(Object(n),!0).forEach(function(r){By(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hCe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Y6(r.key),r)}}function mCe(e,t,n){return t&&hCe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function fCe(e,t,n){return t=Kv(t),pCe(e,G6()?Reflect.construct(t,n||[],Kv(e).constructor):t.apply(e,n))}function pCe(e,t){if(t&&(od(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gCe(e)}function gCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(G6=function(){return!!e})()}function Kv(e){return Kv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Kv(e)}function vCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BN(e,t)}function BN(e,t){return BN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},BN(e,t)}function By(e,t,n){return t=Y6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y6(e){var t=xCe(e,"string");return od(t)=="symbol"?t:t+""}function xCe(e,t){if(od(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(od(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yCe=function(t){var n=t.x,r=t.y,a=t.xAxis,i=t.yAxis,o=lC({x:a.scale,y:i.scale}),l=o.apply({x:n,y:r},{bandAware:!0});return za(t,"discard")&&!o.isInRange(l)?null:l},zy=function(e){function t(){return dCe(this,t),fCe(this,t,arguments)}return vCe(t,e),mCe(t,[{key:"render",value:function(){var r=this.props,a=r.x,i=r.y,o=r.r,l=r.alwaysShow,c=r.clipPathId,u=Bn(a),d=Bn(i);if(sa(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var h=yCe(this.props);if(!h)return null;var m=h.x,f=h.y,v=this.props,p=v.shape,g=v.className,x=za(this.props,"hidden")?"url(#".concat(c,")"):void 0,y=UE(UE({clipPath:x},Be(this.props,!0)),{},{cx:m,cy:f});return L.createElement(vt,{className:at("recharts-reference-dot",g)},t.renderDot(p,y),Gn.renderCallByParent(this.props,{x:m-o,y:f-o,width:2*o,height:2*o}))}}])}(L.Component);By(zy,"displayName","ReferenceDot");By(zy,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});By(zy,"renderDot",function(e,t){var n;return L.isValidElement(e)?n=L.cloneElement(e,t):Ke(e)?n=e(t):n=L.createElement(Lf,FN({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function zN(){return zN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zN.apply(this,arguments)}function ld(e){"@babel/helpers - typeof";return ld=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ld(e)}function WE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function HE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WE(Object(n),!0).forEach(function(r){Vy(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function jCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bCe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,X6(r.key),r)}}function wCe(e,t,n){return t&&bCe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function NCe(e,t,n){return t=Gv(t),SCe(e,Q6()?Reflect.construct(t,n||[],Gv(e).constructor):t.apply(e,n))}function SCe(e,t){if(t&&(ld(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CCe(e)}function CCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Q6=function(){return!!e})()}function Gv(e){return Gv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Gv(e)}function _Ce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VN(e,t)}function VN(e,t){return VN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},VN(e,t)}function Vy(e,t,n){return t=X6(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X6(e){var t=PCe(e,"string");return ld(t)=="symbol"?t:t+""}function PCe(e,t){if(ld(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ld(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ACe=function(t,n,r,a,i){var o=i.x1,l=i.x2,c=i.y1,u=i.y2,d=i.xAxis,h=i.yAxis;if(!d||!h)return null;var m=lC({x:d.scale,y:h.scale}),f={x:t?m.x.apply(o,{position:"start"}):m.x.rangeMin,y:r?m.y.apply(c,{position:"start"}):m.y.rangeMin},v={x:n?m.x.apply(l,{position:"end"}):m.x.rangeMax,y:a?m.y.apply(u,{position:"end"}):m.y.rangeMax};return za(i,"discard")&&(!m.isInRange(f)||!m.isInRange(v))?null:R6(f,v)},qy=function(e){function t(){return jCe(this,t),NCe(this,t,arguments)}return _Ce(t,e),wCe(t,[{key:"render",value:function(){var r=this.props,a=r.x1,i=r.x2,o=r.y1,l=r.y2,c=r.className,u=r.alwaysShow,d=r.clipPathId;sa(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=Bn(a),m=Bn(i),f=Bn(o),v=Bn(l),p=this.props.shape;if(!h&&!m&&!f&&!v&&!p)return null;var g=ACe(h,m,f,v,this.props);if(!g&&!p)return null;var x=za(this.props,"hidden")?"url(#".concat(d,")"):void 0;return L.createElement(vt,{className:at("recharts-reference-area",c)},t.renderRect(p,HE(HE({clipPath:x},Be(this.props,!0)),g)),Gn.renderCallByParent(this.props,g))}}])}(L.Component);Vy(qy,"displayName","ReferenceArea");Vy(qy,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Vy(qy,"renderRect",function(e,t){var n;return L.isValidElement(e)?n=L.cloneElement(e,t):Ke(e)?n=e(t):n=L.createElement(iC,zN({},t,{className:"recharts-reference-area-rect"})),n});function J6(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],a=0;a<e.length;a+=t)r.push(e[a]);return r}function kCe(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return N2e(r,n)}function TCe(e,t,n){var r=n==="width",a=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:r?a:i,end:r?a+o:i+l}:{start:r?a+o:i+l,end:r?a:i}}function Yv(e,t,n,r,a){if(e*t<e*r||e*t>e*a)return!1;var i=n();return e*(t-e*i/2-r)>=0&&e*(t+e*i/2-a)<=0}function ECe(e,t){return J6(e,t+1)}function OCe(e,t,n,r,a){for(var i=(r||[]).slice(),o=t.start,l=t.end,c=0,u=1,d=o,h=function(){var v=r==null?void 0:r[c];if(v===void 0)return{v:J6(r,u)};var p=c,g,x=function(){return g===void 0&&(g=n(v,p)),g},y=v.coordinate,b=c===0||Yv(e,y,x,d,l);b||(c=0,d=o,u+=1),b&&(d=y+e*(x()/2+a),c+=u)},m;u<=i.length;)if(m=h(),m)return m.v;return[]}function af(e){"@babel/helpers - typeof";return af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},af(e)}function KE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function hr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KE(Object(n),!0).forEach(function(r){DCe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function DCe(e,t,n){return t=MCe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MCe(e){var t=ICe(e,"string");return af(t)=="symbol"?t:t+""}function ICe(e,t){if(af(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(af(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $Ce(e,t,n,r,a){for(var i=(r||[]).slice(),o=i.length,l=t.start,c=t.end,u=function(m){var f=i[m],v,p=function(){return v===void 0&&(v=n(f,m)),v};if(m===o-1){var g=e*(f.coordinate+e*p()/2-c);i[m]=f=hr(hr({},f),{},{tickCoord:g>0?f.coordinate-g*e:f.coordinate})}else i[m]=f=hr(hr({},f),{},{tickCoord:f.coordinate});var x=Yv(e,f.tickCoord,p,l,c);x&&(c=f.tickCoord-e*(p()/2+a),i[m]=hr(hr({},f),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return i}function RCe(e,t,n,r,a,i){var o=(r||[]).slice(),l=o.length,c=t.start,u=t.end;if(i){var d=r[l-1],h=n(d,l-1),m=e*(d.coordinate+e*h/2-u);o[l-1]=d=hr(hr({},d),{},{tickCoord:m>0?d.coordinate-m*e:d.coordinate});var f=Yv(e,d.tickCoord,function(){return h},c,u);f&&(u=d.tickCoord-e*(h/2+a),o[l-1]=hr(hr({},d),{},{isShow:!0}))}for(var v=i?l-1:l,p=function(y){var b=o[y],C,w=function(){return C===void 0&&(C=n(b,y)),C};if(y===0){var N=e*(b.coordinate-e*w()/2-c);o[y]=b=hr(hr({},b),{},{tickCoord:N<0?b.coordinate-N*e:b.coordinate})}else o[y]=b=hr(hr({},b),{},{tickCoord:b.coordinate});var S=Yv(e,b.tickCoord,w,c,u);S&&(c=b.tickCoord+e*(w()/2+a),o[y]=hr(hr({},b),{},{isShow:!0}))},g=0;g<v;g++)p(g);return o}function pC(e,t,n){var r=e.tick,a=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,d=e.unit,h=e.angle;if(!a||!a.length||!r)return[];if(we(c)||aa.isSsr)return ECe(a,typeof c=="number"&&we(c)?c:0);var m=[],f=l==="top"||l==="bottom"?"width":"height",v=d&&f==="width"?Hh(d,{fontSize:t,letterSpacing:n}):{width:0,height:0},p=function(b,C){var w=Ke(u)?u(b.value,C):b.value;return f==="width"?kCe(Hh(w,{fontSize:t,letterSpacing:n}),v,h):Hh(w,{fontSize:t,letterSpacing:n})[f]},g=a.length>=2?Pr(a[1].coordinate-a[0].coordinate):1,x=TCe(i,g,f);return c==="equidistantPreserveStart"?OCe(g,x,p,a,o):(c==="preserveStart"||c==="preserveStartEnd"?m=RCe(g,x,p,a,o,c==="preserveStartEnd"):m=$Ce(g,x,p,a,o),m.filter(function(y){return y.isShow}))}var LCe=["viewBox"],FCe=["viewBox"],BCe=["ticks"];function cd(e){"@babel/helpers - typeof";return cd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cd(e)}function Xc(){return Xc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xc.apply(this,arguments)}function GE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function En(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GE(Object(n),!0).forEach(function(r){gC(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _j(e,t){if(e==null)return{};var n=zCe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function zCe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function VCe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function YE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,e8(r.key),r)}}function qCe(e,t,n){return t&&YE(e.prototype,t),n&&YE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function UCe(e,t,n){return t=Qv(t),WCe(e,Z6()?Reflect.construct(t,n||[],Qv(e).constructor):t.apply(e,n))}function WCe(e,t){if(t&&(cd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HCe(e)}function HCe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z6(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Z6=function(){return!!e})()}function Qv(e){return Qv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Qv(e)}function KCe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qN(e,t)}function qN(e,t){return qN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},qN(e,t)}function gC(e,t,n){return t=e8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function e8(e){var t=GCe(e,"string");return cd(t)=="symbol"?t:t+""}function GCe(e,t){if(cd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(cd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Qd=function(e){function t(n){var r;return VCe(this,t),r=UCe(this,t,[n]),r.state={fontSize:"",letterSpacing:""},r}return KCe(t,e),qCe(t,[{key:"shouldComponentUpdate",value:function(r,a){var i=r.viewBox,o=_j(r,LCe),l=this.props,c=l.viewBox,u=_j(l,FCe);return!uu(i,c)||!uu(o,u)||!uu(a,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var a=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var a=this.props,i=a.x,o=a.y,l=a.width,c=a.height,u=a.orientation,d=a.tickSize,h=a.mirror,m=a.tickMargin,f,v,p,g,x,y,b=h?-1:1,C=r.tickSize||d,w=we(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":f=v=r.coordinate,g=o+ +!h*c,p=g-b*C,y=p-b*m,x=w;break;case"left":p=g=r.coordinate,v=i+ +!h*l,f=v-b*C,x=f-b*m,y=w;break;case"right":p=g=r.coordinate,v=i+ +h*l,f=v+b*C,x=f+b*m,y=w;break;default:f=v=r.coordinate,g=o+ +h*c,p=g+b*C,y=p+b*m,x=w;break}return{line:{x1:f,y1:p,x2:v,y2:g},tick:{x,y}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,a=r.orientation,i=r.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,a=r.orientation,i=r.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var r=this.props,a=r.x,i=r.y,o=r.width,l=r.height,c=r.orientation,u=r.mirror,d=r.axisLine,h=En(En(En({},Be(this.props,!1)),Be(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var m=+(c==="top"&&!u||c==="bottom"&&u);h=En(En({},h),{},{x1:a,y1:i+m*l,x2:a+o,y2:i+m*l})}else{var f=+(c==="left"&&!u||c==="right"&&u);h=En(En({},h),{},{x1:a+f*o,y1:i,x2:a+f*o,y2:i+l})}return L.createElement("line",Xc({},h,{className:at("recharts-cartesian-axis-line",ds(d,"className"))}))}},{key:"renderTicks",value:function(r,a,i){var o=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,h=l.tickFormatter,m=l.unit,f=pC(En(En({},this.props),{},{ticks:r}),a,i),v=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),g=Be(this.props,!1),x=Be(d,!1),y=En(En({},g),{},{fill:"none"},Be(c,!1)),b=f.map(function(C,w){var N=o.getTickLineCoord(C),S=N.line,_=N.tick,P=En(En(En(En({textAnchor:v,verticalAnchor:p},g),{},{stroke:"none",fill:u},x),_),{},{index:w,payload:C,visibleTicksCount:f.length,tickFormatter:h});return L.createElement(vt,Xc({className:"recharts-cartesian-axis-tick",key:"tick-".concat(C.value,"-").concat(C.coordinate,"-").concat(C.tickCoord)},Ql(o.props,C,w)),c&&L.createElement("line",Xc({},y,S,{className:at("recharts-cartesian-axis-tick-line",ds(c,"className"))})),d&&t.renderTickItem(d,P,"".concat(Ke(h)?h(C.value,w):C.value).concat(m||"")))});return L.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var r=this,a=this.props,i=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,u=a.className,d=a.hide;if(d)return null;var h=this.props,m=h.ticks,f=_j(h,BCe),v=m;return Ke(c)&&(v=m&&m.length>0?c(this.props):c(f)),o<=0||l<=0||!v||!v.length?null:L.createElement(vt,{className:at("recharts-cartesian-axis",u),ref:function(g){r.layerReference=g}},i&&this.renderAxisLine(),this.renderTicks(v,this.state.fontSize,this.state.letterSpacing),Gn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,a,i){var o,l=at(a.className,"recharts-cartesian-axis-tick-value");return L.isValidElement(r)?o=L.cloneElement(r,En(En({},a),{},{className:l})):Ke(r)?o=r(En(En({},a),{},{className:l})):o=L.createElement(Xl,Xc({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(j.Component);gC(Qd,"displayName","CartesianAxis");gC(Qd,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var YCe=["x1","y1","x2","y2","key"],QCe=["offset"];function tc(e){"@babel/helpers - typeof";return tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tc(e)}function QE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function gr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QE(Object(n),!0).forEach(function(r){XCe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function XCe(e,t,n){return t=JCe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JCe(e){var t=ZCe(e,"string");return tc(t)=="symbol"?t:t+""}function ZCe(e,t){if(tc(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(tc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jl(){return jl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jl.apply(this,arguments)}function XE(e,t){if(e==null)return{};var n=e_e(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function e_e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var t_e=function(t){var n=t.fill;if(!n||n==="none")return null;var r=t.fillOpacity,a=t.x,i=t.y,o=t.width,l=t.height,c=t.ry;return L.createElement("rect",{x:a,y:i,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function t8(e,t){var n;if(L.isValidElement(e))n=L.cloneElement(e,t);else if(Ke(e))n=e(t);else{var r=t.x1,a=t.y1,i=t.x2,o=t.y2,l=t.key,c=XE(t,YCe),u=Be(c,!1);u.offset;var d=XE(u,QCe);n=L.createElement("line",jl({},d,{x1:r,y1:a,x2:i,y2:o,fill:"none",key:l}))}return n}function n_e(e){var t=e.x,n=e.width,r=e.horizontal,a=r===void 0?!0:r,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var u=gr(gr({},e),{},{x1:t,y1:l,x2:t+n,y2:l,key:"line-".concat(c),index:c});return t8(a,u)});return L.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function r_e(e){var t=e.y,n=e.height,r=e.vertical,a=r===void 0?!0:r,i=e.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var u=gr(gr({},e),{},{x1:l,y1:t,x2:l,y2:t+n,key:"line-".concat(c),index:c});return t8(a,u)});return L.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function s_e(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,a=e.y,i=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var d=l.map(function(m){return Math.round(m+a-a)}).sort(function(m,f){return m-f});a!==d[0]&&d.unshift(0);var h=d.map(function(m,f){var v=!d[f+1],p=v?a+o-m:d[f+1]-m;if(p<=0)return null;var g=f%t.length;return L.createElement("rect",{key:"react-".concat(f),y:m,x:r,height:p,width:i,stroke:"none",fill:t[g],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return L.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function a_e(e){var t=e.vertical,n=t===void 0?!0:t,r=e.verticalFill,a=e.fillOpacity,i=e.x,o=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!n||!r||!r.length)return null;var d=u.map(function(m){return Math.round(m+i-i)}).sort(function(m,f){return m-f});i!==d[0]&&d.unshift(0);var h=d.map(function(m,f){var v=!d[f+1],p=v?i+l-m:d[f+1]-m;if(p<=0)return null;var g=f%r.length;return L.createElement("rect",{key:"react-".concat(f),x:m,y:o,width:p,height:c,stroke:"none",fill:r[g],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return L.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var i_e=function(t,n){var r=t.xAxis,a=t.width,i=t.height,o=t.offset;return J5(pC(gr(gr(gr({},Qd.defaultProps),r),{},{ticks:hi(r,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,n)},o_e=function(t,n){var r=t.yAxis,a=t.width,i=t.height,o=t.offset;return J5(pC(gr(gr(gr({},Qd.defaultProps),r),{},{ticks:hi(r,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,n)},Ec={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function nc(e){var t,n,r,a,i,o,l=dC(),c=hC(),u=G2e(),d=gr(gr({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Ec.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:Ec.fill,horizontal:(r=e.horizontal)!==null&&r!==void 0?r:Ec.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:Ec.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:Ec.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:Ec.verticalFill,x:we(e.x)?e.x:u.left,y:we(e.y)?e.y:u.top,width:we(e.width)?e.width:u.width,height:we(e.height)?e.height:u.height}),h=d.x,m=d.y,f=d.width,v=d.height,p=d.syncWithTicks,g=d.horizontalValues,x=d.verticalValues,y=W2e(),b=H2e();if(!we(f)||f<=0||!we(v)||v<=0||!we(h)||h!==+h||!we(m)||m!==+m)return null;var C=d.verticalCoordinatesGenerator||i_e,w=d.horizontalCoordinatesGenerator||o_e,N=d.horizontalPoints,S=d.verticalPoints;if((!N||!N.length)&&Ke(w)){var _=g&&g.length,P=w({yAxis:b?gr(gr({},b),{},{ticks:_?g:b.ticks}):void 0,width:l,height:c,offset:u},_?!0:p);sa(Array.isArray(P),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(tc(P),"]")),Array.isArray(P)&&(N=P)}if((!S||!S.length)&&Ke(C)){var A=x&&x.length,E=C({xAxis:y?gr(gr({},y),{},{ticks:A?x:y.ticks}):void 0,width:l,height:c,offset:u},A?!0:p);sa(Array.isArray(E),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(tc(E),"]")),Array.isArray(E)&&(S=E)}return L.createElement("g",{className:"recharts-cartesian-grid"},L.createElement(t_e,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),L.createElement(n_e,jl({},d,{offset:u,horizontalPoints:N,xAxis:y,yAxis:b})),L.createElement(r_e,jl({},d,{offset:u,verticalPoints:S,xAxis:y,yAxis:b})),L.createElement(s_e,jl({},d,{horizontalPoints:N})),L.createElement(a_e,jl({},d,{verticalPoints:S})))}nc.displayName="CartesianGrid";var l_e=["type","layout","connectNulls","ref"],c_e=["key"];function ud(e){"@babel/helpers - typeof";return ud=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ud(e)}function JE(e,t){if(e==null)return{};var n=u_e(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function u_e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Jh(){return Jh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jh.apply(this,arguments)}function ZE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ts(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZE(Object(n),!0).forEach(function(r){Xs(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZE(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Oc(e){return f_e(e)||m_e(e)||h_e(e)||d_e()}function d_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function h_e(e,t){if(e){if(typeof e=="string")return UN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return UN(e,t)}}function m_e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function f_e(e){if(Array.isArray(e))return UN(e)}function UN(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r8(r.key),r)}}function g_e(e,t,n){return t&&eO(e.prototype,t),n&&eO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function v_e(e,t,n){return t=Xv(t),x_e(e,n8()?Reflect.construct(t,n||[],Xv(e).constructor):t.apply(e,n))}function x_e(e,t){if(t&&(ud(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y_e(e)}function y_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function n8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(n8=function(){return!!e})()}function Xv(e){return Xv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Xv(e)}function j_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WN(e,t)}function WN(e,t){return WN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},WN(e,t)}function Xs(e,t,n){return t=r8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r8(e){var t=b_e(e,"string");return ud(t)=="symbol"?t:t+""}function b_e(e,t){if(ud(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ud(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dd=function(e){function t(){var n;p_e(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=v_e(this,t,[].concat(a)),Xs(n,"state",{isAnimationFinished:!0,totalLength:0}),Xs(n,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),Xs(n,"getStrokeDasharray",function(o,l,c){var u=c.reduce(function(x,y){return x+y});if(!u)return n.generateSimpleStrokeDasharray(l,o);for(var d=Math.floor(o/u),h=o%u,m=l-o,f=[],v=0,p=0;v<c.length;p+=c[v],++v)if(p+c[v]>h){f=[].concat(Oc(c.slice(0,v)),[h-p]);break}var g=f.length%2===0?[0,m]:[m];return[].concat(Oc(t.repeat(c,d)),Oc(f),g).map(function(x){return"".concat(x,"px")}).join(", ")}),Xs(n,"id",hc("recharts-line-")),Xs(n,"pathRef",function(o){n.mainCurve=o}),Xs(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),Xs(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return j_e(t,e),g_e(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,h=hs(d,Rf);if(!h)return null;var m=function(p,g){return{x:p.x,y:p.y,value:p.value,errorVal:jn(p.payload,g)}},f={clipPath:r?"url(#clipPath-".concat(a,")"):null};return L.createElement(vt,f,h.map(function(v){return L.cloneElement(v,{key:"bar-".concat(v.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,dataPointFormatter:m})}))}},{key:"renderDots",value:function(r,a,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,u=l.points,d=l.dataKey,h=Be(this.props,!1),m=Be(c,!0),f=u.map(function(p,g){var x=ts(ts(ts({key:"dot-".concat(g),r:3},h),m),{},{index:g,cx:p.x,cy:p.y,value:p.value,dataKey:d,payload:p.payload,points:u});return t.renderDotItem(c,x)}),v={clipPath:r?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return L.createElement(vt,Jh({className:"recharts-line-dots",key:"dots"},v),f)}},{key:"renderCurveStatically",value:function(r,a,i,o){var l=this.props,c=l.type,u=l.layout,d=l.connectNulls;l.ref;var h=JE(l,l_e),m=ts(ts(ts({},Be(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(i,")"):null,points:r},o),{},{type:c,layout:u,connectNulls:d});return L.createElement(Il,Jh({},m,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,a){var i=this,o=this.props,l=o.points,c=o.strokeDasharray,u=o.isAnimationActive,d=o.animationBegin,h=o.animationDuration,m=o.animationEasing,f=o.animationId,v=o.animateNewValues,p=o.width,g=o.height,x=this.state,y=x.prevPoints,b=x.totalLength;return L.createElement(ua,{begin:d,duration:h,isActive:u,easing:m,from:{t:0},to:{t:1},key:"line-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(C){var w=C.t;if(y){var N=y.length/l.length,S=l.map(function(k,I){var D=Math.floor(I*N);if(y[D]){var U=y[D],B=Rn(U.x,k.x),K=Rn(U.y,k.y);return ts(ts({},k),{},{x:B(w),y:K(w)})}if(v){var T=Rn(p*2,k.x),$=Rn(g/2,k.y);return ts(ts({},k),{},{x:T(w),y:$(w)})}return ts(ts({},k),{},{x:k.x,y:k.y})});return i.renderCurveStatically(S,r,a)}var _=Rn(0,b),P=_(w),A;if(c){var E="".concat(c).split(/[,\s]+/gim).map(function(k){return parseFloat(k)});A=i.getStrokeDasharray(P,b,E)}else A=i.generateSimpleStrokeDasharray(b,P);return i.renderCurveStatically(l,r,a,{strokeDasharray:A})})}},{key:"renderCurve",value:function(r,a){var i=this.props,o=i.points,l=i.isAnimationActive,c=this.state,u=c.prevPoints,d=c.totalLength;return l&&o&&o.length&&(!u&&d>0||!Jl(u,o))?this.renderCurveWithAnimation(r,a):this.renderCurveStatically(o,r,a)}},{key:"render",value:function(){var r,a=this.props,i=a.hide,o=a.dot,l=a.points,c=a.className,u=a.xAxis,d=a.yAxis,h=a.top,m=a.left,f=a.width,v=a.height,p=a.isAnimationActive,g=a.id;if(i||!l||!l.length)return null;var x=this.state.isAnimationFinished,y=l.length===1,b=at("recharts-line",c),C=u&&u.allowDataOverflow,w=d&&d.allowDataOverflow,N=C||w,S=et(g)?this.id:g,_=(r=Be(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},P=_.r,A=P===void 0?3:P,E=_.strokeWidth,k=E===void 0?2:E,I=UL(o)?o:{},D=I.clipDot,U=D===void 0?!0:D,B=A*2+k;return L.createElement(vt,{className:b},C||w?L.createElement("defs",null,L.createElement("clipPath",{id:"clipPath-".concat(S)},L.createElement("rect",{x:C?m:m-f/2,y:w?h:h-v/2,width:C?f:f*2,height:w?v:v*2})),!U&&L.createElement("clipPath",{id:"clipPath-dots-".concat(S)},L.createElement("rect",{x:m-B/2,y:h-B/2,width:f+B,height:v+B}))):null,!y&&this.renderCurve(N,S),this.renderErrorBar(N,S),(y||o)&&this.renderDots(N,U,S),(!p||x)&&Ba.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,a){return r.animationId!==a.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:a.curPoints}:r.points!==a.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,a){for(var i=r.length%2!==0?[].concat(Oc(r),[0]):r,o=[],l=0;l<a;++l)o=[].concat(Oc(o),Oc(i));return o}},{key:"renderDotItem",value:function(r,a){var i;if(L.isValidElement(r))i=L.cloneElement(r,a);else if(Ke(r))i=r(a);else{var o=a.key,l=JE(a,c_e),c=at("recharts-line-dot",typeof r!="boolean"?r.className:"");i=L.createElement(Lf,Jh({key:o},l,{className:c}))}return i}}])}(j.PureComponent);Xs(dd,"displayName","Line");Xs(dd,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!aa.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Xs(dd,"getComposedData",function(e){var t=e.props,n=e.xAxis,r=e.yAxis,a=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,l=e.bandSize,c=e.displayedData,u=e.offset,d=t.layout,h=c.map(function(m,f){var v=jn(m,o);return d==="horizontal"?{x:Av({axis:n,ticks:a,bandSize:l,entry:m,index:f}),y:et(v)?null:r.scale(v),value:v,payload:m}:{x:et(v)?null:n.scale(v),y:Av({axis:r,ticks:i,bandSize:l,entry:m,index:f}),value:v,payload:m}});return ts({points:h,layout:d},u)});var w_e=["layout","type","stroke","connectNulls","isRange","ref"],N_e=["key"],s8;function hd(e){"@babel/helpers - typeof";return hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hd(e)}function a8(e,t){if(e==null)return{};var n=S_e(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function S_e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function bl(){return bl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bl.apply(this,arguments)}function tO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ki(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tO(Object(n),!0).forEach(function(r){Oa(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function C_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o8(r.key),r)}}function __e(e,t,n){return t&&nO(e.prototype,t),n&&nO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function P_e(e,t,n){return t=Jv(t),A_e(e,i8()?Reflect.construct(t,n||[],Jv(e).constructor):t.apply(e,n))}function A_e(e,t){if(t&&(hd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return k_e(e)}function k_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(i8=function(){return!!e})()}function Jv(e){return Jv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Jv(e)}function T_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&HN(e,t)}function HN(e,t){return HN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},HN(e,t)}function Oa(e,t,n){return t=o8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o8(e){var t=E_e(e,"string");return hd(t)=="symbol"?t:t+""}function E_e(e,t){if(hd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(hd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ms=function(e){function t(){var n;C_e(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=P_e(this,t,[].concat(a)),Oa(n,"state",{isAnimationFinished:!0}),Oa(n,"id",hc("recharts-area-")),Oa(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Ke(o)&&o()}),Oa(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Ke(o)&&o()}),n}return T_e(t,e),__e(t,[{key:"renderDots",value:function(r,a,i){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,u=c.dot,d=c.points,h=c.dataKey,m=Be(this.props,!1),f=Be(u,!0),v=d.map(function(g,x){var y=Ki(Ki(Ki({key:"dot-".concat(x),r:3},m),f),{},{index:x,cx:g.x,cy:g.y,dataKey:h,value:g.value,payload:g.payload,points:d});return t.renderDotItem(u,y)}),p={clipPath:r?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return L.createElement(vt,bl({className:"recharts-area-dots"},p),v)}},{key:"renderHorizontalRect",value:function(r){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].x,u=o[o.length-1].x,d=r*Math.abs(c-u),h=po(o.map(function(m){return m.y||0}));return we(i)&&typeof i=="number"?h=Math.max(i,h):i&&Array.isArray(i)&&i.length&&(h=Math.max(po(i.map(function(m){return m.y||0})),h)),we(h)?L.createElement("rect",{x:c<u?c:c-d,y:0,width:d,height:Math.floor(h+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var a=this.props,i=a.baseLine,o=a.points,l=a.strokeWidth,c=o[0].y,u=o[o.length-1].y,d=r*Math.abs(c-u),h=po(o.map(function(m){return m.x||0}));return we(i)&&typeof i=="number"?h=Math.max(i,h):i&&Array.isArray(i)&&i.length&&(h=Math.max(po(i.map(function(m){return m.x||0})),h)),we(h)?L.createElement("rect",{x:0,y:c<u?c:c-d,width:h+(l?parseInt("".concat(l),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(r){var a=this.props.layout;return a==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,a,i,o){var l=this.props,c=l.layout,u=l.type,d=l.stroke,h=l.connectNulls,m=l.isRange;l.ref;var f=a8(l,w_e);return L.createElement(vt,{clipPath:i?"url(#clipPath-".concat(o,")"):null},L.createElement(Il,bl({},Be(f,!0),{points:r,connectNulls:h,type:u,baseLine:a,layout:c,stroke:"none",className:"recharts-area-area"})),d!=="none"&&L.createElement(Il,bl({},Be(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:h,fill:"none",points:r})),d!=="none"&&m&&L.createElement(Il,bl({},Be(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:h,fill:"none",points:a})))}},{key:"renderAreaWithAnimation",value:function(r,a){var i=this,o=this.props,l=o.points,c=o.baseLine,u=o.isAnimationActive,d=o.animationBegin,h=o.animationDuration,m=o.animationEasing,f=o.animationId,v=this.state,p=v.prevPoints,g=v.prevBaseLine;return L.createElement(ua,{begin:d,duration:h,isActive:u,easing:m,from:{t:0},to:{t:1},key:"area-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var y=x.t;if(p){var b=p.length/l.length,C=l.map(function(_,P){var A=Math.floor(P*b);if(p[A]){var E=p[A],k=Rn(E.x,_.x),I=Rn(E.y,_.y);return Ki(Ki({},_),{},{x:k(y),y:I(y)})}return _}),w;if(we(c)&&typeof c=="number"){var N=Rn(g,c);w=N(y)}else if(et(c)||Vd(c)){var S=Rn(g,0);w=S(y)}else w=c.map(function(_,P){var A=Math.floor(P*b);if(g[A]){var E=g[A],k=Rn(E.x,_.x),I=Rn(E.y,_.y);return Ki(Ki({},_),{},{x:k(y),y:I(y)})}return _});return i.renderAreaStatically(C,w,r,a)}return L.createElement(vt,null,L.createElement("defs",null,L.createElement("clipPath",{id:"animationClipPath-".concat(a)},i.renderClipRect(y))),L.createElement(vt,{clipPath:"url(#animationClipPath-".concat(a,")")},i.renderAreaStatically(l,c,r,a)))})}},{key:"renderArea",value:function(r,a){var i=this.props,o=i.points,l=i.baseLine,c=i.isAnimationActive,u=this.state,d=u.prevPoints,h=u.prevBaseLine,m=u.totalLength;return c&&o&&o.length&&(!d&&m>0||!Jl(d,o)||!Jl(h,l))?this.renderAreaWithAnimation(r,a):this.renderAreaStatically(o,l,r,a)}},{key:"render",value:function(){var r,a=this.props,i=a.hide,o=a.dot,l=a.points,c=a.className,u=a.top,d=a.left,h=a.xAxis,m=a.yAxis,f=a.width,v=a.height,p=a.isAnimationActive,g=a.id;if(i||!l||!l.length)return null;var x=this.state.isAnimationFinished,y=l.length===1,b=at("recharts-area",c),C=h&&h.allowDataOverflow,w=m&&m.allowDataOverflow,N=C||w,S=et(g)?this.id:g,_=(r=Be(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},P=_.r,A=P===void 0?3:P,E=_.strokeWidth,k=E===void 0?2:E,I=UL(o)?o:{},D=I.clipDot,U=D===void 0?!0:D,B=A*2+k;return L.createElement(vt,{className:b},C||w?L.createElement("defs",null,L.createElement("clipPath",{id:"clipPath-".concat(S)},L.createElement("rect",{x:C?d:d-f/2,y:w?u:u-v/2,width:C?f:f*2,height:w?v:v*2})),!U&&L.createElement("clipPath",{id:"clipPath-dots-".concat(S)},L.createElement("rect",{x:d-B/2,y:u-B/2,width:f+B,height:v+B}))):null,y?null:this.renderArea(N,S),(o||y)&&this.renderDots(N,U,S),(!p||x)&&Ba.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,a){return r.animationId!==a.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:a.curPoints,prevBaseLine:a.curBaseLine}:r.points!==a.curPoints||r.baseLine!==a.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(j.PureComponent);s8=Ms;Oa(Ms,"displayName","Area");Oa(Ms,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!aa.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Oa(Ms,"getBaseValue",function(e,t,n,r){var a=e.layout,i=e.baseValue,o=t.props.baseValue,l=o??i;if(we(l)&&typeof l=="number")return l;var c=a==="horizontal"?r:n,u=c.scale.domain();if(c.type==="number"){var d=Math.max(u[0],u[1]),h=Math.min(u[0],u[1]);return l==="dataMin"?h:l==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});Oa(Ms,"getComposedData",function(e){var t=e.props,n=e.item,r=e.xAxis,a=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,u=e.stackedData,d=e.dataStartIndex,h=e.displayedData,m=e.offset,f=t.layout,v=u&&u.length,p=s8.getBaseValue(t,n,r,a),g=f==="horizontal",x=!1,y=h.map(function(C,w){var N;v?N=u[d+w]:(N=jn(C,c),Array.isArray(N)?x=!0:N=[p,N]);var S=N[1]==null||v&&jn(C,c)==null;return g?{x:Av({axis:r,ticks:i,bandSize:l,entry:C,index:w}),y:S?null:a.scale(N[1]),value:N,payload:C}:{x:S?null:r.scale(N[1]),y:Av({axis:a,ticks:o,bandSize:l,entry:C,index:w}),value:N,payload:C}}),b;return v||x?b=y.map(function(C){var w=Array.isArray(C.value)?C.value[0]:null;return g?{x:C.x,y:w!=null&&C.y!=null?a.scale(w):null}:{x:w!=null?r.scale(w):null,y:C.y}}):b=g?a.scale(p):r.scale(p),Ki({points:y,baseLine:b,layout:f,isRange:x},m)});Oa(Ms,"renderDotItem",function(e,t){var n;if(L.isValidElement(e))n=L.cloneElement(e,t);else if(Ke(e))n=e(t);else{var r=at("recharts-area-dot",typeof e!="boolean"?e.className:""),a=t.key,i=a8(t,N_e);n=L.createElement(Lf,bl({},i,{key:a,className:r}))}return n});function md(e){"@babel/helpers - typeof";return md=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},md(e)}function O_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D_e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u8(r.key),r)}}function M_e(e,t,n){return t&&D_e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function I_e(e,t,n){return t=Zv(t),$_e(e,l8()?Reflect.construct(t,n||[],Zv(e).constructor):t.apply(e,n))}function $_e(e,t){if(t&&(md(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R_e(e)}function R_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(l8=function(){return!!e})()}function Zv(e){return Zv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Zv(e)}function L_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KN(e,t)}function KN(e,t){return KN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},KN(e,t)}function c8(e,t,n){return t=u8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u8(e){var t=F_e(e,"string");return md(t)=="symbol"?t:t+""}function F_e(e,t){if(md(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(md(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GN(){return GN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},GN.apply(this,arguments)}function B_e(e){var t=e.xAxisId,n=dC(),r=hC(),a=U6(t);return a==null?null:j.createElement(Qd,GN({},a,{className:at("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(o){return hi(o,!0)}}))}var da=function(e){function t(){return O_e(this,t),I_e(this,t,arguments)}return L_e(t,e),M_e(t,[{key:"render",value:function(){return j.createElement(B_e,this.props)}}])}(j.Component);c8(da,"displayName","XAxis");c8(da,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function fd(e){"@babel/helpers - typeof";return fd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fd(e)}function z_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V_e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m8(r.key),r)}}function q_e(e,t,n){return t&&V_e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function U_e(e,t,n){return t=ex(t),W_e(e,d8()?Reflect.construct(t,n||[],ex(e).constructor):t.apply(e,n))}function W_e(e,t){if(t&&(fd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return H_e(e)}function H_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d8=function(){return!!e})()}function ex(e){return ex=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ex(e)}function K_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&YN(e,t)}function YN(e,t){return YN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},YN(e,t)}function h8(e,t,n){return t=m8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m8(e){var t=G_e(e,"string");return fd(t)=="symbol"?t:t+""}function G_e(e,t){if(fd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(fd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QN(){return QN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},QN.apply(this,arguments)}var Y_e=function(t){var n=t.yAxisId,r=dC(),a=hC(),i=W6(n);return i==null?null:j.createElement(Qd,QN({},i,{className:at("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:a},ticksGenerator:function(l){return hi(l,!0)}}))},ha=function(e){function t(){return z_e(this,t),U_e(this,t,arguments)}return K_e(t,e),q_e(t,[{key:"render",value:function(){return j.createElement(Y_e,this.props)}}])}(j.Component);h8(ha,"displayName","YAxis");h8(ha,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function rO(e){return Z_e(e)||J_e(e)||X_e(e)||Q_e()}function Q_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X_e(e,t){if(e){if(typeof e=="string")return XN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return XN(e,t)}}function J_e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Z_e(e){if(Array.isArray(e))return XN(e)}function XN(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var JN=function(t,n,r,a,i){var o=hs(t,fC),l=hs(t,zy),c=[].concat(rO(o),rO(l)),u=hs(t,qy),d="".concat(a,"Id"),h=a[0],m=n;if(c.length&&(m=c.reduce(function(p,g){if(g.props[d]===r&&za(g.props,"extendDomain")&&we(g.props[h])){var x=g.props[h];return[Math.min(p[0],x),Math.max(p[1],x)]}return p},m)),u.length){var f="".concat(h,"1"),v="".concat(h,"2");m=u.reduce(function(p,g){if(g.props[d]===r&&za(g.props,"extendDomain")&&we(g.props[f])&&we(g.props[v])){var x=g.props[f],y=g.props[v];return[Math.min(p[0],x,y),Math.max(p[1],x,y)]}return p},m)}return i&&i.length&&(m=i.reduce(function(p,g){return we(g)?[Math.min(p[0],g),Math.max(p[1],g)]:p},m)),m},f8={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,h,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var f=new a(d,h||c,m),v=n?n+u:u;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],f]:c._events[v].push(f):(c._events[v]=f,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)t.call(d,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=n?n+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var m=0,f=h.length,v=new Array(f);m<f;m++)v[m]=h[m].fn;return v},l.prototype.listenerCount=function(u){var d=n?n+u:u,h=this._events[d];return h?h.fn?1:h.length:0},l.prototype.emit=function(u,d,h,m,f,v){var p=n?n+u:u;if(!this._events[p])return!1;var g=this._events[p],x=arguments.length,y,b;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),x){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,d),!0;case 3:return g.fn.call(g.context,d,h),!0;case 4:return g.fn.call(g.context,d,h,m),!0;case 5:return g.fn.call(g.context,d,h,m,f),!0;case 6:return g.fn.call(g.context,d,h,m,f,v),!0}for(b=1,y=new Array(x-1);b<x;b++)y[b-1]=arguments[b];g.fn.apply(g.context,y)}else{var C=g.length,w;for(b=0;b<C;b++)switch(g[b].once&&this.removeListener(u,g[b].fn,void 0,!0),x){case 1:g[b].fn.call(g[b].context);break;case 2:g[b].fn.call(g[b].context,d);break;case 3:g[b].fn.call(g[b].context,d,h);break;case 4:g[b].fn.call(g[b].context,d,h,m);break;default:if(!y)for(w=1,y=new Array(x-1);w<x;w++)y[w-1]=arguments[w];g[b].fn.apply(g[b].context,y)}}return!0},l.prototype.on=function(u,d,h){return i(this,u,d,h,!1)},l.prototype.once=function(u,d,h){return i(this,u,d,h,!0)},l.prototype.removeListener=function(u,d,h,m){var f=n?n+u:u;if(!this._events[f])return this;if(!d)return o(this,f),this;var v=this._events[f];if(v.fn)v.fn===d&&(!m||v.once)&&(!h||v.context===h)&&o(this,f);else{for(var p=0,g=[],x=v.length;p<x;p++)(v[p].fn!==d||m&&!v[p].once||h&&v[p].context!==h)&&g.push(v[p]);g.length?this._events[f]=g.length===1?g[0]:g:o(this,f)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&o(this,d)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l})(f8);var ePe=f8.exports;const tPe=Ot(ePe);var Pj=new tPe,Aj="recharts.syncMouseEvents";function of(e){"@babel/helpers - typeof";return of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},of(e)}function nPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rPe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p8(r.key),r)}}function sPe(e,t,n){return t&&rPe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function kj(e,t,n){return t=p8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p8(e){var t=aPe(e,"string");return of(t)=="symbol"?t:t+""}function aPe(e,t){if(of(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(of(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var iPe=function(){function e(){nPe(this,e),kj(this,"activeIndex",0),kj(this,"coordinateList",[]),kj(this,"layout","horizontal")}return sPe(e,[{key:"setDetails",value:function(n){var r,a=n.coordinateList,i=a===void 0?null:a,o=n.container,l=o===void 0?null:o,c=n.layout,u=c===void 0?null:c,d=n.offset,h=d===void 0?null:d,m=n.mouseHandlerCallback,f=m===void 0?null:m;this.coordinateList=(r=i??this.coordinateList)!==null&&r!==void 0?r:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=h??this.offset,this.mouseHandlerCallback=f??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,d=((r=window)===null||r===void 0?void 0:r.scrollY)||0,h=i+c+u,m=o+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:h,pageY:m})}}}])}();function oPe(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var r=e==null?void 0:e[0],a=e==null?void 0:e[1];if(r&&a&&we(r)&&we(a))return!0}return!1}function lPe(e,t,n,r){var a=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-a,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function g8(e){var t=e.cx,n=e.cy,r=e.radius,a=e.startAngle,i=e.endAngle,o=Yt(t,n,r,a),l=Yt(t,n,r,i);return{points:[o,l],cx:t,cy:n,radius:r,startAngle:a,endAngle:i}}function cPe(e,t,n){var r,a,i,o;if(e==="horizontal")r=t.x,i=r,a=n.top,o=n.top+n.height;else if(e==="vertical")a=t.y,o=a,r=n.left,i=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,d=t.outerRadius,h=t.angle,m=Yt(l,c,u,h),f=Yt(l,c,d,h);r=m.x,a=m.y,i=f.x,o=f.y}else return g8(t);return[{x:r,y:a},{x:i,y:o}]}function lf(e){"@babel/helpers - typeof";return lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lf(e)}function sO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Bp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sO(Object(n),!0).forEach(function(r){uPe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uPe(e,t,n){return t=dPe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dPe(e){var t=hPe(e,"string");return lf(t)=="symbol"?t:t+""}function hPe(e,t){if(lf(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(lf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mPe(e){var t,n,r=e.element,a=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,h=e.layout,m=e.chartName,f=(t=r.props.cursor)!==null&&t!==void 0?t:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!f||!i||!o||m!=="ScatterChart"&&a!=="axis")return null;var v,p=Il;if(m==="ScatterChart")v=o,p=bNe;else if(m==="BarChart")v=lPe(h,o,c,d),p=iC;else if(h==="radial"){var g=g8(o),x=g.cx,y=g.cy,b=g.radius,C=g.startAngle,w=g.endAngle;v={cx:x,cy:y,startAngle:C,endAngle:w,innerRadius:b,outerRadius:b},p=c6}else v={points:cPe(h,o,c)},p=Il;var N=Bp(Bp(Bp(Bp({stroke:"#ccc",pointerEvents:"none"},c),v),Be(f,!1)),{},{payload:l,payloadIndex:u,className:at("recharts-tooltip-cursor",f.className)});return j.isValidElement(f)?j.cloneElement(f,N):j.createElement(p,N)}var fPe=["item"],pPe=["children","className","width","height","style","compact","title","desc"];function pd(e){"@babel/helpers - typeof";return pd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pd(e)}function Jc(){return Jc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jc.apply(this,arguments)}function aO(e,t){return xPe(e)||vPe(e,t)||x8(e,t)||gPe()}function gPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vPe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,a,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function xPe(e){if(Array.isArray(e))return e}function iO(e,t){if(e==null)return{};var n=yPe(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function yPe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function jPe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bPe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y8(r.key),r)}}function wPe(e,t,n){return t&&bPe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function NPe(e,t,n){return t=tx(t),SPe(e,v8()?Reflect.construct(t,n||[],tx(e).constructor):t.apply(e,n))}function SPe(e,t){if(t&&(pd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return CPe(e)}function CPe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(v8=function(){return!!e})()}function tx(e){return tx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},tx(e)}function _Pe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ZN(e,t)}function ZN(e,t){return ZN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},ZN(e,t)}function gd(e){return kPe(e)||APe(e)||x8(e)||PPe()}function PPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function x8(e,t){if(e){if(typeof e=="string")return e1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e1(e,t)}}function APe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function kPe(e){if(Array.isArray(e))return e1(e)}function e1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function oO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oO(Object(n),!0).forEach(function(r){He(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function He(e,t,n){return t=y8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y8(e){var t=TPe(e,"string");return pd(t)=="symbol"?t:t+""}function TPe(e,t){if(pd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(pd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var EPe={xAxis:["bottom","top"],yAxis:["left","right"]},OPe={width:"100%",height:"100%"},j8={x:0,y:0};function zp(e){return e}var DPe=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},MPe=function(t,n,r,a){var i=n.find(function(d){return d&&d.index===r});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=a.radius;return de(de(de({},a),Yt(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,u=a.angle;return de(de(de({},a),Yt(a.cx,a.cy,c,u)),{},{angle:u,radius:c})}return j8},Uy=function(t,n){var r=n.graphicalItems,a=n.dataStartIndex,i=n.dataEndIndex,o=(r??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(gd(l),gd(u)):l},[]);return o.length>0?o:t&&t.length&&we(a)&&we(i)?t.slice(a,i+1):[]};function b8(e){return e==="number"?[0,"auto"]:void 0}var t1=function(t,n,r,a){var i=t.graphicalItems,o=t.tooltipAxis,l=Uy(n,t);return r<0||!i||!i.length||r>=l.length?null:i.reduce(function(c,u){var d,h=(d=u.props.data)!==null&&d!==void 0?d:n;h&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=r&&(h=h.slice(t.dataStartIndex,t.dataEndIndex+1));var m;if(o.dataKey&&!o.allowDuplicatedCategory){var f=h===void 0?l:h;m=ev(f,o.dataKey,a)}else m=h&&h[r]||l[r];return m?[].concat(gd(c),[r6(u,m)]):c},[])},lO=function(t,n,r,a){var i=a||{x:t.chartX,y:t.chartY},o=DPe(i,r),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,d=W0e(o,l,u,c);if(d>=0&&u){var h=u[d]&&u[d].value,m=t1(t,n,d,h),f=MPe(r,l,d,i);return{activeTooltipIndex:d,activeLabel:h,activePayload:m,activeCoordinate:f}}return null},IPe=function(t,n){var r=n.axes,a=n.graphicalItems,i=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=t.layout,h=t.children,m=t.stackOffset,f=X5(d,i);return r.reduce(function(v,p){var g,x=p.type.defaultProps!==void 0?de(de({},p.type.defaultProps),p.props):p.props,y=x.type,b=x.dataKey,C=x.allowDataOverflow,w=x.allowDuplicatedCategory,N=x.scale,S=x.ticks,_=x.includeHidden,P=x[o];if(v[P])return v;var A=Uy(t.data,{graphicalItems:a.filter(function(ne){var oe,M=o in ne.props?ne.props[o]:(oe=ne.type.defaultProps)===null||oe===void 0?void 0:oe[o];return M===P}),dataStartIndex:c,dataEndIndex:u}),E=A.length,k,I,D;oPe(x.domain,C,y)&&(k=fN(x.domain,null,C),f&&(y==="number"||N!=="auto")&&(D=Gh(A,b,"category")));var U=b8(y);if(!k||k.length===0){var B,K=(B=x.domain)!==null&&B!==void 0?B:U;if(b){if(k=Gh(A,b,y),y==="category"&&f){var T=Iae(k);w&&T?(I=k,k=zv(0,E)):w||(k=AT(K,k,p).reduce(function(ne,oe){return ne.indexOf(oe)>=0?ne:[].concat(gd(ne),[oe])},[]))}else if(y==="category")w?k=k.filter(function(ne){return ne!==""&&!et(ne)}):k=AT(K,k,p).reduce(function(ne,oe){return ne.indexOf(oe)>=0||oe===""||et(oe)?ne:[].concat(gd(ne),[oe])},[]);else if(y==="number"){var $=Q0e(A,a.filter(function(ne){var oe,M,ue=o in ne.props?ne.props[o]:(oe=ne.type.defaultProps)===null||oe===void 0?void 0:oe[o],ve="hide"in ne.props?ne.props.hide:(M=ne.type.defaultProps)===null||M===void 0?void 0:M.hide;return ue===P&&(_||!ve)}),b,i,d);$&&(k=$)}f&&(y==="number"||N!=="auto")&&(D=Gh(A,b,"category"))}else f?k=zv(0,E):l&&l[P]&&l[P].hasStack&&y==="number"?k=m==="expand"?[0,1]:n6(l[P].stackGroups,c,u):k=Q5(A,a.filter(function(ne){var oe=o in ne.props?ne.props[o]:ne.type.defaultProps[o],M="hide"in ne.props?ne.props.hide:ne.type.defaultProps.hide;return oe===P&&(_||!M)}),y,d,!0);if(y==="number")k=JN(h,k,P,i,S),K&&(k=fN(K,k,C));else if(y==="category"&&K){var G=K,Q=k.every(function(ne){return G.indexOf(ne)>=0});Q&&(k=G)}}return de(de({},v),{},He({},P,de(de({},x),{},{axisType:i,domain:k,categoricalDomain:D,duplicateDomain:I,originalDomain:(g=x.domain)!==null&&g!==void 0?g:U,isCategorical:f,layout:d})))},{})},$Pe=function(t,n){var r=n.graphicalItems,a=n.Axis,i=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=t.layout,h=t.children,m=Uy(t.data,{graphicalItems:r,dataStartIndex:c,dataEndIndex:u}),f=m.length,v=X5(d,i),p=-1;return r.reduce(function(g,x){var y=x.type.defaultProps!==void 0?de(de({},x.type.defaultProps),x.props):x.props,b=y[o],C=b8("number");if(!g[b]){p++;var w;return v?w=zv(0,f):l&&l[b]&&l[b].hasStack?(w=n6(l[b].stackGroups,c,u),w=JN(h,w,b,i)):(w=fN(C,Q5(m,r.filter(function(N){var S,_,P=o in N.props?N.props[o]:(S=N.type.defaultProps)===null||S===void 0?void 0:S[o],A="hide"in N.props?N.props.hide:(_=N.type.defaultProps)===null||_===void 0?void 0:_.hide;return P===b&&!A}),"number",d),a.defaultProps.allowDataOverflow),w=JN(h,w,b,i)),de(de({},g),{},He({},b,de(de({axisType:i},a.defaultProps),{},{hide:!0,orientation:ds(EPe,"".concat(i,".").concat(p%2),null),domain:w,originalDomain:C,isCategorical:v,layout:d})))}return g},{})},RPe=function(t,n){var r=n.axisType,a=r===void 0?"xAxis":r,i=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=t.children,h="".concat(a,"Id"),m=hs(d,i),f={};return m&&m.length?f=IPe(t,{axes:m,graphicalItems:o,axisType:a,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(f=$Pe(t,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),f},LPe=function(t){var n=to(t),r=hi(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:D2(r,function(a){return a.coordinate}),tooltipAxis:n,tooltipAxisBandSize:kv(n,r)}},cO=function(t){var n=t.children,r=t.defaultShowTooltip,a=ss(n,sd),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},FPe=function(t){return!t||!t.length?!1:t.some(function(n){var r=pi(n&&n.type);return r&&r.indexOf("Bar")>=0})},uO=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},BPe=function(t,n){var r=t.props,a=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,u=r.width,d=r.height,h=r.children,m=r.margin||{},f=ss(h,sd),v=ss(h,du),p=Object.keys(c).reduce(function(w,N){var S=c[N],_=S.orientation;return!S.mirror&&!S.hide?de(de({},w),{},He({},_,w[_]+S.width)):w},{left:m.left||0,right:m.right||0}),g=Object.keys(o).reduce(function(w,N){var S=o[N],_=S.orientation;return!S.mirror&&!S.hide?de(de({},w),{},He({},_,ds(w,"".concat(_))+S.height)):w},{top:m.top||0,bottom:m.bottom||0}),x=de(de({},g),p),y=x.bottom;f&&(x.bottom+=f.props.height||sd.defaultProps.height),v&&n&&(x=G0e(x,a,r,n));var b=u-x.left-x.right,C=d-x.top-x.bottom;return de(de({brushBottom:y},x),{},{width:Math.max(b,0),height:Math.max(C,0)})},zPe=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},Wy=function(t){var n=t.chartName,r=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,h=t.defaultProps,m=function(x,y){var b=y.graphicalItems,C=y.stackGroups,w=y.offset,N=y.updateId,S=y.dataStartIndex,_=y.dataEndIndex,P=x.barSize,A=x.layout,E=x.barGap,k=x.barCategoryGap,I=x.maxBarSize,D=uO(A),U=D.numericAxisName,B=D.cateAxisName,K=FPe(b),T=[];return b.forEach(function($,G){var Q=Uy(x.data,{graphicalItems:[$],dataStartIndex:S,dataEndIndex:_}),ne=$.type.defaultProps!==void 0?de(de({},$.type.defaultProps),$.props):$.props,oe=ne.dataKey,M=ne.maxBarSize,ue=ne["".concat(U,"Id")],ve=ne["".concat(B,"Id")],ce={},re=c.reduce(function(Ee,nt){var pt=y["".concat(nt.axisType,"Map")],Nn=ne["".concat(nt.axisType,"Id")];pt&&pt[Nn]||nt.axisType==="zAxis"||ec();var dt=pt[Nn];return de(de({},Ee),{},He(He({},nt.axisType,dt),"".concat(nt.axisType,"Ticks"),hi(dt)))},ce),V=re[B],le=re["".concat(B,"Ticks")],W=C&&C[ue]&&C[ue].hasStack&&aje($,C[ue].stackGroups),X=pi($.type).indexOf("Bar")>=0,pe=kv(V,le),fe=[],Re=K&&H0e({barSize:P,stackGroups:C,totalSize:zPe(re,B)});if(X){var qe,ot,tt=et(M)?I:M,wt=(qe=(ot=kv(V,le,!0))!==null&&ot!==void 0?ot:tt)!==null&&qe!==void 0?qe:0;fe=K0e({barGap:E,barCategoryGap:k,bandSize:wt!==pe?wt:pe,sizeList:Re[ve],maxBarSize:tt}),wt!==pe&&(fe=fe.map(function(Ee){return de(de({},Ee),{},{position:de(de({},Ee.position),{},{offset:Ee.position.offset-wt/2})})}))}var ae=$&&$.type&&$.type.getComposedData;ae&&T.push({props:de(de({},ae(de(de({},re),{},{displayedData:Q,props:x,dataKey:oe,item:$,bandSize:pe,barPosition:fe,offset:w,stackedData:W,layout:A,dataStartIndex:S,dataEndIndex:_}))),{},He(He(He({key:$.key||"item-".concat(G)},U,re[U]),B,re[B]),"animationId",N)),childIndex:Kae($,x.children),item:$})}),T},f=function(x,y){var b=x.props,C=x.dataStartIndex,w=x.dataEndIndex,N=x.updateId;if(!wA({props:b}))return null;var S=b.children,_=b.layout,P=b.stackOffset,A=b.data,E=b.reverseStackOrder,k=uO(_),I=k.numericAxisName,D=k.cateAxisName,U=hs(S,r),B=rje(A,U,"".concat(I,"Id"),"".concat(D,"Id"),P,E),K=c.reduce(function(ne,oe){var M="".concat(oe.axisType,"Map");return de(de({},ne),{},He({},M,RPe(b,de(de({},oe),{},{graphicalItems:U,stackGroups:oe.axisType===I&&B,dataStartIndex:C,dataEndIndex:w}))))},{}),T=BPe(de(de({},K),{},{props:b,graphicalItems:U}),y==null?void 0:y.legendBBox);Object.keys(K).forEach(function(ne){K[ne]=d(b,K[ne],T,ne.replace("Map",""),n)});var $=K["".concat(D,"Map")],G=LPe($),Q=m(b,de(de({},K),{},{dataStartIndex:C,dataEndIndex:w,updateId:N,graphicalItems:U,stackGroups:B,offset:T}));return de(de({formattedGraphicalItems:Q,graphicalItems:U,offset:T,stackGroups:B},G),K)},v=function(g){function x(y){var b,C,w;return jPe(this,x),w=NPe(this,x,[y]),He(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),He(w,"accessibilityManager",new iPe),He(w,"handleLegendBBoxUpdate",function(N){if(N){var S=w.state,_=S.dataStartIndex,P=S.dataEndIndex,A=S.updateId;w.setState(de({legendBBox:N},f({props:w.props,dataStartIndex:_,dataEndIndex:P,updateId:A},de(de({},w.state),{},{legendBBox:N}))))}}),He(w,"handleReceiveSyncEvent",function(N,S,_){if(w.props.syncId===N){if(_===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent(S)}}),He(w,"handleBrushChange",function(N){var S=N.startIndex,_=N.endIndex;if(S!==w.state.dataStartIndex||_!==w.state.dataEndIndex){var P=w.state.updateId;w.setState(function(){return de({dataStartIndex:S,dataEndIndex:_},f({props:w.props,dataStartIndex:S,dataEndIndex:_,updateId:P},w.state))}),w.triggerSyncEvent({dataStartIndex:S,dataEndIndex:_})}}),He(w,"handleMouseEnter",function(N){var S=w.getMouseInfo(N);if(S){var _=de(de({},S),{},{isTooltipActive:!0});w.setState(_),w.triggerSyncEvent(_);var P=w.props.onMouseEnter;Ke(P)&&P(_,N)}}),He(w,"triggeredAfterMouseMove",function(N){var S=w.getMouseInfo(N),_=S?de(de({},S),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState(_),w.triggerSyncEvent(_);var P=w.props.onMouseMove;Ke(P)&&P(_,N)}),He(w,"handleItemMouseEnter",function(N){w.setState(function(){return{isTooltipActive:!0,activeItem:N,activePayload:N.tooltipPayload,activeCoordinate:N.tooltipPosition||{x:N.cx,y:N.cy}}})}),He(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),He(w,"handleMouseMove",function(N){N.persist(),w.throttleTriggeredAfterMouseMove(N)}),He(w,"handleMouseLeave",function(N){w.throttleTriggeredAfterMouseMove.cancel();var S={isTooltipActive:!1};w.setState(S),w.triggerSyncEvent(S);var _=w.props.onMouseLeave;Ke(_)&&_(S,N)}),He(w,"handleOuterEvent",function(N){var S=Hae(N),_=ds(w.props,"".concat(S));if(S&&Ke(_)){var P,A;/.*touch.*/i.test(S)?A=w.getMouseInfo(N.changedTouches[0]):A=w.getMouseInfo(N),_((P=A)!==null&&P!==void 0?P:{},N)}}),He(w,"handleClick",function(N){var S=w.getMouseInfo(N);if(S){var _=de(de({},S),{},{isTooltipActive:!0});w.setState(_),w.triggerSyncEvent(_);var P=w.props.onClick;Ke(P)&&P(_,N)}}),He(w,"handleMouseDown",function(N){var S=w.props.onMouseDown;if(Ke(S)){var _=w.getMouseInfo(N);S(_,N)}}),He(w,"handleMouseUp",function(N){var S=w.props.onMouseUp;if(Ke(S)){var _=w.getMouseInfo(N);S(_,N)}}),He(w,"handleTouchMove",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(N.changedTouches[0])}),He(w,"handleTouchStart",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&w.handleMouseDown(N.changedTouches[0])}),He(w,"handleTouchEnd",function(N){N.changedTouches!=null&&N.changedTouches.length>0&&w.handleMouseUp(N.changedTouches[0])}),He(w,"handleDoubleClick",function(N){var S=w.props.onDoubleClick;if(Ke(S)){var _=w.getMouseInfo(N);S(_,N)}}),He(w,"handleContextMenu",function(N){var S=w.props.onContextMenu;if(Ke(S)){var _=w.getMouseInfo(N);S(_,N)}}),He(w,"triggerSyncEvent",function(N){w.props.syncId!==void 0&&Pj.emit(Aj,w.props.syncId,N,w.eventEmitterSymbol)}),He(w,"applySyncEvent",function(N){var S=w.props,_=S.layout,P=S.syncMethod,A=w.state.updateId,E=N.dataStartIndex,k=N.dataEndIndex;if(N.dataStartIndex!==void 0||N.dataEndIndex!==void 0)w.setState(de({dataStartIndex:E,dataEndIndex:k},f({props:w.props,dataStartIndex:E,dataEndIndex:k,updateId:A},w.state)));else if(N.activeTooltipIndex!==void 0){var I=N.chartX,D=N.chartY,U=N.activeTooltipIndex,B=w.state,K=B.offset,T=B.tooltipTicks;if(!K)return;if(typeof P=="function")U=P(T,N);else if(P==="value"){U=-1;for(var $=0;$<T.length;$++)if(T[$].value===N.activeLabel){U=$;break}}var G=de(de({},K),{},{x:K.left,y:K.top}),Q=Math.min(I,G.x+G.width),ne=Math.min(D,G.y+G.height),oe=T[U]&&T[U].value,M=t1(w.state,w.props.data,U),ue=T[U]?{x:_==="horizontal"?T[U].coordinate:Q,y:_==="horizontal"?ne:T[U].coordinate}:j8;w.setState(de(de({},N),{},{activeLabel:oe,activeCoordinate:ue,activePayload:M,activeTooltipIndex:U}))}else w.setState(N)}),He(w,"renderCursor",function(N){var S,_=w.state,P=_.isTooltipActive,A=_.activeCoordinate,E=_.activePayload,k=_.offset,I=_.activeTooltipIndex,D=_.tooltipAxisBandSize,U=w.getTooltipEventType(),B=(S=N.props.active)!==null&&S!==void 0?S:P,K=w.props.layout,T=N.key||"_recharts-cursor";return L.createElement(mPe,{key:T,activeCoordinate:A,activePayload:E,activeTooltipIndex:I,chartName:n,element:N,isActive:B,layout:K,offset:k,tooltipAxisBandSize:D,tooltipEventType:U})}),He(w,"renderPolarAxis",function(N,S,_){var P=ds(N,"type.axisType"),A=ds(w.state,"".concat(P,"Map")),E=N.type.defaultProps,k=E!==void 0?de(de({},E),N.props):N.props,I=A&&A[k["".concat(P,"Id")]];return j.cloneElement(N,de(de({},I),{},{className:at(P,I.className),key:N.key||"".concat(S,"-").concat(_),ticks:hi(I,!0)}))}),He(w,"renderPolarGrid",function(N){var S=N.props,_=S.radialLines,P=S.polarAngles,A=S.polarRadius,E=w.state,k=E.radiusAxisMap,I=E.angleAxisMap,D=to(k),U=to(I),B=U.cx,K=U.cy,T=U.innerRadius,$=U.outerRadius;return j.cloneElement(N,{polarAngles:Array.isArray(P)?P:hi(U,!0).map(function(G){return G.coordinate}),polarRadius:Array.isArray(A)?A:hi(D,!0).map(function(G){return G.coordinate}),cx:B,cy:K,innerRadius:T,outerRadius:$,key:N.key||"polar-grid",radialLines:_})}),He(w,"renderLegend",function(){var N=w.state.formattedGraphicalItems,S=w.props,_=S.children,P=S.width,A=S.height,E=w.props.margin||{},k=P-(E.left||0)-(E.right||0),I=G5({children:_,formattedGraphicalItems:N,legendWidth:k,legendContent:u});if(!I)return null;var D=I.item,U=iO(I,fPe);return j.cloneElement(D,de(de({},U),{},{chartWidth:P,chartHeight:A,margin:E,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),He(w,"renderTooltip",function(){var N,S=w.props,_=S.children,P=S.accessibilityLayer,A=ss(_,Kn);if(!A)return null;var E=w.state,k=E.isTooltipActive,I=E.activeCoordinate,D=E.activePayload,U=E.activeLabel,B=E.offset,K=(N=A.props.active)!==null&&N!==void 0?N:k;return j.cloneElement(A,{viewBox:de(de({},B),{},{x:B.left,y:B.top}),active:K,label:U,payload:K?D:[],coordinate:I,accessibilityLayer:P})}),He(w,"renderBrush",function(N){var S=w.props,_=S.margin,P=S.data,A=w.state,E=A.offset,k=A.dataStartIndex,I=A.dataEndIndex,D=A.updateId;return j.cloneElement(N,{key:N.key||"_recharts-brush",onChange:$p(w.handleBrushChange,N.props.onChange),data:P,x:we(N.props.x)?N.props.x:E.left,y:we(N.props.y)?N.props.y:E.top+E.height+E.brushBottom-(_.bottom||0),width:we(N.props.width)?N.props.width:E.width,startIndex:k,endIndex:I,updateId:"brush-".concat(D)})}),He(w,"renderReferenceElement",function(N,S,_){if(!N)return null;var P=w,A=P.clipPathId,E=w.state,k=E.xAxisMap,I=E.yAxisMap,D=E.offset,U=N.type.defaultProps||{},B=N.props,K=B.xAxisId,T=K===void 0?U.xAxisId:K,$=B.yAxisId,G=$===void 0?U.yAxisId:$;return j.cloneElement(N,{key:N.key||"".concat(S,"-").concat(_),xAxis:k[T],yAxis:I[G],viewBox:{x:D.left,y:D.top,width:D.width,height:D.height},clipPathId:A})}),He(w,"renderActivePoints",function(N){var S=N.item,_=N.activePoint,P=N.basePoint,A=N.childIndex,E=N.isRange,k=[],I=S.props.key,D=S.item.type.defaultProps!==void 0?de(de({},S.item.type.defaultProps),S.item.props):S.item.props,U=D.activeDot,B=D.dataKey,K=de(de({index:A,dataKey:B,cx:_.x,cy:_.y,r:4,fill:aC(S.item),strokeWidth:2,stroke:"#fff",payload:_.payload,value:_.value},Be(U,!1)),tv(U));return k.push(x.renderActiveDot(U,K,"".concat(I,"-activePoint-").concat(A))),P?k.push(x.renderActiveDot(U,de(de({},K),{},{cx:P.x,cy:P.y}),"".concat(I,"-basePoint-").concat(A))):E&&k.push(null),k}),He(w,"renderGraphicChild",function(N,S,_){var P=w.filterFormatItem(N,S,_);if(!P)return null;var A=w.getTooltipEventType(),E=w.state,k=E.isTooltipActive,I=E.tooltipAxis,D=E.activeTooltipIndex,U=E.activeLabel,B=w.props.children,K=ss(B,Kn),T=P.props,$=T.points,G=T.isRange,Q=T.baseLine,ne=P.item.type.defaultProps!==void 0?de(de({},P.item.type.defaultProps),P.item.props):P.item.props,oe=ne.activeDot,M=ne.hide,ue=ne.activeBar,ve=ne.activeShape,ce=!!(!M&&k&&K&&(oe||ue||ve)),re={};A!=="axis"&&K&&K.props.trigger==="click"?re={onClick:$p(w.handleItemMouseEnter,N.props.onClick)}:A!=="axis"&&(re={onMouseLeave:$p(w.handleItemMouseLeave,N.props.onMouseLeave),onMouseEnter:$p(w.handleItemMouseEnter,N.props.onMouseEnter)});var V=j.cloneElement(N,de(de({},P.props),re));function le(nt){return typeof I.dataKey=="function"?I.dataKey(nt.payload):null}if(ce)if(D>=0){var W,X;if(I.dataKey&&!I.allowDuplicatedCategory){var pe=typeof I.dataKey=="function"?le:"payload.".concat(I.dataKey.toString());W=ev($,pe,U),X=G&&Q&&ev(Q,pe,U)}else W=$==null?void 0:$[D],X=G&&Q&&Q[D];if(ve||ue){var fe=N.props.activeIndex!==void 0?N.props.activeIndex:D;return[j.cloneElement(N,de(de(de({},P.props),re),{},{activeIndex:fe})),null,null]}if(!et(W))return[V].concat(gd(w.renderActivePoints({item:P,activePoint:W,basePoint:X,childIndex:D,isRange:G})))}else{var Re,qe=(Re=w.getItemByXY(w.state.activeCoordinate))!==null&&Re!==void 0?Re:{graphicalItem:V},ot=qe.graphicalItem,tt=ot.item,wt=tt===void 0?N:tt,ae=ot.childIndex,Ee=de(de(de({},P.props),re),{},{activeIndex:ae});return[j.cloneElement(wt,Ee),null,null]}return G?[V,null,null]:[V,null]}),He(w,"renderCustomized",function(N,S,_){return j.cloneElement(N,de(de({key:"recharts-customized-".concat(_)},w.props),w.state))}),He(w,"renderMap",{CartesianGrid:{handler:zp,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:zp},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:zp},YAxis:{handler:zp},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((b=y.id)!==null&&b!==void 0?b:hc("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=KF(w.triggeredAfterMouseMove,(C=y.throttleDelay)!==null&&C!==void 0?C:1e3/60),w.state={},w}return _Pe(x,g),wPe(x,[{key:"componentDidMount",value:function(){var b,C;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(C=this.props.margin.top)!==null&&C!==void 0?C:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,C=b.children,w=b.data,N=b.height,S=b.layout,_=ss(C,Kn);if(_){var P=_.props.defaultIndex;if(!(typeof P!="number"||P<0||P>this.state.tooltipTicks.length-1)){var A=this.state.tooltipTicks[P]&&this.state.tooltipTicks[P].value,E=t1(this.state,w,P,A),k=this.state.tooltipTicks[P].coordinate,I=(this.state.offset.top+N)/2,D=S==="horizontal",U=D?{x:k,y:I}:{y:k,x:I},B=this.state.formattedGraphicalItems.find(function(T){var $=T.item;return $.type.name==="Scatter"});B&&(U=de(de({},U),B.props.points[P].tooltipPosition),E=B.props.points[P].tooltipPayload);var K={activeTooltipIndex:P,isTooltipActive:!0,activeLabel:A,activePayload:E,activeCoordinate:U};this.setState(K),this.renderCursor(_),this.accessibilityManager.setIndex(P)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,C){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==C.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var w,N;this.accessibilityManager.setDetails({offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(N=this.props.margin.top)!==null&&N!==void 0?N:0}})}return null}},{key:"componentDidUpdate",value:function(b){kw([ss(b.children,Kn)],[ss(this.props.children,Kn)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=ss(this.props.children,Kn);if(b&&typeof b.props.shared=="boolean"){var C=b.props.shared?"axis":"item";return l.indexOf(C)>=0?C:i}return i}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var C=this.container,w=C.getBoundingClientRect(),N=yge(w),S={chartX:Math.round(b.pageX-N.left),chartY:Math.round(b.pageY-N.top)},_=w.width/C.offsetWidth||1,P=this.inRange(S.chartX,S.chartY,_);if(!P)return null;var A=this.state,E=A.xAxisMap,k=A.yAxisMap,I=this.getTooltipEventType(),D=lO(this.state,this.props.data,this.props.layout,P);if(I!=="axis"&&E&&k){var U=to(E).scale,B=to(k).scale,K=U&&U.invert?U.invert(S.chartX):null,T=B&&B.invert?B.invert(S.chartY):null;return de(de({},S),{},{xValue:K,yValue:T},D)}return D?de(de({},S),D):null}},{key:"inRange",value:function(b,C){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,N=this.props.layout,S=b/w,_=C/w;if(N==="horizontal"||N==="vertical"){var P=this.state.offset,A=S>=P.left&&S<=P.left+P.width&&_>=P.top&&_<=P.top+P.height;return A?{x:S,y:_}:null}var E=this.state,k=E.angleAxisMap,I=E.radiusAxisMap;if(k&&I){var D=to(k);return ET({x:S,y:_},D)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,C=this.getTooltipEventType(),w=ss(b,Kn),N={};w&&C==="axis"&&(w.props.trigger==="click"?N={onClick:this.handleClick}:N={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var S=tv(this.props,this.handleOuterEvent);return de(de({},S),N)}},{key:"addListener",value:function(){Pj.on(Aj,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Pj.removeListener(Aj,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,C,w){for(var N=this.state.formattedGraphicalItems,S=0,_=N.length;S<_;S++){var P=N[S];if(P.item===b||P.props.key===b.key||C===pi(P.item.type)&&w===P.childIndex)return P}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,C=this.state.offset,w=C.left,N=C.top,S=C.height,_=C.width;return L.createElement("defs",null,L.createElement("clipPath",{id:b},L.createElement("rect",{x:w,y:N,height:S,width:_})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(C,w){var N=aO(w,2),S=N[0],_=N[1];return de(de({},C),{},He({},S,_.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(C,w){var N=aO(w,2),S=N[0],_=N[1];return de(de({},C),{},He({},S,_.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var C;return(C=this.state.xAxisMap)===null||C===void 0||(C=C[b])===null||C===void 0?void 0:C.scale}},{key:"getYScaleByAxisId",value:function(b){var C;return(C=this.state.yAxisMap)===null||C===void 0||(C=C[b])===null||C===void 0?void 0:C.scale}},{key:"getItemByXY",value:function(b){var C=this.state,w=C.formattedGraphicalItems,N=C.activeItem;if(w&&w.length)for(var S=0,_=w.length;S<_;S++){var P=w[S],A=P.props,E=P.item,k=E.type.defaultProps!==void 0?de(de({},E.type.defaultProps),E.props):E.props,I=pi(E.type);if(I==="Bar"){var D=(A.data||[]).find(function(T){return tNe(b,T)});if(D)return{graphicalItem:P,payload:D}}else if(I==="RadialBar"){var U=(A.data||[]).find(function(T){return ET(b,T)});if(U)return{graphicalItem:P,payload:U}}else if(Ry(P,N)||Ly(P,N)||tf(P,N)){var B=q1e({graphicalItem:P,activeTooltipItem:N,itemData:k.data}),K=k.activeIndex===void 0?B:k.activeIndex;return{graphicalItem:de(de({},P),{},{childIndex:K}),payload:tf(P,N)?k.data[B]:P.props.data[B]}}}return null}},{key:"render",value:function(){var b=this;if(!wA(this))return null;var C=this.props,w=C.children,N=C.className,S=C.width,_=C.height,P=C.style,A=C.compact,E=C.title,k=C.desc,I=iO(C,pPe),D=Be(I,!1);if(A)return L.createElement(FE,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},L.createElement(Ew,Jc({},D,{width:S,height:_,title:E,desc:k}),this.renderClipPath(),SA(w,this.renderMap)));if(this.props.accessibilityLayer){var U,B;D.tabIndex=(U=this.props.tabIndex)!==null&&U!==void 0?U:0,D.role=(B=this.props.role)!==null&&B!==void 0?B:"application",D.onKeyDown=function(T){b.accessibilityManager.keyboardEvent(T)},D.onFocus=function(){b.accessibilityManager.focus()}}var K=this.parseEventsOfWrapper();return L.createElement(FE,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},L.createElement("div",Jc({className:at("recharts-wrapper",N),style:de({position:"relative",cursor:"default",width:S,height:_},P)},K,{ref:function($){b.container=$}}),L.createElement(Ew,Jc({},D,{width:S,height:_,title:E,desc:k,style:OPe}),this.renderClipPath(),SA(w,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(j.Component);He(v,"displayName",n),He(v,"defaultProps",de({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),He(v,"getDerivedStateFromProps",function(g,x){var y=g.dataKey,b=g.data,C=g.children,w=g.width,N=g.height,S=g.layout,_=g.stackOffset,P=g.margin,A=x.dataStartIndex,E=x.dataEndIndex;if(x.updateId===void 0){var k=cO(g);return de(de(de({},k),{},{updateId:0},f(de(de({props:g},k),{},{updateId:0}),x)),{},{prevDataKey:y,prevData:b,prevWidth:w,prevHeight:N,prevLayout:S,prevStackOffset:_,prevMargin:P,prevChildren:C})}if(y!==x.prevDataKey||b!==x.prevData||w!==x.prevWidth||N!==x.prevHeight||S!==x.prevLayout||_!==x.prevStackOffset||!uu(P,x.prevMargin)){var I=cO(g),D={chartX:x.chartX,chartY:x.chartY,isTooltipActive:x.isTooltipActive},U=de(de({},lO(x,b,S)),{},{updateId:x.updateId+1}),B=de(de(de({},I),D),U);return de(de(de({},B),f(de({props:g},B),x)),{},{prevDataKey:y,prevData:b,prevWidth:w,prevHeight:N,prevLayout:S,prevStackOffset:_,prevMargin:P,prevChildren:C})}if(!kw(C,x.prevChildren)){var K,T,$,G,Q=ss(C,sd),ne=Q&&(K=(T=Q.props)===null||T===void 0?void 0:T.startIndex)!==null&&K!==void 0?K:A,oe=Q&&($=(G=Q.props)===null||G===void 0?void 0:G.endIndex)!==null&&$!==void 0?$:E,M=ne!==A||oe!==E,ue=!et(b),ve=ue&&!M?x.updateId:x.updateId+1;return de(de({updateId:ve},f(de(de({props:g},x),{},{updateId:ve,dataStartIndex:ne,dataEndIndex:oe}),x)),{},{prevChildren:C,dataStartIndex:ne,dataEndIndex:oe})}return null}),He(v,"renderActiveDot",function(g,x,y){var b;return j.isValidElement(g)?b=j.cloneElement(g,x):Ke(g)?b=g(x):b=L.createElement(Lf,x),L.createElement(vt,{className:"recharts-active-dot",key:y},b)});var p=j.forwardRef(function(x,y){return L.createElement(v,Jc({},x,{ref:y}))});return p.displayName=v.displayName,p},dO=Wy({chartName:"LineChart",GraphicalChild:dd,axisComponents:[{axisType:"xAxis",AxisComp:da},{axisType:"yAxis",AxisComp:ha}],formatAxisMap:oC}),VPe=Wy({chartName:"BarChart",GraphicalChild:Ea,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:da},{axisType:"yAxis",AxisComp:ha}],formatAxisMap:oC}),vC=Wy({chartName:"PieChart",GraphicalChild:ga,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:$y},{axisType:"radiusAxis",AxisComp:My}],formatAxisMap:pje,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),xC=Wy({chartName:"AreaChart",GraphicalChild:Ms,axisComponents:[{axisType:"xAxis",AxisComp:da},{axisType:"yAxis",AxisComp:ha}],formatAxisMap:oC});function yC({open:e,onOpenChange:t,petId:n,consultationId:r}){const{data:a=[]}=ir(),{data:i=[]}=or(),{data:o=[]}=r2(),l=wee(),{toast:c}=it(),[u,d]=j.useState({diagnosis:"",notes:"",validUntil:""}),[h,m]=j.useState([{medication_name:"",dosage:"",frequency:"",duration:"",instructions:"",quantity:1,route:"oral"}]),f=i.find(w=>w.id===n),v=f?a.find(w=>w.id===f.client_id):null,p=o.filter(w=>(w.category==="medication"||w.category==="supplement")&&w.current_quantity>0&&w.active),g=w=>{const{name:N,value:S}=w.target;d(_=>({..._,[N]:S}))},x=(w,N,S)=>{m(_=>_.map((P,A)=>A===w?{...P,[N]:S}:P))},y=()=>{m(w=>[...w,{medication_name:"",dosage:"",frequency:"",duration:"",instructions:"",quantity:1,route:"oral"}])},b=w=>{h.length>1&&m(N=>N.filter((S,_)=>_!==w))},C=async w=>{if(w.preventDefault(),!f||!v){c({title:"Erreur",description:"Impossible de trouver l'animal ou le client associé.",variant:"destructive"});return}const N=h.filter(_=>_.medication_name.trim()!=="");if(N.length===0){c({title:"Erreur",description:"Veuillez ajouter au moins un médicament à la prescription.",variant:"destructive"});return}const S={consultation_id:r,animal_id:f.id,client_id:v.id,diagnosis:u.diagnosis,notes:u.notes,valid_until:u.validUntil||void 0,medications:N};try{await l.mutateAsync(S),c({title:"Prescription créée",description:`Prescription créée avec succès pour ${f.name}.`}),t(!1),d({diagnosis:"",notes:"",validUntil:""}),m([{medication_name:"",dosage:"",frequency:"",duration:"",instructions:"",quantity:1,route:"oral"}])}catch(_){console.error("Error creating prescription:",_),c({title:"Erreur",description:"Une erreur est survenue lors de la création de la prescription.",variant:"destructive"})}};return!f||!v?s.jsx(Qe,{open:e,onOpenChange:t,children:s.jsx(Ye,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:s.jsxs(Xe,{children:[s.jsx(Je,{children:"Erreur"}),s.jsx(Bt,{children:"Impossible de trouver l'animal ou le client associé."})]})})}):s.jsx(Qe,{open:e,onOpenChange:t,children:s.jsxs(Ye,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(Xe,{children:[s.jsx(Je,{children:"Nouvelle Prescription"}),s.jsxs(Bt,{children:["Créer une nouvelle prescription pour ",f.name," (",v.first_name," ",v.last_name,")"]})]}),s.jsxs("form",{onSubmit:C,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(O,{htmlFor:"diagnosis",children:"Diagnostic"}),s.jsx(Ue,{id:"diagnosis",name:"diagnosis",value:u.diagnosis,onChange:g,placeholder:"Entrez le diagnostic...",className:"h-20"})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"validUntil",children:"Valide jusqu'au (optionnel)"}),s.jsx(Y,{id:"validUntil",name:"validUntil",type:"date",value:u.validUntil,onChange:g})]})]}),s.jsxs("div",{className:"space-y-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(O,{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Médicaments"}),s.jsxs(R,{type:"button",onClick:y,size:"sm",variant:"outline",children:[s.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Ajouter un médicament"]})]}),h.map((w,N)=>s.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-6 space-y-4 bg-gray-50 dark:bg-gray-800",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h4",{className:"font-medium text-base text-gray-900 dark:text-gray-100",children:["Médicament ",N+1]}),h.length>1&&s.jsx(R,{type:"button",variant:"outline",size:"sm",onClick:()=>b(N),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",children:s.jsx(Vt,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"md:col-span-2 lg:col-span-1",children:[s.jsx(O,{className:"text-gray-700 dark:text-gray-300",children:"Médicament *"}),s.jsxs(je,{value:w.medication_name,onValueChange:S=>x(N,"medication_name",S),children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Sélectionner ou taper..."})}),s.jsx(ye,{children:p.map(S=>s.jsxs(z,{value:S.name,children:[S.name," (",S.current_quantity," ",S.unit,")"]},S.id))})]}),!p.find(S=>S.name===w.medication_name)&&s.jsx(Y,{className:"mt-2",value:w.medication_name,onChange:S=>x(N,"medication_name",S.target.value),placeholder:"Nom du médicament personnalisé"})]}),s.jsxs("div",{children:[s.jsx(O,{className:"text-gray-700 dark:text-gray-300",children:"Dosage"}),s.jsx(Y,{value:w.dosage||"",onChange:S=>x(N,"dosage",S.target.value),placeholder:"ex: 5mg"})]}),s.jsxs("div",{children:[s.jsx(O,{className:"text-gray-700 dark:text-gray-300",children:"Fréquence"}),s.jsxs(je,{value:w.frequency||"",onValueChange:S=>x(N,"frequency",S),children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Sélectionner..."})}),s.jsxs(ye,{children:[s.jsx(z,{value:"1x/jour",children:"1 fois par jour"}),s.jsx(z,{value:"2x/jour",children:"2 fois par jour"}),s.jsx(z,{value:"3x/jour",children:"3 fois par jour"}),s.jsx(z,{value:"1x/semaine",children:"1 fois par semaine"}),s.jsx(z,{value:"selon besoin",children:"Selon besoin"})]})]})]}),s.jsxs("div",{children:[s.jsx(O,{className:"text-gray-700 dark:text-gray-300",children:"Durée"}),s.jsx(Y,{value:w.duration||"",onChange:S=>x(N,"duration",S.target.value),placeholder:"ex: 7 jours"})]}),s.jsxs("div",{children:[s.jsx(O,{className:"text-gray-700 dark:text-gray-300",children:"Quantité *"}),s.jsx(Y,{type:"number",min:"1",value:w.quantity,onChange:S=>x(N,"quantity",parseInt(S.target.value)||1)})]}),s.jsxs("div",{children:[s.jsx(O,{className:"text-gray-700 dark:text-gray-300",children:"Voie d'administration"}),s.jsxs(je,{value:w.route||"oral",onValueChange:S=>x(N,"route",S),children:[s.jsx(xe,{children:s.jsx(be,{})}),s.jsxs(ye,{children:[s.jsx(z,{value:"oral",children:"Orale"}),s.jsx(z,{value:"injectable",children:"Injectable"}),s.jsx(z,{value:"topique",children:"Topique"}),s.jsx(z,{value:"intraveineuse",children:"Intraveineuse"}),s.jsx(z,{value:"intramusculaire",children:"Intramusculaire"}),s.jsx(z,{value:"sous-cutanée",children:"Sous-cutanée"})]})]})]})]}),s.jsxs("div",{children:[s.jsx(O,{className:"text-gray-700 dark:text-gray-300",children:"Instructions spéciales"}),s.jsx(Ue,{value:w.instructions||"",onChange:S=>x(N,"instructions",S.target.value),placeholder:"Instructions particulières pour ce médicament...",className:"h-16"})]})]},N)),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"notes",className:"text-gray-700 dark:text-gray-300",children:"Notes générales"}),s.jsx(Ue,{id:"notes",name:"notes",value:u.notes,onChange:g,placeholder:"Notes générales sur la prescription...",className:"h-20"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(R,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:l.isPending,children:"Annuler"}),s.jsx(R,{type:"submit",disabled:l.isPending,children:l.isPending?"Création...":"Créer la prescription"})]})]})]})})}function qPe({open:e,onOpenChange:t,prescription:n}){const{updatePrescription:r}=bt(),{toast:a}=it(),[i,o]=j.useState({date:"",prescribedBy:"",diagnosis:"",instructions:"",duration:"",followUpDate:"",status:"",notes:""}),[l,c]=j.useState([]);j.useEffect(()=>{e&&n&&(o({date:n.date,prescribedBy:n.prescribedBy,diagnosis:n.diagnosis,instructions:n.instructions,duration:n.duration,followUpDate:n.followUpDate||"",status:n.status,notes:n.notes||""}),c([...n.medications]))},[e,n]);const u=g=>{o(x=>({...x,[g.target.id]:g.target.value}))},d=(g,x)=>{o(y=>({...y,[g]:x}))},h=(g,x,y)=>{const b=[...l];b[g]={...b[g],[x]:x==="quantity"||x==="refills"||x==="cost"?Number(y):y},c(b)},m=()=>{const g=Math.max(...l.map(x=>x.id),0)+1;c([...l,{id:g,name:"",dosage:"",frequency:"",duration:"",instructions:"",quantity:1,unit:"comprimés",refills:0,cost:0}])},f=g=>{l.length>1&&c(l.filter((x,y)=>y!==g))},v=g=>{if(g.preventDefault(),!n)return;const x=l.filter(y=>y.name.trim()!=="");if(x.length===0){a({title:"Erreur",description:"Au moins un médicament doit être spécifié.",variant:"destructive"});return}r(n.id,{date:i.date,prescribedBy:i.prescribedBy,diagnosis:i.diagnosis,medications:x,instructions:i.instructions,duration:i.duration,followUpDate:i.followUpDate||void 0,status:i.status,notes:i.notes}),a({title:"Prescription mise à jour",description:"La prescription a été modifiée avec succès."}),t(!1)},p=()=>l.reduce((g,x)=>g+(x.cost||0),0);return n?s.jsx(Qe,{open:e,onOpenChange:t,children:s.jsxs(Ye,{className:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[s.jsxs(Xe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(Zi,{className:"h-5 w-5"}),"Modifier la Prescription"]}),s.jsxs(Bt,{children:["Modifiez la prescription pour ",n.petName," (",n.clientName,")."]})]}),s.jsxs("form",{onSubmit:v,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"date",children:"Date de prescription *"}),s.jsx(Y,{id:"date",type:"date",value:i.date,onChange:u,required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"prescribedBy",children:"Prescrit par *"}),s.jsx(Y,{id:"prescribedBy",value:i.prescribedBy,onChange:u,required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"diagnosis",children:"Diagnostic *"}),s.jsx(Y,{id:"diagnosis",value:i.diagnosis,onChange:u,required:!0})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"duration",children:"Durée du traitement"}),s.jsx(Y,{id:"duration",value:i.duration,onChange:u})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"followUpDate",children:"Date de suivi"}),s.jsx(Y,{id:"followUpDate",type:"date",value:i.followUpDate,onChange:u,min:i.date})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{children:"Statut"}),s.jsxs(je,{value:i.status,onValueChange:g=>d("status",g),children:[s.jsx(xe,{children:s.jsx(be,{})}),s.jsxs(ye,{children:[s.jsx(z,{value:"active",children:"Active"}),s.jsx(z,{value:"completed",children:"Terminée"}),s.jsx(z,{value:"discontinued",children:"Arrêtée"})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(O,{className:"text-base font-medium",children:"Médicaments prescrits"}),s.jsxs(R,{type:"button",variant:"outline",size:"sm",onClick:m,className:"gap-2",children:[s.jsx(Ze,{className:"h-4 w-4"}),"Ajouter médicament"]})]}),s.jsx("div",{className:"space-y-4",children:l.map((g,x)=>s.jsxs("div",{className:"p-4 border rounded-lg space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h4",{className:"font-medium",children:["Médicament ",x+1]}),l.length>1&&s.jsx(R,{type:"button",variant:"outline",size:"sm",onClick:()=>f(x),className:"text-red-600 hover:text-red-700",children:s.jsx(Vt,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{children:"Nom du médicament *"}),s.jsx(Y,{value:g.name,onChange:y=>h(x,"name",y.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{children:"Dosage *"}),s.jsx(Y,{value:g.dosage,onChange:y=>h(x,"dosage",y.target.value),required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{children:"Fréquence *"}),s.jsx(Y,{value:g.frequency,onChange:y=>h(x,"frequency",y.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{children:"Durée"}),s.jsx(Y,{value:g.duration,onChange:y=>h(x,"duration",y.target.value)})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{children:"Quantité"}),s.jsx(Y,{type:"number",value:g.quantity,onChange:y=>h(x,"quantity",parseInt(y.target.value)),min:"1"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{children:"Unité"}),s.jsxs(je,{value:g.unit,onValueChange:y=>h(x,"unit",y),children:[s.jsx(xe,{children:s.jsx(be,{})}),s.jsxs(ye,{children:[s.jsx(z,{value:"comprimés",children:"Comprimés"}),s.jsx(z,{value:"ml",children:"ml"}),s.jsx(z,{value:"g",children:"g"}),s.jsx(z,{value:"mg",children:"mg"}),s.jsx(z,{value:"ampoules",children:"Ampoules"}),s.jsx(z,{value:"flacons",children:"Flacons"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{children:"Coût (€)"}),s.jsx(Y,{type:"number",step:"0.01",value:g.cost,onChange:y=>h(x,"cost",parseFloat(y.target.value)),min:"0"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{children:"Instructions spécifiques"}),s.jsx(Y,{value:g.instructions,onChange:y=>h(x,"instructions",y.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{children:"Renouvellements"}),s.jsx(Y,{type:"number",value:g.refills,onChange:y=>h(x,"refills",parseInt(y.target.value)),min:"0"})]})]})]},g.id))}),s.jsx("div",{className:"flex justify-end",children:s.jsxs(Pe,{variant:"outline",className:"text-lg px-4 py-2",children:["Coût total: ",p().toFixed(2),"€"]})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"instructions",children:"Instructions générales"}),s.jsx(Ue,{id:"instructions",value:i.instructions,onChange:u,rows:3})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"notes",children:"Notes"}),s.jsx(Ue,{id:"notes",value:i.notes,onChange:u,rows:2})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(R,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsxs(R,{type:"submit",className:"gap-2",children:[s.jsx(au,{className:"h-4 w-4"}),"Sauvegarder"]})]})]})]})}):null}const UPe="vetpro-veterinarians";function n1({prescription:e}){const{settings:t}=At();JSON.parse(localStorage.getItem(UPe)||"[]");const n=e.prescribedBy,r=()=>{if(!e||!e.petName||!e.clientName)return;const a=window.open("","_blank");if(!a)return;const i=`
      <html>
        <head>
          <title>Prescription - ${e.petName}</title>
          <style>
            body {
              font-family: Arial, sans-serif;
              margin: 20px;
              line-height: 1.6;
            }
            .header {
              text-align: center;
              border-bottom: 2px solid #333;
              padding-bottom: 20px;
              margin-bottom: 30px;
            }
            .clinic-info {
              margin-bottom: 30px;
            }
            .patient-info {
              margin-bottom: 30px;
            }
            .prescription-details {
              margin-bottom: 30px;
            }
            .medications {
              margin-bottom: 30px;
            }
            .medication-item {
              border: 1px solid #ccc;
              padding: 15px;
              margin-bottom: 15px;
              border-radius: 5px;
            }
            .instructions {
              margin-bottom: 30px;
            }
            .footer {
              margin-top: 50px;
              text-align: center;
            }
            .signature-line {
              border-top: 1px solid #333;
              width: 200px;
              margin: 20px auto;
            }
            table {
              width: 100%;
              border-collapse: collapse;
              margin-bottom: 20px;
            }
            th, td {
              border: 1px solid #ddd;
              padding: 8px;
              text-align: left;
            }
            th {
              background-color: #f2f2f2;
            }
            .total-cost {
              font-weight: bold;
              text-align: right;
              margin-top: 20px;
            }
          </style>
        </head>
        <body>
          <div class="header">
            ${t.logo?`<img src="${t.logo}" alt="Logo clinique" style="height:60px;margin-bottom:10px;"/>`:""}
            <h1>PRESCRIPTION MÉDICALE</h1>
            <h2>${t.clinicName}</h2>
            <p>${t.address}<br>
            Tél: ${t.phone} | Email: ${t.email}</p>
          </div>

          <div class="clinic-info">
            <strong>Date de prescription:</strong> ${new Date(e.date).toLocaleDateString("fr-FR")}<br>
            <strong>Prescrit par:</strong> ${n}
          </div>

          <div class="patient-info">
            <h3>Informations du patient</h3>
            <table>
              <tr>
                <th>Propriétaire</th>
                <td>${e.clientName}</td>
              </tr>
              <tr>
                <th>Animal</th>
                <td>${e.petName}</td>
              </tr>
              <tr>
                <th>Diagnostic</th>
                <td>${e.diagnosis}</td>
              </tr>
              <tr>
                <th>Durée du traitement</th>
                <td>${e.duration}</td>
              </tr>
            </table>
          </div>

          <div class="medications">
            <h3>Médicaments prescrits</h3>
            ${e.medications.map(o=>`
              <div class="medication-item">
                <h4>${o.name}</h4>
                <table>
                  <tr>
                    <th>Posologie</th>
                    <td>${o.dosage} - ${o.frequency}</td>
                  </tr>
                  <tr>
                    <th>Durée</th>
                    <td>${o.duration}</td>
                  </tr>
                  <tr>
                    <th>Quantité</th>
                    <td>${o.quantity} ${o.unit}</td>
                  </tr>
                  ${o.refills&&o.refills>0?`
                    <tr>
                      <th>Renouvellements</th>
                      <td>${o.refills}</td>
                    </tr>
                  `:""}
                  ${o.instructions?`
                    <tr>
                      <th>Instructions</th>
                      <td>${o.instructions}</td>
                    </tr>
                  `:""}
                  ${o.cost?`
                    <tr>
                      <th>Coût</th>
                      <td>${o.cost.toFixed(2)}€</td>
                    </tr>
                  `:""}
                </table>
              </div>
            `).join("")}
            
            <div class="total-cost">
              Coût total: ${e.medications.reduce((o,l)=>o+(l.cost||0),0).toFixed(2)}€
            </div>
          </div>

          ${e.instructions?`
            <div class="instructions">
              <h3>Instructions générales</h3>
              <p>${e.instructions}</p>
            </div>
          `:""}

          ${e.followUpDate?`
            <div class="instructions">
              <h3>Suivi</h3>
              <p><strong>Date de suivi prévue:</strong> ${new Date(e.followUpDate).toLocaleDateString("fr-FR")}</p>
            </div>
          `:""}

          ${e.notes?`
            <div class="instructions">
              <h3>Notes</h3>
              <p>${e.notes}</p>
            </div>
          `:""}

          <div class="footer">
            <div class="signature-line"></div>
            <p>Signature du vétérinaire</p>
            <p><small>Cette prescription est valable pour la durée du traitement prescrit.</small></p>
          </div>
        </body>
      </html>
    `;a.document.write(i),a.document.close(),setTimeout(()=>{a.print(),a.close()},500)};return s.jsxs(R,{size:"sm",variant:"outline",onClick:r,className:"gap-2",children:[s.jsx($u,{className:"h-4 w-4"}),"Générer Ordonnance"]})}const WPe={active:"bg-green-100 text-green-800",completed:"bg-gray-100 text-gray-800",discontinued:"bg-red-100 text-red-800"},HPe={active:"Active",completed:"Terminée",discontinued:"Arrêtée"};function w8({petId:e,consultationId:t}){const{data:n=[]}=Yx(),{data:r=[]}=bee(e),{toast:a}=it(),[i,o]=j.useState(!1),[l,c]=j.useState(!1),[u,d]=j.useState(null),h=t?n.filter(x=>x.consultation_id===t):r,m=x=>{d(x),c(!0)},f=x=>{var y;confirm(`Êtes-vous sûr de vouloir supprimer la prescription pour ${((y=x.medications)==null?void 0:y.map(b=>b.medication_name).join(", "))||"médicaments"} ?`)&&a({title:"Fonctionnalité à implémenter",description:"La suppression de prescription n'est pas encore implémentée."})},v=x=>{switch(x){case"active":return s.jsx(Hn,{className:"h-4 w-4 text-green-600"});case"completed":return s.jsx(Ln,{className:"h-4 w-4 text-gray-600"});case"discontinued":return s.jsx(gm,{className:"h-4 w-4 text-red-600"});default:return s.jsx(Qt,{className:"h-4 w-4 text-gray-600"})}},p=x=>{var y,b,C,w;return{id:x.id,consultationId:x.consultation_id,clientId:x.client_id,clientName:`${((y=x.client)==null?void 0:y.first_name)||""} ${((b=x.client)==null?void 0:b.last_name)||""}`.trim(),petId:x.animal_id,petName:((C=x.animal)==null?void 0:C.name)||"",date:x.prescription_date,prescribedBy:"Non spécifié",diagnosis:x.diagnosis||"",medications:((w=x.medications)==null?void 0:w.map(N=>({id:N.id,name:N.medication_name,dosage:N.dosage||"",frequency:N.frequency||"",duration:N.duration||"",instructions:N.instructions||"",quantity:N.quantity||1,unit:"unit",cost:0})))||[],instructions:x.notes||"",duration:x.valid_until||"",followUpDate:void 0,status:x.status||"active",notes:x.notes||"",createdAt:x.created_at}},g=x=>(x==null?void 0:x.reduce((y,b)=>y+(b.cost||0),0))||0;return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[s.jsx(Zi,{className:"h-5 w-5"}),"Prescriptions (",h.length,")"]}),s.jsxs(R,{size:"sm",onClick:()=>o(!0),disabled:!t,className:"gap-2",children:[s.jsx(Ze,{className:"h-4 w-4"}),"Nouvelle Prescription"]})]}),h.length===0?s.jsx(ee,{children:s.jsxs(te,{className:"p-6 text-center text-muted-foreground",children:[s.jsx(Zi,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"Aucune prescription trouvée"}),s.jsx("p",{className:"text-sm",children:"Commencez par créer une nouvelle prescription"})]})}):s.jsx("div",{className:"space-y-4",children:h.sort((x,y)=>new Date(y.prescription_date||y.date).getTime()-new Date(x.prescription_date||x.date).getTime()).map(x=>{var y;return s.jsxs(ee,{className:"card-hover",children:[s.jsx(he,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[v(x.status),s.jsx(Pe,{className:WPe[x.status],children:HPe[x.status]})]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx(Ge,{className:"h-4 w-4 inline mr-1"}),new Date(x.prescription_date||x.date).toLocaleDateString("fr-FR")]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(n1,{prescription:p(x)}),s.jsx(R,{size:"sm",variant:"outline",onClick:()=>m(x),className:"h-8 w-8 p-0",title:"Modifier",children:s.jsx($t,{className:"h-3 w-3"})}),s.jsx(R,{size:"sm",variant:"outline",onClick:()=>f(x),className:"h-8 w-8 p-0 text-red-600",title:"Supprimer",children:s.jsx(Vt,{className:"h-3 w-3"})})]})]})}),s.jsxs(te,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Prescrit par:"}),s.jsx("p",{className:"text-muted-foreground",children:"Non spécifié"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Diagnostic:"}),s.jsx("p",{className:"text-muted-foreground",children:x.diagnosis})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Durée:"}),s.jsx("p",{className:"text-muted-foreground",children:x.valid_until?new Date(x.valid_until).toLocaleDateString("fr-FR"):"N/A"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Coût total:"}),s.jsxs("p",{className:"text-muted-foreground",children:[g(x.medications).toFixed(2),"€"]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-3",children:"Médicaments prescrits:"}),s.jsx("div",{className:"space-y-3",children:(y=x.medications)==null?void 0:y.map(b=>s.jsx("div",{className:"p-3 border rounded-lg bg-muted/30",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"font-medium",children:b.medication_name}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx("span",{className:"font-medium",children:"Posologie:"})," ",b.dosage," - ",b.frequency]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx("span",{className:"font-medium",children:"Durée:"})," ",b.duration]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx("span",{className:"font-medium",children:"Quantité:"})," ",b.quantity]}),b.instructions&&s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx("span",{className:"font-medium",children:"Instructions:"})," ",b.instructions]})]}),b.cost&&s.jsx("div",{className:"text-right",children:s.jsxs("div",{className:"font-medium",children:[b.cost.toFixed(2),"€"]})})]})},b.id))})]}),x.instructions&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Instructions générales:"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:x.instructions})]}),x.followUpDate&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Qt,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:"Suivi prévu:"}),s.jsx("span",{className:"text-muted-foreground",children:new Date(x.followUpDate).toLocaleDateString("fr-FR")})]}),x.notes&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Notes:"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:x.notes})]})]})]},x.id)})})]}),t&&s.jsx(yC,{open:i,onOpenChange:o,petId:e.toString(),consultationId:t.toString()}),s.jsx(qPe,{open:l,onOpenChange:c,prescription:u})]})}const KPe={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},GPe=(e,t,n)=>{let r;const a=KPe[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",String(t)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"dans "+r:"il y a "+r:r},YPe={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},QPe={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},XPe={full:"{{date}} 'à' {{time}}",long:"{{date}} 'à' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},JPe={date:cu({formats:YPe,defaultWidth:"full"}),time:cu({formats:QPe,defaultWidth:"full"}),dateTime:cu({formats:XPe,defaultWidth:"full"})},ZPe={lastWeek:"eeee 'dernier à' p",yesterday:"'hier à' p",today:"'aujourd’hui à' p",tomorrow:"'demain à' p'",nextWeek:"eeee 'prochain à' p",other:"P"},eAe=(e,t,n,r)=>ZPe[e],tAe={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jésus-Christ","après Jésus-Christ"]},nAe={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2ème trim.","3ème trim.","4ème trim."],wide:["1er trimestre","2ème trimestre","3ème trimestre","4ème trimestre"]},rAe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],wide:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},sAe={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},aAe={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"après-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’après-midi",evening:"du soir",night:"du matin"}},iAe=(e,t)=>{const n=Number(e),r=t==null?void 0:t.unit;if(n===0)return"0";const a=["year","week","hour","minute","second"];let i;return n===1?i=r&&a.includes(r)?"ère":"er":i="ème",n+i},oAe=["MMM","MMMM"],lAe={preprocessor:(e,t)=>e.getDate()===1||!t.some(r=>r.isToken&&oAe.includes(r.value))?t:t.map(r=>r.isToken&&r.value==="do"?{isToken:!0,value:"d"}:r),ordinalNumber:iAe,era:Pa({values:tAe,defaultWidth:"wide"}),quarter:Pa({values:nAe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Pa({values:rAe,defaultWidth:"wide"}),day:Pa({values:sAe,defaultWidth:"wide"}),dayPeriod:Pa({values:aAe,defaultWidth:"wide"})},cAe=/^(\d+)(ième|ère|ème|er|e)?/i,uAe=/\d+/i,dAe={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},hAe={any:[/^av/i,/^ap/i]},mAe={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},fAe={any:[/1/i,/2/i,/3/i,/4/i]},pAe={narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},gAe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},vAe={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},xAe={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},yAe={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},jAe={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},bAe={ordinalNumber:kL({matchPattern:cAe,parsePattern:uAe,valueCallback:e=>parseInt(e)}),era:Aa({matchPatterns:dAe,defaultMatchWidth:"wide",parsePatterns:hAe,defaultParseWidth:"any"}),quarter:Aa({matchPatterns:mAe,defaultMatchWidth:"wide",parsePatterns:fAe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Aa({matchPatterns:pAe,defaultMatchWidth:"wide",parsePatterns:gAe,defaultParseWidth:"any"}),day:Aa({matchPatterns:vAe,defaultMatchWidth:"wide",parsePatterns:xAe,defaultParseWidth:"any"}),dayPeriod:Aa({matchPatterns:yAe,defaultMatchWidth:"any",parsePatterns:jAe,defaultParseWidth:"any"})},zn={code:"fr",formatDistance:GPe,formatLong:JPe,formatRelative:eAe,localize:lAe,match:bAe,options:{weekStartsOn:1,firstWeekContainsDate:4}};function N8({animalId:e}){const{settings:t}=At(),{data:n}=or(),{data:r}=ir(),{data:a}=Id(),i=JSON.parse(localStorage.getItem("vetpro-veterinarians")||"[]"),o=n==null?void 0:n.find(h=>h.id===e),l=o?r==null?void 0:r.find(h=>h.id===o.client_id):null,c=(a==null?void 0:a.filter(h=>h.animal_id===e))||[],u=h=>{const m=new Date(h),f=new Date;if(isNaN(m.getTime()))return"N/A";let v=f.getFullYear()-m.getFullYear(),p=f.getMonth()-m.getMonth(),g=f.getDate()-m.getDate();if(g<0){p--;const b=new Date(f.getFullYear(),f.getMonth(),0);g+=b.getDate()}p<0&&(v--,p+=12);const x=Math.floor(g/7),y=[];return v>0&&y.push(`${v} an${v>1?"s":""}`),p>0&&y.push(`${p} mois`),x>0&&y.push(`${x} semain${x>1?"es":""}`),y.join(", ")||"0 jour"},d=()=>{if(!o||!l){alert("Données animal ou client manquantes");return}try{const h=window.open("",`vaccination_certificate_${o.id}`,"height=800,width=800");if(!h){alert("L'impression a été bloquée par le navigateur. Veuillez autoriser les popups pour ce site.");return}const m=`
        <!DOCTYPE html>
        <html>
          <head>
            <title>Certificat de Vaccination - ${o.name}</title>
            <style>
              body {
                font-family: Arial, sans-serif;
                margin: 20px;
                line-height: 1.6;
                color: #333;
              }
              .header {
                text-align: center;
                border-bottom: 3px solid #2c5530;
                padding-bottom: 20px;
                margin-bottom: 30px;
              }
              .header h1 {
                color: #2c5530;
                font-size: 32px;
                margin: 10px 0;
                font-weight: bold;
              }
              .clinic-info {
                margin-bottom: 30px;
                padding: 15px;
                background-color: #f8f9fa;
                border-radius: 8px;
              }
              .clinic-info img {
                height: 60px;
                margin-bottom: 10px;
              }
              .clinic-info h2 {
                color: #2c5530;
                margin: 10px 0;
              }
              .qr-section {
                float: right;
                margin-left: 20px;
              }
              .animal-info {
                clear: both;
                margin-bottom: 30px;
                padding: 20px;
                border: 2px solid #2c5530;
                border-radius: 8px;
              }
              .animal-info h2 {
                color: #2c5530;
                border-bottom: 2px solid #2c5530;
                padding-bottom: 10px;
                margin-bottom: 15px;
                font-size: 24px;
              }
              .animal-photo {
                text-align: center;
                margin-bottom: 20px;
              }
              .animal-photo img {
                width: 120px;
                height: 120px;
                object-fit: cover;
                border-radius: 50%;
                border: 3px solid #2c5530;
              }
              .info-grid {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 15px;
                margin-bottom: 20px;
              }
              .info-item {
                display: flex;
                align-items: center;
              }
              .info-label {
                font-weight: bold;
                min-width: 120px;
                color: #2c5530;
              }
              .info-value {
                color: #666;
              }
              .vaccinations-section {
                margin-bottom: 30px;
              }
              .vaccinations-section h2 {
                color: #2c5530;
                border-bottom: 2px solid #2c5530;
                padding-bottom: 10px;
                margin-bottom: 20px;
                font-size: 24px;
              }
              .vaccination-card {
                border: 1px solid #ddd;
                border-radius: 8px;
                margin-bottom: 15px;
                padding: 15px;
                background-color: #fdfdfd;
              }
              .vaccination-card h3 {
                color: #2c5530;
                margin: 0 0 10px 0;
                font-size: 18px;
              }
              .vaccination-details {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 15px;
              }
              .vaccination-item {
                display: flex;
                align-items: center;
              }
              .vaccination-label {
                font-weight: bold;
                min-width: 140px;
                color: #555;
              }
              .vaccination-value {
                color: #666;
              }
              .vets-info {
                margin-bottom: 30px;
                padding: 15px;
                background-color: #f8f9fa;
                border-radius: 8px;
              }
              .vets-info h2 {
                color: #2c5530;
                margin-bottom: 15px;
              }
              .vet-item {
                margin-bottom: 8px;
                color: #666;
              }
              .footer {
                text-align: center;
                margin-top: 40px;
                padding-top: 20px;
                border-top: 1px solid #ddd;
                color: #888;
                font-size: 12px;
              }
              .no-vaccinations {
                text-align: center;
                color: #666;
                font-style: italic;
                padding: 40px;
                border: 2px dashed #ddd;
                border-radius: 8px;
              }
              
              @media print {
                body { margin: 0; }
                .no-print { display: none; }
              }
            </style>
          </head>
          <body>
            <div class="header">
              ${t.logo?`<img src="${t.logo}" alt="Logo clinique" />`:""}
              <h1>CERTIFICAT DE VACCINATION</h1>
              <div class="qr-section">
                <canvas id="qrcode" width="100" height="100"></canvas>
              </div>
            </div>

            ${t.showClinicInfo?`
            <div class="clinic-info">
              <h2>${t.clinicName||"Clinique Vétérinaire"}</h2>
              <p><strong>Adresse:</strong> ${t.address||"N/A"}</p>
              <p><strong>Téléphone:</strong> ${t.phone||"N/A"} | <strong>Email:</strong> ${t.email||"N/A"}</p>
              ${t.website?`<p><strong>Site web:</strong> ${t.website}</p>`:""}
            </div>
            `:""}

            ${t.showVetsInfo&&i.length>0?`
            <div class="vets-info">
              <h2>Équipe Vétérinaire</h2>
              ${i.map(f=>`
                <div class="vet-item">
                  <strong>${f.title||"Dr."} ${f.name}</strong>
                  ${f.specialty?` - ${f.specialty}`:""}
                </div>
              `).join("")}
            </div>
            `:""}

            <div class="animal-info">
              <h2>Informations de l'Animal</h2>
              
              ${o.photo_url?`
              <div class="animal-photo">
                <img src="${o.photo_url}" alt="Photo de ${o.name}" />
              </div>
              `:""}

              <div class="info-grid">
                <div class="info-item">
                  <span class="info-label">Nom:</span>
                  <span class="info-value">${o.name}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Espèce:</span>
                  <span class="info-value">${o.species}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Race:</span>
                  <span class="info-value">${o.breed||"N/A"}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Âge:</span>
                  <span class="info-value">${o.birth_date?u(o.birth_date):"N/A"}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Sexe:</span>
                  <span class="info-value">${o.sex||"N/A"}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Poids:</span>
                  <span class="info-value">${o.weight?o.weight+" kg":"N/A"}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Propriétaire:</span>
                  <span class="info-value">${l.first_name} ${l.last_name}</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Contact:</span>
                  <span class="info-value">${l.phone||l.email||"N/A"}</span>
                </div>
              </div>
            </div>

            <div class="vaccinations-section">
              <h2>Historique des Vaccinations</h2>
              
              ${c.length>0?c.map(f=>`
                  <div class="vaccination-card">
                    <h3>${f.vaccine_name}</h3>
                    <div class="vaccination-details">
                      <div class="vaccination-item">
                        <span class="vaccination-label">Date d'administration:</span>
                        <span class="vaccination-value">
                          ${f.vaccination_date?st(new Date(f.vaccination_date),"dd/MM/yyyy",{locale:zn}):"N/A"}
                        </span>
                      </div>
                      <div class="vaccination-item">
                        <span class="vaccination-label">Prochaine échéance:</span>
                        <span class="vaccination-value">
                          ${f.next_due_date?st(new Date(f.next_due_date),"dd/MM/yyyy",{locale:zn}):"N/A"}
                        </span>
                      </div>
                      <div class="vaccination-item">
                        <span class="vaccination-label">Type de vaccin:</span>
                        <span class="vaccination-value">${f.vaccine_type||"N/A"}</span>
                      </div>
                      <div class="vaccination-item">
                        <span class="vaccination-label">Fabricant:</span>
                        <span class="vaccination-value">${f.manufacturer||"N/A"}</span>
                      </div>
                      <div class="vaccination-item">
                        <span class="vaccination-label">Numéro de lot:</span>
                        <span class="vaccination-value">${f.batch_number||"N/A"}</span>
                      </div>
                  
                    </div>
                    ${f.notes?`
                      <div style="margin-top: 10px; padding-top: 10px; border-top: 1px solid #eee;">
                        <strong>Notes:</strong> ${f.notes}
                      </div>
                    `:""}
                  </div>
                `).join(""):`<div class="no-vaccinations">
                  <p>Aucune vaccination enregistrée pour cet animal</p>
                </div>`}
            </div>

            <div class="footer">
              <p>Certificat généré le ${st(new Date,"dd/MM/yyyy à HH:mm",{locale:zn})}</p>
              <p>VetPro - Système de Gestion Vétérinaire</p>
            </div>

            <script>
              // Generate QR Code (simple implementation)
              function generateQRCode() {
                const canvas = document.getElementById('qrcode');
                if (canvas) {
                  const ctx = canvas.getContext('2d');
                  ctx.fillStyle = '#000';
                  ctx.fillRect(0, 0, 100, 100);
                  ctx.fillStyle = '#fff';
                  ctx.font = '12px Arial';
                  ctx.textAlign = 'center';
                  ctx.fillText('QR', 50, 45);
                  ctx.fillText('CODE', 50, 60);
                }
              }
              
              window.onload = function() {
                generateQRCode();
                setTimeout(function() {
                  window.print();
                }, 500);
              };
            <\/script>
          </body>
        </html>
      `;h.document.open(),h.document.write(m),h.document.close(),h.onload=function(){setTimeout(()=>{h.focus(),h.print()},500)}}catch(h){console.error("Erreur lors de l'impression:",h),alert("Une erreur est survenue lors de l'impression du certificat.")}};return!o||!l?s.jsxs(R,{variant:"outline",disabled:!0,children:[s.jsx($u,{className:"h-4 w-4 mr-2"}),"Certificat de vaccination"]}):s.jsxs(R,{variant:"outline",onClick:d,children:[s.jsx($u,{className:"h-4 w-4 mr-2"}),"Certificat de vaccination"]})}function r1({children:e,selectedAnimalId:t,open:n,onOpenChange:r}){const{data:a=[]}=or(),{data:i=[]}=ir(),o=lee(),{toast:l}=it(),{data:c=[],isLoading:u}=J3(),[d,h]=j.useState(!1),m=n!==void 0?n:d,f=r||h,[v,p]=j.useState({animalId:t||"",vaccineName:"",vaccineType:"",manufacturer:"",batchNumber:"",vaccinationDate:st(new Date,"yyyy-MM-dd"),nextDueDate:"",administeredBy:"",notes:""}),g=async b=>{var N,S,_,P;if(b.preventDefault(),!v.animalId||!v.vaccineName||!v.vaccinationDate){l({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires",variant:"destructive"});return}if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(v.animalId)){l({title:"Erreur",description:"ID d'animal invalide",variant:"destructive"});return}const w={animal_id:v.animalId,vaccine_name:v.vaccineName.trim(),vaccine_type:v.vaccineType||void 0,manufacturer:((N=v.manufacturer)==null?void 0:N.trim())||void 0,batch_number:((S=v.batchNumber)==null?void 0:S.trim())||void 0,vaccination_date:v.vaccinationDate,next_due_date:v.nextDueDate||void 0,administered_by:((_=v.administeredBy)==null?void 0:_.trim())||void 0,notes:((P=v.notes)==null?void 0:P.trim())||void 0};try{await o.mutateAsync(w),l({title:"Vaccination ajoutée",description:`La vaccination ${v.vaccineName} a été ajoutée avec succès`}),p({animalId:t||"",vaccineName:"",vaccineType:"",manufacturer:"",batchNumber:"",vaccinationDate:st(new Date,"yyyy-MM-dd"),nextDueDate:"",administeredBy:"",notes:""}),f(!1)}catch{l({title:"Erreur",description:"Impossible d'ajouter la vaccination",variant:"destructive"})}},x=a.find(b=>b.id===v.animalId),y=x?i.find(b=>b.id===x.client_id):null;return s.jsxs(Qe,{open:m,onOpenChange:f,children:[s.jsx(Tf,{asChild:!0,children:e||s.jsxs(R,{className:"gap-2",children:[s.jsx(Ze,{className:"h-4 w-4"}),"Nouvelle Vaccination"]})}),s.jsxs(Ye,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(Xe,{children:s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(Vr,{className:"h-5 w-5"}),"Nouvelle Vaccination"]})}),s.jsxs("form",{onSubmit:g,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"animal",children:"Animal *"}),s.jsxs(je,{value:v.animalId,onValueChange:b=>p({...v,animalId:b}),children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Sélectionnez un animal"})}),s.jsx(ye,{children:a.map(b=>{const C=i.find(w=>w.id===b.client_id);return s.jsxs(z,{value:b.id,children:[b.name," - ",b.species," (",C?`${C.first_name} ${C.last_name}`:"Client inconnu",")"]},b.id)})})]}),x&&y&&s.jsxs("p",{className:"text-sm text-gray-600",children:["Propriétaire: ",y.first_name," ",y.last_name]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"vaccineName",children:"Nom du vaccin *"}),s.jsx(Y,{id:"vaccineName",value:v.vaccineName,onChange:b=>p({...v,vaccineName:b.target.value}),placeholder:"ex: DHPP, Rage, FVRCP...",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"vaccineType",children:"Type de vaccin"}),s.jsxs(je,{value:v.vaccineType,onValueChange:b=>p({...v,vaccineType:b}),children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Sélectionnez le type"})}),s.jsx(ye,{children:c.map(b=>s.jsx(z,{value:b,children:b},b))})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"manufacturer",children:"Fabricant"}),s.jsx(Y,{id:"manufacturer",value:v.manufacturer,onChange:b=>p({...v,manufacturer:b.target.value}),placeholder:"ex: Zoetis, Virbac, Merial..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"batchNumber",children:"Numéro de lot"}),s.jsx(Y,{id:"batchNumber",value:v.batchNumber,onChange:b=>p({...v,batchNumber:b.target.value}),placeholder:"Numéro de lot du vaccin"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"vaccinationDate",children:"Date de vaccination *"}),s.jsx(Y,{id:"vaccinationDate",type:"date",value:v.vaccinationDate,onChange:b=>p({...v,vaccinationDate:b.target.value}),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"nextDueDate",children:"Prochain rappel"}),s.jsx(Y,{id:"nextDueDate",type:"date",value:v.nextDueDate,onChange:b=>p({...v,nextDueDate:b.target.value}),min:v.vaccinationDate})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"notes",children:"Notes"}),s.jsx(Ue,{id:"notes",value:v.notes,onChange:b=>p({...v,notes:b.target.value}),placeholder:"Notes complémentaires...",rows:3})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(R,{type:"button",variant:"outline",onClick:()=>f(!1),children:"Annuler"}),s.jsx(R,{type:"submit",disabled:o.isPending,children:o.isPending?"Ajout...":"Ajouter la vaccination"})]})]})]})]})}function s1({open:e,onOpenChange:t,selectedAnimalId:n,selectedClientId:r,editingAntiparasitic:a}){const{data:i}=or(),{data:o}=ir(),l=fee(),{toast:c}=it(),{data:u=[],isLoading:d}=Z3(),[h,m]=j.useState({clientId:r||"",animalId:n||"",productName:"",activeIngredient:"",parasiteType:"",administrationRoute:"",dosage:"",treatmentDate:st(new Date,"yyyy-MM-dd"),nextTreatmentDate:"",administeredBy:"",effectivenessRating:"none",notes:""}),[f,v]=j.useState(null),{data:p}=vee(f==null?void 0:f.species);j.useEffect(()=>{r&&m(w=>({...w,clientId:r,animalId:""})),n&&m(w=>({...w,animalId:n}))},[r,n]),j.useEffect(()=>{if(h.animalId&&i){const w=i.find(N=>N.id===h.animalId);v(w),w&&m(N=>({...N,clientId:w.client_id}))}},[h.animalId,i]),j.useEffect(()=>{var w,N;a&&m({clientId:((w=a.animal)==null?void 0:w.client_id)||"",animalId:a.animal_id,productName:a.product_name,activeIngredient:a.active_ingredient||"",parasiteType:a.parasite_type||"",administrationRoute:a.administration_route||"",dosage:a.dosage||"",treatmentDate:a.treatment_date,nextTreatmentDate:a.next_treatment_date||"",administeredBy:a.administered_by||"",effectivenessRating:((N=a.effectiveness_rating)==null?void 0:N.toString())||"none",notes:a.notes||""})},[a]);const g=(w,N)=>{m(S=>({...S,[w]:N}))},x=w=>{m(N=>({...N,productName:w.product_name,activeIngredient:w.active_ingredient||"",parasiteType:w.parasite_type,administrationRoute:w.administration_route||"",dosage:w.dosage_recommendation||"",nextTreatmentDate:w.frequency_days?st(c2(new Date(N.treatmentDate),w.frequency_days),"yyyy-MM-dd"):""})),c({title:"Protocole appliqué",description:`Le protocole ${w.product_name} a été appliqué.`})},y=()=>{m({clientId:r||"",animalId:n||"",productName:"",activeIngredient:"",parasiteType:"",administrationRoute:"",dosage:"",treatmentDate:st(new Date,"yyyy-MM-dd"),nextTreatmentDate:"",administeredBy:"",effectivenessRating:"none",notes:""})},b=async w=>{var N,S,_,P,A,E,k;if(w.preventDefault(),!h.animalId||!h.productName||!h.treatmentDate){c({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires.",variant:"destructive"});return}if(h.effectivenessRating&&h.effectivenessRating!=="none"){const I=parseInt(h.effectivenessRating);if(isNaN(I)||I<1||I>5){c({title:"Erreur",description:"L'évaluation d'efficacité doit être un nombre entre 1 et 5.",variant:"destructive"});return}}try{const I={animal_id:h.animalId,product_name:h.productName,treatment_date:h.treatmentDate};if((N=h.activeIngredient)!=null&&N.trim()&&(I.active_ingredient=h.activeIngredient.trim()),(S=h.parasiteType)!=null&&S.trim()&&(I.parasite_type=h.parasiteType.trim()),(_=h.administrationRoute)!=null&&_.trim()&&(I.administration_route=h.administrationRoute.trim()),(P=h.dosage)!=null&&P.trim()&&(I.dosage=h.dosage.trim()),(A=h.nextTreatmentDate)!=null&&A.trim()&&(I.next_treatment_date=h.nextTreatmentDate.trim()),(E=h.administeredBy)!=null&&E.trim()&&(I.administered_by=h.administeredBy.trim()),(k=h.notes)!=null&&k.trim()&&(I.notes=h.notes.trim()),h.effectivenessRating&&h.effectivenessRating!=="none"&&h.effectivenessRating!==""&&h.effectivenessRating!=="undefined"){const D=parseInt(h.effectivenessRating);!isNaN(D)&&D>=1&&D<=5&&(I.effectiveness_rating=D)}console.log("Submitting antiparasitic data:",I),console.log("Effectiveness rating value:",h.effectivenessRating),console.log("Effectiveness rating type:",typeof h.effectivenessRating),await l.mutateAsync(I),c({title:"Succès",description:"Le traitement antiparasitaire a été enregistré avec succès."}),y(),t(!1)}catch(I){console.error("Erreur lors de la création du traitement antiparasitaire:",I);let D="Une erreur s'est produite lors de l'enregistrement.";(I==null?void 0:I.code)==="23514"?D="Les données saisies ne respectent pas les contraintes de validation. Vérifiez que l'évaluation d'efficacité est entre 1 et 10.":(I==null?void 0:I.code)==="42501"?D="Vous n'avez pas les permissions nécessaires pour effectuer cette action.":I!=null&&I.message&&(D=I.message),c({title:"Erreur",description:D,variant:"destructive"})}},C=(i==null?void 0:i.filter(w=>h.clientId?w.client_id===h.clientId:!0))||[];return s.jsx(Qe,{open:e,onOpenChange:t,children:s.jsxs(Ye,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsx(Xe,{children:s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(Ia,{className:"h-5 w-5"}),a?"Modifier le traitement":"Nouveau traitement antiparasitaire"]})}),s.jsxs("form",{onSubmit:b,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"clientId",children:"Client *"}),s.jsxs(je,{value:h.clientId,onValueChange:w=>g("clientId",w),children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Sélectionner un client"})}),s.jsx(ye,{children:o==null?void 0:o.map(w=>s.jsxs(z,{value:w.id,children:[w.first_name," ",w.last_name]},w.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"animalId",children:"Animal *"}),s.jsxs(je,{value:h.animalId,onValueChange:w=>g("animalId",w),disabled:!h.clientId,children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Sélectionner un animal"})}),s.jsx(ye,{children:C.map(w=>s.jsxs(z,{value:w.id,children:[w.name," (",w.species,")"]},w.id))})]})]})]}),f&&s.jsxs(ee,{children:[s.jsx(he,{children:s.jsx(me,{className:"text-sm",children:"Animal sélectionné"})}),s.jsx(te,{children:s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Nom:"})," ",f.name]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Espèce:"})," ",f.species]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Race:"})," ",f.breed||"N/A"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Poids:"})," ",f.weight?`${f.weight} kg`:"N/A"]})]})})]}),p&&p.length>0&&s.jsxs(ee,{children:[s.jsx(he,{children:s.jsxs(me,{className:"text-sm",children:["Protocoles recommandés pour ",f==null?void 0:f.species]})}),s.jsx(te,{children:s.jsx("div",{className:"grid gap-2",children:p.map(w=>s.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:w.product_name}),s.jsxs("div",{className:"text-sm text-gray-600",children:[w.parasite_type," - ",w.active_ingredient]})]}),s.jsxs(R,{type:"button",variant:"outline",size:"sm",onClick:()=>x(w),children:[s.jsx(Ze,{className:"h-4 w-4 mr-1"}),"Appliquer"]})]},w.id))})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"productName",children:"Nom du produit *"}),s.jsx(Y,{id:"productName",value:h.productName,onChange:w=>g("productName",w.target.value),placeholder:"Ex: Frontline, Bravecto...",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"activeIngredient",children:"Principe actif"}),s.jsx(Y,{id:"activeIngredient",value:h.activeIngredient,onChange:w=>g("activeIngredient",w.target.value),placeholder:"Ex: Fipronil, Fluralaner..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"parasiteType",children:"Type de parasite"}),s.jsxs(je,{value:h.parasiteType,onValueChange:w=>g("parasiteType",w),children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Sélectionner le type"})}),s.jsx(ye,{children:u.map(w=>s.jsx(z,{value:w,children:w},w))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"administrationRoute",children:"Voie d'administration"}),s.jsxs(je,{value:h.administrationRoute,onValueChange:w=>g("administrationRoute",w),children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Sélectionner la voie"})}),s.jsxs(ye,{children:[s.jsx(z,{value:"spot_on",children:"Spot-on (pipette)"}),s.jsx(z,{value:"oral",children:"Orale (comprimé/liquide)"}),s.jsx(z,{value:"injection",children:"Injection"}),s.jsx(z,{value:"spray",children:"Spray"}),s.jsx(z,{value:"collier",children:"Collier"}),s.jsx(z,{value:"shampoing",children:"Shampoing"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"dosage",children:"Dosage"}),s.jsx(Y,{id:"dosage",value:h.dosage,onChange:w=>g("dosage",w.target.value),placeholder:"Ex: 1 pipette, 1 comprimé..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"treatmentDate",children:"Date du traitement *"}),s.jsx(Y,{id:"treatmentDate",type:"date",value:h.treatmentDate,onChange:w=>g("treatmentDate",w.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"nextTreatmentDate",children:"Prochain traitement"}),s.jsx(Y,{id:"nextTreatmentDate",type:"date",value:h.nextTreatmentDate,onChange:w=>g("nextTreatmentDate",w.target.value)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(O,{htmlFor:"effectivenessRating",children:["Efficacité du traitement (optionnel)",s.jsx("span",{className:"text-xs text-muted-foreground block",children:"Évaluez l'efficacité sur une échelle de 1 à 5"})]}),s.jsxs(je,{value:h.effectivenessRating,onValueChange:w=>g("effectivenessRating",w),children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Sélectionner l'efficacité"})}),s.jsxs(ye,{children:[s.jsx(z,{value:"none",children:"Non évalué"}),[...Array(5)].map((w,N)=>s.jsxs(z,{value:(N+1).toString(),children:[N+1," - ",N+1<=2?"Faible":N+1<=3?"Moyenne":N+1<=4?"Bonne":"Excellente"]},N+1))]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"notes",children:"Notes"}),s.jsx(Ue,{id:"notes",value:h.notes,onChange:w=>g("notes",w.target.value),placeholder:"Observations, effets secondaires, etc.",rows:3})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx(R,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsxs(R,{type:"submit",disabled:l.isPending,children:[l.isPending&&s.jsx(Qn,{className:"h-4 w-4 mr-2 animate-spin"}),a?"Modifier":"Enregistrer"]})]})]})]})})}function wAe({open:e,onOpenChange:t,pet:n}){const{consultations:r,clients:a,getConsultationsByPetId:i,getClientById:o,getPrescriptionsByPetId:l,getActivePrescriptions:c,getVaccinationsByPetId:u,getAntiparasiticsByPetId:d,updatePet:h,updateConsultation:m,updateVaccination:f,updateVaccinationStatuses:v}=bt(),[p,g]=j.useState(!1),[x,y]=j.useState(!1),[b,C]=j.useState(!1),[w,N]=j.useState(!1),[S,_]=j.useState("overview"),[P,A]=j.useState(!1),[E,k]=j.useState({hasPedigree:!1,officialName:"",pedigreeNumber:"",breeder:"",fatherName:"",fatherPedigree:"",fatherBreed:"",fatherTitles:"",motherName:"",motherPedigree:"",motherBreed:"",motherTitles:"",pedigreePhoto:""}),[I,D]=j.useState((n==null?void 0:n.additionalPhotos)||[]),[U,B]=j.useState({clientId:0,petId:0,type:"",reason:""}),[K,T]=j.useState(null),[$,G]=j.useState(!1),[Q,ne]=j.useState(null),[oe,M]=j.useState(null),{toast:ue}=it();j.useEffect(()=>{e&&v()},[e,v]);const ve=()=>{n&&(h(n.id,{...n,...E}),Object.assign(n,E),A(!1))},ce=()=>{n&&(k({hasPedigree:n.hasPedigree||!1,officialName:n.officialName||"",pedigreeNumber:n.pedigreeNumber||"",breeder:n.breeder||"",fatherName:n.fatherName||"",fatherPedigree:n.fatherPedigree||"",fatherBreed:n.fatherBreed||"",fatherTitles:n.fatherTitles||"",motherName:n.motherName||"",motherPedigree:n.motherPedigree||"",motherBreed:n.motherBreed||"",motherTitles:n.motherTitles||"",pedigreePhoto:n.pedigreePhoto||""}),A(!1))},re=H=>{n&&(B({clientId:n.ownerId,petId:n.id,type:"vaccination",reason:`Rappel vaccinal - ${H.vaccineName}`}),T(H),y(!0))},V=H=>{ne(H),G(!0)},le=(H,Ce)=>{f(H,{status:Ce}),M(null),ue({title:"Statut mis à jour",description:`Le statut de la vaccination a été changé en "${{completed:"Terminée",scheduled:"Planifiée",overdue:"En retard",missed:"Manquée"}[Ce]}"`})},W=(H,Ce)=>{const ge=r.find(Fs=>Fs.id===H);if(!ge||!ge.photos)return;const dn=ge.photos.filter((Fs,xs)=>xs!==Ce),Ir={...ge,photos:dn};m(H,Ir)},X=async H=>{var dn;const Ce=(dn=H.target.files)==null?void 0:dn[0];if(!Ce)return;const ge=new FileReader;ge.onload=()=>{const Ir=ge.result,Fs=[...I,Ir];D(Fs),n&&h(n.id,{...n,additionalPhotos:Fs})},ge.readAsDataURL(Ce)},pe=H=>{const Ce=I.filter((ge,dn)=>dn!==H);D(Ce),n&&h(n.id,{...n,additionalPhotos:Ce})};if(j.useEffect(()=>{n&&(k({hasPedigree:n.hasPedigree||!1,officialName:n.officialName||"",pedigreeNumber:n.pedigreeNumber||"",breeder:n.breeder||"",fatherName:n.fatherName||"",fatherPedigree:n.fatherPedigree||"",fatherBreed:n.fatherBreed||"",fatherTitles:n.fatherTitles||"",motherName:n.motherName||"",motherPedigree:n.motherPedigree||"",motherBreed:n.motherBreed||"",motherTitles:n.motherTitles||"",pedigreePhoto:n.pedigreePhoto||""}),D(n.additionalPhotos||[]))},[n]),!n)return null;const fe=o(n.ownerId),Re=i(n.id),qe=u(n.id),ot=d(n.id),tt=[...Re].sort((H,Ce)=>new Date(Ce.date).getTime()-new Date(H.date).getTime()),wt=[...qe].sort((H,Ce)=>new Date(Ce.dateGiven).getTime()-new Date(H.dateGiven).getTime()),ae=[...ot||[]].sort((H,Ce)=>new Date(Ce.dateGiven).getTime()-new Date(H.dateGiven).getTime()),Ee=tt.filter(H=>H.weight||H.temperature).map(H=>({date:new Date(H.date).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit"}),weight:H.weight?parseFloat(H.weight):0,temperature:H.temperature?parseFloat(H.temperature):0})).reverse(),nt=tt.filter(H=>H.weight).map(H=>parseFloat(H.weight)),pt=tt.filter(H=>H.temperature).map(H=>parseFloat(H.temperature)),Nn=nt[0]||0,dt=nt[1]||0,_t=Nn-dt,ie=_t>0?"up":_t<0?"down":"stable",Le=pt[0]||0,gs=pt.length>0?pt.reduce((H,Ce)=>H+Ce,0)/pt.length:0,vn=tt[0],$i=vn!=null&&vn.followUp?{reason:vn.followUp,estimatedDate:new Date(vn.date)}:null,Sn=[];if(vn){const H=(new Date().getTime()-new Date(vn.date).getTime())/2592e6;H>6&&Sn.push({type:"warning",title:"Contrôle de routine recommandé",message:`Dernière consultation il y a ${Math.floor(H)} mois`,action:"Planifier consultation",actionType:"consultation"})}(Le>39.5||Le<37.5)&&Sn.push({type:"danger",title:"Température anormale",message:`Température actuelle: ${Le}°C`,action:"Contrôle urgent",actionType:"consultation"}),_t<-2&&Sn.push({type:"warning",title:"Perte de poids",message:`Perte de ${Math.abs(_t)}kg depuis la dernière consultation`,action:"Surveiller",actionType:"consultation"});const Ls=new Date;new Date(Ls.getTime()+7*24*60*60*1e3),qe.forEach(H=>{if(H.nextDueDate){const Ce=new Date(H.nextDueDate),ge=Math.ceil((Ce.getTime()-Ls.getTime())/(1e3*60*60*24));ge<0?Sn.push({type:"danger",title:"Vaccination en retard",message:`${H.vaccineName} - ${Math.abs(ge)} jour(s) de retard`,action:"Planifier vaccination",actionType:"vaccination"}):ge<=7&&Sn.push({type:"warning",title:"Vaccination à prévoir",message:`${H.vaccineName} - Dans ${ge} jour(s)`,action:"Planifier vaccination",actionType:"vaccination"})}}),ot.forEach(H=>{if(H.nextDueDate){const Ce=new Date(H.nextDueDate),ge=Math.ceil((Ce.getTime()-Ls.getTime())/(1e3*60*60*24));ge<0?Sn.push({type:"danger",title:"Traitement antiparasitaire en retard",message:`${H.productName} - ${Math.abs(ge)} jour(s) de retard`,action:"Planifier traitement",actionType:"antiparasitic"}):ge<=7&&Sn.push({type:"warning",title:"Traitement antiparasitaire à prévoir",message:`${H.productName} - Dans ${ge} jour(s)`,action:"Planifier traitement",actionType:"antiparasitic"})}});const tr=()=>{B({clientId:(fe==null?void 0:fe.id)||0,petId:n.id,type:"consultation",reason:"Nouvelle consultation"}),y(!0)},vs=H=>{let Ce="consultation",ge="";switch(H){case"consultation":Ce="consultation",ge="Contrôle de routine recommandé";break;case"vaccination":Ce="vaccination",ge="Vaccination à effectuer";break;case"antiparasitic":Ce="controle",ge="Traitement antiparasitaire à effectuer";break;default:Ce="consultation",ge="Rendez-vous médical"}B({clientId:(fe==null?void 0:fe.id)||0,petId:n.id,type:Ce,reason:ge}),y(!0)},Xr=()=>{const H=window.open("","_blank");if(!H)return;const Ce=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Dossier Médical - ${n.name}</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.6; }
            .header { text-align: center; border-bottom: 2px solid #333; padding-bottom: 20px; margin-bottom: 30px; }
            .clinic-name { font-size: 24px; font-weight: bold; color: #2563eb; }
            .pet-info { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px; }
            .info-section { border: 1px solid #ddd; padding: 15px; border-radius: 5px; }
            .info-section h3 { margin: 0 0 10px 0; color: #333; border-bottom: 1px solid #eee; padding-bottom: 5px; }
            .consultation { margin: 20px 0; border: 1px solid #eee; padding: 15px; border-radius: 5px; }
            .consultation h4 { margin: 0 0 10px 0; color: #333; }
            .stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin: 20px 0; }
            .stat-card { border: 1px solid #ddd; padding: 10px; text-align: center; border-radius: 5px; }
            .stat-value { font-size: 24px; font-weight: bold; color: #2563eb; }
            .stat-label { font-size: 12px; color: #666; }
            @media print { body { margin: 0; } }
          </style>
        </head>
        <body>
          <div class="header">
            <div class="clinic-name">VetPro CRM</div>
            <h2>Dossier Médical Complet</h2>
            <p><strong>Animal:</strong> ${n.name} | <strong>Généré le:</strong> ${new Date().toLocaleDateString("fr-FR")} à ${new Date().toLocaleTimeString("fr-FR")}</p>
          </div>

          <div class="pet-info">
            <div class="info-section">
              <h3>Informations Animal</h3>
              <p><strong>Nom:</strong> ${n.name}</p>
              <p><strong>Espèce:</strong> ${n.type}</p>
              <p><strong>Race:</strong> ${n.breed||"Non spécifiée"}</p>
              <p><strong>Sexe:</strong> ${n.gender==="male"?"Mâle":n.gender==="female"?"Femelle":"Non spécifié"}</p>
              <p><strong>Âge:</strong> ${n.birthDate?Ru(n.birthDate):"Non spécifié"}</p>
              <p><strong>Poids actuel:</strong> ${Nn}kg</p>
              <p><strong>Température actuelle:</strong> ${Le}°C</p>
              <p><strong>Couleur:</strong> ${n.color||"Non spécifiée"}</p>
              <p><strong>Puce électronique:</strong> ${n.microchip||"Non spécifiée"}</p>
              ${n.medicalNotes?`<p><strong>Notes médicales:</strong> ${n.medicalNotes}</p>`:""}
            </div>
            <div class="info-section">
              <h3>Propriétaire</h3>
              <p><strong>Nom:</strong> ${(fe==null?void 0:fe.name)||"Non spécifié"}</p>
              <p><strong>Email:</strong> ${(fe==null?void 0:fe.email)||"Non spécifié"}</p>
              <p><strong>Téléphone:</strong> ${(fe==null?void 0:fe.phone)||"Non spécifié"}</p>
            </div>
          </div>

          <div class="stats">
            <div class="stat-card">
              <div class="stat-value">${tt.length}</div>
              <div class="stat-label">Consultations</div>
            </div>
            <div class="stat-card">
              <div class="stat-value">${qe.length}</div>
              <div class="stat-label">Vaccinations</div>
            </div>
            <div class="stat-card">
              <div class="stat-value">${ot.length}</div>
              <div class="stat-label">Antiparasitaires</div>
            </div>
            <div class="stat-card">
              <div class="stat-value">${Nn}kg</div>
              <div class="stat-label">Poids actuel</div>
            </div>
          </div>

          <!-- Photo principale de l'animal -->
          ${n.photo?`
            <div style="text-align: center; margin: 20px 0;">
              <img src="${n.photo}" alt="${n.name}" style="max-width: 200px; max-height: 200px; object-fit: cover; border-radius: 8px; border: 2px solid #ddd;" />
              <p style="margin-top: 10px; font-weight: bold;">Photo de ${n.name}</p>
            </div>
          `:""}

          <!-- Historique des Consultations -->
          <div style="margin: 30px 0; border: 1px solid #eee; padding: 20px; border-radius: 5px;">
            <h3 style="margin: 0 0 15px 0; color: #333; border-bottom: 2px solid #eee; padding-bottom: 10px;">Historique des Consultations (${tt.length})</h3>
            ${tt.length>0?tt.map(ge=>`
              <div style="margin: 15px 0; border: 1px solid #ddd; padding: 15px; border-radius: 5px; background: #f9f9f9;">
                <h4 style="margin: 0 0 10px 0; color: #333;">Consultation du ${new Date(ge.date).toLocaleDateString("fr-FR")}</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                  <div>
                    <p><strong>Poids:</strong> ${ge.weight||"Non renseigné"}</p>
                    <p><strong>Température:</strong> ${ge.temperature||"Non renseigné"}</p>
                    ${ge.symptoms?`<p><strong>Symptômes:</strong> ${ge.symptoms}</p>`:""}
                  </div>
                  <div>
                    ${ge.diagnosis?`<p><strong>Diagnostic:</strong> ${ge.diagnosis}</p>`:""}
                    ${ge.treatment?`<p><strong>Traitement:</strong> ${ge.treatment}</p>`:""}
                    ${ge.medications?`<p><strong>Médicaments:</strong> ${ge.medications}</p>`:""}
                  </div>
                </div>
                ${ge.notes?`<p><strong>Notes:</strong> ${ge.notes}</p>`:""}
                ${ge.photos&&ge.photos.length>0?`
                  <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; margin: 15px 0;">
                    ${ge.photos.map((dn,Ir)=>`
                      <div style="text-align: center;">
                        <img src="${dn}" alt="Photo consultation ${Ir+1}" style="max-width: 120px; max-height: 120px; object-fit: cover; border-radius: 5px; border: 1px solid #ddd;" />
                        <div style="font-size: 11px; color: #666; margin-top: 5px;">Photo ${Ir+1}</div>
                      </div>
                    `).join("")}
                  </div>
                `:""}
              </div>
            `).join(""):'<p style="text-align: center; color: #666; font-style: italic;">Aucune consultation enregistrée</p>'}
          </div>

          <!-- Historique des Vaccinations -->
          <div style="margin: 30px 0; border: 1px solid #eee; padding: 20px; border-radius: 5px;">
            <h3 style="margin: 0 0 15px 0; color: #333; border-bottom: 2px solid #eee; padding-bottom: 10px;">Historique des Vaccinations (${qe.length})</h3>
            ${qe.length>0?qe.map(ge=>`
              <div style="margin: 10px 0; padding: 10px; border-left: 3px solid #4CAF50; background: #f0f8f0;">
                <h4 style="margin: 0 0 10px 0;">${ge.vaccineName} - ${new Date(ge.dateGiven).toLocaleDateString("fr-FR")}</h4>
                <p><strong>Type:</strong> ${ge.vaccineType||"Non spécifié"}</p>
                <p><strong>Prochain rappel:</strong> ${ge.nextDueDate?new Date(ge.nextDueDate).toLocaleDateString("fr-FR"):"Non spécifié"}</p>
                <p><strong>Vétérinaire:</strong> ${ge.veterinarian||"Non spécifié"}</p>
                ${ge.notes?`<p><strong>Notes:</strong> ${ge.notes}</p>`:""}
              </div>
            `).join(""):'<p style="text-align: center; color: #666; font-style: italic;">Aucune vaccination enregistrée</p>'}
          </div>

          <!-- Historique des Antiparasitaires -->
          <div style="margin: 30px 0; border: 1px solid #eee; padding: 20px; border-radius: 5px;">
            <h3 style="margin: 0 0 15px 0; color: #333; border-bottom: 2px solid #eee; padding-bottom: 10px;">Historique des Traitements Antiparasitaires (${ot.length})</h3>
            ${ot.length>0?ot.map(ge=>`
              <div style="margin: 15px 0; padding: 15px; border-left: 4px solid #9C27B0; background: #f3e5f5; border-radius: 5px;">
                <h4 style="margin: 0 0 10px 0; color: #7B1FA2;">${ge.productName} - ${new Date(ge.dateGiven).toLocaleDateString("fr-FR")}</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 10px 0;">
                  <div>
                    <p><strong>Type de produit:</strong> ${ge.productType||"Non spécifié"}</p>
                    <p><strong>Parasites ciblés:</strong> ${ge.targetParasites||"Non spécifié"}</p>
                    <p><strong>Voie d'administration:</strong> ${ge.administrationRoute||"Non spécifié"}</p>
                    <p><strong>Dosage:</strong> ${ge.dosage||"Non spécifié"}</p>
                  </div>
                  <div>
                <p><strong>Prochain traitement:</strong> ${ge.nextDueDate?new Date(ge.nextDueDate).toLocaleDateString("fr-FR"):"Non spécifié"}</p>
                <p><strong>Vétérinaire:</strong> ${ge.veterinarian||"Non spécifié"}</p>
                    <p><strong>Statut:</strong> ${ge.status==="completed"?"Terminé":ge.status==="scheduled"?"Planifié":ge.status==="overdue"?"En retard":"Manqué"}</p>
                    ${ge.cost?`<p><strong>Coût:</strong> ${ge.cost} €</p>`:""}
                  </div>
                </div>
                ${ge.batchNumber?`<p><strong>Numéro de lot:</strong> ${ge.batchNumber}</p>`:""}
                ${ge.manufacturer?`<p><strong>Fabricant:</strong> ${ge.manufacturer}</p>`:""}
                ${ge.weight?`<p><strong>Poids de l'animal:</strong> ${ge.weight}</p>`:""}
                ${ge.notes?`
                  <div style="margin: 10px 0; padding: 10px; background: rgba(156, 39, 176, 0.1); border-radius: 3px;">
                    <p><strong>Notes:</strong> ${ge.notes}</p>
                  </div>
                `:""}
                ${ge.sideEffects?`
                  <div style="margin: 10px 0; padding: 10px; background: #ffebee; border: 1px solid #f44336; border-radius: 3px;">
                    <p style="color: #d32f2f;"><strong>⚠️ Effets indésirables:</strong> ${ge.sideEffects}</p>
                  </div>
                `:""}
              </div>
            `).join(""):'<p style="text-align: center; color: #666; font-style: italic;">Aucun traitement antiparasitaire enregistré</p>'}
          </div>

          <!-- Section Pedigree -->
          ${n.hasPedigree?`
            <div style="margin: 30px 0; border: 1px solid #eee; padding: 20px; border-radius: 5px;">
              <h3 style="margin: 0 0 15px 0; color: #333; border-bottom: 2px solid #eee; padding-bottom: 10px;">Pedigree Officiel</h3>
              
              <!-- Informations de l'animal -->
              <div style="margin: 20px 0; padding: 15px; background: #f8f9fa; border-radius: 5px;">
                <h4 style="margin: 0 0 10px 0; color: #333;">Informations de l'animal</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                  <div>
                    <p><strong>Nom officiel:</strong> ${n.officialName||"Non spécifié"}</p>
                    <p><strong>N° Pedigree/LOF:</strong> ${n.pedigreeNumber||"Non spécifié"}</p>
                    <p><strong>N° Puce/Tatouage:</strong> ${n.microchip||"Non spécifié"}</p>
                    <p><strong>Race:</strong> ${n.breed||"Non spécifiée"}</p>
                  </div>
                  <div>
                    <p><strong>Sexe:</strong> ${n.gender==="male"?"Mâle":n.gender==="female"?"Femelle":"Non spécifié"}</p>
                    <p><strong>Couleur/Robe:</strong> ${n.color||"Non spécifiée"}</p>
                    <p><strong>Date de naissance:</strong> ${n.birthDate?new Date(n.birthDate).toLocaleDateString("fr-FR"):"Non spécifié"}</p>
                    <p><strong>Éleveur:</strong> ${n.breeder||"Non spécifié"}</p>
                  </div>
                </div>
              </div>

              <!-- Parents -->
              <div style="margin: 20px 0;">
                <h4 style="margin: 0 0 10px 0; color: #333;">Ascendance</h4>
                
                <!-- Père -->
                <div style="margin: 15px 0; padding: 15px; border-left: 3px solid #007bff; background: #f0f8ff;">
                  <h5 style="margin: 0 0 8px 0; color: #007bff;">Père</h5>
                  <p><strong>Nom:</strong> ${n.fatherName||"Non spécifié"}</p>
                  <p><strong>N° Pedigree:</strong> ${n.fatherPedigree||"Non spécifié"}</p>
                  <p><strong>Race:</strong> ${n.fatherBreed||"Non spécifiée"}</p>
                  ${n.fatherTitles?`<p><strong>Titres:</strong> ${n.fatherTitles}</p>`:""}
                </div>

                <!-- Mère -->
                <div style="margin: 15px 0; padding: 15px; border-left: 3px solid #e91e63; background: #fce4ec;">
                  <h5 style="margin: 0 0 8px 0; color: #e91e63;">Mère</h5>
                  <p><strong>Nom:</strong> ${n.motherName||"Non spécifié"}</p>
                  <p><strong>N° Pedigree:</strong> ${n.motherPedigree||"Non spécifié"}</p>
                  <p><strong>Race:</strong> ${n.motherBreed||"Non spécifiée"}</p>
                  ${n.motherTitles?`<p><strong>Titres:</strong> ${n.motherTitles}</p>`:""}
                </div>
              </div>

              <!-- Certificat Pedigree -->
              ${n.pedigreePhoto?`
                <div style="margin: 20px 0; text-align: center;">
                  <h4 style="margin: 0 0 15px 0; color: #333;">Certificat Pedigree</h4>
                  <img src="${n.pedigreePhoto}" alt="Certificat Pedigree" style="max-width: 100%; max-height: 400px; object-fit: contain; border-radius: 8px; border: 2px solid #ddd; box-shadow: 0 4px 8px rgba(0,0,0,0.1);" />
                  <p style="margin-top: 10px; font-size: 12px; color: #666;">Document officiel du pedigree</p>
                </div>
              `:""}
            </div>
          `:""}

          <!-- Album Photo -->
          <div style="margin: 30px 0; border: 1px solid #eee; padding: 20px; border-radius: 5px;">
            <h3 style="margin: 0 0 15px 0; color: #333; border-bottom: 2px solid #eee; padding-bottom: 10px;">Album Photo</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px; margin: 15px 0;">
              ${n.photo?`
                <div style="text-align: center;">
                  <img src="${n.photo}" alt="Photo principale" style="max-width: 150px; max-height: 150px; object-fit: cover; border-radius: 5px; border: 1px solid #ddd;" />
                  <div style="font-size: 11px; color: #666; margin-top: 5px;">Photo principale</div>
                </div>
              `:""}
              ${tt.some(ge=>ge.photos&&ge.photos.length>0)?tt.map(ge=>ge.photos?ge.photos.map((dn,Ir)=>`
                    <div style="text-align: center;">
                      <img src="${dn}" alt="Consultation ${new Date(ge.date).toLocaleDateString("fr-FR")} - Photo ${Ir+1}" style="max-width: 150px; max-height: 150px; object-fit: cover; border-radius: 5px; border: 1px solid #ddd;" />
                      <div style="font-size: 11px; color: #666; margin-top: 5px;">Consultation ${new Date(ge.date).toLocaleDateString("fr-FR")}</div>
                    </div>
                  `).join(""):"").join(""):""}
            </div>
            ${!n.photo&&!tt.some(ge=>ge.photos&&ge.photos.length>0)?'<p style="text-align: center; color: #666; font-style: italic;">Aucune photo disponible</p>':""}
          </div>

          <div style="margin-top: 40px; text-align: center; font-size: 12px; color: #666;">
            <p>VetPro CRM - Gestion Vétérinaire Complète</p>
          </div>
        </body>
      </html>
    `;H.document.write(Ce),H.document.close(),H.focus(),H.print(),H.close()};return s.jsxs(s.Fragment,{children:[s.jsx(Qe,{open:e,onOpenChange:t,children:s.jsxs(Ye,{className:"sm:max-w-[1000px] max-h-[90vh] overflow-y-auto",children:[s.jsx(Xe,{children:s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(_r,{className:"h-5 w-5"}),"Dossier Médical - ",n.name,fe&&s.jsxs("span",{className:"text-sm text-muted-foreground",children:["(Propriétaire: ",fe.name,")"]})]})}),s.jsxs(Ei,{value:S,onValueChange:_,className:"space-y-4",children:[s.jsxs(Ha,{className:"grid w-full grid-cols-7",children:[s.jsxs(Mt,{value:"overview",className:"gap-2",children:[s.jsx(oa,{className:"h-4 w-4"}),"Vue d'ensemble"]}),s.jsxs(Mt,{value:"history",className:"gap-2",children:[s.jsx(Pn,{className:"h-4 w-4"}),"Historique"]}),s.jsxs(Mt,{value:"prescriptions",className:"gap-2",children:[s.jsx(Vr,{className:"h-4 w-4"}),"Prescriptions"]}),s.jsxs(Mt,{value:"vaccinations",className:"gap-2",children:[s.jsx(Vr,{className:"h-4 w-4"}),"Vaccinations"]}),s.jsxs(Mt,{value:"antiparasites",className:"gap-2",children:[s.jsx(pl,{className:"h-4 w-4"}),"Antiparasitaires"]}),s.jsxs(Mt,{value:"pedigree",className:"gap-2",children:[s.jsx(Og,{className:"h-4 w-4"}),"Pedigree"]}),s.jsxs(Mt,{value:"charts",className:"gap-2",children:[s.jsx(cn,{className:"h-4 w-4"}),"Évolution"]}),s.jsxs(Mt,{value:"alerts",className:"gap-2",children:[s.jsx(Hn,{className:"h-4 w-4"}),"Alertes"]})]}),s.jsxs(It,{value:"overview",className:"space-y-4",children:[s.jsxs(ee,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between",children:[s.jsx(me,{className:"text-lg",children:"Galerie photos"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:X,className:"hidden",id:"add-photo-input"}),s.jsxs("label",{htmlFor:"add-photo-input",className:"cursor-pointer inline-flex items-center gap-2 px-3 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 transition-colors",children:[s.jsx(Ze,{className:"h-4 w-4"}),"Ajouter une photo"]})]})]}),s.jsx(te,{children:s.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[n.photo&&s.jsxs("div",{className:"relative flex-shrink-0",children:[s.jsx("img",{src:n.photo,alt:"Photo officielle",className:"h-32 w-32 object-cover rounded"}),s.jsx("div",{className:"absolute bottom-1 left-1 bg-black/70 text-white text-xs px-1 rounded",children:"Officielle"})]}),I.map((H,Ce)=>s.jsxs("div",{className:"relative flex-shrink-0 group",children:[s.jsx("img",{src:H,alt:`Photo supplémentaire ${Ce+1}`,className:"h-32 w-32 object-cover rounded"}),s.jsxs("div",{className:"absolute bottom-1 left-1 bg-black/70 text-white text-xs px-1 rounded",children:["Photo ",Ce+1]}),s.jsx("button",{onClick:()=>pe(Ce),className:"absolute top-1 right-1 bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-200",title:"Supprimer cette photo",children:"×"})]},`additional-${Ce}`)),tt.map(H=>{var Ce;return(Ce=H.photos)==null?void 0:Ce.map((ge,dn)=>s.jsxs("div",{className:"relative flex-shrink-0 group",children:[s.jsx("img",{src:ge,alt:`consultation-${H.id}-${dn}`,className:"h-32 w-32 object-cover rounded"}),s.jsx("div",{className:"absolute bottom-1 left-1 bg-black/70 text-white text-xs px-1 rounded",children:new Date(H.date).toLocaleDateString("fr-FR")}),s.jsx("button",{onClick:()=>W(H.id,dn),className:"absolute top-1 right-1 bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-200",title:"Supprimer cette photo",children:"×"})]},`${H.id}-${dn}`))}),!n.photo&&I.length===0&&tt.every(H=>!H.photos||H.photos.length===0)&&s.jsx("div",{className:"flex items-center justify-center h-32 w-full border-2 border-dashed border-gray-300 rounded text-gray-500",children:"Aucune photo disponible"})]})})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-5",children:[s.jsx(ee,{children:s.jsx(te,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Mg,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Poids actuel"}),s.jsxs("p",{className:"text-2xl font-bold",children:[Nn,"kg"]}),_t!==0&&s.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[ie==="up"?s.jsx(cn,{className:"h-3 w-3 text-green-600"}):s.jsx(Vl,{className:"h-3 w-3 text-red-600"}),s.jsxs("span",{className:ie==="up"?"text-green-600":"text-red-600",children:[Math.abs(_t),"kg"]})]})]})]})})}),s.jsx(ee,{children:s.jsx(te,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(vm,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Température"}),s.jsxs("p",{className:"text-2xl font-bold",children:[Le,"°C"]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Moy: ",gs.toFixed(1),"°C"]})]})]})})}),s.jsx(ee,{children:s.jsx(te,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ge,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Consultations"}),s.jsx("p",{className:"text-2xl font-bold",children:tt.length}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Dernière: ",vn?new Date(vn.date).toLocaleDateString("fr-FR"):"Aucune"]})]})]})})}),s.jsx(ee,{children:s.jsx(te,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Hn,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Alertes"}),s.jsx("p",{className:"text-2xl font-bold",children:Sn.length}),s.jsx("p",{className:"text-sm text-muted-foreground",children:Sn.length>0?"À traiter":"Aucune"})]})]})})}),s.jsx(ee,{children:s.jsx(te,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Vr,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Prescriptions"}),s.jsx("p",{className:"text-2xl font-bold",children:l(n.id).length}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[c().filter(H=>H.petId===n.id).length," active(s)"]})]})]})})})]}),$i&&s.jsx(ee,{className:"border-primary",children:s.jsx(te,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold",children:"Prochain suivi recommandé"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:$i.reason})]}),s.jsxs(R,{size:"sm",onClick:tr,children:[s.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Planifier"]})]})})}),Sn.length>0&&s.jsxs(ee,{className:"border-destructive",children:[s.jsx(he,{children:s.jsx(me,{className:"text-destructive",children:"Alertes importantes"})}),s.jsx(te,{className:"space-y-2",children:Sn.slice(0,3).map((H,Ce)=>s.jsxs("div",{className:"flex items-center gap-3 p-2 bg-destructive/10 rounded",children:[s.jsx(Hn,{className:"h-4 w-4 text-destructive"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:H.title}),s.jsx("p",{className:"text-sm text-muted-foreground",children:H.message})]}),s.jsx(R,{size:"sm",variant:"outline",onClick:()=>vs(H.actionType),children:H.action})]},Ce))})]})]}),s.jsxs(It,{value:"history",className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Historique des consultations"}),s.jsxs(R,{size:"sm",onClick:tr,className:"gap-2",children:[s.jsx(Ze,{className:"h-4 w-4"}),"Planifier Consultation"]})]}),tt.length===0?s.jsx(ee,{children:s.jsxs(te,{className:"p-8 text-center text-muted-foreground",children:[s.jsx(Pn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"Aucune consultation enregistrée"}),s.jsx("p",{className:"text-sm",children:"Commencez par créer la première consultation"})]})}):s.jsx("div",{className:"space-y-4",children:tt.map(H=>s.jsxs(ee,{children:[s.jsx(he,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(me,{className:"text-base",children:["Consultation #",H.id]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(Ge,{className:"h-4 w-4"}),new Date(H.date).toLocaleDateString("fr-FR")]})]})}),s.jsxs(te,{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Poids:"}),s.jsx("span",{className:"ml-2",children:H.weight||"Non renseigné"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Température:"}),s.jsx("span",{className:"ml-2",children:H.temperature||"Non renseigné"})]})]}),H.symptoms&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Symptômes:"}),s.jsx("p",{className:"text-sm mt-1",children:H.symptoms})]}),H.diagnosis&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Diagnostic:"}),s.jsx("p",{className:"text-sm mt-1",children:H.diagnosis})]}),H.treatment&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Traitement:"}),s.jsx("p",{className:"text-sm mt-1",children:H.treatment})]}),H.medications&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Médicaments:"}),s.jsx("p",{className:"text-sm mt-1",children:H.medications})]}),H.notes&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Notes:"}),s.jsx("p",{className:"text-sm mt-1 text-muted-foreground",children:H.notes})]}),H.followUp&&s.jsxs("div",{className:"pt-2 border-t",children:[s.jsx("span",{className:"font-medium text-primary",children:"Suivi recommandé:"}),s.jsx("p",{className:"text-sm mt-1",children:H.followUp})]})]})]},H.id))})]}),s.jsx(It,{value:"prescriptions",className:"space-y-4",children:s.jsx(w8,{petId:n.id})}),s.jsxs(It,{value:"charts",className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Évolution du poids et de la température"}),Ee.length>0?s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ee,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(Mg,{className:"h-5 w-5"}),"Évolution du poids"]})}),s.jsx(te,{children:s.jsx(_i,{width:"100%",height:200,children:s.jsxs(dO,{data:Ee,children:[s.jsx(nc,{strokeDasharray:"3 3"}),s.jsx(da,{dataKey:"date"}),s.jsx(ha,{}),s.jsx(Kn,{}),s.jsx(dd,{type:"monotone",dataKey:"weight",stroke:"#2563eb",strokeWidth:2})]})})})]}),s.jsxs(ee,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(vm,{className:"h-5 w-5"}),"Évolution de la température"]})}),s.jsx(te,{children:s.jsx(_i,{width:"100%",height:200,children:s.jsxs(dO,{data:Ee,children:[s.jsx(nc,{strokeDasharray:"3 3"}),s.jsx(da,{dataKey:"date"}),s.jsx(ha,{}),s.jsx(Kn,{}),s.jsx(dd,{type:"monotone",dataKey:"temperature",stroke:"#dc2626",strokeWidth:2})]})})})]})]}):s.jsx(ee,{children:s.jsxs(te,{className:"p-8 text-center text-muted-foreground",children:[s.jsx(cn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"Aucune donnée disponible pour les graphiques"}),s.jsx("p",{className:"text-sm",children:"Ajoutez des consultations avec poids et température"})]})})]}),s.jsxs(It,{value:"vaccinations",className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Historique vaccinal"}),s.jsx(r1,{selectedClientId:fe==null?void 0:fe.id,selectedPetId:n.id,children:s.jsxs(R,{size:"sm",className:"gap-2",children:[s.jsx(Ze,{className:"h-4 w-4"}),"Nouvelle vaccination"]})})]}),wt.length===0?s.jsx(ee,{children:s.jsxs(te,{className:"p-8 text-center text-muted-foreground",children:[s.jsx(Vr,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"Aucune vaccination enregistrée"}),s.jsx("p",{className:"text-sm",children:"Commencez par ajouter la première vaccination"})]})}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[s.jsx(ee,{children:s.jsx(te,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-full",children:s.jsx(Vr,{className:"h-4 w-4 text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total"}),s.jsx("p",{className:"text-xl font-bold",children:wt.length})]})]})})}),s.jsx(ee,{children:s.jsx(te,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:s.jsx(Ge,{className:"h-4 w-4 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"À jour"}),s.jsx("p",{className:"text-xl font-bold",children:wt.filter(H=>H.status==="completed").length})]})]})})}),s.jsx(ee,{children:s.jsx(te,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-red-100 rounded-full",children:s.jsx(Hn,{className:"h-4 w-4 text-red-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"En retard"}),s.jsx("p",{className:"text-xl font-bold",children:wt.filter(H=>H.status==="overdue").length})]})]})})}),s.jsx(ee,{children:s.jsx(te,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-orange-100 rounded-full",children:s.jsx(Ge,{className:"h-4 w-4 text-orange-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Planifiées"}),s.jsx("p",{className:"text-xl font-bold",children:wt.filter(H=>H.status==="scheduled").length})]})]})})})]}),s.jsx("div",{className:"space-y-3",children:wt.map(H=>s.jsx(ee,{className:"hover:shadow-md transition-shadow",children:s.jsxs(te,{className:"p-4",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx(Vr,{className:`h-5 w-5 ${H.vaccinationCategory==="reminder"?"text-orange-600":"text-blue-600"}`}),s.jsxs("h4",{className:"font-semibold text-lg",children:[H.vaccineName,H.vaccinationCategory==="reminder"&&s.jsx("span",{className:"ml-2 text-sm text-orange-600 font-normal",children:"(Rappel)"})]}),s.jsx(Pe,{variant:H.vaccineType==="core"?"default":"secondary",className:"text-xs",children:H.vaccineType==="core"?"Essentiel":H.vaccineType==="non-core"?"Optionnel":H.vaccineType==="rabies"?"Rage":"Personnalisé"}),H.vaccinationCategory==="reminder"&&s.jsx(Pe,{variant:"secondary",className:"text-xs bg-orange-100 text-orange-800",children:"Rappel"}),oe===H.id?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(je,{value:H.status,onValueChange:Ce=>le(H.id,Ce),children:[s.jsx(xe,{className:"w-32",children:s.jsx(be,{})}),s.jsxs(ye,{children:[s.jsx(z,{value:"completed",children:"Terminée"}),s.jsx(z,{value:"scheduled",children:"Planifiée"}),s.jsx(z,{value:"overdue",children:"En retard"}),s.jsx(z,{value:"missed",children:"Manquée"})]})]}),s.jsx(R,{size:"sm",variant:"outline",onClick:()=>M(null),children:"Annuler"})]}):s.jsx(Pe,{className:H.status==="completed"?"bg-green-100 text-green-800 border-green-200 cursor-pointer hover:bg-green-200":H.status==="overdue"?"bg-red-100 text-red-800 border-red-200 cursor-pointer hover:bg-red-200":H.status==="scheduled"?"bg-blue-100 text-blue-800 border-blue-200 cursor-pointer hover:bg-blue-200":"bg-orange-100 text-orange-800 border-orange-200 cursor-pointer hover:bg-orange-200",onClick:()=>M(H.id),children:H.status==="completed"?"Terminée":H.status==="overdue"?"En retard":H.status==="scheduled"?"Planifiée":"Manquée"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:H.vaccinationCategory==="reminder"?"Date du rappel":"Date administrée"}),s.jsx("p",{className:"font-medium",children:$a(H.dateGiven)})]}),H.vaccinationCategory==="new"&&s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Rappel prévu"}),s.jsx("p",{className:"font-medium",children:$a(H.nextDueDate)})]}),H.vaccinationCategory==="reminder"&&H.originalVaccinationId&&s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Vaccination originale"}),s.jsxs("p",{className:"font-medium text-sm text-gray-500",children:["ID: ",H.originalVaccinationId]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Vétérinaire"}),s.jsx("p",{className:"font-medium",children:H.veterinarian})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Coût"}),s.jsx("p",{className:"font-medium",children:H.cost?`${H.cost} €`:"Non spécifié"})]})]}),H.batchNumber&&s.jsx("div",{className:"mt-3 text-sm",children:s.jsxs("p",{className:"text-gray-600",children:["Numéro de lot: ",s.jsx("span",{className:"font-medium",children:H.batchNumber})]})}),H.manufacturer&&s.jsx("div",{className:"mt-1 text-sm",children:s.jsxs("p",{className:"text-gray-600",children:["Fabricant: ",s.jsx("span",{className:"font-medium",children:H.manufacturer})]})}),H.location&&s.jsx("div",{className:"mt-1 text-sm",children:s.jsxs("p",{className:"text-gray-600",children:["Site d'injection: ",s.jsx("span",{className:"font-medium",children:H.location==="left_shoulder"?"Épaule gauche":H.location==="right_shoulder"?"Épaule droite":H.location==="left_hip"?"Hanche gauche":H.location==="right_hip"?"Hanche droite":"Sous-cutané"})]})}),H.notes&&s.jsx("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg",children:s.jsxs("p",{className:"text-sm text-gray-700",children:[s.jsx("strong",{children:"Notes:"})," ",H.notes]})}),H.adverseReactions&&s.jsx("div",{className:"mt-2 p-3 bg-red-50 rounded-lg border border-red-200",children:s.jsxs("p",{className:"text-sm text-red-700",children:[s.jsx("strong",{children:"⚠️ Réactions adverses:"})," ",H.adverseReactions]})})]}),s.jsxs("div",{className:"flex flex-col gap-2 ml-4",children:[s.jsx(N8,{animalId:n.id.toString()}),H.nextDueDate&&new Date(H.nextDueDate)<=new Date&&H.status!=="completed"&&!H.reminderAppointmentId&&s.jsxs(R,{size:"sm",className:"gap-2",onClick:()=>re(H),children:[s.jsx(Ze,{className:"h-4 w-4"}),"Rappel"]}),H.reminderAppointmentId&&s.jsx(Pe,{variant:"outline",className:"text-xs",children:"Rappel programmé"}),H.status==="overdue"&&s.jsxs(R,{size:"sm",className:"gap-2",onClick:()=>V(H),children:[s.jsx(MU,{className:"h-4 w-4"}),"Confirmer"]})]})]}),H.reminderHistory&&H.reminderHistory.length>0&&s.jsxs("div",{className:"mt-4 pt-4 border-t",children:[s.jsx("h5",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Historique des rappels"}),s.jsx("div",{className:"space-y-2",children:H.reminderHistory.map(Ce=>s.jsxs("div",{className:"flex items-center justify-between text-xs bg-muted/30 p-2 rounded",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ge,{className:"h-3 w-3"}),s.jsx("span",{children:new Date(Ce.scheduledDate).toLocaleDateString("fr-FR")})]}),s.jsx(Pe,{variant:Ce.status==="completed"?"default":Ce.status==="missed"?"destructive":"secondary",className:"text-xs",children:Ce.status==="completed"?"Complété":Ce.status==="missed"?"Manqué":Ce.status==="cancelled"?"Annulé":"Programmé"})]},Ce.id))})]})]})},H.id))})]})]}),s.jsxs(It,{value:"antiparasites",className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Historique antiparasitaire"}),s.jsx(s1,{selectedClientId:fe==null?void 0:fe.id,selectedPetId:n.id,children:s.jsxs(R,{size:"sm",className:"gap-2",children:[s.jsx(Ze,{className:"h-4 w-4"}),"Nouveau Traitement"]})})]}),ae.length===0?s.jsx(ee,{children:s.jsxs(te,{className:"p-8 text-center text-muted-foreground",children:[s.jsx(pl,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"Aucun traitement antiparasitaire enregistré"}),s.jsx("p",{className:"text-sm",children:"Ajoutez des traitements depuis l'onglet Antiparasitaires"})]})}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[s.jsx(ee,{children:s.jsx(te,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-full",children:s.jsx(pl,{className:"h-4 w-4 text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total"}),s.jsx("p",{className:"text-xl font-bold",children:ae.length})]})]})})}),s.jsx(ee,{children:s.jsx(te,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:s.jsx(Ln,{className:"h-4 w-4 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Complétés"}),s.jsx("p",{className:"text-xl font-bold",children:ae.filter(H=>H.status==="completed").length})]})]})})}),s.jsx(ee,{children:s.jsx(te,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-red-100 rounded-full",children:s.jsx(Hn,{className:"h-4 w-4 text-red-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"En retard"}),s.jsx("p",{className:"text-xl font-bold",children:ae.filter(H=>H.status==="overdue").length})]})]})})}),s.jsx(ee,{children:s.jsx(te,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-orange-100 rounded-full",children:s.jsx(Ge,{className:"h-4 w-4 text-orange-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Planifiés"}),s.jsx("p",{className:"text-xl font-bold",children:ae.filter(H=>H.status==="scheduled").length})]})]})})})]}),s.jsx("div",{className:"space-y-3",children:ae.map(H=>s.jsx(ee,{className:"hover:shadow-md transition-shadow",children:s.jsx(te,{className:"p-4",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx(pl,{className:"h-5 w-5 text-blue-600"}),s.jsx("h4",{className:"font-semibold text-lg",children:H.productName}),s.jsx(Pe,{className:H.status==="completed"?"bg-green-100 text-green-800 border-green-200":H.status==="overdue"?"bg-red-100 text-red-800 border-red-200":H.status==="scheduled"?"bg-blue-100 text-blue-800 border-blue-200":"bg-orange-100 text-orange-800 border-orange-200",children:H.status==="completed"?"Terminé":H.status==="overdue"?"En retard":H.status==="scheduled"?"Planifié":"Manqué"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Date administrée"}),s.jsx("p",{className:"font-medium",children:new Date(H.dateGiven).toLocaleDateString("fr-FR")})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Prochain traitement"}),s.jsx("p",{className:"font-medium",children:H.nextDueDate?new Date(H.nextDueDate).toLocaleDateString("fr-FR"):"Non spécifié"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Type"}),s.jsx("p",{className:"font-medium",children:H.productType})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Vétérinaire"}),s.jsx("p",{className:"font-medium",children:H.veterinarian})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm mt-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Parasites ciblés"}),s.jsx("p",{className:"font-medium",children:H.targetParasites})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-600",children:"Dosage"}),s.jsx("p",{className:"font-medium",children:H.dosage||"Non spécifié"})]})]}),H.batchNumber&&s.jsx("div",{className:"mt-3 text-sm",children:s.jsxs("p",{className:"text-gray-600",children:["Numéro de lot: ",s.jsx("span",{className:"font-medium",children:H.batchNumber})]})}),H.manufacturer&&s.jsx("div",{className:"mt-1 text-sm",children:s.jsxs("p",{className:"text-gray-600",children:["Fabricant: ",s.jsx("span",{className:"font-medium",children:H.manufacturer})]})}),H.weight&&s.jsx("div",{className:"mt-1 text-sm",children:s.jsxs("p",{className:"text-gray-600",children:["Poids de l'animal: ",s.jsx("span",{className:"font-medium",children:H.weight})]})}),H.cost&&s.jsx("div",{className:"mt-1 text-sm",children:s.jsxs("p",{className:"text-gray-600",children:["Coût: ",s.jsxs("span",{className:"font-medium",children:[H.cost," €"]})]})}),H.notes&&s.jsx("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg",children:s.jsxs("p",{className:"text-sm text-gray-700",children:[s.jsx("strong",{children:"Notes:"})," ",H.notes]})}),H.sideEffects&&s.jsx("div",{className:"mt-2 p-3 bg-red-50 rounded-lg border border-red-200",children:s.jsxs("p",{className:"text-sm text-red-700",children:[s.jsx("strong",{children:"⚠️ Effets indésirables:"})," ",H.sideEffects]})})]}),s.jsx("div",{className:"flex flex-col gap-2 ml-4",children:H.nextDueDate&&new Date(H.nextDueDate)<=new Date&&H.status!=="completed"&&s.jsxs(R,{size:"sm",className:"gap-2",children:[s.jsx(Ze,{className:"h-4 w-4"}),"Rappel"]})})]})})},H.id))})]})]}),s.jsxs(It,{value:"pedigree",className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Pedigree Officiel"}),s.jsxs(R,{variant:"outline",size:"sm",onClick:()=>A(!P),className:"gap-2",children:[s.jsx($t,{className:"h-4 w-4"}),P?"Annuler":"Modifier"]})]}),s.jsx(ee,{children:s.jsx(he,{children:s.jsxs(me,{className:"text-lg flex items-center gap-2",children:[s.jsx(fi,{id:"hasPedigree",checked:E.hasPedigree,onCheckedChange:H=>k(Ce=>({...Ce,hasPedigree:H})),disabled:!P}),s.jsx(O,{htmlFor:"hasPedigree",className:"text-lg",children:"Cet animal a un pedigree officiel"})]})})}),E.hasPedigree&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[s.jsxs(ee,{children:[s.jsx(he,{children:s.jsx(me,{className:"text-lg",children:"Informations sur l'animal"})}),s.jsx(te,{className:"space-y-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(O,{htmlFor:"officialName",children:"Nom officiel"}),s.jsx(Y,{id:"officialName",value:E.officialName,onChange:H=>k(Ce=>({...Ce,officialName:H.target.value})),disabled:!P,placeholder:"Nom officiel du pedigree"})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"pedigreeNumber",children:"N° pedigree/LOF"}),s.jsx(Y,{id:"pedigreeNumber",value:E.pedigreeNumber,onChange:H=>k(Ce=>({...Ce,pedigreeNumber:H.target.value})),disabled:!P,placeholder:"Numéro de pedigree"})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"breeder",children:"Éleveur"}),s.jsx(Y,{id:"breeder",value:E.breeder,onChange:H=>k(Ce=>({...Ce,breeder:H.target.value})),disabled:!P,placeholder:"Nom de l'éleveur"})]})]})})]}),s.jsxs(ee,{children:[s.jsx(he,{children:s.jsx(me,{className:"text-lg",children:"Parents"})}),s.jsx(te,{className:"space-y-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-sm",children:"Père"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Y,{placeholder:"Nom du père",value:E.fatherName,onChange:H=>k(Ce=>({...Ce,fatherName:H.target.value})),disabled:!P}),s.jsx(Y,{placeholder:"N° pedigree du père",value:E.fatherPedigree,onChange:H=>k(Ce=>({...Ce,fatherPedigree:H.target.value})),disabled:!P}),s.jsx(Y,{placeholder:"Race du père",value:E.fatherBreed,onChange:H=>k(Ce=>({...Ce,fatherBreed:H.target.value})),disabled:!P}),s.jsx(Ue,{placeholder:"Titres du père",value:E.fatherTitles,onChange:H=>k(Ce=>({...Ce,fatherTitles:H.target.value})),disabled:!P,rows:2})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-sm",children:"Mère"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Y,{placeholder:"Nom de la mère",value:E.motherName,onChange:H=>k(Ce=>({...Ce,motherName:H.target.value})),disabled:!P}),s.jsx(Y,{placeholder:"N° pedigree de la mère",value:E.motherPedigree,onChange:H=>k(Ce=>({...Ce,motherPedigree:H.target.value})),disabled:!P}),s.jsx(Y,{placeholder:"Race de la mère",value:E.motherBreed,onChange:H=>k(Ce=>({...Ce,motherBreed:H.target.value})),disabled:!P}),s.jsx(Ue,{placeholder:"Titres de la mère",value:E.motherTitles,onChange:H=>k(Ce=>({...Ce,motherTitles:H.target.value})),disabled:!P,rows:2})]})]})]})})]})]}),s.jsxs(ee,{children:[s.jsx(he,{children:s.jsx(me,{className:"text-lg",children:"Document officiel"})}),s.jsx(te,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("input",{type:"file",accept:"image/*",onChange:async H=>{var dn;const Ce=(dn=H.target.files)==null?void 0:dn[0];if(!Ce)return;const ge=new FileReader;ge.onload=()=>k(Ir=>({...Ir,pedigreePhoto:ge.result})),ge.readAsDataURL(Ce)},disabled:!P}),E.pedigreePhoto&&s.jsx("img",{src:E.pedigreePhoto,alt:"Document pedigree",className:"h-48 w-auto object-contain rounded border"})]})})]}),P&&s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(R,{variant:"outline",onClick:ce,children:"Annuler"}),s.jsx(R,{onClick:ve,children:"Sauvegarder"})]})]}),!E.hasPedigree&&s.jsx(ee,{children:s.jsxs(te,{className:"p-8 text-center text-muted-foreground",children:[s.jsx(Og,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"Aucun pedigree officiel"}),s.jsx("p",{className:"text-sm",children:"Cochez la case ci-dessus pour ajouter les informations du pedigree"})]})})]}),s.jsxs(It,{value:"alerts",className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Alertes et rappels"}),Sn.length===0?s.jsx(ee,{children:s.jsxs(te,{className:"p-8 text-center text-muted-foreground",children:[s.jsx(Hn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"Aucune alerte active"}),s.jsx("p",{className:"text-sm",children:"Tout va bien !"})]})}):s.jsx("div",{className:"space-y-4",children:Sn.map((H,Ce)=>s.jsx(ee,{className:H.type==="danger"?"border-destructive":"border-accent",children:s.jsx(te,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Hn,{className:`h-5 w-5 ${H.type==="danger"?"text-destructive":"text-accent"}`}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold",children:H.title}),s.jsx("p",{className:"text-sm text-muted-foreground",children:H.message})]}),s.jsx(R,{size:"sm",variant:"outline",children:H.action})]})})},Ce))})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[s.jsx(R,{variant:"outline",onClick:()=>t(!1),children:"Fermer"}),s.jsxs(R,{onClick:Xr,className:"gap-2",children:[s.jsx($u,{className:"h-4 w-4"}),"Imprimer Dossier"]})]})]})}),s.jsx($d,{open:p,onOpenChange:g}),s.jsx(tL,{open:x,onOpenChange:H=>{y(H),H||(B({clientId:0,petId:0,type:"",reason:""}),T(null))},prefillClientId:U.clientId.toString(),prefillPetId:U.petId.toString(),prefillType:U.type,prefillReason:U.reason,originalVaccinationId:K==null?void 0:K.id}),b&&s.jsx(r1,{selectedClientId:fe==null?void 0:fe.id,selectedPetId:n.id,children:s.jsx(R,{onClick:()=>C(!1),children:"Fermer"})}),s.jsx(ene,{open:$,onOpenChange:H=>{G(H),H||ne(null)},vaccination:Q}),w&&s.jsx(s1,{selectedClientId:fe==null?void 0:fe.id,selectedPetId:n.id,children:s.jsx(R,{onClick:()=>N(!1),children:"Fermer"})})]})}const NAe={healthy:"bg-secondary text-secondary-foreground",treatment:"bg-accent text-accent-foreground",urgent:"bg-destructive text-destructive-foreground"};function SAe(){const{pets:e,consultations:t,appointments:n,clients:r}=bt();At();const[a,i]=j.useState(!1),[o,l]=j.useState(!1),[c,u]=j.useState(!1),[d,h]=j.useState(!1),[m,f]=j.useState(!1),[v,p]=j.useState(null),x=[...e].sort((k,I)=>!k.lastVisit&&!I.lastVisit?0:k.lastVisit?I.lastVisit?new Date(I.lastVisit).getTime()-new Date(k.lastVisit).getTime():-1:1).slice(0,5),y=e.length,b=e.filter(k=>k.status==="healthy").length;e.filter(k=>k.status==="treatment").length,e.filter(k=>k.status==="urgent").length;const C=e.filter(k=>{if(!k.lastVisit)return!1;const I=new Date(k.lastVisit),D=new Date().getMonth(),U=new Date().getFullYear();return I.getMonth()===D&&I.getFullYear()===U}).length,w=y>0?(t.length/y).toFixed(1):"0",N=k=>{p(k),l(!0)},S=k=>{p(k),u(!0)},_=k=>{p(k),h(!0)},P=k=>{p(k),f(!0)},A=k=>{const I=t.filter(B=>B.petId===k.id),D=n.filter(B=>B.petId===k.id),U=r.find(B=>B.id===k.ownerId);return{consultations:I.length,appointments:D.length,owner:(U==null?void 0:U.name)||k.owner,lastConsultation:I.length>0?Math.max(...I.map(B=>new Date(B.date).getTime())):k.lastVisit?new Date(k.lastVisit).getTime():0}},E=k=>{switch(k){case"healthy":return s.jsx(ft,{className:"h-3 w-3 text-green-600"});case"treatment":return s.jsx(Pn,{className:"h-3 w-3 text-yellow-600"});case"urgent":return s.jsx(bn,{className:"h-3 w-3 text-red-600"});default:return s.jsx(ft,{className:"h-3 w-3"})}};return s.jsxs(s.Fragment,{children:[s.jsxs(ee,{className:"card-hover",children:[s.jsxs(he,{className:"flex flex-row items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(me,{className:"text-lg font-semibold",children:"Animaux Récents"}),s.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ft,{className:"h-3 w-3"}),s.jsxs("span",{children:[y," total"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(oa,{className:"h-3 w-3"}),s.jsxs("span",{children:[b," en bonne santé"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(cn,{className:"h-3 w-3"}),s.jsxs("span",{children:["+",C," ce mois"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Qt,{className:"h-3 w-3"}),s.jsxs("span",{children:["Ø ",w," consultations"]})]})]})]}),s.jsxs(R,{size:"sm",className:"gap-2",onClick:()=>i(!0),children:[s.jsx(Ze,{className:"h-4 w-4"}),"Nouvel Animal"]})]}),s.jsx(te,{className:"space-y-4",children:x.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(ft,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"Aucun animal enregistré"}),s.jsx("p",{className:"text-sm",children:"Commencez par créer votre premier animal"})]}):x.map(k=>{const I=A(k);return s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[s.jsx(Jn,{className:"h-12 w-12 flex-shrink-0",children:k.photo?s.jsx(zu,{src:k.photo,alt:k.name}):s.jsx(Zn,{className:"bg-primary-glow text-primary-foreground",children:s.jsx(ft,{className:"h-6 w-6"})})}),s.jsxs("div",{className:"space-y-1 flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h4",{className:"font-medium truncate",children:k.name}),s.jsxs(Pe,{variant:"outline",className:NAe[k.status],children:[E(k.status),s.jsx("span",{className:"ml-1",children:k.status==="healthy"?"En bonne santé":k.status==="treatment"?"En traitement":"Urgent"})]})]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"font-medium",children:k.type}),k.breed&&s.jsxs("span",{children:[" - ",k.breed]}),k.gender&&s.jsxs("span",{children:[" (",k.gender==="male"?"Mâle":"Femelle",")"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ge,{className:"h-3 w-3"}),s.jsx("span",{children:k.birthDate?Ru(k.birthDate):"Âge inconnu"})]})]})}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[s.jsxs("span",{children:["Propriétaire: ",I.owner]}),s.jsxs("span",{children:["Consultations: ",I.consultations]}),s.jsxs("span",{children:["RDV: ",I.appointments]}),k.lastVisit&&s.jsxs("span",{children:["Dernière visite: ",new Date(k.lastVisit).toLocaleDateString("fr-FR")]})]})]})]}),s.jsxs("div",{className:"flex gap-1 flex-shrink-0 ml-2",children:[s.jsx(R,{size:"sm",variant:"outline",onClick:()=>N(k),className:"h-8 px-2",children:s.jsx(An,{className:"h-3 w-3"})}),s.jsx(R,{size:"sm",variant:"outline",onClick:()=>S(k),className:"h-8 px-2",children:s.jsx($t,{className:"h-3 w-3"})}),s.jsx(R,{size:"sm",variant:"outline",onClick:()=>_(k),className:"h-8 px-2 text-xs",children:"Dossier"}),s.jsx(R,{size:"sm",onClick:()=>P(k),className:"h-8 px-2 text-xs",children:s.jsx(Pn,{className:"h-3 w-3"})})]})]},k.id)})})]}),s.jsx(Xx,{open:a,onOpenChange:i}),s.jsx(iL,{open:o,onOpenChange:l,pet:v,onEdit:()=>{l(!1),u(!0)},onShowDossier:()=>{l(!1),h(!0)}}),s.jsx(Uee,{open:c,onOpenChange:u,pet:v}),s.jsx(wAe,{open:d,onOpenChange:h,pet:v}),s.jsx($d,{open:m,onOpenChange:f})]})}function CAe({open:e,onOpenChange:t,consultation:n}){const{clients:r,pets:a,updateConsultation:i}=bt(),{toast:o}=it(),{settings:l}=At(),[c,u]=j.useState({clientId:0,clientName:"",petId:0,petName:"",date:"",weight:"",temperature:"",symptoms:"",diagnosis:"",treatment:"",medications:"",followUp:"",cost:"",notes:""}),d=a.filter(p=>p.ownerId===c.clientId),h=new Date().toISOString().split("T")[0],m=p=>{u(g=>({...g,[p.target.id]:p.target.value}))},f=(p,g)=>{if(p==="clientId"){const x=parseInt(g),y=r.find(b=>b.id===x);u(b=>({...b,clientId:x,clientName:(y==null?void 0:y.name)||"",petId:0,petName:""}))}else if(p==="petId"){const x=parseInt(g),y=a.find(b=>b.id===x);u(b=>({...b,petId:x,petName:(y==null?void 0:y.name)||""}))}else u(x=>({...x,[p]:g}))},v=p=>{if(p.preventDefault(),!!n){if(!c.clientId||!c.petId){o({title:"Erreur",description:"Veuillez sélectionner un client et un animal.",variant:"destructive"});return}i(n.id,{clientId:c.clientId,clientName:c.clientName,petId:c.petId,petName:c.petName,date:c.date||h,weight:c.weight,temperature:c.temperature,symptoms:c.symptoms,diagnosis:c.diagnosis,treatment:c.treatment,medications:c.medications,followUp:c.followUp,cost:c.cost,notes:c.notes}),o({title:"Consultation modifiée",description:`Consultation pour ${c.petName} (${c.clientName}) a été modifiée et sauvegardée.`}),t(!1)}};return j.useEffect(()=>{e&&n&&u({clientId:n.clientId,clientName:n.clientName,petId:n.petId,petName:n.petName,date:n.date,weight:n.weight||"",temperature:n.temperature||"",symptoms:n.symptoms||"",diagnosis:n.diagnosis||"",treatment:n.treatment||"",medications:n.medications||"",followUp:n.followUp||"",cost:n.cost||"",notes:n.notes||""})},[e,n]),n?s.jsx(Qe,{open:e,onOpenChange:t,children:s.jsxs(Ye,{className:"sm:max-w-[700px] max-h-[80vh] overflow-y-auto",children:[s.jsxs(Xe,{children:[s.jsx(Je,{children:"Modifier la Consultation"}),s.jsxs(Bt,{children:["Modifiez les détails de la consultation pour ",n.petName,"."]})]}),s.jsxs("form",{onSubmit:v,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{children:"Client *"}),s.jsxs(je,{value:c.clientId.toString(),onValueChange:p=>f("clientId",p),children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Sélectionner le client"})}),s.jsx(ye,{children:r.map(p=>s.jsx(z,{value:p.id.toString(),children:p.name},p.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{children:"Animal *"}),s.jsxs(je,{value:c.petId.toString(),onValueChange:p=>f("petId",p),disabled:!c.clientId,children:[s.jsx(xe,{children:s.jsx(be,{placeholder:c.clientId?"Sélectionner l'animal":"Sélectionnez d'abord un client"})}),s.jsx(ye,{children:d.map(p=>s.jsxs(z,{value:p.id.toString(),children:[p.name," (",p.type,")"]},p.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"date",children:"Date *"}),s.jsx(Y,{id:"date",type:"date",value:c.date||h,onChange:m,required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"weight",children:"Poids (kg)"}),s.jsx(Y,{id:"weight",type:"number",step:"0.1",value:c.weight,onChange:m,placeholder:"ex: 25.5"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"temperature",children:"Température (°C)"}),s.jsx(Y,{id:"temperature",type:"number",step:"0.1",value:c.temperature,onChange:m,placeholder:"ex: 38.5"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"symptoms",children:"Symptômes observés"}),s.jsx(Ue,{id:"symptoms",value:c.symptoms,onChange:m,placeholder:"Décrivez les symptômes et observations...",rows:3})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"diagnosis",children:"Diagnostic"}),s.jsx(Ue,{id:"diagnosis",value:c.diagnosis,onChange:m,placeholder:"Diagnostic posé...",rows:3})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"treatment",children:"Traitement administré"}),s.jsx(Ue,{id:"treatment",value:c.treatment,onChange:m,placeholder:"Traitements, injections, interventions...",rows:3})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"medications",children:"Médicaments prescrits"}),s.jsx(Ue,{id:"medications",value:c.medications,onChange:m,placeholder:"Liste des médicaments avec posologie...",rows:3})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"followUp",children:"Suivi recommandé"}),s.jsx(Y,{id:"followUp",value:c.followUp,onChange:m,placeholder:"ex: Contrôle dans 1 semaine"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(O,{htmlFor:"cost",children:["Coût (",l.currency,")"]}),s.jsx(Y,{id:"cost",type:"number",step:"0.01",value:c.cost,onChange:m,placeholder:"ex: 85.50"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"notes",children:"Notes additionnelles"}),s.jsx(Ue,{id:"notes",value:c.notes,onChange:m,placeholder:"Notes diverses, recommandations...",rows:3})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(R,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsx(R,{type:"submit",children:"Modifier Consultation"})]})]})]})}):null}function S8({consultation:e}){const{settings:t}=At(),r=(i=>{var o;return i.petName&&i.clientName?i:{...i,petName:((o=i.animal)==null?void 0:o.name)||"Non spécifié",clientName:i.client?`${i.client.first_name||""} ${i.client.last_name||""}`.trim():"Non spécifié",date:i.consultation_date||i.date,symptoms:i.symptoms||"",diagnosis:i.diagnosis||"",treatment:i.treatment||"",notes:i.notes||"",weight:i.weight||null,temperature:i.temperature||null,medications:i.medications||"",followUp:i.follow_up_notes||i.followUp||null,cost:i.cost||null}})(e),a=()=>{if(!r||!r.petName||!r.clientName)return;const i=window.open("","_blank");if(!i)return;const o=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Consultation - ${r.petName}</title>
          <style>
            body {
              font-family: Arial, sans-serif;
              margin: 20px;
              line-height: 1.6;
            }
            .header {
              text-align: center;
              border-bottom: 2px solid #333;
              padding-bottom: 20px;
              margin-bottom: 30px;
            }
            .clinic-name {
              font-size: 24px;
              font-weight: bold;
              color: #2563eb;
            }
            .consultation-title {
              font-size: 20px;
              margin: 10px 0;
            }
            .info-grid {
              display: grid;
              grid-template-columns: 1fr 1fr;
              gap: 20px;
              margin-bottom: 30px;
            }
            .info-section {
              border: 1px solid #ddd;
              padding: 15px;
              border-radius: 5px;
            }
            .info-section h3 {
              margin: 0 0 10px 0;
              color: #333;
              border-bottom: 1px solid #eee;
              padding-bottom: 5px;
            }
            .info-item {
              margin: 5px 0;
            }
            .info-label {
              font-weight: bold;
              color: #666;
            }
            .medical-section {
              margin: 20px 0;
            }
            .medical-section h3 {
              color: #333;
              border-bottom: 1px solid #eee;
              padding-bottom: 5px;
            }
            .footer {
              margin-top: 40px;
              text-align: center;
              font-size: 12px;
              color: #666;
            }
            @media print {
              body { margin: 0; }
              .no-print { display: none; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            <div class="clinic-name">${t.clinicName||"VetPro CRM"}</div>
            <div class="consultation-title">Rapport de Consultation</div>
            <div>Date: ${new Date(r.date).toLocaleDateString("fr-FR")}</div>
          </div>

          <div class="info-grid">
            <div class="info-section">
              <h3>Informations Client</h3>
              <div class="info-item">
                <span class="info-label">Nom:</span> ${r.clientName}
              </div>
            </div>
            <div class="info-section">
              <h3>Informations Animal</h3>
              <div class="info-item">
                <span class="info-label">Nom:</span> ${r.petName}
              </div>
              <div class="info-item">
                <span class="info-label">Poids:</span> ${r.weight||"Non renseigné"}
              </div>
              <div class="info-item">
                <span class="info-label">Température:</span> ${r.temperature||"Non renseigné"}
              </div>
            </div>
          </div>

          ${r.symptoms?`
            <div class="medical-section">
              <h3>Symptômes Observés</h3>
              <p>${r.symptoms}</p>
            </div>
          `:""}

          ${r.diagnosis?`
            <div class="medical-section">
              <h3>Diagnostic</h3>
              <p>${r.diagnosis}</p>
            </div>
          `:""}

          ${r.treatment?`
            <div class="medical-section">
              <h3>Traitement Administré</h3>
              <p>${r.treatment}</p>
            </div>
          `:""}

          ${r.medications?`
            <div class="medical-section">
              <h3>Médicaments Prescrits</h3>
              <p>${r.medications}</p>
            </div>
          `:""}

          ${r.notes?`
            <div class="medical-section">
              <h3>Notes Additionnelles</h3>
              <p>${r.notes}</p>
            </div>
          `:""}

          <div class="info-grid">
            <div class="info-section">
              <h3>Suivi Recommandé</h3>
              <p>${r.followUp||"Aucun suivi prévu"}</p>
            </div>
            <div class="info-section">
              <h3>Coût</h3>
              <p>${r.cost?r.cost+" "+(t.currency||"MAD"):"Non renseigné"}</p>
            </div>
          </div>

          <div class="footer">
            <p>Consultation générée le ${new Date().toLocaleDateString("fr-FR")} à ${new Date().toLocaleTimeString("fr-FR")}</p>
            <p>VetPro CRM - Gestion Vétérinaire Complète</p>
          </div>
        </body>
      </html>
    `;i.document.write(o),i.document.close(),setTimeout(()=>{i.focus(),i.print(),i.close()},500)};return s.jsxs(R,{size:"sm",variant:"outline",onClick:a,className:"gap-2",children:[s.jsx($u,{className:"h-4 w-4"}),"Imprimer"]})}function _Ae(){const{consultations:e,deleteConsultation:t,pets:n,clients:r}=bt(),{settings:a}=At(),{toast:i}=it(),[o,l]=j.useState(!1),[c,u]=j.useState(!1),[d,h]=j.useState(null),f=[...e].sort((I,D)=>new Date(D.date).getTime()-new Date(I.date).getTime()).slice(0,5),v=e.length,p=e.filter(I=>I.date===new Date().toISOString().split("T")[0]).length,g=new Date().getMonth(),x=new Date().getFullYear(),y=e.filter(I=>{const D=new Date(I.date);return D.getMonth()===g&&D.getFullYear()===x}).length,b=e.filter(I=>{const D=new Date(I.date),U=g===0?11:g-1,B=g===0?x-1:x;return D.getMonth()===U&&D.getFullYear()===B}).length,C=b>0?Math.round((y-b)/b*100):y>0?100:0,w=y*50,N=b*50,S=N>0?Math.round((w-N)/N*100):w>0?100:0,_=I=>{h(I),u(!0)},P=I=>{confirm(`Êtes-vous sûr de vouloir supprimer la consultation pour ${I.petName} ?`)&&(t(I.id),i({title:"Consultation supprimée",description:`La consultation pour ${I.petName} a été supprimée.`}))},A=I=>{const D=new Date().toISOString().split("T")[0];return I.date===D?"bg-accent text-accent-foreground":I.date<D?"bg-secondary text-secondary-foreground":"bg-primary text-primary-foreground"},E=I=>{const D=new Date().toISOString().split("T")[0];return I.date===D?"Aujourd'hui":I.date<D?"Terminée":"À venir"},k=I=>{const D=n.find(B=>B.id===I.petId),U=r.find(B=>B.id===I.clientId);return{petType:(D==null?void 0:D.type)||"Inconnu",petBreed:(D==null?void 0:D.breed)||"Non spécifiée",clientPhone:(U==null?void 0:U.phone)||"Non spécifié",clientCity:(U==null?void 0:U.city)||"Non spécifiée"}};return s.jsxs(s.Fragment,{children:[s.jsxs(ee,{className:"card-hover",children:[s.jsxs(he,{className:"flex flex-row items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(me,{className:"text-lg font-semibold",children:"Consultations Récentes"}),s.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Pn,{className:"h-3 w-3"}),s.jsxs("span",{children:[v," total"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(oa,{className:"h-3 w-3"}),s.jsxs("span",{children:[p," aujourd'hui"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(cn,{className:"h-3 w-3"}),s.jsxs("span",{children:[y," ce mois"]}),C!==0&&s.jsxs(Pe,{variant:C>0?"default":"destructive",className:"text-xs",children:[C>0?"+":"",C,"%"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(bd,{className:"h-3 w-3"}),s.jsxs("span",{children:["~",w,"€ ce mois"]}),S!==0&&s.jsxs(Pe,{variant:S>0?"default":"destructive",className:"text-xs",children:[S>0?"+":"",S,"%"]})]})]})]}),s.jsxs(R,{size:"sm",className:"gap-2",onClick:()=>l(!0),children:[s.jsx(Ze,{className:"h-4 w-4"}),"Nouvelle Consultation"]})]}),s.jsx(te,{className:"space-y-4",children:f.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Pn,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"Aucune consultation enregistrée"}),s.jsx("p",{className:"text-sm",children:"Commencez par créer votre première consultation"})]}):f.map(I=>{const D=k(I);return s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(Jn,{className:"h-12 w-12",children:s.jsx(Zn,{className:"bg-primary-glow text-primary-foreground",children:s.jsx(Pn,{className:"h-6 w-6"})})}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("h4",{className:"font-medium",children:["Consultation #",I.id]}),s.jsx(Pe,{variant:"outline",className:A(I),children:E(I)}),I.cost&&s.jsxs(Pe,{variant:"secondary",className:"text-xs",children:[I.cost," ",a.currency||"€"]})]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ft,{className:"h-3 w-3"}),s.jsxs("span",{children:[I.petName," (",D.petType,")"]}),D.petBreed!=="Non spécifiée"&&s.jsxs("span",{children:[" - ",D.petBreed]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Xn,{className:"h-3 w-3"}),s.jsx("span",{children:I.clientName})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ge,{className:"h-3 w-3"}),s.jsx("span",{children:new Date(I.date).toLocaleDateString("fr-FR")})]})]})}),s.jsx("div",{className:"text-xs text-muted-foreground",children:s.jsxs("div",{className:"flex items-center gap-4",children:[I.diagnosis&&s.jsxs("span",{children:["Diagnostic: ",I.diagnosis]}),I.weight&&s.jsxs("span",{children:["Poids: ",I.weight]}),I.temperature&&s.jsxs("span",{children:["Température: ",I.temperature,"°C"]}),I.photos&&I.photos.length>0&&s.jsxs("span",{children:["📷 ",I.photos.length," photo",I.photos.length>1?"s":""]})]})})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(R,{size:"sm",variant:"outline",onClick:()=>_(I),className:"gap-2",children:[s.jsx($t,{className:"h-4 w-4"}),"Modifier"]}),s.jsx(S8,{consultation:I}),s.jsxs(R,{size:"sm",variant:"destructive",onClick:()=>P(I),className:"gap-2",children:[s.jsx(_r,{className:"h-4 w-4"}),"Supprimer"]})]})]},I.id)})})]}),s.jsx($d,{open:o,onOpenChange:l}),s.jsx(CAe,{open:c,onOpenChange:u,consultation:d})]})}function PAe(){const{appointments:e,stockItems:t,getUpcomingAppointments:n,getOverdueAppointments:r}=bt();At();const a=new Date().toISOString().split("T")[0];n();const i=r(),o=e.filter(d=>d.date===a&&d.status!=="cancelled"&&d.status!=="completed"),l=t.filter(d=>d.currentStock<=d.minimumStock),c=t.filter(d=>d.currentStock===0),u=[];return c.length>0&&u.push({type:"critical",icon:bn,title:"Stock épuisé",message:`${c.length} produit(s) en rupture de stock`,count:c.length,color:"text-red-600",bgColor:"bg-red-50",borderColor:"border-red-200"}),l.length>0&&u.push({type:"warning",icon:Ia,title:"Stock faible",message:`${l.length} produit(s) en stock faible`,count:l.length,color:"text-orange-600",bgColor:"bg-orange-50",borderColor:"border-orange-200"}),i.length>0&&u.push({type:"warning",icon:Qt,title:"Rendez-vous en retard",message:`${i.length} rendez-vous en retard`,count:i.length,color:"text-orange-600",bgColor:"bg-orange-50",borderColor:"border-orange-200"}),o.length>0&&u.push({type:"info",icon:Ge,title:"Rendez-vous aujourd'hui",message:`${o.length} rendez-vous prévus aujourd'hui`,count:o.length,color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200"}),u.length===0?s.jsxs(ee,{className:"card-hover",children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(cn,{className:"h-5 w-5 text-green-600"}),"Aucune alerte"]})}),s.jsx(te,{children:s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{className:"text-green-600 text-4xl mb-2",children:"✅"}),s.jsx("p",{className:"text-muted-foreground",children:"Tout va bien ! Aucune alerte à signaler."})]})})]}):s.jsxs(ee,{className:"card-hover",children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(bn,{className:"h-5 w-5 text-orange-600"}),"Alertes & Notifications",s.jsx(Pe,{variant:"destructive",className:"ml-2",children:u.length})]})}),s.jsx(te,{className:"space-y-3",children:u.map((d,h)=>s.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${d.borderColor} ${d.bgColor}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`p-2 rounded-full ${d.bgColor}`,children:s.jsx(d.icon,{className:`h-4 w-4 ${d.color}`})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-sm",children:d.title}),s.jsx("p",{className:"text-xs text-muted-foreground",children:d.message})]})]}),s.jsx(Pe,{variant:d.type==="critical"?"destructive":d.type==="warning"?"secondary":"default",className:"text-xs",children:d.count})]},h))})]})}function AAe(){const{clients:e,pets:t,consultations:n,appointments:r,prescriptions:a,farms:i,farmInterventions:o}=bt();At();const l=e.reduce((x,y)=>x+y.pets.length,0),c=l===t.length,u=e.length+t.length+n.length+r.length+a.length+i.length+o.length,d=c?100:Math.round((u-Math.abs(l-t.length))/u*100),h=new Date().toISOString().split("T")[0],m=n.filter(x=>x.date===h).length,f=r.filter(x=>x.date===h&&x.status!=="cancelled"&&x.status!=="completed").length,v=new Date().getMonth(),p=new Date().getFullYear(),g=n.filter(x=>{const y=new Date(x.date);return y.getMonth()===v&&y.getFullYear()===p}).length;return s.jsxs(ee,{className:"mb-6",children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[c?s.jsx(Ln,{className:"h-5 w-5 text-green-600"}):s.jsx(Hn,{className:"h-5 w-5 text-yellow-600"}),"Statut de Synchronisation"]})}),s.jsxs(te,{children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Va,{className:"h-4 w-4 text-blue-600"}),s.jsxs("span",{className:"text-sm",children:["Clients: ",e.length]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ft,{className:"h-4 w-4 text-red-600"}),s.jsxs("span",{className:"text-sm",children:["Animaux: ",t.length]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(_r,{className:"h-4 w-4 text-green-600"}),s.jsxs("span",{className:"text-sm",children:["Consultations: ",n.length]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ge,{className:"h-4 w-4 text-purple-600"}),s.jsxs("span",{className:"text-sm",children:["RDV: ",r.length]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(cn,{className:"h-4 w-4 text-blue-600"}),s.jsxs("span",{className:"text-sm",children:["Aujourd'hui: ",m+f]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Qt,{className:"h-4 w-4 text-green-600"}),s.jsxs("span",{className:"text-sm",children:["Ce mois: ",g]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ln,{className:"h-4 w-4 text-orange-600"}),s.jsxs("span",{className:"text-sm",children:["Prescriptions: ",a.length]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(_r,{className:"h-4 w-4 text-indigo-600"}),s.jsxs("span",{className:"text-sm",children:["Fermes: ",i.length]})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"Intégrité des données:"}),s.jsxs(Pe,{variant:d>=95?"default":d>=80?"secondary":"destructive",children:[d,"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full ${d>=95?"bg-green-600":d>=80?"bg-yellow-600":"bg-red-600"}`,style:{width:`${d}%`}})}),s.jsx("div",{className:"flex items-center gap-2 text-sm",children:c?s.jsxs(s.Fragment,{children:[s.jsx(Ln,{className:"h-4 w-4 text-green-600"}),s.jsx("span",{className:"text-green-700",children:"Synchronisation OK"})]}):s.jsxs(s.Fragment,{children:[s.jsx(Hn,{className:"h-4 w-4 text-yellow-600"}),s.jsx("span",{className:"text-yellow-700",children:"Désynchronisation détectée"})]})}),!c&&s.jsxs("div",{className:"text-xs text-muted-foreground bg-yellow-50 p-2 rounded",children:[s.jsx("strong",{children:"Attention:"})," ",Math.abs(l-t.length)," animal(s) non synchronisé(s) entre clients et animaux"]})]})]})]})}function kAe(){const{clients:e,pets:t,consultations:n,appointments:r,prescriptions:a,farms:i,farmInterventions:o,resetData:l,exportData:c,importData:u}=bt(),{settings:d}=At(),{toast:h}=it(),[m,f]=j.useState(!1),[v,p]=j.useState(!1),g=e.length+t.length+n.length+r.length+a.length+i.length+o.length,x=Math.round(g*.5),y=[...e.map(k=>k.lastVisit),...t.map(k=>k.lastVisit).filter(Boolean),...n.map(k=>k.date),...r.map(k=>k.date),...a.map(k=>k.date),...i.map(k=>k.lastVisit)].filter(Boolean),b=y.length>0?new Date(Math.max(...y.map(k=>new Date(k).getTime()))):new Date,C=new Date().toISOString().split("T")[0],w=new Date().getMonth(),N=new Date().getFullYear(),S=[...e.filter(k=>k.lastVisit===C),...t.filter(k=>k.lastVisit===C),...n.filter(k=>k.date===C),...r.filter(k=>k.date===C)].length,_=[...e.filter(k=>{const I=new Date(k.lastVisit);return I.getMonth()===w&&I.getFullYear()===N}),...t.filter(k=>{if(!k.lastVisit)return!1;const I=new Date(k.lastVisit);return I.getMonth()===w&&I.getFullYear()===N}),...n.filter(k=>{const I=new Date(k.date);return I.getMonth()===w&&I.getFullYear()===N}),...r.filter(k=>{const I=new Date(k.date);return I.getMonth()===w&&I.getFullYear()===N})].length,P=()=>{try{c(),h({title:"Données exportées",description:`Export de ${g} enregistrements réussi.`})}catch{h({title:"Erreur d'export",description:"Impossible d'exporter les données.",variant:"destructive"})}},A=k=>{var U;const I=(U=k.target.files)==null?void 0:U[0];if(!I)return;const D=new FileReader;D.onload=B=>{var K,T;try{const $=JSON.parse((K=B.target)==null?void 0:K.result);if($.clients&&$.pets)u($),h({title:"Données importées",description:`${$.clients.length} clients, ${$.pets.length} animaux et ${((T=$.consultations)==null?void 0:T.length)||0} consultations importés avec succès.`});else throw new Error("Format de fichier invalide")}catch{h({title:"Erreur d'import",description:"Le fichier sélectionné n'est pas valide.",variant:"destructive"})}},D.readAsText(I),p(!1)},E=()=>{try{l(),h({title:"Données réinitialisées",description:"Toutes les données ont été remises aux valeurs par défaut."}),f(!1)}catch{h({title:"Erreur de réinitialisation",description:"Impossible de réinitialiser les données.",variant:"destructive"})}};return s.jsxs(s.Fragment,{children:[s.jsxs(ee,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(_U,{className:"h-5 w-5"}),"Gestion des Données"]})}),s.jsxs(te,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Total:"}),s.jsxs("span",{className:"text-muted-foreground",children:[g," enregistrements"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Taille:"}),s.jsxs("span",{className:"text-muted-foreground",children:["~",x," KB"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Dernière modif:"}),s.jsx("span",{className:"text-muted-foreground",children:b.toLocaleDateString("fr-FR")})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(cn,{className:"h-4 w-4 text-green-600"}),s.jsx("span",{className:"font-medium",children:"Aujourd'hui:"}),s.jsx("span",{className:"text-muted-foreground",children:S})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Qt,{className:"h-4 w-4 text-blue-600"}),s.jsx("span",{className:"font-medium",children:"Ce mois:"}),s.jsx("span",{className:"text-muted-foreground",children:_})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ln,{className:"h-4 w-4 text-green-600"}),s.jsx("span",{className:"font-medium",children:"Clinique:"}),s.jsx("span",{className:"text-muted-foreground",children:d.clinicName||"Non configurée"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-xs",children:[s.jsxs("div",{className:"text-center p-2 bg-blue-50 rounded",children:[s.jsx("div",{className:"font-medium text-blue-700",children:e.length}),s.jsx("div",{className:"text-blue-600",children:"Clients"})]}),s.jsxs("div",{className:"text-center p-2 bg-red-50 rounded",children:[s.jsx("div",{className:"font-medium text-red-700",children:t.length}),s.jsx("div",{className:"text-red-600",children:"Animaux"})]}),s.jsxs("div",{className:"text-center p-2 bg-green-50 rounded",children:[s.jsx("div",{className:"font-medium text-green-700",children:n.length}),s.jsx("div",{className:"text-green-600",children:"Consultations"})]}),s.jsxs("div",{className:"text-center p-2 bg-purple-50 rounded",children:[s.jsx("div",{className:"font-medium text-purple-700",children:r.length}),s.jsx("div",{className:"text-purple-600",children:"RDV"})]}),s.jsxs("div",{className:"text-center p-2 bg-orange-50 rounded",children:[s.jsx("div",{className:"font-medium text-orange-700",children:a.length}),s.jsx("div",{className:"text-orange-600",children:"Prescriptions"})]}),s.jsxs("div",{className:"text-center p-2 bg-indigo-50 rounded",children:[s.jsx("div",{className:"font-medium text-indigo-700",children:i.length}),s.jsx("div",{className:"text-indigo-600",children:"Fermes"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(R,{size:"sm",variant:"outline",onClick:P,className:"gap-2",children:[s.jsx(Nx,{className:"h-4 w-4"}),"Exporter"]}),s.jsxs(R,{size:"sm",variant:"outline",onClick:()=>p(!0),className:"gap-2",children:[s.jsx(Ob,{className:"h-4 w-4"}),"Importer"]}),s.jsxs(R,{size:"sm",variant:"destructive",onClick:()=>f(!0),className:"gap-2",children:[s.jsx(AI,{className:"h-4 w-4"}),"Réinitialiser"]})]})]})]}),s.jsx(Qe,{open:m,onOpenChange:f,children:s.jsxs(Ye,{children:[s.jsxs(Xe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(bn,{className:"h-5 w-5 text-red-600"}),"Réinitialiser toutes les données"]}),s.jsx(Bt,{children:"Cette action supprimera définitivement toutes les données (clients, animaux, consultations, etc.) et les remettra aux valeurs par défaut. Cette action ne peut pas être annulée."})]}),s.jsxs("div",{className:"flex gap-2 justify-end",children:[s.jsx(R,{variant:"outline",onClick:()=>f(!1),children:"Annuler"}),s.jsx(R,{variant:"destructive",onClick:E,children:"Réinitialiser"})]})]})}),s.jsx(Qe,{open:v,onOpenChange:p,children:s.jsxs(Ye,{children:[s.jsxs(Xe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(Ob,{className:"h-5 w-5"}),"Importer des données"]}),s.jsx(Bt,{children:"Sélectionnez un fichier JSON exporté précédemment pour restaurer vos données."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("input",{type:"file",accept:".json",onChange:A,className:"w-full"}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx("strong",{children:"Note:"})," L'import remplacera toutes les données existantes."]})]}),s.jsx("div",{className:"flex gap-2 justify-end",children:s.jsx(R,{variant:"outline",onClick:()=>p(!1),children:"Annuler"})})]})})]})}function TAe(){ir(),or();const{data:e=[]}=Md(),{data:t=[]}=s2();Id(),Gx();const{data:n=[]}=r2(),{settings:r}=At(),a=new Date().toISOString().split("T")[0];new Date().getMonth(),new Date().getFullYear();const i=e.filter(p=>p.consultation_date.split("T")[0]===a).length,o=t.filter(p=>p.appointment_date.split("T")[0]===a&&p.status!=="cancelled").length,l=0,c=[],u=n.filter(p=>p.current_quantity<=p.minimum_quantity).length,d=n.filter(p=>p.current_quantity===0).length,h={totalRevenue:0,totalExpenses:0,netIncome:0,revenueBreakdown:{consultations:0,vaccinations:0,antiparasitics:0,prescriptions:0,manualEntries:0},expenseBreakdown:{stockPurchases:0,salaries:0,rent:0,taxes:0,other:0}},v=[{title:"Consultations Aujourd'hui",value:i,icon:Pn,color:"text-green-600",bgColor:"bg-green-50",trend:i>0?"up":"neutral",description:"Consultations réalisées"},{title:"RDV Aujourd'hui",value:o,icon:Ge,color:"text-blue-600",bgColor:"bg-blue-50",trend:o>0?"up":"neutral",description:"Rendez-vous programmés"},{title:"RDV Cette Semaine",value:l,icon:Qt,color:"text-purple-600",bgColor:"bg-purple-50",trend:"neutral",description:"Rendez-vous à venir"},{title:"RDV En Retard",value:c.length,icon:bn,color:c.length>0?"text-red-600":"text-gray-600",bgColor:c.length>0?"bg-red-50":"bg-gray-50",trend:c.length>0?"down":"neutral",description:"Rendez-vous en retard"},{title:"Nouveaux Clients",value:0,icon:Va,color:"text-emerald-600",bgColor:"bg-emerald-50",trend:"neutral",description:"Ce mois"},{title:"Nouveaux Animaux",value:0,icon:ft,color:"text-pink-600",bgColor:"bg-pink-50",trend:"neutral",description:"Ce mois"},{title:"Revenus du Mois",value:`${h.totalRevenue.toFixed(0)} ${r.currency||"€"}`,icon:bd,color:"text-green-600",bgColor:"bg-green-50",trend:"neutral",description:`Bénéfice: ${h.netIncome.toFixed(0)} ${r.currency||"€"}`},{title:"Stock Critique",value:u,icon:oa,color:u>0?"text-orange-600":"text-green-600",bgColor:u>0?"bg-orange-50":"bg-green-50",trend:u>0?"down":"neutral",description:`${d} en rupture`}];return s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:v.map((p,g)=>s.jsxs(ee,{className:"card-hover",children:[s.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(me,{className:"text-sm font-medium text-muted-foreground",children:p.title}),s.jsx("div",{className:`p-2 rounded-lg ${p.bgColor}`,children:s.jsx(p.icon,{className:`h-4 w-4 ${p.color}`})})]}),s.jsxs(te,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"text-2xl font-bold",children:p.value}),s.jsxs("div",{className:"flex items-center gap-1",children:[p.trend==="up"&&s.jsxs(s.Fragment,{children:[s.jsx(cn,{className:"h-4 w-4 text-green-600"}),s.jsxs(Pe,{variant:"secondary",className:"text-xs bg-green-100 text-green-800",children:["+",Math.floor(Math.random()*20)+5,"%"]})]}),p.trend==="down"&&s.jsxs(s.Fragment,{children:[s.jsx(Vl,{className:"h-4 w-4 text-red-600"}),s.jsxs(Pe,{variant:"secondary",className:"text-xs bg-red-100 text-red-800",children:["-",Math.floor(Math.random()*15)+3,"%"]})]}),p.trend==="neutral"&&s.jsx(Pe,{variant:"outline",className:"text-xs",children:"0%"})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:p.description})]})]},g))})}function EAe(){const{accountingEntries:e}=bt(),{settings:t}=At(),r=(()=>{const a=[],i=new Date;for(let o=5;o>=0;o--){const l=new Date(i.getFullYear(),i.getMonth()-o,1);`${l.getFullYear()}${String(l.getMonth()+1).padStart(2,"0")}`;const c=new Date(l.getFullYear(),l.getMonth(),1).toISOString().split("T")[0],u=new Date(l.getFullYear(),l.getMonth()+1,0).toISOString().split("T")[0],d=e.filter(f=>{const v=new Date(f.date);return v>=new Date(c)&&v<=new Date(u)}),h=d.filter(f=>f.type==="revenue").reduce((f,v)=>f+v.amount,0),m=d.filter(f=>f.type==="expense").reduce((f,v)=>f+v.amount,0);a.push({month:l.toLocaleDateString("fr-FR",{month:"short"}),revenue:Math.round(h),expenses:Math.round(m),profit:Math.round(h-m)})}return a})();return s.jsxs(ee,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(me,{className:"text-base font-medium",children:"Évolution des Revenus"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(bd,{className:"h-4 w-4 text-muted-foreground"}),s.jsx(cn,{className:"h-4 w-4 text-green-600"})]})]}),s.jsxs(te,{children:[s.jsx("div",{className:"h-[300px] w-full",children:s.jsx(_i,{width:"100%",height:"100%",children:s.jsxs(xC,{data:r,margin:{top:5,right:30,left:20,bottom:5},children:[s.jsx(nc,{strokeDasharray:"3 3",className:"opacity-30"}),s.jsx(da,{dataKey:"month",axisLine:!1,tickLine:!1,className:"text-xs"}),s.jsx(ha,{axisLine:!1,tickLine:!1,className:"text-xs",tickFormatter:a=>`${a}${t.currency||"€"}`}),s.jsx(Kn,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:(a,i)=>[`${a} ${t.currency||"€"}`,i==="revenue"?"Revenus":i==="expenses"?"Dépenses":"Bénéfice"]}),s.jsx(Ms,{type:"monotone",dataKey:"revenue",stackId:"1",stroke:"#10b981",fill:"#10b981",fillOpacity:.6,strokeWidth:2}),s.jsx(Ms,{type:"monotone",dataKey:"expenses",stackId:"2",stroke:"#ef4444",fill:"#ef4444",fillOpacity:.6,strokeWidth:2})]})})}),s.jsxs("div",{className:"flex items-center justify-between mt-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-muted-foreground",children:"Revenus"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),s.jsx("span",{className:"text-muted-foreground",children:"Dépenses"})]})]})]})]})}function OAe(){const{consultations:e,appointments:t,vaccinations:n,antiparasitics:r}=bt(),i=(()=>{const o=[],l=new Date;for(let c=6;c>=0;c--){const u=new Date(l);u.setDate(u.getDate()-c);const d=u.toISOString().split("T")[0],h=e.filter(p=>p.date===d).length,m=t.filter(p=>p.date===d).length,f=n.filter(p=>p.dateGiven===d).length,v=r.filter(p=>p.dateGiven===d).length;o.push({day:u.toLocaleDateString("fr-FR",{weekday:"short"}),date:d,consultations:h,appointments:m,vaccinations:f,antiparasitics:v,total:h+m+f+v})}return o})();return s.jsxs(ee,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(me,{className:"text-base font-medium",children:"Activité des 7 derniers jours"}),s.jsx(oa,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(te,{children:[s.jsx("div",{className:"h-[300px] w-full",children:s.jsx(_i,{width:"100%",height:"100%",children:s.jsxs(VPe,{data:i,margin:{top:5,right:30,left:20,bottom:5},children:[s.jsx(nc,{strokeDasharray:"3 3",className:"opacity-30"}),s.jsx(da,{dataKey:"day",axisLine:!1,tickLine:!1,className:"text-xs"}),s.jsx(ha,{axisLine:!1,tickLine:!1,className:"text-xs"}),s.jsx(Kn,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:(o,l)=>[o,l==="consultations"?"Consultations":l==="appointments"?"Rendez-vous":l==="vaccinations"?"Vaccinations":l==="antiparasitics"?"Antiparasitaires":"Total"]}),s.jsx(Ea,{dataKey:"consultations",fill:"#10b981",radius:[2,2,0,0]}),s.jsx(Ea,{dataKey:"appointments",fill:"#3b82f6",radius:[2,2,0,0]}),s.jsx(Ea,{dataKey:"vaccinations",fill:"#8b5cf6",radius:[2,2,0,0]}),s.jsx(Ea,{dataKey:"antiparasitics",fill:"#f59e0b",radius:[2,2,0,0]})]})})}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mt-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),s.jsx("span",{className:"text-muted-foreground",children:"Consultations"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),s.jsx("span",{className:"text-muted-foreground",children:"Rendez-vous"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),s.jsx("span",{className:"text-muted-foreground",children:"Vaccinations"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-amber-500 rounded-full"}),s.jsx("span",{className:"text-muted-foreground",children:"Antiparasitaires"})]})]})]})]})}function DAe(){const{stockItems:e}=bt(),t=L.useMemo(()=>{const a=e.length,i=e.filter(c=>c.currentStock<=c.minimumStock&&c.currentStock>0).length,o=e.filter(c=>c.currentStock===0).length;return[{name:"Stock Normal",value:a-i-o,color:"#10b981"},{name:"Stock Faible",value:i,color:"#f59e0b"},{name:"Rupture",value:o,color:"#ef4444"}].filter(c=>c.value>0)},[e]),n=e.reduce((a,i)=>a+i.currentStock*i.purchasePrice,0),r=e.sort((a,i)=>i.currentStock*i.purchasePrice-a.currentStock*a.purchasePrice).slice(0,5);return s.jsxs(ee,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(me,{className:"text-base font-medium",children:"État du Stock"}),s.jsx(Ia,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(te,{children:[s.jsx("div",{className:"h-[300px] w-full",children:s.jsx(_i,{width:"100%",height:"100%",children:s.jsxs(vC,{children:[s.jsx(ga,{data:t,cx:"50%",cy:"50%",labelLine:!1,label:({name:a,percent:i})=>`${a} ${(i*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:t.map((a,i)=>s.jsx(Hd,{fill:a.color},`cell-${i}`))}),s.jsx(Kn,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:a=>[a,"Articles"]})]})})}),s.jsxs("div",{className:"mt-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Valeur totale du stock"}),s.jsxs("span",{className:"font-medium",children:[n.toFixed(0)," €"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-sm font-medium",children:"Articles les plus précieux"}),r.map((a,i)=>s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsx("span",{className:"truncate flex-1",children:a.name}),s.jsxs("span",{className:"text-muted-foreground ml-2",children:[(a.currentStock*a.purchasePrice).toFixed(0)," €"]})]},a.id))]})]})]})]})}function MAe(){const{clients:e,pets:t}=bt(),r=(()=>{const a=[],i=new Date;for(let o=5;o>=0;o--){const l=new Date(i.getFullYear(),i.getMonth()-o,1),c=new Date(l.getFullYear(),l.getMonth(),1),u=new Date(l.getFullYear(),l.getMonth()+1,0),d=e.filter(v=>{const p=new Date(v.createdAt);return p>=c&&p<=u}).length,h=t.filter(v=>{const p=new Date(v.createdAt);return p>=c&&p<=u}).length,m=e.filter(v=>new Date(v.createdAt)<=u).length,f=t.filter(v=>new Date(v.createdAt)<=u).length;a.push({month:l.toLocaleDateString("fr-FR",{month:"short"}),newClients:d,newPets:h,totalClients:m,totalPets:f})}return a})();return s.jsxs(ee,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(me,{className:"text-base font-medium",children:"Croissance des Clients"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Va,{className:"h-4 w-4 text-muted-foreground"}),s.jsx(cn,{className:"h-4 w-4 text-blue-600"})]})]}),s.jsxs(te,{children:[s.jsx("div",{className:"h-[300px] w-full",children:s.jsx(_i,{width:"100%",height:"100%",children:s.jsxs(xC,{data:r,margin:{top:5,right:30,left:20,bottom:5},children:[s.jsx(nc,{strokeDasharray:"3 3",className:"opacity-30"}),s.jsx(da,{dataKey:"month",axisLine:!1,tickLine:!1,className:"text-xs"}),s.jsx(ha,{axisLine:!1,tickLine:!1,className:"text-xs"}),s.jsx(Kn,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:(a,i)=>[a,i==="newClients"?"Nouveaux Clients":i==="newPets"?"Nouveaux Animaux":i==="totalClients"?"Total Clients":"Total Animaux"]}),s.jsx(Ms,{type:"monotone",dataKey:"newClients",stackId:"1",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.6,strokeWidth:2}),s.jsx(Ms,{type:"monotone",dataKey:"newPets",stackId:"2",stroke:"#8b5cf6",fill:"#8b5cf6",fillOpacity:.6,strokeWidth:2})]})})}),s.jsxs("div",{className:"flex items-center justify-between mt-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),s.jsx("span",{className:"text-muted-foreground",children:"Nouveaux Clients"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),s.jsx("span",{className:"text-muted-foreground",children:"Nouveaux Animaux"})]})]})]})]})}function IAe(){const{appointments:e}=bt(),t=L.useMemo(()=>{const c=e.reduce((h,m)=>(h[m.status]=(h[m.status]||0)+1,h),{}),u={scheduled:"Planifié",confirmed:"Confirmé",completed:"Terminé",cancelled:"Annulé","no-show":"Absent"},d={scheduled:"#3b82f6",confirmed:"#10b981",completed:"#6b7280",cancelled:"#ef4444","no-show":"#f59e0b"};return Object.entries(c).map(([h,m])=>({name:u[h]||h,value:m,color:d[h]||"#6b7280"}))},[e]),n=e.length,r=e.filter(c=>c.status==="completed").length,a=e.filter(c=>c.status==="scheduled"||c.status==="confirmed").length,i=e.filter(c=>c.status==="cancelled").length,o=n>0?r/n*100:0,l=n>0?i/n*100:0;return s.jsxs(ee,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(me,{className:"text-base font-medium",children:"Statuts des Rendez-vous"}),s.jsx(Ge,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(te,{children:[s.jsx("div",{className:"h-[300px] w-full",children:s.jsx(_i,{width:"100%",height:"100%",children:s.jsxs(vC,{children:[s.jsx(ga,{data:t,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,dataKey:"value",children:t.map((c,u)=>s.jsx(Hd,{fill:c.color},`cell-${u}`))}),s.jsx(Kn,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:c=>[c,"Rendez-vous"]})]})})}),s.jsxs("div",{className:"mt-4 space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[o.toFixed(1),"%"]}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Taux de réussite"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-red-600",children:[l.toFixed(1),"%"]}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Taux d'annulation"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ln,{className:"h-4 w-4 text-green-600"}),s.jsx("span",{children:"Terminés"})]}),s.jsx("span",{className:"font-medium",children:r})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Qt,{className:"h-4 w-4 text-blue-600"}),s.jsx("span",{children:"À venir"})]}),s.jsx("span",{className:"font-medium",children:a})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(gm,{className:"h-4 w-4 text-red-600"}),s.jsx("span",{children:"Annulés"})]}),s.jsx("span",{className:"font-medium",children:i})]})]})]})]})]})}function $Ae(){const{consultations:e}=bt(),n=(()=>{const r=[],a=new Date;for(let i=11;i>=0;i--){const o=new Date(a.getFullYear(),a.getMonth()-i,1),l=new Date(o.getFullYear(),o.getMonth(),1),c=new Date(o.getFullYear(),o.getMonth()+1,0),u=e.filter(m=>{const f=new Date(m.date);return f>=l&&f<=c}),d=u.reduce((m,f)=>m+(f.cost||0),0),h=u.length>0?d/u.length:0;r.push({month:o.toLocaleDateString("fr-FR",{month:"short",year:"2-digit"}),consultations:u.length,revenue:Math.round(d),averageRevenue:Math.round(h)})}return r})();return s.jsxs(ee,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(me,{className:"text-base font-medium",children:"Tendances des Consultations"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Pn,{className:"h-4 w-4 text-muted-foreground"}),s.jsx(cn,{className:"h-4 w-4 text-blue-600"})]})]}),s.jsxs(te,{children:[s.jsx("div",{className:"h-[300px] w-full",children:s.jsx(_i,{width:"100%",height:"100%",children:s.jsxs(xC,{data:n,margin:{top:5,right:30,left:20,bottom:5},children:[s.jsx(nc,{strokeDasharray:"3 3",className:"opacity-30"}),s.jsx(da,{dataKey:"month",axisLine:!1,tickLine:!1,className:"text-xs"}),s.jsx(ha,{axisLine:!1,tickLine:!1,className:"text-xs"}),s.jsx(Kn,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:(r,a)=>[a==="consultations"?r:`${r} €`,a==="consultations"?"Consultations":a==="revenue"?"Revenus":"Revenu moyen"]}),s.jsx(Ms,{type:"monotone",dataKey:"consultations",stackId:"1",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.6,strokeWidth:2})]})})}),s.jsx("div",{className:"flex items-center justify-between mt-4 text-sm",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),s.jsx("span",{className:"text-muted-foreground",children:"Nombre de consultations"})]})})]})]})}function RAe(){const{pets:e}=bt(),t=L.useMemo(()=>{const o=e.reduce((c,u)=>{const d=u.species||"Autre";return c[d]=(c[d]||0)+1,c},{}),l=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#84cc16","#f97316"];return Object.entries(o).map(([c,u],d)=>({name:c,value:u,color:l[d%l.length]}))},[e]),n=e.length,r=t.length>0?t[0]:null,a=e.length>0?e.reduce((o,l)=>o+(l.age||0),0)/e.length:0,i=o=>{switch(o.toLowerCase()){case"chien":case"dog":return s.jsx(PU,{className:"h-4 w-4"});case"chat":case"cat":return s.jsx(bU,{className:"h-4 w-4"});case"poisson":case"fish":return s.jsx(AU,{className:"h-4 w-4"});case"oiseau":case"bird":return s.jsx(yU,{className:"h-4 w-4"});default:return s.jsx(ft,{className:"h-4 w-4"})}};return s.jsxs(ee,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(me,{className:"text-base font-medium",children:"Répartition par Espèce"}),s.jsx(ft,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(te,{children:[s.jsx("div",{className:"h-[300px] w-full",children:s.jsx(_i,{width:"100%",height:"100%",children:s.jsxs(vC,{children:[s.jsx(ga,{data:t,cx:"50%",cy:"50%",labelLine:!1,label:({name:o,percent:l})=>`${o} ${(l*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:t.map((o,l)=>s.jsx(Hd,{fill:o.color},`cell-${l}`))}),s.jsx(Kn,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"6px"},formatter:o=>[o,"Animaux"]})]})})}),s.jsxs("div",{className:"mt-4 space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Total d'animaux"}),s.jsx("span",{className:"font-medium",children:n})]}),r&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Espèce la plus commune"}),s.jsxs("div",{className:"flex items-center gap-2",children:[i(r.name),s.jsx("span",{className:"font-medium",children:r.name})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Âge moyen"}),s.jsxs("span",{className:"font-medium",children:[a.toFixed(1)," ans"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-sm font-medium",children:"Répartition détaillée"}),t.slice(0,5).map((o,l)=>s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[i(o.name),s.jsx("span",{children:o.name})]}),s.jsxs("span",{className:"text-muted-foreground",children:[o.value," (",(o.value/n*100).toFixed(1),"%)"]})]},l))]})]})]})]})}const LAe=()=>s.jsxs("div",{className:"container mx-auto px-2 sm:px-4 lg:px-6 py-4 sm:py-6 lg:py-8 space-y-4 sm:space-y-6 lg:space-y-8",children:[s.jsx(Mee,{}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-lg sm:text-xl lg:text-2xl font-bold mb-2 sm:mb-4 lg:mb-6",children:"KPI en Temps Réel"}),s.jsx(TAe,{})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-4 lg:gap-6",children:[s.jsx(AAe,{}),s.jsx(kAe,{}),s.jsx(PAe,{})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-lg sm:text-xl lg:text-2xl font-bold mb-2 sm:mb-4 lg:mb-6",children:"Vue d'ensemble"}),s.jsx(Iee,{})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-lg sm:text-xl lg:text-2xl font-bold mb-2 sm:mb-4 lg:mb-6",children:"Analyses et Tendances"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 sm:gap-4 lg:gap-6",children:[s.jsx(_w,{children:s.jsx(EAe,{})}),s.jsx(OAe,{})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-4 lg:gap-6",children:[s.jsx(DAe,{}),s.jsx(MAe,{}),s.jsx(IAe,{})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 sm:gap-4 lg:gap-6",children:[s.jsx($Ae,{}),s.jsx(RAe,{})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 sm:gap-4 lg:gap-6",children:[s.jsx(Fee,{}),s.jsx(SAe,{})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-lg sm:text-xl lg:text-2xl font-bold mb-2 sm:mb-4 lg:mb-6",children:"Activité Récente"}),s.jsx(_Ae,{})]}),s.jsx(_w,{children:s.jsx("section",{children:s.jsx("h2",{className:"text-lg sm:text-xl lg:text-2xl font-bold mb-2 sm:mb-4 lg:mb-6",children:"Admin Dashboard"})})})]});var C8="AlertDialog",[FAe,DTe]=Yr(C8,[VR]),Ii=VR(),_8=e=>{const{__scopeAlertDialog:t,...n}=e,r=Ii(t);return s.jsx(s3,{...r,...n,modal:!0})};_8.displayName=C8;var BAe="AlertDialogTrigger",zAe=j.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=Ii(n);return s.jsx(a3,{...a,...r,ref:t})});zAe.displayName=BAe;var VAe="AlertDialogPortal",P8=e=>{const{__scopeAlertDialog:t,...n}=e,r=Ii(t);return s.jsx(i3,{...r,...n})};P8.displayName=VAe;var qAe="AlertDialogOverlay",A8=j.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=Ii(n);return s.jsx(YS,{...a,...r,ref:t})});A8.displayName=qAe;var fu="AlertDialogContent",[UAe,WAe]=FAe(fu),HAe=XM("AlertDialogContent"),k8=j.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...a}=e,i=Ii(n),o=j.useRef(null),l=xt(t,o),c=j.useRef(null);return s.jsx(UJ,{contentName:fu,titleName:T8,docsSlug:"alert-dialog",children:s.jsx(UAe,{scope:n,cancelRef:c,children:s.jsxs(QS,{role:"alertdialog",...i,...a,ref:l,onOpenAutoFocus:ke(a.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[s.jsx(HAe,{children:r}),s.jsx(GAe,{contentRef:o})]})})})});k8.displayName=fu;var T8="AlertDialogTitle",E8=j.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=Ii(n);return s.jsx(XS,{...a,...r,ref:t})});E8.displayName=T8;var O8="AlertDialogDescription",D8=j.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=Ii(n);return s.jsx(JS,{...a,...r,ref:t})});D8.displayName=O8;var KAe="AlertDialogAction",M8=j.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,a=Ii(n);return s.jsx(ZS,{...a,...r,ref:t})});M8.displayName=KAe;var I8="AlertDialogCancel",$8=j.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:a}=WAe(I8,n),i=Ii(n),o=xt(t,a);return s.jsx(ZS,{...i,...r,ref:o})});$8.displayName=I8;var GAe=({contentRef:e})=>{const t=`\`${fu}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${fu}\` by passing a \`${O8}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${fu}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return j.useEffect(()=>{var r;document.getElementById((r=e.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},YAe=_8,QAe=P8,R8=A8,L8=k8,F8=M8,B8=$8,z8=E8,V8=D8;const jC=YAe,XAe=QAe,q8=j.forwardRef(({className:e,...t},n)=>s.jsx(R8,{className:De("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));q8.displayName=R8.displayName;const Hy=j.forwardRef(({className:e,...t},n)=>s.jsxs(XAe,{children:[s.jsx(q8,{}),s.jsx(L8,{ref:n,className:De("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Hy.displayName=L8.displayName;const Ky=({className:e,...t})=>s.jsx("div",{className:De("flex flex-col space-y-2 text-center sm:text-left",e),...t});Ky.displayName="AlertDialogHeader";const Gy=({className:e,...t})=>s.jsx("div",{className:De("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Gy.displayName="AlertDialogFooter";const Yy=j.forwardRef(({className:e,...t},n)=>s.jsx(z8,{ref:n,className:De("text-lg font-semibold",e),...t}));Yy.displayName=z8.displayName;const Qy=j.forwardRef(({className:e,...t},n)=>s.jsx(V8,{ref:n,className:De("text-sm text-muted-foreground",e),...t}));Qy.displayName=V8.displayName;const Xy=j.forwardRef(({className:e,...t},n)=>s.jsx(F8,{ref:n,className:De(kS(),e),...t}));Xy.displayName=F8.displayName;const Jy=j.forwardRef(({className:e,...t},n)=>s.jsx(B8,{ref:n,className:De(kS({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Jy.displayName=B8.displayName;const gc=e=>{const{settings:t}=At();return{currentView:t.displayPreferences[e],isTableView:t.displayPreferences[e]==="table",isCardsView:t.displayPreferences[e]==="cards"}},JAe=(e,t)=>{const n=t.filter(i=>i.client_id===e.id),r=Math.abs(e.id.split("").reduce((i,o)=>(i=(i<<5)-i+o.charCodeAt(0),i&i),0)),a=n.map(i=>({id:Math.abs(i.id.split("").reduce((l,c)=>(l=(l<<5)-l+c.charCodeAt(0),l&l),0)),name:i.name,type:i.species,breed:i.breed||""}));return{id:r,name:`${e.first_name} ${e.last_name}`,firstName:e.first_name,lastName:e.last_name,email:e.email||"",phone:e.phone||e.mobile_phone||"",address:e.address||"",city:e.city,pets:a,lastVisit:new Date(e.updated_at).toLocaleDateString("fr-FR"),totalVisits:0,dbId:e.id}},ZAe=()=>{const{data:e=[],isLoading:t}=ir(),{data:n=[],isLoading:r}=or(),a=nee(),i=ree(),{toast:o}=it(),{data:l=[],isLoading:c}=Ko(),{data:u=[],isLoading:d}=X3(),h=e.map(M=>JAe(M,n)),{currentView:m}=gc("clients"),[f,v]=j.useState(""),[p,g]=j.useState("all"),[x,y]=j.useState(m),[b,C]=j.useState(!1),[w,N]=j.useState(null),[S,_]=j.useState(!1),[P,A]=j.useState(!1),[E,k]=j.useState(!1),[I,D]=j.useState(null),[U,B]=j.useState({first_name:"",last_name:"",email:"",phone:"",mobile_phone:"",address:"",city:"Rabat",postal_code:"",country:"Maroc",notes:"",client_type:"particulier"}),K=h.filter(M=>{const ue=M.name.toLowerCase().includes(f.toLowerCase())||M.email.toLowerCase().includes(f.toLowerCase())||M.city&&M.city.toLowerCase().includes(f.toLowerCase()),ve=p==="all"||M.pets.some(ce=>ce.type===p);return ue&&ve}),T=M=>{N(M),_(!0)},$=M=>{N(M),B({first_name:M.firstName,last_name:M.lastName,email:M.email,phone:M.phone,mobile_phone:"",address:M.address,city:M.city,postal_code:"",country:"Maroc",notes:"",client_type:"particulier"}),A(!0)},G=M=>{D(M),k(!0)},Q=async()=>{if(I)try{await i.mutateAsync(I.dbId),o({title:"Client supprimé",description:`${I.name} a été supprimé avec succès`}),k(!1),D(null)}catch(M){o({title:"Erreur",description:M instanceof Error?M.message:"Erreur lors de la suppression du client",variant:"destructive"})}},ne=()=>{w&&B({first_name:w.firstName,last_name:w.lastName,email:w.email,phone:w.phone,mobile_phone:"",address:w.address,city:w.city,postal_code:"",country:"Maroc",notes:"",client_type:"particulier"}),_(!1),A(!0)},oe=async M=>{if(M.preventDefault(),!w||!U.first_name||!U.last_name){o({title:"Erreur",description:"Le prénom et le nom sont obligatoires",variant:"destructive"});return}try{await a.mutateAsync({id:w.dbId,data:U}),o({title:"Client modifié",description:`${U.first_name} ${U.last_name} a été modifié avec succès`}),A(!1),N(null)}catch(ue){o({title:"Erreur",description:ue instanceof Error?ue.message:"Erreur lors de la modification du client",variant:"destructive"})}};return t||r?s.jsx("div",{className:"container mx-auto px-6 py-8",children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Chargement des clients..."})]})})}):s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-8 space-y-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Gestion des Clients"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Gérez tous vos clients et leurs informations"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[s.jsxs(R,{size:"sm",variant:x==="cards"?"default":"outline",onClick:()=>y("cards"),className:"gap-2 w-full sm:w-auto",children:[s.jsx(Eo,{className:"h-4 w-4"}),"Cartes"]}),s.jsxs(R,{size:"sm",variant:x==="table"?"default":"outline",onClick:()=>y("table"),className:"gap-2 w-full sm:w-auto",children:[s.jsx(Ni,{className:"h-4 w-4"}),"Tableau"]}),s.jsxs(R,{className:"gap-2 medical-glow w-full sm:w-auto",onClick:()=>C(!0),children:[s.jsx(Ze,{className:"h-4 w-4"}),"Nouveau Client"]})]})]}),s.jsxs(ee,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(Lo,{className:"h-5 w-5"}),"Rechercher un client"]})}),s.jsx(te,{children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsx(Y,{placeholder:"Rechercher par nom, email ou ville...",value:f,onChange:M=>v(M.target.value),className:"flex-1"}),s.jsxs(je,{value:p,onValueChange:g,children:[s.jsx(xe,{className:"w-full sm:w-[200px]",children:s.jsx(be,{placeholder:"Filtrer par espèce"})}),s.jsxs(ye,{children:[s.jsx(z,{value:"all",children:"Toutes espèces"}),l.map(M=>s.jsx(z,{value:M,children:M},M))]})]})]})})]}),x==="cards"?s.jsx("div",{className:"grid gap-6",children:K.map(M=>s.jsx(ee,{className:"card-hover",children:s.jsx(te,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-4 flex-1",children:[s.jsx(Jn,{className:"h-12 w-12 sm:h-16 sm:w-16 mx-auto sm:mx-0",children:s.jsx(Zn,{className:"bg-primary text-primary-foreground text-sm sm:text-lg",children:M.name.split(" ").map(ue=>ue[0]).join("")})}),s.jsxs("div",{className:"space-y-3 flex-1 text-center sm:text-left",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg sm:text-xl font-semibold",children:M.name}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 mt-2 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-1",children:[s.jsx(wd,{className:"h-3 w-3"}),M.email]}),s.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-1",children:[s.jsx(Iu,{className:"h-3 w-3"}),M.phone]}),s.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-1",children:[s.jsx(ic,{className:"h-3 w-3"}),M.address]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h4",{className:"font-medium flex items-center justify-center sm:justify-start gap-2",children:[s.jsx(ft,{className:"h-4 w-4 text-primary"}),"Animaux (",M.pets.length,")"]}),s.jsx("div",{className:"flex gap-2 flex-wrap justify-center sm:justify-start",children:M.pets.length>0?M.pets.map((ue,ve)=>s.jsxs(Pe,{variant:"secondary",className:"gap-1",children:[ue.name," - ",ue.type," ",ue.breed&&`(${ue.breed})`]},ue.id||ve)):s.jsx("span",{className:"text-sm text-muted-foreground",children:"Aucun animal enregistré"})})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-6 text-sm justify-center sm:justify-start",children:[s.jsxs("span",{children:[s.jsx("strong",{children:"Dernière visite:"})," ",M.lastVisit]}),s.jsxs("span",{children:[s.jsx("strong",{children:"Total visites:"})," ",M.totalVisits]})]})]})]}),s.jsxs("div",{className:"flex gap-2 justify-center sm:justify-end",children:[s.jsxs(R,{size:"sm",variant:"outline",className:"gap-2",onClick:()=>T(M),children:[s.jsx(An,{className:"h-4 w-4"}),"Voir"]}),s.jsxs(R,{size:"sm",variant:"outline",className:"gap-2",onClick:()=>$(M),children:[s.jsx($t,{className:"h-4 w-4"}),"Modifier"]}),s.jsxs(R,{size:"sm",variant:"outline",className:"gap-2 text-destructive hover:text-destructive-foreground hover:bg-destructive",onClick:()=>G(M),children:[s.jsx(Vt,{className:"h-4 w-4"}),"Supprimer"]})]})]})})},M.id))}):s.jsx(ee,{children:s.jsx(te,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"border-b",children:s.jsxs("tr",{className:"text-left",children:[s.jsx("th",{className:"p-2 sm:p-4 font-medium",children:"Client"}),s.jsx("th",{className:"p-2 sm:p-4 font-medium hidden sm:table-cell",children:"Contact"}),s.jsx("th",{className:"p-2 sm:p-4 font-medium hidden md:table-cell",children:"Animaux"}),s.jsx("th",{className:"p-2 sm:p-4 font-medium hidden lg:table-cell",children:"Dernière visite"}),s.jsx("th",{className:"p-2 sm:p-4 font-medium hidden lg:table-cell",children:"Total visites"}),s.jsx("th",{className:"p-2 sm:p-4 font-medium",children:"Actions"})]})}),s.jsx("tbody",{children:K.map(M=>s.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[s.jsx("td",{className:"p-2 sm:p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Jn,{className:"h-8 w-8 sm:h-10 sm:w-10",children:s.jsx(Zn,{className:"bg-primary text-primary-foreground text-xs sm:text-sm",children:M.name.split(" ").map(ue=>ue[0]).join("")})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-sm sm:text-base",children:M.name}),s.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:M.address})]})]})}),s.jsx("td",{className:"p-2 sm:p-4 hidden sm:table-cell",children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-xs sm:text-sm",children:M.email}),s.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:M.phone})]})}),s.jsx("td",{className:"p-2 sm:p-4 hidden md:table-cell",children:s.jsx("div",{className:"flex gap-1 flex-wrap",children:M.pets.length>0?M.pets.map((ue,ve)=>s.jsx(Pe,{variant:"secondary",className:"text-xs",children:ue.name},ue.id||ve)):s.jsx("span",{className:"text-xs text-muted-foreground",children:"Aucun"})})}),s.jsx("td",{className:"p-2 sm:p-4 hidden lg:table-cell text-sm",children:M.lastVisit}),s.jsx("td",{className:"p-2 sm:p-4 hidden lg:table-cell text-sm",children:M.totalVisits}),s.jsx("td",{className:"p-2 sm:p-4",children:s.jsxs("div",{className:"flex gap-1",children:[s.jsx(R,{size:"sm",variant:"outline",onClick:()=>T(M),children:s.jsx(An,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),s.jsx(R,{size:"sm",variant:"outline",onClick:()=>$(M),children:s.jsx($t,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),s.jsx(R,{size:"sm",variant:"outline",className:"text-destructive hover:text-destructive-foreground hover:bg-destructive",onClick:()=>G(M),children:s.jsx(Vt,{className:"h-3 w-3 sm:h-4 sm:w-4"})})]})})]},M.id))})]})})})}),s.jsx(Qx,{open:b,onOpenChange:C}),w&&S&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(ee,{className:"w-full max-w-2xl mx-auto max-h-[90vh] overflow-y-auto",children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center justify-between",children:["Profil Client - ",w.name,s.jsx(R,{variant:"ghost",size:"sm",onClick:()=>_(!1),children:"✕"})]})}),s.jsxs(te,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Nom complet"}),s.jsx("p",{children:w.name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Email"}),s.jsx("p",{children:w.email})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Téléphone"}),s.jsx("p",{children:w.phone})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Ville"}),s.jsx("p",{children:w.city})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium",children:"Adresse"}),s.jsx("p",{children:w.address})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-sm font-medium",children:["Animaux (",w.pets.length,")"]}),s.jsx("div",{className:"flex gap-2 flex-wrap mt-2",children:w.pets.map((M,ue)=>s.jsxs(Pe,{variant:"secondary",children:[M.name," - ",M.type," ",M.breed&&`(${M.breed})`]},M.id||ue))})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-4",children:[s.jsx(R,{onClick:()=>ne(),className:"w-full sm:w-auto",children:"Modifier"}),s.jsx(R,{variant:"outline",onClick:()=>{_(!1),w&&G(w)},className:"w-full sm:w-auto text-destructive hover:text-destructive-foreground hover:bg-destructive",children:"Supprimer"}),s.jsx(R,{variant:"outline",onClick:()=>_(!1),className:"w-full sm:w-auto",children:"Fermer"})]})]})]})}),w&&P&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs(ee,{className:"w-full max-w-2xl mx-auto max-h-[90vh] overflow-y-auto",children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center justify-between",children:["Modifier Client - ",w.name,s.jsx(R,{variant:"ghost",size:"sm",onClick:()=>A(!1),children:"✕"})]})}),s.jsx(te,{children:s.jsxs("form",{onSubmit:oe,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"edit_first_name",children:"Prénom *"}),s.jsx(Y,{id:"edit_first_name",value:U.first_name,onChange:M=>B(ue=>({...ue,first_name:M.target.value})),placeholder:"Prénom du client",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"edit_last_name",children:"Nom *"}),s.jsx(Y,{id:"edit_last_name",value:U.last_name,onChange:M=>B(ue=>({...ue,last_name:M.target.value})),placeholder:"Nom du client",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"edit_email",children:"Email"}),s.jsx(Y,{id:"edit_email",type:"email",value:U.email||"",onChange:M=>B(ue=>({...ue,email:M.target.value})),placeholder:"email@exemple.com"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"edit_phone",children:"Téléphone"}),s.jsx(Y,{id:"edit_phone",value:U.phone||"",onChange:M=>B(ue=>({...ue,phone:M.target.value})),placeholder:"06 12 34 56 78"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"edit_mobile_phone",children:"Téléphone mobile"}),s.jsx(Y,{id:"edit_mobile_phone",value:U.mobile_phone||"",onChange:M=>B(ue=>({...ue,mobile_phone:M.target.value})),placeholder:"06 12 34 56 78"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"edit_city",children:"Ville"}),s.jsx(Y,{id:"edit_city",value:U.city||"Rabat",onChange:M=>B(ue=>({...ue,city:M.target.value})),placeholder:"Ville"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"edit_address",children:"Adresse"}),s.jsx(Y,{id:"edit_address",value:U.address||"",onChange:M=>B(ue=>({...ue,address:M.target.value})),placeholder:"Adresse complète"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"edit_postal_code",children:"Code postal"}),s.jsx(Y,{id:"edit_postal_code",value:U.postal_code||"",onChange:M=>B(ue=>({...ue,postal_code:M.target.value})),placeholder:"10000"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"edit_client_type",children:"Type de client"}),s.jsxs(je,{value:U.client_type||"particulier",onValueChange:M=>B(ue=>({...ue,client_type:M})),children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Type de client"})}),s.jsx(ye,{children:u.map(M=>s.jsx(z,{value:M.toLowerCase(),children:M},M))})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"edit_notes",children:"Notes"}),s.jsx(Ue,{id:"edit_notes",value:U.notes||"",onChange:M=>B(ue=>({...ue,notes:M.target.value})),placeholder:"Notes supplémentaires...",rows:3})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 pt-4",children:[s.jsx(R,{type:"submit",disabled:a.isPending,className:"w-full sm:flex-1",children:a.isPending?s.jsxs(s.Fragment,{children:[s.jsx(Qn,{className:"h-4 w-4 animate-spin mr-2"}),"Modification..."]}):"Enregistrer"}),s.jsx(R,{type:"button",variant:"outline",onClick:()=>A(!1),disabled:a.isPending,className:"w-full sm:flex-1",children:"Annuler"})]})]})})]})}),s.jsx(jC,{open:E,onOpenChange:k,children:s.jsxs(Hy,{children:[s.jsxs(Ky,{children:[s.jsx(Yy,{children:"Confirmer la suppression"}),s.jsxs(Qy,{children:["Êtes-vous sûr de vouloir supprimer le client ",s.jsx("strong",{children:I==null?void 0:I.name})," ? Cette action est irréversible et supprimera définitivement toutes les données associées à ce client."]})]}),s.jsxs(Gy,{children:[s.jsx(Jy,{children:"Annuler"}),s.jsx(Xy,{onClick:Q,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",disabled:i.isPending,children:i.isPending?s.jsxs(s.Fragment,{children:[s.jsx(Qn,{className:"h-4 w-4 animate-spin mr-2"}),"Suppression..."]}):"Supprimer"})]})]})})]})},eke=()=>s.jsx(ZAe,{});function tke({open:e,onOpenChange:t,pet:n}){const[r,a]=j.useState("overview");if(!n)return null;const i=n.birthDate?Ru(n.birthDate):"Non renseigné",o=n.weight?`${n.weight} kg`:"Non renseigné";return s.jsx(Qe,{open:e,onOpenChange:t,children:s.jsxs(Ye,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsx(Xe,{children:s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(_r,{className:"h-5 w-5"}),"Dossier Médical - ",n.name," (Propriétaire: ",n.owner,")"]})}),s.jsxs(Ei,{value:r,onValueChange:a,className:"w-full",children:[s.jsxs(Ha,{className:"grid w-full grid-cols-6",children:[s.jsxs(Mt,{value:"overview",className:"flex items-center gap-1",children:[s.jsx(oa,{className:"h-4 w-4"}),"Vue d'ensemble"]}),s.jsxs(Mt,{value:"historique",className:"flex items-center gap-1",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Historique"]}),s.jsxs(Mt,{value:"prescriptions",className:"flex items-center gap-1",children:[s.jsx(_r,{className:"h-4 w-4"}),"Prescriptions"]}),s.jsxs(Mt,{value:"vaccinations",className:"flex items-center gap-1",children:[s.jsx(Vr,{className:"h-4 w-4"}),"Vaccinations"]}),s.jsxs(Mt,{value:"antiparasites",className:"flex items-center gap-1",children:[s.jsx(Hn,{className:"h-4 w-4"}),"Antiparasites"]}),s.jsxs(Mt,{value:"pedigree",className:"flex items-center gap-1",children:[s.jsx(Og,{className:"h-4 w-4"}),"Pedigree"]})]}),s.jsxs(It,{value:"overview",className:"space-y-6",children:[s.jsxs(ee,{children:[s.jsx(he,{children:s.jsx(me,{children:"Informations générales"})}),s.jsx(te,{children:s.jsxs("div",{className:"flex items-start gap-6",children:[s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx(Jn,{className:"h-32 w-32",children:n.photo?s.jsx(zu,{src:n.photo,alt:n.name}):s.jsx(Zn,{className:"bg-primary-glow text-primary-foreground",children:s.jsx(ft,{className:"h-16 w-16"})})}),s.jsxs(R,{variant:"outline",size:"sm",className:"gap-2",children:[s.jsx(Mu,{className:"h-4 w-4"}),"Ajouter photo"]})]}),s.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg",children:n.name}),s.jsxs("div",{className:"space-y-2 mt-4",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Type:"})," ",n.type]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Race:"})," ",n.breed||"Non renseignée"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Sexe:"})," ",n.gender==="male"?"Mâle":n.gender==="female"?"Femelle":"Inconnu"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Âge:"})," ",i]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Date de naissance:"})," ",n.birthDate||"Non renseignée"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Couleur:"})," ",n.color||"Non renseignée"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Poids actuel:"})," ",o]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"N° puce:"})," ",n.microchip||"Non renseigné"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Statut de santé:"}),s.jsx(Pe,{variant:n.status==="healthy"?"default":n.status==="treatment"?"secondary":"destructive",children:n.status==="healthy"?"En bonne santé":n.status==="treatment"?"En traitement":"Urgent"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Xn,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:"Propriétaire:"})," ",n.owner]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Dernière visite:"})," ",n.lastVisit||"Aucune"]})]})]})]})})]}),s.jsxs(ee,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between",children:[s.jsx(me,{children:"Galerie photos"}),s.jsxs(R,{size:"sm",className:"gap-2",children:[s.jsx(Ze,{className:"h-4 w-4"}),"Ajouter une photo"]})]}),s.jsx(te,{children:s.jsxs("div",{className:"border-2 border-dashed border-muted-foreground/25 rounded-lg p-8 text-center",children:[s.jsx(Mu,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucune photo disponible"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Ajoutez des photos de l'animal pour enrichir son dossier"})]})})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsx(ee,{children:s.jsx(te,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Mg,{className:"h-5 w-5 text-blue-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Poids actuel"}),s.jsx("p",{className:"text-lg font-bold",children:o}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"-28.2kg"})]})]})})}),s.jsx(ee,{children:s.jsx(te,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(vm,{className:"h-5 w-5 text-red-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Température"}),s.jsx("p",{className:"text-lg font-bold",children:"38.5°C"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Moy: 38.5°C"})]})]})})}),s.jsx(ee,{children:s.jsx(te,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Pn,{className:"h-5 w-5 text-green-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Consultations"}),s.jsx("p",{className:"text-lg font-bold",children:"1"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Dernière: 15/01/2024"})]})]})})}),s.jsx(ee,{children:s.jsx(te,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Hn,{className:"h-5 w-5 text-yellow-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Alertes"}),s.jsx("p",{className:"text-lg font-bold",children:"1"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"À traiter"})]})]})})})]}),s.jsxs(ee,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(Ge,{className:"h-5 w-5"}),"Prochain suivi recommandé"]})}),s.jsx(te,{children:s.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/20 p-4 rounded-lg",children:[s.jsx("p",{className:"font-medium",children:"Contrôle dans 3 an"}),s.jsxs(R,{size:"sm",className:"mt-2 gap-2",children:[s.jsx(Ze,{className:"h-4 w-4"}),"Planifier"]})]})})]}),s.jsxs(ee,{children:[s.jsx(he,{children:s.jsx(me,{className:"text-red-600",children:"Alertes importantes"})}),s.jsxs(te,{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-red-50 dark:bg-red-950/20 rounded-lg",children:[s.jsx(Hn,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:"Contrôle de routine recommandé"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Dernière consultation il y a 20 mois"})]}),s.jsx(R,{size:"sm",variant:"outline",children:"Planifier consultation"})]}),s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-red-50 dark:bg-red-950/20 rounded-lg",children:[s.jsx(Hn,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:"Vaccination en retard"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"DHPP - 247 jour(s) de retard"})]}),s.jsx(R,{size:"sm",variant:"outline",children:"Planifier vaccination"})]}),s.jsxs("div",{className:"flex items-start gap-3 p-3 bg-red-50 dark:bg-red-950/20 rounded-lg",children:[s.jsx(Hn,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium",children:"Vaccination en retard"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Lyme - 512 jour(s) de retard"})]}),s.jsx(R,{size:"sm",variant:"outline",children:"Planifier vaccination"})]})]})]})]}),s.jsx(It,{value:"historique",className:"space-y-4",children:s.jsxs(ee,{children:[s.jsx(he,{children:s.jsx(me,{children:"Historique médical"})}),s.jsx(te,{children:s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Ge,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Pas assez de données pour afficher les tendances"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Ajoutez plus de consultations avec poids et température"})]})})]})}),s.jsx(It,{value:"prescriptions",className:"space-y-4",children:s.jsxs(ee,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between",children:[s.jsx(me,{children:"Prescriptions"}),s.jsxs(R,{size:"sm",className:"gap-2",children:[s.jsx(Ze,{className:"h-4 w-4"}),"Nouvelle prescription"]})]}),s.jsx(te,{children:s.jsxs("div",{className:"text-center py-8",children:[s.jsx(_r,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucune prescription disponible"})]})})]})}),s.jsx(It,{value:"vaccinations",className:"space-y-4",children:s.jsxs(ee,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between",children:[s.jsx(me,{children:"Vaccinations"}),s.jsxs(R,{size:"sm",className:"gap-2",children:[s.jsx(Ze,{className:"h-4 w-4"}),"Nouvelle vaccination"]})]}),s.jsx(te,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm font-medium",children:[s.jsx("div",{children:"Rage"}),s.jsx("div",{children:"DHPP"}),s.jsx("div",{children:"Lyme"})]}),s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Vr,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucune vaccination enregistrée"})]})]})})]})}),s.jsx(It,{value:"antiparasites",className:"space-y-4",children:s.jsxs(ee,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between",children:[s.jsx(me,{children:"Antiparasitaires"}),s.jsxs(R,{size:"sm",className:"gap-2",children:[s.jsx(Ze,{className:"h-4 w-4"}),"Nouveau traitement"]})]}),s.jsx(te,{children:s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Hn,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucun traitement antiparasitaire enregistré"})]})})]})}),s.jsx(It,{value:"pedigree",className:"space-y-4",children:s.jsxs(ee,{children:[s.jsx(he,{children:s.jsx(me,{children:"Informations de pedigree"})}),s.jsx(te,{children:s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Og,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucune information de pedigree disponible"})]})})]})})]}),s.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[s.jsx("div",{className:"flex gap-2",children:s.jsxs(R,{variant:"outline",size:"sm",children:[s.jsx(_r,{className:"h-4 w-4 mr-2"}),"Voir Dossier Médical"]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(R,{variant:"outline",onClick:()=>t(!1),children:"Fermer"}),s.jsxs(R,{children:[s.jsx($t,{className:"h-4 w-4 mr-2"}),"Modifier"]})]})]}),s.jsxs("div",{className:"mt-4 p-4 bg-muted/50 rounded-lg",children:[s.jsx("p",{className:"text-sm font-medium",children:"Animal modifié"}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Les informations de ",n.name," ont été mises à jour."]})]})]})})}function nke({pet:e,consultations:t}){var C,w,N;const n=[...t].sort((S,_)=>new Date(_.date).getTime()-new Date(S.date).getTime()),r=n.filter(S=>S.weight).map(S=>({date:S.date,weight:parseFloat(S.weight)})),a=n.filter(S=>S.temperature).map(S=>({date:S.date,temperature:parseFloat(S.temperature)})),i=((C=r[0])==null?void 0:C.weight)||0,o=((w=r[1])==null?void 0:w.weight)||0,l=i-o,c=l>0?"up":l<0?"down":"stable",u=((N=a[0])==null?void 0:N.temperature)||0,d=a.length>0?a.reduce((S,_)=>S+_.temperature,0)/a.length:0,h=a.length>0?Math.min(...a.map(S=>S.temperature)):0,m=a.length>0?Math.max(...a.map(S=>S.temperature)):0,f=t.length,v=new Date().getMonth(),p=new Date().getFullYear(),g=t.filter(S=>{const _=new Date(S.date);return _.getMonth()===v&&_.getFullYear()===p}).length,x=n[0],y=x?Math.floor((new Date().getTime()-new Date(x.date).getTime())/(1e3*60*60*24)):null,b=[];return u>39.5?b.push({type:"danger",message:"Température élevée",icon:bn}):u<37.5&&b.push({type:"warning",message:"Température basse",icon:bn}),l<-2&&b.push({type:"warning",message:"Perte de poids",icon:Vl}),y&&y>180&&b.push({type:"info",message:"Contrôle recommandé",icon:Ge}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Statistiques médicales"}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[s.jsxs(ee,{children:[s.jsx(he,{className:"pb-2",children:s.jsxs(me,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(Mg,{className:"h-4 w-4"}),"Poids actuel"]})}),s.jsxs(te,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[i,"kg"]}),l!==0&&s.jsxs("div",{className:"flex items-center gap-1 text-sm mt-1",children:[c==="up"?s.jsx(cn,{className:"h-3 w-3 text-green-600"}):c==="down"?s.jsx(Vl,{className:"h-3 w-3 text-red-600"}):s.jsx(TU,{className:"h-3 w-3 text-gray-600"}),s.jsxs("span",{className:c==="up"?"text-green-600":c==="down"?"text-red-600":"text-gray-600",children:[Math.abs(l),"kg"]})]})]})]}),s.jsxs(ee,{children:[s.jsx(he,{className:"pb-2",children:s.jsxs(me,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(vm,{className:"h-4 w-4"}),"Température"]})}),s.jsxs(te,{children:[s.jsxs("div",{className:"text-2xl font-bold",children:[u,"°C"]}),s.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Moy: ",d.toFixed(1),"°C"]}),a.length>1&&s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Min: ",h,"°C | Max: ",m,"°C"]})]})]}),s.jsxs(ee,{children:[s.jsx(he,{className:"pb-2",children:s.jsxs(me,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(oa,{className:"h-4 w-4"}),"Consultations"]})}),s.jsxs(te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:f}),s.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Ce mois: ",g]}),x&&s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Dernière: ",new Date(x.date).toLocaleDateString("fr-FR")]})]})]}),s.jsxs(ee,{children:[s.jsx(he,{className:"pb-2",children:s.jsxs(me,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(bn,{className:"h-4 w-4"}),"Alertes"]})}),s.jsxs(te,{children:[s.jsx("div",{className:"text-2xl font-bold",children:b.length}),s.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:b.length>0?"À traiter":"Aucune"}),b.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:b.slice(0,2).map((S,_)=>s.jsx(Pe,{variant:"outline",className:"text-xs",children:S.message},_))})]})]})]}),b.length>0&&s.jsxs(ee,{className:"border-destructive/20",children:[s.jsx(he,{children:s.jsx(me,{className:"text-destructive text-base",children:"Alertes médicales"})}),s.jsx(te,{children:s.jsx("div",{className:"space-y-2",children:b.map((S,_)=>s.jsxs("div",{className:"flex items-center gap-3 p-2 bg-destructive/5 rounded",children:[s.jsx(S.icon,{className:`h-4 w-4 ${S.type==="danger"?"text-destructive":S.type==="warning"?"text-yellow-600":"text-blue-600"}`}),s.jsx("span",{className:"text-sm font-medium",children:S.message})]},_))})})]}),r.length>1||a.length>1?s.jsxs(ee,{children:[s.jsx(he,{children:s.jsx(me,{className:"text-base",children:"Tendances"})}),s.jsx(te,{children:s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.length>1&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-2",children:"Évolution du poids"}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Poids initial:"}),s.jsxs("span",{children:[r[r.length-1].weight,"kg"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Poids actuel:"}),s.jsxs("span",{children:[r[0].weight,"kg"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Évolution totale:"}),s.jsxs("span",{className:r[0].weight>r[r.length-1].weight?"text-green-600":"text-red-600",children:[r[0].weight-r[r.length-1].weight,"kg"]})]})]})]}),a.length>1&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-2",children:"Évolution de la température"}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Température moyenne:"}),s.jsxs("span",{children:[d.toFixed(1),"°C"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Variation:"}),s.jsxs("span",{children:[m-h,"°C"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Stabilité:"}),s.jsx("span",{className:m-h<1?"text-green-600":"text-yellow-600",children:m-h<1?"Stable":"Variable"})]})]})]})]})})]}):s.jsx(ee,{children:s.jsxs(te,{className:"p-6 text-center text-muted-foreground",children:[s.jsx(oa,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground/50"}),s.jsx("p",{children:"Pas assez de données pour afficher les tendances"}),s.jsx("p",{className:"text-sm",children:"Ajoutez plus de consultations avec poids et température"})]})})]})}const hO={healthy:"bg-secondary text-secondary-foreground",treatment:"bg-accent text-accent-foreground",urgent:"bg-destructive text-destructive-foreground"},rke=(e,t)=>{const n=t.find(o=>o.id===e.client_id),r=n?`${n.first_name} ${n.last_name}`:"Propriétaire inconnu",a=Math.abs(e.id.split("").reduce((o,l)=>(o=(o<<5)-o+l.charCodeAt(0),o&o),0)),i=Math.abs(e.client_id.split("").reduce((o,l)=>(o=(o<<5)-o+l.charCodeAt(0),o&o),0));return{id:a,name:e.name,type:e.species,breed:e.breed||"",gender:e.sex==="Mâle"?"male":e.sex==="Femelle"?"female":void 0,birthDate:e.birth_date||"",weight:e.weight?e.weight.toString():"",color:e.color||"",microchip:e.microchip_number||"",medicalNotes:e.notes||"",photo:e.photo_url||"",ownerId:i,owner:r,status:e.status==="vivant"?"healthy":e.status==="décédé"?"urgent":"treatment",lastVisit:e.updated_at?new Date(e.updated_at).toLocaleDateString("fr-FR"):"Jamais",nextAppointment:void 0,vaccinations:[],dbId:e.id,dbClientId:e.client_id}},ske=()=>{var wt;const{data:e=[],isLoading:t}=or(),{data:n=[],isLoading:r}=ir(),{data:a}=jee(),i=aee(),o=iee(),{data:l=xn.animal_species}=Ko(),{data:c=xn.animal_breeds}=Y3(),{data:u=xn.animal_colors}=Q3(),d=e.map(ae=>rke(ae,n)),{data:h=[]}=Md(),{data:m=[]}=Id(),f=j.useCallback(ae=>{var nt;const Ee=typeof ae=="string"?ae:(nt=d.find(pt=>pt.id===ae))==null?void 0:nt.dbId;return Ee?h.filter(pt=>pt.animal_id===Ee):[]},[d,h]),v=j.useCallback(ae=>{var nt;const Ee=typeof ae=="string"?ae:(nt=d.find(pt=>pt.id===ae))==null?void 0:nt.dbId;return Ee?m.filter(pt=>pt.animal_id===Ee):[]},[d,m]),p=j.useCallback(ae=>{var Ee,nt,pt,Nn,dt,_t;return{id:Math.abs(ae.id.split("").reduce((ie,Le)=>(ie=(ie<<5)-ie+Le.charCodeAt(0),ie&ie),0)),clientId:Math.abs(ae.client_id.split("").reduce((ie,Le)=>(ie=(ie<<5)-ie+Le.charCodeAt(0),ie&ie),0)),clientName:(Ee=ae.client)!=null&&Ee.first_name&&((nt=ae.client)!=null&&nt.last_name)?`${ae.client.first_name} ${ae.client.last_name}`:"Client inconnu",petId:Math.abs(ae.animal_id.split("").reduce((ie,Le)=>(ie=(ie<<5)-ie+Le.charCodeAt(0),ie&ie),0)),petName:((pt=ae.animal)==null?void 0:pt.name)||"Animal inconnu",date:ae.consultation_date||ae.created_at,weight:(Nn=ae.weight)==null?void 0:Nn.toString(),temperature:(dt=ae.temperature)==null?void 0:dt.toString(),symptoms:ae.symptoms,diagnosis:ae.diagnosis,treatment:ae.treatment,medications:ae.medications,followUp:ae.follow_up,cost:(_t=ae.cost)==null?void 0:_t.toString(),notes:ae.notes,photos:ae.photos||[],createdAt:ae.created_at,purpose:ae.consultation_type||"consultation",veterinarian:ae.veterinarian_name||"Vétérinaire"}},[]),{currentView:g}=gc("pets"),[x,y]=j.useState(""),[b,C]=j.useState("all"),[w,N]=j.useState("all"),[S,_]=j.useState(g);At();const P=l,[A,E]=j.useState(!1),[k,I]=j.useState(!1),[D,U]=j.useState(null),[B,K]=j.useState(!1),[T,$]=j.useState(!1),[G,Q]=j.useState(!1),[ne,oe]=j.useState(!1),[M,ue]=j.useState(null),{toast:ve}=it(),[ce,re]=j.useState({client_id:"",name:"",species:"Chien",breed:"",color:"",sex:"Inconnu",weight:void 0,height:void 0,birth_date:"",microchip_number:"",tattoo_number:"",sterilized:!1,sterilization_date:"",notes:"",photo_url:"",status:"vivant"}),V=d.filter(ae=>{const Ee=ae.name.toLowerCase().includes(x.toLowerCase())||ae.breed&&ae.breed.toLowerCase().includes(x.toLowerCase())||ae.owner.toLowerCase().includes(x.toLowerCase()),nt=b==="all"||ae.type.toLowerCase()===b.toLowerCase(),pt=w==="all"||ae.status===w;return Ee&&nt&&pt}),le=ae=>{U(ae),K(!0)},W=ae=>{U(ae),re({client_id:ae.dbClientId,name:ae.name,species:ae.type,breed:ae.breed||"",color:ae.color||"",sex:ae.gender==="male"?"Mâle":ae.gender==="female"?"Femelle":"Inconnu",weight:ae.weight?parseFloat(ae.weight):void 0,height:void 0,birth_date:ae.birthDate||"",microchip_number:ae.microchip||"",tattoo_number:"",sterilized:!1,sterilization_date:"",notes:ae.medicalNotes||"",photo_url:ae.photo||"",status:ae.status==="healthy"?"vivant":ae.status==="urgent"?"décédé":"perdu"}),$(!0)},X=()=>{D&&re({client_id:D.dbClientId,name:D.name,species:D.type,breed:D.breed||"",color:D.color||"",sex:D.gender==="male"?"Mâle":D.gender==="female"?"Femelle":"Inconnu",weight:D.weight?parseFloat(D.weight):void 0,height:void 0,birth_date:D.birthDate||"",microchip_number:D.microchip||"",tattoo_number:"",sterilized:!1,sterilization_date:"",notes:D.medicalNotes||"",photo_url:D.photo||"",status:D.status==="healthy"?"vivant":D.status==="urgent"?"décédé":"perdu"}),K(!1),$(!0)},pe=ae=>{ue(ae),oe(!0)},fe=async()=>{if(M)try{await o.mutateAsync(M.dbId),ve({title:"Animal supprimé",description:`${M.name} a été supprimé avec succès`}),oe(!1),ue(null)}catch(ae){ve({title:"Erreur",description:ae instanceof Error?ae.message:"Erreur lors de la suppression de l'animal",variant:"destructive"})}},Re=ae=>{U(ae),Q(!0)},qe=()=>{K(!1),Q(!0)},ot=async()=>{if(D){if(ce.microchip_number&&ce.microchip_number.trim()&&e.find(Ee=>Ee.microchip_number===ce.microchip_number.trim()&&Ee.id!==D.dbId)){ve({title:"Erreur",description:"Un animal avec ce numéro de puce existe déjà.",variant:"destructive"});return}try{await i.mutateAsync({id:D.dbId,data:ce}),ve({title:"Animal modifié",description:`${ce.name} a été modifié avec succès.`}),$(!1)}catch{ve({title:"Erreur",description:"Une erreur s'est produite lors de la modification de l'animal.",variant:"destructive"})}}},tt=j.useMemo(()=>D?f(D.id).map(p):[],[D,f,p]);return s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8 sm:px-6",children:[s.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold sm:text-3xl",children:"Gestion des Animaux"}),s.jsx("p",{className:"text-muted-foreground mt-2 text-sm sm:text-base",children:"Suivez tous les animaux et leurs informations médicales"})]}),s.jsxs("div",{className:"flex gap-2 flex-wrap",children:[s.jsxs(R,{size:"sm",variant:S==="cards"?"default":"outline",onClick:()=>_("cards"),className:"gap-2 flex-1 sm:flex-none",children:[s.jsx(Eo,{className:"h-4 w-4"}),"Cartes"]}),s.jsxs(R,{size:"sm",variant:S==="table"?"default":"outline",onClick:()=>_("table"),className:"gap-2 flex-1 sm:flex-none",children:[s.jsx(Ni,{className:"h-4 w-4"}),"Tableau"]}),s.jsxs(R,{className:"gap-2 medical-glow flex-1 sm:flex-none",onClick:()=>E(!0),children:[s.jsx(Ze,{className:"h-4 w-4"}),"Nouvel Animal"]})]})]}),s.jsxs("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4",children:[s.jsx(ee,{children:s.jsx(te,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ft,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total animaux"}),s.jsx("p",{className:"text-2xl font-bold",children:(a==null?void 0:a.totalAnimals)||d.length})]})]})})}),s.jsx(ee,{children:s.jsx(te,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ln,{className:"h-5 w-5 text-green-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"En bonne santé"}),s.jsx("p",{className:"text-2xl font-bold",children:((wt=a==null?void 0:a.animalsByStatus)==null?void 0:wt.vivant)||d.filter(ae=>ae.status==="healthy").length})]})]})})}),s.jsx(ee,{children:s.jsx(te,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(bn,{className:"h-5 w-5 text-yellow-500"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"En traitement"}),s.jsx("p",{className:"text-2xl font-bold",children:d.filter(ae=>ae.status==="treatment").length})]})]})})}),s.jsx(ee,{children:s.jsx(te,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Xn,{className:"h-5 w-5 text-primary"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Clients actifs"}),s.jsx("p",{className:"text-2xl font-bold",children:(a==null?void 0:a.totalClients)||n.length})]})]})})})]}),s.jsx(ee,{className:"border-dashed",children:s.jsx(te,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(kI,{className:"h-5 w-5 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:"Configuration dynamique activée"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Les types d'animaux sont configurables dans les paramètres"})]})]}),s.jsxs("div",{className:"flex gap-4 text-xs text-muted-foreground",children:[s.jsxs("span",{children:[l.length," espèces"]}),s.jsxs("span",{children:[Object.keys(c).length," groupes de races"]}),s.jsxs("span",{children:[u.length," couleurs"]})]})]})})}),s.jsxs(ee,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[s.jsx(Lo,{className:"h-5 w-5"}),"Rechercher et filtrer"]})}),s.jsxs(te,{className:"space-y-4",children:[s.jsx(Y,{placeholder:"Rechercher par nom, race ou propriétaire...",value:x,onChange:ae=>y(ae.target.value),className:"w-full max-w-md"}),s.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:gap-4",children:[s.jsxs(je,{value:b,onValueChange:C,children:[s.jsx(xe,{className:"w-full sm:w-40",children:s.jsx(be,{placeholder:"Tous types"})}),s.jsxs(ye,{children:[s.jsx(z,{value:"all",children:"Tous types"}),P.map((ae,Ee)=>s.jsx(z,{value:ae.toLowerCase(),children:ae},Ee))]})]}),s.jsxs(je,{value:w,onValueChange:N,children:[s.jsx(xe,{className:"w-full sm:w-40",children:s.jsx(be,{placeholder:"Statut"})}),s.jsxs(ye,{children:[s.jsx(z,{value:"all",children:"Tous statuts"}),s.jsx(z,{value:"healthy",children:"En bonne santé"}),s.jsx(z,{value:"treatment",children:"En traitement"}),s.jsx(z,{value:"urgent",children:"Urgent"})]})]})]})]})]}),S==="cards"?s.jsx("div",{className:"grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:V.map(ae=>s.jsx(ee,{className:"card-hover",children:s.jsx(te,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Jn,{className:"h-12 w-12 sm:h-16 sm:w-16",children:ae.photo?s.jsx(zu,{src:ae.photo,alt:ae.name}):s.jsx(Zn,{className:"bg-primary-glow text-primary-foreground",children:s.jsx(ft,{className:"h-6 w-6 sm:h-8 sm:w-8"})})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("h3",{className:"text-lg sm:text-xl font-semibold truncate",children:ae.name}),s.jsx("p",{className:"text-muted-foreground text-sm truncate",children:ae.breed}),s.jsx(Pe,{variant:"outline",className:`${hO[ae.status]} text-xs`,children:ae.status==="healthy"?"En bonne santé":ae.status==="treatment"?"En traitement":"Urgent"})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Type:"})," ",ae.type]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Âge:"})," ",ae.birthDate?Ru(ae.birthDate):"Non renseigné"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Poids:"})," ",ae.weight]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Couleur:"})," ",ae.color]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Xn,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),s.jsxs("span",{className:"truncate",children:["Propriétaire: ",typeof ae.owner=="string"?ae.owner:(()=>{const Ee=n.find(nt=>String(nt.id)===String(ae.ownerId));return Ee?`${Ee.first_name} ${Ee.last_name}`:"Non spécifié"})()]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Ge,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),s.jsxs("span",{children:["Dernière visite: ",ae.lastVisit?new Date(ae.lastVisit).toLocaleDateString("fr-FR"):"Aucune"]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Pn,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),s.jsxs("span",{children:["Consultations: ",f(ae.id).length]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium text-sm",children:"Vaccinations:"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:(()=>{const Ee=v(ae.id);return Ee.length>0?`${Ee.length} vaccination${Ee.length>1?"s":""} enregistrée${Ee.length>1?"s":""}`:"Aucune vaccination enregistrée"})()})]}),s.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row",children:[s.jsxs(R,{size:"sm",variant:"outline",className:"gap-2 flex-1",onClick:()=>le(ae),children:[s.jsx(An,{className:"h-4 w-4"}),"Voir"]}),s.jsxs(R,{size:"sm",variant:"outline",className:"gap-2 flex-1",onClick:()=>W(ae),children:[s.jsx($t,{className:"h-4 w-4"}),"Modifier"]}),s.jsxs(R,{size:"sm",variant:"outline",className:"gap-2 flex-1 text-destructive hover:text-destructive-foreground hover:bg-destructive",onClick:()=>pe(ae),children:[s.jsx(Vt,{className:"h-4 w-4"}),"Supprimer"]})]}),s.jsx("div",{className:"flex gap-2",children:s.jsxs(R,{size:"sm",className:"flex-1",onClick:()=>{U(ae),I(!0)},children:[s.jsx(Pn,{className:"h-4 w-4 mr-2"}),"Consultation"]})})]})})},ae.id))}):s.jsx(ee,{children:s.jsx(te,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full min-w-[600px]",children:[s.jsx("thead",{className:"border-b",children:s.jsxs("tr",{className:"text-left",children:[s.jsx("th",{className:"p-4 font-medium",children:"Animal"}),s.jsx("th",{className:"p-4 font-medium",children:"Type"}),s.jsx("th",{className:"p-4 font-medium",children:"Âge"}),s.jsx("th",{className:"p-4 font-medium",children:"Propriétaire"}),s.jsx("th",{className:"p-4 font-medium",children:"Statut"}),s.jsx("th",{className:"p-4 font-medium",children:"Dernière visite"}),s.jsx("th",{className:"p-4 font-medium",children:"Actions"})]})}),s.jsx("tbody",{children:V.map(ae=>s.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Jn,{className:"h-10 w-10",children:ae.photo?s.jsx(zu,{src:ae.photo,alt:ae.name}):s.jsx(Zn,{className:"bg-primary-glow text-primary-foreground",children:s.jsx(ft,{className:"h-5 w-5"})})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:ae.name}),s.jsx("div",{className:"text-sm text-muted-foreground",children:ae.breed})]})]})}),s.jsx("td",{className:"p-4",children:ae.type}),s.jsx("td",{className:"p-4",children:ae.birthDate?Ru(ae.birthDate):"Non renseigné"}),s.jsx("td",{className:"p-4",children:typeof ae.owner=="string"?ae.owner:(()=>{const Ee=n.find(nt=>String(nt.id)===String(ae.ownerId));return Ee?`${Ee.first_name} ${Ee.last_name}`:"Non spécifié"})()}),s.jsx("td",{className:"p-4",children:s.jsx(Pe,{variant:"outline",className:hO[ae.status],children:ae.status==="healthy"?"En bonne santé":ae.status==="treatment"?"En traitement":"Urgent"})}),s.jsx("td",{className:"p-4",children:ae.lastVisit?new Date(ae.lastVisit).toLocaleDateString("fr-FR"):"Aucune"}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex gap-1 flex-wrap",children:[s.jsx(R,{size:"sm",variant:"outline",onClick:()=>le(ae),children:s.jsx(An,{className:"h-4 w-4"})}),s.jsx(R,{size:"sm",variant:"outline",onClick:()=>W(ae),children:s.jsx($t,{className:"h-4 w-4"})}),s.jsx(R,{size:"sm",variant:"outline",className:"text-destructive hover:text-destructive-foreground hover:bg-destructive",onClick:()=>pe(ae),children:s.jsx(Vt,{className:"h-4 w-4"})}),s.jsx(R,{size:"sm",variant:"outline",onClick:()=>Re(ae),children:"Dossier"})]})})]},ae.id))})]})})})}),D&&s.jsxs(ee,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[s.jsx(oa,{className:"h-5 w-5"}),"Statistiques médicales - ",D.name]})}),s.jsx(te,{children:s.jsx(nke,{pet:D,consultations:tt})})]}),s.jsx(Xx,{open:A,onOpenChange:E}),s.jsx($d,{open:k,onOpenChange:I}),s.jsx(iL,{open:B,onOpenChange:K,pet:D,onEdit:X,onShowDossier:qe,onDelete:D?()=>pe(D):void 0}),s.jsx(Qe,{open:T,onOpenChange:$,children:s.jsxs(Ye,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto mx-4",children:[s.jsxs(Xe,{children:[s.jsx(Je,{children:"Modifier Animal"}),s.jsx(Bt,{children:"Modifiez les informations de l'animal."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"name",children:"Nom *"}),s.jsx(Y,{id:"name",value:ce.name,onChange:ae=>re(Ee=>({...Ee,name:ae.target.value})),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"species",children:"Espèce *"}),s.jsxs(je,{value:ce.species,onValueChange:ae=>re(Ee=>({...Ee,species:ae})),children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Sélectionner l'espèce"})}),s.jsxs(ye,{children:[s.jsx(z,{value:"Chien",children:"Chien"}),s.jsx(z,{value:"Chat",children:"Chat"}),s.jsx(z,{value:"Oiseau",children:"Oiseau"}),s.jsx(z,{value:"Lapin",children:"Lapin"}),s.jsx(z,{value:"Furet",children:"Furet"}),s.jsx(z,{value:"Autre",children:"Autre"})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"client_id",children:"Propriétaire *"}),s.jsxs(je,{value:ce.client_id,onValueChange:ae=>re(Ee=>({...Ee,client_id:ae})),children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Sélectionner le propriétaire"})}),s.jsx(ye,{children:n.map(ae=>s.jsxs(z,{value:ae.id,children:[ae.first_name," ",ae.last_name]},ae.id))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"breed",children:"Race"}),s.jsx(Y,{id:"breed",value:ce.breed||"",onChange:ae=>re(Ee=>({...Ee,breed:ae.target.value}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"sex",children:"Sexe"}),s.jsxs(je,{value:ce.sex,onValueChange:ae=>re(Ee=>({...Ee,sex:ae})),children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Sélectionner le sexe"})}),s.jsxs(ye,{children:[s.jsx(z,{value:"Mâle",children:"Mâle"}),s.jsx(z,{value:"Femelle",children:"Femelle"}),s.jsx(z,{value:"Inconnu",children:"Inconnu"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"birth_date",children:"Date de naissance"}),s.jsx(Y,{id:"birth_date",type:"date",value:ce.birth_date||"",onChange:ae=>re(Ee=>({...Ee,birth_date:ae.target.value||void 0}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"weight",children:"Poids (kg)"}),s.jsx(Y,{id:"weight",type:"number",step:"0.1",value:ce.weight||"",onChange:ae=>re(Ee=>({...Ee,weight:ae.target.value?parseFloat(ae.target.value):void 0}))})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"color",children:"Couleur"}),s.jsx(Y,{id:"color",value:ce.color||"",onChange:ae=>re(Ee=>({...Ee,color:ae.target.value}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"microchip_number",children:"N° puce électronique"}),s.jsx(Y,{id:"microchip_number",value:ce.microchip_number||"",onChange:ae=>re(Ee=>({...Ee,microchip_number:ae.target.value}))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"notes",children:"Notes médicales"}),s.jsx(Ue,{id:"notes",value:ce.notes||"",onChange:ae=>re(Ee=>({...Ee,notes:ae.target.value})),placeholder:"Notes additionnelles..."})]}),s.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:justify-end pt-4",children:[s.jsx(R,{type:"button",variant:"outline",onClick:()=>$(!1),className:"w-full sm:w-auto",children:"Annuler"}),s.jsxs(R,{onClick:ot,disabled:i.isPending,className:"w-full sm:w-auto",children:[i.isPending&&s.jsx(Qn,{className:"mr-2 h-4 w-4 animate-spin"}),"Sauvegarder"]})]})]})]})}),s.jsx(tke,{open:G,onOpenChange:Q,pet:D}),s.jsx(jC,{open:ne,onOpenChange:oe,children:s.jsxs(Hy,{children:[s.jsxs(Ky,{children:[s.jsx(Yy,{children:"Confirmer la suppression"}),s.jsxs(Qy,{children:["Êtes-vous sûr de vouloir supprimer l'animal ",s.jsx("strong",{children:M==null?void 0:M.name})," ? Cette action est irréversible et supprimera définitivement toutes les données associées à cet animal, y compris ses consultations, vaccinations et historique médical."]})]}),s.jsxs(Gy,{children:[s.jsx(Jy,{children:"Annuler"}),s.jsx(Xy,{onClick:fe,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",disabled:o.isPending,children:o.isPending?s.jsxs(s.Fragment,{children:[s.jsx(Qn,{className:"h-4 w-4 animate-spin mr-2"}),"Suppression..."]}):"Supprimer"})]})]})})]})},ake=()=>s.jsx(ske,{});function ike({open:e,onOpenChange:t}){const{data:n=[]}=ir(),{data:r=[]}=or(),a=G3(),{toast:i}=it(),{data:o=[],isLoading:l}=a2(),[c,u]=j.useState({clientId:"",animalId:"",date:"",time:"",appointmentType:"consultation",notes:""}),[d,h]=j.useState([]),m=async p=>{if(p.preventDefault(),!c.clientId||!c.animalId||!c.date||!c.time){i({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires",variant:"destructive"});return}try{const g=new Date(`${c.date}T${c.time}:00`);await a.mutateAsync({client_id:c.clientId,animal_id:c.animalId,appointment_date:g.toISOString(),appointment_type:c.appointmentType,notes:c.notes||void 0,duration_minutes:30}),i({title:"Succès",description:"Rendez-vous créé avec succès"}),u({clientId:"",animalId:"",date:"",time:"",appointmentType:"consultation",notes:""}),h([]),t(!1)}catch(g){console.error("Error creating appointment:",g),i({title:"Erreur",description:"Impossible de créer le rendez-vous",variant:"destructive"})}},f=p=>{u(x=>({...x,clientId:p,animalId:""}));const g=r.filter(x=>x.client_id===p);h(g)},v=p=>`${p.first_name} ${p.last_name}`;return s.jsx(Qe,{open:e,onOpenChange:t,children:s.jsxs(Ye,{className:"max-w-2xl",children:[s.jsxs(Xe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(Ge,{className:"h-5 w-5"}),"Nouveau Rendez-vous"]}),s.jsx(Bt,{children:"Créer un nouveau rendez-vous pour un client et son animal"})]}),s.jsxs("form",{onSubmit:m,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"client",children:"Client *"}),s.jsxs(je,{value:c.clientId,onValueChange:f,children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Sélectionner un client"})}),s.jsx(ye,{children:n.map(p=>s.jsx(z,{value:p.id,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Xn,{className:"h-4 w-4"}),v(p)]})},p.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"animal",children:"Animal *"}),s.jsxs(je,{value:c.animalId,onValueChange:p=>u(g=>({...g,animalId:p})),disabled:!c.clientId,children:[s.jsx(xe,{children:s.jsx(be,{placeholder:c.clientId?"Sélectionner un animal":"Sélectionner d'abord un client"})}),s.jsx(ye,{children:d.map(p=>s.jsx(z,{value:p.id,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ft,{className:"h-4 w-4"}),p.name," (",p.species,")"]})},p.id))})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"date",children:"Date *"}),s.jsx(Y,{id:"date",type:"date",value:c.date,onChange:p=>u(g=>({...g,date:p.target.value})),min:new Date().toISOString().split("T")[0]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"time",children:"Heure *"}),s.jsx(Y,{id:"time",type:"time",value:c.time,onChange:p=>u(g=>({...g,time:p.target.value}))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"type",children:"Type de rendez-vous"}),s.jsxs(je,{value:c.appointmentType,onValueChange:p=>u(g=>({...g,appointmentType:p})),children:[s.jsx(xe,{children:s.jsx(be,{})}),s.jsx(ye,{children:o.map(p=>s.jsx(z,{value:p.toLowerCase().replace(/\s+/g,"-"),children:p},p))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"notes",children:"Notes (optionnel)"}),s.jsx(Ue,{id:"notes",placeholder:"Notes additionnelles sur le rendez-vous...",value:c.notes,onChange:p=>u(g=>({...g,notes:p.target.value})),rows:3})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(R,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsx(R,{type:"submit",disabled:a.isPending,children:a.isPending?"Création...":"Créer le rendez-vous"})]})]})]})})}function oke(e,t,n){const r=[],{openingTime:a,closingTime:i,slotDuration:o,lunchBreakStart:l,lunchBreakEnd:c}=t,u=Vp(a),d=Vp(i),h=l?Vp(l):null,m=c?Vp(c):null;for(let f=u;f<d;f+=o){const v=lke(f),p=h&&m&&f>=h&&f<m,g=n.some(x=>x.date===e&&x.time===v);r.push({time:v,isAvailable:!g&&!p,isLunchBreak:!!p})}return r}function Vp(e){const[t,n]=e.split(":").map(Number);return t*60+n}function lke(e){const t=Math.floor(e/60),n=e%60;return`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}function cke(e){return new Date(e).toLocaleDateString("fr-FR",{weekday:"long"})}function uke(e,t){const n=cke(e).toLowerCase();return t.workingDays.includes(n)}const mO=(e,t)=>{switch(e){case"appointment":switch(t){case"confirmed":return"bg-green-100 text-green-800 border-green-200";case"completed":return"bg-gray-100 text-gray-800 border-gray-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-blue-100 text-blue-800 border-blue-200"}case"vaccination":switch(t){case"completed":return"bg-green-100 text-green-800 border-green-200";case"overdue":return"bg-red-100 text-red-800 border-red-200";case"scheduled":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-yellow-100 text-yellow-800 border-yellow-200"}case"antiparasitic":switch(t){case"completed":return"bg-green-100 text-green-800 border-green-200";case"overdue":return"bg-red-100 text-red-800 border-red-200";case"scheduled":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-purple-100 text-purple-800 border-purple-200"}default:return"bg-gray-100 text-gray-800 border-gray-200"}},fO=(e,t)=>{switch(e){case"appointment":return s.jsx(Qt,{className:"h-3 w-3"});case"vaccination":return s.jsx(Ln,{className:"h-3 w-3"});case"antiparasitic":return s.jsx(bn,{className:"h-3 w-3"});default:return s.jsx(Ge,{className:"h-3 w-3"})}},dke=({events:e,onEventClick:t,onDateClick:n,onTimeSlotClick:r,showTimeSlots:a=!1,title:i="Calendrier",icon:o=s.jsx(Ge,{className:"h-5 w-5"})})=>{var N;const{settings:l}=At(),[c,u]=j.useState(new Date),[d,h]=j.useState(""),m=new Date(c.getFullYear(),c.getMonth(),1),f=new Date(c.getFullYear(),c.getMonth()+1,0),v=new Date(m);v.setDate(v.getDate()-m.getDay());const p=[],g=new Date(v);for(;g<=f||p.length<42;)p.push(new Date(g)),g.setDate(g.getDate()+1);const x=j.useMemo(()=>{const S={};return e.forEach(_=>{const P=_.date;S[P]||(S[P]=[]),S[P].push(_)}),S},[e]),y=j.useMemo(()=>!d||!a?[]:oke(d,l.scheduleSettings,[]),[d,a,l.scheduleSettings]),b=S=>{const _=new Date(c);_.setMonth(c.getMonth()+(S==="next"?1:-1)),u(_)},C=S=>{const _=st(S,"yyyy-MM-dd");h(_),n==null||n(_)},w=S=>{r&&d&&r(d,S)};return s.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[s.jsxs(ee,{children:[s.jsx(he,{className:"pb-3 sm:pb-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-0",children:[s.jsxs(me,{className:"flex items-center gap-2 text-base sm:text-lg",children:[o,i]}),s.jsxs("div",{className:"flex items-center justify-between sm:gap-2",children:[s.jsx(R,{variant:"outline",size:"sm",onClick:()=>b("prev"),className:"flex-1 sm:flex-none",children:"←"}),s.jsx("span",{className:"font-medium text-sm sm:text-base px-2 sm:min-w-[140px] text-center",children:st(c,"MMMM yyyy",{locale:zn})}),s.jsx(R,{variant:"outline",size:"sm",onClick:()=>b("next"),className:"flex-1 sm:flex-none",children:"→"})]})]})}),s.jsxs(te,{className:"p-2 sm:p-6",children:[s.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2 sm:mb-4",children:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"].map(S=>s.jsx("div",{className:"p-1 sm:p-2 text-center text-xs sm:text-sm font-medium text-gray-500",children:S},S))}),s.jsx("div",{className:"grid grid-cols-7 gap-1",children:p.map((S,_)=>{const P=st(S,"yyyy-MM-dd"),A=x[P]||[],E=S.getMonth()===c.getMonth(),k=Jee(S,new Date),I=P===d,D=uke(P,l.scheduleSettings);return s.jsxs("div",{className:`
                    min-h-[60px] sm:min-h-[80px] p-1 border rounded-lg relative cursor-pointer hover:bg-muted/50
                    ${E?"bg-white":"bg-gray-50"}
                    ${k?"ring-2 ring-blue-500":""}
                    ${I?"bg-blue-100 border-blue-300":""}
                    ${D?"":"opacity-50"}
                  `,onClick:()=>C(S),children:[s.jsx("div",{className:`text-xs sm:text-sm font-medium ${E?"text-gray-900":"text-gray-400"}`,children:S.getDate()}),s.jsxs("div",{className:"space-y-0.5 sm:space-y-1 mt-0.5 sm:mt-1",children:[A.slice(0,2).map((U,B)=>s.jsx("div",{className:`
                          text-xs p-0.5 sm:p-1 rounded text-center truncate border cursor-pointer
                          ${mO(U.type,U.status)}
                        `,title:`${U.title}${U.time?` - ${U.time}`:""}${U.clientName?` (${U.clientName})`:""}`,onClick:K=>{K.stopPropagation(),t==null||t(U)},children:s.jsxs("div",{className:"flex items-center gap-0.5 sm:gap-1 justify-center",children:[fO(U.type,U.status),s.jsx("span",{className:"truncate text-xs",children:U.title})]})},B)),A.length>2&&s.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["+",A.length-2]})]})]},_)})})]})]}),d&&s.jsxs(ee,{children:[s.jsx(he,{className:"pb-3",children:s.jsx(me,{className:"text-base sm:text-lg",children:st(new Date(d),"EEEE d MMMM yyyy",{locale:zn})})}),s.jsxs(te,{className:"p-3 sm:p-6",children:[((N=x[d])==null?void 0:N.length)>0?s.jsx("div",{className:"space-y-3",children:x[d].map(S=>s.jsxs("div",{className:`
                      p-3 rounded-lg border cursor-pointer hover:shadow-sm
                      ${mO(S.type,S.status)}
                    `,onClick:()=>t==null?void 0:t(S),children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[fO(S.type,S.status),s.jsx("span",{className:"font-medium",children:S.title})]}),s.jsx(Pe,{variant:"outline",className:"text-xs",children:S.status})]}),S.time&&s.jsxs("div",{className:"flex items-center gap-1 text-sm mt-1",children:[s.jsx(Qt,{className:"h-3 w-3"}),s.jsx("span",{children:S.time})]}),S.clientName&&s.jsxs("div",{className:"flex items-center gap-1 text-sm mt-1",children:[s.jsx(Xn,{className:"h-3 w-3"}),s.jsx("span",{children:S.clientName})]}),S.petName&&s.jsxs("div",{className:"flex items-center gap-1 text-sm mt-1",children:[s.jsx(ft,{className:"h-3 w-3"}),s.jsx("span",{children:S.petName})]})]},S.id))}):s.jsx("p",{className:"text-muted-foreground text-center py-4",children:"Aucun événement prévu pour cette date"}),a&&y.length>0&&s.jsxs("div",{className:"mt-4 sm:mt-6",children:[s.jsx("h4",{className:"font-medium mb-2 sm:mb-3 text-sm sm:text-base",children:"Créneaux disponibles"}),s.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-1 sm:gap-2",children:y.map(S=>s.jsxs(R,{variant:S.isAvailable?"outline":"ghost",size:"sm",disabled:!S.isAvailable,onClick:()=>w(S.time),className:"text-xs p-1 sm:p-2",children:[S.time,S.isLunchBreak&&s.jsx(Pe,{variant:"secondary",className:"ml-1 text-xs hidden sm:inline",children:"Pause"})]},S.time))})]})]})]})]})},pO={scheduled:"bg-blue-100 text-blue-800",confirmed:"bg-green-100 text-green-800",completed:"bg-gray-100 text-gray-800",cancelled:"bg-red-100 text-red-800","no-show":"bg-orange-100 text-orange-800"},Tj={scheduled:"Planifié",confirmed:"Confirmé",completed:"Terminé",cancelled:"Annulé","no-show":"Absent"},gO={consultation:"Consultation générale",vaccination:"Vaccination",chirurgie:"Chirurgie",urgence:"Urgence",controle:"Contrôle post-opératoire",sterilisation:"Stérilisation",dentaire:"Soins dentaires"};function hke(){const{data:e=[],isLoading:t,error:n}=s2(),r=Cee(),a=_ee(),{toast:i}=it(),{currentView:o}=gc("appointments"),{data:l=[],isLoading:c}=Ko(),{data:u=[],isLoading:d}=a2(),[h,m]=j.useState(!1),[f,v]=j.useState(""),[p,g]=j.useState("all"),[x,y]=j.useState("all"),[b,C]=j.useState("all"),[w,N]=j.useState("all"),[S,_]=j.useState(new Date().toISOString().split("T")[0]),[P,A]=j.useState("list"),[E,k]=j.useState(o),[I,D]=j.useState(!1),[U,B]=j.useState(null),[K,T]=j.useState(null),[$,G]=j.useState(""),Q=ie=>new Date(ie).toLocaleDateString("fr-FR"),ne=ie=>new Date(ie).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}),oe=ie=>new Date(ie.appointment_date).toISOString().split("T")[0],M=ie=>new Date(ie.appointment_date).toTimeString().slice(0,5),[ue,ve]=j.useState(()=>{const ie=new Date;return new Date(ie.getFullYear(),ie.getMonth(),1)}),ce=ie=>ie.client?`${ie.client.first_name} ${ie.client.last_name}`:"Unknown Client",re=ie=>{var Le;return((Le=ie.animal)==null?void 0:Le.name)||"Unknown Animal"},V=ie=>{var Le;return((Le=ie.animal)==null?void 0:Le.species)||"Unknown Species"},le=()=>{const ie=new Date;return e.filter(Le=>new Date(Le.appointment_date)>ie)},W=()=>{const ie=new Date;return e.filter(Le=>new Date(Le.appointment_date)<ie&&Le.status==="scheduled")},X=le(),pe=W(),fe=e.filter(ie=>{const Le=ce(ie),gs=re(ie),vn=Le.toLowerCase().includes(f.toLowerCase())||gs.toLowerCase().includes(f.toLowerCase())||ie.notes&&ie.notes.toLowerCase().includes(f.toLowerCase()),$i=p==="all"||ie.status===p,Sn=x==="all"||ie.appointment_type===x,Ls=b==="all"||V(ie)===b;let tr=!0;const vs=new Date(ie.appointment_date),Xr=vs.toISOString().split("T")[0];if(w==="today")tr=Xr===new Date().toISOString().split("T")[0];else if(w==="week"){const H=new Date,Ce=new Date(H.getTime()+7*24*60*60*1e3);tr=vs>=H&&vs<=Ce}else if(w==="month"){const H=new Date,Ce=H.getMonth(),ge=H.getFullYear();tr=vs.getMonth()===Ce&&vs.getFullYear()===ge}else w==="specific"&&(tr=Xr===S);return vn&&$i&&Sn&&Ls&&tr}),Re=async(ie,Le)=>{try{await r.mutateAsync({id:ie,data:{status:Le}}),i({title:"Statut mis à jour",description:`Le rendez-vous est maintenant ${Tj[Le].toLowerCase()}.`})}catch{i({title:"Erreur",description:"Impossible de mettre à jour le statut",variant:"destructive"})}},qe=async()=>{if(!K)return;const{id:ie,field:Le}=K;if(e.find(vn=>vn.id===ie))try{await r.mutateAsync({id:ie,data:{[Le]:$}}),i({title:"Modifié",description:`${Le} mis à jour`})}catch{i({title:"Erreur",description:"Impossible de mettre à jour",variant:"destructive"})}T(null)},ot=async ie=>{B(ie),D(!0)},tt=async()=>{if(!U)return;const ie=re(U);try{await a.mutateAsync(U.id),i({title:"Rendez-vous supprimé",description:`Le rendez-vous pour ${ie} a été supprimé.`}),D(!1),B(null)}catch{i({title:"Erreur",description:"Impossible de supprimer le rendez-vous",variant:"destructive"})}},wt=ie=>e.filter(Le=>new Date(Le.appointment_date).toISOString().split("T")[0]===ie),Ee=(()=>{const ie=new Date().toISOString().split("T")[0];return wt(ie)})(),nt=ue.getFullYear(),pt=ue.getMonth(),Nn=new Date(nt,pt,1).getDay(),dt=new Date(nt,pt+1,0).getDate();let _t=1-Nn;for(;_t<=dt;){const ie=[];for(let Le=0;Le<7;Le++)_t>0&&_t<=dt?ie.push(_t):ie.push(0),_t++}return t?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Chargement des rendez-vous..."})]})}):n?s.jsx("div",{className:"p-6",children:s.jsx(ee,{className:"border-red-200 bg-red-50",children:s.jsx(te,{className:"p-6",children:s.jsxs("div",{className:"flex items-center text-red-800",children:[s.jsx(Hn,{className:"w-5 h-5 mr-2"}),s.jsxs("span",{children:["Erreur lors du chargement des rendez-vous: ",n.message]})]})})})}):s.jsxs("div",{className:"container mx-auto px-2 sm:px-4 lg:px-6 py-4 sm:py-6 lg:py-8 space-y-4 sm:space-y-6 lg:space-y-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Gestion des Rendez-vous"}),s.jsx("p",{className:"text-muted-foreground text-sm sm:text-base",children:"Planifiez et gérez tous vos rendez-vous vétérinaires"})]}),s.jsxs(R,{onClick:()=>m(!0),className:"gap-2 w-full sm:w-auto",children:[s.jsx(Ze,{className:"h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Nouveau Rendez-vous"}),s.jsx("span",{className:"sm:hidden",children:"Nouveau RDV"})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx(R,{variant:P==="list"?"default":"outline",onClick:()=>A("list"),size:"sm",className:"flex-1 sm:flex-none",children:"Liste"}),s.jsx(R,{variant:P==="calendar"?"default":"outline",onClick:()=>A("calendar"),size:"sm",className:"flex-1 sm:flex-none",children:"Calendrier"})]}),P==="list"&&s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(R,{size:"sm",variant:E==="cards"?"default":"outline",onClick:()=>k("cards"),className:"gap-1 sm:gap-2 flex-1 sm:flex-none",children:[s.jsx(Eo,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Cartes"})]}),s.jsxs(R,{size:"sm",variant:E==="table"?"default":"outline",onClick:()=>k("table"),className:"gap-1 sm:gap-2 flex-1 sm:flex-none",children:[s.jsx(Ni,{className:"h-3 w-3 sm:h-4 sm:w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Tableau"})]})]})]}),P==="calendar"?s.jsx(dke,{events:e.map(ie=>({id:parseInt(ie.id),type:"appointment",title:`${ce(ie)} - ${re(ie)}`,time:M(ie),date:oe(ie),status:ie.status,clientName:ce(ie),petName:re(ie)})),onEventClick:ie=>{},onDateClick:ie=>{_(ie)},onTimeSlotClick:(ie,Le)=>{m(!0)},showTimeSlots:!0,title:"Calendrier des Rendez-vous",icon:s.jsx(Ge,{className:"h-5 w-5"})}):s.jsxs("div",{className:"grid gap-2 sm:gap-4 grid-cols-2 lg:grid-cols-4",children:[s.jsx(ee,{children:s.jsx(te,{className:"p-3 sm:p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ge,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Aujourd'hui"}),s.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:Ee.length})]})]})})}),s.jsx(ee,{children:s.jsx(te,{className:"p-3 sm:p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Qt,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"À venir"}),s.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:X.length})]})]})})}),s.jsx(ee,{children:s.jsx(te,{className:"p-3 sm:p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Hn,{className:"h-4 w-4 sm:h-5 sm:w-5 text-orange-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"En retard"}),s.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:pe.length})]})]})})}),s.jsx(ee,{children:s.jsx(te,{className:"p-3 sm:p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ln,{className:"h-4 w-4 sm:h-5 sm:w-5 text-gray-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Total"}),s.jsx("p",{className:"text-lg sm:text-2xl font-bold",children:e.length})]})]})})})]}),s.jsxs(ee,{children:[s.jsx(he,{className:"pb-3",children:s.jsxs(me,{className:"flex items-center gap-2 text-base sm:text-lg",children:[s.jsx(_I,{className:"h-4 w-4 sm:h-5 sm:w-5"}),"Filtres et Recherche"]})}),s.jsx(te,{className:"space-y-3 sm:space-y-4",children:s.jsxs("div",{className:"grid gap-3 sm:gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(Dc,{children:"Recherche"}),s.jsxs("div",{className:"relative",children:[s.jsx(Lo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Y,{placeholder:"Client, animal, motif...",value:f,onChange:ie=>v(ie.target.value),className:"pl-10"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Dc,{children:"Statut"}),s.jsxs(je,{value:p,onValueChange:g,children:[s.jsx(xe,{children:s.jsx(be,{})}),s.jsxs(ye,{children:[s.jsx(z,{value:"all",children:"Tous les statuts"}),s.jsx(z,{value:"scheduled",children:"Planifié"}),s.jsx(z,{value:"confirmed",children:"Confirmé"}),s.jsx(z,{value:"completed",children:"Terminé"}),s.jsx(z,{value:"cancelled",children:"Annulé"}),s.jsx(z,{value:"no-show",children:"Absent"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Dc,{children:"Type"}),s.jsxs(je,{value:x,onValueChange:y,children:[s.jsx(xe,{children:s.jsx(be,{})}),s.jsxs(ye,{children:[s.jsx(z,{value:"all",children:"Tous les types"}),u.map(ie=>s.jsx(z,{value:ie.toLowerCase().replace(/\s+/g,"-"),children:ie},ie))]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Dc,{children:"Espèce"}),s.jsxs(je,{value:b,onValueChange:C,children:[s.jsx(xe,{children:s.jsx(be,{})}),s.jsxs(ye,{children:[s.jsx(z,{value:"all",children:"Toutes espèces"}),l.map(ie=>s.jsx(z,{value:ie,children:ie},ie))]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Dc,{children:"Période"}),s.jsxs(je,{value:w,onValueChange:N,children:[s.jsx(xe,{children:s.jsx(be,{})}),s.jsxs(ye,{children:[s.jsx(z,{value:"all",children:"Toutes les dates"}),s.jsx(z,{value:"today",children:"Ce jour"}),s.jsx(z,{value:"week",children:"Cette semaine"}),s.jsx(z,{value:"month",children:"Ce mois"}),s.jsx(z,{value:"specific",children:"Date spécifique"})]})]})]}),w==="specific"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(Dc,{children:"Date"}),s.jsx(Y,{type:"date",value:S,onChange:ie=>_(ie.target.value)})]})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("h2",{className:"text-xl font-semibold",children:["Rendez-vous (",fe.length,")"]})}),fe.length===0?s.jsx(ee,{children:s.jsxs(te,{className:"p-8 text-center text-muted-foreground",children:[s.jsx(Ge,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{children:"Aucun rendez-vous trouvé"}),s.jsx("p",{className:"text-sm",children:"Commencez par créer votre premier rendez-vous"})]})}):E==="cards"?s.jsx("div",{className:"space-y-4",children:fe.sort((ie,Le)=>new Date(ie.appointment_date).getTime()-new Date(Le.appointment_date).getTime()).map(ie=>s.jsx(ee,{className:"card-hover",children:s.jsx(te,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[s.jsxs("div",{className:"space-y-4 flex-1",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Xn,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:ce(ie)})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ft,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:re(ie)})]}),s.jsx(Pe,{className:pO[ie.status],children:Tj[ie.status]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ge,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{children:Q(ie.appointment_date)})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Qt,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{children:ne(ie.appointment_date)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Type:"}),s.jsx("span",{className:"ml-1",children:gO[ie.appointment_type]||ie.appointment_type})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Durée:"}),s.jsxs("span",{className:"ml-1",children:[ie.duration_minutes||30," min"]})]})]}),ie.notes&&s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Motif:"}),s.jsx("p",{className:"text-sm mt-1",children:ie.notes})]}),ie.notes&&s.jsxs("div",{children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Notes:"}),s.jsx("p",{className:"text-sm mt-1 text-muted-foreground",children:ie.notes})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:ml-4",children:[ie.status==="scheduled"&&s.jsxs(s.Fragment,{children:[s.jsxs(R,{size:"sm",variant:"outline",onClick:()=>Re(ie.id,"confirmed"),className:"gap-1 w-full sm:w-auto",children:[s.jsx(Ln,{className:"h-3 w-3"}),"Confirmer"]}),s.jsxs(R,{size:"sm",variant:"outline",onClick:()=>Re(ie.id,"cancelled"),className:"gap-1 text-red-600 w-full sm:w-auto",children:[s.jsx(gm,{className:"h-3 w-3"}),"Annuler"]})]}),ie.status==="confirmed"&&s.jsxs(R,{size:"sm",variant:"outline",onClick:()=>Re(ie.id,"completed"),className:"gap-1 w-full sm:w-auto",children:[s.jsx(Ln,{className:"h-3 w-3"}),"Terminer"]}),s.jsxs(R,{size:"sm",variant:"outline",onClick:()=>ot(ie),className:"gap-1 text-red-600 w-full sm:w-auto",children:[s.jsx(Vt,{className:"h-3 w-3"}),"Supprimer"]})]})]})})},ie.id))}):s.jsx(ee,{children:s.jsx(te,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{className:"border-b",children:s.jsxs("tr",{className:"text-left",children:[s.jsx("th",{className:"p-2 sm:p-4 font-medium",children:"Client / Animal"}),s.jsx("th",{className:"p-2 sm:p-4 font-medium",children:"Date & Heure"}),s.jsx("th",{className:"p-2 sm:p-4 font-medium",children:"Type"}),s.jsx("th",{className:"p-2 sm:p-4 font-medium",children:"Statut"}),s.jsx("th",{className:"p-2 sm:p-4 font-medium",children:"Motif"}),s.jsx("th",{className:"p-2 sm:p-4 font-medium",children:"Actions"})]})}),s.jsx("tbody",{children:fe.sort((ie,Le)=>new Date(ie.appointment_date).getTime()-new Date(Le.appointment_date).getTime()).map(ie=>s.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[s.jsx("td",{className:"p-2 sm:p-4",children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Xn,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:ce(ie)})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ft,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:re(ie)})]})]})}),s.jsx("td",{className:"p-2 sm:p-4",children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>{T({id:ie.id,field:"date"}),G(oe(ie))},children:[s.jsx(Ge,{className:"h-4 w-4 text-muted-foreground"}),(K==null?void 0:K.id)===ie.id&&K.field==="date"?s.jsx(Y,{type:"date",value:$,onChange:Le=>G(Le.target.value),onBlur:qe,autoFocus:!0,className:"w-32"}):s.jsx("span",{children:Q(ie.appointment_date)})]}),s.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>{T({id:ie.id,field:"time"}),G(M(ie))},children:[s.jsx(Qt,{className:"h-4 w-4 text-muted-foreground"}),(K==null?void 0:K.id)===ie.id&&K.field==="time"?s.jsx(Y,{type:"time",value:$,onChange:Le=>G(Le.target.value),onBlur:qe,autoFocus:!0,className:"w-24"}):s.jsx("span",{className:"text-sm text-muted-foreground",children:ne(ie.appointment_date)})]})]})}),s.jsx("td",{className:"p-2 sm:p-4",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:gO[ie.appointment_type]||ie.appointment_type}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[ie.duration_minutes||30," min"]})]})}),s.jsx("td",{className:"p-2 sm:p-4",children:s.jsx("div",{className:"cursor-pointer",onClick:()=>{T({id:ie.id,field:"status"}),G(ie.status)},children:(K==null?void 0:K.id)===ie.id&&K.field==="status"?s.jsxs(je,{value:$,onValueChange:Le=>{G(Le),Re(ie.id,Le),T(null)},children:[s.jsx(xe,{className:"w-32",children:s.jsx(be,{})}),s.jsxs(ye,{children:[s.jsx(z,{value:"scheduled",children:"Planifié"}),s.jsx(z,{value:"confirmed",children:"Confirmé"}),s.jsx(z,{value:"completed",children:"Terminé"}),s.jsx(z,{value:"cancelled",children:"Annulé"}),s.jsx(z,{value:"no-show",children:"Absent"})]})]}):s.jsx(Pe,{className:pO[ie.status],children:Tj[ie.status]})})}),s.jsx("td",{className:"p-2 sm:p-4",children:s.jsx("div",{className:"max-w-xs cursor-pointer",onClick:()=>{T({id:ie.id,field:"reason"}),G(ie.notes||"")},children:(K==null?void 0:K.id)===ie.id&&K.field==="reason"?s.jsx(Y,{value:$,onChange:Le=>G(Le.target.value),onBlur:qe,autoFocus:!0,placeholder:"Motif du rendez-vous"}):s.jsxs(s.Fragment,{children:[ie.notes&&s.jsx("div",{className:"text-sm",children:ie.notes}),ie.notes&&s.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:ie.notes})]})})}),s.jsx("td",{className:"p-2 sm:p-4",children:s.jsxs("div",{className:"flex gap-1",children:[ie.status==="scheduled"&&s.jsxs(s.Fragment,{children:[s.jsx(R,{size:"sm",variant:"outline",onClick:()=>Re(ie.id,"confirmed"),children:s.jsx(Ln,{className:"h-3 w-3"})}),s.jsx(R,{size:"sm",variant:"outline",onClick:()=>Re(ie.id,"cancelled"),className:"text-red-600",children:s.jsx(gm,{className:"h-3 w-3"})})]}),ie.status==="confirmed"&&s.jsx(R,{size:"sm",variant:"outline",onClick:()=>Re(ie.id,"completed"),children:s.jsx(Ln,{className:"h-3 w-3"})}),s.jsx(R,{size:"sm",variant:"outline",onClick:()=>ot(ie),className:"text-red-600",children:s.jsx(Vt,{className:"h-3 w-3"})})]})})]},ie.id))})]})})})})]}),s.jsx(ike,{open:h,onOpenChange:m}),s.jsx(Qe,{open:I,onOpenChange:D,children:s.jsxs(Ye,{className:"max-w-md",children:[s.jsx(Xe,{children:s.jsx(Je,{children:"Confirmer la suppression"})}),U&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("p",{className:"text-gray-600",children:["Êtes-vous sûr de vouloir supprimer le rendez-vous pour ",s.jsx("strong",{children:re(U)})," ?"]}),s.jsx("p",{className:"text-sm text-red-600",children:"Cette action est irréversible."}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(R,{variant:"outline",onClick:()=>D(!1),children:"Annuler"}),s.jsx(R,{variant:"destructive",onClick:tt,children:"Supprimer"})]})]})]})})]})}const Dc=({children:e,...t})=>s.jsx("label",{className:"text-sm font-medium",...t,children:e});function mke({open:e,onOpenChange:t,consultation:n}){var f,v,p,g;const{data:r=[]}=ir(),{data:a=[]}=or(),i=K3(),{toast:o}=it();At();const[l,c]=j.useState({client_id:"",animal_id:"",consultation_date:"",consultation_type:"routine",weight:"",temperature:"",symptoms:"",diagnosis:"",treatment:"",notes:"",follow_up_date:"",follow_up_notes:"",status:"completed"}),u=a.filter(x=>x.client_id===l.client_id);j.useEffect(()=>{var x,y;n&&e&&c({client_id:n.client_id||"",animal_id:n.animal_id||"",consultation_date:n.consultation_date?n.consultation_date.split("T")[0]:"",consultation_type:n.consultation_type||"routine",weight:((x=n.weight)==null?void 0:x.toString())||"",temperature:((y=n.temperature)==null?void 0:y.toString())||"",symptoms:n.symptoms||"",diagnosis:n.diagnosis||"",treatment:n.treatment||"",notes:n.notes||"",follow_up_date:n.follow_up_date||"",follow_up_notes:n.follow_up_notes||"",status:n.status||"completed"})},[n,e]);const d=x=>{c(y=>({...y,[x.target.id]:x.target.value}))},h=(x,y)=>{c(b=>({...b,[x]:y})),x==="client_id"&&c(b=>({...b,animal_id:""}))},m=async x=>{var C,w,N,S,_;if(x.preventDefault(),!n){o({title:"Erreur",description:"Aucune consultation sélectionnée pour modification.",variant:"destructive"});return}const y=[];if(l.weight){const P=parseFloat(l.weight);(isNaN(P)||P<=0||P>999.9)&&y.push("Le poids doit être un nombre valide entre 0.1 et 999.9 kg")}if(l.temperature){const P=parseFloat(l.temperature);(isNaN(P)||P<30||P>50)&&y.push("La température doit être un nombre valide entre 30°C et 50°C")}if(l.symptoms&&l.symptoms.length>1e3&&y.push("Les symptômes ne peuvent pas dépasser 1000 caractères"),l.diagnosis&&l.diagnosis.length>1e3&&y.push("Le diagnostic ne peut pas dépasser 1000 caractères"),l.treatment&&l.treatment.length>1e3&&y.push("Le traitement ne peut pas dépasser 1000 caractères"),l.notes&&l.notes.length>2e3&&y.push("Les notes ne peuvent pas dépasser 2000 caractères"),l.follow_up_notes&&l.follow_up_notes.length>500&&y.push("Les notes de suivi ne peuvent pas dépasser 500 caractères"),l.follow_up_date){const P=new Date(l.follow_up_date),A=new Date;A.setFullYear(A.getFullYear()+1),P>A&&y.push("La date de suivi ne peut pas être plus d'un an dans le futur");const E=new Date(n.consultation_date);P<E&&y.push("La date de suivi ne peut pas être antérieure à la date de consultation")}const b=["scheduled","in-progress","completed","cancelled"];if(l.status&&!b.includes(l.status)&&y.push("Le statut sélectionné n'est pas valide"),y.length>0){o({title:"Erreurs de validation",description:y.join(". "),variant:"destructive"});return}try{const P={consultation_type:l.consultation_type,symptoms:((C=l.symptoms)==null?void 0:C.trim())||void 0,diagnosis:((w=l.diagnosis)==null?void 0:w.trim())||void 0,treatment:((N=l.treatment)==null?void 0:N.trim())||void 0,notes:((S=l.notes)==null?void 0:S.trim())||void 0,weight:l.weight?parseFloat(l.weight):void 0,temperature:l.temperature?parseFloat(l.temperature):void 0,follow_up_date:l.follow_up_date||null,follow_up_notes:((_=l.follow_up_notes)==null?void 0:_.trim())||void 0,status:l.status};await i.mutateAsync({id:n.id,data:P}),o({title:"Consultation modifiée",description:"La consultation a été modifiée avec succès."}),t(!1)}catch(P){console.error("Error updating consultation:",P);let A="Une erreur est survenue lors de la modification de la consultation.";P!=null&&P.message&&(P.message.includes("not found")||P.message.includes("does not exist")?A="Cette consultation n'existe plus. Elle a peut-être été supprimée.":P.message.includes("foreign key constraint")?A="Erreur: Le client ou l'animal associé n'existe plus. Veuillez actualiser la page.":P.message.includes("network")?A="Erreur de connexion. Vérifiez votre connexion internet et réessayez.":P.message.includes("permission")||P.message.includes("unauthorized")?A="Vous n'avez pas les permissions nécessaires pour modifier cette consultation.":(P.message.includes("version")||P.message.includes("conflict"))&&(A="Cette consultation a été modifiée par un autre utilisateur. Veuillez actualiser et réessayer.")),o({title:"Erreur lors de la modification",description:A,variant:"destructive"})}};return r.find(x=>x.id===l.client_id),a.find(x=>x.id===l.animal_id),s.jsx(Qe,{open:e,onOpenChange:t,children:s.jsxs(Ye,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(Xe,{children:[s.jsx(Je,{children:"Modifier la consultation"}),s.jsx(Bt,{children:"Modifiez les informations de la consultation"})]}),n?s.jsxs("form",{onSubmit:m,className:"space-y-6",children:[s.jsxs("div",{className:"bg-muted/50 p-4 rounded-lg",children:[s.jsx("h4",{className:"font-medium mb-2",children:"Consultation pour:"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Client:"})," ",s.jsxs("span",{className:"font-medium",children:[(f=r.find(x=>x.id===l.client_id))==null?void 0:f.first_name," ",(v=r.find(x=>x.id===l.client_id))==null?void 0:v.last_name]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Animal:"})," ",s.jsxs("span",{className:"font-medium",children:[(p=u.find(x=>x.id===l.animal_id))==null?void 0:p.name," (",(g=u.find(x=>x.id===l.animal_id))==null?void 0:g.species,")"]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"consultation_date",children:"Date de consultation"}),s.jsx(Y,{id:"consultation_date",type:"date",value:l.consultation_date,onChange:d,className:"bg-muted/50",readOnly:!0,title:"La date ne peut pas être modifiée"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"consultation_type",children:"Type de consultation"}),s.jsxs(je,{value:l.consultation_type,onValueChange:x=>h("consultation_type",x),children:[s.jsx(xe,{children:s.jsx(be,{})}),s.jsxs(ye,{children:[s.jsx(z,{value:"routine",children:"Routine"}),s.jsx(z,{value:"emergency",children:"Urgence"}),s.jsx(z,{value:"follow-up",children:"Suivi"}),s.jsx(z,{value:"vaccination",children:"Vaccination"}),s.jsx(z,{value:"surgery",children:"Chirurgie"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"weight",children:"Poids (kg)"}),s.jsx(Y,{id:"weight",type:"number",step:"0.1",min:"0.1",max:"999.9",placeholder:"Ex: 25.5",value:l.weight,onChange:d,title:"Poids en kilogrammes (0.1 à 999.9 kg)"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"temperature",children:"Température (°C)"}),s.jsx(Y,{id:"temperature",type:"number",step:"0.1",min:"30",max:"50",placeholder:"Ex: 38.5",value:l.temperature,onChange:d,title:"Température corporelle (30°C à 50°C)"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"symptoms",children:"Symptômes"}),s.jsx(Ue,{id:"symptoms",placeholder:"Décrivez les symptômes observés...",value:l.symptoms,onChange:d,rows:3,maxLength:1e3,title:"Maximum 1000 caractères"}),s.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[(l.symptoms||"").length,"/1000 caractères"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"diagnosis",children:"Diagnostic"}),s.jsx(Ue,{id:"diagnosis",placeholder:"Diagnostic posé...",value:l.diagnosis,onChange:d,rows:3,maxLength:1e3,title:"Maximum 1000 caractères"}),s.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[(l.diagnosis||"").length,"/1000 caractères"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"treatment",children:"Traitement"}),s.jsx(Ue,{id:"treatment",placeholder:"Traitement prescrit...",value:l.treatment,onChange:d,rows:3,maxLength:1e3,title:"Maximum 1000 caractères"}),s.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[(l.treatment||"").length,"/1000 caractères"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"follow_up_date",children:"Date de suivi"}),s.jsx(Y,{id:"follow_up_date",type:"date",value:l.follow_up_date,onChange:d,title:"Date recommandée pour le prochain suivi"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"follow_up_notes",children:"Notes de suivi"}),s.jsx(Ue,{id:"follow_up_notes",placeholder:"Notes pour le suivi...",value:l.follow_up_notes,onChange:d,rows:2,maxLength:500,title:"Maximum 500 caractères"}),s.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[(l.follow_up_notes||"").length,"/500 caractères"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"notes",children:"Notes supplémentaires"}),s.jsx(Ue,{id:"notes",placeholder:"Notes supplémentaires...",value:l.notes,onChange:d,rows:2,maxLength:2e3,title:"Maximum 2000 caractères"}),s.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[(l.notes||"").length,"/2000 caractères"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"status",children:"Statut"}),s.jsxs(je,{value:l.status,onValueChange:x=>h("status",x),children:[s.jsx(xe,{children:s.jsx(be,{})}),s.jsxs(ye,{children:[s.jsx(z,{value:"scheduled",children:"Programmé"}),s.jsx(z,{value:"in-progress",children:"En cours"}),s.jsx(z,{value:"completed",children:"Terminé"}),s.jsx(z,{value:"cancelled",children:"Annulé"})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(R,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:i.isPending,children:"Annuler"}),s.jsx(R,{type:"submit",disabled:i.isPending||!n,children:i.isPending?"Modification...":"Modifier"})]})]}):s.jsx("div",{className:"flex items-center justify-center py-8 text-muted-foreground",children:s.jsx("p",{children:"Aucune consultation sélectionnée"})})]})})}function vO({consultation:e}){const{settings:t}=At(),n=()=>{var r,a,i,o,l,c,u,d,h;try{const m=window.open("",`print_consultation_${e.id}`,"height=800,width=800");if(!m){alert("L'impression a été bloquée par le navigateur. Veuillez autoriser les popups pour ce site.");return}const f=`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Consultation - ${((r=e.animal)==null?void 0:r.name)||"Animal"}</title>
          <style>
            body {
              font-family: Arial, sans-serif;
              margin: 20px;
              line-height: 1.6;
            }
            .header {
              text-align: center;
              border-bottom: 2px solid #333;
              padding-bottom: 10px;
              margin-bottom: 20px;
            }
            .clinic-info {
              text-align: center;
              color: #666;
              margin-bottom: 30px;
            }
            .consultation-info {
              display: grid;
              grid-template-columns: 1fr 1fr;
              gap: 20px;
              margin-bottom: 30px;
            }
            .info-section {
              border: 1px solid #ddd;
              padding: 15px;
              border-radius: 5px;
            }
            .info-title {
              font-weight: bold;
              color: #333;
              margin-bottom: 10px;
              font-size: 14px;
              text-transform: uppercase;
            }
            .info-content {
              color: #666;
            }
            .medical-section {
              margin-bottom: 20px;
            }
            .medical-title {
              font-weight: bold;
              color: #333;
              margin-bottom: 8px;
              border-bottom: 1px solid #eee;
              padding-bottom: 4px;
            }
            .medical-content {
              color: #666;
              margin-bottom: 15px;
            }
            .vitals {
              display: grid;
              grid-template-columns: repeat(4, 1fr);
              gap: 15px;
              margin-bottom: 20px;
            }
            .vital-item {
              text-align: center;
              padding: 10px;
              border: 1px solid #ddd;
              border-radius: 5px;
            }
            .vital-label {
              font-size: 12px;
              color: #666;
              margin-bottom: 5px;
            }
            .vital-value {
              font-size: 18px;
              font-weight: bold;
              color: #333;
            }
            .footer {
              margin-top: 40px;
              text-align: center;
              color: #666;
              font-size: 12px;
              border-top: 1px solid #ddd;
              padding-top: 20px;
            }
            @media print {
              body { 
                margin: 0; 
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
              }
              .header { page-break-after: avoid; }
              @page { size: auto; margin: 10mm; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            <h1>${t.clinicName||"Clinique Vétérinaire"}</h1>
            <div class="clinic-info">
              <p>${t.address||""}</p>
              <p>Tél: ${t.phone||""} | Email: ${t.email||""}</p>
            </div>
            <h2>Rapport de Consultation</h2>
          </div>

          <div class="consultation-info">
            <div class="info-section">
              <div class="info-title">Informations Client</div>
              <div class="info-content">
                <strong>Nom:</strong> ${((a=e.client)==null?void 0:a.first_name)||""} ${((i=e.client)==null?void 0:i.last_name)||""}<br>
                <strong>Téléphone:</strong> ${((o=e.client)==null?void 0:o.phone)||"N/A"}<br>
                <strong>Email:</strong> ${((l=e.client)==null?void 0:l.email)||"N/A"}
              </div>
            </div>
            
            <div class="info-section">
              <div class="info-title">Informations Animal</div>
              <div class="info-content">
                <strong>Nom:</strong> ${((c=e.animal)==null?void 0:c.name)||"N/A"}<br>
                <strong>Espèce:</strong> ${((u=e.animal)==null?void 0:u.species)||"N/A"}<br>
                <strong>Race:</strong> ${((d=e.animal)==null?void 0:d.breed)||"N/A"}<br>
                <strong>Âge:</strong> ${(h=e.animal)!=null&&h.birth_date?Math.floor((new Date().getTime()-new Date(e.animal.birth_date).getTime())/(365.25*24*60*60*1e3))+" ans":"N/A"}
              </div>
            </div>
          </div>

          <div class="info-section" style="margin-bottom: 20px;">
            <div class="info-title">Détails de la Consultation</div>
            <div class="info-content">
              <strong>Date:</strong> ${new Date(e.consultation_date).toLocaleDateString("fr-FR")}<br>
              <strong>Type:</strong> ${e.consultation_type||"Routine"}<br>
              <strong>Statut:</strong> ${e.status||"Terminé"}
            </div>
          </div>

          ${e.weight||e.temperature||e.heart_rate||e.respiratory_rate?`
          <div class="vitals">
            ${e.weight?`
            <div class="vital-item">
              <div class="vital-label">Poids</div>
              <div class="vital-value">${e.weight} kg</div>
            </div>
            `:""}
            ${e.temperature?`
            <div class="vital-item">
              <div class="vital-label">Température</div>
              <div class="vital-value">${e.temperature}°C</div>
            </div>
            `:""}
            ${e.heart_rate?`
            <div class="vital-item">
              <div class="vital-label">Fréquence Cardiaque</div>
              <div class="vital-value">${e.heart_rate} bpm</div>
            </div>
            `:""}
            ${e.respiratory_rate?`
            <div class="vital-item">
              <div class="vital-label">Fréquence Respiratoire</div>
              <div class="vital-value">${e.respiratory_rate}/min</div>
            </div>
            `:""}
          </div>
          `:""}

          ${e.symptoms?`
          <div class="medical-section">
            <div class="medical-title">Symptômes</div>
            <div class="medical-content">${e.symptoms}</div>
          </div>
          `:""}

          ${e.diagnosis?`
          <div class="medical-section">
            <div class="medical-title">Diagnostic</div>
            <div class="medical-content">${e.diagnosis}</div>
          </div>
          `:""}

          ${e.treatment?`
          <div class="medical-section">
            <div class="medical-title">Traitement</div>
            <div class="medical-content">${e.treatment}</div>
          </div>
          `:""}

          ${e.notes?`
          <div class="medical-section">
            <div class="medical-title">Notes</div>
            <div class="medical-content">${e.notes}</div>
          </div>
          `:""}

          ${e.follow_up_date?`
          <div class="medical-section">
            <div class="medical-title">Suivi Programmé</div>
            <div class="medical-content">
              <strong>Date:</strong> ${new Date(e.follow_up_date).toLocaleDateString("fr-FR")}<br>
              ${e.follow_up_notes?`<strong>Notes:</strong> ${e.follow_up_notes}`:""}
            </div>
          </div>
          `:""}

          ${e.cost?`
          <div class="medical-section">
            <div class="medical-title">Coût de la Consultation</div>
            <div class="medical-content">
              <strong>${e.cost} ${t.currency||"EUR"}</strong>
            </div>
          </div>
          `:""}

          <div class="footer">
            <p>Rapport généré le ${new Date().toLocaleDateString("fr-FR")} à ${new Date().toLocaleTimeString("fr-FR")}</p>
            <p>Vétérinaire: ${e.veterinarian_id||"N/A"}</p>
          </div>
        </body>
      </html>
    `;m.document.open(),m.document.write(f),m.document.close(),m.onload=function(){try{setTimeout(()=>{m.focus(),m.print(),typeof m.onafterprint=="function"?m.onafterprint=function(){try{m.close()}catch(v){console.error("Error closing print window:",v)}}:setTimeout(()=>{try{m.close()}catch(v){console.error("Error closing print window after timeout:",v)}},2e3)},500)}catch(v){console.error("Error during print process:",v),alert("Une erreur s'est produite lors de l'impression. Veuillez réessayer.")}}}catch(m){console.error("Error in print function:",m),alert("Une erreur s'est produite lors de la préparation de l'impression. Veuillez réessayer.")}};return s.jsxs(R,{size:"sm",variant:"outline",onClick:n,className:"gap-1",children:[s.jsx($u,{className:"h-3 w-3"}),"Imprimer"]})}const fke=async e=>{try{const{data:{user:t},error:n}=await Se.auth.getUser();if(n||!t)return console.error("Authentication error:",n),{success:!1,message:"User not authenticated"};const{data:r,error:a}=await Se.from("consultations").select("id, animal_id, client_id, veterinarian_id").eq("id",e).single();if(a)return console.error(`Consultation not found: ${a.message}`),{success:!1,message:`Consultation not found: ${a.message}`};const{data:i,error:o}=await Se.from("prescriptions").select("id").eq("consultation_id",e);if(o)console.warn(`Could not fetch prescriptions: ${o.message}`);else if(i&&i.length>0)for(const d of i){const{error:h}=await Se.from("prescription_medications").delete().eq("prescription_id",d.id);h&&console.warn(`Could not delete medications for prescription ${d.id}: ${h.message}`)}const{error:l}=await Se.from("prescriptions").delete().eq("consultation_id",e);l&&console.warn(`Could not delete prescriptions: ${l.message}`);const c=["vaccinations","lab_results","antiparasitics"];for(const d of c)try{const{error:h}=await Se.from(d).delete().eq("consultation_id",e);h&&console.warn(`Could not delete from ${d}: ${h.message}`)}catch(h){console.warn(`Error with ${d}:`,h)}const{error:u}=await Se.from("consultations").delete().eq("id",e);return u?(console.error(`FAILED to delete consultation: ${u.message}`),{success:!1,message:`Failed to delete consultation: ${u.message}`}):{success:!0}}catch(t){return console.error("❌ CRITICAL ERROR during deletion:",t),{success:!1,message:`Critical error: ${(t==null?void 0:t.message)||"Unknown error"}`}}},Xd=j.forwardRef(({className:e,...t},n)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:n,className:De("w-full caption-bottom text-sm",e),...t})}));Xd.displayName="Table";const Jd=j.forwardRef(({className:e,...t},n)=>s.jsx("thead",{ref:n,className:De("[&_tr]:border-b",e),...t}));Jd.displayName="TableHeader";const Zd=j.forwardRef(({className:e,...t},n)=>s.jsx("tbody",{ref:n,className:De("[&_tr:last-child]:border-0",e),...t}));Zd.displayName="TableBody";const pke=j.forwardRef(({className:e,...t},n)=>s.jsx("tfoot",{ref:n,className:De("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));pke.displayName="TableFooter";const ma=j.forwardRef(({className:e,...t},n)=>s.jsx("tr",{ref:n,className:De("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));ma.displayName="TableRow";const ht=j.forwardRef(({className:e,...t},n)=>s.jsx("th",{ref:n,className:De("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));ht.displayName="TableHead";const mt=j.forwardRef(({className:e,...t},n)=>s.jsx("td",{ref:n,className:De("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));mt.displayName="TableCell";const gke=j.forwardRef(({className:e,...t},n)=>s.jsx("caption",{ref:n,className:De("mt-4 text-sm text-muted-foreground",e),...t}));gke.displayName="TableCaption";const vke=()=>{var re;const{data:e=[],isLoading:t}=Md(),{data:n=[]}=Yx();H3(),K3();const r=oee();At();const{toast:a}=it(),{currentView:i}=gc("consultations"),[o,l]=j.useState(""),[c,u]=j.useState("all"),[d,h]=j.useState(i),[m,f]=j.useState(!1),[v,p]=j.useState(!1),[g,x]=j.useState(null),[y,b]=j.useState(null),[C,w]=j.useState(!1),[N,S]=j.useState(null),[_,P]=j.useState(null),[A,E]=j.useState(!1),[k,I]=j.useState([]),[D,U]=j.useState(""),[B,K]=j.useState(!1),[T,$]=j.useState(null),G=V=>n.filter(le=>le.consultation_id===V),Q=e.filter(V=>{var qe,ot,tt;const le=`${((qe=V.client)==null?void 0:qe.first_name)||""} ${((ot=V.client)==null?void 0:ot.last_name)||""}`.trim(),W=((tt=V.animal)==null?void 0:tt.name)||"",X=le.toLowerCase().includes(o.toLowerCase())||W.toLowerCase().includes(o.toLowerCase())||V.symptoms&&V.symptoms.toLowerCase().includes(o.toLowerCase())||V.diagnosis&&V.diagnosis.toLowerCase().includes(o.toLowerCase());if(c==="all")return X;const pe=new Date(V.consultation_date),Re=(new Date().getTime()-pe.getTime())/(1e3*3600*24);switch(c){case"week":return X&&Re<=7;case"month":return X&&Re<=30;case"quarter":return X&&Re<=90;default:return X}}),ne=V=>{x(V),p(!0)},oe=V=>{S(V.animal_id),P(V.id),w(!0)},M=V=>{$(V),K(!0)},ue=async()=>{if(T)try{if((await fke(T.id)).success){a({title:"Succès",description:"La consultation a été supprimée avec succès."}),window.location.reload(),K(!1),$(null);return}r.mutate(T.id,{onSuccess:()=>{a({title:"Succès",description:"La consultation a été supprimée avec succès."}),K(!1),$(null)},onError:le=>{a({title:"Erreur",description:`Impossible de supprimer la consultation: ${le.message}`,variant:"destructive"}),K(!1),$(null)}})}catch(V){a({title:"Erreur",description:`Erreur inattendue: ${V.message||"Erreur inconnue"}`,variant:"destructive"}),K(!1),$(null)}},ve=V=>{b({clientId:V.client_id,animalId:V.animal_id,consultation_date:new Date().toISOString(),consultation_type:"follow-up",symptoms:"",diagnosis:"",treatment:"",notes:`Suivi de la consultation du ${new Date(V.consultation_date).toLocaleDateString("fr-FR")}`,status:"scheduled"}),f(!0)},ce=V=>{var W;const le=G(V.id);I(le),U(((W=V.animal)==null?void 0:W.name)||"Animal inconnu"),E(!0)};return s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-4 sm:py-8 space-y-4 sm:space-y-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Consultations"}),s.jsx("p",{className:"text-muted-foreground mt-1 sm:mt-2 text-sm sm:text-base",children:"Gérez et consultez tous les dossiers médicaux"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex border rounded-lg p-1",children:[s.jsx(R,{variant:d==="cards"?"default":"ghost",size:"sm",onClick:()=>h("cards"),className:"px-3",children:s.jsx(Eo,{className:"h-4 w-4"})}),s.jsx(R,{variant:d==="table"?"default":"ghost",size:"sm",onClick:()=>h("table"),className:"px-3",children:s.jsx(Ni,{className:"h-4 w-4"})})]}),s.jsxs(R,{className:"gap-2 medical-glow text-sm sm:text-base",onClick:()=>f(!0),children:[s.jsx(Ze,{className:"h-4 w-4"}),"Nouvelle Consultation"]})]})]}),s.jsxs(ee,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2 text-base sm:text-lg",children:[s.jsx(Lo,{className:"h-4 sm:h-5 w-4 sm:w-5"}),"Rechercher et filtrer"]})}),s.jsx(te,{className:"space-y-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsx(Y,{placeholder:"Rechercher par client, animal, symptômes ou diagnostic...",value:o,onChange:V=>l(V.target.value),className:"max-w-full sm:max-w-md"}),s.jsxs(je,{value:c,onValueChange:u,children:[s.jsx(xe,{className:"w-full sm:w-48",children:s.jsx(be,{placeholder:"Période"})}),s.jsxs(ye,{children:[s.jsx(z,{value:"all",children:"Toutes les périodes"}),s.jsx(z,{value:"week",children:"Cette semaine"}),s.jsx(z,{value:"month",children:"Ce mois"}),s.jsx(z,{value:"quarter",children:"Ce trimestre"})]})]})]})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h3",{className:"text-base sm:text-lg font-semibold",children:["Consultations récentes (",Q.length,")"]}),Q.length===0?s.jsx(ee,{children:s.jsxs(te,{className:"p-6 sm:p-8 text-center text-muted-foreground",children:[s.jsx(_r,{className:"h-10 sm:h-12 w-10 sm:w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{className:"text-sm sm:text-base",children:"Aucune consultation trouvée"}),s.jsx("p",{className:"text-xs sm:text-sm",children:"Commencez par créer votre première consultation"})]})}):d==="cards"?Q.map(V=>{var le,W,X;return s.jsx(ee,{className:"card-hover",children:s.jsx(te,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[s.jsx("h4",{className:"text-base sm:text-lg font-semibold",children:((le=V.animal)==null?void 0:le.name)||"Animal inconnu"}),s.jsx(Pe,{variant:"secondary",className:"w-fit",children:"Consultation"}),s.jsx("span",{className:"text-xs sm:text-sm text-muted-foreground",children:new Date(V.consultation_date).toLocaleDateString("fr-FR")})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-6 text-xs sm:text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Xn,{className:"h-3 sm:h-4 w-3 sm:w-4"}),(W=V.client)==null?void 0:W.first_name," ",(X=V.client)==null?void 0:X.last_name]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(_r,{className:"h-3 w-3"}),"Consultation #",V.id]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 text-xs sm:text-sm",children:[V.temperature&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(vm,{className:"h-3 sm:h-4 w-3 sm:w-4 text-primary"}),V.temperature,"°C"]}),V.weight&&s.jsxs("span",{children:[V.weight," kg"]})]})]}),s.jsxs("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[V.symptoms&&s.jsxs(s.Fragment,{children:[s.jsx("h5",{className:"font-medium text-sm sm:text-base",children:"Symptômes:"}),s.jsx("p",{className:"text-xs sm:text-sm",children:V.symptoms})]}),V.diagnosis&&s.jsxs(s.Fragment,{children:[s.jsx("h5",{className:"font-medium text-sm sm:text-base",children:"Diagnostic:"}),s.jsx("p",{className:"text-xs sm:text-sm",children:V.diagnosis})]})]}),s.jsxs("div",{className:"space-y-2",children:[V.treatment&&s.jsxs(s.Fragment,{children:[s.jsx("h5",{className:"font-medium text-sm sm:text-base",children:"Traitement:"}),s.jsx("p",{className:"text-xs sm:text-sm",children:V.treatment})]}),(()=>{const pe=G(V.id);return pe.length>0&&s.jsxs(s.Fragment,{children:[s.jsxs("h5",{className:"font-medium flex items-center gap-1 text-sm sm:text-base",children:[s.jsx(Zi,{className:"h-3 sm:h-4 w-3 sm:w-4"}),"Prescriptions (",pe.length,"):"]}),s.jsx("div",{className:"space-y-1",children:pe.map(fe=>s.jsxs("div",{className:"text-xs sm:text-sm bg-blue-50 p-2 rounded border-l-2 border-blue-200",children:[s.jsxs("div",{className:"font-medium text-blue-800",children:["Prescription #",fe.id.slice(-8)]}),s.jsxs("div",{className:"text-blue-600 text-xs",children:[new Date(fe.prescription_date).toLocaleDateString("fr-FR")," - Status: ",fe.status]}),fe.medications&&fe.medications.length>0&&s.jsxs("div",{className:"mt-1",children:[s.jsx("div",{className:"text-xs font-medium text-blue-700",children:"Médicaments:"}),fe.medications.map((Re,qe)=>s.jsxs("div",{className:"text-xs text-blue-600 ml-2",children:["• ",Re.medication_name," ",Re.dosage&&`- ${Re.dosage}`," ",Re.quantity&&`(${Re.quantity})`]},qe))]})]},fe.id))})]})})()]})]}),V.notes&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h5",{className:"font-medium text-sm sm:text-base",children:"Notes:"}),s.jsx("p",{className:"text-xs sm:text-sm bg-muted p-2 sm:p-3 rounded",children:V.notes})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between pt-2 border-t gap-2",children:[s.jsxs("span",{className:"text-xs sm:text-sm text-muted-foreground",children:[s.jsx(Ge,{className:"h-3 w-3 inline mr-1"}),V.followUp?`Suivi: ${V.followUp}`:"Aucun suivi prévu"]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(vO,{consultation:V}),s.jsxs(R,{size:"sm",variant:"outline",onClick:()=>ne(V),className:"gap-1 text-xs sm:text-sm",children:[s.jsx($t,{className:"h-3 w-3"}),"Modifier"]}),s.jsxs(R,{size:"sm",variant:"default",onClick:()=>oe(V),className:"gap-1 text-xs sm:text-sm",children:[s.jsx(Zi,{className:"h-3 w-3"}),"Prescription"]}),s.jsxs(R,{size:"sm",variant:"outline",onClick:()=>M(V),className:"gap-1 text-red-600 hover:text-red-700 hover:bg-red-50",children:[s.jsx(Vt,{className:"h-3 w-3"}),"Supprimer"]}),s.jsx(R,{size:"sm",onClick:()=>ve(V),className:"text-xs sm:text-sm",children:"Nouveau suivi"})]})]})]})})},V.id)}):s.jsx(ee,{children:s.jsx(te,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Xd,{children:[s.jsx(Jd,{children:s.jsxs(ma,{children:[s.jsx(ht,{className:"text-xs sm:text-sm",children:"Animal / Client"}),s.jsx(ht,{className:"text-xs sm:text-sm",children:"Date"}),s.jsx(ht,{className:"text-xs sm:text-sm",children:"Symptômes"}),s.jsx(ht,{className:"text-xs sm:text-sm",children:"Diagnostic"}),s.jsx(ht,{className:"text-xs sm:text-sm",children:"Température"}),s.jsx(ht,{className:"text-xs sm:text-sm",children:"Prescriptions"}),s.jsx(ht,{className:"text-xs sm:text-sm",children:"Actions"})]})}),s.jsx(Zd,{children:Q.map(V=>{var le,W,X;return s.jsxs(ma,{children:[s.jsx(mt,{className:"text-xs sm:text-sm",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:(le=V.animal)==null?void 0:le.name}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[(W=V.client)==null?void 0:W.first_name," ",(X=V.client)==null?void 0:X.last_name]})]})}),s.jsx(mt,{className:"text-xs sm:text-sm",children:new Date(V.consultation_date).toLocaleDateString("fr-FR")}),s.jsx(mt,{className:"text-xs sm:text-sm",children:s.jsx("div",{className:"max-w-xs truncate",children:V.symptoms||"-"})}),s.jsx(mt,{className:"text-xs sm:text-sm",children:s.jsx("div",{className:"max-w-xs truncate",children:V.diagnosis||"-"})}),s.jsx(mt,{className:"text-xs sm:text-sm",children:V.temperature?`${V.temperature}°C`:"-"}),s.jsx(mt,{className:"text-xs sm:text-sm",children:(()=>{const pe=G(V.id);return pe.length>0?s.jsx("div",{className:"space-y-1",children:s.jsxs("div",{className:"flex items-center gap-2 cursor-pointer p-1 rounded transition-colors w-fit",onClick:()=>ce(V),title:"Cliquer pour voir les détails des prescriptions",children:[s.jsxs(Pe,{variant:"outline",className:"text-xs",children:[pe.length," prescription",pe.length>1?"s":""]}),s.jsx(An,{className:"h-3 w-3 text-blue-600 hover:text-blue-800"})]})}):s.jsx("span",{className:"text-muted-foreground text-xs",children:"Aucune"})})()}),s.jsx(mt,{className:"text-xs sm:text-sm",children:s.jsxs("div",{className:"flex gap-1 flex-wrap",children:[s.jsx(vO,{consultation:V}),s.jsx(R,{size:"sm",variant:"outline",onClick:()=>ne(V),title:"Modifier",children:s.jsx($t,{className:"h-3 w-3"})}),s.jsx(R,{size:"sm",variant:"default",onClick:()=>oe(V),title:"Nouvelle Prescription",children:s.jsx(Zi,{className:"h-3 w-3"})}),s.jsx(R,{size:"sm",variant:"outline",onClick:()=>M(V),className:"text-red-600 hover:text-red-700 hover:bg-red-50",title:"Supprimer",children:s.jsx(Vt,{className:"h-3 w-3"})})]})})]},V.id)})})]})})})})]}),s.jsx($d,{open:m,onOpenChange:V=>{f(V),V||b(null)},prefillData:y||void 0}),s.jsx(mke,{open:v,onOpenChange:p,consultation:g}),N&&_&&s.jsx(yC,{open:C,onOpenChange:w,petId:N,consultationId:_}),s.jsx(Qe,{open:A,onOpenChange:E,children:s.jsxs(Ye,{className:"max-w-full sm:max-w-4xl max-h-[80vh] overflow-y-auto mx-4",children:[s.jsxs(Xe,{children:[s.jsxs(Je,{className:"flex items-center gap-2 text-base sm:text-lg",children:[s.jsx(Zi,{className:"h-4 sm:h-5 w-4 sm:w-5"}),"Prescriptions pour ",D]}),s.jsxs(Bt,{className:"text-sm",children:["Détails des ",k.length," prescription",k.length>1?"s":""," associée",k.length>1?"s":""," à cette consultation"]})]}),s.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[k.map((V,le)=>s.jsxs(ee,{className:"border-l-4 border-l-primary",children:[s.jsxs(he,{className:"pb-3",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[s.jsxs(me,{className:"text-base sm:text-lg",children:["Prescription #",V.id.slice(-8)]}),s.jsx(Pe,{variant:V.status==="active"?"default":V.status==="completed"?"secondary":"destructive",className:"text-xs w-fit",children:V.status})]}),s.jsxs("div",{className:"text-xs sm:text-sm text-muted-foreground",children:["Date: ",new Date(V.prescription_date).toLocaleDateString("fr-FR")," à ",new Date(V.prescription_date).toLocaleTimeString("fr-FR"),V.valid_until&&s.jsxs("span",{className:"ml-0 sm:ml-4 block sm:inline",children:["Valide jusqu'au: ",new Date(V.valid_until).toLocaleDateString("fr-FR")]})]})]}),s.jsxs(te,{className:"space-y-4",children:[V.diagnosis&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-sm mb-1",children:"Diagnostic:"}),s.jsx("p",{className:"text-sm bg-muted p-2 rounded",children:V.diagnosis})]}),V.medications&&V.medications.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium text-sm mb-2",children:["Médicaments (",V.medications.length,"):"]}),s.jsx("div",{className:"grid gap-3 grid-cols-1 sm:grid-cols-2",children:V.medications.map((W,X)=>s.jsxs("div",{className:"bg-muted p-3 rounded-lg",children:[s.jsx("div",{className:"font-medium text-sm",children:W.medication_name}),s.jsxs("div",{className:"text-xs space-y-1 mt-1",children:[W.dosage&&s.jsxs("div",{children:["Dosage: ",W.dosage]}),W.frequency&&s.jsxs("div",{children:["Fréquence: ",W.frequency]}),W.duration&&s.jsxs("div",{children:["Durée: ",W.duration]}),W.quantity&&s.jsxs("div",{children:["Quantité: ",W.quantity]}),W.route&&s.jsxs("div",{children:["Voie: ",W.route]})]}),W.instructions&&s.jsxs("div",{className:"mt-2 text-xs bg-background p-2 rounded border",children:[s.jsx("span",{className:"font-medium",children:"Instructions: "}),W.instructions]})]},X))})]}),V.notes&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-sm mb-1",children:"Notes:"}),s.jsx("p",{className:"text-sm bg-muted p-2 rounded",children:V.notes})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 text-xs text-muted-foreground pt-2 border-t",children:[s.jsxs("span",{children:["Renouvellements: ",V.refill_count||0]}),s.jsxs("span",{children:["Créée le: ",new Date(V.created_at).toLocaleDateString("fr-FR")]}),V.updated_at!==V.created_at&&s.jsxs("span",{children:["Modifiée le: ",new Date(V.updated_at).toLocaleDateString("fr-FR")]})]})]})]},V.id)),k.length===0&&s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Zi,{className:"h-10 sm:h-12 w-10 sm:w-12 mx-auto mb-4 text-muted-foreground/50"}),s.jsx("p",{className:"text-sm",children:"Aucune prescription trouvée pour cette consultation"})]})]})]})}),s.jsx(jC,{open:B,onOpenChange:K,children:s.jsxs(Hy,{children:[s.jsxs(Ky,{children:[s.jsx(Yy,{children:"Confirmer la suppression"}),s.jsxs(Qy,{children:["Êtes-vous sûr de vouloir supprimer cette consultation pour"," ",s.jsx("strong",{children:((re=T==null?void 0:T.animal)==null?void 0:re.name)||"cet animal"})," ?",s.jsx("br",{}),s.jsxs("span",{className:"text-sm text-muted-foreground mt-2 block",children:["Date: ",T&&new Date(T.consultation_date).toLocaleDateString("fr-FR")]}),s.jsx("br",{}),"Cette action est irréversible et supprimera également toutes les prescriptions associées."]})]}),s.jsxs(Gy,{children:[s.jsx(Jy,{onClick:()=>$(null),children:"Annuler"}),s.jsx(Xy,{onClick:ue,className:"bg-red-600 hover:bg-red-700",children:"Supprimer"})]})]})})]})},xke=({consultation:e,open:t,onOpenChange:n,onEdit:r})=>{if(!e)return null;const{getClientById:a,getPetById:i}=bt(),o=a(e.clientId),l=i(e.petId);return s.jsx(Qe,{open:t,onOpenChange:n,children:s.jsxs(Ye,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(Xe,{children:[s.jsxs(Je,{children:["Consultation #",e.id," - ",$a(e.date)]}),s.jsx(Bt,{children:"Détails de la consultation générale"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsx(Ge,{className:"h-5 w-5"}),s.jsx("h3",{className:"text-lg font-semibold",children:e.purpose||"Consultation générale"})]}),s.jsxs("div",{className:"flex gap-8 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ft,{className:"h-4 w-4"}),l==null?void 0:l.name," (",l==null?void 0:l.type,")"]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Xn,{className:"h-4 w-4"}),o==null?void 0:o.name]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Pn,{className:"h-4 w-4"}),e.veterinarian]})]}),e.symptoms&&s.jsx(ee,{children:s.jsx(te,{children:s.jsxs("p",{children:[s.jsx("strong",{children:"Symptômes:"})," ",e.symptoms]})})}),s.jsxs(Ei,{defaultValue:"overview",className:"space-y-4",children:[s.jsxs(Ha,{className:"grid grid-cols-2",children:[s.jsx(Mt,{value:"overview",children:"Détails"}),s.jsx(Mt,{value:"prescriptions",children:"Prescriptions"})]}),s.jsx(It,{value:"overview",children:s.jsx(ee,{children:s.jsxs(te,{className:"space-y-2 text-sm",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Motif:"})," ",e.purpose||"Non spécifié"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Notes:"})," ",e.notes||"Aucune"]}),e.photos&&e.photos.length>0&&s.jsxs("div",{className:"pt-4",children:[s.jsx("h5",{className:"font-medium mb-2",children:"Photos de la consultation"}),s.jsx("div",{className:"flex gap-2 overflow-x-auto",children:e.photos.map((c,u)=>s.jsx("div",{className:"relative",children:s.jsx("img",{src:c,alt:`consult-photo-${u}`,className:"h-32 w-32 object-cover rounded cursor-pointer hover:opacity-80"})},u))})]})]})})}),s.jsx(It,{value:"prescriptions",children:s.jsx(w8,{petId:e.petId,consultationId:e.id})})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[s.jsxs(R,{variant:"outline",onClick:r,children:[s.jsx($t,{className:"h-4 w-4"})," Modifier"]}),s.jsx(S8,{consultation:e})]})]})})};function yke({prescription:e}){const{settings:t}=At(),{logo:n,clinicName:r,address:a,phone:i,email:o,website:l,currency:c}=t,d=e.medications.map(f=>f.cost*(f.quantity||1)).reduce((f,v)=>f+v,0),h=()=>{if(!e||!e.petName||!e.clientName)return;const f=window.open("","_blank");if(!f)return;const v=m();f.document.write(v),f.document.close(),setTimeout(()=>{f.print(),f.close()},500)},m=()=>`
      <html>
        <head>
          <title>Facture Prescription - ${e.petName}</title>
          <style>
            body {
              font-family: Arial, sans-serif;
              margin: 20px;
              line-height: 1.6;
            }
            .header {
              display: flex;
              align-items: center;
              justify-content: space-between;
              margin-bottom: 30px;
              border-bottom: 2px solid #333;
              padding-bottom: 20px;
            }
            .clinic-info {
              text-align: center;
              flex: 1;
            }
            .clinic-info h1 {
              font-size: 24px;
              font-weight: bold;
              margin-bottom: 10px;
            }
            .clinic-info p {
              font-size: 14px;
              margin: 5px 0;
            }
            .invoice-section {
              margin-bottom: 30px;
            }
            .invoice-section h2 {
              font-size: 20px;
              font-weight: 600;
              margin-bottom: 15px;
            }
            .grid {
              display: grid;
              grid-template-columns: 1fr 1fr;
              gap: 30px;
              margin-bottom: 15px;
            }
            table {
              width: 100%;
              border-collapse: collapse;
              margin-bottom: 20px;
            }
            th, td {
              border: 1px solid #ddd;
              padding: 12px;
              text-align: left;
            }
            th {
              background-color: #f2f2f2;
              font-weight: bold;
            }
            .total-row {
              font-weight: bold;
              background-color: #f8f9fa;
            }
            .print-hidden {
              display: none;
            }
            @media print {
              body { margin: 0; }
              .print-hidden { display: none !important; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            ${n?`<img src="${n}" alt="Logo clinique" style="height:60px;width:60px;object-fit:contain;"/>`:'<div style="width:60px;"></div>'}
            <div class="clinic-info">
              <h1>${r}</h1>
              <p>${a}</p>
              <p>${i} | ${o}</p>
              ${l?`<p>${l}</p>`:""}
            </div>
            <div style="width:60px;"></div>
          </div>

          <div class="invoice-section">
            <h2>Ordonnance</h2>
            <div class="grid">
              <div>
                <p><strong>Date :</strong> ${e.date}</p>
                <p><strong>Patient :</strong> ${e.petName} (${e.clientName})</p>
              </div>
              <div>
                <p><strong>Prescrit par :</strong> ${e.prescribedBy}</p>
                <p><strong>Diagnostic :</strong> ${e.diagnosis}</p>
              </div>
            </div>
          </div>

          <div class="invoice-section">
            <h2>Détail des médicaments</h2>
            <table>
              <thead>
                <tr>
                  <th>Médicament</th>
                  <th>Quantité</th>
                  <th>Prix unitaire</th>
                  <th>Total</th>
                </tr>
              </thead>
              <tbody>
                ${e.medications.map(f=>{const v=f.cost*(f.quantity||1);return`
                    <tr>
                      <td>
                        <strong>${f.name}</strong><br>
                        <small>${f.dosage} - ${f.frequency}</small>
                      </td>
                      <td>${f.quantity||1}</td>
                      <td>${f.cost.toFixed(2)} ${c}</td>
                      <td>${v.toFixed(2)} ${c}</td>
                    </tr>
                  `}).join("")}
                <tr class="total-row">
                  <td colspan="3"><strong>Total</strong></td>
                  <td><strong>${d.toFixed(2)} ${c}</strong></td>
                </tr>
              </tbody>
            </table>
          </div>

          ${e.instructions?`
            <div class="invoice-section">
              <h2>Instructions</h2>
              <p>${e.instructions}</p>
            </div>
          `:""}

          <div style="margin-top: 50px; text-align: center;">
            <div style="border-top: 1px solid #333; width: 200px; margin: 20px auto;"></div>
            <p>Signature du vétérinaire</p>
          </div>
        </body>
      </html>
    `;return s.jsxs("div",{className:"p-8 max-w-screen-lg mx-auto bg-white text-gray-800",children:[s.jsxs("header",{className:"flex items-center justify-between mb-8",children:[n&&s.jsx("img",{src:n,alt:"Logo clinique",className:"h-16 w-16 object-contain"}),s.jsxs("div",{className:"text-center flex-1",children:[s.jsx("h1",{className:"text-2xl font-bold",children:r}),s.jsx("p",{className:"text-sm",children:a}),s.jsxs("p",{className:"text-sm",children:[i," | ",o]}),l&&s.jsx("p",{className:"text-sm",children:l})]}),s.jsx("div",{children:s.jsx(R,{variant:"outline",onClick:h,className:"uppercase text-sm",children:"Imprimer"})})]}),s.jsxs("section",{className:"mb-12",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Ordonnance"}),s.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-4",children:[s.jsxs("div",{children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Date :"})," ",e.date]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Patient :"})," ",e.petName," (",e.clientName,")"]})]}),s.jsxs("div",{children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Prescrit par :"})," ",e.prescribedBy]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Diagnostic :"})," ",e.diagnosis]})]})]}),s.jsxs("table",{className:"w-full border-collapse",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"border-b py-2 text-left",children:"Médicament"}),s.jsx("th",{className:"border-b py-2 text-left",children:"Dosage"}),s.jsx("th",{className:"border-b py-2 text-left",children:"Fréquence"}),s.jsx("th",{className:"border-b py-2 text-left",children:"Durée"})]})}),s.jsx("tbody",{children:e.medications.map(f=>s.jsxs("tr",{className:"border-b",children:[s.jsx("td",{className:"py-2",children:f.name}),s.jsx("td",{className:"py-2",children:f.dosage}),s.jsx("td",{className:"py-2",children:f.frequency}),s.jsx("td",{className:"py-2",children:f.duration})]},f.id))})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Facture"}),s.jsxs("table",{className:"w-full border-collapse mb-4",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"border-b py-2 text-left",children:"Produit / Service"}),s.jsx("th",{className:"border-b py-2 text-right",children:"Quantité"}),s.jsxs("th",{className:"border-b py-2 text-right",children:["Prix Unitaire (",c,")"]}),s.jsxs("th",{className:"border-b py-2 text-right",children:["Total (",c,")"]})]})}),s.jsx("tbody",{children:e.medications.map(f=>{const v=f.quantity||1,p=(f.cost||0)*v;return s.jsxs("tr",{className:"border-b",children:[s.jsx("td",{className:"py-2",children:f.name}),s.jsx("td",{className:"py-2 text-right",children:v}),s.jsx("td",{className:"py-2 text-right",children:f.cost.toFixed(2)}),s.jsx("td",{className:"py-2 text-right",children:p.toFixed(2)})]},f.id)})}),s.jsx("tfoot",{children:s.jsxs("tr",{children:[s.jsx("td",{colSpan:3,className:"py-2 text-right font-semibold",children:"Montant total :"}),s.jsx("td",{className:"py-2 text-right font-semibold",children:d.toFixed(2)})]})})]})]})]})}const jke=()=>{var B,K;const{data:e=[]}=Md(),{data:t=[]}=Yx();ir(),or();const n=T=>{var $,G,Q,ne;return{id:T.id,consultationId:T.consultation_id,clientId:T.client_id,clientName:`${(($=T.client)==null?void 0:$.first_name)||""} ${((G=T.client)==null?void 0:G.last_name)||""}`.trim(),petId:T.animal_id,petName:((Q=T.animal)==null?void 0:Q.name)||"",date:T.prescription_date,prescribedBy:"Non spécifié",diagnosis:T.diagnosis||"",medications:((ne=T.medications)==null?void 0:ne.map(oe=>({id:oe.id,name:oe.medication_name,dosage:oe.dosage||"",frequency:oe.frequency||"",duration:oe.duration||"",instructions:oe.instructions||"",quantity:oe.quantity||1,unit:"unit",cost:0})))||[],instructions:T.notes||"",duration:T.valid_until||"",followUpDate:void 0,status:T.status||"active",notes:T.notes||"",createdAt:T.created_at}},[r,a]=j.useState(""),[i,o]=j.useState("all"),[l,c]=j.useState("all"),[u,d]=j.useState("all"),[h,m]=j.useState(""),[f,v]=j.useState("cards"),[p,g]=j.useState(!1),[x,y]=j.useState(null),[b,C]=j.useState(!1),[w,N]=j.useState(null),[S,_]=j.useState(!1),[P,A]=j.useState(null),E=[...e.map(T=>{var $,G,Q,ne,oe;return{id:T.id,date:(($=T.consultation_date)==null?void 0:$.split("T")[0])||"",petName:((G=T.animal)==null?void 0:G.name)||"",petType:((Q=T.animal)==null?void 0:Q.species)||"",client:`${((ne=T.client)==null?void 0:ne.first_name)||""} ${((oe=T.client)==null?void 0:oe.last_name)||""}`.trim(),type:"consultation",title:T.diagnosis||"Consultation",veterinarian:T.notes||"Non spécifié",details:T.symptoms||"",prescriptions:[],cost:T.cost||0,status:"completed"}})].sort((T,$)=>new Date($.date).getTime()-new Date(T.date).getTime()),k=t.map(T=>{var $,G,Q,ne,oe,M,ue,ve,ce,re,V;return{id:T.id,date:(($=T.prescription_date)==null?void 0:$.split("T")[0])||"",petName:((G=T.animal)==null?void 0:G.name)||"",client:`${((Q=T.client)==null?void 0:Q.first_name)||""} ${((ne=T.client)==null?void 0:ne.last_name)||""}`.trim(),medication:((oe=T.medications)==null?void 0:oe.map(le=>le.medication_name).join(", "))||"",dosage:((ue=(M=T.medications)==null?void 0:M[0])==null?void 0:ue.dosage)||"",frequency:((ce=(ve=T.medications)==null?void 0:ve[0])==null?void 0:ce.frequency)||"",duration:((V=(re=T.medications)==null?void 0:re[0])==null?void 0:V.duration)||"",veterinarian:"Non spécifié",status:T.status}}),I=E.filter(T=>{const $=T.petName.toLowerCase().includes(r.toLowerCase())||T.client.toLowerCase().includes(r.toLowerCase())||T.title.toLowerCase().includes(r.toLowerCase()),G=i==="all"||T.petName.toLowerCase().includes(i.toLowerCase()),Q=l==="all"||T.type===l;let ne=!0;if(u==="today"){const oe=new Date().toISOString().split("T")[0];ne=T.date===oe}else if(u==="week"){const oe=new Date(T.date),M=new Date,ue=M.getDay(),ve=M.getDate()-ue+(ue===0?-6:1),ce=new Date(M.setDate(ve)),re=new Date(ce);re.setDate(ce.getDate()+6),ne=oe>=ce&&oe<=re}else u==="specific"&&(ne=h&&T.date===h);return $&&G&&Q&&ne}),D=k.filter(T=>{const $=T.petName.toLowerCase().includes(r.toLowerCase())||T.client.toLowerCase().includes(r.toLowerCase())||T.medication.toLowerCase().includes(r.toLowerCase()),G=i==="all"||T.petName.toLowerCase().includes(i.toLowerCase()),Q=l==="all"||!0;let ne=!0;if(u==="today"){const oe=new Date().toISOString().split("T")[0];ne=T.date===oe}else if(u==="week"){const oe=new Date(T.date),M=new Date,ue=M.getDay(),ve=M.getDate()-ue+(ue===0?-6:1),ce=new Date(M.setDate(ve)),re=new Date(ce);re.setDate(ce.getDate()+6),ne=oe>=ce&&oe<=re}else u==="specific"&&(ne=h&&T.date===h);return $&&G&&Q&&ne}),U={active:"bg-blue-100 text-blue-800 hover:bg-blue-200",completed:"bg-green-100 text-green-800 hover:bg-green-200",discontinued:"bg-red-100 text-red-800 hover:bg-red-200"};return s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-8 space-y-8 max-w-7xl",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Historique Médical"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Consultez l'historique complet des soins et traitements"})]}),s.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[s.jsxs(R,{size:"sm",variant:f==="cards"?"default":"outline",onClick:()=>v("cards"),className:"gap-2 flex-1 sm:flex-none",children:[s.jsx(Eo,{className:"h-4 w-4"}),"Cartes"]}),s.jsxs(R,{size:"sm",variant:f==="table"?"default":"outline",onClick:()=>v("table"),className:"gap-2 flex-1 sm:flex-none",children:[s.jsx(Ni,{className:"h-4 w-4"}),"Tableau"]})]})]}),s.jsxs(ee,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(Lo,{className:"h-5 w-5"}),"Rechercher"]})}),s.jsxs(te,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(Y,{placeholder:"Rechercher par nom, animal, diagnostic...",value:r,onChange:T=>a(T.target.value)}),s.jsxs(je,{value:i,onValueChange:o,children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Filtrer par animal"})}),s.jsxs(ye,{children:[s.jsx(z,{value:"all",children:"Tous les animaux"}),Array.from(new Set(E.map(T=>T.petName))).map(T=>s.jsx(z,{value:T,children:T},T))]})]}),s.jsxs(je,{value:l,onValueChange:c,children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Filtrer par type"})}),s.jsxs(ye,{children:[s.jsx(z,{value:"all",children:"Tous types"}),s.jsx(z,{value:"consultation",children:"Consultations"}),s.jsx(z,{value:"treatment",children:"Traitements"}),s.jsx(z,{value:"surgery",children:"Chirurgies"})]})]}),s.jsxs(je,{value:u,onValueChange:d,children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Période"})}),s.jsxs(ye,{children:[s.jsx(z,{value:"all",children:"Toute période"}),s.jsx(z,{value:"today",children:"Aujourd'hui"}),s.jsx(z,{value:"week",children:"Cette semaine"}),s.jsx(z,{value:"specific",children:"Date spécifique"})]})]})]}),u==="specific"&&s.jsx(Y,{type:"date",value:h,onChange:T=>m(T.target.value),className:"max-w-xs"})]})]}),s.jsxs(Ei,{defaultValue:"medical",className:"space-y-4",children:[s.jsxs(Ha,{className:"grid w-full grid-cols-2",children:[s.jsxs(Mt,{value:"medical",className:"gap-2",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Historique Médical"]}),s.jsxs(Mt,{value:"prescriptions",className:"gap-2",children:[s.jsx(ft,{className:"h-4 w-4"}),"Prescriptions"]})]}),s.jsxs(It,{value:"medical",className:"space-y-4",children:[s.jsx("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:s.jsxs("h3",{className:"text-lg font-semibold",children:["Historique des consultations (",I.length," entrées)"]})}),f==="cards"?s.jsx("div",{className:"grid gap-6",children:I.map(T=>s.jsx(ee,{className:"card-hover",children:s.jsx(te,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row items-start justify-between gap-4",children:[s.jsxs("div",{className:"space-y-3 flex-1",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ge,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium text-sm sm:text-base",children:new Date(T.date).toLocaleDateString("fr-FR")})]}),s.jsx(Pe,{variant:"outline",className:"text-xs",children:T.type})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-semibold",children:T.title}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 text-sm text-muted-foreground mt-1",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ft,{className:"h-3 w-3"}),T.petName]}),s.jsxs("span",{children:["Client: ",T.client]}),s.jsxs("span",{children:["Vétérinaire: ",T.veterinarian]})]})]}),T.details&&s.jsx("p",{className:"text-sm text-muted-foreground",children:T.details}),T.cost&&s.jsx("div",{className:"text-sm",children:s.jsxs("span",{className:"font-medium",children:["Coût: ",T.cost," MAD"]})})]}),s.jsx("div",{className:"flex gap-2 w-full sm:w-auto justify-end",children:s.jsx(R,{size:"sm",variant:"outline",className:"flex-1 sm:flex-none",onClick:()=>{const $=e.find(G=>G.id===T.id);$&&y({...$,petId:$.animal_id,clientId:$.client_id}),g(!0)},children:s.jsx(An,{className:"h-4 w-4"})})})]})})},T.id))}):s.jsx(ee,{children:s.jsx(te,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full min-w-[600px]",children:[s.jsx("thead",{className:"border-b",children:s.jsxs("tr",{className:"text-left",children:[s.jsx("th",{className:"p-4 font-medium",children:"Date"}),s.jsx("th",{className:"p-4 font-medium",children:"Type"}),s.jsx("th",{className:"p-4 font-medium",children:"Titre"}),s.jsx("th",{className:"p-4 font-medium",children:"Animal"}),s.jsx("th",{className:"p-4 font-medium",children:"Client"}),s.jsx("th",{className:"p-4 font-medium",children:"Vétérinaire"}),s.jsx("th",{className:"p-4 font-medium",children:"Actions"})]})}),s.jsx("tbody",{children:I.map(T=>s.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[s.jsx("td",{className:"p-4",children:new Date(T.date).toLocaleDateString("fr-FR")}),s.jsx("td",{className:"p-4",children:s.jsx(Pe,{variant:"outline",className:"text-xs",children:T.type})}),s.jsxs("td",{className:"p-4",children:[s.jsx("div",{className:"font-medium",children:T.title}),T.details&&s.jsx("div",{className:"text-sm text-muted-foreground",children:T.details})]}),s.jsx("td",{className:"p-4",children:T.petName}),s.jsx("td",{className:"p-4",children:T.client}),s.jsx("td",{className:"p-4",children:T.veterinarian}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.jsx(R,{size:"sm",variant:"outline",onClick:()=>{const $=e.find(G=>G.id===T.id);$&&y({...$,petId:$.animal_id,clientId:$.client_id}),g(!0)},children:s.jsx(An,{className:"h-4 w-4"})}),s.jsx(R,{size:"sm",variant:"outline",children:s.jsx($t,{className:"h-4 w-4"})})]})})]},T.id))})]})})})})]}),s.jsxs(It,{value:"prescriptions",className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("h3",{className:"text-lg font-semibold",children:["Historique des prescriptions (",D.length," entrées)"]}),s.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[s.jsxs(R,{size:"sm",variant:f==="cards"?"default":"outline",onClick:()=>v("cards"),className:"gap-2 flex-1 sm:flex-none",children:[s.jsx(Eo,{className:"h-4 w-4"}),"Cartes"]}),s.jsxs(R,{size:"sm",variant:f==="table"?"default":"outline",onClick:()=>v("table"),className:"gap-2 flex-1 sm:flex-none",children:[s.jsx(Ni,{className:"h-4 w-4"}),"Tableau"]})]})]}),f==="cards"?s.jsx("div",{className:"grid gap-6",children:D.map(T=>s.jsx(ee,{className:"card-hover",children:s.jsx(te,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row items-start justify-between gap-4",children:[s.jsxs("div",{className:"space-y-3 flex-1",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ge,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium text-sm sm:text-base",children:new Date(T.date).toLocaleDateString("fr-FR")})]}),s.jsx(Pe,{variant:"outline",className:U[T.status],children:T.status==="active"?"Actif":T.status==="completed"?"Terminé":"Arrêté"})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-semibold",children:T.medication}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 text-sm text-muted-foreground mt-1",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ft,{className:"h-3 w-3"}),T.petName]}),s.jsxs("span",{children:["Client: ",T.client]}),s.jsxs("span",{children:["Prescrit par: ",T.veterinarian]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Dosage:"})," ",T.dosage]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Fréquence:"})," ",T.frequency]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Durée:"})," ",T.duration]})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 w-full sm:w-auto justify-end",children:[s.jsx(R,{size:"sm",variant:"outline",className:"flex-1 sm:flex-none",onClick:()=>{N(T),C(!0)},children:"Renouveler"}),(()=>{const $=t.find(G=>G.id===T.id);return $?s.jsx(n1,{prescription:n($)}):s.jsx(R,{size:"sm",variant:"outline",disabled:!0,className:"flex-1 sm:flex-none",children:"Prescription indisponible"})})(),s.jsx(R,{size:"sm",variant:"outline",className:"flex-1 sm:flex-none",onClick:()=>{const $=t.find(G=>G.id===T.id);$&&(A(n($)),_(!0))},children:"Facture"})]})]})})},T.id))}):s.jsx(ee,{children:s.jsx(te,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full min-w-[600px]",children:[s.jsx("thead",{className:"border-b",children:s.jsxs("tr",{className:"text-left",children:[s.jsx("th",{className:"p-4 font-medium",children:"Date"}),s.jsx("th",{className:"p-4 font-medium",children:"Statut"}),s.jsx("th",{className:"p-4 font-medium",children:"Médicament"}),s.jsx("th",{className:"p-4 font-medium",children:"Animal"}),s.jsx("th",{className:"p-4 font-medium",children:"Client"}),s.jsx("th",{className:"p-4 font-medium",children:"Dosage"}),s.jsx("th",{className:"p-4 font-medium",children:"Durée"}),s.jsx("th",{className:"p-4 font-medium",children:"Actions"})]})}),s.jsx("tbody",{children:D.map(T=>s.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[s.jsx("td",{className:"p-4",children:new Date(T.date).toLocaleDateString("fr-FR")}),s.jsx("td",{className:"p-4",children:s.jsx(Pe,{variant:"outline",className:U[T.status],children:T.status==="active"?"Actif":T.status==="completed"?"Terminé":"Arrêté"})}),s.jsxs("td",{className:"p-4",children:[s.jsx("div",{className:"font-medium",children:T.medication}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Prescrit par: ",T.veterinarian]})]}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ft,{className:"h-4 w-4 text-primary"}),T.petName]})}),s.jsx("td",{className:"p-4",children:T.client}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{children:T.dosage}),s.jsx("div",{className:"text-muted-foreground",children:T.frequency})]})}),s.jsx("td",{className:"p-4",children:T.duration}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.jsx(R,{size:"sm",variant:"outline",onClick:()=>{N(T),C(!0)},children:"Renouveler"}),s.jsx(n1,{prescription:n(t.find($=>$.id===T.id))}),s.jsx(R,{size:"sm",variant:"outline",onClick:()=>{const $=t.find(G=>G.id===T.id);A(n($)),_(!0)},children:"Facture"})]})})]},T.id))})]})})})})]})]}),s.jsx(xke,{consultation:x,open:p,onOpenChange:g,onEdit:()=>{}}),(w==null?void 0:w.id)&&s.jsx(yC,{open:b,onOpenChange:C,petId:((K=(B=t.find(T=>T.id===(w==null?void 0:w.id)))==null?void 0:B.animal_id)==null?void 0:K.toString())||"",consultationId:w.id.toString()}),s.jsx(Qe,{open:S,onOpenChange:_,children:s.jsx(Ye,{children:P&&s.jsx(yke,{prescription:P})})})]})},U8=({photos:e,onPhotosChange:t,farmName:n})=>{const{toast:r}=it(),a=j.useRef(null),[i,o]=j.useState(!1),[l,c]=j.useState(!1),[u,d]=j.useState(null),[h,m]=j.useState({description:"",category:"general"}),f=C=>{const w=C.target.files;if(!w||w.length===0)return;const N=Array.from(w).map(S=>{const _=new FileReader,P={id:`photo_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,url:"",description:h.description||`Photo de ${n}`,category:h.category,uploadedAt:new Date().toISOString()};return _.onload=A=>{var k;P.url=(k=A.target)==null?void 0:k.result;const E=[...e,P];t(E)},_.readAsDataURL(S),P});m({description:"",category:"general"}),o(!1),r({title:"Photos ajoutées",description:`${N.length} photo(s) ajoutée(s) à l'exploitation ${n}`})},v=C=>{const w=e.filter(N=>N.id!==C);t(w),r({title:"Photo supprimée",description:"La photo a été supprimée avec succès"})},p=C=>{d(C),m({description:C.description,category:C.category}),c(!0)},g=()=>{if(!u)return;const C=e.map(w=>w.id===u.id?{...w,...h}:w);t(C),c(!1),d(null),m({description:"",category:"general"}),r({title:"Photo modifiée",description:"La photo a été modifiée avec succès"})},x=C=>({cheptel:"Cheptel",batiments:"Bâtiments",equipements:"Équipements",general:"Général"})[C],y=C=>({cheptel:"bg-blue-100 text-blue-800",batiments:"bg-green-100 text-green-800",equipements:"bg-orange-100 text-orange-800",general:"bg-gray-100 text-gray-800"})[C],b=e.reduce((C,w)=>(C[w.category]||(C[w.category]=[]),C[w.category].push(w),C),{});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Photos de l'exploitation"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Gérez les photos de votre exploitation, du cheptel et des équipements"})]}),s.jsxs(Qe,{open:i,onOpenChange:o,children:[s.jsx(Tf,{asChild:!0,children:s.jsxs(R,{className:"gap-2",children:[s.jsx(Ze,{className:"h-4 w-4"}),"Ajouter des photos"]})}),s.jsxs(Ye,{className:"max-w-md",children:[s.jsx(Xe,{children:s.jsx(Je,{children:"Ajouter des photos"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(O,{htmlFor:"photo-description",children:"Description"}),s.jsx(Y,{id:"photo-description",placeholder:"Description des photos",value:h.description,onChange:C=>m({...h,description:C.target.value})})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"photo-category",children:"Catégorie"}),s.jsxs(je,{value:h.category,onValueChange:C=>m({...h,category:C}),children:[s.jsx(xe,{children:s.jsx(be,{})}),s.jsxs(ye,{children:[s.jsx(z,{value:"cheptel",children:"Cheptel"}),s.jsx(z,{value:"batiments",children:"Bâtiments"}),s.jsx(z,{value:"equipements",children:"Équipements"}),s.jsx(z,{value:"general",children:"Général"})]})]})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"photo-files",children:"Sélectionner des photos"}),s.jsx(Y,{id:"photo-files",type:"file",multiple:!0,accept:"image/*",ref:a,onChange:f,className:"cursor-pointer"})]})]})]})]})]}),e.length===0?s.jsx(ee,{children:s.jsxs(te,{className:"p-8 text-center",children:[s.jsx(Mu,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucune photo ajoutée"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Commencez par ajouter des photos de votre exploitation"})]})}):s.jsx("div",{className:"space-y-6",children:Object.entries(b).map(([C,w])=>s.jsxs(ee,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(Pe,{className:y(C),children:x(C)}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",w.length," photo",w.length>1?"s":"",")"]})]})}),s.jsx(te,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:w.map(N=>s.jsxs("div",{className:"group relative",children:[s.jsxs("div",{className:"aspect-square rounded-lg overflow-hidden border bg-muted",children:[s.jsx("img",{src:N.url,alt:N.description,className:"w-full h-full object-cover"}),s.jsxs("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[s.jsx(R,{size:"sm",variant:"secondary",onClick:()=>d(N),children:s.jsx(An,{className:"h-4 w-4"})}),s.jsx(R,{size:"sm",variant:"secondary",onClick:()=>p(N),children:s.jsx($t,{className:"h-4 w-4"})}),s.jsx(R,{size:"sm",variant:"destructive",onClick:()=>v(N.id),children:s.jsx(Vt,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-sm font-medium truncate",children:N.description}),s.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(N.uploadedAt).toLocaleDateString()})]})]},N.id))})})]},C))}),s.jsx(Qe,{open:l,onOpenChange:c,children:s.jsxs(Ye,{className:"max-w-md",children:[s.jsx(Xe,{children:s.jsx(Je,{children:"Modifier la photo"})}),s.jsxs("div",{className:"space-y-4",children:[u&&s.jsx("div",{className:"aspect-square rounded-lg overflow-hidden border",children:s.jsx("img",{src:u.url,alt:u.description,className:"w-full h-full object-cover"})}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"edit-description",children:"Description"}),s.jsx(Y,{id:"edit-description",value:h.description,onChange:C=>m({...h,description:C.target.value})})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"edit-category",children:"Catégorie"}),s.jsxs(je,{value:h.category,onValueChange:C=>m({...h,category:C}),children:[s.jsx(xe,{children:s.jsx(be,{})}),s.jsxs(ye,{children:[s.jsx(z,{value:"cheptel",children:"Cheptel"}),s.jsx(z,{value:"batiments",children:"Bâtiments"}),s.jsx(z,{value:"equipements",children:"Équipements"}),s.jsx(z,{value:"general",children:"Général"})]})]})]}),s.jsxs("div",{className:"flex gap-2 justify-end",children:[s.jsx(R,{variant:"outline",onClick:()=>c(!1),children:"Annuler"}),s.jsx(R,{onClick:g,children:"Enregistrer"})]})]})]})})]})},bke=({open:e,onOpenChange:t})=>{var x,y,b,C,w,N;const{addFarm:n}=bt(),{settings:r}=At(),{toast:a}=it(),[i,o]=j.useState({name:"",owner:"",ownerIdNumber:"",address:"",coordinates:{latitude:0,longitude:0},phone:"",email:"",types:[],totalAnimals:0,animalDetails:[],veterinarian:"",notes:"",status:"active",registrationNumber:"",surfaceArea:0,buildingDetails:"",equipmentDetails:"",certifications:[],insuranceDetails:"",emergencyContact:{name:"",phone:"",relation:""},photos:[]}),[l,c]=j.useState({category:"",maleCount:0,femaleCount:0,breeds:[],ageGroups:[]});if(!r.farmManagement)return console.error("farmManagement settings not found, using defaults"),s.jsx(Qe,{open:e,onOpenChange:t,children:s.jsx(Ye,{children:s.jsxs(Xe,{children:[s.jsx(Je,{children:"Erreur de configuration"}),s.jsx(Bt,{children:"Les paramètres de gestion des fermes ne sont pas configurés. Veuillez recharger la page ou vérifier les paramètres."})]})})});j.useEffect(()=>{e||(o({name:"",owner:"",ownerIdNumber:"",address:"",coordinates:{latitude:0,longitude:0},phone:"",email:"",types:[],totalAnimals:0,animalDetails:[],veterinarian:"",notes:"",status:"active",registrationNumber:"",surfaceArea:0,buildingDetails:"",equipmentDetails:"",certifications:[],insuranceDetails:"",emergencyContact:{name:"",phone:"",relation:""},photos:[]}),c({category:"",maleCount:0,femaleCount:0,breeds:[],ageGroups:[]}))},[e]);const u=(S,_)=>{if(S.includes(".")){const[P,A]=S.split(".");o(E=>{const k=E[P];return{...E,[P]:{...k,[A]:_}}})}else o(P=>({...P,[S]:_}))},d=S=>{o(_=>{var P;return{..._,types:(P=_.types)!=null&&P.includes(S)?_.types.filter(A=>A!==S):[..._.types||[],S]}})},h=S=>{o(_=>{var P;return{..._,certifications:(P=_.certifications)!=null&&P.includes(S)?_.certifications.filter(A=>A!==S):[..._.certifications||[],S]}})},m=()=>{if(!l.category){a({title:"Erreur",description:"Veuillez sélectionner une catégorie d'animal",variant:"destructive"});return}o(S=>({...S,animalDetails:[...S.animalDetails||[],{...l}]})),c({category:"",maleCount:0,femaleCount:0,breeds:[],ageGroups:[]})},f=S=>{o(_=>{var P;return{..._,animalDetails:((P=_.animalDetails)==null?void 0:P.filter((A,E)=>E!==S))||[]}})},v=S=>{c(_=>({..._,breeds:[..._.breeds,S]}))},p=S=>{c(_=>({..._,breeds:_.breeds.filter(P=>P!==S)}))},g=S=>{var P;if(S.preventDefault(),!i.name||!i.owner||!i.address||!((P=i.types)!=null&&P.length)){a({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires",variant:"destructive"});return}const _={name:i.name,owner:i.owner,ownerIdNumber:i.ownerIdNumber||"",address:i.address,coordinates:i.coordinates||{latitude:0,longitude:0},phone:i.phone||"",email:i.email||"",types:i.types||[],totalAnimals:(i.animalDetails||[]).reduce((A,E)=>A+E.maleCount+E.femaleCount,0),animalDetails:i.animalDetails||[],lastVisit:new Date().toISOString().split("T")[0],status:i.status||"active",veterinarian:i.veterinarian||"",notes:i.notes||"",registrationNumber:i.registrationNumber||"",surfaceArea:i.surfaceArea||0,buildingDetails:i.buildingDetails||"",equipmentDetails:i.equipmentDetails||"",certifications:i.certifications||[],insuranceDetails:i.insuranceDetails||"",emergencyContact:i.emergencyContact||{name:"",phone:"",relation:""}};n(_),a({title:"Succès",description:"Nouvelle exploitation créée avec succès"}),t(!1)};return s.jsx(Qe,{open:e,onOpenChange:t,children:s.jsxs(Ye,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(Xe,{children:[s.jsx(Je,{children:"Nouvelle Exploitation Agricole"}),s.jsx(Bt,{children:"Créez une nouvelle exploitation agricole avec toutes les informations détaillées"})]}),s.jsxs("form",{onSubmit:g,className:"space-y-6",children:[s.jsxs(ee,{children:[s.jsx(he,{children:s.jsx(me,{children:"Informations générales"})}),s.jsxs(te,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(O,{htmlFor:"name",children:"Nom de l'exploitation *"}),s.jsx(Y,{id:"name",value:i.name||"",onChange:S=>u("name",S.target.value),placeholder:"Nom de l'exploitation"})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"owner",children:"Propriétaire *"}),s.jsx(Y,{id:"owner",value:i.owner||"",onChange:S=>u("owner",S.target.value),placeholder:"Nom du propriétaire"})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"ownerIdNumber",children:"N° pièce d'identité du propriétaire"}),s.jsx(Y,{id:"ownerIdNumber",value:i.ownerIdNumber||"",onChange:S=>u("ownerIdNumber",S.target.value),placeholder:"Numéro de carte d'identité, passeport, etc."})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(O,{htmlFor:"address",children:"Adresse *"}),s.jsx(Y,{id:"address",value:i.address||"",onChange:S=>u("address",S.target.value),placeholder:"Adresse complète"})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"latitude",children:"Latitude"}),s.jsx(Y,{id:"latitude",type:"number",step:"0.0001",value:((x=i.coordinates)==null?void 0:x.latitude)||"",onChange:S=>u("coordinates.latitude",parseFloat(S.target.value)||0),placeholder:"47.9056"})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"longitude",children:"Longitude"}),s.jsx(Y,{id:"longitude",type:"number",step:"0.0001",value:((y=i.coordinates)==null?void 0:y.longitude)||"",onChange:S=>u("coordinates.longitude",parseFloat(S.target.value)||0),placeholder:"1.9190"})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"phone",children:"Téléphone"}),s.jsx(Y,{id:"phone",value:i.phone||"",onChange:S=>u("phone",S.target.value),placeholder:"Téléphone"})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"email",children:"Email"}),s.jsx(Y,{id:"email",type:"email",value:i.email||"",onChange:S=>u("email",S.target.value),placeholder:"Email"})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"veterinarian",children:"Vétérinaire responsable"}),s.jsx(Y,{id:"veterinarian",value:i.veterinarian||"",onChange:S=>u("veterinarian",S.target.value),placeholder:"Vétérinaire"})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"status",children:"Statut"}),s.jsxs(je,{value:i.status,onValueChange:S=>u("status",S),children:[s.jsx(xe,{children:s.jsx(be,{})}),s.jsxs(ye,{children:[s.jsx(z,{value:"active",children:"Active"}),s.jsx(z,{value:"attention",children:"Attention"}),s.jsx(z,{value:"urgent",children:"Urgent"})]})]})]})]})]}),s.jsxs(ee,{children:[s.jsx(he,{children:s.jsx(me,{children:"Types d'élevage *"})}),s.jsx(te,{children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:r.farmManagement.farmTypes.map(S=>{var _;return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(fi,{id:`type-${S}`,checked:((_=i.types)==null?void 0:_.includes(S))||!1,onCheckedChange:()=>d(S)}),s.jsx(O,{htmlFor:`type-${S}`,children:S})]},S)})})})]}),s.jsxs(ee,{children:[s.jsx(he,{children:s.jsx(me,{children:"Détails du cheptel"})}),s.jsxs(te,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx(O,{children:"Catégorie"}),s.jsxs(je,{value:l.category,onValueChange:S=>c(_=>({..._,category:S})),children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Sélectionner"})}),s.jsx(ye,{children:r.farmManagement.animalCategories.map(S=>s.jsx(z,{value:S,children:S},S))})]})]}),s.jsxs("div",{children:[s.jsx(O,{children:"Mâles"}),s.jsx(Y,{type:"number",value:l.maleCount,onChange:S=>c(_=>({..._,maleCount:parseInt(S.target.value)||0})),placeholder:"0"})]}),s.jsxs("div",{children:[s.jsx(O,{children:"Femelles"}),s.jsx(Y,{type:"number",value:l.femaleCount,onChange:S=>c(_=>({..._,femaleCount:parseInt(S.target.value)||0})),placeholder:"0"})]}),s.jsx("div",{className:"flex items-end",children:s.jsx(R,{type:"button",onClick:m,className:"w-full",children:"Ajouter"})})]}),l.category&&s.jsxs("div",{className:"p-4 border rounded-lg",children:[s.jsxs(O,{children:["Races pour ",l.category]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mt-2",children:(b=r.farmManagement.breedsByCategory[l.category])==null?void 0:b.map(S=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(fi,{id:`breed-${S}`,checked:l.breeds.includes(S),onCheckedChange:()=>{l.breeds.includes(S)?p(S):v(S)}}),s.jsx(O,{htmlFor:`breed-${S}`,children:S})]},S))})]}),i.animalDetails&&i.animalDetails.length>0&&s.jsxs("div",{className:"p-4 border rounded-lg",children:[s.jsx(O,{children:"Cheptel configuré"}),s.jsx("div",{className:"mt-2 space-y-2",children:i.animalDetails.map((S,_)=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[s.jsxs("span",{children:[s.jsx(Pe,{variant:"secondary",children:S.category}),s.jsxs("span",{className:"ml-2",children:[S.maleCount," mâles, ",S.femaleCount," femelles"]}),S.breeds.length>0&&s.jsxs("span",{className:"ml-2 text-sm text-gray-600",children:["Races: ",S.breeds.join(", ")]})]}),s.jsx(R,{type:"button",variant:"outline",size:"sm",onClick:()=>f(_),children:"Supprimer"})]},_))})]})]})]}),s.jsxs(ee,{children:[s.jsx(he,{children:s.jsx(me,{children:"Informations administratives"})}),s.jsxs(te,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(O,{htmlFor:"registrationNumber",children:"Numéro d'immatriculation"}),s.jsx(Y,{id:"registrationNumber",value:i.registrationNumber||"",onChange:S=>u("registrationNumber",S.target.value),placeholder:"Numéro d'immatriculation"})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"surfaceArea",children:"Surface (hectares)"}),s.jsx(Y,{id:"surfaceArea",type:"number",step:"0.1",value:i.surfaceArea||"",onChange:S=>u("surfaceArea",parseFloat(S.target.value)||0),placeholder:"Surface en hectares"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(O,{htmlFor:"buildingDetails",children:"Détails des bâtiments"}),s.jsx(Ue,{id:"buildingDetails",value:i.buildingDetails||"",onChange:S=>u("buildingDetails",S.target.value),placeholder:"Description des bâtiments, étables, etc."})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(O,{htmlFor:"equipmentDetails",children:"Équipements"}),s.jsx(Ue,{id:"equipmentDetails",value:i.equipmentDetails||"",onChange:S=>u("equipmentDetails",S.target.value),placeholder:"Liste des équipements disponibles"})]})]})]}),s.jsxs(ee,{children:[s.jsx(he,{children:s.jsx(me,{children:"Certifications"})}),s.jsx(te,{children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:r.farmManagement.certificationTypes.map(S=>{var _;return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(fi,{id:`cert-${S}`,checked:((_=i.certifications)==null?void 0:_.includes(S))||!1,onCheckedChange:()=>h(S)}),s.jsx(O,{htmlFor:`cert-${S}`,children:S})]},S)})})})]}),s.jsxs(ee,{children:[s.jsx(he,{children:s.jsx(me,{children:"Assurance et contact d'urgence"})}),s.jsxs(te,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(O,{htmlFor:"insuranceDetails",children:"Détails de l'assurance"}),s.jsx(Y,{id:"insuranceDetails",value:i.insuranceDetails||"",onChange:S=>u("insuranceDetails",S.target.value),placeholder:"Compagnie d'assurance et numéro de police"})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"emergencyName",children:"Nom du contact d'urgence"}),s.jsx(Y,{id:"emergencyName",value:((C=i.emergencyContact)==null?void 0:C.name)||"",onChange:S=>u("emergencyContact.name",S.target.value),placeholder:"Nom du contact"})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"emergencyPhone",children:"Téléphone d'urgence"}),s.jsx(Y,{id:"emergencyPhone",value:((w=i.emergencyContact)==null?void 0:w.phone)||"",onChange:S=>u("emergencyContact.phone",S.target.value),placeholder:"Téléphone"})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"emergencyRelation",children:"Relation"}),s.jsx(Y,{id:"emergencyRelation",value:((N=i.emergencyContact)==null?void 0:N.relation)||"",onChange:S=>u("emergencyContact.relation",S.target.value),placeholder:"Relation (époux, fils, etc.)"})]})]})]}),s.jsxs(ee,{children:[s.jsx(he,{children:s.jsx(me,{children:"Photos de l'exploitation"})}),s.jsx(te,{children:s.jsx(U8,{photos:i.photos||[],onPhotosChange:S=>u("photos",S),farmName:i.name||"Nouvelle exploitation"})})]}),s.jsxs(ee,{children:[s.jsx(he,{children:s.jsx(me,{children:"Notes complémentaires"})}),s.jsx(te,{children:s.jsx(Ue,{value:i.notes||"",onChange:S=>u("notes",S.target.value),placeholder:"Notes additionnelles sur l'exploitation...",rows:3})})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(R,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsx(R,{type:"submit",children:"Créer l'exploitation"})]})]})]})})},wke=({open:e,onOpenChange:t,farmId:n,farmName:r})=>{const{addFarmIntervention:a,farms:i}=bt(),{toast:o}=it(),[l,c]=j.useState({farmId:"",farmName:"",date:"",type:"",animals:"",veterinarian:"",description:"",status:"scheduled",followUp:"",cost:"",notes:""});j.useEffect(()=>{if(e){const m=new Date().toISOString().split("T")[0];c({farmId:(n==null?void 0:n.toString())||"",farmName:r||"",date:m,type:"",animals:"",veterinarian:"",description:"",status:"scheduled",followUp:"",cost:"",notes:""})}},[e,n,r]);const u=(m,f)=>{c(v=>({...v,[m]:f}))},{settings:d}=At(),h=m=>{if(m.preventDefault(),!l.farmId||!l.date||!l.type||!l.description){o({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires",variant:"destructive"});return}const f=i.find(p=>p.id===parseInt(l.farmId));if(!f){o({title:"Erreur",description:"Exploitation non trouvée",variant:"destructive"});return}const v={farmId:parseInt(l.farmId),farmName:f.name,date:l.date,type:l.type,animals:l.animals,veterinarian:l.veterinarian,description:l.description,status:l.status,followUp:l.followUp,cost:l.cost?parseFloat(l.cost):void 0,notes:l.notes};a(v),o({title:"Succès",description:"Intervention programmée avec succès"}),t(!1)};return s.jsx(Qe,{open:e,onOpenChange:t,children:s.jsxs(Ye,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(Xe,{children:[s.jsx(Je,{children:"Nouvelle Intervention"}),s.jsx(Bt,{children:"Programmez une nouvelle intervention vétérinaire"})]}),s.jsxs("form",{onSubmit:h,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"farmId",children:"Exploitation *"}),s.jsxs(je,{value:l.farmId,onValueChange:m=>{const f=i.find(v=>v.id===parseInt(m));u("farmId",m),u("farmName",(f==null?void 0:f.name)||"")},children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Sélectionner une exploitation"})}),s.jsx(ye,{children:i.map(m=>s.jsx(z,{value:m.id.toString(),children:m.name},m.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"date",children:"Date *"}),s.jsx(Y,{id:"date",type:"date",value:l.date,onChange:m=>u("date",m.target.value),required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"type",children:"Type d'intervention *"}),s.jsxs(je,{value:l.type,onValueChange:m=>u("type",m),children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Sélectionner un type"})}),s.jsxs(ye,{children:[s.jsx(z,{value:"vaccination",children:"Vaccination"}),s.jsx(z,{value:"controle",children:"Contrôle sanitaire"}),s.jsx(z,{value:"urgence",children:"Urgence"}),s.jsx(z,{value:"chirurgie",children:"Chirurgie"}),s.jsx(z,{value:"prevention",children:"Prévention"}),s.jsx(z,{value:"consultation",children:"Consultation"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"status",children:"Statut"}),s.jsxs(je,{value:l.status,onValueChange:m=>u("status",m),children:[s.jsx(xe,{children:s.jsx(be,{})}),s.jsxs(ye,{children:[s.jsx(z,{value:"scheduled",children:"Programmée"}),s.jsx(z,{value:"ongoing",children:"En cours"}),s.jsx(z,{value:"completed",children:"Terminée"}),s.jsx(z,{value:"cancelled",children:"Annulée"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"animals",children:"Animaux concernés"}),s.jsx(Y,{id:"animals",value:l.animals,onChange:m=>u("animals",m.target.value),placeholder:"15 bovins, 50 poules..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"veterinarian",children:"Vétérinaire"}),s.jsx(Y,{id:"veterinarian",value:l.veterinarian,onChange:m=>u("veterinarian",m.target.value),placeholder:"Dr. Dupont"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"description",children:"Description *"}),s.jsx(Ue,{id:"description",value:l.description,onChange:m=>u("description",m.target.value),placeholder:"Détails de l'intervention...",rows:3,required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(O,{htmlFor:"cost",children:["Coût (",d.currency,")"]}),s.jsx(Y,{id:"cost",type:"number",value:l.cost,onChange:m=>u("cost",m.target.value),placeholder:"0.00",min:"0",step:"0.01"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"followUp",children:"Suivi"}),s.jsx(Y,{id:"followUp",value:l.followUp,onChange:m=>u("followUp",m.target.value),placeholder:"Contrôle dans 6 mois"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"notes",children:"Notes"}),s.jsx(Ue,{id:"notes",value:l.notes,onChange:m=>u("notes",m.target.value),placeholder:"Informations complémentaires...",rows:2})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(R,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsx(R,{type:"submit",children:"Programmer Intervention"})]})]})]})})},Nke=({farm:e,open:t,onOpenChange:n,onEdit:r,onNewIntervention:a})=>{var u;const{getFarmInterventionsByFarmId:i}=bt();if(!e)return null;const o=i(e.id),l={active:"bg-green-100 text-green-800",attention:"bg-yellow-100 text-yellow-800",urgent:"bg-red-100 text-red-800"},c=d=>{switch(d){case"active":return s.jsx(Ln,{className:"h-4 w-4"});case"attention":return s.jsx(bn,{className:"h-4 w-4"});case"urgent":return s.jsx(bn,{className:"h-4 w-4 text-red-600"});default:return s.jsx(Qt,{className:"h-4 w-4"})}};return s.jsx(Qe,{open:t,onOpenChange:n,children:s.jsxs(Ye,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(Xe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[c(e.status),e.name,s.jsx(Pe,{className:l[e.status],children:e.status==="active"?"Actif":e.status==="attention"?"Attention":"Urgent"})]}),s.jsx(Bt,{children:"Détails complets de l'exploitation agricole"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ee,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(RU,{className:"h-5 w-5"}),"Informations Générales"]})}),s.jsxs(te,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Propriétaire"}),s.jsx("p",{className:"font-medium",children:e.owner})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Types d'élevage"}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:(u=e.types)==null?void 0:u.map(d=>s.jsx(Pe,{variant:"secondary",children:d},d))})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Nombre total d'animaux"}),s.jsx("p",{className:"font-medium",children:e.totalAnimals})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Vétérinaire"}),s.jsx("p",{className:"font-medium",children:e.veterinarian||"Non assigné"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Dernière visite"}),s.jsx("p",{className:"font-medium",children:$a(e.lastVisit)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Date de création"}),s.jsx("p",{className:"font-medium",children:$a(e.createdAt)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[s.jsx(ic,{className:"h-3 w-3"}),"Adresse"]}),s.jsx("p",{className:"font-medium",children:e.address})]}),e.coordinates&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Coordonnées GPS"}),s.jsxs("p",{className:"font-mono text-sm",children:[e.coordinates.latitude.toFixed(4),", ",e.coordinates.longitude.toFixed(4)]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[s.jsx(Iu,{className:"h-3 w-3"}),"Téléphone"]}),s.jsx("p",{className:"font-medium",children:e.phone||"Non renseigné"})]}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[s.jsx(wd,{className:"h-3 w-3"}),"Email"]}),s.jsx("p",{className:"font-medium",children:e.email||"Non renseigné"})]})]})]})]}),e.animalDetails&&e.animalDetails.length>0&&s.jsxs(ee,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(LU,{className:"h-5 w-5"}),"Détails du Cheptel"]})}),s.jsx(te,{children:s.jsx("div",{className:"space-y-3",children:e.animalDetails.map((d,h)=>s.jsxs("div",{className:"p-3 border rounded-lg bg-muted/30",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(Pe,{variant:"secondary",children:d.category}),s.jsxs("span",{className:"text-sm font-medium",children:["Total: ",d.maleCount+d.femaleCount," animaux"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Mâles:"})," ",d.maleCount]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Femelles:"})," ",d.femaleCount]}),d.breeds.length>0&&s.jsxs("div",{className:"md:col-span-3",children:[s.jsx("span",{className:"text-muted-foreground",children:"Races:"})," ",d.breeds.join(", ")]})]})]},h))})})]}),(e.registrationNumber||e.surfaceArea||e.buildingDetails||e.equipmentDetails)&&s.jsxs(ee,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(jU,{className:"h-5 w-5"}),"Informations Administratives"]})}),s.jsxs(te,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.registrationNumber&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"N° d'immatriculation"}),s.jsx("p",{className:"font-medium",children:e.registrationNumber})]}),e.surfaceArea&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Surface"}),s.jsxs("p",{className:"font-medium",children:[e.surfaceArea," hectares"]})]})]}),e.buildingDetails&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Bâtiments"}),s.jsx("p",{className:"font-medium",children:e.buildingDetails})]}),e.equipmentDetails&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Équipements"}),s.jsx("p",{className:"font-medium",children:e.equipmentDetails})]})]})]}),e.certifications&&e.certifications.length>0&&s.jsxs(ee,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(xr,{className:"h-5 w-5"}),"Certifications"]})}),s.jsx(te,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:e.certifications.map(d=>s.jsx(Pe,{variant:"outline",children:d},d))})})]}),(e.insuranceDetails||e.emergencyContact)&&s.jsxs(ee,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(_r,{className:"h-5 w-5"}),"Assurance et Contact d'Urgence"]})}),s.jsxs(te,{className:"space-y-4",children:[e.insuranceDetails&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Assurance"}),s.jsx("p",{className:"font-medium",children:e.insuranceDetails})]}),e.emergencyContact&&e.emergencyContact.name&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Contact d'urgence"}),s.jsx("p",{className:"font-medium",children:e.emergencyContact.name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Téléphone"}),s.jsx("p",{className:"font-medium",children:e.emergencyContact.phone})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Relation"}),s.jsx("p",{className:"font-medium",children:e.emergencyContact.relation})]})]})]})]}),e.notes&&s.jsxs(ee,{children:[s.jsx(he,{children:s.jsx(me,{children:"Notes"})}),s.jsx(te,{children:s.jsx("p",{className:"text-sm",children:e.notes})})]}),s.jsxs(ee,{children:[s.jsx(he,{children:s.jsx(me,{children:"Détails du Cheptel"})}),s.jsx(te,{children:e.animalDetails&&e.animalDetails.length>0?s.jsx("div",{className:"space-y-4",children:e.animalDetails.map((d,h)=>s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h4",{className:"font-semibold text-lg",children:d.category}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(Pe,{variant:"secondary",children:[d.maleCount+d.femaleCount," animaux"]}),s.jsxs(Pe,{variant:"outline",children:[d.maleCount," mâles"]}),s.jsxs(Pe,{variant:"outline",children:[d.femaleCount," femelles"]})]})]}),d.breeds&&d.breeds.length>0&&s.jsxs("div",{className:"mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Races: "}),d.breeds.map((m,f)=>s.jsx(Pe,{variant:"outline",className:"mr-1 text-xs",children:m},f))]}),d.ageGroups&&d.ageGroups.length>0&&s.jsxs("div",{children:[s.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Groupes d'âge: "}),d.ageGroups.map((m,f)=>s.jsx(Pe,{variant:"outline",className:"mr-1 text-xs",children:m},f))]})]},h))}):s.jsx("p",{className:"text-muted-foreground",children:"Aucun détail de cheptel configuré pour cette exploitation"})})]}),s.jsxs(ee,{children:[s.jsx(he,{children:s.jsx(me,{children:"Photos de l'exploitation"})}),s.jsx(te,{children:e.photos&&e.photos.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.photos.map(d=>s.jsxs("div",{className:"group relative",children:[s.jsxs("div",{className:"aspect-square rounded-lg overflow-hidden border bg-muted",children:[s.jsx("img",{src:d.url,alt:d.description,className:"w-full h-full object-cover"}),s.jsx("div",{className:"absolute top-2 right-2",children:s.jsx(Pe,{variant:"secondary",className:"text-xs bg-black/70 text-white border-0",children:d.category==="cheptel"?"Cheptel":d.category==="batiments"?"Bâtiments":d.category==="equipements"?"Équipements":"Général"})})]}),s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-sm font-medium truncate",children:d.description}),s.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(d.uploadedAt).toLocaleDateString()})]})]},d.id))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Mu,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Aucune photo ajoutée"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Les photos peuvent être ajoutées lors de la modification de l'exploitation"})]})})]}),s.jsxs(Ei,{defaultValue:"interventions",className:"w-full",children:[s.jsx(Ha,{className:"grid w-full grid-cols-1",children:s.jsxs(Mt,{value:"interventions",children:[s.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Interventions (",o.length,")"]})}),s.jsx(It,{value:"interventions",className:"space-y-4",children:s.jsxs(ee,{children:[s.jsx(he,{children:s.jsx(me,{children:"Interventions vétérinaires"})}),s.jsx(te,{children:o.length>0?s.jsx("div",{className:"space-y-2",children:o.map(d=>s.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:d.type}),s.jsx("span",{className:"text-sm text-muted-foreground ml-2",children:$a(d.date)})]}),s.jsx(Pe,{variant:"outline",children:d.status})]},d.id))}):s.jsx("p",{className:"text-muted-foreground",children:"Aucune intervention enregistrée pour cette exploitation"})})]})})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[s.jsx(R,{onClick:a,variant:"outline",children:"Nouvelle Intervention"}),s.jsx(R,{onClick:r,children:"Modifier"})]})]})})},Ske=({open:e,onOpenChange:t,farm:n})=>{var y,b,C,w,N,S;const{updateFarm:r}=bt(),{settings:a}=At(),{toast:i}=it(),[o,l]=j.useState({name:"",owner:"",ownerIdNumber:"",address:"",coordinates:{latitude:0,longitude:0},phone:"",email:"",types:[],totalAnimals:0,animalDetails:[],veterinarian:"",notes:"",status:"active",registrationNumber:"",surfaceArea:0,buildingDetails:"",equipmentDetails:"",certifications:[],insuranceDetails:"",emergencyContact:{name:"",phone:"",relation:""}}),[c,u]=j.useState({category:"",maleCount:0,femaleCount:0,breeds:[],ageGroups:[]});if(!a.farmManagement)return console.error("farmManagement settings not found, using defaults"),s.jsx(Qe,{open:e,onOpenChange:t,children:s.jsx(Ye,{children:s.jsxs(Xe,{children:[s.jsx(Je,{children:"Erreur de configuration"}),s.jsx(Bt,{children:"Les paramètres de gestion des fermes ne sont pas configurés. Veuillez recharger la page ou vérifier les paramètres."})]})})});j.useEffect(()=>{n&&e&&l({...n,coordinates:n.coordinates||{latitude:0,longitude:0},types:n.types||[],animalDetails:n.animalDetails||[],certifications:n.certifications||[],emergencyContact:n.emergencyContact||{name:"",phone:"",relation:""}})},[n,e]),j.useEffect(()=>{e||(l({name:"",owner:"",ownerIdNumber:"",address:"",coordinates:{latitude:0,longitude:0},phone:"",email:"",types:[],totalAnimals:0,animalDetails:[],veterinarian:"",notes:"",status:"active",registrationNumber:"",surfaceArea:0,buildingDetails:"",equipmentDetails:"",certifications:[],insuranceDetails:"",emergencyContact:{name:"",phone:"",relation:""}}),u({category:"",maleCount:0,femaleCount:0,breeds:[],ageGroups:[]}))},[e]);const d=(_,P)=>{if(_.includes(".")){const[A,E]=_.split(".");l(k=>({...k,[A]:{...k[A],[E]:P}}))}else l(A=>({...A,[_]:P}))},h=_=>{l(P=>{var A;return{...P,types:(A=P.types)!=null&&A.includes(_)?P.types.filter(E=>E!==_):[...P.types||[],_]}})},m=_=>{l(P=>{var A;return{...P,certifications:(A=P.certifications)!=null&&A.includes(_)?P.certifications.filter(E=>E!==_):[...P.certifications||[],_]}})},f=()=>{if(!c.category){i({title:"Erreur",description:"Veuillez sélectionner une catégorie d'animal",variant:"destructive"});return}l(_=>({..._,animalDetails:[..._.animalDetails||[],{...c}]})),u({category:"",maleCount:0,femaleCount:0,breeds:[],ageGroups:[]})},v=_=>{l(P=>{var A;return{...P,animalDetails:((A=P.animalDetails)==null?void 0:A.filter((E,k)=>k!==_))||[]}})},p=_=>{u(P=>({...P,breeds:[...P.breeds,_]}))},g=_=>{u(P=>({...P,breeds:P.breeds.filter(A=>A!==_)}))},x=_=>{var A;if(_.preventDefault(),!n)return;if(!o.name||!o.owner||!o.address||!((A=o.types)!=null&&A.length)){i({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires",variant:"destructive"});return}const P={...n,...o,coordinates:o.coordinates||{latitude:0,longitude:0},types:o.types||[],animalDetails:o.animalDetails||[],totalAnimals:(o.animalDetails||[]).reduce((E,k)=>E+k.maleCount+k.femaleCount,0),certifications:o.certifications||[],emergencyContact:o.emergencyContact||{name:"",phone:"",relation:""}};r(n.id,P),i({title:"Succès",description:"Exploitation mise à jour avec succès"}),t(!1)};return n?s.jsx(Qe,{open:e,onOpenChange:t,children:s.jsxs(Ye,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(Xe,{children:[s.jsx(Je,{children:"Modifier l'Exploitation"}),s.jsx(Bt,{children:"Modifiez les informations de l'exploitation agricole"})]}),s.jsxs("form",{onSubmit:x,className:"space-y-6",children:[s.jsxs(ee,{children:[s.jsx(he,{children:s.jsx(me,{children:"Informations générales"})}),s.jsxs(te,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(O,{htmlFor:"name",children:"Nom de l'exploitation *"}),s.jsx(Y,{id:"name",value:o.name||"",onChange:_=>d("name",_.target.value),placeholder:"Nom de l'exploitation"})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"owner",children:"Propriétaire *"}),s.jsx(Y,{id:"owner",value:o.owner||"",onChange:_=>d("owner",_.target.value),placeholder:"Nom du propriétaire"})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"ownerIdNumber",children:"N° pièce d'identité du propriétaire"}),s.jsx(Y,{id:"ownerIdNumber",value:o.ownerIdNumber||"",onChange:_=>d("ownerIdNumber",_.target.value),placeholder:"Numéro de carte d'identité, passeport, etc."})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(O,{htmlFor:"address",children:"Adresse *"}),s.jsx(Y,{id:"address",value:o.address||"",onChange:_=>d("address",_.target.value),placeholder:"Adresse complète"})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"latitude",children:"Latitude"}),s.jsx(Y,{id:"latitude",type:"number",step:"0.0001",value:((y=o.coordinates)==null?void 0:y.latitude)||"",onChange:_=>d("coordinates.latitude",parseFloat(_.target.value)||0),placeholder:"47.9056"})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"longitude",children:"Longitude"}),s.jsx(Y,{id:"longitude",type:"number",step:"0.0001",value:((b=o.coordinates)==null?void 0:b.longitude)||"",onChange:_=>d("coordinates.longitude",parseFloat(_.target.value)||0),placeholder:"1.9190"})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"phone",children:"Téléphone"}),s.jsx(Y,{id:"phone",value:o.phone||"",onChange:_=>d("phone",_.target.value),placeholder:"Téléphone"})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"email",children:"Email"}),s.jsx(Y,{id:"email",type:"email",value:o.email||"",onChange:_=>d("email",_.target.value),placeholder:"Email"})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"veterinarian",children:"Vétérinaire responsable"}),s.jsx(Y,{id:"veterinarian",value:o.veterinarian||"",onChange:_=>d("veterinarian",_.target.value),placeholder:"Vétérinaire"})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"status",children:"Statut"}),s.jsxs(je,{value:o.status,onValueChange:_=>d("status",_),children:[s.jsx(xe,{children:s.jsx(be,{})}),s.jsxs(ye,{children:[s.jsx(z,{value:"active",children:"Active"}),s.jsx(z,{value:"attention",children:"Attention"}),s.jsx(z,{value:"urgent",children:"Urgent"})]})]})]})]})]}),s.jsxs(ee,{children:[s.jsx(he,{children:s.jsx(me,{children:"Types d'élevage *"})}),s.jsx(te,{children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:a.farmManagement.farmTypes.map(_=>{var P;return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(fi,{id:`type-${_}`,checked:((P=o.types)==null?void 0:P.includes(_))||!1,onCheckedChange:()=>h(_)}),s.jsx(O,{htmlFor:`type-${_}`,children:_})]},_)})})})]}),s.jsxs(ee,{children:[s.jsx(he,{children:s.jsx(me,{children:"Détails du cheptel"})}),s.jsxs(te,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 p-4 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx(O,{children:"Catégorie"}),s.jsxs(je,{value:c.category,onValueChange:_=>u(P=>({...P,category:_})),children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Sélectionner"})}),s.jsx(ye,{children:a.farmManagement.animalCategories.map(_=>s.jsx(z,{value:_,children:_},_))})]})]}),s.jsxs("div",{children:[s.jsx(O,{children:"Mâles"}),s.jsx(Y,{type:"number",value:c.maleCount,onChange:_=>u(P=>({...P,maleCount:parseInt(_.target.value)||0})),placeholder:"0"})]}),s.jsxs("div",{children:[s.jsx(O,{children:"Femelles"}),s.jsx(Y,{type:"number",value:c.femaleCount,onChange:_=>u(P=>({...P,femaleCount:parseInt(_.target.value)||0})),placeholder:"0"})]}),s.jsx("div",{className:"flex items-end",children:s.jsx(R,{type:"button",onClick:f,className:"w-full",children:"Ajouter"})})]}),c.category&&s.jsxs("div",{className:"p-4 border rounded-lg",children:[s.jsxs(O,{children:["Races pour ",c.category]}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mt-2",children:(C=a.farmManagement.breedsByCategory[c.category])==null?void 0:C.map(_=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(fi,{id:`breed-${_}`,checked:c.breeds.includes(_),onCheckedChange:()=>{c.breeds.includes(_)?g(_):p(_)}}),s.jsx(O,{htmlFor:`breed-${_}`,children:_})]},_))})]}),o.animalDetails&&o.animalDetails.length>0&&s.jsxs("div",{className:"p-4 border rounded-lg",children:[s.jsx(O,{children:"Cheptel configuré"}),s.jsx("div",{className:"mt-2 space-y-2",children:o.animalDetails.map((_,P)=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[s.jsxs("span",{children:[s.jsx(Pe,{variant:"secondary",children:_.category}),s.jsxs("span",{className:"ml-2",children:[_.maleCount," mâles, ",_.femaleCount," femelles"]}),_.breeds.length>0&&s.jsxs("span",{className:"ml-2 text-sm text-gray-600",children:["Races: ",_.breeds.join(", ")]})]}),s.jsx(R,{type:"button",variant:"outline",size:"sm",onClick:()=>v(P),children:"Supprimer"})]},P))})]})]})]}),s.jsxs(ee,{children:[s.jsx(he,{children:s.jsx(me,{children:"Informations administratives"})}),s.jsxs(te,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(O,{htmlFor:"registrationNumber",children:"Numéro d'immatriculation"}),s.jsx(Y,{id:"registrationNumber",value:o.registrationNumber||"",onChange:_=>d("registrationNumber",_.target.value),placeholder:"Numéro d'immatriculation"})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"surfaceArea",children:"Surface (hectares)"}),s.jsx(Y,{id:"surfaceArea",type:"number",step:"0.1",value:o.surfaceArea||"",onChange:_=>d("surfaceArea",parseFloat(_.target.value)||0),placeholder:"Surface en hectares"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(O,{htmlFor:"buildingDetails",children:"Détails des bâtiments"}),s.jsx(Ue,{id:"buildingDetails",value:o.buildingDetails||"",onChange:_=>d("buildingDetails",_.target.value),placeholder:"Description des bâtiments, étables, etc."})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(O,{htmlFor:"equipmentDetails",children:"Équipements"}),s.jsx(Ue,{id:"equipmentDetails",value:o.equipmentDetails||"",onChange:_=>d("equipmentDetails",_.target.value),placeholder:"Liste des équipements disponibles"})]})]})]}),s.jsxs(ee,{children:[s.jsx(he,{children:s.jsx(me,{children:"Certifications"})}),s.jsx(te,{children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:a.farmManagement.certificationTypes.map(_=>{var P;return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(fi,{id:`cert-${_}`,checked:((P=o.certifications)==null?void 0:P.includes(_))||!1,onCheckedChange:()=>m(_)}),s.jsx(O,{htmlFor:`cert-${_}`,children:_})]},_)})})})]}),s.jsxs(ee,{children:[s.jsx(he,{children:s.jsx(me,{children:"Assurance et contact d'urgence"})}),s.jsxs(te,{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(O,{htmlFor:"insuranceDetails",children:"Détails de l'assurance"}),s.jsx(Y,{id:"insuranceDetails",value:o.insuranceDetails||"",onChange:_=>d("insuranceDetails",_.target.value),placeholder:"Compagnie d'assurance et numéro de police"})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"emergencyName",children:"Nom du contact d'urgence"}),s.jsx(Y,{id:"emergencyName",value:((w=o.emergencyContact)==null?void 0:w.name)||"",onChange:_=>d("emergencyContact.name",_.target.value),placeholder:"Nom du contact"})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"emergencyPhone",children:"Téléphone d'urgence"}),s.jsx(Y,{id:"emergencyPhone",value:((N=o.emergencyContact)==null?void 0:N.phone)||"",onChange:_=>d("emergencyContact.phone",_.target.value),placeholder:"Téléphone"})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"emergencyRelation",children:"Relation"}),s.jsx(Y,{id:"emergencyRelation",value:((S=o.emergencyContact)==null?void 0:S.relation)||"",onChange:_=>d("emergencyContact.relation",_.target.value),placeholder:"Relation (époux, fils, etc.)"})]})]})]}),s.jsxs(ee,{children:[s.jsx(he,{children:s.jsx(me,{children:"Photos de l'exploitation"})}),s.jsx(te,{children:s.jsx(U8,{photos:o.photos||[],onPhotosChange:_=>d("photos",_),farmName:o.name||"Exploitation"})})]}),s.jsxs(ee,{children:[s.jsx(he,{children:s.jsx(me,{children:"Notes complémentaires"})}),s.jsx(te,{children:s.jsx(Ue,{value:o.notes||"",onChange:_=>d("notes",_.target.value),placeholder:"Notes additionnelles sur l'exploitation...",rows:3})})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(R,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsx(R,{type:"submit",children:"Mettre à jour l'exploitation"})]})]})]})}):null},Cke=({open:e,onOpenChange:t,intervention:n})=>{const{updateFarmIntervention:r,farms:a}=bt(),{toast:i}=it(),[o,l]=j.useState({farmId:"",type:"",date:"",animals:"",description:"",veterinarian:"",status:"scheduled",followUp:"",cost:""});j.useEffect(()=>{n&&e&&l({farmId:n.farmId.toString(),type:n.type,date:n.date,animals:n.animals,description:n.description,veterinarian:n.veterinarian,status:n.status,followUp:n.followUp||"",cost:n.cost||""})},[n,e]);const c=(h,m)=>{l(f=>({...f,[h]:m}))},u=h=>{if(h.preventDefault(),!n)return;if(!o.farmId||!o.type||!o.date||!o.animals||!o.description){i({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires",variant:"destructive"});return}const m={farmId:parseInt(o.farmId),type:o.type,date:o.date,animals:o.animals,description:o.description,veterinarian:o.veterinarian,status:o.status,followUp:o.followUp,cost:o.cost};r(n.id,m),i({title:"Succès",description:"Intervention mise à jour avec succès"}),t(!1)};if(!n)return null;const d=a.find(h=>h.id===parseInt(o.farmId));return s.jsx(Qe,{open:e,onOpenChange:t,children:s.jsxs(Ye,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(Xe,{children:[s.jsx(Je,{children:"Modifier l'Intervention"}),s.jsxs(Bt,{children:["Modifiez les informations de l'intervention du ",new Date(n.date).toLocaleDateString("fr-FR")]})]}),s.jsxs("form",{onSubmit:u,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{children:"Exploitation *"}),s.jsxs(je,{value:o.farmId,onValueChange:h=>c("farmId",h),children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Sélectionner l'exploitation"})}),s.jsx(ye,{children:a.map(h=>s.jsxs(z,{value:h.id.toString(),children:[h.name," - ",h.owner]},h.id))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{children:"Type d'intervention *"}),s.jsxs(je,{value:o.type,onValueChange:h=>c("type",h),children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Sélectionner le type"})}),s.jsxs(ye,{children:[s.jsx(z,{value:"vaccination",children:"Vaccination"}),s.jsx(z,{value:"controle",children:"Contrôle sanitaire"}),s.jsx(z,{value:"urgence",children:"Urgence"}),s.jsx(z,{value:"chirurgie",children:"Chirurgie"}),s.jsx(z,{value:"prevention",children:"Prévention"}),s.jsx(z,{value:"consultation",children:"Consultation"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"date",children:"Date *"}),s.jsx(Y,{id:"date",type:"date",value:o.date,onChange:h=>c("date",h.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{children:"Statut"}),s.jsxs(je,{value:o.status,onValueChange:h=>c("status",h),children:[s.jsx(xe,{children:s.jsx(be,{})}),s.jsxs(ye,{children:[s.jsx(z,{value:"scheduled",children:"Programmé"}),s.jsx(z,{value:"ongoing",children:"En cours"}),s.jsx(z,{value:"completed",children:"Terminé"}),s.jsx(z,{value:"cancelled",children:"Annulé"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"animals",children:"Animaux concernés *"}),s.jsx(Y,{id:"animals",value:o.animals,onChange:h=>c("animals",h.target.value),placeholder:"ex: 50 vaches, 100 porcs...",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"veterinarian",children:"Vétérinaire *"}),s.jsx(Y,{id:"veterinarian",value:o.veterinarian,onChange:h=>c("veterinarian",h.target.value),required:!0})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"description",children:"Description *"}),s.jsx(Ue,{id:"description",value:o.description,onChange:h=>c("description",h.target.value),rows:3,placeholder:"Détails de l'intervention, observations, traitements...",required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"followUp",children:"Suivi recommandé"}),s.jsx(Ue,{id:"followUp",value:o.followUp,onChange:h=>c("followUp",h.target.value),rows:2,placeholder:"Recommandations, prochain contrôle..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"cost",children:"Coût (€)"}),s.jsx(Y,{id:"cost",type:"number",value:o.cost,onChange:h=>c("cost",h.target.value),min:"0",step:"0.01",placeholder:"0.00"})]})]}),d&&s.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[s.jsx("h4",{className:"font-medium mb-2",children:"Informations de l'exploitation"}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Nom:"})," ",d.name]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Propriétaire:"})," ",d.owner]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Type:"})," ",d.type]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Adresse:"})," ",d.address]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(R,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsx(R,{type:"submit",children:"Mettre à jour"})]})]})]})})},_ke=()=>{const{farms:e,farmInterventions:t,deleteFarm:n,deleteFarmIntervention:r,getFarmsByStatus:a,getUpcomingFarmInterventions:i}=bt(),{toast:o}=it(),{currentView:l}=gc("farms"),[c,u]=j.useState(""),[d,h]=j.useState("all"),[m,f]=j.useState(l),[v,p]=j.useState(!1),[g,x]=j.useState(!1),[y,b]=j.useState(!1),[C,w]=j.useState(!1),[N,S]=j.useState(!1),[_,P]=j.useState(null),[A,E]=j.useState(null),k=e.filter(M=>{var ce,re;const ue=M.name.toLowerCase().includes(c.toLowerCase())||M.owner.toLowerCase().includes(c.toLowerCase())||((ce=M.types)==null?void 0:ce.some(V=>V.toLowerCase().includes(c.toLowerCase())))||!1,ve=d==="all"||((re=M.types)==null?void 0:re.includes(d))||!1;return ue&&ve}),I={active:"bg-green-100 text-green-800",attention:"bg-yellow-100 text-yellow-800",urgent:"bg-red-100 text-red-800"},D={"Bovin laitier":"Élevage bovin laitier","Bovin viande":"Élevage bovin viande",Porcin:"Élevage porcin",Avicole:"Élevage avicole",Ovin:"Élevage ovin",Caprin:"Élevage caprin",Équin:"Élevage équin",Apiculture:"Apiculture",Aquaculture:"Aquaculture",Cuniculture:"Cuniculture",Mixte:"Élevage mixte"},U={vaccination:"Vaccination",controle:"Contrôle sanitaire",urgence:"Urgence",chirurgie:"Chirurgie",prevention:"Prévention",consultation:"Consultation"},B=M=>{P(M),b(!0)},K=M=>{P(M),w(!0)},T=M=>{confirm("Êtes-vous sûr de vouloir supprimer cette exploitation ?")&&(n(M),o({title:"Succès",description:"Exploitation supprimée"}))},$=M=>{x(!0)},G=M=>{confirm("Êtes-vous sûr de vouloir supprimer cette intervention ?")&&(r(M),o({title:"Succès",description:"Intervention supprimée"}))},Q=M=>{E(M),S(!0)},ne=a("attention").length+a("urgent").length,oe=i();return s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-8 space-y-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Gestion des Exploitations"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Gérez les fermes, élevages et interventions vétérinaires"})]}),s.jsxs(R,{className:"gap-2 medical-glow w-full sm:w-auto",onClick:()=>p(!0),children:[s.jsx(Ze,{className:"h-4 w-4"}),"Nouvelle Exploitation"]})]}),s.jsxs("div",{className:"grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4",children:[s.jsx(ee,{children:s.jsxs(te,{className:"p-6 text-center",children:[s.jsx(Eb,{className:"h-12 w-12 text-primary mx-auto mb-4"}),s.jsx("div",{className:"text-2xl font-bold",children:e.length}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Exploitations"})]})}),s.jsx(ee,{children:s.jsxs(te,{className:"p-6 text-center",children:[s.jsx(bn,{className:"h-12 w-12 text-accent mx-auto mb-4"}),s.jsx("div",{className:"text-2xl font-bold",children:ne}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Alertes actives"})]})}),s.jsx(ee,{children:s.jsxs(te,{className:"p-6 text-center",children:[s.jsx(Ge,{className:"h-12 w-12 text-blue-600 mx-auto mb-4"}),s.jsx("div",{className:"text-2xl font-bold",children:oe.length}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Interventions à venir"})]})})]}),s.jsxs(ee,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(Lo,{className:"h-5 w-5"}),"Rechercher et filtrer"]})}),s.jsx(te,{className:"space-y-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsx(Y,{placeholder:"Rechercher par nom, propriétaire ou type...",value:c,onChange:M=>u(M.target.value),className:"w-full sm:max-w-md"}),s.jsxs(je,{value:d,onValueChange:h,children:[s.jsx(xe,{className:"w-full sm:w-48",children:s.jsx(be,{placeholder:"Type d'élevage"})}),s.jsxs(ye,{children:[s.jsx(z,{value:"all",children:"Tous types"}),s.jsx(z,{value:"Bovin laitier",children:"Élevage bovin laitier"}),s.jsx(z,{value:"Bovin viande",children:"Élevage bovin viande"}),s.jsx(z,{value:"Porcin",children:"Élevage porcin"}),s.jsx(z,{value:"Avicole",children:"Élevage avicole"}),s.jsx(z,{value:"Ovin",children:"Élevage ovin"}),s.jsx(z,{value:"Caprin",children:"Élevage caprin"}),s.jsx(z,{value:"Équin",children:"Élevage équin"}),s.jsx(z,{value:"Apiculture",children:"Apiculture"}),s.jsx(z,{value:"Aquaculture",children:"Aquaculture"}),s.jsx(z,{value:"Cuniculture",children:"Cuniculture"}),s.jsx(z,{value:"Mixte",children:"Élevage mixte"})]})]})]})})]}),s.jsxs(Ei,{defaultValue:"farms",className:"space-y-6",children:[s.jsxs(Ha,{className:"grid w-full grid-cols-2",children:[s.jsxs(Mt,{value:"farms",className:"gap-2",children:[s.jsx(Eb,{className:"h-4 w-4"}),"Exploitations"]}),s.jsxs(Mt,{value:"interventions",className:"gap-2",children:[s.jsx(Ge,{className:"h-4 w-4"}),"Interventions"]})]}),s.jsxs(It,{value:"farms",className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("h3",{className:"text-lg font-semibold",children:["Exploitations (",k.length,")"]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs(R,{size:"sm",variant:m==="cards"?"default":"outline",onClick:()=>f("cards"),className:"gap-2 flex-1 sm:flex-none",children:[s.jsx(Eo,{className:"h-4 w-4"}),"Cartes"]}),s.jsxs(R,{size:"sm",variant:m==="table"?"default":"outline",onClick:()=>f("table"),className:"gap-2 flex-1 sm:flex-none",children:[s.jsx(Ni,{className:"h-4 w-4"}),"Tableau"]}),s.jsxs(R,{onClick:()=>x(!0),className:"gap-2 flex-1 sm:flex-none",children:[s.jsx(Pn,{className:"h-4 w-4"}),"Nouvelle Intervention"]})]})]}),k.length===0?s.jsx(ee,{children:s.jsx(te,{className:"p-6 text-center text-muted-foreground",children:"Aucune exploitation trouvée"})}):m==="cards"?k.map(M=>{var ue;return s.jsx(ee,{className:"card-hover",children:s.jsx(te,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row items-start justify-between gap-4",children:[s.jsxs("div",{className:"space-y-3 flex-1",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4",children:[s.jsx("h4",{className:"text-xl font-semibold",children:M.name}),s.jsx(Pe,{variant:"outline",className:I[M.status],children:M.status==="active"?"Actif":M.status==="attention"?"Attention":"Urgent"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Propriétaire:"})," ",M.owner]}),s.jsxs("p",{className:"flex items-center gap-1",children:[s.jsx(ic,{className:"h-3 w-3"}),M.address]}),s.jsxs("p",{className:"flex items-center gap-1",children:[s.jsx(Iu,{className:"h-3 w-3"}),M.phone]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Types:"}),s.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:(ue=M.types)==null?void 0:ue.map(ve=>s.jsx(Pe,{variant:"secondary",className:"text-xs",children:D[ve]||ve},ve))})]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Animaux:"})," ",M.totalAnimals]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Vétérinaire:"})," ",M.veterinarian]})]})]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Dernière visite: ",$a(M.lastVisit)]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(R,{size:"sm",variant:"outline",onClick:()=>B(M),children:s.jsx(An,{className:"h-4 w-4"})}),s.jsx(R,{size:"sm",variant:"outline",onClick:()=>K(M),children:s.jsx($t,{className:"h-4 w-4"})}),s.jsx(R,{size:"sm",onClick:()=>$(),children:s.jsx(Pn,{className:"h-4 w-4"})}),s.jsx(R,{size:"sm",variant:"destructive",onClick:()=>T(M.id),children:s.jsx(Vt,{className:"h-4 w-4"})})]})]})})},M.id)}):s.jsx(ee,{children:s.jsx(te,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full min-w-[600px]",children:[s.jsx("thead",{className:"border-b",children:s.jsxs("tr",{className:"text-left",children:[s.jsx("th",{className:"p-4 font-medium",children:"Exploitation"}),s.jsx("th",{className:"p-4 font-medium",children:"Propriétaire"}),s.jsx("th",{className:"p-4 font-medium",children:"Type"}),s.jsx("th",{className:"p-4 font-medium",children:"Statut"}),s.jsx("th",{className:"p-4 font-medium",children:"Animaux"}),s.jsx("th",{className:"p-4 font-medium",children:"Contact"}),s.jsx("th",{className:"p-4 font-medium",children:"Actions"})]})}),s.jsx("tbody",{children:k.map(M=>{var ue;return s.jsxs("tr",{className:"border-b hover:bg-muted/50",children:[s.jsx("td",{className:"p-4",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:M.name}),s.jsx("div",{className:"text-sm text-muted-foreground",children:M.address})]})}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:M.owner}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Vét: ",M.veterinarian]})]})}),s.jsx("td",{className:"p-4",children:s.jsx("div",{className:"flex flex-wrap gap-1",children:(ue=M.types)==null?void 0:ue.map(ve=>s.jsx(Pe,{variant:"secondary",className:"text-xs",children:D[ve]||ve},ve))})}),s.jsx("td",{className:"p-4",children:s.jsx(Pe,{variant:"outline",className:I[M.status],children:M.status==="active"?"Actif":M.status==="attention"?"Attention":"Urgent"})}),s.jsx("td",{className:"p-4",children:M.totalAnimals}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Iu,{className:"h-3 w-3"}),M.phone]}),s.jsxs("div",{className:"text-muted-foreground",children:["Dernière visite: ",$a(M.lastVisit)]})]})}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.jsx(R,{size:"sm",variant:"outline",onClick:()=>B(M),children:s.jsx(An,{className:"h-4 w-4"})}),s.jsx(R,{size:"sm",variant:"outline",onClick:()=>K(M),children:s.jsx($t,{className:"h-4 w-4"})}),s.jsx(R,{size:"sm",onClick:()=>$(),children:s.jsx(Pn,{className:"h-4 w-4"})}),s.jsx(R,{size:"sm",variant:"destructive",onClick:()=>T(M.id),children:s.jsx(Vt,{className:"h-4 w-4"})})]})})]},M.id)})})]})})})})]}),s.jsxs(It,{value:"interventions",className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("h3",{className:"text-lg font-semibold",children:["Interventions récentes (",t.length,")"]}),s.jsxs(R,{onClick:()=>x(!0),className:"gap-2 w-full sm:w-auto",children:[s.jsx(Pn,{className:"h-4 w-4"}),"Nouvelle Intervention"]})]}),t.length===0?s.jsx(ee,{children:s.jsx(te,{className:"p-6 text-center text-muted-foreground",children:"Aucune intervention enregistrée"})}):t.map(M=>s.jsx(ee,{className:"card-hover",children:s.jsx(te,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex flex-col sm:flex-row items-start justify-between gap-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4",children:[s.jsx("h4",{className:"text-lg font-semibold",children:U[M.type]}),s.jsx(Pe,{variant:"outline",className:M.status==="completed"?"bg-green-100 text-green-800":M.status==="ongoing"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800",children:M.status==="completed"?"Terminé":M.status==="ongoing"?"En cours":M.status==="scheduled"?"Programmé":"Annulé"})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-4 sm:gap-6 text-sm text-muted-foreground",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Ge,{className:"h-3 w-3"}),$a(M.date)]}),s.jsx("span",{children:M.farmName}),s.jsx("span",{children:M.veterinarian})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Animaux concernés:"})," ",M.animals]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Suivi:"})," ",M.followUp||"Aucun"]})]}),s.jsx("p",{className:"text-sm",children:M.description}),s.jsxs("div",{className:"flex flex-wrap gap-2 pt-2 border-t",children:[s.jsx(R,{size:"sm",variant:"outline",children:s.jsx(An,{className:"h-4 w-4"})}),s.jsx(R,{size:"sm",variant:"outline",onClick:()=>Q(M),children:s.jsx($t,{className:"h-4 w-4"})}),M.status==="ongoing"&&s.jsx(R,{size:"sm",children:s.jsx(Pn,{className:"h-4 w-4"})}),s.jsx(R,{size:"sm",variant:"destructive",onClick:()=>G(M.id),children:s.jsx(Vt,{className:"h-4 w-4"})})]})]})})},M.id))]})]}),s.jsx(bke,{open:v,onOpenChange:p}),s.jsx(wke,{open:g,onOpenChange:x,farmId:_==null?void 0:_.id,farmName:_==null?void 0:_.name}),s.jsx(Nke,{farm:_,open:y,onOpenChange:b,onEdit:()=>K(_),onNewIntervention:()=>{b(!1),x(!0)}}),s.jsx(Ske,{farm:_,open:C,onOpenChange:w}),s.jsx(Cke,{intervention:A,open:N,onOpenChange:S})]})};function Ej({children:e,mode:t,protocol:n,open:r,onOpenChange:a}){var b;const i=hee(),o=mee(),{toast:l}=it(),{data:c=[],isLoading:u}=Ko(),{data:d=[],isLoading:h}=J3(),[m,f]=j.useState(!1),v=r!==void 0?r:m,p=a||f,[g,x]=j.useState({species:(n==null?void 0:n.species)||"",vaccineName:(n==null?void 0:n.vaccine_name)||"",vaccineType:(n==null?void 0:n.vaccine_type)||"",ageRecommendation:(n==null?void 0:n.age_recommendation)||"",frequency:(n==null?void 0:n.frequency)||"",durationDays:((b=n==null?void 0:n.duration_days)==null?void 0:b.toString())||"",notes:(n==null?void 0:n.notes)||"",active:(n==null?void 0:n.active)??!0}),y=async C=>{if(C.preventDefault(),!g.species||!g.vaccineName||!g.vaccineType){l({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires",variant:"destructive"});return}try{const w={species:g.species,vaccine_name:g.vaccineName,vaccine_type:g.vaccineType,age_recommendation:g.ageRecommendation||void 0,frequency:g.frequency||void 0,duration_days:g.durationDays?parseInt(g.durationDays):void 0,notes:g.notes||void 0,active:g.active};t==="create"?(await i.mutateAsync(w),l({title:"Protocole créé",description:`Le protocole ${g.vaccineName} a été créé avec succès`})):n&&(await o.mutateAsync({id:n.id,data:w}),l({title:"Protocole modifié",description:`Le protocole ${g.vaccineName} a été modifié avec succès`})),t==="create"&&x({species:"",vaccineName:"",vaccineType:"",ageRecommendation:"",frequency:"",durationDays:"",notes:"",active:!0}),p(!1)}catch{l({title:"Erreur",description:`Impossible de ${t==="create"?"créer":"modifier"} le protocole`,variant:"destructive"})}};return s.jsxs(Qe,{open:v,onOpenChange:p,children:[s.jsx(Tf,{asChild:!0,children:e||s.jsxs(R,{className:"gap-2",children:[s.jsx(Ze,{className:"h-4 w-4"}),t==="create"?"Nouveau Protocole":"Modifier"]})}),s.jsxs(Ye,{className:"max-w-2xl",children:[s.jsx(Xe,{children:s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(xr,{className:"h-5 w-5"}),t==="create"?"Nouveau Protocole Vaccinal":"Modifier le Protocole"]})}),s.jsxs("form",{onSubmit:y,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"species",children:"Espèce *"}),s.jsxs(je,{value:g.species,onValueChange:C=>x({...g,species:C}),children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Sélectionnez l'espèce"})}),s.jsx(ye,{children:c.map(C=>s.jsx(z,{value:C,children:C},C))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"vaccineName",children:"Nom du vaccin *"}),s.jsx(Y,{id:"vaccineName",value:g.vaccineName,onChange:C=>x({...g,vaccineName:C.target.value}),placeholder:"ex: DHPP, Rage, FVRCP...",required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"vaccineType",children:"Type de vaccin *"}),s.jsxs(je,{value:g.vaccineType,onValueChange:C=>x({...g,vaccineType:C}),children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Sélectionnez le type"})}),s.jsx(ye,{children:d.map(C=>s.jsx(z,{value:C,children:C},C))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"ageRecommendation",children:"Âge recommandé"}),s.jsx(Y,{id:"ageRecommendation",value:g.ageRecommendation,onChange:C=>x({...g,ageRecommendation:C.target.value}),placeholder:"ex: 8 semaines, 3 mois..."})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"frequency",children:"Fréquence"}),s.jsx(Y,{id:"frequency",value:g.frequency,onChange:C=>x({...g,frequency:C.target.value}),placeholder:"ex: Annuelle, Tous les 3 ans..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"durationDays",children:"Durée (jours)"}),s.jsx(Y,{id:"durationDays",type:"number",value:g.durationDays,onChange:C=>x({...g,durationDays:C.target.value}),placeholder:"ex: 365, 1095...",min:"1"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"notes",children:"Notes"}),s.jsx(Ue,{id:"notes",value:g.notes,onChange:C=>x({...g,notes:C.target.value}),placeholder:"Informations complémentaires sur le protocole...",rows:3})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"active",checked:g.active,onChange:C=>x({...g,active:C.target.checked}),className:"rounded"}),s.jsx(O,{htmlFor:"active",children:"Protocole actif"})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(R,{type:"button",variant:"outline",onClick:()=>p(!1),children:"Annuler"}),s.jsx(R,{type:"submit",disabled:i.isPending||o.isPending,children:i.isPending||o.isPending?t==="create"?"Création...":"Modification...":t==="create"?"Créer le protocole":"Modifier le protocole"})]})]})]})]})}const Pke=e=>{if(!e.next_due_date)return"completed";const t=new Date,n=new Date(e.next_due_date);return Zg(n,t)?"overdue":"scheduled"},xO=e=>{switch(e){case"completed":return"bg-green-100 text-green-800 border-green-200";case"overdue":return"bg-red-100 text-red-800 border-red-200";case"scheduled":return"bg-blue-100 text-blue-800 border-blue-200";case"missed":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},yO=e=>{switch(e){case"completed":return s.jsx(Ln,{className:"h-4 w-4"});case"overdue":return s.jsx(bn,{className:"h-4 w-4"});case"scheduled":return s.jsx(Qt,{className:"h-4 w-4"});case"missed":return s.jsx(bn,{className:"h-4 w-4"});default:return s.jsx(Qt,{className:"h-4 w-4"})}};function Ake(){const{data:e=[],isLoading:t}=Id(),{data:n=[],isLoading:r}=or(),{data:a=[],isLoading:i}=ir(),{data:o=[]}=dee(),l=uee();cee();const{toast:c}=it(),{currentView:u}=gc("vaccinations"),{data:d=[],isLoading:h}=Ko(),[m,f]=j.useState(u),[v,p]=j.useState(""),[g,x]=j.useState("all"),[y,b]=j.useState("all"),[C,w]=j.useState("overview"),[N,S]=j.useState(null),[_,P]=j.useState(!1),[A,E]=j.useState(!1),[k,I]=j.useState(null),D=j.useMemo(()=>t||r||i?[]:e.map(Q=>{const ne=n.find(M=>M.id===Q.animal_id),oe=a.find(M=>M.id===(ne==null?void 0:ne.client_id));return{...Q,petName:(ne==null?void 0:ne.name)||"Animal inconnu",clientName:oe?`${oe.first_name} ${oe.last_name}`:"Client inconnu",status:Pke(Q),animal:ne,client:oe}}),[e,n,a,t,r,i]),U=j.useMemo(()=>{const Q=D.length,ne=D.filter(ve=>ve.status==="completed").length,oe=D.filter(ve=>ve.status==="overdue").length,M=D.filter(ve=>ve.status==="scheduled").length,ue=D.filter(ve=>{if(!ve.next_due_date)return!1;const ce=new Date,re=new Date(ve.next_due_date),V=c2(ce,30);return Zte(re,ce)&&Zg(re,V)}).length;return{total:Q,completed:ne,overdue:oe,scheduled:M,upcoming:ue}},[D]),B=j.useMemo(()=>D.filter(Q=>{var ue;const ne=Q.petName.toLowerCase().includes(v.toLowerCase())||Q.clientName.toLowerCase().includes(v.toLowerCase())||Q.vaccine_name.toLowerCase().includes(v.toLowerCase()),oe=g==="all"||Q.status===g,M=y==="all"||((ue=Q.animal)==null?void 0:ue.species)===y;return ne&&oe&&M}),[D,v,g,y]),K=Q=>{I(Q),E(!0)},T=()=>{k&&(l.mutate(k.id),c({title:"Vaccination supprimée",description:`La vaccination ${k.vaccine_name} a été supprimée avec succès.`}),E(!1),I(null))},$=()=>{const Q=JSON.stringify(D,null,2),ne=new Blob([Q],{type:"application/json"}),oe=URL.createObjectURL(ne),M=document.createElement("a");M.href=oe,M.download=`vaccinations-${st(new Date,"yyyy-MM-dd")}.json`,M.click(),URL.revokeObjectURL(oe)};return t||r||i?s.jsx("div",{className:"space-y-6 max-w-7xl mx-auto p-4 sm:p-6 lg:p-8",children:s.jsx(ee,{children:s.jsxs(te,{className:"p-8 text-center",children:[s.jsx(Qn,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),s.jsx("p",{children:"Chargement des données de vaccination..."})]})})}):s.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto p-4 sm:p-6 lg:p-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 flex items-center gap-3 dark:text-white",children:[s.jsx(Vr,{className:"h-6 sm:h-8 w-6 sm:w-8 text-blue-600"}),"Gestion Vaccinale"]}),s.jsx("p",{className:"text-gray-600 mt-1 text-sm sm:text-base",children:"Suivi et planification des vaccinations"})]}),s.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[s.jsxs(R,{onClick:$,variant:"outline",className:"gap-2 flex-1 sm:flex-none",children:[s.jsx(Nx,{className:"h-4 w-4"}),"Exporter"]}),s.jsx(r1,{})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:[s.jsx(ee,{children:s.jsx(te,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-2 sm:p-3 bg-blue-100 rounded-full",children:s.jsx(Vr,{className:"h-5 sm:h-6 w-5 sm:w-6 text-blue-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:U.total})]})]})})}),s.jsx(ee,{children:s.jsx(te,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-2 sm:p-3 bg-green-100 rounded-full",children:s.jsx(Ln,{className:"h-5 sm:h-6 w-5 sm:w-6 text-green-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Terminées"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:U.completed})]})]})})}),s.jsx(ee,{children:s.jsx(te,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-2 sm:p-3 bg-red-100 rounded-full",children:s.jsx(bn,{className:"h-5 sm:h-6 w-5 sm:w-6 text-red-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"En Retard"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:U.overdue})]})]})})}),s.jsx(ee,{children:s.jsx(te,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-2 sm:p-3 bg-orange-100 rounded-full",children:s.jsx(Qt,{className:"h-5 sm:h-6 w-5 sm:w-6 text-orange-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Prochaines 30j"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:U.upcoming})]})]})})}),s.jsx(ee,{children:s.jsx(te,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"p-2 sm:p-3 bg-purple-100 rounded-full",children:s.jsx(Ge,{className:"h-5 sm:h-6 w-5 sm:w-6 text-purple-600"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Planifiées"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:U.scheduled})]})]})})})]}),s.jsxs(Ei,{value:C,onValueChange:w,children:[s.jsxs(Ha,{className:"grid w-full grid-cols-2",children:[s.jsxs(Mt,{value:"overview",className:"flex items-center gap-2 text-xs sm:text-sm",children:[s.jsx(cn,{className:"h-3 sm:h-4 w-3 sm:w-4"}),"Vue d'ensemble"]}),s.jsxs(Mt,{value:"protocols",className:"flex items-center gap-2 text-xs sm:text-sm",children:[s.jsx(xr,{className:"h-3 sm:h-4 w-3 sm:w-4"}),"Protocoles"]})]}),s.jsxs(It,{value:"overview",className:"space-y-4",children:[s.jsx(ee,{children:s.jsx(te,{className:"p-4",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center justify-between",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1 w-full",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Lo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),s.jsx(Y,{placeholder:"Rechercher animal, client, vaccin...",value:v,onChange:Q=>p(Q.target.value),className:"pl-10"})]}),s.jsxs(je,{value:g,onValueChange:x,children:[s.jsx(xe,{className:"w-full sm:w-[150px]",children:s.jsx(be,{})}),s.jsxs(ye,{children:[s.jsx(z,{value:"all",children:"Tous statuts"}),s.jsx(z,{value:"completed",children:"Terminées"}),s.jsx(z,{value:"scheduled",children:"Planifiées"}),s.jsx(z,{value:"overdue",children:"En retard"})]})]}),s.jsxs(je,{value:y,onValueChange:b,children:[s.jsx(xe,{className:"w-full sm:w-[150px]",children:s.jsx(be,{})}),s.jsxs(ye,{children:[s.jsx(z,{value:"all",children:"Toutes espèces"}),d.map(Q=>s.jsx(z,{value:Q,children:Q},Q))]})]})]}),s.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto justify-center sm:justify-end",children:[s.jsx(R,{variant:m==="cards"?"default":"outline",size:"sm",onClick:()=>f("cards"),children:s.jsx(Eo,{className:"h-4 w-4"})}),s.jsx(R,{variant:m==="table"?"default":"outline",size:"sm",onClick:()=>f("table"),children:s.jsx(Ni,{className:"h-4 w-4"})})]})]})})}),m==="cards"?s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:B.map(Q=>{var ne;return s.jsx(ee,{className:"hover:shadow-md transition-shadow",children:s.jsxs(te,{className:"p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Jn,{className:"h-10 w-10",children:s.jsx(Zn,{children:s.jsx(Dg,{className:"h-5 w-5"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-sm",children:Q.petName}),s.jsxs("p",{className:"text-xs text-gray-600",children:[(ne=Q.animal)==null?void 0:ne.species," • ",Q.clientName]})]})]}),s.jsxs(Pe,{className:`${xO(Q.status)} text-xs`,children:[yO(Q.status),s.jsx("span",{className:"ml-1 capitalize",children:Q.status})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Vr,{className:"h-4 w-4 text-blue-600"}),s.jsx("span",{className:"font-medium text-sm",children:Q.vaccine_name}),Q.vaccine_type&&s.jsx(Pe,{variant:"outline",className:"text-xs",children:Q.vaccine_type})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(Ge,{className:"h-4 w-4"}),s.jsxs("span",{children:["Date: ",st(new Date(Q.vaccination_date),"dd/MM/yyyy",{locale:zn})]})]}),Q.next_due_date&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(Qt,{className:"h-4 w-4"}),s.jsxs("span",{children:["Prochain: ",st(new Date(Q.next_due_date),"dd/MM/yyyy",{locale:zn})]})]}),Q.administered_by&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[s.jsx(Va,{className:"h-4 w-4"}),s.jsx("span",{children:Q.administered_by})]})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-4 pt-3 border-t",children:[s.jsxs(R,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>{S(Q),P(!0)},children:[s.jsx(An,{className:"h-4 w-4 mr-1"}),"Détails"]}),s.jsx(R,{size:"sm",variant:"outline",onClick:()=>K(Q),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:s.jsx(Vt,{className:"h-4 w-4"})})]})]})},Q.id)})}):s.jsx(ee,{children:s.jsx(te,{className:"p-0",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Xd,{children:[s.jsx(Jd,{children:s.jsxs(ma,{children:[s.jsx(ht,{children:"Animal"}),s.jsx(ht,{children:"Vaccin"}),s.jsx(ht,{children:"Date"}),s.jsx(ht,{children:"Prochain"}),s.jsx(ht,{children:"Statut"}),s.jsx(ht,{children:"Actions"})]})}),s.jsx(Zd,{children:B.map(Q=>s.jsxs(ma,{children:[s.jsx(mt,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Jn,{className:"h-8 w-8",children:s.jsx(Zn,{children:s.jsx(Dg,{className:"h-4 w-4"})})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-sm",children:Q.petName}),s.jsx("div",{className:"text-xs text-gray-600",children:Q.clientName})]})]})}),s.jsx(mt,{className:"font-medium",children:Q.vaccine_name}),s.jsx(mt,{children:st(new Date(Q.vaccination_date),"dd/MM/yyyy")}),s.jsx(mt,{children:Q.next_due_date?st(new Date(Q.next_due_date),"dd/MM/yyyy"):"N/A"}),s.jsx(mt,{children:s.jsxs(Pe,{className:xO(Q.status),children:[yO(Q.status),s.jsx("span",{className:"ml-1 capitalize",children:Q.status})]})}),s.jsx(mt,{children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(R,{size:"sm",variant:"outline",onClick:()=>{S(Q),P(!0)},children:s.jsx(An,{className:"h-4 w-4"})}),s.jsx(R,{size:"sm",variant:"outline",onClick:()=>K(Q),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:s.jsx(Vt,{className:"h-4 w-4"})})]})})]},Q.id))})]})})})})]}),s.jsx(It,{value:"protocols",children:s.jsxs(ee,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xr,{className:"h-5 w-5"}),"Protocoles Vaccinaux (",o.length,")"]}),s.jsx(Ej,{mode:"create"})]})}),s.jsxs(te,{children:[s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(Q=>s.jsx(ee,{className:"hover:shadow-md transition-shadow",children:s.jsx(te,{className:"p-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsx("h4",{className:"font-semibold",children:Q.vaccine_name}),!Q.active&&s.jsx(Pe,{variant:"secondary",className:"text-xs",children:"Inactif"})]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Espèce: ",Q.species]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Type: ",Q.vaccine_type]}),Q.frequency&&s.jsxs("p",{className:"text-sm text-gray-600",children:["Fréquence: ",Q.frequency]}),Q.age_recommendation&&s.jsxs("p",{className:"text-sm text-gray-600",children:["Âge: ",Q.age_recommendation]}),Q.notes&&s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:Q.notes}),s.jsx("div",{className:"flex gap-2 mt-3",children:s.jsx(Ej,{mode:"edit",protocol:Q,children:s.jsxs(R,{size:"sm",variant:"outline",className:"flex-1",children:[s.jsx($t,{className:"h-4 w-4 mr-1"}),"Modifier"]})})})]})})},Q.id))}),o.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(xr,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),s.jsx("p",{children:"Aucun protocole vaccinal configuré"}),s.jsx(Ej,{mode:"create",children:s.jsxs(R,{className:"mt-4",children:[s.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Créer un protocole"]})})]})]})]})})]}),s.jsx(Qe,{open:_,onOpenChange:P,children:s.jsxs(Ye,{className:"max-w-2xl w-full mx-4",children:[s.jsx(Xe,{children:s.jsx(Je,{children:"Détails de la Vaccination"})}),N&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Animal:"}),s.jsx("p",{children:N.petName})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Client:"}),s.jsx("p",{children:N.clientName})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Vaccin:"}),s.jsx("p",{children:N.vaccine_name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Date:"}),s.jsx("p",{children:st(new Date(N.vaccination_date),"dd/MM/yyyy",{locale:zn})})]}),N.next_due_date&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Prochain rappel:"}),s.jsx("p",{children:st(new Date(N.next_due_date),"dd/MM/yyyy",{locale:zn})})]})]}),N.notes&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Notes:"}),s.jsx("p",{className:"text-gray-600",children:N.notes})]}),s.jsx("div",{className:"border-t pt-4 mt-4",children:s.jsx("div",{className:"flex justify-center",children:s.jsx(N8,{animalId:N.animal_id})})})]})]})}),s.jsx(Qe,{open:A,onOpenChange:E,children:s.jsxs(Ye,{className:"max-w-md w-full mx-4",children:[s.jsx(Xe,{children:s.jsx(Je,{children:"Confirmer la suppression"})}),k&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("p",{className:"text-gray-600",children:["Êtes-vous sûr de vouloir supprimer la vaccination ",s.jsx("strong",{children:k.vaccine_name})," pour ",s.jsx("strong",{children:k.petName})," ?"]}),s.jsx("p",{className:"text-sm text-red-600",children:"Cette action est irréversible."}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2",children:[s.jsx(R,{variant:"outline",onClick:()=>E(!1),className:"w-full sm:w-auto",children:"Annuler"}),s.jsx(R,{variant:"destructive",onClick:T,className:"w-full sm:w-auto",children:"Supprimer"})]})]})]})})]})}var Zy="Switch",[kke,MTe]=Yr(Zy),[Tke,Eke]=kke(Zy),W8=j.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:a,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=e,[m,f]=j.useState(null),v=xt(t,b=>f(b)),p=j.useRef(!1),g=m?d||!!m.closest("form"):!0,[x,y]=wi({prop:a,defaultProp:i??!1,onChange:u,caller:Zy});return s.jsxs(Tke,{scope:n,checked:x,disabled:l,children:[s.jsx(Ve.button,{type:"button",role:"switch","aria-checked":x,"aria-required":o,"data-state":Y8(x),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:v,onClick:ke(e.onClick,b=>{y(C=>!C),g&&(p.current=b.isPropagationStopped(),p.current||b.stopPropagation())})}),g&&s.jsx(G8,{control:m,bubbles:!p.current,name:r,value:c,checked:x,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});W8.displayName=Zy;var H8="SwitchThumb",K8=j.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,a=Eke(H8,n);return s.jsx(Ve.span,{"data-state":Y8(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t})});K8.displayName=H8;var Oke="SwitchBubbleInput",G8=j.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...a},i)=>{const o=j.useRef(null),l=xt(o,i),c=e2(n),u=fS(t);return j.useEffect(()=>{const d=o.current;if(!d)return;const h=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(h,"checked").set;if(c!==n&&f){const v=new Event("click",{bubbles:r});f.call(d,n),d.dispatchEvent(v)}},[c,n,r]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:l,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});G8.displayName=Oke;function Y8(e){return e?"checked":"unchecked"}var Q8=W8,Dke=K8;const Rr=j.forwardRef(({className:e,...t},n)=>s.jsx(Q8,{className:De("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:s.jsx(Dke,{className:De("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Rr.displayName=Q8.displayName;function Mke({open:e,onOpenChange:t,editingProtocol:n}){const r=xee(),a=yee(),{toast:i}=it(),{data:o=[],isLoading:l}=Ko(),{data:c=[],isLoading:u}=Z3(),[d,h]=j.useState({species:"",parasiteType:"",productName:"",activeIngredient:"",administrationRoute:"",dosageRecommendation:"",frequencyDays:"",ageRecommendation:"",weightRange:"",seasonRecommendation:"",notes:"",active:!0});j.useEffect(()=>{n&&h({species:n.species,parasiteType:n.parasite_type,productName:n.product_name,activeIngredient:n.active_ingredient||"",administrationRoute:n.administration_route||"",dosageRecommendation:n.dosage_per_kg||"",frequencyDays:"",ageRecommendation:n.age_restriction||"",weightRange:"",seasonRecommendation:"",notes:n.notes||"",active:n.active})},[n]);const m=(g,x)=>{h(y=>({...y,[g]:x}))},f=()=>{h({species:"",parasiteType:"",productName:"",activeIngredient:"",administrationRoute:"",dosageRecommendation:"",frequencyDays:"",ageRecommendation:"",weightRange:"",seasonRecommendation:"",notes:"",active:!0})},v=async g=>{if(g.preventDefault(),!d.species||!d.parasiteType||!d.productName){i({title:"Erreur",description:"Veuillez remplir tous les champs obligatoires.",variant:"destructive"});return}try{const x={species:d.species,parasite_type:d.parasiteType,product_name:d.productName,active_ingredient:d.activeIngredient||void 0,administration_route:d.administrationRoute||void 0,dosage_per_kg:d.dosageRecommendation||void 0,frequency:d.frequencyDays?`${d.frequencyDays} jours`:void 0,age_restriction:d.ageRecommendation||void 0,notes:[d.notes,d.weightRange?`Poids: ${d.weightRange}`:"",d.seasonRecommendation?`Saison: ${d.seasonRecommendation}`:""].filter(Boolean).join(" | ")||void 0,active:d.active};n?(await a.mutateAsync({id:n.id,updates:x}),i({title:"Succès",description:"Le protocole antiparasitaire a été modifié avec succès."})):(await r.mutateAsync(x),i({title:"Succès",description:"Le protocole antiparasitaire a été créé avec succès."})),f(),t(!1)}catch(x){console.error("Erreur lors de la sauvegarde du protocole:",x),i({title:"Erreur",description:"Une erreur s'est produite lors de la sauvegarde.",variant:"destructive"})}},p=r.isPending||a.isPending;return s.jsx(Qe,{open:e,onOpenChange:t,children:s.jsxs(Ye,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[s.jsx(Xe,{children:s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(xr,{className:"h-5 w-5"}),n?"Modifier le protocole":"Nouveau protocole antiparasitaire"]})}),s.jsxs("form",{onSubmit:v,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"species",children:"Espèce *"}),s.jsxs(je,{value:d.species,onValueChange:g=>m("species",g),children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Sélectionner une espèce"})}),s.jsx(ye,{children:o.map(g=>s.jsx(z,{value:g,children:g},g))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"parasiteType",children:"Type de parasite *"}),s.jsxs(je,{value:d.parasiteType,onValueChange:g=>m("parasiteType",g),children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Sélectionner le type"})}),s.jsx(ye,{children:c.map(g=>s.jsx(z,{value:g,children:g},g))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"productName",children:"Nom du produit *"}),s.jsx(Y,{id:"productName",value:d.productName,onChange:g=>m("productName",g.target.value),placeholder:"Ex: Frontline, Bravecto...",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"activeIngredient",children:"Principe actif"}),s.jsx(Y,{id:"activeIngredient",value:d.activeIngredient,onChange:g=>m("activeIngredient",g.target.value),placeholder:"Ex: Fipronil, Fluralaner..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"administrationRoute",children:"Voie d'administration"}),s.jsxs(je,{value:d.administrationRoute,onValueChange:g=>m("administrationRoute",g),children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Sélectionner la voie"})}),s.jsxs(ye,{children:[s.jsx(z,{value:"spot_on",children:"Spot-on (pipette)"}),s.jsx(z,{value:"oral",children:"Orale (comprimé/liquide)"}),s.jsx(z,{value:"injection",children:"Injection"}),s.jsx(z,{value:"spray",children:"Spray"}),s.jsx(z,{value:"collier",children:"Collier"}),s.jsx(z,{value:"shampoing",children:"Shampoing"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"dosageRecommendation",children:"Recommandation de dosage"}),s.jsx(Y,{id:"dosageRecommendation",value:d.dosageRecommendation,onChange:g=>m("dosageRecommendation",g.target.value),placeholder:"Ex: 1 pipette par 10-20kg..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"frequencyDays",children:"Fréquence (jours)"}),s.jsx(Y,{id:"frequencyDays",type:"number",value:d.frequencyDays,onChange:g=>m("frequencyDays",g.target.value),placeholder:"Ex: 30, 90..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"ageRecommendation",children:"Recommandation d'âge"}),s.jsx(Y,{id:"ageRecommendation",value:d.ageRecommendation,onChange:g=>m("ageRecommendation",g.target.value),placeholder:"Ex: > 8 semaines, adulte..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"weightRange",children:"Gamme de poids"}),s.jsx(Y,{id:"weightRange",value:d.weightRange,onChange:g=>m("weightRange",g.target.value),placeholder:"Ex: 10-20kg, < 5kg..."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"seasonRecommendation",children:"Recommandation saisonnière"}),s.jsxs(je,{value:d.seasonRecommendation,onValueChange:g=>m("seasonRecommendation",g),children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Sélectionner la saison"})}),s.jsxs(ye,{children:[s.jsx(z,{value:"toute_annee",children:"Toute l'année"}),s.jsx(z,{value:"printemps_ete",children:"Printemps-Été"}),s.jsx(z,{value:"automne_hiver",children:"Automne-Hiver"}),s.jsx(z,{value:"printemps",children:"Printemps"}),s.jsx(z,{value:"ete",children:"Été"}),s.jsx(z,{value:"automne",children:"Automne"}),s.jsx(z,{value:"hiver",children:"Hiver"})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"notes",children:"Notes"}),s.jsx(Ue,{id:"notes",value:d.notes,onChange:g=>m("notes",g.target.value),placeholder:"Informations supplémentaires, contre-indications...",rows:3})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Rr,{id:"active",checked:d.active,onCheckedChange:g=>m("active",g)}),s.jsx(O,{htmlFor:"active",children:"Protocole actif"})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx(R,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsxs(R,{type:"submit",disabled:p,children:[p&&s.jsx(Qn,{className:"h-4 w-4 mr-2 animate-spin"}),n?"Modifier":"Créer"]})]})]})]})})}const Ike=e=>{if(!e.next_treatment_date)return"completed";const t=new Date(e.next_treatment_date),n=new Date,r=c2(n,7);return Zg(t,n)?"overdue":Zg(t,r)?"upcoming":"scheduled"},jO=e=>{switch(e){case"completed":return"bg-green-100 text-green-800 border-green-200";case"overdue":return"bg-red-100 text-red-800 border-red-200";case"scheduled":return"bg-blue-100 text-blue-800 border-blue-200";case"upcoming":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},bO=e=>{switch(e){case"completed":return s.jsx(Ln,{className:"h-4 w-4"});case"overdue":return s.jsx(bn,{className:"h-4 w-4"});case"scheduled":return s.jsx(Qt,{className:"h-4 w-4"});case"upcoming":return s.jsx(Ge,{className:"h-4 w-4"});default:return s.jsx(Qt,{className:"h-4 w-4"})}},wO=e=>{switch(e){case"completed":return"Terminé";case"overdue":return"En retard";case"scheduled":return"Programmé";case"upcoming":return"À venir";default:return"Inconnu"}},$ke=(e,t,n)=>e.map(r=>{const a=t.find(l=>l.id===r.animal_id),i=a?n.find(l=>l.id===a.client_id):null,o=Ike(r);return{...r,petName:(a==null?void 0:a.name)||"Animal inconnu",petSpecies:(a==null?void 0:a.species)||"Espèce inconnue",clientName:i?`${i.first_name} ${i.last_name}`:"Client inconnu",status:o,animal:a,client:i}});function Rke(){const{currentView:e}=gc("antiparasitics"),{data:t=[],isLoading:n}=Gx(),{data:r=[],isLoading:a}=gee(),{data:i=[]}=or(),{data:o=[]}=ir(),l=pee(),{toast:c}=it(),{data:u=[],isLoading:d}=Ko(),[h,m]=j.useState(""),[f,v]=j.useState("all"),[p,g]=j.useState("all"),[x,y]=j.useState("all"),[b,C]=j.useState(!1),[w,N]=j.useState(!1),[S,_]=j.useState(!1),[P,A]=j.useState(null),[E,k]=j.useState(!1),[I,D]=j.useState(null),[U,B]=j.useState(null),K=j.useMemo(()=>$ke(t,i,o),[t,i,o]),T=j.useMemo(()=>K.filter(M=>{const ue=!h||M.petName.toLowerCase().includes(h.toLowerCase())||M.clientName.toLowerCase().includes(h.toLowerCase())||M.product_name.toLowerCase().includes(h.toLowerCase()),ve=f==="all"||M.status===f,ce=p==="all"||M.parasite_type===p,re=x==="all"||M.petSpecies===x;return ue&&ve&&ce&&re}),[K,h,f,p,x]),$=j.useMemo(()=>{const M=K.length,ue=K.filter(V=>V.status==="overdue").length,ve=K.filter(V=>V.status==="upcoming").length,ce=K.filter(V=>V.status==="completed").length,re=K.reduce((V,le)=>{const W=le.parasite_type||"Non spécifié";return V[W]=(V[W]||0)+1,V},{});return{total:M,overdue:ue,upcoming:ve,completed:ce,parasiteTypes:re}},[K]),G=M=>{D(M),k(!0)},Q=async()=>{if(I)try{await l.mutateAsync(I.id),c({title:"Succès",description:"Le traitement antiparasitaire a été supprimé."}),k(!1),D(null)}catch{c({title:"Erreur",description:"Impossible de supprimer le traitement.",variant:"destructive"})}},oe=(M=>[...new Set(M)])(K.map(M=>M.parasite_type).filter(Boolean));return n?s.jsxs("div",{className:"flex items-center justify-center h-64",children:[s.jsx(Qn,{className:"h-8 w-8 animate-spin"}),s.jsx("span",{className:"ml-2",children:"Chargement des traitements antiparasitaires..."})]}):s.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto p-4 sm:p-6 lg:p-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold flex items-center gap-3",children:[s.jsx(pl,{className:"h-6 w-6 sm:h-8 sm:w-8"}),"Traitements Antiparasitaires"]}),s.jsx("p",{className:"text-gray-600 mt-1 text-sm sm:text-base",children:"Gestion des traitements antiparasitaires et protocoles"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[s.jsxs(R,{onClick:()=>N(!0),variant:"outline",className:"gap-2 w-full sm:w-auto",children:[s.jsx(xr,{className:"h-4 w-4"}),"Protocoles"]}),s.jsxs(R,{onClick:()=>C(!0),className:"gap-2 w-full sm:w-auto",children:[s.jsx(Ze,{className:"h-4 w-4"}),"Nouveau traitement"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(ee,{children:s.jsx(te,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),s.jsx("p",{className:"text-2xl font-bold",children:$.total})]}),s.jsx(Ia,{className:"h-8 w-8 text-blue-500"})]})})}),s.jsx(ee,{children:s.jsx(te,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"En retard"}),s.jsx("p",{className:"text-2xl font-bold text-red-600",children:$.overdue})]}),s.jsx(bn,{className:"h-8 w-8 text-red-500"})]})})}),s.jsx(ee,{children:s.jsx(te,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"À venir"}),s.jsx("p",{className:"text-2xl font-bold text-orange-600",children:$.upcoming})]}),s.jsx(Ge,{className:"h-8 w-8 text-orange-500"})]})})}),s.jsx(ee,{children:s.jsx(te,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Terminés"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:$.completed})]}),s.jsx(Ln,{className:"h-8 w-8 text-green-500"})]})})})]}),s.jsx(ee,{children:s.jsx(te,{className:"p-4",children:s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(Lo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx(Y,{placeholder:"Rechercher par animal, client ou produit...",value:h,onChange:M=>m(M.target.value),className:"pl-10"})]})}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs(je,{value:f,onValueChange:v,children:[s.jsx(xe,{className:"w-full sm:w-48",children:s.jsx(be,{placeholder:"Filtrer par statut"})}),s.jsxs(ye,{children:[s.jsx(z,{value:"all",children:"Tous les statuts"}),s.jsx(z,{value:"overdue",children:"En retard"}),s.jsx(z,{value:"upcoming",children:"À venir"}),s.jsx(z,{value:"scheduled",children:"Programmés"}),s.jsx(z,{value:"completed",children:"Terminés"})]})]}),s.jsxs(je,{value:p,onValueChange:g,children:[s.jsx(xe,{className:"w-full sm:w-48",children:s.jsx(be,{placeholder:"Filtrer par parasite"})}),s.jsxs(ye,{children:[s.jsx(z,{value:"all",children:"Tous les parasites"}),oe.map(M=>s.jsx(z,{value:M,children:M},M))]})]}),s.jsxs(je,{value:x,onValueChange:y,children:[s.jsx(xe,{className:"w-full sm:w-48",children:s.jsx(be,{placeholder:"Filtrer par espèce"})}),s.jsxs(ye,{children:[s.jsx(z,{value:"all",children:"Toutes espèces"}),u.map(M=>s.jsx(z,{value:M,children:M},M))]})]})]})]})})}),s.jsxs(Ei,{defaultValue:"overview",className:"space-y-4",children:[s.jsxs(Ha,{className:"flex flex-wrap",children:[s.jsxs(Mt,{value:"overview",className:"flex items-center gap-2 flex-1 sm:flex-none",children:[s.jsx(Ni,{className:"h-4 w-4"}),"Vue d'ensemble"]}),s.jsxs(Mt,{value:"protocols",className:"flex items-center gap-2 flex-1 sm:flex-none",children:[s.jsx(xr,{className:"h-4 w-4"}),"Protocoles"]}),s.jsxs(Mt,{value:"statistics",className:"flex items-center gap-2 flex-1 sm:flex-none",children:[s.jsx(cn,{className:"h-4 w-4"}),"Statistiques"]})]}),s.jsx(It,{value:"overview",children:s.jsxs(ee,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2",children:[s.jsxs("span",{children:["Traitements antiparasitaires (",T.length,")"]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs(R,{variant:"outline",size:"sm",onClick:()=>{},children:[s.jsx(Nx,{className:"h-4 w-4 mr-1"}),"Export"]})})]})}),s.jsxs(te,{children:[e==="table"?s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Xd,{children:[s.jsx(Jd,{children:s.jsxs(ma,{children:[s.jsx(ht,{children:"Animal"}),s.jsx(ht,{children:"Client"}),s.jsx(ht,{children:"Produit"}),s.jsx(ht,{children:"Parasite"}),s.jsx(ht,{children:"Date traitement"}),s.jsx(ht,{children:"Prochain traitement"}),s.jsx(ht,{children:"Statut"}),s.jsx(ht,{children:"Actions"})]})}),s.jsx(Zd,{children:T.map(M=>s.jsxs(ma,{children:[s.jsx(mt,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Jn,{className:"h-8 w-8",children:s.jsx(Zn,{children:s.jsx(Dg,{className:"h-4 w-4"})})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:M.petName}),s.jsx("div",{className:"text-sm text-gray-500",children:M.petSpecies})]})]})}),s.jsx(mt,{children:M.clientName}),s.jsx(mt,{children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:M.product_name}),M.active_ingredient&&s.jsx("div",{className:"text-sm text-gray-500",children:M.active_ingredient})]})}),s.jsx(mt,{children:M.parasite_type&&s.jsx(Pe,{variant:"outline",children:M.parasite_type})}),s.jsx(mt,{children:st(new Date(M.treatment_date),"dd/MM/yyyy",{locale:zn})}),s.jsx(mt,{children:M.next_treatment_date?st(new Date(M.next_treatment_date),"dd/MM/yyyy",{locale:zn}):"N/A"}),s.jsx(mt,{children:s.jsx(Pe,{className:jO(M.status),children:s.jsxs("div",{className:"flex items-center gap-1",children:[bO(M.status),wO(M.status)]})})}),s.jsx(mt,{children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(R,{variant:"ghost",size:"sm",onClick:()=>{A(M),_(!0)},children:s.jsx(An,{className:"h-4 w-4"})}),s.jsx(R,{variant:"ghost",size:"sm",onClick:()=>G(M),children:s.jsx(Vt,{className:"h-4 w-4"})})]})})]},M.id))})]})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:T.map(M=>s.jsx(ee,{className:"hover:shadow-md transition-shadow",children:s.jsxs(te,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Jn,{className:"h-8 w-8",children:s.jsx(Zn,{children:s.jsx(Dg,{className:"h-4 w-4"})})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-sm",children:M.petName}),s.jsx("p",{className:"text-xs text-gray-600",children:M.clientName})]})]}),s.jsx(Pe,{className:jO(M.status),children:s.jsxs("div",{className:"flex items-center gap-1",children:[bO(M.status),wO(M.status)]})})]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Produit:"})," ",M.product_name]}),M.parasite_type&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Parasite:"})," ",M.parasite_type]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Date:"})," ",st(new Date(M.treatment_date),"dd/MM/yyyy")]}),M.next_treatment_date&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Prochain:"})," ",st(new Date(M.next_treatment_date),"dd/MM/yyyy")]})]}),s.jsxs("div",{className:"flex justify-between mt-4",children:[s.jsxs(R,{variant:"outline",size:"sm",onClick:()=>{A(M),_(!0)},children:[s.jsx(An,{className:"h-4 w-4 mr-1"}),"Détails"]}),s.jsx(R,{variant:"ghost",size:"sm",onClick:()=>G(M),children:s.jsx(Vt,{className:"h-4 w-4"})})]})]})},M.id))}),T.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(pl,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),s.jsx("p",{children:"Aucun traitement antiparasitaire trouvé"})]})]})]})}),s.jsx(It,{value:"protocols",children:s.jsxs(ee,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2",children:[s.jsxs("span",{children:["Protocoles antiparasitaires (",r.length,")"]}),s.jsxs(R,{onClick:()=>{B(null),N(!0)},className:"gap-2 w-full sm:w-auto",children:[s.jsx(Ze,{className:"h-4 w-4"}),"Nouveau protocole"]})]})}),s.jsxs(te,{children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(M=>s.jsx(ee,{className:"hover:shadow-md transition-shadow",children:s.jsxs(te,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx(Pe,{variant:"outline",children:M.species}),s.jsx("div",{className:"flex gap-1",children:s.jsx(R,{variant:"ghost",size:"sm",onClick:()=>{B(M),N(!0)},children:s.jsx($t,{className:"h-4 w-4"})})})]}),s.jsx("h4",{className:"font-medium mb-2",children:M.product_name}),s.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Parasite:"})," ",M.parasite_type]}),M.active_ingredient&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Principe actif:"})," ",M.active_ingredient]}),M.frequency&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Fréquence:"})," ",M.frequency]})]})]})},M.id))}),r.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(xr,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),s.jsx("p",{children:"Aucun protocole configuré"})]})]})]})}),s.jsx(It,{value:"statistics",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(ee,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(cn,{className:"h-5 w-5"}),"Répartition par type de parasite"]})}),s.jsx(te,{children:s.jsx("div",{className:"space-y-3",children:Object.entries($.parasiteTypes).map(([M,ue])=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:M}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"bg-gray-200 rounded-full h-2 w-20",children:s.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${ue/$.total*100}%`}})}),s.jsx("span",{className:"text-sm font-medium",children:ue})]})]},M))})})]}),s.jsxs(ee,{children:[s.jsx(he,{children:s.jsx(me,{children:"Résumé des traitements"})}),s.jsx(te,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:"Total des traitements"}),s.jsx("span",{className:"font-bold",children:$.total})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:"En retard"}),s.jsx("span",{className:"font-bold text-red-600",children:$.overdue})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:"À venir (7 jours)"}),s.jsx("span",{className:"font-bold text-orange-600",children:$.upcoming})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:"Terminés"}),s.jsx("span",{className:"font-bold text-green-600",children:$.completed})]})]})})]})]})})]}),s.jsx(s1,{open:b,onOpenChange:C}),s.jsx(Mke,{open:w,onOpenChange:N,editingProtocol:U}),s.jsx(Qe,{open:S,onOpenChange:_,children:s.jsxs(Ye,{className:"max-w-2xl",children:[s.jsx(Xe,{children:s.jsx(Je,{children:"Détails du traitement"})}),P&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Animal:"}),s.jsx("p",{children:P.petName})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Client:"}),s.jsx("p",{children:P.clientName})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Produit:"}),s.jsx("p",{children:P.product_name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Principe actif:"}),s.jsx("p",{children:P.active_ingredient||"N/A"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Type de parasite:"}),s.jsx("p",{children:P.parasite_type||"N/A"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Voie d'administration:"}),s.jsx("p",{children:P.administration_route||"N/A"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Dosage:"}),s.jsx("p",{children:P.dosage||"N/A"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Date du traitement:"}),s.jsx("p",{children:st(new Date(P.treatment_date),"dd/MM/yyyy",{locale:zn})})]}),P.next_treatment_date&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Prochain traitement:"}),s.jsx("p",{children:st(new Date(P.next_treatment_date),"dd/MM/yyyy",{locale:zn})})]}),P.effectiveness_rating&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Efficacité:"}),s.jsxs("p",{children:[P.effectiveness_rating,"/10"]})]})]}),P.notes&&s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Notes:"}),s.jsx("p",{className:"text-gray-600",children:P.notes})]})]})]})}),s.jsx(Qe,{open:E,onOpenChange:k,children:s.jsxs(Ye,{className:"max-w-md",children:[s.jsx(Xe,{children:s.jsx(Je,{children:"Confirmer la suppression"})}),I&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("p",{className:"text-gray-600",children:["Êtes-vous sûr de vouloir supprimer le traitement ",s.jsx("strong",{children:I.product_name})," pour ",s.jsx("strong",{children:I.petName})," ?"]}),s.jsx("p",{className:"text-sm text-red-600",children:"Cette action est irréversible."}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2",children:[s.jsx(R,{variant:"outline",onClick:()=>k(!1),className:"w-full sm:w-auto",children:"Annuler"}),s.jsx(R,{variant:"destructive",onClick:Q,className:"w-full sm:w-auto",children:"Supprimer"})]})]})]})})]})}const Lke=[{value:"medication",label:"Médicaments",icon:"💊"},{value:"vaccine",label:"Vaccins",icon:"💉"},{value:"consumable",label:"Consommables",icon:"🩹"},{value:"equipment",label:"Équipement",icon:"🔧"},{value:"supplement",label:"Suppléments",icon:"🧪"}],Fke=[{value:"unit",label:"Unité"},{value:"box",label:"Boîte"},{value:"vial",label:"Flacon"},{value:"bottle",label:"Bouteille"},{value:"pack",label:"Paquet"},{value:"kg",label:"Kilogramme"},{value:"g",label:"Gramme"},{value:"ml",label:"Millilitre"},{value:"l",label:"Litre"}],Bke={medication:["Antibiotique","Anti-inflammatoire","Antiparasitaire","Anesthésique","Analgésique","Antihistaminique","Corticoïde","Diurétique","Autre"],vaccine:["Vaccin Core","Vaccin Non-Core","Vaccin Obligatoire","Vaccin Recommandé","Autre"],consumable:["Matériel d'injection","Protection","Pansement","Suture","Autre"],equipment:["Diagnostic","Chirurgie","Monitoring","Stérilisation","Autre"],supplement:["Vitamines","Minéraux","Probiotiques","Acides aminés","Autre"]};function NO({open:e,onOpenChange:t,editingItem:n}){var h;const{addStockItem:r,updateStockItem:a}=bt(),{settings:i}=At(),{toast:o}=it(),[l,c]=j.useState({name:"",category:"medication",subcategory:"",description:"",manufacturer:"",batchNumber:"",dosage:"",unit:"unit",currentStock:0,minimumStock:0,maximumStock:0,purchasePrice:0,sellingPrice:0,expirationDate:"",supplier:"",location:"",notes:"",barcode:"",sku:"",isActive:!0});j.useEffect(()=>{c(n?{name:n.name,category:n.category,subcategory:n.subcategory||"",description:n.description||"",manufacturer:n.manufacturer||"",batchNumber:n.batchNumber||"",dosage:n.dosage||"",unit:n.unit,currentStock:n.currentStock,minimumStock:n.minimumStock,maximumStock:n.maximumStock||0,purchasePrice:n.purchasePrice,sellingPrice:n.sellingPrice,expirationDate:n.expirationDate||"",supplier:n.supplier||"",location:n.location||"",notes:n.notes||"",barcode:n.barcode||"",sku:n.sku||"",isActive:n.isActive}:{name:"",category:"medication",subcategory:"",description:"",manufacturer:"",batchNumber:"",dosage:"",unit:"unit",currentStock:0,minimumStock:0,maximumStock:0,purchasePrice:0,sellingPrice:0,expirationDate:"",supplier:"",location:"",notes:"",barcode:"",sku:"",isActive:!0})},[n,e]);const u=m=>{if(m.preventDefault(),!l.name.trim()){o({title:"Erreur",description:"Le nom de l'élément est requis.",variant:"destructive"});return}if(l.currentStock<0||l.minimumStock<0||l.purchasePrice<0||l.sellingPrice<0){o({title:"Erreur",description:"Les valeurs numériques ne peuvent pas être négatives.",variant:"destructive"});return}const f={...l,currentStock:Number(l.currentStock),minimumStock:Number(l.minimumStock),maximumStock:Number(l.maximumStock)||void 0,purchasePrice:Number(l.purchasePrice),sellingPrice:Number(l.sellingPrice),expirationDate:l.expirationDate||void 0,subcategory:l.subcategory||void 0,description:l.description||void 0,manufacturer:l.manufacturer||void 0,batchNumber:l.batchNumber||void 0,dosage:l.dosage||void 0,supplier:l.supplier||void 0,location:l.location||void 0,notes:l.notes||void 0,barcode:l.barcode||void 0,sku:l.sku||void 0};n?(a(n.id,f),o({title:"Élément modifié",description:`"${l.name}" a été modifié avec succès.`})):(r(f),o({title:"Élément ajouté",description:`"${l.name}" a été ajouté au stock.`})),t(!1)},d=(m,f)=>{c(v=>({...v,[m]:f}))};return s.jsx(Qe,{open:e,onOpenChange:t,children:s.jsxs(Ye,{className:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[s.jsxs(Xe,{children:[s.jsx(Je,{children:n?"Modifier l'élément de stock":"Nouvel élément de stock"}),s.jsx(Bt,{children:n?"Modifiez les informations de l'élément de stock.":"Ajoutez un nouvel élément à votre inventaire."})]}),s.jsxs("form",{onSubmit:u,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Informations de base"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"name",children:"Nom de l'élément *"}),s.jsx(Y,{id:"name",value:l.name,onChange:m=>d("name",m.target.value),placeholder:"ex: Amoxicilline 500mg",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"category",children:"Catégorie *"}),s.jsxs(je,{value:l.category,onValueChange:m=>d("category",m),children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Sélectionner une catégorie"})}),s.jsx(ye,{children:Lke.map(m=>s.jsxs(z,{value:m.value,children:[m.icon," ",m.label]},m.value))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"subcategory",children:"Sous-catégorie"}),s.jsxs(je,{value:l.subcategory,onValueChange:m=>d("subcategory",m),children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Sélectionner une sous-catégorie"})}),s.jsx(ye,{children:(h=Bke[l.category])==null?void 0:h.map(m=>s.jsx(z,{value:m,children:m},m))})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"manufacturer",children:"Fabricant"}),s.jsx(Y,{id:"manufacturer",value:l.manufacturer,onChange:m=>d("manufacturer",m.target.value),placeholder:"ex: Boehringer Ingelheim"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"description",children:"Description"}),s.jsx(Ue,{id:"description",value:l.description,onChange:m=>d("description",m.target.value),placeholder:"Description détaillée de l'élément...",rows:2})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Informations techniques"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"batchNumber",children:"Numéro de lot"}),s.jsx(Y,{id:"batchNumber",value:l.batchNumber,onChange:m=>d("batchNumber",m.target.value),placeholder:"ex: AMX2024001"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"dosage",children:"Dosage"}),s.jsx(Y,{id:"dosage",value:l.dosage,onChange:m=>d("dosage",m.target.value),placeholder:"ex: 500mg"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"unit",children:"Unité"}),s.jsxs(je,{value:l.unit,onValueChange:m=>d("unit",m),children:[s.jsx(xe,{children:s.jsx(be,{placeholder:"Sélectionner une unité"})}),s.jsx(ye,{children:Fke.map(m=>s.jsx(z,{value:m.value,children:m.label},m.value))})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Gestion du stock"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"currentStock",children:"Stock actuel *"}),s.jsx(Y,{id:"currentStock",type:"number",min:"0",value:l.currentStock,onChange:m=>d("currentStock",parseInt(m.target.value)||0),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"minimumStock",children:"Stock minimum *"}),s.jsx(Y,{id:"minimumStock",type:"number",min:"0",value:l.minimumStock,onChange:m=>d("minimumStock",parseInt(m.target.value)||0),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"maximumStock",children:"Stock maximum"}),s.jsx(Y,{id:"maximumStock",type:"number",min:"0",value:l.maximumStock,onChange:m=>d("maximumStock",parseInt(m.target.value)||0)})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(O,{htmlFor:"purchasePrice",children:["Prix d'achat (",i.currency,") *"]}),s.jsx(Y,{id:"purchasePrice",type:"number",step:"0.01",min:"0",value:l.purchasePrice,onChange:m=>d("purchasePrice",parseFloat(m.target.value)||0),required:!0}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Prix d'achat au fournisseur"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(O,{htmlFor:"sellingPrice",children:["Prix de vente (",i.currency,") *"]}),s.jsx(Y,{id:"sellingPrice",type:"number",step:"0.01",min:"0",value:l.sellingPrice,onChange:m=>d("sellingPrice",parseFloat(m.target.value)||0),required:!0}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Prix de vente au client"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"La valeur totale sera calculée automatiquement : Prix d'achat × Stock actuel"}),l.purchasePrice>0&&l.currentStock>0&&s.jsxs("div",{className:"text-sm font-medium text-primary",children:["Valeur totale : ",(l.purchasePrice*l.currentStock).toFixed(2)," ",i.currency]}),l.purchasePrice>0&&l.sellingPrice>0&&s.jsxs("div",{className:"text-sm font-medium text-green-600",children:["Marge : ",((l.sellingPrice-l.purchasePrice)*l.currentStock).toFixed(2)," ",i.currency]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Informations supplémentaires"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"expirationDate",children:"Date d'expiration"}),s.jsx(Y,{id:"expirationDate",type:"date",value:l.expirationDate,onChange:m=>d("expirationDate",m.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"supplier",children:"Fournisseur"}),s.jsx(Y,{id:"supplier",value:l.supplier,onChange:m=>d("supplier",m.target.value),placeholder:"ex: Pharmacie Vétérinaire Centrale"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"location",children:"Emplacement"}),s.jsx(Y,{id:"location",value:l.location,onChange:m=>d("location",m.target.value),placeholder:"ex: Armoire A - Étagère 1"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"barcode",children:"Code-barres"}),s.jsx(Y,{id:"barcode",value:l.barcode,onChange:m=>d("barcode",m.target.value),placeholder:"ex: 1234567890123"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"sku",children:"SKU"}),s.jsx(Y,{id:"sku",value:l.sku,onChange:m=>d("sku",m.target.value),placeholder:"ex: MED-AMX-500"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"notes",children:"Notes"}),s.jsx(Ue,{id:"notes",value:l.notes,onChange:m=>d("notes",m.target.value),placeholder:"Notes supplémentaires...",rows:3})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(R,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Annuler"}),s.jsx(R,{type:"submit",children:n?"Modifier":"Ajouter"})]})]})]})})}const zke=[{value:"in",label:"Entrée",icon:cn,description:"Ajout de stock (achat, retour, etc.)"},{value:"out",label:"Sortie",icon:Vl,description:"Utilisation, vente, perte, etc."},{value:"adjustment",label:"Ajustement",icon:AI,description:"Correction d'inventaire"},{value:"transfer",label:"Transfert",icon:vU,description:"Déplacement entre emplacements"}],Vke={in:["Achat fournisseur","Retour client","Inventaire initial","Don/échantillon","Transfert entrant","Autre"],out:["Utilisation consultation","Vente client","Périmé/expiré","Cassé/endommagé","Vol/perte","Transfert sortant","Autre"],adjustment:["Correction inventaire","Comptage physique","Erreur saisie","Autre"],transfer:["Changement emplacement","Transfert entre sites","Réorganisation stock","Autre"]};function qke({open:e,onOpenChange:t,item:n}){var v;const{updateStockItem:r,addStockMovement:a}=bt(),{settings:i}=At(),{toast:o}=it(),[l,c]=j.useState({type:"out",quantity:0,reason:"",reference:"",performedBy:"",notes:""}),[u,d]=j.useState("");j.useEffect(()=>{n&&(c({type:"out",quantity:0,reason:"",reference:"",performedBy:"",notes:""}),d(""))},[n,e]);const h=p=>{if(p.preventDefault(),!n)return;if(l.quantity<=0){o({title:"Erreur",description:"La quantité doit être supérieure à 0.",variant:"destructive"});return}if(!l.reason.trim()){o({title:"Erreur",description:"La raison du mouvement est requise.",variant:"destructive"});return}let g=n.currentStock;if(l.type==="in")g+=l.quantity;else if(l.type==="out"){if(l.quantity>n.currentStock){o({title:"Erreur",description:`Stock insuffisant. Stock disponible: ${n.currentStock}`,variant:"destructive"});return}g-=l.quantity}else l.type==="adjustment"&&(g=l.quantity);l.type!=="transfer"&&r(n.id,{currentStock:g,lastRestocked:l.type==="in"?new Date().toISOString().split("T")[0]:void 0});const x=l.performedBy==="Autre"?u:l.performedBy,y={itemId:n.id,itemName:n.name,type:l.type,quantity:l.quantity,reason:l.reason,reference:l.reference||void 0,performedBy:x||void 0,date:new Date().toISOString(),notes:l.notes||void 0};a(y),o({title:"Mouvement enregistré",description:`${{in:"Entrée",out:"Sortie",adjustment:"Ajustement",transfer:"Transfert"}[l.type]} de ${l.quantity} ${n.unit} pour "${n.name}" enregistrée.`}),t(!1)},m=(p,g)=>{c(x=>({...x,[p]:g}))},f=()=>{if(!n)return 0;let p=n.currentStock;return l.type==="in"?p+=l.quantity:l.type==="out"?p-=l.quantity:l.type==="adjustment"&&(p=l.quantity),Math.max(0,p)};return n?s.jsx(Qe,{open:e,onOpenChange:t,children:s.jsxs(Ye,{className:"sm:max-w-[800px] max-h-[90vh] overflow-y-auto",children:[s.jsxs(Xe,{children:[s.jsxs(Je,{className:"flex items-center gap-2",children:[s.jsx(cn,{className:"h-5 w-5"}),"Mouvement de stock"]}),s.jsxs(Bt,{children:['Enregistrer un mouvement pour "',n.name,'"']})]}),s.jsxs("form",{onSubmit:h,className:"space-y-6",children:[s.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-lg border border-blue-200",children:[s.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[s.jsx(Ia,{className:"h-5 w-5 text-blue-600"}),"Élément concerné"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-white p-3 rounded-lg border",children:[s.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Stock actuel"}),s.jsxs("div",{className:"font-semibold text-lg",children:[n.currentStock," ",n.unit]})]}),s.jsxs("div",{className:"bg-white p-3 rounded-lg border",children:[s.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Stock minimum"}),s.jsxs("div",{className:"font-semibold text-lg",children:[n.minimumStock," ",n.unit]})]}),s.jsxs("div",{className:"bg-white p-3 rounded-lg border",children:[s.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Emplacement"}),s.jsxs("div",{className:"font-semibold text-lg flex items-center gap-1",children:[s.jsx(ic,{className:"h-4 w-4"}),n.location||"Non défini"]})]}),s.jsxs("div",{className:"bg-white p-3 rounded-lg border",children:[s.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Prix d'achat"}),s.jsxs("div",{className:"font-semibold text-lg text-blue-600",children:[n.purchasePrice.toFixed(2)," ",i.currency]})]}),s.jsxs("div",{className:"bg-white p-3 rounded-lg border",children:[s.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Prix de vente"}),s.jsxs("div",{className:"font-semibold text-lg text-green-600",children:[n.sellingPrice.toFixed(2)," ",i.currency]})]}),s.jsxs("div",{className:"bg-white p-3 rounded-lg border",children:[s.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Valeur totale"}),s.jsxs("div",{className:"font-semibold text-lg text-purple-600",children:[n.totalValue.toFixed(2)," ",i.currency]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{className:"text-base font-medium",children:"Type de mouvement *"}),s.jsxs(je,{value:l.type,onValueChange:p=>m("type",p),children:[s.jsx(xe,{className:"h-12",children:s.jsx(be,{placeholder:"Sélectionner le type de mouvement"})}),s.jsx(ye,{children:zke.map(p=>{const g=p.icon;return s.jsx(z,{value:p.value,children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(g,{className:"h-5 w-5"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:p.label}),s.jsx("div",{className:"text-xs text-muted-foreground",children:p.description})]})]})},p.value)})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"quantity",className:"text-base font-medium",children:"Quantité *"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Y,{id:"quantity",type:"number",min:"0",step:"0.01",value:l.quantity,onChange:p=>m("quantity",parseFloat(p.target.value)||0),className:"flex-1 h-12 text-lg",required:!0}),s.jsx("div",{className:"bg-muted px-3 py-2 rounded-md text-sm font-medium",children:n.unit})]}),l.quantity>0&&s.jsxs("div",{className:"bg-muted p-3 rounded-lg",children:[s.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Nouveau stock après mouvement:"}),s.jsxs("div",{className:`text-lg font-semibold ${f()<=n.minimumStock?"text-orange-600":"text-green-600"}`,children:[f()," ",n.unit]}),f()<=n.minimumStock&&s.jsxs("div",{className:"text-xs text-orange-600 mt-1 flex items-center gap-1",children:[s.jsx(bn,{className:"h-3 w-3"}),"Stock bas - Seuil minimum atteint"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"reason",className:"text-base font-medium",children:"Raison *"}),s.jsxs(je,{value:l.reason,onValueChange:p=>m("reason",p),children:[s.jsx(xe,{className:"h-12",children:s.jsx(be,{placeholder:"Sélectionner une raison"})}),s.jsx(ye,{children:(v=Vke[l.type])==null?void 0:v.map(p=>s.jsx(z,{value:p,children:p},p))})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"reference",className:"text-base font-medium",children:"Référence"}),s.jsx(Y,{id:"reference",value:l.reference,onChange:p=>m("reference",p.target.value),placeholder:"ex: Facture #12345, Consultation #678",className:"h-12"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"performedBy",className:"text-base font-medium",children:"Effectué par"}),s.jsxs(je,{value:l.performedBy,onValueChange:p=>m("performedBy",p),children:[s.jsx(xe,{className:"h-12",children:s.jsx(be,{placeholder:"Sélectionner un vétérinaire"})}),s.jsxs(ye,{children:[i.veterinarians.filter(p=>p.isActive).map(p=>s.jsx(z,{value:p.name,children:p.name},p.id)),s.jsx(z,{value:"Autre",children:"Autre (saisie manuelle)"})]})]}),l.performedBy==="Autre"&&s.jsx(Y,{placeholder:"Nom du responsable",value:u,onChange:p=>d(p.target.value),className:"h-10 mt-2"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"notes",className:"text-base font-medium",children:"Notes"}),s.jsx(Ue,{id:"notes",value:l.notes,onChange:p=>m("notes",p.target.value),placeholder:"Notes supplémentaires...",rows:4,className:"resize-none"})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t",children:[s.jsx(R,{type:"button",variant:"outline",onClick:()=>t(!1),className:"h-12 px-6",children:"Annuler"}),s.jsxs(R,{type:"submit",className:"h-12 px-8 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700",children:[s.jsx(cn,{className:"h-4 w-4 mr-2"}),"Enregistrer le mouvement"]})]})]})]})}):null}const Nh={medication:{label:"Médicaments",color:"bg-blue-100 text-blue-800",icon:"💊"},vaccine:{label:"Vaccins",color:"bg-green-100 text-green-800",icon:"💉"},consumable:{label:"Consommables",color:"bg-orange-100 text-orange-800",icon:"🩹"},equipment:{label:"Équipement",color:"bg-purple-100 text-purple-800",icon:"🔧"},supplement:{label:"Suppléments",color:"bg-yellow-100 text-yellow-800",icon:"🧪"}},Uke=[{value:"unit",label:"Unité"},{value:"box",label:"Boîte"},{value:"vial",label:"Flacon"},{value:"bottle",label:"Bouteille"},{value:"pack",label:"Paquet"},{value:"kg",label:"Kilogramme"},{value:"g",label:"Gramme"},{value:"ml",label:"Millilitre"},{value:"l",label:"Litre"}];function Wke(){const{stockItems:e,stockAlerts:t,stockMovements:n,addStockItem:r,updateStockItem:a,deleteStockItem:i,addStockMovement:o,getStockAlerts:l}=bt(),{settings:c}=At(),{toast:u}=it(),[d,h]=j.useState(!1),[m,f]=j.useState(!1),[v,p]=j.useState(!1),[g,x]=j.useState(null),[y,b]=j.useState(null),[C,w]=j.useState(""),[N,S]=j.useState("all"),[_,P]=j.useState("all"),[A,E]=j.useState("name"),[k,I]=j.useState("asc"),[D,U]=j.useState(null),[B,K]=j.useState(""),T=j.useMemo(()=>{const re=e.length,V=e.reduce((pe,fe)=>pe+fe.totalValue,0),le=e.filter(pe=>pe.currentStock<=pe.minimumStock).length,W=e.filter(pe=>pe.expirationDate&&new Date(pe.expirationDate)<new Date).length,X=e.filter(pe=>pe.expirationDate&&new Date(pe.expirationDate)<=new Date(Date.now()+30*24*60*60*1e3)&&new Date(pe.expirationDate)>new Date).length;return{totalItems:re,totalValue:V,lowStockItems:le,expiredItems:W,expiringSoonItems:X}},[e]),$=j.useMemo(()=>{let re=e.filter(V=>{var pe,fe;const le=V.name.toLowerCase().includes(C.toLowerCase())||((pe=V.manufacturer)==null?void 0:pe.toLowerCase().includes(C.toLowerCase()))||((fe=V.batchNumber)==null?void 0:fe.toLowerCase().includes(C.toLowerCase())),W=N==="all"||V.category===N;let X=!0;return _==="low_stock"?X=V.currentStock<=V.minimumStock:_==="expired"?X=V.expirationDate&&new Date(V.expirationDate)<new Date:_==="expiring_soon"?X=V.expirationDate&&new Date(V.expirationDate)<=new Date(Date.now()+2592e6)&&new Date(V.expirationDate)>new Date:_==="active"&&(X=V.isActive),le&&W&&X});return re.sort((V,le)=>{let W,X;switch(A){case"name":W=V.name.toLowerCase(),X=le.name.toLowerCase();break;case"currentStock":W=V.currentStock,X=le.currentStock;break;case"totalValue":W=V.totalValue,X=le.totalValue;break;case"expirationDate":W=V.expirationDate||"9999-12-31",X=le.expirationDate||"9999-12-31";break;default:W=V.name.toLowerCase(),X=le.name.toLowerCase()}return k==="asc"?W<X?-1:W>X?1:0:W>X?-1:W<X?1:0}),re},[e,C,N,_,A,k]),G=(re,V,le)=>{const W={};switch(V){case"currentStock":W.currentStock=parseInt(le)||0;break;case"minimumStock":W.minimumStock=parseInt(le)||0;break;case"purchasePrice":W.purchasePrice=parseFloat(le)||0;break;case"sellingPrice":W.sellingPrice=parseFloat(le)||0;break;case"location":W.location=le;break;case"notes":W.notes=le;break}a(re,W),U(null),u({title:"Stock mis à jour",description:"L'élément de stock a été mis à jour avec succès."})},Q=re=>{b(re),p(!0)},ne=re=>{p(re),re||b(null)},oe=re=>{confirm(`Êtes-vous sûr de vouloir supprimer "${re.name}" du stock ?`)&&(i(re.id),u({title:"Élément supprimé",description:`"${re.name}" a été supprimé du stock.`}))},M=re=>{x(re),f(!0)},ue=()=>{const re=[["Nom","Catégorie","Sous-catégorie","Fabricant","Numéro de lot","Dosage","Unité","Stock actuel","Stock minimum","Prix d'achat","Prix de vente","Date d'expiration","Fournisseur","Emplacement","Notes","Code-barres","SKU"].join(","),...e.map(X=>[`"${X.name}"`,`"${X.category}"`,`"${X.subcategory||""}"`,`"${X.manufacturer||""}"`,`"${X.batchNumber||""}"`,`"${X.dosage||""}"`,`"${X.unit}"`,X.currentStock,X.minimumStock,X.purchasePrice,X.sellingPrice,`"${X.expirationDate||""}"`,`"${X.supplier||""}"`,`"${X.location||""}"`,`"${X.notes||""}"`,`"${X.barcode||""}"`,`"${X.sku||""}"`].join(","))].join(`
`),V=new Blob([re],{type:"text/csv;charset=utf-8;"}),le=document.createElement("a"),W=URL.createObjectURL(V);le.setAttribute("href",W),le.setAttribute("download",`stock_${new Date().toISOString().split("T")[0]}.csv`),le.style.visibility="hidden",document.body.appendChild(le),le.click(),document.body.removeChild(le),u({title:"Export réussi",description:"Le fichier CSV a été téléchargé avec succès."})},ve=re=>{var W;const V=(W=re.target.files)==null?void 0:W[0];if(!V)return;const le=new FileReader;le.onload=X=>{var pe;try{const Re=((pe=X.target)==null?void 0:pe.result).split(`
`),qe=Re[0].split(",").map(nt=>nt.replace(/"/g,"").trim()),tt=["Nom","Catégorie","Unité","Stock actuel","Stock minimum","Prix d'achat","Prix de vente"].filter(nt=>!qe.includes(nt));if(tt.length>0){u({title:"Erreur d'import",description:`En-têtes manquants: ${tt.join(", ")}`,variant:"destructive"});return}const wt=[];let ae=0,Ee=0;for(let nt=1;nt<Re.length;nt++){const pt=Re[nt].trim();if(pt)try{const Nn=pt.split(",").map(Le=>Le.replace(/"/g,"").trim()),dt={};if(qe.forEach((Le,gs)=>{dt[Le]=Nn[gs]||""}),!dt.Nom||!dt.Catégorie||!dt.Unité){Ee++;continue}if(!Object.keys(Nh).includes(dt.Catégorie)){Ee++;continue}const ie={id:Date.now()+nt,name:dt.Nom,category:dt.Catégorie,subcategory:dt["Sous-catégorie"]||"",manufacturer:dt.Fabricant||"",batchNumber:dt["Numéro de lot"]||"",dosage:dt.Dosage||"",unit:dt.Unité,currentStock:parseInt(dt["Stock actuel"])||0,minimumStock:parseInt(dt["Stock minimum"])||0,purchasePrice:parseFloat(dt["Prix d'achat"])||0,sellingPrice:parseFloat(dt["Prix de vente"])||0,totalValue:(parseInt(dt["Stock actuel"])||0)*(parseFloat(dt["Prix d'achat"])||0),expirationDate:dt["Date d'expiration"]||void 0,supplier:dt.Fournisseur||"",location:dt.Emplacement||"",notes:dt.Notes||"",barcode:dt["Code-barres"]||"",sku:dt.SKU||"",lastUpdated:new Date().toISOString(),isActive:!0};wt.push(ie),ae++}catch(Nn){Ee++,console.error(`Erreur ligne ${nt+1}:`,Nn)}}wt.length>0&&wt.forEach(nt=>{r(nt)}),u({title:"Import terminé",description:`${ae} éléments importés avec succès${Ee>0?`, ${Ee} erreurs`:""}.`})}catch{u({title:"Erreur d'import",description:"Impossible de lire le fichier CSV.",variant:"destructive"})}},le.readAsText(V),re.target.value=""},ce=()=>{const re=[["Nom","Catégorie","Sous-catégorie","Fabricant","Numéro de lot","Dosage","Unité","Stock actuel","Stock minimum","Prix d'achat","Prix de vente","Date d'expiration","Fournisseur","Emplacement","Notes","Code-barres","SKU"].join(","),["Amoxicilline 500mg","medication","Antibiotique","Boehringer Ingelheim","AMX2024001","500mg","box","15","5","20.00","25.50","2025-12-31","Pharmacie Vétérinaire Centrale","Armoire A - Étagère 1","Stockage à température ambiante","1234567890123","MED-AMX-500"].join(","),["Vaccin DHPP","vaccine","Vaccin combiné","Merial","VAC2024001","1ml","vial","25","10","45.00","55.00","2025-06-30","VetoPharma","Réfrigérateur - Étagère 1","Conservation entre 2-8°C","9876543210987","VAC-DHPP-001"].join(","),["Seringues 5ml","consumable","Matériel médical","BD","SYR2024001","5ml","unit","100","20","0.50","0.75","","MedSupply","Armoire B - Étagère 2","Usage unique","5556667778889","CON-SYR-5ML"].join(",")].join(`
`),V=new Blob([re],{type:"text/csv;charset=utf-8;"}),le=document.createElement("a"),W=URL.createObjectURL(V);le.setAttribute("href",W),le.setAttribute("download","gabarit_import_stock.csv"),le.style.visibility="hidden",document.body.appendChild(le),le.click(),document.body.removeChild(le),u({title:"Gabarit téléchargé",description:"Le fichier gabarit a été téléchargé avec succès."})};return s.jsxs("div",{className:"container mx-auto px-4 sm:px-6 py-4 sm:py-8 space-y-4 sm:space-y-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold flex items-center gap-3",children:[s.jsx(Ia,{className:"h-6 sm:h-8 w-6 sm:w-8 text-primary"}),"Gestion de Stock"]}),s.jsx("p",{className:"text-muted-foreground mt-2 text-sm sm:text-base",children:"Gérez votre inventaire de médicaments, vaccins et consommables"})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto",children:[s.jsxs(R,{variant:"outline",onClick:ue,className:"gap-2 text-xs sm:text-sm",size:"sm",children:[s.jsx(Nx,{className:"h-3 sm:h-4 w-3 sm:w-4"}),"Exporter CSV"]}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"file",accept:".csv,.xlsx,.xls",onChange:ve,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",id:"import-file"}),s.jsx(R,{variant:"outline",className:"gap-2 text-xs sm:text-sm",size:"sm",asChild:!0,children:s.jsxs("label",{htmlFor:"import-file",className:"cursor-pointer",children:[s.jsx(Ob,{className:"h-3 sm:h-4 w-3 sm:w-4"}),"Importer CSV"]})})]}),s.jsxs(R,{variant:"outline",onClick:ce,className:"gap-2 text-xs sm:text-sm",size:"sm",children:[s.jsx(z_,{className:"h-3 sm:h-4 w-3 sm:w-4"}),"Gabarit"]}),s.jsxs(R,{className:"gap-2 medical-glow text-xs sm:text-sm",size:"sm",onClick:()=>h(!0),children:[s.jsx(Ze,{className:"h-3 sm:h-4 w-3 sm:w-4"}),"Nouvel Élément"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:[s.jsx(ee,{children:s.jsx(te,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Éléments"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold",children:T.totalItems})]}),s.jsx(Ia,{className:"h-6 sm:h-8 w-6 sm:w-8 text-muted-foreground"})]})})}),s.jsx(ee,{children:s.jsx(te,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Valeur Totale"}),s.jsxs("p",{className:"text-xl sm:text-2xl font-bold",children:[T.totalValue.toFixed(2)," ",c.currency]})]}),s.jsx(bd,{className:"h-6 sm:h-8 w-6 sm:w-8 text-green-600"})]})})}),s.jsx(ee,{children:s.jsx(te,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Stock Bas"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-orange-600",children:T.lowStockItems})]}),s.jsx(bn,{className:"h-6 sm:h-8 w-6 sm:w-8 text-orange-600"})]})})}),s.jsx(ee,{children:s.jsx(te,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Expirés"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-red-600",children:T.expiredItems})]}),s.jsx(gm,{className:"h-6 sm:h-8 w-6 sm:w-8 text-red-600"})]})})}),s.jsx(ee,{children:s.jsx(te,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Expirent Bientôt"}),s.jsx("p",{className:"text-xl sm:text-2xl font-bold text-yellow-600",children:T.expiringSoonItems})]}),s.jsx(Qt,{className:"h-6 sm:h-8 w-6 sm:w-8 text-yellow-600"})]})})})]}),s.jsxs(ee,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[s.jsx(_I,{className:"h-4 sm:h-5 w-4 sm:w-5"}),"Rechercher et filtrer"]})}),s.jsx(te,{className:"space-y-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-wrap",children:[s.jsx("div",{className:"flex-1 min-w-[250px] sm:min-w-[300px]",children:s.jsx(Y,{placeholder:"Rechercher par nom, fabricant, lot...",value:C,onChange:re=>w(re.target.value),className:"w-full"})}),s.jsxs(je,{value:N,onValueChange:S,children:[s.jsx(xe,{className:"w-full sm:w-48",children:s.jsx(be,{placeholder:"Catégorie"})}),s.jsxs(ye,{children:[s.jsx(z,{value:"all",children:"Toutes les catégories"}),Object.entries(Nh).map(([re,V])=>s.jsxs(z,{value:re,children:[V.icon," ",V.label]},re))]})]}),s.jsxs(je,{value:_,onValueChange:P,children:[s.jsx(xe,{className:"w-full sm:w-48",children:s.jsx(be,{placeholder:"Statut"})}),s.jsxs(ye,{children:[s.jsx(z,{value:"all",children:"Tous les statuts"}),s.jsx(z,{value:"active",children:"Actifs"}),s.jsx(z,{value:"low_stock",children:"Stock bas"}),s.jsx(z,{value:"expired",children:"Expirés"}),s.jsx(z,{value:"expiring_soon",children:"Expirent bientôt"})]})]}),s.jsxs(je,{value:A,onValueChange:E,children:[s.jsx(xe,{className:"w-full sm:w-48",children:s.jsx(be,{placeholder:"Trier par"})}),s.jsxs(ye,{children:[s.jsx(z,{value:"name",children:"Nom"}),s.jsx(z,{value:"currentStock",children:"Stock actuel"}),s.jsx(z,{value:"totalValue",children:"Valeur totale"}),s.jsx(z,{value:"expirationDate",children:"Date d'expiration"})]})]}),s.jsx(R,{variant:"outline",onClick:()=>I(k==="asc"?"desc":"asc"),size:"sm",className:"w-full sm:w-auto",children:k==="asc"?s.jsx(cn,{className:"h-4 w-4"}):s.jsx(Vl,{className:"h-4 w-4"})})]})})]}),s.jsx(ee,{className:"bg-blue-50 border-blue-200",children:s.jsx(te,{className:"pt-4 sm:pt-6",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(z_,{className:"h-4 sm:h-5 w-4 sm:w-5 text-blue-600 mt-0.5"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"font-semibold text-blue-900 text-sm sm:text-base",children:"Import en masse"}),s.jsx("p",{className:"text-sm text-blue-700",children:'Utilisez le bouton "Gabarit" pour télécharger un fichier CSV avec le format correct. Les données importées seront ajoutées au stock existant.'}),s.jsxs("div",{className:"text-xs text-blue-600",children:[s.jsx("strong",{children:"Catégories valides :"})," medication, vaccine, consumable, equipment, supplement"]}),s.jsxs("div",{className:"text-xs text-blue-600",children:[s.jsx("strong",{children:"Unités valides :"})," box, vial, unit, ml, mg, g, kg, l, pack, tube, sachet"]})]})]})})}),s.jsxs(ee,{children:[s.jsx(he,{children:s.jsxs(me,{className:"text-lg sm:text-xl",children:["Inventaire (",$.length," éléments)"]})}),s.jsxs(te,{children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Xd,{children:[s.jsx(Jd,{children:s.jsxs(ma,{children:[s.jsx(ht,{className:"min-w-[150px]",children:"Nom"}),s.jsx(ht,{className:"min-w-[120px]",children:"Catégorie"}),s.jsx(ht,{className:"min-w-[100px] hidden sm:table-cell",children:"Fabricant"}),s.jsx(ht,{className:"min-w-[100px]",children:"Stock"}),s.jsx(ht,{className:"min-w-[100px] hidden md:table-cell",children:"Prix d'achat"}),s.jsx(ht,{className:"min-w-[100px] hidden md:table-cell",children:"Prix de vente"}),s.jsx(ht,{className:"min-w-[100px] hidden lg:table-cell",children:"Valeur totale"}),s.jsx(ht,{className:"min-w-[100px] hidden md:table-cell",children:"Expiration"}),s.jsx(ht,{className:"min-w-[120px] hidden lg:table-cell",children:"Emplacement"}),s.jsx(ht,{className:"min-w-[120px]",children:"Actions"})]})}),s.jsx(Zd,{children:$.map(re=>{var X;const V=re.currentStock<=re.minimumStock,le=re.expirationDate&&new Date(re.expirationDate)<new Date,W=re.expirationDate&&new Date(re.expirationDate)<=new Date(Date.now()+30*24*60*60*1e3)&&new Date(re.expirationDate)>new Date;return s.jsxs(ma,{className:re.isActive?"":"opacity-50",children:[s.jsx(mt,{children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"font-medium text-sm sm:text-base",children:re.name}),re.batchNumber&&s.jsxs("div",{className:"text-xs sm:text-sm text-muted-foreground",children:["Lot: ",re.batchNumber]}),re.dosage&&s.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:re.dosage})]})}),s.jsxs(mt,{children:[s.jsxs(Pe,{className:`${Nh[re.category].color} text-xs sm:text-sm`,children:[Nh[re.category].icon," ",Nh[re.category].label]}),re.subcategory&&s.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:re.subcategory})]}),s.jsx(mt,{className:"hidden sm:table-cell",children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-sm",children:re.manufacturer||"-"}),re.supplier&&s.jsx("div",{className:"text-xs text-muted-foreground",children:re.supplier})]})}),s.jsx(mt,{children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:`font-medium text-sm sm:text-base ${V?"text-orange-600":""}`,children:[re.currentStock," ",((X=Uke.find(pe=>pe.value===re.unit))==null?void 0:X.label)||re.unit]}),s.jsxs("div",{className:"text-xs sm:text-sm text-muted-foreground",children:["Min: ",re.minimumStock]}),s.jsxs("div",{className:"flex items-center gap-2",children:[V&&s.jsx(Pe,{variant:"destructive",className:"text-xs",children:"Stock bas"}),re.lastUpdated&&new Date(re.lastUpdated).getTime()>Date.now()-24*60*60*1e3&&s.jsx(Pe,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700",children:"Mis à jour"})]})]})}),s.jsx(mt,{className:"hidden md:table-cell",children:(D==null?void 0:D.id)===re.id&&D.field==="purchasePrice"?s.jsx(Y,{type:"number",step:"0.01",value:B,onChange:pe=>K(pe.target.value),onBlur:()=>G(re.id,"purchasePrice",B),onKeyDown:pe=>{pe.key==="Enter"&&G(re.id,"purchasePrice",B)},autoFocus:!0,className:"w-16 sm:w-20"}):s.jsxs("div",{className:"cursor-pointer hover:bg-muted p-1 rounded text-sm",onClick:()=>{U({id:re.id,field:"purchasePrice"}),K(re.purchasePrice.toString())},children:[re.purchasePrice.toFixed(2)," ",c.currency]})}),s.jsx(mt,{className:"hidden md:table-cell",children:(D==null?void 0:D.id)===re.id&&D.field==="sellingPrice"?s.jsx(Y,{type:"number",step:"0.01",value:B,onChange:pe=>K(pe.target.value),onBlur:()=>G(re.id,"sellingPrice",B),onKeyDown:pe=>{pe.key==="Enter"&&G(re.id,"sellingPrice",B)},autoFocus:!0,className:"w-16 sm:w-20"}):s.jsxs("div",{className:"cursor-pointer hover:bg-muted p-1 rounded",onClick:()=>{U({id:re.id,field:"sellingPrice"}),K(re.sellingPrice.toString())},children:[s.jsxs("div",{className:"font-medium text-sm",children:[re.sellingPrice.toFixed(2)," ",c.currency]}),s.jsxs("div",{className:"text-xs text-green-600",children:["Marge: ",((re.sellingPrice-re.purchasePrice)*re.currentStock).toFixed(2)," ",c.currency]})]})}),s.jsx(mt,{className:"hidden lg:table-cell",children:s.jsxs("div",{className:"font-medium text-sm",children:[re.totalValue.toFixed(2)," ",c.currency]})}),s.jsx(mt,{className:"hidden md:table-cell",children:re.expirationDate?s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:`text-xs sm:text-sm ${le?"text-red-600 font-medium":W?"text-yellow-600 font-medium":""}`,children:st(new Date(re.expirationDate),"dd/MM/yyyy",{locale:zn})}),le&&s.jsx(Pe,{variant:"destructive",className:"text-xs",children:"Expiré"}),W&&!le&&s.jsx(Pe,{variant:"secondary",className:"text-xs bg-yellow-100 text-yellow-800",children:"Expire bientôt"})]}):s.jsx("span",{className:"text-muted-foreground text-xs sm:text-sm",children:"-"})}),s.jsx(mt,{className:"hidden lg:table-cell",children:(D==null?void 0:D.id)===re.id&&D.field==="location"?s.jsx(Y,{value:B,onChange:pe=>K(pe.target.value),onBlur:()=>G(re.id,"location",B),onKeyDown:pe=>{pe.key==="Enter"&&G(re.id,"location",B)},autoFocus:!0,className:"w-24 sm:w-32"}):s.jsxs("div",{className:"cursor-pointer hover:bg-muted p-1 rounded flex items-center gap-1 text-xs sm:text-sm",onClick:()=>{U({id:re.id,field:"location"}),K(re.location||"")},children:[s.jsx(ic,{className:"h-3 w-3"}),re.location||"Non défini"]})}),s.jsx(mt,{children:s.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[s.jsx(R,{size:"sm",variant:"outline",onClick:()=>M(re),className:"p-1 sm:p-2",children:s.jsx(cn,{className:"h-3 w-3"})}),s.jsx(R,{size:"sm",variant:"outline",onClick:()=>Q(re),className:"p-1 sm:p-2",children:s.jsx($t,{className:"h-3 w-3"})}),s.jsx(R,{size:"sm",variant:"outline",onClick:()=>oe(re),className:"p-1 sm:p-2",children:s.jsx(Vt,{className:"h-3 w-3"})})]})})]},re.id)})})]})}),$.length===0&&s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Ia,{className:"h-8 sm:h-12 w-8 sm:w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{className:"text-sm sm:text-base",children:"Aucun élément trouvé"}),s.jsx("p",{className:"text-xs sm:text-sm",children:"Ajustez vos filtres ou ajoutez de nouveaux éléments"})]})]})]}),s.jsxs(ee,{children:[s.jsxs(he,{children:[s.jsxs(me,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[s.jsx(Qt,{className:"h-4 sm:h-5 w-4 sm:w-5"}),"Historique des Mouvements (",n.length,")"]}),s.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Derniers mouvements de stock (prescriptions, achats, ajustements)"})]}),s.jsx(te,{children:n.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Qt,{className:"h-8 sm:h-12 w-8 sm:w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{className:"text-sm sm:text-base",children:"Aucun mouvement de stock enregistré"})]}):s.jsxs("div",{className:"space-y-4",children:[n.sort((re,V)=>new Date(V.date).getTime()-new Date(re.date).getTime()).slice(0,20).map(re=>{const le={in:{label:"Entrée",color:"text-green-600",icon:"↗️"},out:{label:re.reason==="Prescription médicale"?"Prescription":"Sortie",color:re.reason==="Prescription médicale"?"text-orange-600":"text-red-600",icon:re.reason==="Prescription médicale"?"💊":"↘️"},adjustment:{label:"Ajustement",color:"text-blue-600",icon:"⚖️"},transfer:{label:"Transfert",color:"text-purple-600",icon:"↔️"}}[re.type];return s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-3 sm:p-4 border rounded-lg hover:bg-muted/50 gap-2 sm:gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[s.jsx("div",{className:"text-xl sm:text-2xl",children:le.icon}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-sm sm:text-base",children:re.itemName}),s.jsxs("div",{className:"text-xs sm:text-sm text-muted-foreground",children:[re.reason," • ",re.performedBy||"Non spécifié"]}),re.reference&&s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Référence: ",re.reference]})]})]}),s.jsxs("div",{className:"text-right sm:text-left",children:[s.jsxs("div",{className:`font-semibold text-sm sm:text-base ${le.color}`,children:[re.type==="in"?"+":re.type==="out"?"-":"",re.quantity]}),s.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:st(new Date(re.date),"dd/MM/yyyy HH:mm",{locale:zn})})]})]},re.id)}),n.length>20&&s.jsx("div",{className:"text-center pt-4",children:s.jsxs(R,{variant:"outline",size:"sm",className:"text-xs sm:text-sm",children:["Voir tous les mouvements (",n.length,")"]})})]})})]}),s.jsx(NO,{open:d,onOpenChange:h}),s.jsx(NO,{open:v,onOpenChange:ne,editingItem:y}),s.jsx(qke,{open:m,onOpenChange:f,item:g})]})}const Hke={monthly:[{description:"Salaire Secrétaire",amount:3e3,type:"expense",frequency:"monthly",source:"salary"},{description:"CNSS Secrétaire",amount:700,type:"expense",frequency:"monthly",source:"insurance"},{description:"CNSS Vétérinaire",amount:1500,type:"expense",frequency:"monthly",source:"insurance"},{description:"Loyer",amount:3e3,type:"expense",frequency:"monthly",source:"rent"},{description:"Eau et Électricité",amount:300,type:"expense",frequency:"monthly",source:"other"}],annual:[{description:"Impôts",amount:3e3,type:"expense",frequency:"annual",source:"tax"},{description:"Cotisation Ordre des Vétérinaires",amount:1200,type:"expense",frequency:"annual",source:"other"}],occasional:[{description:"Maintenance Équipement",amount:500,type:"expense",frequency:"occasional",source:"other"},{description:"Formation Professionnelle",amount:800,type:"expense",frequency:"occasional",source:"other"},{description:"Achat Matériel",amount:1200,type:"expense",frequency:"occasional",source:"other"}]},Kke=()=>{const{accountingEntries:e,addAccountingEntry:t,updateAccountingEntry:n,deleteAccountingEntry:r,generateAccountingSummary:a,consultations:i,vaccinations:o,antiparasitics:l,prescriptions:c,stockMovements:u,stockItems:d}=bt(),{settings:h}=At();it();const[m,f]=j.useState("month"),[v,p]=j.useState(""),[g,x]=j.useState(""),[y,b]=j.useState(!1),[C,w]=j.useState(null),[N,S]=j.useState(null),[_,P]=j.useState(!1),[A,E]=j.useState(Hke),[k,I]=j.useState(!1),[D,U]=j.useState(null),[B,K]=j.useState({description:"",amount:"",type:"expense",frequency:"monthly",source:"other"}),[T,$]=j.useState({type:"revenue",frequency:"occasional",description:"",amount:"",date:"",source:"other",notes:""});j.useEffect(()=>{const W=new Date,X=new Date(W.getFullYear(),W.getMonth(),1),pe=new Date(W.getFullYear(),W.getMonth()+1,0);p(st(X,"yyyy-MM-dd")),x(st(pe,"yyyy-MM-dd"))},[]),j.useEffect(()=>{if(v&&g){const W=m==="month"?st(new Date(v),"yyyy-MM",{locale:zn}):m==="year"?st(new Date(v),"yyyy",{locale:zn}):m==="day"?st(new Date(v),"dd/MM/yyyy",{locale:zn}):`${st(new Date(v),"dd/MM/yyyy")} - ${st(new Date(g),"dd/MM/yyyy")}`,X=a(W,v,g);S(X)}},[v,g,m,e,i,o,l,c,u,a]);const G=W=>{f(W);const X=new Date;switch(W){case"day":const pe=st(X,"yyyy-MM-dd");p(pe),x(pe);break;case"month":const fe=new Date(X.getFullYear(),X.getMonth(),1),Re=new Date(X.getFullYear(),X.getMonth()+1,0);p(st(fe,"yyyy-MM-dd")),x(st(Re,"yyyy-MM-dd"));break;case"quarter":const qe=Math.floor(X.getMonth()/3),ot=new Date(X.getFullYear(),qe*3,1),tt=new Date(X.getFullYear(),qe*3+3,0);p(st(ot,"yyyy-MM-dd")),x(st(tt,"yyyy-MM-dd"));break;case"year":const wt=new Date(X.getFullYear(),0,1),ae=new Date(X.getFullYear(),11,31);p(st(wt,"yyyy-MM-dd")),x(st(ae,"yyyy-MM-dd"));break}},Q=()=>{if(!T.description||!T.amount||!T.date)return;const W={type:T.type,category:"manual",frequency:T.frequency,description:T.description,amount:parseFloat(T.amount),date:T.date,source:T.source,notes:T.notes};C?(n(C.id,W),w(null)):t(W),$({type:"revenue",frequency:"occasional",description:"",amount:"",date:"",source:"other",notes:""}),b(!1)},ne=W=>{w(W),$({type:W.type,frequency:W.frequency,description:W.description,amount:W.amount.toString(),date:W.date,source:W.source||"other",notes:W.notes||""}),b(!0)},oe=W=>{window.confirm("Êtes-vous sûr de vouloir supprimer cette entrée ?")&&r(W)},M=W=>{$({...T,type:W.type,frequency:W.frequency||"occasional",description:W.description,amount:W.amount.toString(),source:W.source,date:T.date||st(new Date,"yyyy-MM-dd")}),P(!1)},ue=()=>{if(!B.description||!B.amount)return;const W={description:B.description,amount:parseFloat(B.amount),type:B.type,frequency:B.frequency,source:B.source};if(D){const X={...A},pe=D.frequency,fe=X[pe].findIndex(Re=>Re===D);fe!==-1&&(X[pe][fe]=W),E(X),U(null)}else{const X={...A},pe=B.frequency;X[pe].push(W),E(X)}K({description:"",amount:"",type:"expense",frequency:"monthly",source:"other"}),I(!1)},ve=W=>{U(W),K({description:W.description,amount:W.amount.toString(),type:W.type,frequency:W.frequency,source:W.source}),I(!0)},ce=W=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer cette suggestion ?")){const X={...A},pe=W.frequency;X[pe]=X[pe].filter(fe=>fe!==W),E(X)}},re=e.filter(W=>{const X=new Date(W.date),pe=new Date(v),fe=new Date(g);return X>=pe&&X<=fe}),V=W=>`${W.toFixed(2)} ${h.currency}`,le=W=>{switch(W){case"consultation":return"🩺";case"vaccination":return"💉";case"antiparasitic":return"💊";case"prescription":return"📋";case"stock_purchase":return"📦";case"salary":return"👥";case"rent":return"🏢";case"tax":return"📊";case"insurance":return"🛡️";default:return"📄"}};return s.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto p-4 sm:p-6 lg:p-8",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold flex items-center gap-2",children:[s.jsx(NI,{className:"h-6 w-6 sm:h-8 sm:w-8"}),"Gestion Comptable"]}),s.jsx("p",{className:"text-muted-foreground text-sm sm:text-base",children:"Suivi des recettes et charges de votre clinique vétérinaire"})]}),s.jsx("div",{className:"flex gap-2 w-full sm:w-auto",children:s.jsxs(Qe,{open:y,onOpenChange:b,children:[s.jsx(Tf,{asChild:!0,children:s.jsxs(R,{onClick:()=>{w(null),$({type:"revenue",frequency:"occasional",description:"",amount:"",date:"",source:"other",notes:""})},className:"w-full sm:w-auto",children:[s.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Ajouter une entrée"]})}),s.jsxs(Ye,{className:"max-w-2xl max-h-[90vh] overflow-y-auto w-full mx-4",children:[s.jsxs(Xe,{children:[s.jsx(Je,{className:"text-lg sm:text-xl",children:C?"Modifier l'entrée comptable":"Ajouter une entrée comptable"}),s.jsx(Bt,{className:"text-sm sm:text-base",children:C?"Modifiez les informations de cette entrée.":"Ajoutez une nouvelle recette ou charge manuelle."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"border rounded-lg p-4 bg-muted/50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(M0,{className:"h-4 w-4 text-yellow-600"}),s.jsx(O,{className:"text-sm font-medium",children:"Suggestions prédéfinies"})]}),s.jsx(R,{variant:"ghost",size:"sm",onClick:()=>P(!_),className:"p-2",children:_?s.jsx(wf,{className:"h-4 w-4"}):s.jsx(M0,{className:"h-4 w-4"})})]}),_&&s.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Charges mensuelles"}),s.jsx("div",{className:"grid grid-cols-1 gap-2",children:A.monthly.map((W,X)=>s.jsx(R,{variant:"outline",size:"sm",className:"justify-start text-left h-auto p-3 text-sm",onClick:()=>M(W),children:s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center w-full gap-1",children:[s.jsx("span",{className:"text-sm",children:W.description}),s.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:[W.amount," ",h.currency]})]})},X))})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Charges annuelles"}),s.jsx("div",{className:"grid grid-cols-1 gap-2",children:A.annual.map((W,X)=>s.jsx(R,{variant:"outline",size:"sm",className:"justify-start text-left h-auto p-3 text-sm",onClick:()=>M(W),children:s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center w-full gap-1",children:[s.jsx("span",{className:"text-sm",children:W.description}),s.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:[W.amount," ",h.currency]})]})},X))})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Charges occasionnelles"}),s.jsx("div",{className:"grid grid-cols-1 gap-2",children:A.occasional.map((W,X)=>s.jsx(R,{variant:"outline",size:"sm",className:"justify-start text-left h-auto p-3 text-sm",onClick:()=>M(W),children:s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center w-full gap-1",children:[s.jsx("span",{className:"text-sm",children:W.description}),s.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:[W.amount," ",h.currency]})]})},X))})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(O,{htmlFor:"type",children:"Type"}),s.jsxs(je,{value:T.type,onValueChange:W=>$({...T,type:W}),children:[s.jsx(xe,{children:s.jsx(be,{})}),s.jsxs(ye,{children:[s.jsx(z,{value:"revenue",children:"Recette"}),s.jsx(z,{value:"expense",children:"Charge"})]})]})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"frequency",children:"Fréquence"}),s.jsxs(je,{value:T.frequency,onValueChange:W=>$({...T,frequency:W}),children:[s.jsx(xe,{children:s.jsx(be,{})}),s.jsxs(ye,{children:[s.jsx(z,{value:"monthly",children:"Mensuel"}),s.jsx(z,{value:"annual",children:"Annuel"}),s.jsx(z,{value:"occasional",children:"Occasionnel"})]})]})]})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"description",children:"Description"}),s.jsx(Y,{id:"description",value:T.description,onChange:W=>$({...T,description:W.target.value}),placeholder:"Ex: Salaire employé, Loyer, etc."})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs(O,{htmlFor:"amount",children:["Montant (",h.currency,")"]}),s.jsx(Y,{id:"amount",type:"number",step:"0.01",value:T.amount,onChange:W=>$({...T,amount:W.target.value}),placeholder:"0.00"})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"date",children:"Date"}),s.jsx(Y,{id:"date",type:"date",value:T.date,onChange:W=>$({...T,date:W.target.value})})]})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"source",children:"Source"}),s.jsxs(je,{value:T.source,onValueChange:W=>$({...T,source:W}),children:[s.jsx(xe,{children:s.jsx(be,{})}),s.jsxs(ye,{children:[s.jsx(z,{value:"salary",children:"Salaire"}),s.jsx(z,{value:"rent",children:"Loyer"}),s.jsx(z,{value:"tax",children:"Impôts"}),s.jsx(z,{value:"insurance",children:"Assurance"}),s.jsx(z,{value:"other",children:"Autre"})]})]})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"notes",children:"Notes (optionnel)"}),s.jsx(Ue,{id:"notes",value:T.notes,onChange:W=>$({...T,notes:W.target.value}),placeholder:"Informations supplémentaires..."})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2",children:[s.jsx(R,{variant:"outline",onClick:()=>b(!1),className:"w-full sm:w-auto",children:"Annuler"}),s.jsx(R,{onClick:Q,className:"w-full sm:w-auto",children:C?"Modifier":"Ajouter"})]})]})]})]})})]}),s.jsxs(ee,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[s.jsx(Ge,{className:"h-5 w-5"}),"Période d'analyse"]})}),s.jsx(te,{children:s.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-start lg:items-end",children:[s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(R,{variant:m==="day"?"default":"outline",onClick:()=>G("day"),size:"sm",className:"flex-1 sm:flex-none",children:"Ce jour"}),s.jsx(R,{variant:m==="month"?"default":"outline",onClick:()=>G("month"),size:"sm",className:"flex-1 sm:flex-none",children:"Ce mois"}),s.jsx(R,{variant:m==="quarter"?"default":"outline",onClick:()=>G("quarter"),size:"sm",className:"flex-1 sm:flex-none",children:"Ce trimestre"}),s.jsx(R,{variant:m==="year"?"default":"outline",onClick:()=>G("year"),size:"sm",className:"flex-1 sm:flex-none",children:"Cette année"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-start sm:items-center w-full lg:w-auto",children:[s.jsx(O,{htmlFor:"startDate",className:"text-sm",children:"Du"}),s.jsx(Y,{id:"startDate",type:"date",value:v,onChange:W=>p(W.target.value),className:"w-full sm:w-40"}),s.jsx(O,{htmlFor:"endDate",className:"text-sm",children:"Au"}),s.jsx(Y,{id:"endDate",type:"date",value:g,onChange:W=>x(W.target.value),className:"w-full sm:w-40"})]})]})})]}),N&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs(ee,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(me,{className:"text-sm font-medium",children:"Total Recettes"}),s.jsx(cn,{className:"h-4 w-4 text-green-600"})]}),s.jsxs(te,{children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:V(N.totalRevenue)}),s.jsxs("div",{className:"text-xs text-muted-foreground mt-1 space-y-1",children:[s.jsxs("div",{children:["Consultations: ",V(N.revenueBreakdown.consultations)]}),s.jsxs("div",{children:["Vaccinations: ",V(N.revenueBreakdown.vaccinations)]}),s.jsxs("div",{children:["Antiparasitaires: ",V(N.revenueBreakdown.antiparasitics)]}),s.jsxs("div",{children:["Prescriptions: ",V(N.revenueBreakdown.prescriptions)]}),s.jsxs("div",{children:["Manuelles: ",V(N.revenueBreakdown.manualEntries)]})]})]})]}),s.jsxs(ee,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(me,{className:"text-sm font-medium",children:"Total Charges"}),s.jsx(Vl,{className:"h-4 w-4 text-red-600"})]}),s.jsxs(te,{children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:V(N.totalExpenses)}),s.jsxs("div",{className:"text-xs text-muted-foreground mt-1 space-y-1",children:[s.jsxs("div",{children:["Achats stock: ",V(N.expenseBreakdown.stockPurchases)]}),s.jsxs("div",{children:["Salaires: ",V(N.expenseBreakdown.salaries)]}),s.jsxs("div",{children:["Loyer: ",V(N.expenseBreakdown.rent)]}),s.jsxs("div",{children:["Impôts: ",V(N.expenseBreakdown.taxes)]}),s.jsxs("div",{children:["Autres: ",V(N.expenseBreakdown.other)]})]})]})]}),s.jsxs(ee,{children:[s.jsxs(he,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(me,{className:"text-sm font-medium",children:"Résultat Net"}),s.jsx(bd,{className:"h-4 w-4"})]}),s.jsxs(te,{children:[s.jsx("div",{className:`text-2xl font-bold ${N.netIncome>=0?"text-green-600":"text-red-600"}`,children:V(N.netIncome)}),s.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:N.netIncome>=0?"Bénéfice":"Perte"})]})]})]}),s.jsxs(Ei,{defaultValue:"entries",className:"space-y-4",children:[s.jsxs(Ha,{className:"grid w-full grid-cols-2",children:[s.jsx(Mt,{value:"entries",children:"Entrées Comptables"}),s.jsx(Mt,{value:"configuration",children:"Configuration"})]}),s.jsx(It,{value:"entries",children:s.jsxs(ee,{children:[s.jsxs(he,{children:[s.jsxs(me,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[s.jsx(_r,{className:"h-5 w-5"}),"Entrées comptables automatiques et manuelles"]}),s.jsx(qu,{className:"text-sm sm:text-base",children:"Entrées générées automatiquement (consultations, vaccinations, etc.) et entrées manuelles ajoutées"})]}),s.jsxs(te,{children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Xd,{children:[s.jsx(Jd,{children:s.jsxs(ma,{children:[s.jsx(ht,{className:"min-w-[100px]",children:"Date"}),s.jsx(ht,{className:"min-w-[80px]",children:"Type"}),s.jsx(ht,{className:"min-w-[150px]",children:"Description"}),s.jsx(ht,{className:"min-w-[100px]",children:"Source"}),s.jsx(ht,{className:"min-w-[100px]",children:"Fréquence"}),s.jsx(ht,{className:"min-w-[100px]",children:"Montant"}),s.jsx(ht,{className:"min-w-[100px]",children:"Actions"})]})}),s.jsx(Zd,{children:re.map(W=>s.jsxs(ma,{children:[s.jsx(mt,{children:st(new Date(W.date),"dd/MM/yyyy",{locale:zn})}),s.jsx(mt,{children:s.jsx(Pe,{variant:W.type==="revenue"?"default":"destructive",className:"text-xs",children:W.type==="revenue"?"Recette":"Charge"})}),s.jsx(mt,{className:"text-sm",children:W.description}),s.jsx(mt,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:le(W.source||"other")}),s.jsx("span",{className:"text-xs",children:W.category==="automatic"?"Automatique":"Manuel"})]})}),s.jsx(mt,{children:s.jsx(Pe,{variant:"outline",className:"text-xs",children:W.frequency==="monthly"?"Mensuel":W.frequency==="annual"?"Annuel":"Occasionnel"})}),s.jsxs(mt,{className:`font-medium text-sm ${W.type==="revenue"?"text-green-600":"text-red-600"}`,children:[W.type==="revenue"?"+":"-",V(W.amount)]}),s.jsx(mt,{children:W.category==="manual"&&s.jsxs("div",{className:"flex gap-1",children:[s.jsx(R,{variant:"outline",size:"sm",onClick:()=>ne(W),className:"p-1",children:s.jsx($t,{className:"h-4 w-4"})}),s.jsx(R,{variant:"outline",size:"sm",onClick:()=>oe(W.id),className:"p-1",children:s.jsx(Vt,{className:"h-4 w-4"})})]})})]},W.id))})]})}),re.length===0&&s.jsx("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"Aucune entrée comptable pour cette période"})]})]})}),s.jsx(It,{value:"configuration",children:s.jsxs(ee,{children:[s.jsxs(he,{children:[s.jsxs(me,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[s.jsx(M0,{className:"h-5 w-5"}),"Configuration des Suggestions"]}),s.jsx(qu,{className:"text-sm sm:text-base",children:"Configurez les suggestions prédéfinies pour faciliter la saisie des charges et recettes"})]}),s.jsxs(te,{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Suggestions Mensuelles"}),s.jsxs(R,{onClick:()=>{U(null),K({description:"",amount:"",type:"expense",frequency:"monthly",source:"other"}),I(!0)},className:"w-full sm:w-auto",children:[s.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Ajouter"]})]}),s.jsx("div",{className:"grid gap-3",children:A.monthly.map((W,X)=>s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-3 border rounded-lg gap-2",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-sm font-medium",children:W.description}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[W.amount," ",h.currency]})]}),s.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[s.jsx(R,{variant:"outline",size:"sm",onClick:()=>ve(W),className:"flex-1 sm:flex-none",children:s.jsx($t,{className:"h-4 w-4"})}),s.jsx(R,{variant:"outline",size:"sm",onClick:()=>ce(W),className:"flex-1 sm:flex-none",children:s.jsx(Vt,{className:"h-4 w-4"})})]})]},X))}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Suggestions Annuelles"}),s.jsxs(R,{onClick:()=>{U(null),K({description:"",amount:"",type:"expense",frequency:"annual",source:"other"}),I(!0)},className:"w-full sm:w-auto",children:[s.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Ajouter"]})]}),s.jsx("div",{className:"grid gap-3",children:A.annual.map((W,X)=>s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-3 border rounded-lg gap-2",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-sm font-medium",children:W.description}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[W.amount," ",h.currency]})]}),s.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[s.jsx(R,{variant:"outline",size:"sm",onClick:()=>ve(W),className:"flex-1 sm:flex-none",children:s.jsx($t,{className:"h-4 w-4"})}),s.jsx(R,{variant:"outline",size:"sm",onClick:()=>ce(W),className:"flex-1 sm:flex-none",children:s.jsx(Vt,{className:"h-4 w-4"})})]})]},X))}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Suggestions Occasionnelles"}),s.jsxs(R,{onClick:()=>{U(null),K({description:"",amount:"",type:"expense",frequency:"occasional",source:"other"}),I(!0)},className:"w-full sm:w-auto",children:[s.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Ajouter"]})]}),s.jsx("div",{className:"grid gap-3",children:A.occasional.map((W,X)=>s.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between p-3 border rounded-lg gap-2",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-sm font-medium",children:W.description}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[W.amount," ",h.currency]})]}),s.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[s.jsx(R,{variant:"outline",size:"sm",onClick:()=>ve(W),className:"flex-1 sm:flex-none",children:s.jsx($t,{className:"h-4 w-4"})}),s.jsx(R,{variant:"outline",size:"sm",onClick:()=>ce(W),className:"flex-1 sm:flex-none",children:s.jsx(Vt,{className:"h-4 w-4"})})]})]},X))})]})]})})]}),s.jsx(Qe,{open:k,onOpenChange:I,children:s.jsxs(Ye,{className:"max-w-2xl max-h-[90vh] overflow-y-auto w-full mx-4",children:[s.jsxs(Xe,{children:[s.jsx(Je,{className:"text-lg sm:text-xl",children:D?"Modifier la suggestion":"Ajouter une suggestion"}),s.jsx(Bt,{className:"text-sm sm:text-base",children:D?"Modifiez les informations de cette suggestion.":"Ajoutez une nouvelle suggestion prédéfinie."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(O,{htmlFor:"suggestion-type",children:"Type"}),s.jsxs(je,{value:B.type,onValueChange:W=>K({...B,type:W}),children:[s.jsx(xe,{children:s.jsx(be,{})}),s.jsxs(ye,{children:[s.jsx(z,{value:"revenue",children:"Recette"}),s.jsx(z,{value:"expense",children:"Charge"})]})]})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"suggestion-frequency",children:"Fréquence"}),s.jsxs(je,{value:B.frequency,onValueChange:W=>K({...B,frequency:W}),children:[s.jsx(xe,{children:s.jsx(be,{})}),s.jsxs(ye,{children:[s.jsx(z,{value:"monthly",children:"Mensuel"}),s.jsx(z,{value:"annual",children:"Annuel"}),s.jsx(z,{value:"occasional",children:"Occasionnel"})]})]})]})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"suggestion-description",children:"Description"}),s.jsx(Y,{id:"suggestion-description",value:B.description,onChange:W=>K({...B,description:W.target.value}),placeholder:"Ex: Salaire employé, Loyer, etc."})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs(O,{htmlFor:"suggestion-amount",children:["Montant (",h.currency,")"]}),s.jsx(Y,{id:"suggestion-amount",type:"number",step:"0.01",value:B.amount,onChange:W=>K({...B,amount:W.target.value}),placeholder:"0.00"})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"suggestion-source",children:"Source"}),s.jsxs(je,{value:B.source,onValueChange:W=>K({...B,source:W}),children:[s.jsx(xe,{children:s.jsx(be,{})}),s.jsxs(ye,{children:[s.jsx(z,{value:"salary",children:"Salaire"}),s.jsx(z,{value:"rent",children:"Loyer"}),s.jsx(z,{value:"tax",children:"Impôts"}),s.jsx(z,{value:"insurance",children:"Assurance"}),s.jsx(z,{value:"other",children:"Autre"})]})]})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2",children:[s.jsx(R,{variant:"outline",onClick:()=>I(!1),className:"w-full sm:w-auto",children:"Annuler"}),s.jsx(R,{onClick:ue,className:"w-full sm:w-auto",children:D?"Modifier":"Ajouter"})]})]})]})})]})},Gke=()=>{const{clients:e,consultations:t,vaccinations:n,antiparasitics:r,appointments:a,addConsultation:i,addVaccination:o,addAntiparasitic:l,updateClientStats:c}=bt(),u=()=>{if(e.length>0){const f=e[0],v=f.pets[0];v&&i({clientId:f.id,clientName:f.name,petId:v.id,petName:v.name,date:new Date().toISOString().split("T")[0],symptoms:"Test consultation",diagnosis:"Test diagnosis",treatment:"Test treatment",cost:"50",notes:"Test consultation for stats update",photos:[]})}},d=()=>{if(e.length>0){const f=e[0],v=f.pets[0];v&&o({clientId:f.id,clientName:f.name,petId:v.id,petName:v.name,vaccineName:"Test Vaccine",vaccineType:"Test Type",dateGiven:new Date().toISOString().split("T")[0],nextDueDate:new Date(Date.now()+365*24*60*60*1e3).toISOString().split("T")[0],veterinarian:"Dr. Test",cost:"30",notes:"Test vaccination for stats update",status:"completed"})}},h=()=>{if(e.length>0){const f=e[0],v=f.pets[0];v&&l({clientId:f.id,clientName:f.name,petId:v.id,petName:v.name,productName:"Test Product",productType:"Test Type",dateGiven:new Date().toISOString().split("T")[0],nextDueDate:new Date(Date.now()+90*24*60*60*1e3).toISOString().split("T")[0],targetParasites:"Test Parasites",veterinarian:"Dr. Test",cost:"25",notes:"Test antiparasitic for stats update",status:"completed"})}},m=()=>{e.length>0&&e.forEach(f=>{c(f.id)})};return s.jsxs("div",{className:"container mx-auto px-6 py-8 space-y-6",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Test des Statistiques des Clients"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.jsxs(ee,{children:[s.jsx(he,{children:s.jsx(me,{className:"text-lg",children:"Actions de Test"})}),s.jsxs(te,{className:"space-y-3",children:[s.jsxs(R,{onClick:u,className:"w-full",children:[s.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Ajouter Consultation Test"]}),s.jsxs(R,{onClick:d,className:"w-full",children:[s.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Ajouter Vaccination Test"]}),s.jsxs(R,{onClick:h,className:"w-full",children:[s.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Ajouter Antiparasite Test"]}),s.jsx(R,{onClick:m,variant:"outline",className:"w-full",children:"Mettre à jour Stats"})]})]}),s.jsxs(ee,{children:[s.jsx(he,{children:s.jsx(me,{className:"text-lg",children:"Statistiques Globales"})}),s.jsxs(te,{className:"space-y-2",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Clients:"})," ",e.length]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Consultations:"})," ",t.length]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Vaccinations:"})," ",n.length]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Antiparasites:"})," ",r.length]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Rendez-vous:"})," ",a.length]})]})]}),s.jsxs(ee,{children:[s.jsx(he,{children:s.jsx(me,{className:"text-lg",children:"Détails des Clients"})}),s.jsx(te,{className:"space-y-3",children:e.map(f=>s.jsxs("div",{className:"border-b pb-2",children:[s.jsx("p",{className:"font-medium",children:f.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Total visites: ",f.totalVisits," | Dernière visite: ",new Date(f.lastVisit).toLocaleDateString("fr-FR")]})]},f.id))})]})]})]})},Yke=()=>s.jsx(WS,{children:s.jsx(Gke,{})}),Qke=()=>{const{clients:e,consultations:t,vaccinations:n,antiparasitics:r,appointments:a,addConsultation:i,addVaccination:o,addAntiparasitic:l,updateClientStats:c}=bt(),u=()=>{if(e.length>0){const f=e[0],v=f.pets[0];v&&i({clientId:f.id,clientName:f.name,petId:v.id,petName:v.name,date:new Date().toISOString().split("T")[0],symptoms:"Test consultation",diagnosis:"Test diagnosis",treatment:"Test treatment",cost:"50",notes:"Test consultation for stats update",photos:[]})}},d=()=>{if(e.length>0){const f=e[0],v=f.pets[0];v&&o({clientId:f.id,clientName:f.name,petId:v.id,petName:v.name,vaccineName:"Test Vaccine",vaccineType:"Test Type",dateGiven:new Date().toISOString().split("T")[0],nextDueDate:new Date(Date.now()+365*24*60*60*1e3).toISOString().split("T")[0],veterinarian:"Dr. Test",cost:"30",notes:"Test vaccination for stats update",status:"completed"})}},h=()=>{if(e.length>0){const f=e[0],v=f.pets[0];v&&l({clientId:f.id,clientName:f.name,petId:v.id,petName:v.name,productName:"Test Product",productType:"Test Type",dateGiven:new Date().toISOString().split("T")[0],nextDueDate:new Date(Date.now()+90*24*60*60*1e3).toISOString().split("T")[0],targetParasites:"Test Parasites",veterinarian:"Dr. Test",cost:"25",notes:"Test antiparasitic for stats update",status:"completed"})}},m=()=>{e.length>0&&e.forEach(f=>{c(f.id)})};return s.jsxs("div",{className:"container mx-auto px-6 py-8 space-y-6",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Test Simple des Statistiques"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.jsxs(ee,{children:[s.jsx(he,{children:s.jsx(me,{className:"text-lg",children:"Actions de Test"})}),s.jsxs(te,{className:"space-y-3",children:[s.jsxs(R,{onClick:u,className:"w-full",children:[s.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Ajouter Consultation Test"]}),s.jsxs(R,{onClick:d,className:"w-full",children:[s.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Ajouter Vaccination Test"]}),s.jsxs(R,{onClick:h,className:"w-full",children:[s.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Ajouter Antiparasite Test"]}),s.jsx(R,{onClick:m,variant:"outline",className:"w-full",children:"Mettre à jour Stats"})]})]}),s.jsxs(ee,{children:[s.jsx(he,{children:s.jsx(me,{className:"text-lg",children:"Statistiques Globales"})}),s.jsxs(te,{className:"space-y-2",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Clients:"})," ",e.length]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Consultations:"})," ",t.length]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Vaccinations:"})," ",n.length]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Antiparasites:"})," ",r.length]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Rendez-vous:"})," ",a.length]})]})]}),s.jsxs(ee,{children:[s.jsx(he,{children:s.jsx(me,{className:"text-lg",children:"Détails des Clients"})}),s.jsx(te,{className:"space-y-3",children:e.map(f=>s.jsxs("div",{className:"border-b pb-2",children:[s.jsx("p",{className:"font-medium",children:f.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Total visites: ",f.totalVisits," | Dernière visite: ",new Date(f.lastVisit).toLocaleDateString("fr-FR")]})]},f.id))})]})]})]})},Xke=()=>s.jsx(WS,{children:s.jsx(Qke,{})}),Jke=()=>{const e=zo();return j.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),s.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),s.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})};function Zke(){const{user:e,logout:t}=qo(),{toast:n}=it();if(!e)return null;const r=l=>l?l.split(" ").map(c=>c.charAt(0)).join("").toUpperCase().slice(0,2):e.profile.username.charAt(0).toUpperCase(),a=l=>{switch(l){case"admin":return"Administrateur";case"assistant":return"Assistant";default:return"Utilisateur"}},i=l=>{switch(l){case"admin":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"assistant":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-200"}},o=async()=>{await t(),n({title:"Déconnexion réussie",description:"Vous avez été déconnecté avec succès."})};return s.jsxs(ee,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(Xn,{className:"h-5 w-5"}),"Profil Utilisateur"]})}),s.jsxs(te,{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(Jn,{className:"h-16 w-16",children:s.jsx(Zn,{className:"bg-primary text-primary-foreground text-lg",children:r(e.profile.full_name||e.profile.username)})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold",children:e.profile.full_name||e.profile.username}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx(wd,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:e.email})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx(Xn,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:["@",e.profile.username]})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.jsx(xr,{className:"h-4 w-4 text-muted-foreground"}),s.jsx(Pe,{className:i(e.profile.role),children:a(e.profile.role)})]})]})]}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsx("h4",{className:"text-sm font-medium mb-3",children:"Informations de session"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"ID Utilisateur:"}),s.jsx("span",{className:"font-mono text-xs",children:e.id})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Nom d'utilisateur:"}),s.jsxs("span",{children:["@",e.profile.username]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Rôle:"}),s.jsx("span",{children:a(e.profile.role)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Statut:"}),s.jsx(Pe,{variant:"secondary",className:"bg-green-100 text-green-800",children:"Connecté"})]})]})]}),s.jsx("div",{className:"border-t pt-4",children:s.jsxs(R,{variant:"outline",onClick:o,className:"w-full gap-2 text-red-600 hover:text-red-700 hover:bg-red-50",children:[s.jsx(PI,{className:"h-4 w-4"}),"Se déconnecter"]})})]})]})}const Oj=[{key:"animals",label:"Animaux",description:"Configuration des espèces, races et couleurs"},{key:"clients",label:"Clients",description:"Types de clients et paramètres associés"},{key:"consultations",label:"Consultations",description:"Types de consultations disponibles"},{key:"appointments",label:"Rendez-vous",description:"Types de rendez-vous et configurations"},{key:"medications",label:"Médicaments",description:"Catégories de médicaments"},{key:"vaccinations",label:"Vaccinations",description:"Types de vaccinations disponibles"},{key:"parasites",label:"Parasites",description:"Types de parasites et traitements"},{key:"farms",label:"Fermes",description:"Types de fermes et configurations"},{key:"payments",label:"Paiements",description:"Méthodes de paiement acceptées"}],eTe=()=>{var N,S;const[e,t]=j.useState("animals"),[n,r]=j.useState({}),[a,i]=j.useState(!1),[o,l]=j.useState({key:"",description:"",value:""}),{toast:c}=it(),{data:u,isLoading:d}=Pee(e),h=eL(),m=kee(),{initializeDefaults:f,isLoading:v}=Eee();j.useEffect(()=>{if(u){const _={};u.forEach(P=>{_[P.setting_key]=P.setting_value}),r(_)}},[u]);const p=async()=>{try{await f(),c({title:"Paramètres initialisés",description:"Les paramètres par défaut ont été chargés avec succès"})}catch{c({title:"Erreur",description:"Impossible d'initialiser les paramètres par défaut",variant:"destructive"})}},g=async _=>{try{const P=n[_];await h.mutateAsync({category:e,key:_,value:P,description:`Configuration ${_} pour ${e}`}),c({title:"Paramètre sauvegardé",description:`Le paramètre ${_} a été mis à jour`})}catch{c({title:"Erreur",description:"Impossible de sauvegarder le paramètre",variant:"destructive"})}},x=async _=>{if(confirm(`Êtes-vous sûr de vouloir supprimer le paramètre ${_} ?`))try{await m.mutateAsync({category:e,key:_}),c({title:"Paramètre supprimé",description:`Le paramètre ${_} a été supprimé`})}catch{c({title:"Erreur",description:"Impossible de supprimer le paramètre",variant:"destructive"})}},y=(_,P)=>{if(!P.trim())return;const A=n[_]||[],E=Array.isArray(A)?[...A,P.trim()]:[A,P.trim()];r(k=>({...k,[_]:E}))},b=(_,P)=>{const A=n[_]||[],E=Array.isArray(A)?A.filter(k=>k!==P):[];r(k=>({...k,[_]:E}))},C=async()=>{if(!o.key.trim()){c({title:"Erreur",description:"Le nom du paramètre est obligatoire",variant:"destructive"});return}try{const _=o.value.includes(",")?o.value.split(",").map(P=>P.trim()):o.value;await h.mutateAsync({category:e,key:o.key,value:_,description:o.description||`Paramètre personnalisé ${o.key}`}),i(!1),l({key:"",description:"",value:""}),c({title:"Paramètre ajouté",description:`Le paramètre ${o.key} a été créé`})}catch{c({title:"Erreur",description:"Impossible de créer le paramètre",variant:"destructive"})}},w=(_,P)=>Array.isArray(P)?s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"flex flex-wrap gap-2",children:P.map((A,E)=>s.jsxs(Pe,{variant:"secondary",className:"flex items-center gap-1",children:[A,s.jsx(wf,{className:"h-3 w-3 cursor-pointer",onClick:()=>b(_,A)})]},E))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Y,{placeholder:"Ajouter une valeur...",onKeyPress:A=>{A.key==="Enter"&&(y(_,A.target.value),A.target.value="")}}),s.jsx(R,{size:"sm",onClick:A=>{const E=A.target.previousElementSibling;y(_,E.value),E.value=""},children:s.jsx(Ze,{className:"h-4 w-4"})})]})]}):typeof P=="object"?s.jsx(Ue,{value:JSON.stringify(P,null,2),onChange:A=>{try{const E=JSON.parse(A.target.value);r(k=>({...k,[_]:E}))}catch{}},rows:10,className:"font-mono text-sm"}):s.jsx(Y,{value:P||"",onChange:A=>r(E=>({...E,[_]:A.target.value}))});return d?s.jsx("div",{className:"flex justify-center p-8",children:"Chargement..."}):s.jsxs("div",{className:"space-y-6 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(kI,{className:"h-8 w-8"}),"Gestion des paramètres"]}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Configurez les valeurs utilisées dans toute l'application"})]}),s.jsx(R,{onClick:p,disabled:v,children:v?"Initialisation...":"Charger les valeurs par défaut"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[s.jsxs(ee,{className:"lg:col-span-1",children:[s.jsx(he,{children:s.jsx(me,{children:"Catégories"})}),s.jsx(te,{className:"space-y-2",children:Oj.map(_=>s.jsx(R,{variant:e===_.key?"default":"ghost",className:"w-full justify-start",onClick:()=>t(_.key),children:_.label},_.key))})]}),s.jsxs(ee,{className:"lg:col-span-3",children:[s.jsx(he,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(me,{children:(N=Oj.find(_=>_.key===e))==null?void 0:N.label}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:(S=Oj.find(_=>_.key===e))==null?void 0:S.description})]}),s.jsxs(Qe,{open:a,onOpenChange:i,children:[s.jsx(Tf,{asChild:!0,children:s.jsxs(R,{children:[s.jsx(Ze,{className:"h-4 w-4 mr-2"}),"Ajouter un paramètre"]})}),s.jsxs(Ye,{children:[s.jsx(Xe,{children:s.jsx(Je,{children:"Nouveau paramètre"})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(O,{htmlFor:"key",children:"Nom du paramètre"}),s.jsx(Y,{id:"key",value:o.key,onChange:_=>l(P=>({...P,key:_.target.value})),placeholder:"ex: types, categories..."})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"description",children:"Description"}),s.jsx(Y,{id:"description",value:o.description,onChange:_=>l(P=>({...P,description:_.target.value})),placeholder:"Description du paramètre"})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"value",children:"Valeurs (séparées par des virgules)"}),s.jsx(Ue,{id:"value",value:o.value,onChange:_=>l(P=>({...P,value:_.target.value})),placeholder:"Valeur1, Valeur2, Valeur3...",rows:4})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(R,{onClick:C,className:"flex-1",children:"Créer"}),s.jsx(R,{variant:"outline",onClick:()=>i(!1),children:"Annuler"})]})]})]})]})]})}),s.jsx(te,{className:"space-y-6",children:(u==null?void 0:u.length)===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx("p",{children:"Aucun paramètre configuré pour cette catégorie."}),s.jsx("p",{className:"text-sm mt-2",children:'Cliquez sur "Charger les valeurs par défaut" pour commencer.'})]}):u==null?void 0:u.map(_=>s.jsxs("div",{className:"border rounded-lg p-4 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:_.setting_key}),_.description&&s.jsx("p",{className:"text-sm text-muted-foreground",children:_.description})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(R,{size:"sm",onClick:()=>g(_.setting_key),disabled:h.isPending,children:s.jsx(au,{className:"h-4 w-4"})}),s.jsx(R,{size:"sm",variant:"outline",onClick:()=>x(_.setting_key),disabled:m.isPending,children:s.jsx(Vt,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{children:[s.jsx(O,{children:"Valeurs"}),w(_.setting_key,n[_.setting_key]||_.setting_value)]})]},_.setting_key))})]})]})]})};function tTe(){const{toast:e}=it(),{settings:t,updateSettings:n}=At(),{theme:r,setTheme:a}=L$(),[i,o]=j.useState("general"),{data:l=[],isLoading:c}=Aee(),u=Tee(),[d,h]=j.useState(!1),[m,f]=j.useState(null),[v,p]=j.useState({name:"",title:"",specialty:"",phone:"",email:"",is_active:!0});j.useState(!1),j.useState(""),j.useState(!1),j.useState(""),j.useState(""),j.useState(!1),j.useState(""),j.useState(!1),j.useState("");const g=l.length>0?l:t.veterinarians,{pets:x}=bt();j.useEffect(()=>{const A=Array.from(new Set([...x.map(k=>k.type)])),E=Array.from(new Set([...t.species.split(",").map(k=>k.trim()),...A]));n({...t,species:E.join(", ")})},[x]);const y=(A,E)=>{n({...t,[A]:E})},b=()=>{e({title:"Paramètres sauvegardés",description:"Informations de la clinique mises à jour."})},C=A=>{var k;const E=(k=A.target.files)==null?void 0:k[0];if(E){const I=new FileReader;I.onload=()=>y("logo",I.result),I.readAsDataURL(E)}},w=(A,E)=>{const k={...t.displayPreferences,[A]:E},I={...t,displayPreferences:k};n(I),e({title:"Préférence d'affichage mise à jour",description:`${A} s'affichera maintenant en ${E==="table"?"tableau":"cartes"}`})},N=()=>{f(null),p({name:"",title:"",specialty:"",phone:"",email:"",is_active:!0}),h(!0)},S=A=>{f(A),p({name:A.name,title:A.title,specialty:A.specialty||"",phone:A.phone||"",email:A.email||"",is_active:A.is_active}),h(!0)},_=()=>{if(!v.name||!v.title){e({title:"Erreur",description:"Nom et titre requis",variant:"destructive"});return}const A=`${v.title} ${v.name}`;let E;if(m)E=l.map(k=>k.id===m.id?{...k,name:A,title:v.title,specialty:v.specialty,phone:v.phone,email:v.email,is_active:v.is_active}:k);else{const k={id:`vet_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:A,title:v.title,specialty:v.specialty,phone:v.phone,email:v.email,is_active:!0};E=[...l,k]}u.mutate(E),e({title:"Vétérinaire enregistré"}),h(!1)},P=A=>{if(!confirm("Supprimer ce vétérinaire ?"))return;const E=l.filter(k=>k.id!==A);u.mutate(E),e({title:"Vétérinaire supprimé"})};return s.jsxs("div",{className:"container mx-auto px-6 py-8 space-y-8",children:[s.jsxs(ee,{children:[s.jsxs(he,{children:[s.jsx(me,{children:"Paramètres de l'application"}),s.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[s.jsxs(R,{variant:i==="general"?"default":"outline",onClick:()=>o("general"),className:"flex items-center gap-2",children:[s.jsx(OU,{className:"h-4 w-4"}),"Paramètres généraux"]}),s.jsxs(R,{variant:i==="data"?"default":"outline",onClick:()=>o("data"),className:"flex items-center gap-2",children:[s.jsx(xr,{className:"h-4 w-4"}),"Configuration des données"]})]})]}),s.jsx(te,{children:i==="data"?s.jsx(eTe,{}):s.jsxs("div",{className:"grid gap-8 lg:grid-cols-3",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[s.jsxs(ee,{children:[s.jsx(he,{children:s.jsx(me,{children:"Paramètres de la Clinique"})}),s.jsxs(te,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(O,{htmlFor:"logo",children:"Logo de la clinique"}),s.jsx(Y,{id:"logo",type:"file",accept:"image/*",onChange:C}),t.logo&&s.jsx("img",{src:t.logo,alt:"Logo",className:"h-24 mt-2"})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"clinicName",children:"Nom de la clinique"}),s.jsx(Y,{id:"clinicName",value:t.clinicName,onChange:A=>y("clinicName",A.target.value)})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"address",children:"Adresse"}),s.jsx(Y,{id:"address",value:t.address,onChange:A=>y("address",A.target.value)})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"phone",children:"Téléphone"}),s.jsx(Y,{id:"phone",value:t.phone,onChange:A=>y("phone",A.target.value)})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"email",children:"Email"}),s.jsx(Y,{id:"email",type:"email",value:t.email,onChange:A=>y("email",A.target.value)})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"website",children:"Site web"}),s.jsx(Y,{id:"website",value:t.website,onChange:A=>y("website",A.target.value)})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"currency",children:"Devise"}),s.jsx(Y,{id:"currency",value:t.currency,onChange:A=>y("currency",A.target.value)})]}),s.jsxs("div",{children:[s.jsxs(O,{htmlFor:"defaultConsultationPrice",children:["Prix de consultation par défaut (",t.currency,")"]}),s.jsx(Y,{id:"defaultConsultationPrice",type:"number",step:"0.01",min:"0",value:t.defaultConsultationPrice,onChange:A=>y("defaultConsultationPrice",parseFloat(A.target.value)||0)})]})]}),s.jsx("div",{className:"flex gap-2",children:s.jsx(R,{onClick:b,children:"Enregistrer"})})]})]}),s.jsxs(ee,{children:[s.jsx(he,{children:s.jsx(me,{children:"Thème de l'application"})}),s.jsx(te,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Choisissez le thème de l'application pour votre confort visuel."}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(O,{htmlFor:"theme-select",children:"Thème"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:r==="light"?"Mode clair":"Mode sombre"})]}),s.jsxs(je,{value:r,onValueChange:A=>{a(A),e({title:"Thème mis à jour",description:`Thème changé en mode ${A==="light"?"clair":"sombre"}`})},children:[s.jsx(xe,{className:"w-32",children:s.jsx(be,{})}),s.jsxs(ye,{children:[s.jsx(z,{value:"light",children:"Mode clair"}),s.jsx(z,{value:"dark",children:"Mode sombre"})]})]})]})]})})]}),s.jsxs(ee,{children:[s.jsx(he,{children:s.jsx(me,{children:"Préférences d'affichage"})}),s.jsx(te,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Choisissez comment vous souhaitez afficher les différentes sections par défaut."}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(t.displayPreferences).map(([A,E])=>s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:`${A}-display`,children:A.charAt(0).toUpperCase()+A.slice(1)}),s.jsxs(je,{value:E,onValueChange:k=>w(A,k),children:[s.jsx(xe,{children:s.jsx(be,{})}),s.jsxs(ye,{children:[s.jsx(z,{value:"table",children:"Tableau"}),s.jsx(z,{value:"cards",children:"Cartes"})]})]})]},A))})]})})]}),s.jsxs(ee,{children:[s.jsxs(he,{className:"flex justify-between items-center",children:[s.jsx(me,{children:"Vétérinaires"}),s.jsxs(R,{onClick:N,className:"gap-2",children:[s.jsx(Ze,{className:"h-4 w-4"})," Ajouter"]})]}),s.jsx(te,{className:"space-y-2",children:g.length===0?s.jsx("p",{className:"text-muted-foreground",children:"Aucun vétérinaire configuré"}):g.map(A=>s.jsxs("div",{className:"flex justify-between items-center p-2 border rounded",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:A.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:A.specialty}),s.jsxs("p",{className:"text-xs",children:[A.phone," | ",A.email]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(R,{size:"sm",variant:"outline",onClick:()=>S(A),children:s.jsx($t,{className:"h-4 w-4"})}),s.jsx(R,{size:"sm",variant:"destructive",onClick:()=>P(A.id),children:s.jsx(Vt,{className:"h-4 w-4"})})]})]},A.id))})]})]}),s.jsx("div",{className:"space-y-6",children:s.jsx(Zke,{})})]})})]}),s.jsx(Qe,{open:d,onOpenChange:h,children:s.jsxs(Ye,{children:[s.jsxs(Xe,{children:[s.jsx(Je,{children:m?"Modifier vétérinaire":"Nouveau vétérinaire"}),s.jsx(Bt,{children:"Nom, titre, spécialité, contact"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(O,{htmlFor:"vetName",children:"Nom complet *"}),s.jsx(Y,{id:"vetName",value:v.name,onChange:A=>p(E=>({...E,name:A.target.value}))})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"vetTitle",children:"Titre *"}),s.jsx(Y,{id:"vetTitle",value:v.title,onChange:A=>p(E=>({...E,title:A.target.value}))})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"vetSpec",children:"Spécialité"}),s.jsx(Y,{id:"vetSpec",value:v.specialty,onChange:A=>p(E=>({...E,specialty:A.target.value}))})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"vetPhone",children:"Téléphone"}),s.jsx(Y,{id:"vetPhone",value:v.phone,onChange:A=>p(E=>({...E,phone:A.target.value}))})]}),s.jsxs("div",{children:[s.jsx(O,{htmlFor:"vetEmail",children:"Email"}),s.jsx(Y,{id:"vetEmail",type:"email",value:v.email,onChange:A=>p(E=>({...E,email:A.target.value}))})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(R,{variant:"outline",onClick:()=>h(!1),children:"Annuler"}),s.jsx(R,{onClick:_,children:m?"Mettre à jour":"Créer"})]})]})]})})]})}var nTe="Separator",SO="horizontal",rTe=["horizontal","vertical"],X8=j.forwardRef((e,t)=>{const{decorative:n,orientation:r=SO,...a}=e,i=sTe(r)?r:SO,l=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return s.jsx(Ve.div,{"data-orientation":i,...l,...a,ref:t})});X8.displayName=nTe;function sTe(e){return rTe.includes(e)}var J8=X8;const nx=j.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},a)=>s.jsx(J8,{ref:a,decorative:n,orientation:t,className:De("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...r}));nx.displayName=J8.displayName;function aTe(){const{user:e,logout:t,refreshProfile:n}=qo(),{toast:r}=it(),{data:a,isLoading:i,refetch:o}=Nee(),l=See(),[c,u]=j.useState(!1);j.useState(!1);const[d,h]=j.useState({full_name:"",username:"",email:"",phone:"",address:"",specialty:"",experience:"",bio:"",languages:["Français","Arabe","Anglais"]});j.useEffect(()=>{a&&e&&h(g=>({...g,full_name:a.full_name||"",username:a.username||"",email:e.email||"",phone:a.phone||"",address:a.address||"",specialty:a.specialty||"",experience:a.experience||"",bio:a.bio||""}))},[a,e]),j.useState({currentPassword:"",newPassword:"",confirmPassword:""}),j.useState({notifications:{email:!0,sms:!1,push:!0},privacy:{showEmail:!1,showPhone:!0,showAddress:!1},language:"fr",timezone:"Africa/Casablanca"});const m=async()=>{try{await l.mutateAsync({full_name:d.full_name,username:d.username,phone:d.phone,address:d.address,specialty:d.specialty,experience:d.experience,bio:d.bio}),await Promise.all([o(),n()]),r({title:"Profil mis à jour",description:"Vos informations personnelles ont été sauvegardées avec succès."}),u(!1)}catch(g){r({title:"Erreur",description:g instanceof Error?g.message:"Impossible de sauvegarder le profil.",variant:"destructive"})}},f=g=>g.split(" ").map(x=>x.charAt(0)).join("").toUpperCase().slice(0,2),v=g=>{switch(g){case"admin":return"Administrateur";case"assistant":return"Assistant";default:return"Utilisateur"}},p=g=>{switch(g){case"admin":return"bg-red-100 text-red-800";case"assistant":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return e?i?s.jsx("div",{className:"container mx-auto px-2 sm:px-4 lg:px-6 py-4 sm:py-6 lg:py-8",children:s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx(Qn,{className:"h-8 w-8 animate-spin"}),s.jsx("p",{className:"text-muted-foreground",children:"Chargement du profil..."})]})})}):s.jsxs("div",{className:"container mx-auto px-2 sm:px-4 lg:px-6 py-4 sm:py-6 lg:py-8 space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Mon Profil"}),s.jsx("p",{className:"text-muted-foreground text-sm sm:text-base",children:"Gérez vos informations personnelles et préférences"})]}),s.jsx("div",{className:"flex flex-col sm:flex-row gap-2",children:c?s.jsxs(s.Fragment,{children:[s.jsx(R,{variant:"outline",onClick:()=>u(!1),className:"w-full sm:w-auto",children:"Annuler"}),s.jsxs(R,{onClick:m,className:"gap-2 w-full sm:w-auto",disabled:l.isPending,children:[l.isPending?s.jsx(Qn,{className:"h-4 w-4 animate-spin"}):s.jsx(au,{className:"h-4 w-4"}),l.isPending?"Sauvegarde...":"Sauvegarder"]})]}):s.jsxs(R,{onClick:()=>u(!0),className:"gap-2 w-full sm:w-auto",children:[s.jsx($t,{className:"h-4 w-4"}),"Modifier"]})})]}),s.jsxs(ee,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(Xn,{className:"h-5 w-5"}),"Informations Personnelles"]})}),s.jsxs(te,{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-start gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Jn,{className:"h-16 w-16 sm:h-20 sm:w-20",children:s.jsx(Zn,{className:"bg-primary text-primary-foreground text-lg sm:text-xl",children:f(e.profile.full_name)})}),c&&s.jsx(R,{size:"sm",className:"absolute -bottom-2 -right-2 h-8 w-8 rounded-full",variant:"secondary",children:s.jsx(Mu,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[s.jsx("h3",{className:"text-lg sm:text-xl font-semibold",children:e.profile.full_name||e.profile.username}),s.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 mt-1",children:[s.jsx(wd,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:e.email})]}),s.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-2 mt-2",children:[s.jsx(xr,{className:"h-4 w-4 text-muted-foreground"}),s.jsx(Pe,{className:p(e.profile.role),children:v(e.profile.role)})]})]})]}),s.jsx(nx,{}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"full_name",children:"Nom complet"}),s.jsx(Y,{id:"full_name",value:d.full_name,onChange:g=>h(x=>({...x,full_name:g.target.value})),disabled:!c})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"username",children:"Nom d'utilisateur"}),s.jsx(Y,{id:"username",value:d.username,onChange:g=>h(x=>({...x,username:g.target.value})),disabled:!c})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"email",children:"Email"}),s.jsx(Y,{id:"email",type:"email",value:d.email,disabled:!0,className:"bg-muted"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"phone",children:"Téléphone"}),s.jsx(Y,{id:"phone",value:d.phone,onChange:g=>h(x=>({...x,phone:g.target.value})),disabled:!c})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"address",children:"Adresse"}),s.jsx(Y,{id:"address",value:d.address,onChange:g=>h(x=>({...x,address:g.target.value})),disabled:!c})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"specialty",children:"Spécialité"}),s.jsx(Y,{id:"specialty",value:d.specialty,onChange:g=>h(x=>({...x,specialty:g.target.value})),disabled:!c})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"experience",children:"Expérience"}),s.jsx(Y,{id:"experience",value:d.experience,onChange:g=>h(x=>({...x,experience:g.target.value})),disabled:!c})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"bio",children:"Biographie"}),s.jsx("textarea",{id:"bio",className:"w-full min-h-[100px] px-3 py-2 border border-input bg-background rounded-md text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:d.bio,onChange:g=>h(x=>({...x,bio:g.target.value})),disabled:!c})]})]})]})]}):null}function iTe(){const{user:e}=qo(),{toast:t}=it(),[n,r]=j.useState({twoFactorAuth:!1,sessionTimeout:30,passwordExpiry:90,loginNotifications:!0,deviceTracking:!0,autoLogout:!0}),[a,i]=j.useState({rememberMe:!0,autoLogin:!1,sessionDuration:8,maxConcurrentSessions:3}),[o,l]=j.useState({loginAlerts:!0,securityAlerts:!0,deviceAlerts:!0,emailNotifications:!0,smsNotifications:!1,pushNotifications:!0});j.useState({dataSharing:!1,analytics:!0,crashReports:!0,marketingEmails:!1,profileVisibility:"private"}),j.useState({language:"fr",timezone:"Africa/Casablanca",dateFormat:"DD/MM/YYYY",timeFormat:"24h",theme:"system"});const[c]=j.useState([{id:1,device:"MacBook Pro",browser:"Chrome",location:"Rabat, Maroc",lastActive:"Maintenant",current:!0,ip:"192.168.1.100"},{id:2,device:"iPhone 14",browser:"Safari",location:"Rabat, Maroc",lastActive:"Il y a 2 heures",current:!1,ip:"192.168.1.101"}]),u=()=>{t({title:"Paramètres de sécurité sauvegardés",description:"Vos paramètres de sécurité ont été mis à jour."})},d=()=>{t({title:"Paramètres de session sauvegardés",description:"Vos paramètres de session ont été mis à jour."})},h=()=>{t({title:"Paramètres de notification sauvegardés",description:"Vos paramètres de notification ont été mis à jour."})},m=p=>{t({title:"Session terminée",description:"La session a été fermée avec succès."})},f=()=>{t({title:"Toutes les sessions terminées",description:"Toutes les autres sessions ont été fermées."})},v=p=>p.includes("iPhone")||p.includes("Android")?s.jsx(DU,{className:"h-4 w-4"}):p.includes("iPad")||p.includes("Tablet")?s.jsx($U,{className:"h-4 w-4"}):s.jsx(q_,{className:"h-4 w-4"});return e?s.jsxs("div",{className:"container mx-auto px-2 sm:px-4 lg:px-6 py-4 sm:py-6 lg:py-8 space-y-6",children:[s.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Paramètres de Connexion"}),s.jsx("p",{className:"text-muted-foreground text-sm sm:text-base",children:"Gérez vos paramètres de sécurité et de session"})]})}),s.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[s.jsxs(ee,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(xr,{className:"h-5 w-5"}),"Sécurité"]})}),s.jsxs(te,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(O,{children:"Authentification à deux facteurs"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Ajoutez une couche de sécurité supplémentaire"})]}),s.jsx(Rr,{checked:n.twoFactorAuth,onCheckedChange:p=>r(g=>({...g,twoFactorAuth:p}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{children:"Délai d'expiration de session (minutes)"}),s.jsxs(je,{value:n.sessionTimeout.toString(),onValueChange:p=>r(g=>({...g,sessionTimeout:parseInt(p)})),children:[s.jsx(xe,{children:s.jsx(be,{})}),s.jsxs(ye,{children:[s.jsx(z,{value:"15",children:"15 minutes"}),s.jsx(z,{value:"30",children:"30 minutes"}),s.jsx(z,{value:"60",children:"1 heure"}),s.jsx(z,{value:"120",children:"2 heures"}),s.jsx(z,{value:"480",children:"8 heures"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{children:"Expiration du mot de passe (jours)"}),s.jsxs(je,{value:n.passwordExpiry.toString(),onValueChange:p=>r(g=>({...g,passwordExpiry:parseInt(p)})),children:[s.jsx(xe,{children:s.jsx(be,{})}),s.jsxs(ye,{children:[s.jsx(z,{value:"30",children:"30 jours"}),s.jsx(z,{value:"60",children:"60 jours"}),s.jsx(z,{value:"90",children:"90 jours"}),s.jsx(z,{value:"180",children:"6 mois"}),s.jsx(z,{value:"365",children:"1 an"})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(O,{children:"Notifications de connexion"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevez des alertes pour les nouvelles connexions"})]}),s.jsx(Rr,{checked:n.loginNotifications,onCheckedChange:p=>r(g=>({...g,loginNotifications:p}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(O,{children:"Suivi des appareils"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Surveillez les appareils connectés"})]}),s.jsx(Rr,{checked:n.deviceTracking,onCheckedChange:p=>r(g=>({...g,deviceTracking:p}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(O,{children:"Déconnexion automatique"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Déconnexion après inactivité"})]}),s.jsx(Rr,{checked:n.autoLogout,onCheckedChange:p=>r(g=>({...g,autoLogout:p}))})]})]}),s.jsxs(R,{onClick:u,className:"w-full gap-2",children:[s.jsx(au,{className:"h-4 w-4"}),"Sauvegarder les paramètres de sécurité"]})]})]}),s.jsxs(ee,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(q_,{className:"h-5 w-5"}),"Sessions Actives"]})}),s.jsxs(te,{className:"space-y-4",children:[s.jsx("div",{className:"space-y-3",children:c.map(p=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[v(p.device),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:p.device}),p.current&&s.jsx(Pe,{variant:"secondary",className:"text-xs",children:"Actuel"})]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[p.browser," • ",p.location]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Dernière activité: ",p.lastActive]})]})]}),!p.current&&s.jsx(R,{variant:"outline",size:"sm",onClick:()=>m(p.id),children:"Terminer"})]},p.id))}),s.jsx(nx,{}),s.jsx(R,{variant:"destructive",onClick:f,className:"w-full",children:"Terminer toutes les autres sessions"})]})]}),s.jsxs(ee,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(Qt,{className:"h-5 w-5"}),"Gestion des Sessions"]})}),s.jsxs(te,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(O,{children:"Se souvenir de moi"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Restez connecté entre les sessions"})]}),s.jsx(Rr,{checked:a.rememberMe,onCheckedChange:p=>i(g=>({...g,rememberMe:p}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(O,{children:"Connexion automatique"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Connexion automatique au démarrage"})]}),s.jsx(Rr,{checked:a.autoLogin,onCheckedChange:p=>i(g=>({...g,autoLogin:p}))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{children:"Durée de session (heures)"}),s.jsxs(je,{value:a.sessionDuration.toString(),onValueChange:p=>i(g=>({...g,sessionDuration:parseInt(p)})),children:[s.jsx(xe,{children:s.jsx(be,{})}),s.jsxs(ye,{children:[s.jsx(z,{value:"1",children:"1 heure"}),s.jsx(z,{value:"4",children:"4 heures"}),s.jsx(z,{value:"8",children:"8 heures"}),s.jsx(z,{value:"12",children:"12 heures"}),s.jsx(z,{value:"24",children:"24 heures"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{children:"Sessions simultanées maximum"}),s.jsxs(je,{value:a.maxConcurrentSessions.toString(),onValueChange:p=>i(g=>({...g,maxConcurrentSessions:parseInt(p)})),children:[s.jsx(xe,{children:s.jsx(be,{})}),s.jsxs(ye,{children:[s.jsx(z,{value:"1",children:"1 session"}),s.jsx(z,{value:"2",children:"2 sessions"}),s.jsx(z,{value:"3",children:"3 sessions"}),s.jsx(z,{value:"5",children:"5 sessions"}),s.jsx(z,{value:"10",children:"10 sessions"})]})]})]})]}),s.jsxs(R,{onClick:d,className:"w-full gap-2",children:[s.jsx(au,{className:"h-4 w-4"}),"Sauvegarder les paramètres de session"]})]})]}),s.jsxs(ee,{children:[s.jsx(he,{children:s.jsxs(me,{className:"flex items-center gap-2",children:[s.jsx(xU,{className:"h-5 w-5"}),"Notifications de Sécurité"]})}),s.jsxs(te,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(O,{children:"Alertes de connexion"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications pour les nouvelles connexions"})]}),s.jsx(Rr,{checked:o.loginAlerts,onCheckedChange:p=>l(g=>({...g,loginAlerts:p}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(O,{children:"Alertes de sécurité"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications pour les événements de sécurité"})]}),s.jsx(Rr,{checked:o.securityAlerts,onCheckedChange:p=>l(g=>({...g,securityAlerts:p}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(O,{children:"Alertes d'appareil"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Notifications pour les nouveaux appareils"})]}),s.jsx(Rr,{checked:o.deviceAlerts,onCheckedChange:p=>l(g=>({...g,deviceAlerts:p}))})]}),s.jsx(nx,{}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(O,{children:"Notifications par email"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevez les alertes par email"})]}),s.jsx(Rr,{checked:o.emailNotifications,onCheckedChange:p=>l(g=>({...g,emailNotifications:p}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(O,{children:"Notifications SMS"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevez les alertes par SMS"})]}),s.jsx(Rr,{checked:o.smsNotifications,onCheckedChange:p=>l(g=>({...g,smsNotifications:p}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(O,{children:"Notifications push"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Recevez les alertes push"})]}),s.jsx(Rr,{checked:o.pushNotifications,onCheckedChange:p=>l(g=>({...g,pushNotifications:p}))})]})]}),s.jsxs(R,{onClick:h,className:"w-full gap-2",children:[s.jsx(au,{className:"h-4 w-4"}),"Sauvegarder les paramètres de notification"]})]})]})]})]}):null}function oTe(){const[e,t]=j.useState(""),[n,r]=j.useState(""),[a,i]=j.useState(!1),[o,l]=j.useState(!1),[c,u]=j.useState(""),[d,h]=j.useState(!1),[m,f]=j.useState(!1),v=Td(),{toast:p}=it();yK(),j.useEffect(()=>{(async()=>{try{const{data:{session:b},error:C}=await Se.auth.getSession();if(C){u("Lien de réinitialisation invalide ou expiré");return}b?f(!0):u("Lien de réinitialisation invalide ou expiré")}catch{u("Erreur lors de la vérification du lien de réinitialisation")}})()},[]);const g=y=>y.length<8?"Le mot de passe doit contenir au moins 8 caractères":/[A-Z]/.test(y)?/[a-z]/.test(y)?/\d/.test(y)?/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>?]/.test(y)?null:"Le mot de passe doit contenir au moins un caractère spécial":"Le mot de passe doit contenir au moins un chiffre":"Le mot de passe doit contenir au moins une lettre minuscule":"Le mot de passe doit contenir au moins une lettre majuscule",x=async y=>{if(y.preventDefault(),u(""),!e||!n){p({title:"Champs requis",description:"Veuillez remplir tous les champs",variant:"destructive"});return}if(e!==n){p({title:"Erreur",description:"Les mots de passe ne correspondent pas",variant:"destructive"});return}const b=g(e);if(b){p({title:"Mot de passe invalide",description:b,variant:"destructive"});return}h(!0);try{const{error:C}=await Se.auth.updateUser({password:e});if(C)throw C;p({title:"Mot de passe mis à jour",description:"Votre mot de passe a été réinitialisé avec succès."}),v("/login")}catch(C){u(C instanceof Error?C.message:"Une erreur est survenue lors de la mise à jour du mot de passe")}finally{h(!1)}};return!m&&!c?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-green-50 dark:from-gray-900 dark:to-gray-800 px-4",children:s.jsx(ee,{className:"w-full max-w-md",children:s.jsxs(te,{className:"pt-6",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx(Qn,{className:"h-8 w-8 animate-spin"})}),s.jsx("p",{className:"text-center mt-4 text-sm text-muted-foreground",children:"Vérification du lien de réinitialisation..."})]})})}):c?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-green-50 dark:from-gray-900 dark:to-gray-800 px-4",children:s.jsxs(ee,{className:"w-full max-w-md",children:[s.jsxs(he,{className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:s.jsx(ft,{className:"h-8 w-8 text-red-600"})})}),s.jsx(me,{className:"text-2xl font-bold text-red-600",children:"Lien invalide"})]}),s.jsxs(te,{children:[s.jsx(Kg,{className:"mb-4",children:s.jsx(Gg,{children:c})}),s.jsx(R,{onClick:()=>v("/login"),className:"w-full",children:"Retour à la connexion"})]})]})}):s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-green-50 dark:from-gray-900 dark:to-gray-800 px-4",children:s.jsxs(ee,{className:"w-full max-w-md",children:[s.jsxs(he,{className:"text-center",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"p-3 bg-primary/10 rounded-full",children:s.jsx(ft,{className:"h-8 w-8 text-primary"})})}),s.jsx(me,{className:"text-2xl font-bold",children:"VetPro CRM3"}),s.jsx(qu,{children:"Définir un nouveau mot de passe"})]}),s.jsx(te,{children:s.jsxs("form",{onSubmit:x,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"password",children:"Nouveau mot de passe"}),s.jsxs("div",{className:"relative",children:[s.jsx(Y,{id:"password",type:a?"text":"password",value:e,onChange:y=>t(y.target.value),placeholder:"Votre nouveau mot de passe",required:!0}),s.jsx(R,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>i(!a),children:a?s.jsx(Tb,{className:"h-4 w-4"}):s.jsx(An,{className:"h-4 w-4"})})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Le mot de passe doit contenir au moins 8 caractères, une majuscule, une minuscule, un chiffre et un caractère spécial."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(O,{htmlFor:"confirmPassword",children:"Confirmer le mot de passe"}),s.jsxs("div",{className:"relative",children:[s.jsx(Y,{id:"confirmPassword",type:o?"text":"password",value:n,onChange:y=>r(y.target.value),placeholder:"Confirmer votre nouveau mot de passe",required:!0}),s.jsx(R,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>l(!o),children:o?s.jsx(Tb,{className:"h-4 w-4"}):s.jsx(An,{className:"h-4 w-4"})})]})]}),s.jsx(R,{type:"submit",className:"w-full",disabled:d,children:d?s.jsxs(s.Fragment,{children:[s.jsx(Qn,{className:"mr-2 h-4 w-4 animate-spin"}),"Mise à jour..."]}):"Mettre à jour le mot de passe"})]})})]})})}const lTe=new iH({defaultOptions:{queries:{retry:(e,t)=>(t==null?void 0:t.status)>=400&&(t==null?void 0:t.status)<500?!1:e<2,staleTime:3*60*1e3,gcTime:8*60*1e3,refetchOnWindowFocus:!1,refetchOnReconnect:"always",refetchOnMount:!0,networkMode:"offlineFirst"},mutations:{retry:1,networkMode:"offlineFirst"}}}),cTe=()=>s.jsx(AJ,{children:s.jsx(oH,{client:lTe,children:s.jsxs($W,{children:[s.jsx(j7,{}),s.jsx(J7,{}),s.jsx(_J,{children:s.jsx(WS,{children:s.jsx(Oee,{children:s.jsx(jK,{children:s.jsx(pK,{children:s.jsx("div",{className:"min-h-screen bg-background w-full text-foreground overflow-x-hidden",children:s.jsxs(oK,{children:[s.jsx(mn,{path:"/",element:s.jsx($J,{})}),s.jsx(mn,{path:"/login",element:s.jsx(IJ,{children:s.jsx(MJ,{})})}),s.jsx(mn,{path:"/register",element:s.jsx(RJ,{})}),s.jsx(mn,{path:"/dashboard",element:s.jsxs(dr,{children:[s.jsx(ur,{}),s.jsx(LAe,{})]})}),s.jsx(mn,{path:"/clients",element:s.jsxs(dr,{children:[s.jsx(ur,{}),s.jsx(eke,{})]})}),s.jsx(mn,{path:"/pets",element:s.jsxs(dr,{children:[s.jsx(ur,{}),s.jsx(ake,{})]})}),s.jsx(mn,{path:"/appointments",element:s.jsxs(dr,{children:[s.jsx(ur,{}),s.jsx(hke,{})]})}),s.jsx(mn,{path:"/consultations",element:s.jsxs(dr,{children:[s.jsx(ur,{}),s.jsx(vke,{})]})}),s.jsx(mn,{path:"/history",element:s.jsxs(dr,{children:[s.jsx(ur,{}),s.jsx(jke,{})]})}),s.jsx(mn,{path:"/farm",element:s.jsxs(dr,{children:[s.jsx(ur,{}),s.jsx(_ke,{})]})}),s.jsx(mn,{path:"/vaccinations",element:s.jsxs(dr,{children:[s.jsx(ur,{}),s.jsx(Ake,{})]})}),s.jsx(mn,{path:"/antiparasites",element:s.jsxs(dr,{children:[s.jsx(ur,{}),s.jsx(Rke,{})]})}),s.jsx(mn,{path:"/stock",element:s.jsxs(dr,{children:[s.jsx(ur,{}),s.jsx(Wke,{})]})}),s.jsx(mn,{path:"/accounting",element:s.jsxs(dr,{children:[s.jsx(ur,{}),s.jsx(Kke,{})]})}),s.jsx(mn,{path:"/test-stats",element:s.jsxs(dr,{children:[s.jsx(ur,{}),s.jsx(Yke,{})]})}),s.jsx(mn,{path:"/simple-test",element:s.jsxs(dr,{children:[s.jsx(ur,{}),s.jsx(Xke,{})]})}),s.jsx(mn,{path:"/settings",element:s.jsxs(dr,{children:[s.jsx(ur,{}),s.jsx(tTe,{})]})}),s.jsx(mn,{path:"/profile",element:s.jsxs(dr,{children:[s.jsx(ur,{}),s.jsx(aTe,{})]})}),s.jsx(mn,{path:"/auth-settings",element:s.jsxs(dr,{children:[s.jsx(ur,{}),s.jsx(iTe,{})]})}),s.jsx(mn,{path:"/reset-password",element:s.jsx(oTe,{})}),s.jsx(mn,{path:"*",element:s.jsx(Jke,{})})]})})})})})})})]})})});YM(document.getElementById("root")).render(s.jsx(cTe,{}));
